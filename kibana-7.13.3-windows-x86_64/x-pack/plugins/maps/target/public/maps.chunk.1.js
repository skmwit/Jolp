/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.maps_bundle_jsonpfunction=window.maps_bundle_jsonpfunction||[]).push([[1],Array(36).concat([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return createLayerInstance})),__webpack_require__.d(__webpack_exports__,"s",(function(){return getMapSettings})),__webpack_require__.d(__webpack_exports__,"J",(function(){return hasMapSettingsChanges})),__webpack_require__.d(__webpack_exports__,"v",(function(){return getOpenTooltips})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getHasLockedTooltips})),__webpack_require__.d(__webpack_exports__,"r",(function(){return getMapReady})),__webpack_require__.d(__webpack_exports__,"q",(function(){return getMapInitError})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getGoto})),__webpack_require__.d(__webpack_exports__,"D",(function(){return getSelectedLayerId})),__webpack_require__.d(__webpack_exports__,"m",(function(){return getLayerListRaw})),__webpack_require__.d(__webpack_exports__,"H",(function(){return getWaitingForMapReadyLayerListRaw})),__webpack_require__.d(__webpack_exports__,"z",(function(){return getScrollZoom})),__webpack_require__.d(__webpack_exports__,"n",(function(){return getMapBuffer})),__webpack_require__.d(__webpack_exports__,"t",(function(){return getMapZoom})),__webpack_require__.d(__webpack_exports__,"o",(function(){return getMapCenter})),__webpack_require__.d(__webpack_exports__,"u",(function(){return getMouseCoordinates})),__webpack_require__.d(__webpack_exports__,"G",(function(){return getTimeFilters})),__webpack_require__.d(__webpack_exports__,"w",(function(){return getQuery})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getFilters})),__webpack_require__.d(__webpack_exports__,"A",(function(){return getSearchSessionId})),__webpack_require__.d(__webpack_exports__,"B",(function(){return getSearchSessionMapBuffer})),__webpack_require__.d(__webpack_exports__,"N",(function(){return isUsingSearch})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getDrawState})),__webpack_require__.d(__webpack_exports__,"L",(function(){return isDrawingFilter})),__webpack_require__.d(__webpack_exports__,"y",(function(){return getRefreshConfig})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getDataRequestDescriptor})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getDataFilters})),__webpack_require__.d(__webpack_exports__,"F",(function(){return getSpatialFiltersLayer})),__webpack_require__.d(__webpack_exports__,"k",(function(){return getLayerList})),__webpack_require__.d(__webpack_exports__,"l",(function(){return getLayerListConfigOnly})),__webpack_require__.d(__webpack_exports__,"j",(function(){return getLayerById})),__webpack_require__.d(__webpack_exports__,"i",(function(){return getHiddenLayerIds})),__webpack_require__.d(__webpack_exports__,"C",(function(){return getSelectedLayer})),__webpack_require__.d(__webpack_exports__,"K",(function(){return hasPreviewLayers})),__webpack_require__.d(__webpack_exports__,"M",(function(){return isLoadingPreviewLayers})),__webpack_require__.d(__webpack_exports__,"p",(function(){return getMapColors})),__webpack_require__.d(__webpack_exports__,"E",(function(){return getSelectedLayerJoinDescriptors})),__webpack_require__.d(__webpack_exports__,"x",(function(){return getQueryableUniqueIndexPatternIds})),__webpack_require__.d(__webpack_exports__,"I",(function(){return hasDirtyState})),__webpack_require__.d(__webpack_exports__,"a",(function(){return areLayersLoaded}));var lib=__webpack_require__(248),external_kbnSharedDeps_Lodash_=__webpack_require__(23),external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_),tile_layer=__webpack_require__(76),vector_tile_layer=__webpack_require__(111),vector_layer=__webpack_require__(41),vector_style=__webpack_require__(51),heatmap_layer=__webpack_require__(105),blended_vector_layer=__webpack_require__(201),kibana_services=__webpack_require__(4),non_serializable_instances=__webpack_require__(70),tiled_vector_layer=__webpack_require__(144),copy_persistent_state=__webpack_require__(72),external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),constants=__webpack_require__(0),get_agg_key=__webpack_require__(67),es_doc_field=__webpack_require__(75),es_agg_source=__webpack_require__(87),elasticsearch_util=__webpack_require__(40),valid_string_config=__webpack_require__(84);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const TERMS_BUCKET_KEYS_TO_IGNORE=["key","doc_count"];class es_term_source_ESTermSource extends es_agg_source.a{static createDescriptor(descriptor){const normalizedDescriptor=es_agg_source.a.createDescriptor(descriptor);if(!Object(valid_string_config.a)(descriptor.term))throw new Error("Cannot create an ESTermSource without a term");return{...normalizedDescriptor,indexPatternTitle:descriptor.indexPatternTitle?descriptor.indexPatternTitle:descriptor.indexPatternId,term:descriptor.term,type:constants.SOURCE_TYPES.ES_TERM_SOURCE}}constructor(descriptor,inspectorAdapters){const sourceDescriptor=es_term_source_ESTermSource.createDescriptor(descriptor);super(sourceDescriptor,inspectorAdapters),_defineProperty(this,"_termField",void 0),_defineProperty(this,"_descriptor",void 0),this._descriptor=sourceDescriptor,this._termField=new es_doc_field.a({fieldName:this._descriptor.term,source:this,origin:this.getOriginForField()})}hasCompleteConfig(){return external_kbnSharedDeps_Lodash_default.a.has(this._descriptor,"indexPatternId")&&external_kbnSharedDeps_Lodash_default.a.has(this._descriptor,"term")}getTermField(){return this._termField}getOriginForField(){return constants.FIELD_ORIGIN.JOIN}getWhereQuery(){return this._descriptor.whereQuery}getAggKey(aggType,fieldName){return Object(get_agg_key.a)({aggType:aggType,aggFieldName:fieldName,rightSourceId:this._descriptor.id})}getAggLabel(aggType,fieldLabel){return aggType===constants.AGG_TYPE.COUNT?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esJoin.countLabel",{defaultMessage:"Count of {indexPatternTitle}",values:{indexPatternTitle:this._descriptor.indexPatternTitle}}):super.getAggLabel(aggType,fieldLabel)}async getPropertiesMap(searchFilters,leftSourceName,leftFieldName,registerCancelCallback){if(!this.hasCompleteConfig())return new Map;const indexPattern=await this.getIndexPattern(),searchSource=await this.makeSearchSource(searchFilters,0);searchSource.setField("trackTotalHits",!1);const termsField=Object(elasticsearch_util.l)(indexPattern,this._termField.getName()),termsAgg={size:void 0!==this._descriptor.size?this._descriptor.size:constants.DEFAULT_MAX_BUCKETS_LIMIT};searchSource.setField("aggs",{join:{terms:Object(elasticsearch_util.a)(termsAgg,termsField),aggs:{...this.getValueAggsDsl(indexPattern)}}});return function(rawEsData,countPropertyName){const propertiesMap=new Map;return external_kbnSharedDeps_Lodash_default.a.get(rawEsData,["aggregations","join","buckets"],[]).forEach(termBucket=>{const properties=Object(elasticsearch_util.j)(termBucket,TERMS_BUCKET_KEYS_TO_IGNORE);countPropertyName&&(properties[countPropertyName]=termBucket.doc_count),propertiesMap.set(termBucket.key.toString(),properties)}),propertiesMap}(await this._runEsQuery({requestId:this.getId(),requestName:`${this._descriptor.indexPatternTitle}.${this._termField.getName()}`,searchSource:searchSource,registerCancelCallback:registerCancelCallback,requestDescription:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esJoin.joinDescription",{defaultMessage:"Elasticsearch terms aggregation request, left source: {leftSource}, right source: {rightSource}",values:{leftSource:`${leftSourceName}:${leftFieldName}`,rightSource:`${this._descriptor.indexPatternTitle}:${this._termField.getName()}`}}),searchSessionId:searchFilters.searchSessionId}),this.getAggKey(constants.AGG_TYPE.COUNT))}isFilterByMapBounds(){return!1}async getDisplayName(){return"es_table "+this.getIndexPatternId()}getFieldNames(){return this.getMetricFields().map(esAggMetricField=>esAggMetricField.getName())}getSyncMeta(){return void 0!==this._descriptor.size?{size:this._descriptor.size}:null}getRightFields(){return this.getMetricFields()}}_defineProperty(es_term_source_ESTermSource,"type",constants.SOURCE_TYPES.ES_TERM_SOURCE);var style_util=__webpack_require__(65),uuid=__webpack_require__(359),uuid_default=__webpack_require__.n(uuid),vector_source=__webpack_require__(89),inline_field=__webpack_require__(209);function table_source_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class table_source_TableSource extends vector_source.a{static createDescriptor(descriptor){return{type:constants.SOURCE_TYPES.TABLE_SOURCE,__rows:descriptor.__rows||[],__columns:descriptor.__columns||[],term:descriptor.term||"",id:descriptor.id||uuid_default()()}}constructor(descriptor,inspectorAdapters){const sourceDescriptor=table_source_TableSource.createDescriptor(descriptor);super(sourceDescriptor,inspectorAdapters),table_source_defineProperty(this,"_descriptor",void 0),this._descriptor=sourceDescriptor}async getDisplayName(){return"table source "+uuid_default()()}getSyncMeta(){return null}async getPropertiesMap(searchFilters,leftSourceName,leftFieldName,registerCancelCallback){const propertiesMap=new Map,fieldNames=await this.getFieldNames();for(let i=0;i<this._descriptor.__rows.length;i++){const row=this._descriptor.__rows[i];let propKey;const props={};for(const key in row)row.hasOwnProperty(key)&&(key===this._descriptor.term&&row[key]&&(propKey=row[key]),fieldNames.indexOf(key)>=0&&key!==this._descriptor.term&&(props[key]=row[key]));propKey&&!propertiesMap.has(propKey.toString())&&propertiesMap.set(propKey.toString(),props)}return propertiesMap}getTermField(){const column=this._descriptor.__columns.find(c=>c.name===this._descriptor.term);if(!column)throw new Error(`Cannot find column for ${this._descriptor.term} in ${JSON.stringify(this._descriptor.__columns)}`);return new inline_field.a({fieldName:column.name,source:this,origin:constants.FIELD_ORIGIN.JOIN,dataType:column.type})}getWhereQuery(){}hasCompleteConfig(){return!0}getId(){return this._descriptor.id}getRightFields(){return this._descriptor.__columns.map(column=>new inline_field.a({fieldName:column.name,source:this,origin:constants.FIELD_ORIGIN.JOIN,dataType:column.type}))}getFieldNames(){return this._descriptor.__columns.map(column=>column.name)}canFormatFeatureProperties(){return!1}createField({fieldName:fieldName}){const field=this.getFieldByName(fieldName);if(!field)throw new Error("Cannot find field for "+fieldName);return field}async getBoundsForFilters(boundsFilters,registerCancelCallback){return null}getFieldByName(fieldName){const column=this._descriptor.__columns.find(c=>c.name===fieldName);return column?new inline_field.a({fieldName:column.name,source:this,origin:constants.FIELD_ORIGIN.JOIN,dataType:column.type}):null}getFields(){throw new Error("must implement")}async getGeoJsonWithMeta(layerName,searchFilters,registerCancelCallback,isRequestStillActive){throw new Error("TableSource cannot return GeoJson")}async getLeftJoinFields(){throw new Error("TableSource cannot be used as a left-layer in a term join")}getSourceTooltipContent(sourceDataRequest){throw new Error("must add tooltip content")}async getSupportedShapeTypes(){return[]}isBoundsAware(){return!1}}function inner_join_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}table_source_defineProperty(table_source_TableSource,"type",constants.SOURCE_TYPES.TABLE_SOURCE);class inner_join_InnerJoin{constructor(joinDescriptor,leftSource){inner_join_defineProperty(this,"_descriptor",void 0),inner_join_defineProperty(this,"_rightSource",void 0),inner_join_defineProperty(this,"_leftField",void 0),this._descriptor=joinDescriptor;const inspectorAdapters=leftSource.getInspectorAdapters();this._rightSource=function(descriptor,inspectorAdapters){if(descriptor)return descriptor.type===constants.SOURCE_TYPES.ES_TERM_SOURCE&&"indexPatternId"in descriptor&&"term"in descriptor?new es_term_source_ESTermSource(descriptor,inspectorAdapters):descriptor.type===constants.SOURCE_TYPES.TABLE_SOURCE?new table_source_TableSource(descriptor,inspectorAdapters):void 0}(this._descriptor.right,inspectorAdapters),this._leftField=joinDescriptor.leftField?leftSource.createField({fieldName:joinDescriptor.leftField}):void 0}destroy(){this._rightSource&&this._rightSource.destroy()}hasCompleteConfig(){return!(!this._leftField||!this._rightSource)&&this._rightSource.hasCompleteConfig()}getJoinFields(){return this._rightSource?this._rightSource.getRightFields():[]}getSourceDataRequestId(){return"join_source_"+this._rightSource.getId()}getSourceMetaDataRequestId(){return`${this.getSourceDataRequestId()}_${constants.META_DATA_REQUEST_ID_SUFFIX}`}getSourceFormattersDataRequestId(){return`${this.getSourceDataRequestId()}_${constants.FORMATTERS_DATA_REQUEST_ID_SUFFIX}`}getLeftField(){if(!this._leftField)throw new Error("Cannot get leftField from InnerJoin with incomplete config");return this._leftField}joinPropertiesToFeature(feature,propertiesMap){if(!feature.properties||!this._leftField||!this._rightSource)return!1;const rightMetricFields=this._rightSource.getRightFields();for(let j=0;j<rightMetricFields.length;j++){const metricPropertyKey=rightMetricFields[j].getName();delete feature.properties[metricPropertyKey];const stylePropertyPrefix=Object(style_util.d)(metricPropertyKey);Object.keys(feature.properties).forEach(featurePropertyKey=>{featurePropertyKey.length>=stylePropertyPrefix.length&&featurePropertyKey.substring(0,stylePropertyPrefix.length)===stylePropertyPrefix&&delete feature.properties[featurePropertyKey]})}const joinKey=feature.properties[this._leftField.getName()],coercedKey=null==joinKey?null:joinKey.toString();return!(null===coercedKey||!propertiesMap.has(coercedKey))&&(Object.assign(feature.properties,propertiesMap.get(coercedKey)),!0)}getRightJoinSource(){if(!this._rightSource)throw new Error("Cannot get rightSource from InnerJoin with incomplete config");return this._rightSource}toDescriptor(){return this._descriptor}async getTooltipProperties(properties){return await this.getRightJoinSource().getTooltipProperties(properties)}getIndexPatternIds(){return this.getRightJoinSource().getIndexPatternIds()}getQueryableIndexPatternIds(){return this.getRightJoinSource().getQueryableIndexPatternIds()}getWhereQuery(){return this.getRightJoinSource().getWhereQuery()}}var source_registry=__webpack_require__(45),geojson_file_source=__webpack_require__(217);function createLayerInstance(layerDescriptor,inspectorAdapters,chartsPaletteServiceGetColor){const source=function(sourceDescriptor,inspectorAdapters){if(null===sourceDescriptor)throw new Error("Source-descriptor should be initialized");const source=Object(source_registry.a)(sourceDescriptor.type);if(!source)throw new Error("Unrecognized sourceType "+sourceDescriptor.type);return new source.ConstructorFunction(sourceDescriptor,inspectorAdapters)}(layerDescriptor.sourceDescriptor,inspectorAdapters);switch(layerDescriptor.type){case tile_layer.a.type:return new tile_layer.a({layerDescriptor:layerDescriptor,source:source});case vector_layer.a.type:const joins=[],vectorLayerDescriptor=layerDescriptor;return vectorLayerDescriptor.joins&&vectorLayerDescriptor.joins.forEach(joinDescriptor=>{const join=new inner_join_InnerJoin(joinDescriptor,source);joins.push(join)}),new vector_layer.a({layerDescriptor:vectorLayerDescriptor,source:source,joins:joins,chartsPaletteServiceGetColor:chartsPaletteServiceGetColor});case vector_tile_layer.a.type:return new vector_tile_layer.a({layerDescriptor:layerDescriptor,source:source});case heatmap_layer.a.type:return new heatmap_layer.a({layerDescriptor:layerDescriptor,source:source});case blended_vector_layer.a.type:return new blended_vector_layer.a({layerDescriptor:layerDescriptor,source:source,chartsPaletteServiceGetColor:chartsPaletteServiceGetColor});case tiled_vector_layer.a.type:return new tiled_vector_layer.a({layerDescriptor:layerDescriptor,source:source});default:throw new Error("Unrecognized layerType "+layerDescriptor.type)}}const getMapSettings=({map:map})=>map.settings,hasMapSettingsChanges=Object(lib.createSelector)(getMapSettings,({map:map})=>map.__rollbackSettings,(settings,rollbackSettings)=>!!rollbackSettings&&!external_kbnSharedDeps_Lodash_default.a.isEqual(settings,rollbackSettings)),getOpenTooltips=({map:map})=>map&&map.openTooltips?map.openTooltips:[],getHasLockedTooltips=state=>getOpenTooltips(state).some(({isLocked:isLocked})=>isLocked),getMapReady=({map:map})=>map&&map.ready,getMapInitError=({map:map})=>map.mapInitError,getGoto=({map:map})=>map&&map.goto,getSelectedLayerId=({map:map})=>map.selectedLayerId&&map.layerList?map.selectedLayerId:null,getLayerListRaw=({map:map})=>map.layerList?map.layerList:[],getWaitingForMapReadyLayerListRaw=({map:map})=>map.waitingForMapReadyLayerList?map.waitingForMapReadyLayerList:[],getScrollZoom=({map:map})=>map.mapState.scrollZoom,getMapBuffer=({map:map})=>map.mapState.buffer,getMapZoom=({map:map})=>map.mapState.zoom?map.mapState.zoom:0,getMapCenter=({map:map})=>map.mapState.center?map.mapState.center:{lat:0,lon:0},getMouseCoordinates=({map:map})=>map.mapState.mouseCoordinates,getTimeFilters=({map:map})=>map.mapState.timeFilters?map.mapState.timeFilters:Object(kibana_services.J)().getTime(),getQuery=({map:map})=>map.mapState.query,getFilters=({map:map})=>map.mapState.filters,getSearchSessionId=({map:map})=>map.mapState.searchSessionId,getSearchSessionMapBuffer=({map:map})=>map.mapState.searchSessionMapBuffer,isUsingSearch=state=>{const filters=getFilters(state).filter(filter=>!filter.meta.disabled),queryString=external_kbnSharedDeps_Lodash_default.a.get(getQuery(state),"query","");return!!filters.length||!!queryString.length},getDrawState=({map:map})=>map.mapState.drawState,isDrawingFilter=({map:map})=>!!map.mapState.drawState,getRefreshConfig=({map:map})=>{if(map.mapState.refreshConfig)return map.mapState.refreshConfig;const refreshInterval=Object(kibana_services.J)().getRefreshInterval();return{isPaused:refreshInterval.pause,interval:refreshInterval.value}};function getDataRequestDescriptor(state,layerId,dataId){const layerDescriptor=function(state,layerId){return getLayerListRaw(state).find(layer=>layer.id===layerId)}(state,layerId);if(layerDescriptor&&layerDescriptor.__dataRequests)return layerDescriptor.__dataRequests.find(dataRequest=>dataRequest.dataId===dataId)}const getDataFilters=Object(lib.createSelector)(({map:map})=>map.mapState.extent,getMapBuffer,getMapZoom,getTimeFilters,({map:map})=>map.mapState.refreshTimerLastTriggeredAt,getQuery,getFilters,getSearchSessionId,getSearchSessionMapBuffer,(mapExtent,mapBuffer,mapZoom,timeFilters,refreshTimerLastTriggeredAt,query,filters,searchSessionId,searchSessionMapBuffer)=>({extent:mapExtent,buffer:searchSessionId&&searchSessionMapBuffer?searchSessionMapBuffer:mapBuffer,zoom:mapZoom,timeFilters:timeFilters,refreshTimerLastTriggeredAt:refreshTimerLastTriggeredAt,query:query,filters:filters,searchSessionId:searchSessionId})),getSpatialFiltersLayer=Object(lib.createSelector)(getFilters,getMapSettings,(filters,settings)=>{const featureCollection={type:"FeatureCollection",features:Object(elasticsearch_util.i)(filters)},geoJsonSourceDescriptor=geojson_file_source.a.createDescriptor({__featureCollection:featureCollection,name:"spatialFilters"});return new vector_layer.a({layerDescriptor:vector_layer.a.createDescriptor({id:constants.SPATIAL_FILTERS_LAYER_ID,visible:settings.showSpatialFilters,alpha:settings.spatialFiltersAlpa,__dataRequests:[{dataId:constants.SOURCE_DATA_REQUEST_ID,data:featureCollection}],style:vector_style.a.createDescriptor({[constants.VECTOR_STYLES.FILL_COLOR]:{type:constants.STYLE_TYPE.STATIC,options:{color:settings.spatialFiltersFillColor}},[constants.VECTOR_STYLES.LINE_COLOR]:{type:constants.STYLE_TYPE.STATIC,options:{color:settings.spatialFiltersLineColor}}})}),source:new geojson_file_source.a(geoJsonSourceDescriptor)})}),getLayerList=Object(lib.createSelector)(getLayerListRaw,non_serializable_instances.d,non_serializable_instances.b,(layerDescriptorList,inspectorAdapters,chartsPaletteServiceGetColor)=>layerDescriptorList.map(layerDescriptor=>createLayerInstance(layerDescriptor,inspectorAdapters,chartsPaletteServiceGetColor))),getLayerListConfigOnly=Object(lib.createSelector)(getLayerListRaw,layerDescriptorList=>Object(copy_persistent_state.b)(layerDescriptorList));function getLayerById(layerId,state){return getLayerList(state).find(layer=>layerId===layer.getId())}const getHiddenLayerIds=Object(lib.createSelector)(getLayerListRaw,layers=>layers.filter(layer=>!layer.visible).map(layer=>layer.id)),getSelectedLayer=Object(lib.createSelector)(getSelectedLayerId,getLayerList,(selectedLayerId,layerList)=>layerList.find(layer=>layer.getId()===selectedLayerId)),hasPreviewLayers=Object(lib.createSelector)(getLayerList,layerList=>layerList.some(layer=>layer.isPreviewLayer())),isLoadingPreviewLayers=Object(lib.createSelector)(getLayerList,layerList=>layerList.some(layer=>layer.isPreviewLayer()&&layer.isLayerLoading())),getMapColors=Object(lib.createSelector)(getLayerListRaw,layerList=>layerList.filter(layerDescriptor=>!layerDescriptor.__isPreviewLayer).reduce((accu,layerDescriptor)=>{const color=external_kbnSharedDeps_Lodash_default.a.get(layerDescriptor,"style.properties.fillColor.options.color");return color&&accu.push(color),accu},[])),getSelectedLayerJoinDescriptors=Object(lib.createSelector)(getSelectedLayer,selectedLayer=>selectedLayer&&"getJoins"in selectedLayer?selectedLayer.getJoins().map(join=>join.toDescriptor()):[]),getQueryableUniqueIndexPatternIds=Object(lib.createSelector)(getLayerList,getWaitingForMapReadyLayerListRaw,(layerList,waitingForMapReadyLayerList)=>{const indexPatternIds=[];return waitingForMapReadyLayerList.length?waitingForMapReadyLayerList.forEach(layerDescriptor=>{const layer=createLayerInstance(layerDescriptor);layer.isVisible()&&indexPatternIds.push(...layer.getQueryableIndexPatternIds())}):layerList.forEach(layer=>{layer.isVisible()&&indexPatternIds.push(...layer.getQueryableIndexPatternIds())}),external_kbnSharedDeps_Lodash_default.a.uniq(indexPatternIds)}),hasDirtyState=Object(lib.createSelector)(getLayerListRaw,layerListRaw=>layerListRaw.some(layerDescriptor=>{if(layerDescriptor.__isPreviewLayer)return!0;const trackedState=layerDescriptor[copy_persistent_state.a];if(!trackedState)return!1;const currentState=Object(copy_persistent_state.b)(layerDescriptor);return!external_kbnSharedDeps_Lodash_default.a.isEqual(currentState,trackedState)})),areLayersLoaded=Object(lib.createSelector)(getLayerList,getWaitingForMapReadyLayerListRaw,getMapZoom,(layerList,waitingForMapReadyLayerList,zoom)=>{if(waitingForMapReadyLayerList.length)return!1;for(let i=0;i<layerList.length;i++){const layer=layerList[i];if(layer.isVisible()&&layer.showAtZoomLevel(zoom)&&!layer.hasErrors()&&!layer.isInitialDataLoadComplete())return!1}return!0})},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(52);exports.__esModule=!0;var _Provider=_interopRequireDefault(__webpack_require__(227));exports.Provider=_Provider.default;var _connectAdvanced=_interopRequireDefault(__webpack_require__(152));exports.connectAdvanced=_connectAdvanced.default;var _Context=__webpack_require__(66);exports.ReactReduxContext=_Context.ReactReduxContext;var _connect=_interopRequireDefault(__webpack_require__(234));exports.connect=_connect.default;var _useDispatch=__webpack_require__(243);exports.useDispatch=_useDispatch.useDispatch,exports.createDispatchHook=_useDispatch.createDispatchHook;var _useSelector=__webpack_require__(244);exports.useSelector=_useSelector.useSelector,exports.createSelectorHook=_useSelector.createSelectorHook;var _useStore=__webpack_require__(160);exports.useStore=_useStore.useStore,exports.createStoreHook=_useStore.createStoreHook;var _batch=__webpack_require__(151),_reactBatchedUpdates=__webpack_require__(245);exports.batch=_reactBatchedUpdates.unstable_batchedUpdates;var _shallowEqual=_interopRequireDefault(__webpack_require__(155));exports.shallowEqual=_shallowEqual.default,(0,_batch.setBatch)(_reactBatchedUpdates.unstable_batchedUpdates)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"N",(function(){return UPDATE_FLYOUT})),__webpack_require__.d(__webpack_exports__,"s",(function(){return SET_IS_LAYER_TOC_OPEN})),__webpack_require__.d(__webpack_exports__,"q",(function(){return SET_FULL_SCREEN})),__webpack_require__.d(__webpack_exports__,"D",(function(){return SET_READ_ONLY})),__webpack_require__.d(__webpack_exports__,"A",(function(){return SET_OPEN_TOC_DETAILS})),__webpack_require__.d(__webpack_exports__,"I",(function(){return SHOW_TOC_DETAILS})),__webpack_require__.d(__webpack_exports__,"f",(function(){return HIDE_TOC_DETAILS})),__webpack_require__.d(__webpack_exports__,"db",(function(){return exitFullScreen})),__webpack_require__.d(__webpack_exports__,"Nb",(function(){return updateFlyout})),__webpack_require__.d(__webpack_exports__,"kb",(function(){return openMapSettings})),__webpack_require__.d(__webpack_exports__,"yb",(function(){return setIsLayerTOCOpen})),__webpack_require__.d(__webpack_exports__,"cb",(function(){return enableFullScreen})),__webpack_require__.d(__webpack_exports__,"Gb",(function(){return setReadOnly})),__webpack_require__.d(__webpack_exports__,"Eb",(function(){return setOpenTOCDetails})),__webpack_require__.d(__webpack_exports__,"Jb",(function(){return showTOCDetails})),__webpack_require__.d(__webpack_exports__,"gb",(function(){return hideTOCDetails})),__webpack_require__.d(__webpack_exports__,"Bb",(function(){return setMapInitError})),__webpack_require__.d(__webpack_exports__,"Cb",(function(){return setMapSettings})),__webpack_require__.d(__webpack_exports__,"tb",(function(){return rollbackMapSettings})),__webpack_require__.d(__webpack_exports__,"Vb",(function(){return updateMapSetting})),__webpack_require__.d(__webpack_exports__,"jb",(function(){return mapReady})),__webpack_require__.d(__webpack_exports__,"hb",(function(){return mapDestroyed})),__webpack_require__.d(__webpack_exports__,"ib",(function(){return mapExtentChanged})),__webpack_require__.d(__webpack_exports__,"Db",(function(){return setMouseCoordinates})),__webpack_require__.d(__webpack_exports__,"X",(function(){return clearMouseCoordinates})),__webpack_require__.d(__webpack_exports__,"bb",(function(){return disableScrollZoom})),__webpack_require__.d(__webpack_exports__,"wb",(function(){return setGotoWithCenter})),__webpack_require__.d(__webpack_exports__,"W",(function(){return clearGoto})),__webpack_require__.d(__webpack_exports__,"Fb",(function(){return setQuery})),__webpack_require__.d(__webpack_exports__,"Hb",(function(){return setRefreshConfig})),__webpack_require__.d(__webpack_exports__,"Lb",(function(){return triggerRefreshTimer})),__webpack_require__.d(__webpack_exports__,"Mb",(function(){return updateDrawState})),__webpack_require__.d(__webpack_exports__,"G",(function(){return SET_SELECTED_LAYER})),__webpack_require__.d(__webpack_exports__,"O",(function(){return UPDATE_LAYER_ORDER})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ADD_LAYER})),__webpack_require__.d(__webpack_exports__,"u",(function(){return SET_LAYER_ERROR_STATUS})),__webpack_require__.d(__webpack_exports__,"b",(function(){return ADD_WAITING_FOR_MAP_READY_LAYER})),__webpack_require__.d(__webpack_exports__,"e",(function(){return CLEAR_WAITING_FOR_MAP_READY_LAYER_LIST})),__webpack_require__.d(__webpack_exports__,"m",(function(){return REMOVE_LAYER})),__webpack_require__.d(__webpack_exports__,"w",(function(){return SET_LAYER_VISIBILITY})),__webpack_require__.d(__webpack_exports__,"k",(function(){return MAP_EXTENT_CHANGED})),__webpack_require__.d(__webpack_exports__,"l",(function(){return MAP_READY})),__webpack_require__.d(__webpack_exports__,"j",(function(){return MAP_DESTROYED})),__webpack_require__.d(__webpack_exports__,"i",(function(){return LAYER_DATA_LOAD_STARTED})),__webpack_require__.d(__webpack_exports__,"g",(function(){return LAYER_DATA_LOAD_ENDED})),__webpack_require__.d(__webpack_exports__,"h",(function(){return LAYER_DATA_LOAD_ERROR})),__webpack_require__.d(__webpack_exports__,"S",(function(){return UPDATE_SOURCE_DATA_REQUEST})),__webpack_require__.d(__webpack_exports__,"t",(function(){return SET_JOINS})),__webpack_require__.d(__webpack_exports__,"C",(function(){return SET_QUERY})),__webpack_require__.d(__webpack_exports__,"L",(function(){return TRIGGER_REFRESH_TIMER})),__webpack_require__.d(__webpack_exports__,"P",(function(){return UPDATE_LAYER_PROP})),__webpack_require__.d(__webpack_exports__,"Q",(function(){return UPDATE_LAYER_STYLE})),__webpack_require__.d(__webpack_exports__,"v",(function(){return SET_LAYER_STYLE_META})),__webpack_require__.d(__webpack_exports__,"T",(function(){return UPDATE_SOURCE_PROP})),__webpack_require__.d(__webpack_exports__,"E",(function(){return SET_REFRESH_CONFIG})),__webpack_require__.d(__webpack_exports__,"z",(function(){return SET_MOUSE_COORDINATES})),__webpack_require__.d(__webpack_exports__,"d",(function(){return CLEAR_MOUSE_COORDINATES})),__webpack_require__.d(__webpack_exports__,"r",(function(){return SET_GOTO})),__webpack_require__.d(__webpack_exports__,"c",(function(){return CLEAR_GOTO})),__webpack_require__.d(__webpack_exports__,"J",(function(){return TRACK_CURRENT_LAYER_STATE})),__webpack_require__.d(__webpack_exports__,"p",(function(){return ROLLBACK_TO_TRACKED_LAYER_STATE})),__webpack_require__.d(__webpack_exports__,"n",(function(){return REMOVE_TRACKED_LAYER_STATE})),__webpack_require__.d(__webpack_exports__,"B",(function(){return SET_OPEN_TOOLTIPS})),__webpack_require__.d(__webpack_exports__,"M",(function(){return UPDATE_DRAW_STATE})),__webpack_require__.d(__webpack_exports__,"F",(function(){return SET_SCROLL_ZOOM})),__webpack_require__.d(__webpack_exports__,"x",(function(){return SET_MAP_INIT_ERROR})),__webpack_require__.d(__webpack_exports__,"H",(function(){return SET_WAITING_FOR_READY_HIDDEN_LAYERS})),__webpack_require__.d(__webpack_exports__,"y",(function(){return SET_MAP_SETTINGS})),__webpack_require__.d(__webpack_exports__,"o",(function(){return ROLLBACK_MAP_SETTINGS})),__webpack_require__.d(__webpack_exports__,"K",(function(){return TRACK_MAP_SETTINGS})),__webpack_require__.d(__webpack_exports__,"R",(function(){return UPDATE_MAP_SETTING})),__webpack_require__.d(__webpack_exports__,"rb",(function(){return removeTrackedLayerStateForSelectedLayer})),__webpack_require__.d(__webpack_exports__,"sb",(function(){return replaceLayerList})),__webpack_require__.d(__webpack_exports__,"Y",(function(){return cloneLayer})),__webpack_require__.d(__webpack_exports__,"U",(function(){return addPreviewLayers})),__webpack_require__.d(__webpack_exports__,"pb",(function(){return removePreviewLayers})),__webpack_require__.d(__webpack_exports__,"nb",(function(){return promotePreviewLayers})),__webpack_require__.d(__webpack_exports__,"Kb",(function(){return toggleLayerVisible})),__webpack_require__.d(__webpack_exports__,"Ib",(function(){return setSelectedLayer})),__webpack_require__.d(__webpack_exports__,"vb",(function(){return setFirstPreviewLayerToSelectedLayer})),__webpack_require__.d(__webpack_exports__,"Tb",(function(){return updateLayerOrder})),__webpack_require__.d(__webpack_exports__,"Wb",(function(){return updateSourceProp})),__webpack_require__.d(__webpack_exports__,"Qb",(function(){return updateLayerLabel})),__webpack_require__.d(__webpack_exports__,"Sb",(function(){return updateLayerMinZoom})),__webpack_require__.d(__webpack_exports__,"Rb",(function(){return updateLayerMaxZoom})),__webpack_require__.d(__webpack_exports__,"Pb",(function(){return updateLayerAlpha})),__webpack_require__.d(__webpack_exports__,"Ob",(function(){return updateLabelsOnTop})),__webpack_require__.d(__webpack_exports__,"Ab",(function(){return setLayerQuery})),__webpack_require__.d(__webpack_exports__,"qb",(function(){return removeSelectedLayer})),__webpack_require__.d(__webpack_exports__,"ob",(function(){return removeLayer})),__webpack_require__.d(__webpack_exports__,"Ub",(function(){return updateLayerStyleForSelectedLayer})),__webpack_require__.d(__webpack_exports__,"zb",(function(){return setJoinsForLayer})),__webpack_require__.d(__webpack_exports__,"xb",(function(){return setHiddenLayers})),__webpack_require__.d(__webpack_exports__,"ub",(function(){return setAreTilesLoaded})),__webpack_require__.d(__webpack_exports__,"V",(function(){return cancelAllInFlightRequests})),__webpack_require__.d(__webpack_exports__,"fb",(function(){return fitToLayerExtent})),__webpack_require__.d(__webpack_exports__,"eb",(function(){return fitToDataBounds})),__webpack_require__.d(__webpack_exports__,"Z",(function(){return closeOnClickTooltip})),__webpack_require__.d(__webpack_exports__,"lb",(function(){return openOnClickTooltip})),__webpack_require__.d(__webpack_exports__,"ab",(function(){return closeOnHoverTooltip})),__webpack_require__.d(__webpack_exports__,"mb",(function(){return openOnHoverTooltip}));var ui_selectors=__webpack_require__(53),ui=__webpack_require__(54),external_kbnSharedDeps_Lodash_=__webpack_require__(23),external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_),bbox_polygon=__webpack_require__(162),bbox_polygon_default=__webpack_require__.n(bbox_polygon),boolean_contains=__webpack_require__(163),boolean_contains_default=__webpack_require__.n(boolean_contains),map_selectors=__webpack_require__(36);const SET_SELECTED_LAYER="SET_SELECTED_LAYER",UPDATE_LAYER_ORDER="UPDATE_LAYER_ORDER",ADD_LAYER="ADD_LAYER",SET_LAYER_ERROR_STATUS="SET_LAYER_ERROR_STATUS",ADD_WAITING_FOR_MAP_READY_LAYER="ADD_WAITING_FOR_MAP_READY_LAYER",CLEAR_WAITING_FOR_MAP_READY_LAYER_LIST="CLEAR_WAITING_FOR_MAP_READY_LAYER_LIST",REMOVE_LAYER="REMOVE_LAYER",SET_LAYER_VISIBILITY="SET_LAYER_VISIBILITY",MAP_EXTENT_CHANGED="MAP_EXTENT_CHANGED",MAP_READY="MAP_READY",MAP_DESTROYED="MAP_DESTROYED",LAYER_DATA_LOAD_STARTED="LAYER_DATA_LOAD_STARTED",LAYER_DATA_LOAD_ENDED="LAYER_DATA_LOAD_ENDED",LAYER_DATA_LOAD_ERROR="LAYER_DATA_LOAD_ERROR",UPDATE_SOURCE_DATA_REQUEST="UPDATE_SOURCE_DATA_REQUEST",SET_JOINS="SET_JOINS",SET_QUERY="SET_QUERY",TRIGGER_REFRESH_TIMER="TRIGGER_REFRESH_TIMER",UPDATE_LAYER_PROP="UPDATE_LAYER_PROP",UPDATE_LAYER_STYLE="UPDATE_LAYER_STYLE",SET_LAYER_STYLE_META="SET_LAYER_STYLE_META",UPDATE_SOURCE_PROP="UPDATE_SOURCE_PROP",SET_REFRESH_CONFIG="SET_REFRESH_CONFIG",SET_MOUSE_COORDINATES="SET_MOUSE_COORDINATES",CLEAR_MOUSE_COORDINATES="CLEAR_MOUSE_COORDINATES",SET_GOTO="SET_GOTO",CLEAR_GOTO="CLEAR_GOTO",TRACK_CURRENT_LAYER_STATE="TRACK_CURRENT_LAYER_STATE",ROLLBACK_TO_TRACKED_LAYER_STATE="ROLLBACK_TO_TRACKED_LAYER_STATE",REMOVE_TRACKED_LAYER_STATE="REMOVE_TRACKED_LAYER_STATE",SET_OPEN_TOOLTIPS="SET_OPEN_TOOLTIPS",UPDATE_DRAW_STATE="UPDATE_DRAW_STATE",SET_SCROLL_ZOOM="SET_SCROLL_ZOOM",SET_MAP_INIT_ERROR="SET_MAP_INIT_ERROR",SET_WAITING_FOR_READY_HIDDEN_LAYERS="SET_WAITING_FOR_READY_HIDDEN_LAYERS",SET_MAP_SETTINGS="SET_MAP_SETTINGS",ROLLBACK_MAP_SETTINGS="ROLLBACK_MAP_SETTINGS",TRACK_MAP_SETTINGS="TRACK_MAP_SETTINGS",UPDATE_MAP_SETTING="UPDATE_MAP_SETTING";var bbox=__webpack_require__(91),bbox_default=__webpack_require__.n(bbox),v4=__webpack_require__(11),v4_default=__webpack_require__.n(v4),helpers=__webpack_require__(46),constants=__webpack_require__(0),non_serializable_instances=__webpack_require__(70);function closeOnClickTooltip(tooltipId){return(dispatch,getState)=>{dispatch({type:SET_OPEN_TOOLTIPS,openTooltips:Object(map_selectors.v)(getState()).filter(({id:id})=>tooltipId!==id)})}}function openOnClickTooltip(tooltipState){return(dispatch,getState)=>{const openTooltips=Object(map_selectors.v)(getState()).filter(({features:features,location:location,isLocked:isLocked})=>isLocked&&!external_kbnSharedDeps_Lodash_default.a.isEqual(location,tooltipState.location)&&!external_kbnSharedDeps_Lodash_default.a.isEqual(features,tooltipState.features));openTooltips.push({...tooltipState,isLocked:!0,id:v4_default()()}),dispatch({type:SET_OPEN_TOOLTIPS,openTooltips:openTooltips})}}function closeOnHoverTooltip(){return(dispatch,getState)=>{Object(map_selectors.v)(getState()).length&&dispatch({type:SET_OPEN_TOOLTIPS,openTooltips:[]})}}function openOnHoverTooltip(tooltipState){return{type:SET_OPEN_TOOLTIPS,openTooltips:[{...tooltipState,isLocked:!1,id:v4_default()()}]}}function cleanTooltipStateForLayer(layerId,layerFeatures=[]){return(dispatch,getState)=>{let featuresRemoved=!1;const openTooltips=Object(map_selectors.v)(getState()).map(tooltipState=>{const nextFeatures=tooltipState.features.filter(tooltipFeature=>tooltipFeature.layerId!==layerId||layerFeatures.some(layerFeature=>layerFeature.properties[constants.FEATURE_ID_PROPERTY_NAME]===tooltipFeature.id));return tooltipState.features.length!==nextFeatures.length&&(featuresRemoved=!0),{...tooltipState,features:nextFeatures}}).filter(tooltipState=>tooltipState.features.length>0);featuresRemoved&&dispatch({type:SET_OPEN_TOOLTIPS,openTooltips:openTooltips})}}var data_request=__webpack_require__(61),elasticsearch_util=__webpack_require__(40);function clearDataRequests(layer){return dispatch=>{layer.getInFlightRequestTokens().forEach(requestToken=>{dispatch(Object(non_serializable_instances.a)(requestToken))}),dispatch({type:UPDATE_LAYER_PROP,id:layer.getId(),propName:"__dataRequests",newValue:[]})}}function cancelAllInFlightRequests(){return(dispatch,getState)=>{Object(map_selectors.k)(getState()).forEach(layer=>{dispatch(clearDataRequests(layer))})}}function updateStyleMeta(layerId){return async(dispatch,getState)=>{const layer=Object(map_selectors.j)(layerId,getState());if(!layer)return;const sourceDataRequest=layer.getSourceDataRequest(),style=layer.getCurrentStyle();if(!style||!sourceDataRequest||style.getType()!==constants.LAYER_STYLE_TYPE.VECTOR)return;const styleMeta=await style.pluckStyleMetaFromSourceDataRequest(sourceDataRequest);dispatch({type:SET_LAYER_STYLE_META,layerId:layerId,styleMeta:styleMeta})}}function getDataRequestContext(dispatch,getState,layerId){return{dataFilters:Object(map_selectors.c)(getState()),startLoading:(dataId,requestToken,meta)=>dispatch(function(layerId,dataId,requestToken,meta){return(dispatch,getState)=>{const layer=Object(map_selectors.j)(layerId,getState());layer&&dispatch(Object(non_serializable_instances.a)(layer.getPrevRequestToken(dataId)));const eventHandlers=Object(non_serializable_instances.c)(getState());eventHandlers&&eventHandlers.onDataLoad&&eventHandlers.onDataLoad({layerId:layerId,dataId:dataId}),dispatch({meta:meta,type:LAYER_DATA_LOAD_STARTED,layerId:layerId,dataId:dataId,requestToken:requestToken})}}(layerId,dataId,requestToken,meta)),stopLoading:(dataId,requestToken,data,meta)=>dispatch(function(layerId,dataId,requestToken,data,meta){return(dispatch,getState)=>{dispatch(Object(non_serializable_instances.i)(requestToken));const dataRequest=Object(map_selectors.d)(getState(),layerId,dataId);if(dataRequest&&dataRequest.dataRequestToken!==requestToken)throw new data_request.b;const features=data&&"features"in data?data.features:[],eventHandlers=Object(non_serializable_instances.c)(getState());if(eventHandlers&&eventHandlers.onDataLoadEnd){const layer=Object(map_selectors.j)(layerId,getState()),resultMeta={};if(layer&&layer.getType()===constants.LAYER_TYPE.VECTOR){const featuresWithoutCentroids=features.filter(feature=>!feature.properties||!feature.properties[constants.KBN_IS_CENTROID_FEATURE]);resultMeta.featuresCount=featuresWithoutCentroids.length}eventHandlers.onDataLoadEnd({layerId:layerId,dataId:dataId,resultMeta:resultMeta})}dispatch(cleanTooltipStateForLayer(layerId,features)),dispatch({type:LAYER_DATA_LOAD_ENDED,layerId:layerId,dataId:dataId,data:data,meta:meta,requestToken:requestToken}),dispatch(setLayerDataLoadErrorStatus(layerId,null)),dispatch(updateStyleMeta(layerId))}}(layerId,dataId,requestToken,data,meta)),onLoadError:(dataId,requestToken,errorMessage)=>dispatch(function(layerId,dataId,requestToken,errorMessage){return async(dispatch,getState)=>{dispatch(Object(non_serializable_instances.i)(requestToken));const eventHandlers=Object(non_serializable_instances.c)(getState());eventHandlers&&eventHandlers.onDataLoadError&&eventHandlers.onDataLoadError({layerId:layerId,dataId:dataId,errorMessage:errorMessage}),dispatch(cleanTooltipStateForLayer(layerId)),dispatch({type:LAYER_DATA_LOAD_ERROR,layerId:layerId,dataId:dataId,requestToken:requestToken}),dispatch(setLayerDataLoadErrorStatus(layerId,errorMessage))}}(layerId,dataId,requestToken,errorMessage)),updateSourceData:newData=>{dispatch(function(layerId,newData){return dispatch=>{dispatch({type:UPDATE_SOURCE_DATA_REQUEST,dataId:constants.SOURCE_DATA_REQUEST_ID,layerId:layerId,newData:newData}),dispatch(updateStyleMeta(layerId))}}(layerId,newData))},isRequestStillActive:(dataId,requestToken)=>{const dataRequest=Object(map_selectors.d)(getState(),layerId,dataId);return!!dataRequest&&dataRequest.dataRequestToken===requestToken},registerCancelCallback:(requestToken,callback)=>dispatch(Object(non_serializable_instances.f)(requestToken,callback))}}function syncDataForAllLayers(){return async(dispatch,getState)=>{const syncPromises=Object(map_selectors.k)(getState()).map(layer=>dispatch(syncDataForLayer(layer)));await Promise.all(syncPromises)}}function syncDataForLayer(layer){return async(dispatch,getState)=>{const dataRequestContext=getDataRequestContext(dispatch,getState,layer.getId());layer.isVisible()&&layer.showAtZoomLevel(dataRequestContext.dataFilters.zoom)&&await layer.syncData(dataRequestContext)}}function syncDataForLayerId(layerId){return async(dispatch,getState)=>{const layer=Object(map_selectors.j)(layerId,getState());layer&&dispatch(syncDataForLayer(layer))}}function setLayerDataLoadErrorStatus(layerId,errorMessage){return dispatch=>{dispatch({type:SET_LAYER_ERROR_STATUS,isInErrorState:null!==errorMessage,layerId:layerId,errorMessage:errorMessage})}}function fitToLayerExtent(layerId){return async(dispatch,getState)=>{const targetLayer=Object(map_selectors.j)(layerId,getState());if(targetLayer)try{const bounds=await targetLayer.getBounds(getDataRequestContext(dispatch,getState,layerId));bounds&&await dispatch(setGotoWithBounds(Object(elasticsearch_util.q)(bounds,.1)))}catch(error){return void(error instanceof data_request.b||console.warn("Unhandled getBounds error for layer. Only DataRequestAbortError should be surfaced",error))}}}function fitToDataBounds(onNoBounds){return async(dispatch,getState)=>{const layerList=Object(map_selectors.k)(getState());if(!layerList.length)return;const boundsPromises=layerList.map(async layer=>await layer.isFittable()?layer.getBounds(getDataRequestContext(dispatch,getState,layer.getId())):null);let bounds;try{bounds=await Promise.all(boundsPromises)}catch(error){return void(error instanceof data_request.b||console.warn("Unhandled getBounds error for layer. Only DataRequestAbortError should be surfaced",error))}const corners=[];for(let i=0;i<bounds.length;i++){const b=bounds[i];null!==b&&b.minLon!==1/0&&b.maxLon!==1/0&&b.minLat!==-1/0&&b.maxLat!==-1/0&&(corners.push([b.minLon,b.minLat]),corners.push([b.maxLon,b.maxLat]))}if(!corners.length)return void(onNoBounds&&onNoBounds());const dataBounds=Object(elasticsearch_util.r)(bbox_default()(Object(helpers.multiPoint)(corners)));dispatch(setGotoWithBounds(Object(elasticsearch_util.q)(dataBounds,.1)))}}let lastSetQueryCallId="";function autoFitToBounds(){return async dispatch=>{const localSetQueryCallId=v4_default()();if(lastSetQueryCallId=localSetQueryCallId,await dispatch(async(dispatch,getState)=>{const syncPromises=Object(map_selectors.k)(getState()).filter(layer=>"hasJoins"in layer&&layer.hasJoins()).map(layer=>dispatch(syncDataForLayer(layer)));await Promise.all(syncPromises)}),localSetQueryCallId===lastSetQueryCallId){dispatch(fitToDataBounds((function(){localSetQueryCallId===lastSetQueryCallId&&dispatch(syncDataForAllLayers())})))}}}function setGotoWithBounds(bounds){return{type:SET_GOTO,bounds:bounds}}var licensed_features=__webpack_require__(9);function removeTrackedLayerStateForSelectedLayer(){return(dispatch,getState)=>{const layerId=Object(map_selectors.D)(getState());dispatch({type:REMOVE_TRACKED_LAYER_STATE,layerId:layerId})}}function replaceLayerList(newLayerList){return(dispatch,getState)=>{Object(map_selectors.r)(getState())?Object(map_selectors.m)(getState()).forEach(({id:id})=>{dispatch(removeLayerFromLayerList(id))}):dispatch({type:CLEAR_WAITING_FOR_MAP_READY_LAYER_LIST}),newLayerList.forEach(layerDescriptor=>{dispatch(addLayer(layerDescriptor))})}}function cloneLayer(layerId){return async(dispatch,getState)=>{const layer=Object(map_selectors.j)(layerId,getState());if(!layer)return;dispatch(addLayer(await layer.cloneDescriptor()))}}function addLayer(layerDescriptor){return async(dispatch,getState)=>{if(!Object(map_selectors.r)(getState()))return void dispatch({type:ADD_WAITING_FOR_MAP_READY_LAYER,layer:layerDescriptor});dispatch({type:ADD_LAYER,layer:layerDescriptor}),dispatch(syncDataForLayerId(layerDescriptor.id));const layer=Object(map_selectors.b)(layerDescriptor);(await layer.getLicensedFeatures()).forEach(licensed_features.e)}}function addPreviewLayers(layerDescriptors){return dispatch=>{dispatch(removePreviewLayers()),layerDescriptors.forEach(layerDescriptor=>{dispatch(addLayer({...layerDescriptor,__isPreviewLayer:!0}))})}}function removePreviewLayers(){return(dispatch,getState)=>{Object(map_selectors.k)(getState()).forEach(layer=>{layer.isPreviewLayer()&&dispatch(removeLayer(layer.getId()))})}}function promotePreviewLayers(){return(dispatch,getState)=>{Object(map_selectors.k)(getState()).forEach(layer=>{layer.isPreviewLayer()&&dispatch({type:UPDATE_LAYER_PROP,id:layer.getId(),propName:"__isPreviewLayer",newValue:!1})})}}function setLayerVisibility(layerId,makeVisible){return(dispatch,getState)=>{const layer=Object(map_selectors.j)(layerId,getState());layer&&layer.isVisible()!==makeVisible&&(makeVisible||dispatch(cleanTooltipStateForLayer(layerId)),dispatch({type:SET_LAYER_VISIBILITY,layerId:layerId,visibility:makeVisible}),makeVisible&&dispatch(syncDataForLayerId(layerId)))}}function toggleLayerVisible(layerId){return(dispatch,getState)=>{const layer=Object(map_selectors.j)(layerId,getState());if(!layer)return;const makeVisible=!layer.isVisible();dispatch(setLayerVisibility(layerId,makeVisible))}}function setSelectedLayer(layerId){return async(dispatch,getState)=>{Object(map_selectors.D)(getState())&&await dispatch(async(dispatch,getState)=>{const layerId=Object(map_selectors.D)(getState());await dispatch({type:ROLLBACK_TO_TRACKED_LAYER_STATE,layerId:layerId}),dispatch(updateStyleMeta(layerId)),dispatch(syncDataForLayerId(layerId))}),layerId&&dispatch(function(layerId){return{type:TRACK_CURRENT_LAYER_STATE,layerId:layerId}}(layerId)),dispatch({type:SET_SELECTED_LAYER,selectedLayerId:layerId})}}function setFirstPreviewLayerToSelectedLayer(){return async(dispatch,getState)=>{const firstPreviewLayer=Object(map_selectors.k)(getState()).find(layer=>layer.isPreviewLayer());firstPreviewLayer&&dispatch(setSelectedLayer(firstPreviewLayer.getId()))}}function updateLayerOrder(newLayerOrder){return{type:UPDATE_LAYER_ORDER,newLayerOrder:newLayerOrder}}function updateSourceProp(layerId,propName,value,newLayerType){return async dispatch=>{if("metrics"===propName){if(newLayerType)throw new Error("May not change layer-type when modifying metrics source-property");return await dispatch(function(layerId,value){return async(dispatch,getState)=>{const layer=Object(map_selectors.j)(layerId,getState()),previousFields=await layer.getFields();await dispatch({type:UPDATE_SOURCE_PROP,layerId:layerId,propName:"metrics",value:value}),await dispatch(updateStyleProperties(layerId,previousFields)),dispatch(syncDataForLayerId(layerId))}}(layerId,value))}dispatch({type:UPDATE_SOURCE_PROP,layerId:layerId,propName:propName,value:value}),newLayerType&&dispatch(function(layerId,newLayerType){return(dispatch,getState)=>{const layer=Object(map_selectors.j)(layerId,getState());layer&&layer.getType()!==newLayerType&&(dispatch(clearDataRequests(layer)),dispatch({type:UPDATE_LAYER_PROP,id:layerId,propName:"type",newValue:newLayerType}))}}(layerId,newLayerType)),dispatch(syncDataForLayerId(layerId))}}function updateLayerLabel(id,newLabel){return{type:UPDATE_LAYER_PROP,id:id,propName:"label",newValue:newLabel}}function updateLayerMinZoom(id,minZoom){return{type:UPDATE_LAYER_PROP,id:id,propName:"minZoom",newValue:minZoom}}function updateLayerMaxZoom(id,maxZoom){return{type:UPDATE_LAYER_PROP,id:id,propName:"maxZoom",newValue:maxZoom}}function updateLayerAlpha(id,alpha){return{type:UPDATE_LAYER_PROP,id:id,propName:"alpha",newValue:alpha}}function updateLabelsOnTop(id,areLabelsOnTop){return{type:UPDATE_LAYER_PROP,id:id,propName:"areLabelsOnTop",newValue:areLabelsOnTop}}function setLayerQuery(id,query){return dispatch=>{dispatch({type:UPDATE_LAYER_PROP,id:id,propName:"query",newValue:query}),dispatch(syncDataForLayerId(id))}}function removeSelectedLayer(){return(dispatch,getState)=>{const state=getState(),layerId=Object(map_selectors.D)(state);layerId&&dispatch(removeLayer(layerId))}}function removeLayer(layerId){return async(dispatch,getState)=>{const state=getState(),selectedLayerId=Object(map_selectors.D)(state);layerId===selectedLayerId&&(dispatch(updateFlyout(ui.c.NONE)),await dispatch(setSelectedLayer(null))),dispatch(removeLayerFromLayerList(layerId))}}function removeLayerFromLayerList(layerId){return(dispatch,getState)=>{const layerGettingRemoved=Object(map_selectors.j)(layerId,getState());layerGettingRemoved&&(layerGettingRemoved.getInFlightRequestTokens().forEach(requestToken=>{dispatch(Object(non_serializable_instances.a)(requestToken))}),dispatch(cleanTooltipStateForLayer(layerId)),layerGettingRemoved.destroy(),dispatch({type:REMOVE_LAYER,id:layerId}))}}function updateStyleProperties(layerId,previousFields){return async(dispatch,getState)=>{const targetLayer=Object(map_selectors.j)(layerId,getState());if(!targetLayer||!("getFields"in targetLayer))return;const style=targetLayer.getCurrentStyle();if(!style||style.getType()!==constants.LAYER_STYLE_TYPE.VECTOR)return;const nextFields=await targetLayer.getFields(),{hasChanges:hasChanges,nextStyleDescriptor:nextStyleDescriptor}=await style.getDescriptorWithUpdatedStyleProps(nextFields,previousFields,Object(map_selectors.p)(getState()));hasChanges&&nextStyleDescriptor&&dispatch(updateLayerStyle(layerId,nextStyleDescriptor))}}function updateLayerStyle(layerId,styleDescriptor){return dispatch=>{dispatch({type:UPDATE_LAYER_STYLE,layerId:layerId,style:{...styleDescriptor}}),dispatch(updateStyleMeta(layerId)),dispatch(syncDataForLayerId(layerId))}}function updateLayerStyleForSelectedLayer(styleDescriptor){return(dispatch,getState)=>{const selectedLayerId=Object(map_selectors.D)(getState());selectedLayerId&&dispatch(updateLayerStyle(selectedLayerId,styleDescriptor))}}function setJoinsForLayer(layer,joins){return async dispatch=>{const previousFields=await layer.getFields();await dispatch({type:SET_JOINS,layer:layer,joins:joins}),await dispatch(updateStyleProperties(layer.getId(),previousFields)),dispatch(syncDataForLayerId(layer.getId()))}}function setHiddenLayers(hiddenLayerIds){return(dispatch,getState)=>{Object(map_selectors.r)(getState())?Object(map_selectors.m)(getState()).forEach(layer=>dispatch(setLayerVisibility(layer.id,!hiddenLayerIds.includes(layer.id)))):dispatch({type:SET_WAITING_FOR_READY_HIDDEN_LAYERS,hiddenLayerIds:hiddenLayerIds})}}function setAreTilesLoaded(layerId,areTilesLoaded){return{type:UPDATE_LAYER_PROP,id:layerId,propName:"__areTilesLoaded",newValue:areTilesLoaded}}function setMapInitError(errorMessage){return{type:SET_MAP_INIT_ERROR,errorMessage:errorMessage}}function setMapSettings(settings){return{type:SET_MAP_SETTINGS,settings:settings}}function rollbackMapSettings(){return{type:ROLLBACK_MAP_SETTINGS}}function updateMapSetting(settingKey,settingValue){return{type:UPDATE_MAP_SETTING,settingKey:settingKey,settingValue:settingValue}}function mapReady(){return(dispatch,getState)=>{dispatch({type:MAP_READY});const waitingForMapReadyLayerList=Object(map_selectors.H)(getState());dispatch({type:CLEAR_WAITING_FOR_MAP_READY_LAYER_LIST}),Object(map_selectors.s)(getState()).initialLocation===constants.INITIAL_LOCATION.AUTO_FIT_TO_BOUNDS?(waitingForMapReadyLayerList.forEach(layerDescriptor=>{dispatch(function(layerDescriptor){return{type:ADD_LAYER,layer:layerDescriptor}}(layerDescriptor))}),dispatch(autoFitToBounds())):waitingForMapReadyLayerList.forEach(layerDescriptor=>{dispatch(addLayer(layerDescriptor))})}}function mapDestroyed(){return{type:MAP_DESTROYED}}function mapExtentChanged(mapExtentState){return async(dispatch,getState)=>{const dataFilters=Object(map_selectors.c)(getState()),{extent:extent,zoom:newZoom}=mapExtentState,{buffer:buffer,zoom:currentZoom}=dataFilters;if(extent){let doesBufferContainExtent=!1;if(buffer){const bufferGeometry=bbox_polygon_default()([buffer.minLon,buffer.minLat,buffer.maxLon,buffer.maxLat]),extentGeometry=bbox_polygon_default()([extent.minLon,extent.minLat,extent.maxLon,extent.maxLat]);doesBufferContainExtent=boolean_contains_default()(bufferGeometry,extentGeometry)}doesBufferContainExtent&&currentZoom===newZoom||(dataFilters.buffer=Object(elasticsearch_util.q)(extent,.5))}dispatch({type:MAP_EXTENT_CHANGED,mapState:{...dataFilters,...mapExtentState}}),currentZoom!==newZoom&&Object(map_selectors.k)(getState()).map(layer=>{layer.showAtZoomLevel(newZoom)||dispatch(cleanTooltipStateForLayer(layer.getId()))}),await dispatch(syncDataForAllLayers())}}function setMouseCoordinates({lat:lat,lon:lon}){let safeLon=lon;if(lon>180){safeLon=-180+(lon-180)}else if(lon<-180){safeLon=180-(Math.abs(lon)-180)}return{type:SET_MOUSE_COORDINATES,lat:lat,lon:safeLon}}function clearMouseCoordinates(){return{type:CLEAR_MOUSE_COORDINATES}}function disableScrollZoom(){return{type:SET_SCROLL_ZOOM,scrollZoom:!1}}function setGotoWithCenter({lat:lat,lon:lon,zoom:zoom}){return{type:SET_GOTO,center:{lat:lat,lon:lon,zoom:zoom}}}function clearGoto(){return{type:CLEAR_GOTO}}function generateQueryTimestamp(){return(new Date).toISOString()}function setQuery({query:query,timeFilters:timeFilters,filters:filters=[],forceRefresh:forceRefresh=!1,searchSessionId:searchSessionId,searchSessionMapBuffer:searchSessionMapBuffer}){return async(dispatch,getState)=>{const prevQuery=Object(map_selectors.w)(getState()),prevTriggeredAt=prevQuery&&prevQuery.queryLastTriggeredAt?prevQuery.queryLastTriggeredAt:generateQueryTimestamp(),nextQueryContext={timeFilters:timeFilters||Object(map_selectors.G)(getState()),query:{...query||Object(map_selectors.w)(getState()),queryLastTriggeredAt:forceRefresh?generateQueryTimestamp():prevTriggeredAt},filters:filters||Object(map_selectors.f)(getState()),searchSessionId:searchSessionId,searchSessionMapBuffer:searchSessionMapBuffer},prevQueryContext={timeFilters:Object(map_selectors.G)(getState()),query:Object(map_selectors.w)(getState()),filters:Object(map_selectors.f)(getState()),searchSessionId:Object(map_selectors.A)(getState()),searchSessionMapBuffer:Object(map_selectors.B)(getState())};external_kbnSharedDeps_Lodash_default.a.isEqual(nextQueryContext,prevQueryContext)||(dispatch({type:SET_QUERY,...nextQueryContext}),Object(map_selectors.s)(getState()).autoFitToDataBounds?dispatch(autoFitToBounds()):await dispatch(syncDataForAllLayers()))}}function setRefreshConfig({isPaused:isPaused,interval:interval}){return{type:SET_REFRESH_CONFIG,isPaused:isPaused,interval:interval}}function triggerRefreshTimer(){return async(dispatch,getState)=>{dispatch({type:TRIGGER_REFRESH_TIMER}),Object(map_selectors.s)(getState()).autoFitToDataBounds?dispatch(autoFitToBounds()):await dispatch(syncDataForAllLayers())}}function updateDrawState(drawState){return dispatch=>{null!==drawState&&dispatch({type:SET_OPEN_TOOLTIPS,openTooltips:[]}),dispatch({type:UPDATE_DRAW_STATE,drawState:drawState})}}const UPDATE_FLYOUT="UPDATE_FLYOUT",SET_IS_LAYER_TOC_OPEN="SET_IS_LAYER_TOC_OPEN",SET_FULL_SCREEN="SET_FULL_SCREEN",SET_READ_ONLY="SET_READ_ONLY",SET_OPEN_TOC_DETAILS="SET_OPEN_TOC_DETAILS",SHOW_TOC_DETAILS="SHOW_TOC_DETAILS",HIDE_TOC_DETAILS="HIDE_TOC_DETAILS";function exitFullScreen(){return{type:SET_FULL_SCREEN,isFullScreen:!1}}function updateFlyout(display){return{type:UPDATE_FLYOUT,display:display}}function openMapSettings(){return(dispatch,getState)=>{Object(ui_selectors.a)(getState())!==ui.c.MAP_SETTINGS_PANEL&&(dispatch(setSelectedLayer(null)),dispatch({type:TRACK_MAP_SETTINGS}),dispatch(updateFlyout(ui.c.MAP_SETTINGS_PANEL)))}}function setIsLayerTOCOpen(isLayerTOCOpen){return{type:SET_IS_LAYER_TOC_OPEN,isLayerTOCOpen:isLayerTOCOpen}}function enableFullScreen(){return{type:SET_FULL_SCREEN,isFullScreen:!0}}function setReadOnly(isReadOnly){return{type:SET_READ_ONLY,isReadOnly:isReadOnly}}function setOpenTOCDetails(layerIds){return{type:SET_OPEN_TOC_DETAILS,layerIds:layerIds}}function showTOCDetails(layerId){return{type:SHOW_TOC_DETAILS,layerId:layerId}}function hideTOCDetails(layerId){return{type:HIDE_TOC_DETAILS,layerId:layerId}}},function(module,exports){(function(){module.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"l",(function(){return getField})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addFieldToDSL})),__webpack_require__.d(__webpack_exports__,"j",(function(){return extractPropertiesFromBucket})),__webpack_require__.d(__webpack_exports__,"d",(function(){return convertCompositeRespToGeoJson})),__webpack_require__.d(__webpack_exports__,"e",(function(){return convertRegularRespToGeoJson})),__webpack_require__.d(__webpack_exports__,"m",(function(){return hitsToGeoJson})),__webpack_require__.d(__webpack_exports__,"o",(function(){return makeESBbox})),__webpack_require__.d(__webpack_exports__,"g",(function(){return createExtentFilter})),__webpack_require__.d(__webpack_exports__,"h",(function(){return createSpatialFilterWithGeometry})),__webpack_require__.d(__webpack_exports__,"f",(function(){return createDistanceFilterWithMeta})),__webpack_require__.d(__webpack_exports__,"p",(function(){return roundCoordinates})),__webpack_require__.d(__webpack_exports__,"k",(function(){return getBoundingBoxGeometry})),__webpack_require__.d(__webpack_exports__,"b",(function(){return clampToLatBounds})),__webpack_require__.d(__webpack_exports__,"c",(function(){return clampToLonBounds})),__webpack_require__.d(__webpack_exports__,"i",(function(){return extractFeaturesFromFilters})),__webpack_require__.d(__webpack_exports__,"q",(function(){return scaleBounds})),__webpack_require__.d(__webpack_exports__,"r",(function(){return turfBboxToBounds})),__webpack_require__.d(__webpack_exports__,"n",(function(){return isTotalHitsGreaterThan}));var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),external_kbnSharedDeps_Lodash_=__webpack_require__(23),external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_),constants=__webpack_require__(0);function getField(indexPattern,fieldName){const field=indexPattern.fields.getByName(fieldName);if(!field)throw new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.fieldNotFoundMsg",{defaultMessage:"Unable to find '{fieldName}' in index-pattern '{indexPatternTitle}'.",values:{fieldName:fieldName,indexPatternTitle:indexPattern.title}}));return field}function addFieldToDSL(dsl,field){return field.scripted?{...dsl,script:{source:field.script,lang:field.lang}}:{...dsl,field:field.name}}function extractPropertiesFromBucket(bucket,ignoreKeys=[]){const properties={};for(const key in bucket)if(!ignoreKeys.includes(key)&&bucket.hasOwnProperty(key))if(external_kbnSharedDeps_Lodash_default.a.has(bucket[key],"value"))properties[key]=bucket[key].value;else if(external_kbnSharedDeps_Lodash_default.a.has(bucket[key],"buckets")){if(0===bucket[key].buckets.length)continue;properties[key]=external_kbnSharedDeps_Lodash_default.a.get(bucket[key],"buckets[0].key");const topBucketCount=bucket[key].buckets[0].doc_count,totalCount=bucket.doc_count;totalCount&&topBucketCount&&(properties[`${key}${constants.TOP_TERM_PERCENTAGE_SUFFIX}`]=Math.round(topBucketCount/totalCount*100))}else if(key.startsWith(constants.AGG_TYPE.PERCENTILE)||key.startsWith(constants.JOIN_FIELD_NAME_PREFIX+constants.AGG_TYPE.PERCENTILE)){const values=bucket[key].values;for(const k in values)if(values.hasOwnProperty(k)){properties[key]=values[k];break}}else properties[key]=bucket[key];return properties}var geo_tile_utils=__webpack_require__(202),wellknown=__webpack_require__(358),circle=__webpack_require__(203),circle_default=__webpack_require__.n(circle),i18n_getters=__webpack_require__(5);const SPATIAL_FILTER_TYPE=__webpack_require__(26).FILTERS.SPATIAL_FILTER;function ensureGeoField(type){const expectedTypes=[constants.ES_GEO_FIELD_TYPE.GEO_POINT,constants.ES_GEO_FIELD_TYPE.GEO_SHAPE];if(!expectedTypes.includes(type)){const errorMessage=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.es_geo_utils.unsupportedFieldTypeErrorMessage",{defaultMessage:"Unsupported field type, expected: {expectedTypes}, you provided: {fieldType}",values:{fieldType:type,expectedTypes:expectedTypes.join(",")}});throw new Error(errorMessage)}}function hitsToGeoJson(hits,flattenHit,geoFieldName,geoFieldType,epochMillisFields){const features=[],tmpGeometriesAccumulator=[];for(let i=0;i<hits.length;i++){const properties=flattenHit(hits[i]);tmpGeometriesAccumulator.length=0,ensureGeoField(geoFieldType),geoFieldType===constants.ES_GEO_FIELD_TYPE.GEO_POINT?geoPointToGeometry(properties[geoFieldName],tmpGeometriesAccumulator):geoShapeToGeometry(properties[geoFieldName],tmpGeometriesAccumulator);for(let k=0;k<epochMillisFields.length;k++){const fieldName=epochMillisFields[k];"string"==typeof properties[fieldName]&&(properties[fieldName]=parseInt(properties[fieldName],10))}delete properties[geoFieldName];for(let j=0;j<tmpGeometriesAccumulator.length;j++)features.push({type:"Feature",geometry:tmpGeometriesAccumulator[j],id:`${properties._index}:${properties._id}:${j}`,properties:properties})}return{type:"FeatureCollection",features:features}}function geoPointToGeometry(value,accumulator){if(!value)return;if(Array.isArray(value)){for(let i=0;i<value.length;i++)geoPointToGeometry(value[i],accumulator);return}const commaSplit=value.split(","),lat=parseFloat(commaSplit[0]),lon=parseFloat(commaSplit[1]);accumulator.push({type:constants.GEO_JSON_TYPE.POINT,coordinates:[lon,lat]})}function geoShapeToGeometry(value,accumulator){if(value)if(Array.isArray(value))for(let i=0;i<value.length;i++)geoShapeToGeometry(value[i],accumulator);else if("string"==typeof value){const geoJson=function(value){try{return Object(wellknown.parse)(value)}catch(e){const errorMessage=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.es_geo_utils.wkt.invalidWKTErrorMessage",{defaultMessage:"Unable to convert {wkt} to geojson. Valid WKT expected.",values:{wkt:value}});throw new Error(errorMessage)}}(value);accumulator.push(geoJson)}else if(value.type===constants.GEO_JSON_TYPE.GEOMETRY_COLLECTION||"geometrycollection"===value.type){const geometryCollection=value;for(let i=0;i<geometryCollection.geometries.length;i++)geoShapeToGeometry(geometryCollection.geometries[i],accumulator)}else{const geoJson=function(value){const geoJson={type:value.type,coordinates:value.coordinates};switch(value.type){case"point":geoJson.type=constants.GEO_JSON_TYPE.POINT;break;case"linestring":geoJson.type=constants.GEO_JSON_TYPE.LINE_STRING;break;case"polygon":geoJson.type=constants.GEO_JSON_TYPE.POLYGON;break;case"multipoint":geoJson.type=constants.GEO_JSON_TYPE.MULTI_POINT;break;case"multilinestring":geoJson.type=constants.GEO_JSON_TYPE.MULTI_LINE_STRING;break;case"multipolygon":geoJson.type=constants.GEO_JSON_TYPE.MULTI_POLYGON;break;case"geometrycollection":case constants.GEO_JSON_TYPE.GEOMETRY_COLLECTION:const invalidGeometrycollectionError=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.es_geo_utils.convert.invalidGeometryCollectionErrorMessage",{defaultMessage:"Should not pass GeometryCollection to convertESShapeToGeojsonGeometry"});throw new Error(invalidGeometrycollectionError);case"envelope":const envelopeCoords=geoJson.coordinates,polygon=formatEnvelopeAsPolygon({minLon:envelopeCoords[0][0],maxLon:envelopeCoords[1][0],minLat:envelopeCoords[1][1],maxLat:envelopeCoords[0][1]});geoJson.type=polygon.type,geoJson.coordinates=polygon.coordinates;break;case"circle":const errorMessage=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.es_geo_utils.convert.unsupportedGeometryTypeErrorMessage",{defaultMessage:"Unable to convert {geometryType} geometry to geojson, not supported",values:{geometryType:geoJson.type}});throw new Error(errorMessage)}return geoJson}(value);accumulator.push(geoJson)}}function makeESBbox({maxLat:maxLat,maxLon:maxLon,minLat:minLat,minLon:minLon}){const bottom=clampToLatBounds(minLat),top=clampToLatBounds(maxLat);let esBbox;if(maxLon-minLon>=360)esBbox={top_left:[-180,top],bottom_right:[180,bottom]};else{esBbox={top_left:[(minLon+180+360)%360-180,top],bottom_right:[(maxLon+180+360)%360-180,bottom]}}return esBbox}function createExtentFilter(mapExtent,geoFieldName){return{geo_bounding_box:{[geoFieldName]:makeESBbox(mapExtent)},meta:{alias:null,disabled:!1,negate:!1,key:geoFieldName}}}function createSpatialFilterWithGeometry({preIndexedShape:preIndexedShape,geometry:geometry,geometryLabel:geometryLabel,indexPatternId:indexPatternId,geoFieldName:geoFieldName,relation:relation=constants.ES_SPATIAL_RELATIONS.INTERSECTS}){const meta={type:SPATIAL_FILTER_TYPE,negate:!1,index:indexPatternId,key:geoFieldName,alias:`${geoFieldName} ${Object(i18n_getters.c)(relation)} ${geometryLabel}`,disabled:!1},shapeQuery={relation:relation};return preIndexedShape?shapeQuery.indexed_shape=preIndexedShape:shapeQuery.shape=geometry,{meta:meta,geo_shape:{ignore_unmapped:!0,[geoFieldName]:shapeQuery}}}function createDistanceFilterWithMeta({alias:alias,distanceKm:distanceKm,geoFieldName:geoFieldName,indexPatternId:indexPatternId,point:point}){const meta={type:SPATIAL_FILTER_TYPE,negate:!1,index:indexPatternId,key:geoFieldName,alias:alias||external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.es_geo_utils.distanceFilterAlias",{defaultMessage:"{geoFieldName} within {distanceKm}km of {pointLabel}",values:{distanceKm:distanceKm,geoFieldName:geoFieldName,pointLabel:point.join(", ")}}),disabled:!1};return{geo_distance:{distance:distanceKm+"km",[geoFieldName]:point},meta:meta}}function roundCoordinates(coordinates){for(let i=0;i<coordinates.length;i++){const value=coordinates[i];Array.isArray(value)?roundCoordinates(value):isNaN(value)||(coordinates[i]=external_kbnSharedDeps_Lodash_default.a.round(value,constants.DECIMAL_DEGREES_PRECISION))}}function getBoundingBoxGeometry(geometry){!function(type,expectedTypes){if(!expectedTypes.includes(type)){const errorMessage=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.es_geo_utils.unsupportedGeometryTypeErrorMessage",{defaultMessage:"Unsupported geometry type, expected: {expectedTypes}, you provided: {geometryType}",values:{geometryType:type,expectedTypes:expectedTypes.join(",")}});throw new Error(errorMessage)}}(geometry.type,[constants.GEO_JSON_TYPE.POLYGON]);const exterior=geometry.coordinates[constants.POLYGON_COORDINATES_EXTERIOR_INDEX],extent={minLon:exterior[0][constants.LON_INDEX],minLat:exterior[0][constants.LAT_INDEX],maxLon:exterior[0][constants.LON_INDEX],maxLat:exterior[0][constants.LAT_INDEX]};for(let i=1;i<exterior.length;i++)extent.minLon=Math.min(exterior[i][constants.LON_INDEX],extent.minLon),extent.minLat=Math.min(exterior[i][constants.LAT_INDEX],extent.minLat),extent.maxLon=Math.max(exterior[i][constants.LON_INDEX],extent.maxLon),extent.maxLat=Math.max(exterior[i][constants.LAT_INDEX],extent.maxLat);return formatEnvelopeAsPolygon(extent)}function formatEnvelopeAsPolygon({maxLat:maxLat,maxLon:maxLon,minLat:minLat,minLon:minLon}){const lonDelta=maxLon-minLon,left=lonDelta>360?-180:minLon,right=lonDelta>360?180:maxLon,top=clampToLatBounds(maxLat),bottom=clampToLatBounds(minLat),topLeft=[left,top],bottomLeft=[left,bottom],bottomRight=[right,bottom],topRight=[right,top];return{type:constants.GEO_JSON_TYPE.POLYGON,coordinates:[[topLeft,bottomLeft,bottomRight,topRight,topLeft]]}}function clampToLatBounds(lat){return clamp(lat,-89,89)}function clampToLonBounds(lon){return clamp(lon,-180,180)}function clamp(val,min,max){return val>max?max:val<min?min:val}function extractFeaturesFromFilters(filters){const features=[];return filters.filter(filter=>filter.meta.key&&filter.meta.type===SPATIAL_FILTER_TYPE).forEach(filter=>{const geoFieldName=filter.meta.key;let geometry;if(filter.geo_distance&&filter.geo_distance[geoFieldName]){const distanceSplit=filter.geo_distance.distance.split("km"),distance=parseFloat(distanceSplit[0]);geometry=circle_default()(filter.geo_distance[geoFieldName],distance).geometry}else{if(!(filter.geo_shape&&filter.geo_shape[geoFieldName]&&filter.geo_shape[geoFieldName].shape))return;geometry=filter.geo_shape[geoFieldName].shape}features.push({type:"Feature",geometry:geometry,properties:{filter:filter.meta.alias}})}),features}function scaleBounds(bounds,scaleFactor){const width=bounds.maxLon-bounds.minLon,height=bounds.maxLat-bounds.minLat;return{minLon:bounds.minLon-width*scaleFactor,minLat:bounds.minLat-height*scaleFactor,maxLon:bounds.maxLon+width*scaleFactor,maxLat:bounds.maxLat+height*scaleFactor}}function turfBboxToBounds(turfBbox){return{minLon:turfBbox[0],minLat:turfBbox[1],maxLon:turfBbox[2],maxLat:turfBbox[3]}}const GRID_BUCKET_KEYS_TO_IGNORE=["key",constants.GEOCENTROID_AGG_NAME];function convertCompositeRespToGeoJson(esResponse,renderAs){return convertToGeoJson(esResponse,renderAs,esResponse=>external_kbnSharedDeps_Lodash_default.a.get(esResponse,"aggregations.compositeSplit.buckets",[]),gridBucket=>gridBucket.key[constants.GEOTILE_GRID_AGG_NAME])}function convertRegularRespToGeoJson(esResponse,renderAs){return convertToGeoJson(esResponse,renderAs,esResponse=>external_kbnSharedDeps_Lodash_default.a.get(esResponse,`aggregations.${constants.GEOTILE_GRID_AGG_NAME}.buckets`,[]),gridBucket=>gridBucket.key)}function convertToGeoJson(esResponse,renderAs,pluckGridBuckets,pluckGridKey){const features=[],gridBuckets=pluckGridBuckets(esResponse);for(let i=0;i<gridBuckets.length;i++){const gridBucket=gridBuckets[i],gridKey=pluckGridKey(gridBucket);features.push({type:"Feature",geometry:rowToGeometry({gridKey:gridKey,[constants.GEOCENTROID_AGG_NAME]:gridBucket[constants.GEOCENTROID_AGG_NAME],renderAs:renderAs}),id:gridKey,properties:extractPropertiesFromBucket(gridBucket,GRID_BUCKET_KEYS_TO_IGNORE)})}return features}function rowToGeometry({gridKey:gridKey,gridCentroid:gridCentroid,renderAs:renderAs}){const{top:top,bottom:bottom,right:right,left:left}=Object(geo_tile_utils.b)(gridKey);if(renderAs===constants.RENDER_AS.GRID)return{type:"Polygon",coordinates:[[[right,top],[left,top],[left,bottom],[right,bottom],[right,top]]]};return{type:"Point",coordinates:[clamp(gridCentroid.location.lon,left,right),clamp(gridCentroid.location.lat,bottom,top)]}}function isTotalHitsGreaterThan(totalHits,value){if("eq"===totalHits.relation)return totalHits.value>value;if(value>totalHits.value)throw new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.totalHits.lowerBoundPrecisionExceeded",{defaultMessage:"Unable to determine if total hits is greater than value. Total hits precision is lower then value. Total hits: {totalHitsString}, value: {value}. Ensure _search.body.track_total_hits is at least as large as value.",values:{totalHitsString:JSON.stringify(totalHits,null,""),value:value}}));return!0}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return addGeoJsonMbSource})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getVectorSourceBounds})),__webpack_require__.d(__webpack_exports__,"d",(function(){return syncVectorSource})),__webpack_require__.d(__webpack_exports__,"a",(function(){return vector_layer_VectorLayer}));var constants=__webpack_require__(0),data_request=__webpack_require__(61),along=__webpack_require__(286),along_default=__webpack_require__.n(along),_turf_area=__webpack_require__(288),area_default=__webpack_require__.n(_turf_area),center_of_mass=__webpack_require__(289),center_of_mass_default=__webpack_require__.n(center_of_mass),_turf_length=__webpack_require__(297),length_default=__webpack_require__.n(_turf_length),helpers=__webpack_require__(46);function getCentroid(feature){let centroidGeometry=null;if(feature.geometry.type===constants.GEO_JSON_TYPE.LINE_STRING)centroidGeometry=getLineCentroid(feature);else if(feature.geometry.type===constants.GEO_JSON_TYPE.MULTI_LINE_STRING){const coordinates=feature.geometry.coordinates;let longestLine=coordinates[0],longestLength=length_default()(Object(helpers.lineString)(longestLine));for(let j=1;j<coordinates.length;j++){const nextLine=coordinates[j],nextLength=length_default()(Object(helpers.lineString)(nextLine));nextLength>longestLength&&(longestLine=nextLine,longestLength=nextLength)}centroidGeometry=getLineCentroid(Object(helpers.lineString)(longestLine))}else if(feature.geometry.type===constants.GEO_JSON_TYPE.POLYGON)centroidGeometry=center_of_mass_default()(feature).geometry;else if(feature.geometry.type===constants.GEO_JSON_TYPE.MULTI_POLYGON){const coordinates=feature.geometry.coordinates;let largestPolygon=coordinates[0],largestArea=area_default()(Object(helpers.polygon)(largestPolygon));for(let j=1;j<coordinates.length;j++){const nextPolygon=coordinates[j],nextArea=area_default()(Object(helpers.polygon)(nextPolygon));nextArea>largestArea&&(largestPolygon=nextPolygon,largestArea=nextArea)}centroidGeometry=center_of_mass_default()(Object(helpers.polygon)(largestPolygon)).geometry}else if(feature.geometry.type===constants.GEO_JSON_TYPE.GEOMETRY_COLLECTION&&feature.geometry.geometries.length){const firstGeometry=feature.geometry.geometries[0];if(firstGeometry.type===constants.GEO_JSON_TYPE.POINT)centroidGeometry=firstGeometry;else{if(firstGeometry.type!==constants.GEO_JSON_TYPE.MULTI_POINT)return getCentroid({...feature,geometry:firstGeometry});centroidGeometry={type:"Point",coordinates:firstGeometry.coordinates[0]}}}return centroidGeometry?{type:"Feature",id:feature.id,properties:{...feature.properties,[constants.KBN_IS_CENTROID_FEATURE]:!0},geometry:centroidGeometry}:null}function getLineCentroid(feature){const length=length_default()(feature);return along_default()(feature,length/2).geometry}var can_skip_fetch=__webpack_require__(99),external_kbnSharedDeps_Lodash_=__webpack_require__(23),external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);let idCounter=0;function generateNumericalId(){const newId=idCounter<Number.MAX_SAFE_INTEGER?idCounter:0;return idCounter=newId+1,newId}function addGeoJsonMbSource(mbSourceId,mbLayerIds,mbMap){const mbSource=mbMap.getSource(mbSourceId);mbSource?"geojson"!==mbSource.type&&(mbLayerIds.forEach(mbLayerId=>{mbMap.getLayer(mbLayerId)&&mbMap.removeLayer(mbLayerId)}),mbMap.removeSource(mbSourceId),mbMap.addSource(mbSourceId,{type:"geojson",data:constants.EMPTY_FEATURE_COLLECTION})):mbMap.addSource(mbSourceId,{type:"geojson",data:constants.EMPTY_FEATURE_COLLECTION})}async function syncVectorSource({layerId:layerId,layerName:layerName,prevDataRequest:prevDataRequest,requestMeta:requestMeta,syncContext:syncContext,source:source}){const{startLoading:startLoading,stopLoading:stopLoading,onLoadError:onLoadError,registerCancelCallback:registerCancelCallback,isRequestStillActive:isRequestStillActive}=syncContext,dataRequestId=constants.SOURCE_DATA_REQUEST_ID,requestToken=Symbol(`${layerId}-${dataRequestId}`);if(await Object(can_skip_fetch.b)({source:source,prevDataRequest:prevDataRequest,nextMeta:requestMeta,extentAware:source.isFilterByMapBounds()}))return{refreshed:!1,featureCollection:prevDataRequest?prevDataRequest.getData():constants.EMPTY_FEATURE_COLLECTION};try{startLoading(dataRequestId,requestToken,requestMeta);const{data:sourceFeatureCollection,meta:meta}=await source.getGeoJsonWithMeta(layerName,requestMeta,registerCancelCallback.bind(null,requestToken),()=>isRequestStillActive(dataRequestId,requestToken)),layerFeatureCollection=function(featureCollection){const ids=[];for(let i=0;i<featureCollection.features.length;i++){const id=generateNumericalId();ids.push(id)}const randomizedIds=external_kbnSharedDeps_Lodash_default.a.shuffle(ids),features=[];for(let i=0;i<featureCollection.features.length;i++){const numericId=randomizedIds[i],feature=featureCollection.features[i];features.push({type:"Feature",geometry:feature.geometry,properties:{[constants.FEATURE_ID_PROPERTY_NAME]:null==feature.id?numericId:feature.id,...feature.properties},id:numericId})}return{type:"FeatureCollection",features:features}}(sourceFeatureCollection),supportedShapes=await source.getSupportedShapeTypes();return(supportedShapes.includes(constants.VECTOR_SHAPE_TYPE.LINE)||supportedShapes.includes(constants.VECTOR_SHAPE_TYPE.POLYGON))&&layerFeatureCollection.features.push(...function(featureCollection){const centroids=[];for(let i=0;i<featureCollection.features.length;i++){var _feature$properties;const feature=featureCollection.features[i];if(null!==(_feature$properties=feature.properties)&&void 0!==_feature$properties&&_feature$properties[constants.KBN_TOO_MANY_FEATURES_PROPERTY])continue;const centroid=getCentroid(feature);centroid&&centroids.push(centroid)}return centroids}(layerFeatureCollection)),stopLoading(dataRequestId,requestToken,layerFeatureCollection,meta),{refreshed:!0,featureCollection:layerFeatureCollection}}catch(error){throw error instanceof data_request.b||onLoadError(dataRequestId,requestToken,error.message),error}}async function getVectorSourceBounds({layerId:layerId,syncContext:syncContext,source:source,sourceQuery:sourceQuery}){const{startLoading:startLoading,stopLoading:stopLoading,registerCancelCallback:registerCancelCallback,dataFilters:dataFilters}=syncContext,requestToken=Symbol(`${constants.SOURCE_BOUNDS_DATA_REQUEST_ID}-${layerId}`),boundsFilters={sourceQuery:sourceQuery||void 0,query:dataFilters.query,timeFilters:dataFilters.timeFilters,filters:dataFilters.filters,applyGlobalQuery:source.getApplyGlobalQuery(),applyGlobalTime:source.getApplyGlobalTime()};let bounds=null;try{startLoading(constants.SOURCE_BOUNDS_DATA_REQUEST_ID,requestToken,boundsFilters),bounds=await source.getBoundsForFilters(boundsFilters,registerCancelCallback.bind(null,requestToken))}finally{stopLoading(constants.SOURCE_BOUNDS_DATA_REQUEST_ID,requestToken,bounds||{})}return bounds}var external_kbnSharedDeps_React_=__webpack_require__(2),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_ElasticEui_=__webpack_require__(3),external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),layers_layer=__webpack_require__(110),vector_style=__webpack_require__(51);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class JoinTooltipProperty{constructor(tooltipProperty,leftInnerJoins){_defineProperty(this,"_tooltipProperty",void 0),_defineProperty(this,"_leftInnerJoins",void 0),this._tooltipProperty=tooltipProperty,this._leftInnerJoins=leftInnerJoins}isFilterable(){return!0}getPropertyKey(){return this._tooltipProperty.getPropertyKey()}getPropertyName(){return this._tooltipProperty.getPropertyName()}getRawValue(){return this._tooltipProperty.getRawValue()}getHtmlDisplayValue(){return this._tooltipProperty.getHtmlDisplayValue()}async getESFilters(){const esFilters=[];if(this._tooltipProperty.isFilterable()){const filters=await this._tooltipProperty.getESFilters();esFilters.push(...filters)}for(let i=0;i<this._leftInnerJoins.length;i++){const termField=this._leftInnerJoins[i].getRightJoinSource().getTermField();try{const esTooltipProperty=await termField.createTooltipProperty(this._tooltipProperty.getRawValue());if(esTooltipProperty){const filters=await esTooltipProperty.getESFilters();esFilters.push(...filters)}}catch(e){console.error("Cannot create joined filter",e)}}return esFilters}}var get_feature_collection_bounds=__webpack_require__(199),mb_filter_expressions=__webpack_require__(200);function vector_layer_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class vector_layer_VectorLayer extends layers_layer.a{static createDescriptor(options,mapColors){const layerDescriptor=super.createDescriptor(options);if(layerDescriptor.type=vector_layer_VectorLayer.type,!options.style){const styleProperties=vector_style.a.createDefaultStyleProperties(mapColors||[]);layerDescriptor.style=vector_style.a.createDescriptor(styleProperties)}return options.joins||(layerDescriptor.joins=[]),layerDescriptor}constructor({layerDescriptor:layerDescriptor,source:source,joins:joins=[],chartsPaletteServiceGetColor:chartsPaletteServiceGetColor}){super({layerDescriptor:layerDescriptor,source:source}),vector_layer_defineProperty(this,"_style",void 0),vector_layer_defineProperty(this,"_joins",void 0),this._joins=joins,this._style=new vector_style.a(layerDescriptor.style,source,this,chartsPaletteServiceGetColor)}getSource(){return super.getSource()}getStyleForEditing(){return this._style}getStyle(){return this._style}getCurrentStyle(){return this._style}destroy(){this.getSource()&&this.getSource().destroy(),this.getJoins().forEach(joinSource=>{joinSource.destroy()})}getJoins(){return this._joins.slice()}getValidJoins(){return this.getJoins().filter(join=>join.hasCompleteConfig())}hasJoins(){return this.getValidJoins().length>0}isInitialDataLoadComplete(){const sourceDataRequest=this.getSourceDataRequest();if(!sourceDataRequest||!sourceDataRequest.hasData())return!1;const joins=this.getValidJoins();for(let i=0;i<joins.length;i++){const joinDataRequest=this.getDataRequest(joins[i].getSourceDataRequestId());if(!joinDataRequest||!joinDataRequest.hasData())return!1}return!0}getCustomIconAndTooltipContent(){const featureCollection=this._getSourceFeatureCollection(),noResultsIcon=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{size:"m",color:"subdued",type:"minusInCircle"});if(!featureCollection||0===featureCollection.features.length)return{icon:noResultsIcon,tooltipContent:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.vectorLayer.noResultsFoundTooltip",{defaultMessage:"No results found."})};if(this.getJoins().length&&!featureCollection.features.some(feature=>{var _feature$properties;return null===(_feature$properties=feature.properties)||void 0===_feature$properties?void 0:_feature$properties[constants.FEATURE_VISIBLE_PROPERTY_NAME]}))return{icon:noResultsIcon,tooltipContent:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.vectorLayer.noResultsFoundInJoinTooltip",{defaultMessage:"No matching results found in term joins"})};const sourceDataRequest=this.getSourceDataRequest(),{tooltipContent:tooltipContent,areResultsTrimmed:areResultsTrimmed}=this.getSource().getSourceTooltipContent(sourceDataRequest);return{icon:this.getCurrentStyle().getIcon(),tooltipContent:tooltipContent,areResultsTrimmed:areResultsTrimmed}}getLayerTypeIconName(){return"vector"}async hasLegendDetails(){return this.getCurrentStyle().hasLegendDetails()}renderLegendDetails(){return this.getCurrentStyle().renderLegendDetails()}async getBounds(syncContext){return!this.getSource().isBoundsAware()||this.hasJoins()?Object(get_feature_collection_bounds.a)(this._getSourceFeatureCollection(),this.hasJoins()):getVectorSourceBounds({layerId:this.getId(),syncContext:syncContext,source:this.getSource(),sourceQuery:this.getQuery()})}async getLeftJoinFields(){return await this.getSource().getLeftJoinFields()}_getJoinFields(){const joinFields=[];return this.getValidJoins().forEach(join=>{const fields=join.getJoinFields();joinFields.push(...fields)}),joinFields}async getFields(){return[...await this.getSource().getFields(),...this._getJoinFields()]}async getStyleEditorFields(){return[...await this.getSourceForEditing().getFields(),...this._getJoinFields()]}getIndexPatternIds(){const indexPatternIds=this.getSource().getIndexPatternIds();return this.getValidJoins().forEach(join=>{indexPatternIds.push(...join.getIndexPatternIds())}),indexPatternIds}getQueryableIndexPatternIds(){const indexPatternIds=this.getSource().getQueryableIndexPatternIds();return this.getValidJoins().forEach(join=>{indexPatternIds.push(...join.getQueryableIndexPatternIds())}),indexPatternIds}async isFilteredByGlobalTime(){if(this.getSource().getApplyGlobalTime()&&await this.getSource().isTimeAware())return!0;const joinPromises=this.getValidJoins().map(async join=>join.getRightJoinSource().getApplyGlobalTime()&&await join.getRightJoinSource().isTimeAware());return(await Promise.all(joinPromises)).some(isJoinTimeAware=>isJoinTimeAware)}async _syncJoin({join:join,startLoading:startLoading,stopLoading:stopLoading,onLoadError:onLoadError,registerCancelCallback:registerCancelCallback,dataFilters:dataFilters}){const joinSource=join.getRightJoinSource(),sourceDataId=join.getSourceDataRequestId(),requestToken=Symbol(`layer-join-refresh:${this.getId()} - ${sourceDataId}`),searchFilters={...dataFilters,fieldNames:joinSource.getFieldNames(),sourceQuery:joinSource.getWhereQuery(),applyGlobalQuery:joinSource.getApplyGlobalQuery(),applyGlobalTime:joinSource.getApplyGlobalTime(),sourceMeta:joinSource.getSyncMeta()},prevDataRequest=this.getDataRequest(sourceDataId);if(await Object(can_skip_fetch.b)({source:joinSource,prevDataRequest:prevDataRequest,nextMeta:searchFilters,extentAware:!1}))return{dataHasChanged:!1,join:join,propertiesMap:null==prevDataRequest?void 0:prevDataRequest.getData()};try{startLoading(sourceDataId,requestToken,searchFilters);const leftSourceName=await this._source.getDisplayName(),propertiesMap=await joinSource.getPropertiesMap(searchFilters,leftSourceName,join.getLeftField().getName(),registerCancelCallback.bind(null,requestToken));return stopLoading(sourceDataId,requestToken,propertiesMap),{dataHasChanged:!0,join:join,propertiesMap:propertiesMap}}catch(error){throw error instanceof data_request.b||onLoadError(sourceDataId,requestToken,"Join error: "+error.message),error}}async _syncJoins(syncContext,style){const joinSyncs=this.getValidJoins().map(async join=>(await this._syncJoinStyleMeta(syncContext,join,style),await this._syncJoinFormatters(syncContext,join,style),this._syncJoin({join:join,...syncContext})));return await Promise.all(joinSyncs)}_getSearchFilters(dataFilters,source,style){const fieldNames=[...source.getFieldNames(),...style.getSourceFieldNames(),...this.getValidJoins().map(join=>join.getLeftField().getName())],sourceQuery=this.getQuery();return{...dataFilters,fieldNames:external_kbnSharedDeps_Lodash_default.a.uniq(fieldNames).sort(),geogridPrecision:source.getGeoGridPrecision(dataFilters.zoom),sourceQuery:sourceQuery||void 0,applyGlobalQuery:source.getApplyGlobalQuery(),applyGlobalTime:source.getApplyGlobalTime(),sourceMeta:source.getSyncMeta()}}_performInnerJoins(sourceResult,joinStates,updateSourceData){let shouldUpdateStore=sourceResult.refreshed||joinStates.some(joinState=>joinState.dataHasChanged);if(shouldUpdateStore){for(let i=0;i<sourceResult.featureCollection.features.length;i++){const feature=sourceResult.featureCollection.features[i];feature.properties||(feature.properties={});const oldVisbility=feature.properties[constants.FEATURE_VISIBLE_PROPERTY_NAME];let isFeatureVisible=!0;for(let j=0;j<joinStates.length;j++){const joinState=joinStates[j],innerJoin=joinState.join,canJoinOnCurrent=!!joinState.propertiesMap&&innerJoin.joinPropertiesToFeature(feature,joinState.propertiesMap);isFeatureVisible=isFeatureVisible&&canJoinOnCurrent}oldVisbility!==isFeatureVisible&&(shouldUpdateStore=!0),feature.properties[constants.FEATURE_VISIBLE_PROPERTY_NAME]=isFeatureVisible}shouldUpdateStore&&updateSourceData({...sourceResult.featureCollection})}}async _syncSourceStyleMeta(syncContext,source,style){const sourceQuery=this.getQuery();return this._syncStyleMeta({source:source,style:style,sourceQuery:sourceQuery||void 0,dataRequestId:constants.SOURCE_META_DATA_REQUEST_ID,dynamicStyleProps:style.getDynamicPropertiesArray().filter(dynamicStyleProp=>dynamicStyleProp.getFieldOrigin()===constants.FIELD_ORIGIN.SOURCE&&dynamicStyleProp.isFieldMetaEnabled()),...syncContext})}async _syncJoinStyleMeta(syncContext,join,style){const joinSource=join.getRightJoinSource();return this._syncStyleMeta({source:joinSource,style:style,sourceQuery:joinSource.getWhereQuery(),dataRequestId:join.getSourceMetaDataRequestId(),dynamicStyleProps:this.getCurrentStyle().getDynamicPropertiesArray().filter(dynamicStyleProp=>{const matchingField=joinSource.getFieldByName(dynamicStyleProp.getFieldName());return dynamicStyleProp.getFieldOrigin()===constants.FIELD_ORIGIN.JOIN&&!!matchingField&&dynamicStyleProp.isFieldMetaEnabled()}),...syncContext})}async _syncStyleMeta({source:source,style:style,sourceQuery:sourceQuery,dataRequestId:dataRequestId,dynamicStyleProps:dynamicStyleProps,dataFilters:dataFilters,startLoading:startLoading,stopLoading:stopLoading,onLoadError:onLoadError,registerCancelCallback:registerCancelCallback}){if(!source.isESSource()||0===dynamicStyleProps.length)return;const dynamicStyleFields=dynamicStyleProps.map(dynamicStyleProp=>`${dynamicStyleProp.getFieldName()}${dynamicStyleProp.getStyleMetaHash()}`),nextMeta={dynamicStyleFields:external_kbnSharedDeps_Lodash_default.a.uniq(dynamicStyleFields).sort(),sourceQuery:sourceQuery,isTimeAware:this.getCurrentStyle().isTimeAware()&&await source.isTimeAware(),timeFilters:dataFilters.timeFilters,searchSessionId:dataFilters.searchSessionId},prevDataRequest=this.getDataRequest(dataRequestId);if(Object(can_skip_fetch.c)({prevDataRequest:prevDataRequest,nextMeta:nextMeta}))return;const requestToken=Symbol(`layer-${this.getId()}-${dataRequestId}`);try{startLoading(dataRequestId,requestToken,nextMeta);const layerName=await this.getDisplayName(source);stopLoading(dataRequestId,requestToken,await source.loadStylePropsMeta({layerName:layerName,style:style,dynamicStyleProps:dynamicStyleProps,registerCancelCallback:registerCancelCallback.bind(null,requestToken),sourceQuery:nextMeta.sourceQuery,timeFilters:nextMeta.timeFilters,searchSessionId:dataFilters.searchSessionId}),nextMeta)}catch(error){throw error instanceof data_request.b||onLoadError(dataRequestId,requestToken,error.message),error}}async _syncSourceFormatters(syncContext,source,style){return this._syncFormatters({source:source,dataRequestId:constants.SOURCE_FORMATTERS_DATA_REQUEST_ID,fields:style.getDynamicPropertiesArray().filter(dynamicStyleProp=>dynamicStyleProp.getFieldOrigin()===constants.FIELD_ORIGIN.SOURCE).map(dynamicStyleProp=>dynamicStyleProp.getField()),...syncContext})}async _syncJoinFormatters(syncContext,join,style){const joinSource=join.getRightJoinSource();return this._syncFormatters({source:joinSource,dataRequestId:join.getSourceFormattersDataRequestId(),fields:style.getDynamicPropertiesArray().filter(dynamicStyleProp=>{const matchingField=joinSource.getFieldByName(dynamicStyleProp.getFieldName());return dynamicStyleProp.getFieldOrigin()===constants.FIELD_ORIGIN.JOIN&&!!matchingField}).map(dynamicStyleProp=>dynamicStyleProp.getField()),...syncContext})}async _syncFormatters({source:source,dataRequestId:dataRequestId,fields:fields,startLoading:startLoading,stopLoading:stopLoading,onLoadError:onLoadError}){if(0===fields.length)return;const fieldNames=fields.map(field=>field.getName()),nextMeta={fieldNames:external_kbnSharedDeps_Lodash_default.a.uniq(fieldNames).sort()},prevDataRequest=this.getDataRequest(dataRequestId);if(Object(can_skip_fetch.a)({prevDataRequest:prevDataRequest,nextMeta:nextMeta}))return;const requestToken=Symbol(`layer-${this.getId()}-${dataRequestId}`);try{startLoading(dataRequestId,requestToken,nextMeta);const formatters={},promises=fields.filter(field=>field.canValueBeFormatted()).map(async field=>{formatters[field.getName()]=await source.createFieldFormatter(field)});await Promise.all(promises),stopLoading(dataRequestId,requestToken,formatters,nextMeta)}catch(error){throw onLoadError(dataRequestId,requestToken,error.message),error}}async syncData(syncContext){await this._syncData(syncContext,this.getSource(),this.getCurrentStyle())}async _syncData(syncContext,source,style){if(!this.isLoadingBounds())try{await this._syncSourceStyleMeta(syncContext,source,style),await this._syncSourceFormatters(syncContext,source,style);const sourceResult=await syncVectorSource({layerId:this.getId(),layerName:await this.getDisplayName(source),prevDataRequest:this.getSourceDataRequest(),requestMeta:this._getSearchFilters(syncContext.dataFilters,source,style),syncContext:syncContext,source:source});if(!sourceResult.featureCollection||!sourceResult.featureCollection.features.length||!this.hasJoins())return;const joinStates=await this._syncJoins(syncContext,style);this._performInnerJoins(sourceResult,joinStates,syncContext.updateSourceData)}catch(error){if(!(error instanceof data_request.b))throw error}}_getSourceFeatureCollection(){const sourceDataRequest=this.getSourceDataRequest();return sourceDataRequest?sourceDataRequest.getData():null}_syncFeatureCollectionWithMb(mbMap){const mbGeoJSONSource=mbMap.getSource(this.getId()),featureCollection=this._getSourceFeatureCollection(),featureCollectionOnMap=layers_layer.a.getBoundDataForSource(mbMap,this.getId());if(!featureCollection)return featureCollectionOnMap&&this.getCurrentStyle().clearFeatureState(featureCollectionOnMap,mbMap,this.getId()),void mbGeoJSONSource.setData(constants.EMPTY_FEATURE_COLLECTION);const hasGeoJsonProperties=this.getCurrentStyle().setFeatureStateAndStyleProps(featureCollection,mbMap,this.getId());(featureCollection!==featureCollectionOnMap||hasGeoJsonProperties)&&mbGeoJSONSource.setData(featureCollection)}_setMbPointsProperties(mbMap,mvtSourceLayer){const pointLayerId=this._getMbPointLayerId(),symbolLayerId=this._getMbSymbolLayerId(),pointLayer=mbMap.getLayer(pointLayerId),symbolLayer=mbMap.getLayer(symbolLayerId);let markerLayerId,textLayerId;this.getCurrentStyle().arePointsSymbolizedAsCircles()?(markerLayerId=pointLayerId,textLayerId=this._getMbTextLayerId(),symbolLayer&&mbMap.setLayoutProperty(symbolLayerId,"visibility","none"),this._setMbCircleProperties(mbMap,mvtSourceLayer)):(markerLayerId=symbolLayerId,textLayerId=symbolLayerId,pointLayer&&(mbMap.setLayoutProperty(pointLayerId,"visibility","none"),mbMap.setLayoutProperty(this._getMbTextLayerId(),"visibility","none")),this._setMbSymbolProperties(mbMap,mvtSourceLayer)),this.syncVisibilityWithMb(mbMap,markerLayerId),mbMap.setLayerZoomRange(markerLayerId,this.getMinZoom(),this.getMaxZoom()),markerLayerId!==textLayerId&&(this.syncVisibilityWithMb(mbMap,textLayerId),mbMap.setLayerZoomRange(textLayerId,this.getMinZoom(),this.getMaxZoom()))}_setMbCircleProperties(mbMap,mvtSourceLayer){const sourceId=this.getId(),pointLayerId=this._getMbPointLayerId();if(!mbMap.getLayer(pointLayerId)){const mbLayer={id:pointLayerId,type:"circle",source:sourceId,paint:{}};mvtSourceLayer&&(mbLayer["source-layer"]=mvtSourceLayer),mbMap.addLayer(mbLayer)}const textLayerId=this._getMbTextLayerId();if(!mbMap.getLayer(textLayerId)){const mbLayer={id:textLayerId,type:"symbol",source:sourceId};mvtSourceLayer&&(mbLayer["source-layer"]=mvtSourceLayer),mbMap.addLayer(mbLayer)}const filterExpr=Object(mb_filter_expressions.e)(this.hasJoins());filterExpr!==mbMap.getFilter(pointLayerId)&&(mbMap.setFilter(pointLayerId,filterExpr),mbMap.setFilter(textLayerId,filterExpr)),this.getCurrentStyle().setMBPaintPropertiesForPoints({alpha:this.getAlpha(),mbMap:mbMap,pointLayerId:pointLayerId}),this.getCurrentStyle().setMBPropertiesForLabelText({alpha:this.getAlpha(),mbMap:mbMap,textLayerId:textLayerId})}_setMbSymbolProperties(mbMap,mvtSourceLayer){const sourceId=this.getId(),symbolLayerId=this._getMbSymbolLayerId();if(!mbMap.getLayer(symbolLayerId)){const mbLayer={id:symbolLayerId,type:"symbol",source:sourceId};mvtSourceLayer&&(mbLayer["source-layer"]=mvtSourceLayer),mbMap.addLayer(mbLayer)}const filterExpr=Object(mb_filter_expressions.e)(this.hasJoins());filterExpr!==mbMap.getFilter(symbolLayerId)&&mbMap.setFilter(symbolLayerId,filterExpr),this.getCurrentStyle().setMBSymbolPropertiesForPoints({alpha:this.getAlpha(),mbMap:mbMap,symbolLayerId:symbolLayerId}),this.getCurrentStyle().setMBPropertiesForLabelText({alpha:this.getAlpha(),mbMap:mbMap,textLayerId:symbolLayerId})}_setMbLinePolygonProperties(mbMap,mvtSourceLayer){const sourceId=this.getId(),fillLayerId=this._getMbPolygonLayerId(),lineLayerId=this._getMbLineLayerId(),tooManyFeaturesLayerId=this._getMbTooManyFeaturesLayerId(),hasJoins=this.hasJoins();if(!mbMap.getLayer(fillLayerId)){const mbLayer={id:fillLayerId,type:"fill",source:sourceId,paint:{}};mvtSourceLayer&&(mbLayer["source-layer"]=mvtSourceLayer),mbMap.addLayer(mbLayer)}if(!mbMap.getLayer(lineLayerId)){const mbLayer={id:lineLayerId,type:"line",source:sourceId,paint:{}};mvtSourceLayer&&(mbLayer["source-layer"]=mvtSourceLayer),mbMap.addLayer(mbLayer)}if(!mbMap.getLayer(tooManyFeaturesLayerId)){const mbLayer={id:tooManyFeaturesLayerId,type:"fill",source:sourceId,paint:{}};mvtSourceLayer&&(mbLayer["source-layer"]=mvtSourceLayer),mbMap.addLayer(mbLayer),mbMap.setFilter(tooManyFeaturesLayerId,["==",["get",constants.KBN_TOO_MANY_FEATURES_PROPERTY],!0]),mbMap.setPaintProperty(tooManyFeaturesLayerId,"fill-pattern",constants.KBN_TOO_MANY_FEATURES_IMAGE_ID),mbMap.setPaintProperty(tooManyFeaturesLayerId,"fill-opacity",this.getAlpha())}this.getCurrentStyle().setMBPaintProperties({alpha:this.getAlpha(),mbMap:mbMap,fillLayerId:fillLayerId,lineLayerId:lineLayerId}),this.syncVisibilityWithMb(mbMap,fillLayerId),mbMap.setLayerZoomRange(fillLayerId,this.getMinZoom(),this.getMaxZoom());const fillFilterExpr=Object(mb_filter_expressions.c)(hasJoins);fillFilterExpr!==mbMap.getFilter(fillLayerId)&&mbMap.setFilter(fillLayerId,fillFilterExpr),this.syncVisibilityWithMb(mbMap,lineLayerId),mbMap.setLayerZoomRange(lineLayerId,this.getMinZoom(),this.getMaxZoom());const lineFilterExpr=Object(mb_filter_expressions.d)(hasJoins);lineFilterExpr!==mbMap.getFilter(lineLayerId)&&mbMap.setFilter(lineLayerId,lineFilterExpr),this.syncVisibilityWithMb(mbMap,tooManyFeaturesLayerId),mbMap.setLayerZoomRange(tooManyFeaturesLayerId,this.getMinZoom(),this.getMaxZoom())}_setMbCentroidProperties(mbMap,mvtSourceLayer){const centroidLayerId=this._getMbCentroidLayerId();if(!mbMap.getLayer(centroidLayerId)){const mbLayer={id:centroidLayerId,type:"symbol",source:this.getId()};mvtSourceLayer&&(mbLayer["source-layer"]=mvtSourceLayer),mbMap.addLayer(mbLayer)}const filterExpr=Object(mb_filter_expressions.b)(this.hasJoins());filterExpr!==mbMap.getFilter(centroidLayerId)&&mbMap.setFilter(centroidLayerId,filterExpr),this.getCurrentStyle().setMBPropertiesForLabelText({alpha:this.getAlpha(),mbMap:mbMap,textLayerId:centroidLayerId}),this.syncVisibilityWithMb(mbMap,centroidLayerId),mbMap.setLayerZoomRange(centroidLayerId,this.getMinZoom(),this.getMaxZoom())}_syncStylePropertiesWithMb(mbMap){this._setMbPointsProperties(mbMap),this._setMbLinePolygonProperties(mbMap),this._setMbCentroidProperties(mbMap)}syncLayerWithMB(mbMap){addGeoJsonMbSource(this._getMbSourceId(),this.getMbLayerIds(),mbMap),this._syncFeatureCollectionWithMb(mbMap),this._syncStylePropertiesWithMb(mbMap)}_getMbPointLayerId(){return this.makeMbLayerId("circle")}_getMbTextLayerId(){return this.makeMbLayerId("text")}_getMbCentroidLayerId(){return this.makeMbLayerId("centroid")}_getMbSymbolLayerId(){return this.makeMbLayerId("symbol")}_getMbLineLayerId(){return this.makeMbLayerId("line")}_getMbPolygonLayerId(){return this.makeMbLayerId("fill")}_getMbTooManyFeaturesLayerId(){return this.makeMbLayerId("toomanyfeatures")}getMbLayerIds(){return[this._getMbPointLayerId(),this._getMbTextLayerId(),this._getMbCentroidLayerId(),this._getMbSymbolLayerId(),this._getMbLineLayerId(),this._getMbPolygonLayerId(),this._getMbTooManyFeaturesLayerId()]}ownsMbLayerId(mbLayerId){return this.getMbLayerIds().includes(mbLayerId)}ownsMbSourceId(mbSourceId){return this.getId()===mbSourceId}_addJoinsToSourceTooltips(tooltipsFromSource){for(let i=0;i<tooltipsFromSource.length;i++){const tooltipProperty=tooltipsFromSource[i],matchingJoins=[];for(let j=0;j<this.getJoins().length;j++)this.getJoins()[j].getLeftField().getName()===tooltipProperty.getPropertyKey()&&matchingJoins.push(this.getJoins()[j]);matchingJoins.length&&(tooltipsFromSource[i]=new JoinTooltipProperty(tooltipProperty,matchingJoins))}}async getPropertiesForTooltip(properties){const vectorSource=this.getSource();let allProperties=await vectorSource.getTooltipProperties(properties);this._addJoinsToSourceTooltips(allProperties);for(let i=0;i<this.getJoins().length;i++){const propsFromJoin=await this.getJoins()[i].getTooltipProperties(properties);allProperties=[...allProperties,...propsFromJoin]}return allProperties}canShowTooltip(){return this.isVisible()&&(this.getSource().canFormatFeatureProperties()||this.getJoins().length>0)}getFeatureById(id){const featureCollection=this._getSourceFeatureCollection();if(!featureCollection)return null;const targetFeature=featureCollection.features.find(feature=>{var _feature$properties2;return(null===(_feature$properties2=feature.properties)||void 0===_feature$properties2?void 0:_feature$properties2[constants.FEATURE_ID_PROPERTY_NAME])===id});return targetFeature||null}async getLicensedFeatures(){return await this._source.getLicensedFeatures()}}vector_layer_defineProperty(vector_layer_VectorLayer,"type",constants.LAYER_TYPE.VECTOR)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return getKibanaRegionList})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getKibanaTileMap})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getEmsFileLayers})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getEmsTmsServices})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getGlyphUrl})),__webpack_require__.d(__webpack_exports__,"g",(function(){return isRetina})),__webpack_require__.d(__webpack_exports__,"a",(function(){return fetchGeoJson}));var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),external_kbnSharedDeps_Lodash_=__webpack_require__(23),external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_),ORIGIN_EMS="elastic_maps_service";function toAbsoluteUrl(host,path){if(!host)return path;var hostEndWithSlash="/"===host[host.length-1],pathStartsWithSlash="/"===path[0];return!0===hostEndWithSlash&&!0===pathStartsWithSlash?host+path.slice(1):hostEndWithSlash!==pathStartsWithSlash?host+path:host+"/"+path}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ems_service_AbstractEmsService=function(){function AbstractEmsService(config,emsClient,proxyPath){var _this=this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AbstractEmsService),_defineProperty(this,"_emsClient",void 0),_defineProperty(this,"_config",void 0),_defineProperty(this,"_proxyPath",void 0),_defineProperty(this,"_getAbsoluteUrl",(function(url){return/^https?:\/\//.test(url)?url:toAbsoluteUrl(_this.getApiUrl(),url)})),this._config=config,this._emsClient=emsClient,this._proxyPath=proxyPath}var Constructor,protoProps,staticProps;return Constructor=AbstractEmsService,(protoProps=[{key:"getAttributions",value:function(){var _this2=this;return this._config.attribution.map((function(attribution){return{url:_this2._emsClient.getValueInLanguage(attribution.url),label:_this2._emsClient.getValueInLanguage(attribution.label)}}))}},{key:"getMarkdownAttribution",value:function(){var _this3=this;return this._config.attribution.map((function(attribution){var url=_this3._emsClient.getValueInLanguage(attribution.url),label=_this3._emsClient.getValueInLanguage(attribution.label);return"[".concat(label,"](").concat(url,")")})).join("|")}},{key:"getOrigin",value:function(){return ORIGIN_EMS}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),AbstractEmsService}();function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=o[Symbol.iterator]()},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e2){didErr=!0,err=_e2},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){tms_service_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function tms_service_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function tms_service_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var EMSFormatType,tms_service_TMSService=function(_AbstractEmsService){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(TMSService,_AbstractEmsService);var Constructor,protoProps,staticProps,_getUrlTemplateForGlyphs2,_getSpriteSheetRootPath2,_getMaxZoom,_getMinZoom,_getSpriteSheetPngPath,_getSpriteSheetJsonPath,_getSpriteSheetMeta,_getVectorStyleSheetRaw,_getVectorStyleSheet,_getUrlTemplateForVector,_getUrlTemplate,_getDefaultRasterStyle,_super=_createSuper(TMSService);function TMSService(config,emsClient,proxyPath){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TMSService),tms_service_defineProperty(_assertThisInitialized(_this=_super.call(this,config,emsClient,proxyPath)),"_config",void 0),tms_service_defineProperty(_assertThisInitialized(_this),"_getRasterStyleJson",external_kbnSharedDeps_Lodash_default.a.once(_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var rasterUrl,url;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!(rasterUrl=_this._getStyleUrlForLocale("raster"))){_context.next=6;break}return url=_this._proxyPath+_this._getAbsoluteUrl(rasterUrl),_context.abrupt("return",_this._emsClient.getManifest(_this._emsClient.extendUrlWithParams(url)));case 6:return _context.abrupt("return");case 7:case"end":return _context.stop()}}),_callee)}))))),tms_service_defineProperty(_assertThisInitialized(_this),"_getVectorStyleJsonRaw",external_kbnSharedDeps_Lodash_default.a.once(_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var vectorUrl,url,vectorJson;return regeneratorRuntime.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!(vectorUrl=_this._getStyleUrlForLocale("vector"))){_context2.next=9;break}return url=_this._proxyPath+_this._getAbsoluteUrl(vectorUrl),_context2.next=5,_this._emsClient.getManifest(_this._emsClient.extendUrlWithParams(url));case 5:return vectorJson=_context2.sent,_context2.abrupt("return",_objectSpread({},vectorJson));case 9:return _context2.abrupt("return");case 10:case"end":return _context2.stop()}}),_callee2)}))))),tms_service_defineProperty(_assertThisInitialized(_this),"_getVectorStyleJsonInlined",external_kbnSharedDeps_Lodash_default.a.once(_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var vectorJson,inlinedSources,sources,_iterator,_step,_sourceName,url,sourceUrl,extendedUrl,sourceJson,extendedTileUrls;return regeneratorRuntime.wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_this._getVectorStyleJsonRaw();case 2:if(!(vectorJson=_context3.sent)){_context3.next=43;break}inlinedSources={},sources=vectorJson.sources,_iterator=_createForOfIteratorHelper(Object.getOwnPropertyNames(sources)),_context3.prev=7,_iterator.s();case 9:if((_step=_iterator.n()).done){_context3.next=21;break}return _sourceName=_step.value,url=sources[_sourceName].url,sourceUrl=_this._proxyPath+_this._getAbsoluteUrl(url),extendedUrl=_this._emsClient.extendUrlWithParams(sourceUrl),_context3.next=16,_this._emsClient.getManifest(extendedUrl);case 16:sourceJson=_context3.sent,extendedTileUrls=sourceJson.tiles.map((function(tileUrl){var url=_this._proxyPath+_this._getAbsoluteUrl(tileUrl);return _this._emsClient.extendUrlWithParams(url)})),inlinedSources[_sourceName]=_objectSpread(_objectSpread({},sourceJson),{},{type:"vector",tiles:extendedTileUrls});case 19:_context3.next=9;break;case 21:_context3.next=26;break;case 23:_context3.prev=23,_context3.t0=_context3.catch(7),_iterator.e(_context3.t0);case 26:return _context3.prev=26,_iterator.f(),_context3.finish(26);case 29:return _context3.t1=_objectSpread,_context3.t2=_objectSpread({},vectorJson),_context3.t3={},_context3.t4=inlinedSources,_context3.next=35,_this._getSpriteSheetRootPath();case 35:return _context3.t5=_context3.sent,_context3.next=38,_this._getUrlTemplateForGlyphs();case 38:return _context3.t6=_context3.sent,_context3.t7={sources:_context3.t4,sprite:_context3.t5,glyphs:_context3.t6},_context3.abrupt("return",(0,_context3.t1)(_context3.t2,_context3.t3,_context3.t7));case 43:return _context3.abrupt("return");case 44:case"end":return _context3.stop()}}),_callee3,null,[[7,23,26,29]])}))))),_this._config=config,_this}return Constructor=TMSService,(protoProps=[{key:"getDefaultRasterStyle",value:(_getDefaultRasterStyle=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var tileJson,tiles,_this2=this;return regeneratorRuntime.wrap((function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,this._getRasterStyleJson();case 2:if(!(tileJson=_context4.sent)){_context4.next=8;break}return tiles=tileJson.tiles.map((function(tile){return _this2._proxyPath+_this2._getAbsoluteUrl(tile)})),_context4.abrupt("return",_objectSpread(_objectSpread({},tileJson),{tiles:tiles}));case 8:return _context4.abrupt("return");case 9:case"end":return _context4.stop()}}),_callee4,this)}))),function(){return _getDefaultRasterStyle.apply(this,arguments)})},{key:"getUrlTemplate",value:(_getUrlTemplate=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(){var tileJson,directUrl;return regeneratorRuntime.wrap((function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,this._getRasterStyleJson();case 2:if(!(tileJson=_context5.sent)){_context5.next=8;break}return directUrl=this._proxyPath+this._getAbsoluteUrl(tileJson.tiles[0]),_context5.abrupt("return",this._emsClient.extendUrlWithParams(directUrl));case 8:return _context5.abrupt("return","");case 9:case"end":return _context5.stop()}}),_callee5,this)}))),function(){return _getUrlTemplate.apply(this,arguments)})},{key:"getUrlTemplateForVector",value:(_getUrlTemplateForVector=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(sourceId){var tileJson,directUrl;return regeneratorRuntime.wrap((function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,this._getVectorStyleJsonInlined();case 2:if(tileJson=_context6.sent){_context6.next=5;break}return _context6.abrupt("return","");case 5:if(!tileJson.sources[sourceId]||!tileJson.sources[sourceId].tiles){_context6.next=10;break}return directUrl=this._proxyPath+this._getAbsoluteUrl(tileJson.sources[sourceId].tiles[0]),_context6.abrupt("return",this._emsClient.extendUrlWithParams(directUrl));case 10:return _context6.abrupt("return","");case 11:case"end":return _context6.stop()}}),_callee6,this)}))),function(_x){return _getUrlTemplateForVector.apply(this,arguments)})},{key:"getVectorStyleSheet",value:(_getVectorStyleSheet=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(){return regeneratorRuntime.wrap((function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return _context7.next=2,this._getVectorStyleJsonInlined();case 2:return _context7.abrupt("return",_context7.sent);case 3:case"end":return _context7.stop()}}),_callee7,this)}))),function(){return _getVectorStyleSheet.apply(this,arguments)})},{key:"getVectorStyleSheetRaw",value:(_getVectorStyleSheetRaw=_asyncToGenerator(regeneratorRuntime.mark((function _callee8(){return regeneratorRuntime.wrap((function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return _context8.next=2,this._getVectorStyleJsonRaw();case 2:return _context8.abrupt("return",_context8.sent);case 3:case"end":return _context8.stop()}}),_callee8,this)}))),function(){return _getVectorStyleSheetRaw.apply(this,arguments)})},{key:"getSpriteSheetMeta",value:(_getSpriteSheetMeta=_asyncToGenerator(regeneratorRuntime.mark((function _callee9(){var isRetina,metaUrl,spritePngs,metaUrlExtended,jsonMeta,_args9=arguments;return regeneratorRuntime.wrap((function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return isRetina=_args9.length>0&&void 0!==_args9[0]&&_args9[0],_context9.next=3,this.getSpriteSheetJsonPath(isRetina);case 3:return metaUrl=_context9.sent,_context9.next=6,this.getSpriteSheetPngPath(isRetina);case 6:if(spritePngs=_context9.sent,!metaUrl||!spritePngs){_context9.next=15;break}return metaUrlExtended=this._emsClient.extendUrlWithParams(metaUrl),_context9.next=11,this._emsClient.getManifest(metaUrlExtended);case 11:return jsonMeta=_context9.sent,_context9.abrupt("return",{png:spritePngs,json:jsonMeta});case 15:return _context9.abrupt("return");case 16:case"end":return _context9.stop()}}),_callee9,this)}))),function(){return _getSpriteSheetMeta.apply(this,arguments)})},{key:"getSpriteSheetJsonPath",value:(_getSpriteSheetJsonPath=_asyncToGenerator(regeneratorRuntime.mark((function _callee10(){var isRetina,spriteSheetRootPath,suffix,_args10=arguments;return regeneratorRuntime.wrap((function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:return isRetina=_args10.length>0&&void 0!==_args10[0]&&_args10[0],_context10.next=3,this._getSpriteSheetRootPath();case 3:if(!(spriteSheetRootPath=_context10.sent)){_context10.next=9;break}return suffix=isRetina?"@2x":"",_context10.abrupt("return",spriteSheetRootPath+suffix+".json");case 9:return _context10.abrupt("return","");case 10:case"end":return _context10.stop()}}),_callee10,this)}))),function(){return _getSpriteSheetJsonPath.apply(this,arguments)})},{key:"getSpriteSheetPngPath",value:(_getSpriteSheetPngPath=_asyncToGenerator(regeneratorRuntime.mark((function _callee11(){var isRetina,spriteSheetRootPath,suffix,_args11=arguments;return regeneratorRuntime.wrap((function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:return isRetina=_args11.length>0&&void 0!==_args11[0]&&_args11[0],_context11.next=3,this._getSpriteSheetRootPath();case 3:if(!(spriteSheetRootPath=_context11.sent)){_context11.next=9;break}return suffix=isRetina?"@2x":"",_context11.abrupt("return",spriteSheetRootPath+suffix+".png");case 9:return _context11.abrupt("return","");case 10:case"end":return _context11.stop()}}),_callee11,this)}))),function(){return _getSpriteSheetPngPath.apply(this,arguments)})},{key:"getDisplayName",value:function(){return this._emsClient.getValueInLanguage(this._config.name)}},{key:"getMinZoom",value:(_getMinZoom=_asyncToGenerator(regeneratorRuntime.mark((function _callee12(){var tileJson;return regeneratorRuntime.wrap((function(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:return _context12.next=2,this._getRasterStyleJson();case 2:if(!(tileJson=_context12.sent)){_context12.next=7;break}return _context12.abrupt("return",tileJson.minzoom);case 7:return _context12.abrupt("return");case 8:case"end":return _context12.stop()}}),_callee12,this)}))),function(){return _getMinZoom.apply(this,arguments)})},{key:"getMaxZoom",value:(_getMaxZoom=_asyncToGenerator(regeneratorRuntime.mark((function _callee13(){var tileJson;return regeneratorRuntime.wrap((function(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:return _context13.next=2,this._getRasterStyleJson();case 2:if(!(tileJson=_context13.sent)){_context13.next=7;break}return _context13.abrupt("return",tileJson.maxzoom);case 7:return _context13.abrupt("return");case 8:case"end":return _context13.stop()}}),_callee13,this)}))),function(){return _getMaxZoom.apply(this,arguments)})},{key:"getId",value:function(){return this._config.id}},{key:"hasId",value:function(id){return this._config.id===id}},{key:"getApiUrl",value:function(){return this._emsClient.getTileApiUrl()}},{key:"_getStyleUrlForLocale",value:function(formatType){var vectorFormats=this._getFormats(formatType,this._emsClient.getLocale());if(vectorFormats.length||(vectorFormats=this._getFormats(formatType,this._emsClient.getDefaultLocale())),!vectorFormats.length)throw new Error("Cannot find ".concat(formatType," tile layer for locale ").concat(this._emsClient.getLocale()," or ").concat(this._emsClient.getDefaultLocale()));var defaultStyle=vectorFormats[0];if(defaultStyle&&defaultStyle.hasOwnProperty("url"))return defaultStyle.url}},{key:"_getFormats",value:function(formatType,locale){return this._config.formats.filter((function(format){return format.locale===locale&&format.format===formatType}))}},{key:"_getSpriteSheetRootPath",value:(_getSpriteSheetRootPath2=_asyncToGenerator(regeneratorRuntime.mark((function _callee14(){var vectorStyleJson;return regeneratorRuntime.wrap((function(_context14){for(;;)switch(_context14.prev=_context14.next){case 0:return _context14.next=2,this._getVectorStyleJsonRaw();case 2:if(!(vectorStyleJson=_context14.sent)){_context14.next=7;break}return _context14.abrupt("return",this._proxyPath+this._getAbsoluteUrl(vectorStyleJson.sprite));case 7:return _context14.abrupt("return","");case 8:case"end":return _context14.stop()}}),_callee14,this)}))),function(){return _getSpriteSheetRootPath2.apply(this,arguments)})},{key:"_getUrlTemplateForGlyphs",value:(_getUrlTemplateForGlyphs2=_asyncToGenerator(regeneratorRuntime.mark((function _callee15(){var vectorStyleJson;return regeneratorRuntime.wrap((function(_context15){for(;;)switch(_context15.prev=_context15.next){case 0:return _context15.next=2,this._getVectorStyleJsonRaw();case 2:if(!(vectorStyleJson=_context15.sent)){_context15.next=7;break}return _context15.abrupt("return",this._proxyPath+this._getAbsoluteUrl(vectorStyleJson.glyphs));case 7:return _context15.abrupt("return","");case 8:case"end":return _context15.stop()}}),_callee15,this)}))),function(){return _getUrlTemplateForGlyphs2.apply(this,arguments)})}])&&tms_service_defineProperties(Constructor.prototype,protoProps),staticProps&&tms_service_defineProperties(Constructor,staticProps),TMSService}(ems_service_AbstractEmsService),url_url=__webpack_require__(92),url_default=__webpack_require__.n(url_url),topojson_client=__webpack_require__(254);function file_layer_typeof(obj){return(file_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function file_layer_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function file_layer_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?file_layer_ownKeys(Object(source),!0).forEach((function(key){file_layer_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):file_layer_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function file_layer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function file_layer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function file_layer_setPrototypeOf(o,p){return(file_layer_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function file_layer_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=file_layer_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=file_layer_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return file_layer_possibleConstructorReturn(this,result)}}function file_layer_possibleConstructorReturn(self,call){return!call||"object"!==file_layer_typeof(call)&&"function"!=typeof call?file_layer_assertThisInitialized(self):call}function file_layer_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function file_layer_getPrototypeOf(o){return(file_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function file_layer_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}!function(EMSFormatType){EMSFormatType.geojson="geojson",EMSFormatType.topojson="topojson"}(EMSFormatType||(EMSFormatType={}));var file_layer_FileLayer=function(_AbstractEmsService){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&file_layer_setPrototypeOf(subClass,superClass)}(FileLayer,_AbstractEmsService);var Constructor,protoProps,staticProps,fn,_getGeoJson,_super=file_layer_createSuper(FileLayer);function FileLayer(config,emsClient,proxyPath){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FileLayer),file_layer_defineProperty(file_layer_assertThisInitialized(_this=_super.call(this,config,emsClient,proxyPath)),"_config",void 0),_this._config=config,_this}return Constructor=FileLayer,(protoProps=[{key:"getGeoJson",value:(fn=regeneratorRuntime.mark((function _callee(){var cachedGeoJson,format,fetchUrl,geojson,fetchedJson,_meta$feature_collect,meta,featureCollectionPath;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!(cachedGeoJson=this._emsClient.getCachedGeoJson(this.getId()))){_context.next=3;break}return _context.abrupt("return",cachedGeoJson);case 3:return format=this.getDefaultFormatType(),fetchUrl=this.getDefaultFormatUrl(),_context.next=7,this._emsClient.getManifest(fetchUrl);case 7:if(!(fetchedJson=_context.sent)){_context.next=22;break}if("geojson"!==format){_context.next=13;break}geojson=fetchedJson,_context.next=20;break;case 13:if("topojson"!==format){_context.next=19;break}meta=this.getDefaultFormatMeta(),featureCollectionPath=null!==(_meta$feature_collect=null==meta?void 0:meta.feature_collection_path)&&void 0!==_meta$feature_collect?_meta$feature_collect:"data",geojson=topojson_client.feature(fetchedJson,featureCollectionPath),_context.next=20;break;case 19:return _context.abrupt("return");case 20:return this._emsClient.cacheGeoJson(this.getId(),geojson),_context.abrupt("return",geojson);case 22:return _context.abrupt("return");case 23:case"end":return _context.stop()}}),_callee,this)})),_getGeoJson=function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){file_layer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){file_layer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))},function(){return _getGeoJson.apply(this,arguments)})},{key:"getFields",value:function(){return this._config.fields}},{key:"getFieldsInLanguage",value:function(){var _this2=this;return this.getFields().map((function(field){return{type:field.type,name:field.id,description:_this2._emsClient.getValueInLanguage(field.label)}}))}},{key:"getDisplayName",value:function(){var layerName=this._emsClient.getValueInLanguage(this._config.layer_name);return layerName||""}},{key:"getId",value:function(){return this._config.layer_id}},{key:"hasId",value:function(id){var matchesLegacyId=this._config.legacy_ids.indexOf(id)>=0;return this._config.layer_id===id||matchesLegacyId}},{key:"getEMSHotLink",value:function(){var landingPageString=this._emsClient.getLandingPageUrl(),urlObject=url_default.a.parse(landingPageString,!0);return urlObject.hash="file/".concat(this.getId()),urlObject.query=file_layer_objectSpread(file_layer_objectSpread({},urlObject.query),{},{locale:this._emsClient.getLocale()}),url_default.a.format(urlObject)}},{key:"getDefaultFormatType",value:function(){return this._getDefaultFormat().type}},{key:"getFormatOfType",value:function(type){return this._getFormatOfType(type).type}},{key:"getDefaultFormatMeta",value:function(){var format=this._getDefaultFormat();return this._getFormatMeta(format)}},{key:"getFormatOfTypeMeta",value:function(type){var format=this._getFormatOfType(type);return this._getFormatMeta(format)}},{key:"getDefaultFormatUrl",value:function(){var format=this._getDefaultFormat();return this._getFormatUrl(format)}},{key:"getFormatOfTypeUrl",value:function(type){var format=this._getFormatOfType(type);return this._getFormatUrl(format)}},{key:"getCreatedAt",value:function(){return this._config.created_at}},{key:"getApiUrl",value:function(){return this._emsClient.getFileApiUrl()}},{key:"_getFormatUrl",value:function(format){var url=this._proxyPath+this._getAbsoluteUrl(format.url);return this._emsClient.extendUrlWithParams(url)}},{key:"_getFormatMeta",value:function(format){return"meta"in format?format.meta:void 0}},{key:"_getDefaultFormat",value:function(){var defaultFormat=this._config.formats.find((function(format){return format.legacy_default}));return defaultFormat||this._config.formats[0]}},{key:"_getFormatOfType",value:function(type){return this._config.formats.find((function(format){return format.type===type}))||this._getDefaultFormat()}}])&&file_layer_defineProperties(Constructor.prototype,protoProps),staticProps&&file_layer_defineProperties(Constructor,staticProps),FileLayer}(ems_service_AbstractEmsService),semver=__webpack_require__(255),semver_default=__webpack_require__.n(semver),lru_cache=__webpack_require__(279),lru_cache_default=__webpack_require__.n(lru_cache);function ems_client_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function ems_client_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ems_client_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ems_client_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function ems_client_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function ems_client_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ems_client_extendUrl=function(url,props){return function(url,block){var parsed=Object(url_url.parse)(url,!0),meaningfulParts={protocol:parsed.protocol,slashes:parsed.slashes,auth:parsed.auth,hostname:parsed.hostname,port:parsed.port,pathname:parsed.pathname,query:parsed.query||{},hash:parsed.hash},modifiedParts=block(meaningfulParts)||meaningfulParts;return Object(url_url.format)({protocol:modifiedParts.protocol,slashes:modifiedParts.slashes,auth:modifiedParts.auth,hostname:modifiedParts.hostname,port:modifiedParts.port,pathname:modifiedParts.pathname,query:modifiedParts.query,hash:modifiedParts.hash})}(url,(function(parsed){return external_kbnSharedDeps_Lodash_default.a.merge(parsed,props)}))},ems_client_EMSClient=function(){function EMSClient(config){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EMSClient),ems_client_defineProperty(this,"EMS_LOAD_TIMEOUT",32e3),ems_client_defineProperty(this,"_queryParams",void 0),ems_client_defineProperty(this,"_appVersion",void 0),ems_client_defineProperty(this,"_fetchFunction",void 0),ems_client_defineProperty(this,"_sanitizer",void 0),ems_client_defineProperty(this,"_manifestServiceUrl",void 0),ems_client_defineProperty(this,"_fileApiUrl",void 0),ems_client_defineProperty(this,"_tileApiUrl",void 0),ems_client_defineProperty(this,"_emsVersion",void 0),ems_client_defineProperty(this,"_emsLandingPageUrl",void 0),ems_client_defineProperty(this,"_language",void 0),ems_client_defineProperty(this,"_proxyPath",void 0),ems_client_defineProperty(this,"_cache",void 0),ems_client_defineProperty(this,"_getMainCatalog",void 0),ems_client_defineProperty(this,"_getDefaultTMSCatalog",void 0),ems_client_defineProperty(this,"_getDefaultFileCatalog",void 0),ems_client_defineProperty(this,"_loadTMSServices",void 0),ems_client_defineProperty(this,"_loadFileLayers",void 0),"kbnVersion"in config?(console.warn('The "kbnVersion" parameter for ems-client is deprecated. Please use "appVersion" instead.'),this._appVersion=config.kbnVersion):this._appVersion=config.appVersion,this._queryParams={elastic_tile_service_tos:"agree",my_app_name:config.appName||"kibana",my_app_version:this._appVersion},this._sanitizer=config.htmlSanitizer?config.htmlSanitizer:function(x){return x},this._manifestServiceUrl=config.manifestServiceUrl,this._tileApiUrl=config.tileApiUrl,this._fileApiUrl=config.fileApiUrl,this._emsVersion=this._getEmsVersion(config.emsVersion),this._emsLandingPageUrl=config.landingPageUrl||"",this._language=config.language||"en",this._fetchFunction=config.fetchFunction,this._proxyPath=config.proxyPath||"",this._cache=new lru_cache_default.a({max:config.cacheSize||10}),this._invalidateSettings()}var Constructor,protoProps,staticProps,_getManifestWithParams2,_findTMSServiceById,_findFileLayerById,_getTMSServices,_getFileLayers,_getDefaultTMSManifest,_getDefaultFileManifest,_getMainManifest,_getManifest;return Constructor=EMSClient,(protoProps=[{key:"getDefaultLocale",value:function(){return"en"}},{key:"getLocale",value:function(){return this._language}},{key:"getValueInLanguage",value:function(i18nObject){return i18nObject?i18nObject[this._language]?i18nObject[this._language]:i18nObject.en:""}},{key:"getManifest",value:(_getManifest=ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee(endpointUrl){var url,result;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,url=ems_client_extendUrl(endpointUrl,{query:this._queryParams}),_context.next=4,this._fetchWithTimeout(url);case 4:if(!(result=_context.sent)){_context.next=11;break}return _context.next=8,result.json();case 8:_context.t0=_context.sent,_context.next=12;break;case 11:_context.t0=null;case 12:return _context.abrupt("return",_context.t0);case 15:throw _context.prev=15,_context.t1=_context.catch(0),_context.t1||(_context.t1=new Error("Unknown error")),_context.t1 instanceof Error||(_context.t1=new Error(_context.t1.data||"status ".concat(_context.t1.statusText||_context.t1.status))),new Error("Unable to retrieve data from ".concat(endpointUrl,": ").concat(_context.t1.message));case 20:case"end":return _context.stop()}}),_callee,this,[[0,15]])}))),function(_x){return _getManifest.apply(this,arguments)})},{key:"addQueryParams",value:function(additionalQueryParams){for(var _key in additionalQueryParams)if(additionalQueryParams.hasOwnProperty(_key)&&additionalQueryParams[_key]!==this._queryParams[_key]){this._queryParams=external_kbnSharedDeps_Lodash_default.a.assign({},this._queryParams,additionalQueryParams),this._invalidateSettings();break}}},{key:"getMainManifest",value:(_getMainManifest=ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,this._getMainCatalog();case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}),_callee2,this)}))),function(){return _getMainManifest.apply(this,arguments)})},{key:"getDefaultFileManifest",value:(_getDefaultFileManifest=ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,this._getDefaultFileCatalog();case 2:return _context3.abrupt("return",_context3.sent);case 3:case"end":return _context3.stop()}}),_callee3,this)}))),function(){return _getDefaultFileManifest.apply(this,arguments)})},{key:"getDefaultTMSManifest",value:(_getDefaultTMSManifest=ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){return regeneratorRuntime.wrap((function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,this._getDefaultTMSCatalog();case 2:return _context4.abrupt("return",_context4.sent);case 3:case"end":return _context4.stop()}}),_callee4,this)}))),function(){return _getDefaultTMSManifest.apply(this,arguments)})},{key:"getFileLayers",value:(_getFileLayers=ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee5(){return regeneratorRuntime.wrap((function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,this._loadFileLayers();case 2:return _context5.abrupt("return",_context5.sent);case 3:case"end":return _context5.stop()}}),_callee5,this)}))),function(){return _getFileLayers.apply(this,arguments)})},{key:"getTMSServices",value:(_getTMSServices=ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee6(){return regeneratorRuntime.wrap((function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,this._loadTMSServices();case 2:return _context6.abrupt("return",_context6.sent);case 3:case"end":return _context6.stop()}}),_callee6,this)}))),function(){return _getTMSServices.apply(this,arguments)})},{key:"cacheGeoJson",value:function(layerId,geoJson){this._cache.set(layerId,geoJson)}},{key:"getCachedGeoJson",value:function(layerId){return this._cache.get(layerId)}},{key:"getTileApiUrl",value:function(){return this._tileApiUrl}},{key:"getFileApiUrl",value:function(){return this._fileApiUrl}},{key:"getLandingPageUrl",value:function(){return this._emsLandingPageUrl}},{key:"sanitizeHtml",value:function(html){return this._sanitizer(html)}},{key:"extendUrlWithParams",value:function(url){return function(url){return url.replace(/%7B(\w+?)%7D/g,(function(total,varName){return"{".concat(varName,"}")}))}(ems_client_extendUrl(url,{query:this._queryParams}))}},{key:"findFileLayerById",value:(_findFileLayerById=ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee7(id){var fileLayers,i;return regeneratorRuntime.wrap((function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return _context7.next=2,this.getFileLayers();case 2:fileLayers=_context7.sent,i=0;case 4:if(!(i<fileLayers.length)){_context7.next=10;break}if(!fileLayers[i].hasId(id)){_context7.next=7;break}return _context7.abrupt("return",fileLayers[i]);case 7:i++,_context7.next=4;break;case 10:case"end":return _context7.stop()}}),_callee7,this)}))),function(_x2){return _findFileLayerById.apply(this,arguments)})},{key:"findTMSServiceById",value:(_findTMSServiceById=ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee8(id){var tmsServices,i;return regeneratorRuntime.wrap((function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return _context8.next=2,this.getTMSServices();case 2:tmsServices=_context8.sent,i=0;case 4:if(!(i<tmsServices.length)){_context8.next=10;break}if(!tmsServices[i].hasId(id)){_context8.next=7;break}return _context8.abrupt("return",tmsServices[i]);case 7:i++,_context8.next=4;break;case 10:case"end":return _context8.stop()}}),_callee8,this)}))),function(_x3){return _findTMSServiceById.apply(this,arguments)})},{key:"_getEmsVersion",value:function(version){var userVersion=semver_default.a.valid(semver_default.a.coerce(version)),semverVersion=userVersion||semver_default.a.coerce("7.13");if(semverVersion)return"v".concat(semver_default.a.major(semverVersion),".").concat(semver_default.a.minor(semverVersion));throw new Error("Invalid version: ".concat(version))}},{key:"_fetchWithTimeout",value:function(url){var _this=this;return new Promise((function(resolve,reject){var timer=setTimeout((function(){return reject(new Error("Request to ".concat(url," timed out")))}),_this.EMS_LOAD_TIMEOUT);_this._fetchFunction(url).then((function(response){clearTimeout(timer),resolve(response)}),(function(err){clearTimeout(timer),reject(err)}))}))}},{key:"_getManifestWithParams",value:(_getManifestWithParams2=ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee9(url){var extendedUrl;return regeneratorRuntime.wrap((function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return extendedUrl=this.extendUrlWithParams(url),_context9.next=3,this.getManifest(extendedUrl);case 3:return _context9.abrupt("return",_context9.sent);case 4:case"end":return _context9.stop()}}),_callee9,this)}))),function(_x4){return _getManifestWithParams2.apply(this,arguments)})},{key:"_invalidateSettings",value:function(){var _this2=this;this._cache.reset(),this._getMainCatalog=external_kbnSharedDeps_Lodash_default.a.once(ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee10(){var services;return regeneratorRuntime.wrap((function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:if(!_this2._manifestServiceUrl){_context10.next=7;break}return console.warn('The "manifestServiceUrl" parameter is deprecated in v7.6.0.\n        Consider using "tileApiUrl" and "fileApiUrl" instead.'),_context10.next=4,_this2._getManifestWithParams(_this2._manifestServiceUrl);case 4:return _context10.abrupt("return",_context10.sent);case 7:return services=[],_this2._tileApiUrl&&services.push({type:"tms",manifest:toAbsoluteUrl(_this2._tileApiUrl,"".concat(_this2._emsVersion,"/manifest"))}),_this2._fileApiUrl&&services.push({type:"file",manifest:toAbsoluteUrl(_this2._fileApiUrl,"".concat(_this2._emsVersion,"/manifest"))}),_context10.abrupt("return",{services:services});case 11:case"end":return _context10.stop()}}),_callee10)})))),this._getDefaultTMSCatalog=external_kbnSharedDeps_Lodash_default.a.once(ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee11(){var catalogue,firstService,url;return regeneratorRuntime.wrap((function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:return _context11.next=2,_this2._getMainCatalog();case 2:if(catalogue=_context11.sent,firstService=catalogue.services.find((function(service){return"tms"===service.type}))){_context11.next=6;break}return _context11.abrupt("return",{services:[]});case 6:return url=_this2._proxyPath+firstService.manifest,_context11.next=9,_this2.getManifest(url);case 9:return _context11.abrupt("return",_context11.sent);case 10:case"end":return _context11.stop()}}),_callee11)})))),this._getDefaultFileCatalog=external_kbnSharedDeps_Lodash_default.a.once(ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee12(){var catalogue,firstService,url;return regeneratorRuntime.wrap((function(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:return _context12.next=2,_this2._getMainCatalog();case 2:if(catalogue=_context12.sent,firstService=catalogue.services.find((function(service){return"file"===service.type}))){_context12.next=6;break}return _context12.abrupt("return",{layers:[]});case 6:return url=_this2._proxyPath+firstService.manifest,_context12.next=9,_this2.getManifest(url);case 9:return _context12.abrupt("return",_context12.sent);case 10:case"end":return _context12.stop()}}),_callee12)})))),this._loadTMSServices=external_kbnSharedDeps_Lodash_default.a.once(ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee13(){var tmsManifest;return regeneratorRuntime.wrap((function(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:return _context13.next=2,_this2._getDefaultTMSCatalog();case 2:return tmsManifest=_context13.sent,_context13.abrupt("return",tmsManifest.services.map((function(serviceConfig){return new tms_service_TMSService(serviceConfig,_this2,_this2._proxyPath)})));case 4:case"end":return _context13.stop()}}),_callee13)})))),this._loadFileLayers=external_kbnSharedDeps_Lodash_default.a.once(ems_client_asyncToGenerator(regeneratorRuntime.mark((function _callee14(){var fileManifest;return regeneratorRuntime.wrap((function(_context14){for(;;)switch(_context14.prev=_context14.next){case 0:return _context14.next=2,_this2._getDefaultFileCatalog();case 2:return fileManifest=_context14.sent,_context14.abrupt("return",fileManifest.layers.map((function(layerConfig){return new file_layer_FileLayer(layerConfig,_this2,_this2._proxyPath)})));case 4:case"end":return _context14.stop()}}),_callee14)}))))}}])&&ems_client_defineProperties(Constructor.prototype,protoProps),staticProps&&ems_client_defineProperties(Constructor,staticProps),EMSClient}(),dist_topojson_client=__webpack_require__(282),browser=__webpack_require__(166),browser_default=__webpack_require__.n(browser),constants=__webpack_require__(0),kibana_services=__webpack_require__(4),licensed_features=__webpack_require__(9);function getKibanaRegionList(){return Object(kibana_services.B)()}function getKibanaTileMap(){return Object(kibana_services.I)()}async function getEmsFileLayers(){return Object(kibana_services.i)().isEMSEnabled()?getEMSClient().getFileLayers():[]}async function getEmsTmsServices(){return Object(kibana_services.i)().isEMSEnabled()?getEMSClient().getTMSServices():[]}function relativeToAbsolute(url){const a=document.createElement("a");return a.setAttribute("href",url),a.href}let latestLicenseId,util_emsClient=null;function getEMSClient(){if(!util_emsClient){const emsSettings=Object(kibana_services.i)(),proxyPath="",tileApiUrl=emsSettings.isProxyElasticMapsServiceInMaps()?relativeToAbsolute(Object(kibana_services.n)().basePath.prepend(`/${constants.GIS_API_PATH}/${constants.EMS_TILES_CATALOGUE_PATH}`)):emsSettings.getEMSTileApiUrl(),fileApiUrl=emsSettings.isProxyElasticMapsServiceInMaps()?relativeToAbsolute(Object(kibana_services.n)().basePath.prepend(`/${constants.GIS_API_PATH}/${constants.EMS_FILES_CATALOGUE_PATH}`)):emsSettings.getEMSFileApiUrl();util_emsClient=new ems_client_EMSClient({language:external_kbnSharedDeps_KbnI18n_.i18n.getLocale(),appVersion:Object(kibana_services.u)(),appName:constants.EMS_APP_NAME,tileApiUrl:tileApiUrl,fileApiUrl:fileApiUrl,landingPageUrl:emsSettings.getEMSLandingPageUrl(),fetchFunction:url=>browser_default()(url),proxyPath:proxyPath})}const licenseId=Object(licensed_features.d)();return latestLicenseId!==licenseId&&(latestLicenseId=licenseId,util_emsClient.addQueryParams({license:licenseId||""})),util_emsClient}function getGlyphUrl(){const emsSettings=Object(kibana_services.i)();return emsSettings.isEMSEnabled()?emsSettings.isProxyElasticMapsServiceInMaps()?relativeToAbsolute(Object(kibana_services.n)().basePath.prepend(`/${constants.GIS_API_PATH}/${constants.EMS_TILES_CATALOGUE_PATH}/${constants.EMS_GLYPHS_PATH}`))+"/{fontstack}/{range}":emsSettings.getEMSFontLibraryUrl():Object(kibana_services.n)().basePath.prepend(`/${constants.FONTS_API_PATH}/{fontstack}/{range}`)}function isRetina(){return 2===window.devicePixelRatio}async function fetchGeoJson(fetchUrl,format,featureCollectionPath){let fetchedJson;try{const response=await browser_default()(fetchUrl);if(!response.ok)throw new Error("Request failed");fetchedJson=await response.json()}catch(e){throw new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.util.requestFailedErrorMessage",{defaultMessage:"Unable to fetch vector shapes from url: {fetchUrl}",values:{fetchUrl:fetchUrl}}))}if(format===constants.FORMAT_TYPE.GEOJSON)return fetchedJson;if(format===constants.FORMAT_TYPE.TOPOJSON){const features=external_kbnSharedDeps_Lodash_default.a.get(fetchedJson,"objects."+featureCollectionPath);return dist_topojson_client.feature(fetchedJson,features)}throw new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.util.formatErrorMessage",{defaultMessage:"Unable to fetch vector shapes from url: {format}",values:{format:format}}))}},function(module,exports,__webpack_require__){const debug=__webpack_require__(94),{MAX_LENGTH:MAX_LENGTH,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER}=__webpack_require__(93),{re:re,t:t}=__webpack_require__(73),{compareIdentifiers:compareIdentifiers}=__webpack_require__(112);class SemVer{constructor(version,options){if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),version instanceof SemVer){if(version.loose===!!options.loose&&version.includePrerelease===!!options.includePrerelease)return version;version=version.version}else if("string"!=typeof version)throw new TypeError("Invalid Version: "+version);if(version.length>MAX_LENGTH)throw new TypeError(`version is longer than ${MAX_LENGTH} characters`);debug("SemVer",version,options),this.options=options,this.loose=!!options.loose,this.includePrerelease=!!options.includePrerelease;const m=version.trim().match(options.loose?re[t.LOOSE]:re[t.FULL]);if(!m)throw new TypeError("Invalid Version: "+version);if(this.raw=version,this.major=+m[1],this.minor=+m[2],this.patch=+m[3],this.major>MAX_SAFE_INTEGER||this.major<0)throw new TypeError("Invalid major version");if(this.minor>MAX_SAFE_INTEGER||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>MAX_SAFE_INTEGER||this.patch<0)throw new TypeError("Invalid patch version");m[4]?this.prerelease=m[4].split(".").map(id=>{if(/^[0-9]+$/.test(id)){const num=+id;if(num>=0&&num<MAX_SAFE_INTEGER)return num}return id}):this.prerelease=[],this.build=m[5]?m[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version}toString(){return this.version}compare(other){if(debug("SemVer.compare",this.version,this.options,other),!(other instanceof SemVer)){if("string"==typeof other&&other===this.version)return 0;other=new SemVer(other,this.options)}return other.version===this.version?0:this.compareMain(other)||this.comparePre(other)}compareMain(other){return other instanceof SemVer||(other=new SemVer(other,this.options)),compareIdentifiers(this.major,other.major)||compareIdentifiers(this.minor,other.minor)||compareIdentifiers(this.patch,other.patch)}comparePre(other){if(other instanceof SemVer||(other=new SemVer(other,this.options)),this.prerelease.length&&!other.prerelease.length)return-1;if(!this.prerelease.length&&other.prerelease.length)return 1;if(!this.prerelease.length&&!other.prerelease.length)return 0;let i=0;do{const a=this.prerelease[i],b=other.prerelease[i];if(debug("prerelease compare",i,a,b),void 0===a&&void 0===b)return 0;if(void 0===b)return 1;if(void 0===a)return-1;if(a!==b)return compareIdentifiers(a,b)}while(++i)}compareBuild(other){other instanceof SemVer||(other=new SemVer(other,this.options));let i=0;do{const a=this.build[i],b=other.build[i];if(debug("prerelease compare",i,a,b),void 0===a&&void 0===b)return 0;if(void 0===b)return 1;if(void 0===a)return-1;if(a!==b)return compareIdentifiers(a,b)}while(++i)}inc(release,identifier){switch(release){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",identifier);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",identifier);break;case"prepatch":this.prerelease.length=0,this.inc("patch",identifier),this.inc("pre",identifier);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",identifier),this.inc("pre",identifier);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let i=this.prerelease.length;for(;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);-1===i&&this.prerelease.push(0)}identifier&&(this.prerelease[0]===identifier?isNaN(this.prerelease[1])&&(this.prerelease=[identifier,0]):this.prerelease=[identifier,0]);break;default:throw new Error("invalid increment argument: "+release)}return this.format(),this.raw=this.version,this}}module.exports=SemVer},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return getGeoTileAggNotSupportedReason})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getIndexPatternsFromIds})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getTermsFields})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getSortFields})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getGeoFields})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getGeoPointFields})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getFieldsWithGeoTileAgg})),__webpack_require__.d(__webpack_exports__,"i",(function(){return supportsGeoTileAgg})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getSourceFields}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_kibana_services__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4),_src_plugins_data_public__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(10),_common_constants__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),_licensed_features__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9);function getGeoTileAggNotSupportedReason(field){return field.aggregatable?field.type!==_common_constants__WEBPACK_IMPORTED_MODULE_3__.ES_GEO_FIELD_TYPE.GEO_SHAPE||Object(_licensed_features__WEBPACK_IMPORTED_MODULE_4__.c)()?null:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.maps.geoTileAgg.disabled.license",{defaultMessage:"Geo_shape clustering requires a Gold license."}):_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.maps.geoTileAgg.disabled.docValues",{defaultMessage:"Clustering requires aggregations. Enable aggregations by setting doc_values to true."})}async function getIndexPatternsFromIds(indexPatternIds=[]){const promises=[];return indexPatternIds.forEach(async indexPatternId=>{try{promises.push(Object(_kibana_services__WEBPACK_IMPORTED_MODULE_1__.p)().get(indexPatternId))}catch(error){return null}}),await Promise.all(promises)}function getTermsFields(fields){return fields.filter(field=>field.aggregatable&&!_src_plugins_data_public__WEBPACK_IMPORTED_MODULE_2__.indexPatterns.isNestedField(field)&&["number","boolean","date","ip","string"].includes(field.type))}function getSortFields(fields){return fields.filter(field=>field.sortable&&!_src_plugins_data_public__WEBPACK_IMPORTED_MODULE_2__.indexPatterns.isNestedField(field))}function getGeoFields(fields){return fields.filter(field=>!_src_plugins_data_public__WEBPACK_IMPORTED_MODULE_2__.indexPatterns.isNestedField(field)&&_common_constants__WEBPACK_IMPORTED_MODULE_3__.ES_GEO_FIELD_TYPES.includes(field.type))}function getGeoPointFields(fields){return fields.filter(field=>!_src_plugins_data_public__WEBPACK_IMPORTED_MODULE_2__.indexPatterns.isNestedField(field)&&_common_constants__WEBPACK_IMPORTED_MODULE_3__.ES_GEO_FIELD_TYPE.GEO_POINT===field.type)}function getFieldsWithGeoTileAgg(fields){return fields.filter(supportsGeoTileAgg)}function supportsGeoTileAgg(field){return!!field&&!!field.aggregatable&&!_src_plugins_data_public__WEBPACK_IMPORTED_MODULE_2__.indexPatterns.isNestedField(field)&&function(){const aggregatableFieldTypes=[_common_constants__WEBPACK_IMPORTED_MODULE_3__.ES_GEO_FIELD_TYPE.GEO_POINT];return Object(_licensed_features__WEBPACK_IMPORTED_MODULE_4__.c)()&&aggregatableFieldTypes.push(_common_constants__WEBPACK_IMPORTED_MODULE_3__.ES_GEO_FIELD_TYPE.GEO_SHAPE),aggregatableFieldTypes}().includes(field.type)}function getSourceFields(fields){return fields.filter(field=>!(field.subType&&field.subType.multi)&&!_src_plugins_data_public__WEBPACK_IMPORTED_MODULE_2__.indexPatterns.isNestedField(field))}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return registerSource})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getSourceByType}));const registry=[];function registerSource(entry){if(registry.some(({type:type})=>entry.type===type))throw new Error(`Unable to register source type ${entry.type}. ${entry.type} has already been registered`);registry.push(entry)}function getSourceByType(sourceType){return registry.find(source=>source.type===sourceType)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var factors={meters:6371008.8,metres:6371008.8,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:6371008.8/1852,inches:6371008.8*39.37,yards:6371008.8/1.0936,feet:20902260.511392,radians:1,degrees:6371008.8/111325},unitsFactors={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/6371008.8,degrees:1/111325},areaFactors={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006};function feature(geometry,properties,options){if(!isObject(options=options||{}))throw new Error("options is invalid");var bbox=options.bbox,id=options.id;if(void 0===geometry)throw new Error("geometry is required");if(properties&&properties.constructor!==Object)throw new Error("properties must be an Object");bbox&&validateBBox(bbox),0!==id&&id&&validateId(id);var feat={type:"Feature"};return(0===id||id)&&(feat.id=id),bbox&&(feat.bbox=bbox),feat.properties=properties||{},feat.geometry=geometry,feat}function point(coordinates,properties,options){if(!coordinates)throw new Error("coordinates is required");if(!Array.isArray(coordinates))throw new Error("coordinates must be an Array");if(coordinates.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber(coordinates[0])||!isNumber(coordinates[1]))throw new Error("coordinates must contain numbers");return feature({type:"Point",coordinates:coordinates},properties,options)}function polygon(coordinates,properties,options){if(!coordinates)throw new Error("coordinates is required");for(var i=0;i<coordinates.length;i++){var ring=coordinates[i];if(ring.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var j=0;j<ring[ring.length-1].length;j++){if(0===i&&0===j&&!isNumber(ring[0][0])||!isNumber(ring[0][1]))throw new Error("coordinates must contain numbers");if(ring[ring.length-1][j]!==ring[0][j])throw new Error("First and last Position are not equivalent.")}}return feature({type:"Polygon",coordinates:coordinates},properties,options)}function lineString(coordinates,properties,options){if(!coordinates)throw new Error("coordinates is required");if(coordinates.length<2)throw new Error("coordinates must be an array of two or more positions");if(!isNumber(coordinates[0][1])||!isNumber(coordinates[0][1]))throw new Error("coordinates must contain numbers");return feature({type:"LineString",coordinates:coordinates},properties,options)}function featureCollection(features,options){if(!isObject(options=options||{}))throw new Error("options is invalid");var bbox=options.bbox,id=options.id;if(!features)throw new Error("No features passed");if(!Array.isArray(features))throw new Error("features must be an Array");bbox&&validateBBox(bbox),id&&validateId(id);var fc={type:"FeatureCollection"};return id&&(fc.id=id),bbox&&(fc.bbox=bbox),fc.features=features,fc}function multiLineString(coordinates,properties,options){if(!coordinates)throw new Error("coordinates is required");return feature({type:"MultiLineString",coordinates:coordinates},properties,options)}function multiPoint(coordinates,properties,options){if(!coordinates)throw new Error("coordinates is required");return feature({type:"MultiPoint",coordinates:coordinates},properties,options)}function multiPolygon(coordinates,properties,options){if(!coordinates)throw new Error("coordinates is required");return feature({type:"MultiPolygon",coordinates:coordinates},properties,options)}function radiansToLength(radians,units){if(null==radians)throw new Error("radians is required");if(units&&"string"!=typeof units)throw new Error("units must be a string");var factor=factors[units||"kilometers"];if(!factor)throw new Error(units+" units is invalid");return radians*factor}function lengthToRadians(distance,units){if(null==distance)throw new Error("distance is required");if(units&&"string"!=typeof units)throw new Error("units must be a string");var factor=factors[units||"kilometers"];if(!factor)throw new Error(units+" units is invalid");return distance/factor}function radiansToDegrees(radians){if(null==radians)throw new Error("radians is required");return 180*(radians%(2*Math.PI))/Math.PI}function isNumber(num){return!isNaN(num)&&null!==num&&!Array.isArray(num)}function isObject(input){return!!input&&input.constructor===Object}function validateBBox(bbox){if(!bbox)throw new Error("bbox is required");if(!Array.isArray(bbox))throw new Error("bbox must be an Array");if(4!==bbox.length&&6!==bbox.length)throw new Error("bbox must be an Array of 4 or 6 numbers");bbox.forEach((function(num){if(!isNumber(num))throw new Error("bbox must only contain numbers")}))}function validateId(id){if(!id)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof id))throw new Error("id must be a number or a string")}exports.earthRadius=6371008.8,exports.factors=factors,exports.unitsFactors=unitsFactors,exports.areaFactors=areaFactors,exports.feature=feature,exports.geometry=function(type,coordinates,options){if(!isObject(options=options||{}))throw new Error("options is invalid");var geom,bbox=options.bbox;if(!type)throw new Error("type is required");if(!coordinates)throw new Error("coordinates is required");if(!Array.isArray(coordinates))throw new Error("coordinates must be an Array");switch(bbox&&validateBBox(bbox),type){case"Point":geom=point(coordinates).geometry;break;case"LineString":geom=lineString(coordinates).geometry;break;case"Polygon":geom=polygon(coordinates).geometry;break;case"MultiPoint":geom=multiPoint(coordinates).geometry;break;case"MultiLineString":geom=multiLineString(coordinates).geometry;break;case"MultiPolygon":geom=multiPolygon(coordinates).geometry;break;default:throw new Error(type+" is invalid")}return bbox&&(geom.bbox=bbox),geom},exports.point=point,exports.points=function(coordinates,properties,options){if(!coordinates)throw new Error("coordinates is required");if(!Array.isArray(coordinates))throw new Error("coordinates must be an Array");return featureCollection(coordinates.map((function(coords){return point(coords,properties)})),options)},exports.polygon=polygon,exports.polygons=function(coordinates,properties,options){if(!coordinates)throw new Error("coordinates is required");if(!Array.isArray(coordinates))throw new Error("coordinates must be an Array");return featureCollection(coordinates.map((function(coords){return polygon(coords,properties)})),options)},exports.lineString=lineString,exports.lineStrings=function(coordinates,properties,options){if(!coordinates)throw new Error("coordinates is required");if(!Array.isArray(coordinates))throw new Error("coordinates must be an Array");return featureCollection(coordinates.map((function(coords){return lineString(coords,properties)})),options)},exports.featureCollection=featureCollection,exports.multiLineString=multiLineString,exports.multiPoint=multiPoint,exports.multiPolygon=multiPolygon,exports.geometryCollection=function(geometries,properties,options){if(!geometries)throw new Error("geometries is required");if(!Array.isArray(geometries))throw new Error("geometries must be an Array");return feature({type:"GeometryCollection",geometries:geometries},properties,options)},exports.round=function(num,precision){if(null==num||isNaN(num))throw new Error("num is required");if(precision&&!(precision>=0))throw new Error("precision must be a positive number");var multiplier=Math.pow(10,precision||0);return Math.round(num*multiplier)/multiplier},exports.radiansToLength=radiansToLength,exports.lengthToRadians=lengthToRadians,exports.lengthToDegrees=function(distance,units){return radiansToDegrees(lengthToRadians(distance,units))},exports.bearingToAzimuth=function(bearing){if(null==bearing)throw new Error("bearing is required");var angle=bearing%360;return angle<0&&(angle+=360),angle},exports.radiansToDegrees=radiansToDegrees,exports.degreesToRadians=function(degrees){if(null==degrees)throw new Error("degrees is required");return degrees%360*Math.PI/180},exports.convertLength=function(length,originalUnit,finalUnit){if(null==length)throw new Error("length is required");if(!(length>=0))throw new Error("length must be a positive number");return radiansToLength(lengthToRadians(length,originalUnit),finalUnit||"kilometers")},exports.convertArea=function(area,originalUnit,finalUnit){if(null==area)throw new Error("area is required");if(!(area>=0))throw new Error("area must be a positive number");var startFactor=areaFactors[originalUnit||"meters"];if(!startFactor)throw new Error("invalid original units");var finalFactor=areaFactors[finalUnit||"kilometers"];if(!finalFactor)throw new Error("invalid final units");return area/startFactor*finalFactor},exports.isNumber=isNumber,exports.isObject=isObject,exports.validateBBox=validateBBox,exports.validateId=validateId,exports.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},exports.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},exports.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},exports.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},exports.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},exports.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},exports.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return MIN_SIZE})),__webpack_require__.d(__webpack_exports__,"d",(function(){return MAX_SIZE})),__webpack_require__.d(__webpack_exports__,"b",(function(){return DEFAULT_SIGMA})),__webpack_require__.d(__webpack_exports__,"a",(function(){return DEFAULT_LABEL_SIZE})),__webpack_require__.d(__webpack_exports__,"c",(function(){return LINE_STYLES})),__webpack_require__.d(__webpack_exports__,"f",(function(){return POLYGON_STYLES})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getDefaultStaticProperties})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getDefaultDynamicProperties}));var _common_constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_color_palettes__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(49),_kibana_services__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4);const MIN_SIZE=1,MAX_SIZE=64,DEFAULT_SIGMA=3,DEFAULT_LABEL_SIZE=14,DEFAULT_COLOR_RAMP=_color_palettes__WEBPACK_IMPORTED_MODULE_1__.e[0].value,DEFAULT_COLOR_PALETTE=_color_palettes__WEBPACK_IMPORTED_MODULE_1__.a[0].value,LINE_STYLES=[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.LINE_COLOR,_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.LINE_WIDTH],POLYGON_STYLES=[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.FILL_COLOR,_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.LINE_COLOR,_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.LINE_WIDTH];function getDefaultStaticProperties(mapColors=[]){let nextColorIndex=0;if(mapColors.length){const lastColor=mapColors[mapColors.length-1];_color_palettes__WEBPACK_IMPORTED_MODULE_1__.b.includes(lastColor)&&(nextColorIndex=(_color_palettes__WEBPACK_IMPORTED_MODULE_1__.b.indexOf(lastColor)+1)%_color_palettes__WEBPACK_IMPORTED_MODULE_1__.b.length)}const nextFillColor=_color_palettes__WEBPACK_IMPORTED_MODULE_1__.b[nextColorIndex],nextLineColor=_color_palettes__WEBPACK_IMPORTED_MODULE_1__.d[nextColorIndex],isDarkMode=Object(_kibana_services__WEBPACK_IMPORTED_MODULE_2__.s)();return{[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.ICON]:{type:_common_constants__WEBPACK_IMPORTED_MODULE_0__.STYLE_TYPE.STATIC,options:{value:_common_constants__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_ICON}},[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.FILL_COLOR]:{type:_common_constants__WEBPACK_IMPORTED_MODULE_0__.STYLE_TYPE.STATIC,options:{color:nextFillColor}},[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.LINE_COLOR]:{type:_common_constants__WEBPACK_IMPORTED_MODULE_0__.STYLE_TYPE.STATIC,options:{color:nextLineColor}},[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.LINE_WIDTH]:{type:_common_constants__WEBPACK_IMPORTED_MODULE_0__.STYLE_TYPE.STATIC,options:{size:1}},[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.ICON_SIZE]:{type:_common_constants__WEBPACK_IMPORTED_MODULE_0__.STYLE_TYPE.STATIC,options:{size:6}},[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.ICON_ORIENTATION]:{type:_common_constants__WEBPACK_IMPORTED_MODULE_0__.STYLE_TYPE.STATIC,options:{orientation:0}},[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.LABEL_TEXT]:{type:_common_constants__WEBPACK_IMPORTED_MODULE_0__.STYLE_TYPE.STATIC,options:{value:""}},[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.LABEL_COLOR]:{type:_common_constants__WEBPACK_IMPORTED_MODULE_0__.STYLE_TYPE.STATIC,options:{color:isDarkMode?"#FFFFFF":"#000000"}},[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.LABEL_SIZE]:{type:_common_constants__WEBPACK_IMPORTED_MODULE_0__.STYLE_TYPE.STATIC,options:{size:DEFAULT_LABEL_SIZE}},[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.LABEL_BORDER_COLOR]:{type:_common_constants__WEBPACK_IMPORTED_MODULE_0__.STYLE_TYPE.STATIC,options:{color:isDarkMode?"#000000":"#FFFFFF"}},[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.SYMBOLIZE_AS]:{options:{value:_common_constants__WEBPACK_IMPORTED_MODULE_0__.SYMBOLIZE_AS_TYPES.CIRCLE}},[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.LABEL_BORDER_SIZE]:{options:{size:_common_constants__WEBPACK_IMPORTED_MODULE_0__.LABEL_BORDER_SIZES.SMALL}}}}function getDefaultDynamicProperties(){return{[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.ICON]:{type:_common_constants__WEBPACK_IMPORTED_MODULE_0__.STYLE_TYPE.DYNAMIC,options:{iconPaletteId:"filledShapes",field:void 0,fieldMetaOptions:{isEnabled:!0}}},[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.FILL_COLOR]:{type:_common_constants__WEBPACK_IMPORTED_MODULE_0__.STYLE_TYPE.DYNAMIC,options:{color:DEFAULT_COLOR_RAMP,colorCategory:DEFAULT_COLOR_PALETTE,field:void 0,fieldMetaOptions:{isEnabled:!0,sigma:DEFAULT_SIGMA}}},[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.LINE_COLOR]:{type:_common_constants__WEBPACK_IMPORTED_MODULE_0__.STYLE_TYPE.DYNAMIC,options:{color:DEFAULT_COLOR_RAMP,colorCategory:DEFAULT_COLOR_PALETTE,field:void 0,fieldMetaOptions:{isEnabled:!0,sigma:DEFAULT_SIGMA}}},[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.LINE_WIDTH]:{type:_common_constants__WEBPACK_IMPORTED_MODULE_0__.STYLE_TYPE.DYNAMIC,options:{minSize:1,maxSize:10,field:void 0,fieldMetaOptions:{isEnabled:!0,sigma:DEFAULT_SIGMA}}},[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.ICON_SIZE]:{type:_common_constants__WEBPACK_IMPORTED_MODULE_0__.STYLE_TYPE.DYNAMIC,options:{minSize:7,maxSize:32,field:void 0,fieldMetaOptions:{isEnabled:!0,sigma:DEFAULT_SIGMA}}},[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.ICON_ORIENTATION]:{type:_common_constants__WEBPACK_IMPORTED_MODULE_0__.STYLE_TYPE.DYNAMIC,options:{field:void 0,fieldMetaOptions:{isEnabled:!0,sigma:DEFAULT_SIGMA}}},[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.LABEL_TEXT]:{type:_common_constants__WEBPACK_IMPORTED_MODULE_0__.STYLE_TYPE.DYNAMIC,options:{field:void 0}},[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.LABEL_COLOR]:{type:_common_constants__WEBPACK_IMPORTED_MODULE_0__.STYLE_TYPE.DYNAMIC,options:{color:DEFAULT_COLOR_RAMP,colorCategory:DEFAULT_COLOR_PALETTE,field:void 0,fieldMetaOptions:{isEnabled:!0,sigma:DEFAULT_SIGMA}}},[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.LABEL_SIZE]:{type:_common_constants__WEBPACK_IMPORTED_MODULE_0__.STYLE_TYPE.DYNAMIC,options:{minSize:7,maxSize:32,field:void 0,fieldMetaOptions:{isEnabled:!0,sigma:DEFAULT_SIGMA}}},[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.LABEL_BORDER_COLOR]:{type:_common_constants__WEBPACK_IMPORTED_MODULE_0__.STYLE_TYPE.DYNAMIC,options:{color:DEFAULT_COLOR_RAMP,colorCategory:DEFAULT_COLOR_PALETTE,field:void 0,fieldMetaOptions:{isEnabled:!0,sigma:DEFAULT_SIGMA}}},[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.SYMBOLIZE_AS]:{options:{value:_common_constants__WEBPACK_IMPORTED_MODULE_0__.SYMBOLIZE_AS_TYPES.CIRCLE}},[_common_constants__WEBPACK_IMPORTED_MODULE_0__.VECTOR_STYLES.LABEL_BORDER_SIZE]:{options:{size:_common_constants__WEBPACK_IMPORTED_MODULE_0__.LABEL_BORDER_SIZES.SMALL}}}}},function(module,exports,__webpack_require__){"use strict";var $SyntaxError=SyntaxError,$Function=Function,$TypeError=TypeError,getEvalledConstructor=function(expressionSyntax){try{return $Function('"use strict"; return ('+expressionSyntax+").constructor;")()}catch(e){}},$gOPD=Object.getOwnPropertyDescriptor;if($gOPD)try{$gOPD({},"")}catch(e){$gOPD=null}var throwTypeError=function(){throw new $TypeError},ThrowTypeError=$gOPD?function(){try{return throwTypeError}catch(calleeThrows){try{return $gOPD(arguments,"callee").get}catch(gOPDthrows){return throwTypeError}}}():throwTypeError,hasSymbols=__webpack_require__(188)(),getProto=Object.getPrototypeOf||function(x){return x.__proto__},needsEval={},TypedArray="undefined"==typeof Uint8Array?void 0:getProto(Uint8Array),INTRINSICS={"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols?getProto([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols?getProto(getProto([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&hasSymbols?getProto((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&hasSymbols?getProto((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols?getProto(""[Symbol.iterator]()):void 0,"%Symbol%":hasSymbols?Symbol:void 0,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=__webpack_require__(140),hasOwn=__webpack_require__(81),$concat=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(string){var first=$strSlice(string,0,1),last=$strSlice(string,-1);if("%"===first&&"%"!==last)throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`");if("%"===last&&"%"!==first)throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`");var result=[];return $replace(string,rePropName,(function(match,number,quote,subString){result[result.length]=quote?$replace(subString,reEscapeChar,"$1"):number||match})),result},getBaseIntrinsic=function(name,allowMissing){var alias,intrinsicName=name;if(hasOwn(LEGACY_ALIASES,intrinsicName)&&(intrinsicName="%"+(alias=LEGACY_ALIASES[intrinsicName])[0]+"%"),hasOwn(INTRINSICS,intrinsicName)){var value=INTRINSICS[intrinsicName];if(value===needsEval&&(value=function doEval(name){var value;if("%AsyncFunction%"===name)value=getEvalledConstructor("async function () {}");else if("%GeneratorFunction%"===name)value=getEvalledConstructor("function* () {}");else if("%AsyncGeneratorFunction%"===name)value=getEvalledConstructor("async function* () {}");else if("%AsyncGenerator%"===name){var fn=doEval("%AsyncGeneratorFunction%");fn&&(value=fn.prototype)}else if("%AsyncIteratorPrototype%"===name){var gen=doEval("%AsyncGenerator%");gen&&(value=getProto(gen.prototype))}return INTRINSICS[name]=value,value}(intrinsicName)),void 0===value&&!allowMissing)throw new $TypeError("intrinsic "+name+" exists, but is not available. Please file an issue!");return{alias:alias,name:intrinsicName,value:value}}throw new $SyntaxError("intrinsic "+name+" does not exist!")};module.exports=function(name,allowMissing){if("string"!=typeof name||0===name.length)throw new $TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof allowMissing)throw new $TypeError('"allowMissing" argument must be a boolean');var parts=stringToPath(name),intrinsicBaseName=parts.length>0?parts[0]:"",intrinsic=getBaseIntrinsic("%"+intrinsicBaseName+"%",allowMissing),intrinsicRealName=intrinsic.name,value=intrinsic.value,skipFurtherCaching=!1,alias=intrinsic.alias;alias&&(intrinsicBaseName=alias[0],$spliceApply(parts,$concat([0,1],alias)));for(var i=1,isOwn=!0;i<parts.length;i+=1){var part=parts[i],first=$strSlice(part,0,1),last=$strSlice(part,-1);if(('"'===first||"'"===first||"`"===first||'"'===last||"'"===last||"`"===last)&&first!==last)throw new $SyntaxError("property names with quotes must have matching quotes");if("constructor"!==part&&isOwn||(skipFurtherCaching=!0),hasOwn(INTRINSICS,intrinsicRealName="%"+(intrinsicBaseName+="."+part)+"%"))value=INTRINSICS[intrinsicRealName];else if(null!=value){if(!(part in value)){if(!allowMissing)throw new $TypeError("base intrinsic for "+name+" exists, but the property is not available.");return}if($gOPD&&i+1>=parts.length){var desc=$gOPD(value,part);value=(isOwn=!!desc)&&"get"in desc&&!("originalValue"in desc.get)?desc.get:value[part]}else isOwn=hasOwn(value,part),value=value[part];isOwn&&!skipFurtherCaching&&(INTRINSICS[intrinsicRealName]=value)}}return value}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return DEFAULT_HEATMAP_COLOR_RAMP_NAME})),__webpack_require__.d(__webpack_exports__,"b",(function(){return DEFAULT_FILL_COLORS})),__webpack_require__.d(__webpack_exports__,"d",(function(){return DEFAULT_LINE_COLORS})),__webpack_require__.d(__webpack_exports__,"e",(function(){return NUMERICAL_COLOR_PALETTES})),__webpack_require__.d(__webpack_exports__,"a",(function(){return CATEGORICAL_COLOR_PALETTES})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getColorPalette})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getColorRampCenterColor})),__webpack_require__.d(__webpack_exports__,"i",(function(){return getOrdinalMbColorRampStops})),__webpack_require__.d(__webpack_exports__,"j",(function(){return getPercentilesMbColorRampStops})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getLinearGradient}));var tinycolor2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(298),tinycolor2__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(tinycolor2__WEBPACK_IMPORTED_MODULE_0__),_elastic_eui_lib_services__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(30);const DEFAULT_HEATMAP_COLOR_RAMP_NAME="theclassic",DEFAULT_FILL_COLORS=Object(_elastic_eui_lib_services__WEBPACK_IMPORTED_MODULE_1__.euiPaletteColorBlind)(),DEFAULT_LINE_COLORS=[...DEFAULT_FILL_COLORS.map(color=>tinycolor2__WEBPACK_IMPORTED_MODULE_0___default()(color).darken().toHexString()),"#000","#FFF"],HEATMAP_PALETTE=["rgb(65, 105, 225)","rgb(0, 256, 256)","rgb(0, 256, 0)","rgb(256, 256, 0)","rgb(256, 0, 0)"];function getColorBlindPalette(steps){const rotations=Math.ceil(steps/10);return Object(_elastic_eui_lib_services__WEBPACK_IMPORTED_MODULE_1__.euiPaletteColorBlind)({rotations:rotations}).slice(0,steps-1)}const COLOR_PALETTES=[{value:"Blues",getPalette:steps=>Object(_elastic_eui_lib_services__WEBPACK_IMPORTED_MODULE_1__.euiPaletteCool)(steps),palette:Object(_elastic_eui_lib_services__WEBPACK_IMPORTED_MODULE_1__.euiPaletteCool)(8),type:"gradient"},{value:"Greens",getPalette:steps=>Object(_elastic_eui_lib_services__WEBPACK_IMPORTED_MODULE_1__.euiPalettePositive)(steps),palette:Object(_elastic_eui_lib_services__WEBPACK_IMPORTED_MODULE_1__.euiPalettePositive)(8),type:"gradient"},{value:"Greys",getPalette:steps=>Object(_elastic_eui_lib_services__WEBPACK_IMPORTED_MODULE_1__.euiPaletteGray)(steps),palette:Object(_elastic_eui_lib_services__WEBPACK_IMPORTED_MODULE_1__.euiPaletteGray)(8),type:"gradient"},{value:"Reds",getPalette:steps=>Object(_elastic_eui_lib_services__WEBPACK_IMPORTED_MODULE_1__.euiPaletteNegative)(steps),palette:Object(_elastic_eui_lib_services__WEBPACK_IMPORTED_MODULE_1__.euiPaletteNegative)(8),type:"gradient"},{value:"Yellow to Red",getPalette:steps=>Object(_elastic_eui_lib_services__WEBPACK_IMPORTED_MODULE_1__.euiPaletteWarm)(steps),palette:Object(_elastic_eui_lib_services__WEBPACK_IMPORTED_MODULE_1__.euiPaletteWarm)(8),type:"gradient"},{value:"Green to Red",getPalette:steps=>Object(_elastic_eui_lib_services__WEBPACK_IMPORTED_MODULE_1__.euiPaletteForStatus)(steps),palette:Object(_elastic_eui_lib_services__WEBPACK_IMPORTED_MODULE_1__.euiPaletteForStatus)(8),type:"gradient"},{value:"Blue to Red",getPalette:steps=>Object(_elastic_eui_lib_services__WEBPACK_IMPORTED_MODULE_1__.euiPaletteForTemperature)(steps),palette:Object(_elastic_eui_lib_services__WEBPACK_IMPORTED_MODULE_1__.euiPaletteForTemperature)(8),type:"gradient"},{value:DEFAULT_HEATMAP_COLOR_RAMP_NAME,getPalette:steps=>Object(_elastic_eui_lib_services__WEBPACK_IMPORTED_MODULE_1__.colorPalette)(HEATMAP_PALETTE,steps,!0,!0),palette:HEATMAP_PALETTE,type:"gradient"},{value:"palette_0",getPalette:getColorBlindPalette,palette:Object(_elastic_eui_lib_services__WEBPACK_IMPORTED_MODULE_1__.euiPaletteColorBlind)(),type:"fixed"},{value:"palette_20",getPalette:getColorBlindPalette,palette:Object(_elastic_eui_lib_services__WEBPACK_IMPORTED_MODULE_1__.euiPaletteColorBlind)({rotations:2}),type:"fixed"},{value:"palette_30",getPalette:getColorBlindPalette,palette:Object(_elastic_eui_lib_services__WEBPACK_IMPORTED_MODULE_1__.euiPaletteColorBlind)({rotations:3}),type:"fixed"}],NUMERICAL_COLOR_PALETTES=COLOR_PALETTES.filter(palette=>"gradient"===palette.type),CATEGORICAL_COLOR_PALETTES=COLOR_PALETTES.filter(palette=>"fixed"===palette.type);function getColorPalette(colorPaletteId){const colorPalette=COLOR_PALETTES.find(({value:value})=>value===colorPaletteId);return colorPalette?colorPalette.palette:[]}function getColorRampCenterColor(colorPaletteId){if(!colorPaletteId)return null;const palette=getColorPalette(colorPaletteId);return 0===palette.length?null:palette[Math.floor(palette.length/2)]}function getOrdinalMbColorRampStops(colorPaletteId,min,max){if(!colorPaletteId)return null;if(min>max)return null;const palette=getColorPalette(colorPaletteId);if(0===palette.length)return null;if(max===min)return[max,palette[palette.length-1]];const delta=max-min;return palette.reduce((accu,stopColor,idx,srcArr)=>[...accu,min+delta*idx/srcArr.length,stopColor],[])}function getPercentilesMbColorRampStops(colorPaletteId,percentiles){if(!colorPaletteId)return null;const paletteObject=NUMERICAL_COLOR_PALETTES.find(({value:value})=>value===colorPaletteId);return paletteObject?paletteObject.getPalette(percentiles.length).reduce((accu,stopColor,idx)=>[...accu,percentiles[idx].value,stopColor],[]):null}function getLinearGradient(colorStrings){const intervals=colorStrings.length;let linearGradient=`linear-gradient(to right, ${colorStrings[0]} 0%,`;for(let i=1;i<intervals-1;i++)linearGradient=`${linearGradient} ${colorStrings[i]}       ${Math.floor(100*i/(intervals-1))}%,`;return`${linearGradient} ${colorStrings[colorStrings.length-1]} 100%)`}},function(module,exports,__webpack_require__){(function(){var DocumentPosition,NodeType,XMLCData,XMLComment,XMLDeclaration,XMLDocType,XMLDummy,XMLElement,XMLNodeList,XMLProcessingInstruction,XMLRaw,XMLText,getValue,isEmpty,isFunction,isObject,ref1,hasProp={}.hasOwnProperty;ref1=__webpack_require__(62),isObject=ref1.isObject,isFunction=ref1.isFunction,isEmpty=ref1.isEmpty,getValue=ref1.getValue,XMLElement=null,XMLCData=null,XMLComment=null,XMLDeclaration=null,XMLDocType=null,XMLRaw=null,XMLText=null,XMLProcessingInstruction=null,XMLDummy=null,NodeType=null,XMLNodeList=null,DocumentPosition=null,module.exports=function(){function XMLNode(parent1){this.parent=parent1,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,XMLElement||(XMLElement=__webpack_require__(121),XMLCData=__webpack_require__(123),XMLComment=__webpack_require__(124),XMLDeclaration=__webpack_require__(125),XMLDocType=__webpack_require__(126),XMLRaw=__webpack_require__(131),XMLText=__webpack_require__(132),XMLProcessingInstruction=__webpack_require__(133),XMLDummy=__webpack_require__(175),NodeType=__webpack_require__(39),XMLNodeList=__webpack_require__(309),__webpack_require__(122),DocumentPosition=__webpack_require__(310))}return Object.defineProperty(XMLNode.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(XMLNode.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(XMLNode.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(XMLNode.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(XMLNode.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new XMLNodeList(this.children)),this.childNodeList}}),Object.defineProperty(XMLNode.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(XMLNode.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(XMLNode.prototype,"previousSibling",{get:function(){var i;return i=this.parent.children.indexOf(this),this.parent.children[i-1]||null}}),Object.defineProperty(XMLNode.prototype,"nextSibling",{get:function(){var i;return i=this.parent.children.indexOf(this),this.parent.children[i+1]||null}}),Object.defineProperty(XMLNode.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(XMLNode.prototype,"textContent",{get:function(){var child,j,len,ref2,str;if(this.nodeType===NodeType.Element||this.nodeType===NodeType.DocumentFragment){for(str="",j=0,len=(ref2=this.children).length;j<len;j++)(child=ref2[j]).textContent&&(str+=child.textContent);return str}return null},set:function(value){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),XMLNode.prototype.setParent=function(parent){var child,j,len,ref2,results;for(this.parent=parent,parent&&(this.options=parent.options,this.stringify=parent.stringify),results=[],j=0,len=(ref2=this.children).length;j<len;j++)child=ref2[j],results.push(child.setParent(this));return results},XMLNode.prototype.element=function(name,attributes,text){var childNode,item,j,k,key,lastChild,len,len1,ref2,ref3,val;if(lastChild=null,null===attributes&&null==text&&(attributes=(ref2=[{},null])[0],text=ref2[1]),null==attributes&&(attributes={}),attributes=getValue(attributes),isObject(attributes)||(text=(ref3=[attributes,text])[0],attributes=ref3[1]),null!=name&&(name=getValue(name)),Array.isArray(name))for(j=0,len=name.length;j<len;j++)item=name[j],lastChild=this.element(item);else if(isFunction(name))lastChild=this.element(name.apply());else if(isObject(name)){for(key in name)if(hasProp.call(name,key))if(val=name[key],isFunction(val)&&(val=val.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===key.indexOf(this.stringify.convertAttKey))lastChild=this.attribute(key.substr(this.stringify.convertAttKey.length),val);else if(!this.options.separateArrayItems&&Array.isArray(val)&&isEmpty(val))lastChild=this.dummy();else if(isObject(val)&&isEmpty(val))lastChild=this.element(key);else if(this.options.keepNullNodes||null!=val)if(!this.options.separateArrayItems&&Array.isArray(val))for(k=0,len1=val.length;k<len1;k++)item=val[k],(childNode={})[key]=item,lastChild=this.element(childNode);else isObject(val)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===key.indexOf(this.stringify.convertTextKey)?lastChild=this.element(val):(lastChild=this.element(key)).element(val):lastChild=this.element(key,val);else lastChild=this.dummy()}else lastChild=this.options.keepNullNodes||null!==text?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===name.indexOf(this.stringify.convertTextKey)?this.text(text):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===name.indexOf(this.stringify.convertCDataKey)?this.cdata(text):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===name.indexOf(this.stringify.convertCommentKey)?this.comment(text):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===name.indexOf(this.stringify.convertRawKey)?this.raw(text):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===name.indexOf(this.stringify.convertPIKey)?this.instruction(name.substr(this.stringify.convertPIKey.length),text):this.node(name,attributes,text):this.dummy();if(null==lastChild)throw new Error("Could not create any elements with: "+name+". "+this.debugInfo());return lastChild},XMLNode.prototype.insertBefore=function(name,attributes,text){var child,i,newChild,refChild,removed;if(null!=name?name.type:void 0)return refChild=attributes,(newChild=name).setParent(this),refChild?(i=children.indexOf(refChild),removed=children.splice(i),children.push(newChild),Array.prototype.push.apply(children,removed)):children.push(newChild),newChild;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(name));return i=this.parent.children.indexOf(this),removed=this.parent.children.splice(i),child=this.parent.element(name,attributes,text),Array.prototype.push.apply(this.parent.children,removed),child},XMLNode.prototype.insertAfter=function(name,attributes,text){var child,i,removed;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(name));return i=this.parent.children.indexOf(this),removed=this.parent.children.splice(i+1),child=this.parent.element(name,attributes,text),Array.prototype.push.apply(this.parent.children,removed),child},XMLNode.prototype.remove=function(){var i;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return i=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[i,i-i+1].concat([])),this.parent},XMLNode.prototype.node=function(name,attributes,text){var child,ref2;return null!=name&&(name=getValue(name)),attributes||(attributes={}),attributes=getValue(attributes),isObject(attributes)||(text=(ref2=[attributes,text])[0],attributes=ref2[1]),child=new XMLElement(this,name,attributes),null!=text&&child.text(text),this.children.push(child),child},XMLNode.prototype.text=function(value){var child;return isObject(value)&&this.element(value),child=new XMLText(this,value),this.children.push(child),this},XMLNode.prototype.cdata=function(value){var child;return child=new XMLCData(this,value),this.children.push(child),this},XMLNode.prototype.comment=function(value){var child;return child=new XMLComment(this,value),this.children.push(child),this},XMLNode.prototype.commentBefore=function(value){var i,removed;return i=this.parent.children.indexOf(this),removed=this.parent.children.splice(i),this.parent.comment(value),Array.prototype.push.apply(this.parent.children,removed),this},XMLNode.prototype.commentAfter=function(value){var i,removed;return i=this.parent.children.indexOf(this),removed=this.parent.children.splice(i+1),this.parent.comment(value),Array.prototype.push.apply(this.parent.children,removed),this},XMLNode.prototype.raw=function(value){var child;return child=new XMLRaw(this,value),this.children.push(child),this},XMLNode.prototype.dummy=function(){return new XMLDummy(this)},XMLNode.prototype.instruction=function(target,value){var insTarget,insValue,instruction,j,len;if(null!=target&&(target=getValue(target)),null!=value&&(value=getValue(value)),Array.isArray(target))for(j=0,len=target.length;j<len;j++)insTarget=target[j],this.instruction(insTarget);else if(isObject(target))for(insTarget in target)hasProp.call(target,insTarget)&&(insValue=target[insTarget],this.instruction(insTarget,insValue));else isFunction(value)&&(value=value.apply()),instruction=new XMLProcessingInstruction(this,target,value),this.children.push(instruction);return this},XMLNode.prototype.instructionBefore=function(target,value){var i,removed;return i=this.parent.children.indexOf(this),removed=this.parent.children.splice(i),this.parent.instruction(target,value),Array.prototype.push.apply(this.parent.children,removed),this},XMLNode.prototype.instructionAfter=function(target,value){var i,removed;return i=this.parent.children.indexOf(this),removed=this.parent.children.splice(i+1),this.parent.instruction(target,value),Array.prototype.push.apply(this.parent.children,removed),this},XMLNode.prototype.declaration=function(version,encoding,standalone){var doc,xmldec;return doc=this.document(),xmldec=new XMLDeclaration(doc,version,encoding,standalone),0===doc.children.length?doc.children.unshift(xmldec):doc.children[0].type===NodeType.Declaration?doc.children[0]=xmldec:doc.children.unshift(xmldec),doc.root()||doc},XMLNode.prototype.dtd=function(pubID,sysID){var doc,doctype,i,j,k,len,len1,ref2,ref3;for(doc=this.document(),doctype=new XMLDocType(doc,pubID,sysID),i=j=0,len=(ref2=doc.children).length;j<len;i=++j)if(ref2[i].type===NodeType.DocType)return doc.children[i]=doctype,doctype;for(i=k=0,len1=(ref3=doc.children).length;k<len1;i=++k)if(ref3[i].isRoot)return doc.children.splice(i,0,doctype),doctype;return doc.children.push(doctype),doctype},XMLNode.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},XMLNode.prototype.root=function(){var node;for(node=this;node;){if(node.type===NodeType.Document)return node.rootObject;if(node.isRoot)return node;node=node.parent}},XMLNode.prototype.document=function(){var node;for(node=this;node;){if(node.type===NodeType.Document)return node;node=node.parent}},XMLNode.prototype.end=function(options){return this.document().end(options)},XMLNode.prototype.prev=function(){var i;if((i=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[i-1]},XMLNode.prototype.next=function(){var i;if(-1===(i=this.parent.children.indexOf(this))||i===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[i+1]},XMLNode.prototype.importDocument=function(doc){var clonedRoot;return(clonedRoot=doc.root().clone()).parent=this,clonedRoot.isRoot=!1,this.children.push(clonedRoot),this},XMLNode.prototype.debugInfo=function(name){var ref2,ref3;return null!=(name=name||this.name)||(null!=(ref2=this.parent)?ref2.name:void 0)?null==name?"parent: <"+this.parent.name+">":(null!=(ref3=this.parent)?ref3.name:void 0)?"node: <"+name+">, parent: <"+this.parent.name+">":"node: <"+name+">":""},XMLNode.prototype.ele=function(name,attributes,text){return this.element(name,attributes,text)},XMLNode.prototype.nod=function(name,attributes,text){return this.node(name,attributes,text)},XMLNode.prototype.txt=function(value){return this.text(value)},XMLNode.prototype.dat=function(value){return this.cdata(value)},XMLNode.prototype.com=function(value){return this.comment(value)},XMLNode.prototype.ins=function(target,value){return this.instruction(target,value)},XMLNode.prototype.doc=function(){return this.document()},XMLNode.prototype.dec=function(version,encoding,standalone){return this.declaration(version,encoding,standalone)},XMLNode.prototype.e=function(name,attributes,text){return this.element(name,attributes,text)},XMLNode.prototype.n=function(name,attributes,text){return this.node(name,attributes,text)},XMLNode.prototype.t=function(value){return this.text(value)},XMLNode.prototype.d=function(value){return this.cdata(value)},XMLNode.prototype.c=function(value){return this.comment(value)},XMLNode.prototype.r=function(value){return this.raw(value)},XMLNode.prototype.i=function(target,value){return this.instruction(target,value)},XMLNode.prototype.u=function(){return this.up()},XMLNode.prototype.importXMLBuilder=function(doc){return this.importDocument(doc)},XMLNode.prototype.replaceChild=function(newChild,oldChild){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.removeChild=function(oldChild){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.appendChild=function(newChild){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.hasChildNodes=function(){return 0!==this.children.length},XMLNode.prototype.cloneNode=function(deep){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.isSupported=function(feature,version){return!0},XMLNode.prototype.hasAttributes=function(){return 0!==this.attribs.length},XMLNode.prototype.compareDocumentPosition=function(other){var res;return this,this===other?0:this.document()!==other.document()?(res=DocumentPosition.Disconnected|DocumentPosition.ImplementationSpecific,Math.random()<.5?res|=DocumentPosition.Preceding:res|=DocumentPosition.Following,res):this.isAncestor(other)?DocumentPosition.Contains|DocumentPosition.Preceding:this.isDescendant(other)?DocumentPosition.Contains|DocumentPosition.Following:this.isPreceding(other)?DocumentPosition.Preceding:DocumentPosition.Following},XMLNode.prototype.isSameNode=function(other){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.lookupPrefix=function(namespaceURI){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.isDefaultNamespace=function(namespaceURI){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.lookupNamespaceURI=function(prefix){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.isEqualNode=function(node){var i,j,ref2;if(node.nodeType!==this.nodeType)return!1;if(node.children.length!==this.children.length)return!1;for(i=j=0,ref2=this.children.length-1;0<=ref2?j<=ref2:j>=ref2;i=0<=ref2?++j:--j)if(!this.children[i].isEqualNode(node.children[i]))return!1;return!0},XMLNode.prototype.getFeature=function(feature,version){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.setUserData=function(key,data,handler){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.getUserData=function(key){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.contains=function(other){return!!other&&(other===this||this.isDescendant(other))},XMLNode.prototype.isDescendant=function(node){var child,j,len,ref2;for(j=0,len=(ref2=this.children).length;j<len;j++){if(node===(child=ref2[j]))return!0;if(child.isDescendant(node))return!0}return!1},XMLNode.prototype.isAncestor=function(node){return node.isDescendant(this)},XMLNode.prototype.isPreceding=function(node){var nodePos,thisPos;return nodePos=this.treePosition(node),thisPos=this.treePosition(this),-1!==nodePos&&-1!==thisPos&&nodePos<thisPos},XMLNode.prototype.isFollowing=function(node){var nodePos,thisPos;return nodePos=this.treePosition(node),thisPos=this.treePosition(this),-1!==nodePos&&-1!==thisPos&&nodePos>thisPos},XMLNode.prototype.treePosition=function(node){var found,pos;return pos=0,found=!1,this.foreachTreeNode(this.document(),(function(childNode){if(pos++,!found&&childNode===node)return found=!0})),found?pos:-1},XMLNode.prototype.foreachTreeNode=function(node,func){var child,j,len,ref2,res;for(node||(node=this.document()),j=0,len=(ref2=node.children).length;j<len;j++){if(res=func(child=ref2[j]))return res;if(res=this.foreachTreeNode(child,func))return res}},XMLNode}()}).call(this)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return vector_style_VectorStyle}));var external_kbnSharedDeps_Lodash_=__webpack_require__(23),external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_),external_kbnSharedDeps_React_=__webpack_require__(2),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),external_kbnSharedDeps_ElasticEui_=__webpack_require__(3),constants=__webpack_require__(0);function getDisabledByMessage(styleName){return external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.vector.disabledByMessage",{defaultMessage:"Set '{styleLabel}' to enable",values:{styleLabel:getVectorStyleLabel(styleName)}})}function getVectorStyleLabel(styleName){switch(styleName){case constants.VECTOR_STYLES.FILL_COLOR:return external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.vector.fillColorLabel",{defaultMessage:"Fill color"});case constants.VECTOR_STYLES.LINE_COLOR:return external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.vector.borderColorLabel",{defaultMessage:"Border color"});case constants.VECTOR_STYLES.LINE_WIDTH:return external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.vector.borderWidthLabel",{defaultMessage:"Border width"});case constants.VECTOR_STYLES.ICON:return external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.vector.iconLabel",{defaultMessage:"Icon"});case constants.VECTOR_STYLES.ICON_SIZE:return external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.vector.symbolSizeLabel",{defaultMessage:"Symbol size"});case constants.VECTOR_STYLES.ICON_ORIENTATION:return external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.vector.orientationLabel",{defaultMessage:"Symbol orientation"});case constants.VECTOR_STYLES.LABEL_TEXT:return external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.vector.labelLabel",{defaultMessage:"Label"});case constants.VECTOR_STYLES.LABEL_COLOR:return external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.vector.labelColorLabel",{defaultMessage:"Label color"});case constants.VECTOR_STYLES.LABEL_SIZE:return external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.vector.labelSizeLabel",{defaultMessage:"Label size"});case constants.VECTOR_STYLES.LABEL_BORDER_COLOR:return external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.vector.labelBorderColorLabel",{defaultMessage:"Label border color"});case constants.VECTOR_STYLES.LABEL_BORDER_SIZE:return external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.vector.labelBorderWidthLabel",{defaultMessage:"Label border width"});default:return styleName}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class style_prop_editor_StylePropEditor extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),_defineProperty(this,"_prevStaticStyleOptions",this.props.defaultStaticStyleOptions),_defineProperty(this,"_prevDynamicStyleOptions",this.props.defaultDynamicStyleOptions),_defineProperty(this,"_onTypeToggle",()=>{this.props.styleProperty.isDynamic()?(this._prevDynamicStyleOptions=this.props.styleProperty.getOptions(),this.props.onStaticStyleChange(this.props.styleProperty.getStyleName(),this._prevStaticStyleOptions)):(this._prevStaticStyleOptions=this.props.styleProperty.getOptions(),this.props.onDynamicStyleChange(this.props.styleProperty.getStyleName(),this._prevDynamicStyleOptions))}),_defineProperty(this,"_onDataMappingChange",updatedObjects=>{const options={...this.props.styleProperty.getOptions(),...updatedObjects};this.props.onDynamicStyleChange(this.props.styleProperty.getStyleName(),options)})}renderStaticDynamicSelect(){const options=[{value:constants.STYLE_TYPE.STATIC,text:this.props.customStaticOptionLabel?this.props.customStaticOptionLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.staticDynamicSelect.staticLabel",{defaultMessage:"Fixed"})},{value:constants.STYLE_TYPE.DYNAMIC,text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.staticDynamicSelect.dynamicLabel",{defaultMessage:"By value"})}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{options:options,value:this.props.styleProperty.isDynamic()?constants.STYLE_TYPE.DYNAMIC:constants.STYLE_TYPE.STATIC,onChange:this._onTypeToggle,disabled:this.props.disabled||0===this.props.fields.length,"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.staticDynamicSelect.ariaLabel",{defaultMessage:"Select to style by fixed value or by data value"}),compressed:!0,"data-test-subj":"staticDynamicSelect_"+this.props.styleProperty.getStyleName()})}render(){const staticDynamicSelect=this.renderStaticDynamicSelect(),stylePropertyForm=this.props.disabled&&this.props.disabledBy?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{anchorClassName:"mapStyleFormDisabledTooltip",content:getDisabledByMessage(this.props.disabledBy)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},staticDynamicSelect),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{compressed:!0,disabled:!0})))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.cloneElement(this.props.children,{staticDynamicSelect:staticDynamicSelect}),this.props.styleProperty.renderDataMappingPopover(this._onDataMappingChange));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:getVectorStyleLabel(this.props.styleProperty.getStyleName()),display:"rowCompressed"},stylePropertyForm)}}var public_=__webpack_require__(24);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function renderOption(option,searchValue,contentClassName){const fieldIcon=option.value?external_kbnSharedDeps_React_default.a.createElement(public_.FieldIcon,{type:option.value.type,fill:"none"}):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{className:contentClassName,gutterSize:"s",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:null},fieldIcon),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHighlight,{search:searchValue},option.label)))}function groupFieldsByOrigin(fields){const fieldsByOriginMap=new Map;function fieldsListToOptions(fieldsList){return fieldsList.map(field=>({value:field,label:field.label})).sort((a,b)=>a.label.toLowerCase().localeCompare(b.label.toLowerCase()))}if(fields.forEach(field=>{if(fieldsByOriginMap.has(field.origin)){const fieldsList=fieldsByOriginMap.get(field.origin);fieldsList.push(field),fieldsByOriginMap.set(field.origin,fieldsList)}else fieldsByOriginMap.set(field.origin,[field])}),1===fieldsByOriginMap.size){const onlyOriginKey=fieldsByOriginMap.keys().next().value;return fieldsListToOptions(fieldsByOriginMap.get(onlyOriginKey))}const optionGroups=[];return fieldsByOriginMap.forEach((fieldsList,fieldOrigin)=>{optionGroups.push({label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.style.fieldSelect.OriginLabel",{defaultMessage:"Fields from {fieldOrigin}",values:{fieldOrigin:fieldOrigin}}),options:fieldsListToOptions(fieldsList)})}),optionGroups.sort((a,b)=>a.label.toLowerCase().localeCompare(b.label.toLowerCase())),optionGroups}function FieldSelect({fields:fields,selectedFieldName:selectedFieldName,onChange:onChange,styleName:styleName,...rest}){let selectedOption;if(selectedFieldName){const field=fields.find(f=>f.name===selectedFieldName);field&&(selectedOption={value:field,label:field.label})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiComboBox,_extends({selectedOptions:selectedOption?[selectedOption]:[],options:groupFieldsByOrigin(fields),onChange:selectedFields=>{onChange({field:selectedFields.length>0&&selectedFields[0].value?selectedFields[0].value:null})},singleSelection:{asPlainText:!0},isClearable:!1,fullWidth:!0,placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.vector.selectFieldPlaceholder",{defaultMessage:"Select a field"}),renderOption:renderOption,"data-test-subj":"styleFieldSelect_"+styleName},rest))}function addOrdinalRow(colorStops,index){const currentStop=colorStops[index].stop;let delta=1;if(index===colorStops.length-1){if(0!==index){delta=currentStop-colorStops[index-1].stop}}else{delta=(colorStops[index+1].stop-currentStop)/2}return addRow(colorStops,index,currentStop+delta)}function addCategoricalRow(colorStops,index){const currentStop=colorStops[index].stop;return addRow(colorStops,index,""===currentStop?currentStop+"a":"")}function addRow(colorStops,index,nextValue){const newRow={stop:nextValue,color:"#FF0000"};return[...colorStops.slice(0,index+1),newRow,...colorStops.slice(index+1)]}function isColorInvalid(color){return!Object(external_kbnSharedDeps_ElasticEui_.isValidHex)(color)||""===color}function isOrdinalStopInvalid(stop){return""===stop||isNaN(stop)}function isCategoricalStopsInvalid(colorStops){const values=colorStops.slice(1).map(stop=>stop.stop),uniques=external_kbnSharedDeps_Lodash_default.a.uniq(values);return values.length!==uniques.length}function isOrdinalStopsInvalid(colorStops){return colorStops.some((colorStop,index)=>{let isDescending=!1;if(0!==index){isDescending=colorStops[index-1].stop>=colorStop.stop}return isColorInvalid(colorStop.color)||isOrdinalStopInvalid(colorStop.stop)||isDescending})}var mb_validated_color_picker=__webpack_require__(100);const ColorStops=({onChange:onChange,colorStops:colorStops,isStopsInvalid:isStopsInvalid,getStopError:getStopError,renderStopInput:renderStopInput,addNewRow:addNewRow,canDeleteStop:canDeleteStop,swatches:swatches})=>{const rows=colorStops.map((colorStop,index)=>{const{stopError:stopError,stopInput:stopInput}=function(stop,index){return{stopError:getStopError(stop,index),stopInput:renderStopInput(stop,newStopValue=>{const newColorStops=external_kbnSharedDeps_Lodash_default.a.cloneDeep(colorStops);newColorStops[index].stop=newStopValue,onChange({colorStops:newColorStops,isInvalid:isStopsInvalid(newColorStops)})},index)}}(colorStop.stop,index),color=colorStop.color,colorError=isColorInvalid(color)?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.colorStops.hexWarningLabel",{defaultMessage:"Color must provide a valid hex value"}):void 0,errors=[];stopError&&errors.push(stopError),colorError&&errors.push(colorError);let deleteButton;if(canDeleteStop(colorStops,index)){const onRemove=()=>{const newColorStops=function(colorStops,index){return 1===colorStops.length?colorStops:[...colorStops.slice(0,index),...colorStops.slice(index+1)]}(colorStops,index);onChange({colorStops:newColorStops,isInvalid:isStopsInvalid(newColorStops)})};deleteButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"trash",color:"danger","aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.colorStops.deleteButtonAriaLabel",{defaultMessage:"Delete"}),title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.colorStops.deleteButtonLabel",{defaultMessage:"Delete"}),onClick:onRemove})}const colorPickerButtons=external_kbnSharedDeps_React_default.a.createElement("div",null,deleteButton,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"plusInCircle",color:"primary","aria-label":"Add",title:"Add",onClick:()=>{const newColorStops=addNewRow(colorStops,index);onChange({colorStops:newColorStops,isInvalid:isStopsInvalid(newColorStops)})}}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{key:index,className:"mapColorStop",isInvalid:0!==errors.length,error:errors,display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},stopInput),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(mb_validated_color_picker.a,{onChange:color=>{const newColorStops=external_kbnSharedDeps_Lodash_default.a.cloneDeep(colorStops);newColorStops[index].color=color,onChange({colorStops:newColorStops,isInvalid:isStopsInvalid(newColorStops)})},color:color,swatches:swatches,append:colorPickerButtons}))))});return external_kbnSharedDeps_React_default.a.createElement("div",null,rows)},ColorStopsOrdinal=({colorStops:colorStops=[{stop:0,color:"#FF0000"}],onChange:onChange,swatches:swatches})=>external_kbnSharedDeps_React_default.a.createElement(ColorStops,{onChange:onChange,colorStops:colorStops,isStopsInvalid:isOrdinalStopsInvalid,getStopError:(stop,index)=>{let error;return isOrdinalStopInvalid(stop)?error=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.colorStops.ordinalStop.numberWarningLabel",{defaultMessage:"Stop must be a number"}):0!==index&&colorStops[index-1].stop>=stop&&(error=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.colorStops.ordinalStop.numberOrderingWarningLabel",{defaultMessage:"Stop must be greater than previous stop value"})),error},renderStopInput:(stop,onStopChange,index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldNumber,{"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.colorStops.ordinalStop.stopLabel",{defaultMessage:"Stop"}),value:0===index?"":stop,onChange:function(event){const sanitizedValue=parseFloat(event.target.value),newStopValue=isNaN(sanitizedValue)?"":sanitizedValue;onStopChange(newStopValue)},compressed:!0,disabled:0===index}),canDeleteStop:colorStops=>colorStops.length>1,addNewRow:addOrdinalRow,swatches:swatches});var style_util=__webpack_require__(65);function stop_input_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class stop_input_StopInput extends external_kbnSharedDeps_React_.Component{constructor(props){super(props),stop_input_defineProperty(this,"_isMounted",!1),stop_input_defineProperty(this,"_onFocus",()=>{this.state.hasPrevFocus||(this.setState({hasPrevFocus:!0}),this._onSearchChange(""))}),stop_input_defineProperty(this,"_onChange",selectedOptions=>{this.props.onChange(external_kbnSharedDeps_Lodash_default.a.get(selectedOptions,"[0].label",""))}),stop_input_defineProperty(this,"_onCreateOption",newValue=>{this.props.onChange(newValue)}),stop_input_defineProperty(this,"_onSearchChange",async searchValue=>{this.setState({isLoadingSuggestions:!0,searchValue:searchValue},()=>{this._loadSuggestions(searchValue)})}),stop_input_defineProperty(this,"_loadSuggestions",external_kbnSharedDeps_Lodash_default.a.debounce(async searchValue=>{let suggestions=[];try{suggestions=await this.props.getValueSuggestions(searchValue)}catch(error){}this._isMounted&&searchValue===this.state.searchValue&&this.setState({isLoadingSuggestions:!1,suggestions:suggestions})},300)),stop_input_defineProperty(this,"_onFieldTextChange",event=>{this.setState({localFieldTextValue:event.target.value}),this._debouncedOnFieldTextChange()}),stop_input_defineProperty(this,"_debouncedOnFieldTextChange",external_kbnSharedDeps_Lodash_default.a.debounce(()=>{this.props.onChange(this.state.localFieldTextValue)},500)),this.state={suggestions:[],isLoadingSuggestions:!1,hasPrevFocus:!1,fieldDataType:null,localFieldTextValue:props.value}}componentDidMount(){this._isMounted=!0,this._loadFieldDataType()}componentWillUnmount(){this._isMounted=!1,this._loadSuggestions.cancel()}async _loadFieldDataType(){const fieldDataType=await this.props.field.getDataType();this._isMounted&&this.setState({fieldDataType:fieldDataType})}_renderSuggestionInput(){const suggestionOptions=this.state.suggestions.map(suggestion=>({label:""+suggestion})),selectedOptions=[];if(this.props.value){let option=suggestionOptions.find(({label:label})=>label===this.props.value);option||(option={label:this.props.value},suggestionOptions.unshift(option)),selectedOptions.push(option)}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiComboBox,{options:suggestionOptions,selectedOptions:selectedOptions,singleSelection:{asPlainText:!0},onChange:this._onChange,onSearchChange:this._onSearchChange,onCreateOption:this._onCreateOption,isClearable:!1,isLoading:this.state.isLoadingSuggestions,onFocus:this._onFocus,"data-test-subj":this.props.dataTestSubj,compressed:!0})}_renderTextInput(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:this.state.localFieldTextValue,onChange:this._onFieldTextChange,compressed:!0})}render(){return this.state.fieldDataType?"string"===this.state.fieldDataType||"boolean"===this.state.fieldDataType?this._renderSuggestionInput():this._renderTextInput():null}}const ColorStopsCategorical=({colorStops:colorStops=[{stop:null,color:"#FF0000"},{stop:"",color:"#00FF00"}],field:field,onChange:onChange,getValueSuggestions:getValueSuggestions,swatches:swatches})=>external_kbnSharedDeps_React_default.a.createElement(ColorStops,{onChange:onChange,colorStops:colorStops,isStopsInvalid:isCategoricalStopsInvalid,getStopError:(stop,index)=>{let count=0;for(let i=1;i<colorStops.length;i++)colorStops[i].stop===stop&&i!==index&&count++;return count?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.colorStops.categoricalStop.noDupesWarningLabel",{defaultMessage:"Stop values must be unique"}):null},renderStopInput:(stop,onStopChange,index)=>{const stopValue="string"==typeof stop?stop:"";return 0===index?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{"aria-label":Object(style_util.e)(),placeholder:Object(style_util.e)(),disabled:!0,compressed:!0}):external_kbnSharedDeps_React_default.a.createElement(stop_input_StopInput,{key:field.getName(),field:field,getValueSuggestions:getValueSuggestions,value:stopValue,onChange:onStopChange,dataTestSubj:"colorStopInput"+index})},canDeleteStop:(colorStops,index)=>colorStops.length>2&&0!==index,addNewRow:addCategoricalRow,swatches:swatches});var color_palettes=__webpack_require__(49);function color_map_select_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class color_map_select_ColorMapSelect extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),color_map_select_defineProperty(this,"state",{}),color_map_select_defineProperty(this,"_onColorPaletteSelect",selectedPaletteId=>{const useCustomColorMap="CUSTOM_COLOR_MAP"===selectedPaletteId;this.props.onChange({color:useCustomColorMap?null:selectedPaletteId,useCustomColorMap:useCustomColorMap,type:this.props.colorMapType})}),color_map_select_defineProperty(this,"_onCustomColorMapChange",({colorStops:colorStops,isInvalid:isInvalid})=>{isInvalid?this.setState({customColorMap:colorStops}):this.props.onChange({useCustomColorMap:!0,customColorMap:colorStops,type:this.props.colorMapType})})}static getDerivedStateFromProps(nextProps,prevState){return nextProps.customColorMap===prevState.prevPropsCustomColorMap?null:{prevPropsCustomColorMap:nextProps.customColorMap,customColorMap:nextProps.customColorMap}}_renderColorMapToggle(){const options=[{value:constants.COLOR_MAP_TYPE.ORDINAL,text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.dynamicColorSelect.quantitativeLabel",{defaultMessage:"As number"})},{value:constants.COLOR_MAP_TYPE.CATEGORICAL,text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.dynamicColorSelect.qualitativeLabel",{defaultMessage:"As category"})}],selectedValue=this.props.styleProperty.isOrdinal()?constants.COLOR_MAP_TYPE.ORDINAL:constants.COLOR_MAP_TYPE.CATEGORICAL;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{options:options,value:selectedValue,onChange:this.props.onColorMapTypeChange,"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.dynamicColorSelect.qualitativeOrQuantitativeAriaLabel",{defaultMessage:"Choose `As number` to map by number in a color range, or `As category`to categorize by color palette."}),compressed:!0})}_renderColorStopsInput(){if(!this.props.isCustomOnly&&!this.props.useCustomColorMap)return null;let colorStopEditor;return colorStopEditor=this.props.colorMapType===constants.COLOR_MAP_TYPE.ORDINAL?external_kbnSharedDeps_React_default.a.createElement(ColorStopsOrdinal,{colorStops:this.state.customColorMap,onChange:this._onCustomColorMapChange,swatches:this.props.swatches}):external_kbnSharedDeps_React_default.a.createElement(ColorStopsCategorical,{colorStops:this.state.customColorMap,field:this.props.styleProperty.getField(),getValueSuggestions:this.props.styleProperty.getValueSuggestions,onChange:this._onCustomColorMapChange,swatches:this.props.swatches}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,colorStopEditor))}_renderColorMapSelections(){if(this.props.isCustomOnly)return null;const palettes=this.props.colorMapType===constants.COLOR_MAP_TYPE.ORDINAL?color_palettes.e:color_palettes.a,palettesWithCustom=[{value:"CUSTOM_COLOR_MAP",title:this.props.colorMapType===constants.COLOR_MAP_TYPE.ORDINAL?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.style.customColorRampLabel",{defaultMessage:"Custom color ramp"}):external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.style.customColorPaletteLabel",{defaultMessage:"Custom color palette"}),type:"text","data-test-subj":"colorMapSelectOption_CUSTOM_COLOR_MAP"},...palettes],toggle=this.props.showColorMapTypeToggle?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},this._renderColorMapToggle()):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"xs"},toggle,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiColorPalettePicker,{palettes:palettesWithCustom,onChange:this._onColorPaletteSelect,valueOfSelected:this.props.useCustomColorMap?"CUSTOM_COLOR_MAP":this.props.colorPaletteId,compressed:!0,"data-test-subj":"colorMapSelect_"+this.props.styleProperty.getStyleName()}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,this._renderColorMapSelections(),this._renderColorStopsInput())}}function DynamicColorForm({fields:fields,onDynamicStyleChange:onDynamicStyleChange,staticDynamicSelect:staticDynamicSelect,styleProperty:styleProperty,swatches:swatches}){const styleOptions=styleProperty.getOptions(),onColorMapSelect=({color:color,customColorMap:customColorMap,type:type,useCustomColorMap:useCustomColorMap})=>{const newColorOptions={...styleOptions,type:type};type===constants.COLOR_MAP_TYPE.ORDINAL?(newColorOptions.useCustomColorRamp=useCustomColorMap,customColorMap&&(newColorOptions.customColorRamp=customColorMap),color&&(newColorOptions.color=color)):(newColorOptions.useCustomColorPalette=useCustomColorMap,customColorMap&&(newColorOptions.customColorPalette=customColorMap),color&&(newColorOptions.colorCategory=color)),onDynamicStyleChange(styleProperty.getStyleName(),newColorOptions)},onColorMapTypeChange=async e=>{const colorMapType=e.target.value;onDynamicStyleChange(styleProperty.getStyleName(),{...styleOptions,type:colorMapType})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"xs",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},staticDynamicSelect),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(FieldSelect,{styleName:styleProperty.getStyleName(),fields:fields,selectedFieldName:styleProperty.getFieldName(),onChange:async({field:field})=>{const{name:name,origin:origin,type:fieldType}=field,defaultColorMapType=constants.CATEGORICAL_DATA_TYPES.includes(fieldType)?constants.COLOR_MAP_TYPE.CATEGORICAL:constants.COLOR_MAP_TYPE.ORDINAL;onDynamicStyleChange(styleProperty.getStyleName(),{...styleOptions,field:{name:name,origin:origin},type:defaultColorMapType})},compressed:!0}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),(()=>{const field=(()=>{const fieldName=styleProperty.getFieldName();return fieldName?fields.find(field=>field.name===fieldName):null})();if(!field)return null;const showColorMapTypeToggle=!constants.CATEGORICAL_DATA_TYPES.includes(field.type);return styleProperty.isOrdinal()?external_kbnSharedDeps_React_default.a.createElement(color_map_select_ColorMapSelect,{isCustomOnly:!field.supportsAutoDomain,onChange:onColorMapSelect,onColorMapTypeChange:onColorMapTypeChange,colorMapType:constants.COLOR_MAP_TYPE.ORDINAL,colorPaletteId:styleOptions.color,customColorMap:styleOptions.customColorRamp,useCustomColorMap:external_kbnSharedDeps_Lodash_default.a.get(styleOptions,"useCustomColorRamp",!1),styleProperty:styleProperty,showColorMapTypeToggle:showColorMapTypeToggle,swatches:swatches}):styleProperty.isCategorical()?external_kbnSharedDeps_React_default.a.createElement(color_map_select_ColorMapSelect,{isCustomOnly:!field.supportsAutoDomain,onColorMapTypeChange:onColorMapTypeChange,onChange:onColorMapSelect,colorMapType:constants.COLOR_MAP_TYPE.CATEGORICAL,colorPaletteId:styleOptions.colorCategory,customColorMap:styleOptions.customColorPalette,useCustomColorMap:external_kbnSharedDeps_Lodash_default.a.get(styleOptions,"useCustomColorPalette",!1),styleProperty:styleProperty,showColorMapTypeToggle:showColorMapTypeToggle,swatches:swatches}):void 0})())}function StaticColorForm({onStaticStyleChange:onStaticStyleChange,staticDynamicSelect:staticDynamicSelect,styleProperty:styleProperty,swatches:swatches}){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"xs",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},staticDynamicSelect),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(mb_validated_color_picker.a,{onChange:color=>{onStaticStyleChange(styleProperty.getStyleName(),{color:color})},color:styleProperty.getOptions().color,swatches:swatches})))}function vector_style_color_editor_extends(){return(vector_style_color_editor_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function VectorStyleColorEditor(props){const colorForm=props.styleProperty.isDynamic()?external_kbnSharedDeps_React_default.a.createElement(DynamicColorForm,props):external_kbnSharedDeps_React_default.a.createElement(StaticColorForm,props);return external_kbnSharedDeps_React_default.a.createElement(style_prop_editor_StylePropEditor,vector_style_color_editor_extends({},props,{customStaticOptionLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.color.staticDynamicSelect.staticLabel",{defaultMessage:"Solid"})}),colorForm)}var vector_style_defaults=__webpack_require__(47);function size_range_selector_extends(){return(size_range_selector_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function SizeRangeSelector({minSize:minSize,maxSize:maxSize,onChange:onChange,...rest}){return external_kbnSharedDeps_React_default.a.createElement(public_.ValidatedDualRange,size_range_selector_extends({min:vector_style_defaults.e,max:vector_style_defaults.d,step:1,value:[minSize,maxSize],showInput:"inputWithPopover",showRange:!0,onChange:([min,max])=>{onChange({minSize:Math.max(vector_style_defaults.e,parseInt(min,10)),maxSize:Math.min(vector_style_defaults.d,parseInt(max,10))})},allowEmptyRange:!1,append:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.vector.dualSize.unitLabel",{defaultMessage:"px",description:"Shorthand for pixel"})},rest))}function DynamicSizeForm({fields:fields,onDynamicStyleChange:onDynamicStyleChange,staticDynamicSelect:staticDynamicSelect,styleProperty:styleProperty}){const styleOptions=styleProperty.getOptions(),onSizeRangeChange=({minSize:minSize,maxSize:maxSize})=>{onDynamicStyleChange(styleProperty.getStyleName(),{...styleOptions,minSize:minSize,maxSize:maxSize})};let sizeRange;return styleOptions.field&&styleOptions.field.name&&(sizeRange=external_kbnSharedDeps_React_default.a.createElement(SizeRangeSelector,{onChange:onSizeRangeChange,minSize:styleOptions.minSize,maxSize:styleOptions.maxSize,showLabels:!0,compressed:!0})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"xs",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},staticDynamicSelect),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(FieldSelect,{styleName:styleProperty.getStyleName(),fields:fields,selectedFieldName:styleProperty.getFieldName(),onChange:({field:field})=>{onDynamicStyleChange(styleProperty.getStyleName(),{...styleOptions,field:field})},compressed:!0}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),sizeRange)}var validated_range=__webpack_require__(77);function StaticSizeForm({onStaticStyleChange:onStaticStyleChange,staticDynamicSelect:staticDynamicSelect,styleProperty:styleProperty}){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"xs",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},staticDynamicSelect),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(validated_range.a,{min:0,max:100,value:styleProperty.getOptions().size,onChange:size=>{onStaticStyleChange(styleProperty.getStyleName(),{size:size})},showInput:"inputWithPopover",showLabels:!0,compressed:!0,append:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.vector.size.unitLabel",{defaultMessage:"px",description:"Shorthand for pixel"})})))}function VectorStyleSizeEditor(props){const sizeForm=props.styleProperty.isDynamic()?external_kbnSharedDeps_React_default.a.createElement(DynamicSizeForm,props):external_kbnSharedDeps_React_default.a.createElement(StaticSizeForm,props);return external_kbnSharedDeps_React_default.a.createElement(style_prop_editor_StylePropEditor,props,sizeForm)}const SYMBOLIZE_AS_OPTIONS=[{id:constants.SYMBOLIZE_AS_TYPES.CIRCLE,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.vector.symbolAs.circleLabel",{defaultMessage:"marker"})},{id:constants.SYMBOLIZE_AS_TYPES.ICON,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.vector.symbolAs.IconLabel",{defaultMessage:"icon"})}];function VectorStyleSymbolizeAsEditor({disabled:disabled,disabledBy:disabledBy,styleProperty:styleProperty,handlePropertyChange:handlePropertyChange}){const styleOptions=styleProperty.getOptions(),selectedOption=SYMBOLIZE_AS_OPTIONS.find(({id:id})=>id===styleOptions.value),symbolLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.vector.symbolLabel",{defaultMessage:"Symbol type"}),symbolizeAsForm=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:symbolLabel,display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonGroup,{isDisabled:disabled,buttonSize:"compressed",options:SYMBOLIZE_AS_OPTIONS,idSelected:selectedOption?selectedOption.id:void 0,onChange:optionId=>{const styleDescriptor={options:{value:optionId}};handlePropertyChange(constants.VECTOR_STYLES.SYMBOLIZE_AS,styleDescriptor)},isFullWidth:!0,legend:symbolLabel}));return disabled?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{anchorClassName:"mapStyleFormDisabledTooltip",content:getDisabledByMessage(disabledBy)},symbolizeAsForm):symbolizeAsForm}var maki=__webpack_require__(170),maki_default=__webpack_require__.n(maki),xml2js=__webpack_require__(171),xml2js_default=__webpack_require__.n(xml2js),parse_xml_string=__webpack_require__(196),kibana_services=__webpack_require__(4);const LARGE_MAKI_ICON_SIZE_AS_STRING=15..toString(),HALF_LARGE_MAKI_ICON_SIZE=Math.ceil(15),SYMBOLS={};maki_default.a.svgArray.forEach(svgString=>{const index=svgString.indexOf('id="');if(-1!==index){const idStartIndex=index+'id="'.length,idEndIndex=svgString.substring(idStartIndex).indexOf('"')+idStartIndex,fullSymbolId=svgString.substring(idStartIndex,idEndIndex),symbolId=fullSymbolId.substring(0,fullSymbolId.length-3);fullSymbolId.substring(fullSymbolId.length-2)===LARGE_MAKI_ICON_SIZE_AS_STRING&&(SYMBOLS[symbolId]=svgString)}});const SYMBOL_OPTIONS=Object.keys(SYMBOLS).map(symbolId=>({value:symbolId,label:symbolId}));function getMakiSymbolAnchor(symbolId){switch(symbolId){case"embassy":case"marker":case"marker-stroked":return"bottom";default:return"center"}}function getMakiIconId(symbolId,iconPixelSize){return`${symbolId}-${iconPixelSize}`}const ICON_PALETTES=[{id:"filledShapes",icons:["circle","marker","square","star","triangle","hospital"]},{id:"hollowShapes",icons:["circle-stroked","marker-stroked","square-stroked","star-stroked","triangle-stroked"]}],PREFERRED_ICONS=[];function getIconPaletteOptions(){const isDarkMode=Object(kibana_services.s)();return ICON_PALETTES.map(({id:id,icons:icons})=>{const iconsDisplay=icons.map(iconId=>external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:"10%",position:"relative",height:"100%",display:"inline-block",paddingTop:"4px"},key:iconId},external_kbnSharedDeps_React_default.a.createElement(symbol_icon_SymbolIcon,{className:"mapIcon",symbolId:iconId,fill:isDarkMode?"rgb(223, 229, 239)":"rgb(52, 55, 65)"})));return{value:id,inputDisplay:external_kbnSharedDeps_React_default.a.createElement("div",null,iconsDisplay)}})}function getIconPalette(paletteId){const palette=ICON_PALETTES.find(({id:id})=>id===paletteId);return palette?[...palette.icons]:[]}function symbol_icon_extends(){return(symbol_icon_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function symbol_icon_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}ICON_PALETTES.forEach(iconPalette=>{iconPalette.icons.forEach(iconId=>{PREFERRED_ICONS.includes(iconId)||PREFERRED_ICONS.push(iconId)})});class symbol_icon_SymbolIcon extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),symbol_icon_defineProperty(this,"_isMounted",!1),symbol_icon_defineProperty(this,"state",{imgDataUrl:null})}componentDidMount(){this._isMounted=!0,this._loadSymbol()}componentWillUnmount(){this._isMounted=!1}async _loadSymbol(){let imgDataUrl;try{const svg=function(symbolId){if(!SYMBOLS[symbolId])throw new Error("Unable to find symbol: "+symbolId);return SYMBOLS[symbolId]}(this.props.symbolId);imgDataUrl=function(svgString){const domUrl=window.URL||window.webkitURL||window,svg=new Blob([svgString],{type:"image/svg+xml"});return domUrl.createObjectURL(svg)}(await async function(svgString,fill,stroke){const svgXml=await Object(parse_xml_string.a)(svgString);let style="";return fill&&(style+=`fill:${fill};`),stroke&&(style+=`stroke:${stroke};`,style+="stroke-width:1;"),style&&(svgXml.svg.$.style=style),(new xml2js_default.a.Builder).buildObject(svgXml)}(svg,this.props.fill,this.props.stroke))}catch(error){return}this._isMounted&&this.setState({imgDataUrl:imgDataUrl})}render(){if(!this.state.imgDataUrl)return null;const{symbolId:symbolId,fill:fill,stroke:stroke,...rest}=this.props;return external_kbnSharedDeps_React_default.a.createElement("img",symbol_icon_extends({width:"16px",height:"18px",src:this.state.imgDataUrl,alt:this.props.symbolId},rest))}}function icon_select_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class icon_select_IconSelect extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),icon_select_defineProperty(this,"state",{isPopoverOpen:!1}),icon_select_defineProperty(this,"_closePopover",()=>{this.setState({isPopoverOpen:!1})}),icon_select_defineProperty(this,"_openPopover",()=>{this.setState({isPopoverOpen:!0})}),icon_select_defineProperty(this,"_togglePopover",()=>{this.setState(prevState=>({isPopoverOpen:!prevState.isPopoverOpen}))}),icon_select_defineProperty(this,"_handleKeyboardActivity",e=>{var event;"object"==typeof(event=e)&&"keyCode"in event&&(e.key===external_kbnSharedDeps_ElasticEui_.keys.ENTER?(e.preventDefault(),this._togglePopover()):e.key===external_kbnSharedDeps_ElasticEui_.keys.ARROW_DOWN&&this._openPopover())}),icon_select_defineProperty(this,"_onIconSelect",options=>{const selectedOption=options.find(option=>"on"===option.checked);selectedOption&&this.props.onChange(selectedOption.value),this._closePopover()})}_renderPopoverButton(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormControlLayout,{icon:{type:"arrowDown",side:"right"},readOnly:!0,fullWidth:!0,compressed:!0,onKeyDown:this._handleKeyboardActivity,append:this.props.append},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{onClick:this._togglePopover,onKeyDown:this._handleKeyboardActivity,value:this.props.value,compressed:!0,readOnly:!0,fullWidth:!0,prepend:external_kbnSharedDeps_React_default.a.createElement(symbol_icon_SymbolIcon,{key:this.props.value,className:"mapIconSelectSymbol__inputButton",symbolId:this.props.value,fill:Object(kibana_services.s)()?"rgb(223, 229, 239)":"rgb(52, 55, 65)"})}))}_renderIconSelectable(){const options=SYMBOL_OPTIONS.map(({value:value,label:label})=>({value:value,label:label,prepend:external_kbnSharedDeps_React_default.a.createElement(symbol_icon_SymbolIcon,{key:value,symbolId:value,fill:Object(kibana_services.s)()?"rgb(223, 229, 239)":"rgb(52, 55, 65)"})}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelectable,{searchable:!0,options:options,onChange:this._onIconSelect},(list,search)=>external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:"300px"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopoverTitle,null,search),list))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{ownFocus:!0,button:this._renderPopoverButton(),isOpen:this.state.isPopoverOpen,closePopover:this._closePopover,anchorPosition:"downLeft",panelPaddingSize:"s",display:"block"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFocusTrap,{clickOutsideDisables:!0},this._renderIconSelectable()))}}function isDuplicateStop(targetStop,iconStops){return iconStops.filter(({stop:stop})=>targetStop===stop).length>1}function getFirstUnusedSymbol(iconStops){const firstUnusedPreferredIconId=PREFERRED_ICONS.find(iconId=>!iconStops.some(({icon:icon})=>icon===iconId));if(firstUnusedPreferredIconId)return firstUnusedPreferredIconId;const firstUnusedSymbol=SYMBOL_OPTIONS.find(({value:value})=>!iconStops.some(({icon:icon})=>icon===value));return firstUnusedSymbol?firstUnusedSymbol.value:constants.DEFAULT_ICON}function IconStops({field:field,getValueSuggestions:getValueSuggestions,iconStops:iconStops,onChange:onChange}){return iconStops.map(({stop:stop,icon:icon},index)=>{const onRemove=()=>{onChange({customStops:[...iconStops.slice(0,index),...iconStops.slice(index+1)]})};let deleteButton;iconStops.length>2&&0!==index&&(deleteButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"trash",color:"danger","aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.iconStops.deleteButtonAriaLabel",{defaultMessage:"Delete"}),title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.iconStops.deleteButtonLabel",{defaultMessage:"Delete"}),onClick:onRemove}));const iconStopButtons=external_kbnSharedDeps_React_default.a.createElement("div",null,deleteButton,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"plusInCircle",color:"primary","aria-label":"Add",title:"Add",onClick:()=>{onChange({customStops:[...iconStops.slice(0,index+1),{stop:"",icon:getFirstUnusedSymbol(iconStops)},...iconStops.slice(index+1)]})}})),errors=[],stopInput=0===index?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{"aria-label":Object(style_util.e)(),placeholder:Object(style_util.e)(),disabled:!0,compressed:!0}):external_kbnSharedDeps_React_default.a.createElement(stop_input_StopInput,{key:field.getName(),field:field,getValueSuggestions:getValueSuggestions,value:stop,onChange:newStopValue=>{const newIconStops=[...iconStops];newIconStops[index]={...iconStops[index],stop:newStopValue},onChange({customStops:newIconStops,isInvalid:isDuplicateStop(newStopValue,iconStops)})}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{key:index,className:"mapColorStop",isInvalid:0!==errors.length,error:errors,display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},stopInput),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(icon_select_IconSelect,{onChange:selectedIconId=>{const newIconStops=[...iconStops];newIconStops[index]={...iconStops[index],icon:selectedIconId},onChange({customStops:newIconStops})},value:icon,append:iconStopButtons}))))})}function icon_map_select_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const DEFAULT_ICON_STOPS=[{stop:null,icon:PREFERRED_ICONS[0]},{stop:"",icon:PREFERRED_ICONS[1]}];class icon_map_select_IconMapSelect extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),icon_map_select_defineProperty(this,"state",{customIconStops:this.props.customIconStops?this.props.customIconStops:DEFAULT_ICON_STOPS}),icon_map_select_defineProperty(this,"_onMapSelect",selectedValue=>{const useCustomIconMap="CUSTOM_MAP_ID"===selectedValue,changes={iconPaletteId:useCustomIconMap?null:selectedValue,useCustomIconMap:useCustomIconMap};this.props.customIconStops||(changes.customIconStops=DEFAULT_ICON_STOPS),this.props.onChange(changes)}),icon_map_select_defineProperty(this,"_onCustomMapChange",({customStops:customStops,isInvalid:isInvalid})=>{this.setState({customIconStops:customStops}),isInvalid||this.props.onChange({useCustomIconMap:!0,customIconStops:customStops})})}_renderCustomStopsInput(){return this.props.isCustomOnly||this.props.useCustomIconMap?external_kbnSharedDeps_React_default.a.createElement(IconStops,{field:this.props.styleProperty.getField(),getValueSuggestions:this.props.styleProperty.getValueSuggestions,iconStops:this.state.customIconStops,onChange:this._onCustomMapChange}):null}_renderMapSelect(){if(this.props.isCustomOnly)return null;const mapOptionsWithCustom=[{value:"CUSTOM_MAP_ID",inputDisplay:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.icon.customMapLabel",{defaultMessage:"Custom icon palette"})},...getIconPaletteOptions()];let valueOfSelected="";return this.props.useCustomIconMap?valueOfSelected="CUSTOM_MAP_ID":this.props.iconPaletteId&&(valueOfSelected=this.props.iconPaletteId),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSuperSelect,{options:mapOptionsWithCustom,onChange:this._onMapSelect,valueOfSelected:valueOfSelected,hasDividers:!0,compressed:!0}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,this._renderMapSelect(),this._renderCustomStopsInput())}}function dynamic_icon_form_extends(){return(dynamic_icon_form_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function DynamicIconForm({fields:fields,onDynamicStyleChange:onDynamicStyleChange,staticDynamicSelect:staticDynamicSelect,styleProperty:styleProperty}){const styleOptions=styleProperty.getOptions(),onIconMapChange=newOptions=>{onDynamicStyleChange(styleProperty.getStyleName(),{...styleOptions,...newOptions})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"xs",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},staticDynamicSelect),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(FieldSelect,{styleName:styleProperty.getStyleName(),fields:fields,selectedFieldName:external_kbnSharedDeps_Lodash_default.a.get(styleOptions,"field.name"),onChange:({field:field})=>{const{name:name,origin:origin}=field;onDynamicStyleChange(styleProperty.getStyleName(),{...styleOptions,field:{name:name,origin:origin}})},compressed:!0}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),function(){const field=styleProperty.getField();return field?external_kbnSharedDeps_React_default.a.createElement(icon_map_select_IconMapSelect,dynamic_icon_form_extends({},styleOptions,{styleProperty:styleProperty,onChange:onIconMapChange,isCustomOnly:!field.supportsAutoDomain()})):null}())}function StaticIconForm({onStaticStyleChange:onStaticStyleChange,staticDynamicSelect:staticDynamicSelect,styleProperty:styleProperty}){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"xs",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},staticDynamicSelect),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(icon_select_IconSelect,{onChange:selectedIconId=>{onStaticStyleChange(styleProperty.getStyleName(),{value:selectedIconId})},value:styleProperty.getOptions().value})))}function VectorStyleIconEditor(props){const iconForm=props.styleProperty.isDynamic()?external_kbnSharedDeps_React_default.a.createElement(DynamicIconForm,props):external_kbnSharedDeps_React_default.a.createElement(StaticIconForm,props);return external_kbnSharedDeps_React_default.a.createElement(style_prop_editor_StylePropEditor,props,iconForm)}function DynamicLabelForm({fields:fields,onDynamicStyleChange:onDynamicStyleChange,staticDynamicSelect:staticDynamicSelect,styleProperty:styleProperty}){const styleOptions=styleProperty.getOptions();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"xs",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},staticDynamicSelect),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(FieldSelect,{styleName:styleProperty.getStyleName(),fields:fields,selectedFieldName:styleProperty.getFieldName(),onChange:({field:field})=>{onDynamicStyleChange(styleProperty.getStyleName(),{...styleOptions,field:field})},compressed:!0})))}function StaticLabelForm({onStaticStyleChange:onStaticStyleChange,staticDynamicSelect:staticDynamicSelect,styleProperty:styleProperty}){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"xs",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},staticDynamicSelect),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.staticLabel.valuePlaceholder",{defaultMessage:"symbol label"}),value:styleProperty.getOptions().value,onChange:event=>{onStaticStyleChange(styleProperty.getStyleName(),{value:event.target.value})},"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.staticLabel.valueAriaLabel",{defaultMessage:"symbol label"}),compressed:!0})))}function VectorStyleLabelEditor(props){const labelForm=props.styleProperty.isDynamic()?external_kbnSharedDeps_React_default.a.createElement(DynamicLabelForm,props):external_kbnSharedDeps_React_default.a.createElement(StaticLabelForm,props);return external_kbnSharedDeps_React_default.a.createElement(style_prop_editor_StylePropEditor,props,labelForm)}const vector_style_label_border_size_editor_options=[{value:constants.LABEL_BORDER_SIZES.NONE,text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.labelBorderSize.noneLabel",{defaultMessage:"None"})},{value:constants.LABEL_BORDER_SIZES.SMALL,text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.labelBorderSize.smallLabel",{defaultMessage:"Small"})},{value:constants.LABEL_BORDER_SIZES.MEDIUM,text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.labelBorderSize.mediumLabel",{defaultMessage:"Medium"})},{value:constants.LABEL_BORDER_SIZES.LARGE,text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.labelBorderSize.largeLabel",{defaultMessage:"Large"})}];function VectorStyleLabelBorderSizeEditor({disabled:disabled,disabledBy:disabledBy,handlePropertyChange:handlePropertyChange,styleProperty:styleProperty}){const labelBorderSizeForm=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:getVectorStyleLabel(constants.VECTOR_STYLES.LABEL_BORDER_SIZE),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{disabled:disabled,options:vector_style_label_border_size_editor_options,value:styleProperty.getOptions().size,onChange:function(e){const styleDescriptor={options:{size:e.target.value}};handlePropertyChange(styleProperty.getStyleName(),styleDescriptor)},"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.labelBorderSizeSelect.ariaLabel",{defaultMessage:"Select label border size"}),compressed:!0}));return disabled?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{anchorClassName:"mapStyleFormDisabledTooltip",content:getDisabledByMessage(disabledBy)},labelBorderSizeForm):labelBorderSizeForm}function DynamicOrientationForm({fields:fields,onDynamicStyleChange:onDynamicStyleChange,staticDynamicSelect:staticDynamicSelect,styleProperty:styleProperty}){const styleOptions=styleProperty.getOptions();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"xs",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},staticDynamicSelect),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(FieldSelect,{styleName:styleProperty.getStyleName(),fields:fields,selectedFieldName:styleProperty.getFieldName(),onChange:({field:field})=>{onDynamicStyleChange(styleProperty.getStyleName(),{...styleOptions,field:field})},compressed:!0})))}function StaticOrientationForm({onStaticStyleChange:onStaticStyleChange,staticDynamicSelect:staticDynamicSelect,styleProperty:styleProperty}){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"xs",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},staticDynamicSelect),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(validated_range.a,{min:0,max:360,value:styleProperty.getOptions().orientation,onChange:orientation=>{onStaticStyleChange(styleProperty.getStyleName(),{orientation:orientation})},showInput:"inputWithPopover",showLabels:!0,compressed:!0,append:"°"})))}function OrientationEditor(props){const orientationForm=props.styleProperty.isDynamic()?external_kbnSharedDeps_React_default.a.createElement(DynamicOrientationForm,props):external_kbnSharedDeps_React_default.a.createElement(StaticOrientationForm,props);return external_kbnSharedDeps_React_default.a.createElement(style_prop_editor_StylePropEditor,props,orientationForm)}function style_fields_helper_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}async function createStyleFieldsHelper(fields){const promises=fields.map(async field=>({label:await field.getLabel(),name:field.getName(),origin:field.getOrigin(),type:await field.getDataType(),supportsAutoDomain:field.supportsAutoDomain()})),styleFields=await Promise.all(promises);return new style_fields_helper_StyleFieldsHelper(styleFields)}class style_fields_helper_StyleFieldsHelper{constructor(styleFields){style_fields_helper_defineProperty(this,"_styleFields",void 0),style_fields_helper_defineProperty(this,"_ordinalAndCategoricalFields",void 0),style_fields_helper_defineProperty(this,"_numberFields",void 0),style_fields_helper_defineProperty(this,"_ordinalFields",void 0);const ordinalAndCategoricalFields=[],numberFields=[],ordinalFields=[];styleFields.forEach(styleField=>{(constants.CATEGORICAL_DATA_TYPES.includes(styleField.type)||constants.ORDINAL_DATA_TYPES.includes(styleField.type))&&ordinalAndCategoricalFields.push(styleField),"date"!==styleField.type&&"number"!==styleField.type||("number"===styleField.type&&numberFields.push(styleField),styleField.supportsAutoDomain&&ordinalFields.push(styleField))}),this._styleFields=styleFields,this._ordinalAndCategoricalFields=ordinalAndCategoricalFields,this._numberFields=numberFields,this._ordinalFields=ordinalFields}hasFieldForStyle(field,styleName){return this.getFieldsForStyle(styleName).some(styleField=>field.getName()===styleField.name)}getFieldsForStyle(styleName){switch(styleName){case constants.VECTOR_STYLES.ICON_ORIENTATION:return this._numberFields;case constants.VECTOR_STYLES.FILL_COLOR:case constants.VECTOR_STYLES.LINE_COLOR:case constants.VECTOR_STYLES.LABEL_COLOR:case constants.VECTOR_STYLES.LABEL_BORDER_COLOR:case constants.VECTOR_STYLES.ICON:return this._ordinalAndCategoricalFields;case constants.VECTOR_STYLES.LINE_WIDTH:case constants.VECTOR_STYLES.LABEL_SIZE:case constants.VECTOR_STYLES.ICON_SIZE:return this._ordinalFields;case constants.VECTOR_STYLES.LABEL_TEXT:return this._styleFields;default:return[]}}getStyleFields(){return this._styleFields}}function vector_style_editor_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class vector_style_editor_VectorStyleEditor extends external_kbnSharedDeps_React_.Component{constructor(props){super(props),vector_style_editor_defineProperty(this,"_isMounted",!1),vector_style_editor_defineProperty(this,"_handleSelectedFeatureChange",selectedFeature=>{this.setState({selectedFeature:selectedFeature})}),vector_style_editor_defineProperty(this,"_onIsTimeAwareChange",event=>{this.props.onIsTimeAwareChange(event.target.checked)}),vector_style_editor_defineProperty(this,"_onStaticStyleChange",(propertyName,options)=>{const styleDescriptor={type:constants.STYLE_TYPE.STATIC,options:options};this.props.handlePropertyChange(propertyName,styleDescriptor)}),vector_style_editor_defineProperty(this,"_onDynamicStyleChange",(propertyName,options)=>{const styleDescriptor={type:constants.STYLE_TYPE.DYNAMIC,options:options};this.props.handlePropertyChange(propertyName,styleDescriptor)});let _selectedFeature=constants.VECTOR_SHAPE_TYPE.POLYGON;props.isPointsOnly?_selectedFeature=constants.VECTOR_SHAPE_TYPE.POINT:props.isLinesOnly&&(_selectedFeature=constants.VECTOR_SHAPE_TYPE.LINE),this.state={styleFields:[],defaultDynamicProperties:Object(vector_style_defaults.g)(),defaultStaticProperties:Object(vector_style_defaults.h)(),supportedFeatures:[],selectedFeature:_selectedFeature}}componentWillUnmount(){this._isMounted=!1}componentDidMount(){this._isMounted=!0,this._loadFields(),this._loadSupportedFeatures()}componentDidUpdate(){this._loadFields(),this._loadSupportedFeatures()}async _loadFields(){const styleFieldsHelper=await createStyleFieldsHelper(await this.props.layer.getStyleEditorFields()),styleFields=styleFieldsHelper.getStyleFields();!this._isMounted||external_kbnSharedDeps_Lodash_default.a.isEqual(styleFields,this.state.styleFields)&&void 0!==this.state.styleFieldsHelper||this.setState({styleFields:styleFields,styleFieldsHelper:styleFieldsHelper})}async _loadSupportedFeatures(){const supportedFeatures=await this.props.layer.getSource().getSupportedShapeTypes();this._isMounted&&!external_kbnSharedDeps_Lodash_default.a.isEqual(supportedFeatures,this.state.supportedFeatures)&&this.setState({supportedFeatures:supportedFeatures})}_hasMarkerOrIcon(){const iconSize=this.props.styleProperties[constants.VECTOR_STYLES.ICON_SIZE];return iconSize.isDynamic()||iconSize.getOptions().size>0}_hasLabel(){const label=this.props.styleProperties[constants.VECTOR_STYLES.LABEL_TEXT];return label.isDynamic()?label.isComplete():null!=label.getOptions().value&&label.getOptions().value.length}_hasLabelBorder(){return this.props.styleProperties[constants.VECTOR_STYLES.LABEL_BORDER_SIZE].getOptions().size!==constants.LABEL_BORDER_SIZES.NONE}_renderFillColor(isPointFillColor=!1){return external_kbnSharedDeps_React_default.a.createElement(VectorStyleColorEditor,{disabled:isPointFillColor&&!this._hasMarkerOrIcon(),disabledBy:constants.VECTOR_STYLES.ICON_SIZE,swatches:color_palettes.b,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:this.props.styleProperties[constants.VECTOR_STYLES.FILL_COLOR],fields:this.state.styleFieldsHelper.getFieldsForStyle(constants.VECTOR_STYLES.FILL_COLOR),defaultStaticStyleOptions:this.state.defaultStaticProperties[constants.VECTOR_STYLES.FILL_COLOR].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[constants.VECTOR_STYLES.FILL_COLOR].options})}_renderLineColor(isPointBorderColor=!1){const disabledByIconSize=isPointBorderColor&&!this._hasMarkerOrIcon();return external_kbnSharedDeps_React_default.a.createElement(VectorStyleColorEditor,{disabled:disabledByIconSize||!this.props.hasBorder,disabledBy:disabledByIconSize?constants.VECTOR_STYLES.ICON_SIZE:constants.VECTOR_STYLES.LINE_WIDTH,swatches:color_palettes.d,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:this.props.styleProperties[constants.VECTOR_STYLES.LINE_COLOR],fields:this.state.styleFieldsHelper.getFieldsForStyle(constants.VECTOR_STYLES.LINE_COLOR),defaultStaticStyleOptions:this.state.defaultStaticProperties[constants.VECTOR_STYLES.LINE_COLOR].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[constants.VECTOR_STYLES.LINE_COLOR].options})}_renderLineWidth(isPointBorderWidth=!1){return external_kbnSharedDeps_React_default.a.createElement(VectorStyleSizeEditor,{disabled:isPointBorderWidth&&!this._hasMarkerOrIcon(),disabledBy:constants.VECTOR_STYLES.ICON_SIZE,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:this.props.styleProperties[constants.VECTOR_STYLES.LINE_WIDTH],fields:this.state.styleFieldsHelper.getFieldsForStyle(constants.VECTOR_STYLES.LINE_WIDTH),defaultStaticStyleOptions:this.state.defaultStaticProperties[constants.VECTOR_STYLES.LINE_WIDTH].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[constants.VECTOR_STYLES.LINE_WIDTH].options})}_renderLabelProperties(isPoints){if(!isPoints&&this.props.layer.getType()===constants.LAYER_TYPE.TILED_VECTOR&&!this.props.layer.getSource().isESSource())return;const hasLabel=this._hasLabel(),hasLabelBorder=this._hasLabelBorder();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(VectorStyleLabelEditor,{onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:this.props.styleProperties[constants.VECTOR_STYLES.LABEL_TEXT],fields:this.state.styleFieldsHelper.getFieldsForStyle(constants.VECTOR_STYLES.LABEL_TEXT),defaultStaticStyleOptions:this.state.defaultStaticProperties[constants.VECTOR_STYLES.LABEL_TEXT].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[constants.VECTOR_STYLES.LABEL_TEXT].options}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(VectorStyleColorEditor,{disabled:!hasLabel,disabledBy:constants.VECTOR_STYLES.LABEL_TEXT,swatches:color_palettes.d,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:this.props.styleProperties[constants.VECTOR_STYLES.LABEL_COLOR],fields:this.state.styleFieldsHelper.getFieldsForStyle(constants.VECTOR_STYLES.LABEL_COLOR),defaultStaticStyleOptions:this.state.defaultStaticProperties[constants.VECTOR_STYLES.LABEL_COLOR].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[constants.VECTOR_STYLES.LABEL_COLOR].options}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(VectorStyleSizeEditor,{disabled:!hasLabel,disabledBy:constants.VECTOR_STYLES.LABEL_TEXT,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:this.props.styleProperties[constants.VECTOR_STYLES.LABEL_SIZE],fields:this.state.styleFieldsHelper.getFieldsForStyle(constants.VECTOR_STYLES.LABEL_SIZE),defaultStaticStyleOptions:this.state.defaultStaticProperties[constants.VECTOR_STYLES.LABEL_SIZE].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[constants.VECTOR_STYLES.LABEL_SIZE].options}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(VectorStyleColorEditor,{disabled:!hasLabel||!hasLabelBorder,disabledBy:hasLabel?constants.VECTOR_STYLES.LABEL_BORDER_SIZE:constants.VECTOR_STYLES.LABEL_TEXT,swatches:color_palettes.d,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:this.props.styleProperties[constants.VECTOR_STYLES.LABEL_BORDER_COLOR],fields:this.state.styleFieldsHelper.getFieldsForStyle(constants.VECTOR_STYLES.LABEL_BORDER_COLOR),defaultStaticStyleOptions:this.state.defaultStaticProperties[constants.VECTOR_STYLES.LABEL_BORDER_COLOR].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[constants.VECTOR_STYLES.LABEL_BORDER_COLOR].options}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(VectorStyleLabelBorderSizeEditor,{disabled:!hasLabel,disabledBy:constants.VECTOR_STYLES.LABEL_TEXT,handlePropertyChange:this.props.handlePropertyChange,styleProperty:this.props.styleProperties[constants.VECTOR_STYLES.LABEL_BORDER_SIZE]}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}))}_renderPointProperties(){const hasMarkerOrIcon=this._hasMarkerOrIcon();let iconOrientationEditor,iconEditor;return this.props.styleProperties[constants.VECTOR_STYLES.SYMBOLIZE_AS].isSymbolizedAsIcon()&&(iconOrientationEditor=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(OrientationEditor,{disabled:!hasMarkerOrIcon,disabledBy:constants.VECTOR_STYLES.ICON_SIZE,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:this.props.styleProperties[constants.VECTOR_STYLES.ICON_ORIENTATION],fields:this.state.styleFieldsHelper.getFieldsForStyle(constants.VECTOR_STYLES.ICON_ORIENTATION),defaultStaticStyleOptions:this.state.defaultStaticProperties[constants.VECTOR_STYLES.ICON_ORIENTATION].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[constants.VECTOR_STYLES.ICON_ORIENTATION].options}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"})),iconEditor=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(VectorStyleIconEditor,{disabled:!hasMarkerOrIcon,disabledBy:constants.VECTOR_STYLES.ICON_SIZE,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:this.props.styleProperties[constants.VECTOR_STYLES.ICON],fields:this.state.styleFieldsHelper.getFieldsForStyle(constants.VECTOR_STYLES.ICON),defaultStaticStyleOptions:this.state.defaultStaticProperties[constants.VECTOR_STYLES.ICON].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[constants.VECTOR_STYLES.ICON].options}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(VectorStyleSymbolizeAsEditor,{disabled:!hasMarkerOrIcon,disabledBy:constants.VECTOR_STYLES.ICON_SIZE,styleProperty:this.props.styleProperties[constants.VECTOR_STYLES.SYMBOLIZE_AS],handlePropertyChange:this.props.handlePropertyChange}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),iconEditor,this._renderFillColor(!0),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),this._renderLineColor(!0),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),this._renderLineWidth(!0),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),iconOrientationEditor,external_kbnSharedDeps_React_default.a.createElement(VectorStyleSizeEditor,{onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:this.props.styleProperties[constants.VECTOR_STYLES.ICON_SIZE],fields:this.state.styleFieldsHelper.getFieldsForStyle(constants.VECTOR_STYLES.ICON_SIZE),defaultStaticStyleOptions:this.state.defaultStaticProperties[constants.VECTOR_STYLES.ICON_SIZE].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[constants.VECTOR_STYLES.ICON_SIZE].options}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),this._renderLabelProperties(!0))}_renderLineProperties(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,this._renderLineColor(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),this._renderLineWidth(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),this._renderLabelProperties(!1))}_renderPolygonProperties(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,this._renderFillColor(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),this._renderLineColor(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),this._renderLineWidth(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),this._renderLabelProperties(!1))}_renderProperties(){const{supportedFeatures:supportedFeatures,selectedFeature:selectedFeature,styleFieldsHelper:styleFieldsHelper}=this.state;if(0===supportedFeatures.length||!styleFieldsHelper)return null;if(1===supportedFeatures.length)switch(supportedFeatures[0]){case constants.VECTOR_SHAPE_TYPE.POINT:return this._renderPointProperties();case constants.VECTOR_SHAPE_TYPE.LINE:return this._renderLineProperties();case constants.VECTOR_SHAPE_TYPE.POLYGON:return this._renderPolygonProperties()}const featureButtons=[{id:constants.VECTOR_SHAPE_TYPE.POINT,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.vectorStyleEditor.pointLabel",{defaultMessage:"Points"})},{id:constants.VECTOR_SHAPE_TYPE.LINE,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.vectorStyleEditor.lineLabel",{defaultMessage:"Lines"})},{id:constants.VECTOR_SHAPE_TYPE.POLYGON,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.vectorStyleEditor.polygonLabel",{defaultMessage:"Polygons"})}];let styleProperties=this._renderPolygonProperties();return selectedFeature===constants.VECTOR_SHAPE_TYPE.LINE?styleProperties=this._renderLineProperties():selectedFeature===constants.VECTOR_SHAPE_TYPE.POINT&&(styleProperties=this._renderPointProperties()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonGroup,{legend:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.vectorStyleEditor.featureTypeButtonGroupLegend",{defaultMessage:"vector feature button group"}),options:featureButtons,idSelected:selectedFeature,onChange:this._handleSelectedFeatureChange}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),styleProperties)}_renderIsTimeAwareSwitch(){return this.props.showIsTimeAware?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{display:"columnCompressedSwitch"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.vectorStyleEditor.isTimeAwareLabel",{defaultMessage:"Apply global time to style metadata requests"}),checked:this.props.isTimeAware,onChange:this._onIsTimeAwareChange,compressed:!0})):null}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,this._renderProperties(),this._renderIsTimeAwareSwitch())}}class StyleMeta{constructor(styleMetaDescriptor){var obj,key,value;value=void 0,(key="_descriptor")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this._descriptor=styleMetaDescriptor||{fieldMeta:{}}}getRangeFieldMetaDescriptor(fieldName){return this._descriptor.fieldMeta[fieldName]&&this._descriptor.fieldMeta[fieldName].range?this._descriptor.fieldMeta[fieldName].range:null}getCategoryFieldMetaDescriptor(fieldName){return this._descriptor.fieldMeta[fieldName]&&this._descriptor.fieldMeta[fieldName].categories?this._descriptor.fieldMeta[fieldName].categories:null}isPointsOnly(){return!!this._descriptor.geometryTypes&&!!this._descriptor.geometryTypes.isPointsOnly}isLinesOnly(){return!!this._descriptor.geometryTypes&&!!this._descriptor.geometryTypes.isLinesOnly}isPolygonsOnly(){return!!this._descriptor.geometryTypes&&!!this._descriptor.geometryTypes.isPolygonsOnly}}const CircleIcon=({style:style})=>external_kbnSharedDeps_React_default.a.createElement("svg",{className:"euiIcon euiIcon--medium mapFillableCircle",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",style:style,viewBox:"0 0 16 16"},external_kbnSharedDeps_React_default.a.createElement("defs",null,external_kbnSharedDeps_React_default.a.createElement("path",{id:"fillableCircle",d:"M8,15 C11.8659932,15 15,11.8659932 15,8 C15,4.13400675 11.8659932,        1 8,1 C4.13400675,1 1,4.13400675 1,8 C1,11.8659932 4.13400675,15 8,        15 Z M8,16 C3.581722,16 0,12.418278 0,8 C0,3.581722 3.581722,0 8,        0 C12.418278,0 16,3.581722 16,8 C16,12.418278 12.418278,16 8,16 Z M8,        12 C10.209139,12 12,10.209139 12,8 C12,5.790861 10.209139,4 8,        4 C5.790861,4 4,5.790861 4,8 C4,10.209139 5.790861,12 8,12 Z M8,        11 C6.34314575,11 5,9.65685425 5,8 C5,6.34314575 6.34314575,5 8,        5 C9.65685425,5 11,6.34314575 11,8 C11,9.65685425 9.65685425,11 8,        11 Z M8,9 C8.55228475,9 9,8.55228475 9,8 C9,7.44771525 8.55228475,7 8,        7 C7.44771525,7 7,7.44771525 7,8 C7,8.55228475 7.44771525,9 8,9 Z"})),external_kbnSharedDeps_React_default.a.createElement("g",null,external_kbnSharedDeps_React_default.a.createElement("ellipse",{id:"path3353",cx:"8.0350437",cy:"7.9660664",rx:"7.3820276",ry:"7.3809776",transform:"matrix(0.99985753,0.01687955,0,1,0,0)"}))),LineIcon=({style:style})=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},external_kbnSharedDeps_React_default.a.createElement("line",{x1:"0",y1:"6",x2:"16",y2:"6",style:style})),PolygonIcon=({style:style})=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},external_kbnSharedDeps_React_default.a.createElement("rect",{width:"15",height:"15",x:".5",y:".5",style:style,rx:"4"}));function VectorIcon({fillColor:fillColor,isPointsOnly:isPointsOnly,isLinesOnly:isLinesOnly,strokeColor:strokeColor,symbolId:symbolId}){if(isLinesOnly){const style={stroke:strokeColor,strokeWidth:"4px"};return external_kbnSharedDeps_React_default.a.createElement(LineIcon,{style:style})}const style={stroke:strokeColor,strokeWidth:"1px",fill:fillColor};return isPointsOnly?symbolId?external_kbnSharedDeps_React_default.a.createElement(symbol_icon_SymbolIcon,{key:`${symbolId}${fillColor}${strokeColor}`,symbolId:symbolId,fill:fillColor,stroke:strokeColor}):external_kbnSharedDeps_React_default.a.createElement(CircleIcon,{style:style}):external_kbnSharedDeps_React_default.a.createElement(PolygonIcon,{style:style})}function VectorStyleLegend({isLinesOnly:isLinesOnly,isPointsOnly:isPointsOnly,styles:styles,symbolId:symbolId}){const legendRows=[];for(let i=0;i<styles.length;i++){const row=styles[i].renderLegendDetailRow({isLinesOnly:isLinesOnly,isPointsOnly:isPointsOnly,symbolId:symbolId});legendRows.push(external_kbnSharedDeps_React_default.a.createElement("div",{key:i,className:"vectorStyleLegendSpacer"},row))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,legendRows)}function style_property_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class style_property_AbstractStyleProperty{constructor(options,styleName){style_property_defineProperty(this,"_options",void 0),style_property_defineProperty(this,"_styleName",void 0),this._options=options,this._styleName=styleName}isDynamic(){return!1}isComplete(){return!0}formatField(value){return null==value?"":"boolean"==typeof value?value.toString():value}getStyleName(){return this._styleName}getOptions(){return this._options}renderLegendDetailRow({isPointsOnly:isPointsOnly,isLinesOnly:isLinesOnly}){return null}renderDataMappingPopover(onChange){return null}getDisplayStyleName(){return getVectorStyleLabel(this.getStyleName())}}class static_style_property_StaticStyleProperty extends style_property_AbstractStyleProperty{}var obj,key,value;obj=static_style_property_StaticStyleProperty,key="type",value=constants.STYLE_TYPE.STATIC,key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(8);function data_mapping_popover_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class data_mapping_popover_DataMappingPopover extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),data_mapping_popover_defineProperty(this,"state",{isPopoverOpen:!1}),data_mapping_popover_defineProperty(this,"_togglePopover",()=>{this.setState(prevState=>({isPopoverOpen:!prevState.isPopoverOpen}))}),data_mapping_popover_defineProperty(this,"_closePopover",()=>{this.setState({isPopoverOpen:!1})})}_renderButton(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:this._togglePopover,size:"xs",iconType:"controlsHorizontal",iconSide:"left"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.styles.fieldMetaOptions.popoverToggle",defaultMessage:"Data mapping"}))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{id:"dataMappingPopover",anchorPosition:"leftCenter",button:this._renderButton(),isOpen:this.state.isPopoverOpen,closePopover:this._closePopover,ownFocus:!0},this.props.children)}}function CategoricalDataMappingPopover(props){return external_kbnSharedDeps_React_default.a.createElement(data_mapping_popover_DataMappingPopover,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{display:"columnCompressedSwitch"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.fieldMetaOptions.isEnabled.categoricalLabel",{defaultMessage:"Get categories from data set"}),checked:props.fieldMetaOptions.isEnabled,onChange:event=>{props.onChange({fieldMetaOptions:{...props.fieldMetaOptions,isEnabled:event.target.checked}})},compressed:!0,disabled:props.switchDisabled})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.styles.categoricalDataMapping.isEnabled.server",defaultMessage:"Calculate categories from the entire data set. Styling is consistent when users pan, zoom, and filter."})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.styles.categoricalDataMapping.isEnabled.local",defaultMessage:"When disabled, calculate categories from local data and recalculate categories when the data changes. Styling may be inconsistent when users pan, zoom, and filter."})))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"questionInCircle",color:"subdued"})))))}const ADD_BUTTON_TITLE=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.addBtnTitle",{defaultMessage:"Add"}),DELETE_BUTTON_TITLE=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.deleteBtnTitle",{defaultMessage:"Delete"}),RowActionButtons=({onAdd:onAdd,onRemove:onRemove,showDeleteButton:showDeleteButton})=>external_kbnSharedDeps_React_default.a.createElement("div",null,showDeleteButton?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"trash",color:"danger","aria-label":DELETE_BUTTON_TITLE,title:DELETE_BUTTON_TITLE,onClick:onRemove}):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"plusInCircle",color:"primary","aria-label":ADD_BUTTON_TITLE,title:ADD_BUTTON_TITLE,onClick:onAdd}));function isInvalidPercentile(percentile){return"number"!=typeof percentile||(percentile<=0||percentile>=100)}class percentiles_form_PercentilesForm extends external_kbnSharedDeps_React_.Component{constructor(props){super(props),function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(this,"_onSubmit",()=>{this.state.percentiles.some(isInvalidPercentile)||this.props.onChange(this.state.percentiles)}),this.state={percentiles:props.initialPercentiles}}render(){const rows=this.state.percentiles.map((percentile,index)=>{const isInvalid=isInvalidPercentile(percentile),error=isInvalid?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.invalidPercentileMsg",{defaultMessage:"Percentile must be a number between 0 and 100, exclusive"}):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{key:index,display:"rowCompressed",isInvalid:isInvalid,error:error},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldNumber,{isInvalid:isInvalid,value:percentile,onChange:event=>{const sanitizedValue=parseFloat(event.target.value),percentiles=[...this.state.percentiles];percentiles[index]=isNaN(sanitizedValue)?"":sanitizedValue,this.setState({percentiles:percentiles},this._onSubmit)},append:external_kbnSharedDeps_React_default.a.createElement(RowActionButtons,{onAdd:()=>{let newPercentile="";if("number"==typeof percentile){let delta=1;if(index===this.state.percentiles.length-1){if(0!==index){const prevPercentile=this.state.percentiles[index-1];"number"==typeof prevPercentile&&(delta=percentile-prevPercentile)}}else{const nextPercentile=this.state.percentiles[index+1];"number"==typeof nextPercentile&&(delta=(nextPercentile-percentile)/2)}newPercentile=percentile+delta,newPercentile>=100&&(newPercentile=99)}const percentiles=[...this.state.percentiles.slice(0,index+1),newPercentile,...this.state.percentiles.slice(index+1)];this.setState({percentiles:percentiles},this._onSubmit)},onRemove:()=>{const percentiles=1===this.state.percentiles.length?this.state.percentiles:[...this.state.percentiles.slice(0,index),...this.state.percentiles.slice(index+1)];this.setState({percentiles:percentiles},this._onSubmit)},showDeleteButton:this.state.percentiles.length>1}),compressed:!0}))});return external_kbnSharedDeps_React_default.a.createElement("div",null,rows)}}const interpolateTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.ordinalDataMapping.interpolateTitle",{defaultMessage:"Interpolate between min and max"}),percentilesTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.ordinalDataMapping.percentilesTitle",{defaultMessage:"Use percentiles"}),DATA_MAPPING_OPTIONS=[{value:constants.DATA_MAPPING_FUNCTION.INTERPOLATE,inputDisplay:interpolateTitle,dropdownDisplay:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("strong",null,interpolateTitle),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",{className:"euiTextColor--subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.styles.ordinalDataMapping.interpolateDescription",defaultMessage:"Interpolate values from the data domain to the style on a linear scale"}))))},{value:constants.DATA_MAPPING_FUNCTION.PERCENTILES,inputDisplay:percentilesTitle,dropdownDisplay:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("strong",null,percentilesTitle),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",{className:"euiTextColor--subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.styles.ordinalDataMapping.percentilesDescription",defaultMessage:"Divide style into bands that map to values"}))))}];function OrdinalDataMappingPopover(props){function onIsEnabledChange(event){props.onChange({fieldMetaOptions:{...props.fieldMetaOptions,isEnabled:event.target.checked}})}function onSigmaChange(event){props.onChange({fieldMetaOptions:{...props.fieldMetaOptions,sigma:parseInt(event.currentTarget.value,10)}})}const dataMappingOptions=DATA_MAPPING_OPTIONS.filter(option=>props.supportedDataMappingFunctions.includes(option.value));return external_kbnSharedDeps_React_default.a.createElement(data_mapping_popover_DataMappingPopover,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.ordinalDataMapping.dataMappingLabel",{defaultMessage:"Fitting"}),helpText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.ordinalDataMapping.dataMappingTooltipContent",{defaultMessage:"Fit values from the data domain to the style"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSuperSelect,{options:dataMappingOptions,valueOfSelected:props.dataMappingFunction,onChange:function(value){const updatedOptions=value===constants.DATA_MAPPING_FUNCTION.PERCENTILES?{dataMappingFunction:value,fieldMetaOptions:{...props.fieldMetaOptions,isEnabled:!0,percentiles:props.fieldMetaOptions.percentiles?props.fieldMetaOptions.percentiles:constants.DEFAULT_PERCENTILES}}:{dataMappingFunction:value};props.onChange(updatedOptions)},itemLayoutAlign:"top",hasDividers:!0})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHorizontalRule,null),props.dataMappingFunction===constants.DATA_MAPPING_FUNCTION.PERCENTILES?external_kbnSharedDeps_React_default.a.createElement(percentiles_form_PercentilesForm,{initialPercentiles:props.fieldMetaOptions.percentiles?props.fieldMetaOptions.percentiles:constants.DEFAULT_PERCENTILES,onChange:function(percentiles){props.onChange({fieldMetaOptions:{...props.fieldMetaOptions,percentiles:external_kbnSharedDeps_Lodash_default.a.uniq(percentiles.sort())}})}}):function(){const sigmaInput=props.fieldMetaOptions.isEnabled?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{anchorClassName:"eui-alignMiddle",content:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.ordinalDataMapping.sigmaTooltipContent",{defaultMessage:"To de-emphasize outliers, set sigma to a smaller value. Smaller sigmas move the min and max closer to the median."})},external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.ordinalDataMapping.sigmaLabel",{defaultMessage:"Sigma"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"questionInCircle",color:"subdued"}))),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiRange,{min:1,max:5,step:.25,value:external_kbnSharedDeps_Lodash_default.a.get(props.fieldMetaOptions,"sigma",vector_style_defaults.b),onChange:onSigmaChange,showTicks:!0,tickInterval:1,compressed:!0})):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{display:"columnCompressedSwitch"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.ordinalDataMapping.isEnabledSwitchLabel",{defaultMessage:"Get min and max from data set"}),checked:props.fieldMetaOptions.isEnabled,onChange:onIsEnabledChange,compressed:!0,disabled:props.switchDisabled})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.styles.ordinalDataMapping.isEnabled.server",defaultMessage:"Calculate min and max from the entire data set. Styling is consistent when users pan, zoom, and filter. To minimize outliers, min and max are clamped to the standard deviation (sigma) from the medium."})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.styles.ordinalDataMapping.isEnabled.local",defaultMessage:"When disabled, calculate min and max from local data and recalculate min and max when the data changes. Styling may be inconsistent when users pan, zoom, and filter."})))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"questionInCircle",color:"subdued"})))),sigmaInput)}()))}function dynamic_style_property_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class dynamic_style_property_DynamicStyleProperty extends style_property_AbstractStyleProperty{constructor(options,styleName,field,vectorLayer,getFieldFormatter){super(options,styleName),dynamic_style_property_defineProperty(this,"_field",void 0),dynamic_style_property_defineProperty(this,"_layer",void 0),dynamic_style_property_defineProperty(this,"_getFieldFormatter",void 0),dynamic_style_property_defineProperty(this,"getValueSuggestions",async query=>null===this._field?[]:await this._field.getSource().getValueSuggestions(this._field,query)),this._field=field,this._layer=vectorLayer,this._getFieldFormatter=getFieldFormatter}_getStyleMetaDataRequestId(fieldName){if(this.getFieldOrigin()===constants.FIELD_ORIGIN.SOURCE)return constants.SOURCE_META_DATA_REQUEST_ID;const join=this._layer.getValidJoins().find(validJoin=>!!validJoin.getRightJoinSource().getFieldByName(fieldName));return join?join.getSourceMetaDataRequestId():null}getRangeFieldMeta(){const styleMeta=this._layer.getStyle().getStyleMeta(),fieldName=this.getFieldName(),rangeFieldMetaFromLocalFeatures=styleMeta.getRangeFieldMetaDescriptor(fieldName);if(!this.isFieldMetaEnabled())return rangeFieldMetaFromLocalFeatures;const dataRequestId=this._getStyleMetaDataRequestId(fieldName);if(!dataRequestId)return rangeFieldMetaFromLocalFeatures;const styleMetaDataRequest=this._layer.getDataRequest(dataRequestId);if(!styleMetaDataRequest||!styleMetaDataRequest.hasData())return rangeFieldMetaFromLocalFeatures;const data=styleMetaDataRequest.getData(),rangeFieldMeta=this._pluckOrdinalStyleMetaFromFieldMetaData(data);return rangeFieldMeta||rangeFieldMetaFromLocalFeatures}getPercentilesFieldMeta(){if(!this._field)return null;const dataRequestId=this._getStyleMetaDataRequestId(this.getFieldName());if(!dataRequestId)return null;const styleMetaDataRequest=this._layer.getDataRequest(dataRequestId);if(!styleMetaDataRequest||!styleMetaDataRequest.hasData())return null;return function(percentiles){if(void 0===percentiles||void 0===percentiles.values)return null;const percentilesFieldMeta=Object.keys(percentiles.values).map(key=>({percentile:key,value:percentiles.values[key]}));return external_kbnSharedDeps_Lodash_default.a.uniqBy(percentilesFieldMeta,"value")}(styleMetaDataRequest.getData()[this._field.getRootName()+"_percentiles"])}getCategoryFieldMeta(){const styleMeta=this._layer.getStyle().getStyleMeta(),fieldName=this.getFieldName(),categoryFieldMetaFromLocalFeatures=styleMeta.getCategoryFieldMetaDescriptor(fieldName);if(!this.isFieldMetaEnabled())return categoryFieldMetaFromLocalFeatures;const dataRequestId=this._getStyleMetaDataRequestId(fieldName);if(!dataRequestId)return categoryFieldMetaFromLocalFeatures;const styleMetaDataRequest=this._layer.getDataRequest(dataRequestId);if(!styleMetaDataRequest||!styleMetaDataRequest.hasData())return categoryFieldMetaFromLocalFeatures;const data=styleMetaDataRequest.getData(),rangeFieldMeta=this._pluckCategoricalStyleMetaFromFieldMetaData(data);return rangeFieldMeta||categoryFieldMetaFromLocalFeatures}getField(){return this._field}getFieldName(){return this._field?this._field.getName():""}isDynamic(){return!0}isOrdinal(){return!0}isCategorical(){return!1}getNumberOfCategories(){return 0}getStyleMetaHash(){const fieldMetaOptions=this.getFieldMetaOptions(),parts=[fieldMetaOptions.isEnabled.toString()];if(this.isOrdinal()){const dataMappingFunction=this.getDataMappingFunction();parts.push(dataMappingFunction),dataMappingFunction===constants.DATA_MAPPING_FUNCTION.PERCENTILES&&fieldMetaOptions.percentiles&&parts.push(fieldMetaOptions.percentiles.join(""))}else this.isCategorical()&&parts.push(this.getNumberOfCategories().toString());return parts.join("")}isComplete(){return!!this._field}getFieldOrigin(){return this._field?this._field.getOrigin():null}isFieldMetaEnabled(){const fieldMetaOptions=this.getFieldMetaOptions();return this.supportsFieldMeta()&&external_kbnSharedDeps_Lodash_default.a.get(fieldMetaOptions,"isEnabled",!0)}supportsFieldMeta(){return this.isComplete()&&!!this._field&&this._field.supportsFieldMeta()}async getFieldMetaRequest(){if(!this._field)return null;if(this.isOrdinal())return this.getDataMappingFunction()===constants.DATA_MAPPING_FUNCTION.INTERPOLATE?this._field.getExtendedStatsFieldMetaRequest():this._field.getPercentilesFieldMetaRequest(void 0!==this.getFieldMetaOptions().percentiles?this.getFieldMetaOptions().percentiles:constants.DEFAULT_PERCENTILES);if(this.isCategorical()){const numberOfCategories=this.getNumberOfCategories();return this._field.getCategoricalFieldMetaRequest(numberOfCategories)}return null}supportsMbFeatureState(){return!!this._field&&this._field.canReadFromGeoJson()}getMbLookupFunction(){return this.supportsMbFeatureState()?constants.MB_LOOKUP_FUNCTION.FEATURE_STATE:constants.MB_LOOKUP_FUNCTION.GET}getFieldMetaOptions(){return external_kbnSharedDeps_Lodash_default.a.get(this.getOptions(),"fieldMetaOptions",{isEnabled:!0})}getDataMappingFunction(){return"dataMappingFunction"in this._options?this._options.dataMappingFunction:constants.DATA_MAPPING_FUNCTION.INTERPOLATE}pluckOrdinalStyleMetaFromFeatures(features){if(!this.isOrdinal())return null;const name=this.getFieldName();let min=1/0,max=-1/0;for(let i=0;i<features.length;i++){const feature=features[i],newValue=parseFloat(feature.properties?feature.properties[name]:null);isNaN(newValue)||(min=Math.min(min,newValue),max=Math.max(max,newValue))}return min===1/0||max===-1/0?null:{min:min,max:max,delta:max-min}}pluckCategoricalStyleMetaFromFeatures(features){const size=this.getNumberOfCategories();if(!this.isCategorical()||size<=0)return null;const counts=new Map;for(let i=0;i<features.length;i++){const feature=features[i],term=feature.properties?feature.properties[this.getFieldName()]:void 0;void 0!==typeof term&&(counts.has(term)?counts.set(term,counts.get(term)+1):counts.set(term,1))}const ordered=[];for(const[key,value]of counts)ordered.push({key:key,count:value});ordered.sort((a,b)=>b.count-a.count);return{categories:ordered.slice(0,size)}}_pluckOrdinalStyleMetaFromFieldMetaData(styleMetaData){if(!this.isOrdinal()||!this._field)return null;const stats=styleMetaData[this._field.getRootName()+"_range"];if(!stats||!("avg"in stats))return null;const sigma=external_kbnSharedDeps_Lodash_default.a.get(this.getFieldMetaOptions(),"sigma",vector_style_defaults.b),stdLowerBounds=stats.avg-stats.std_deviation*sigma,stdUpperBounds=stats.avg+stats.std_deviation*sigma,min=Math.max(stats.min,stdLowerBounds),max=Math.min(stats.max,stdUpperBounds);return{min:min,max:max,delta:max-min,isMinOutsideStdRange:stats.min<stdLowerBounds,isMaxOutsideStdRange:stats.max>stdUpperBounds}}_pluckCategoricalStyleMetaFromFieldMetaData(styleMetaData){if(!this.isCategorical()||!this._field)return null;const fieldMeta=styleMetaData[this._field.getRootName()+"_terms"];return fieldMeta&&"buckets"in fieldMeta?{categories:fieldMeta.buckets.map(bucket=>({key:bucket.key,count:bucket.doc_count}))}:null}formatField(value){if(this.getField()){const fieldName=this.getFieldName(),fieldFormatter=this._getFieldFormatter(fieldName);return fieldFormatter?fieldFormatter(value):super.formatField(value)}return super.formatField(value)}_getSupportedDataMappingFunctions(){return[constants.DATA_MAPPING_FUNCTION.INTERPOLATE]}renderDataMappingPopover(onChange){if(!this.supportsFieldMeta())return null;const switchDisabled=!!this._field&&!this._field.canReadFromGeoJson();return this.isCategorical()?external_kbnSharedDeps_React_default.a.createElement(CategoricalDataMappingPopover,{fieldMetaOptions:this.getFieldMetaOptions(),onChange:onChange,switchDisabled:switchDisabled}):external_kbnSharedDeps_React_default.a.createElement(OrdinalDataMappingPopover,{fieldMetaOptions:this.getFieldMetaOptions(),styleName:this.getStyleName(),onChange:onChange,switchDisabled:switchDisabled,dataMappingFunction:this.getDataMappingFunction(),supportedDataMappingFunctions:this._getSupportedDataMappingFunctions()})}getMbPropertyName(){if(!this._field)return"";let targetName;return targetName=this.supportsMbFeatureState()?this._field.getName():this._field.canReadFromGeoJson()&&this._field.supportsAutoDomain()?Object(style_util.c)(this.getStyleName(),this._field.getName()):this._field.getName(),targetName}getMbPropertyValue(rawValue){return this.supportsMbFeatureState()?getNumericalMbFeatureStateValue(rawValue):rawValue}enrichGeoJsonAndMbFeatureState(featureCollection,mbMap,mbSourceId){const supportsFeatureState=this.supportsMbFeatureState(),featureIdentifier={source:mbSourceId,id:void 0},featureState={},targetMbName=this.getMbPropertyName();for(let i=0;i<featureCollection.features.length;i++){const feature=featureCollection.features[i],rawValue=feature.properties?feature.properties[this.getFieldName()]:void 0,targetMbValue=this.getMbPropertyValue(rawValue);supportsFeatureState?(featureState[targetMbName]=targetMbValue,featureIdentifier.id=feature.id,mbMap.setFeatureState(featureIdentifier,featureState)):feature.properties&&(feature.properties[targetMbName]=targetMbValue)}return supportsFeatureState}}function getNumericalMbFeatureStateValue(value){if("string"!=typeof value)return value;const valueAsFloat=parseFloat(value);return isNaN(valueAsFloat)?null:valueAsFloat}dynamic_style_property_defineProperty(dynamic_style_property_DynamicStyleProperty,"type",constants.STYLE_TYPE.DYNAMIC);var ranged_style_legend_row=__webpack_require__(197);function ordinal_legend_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class ordinal_legend_OrdinalLegend extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),ordinal_legend_defineProperty(this,"_isMounted",!1),ordinal_legend_defineProperty(this,"state",{label:""})}componentDidMount(){this._isMounted=!0,this._loadLabel()}componentDidUpdate(){this._loadLabel()}componentWillUnmount(){this._isMounted=!1}async _loadLabel(){const field=this.props.style.getField();if(!field)return;const label=await field.getLabel();this._isMounted&&!external_kbnSharedDeps_Lodash_default.a.isEqual(this.state.label,label)&&this.setState({label:label})}_formatValue(value){return""===value?value:this.props.style.formatField(value)}_renderRangeLegendHeader(){let icons;if(this.props.style.getStyleName()===constants.VECTOR_STYLES.LINE_WIDTH)icons=function(){const defaultStyle={stroke:"grey",fill:"none",width:"12px"};return[external_kbnSharedDeps_React_default.a.createElement(CircleIcon,{style:{...defaultStyle,strokeWidth:"1px"}}),external_kbnSharedDeps_React_default.a.createElement(CircleIcon,{style:{...defaultStyle,strokeWidth:"2px"}}),external_kbnSharedDeps_React_default.a.createElement(CircleIcon,{style:{...defaultStyle,strokeWidth:"3px"}})]}();else{if(this.props.style.getStyleName()!==constants.VECTOR_STYLES.ICON_SIZE)return null;icons=function(){const defaultStyle={stroke:"grey",fill:"grey"};return[external_kbnSharedDeps_React_default.a.createElement(CircleIcon,{style:{...defaultStyle,width:"4px"}}),external_kbnSharedDeps_React_default.a.createElement(CircleIcon,{style:{...defaultStyle,width:"8px"}}),external_kbnSharedDeps_React_default.a.createElement(CircleIcon,{style:{...defaultStyle,width:"12px"}})]}()}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"xs",justifyContent:"spaceBetween",alignItems:"center"},icons.map((icon,index)=>{let spacer;return index===icons.length-1||(spacer=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHorizontalRule,{margin:"xs"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,{key:index},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},icon),spacer)}))}render(){const header=this._renderRangeLegendHeader();if(!header)return null;const fieldMeta=this.props.style.getRangeFieldMeta();let minLabel="",maxLabel="";if(fieldMeta){const min=this._formatValue(external_kbnSharedDeps_Lodash_default.a.get(fieldMeta,"min",""));minLabel=this.props.style.isFieldMetaEnabled()&&fieldMeta.isMinOutsideStdRange?"< "+min:min;const max=this._formatValue(external_kbnSharedDeps_Lodash_default.a.get(fieldMeta,"max",""));maxLabel=this.props.style.isFieldMetaEnabled()&&fieldMeta.isMaxOutsideStdRange?"> "+max:max}return external_kbnSharedDeps_React_default.a.createElement(ranged_style_legend_row.a,{header:header,minLabel:minLabel,maxLabel:maxLabel,propertyLabel:this.props.style.getDisplayStyleName(),fieldLabel:this.state.label})}}class dynamic_size_property_DynamicSizeProperty extends dynamic_style_property_DynamicStyleProperty{constructor(options,styleName,field,vectorLayer,getFieldFormatter,isSymbolizedAsIcon){super(options,styleName,field,vectorLayer,getFieldFormatter),function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(this,"_isSymbolizedAsIcon",void 0),this._isSymbolizedAsIcon=isSymbolizedAsIcon}supportsMbFeatureState(){return(this.getStyleName()!==constants.VECTOR_STYLES.ICON_SIZE||!this._isSymbolizedAsIcon)&&(this.getStyleName()!==constants.VECTOR_STYLES.LABEL_SIZE&&super.supportsMbFeatureState())}syncHaloWidthWithMb(mbLayerId,mbMap){const haloWidth=this.getMbSizeExpression();mbMap.setPaintProperty(mbLayerId,"icon-halo-width",haloWidth)}getIconPixelSize(){return this._options.maxSize>=HALF_LARGE_MAKI_ICON_SIZE?15:11}syncIconSizeWithMb(symbolLayerId,mbMap){const rangeFieldMeta=this.getRangeFieldMeta();if(this._isSizeDynamicConfigComplete()&&rangeFieldMeta){const halfIconPixels=this.getIconPixelSize()/2,targetName=this.getFieldName();mbMap.setLayoutProperty(symbolLayerId,"icon-size",["interpolate",["linear"],Object(style_util.g)({minValue:rangeFieldMeta.min,maxValue:rangeFieldMeta.max,fallback:0,lookupFunction:constants.MB_LOOKUP_FUNCTION.GET,fieldName:targetName}),rangeFieldMeta.min,this._options.minSize/halfIconPixels,rangeFieldMeta.max,this._options.maxSize/halfIconPixels])}else mbMap.setLayoutProperty(symbolLayerId,"icon-size",null)}syncCircleStrokeWidthWithMb(mbLayerId,mbMap){const lineWidth=this.getMbSizeExpression();mbMap.setPaintProperty(mbLayerId,"circle-stroke-width",lineWidth)}syncCircleRadiusWithMb(mbLayerId,mbMap){const circleRadius=this.getMbSizeExpression();mbMap.setPaintProperty(mbLayerId,"circle-radius",circleRadius)}syncLineWidthWithMb(mbLayerId,mbMap){const lineWidth=this.getMbSizeExpression();mbMap.setPaintProperty(mbLayerId,"line-width",lineWidth)}syncLabelSizeWithMb(mbLayerId,mbMap){const lineWidth=this.getMbSizeExpression();mbMap.setLayoutProperty(mbLayerId,"text-size",lineWidth)}getMbSizeExpression(){const rangeFieldMeta=this.getRangeFieldMeta();return this._isSizeDynamicConfigComplete()&&rangeFieldMeta?this._getMbDataDrivenSize({targetName:this.getFieldName(),minSize:this._options.minSize,maxSize:this._options.maxSize,minValue:rangeFieldMeta.min,maxValue:rangeFieldMeta.max}):null}_getMbDataDrivenSize({targetName:targetName,minSize:minSize,maxSize:maxSize,minValue:minValue,maxValue:maxValue}){const stops=minValue===maxValue?[maxValue,maxSize]:[minValue,minSize,maxValue,maxSize];return["interpolate",["linear"],Object(style_util.g)({lookupFunction:this.getMbLookupFunction(),maxValue:maxValue,minValue:minValue,fieldName:targetName,fallback:0}),...stops]}_isSizeDynamicConfigComplete(){return this._field&&this._field.isValid()&&external_kbnSharedDeps_Lodash_default.a.has(this._options,"minSize")&&external_kbnSharedDeps_Lodash_default.a.has(this._options,"maxSize")}renderLegendDetailRow(){return external_kbnSharedDeps_React_default.a.createElement(ordinal_legend_OrdinalLegend,{style:this})}}class static_size_property_StaticSizeProperty extends static_style_property_StaticStyleProperty{constructor(options,styleName){"number"!=typeof options.size?super({size:1},styleName):super(options,styleName)}syncHaloWidthWithMb(mbLayerId,mbMap){mbMap.setPaintProperty(mbLayerId,"icon-halo-width",this._options.size)}getIconPixelSize(){return this._options.size>=HALF_LARGE_MAKI_ICON_SIZE?15:11}syncIconSizeWithMb(symbolLayerId,mbMap){const halfIconPixels=this.getIconPixelSize()/2;mbMap.setLayoutProperty(symbolLayerId,"icon-size",this._options.size/halfIconPixels)}syncCircleStrokeWidthWithMb(mbLayerId,mbMap,hasNoRadius){hasNoRadius?mbMap.setPaintProperty(mbLayerId,"circle-stroke-width",0):mbMap.setPaintProperty(mbLayerId,"circle-stroke-width",this._options.size)}syncCircleRadiusWithMb(mbLayerId,mbMap){mbMap.setPaintProperty(mbLayerId,"circle-radius",this._options.size)}syncLineWidthWithMb(mbLayerId,mbMap){mbMap.setPaintProperty(mbLayerId,"line-width",this._options.size)}syncLabelSizeWithMb(mbLayerId,mbMap){mbMap.setLayoutProperty(mbLayerId,"text-size",this._options.size)}}class static_color_property_StaticColorProperty extends static_style_property_StaticStyleProperty{syncCircleColorWithMb(mbLayerId,mbMap,alpha){mbMap.setPaintProperty(mbLayerId,"circle-color",this._options.color),mbMap.setPaintProperty(mbLayerId,"circle-opacity",alpha)}syncFillColorWithMb(mbLayerId,mbMap,alpha){mbMap.setPaintProperty(mbLayerId,"fill-color",this._options.color),mbMap.setPaintProperty(mbLayerId,"fill-opacity",alpha)}syncIconColorWithMb(mbLayerId,mbMap){mbMap.setPaintProperty(mbLayerId,"icon-color",this._options.color)}syncHaloBorderColorWithMb(mbLayerId,mbMap){mbMap.setPaintProperty(mbLayerId,"icon-halo-color",this._options.color)}syncLineColorWithMb(mbLayerId,mbMap,alpha){mbMap.setPaintProperty(mbLayerId,"line-color",this._options.color),mbMap.setPaintProperty(mbLayerId,"line-opacity",alpha)}syncCircleStrokeWithMb(mbLayerId,mbMap,alpha){mbMap.setPaintProperty(mbLayerId,"circle-stroke-color",this._options.color),mbMap.setPaintProperty(mbLayerId,"circle-stroke-opacity",alpha)}syncLabelColorWithMb(mbLayerId,mbMap,alpha){mbMap.setPaintProperty(mbLayerId,"text-color",this._options.color),mbMap.setPaintProperty(mbLayerId,"text-opacity",alpha)}syncLabelBorderColorWithMb(mbLayerId,mbMap){mbMap.setPaintProperty(mbLayerId,"text-halo-color",this._options.color)}}function Category({styleName:styleName,label:label,color:color,isLinesOnly:isLinesOnly,isPointsOnly:isPointsOnly,symbolId:symbolId}){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{direction:"row",gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{className:"mapLegendIconPreview",grow:!1},styleName===constants.VECTOR_STYLES.LABEL_COLOR?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs",style:{color:color}},"Tx"):external_kbnSharedDeps_React_default.a.createElement(VectorIcon,{fillColor:styleName===constants.VECTOR_STYLES.FILL_COLOR?color:"none",isPointsOnly:isPointsOnly,isLinesOnly:isLinesOnly,strokeColor:color,symbolId:symbolId})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs"},label)))}function breaked_legend_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class breaked_legend_BreakedLegend extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),breaked_legend_defineProperty(this,"_isMounted",!1),breaked_legend_defineProperty(this,"state",{label:""})}componentDidMount(){this._isMounted=!0,this._loadLabel()}componentDidUpdate(){this._loadLabel()}componentWillUnmount(){this._isMounted=!1}async _loadLabel(){const field=this.props.style.getField();if(!field)return;const label=await field.getLabel();this._isMounted&&!external_kbnSharedDeps_Lodash_default.a.isEqual(this.state.label,label)&&this.setState({label:label})}render(){if(""===this.state.label)return null;const categories=this.props.breaks.map((brk,index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{key:index},external_kbnSharedDeps_React_default.a.createElement(Category,{styleName:this.props.style.getStyleName(),label:brk.label,color:brk.color,isLinesOnly:this.props.isLinesOnly,isPointsOnly:this.props.isPointsOnly,symbolId:brk.symbolId})));return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"xs",justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"top",title:this.props.style.getDisplayStyleName(),content:this.state.label},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{className:"eui-textTruncate",size:"xs",style:{maxWidth:"180px"}},external_kbnSharedDeps_React_default.a.createElement("small",null,external_kbnSharedDeps_React_default.a.createElement("strong",null,this.state.label)))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{direction:"column",gutterSize:"none"},categories))}}var ordinal_suffix=__webpack_require__(198);const UP_TO=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.legend.upto",{defaultMessage:"up to"}),EMPTY_STOPS={stops:[],defaultColor:null};class dynamic_color_property_DynamicColorProperty extends dynamic_style_property_DynamicStyleProperty{constructor(options,styleName,field,vectorLayer,getFieldFormatter,chartsPaletteServiceGetColor){super(options,styleName,field,vectorLayer,getFieldFormatter),function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(this,"_chartsPaletteServiceGetColor",void 0),this._chartsPaletteServiceGetColor=chartsPaletteServiceGetColor}syncCircleColorWithMb(mbLayerId,mbMap,alpha){const color=this._getMbColor();mbMap.setPaintProperty(mbLayerId,"circle-color",color),mbMap.setPaintProperty(mbLayerId,"circle-opacity",alpha)}syncIconColorWithMb(mbLayerId,mbMap){const color=this._getMbColor();mbMap.setPaintProperty(mbLayerId,"icon-color",color)}syncHaloBorderColorWithMb(mbLayerId,mbMap){const color=this._getMbColor();mbMap.setPaintProperty(mbLayerId,"icon-halo-color",color)}syncCircleStrokeWithMb(pointLayerId,mbMap,alpha){const color=this._getMbColor();mbMap.setPaintProperty(pointLayerId,"circle-stroke-color",color),mbMap.setPaintProperty(pointLayerId,"circle-stroke-opacity",alpha)}syncFillColorWithMb(mbLayerId,mbMap,alpha){const color=this._getMbColor();mbMap.setPaintProperty(mbLayerId,"fill-color",color),mbMap.setPaintProperty(mbLayerId,"fill-opacity",alpha)}syncLineColorWithMb(mbLayerId,mbMap,alpha){const color=this._getMbColor();mbMap.setPaintProperty(mbLayerId,"line-color",color),mbMap.setPaintProperty(mbLayerId,"line-opacity",alpha)}syncLabelColorWithMb(mbLayerId,mbMap,alpha){const color=this._getMbColor();mbMap.setPaintProperty(mbLayerId,"text-color",color),mbMap.setPaintProperty(mbLayerId,"text-opacity",alpha)}syncLabelBorderColorWithMb(mbLayerId,mbMap){const color=this._getMbColor();mbMap.setPaintProperty(mbLayerId,"text-halo-color",color)}supportsFieldMeta(){return!!(this.isComplete()&&this._field&&this._field.supportsFieldMeta())&&(this.isCategorical()&&!this._options.useCustomColorPalette||this.isOrdinal()&&!this._options.useCustomColorRamp)}isOrdinal(){return void 0===this._options.type||this._options.type===constants.COLOR_MAP_TYPE.ORDINAL}isCategorical(){return this._options.type===constants.COLOR_MAP_TYPE.CATEGORICAL}getNumberOfCategories(){if(!this._options.colorCategory)return 0;const colors=Object(color_palettes.f)(this._options.colorCategory);return colors?colors.length:0}_getSupportedDataMappingFunctions(){return[constants.DATA_MAPPING_FUNCTION.INTERPOLATE,constants.DATA_MAPPING_FUNCTION.PERCENTILES]}_getMbColor(){return this.getFieldName()?this.isCategorical()?this._getCategoricalColorMbExpression():this._getOrdinalColorMbExpression():null}_getOrdinalColorMbExpression(){const targetName=this.getFieldName();if(this._options.useCustomColorRamp){if(!this._options.customColorRamp||!this._options.customColorRamp.length)return null;const colorStops=this._options.customColorRamp.reduce((accumulatedStops,nextStop)=>[...accumulatedStops,nextStop.stop,nextStop.color],[]);return["step",Object(style_util.g)({minValue:colorStops[0],maxValue:colorStops[colorStops.length-2],lookupFunction:this.getMbLookupFunction(),fallback:colorStops[0]-1,fieldName:targetName}),"rgba(0,0,0,0)",...colorStops]}if(this.getDataMappingFunction()===constants.DATA_MAPPING_FUNCTION.PERCENTILES){const percentilesFieldMeta=this.getPercentilesFieldMeta();if(!percentilesFieldMeta||!percentilesFieldMeta.length)return null;const colorStops=Object(color_palettes.j)(this._options.color?this._options.color:null,percentilesFieldMeta);return colorStops?["step",Object(style_util.g)({minValue:colorStops[0],maxValue:colorStops[colorStops.length-2],lookupFunction:this.getMbLookupFunction(),fallback:colorStops[0]-1,fieldName:targetName}),"rgba(0,0,0,0)",...colorStops]:null}const rangeFieldMeta=this.getRangeFieldMeta();if(!rangeFieldMeta)return null;const colorStops=Object(color_palettes.i)(this._options.color?this._options.color:null,rangeFieldMeta.min,rangeFieldMeta.max);if(!colorStops)return null;const lessThanFirstStopValue=rangeFieldMeta.min-1;return["interpolate",["linear"],Object(style_util.g)({minValue:rangeFieldMeta.min,maxValue:rangeFieldMeta.max,lookupFunction:this.getMbLookupFunction(),fallback:lessThanFirstStopValue,fieldName:targetName}),lessThanFirstStopValue,"rgba(0,0,0,0)",...colorStops]}_getCustomRampColorStops(){return this._options.customColorRamp?this._options.customColorRamp.reduce((accumulatedStops,nextStop)=>[...accumulatedStops,nextStop.stop,nextStop.color],[]):[]}_getColorPaletteStops(){if(this._options.useCustomColorPalette&&this._options.customColorPalette){if(isCategoricalStopsInvalid(this._options.customColorPalette))return EMPTY_STOPS;const stops=[];for(let i=1;i<this._options.customColorPalette.length;i++){const config=this._options.customColorPalette[i];stops.push({stop:config.stop,color:config.color})}return{defaultColor:this._options.customColorPalette[0].color,stops:stops}}const fieldMeta=this.getCategoryFieldMeta();if(!fieldMeta||!fieldMeta.categories)return EMPTY_STOPS;const colors=this._options.colorCategory?Object(color_palettes.f)(this._options.colorCategory):null;if(!colors)return EMPTY_STOPS;const maxLength=Math.min(colors.length,fieldMeta.categories.length+1),stops=[];for(let i=0;i<maxLength-1;i++)stops.push({stop:fieldMeta.categories[i].key,color:this._chartsPaletteServiceGetColor?this._chartsPaletteServiceGetColor(fieldMeta.categories[i].key):colors[i]});return{stops:stops,defaultColor:this._chartsPaletteServiceGetColor?this._chartsPaletteServiceGetColor("__other__"):colors[maxLength-1]}}_getCategoricalColorMbExpression(){if(this._options.useCustomColorPalette&&(!this._options.customColorPalette||!this._options.customColorPalette.length))return null;const{stops:stops,defaultColor:defaultColor}=this._getColorPaletteStops();if(stops.length<1)return null;if(!defaultColor)return null;const mbStops=[];for(let i=0;i<stops.length;i++){const stop=stops[i],branch=""+stop.stop;mbStops.push(branch),mbStops.push(stop.color)}return mbStops.push(defaultColor),["match",["to-string",["get",this.getFieldName()]],...mbStops]}_getOrdinalBreaks(symbolId){let colorStops=null,getValuePrefix=null;if(this._options.useCustomColorRamp){if(!this._options.customColorRamp)return[];colorStops=this._getCustomRampColorStops()}else if(this.getDataMappingFunction()===constants.DATA_MAPPING_FUNCTION.PERCENTILES){const percentilesFieldMeta=this.getPercentilesFieldMeta();if(!percentilesFieldMeta)return[];colorStops=Object(color_palettes.j)(this._options.color?this._options.color:null,percentilesFieldMeta),getValuePrefix=function(i,isNext){const percentile=isNext?parseFloat(percentilesFieldMeta[i/2+1].percentile):parseFloat(percentilesFieldMeta[i/2].percentile);return`${percentile}${Object(ordinal_suffix.a)(percentile)}: `}}else{const rangeFieldMeta=this.getRangeFieldMeta();if(!rangeFieldMeta||!this._options.color)return[];if(0===rangeFieldMeta.delta){const colors=Object(color_palettes.f)(this._options.color);return[{color:colors[colors.length-1],label:this.formatField(Object(style_util.b)(rangeFieldMeta.max)),symbolId:symbolId}]}colorStops=Object(color_palettes.i)(this._options.color?this._options.color:null,rangeFieldMeta.min,rangeFieldMeta.max)}if(!colorStops||colorStops.length<=2)return[];const breaks=[],lastStopIndex=colorStops.length-2;for(let i=0;i<colorStops.length;i+=2){const hasNext=i<lastStopIndex,stopValue=colorStops[i],formattedStopValue=this.formatField(Object(style_util.b)(stopValue)),color=colorStops[i+1],valuePrefix=getValuePrefix?getValuePrefix(i,!1):"";let label="";if(hasNext){const nextStopValue=colorStops[i+2],formattedNextStopValue=this.formatField(Object(style_util.b)(nextStopValue)),nextValuePrefix=getValuePrefix?getValuePrefix(i,!0):"";if(0===i)label=`< ${nextValuePrefix}${formattedNextStopValue}`;else{label=`${`${valuePrefix}${formattedStopValue}`} ${UP_TO} ${`${nextValuePrefix}${formattedNextStopValue}`}`}}else label=`>= ${valuePrefix}${formattedStopValue}`;breaks.push({color:color,label:label,symbolId:symbolId})}return breaks}_getCategoricalBreaks(symbolId){const breaks=[],{stops:stops,defaultColor:defaultColor}=this._getColorPaletteStops();return stops.forEach(({stop:stop,color:color})=>{null!==stop&&null!=color&&breaks.push({color:color,symbolId:symbolId,label:this.formatField(stop)})}),defaultColor&&breaks.push({color:defaultColor,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextColor,{color:"secondary"},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.styles.categorical.otherCategoryLabel",{defaultMessage:"Other"})),symbolId:symbolId}),breaks}renderLegendDetailRow({isPointsOnly:isPointsOnly,isLinesOnly:isLinesOnly,symbolId:symbolId}){let breaks=[];return this.isOrdinal()?breaks=this._getOrdinalBreaks(symbolId):this.isCategorical()&&(breaks=this._getCategoricalBreaks(symbolId)),external_kbnSharedDeps_React_default.a.createElement(breaked_legend_BreakedLegend,{style:this,breaks:breaks,isPointsOnly:isPointsOnly,isLinesOnly:isLinesOnly})}}class static_orientation_property_StaticOrientationProperty extends static_style_property_StaticStyleProperty{constructor(options,styleName){"number"!=typeof options.orientation?super({orientation:0},styleName):super(options,styleName)}syncIconRotationWithMb(symbolLayerId,mbMap){mbMap.setLayoutProperty(symbolLayerId,"icon-rotate",this._options.orientation)}}class dynamic_orientation_property_DynamicOrientationProperty extends dynamic_style_property_DynamicStyleProperty{syncIconRotationWithMb(symbolLayerId,mbMap){if(this._field&&this._field.isValid()){const targetName=this.getMbPropertyName();mbMap.setLayoutProperty(symbolLayerId,"icon-rotate",["coalesce",[this.getMbLookupFunction(),targetName],0])}else mbMap.setLayoutProperty(symbolLayerId,"icon-rotate",0)}supportsFieldMeta(){return!1}supportsMbFeatureState(){return!1}getMbPropertyValue(rawValue){return getNumericalMbFeatureStateValue(rawValue)}}class static_text_property_StaticTextProperty extends static_style_property_StaticStyleProperty{isComplete(){return this.getOptions().value.length>0}syncTextFieldWithMb(mbLayerId,mbMap){this.getOptions().value.length?mbMap.setLayoutProperty(mbLayerId,"text-field",this.getOptions().value):void 0!==mbMap.getLayoutProperty(mbLayerId,"text-field")&&mbMap.setLayoutProperty(mbLayerId,"text-field",void 0)}}class dynamic_text_property_DynamicTextProperty extends dynamic_style_property_DynamicStyleProperty{syncTextFieldWithMb(mbLayerId,mbMap){if(this._field&&this._field.isValid()){const targetName=this.getMbPropertyName();mbMap.setLayoutProperty(mbLayerId,"text-field",["coalesce",[this.getMbLookupFunction(),targetName],""])}else void 0!==mbMap.getLayoutProperty(mbLayerId,"text-field")&&mbMap.setLayoutProperty(mbLayerId,"text-field",void 0)}isOrdinal(){return!1}supportsFieldMeta(){return!1}supportsMbFeatureState(){return!1}getMbPropertyValue(rawValue){return this.formatField(rawValue)}}class label_border_size_property_LabelBorderSizeProperty extends style_property_AbstractStyleProperty{constructor(options,styleName,labelSizeProperty){super(options,styleName),function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(this,"_labelSizeProperty",void 0),this._labelSizeProperty=labelSizeProperty}syncLabelBorderSizeWithMb(mbLayerId,mbMap){if(this.getOptions().size===constants.LABEL_BORDER_SIZES.NONE)return void mbMap.setPaintProperty(mbLayerId,"text-halo-width",0);const widthRatio=function(size){switch(size){case constants.LABEL_BORDER_SIZES.LARGE:return.2;case constants.LABEL_BORDER_SIZES.MEDIUM:return 1/8;default:return 1/16}}(this.getOptions().size);if(this._labelSizeProperty.isDynamic()&&this._labelSizeProperty.isComplete()){const labelSizeExpression=this._labelSizeProperty.getMbSizeExpression();if(labelSizeExpression)return void mbMap.setPaintProperty(mbLayerId,"text-halo-width",["max",["*",labelSizeExpression,widthRatio],1])}const labelSize=external_kbnSharedDeps_Lodash_default.a.get(this._labelSizeProperty.getOptions(),"size",vector_style_defaults.a),labelBorderSize=Math.max(labelSize*widthRatio,1);mbMap.setPaintProperty(mbLayerId,"text-halo-width",labelBorderSize)}}function extractColorFromStyleProperty(colorStyleProperty,defaultColor){if(!colorStyleProperty)return defaultColor;if(colorStyleProperty.type===constants.STYLE_TYPE.STATIC)return colorStyleProperty.options.color;const dynamicOptions=colorStyleProperty.options;if(!dynamicOptions.field||!dynamicOptions.field.name)return defaultColor;if(dynamicOptions.type===constants.COLOR_MAP_TYPE.CATEGORICAL){if(dynamicOptions.useCustomColorPalette)return dynamicOptions.customColorPalette&&dynamicOptions.customColorPalette.length?dynamicOptions.customColorPalette[0].color:defaultColor;if(!dynamicOptions.colorCategory)return defaultColor;const palette=Object(color_palettes.f)(dynamicOptions.colorCategory);return palette?palette[0]:defaultColor}{if(dynamicOptions.useCustomColorRamp){if(!dynamicOptions.customColorRamp||!dynamicOptions.customColorRamp.length)return defaultColor;const middleIndex=Math.floor((dynamicOptions.customColorRamp.length-1)/2);return dynamicOptions.customColorRamp[middleIndex].color}if(!dynamicOptions.color)return defaultColor;const centerColor=Object(color_palettes.g)(dynamicOptions.color);return centerColor||defaultColor}}class symbolize_as_property_SymbolizeAsProperty extends style_property_AbstractStyleProperty{constructor(...args){super(...args),function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(this,"isSymbolizedAsIcon",()=>this.getOptions().value===constants.SYMBOLIZE_AS_TYPES.ICON)}}class static_icon_property_StaticIconProperty extends static_style_property_StaticStyleProperty{syncIconWithMb(symbolLayerId,mbMap,iconPixelSize){const symbolId=this._options.value;mbMap.setLayoutProperty(symbolLayerId,"icon-anchor",getMakiSymbolAnchor(symbolId)),mbMap.setLayoutProperty(symbolLayerId,"icon-image",getMakiIconId(symbolId,iconPixelSize))}}class dynamic_icon_property_DynamicIconProperty extends dynamic_style_property_DynamicStyleProperty{isOrdinal(){return!1}isCategorical(){return!0}getNumberOfCategories(){return getIconPalette(this._options.iconPaletteId).length}syncIconWithMb(symbolLayerId,mbMap,iconPixelSize){this._isIconDynamicConfigComplete()?(mbMap.setLayoutProperty(symbolLayerId,"icon-image",this._getMbIconImageExpression(iconPixelSize)),mbMap.setLayoutProperty(symbolLayerId,"icon-anchor",this._getMbIconAnchorExpression())):(mbMap.setLayoutProperty(symbolLayerId,"icon-image",null),mbMap.setLayoutProperty(symbolLayerId,"icon-anchor",null))}_getPaletteStops(){if(this._options.useCustomIconMap&&this._options.customIconStops){const stops=[];for(let i=1;i<this._options.customIconStops.length;i++){const{stop:stop,icon:icon}=this._options.customIconStops[i];stops.push({stop:stop,style:icon})}return{fallbackSymbolId:this._options.customIconStops.length>0?this._options.customIconStops[0].icon:null,stops:stops}}return Object(style_util.a)({categories:external_kbnSharedDeps_Lodash_default.a.get(this.getCategoryFieldMeta(),"categories",[]),paletteValues:getIconPalette(this._options.iconPaletteId)})}_getMbIconImageExpression(iconPixelSize){const{stops:stops,fallbackSymbolId:fallbackSymbolId}=this._getPaletteStops();if(stops.length<1||!fallbackSymbolId)return null;const mbStops=[];return stops.forEach(({stop:stop,style:style})=>{mbStops.push(""+stop),mbStops.push(getMakiIconId(style,iconPixelSize))}),fallbackSymbolId&&mbStops.push(getMakiIconId(fallbackSymbolId,iconPixelSize)),["match",["to-string",["get",this.getFieldName()]],...mbStops]}_getMbIconAnchorExpression(){const{stops:stops,fallbackSymbolId:fallbackSymbolId}=this._getPaletteStops();if(stops.length<1||!fallbackSymbolId)return null;const mbStops=[];return stops.forEach(({stop:stop,style:style})=>{mbStops.push(""+stop),mbStops.push(getMakiSymbolAnchor(style))}),fallbackSymbolId&&mbStops.push(getMakiSymbolAnchor(fallbackSymbolId)),["match",["to-string",["get",this.getFieldName()]],...mbStops]}_isIconDynamicConfigComplete(){return this._field&&this._field.isValid()}renderLegendDetailRow({isPointsOnly:isPointsOnly,isLinesOnly:isLinesOnly}){const{stops:stops,fallbackSymbolId:fallbackSymbolId}=this._getPaletteStops(),breaks=[];return stops.forEach(({stop:stop,style:style})=>{stop&&breaks.push({color:"grey",label:this.formatField(stop),symbolId:style})}),fallbackSymbolId&&breaks.push({color:"grey",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextColor,{color:"secondary"},Object(style_util.e)()),symbolId:fallbackSymbolId}),external_kbnSharedDeps_React_default.a.createElement(breaked_legend_BreakedLegend,{style:this,breaks:breaks,isPointsOnly:isPointsOnly,isLinesOnly:isLinesOnly})}}function vector_style_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const POINTS=[constants.GEO_JSON_TYPE.POINT,constants.GEO_JSON_TYPE.MULTI_POINT],LINES=[constants.GEO_JSON_TYPE.LINE_STRING,constants.GEO_JSON_TYPE.MULTI_LINE_STRING],POLYGONS=[constants.GEO_JSON_TYPE.POLYGON,constants.GEO_JSON_TYPE.MULTI_POLYGON];class vector_style_VectorStyle{static createDescriptor(properties={},isTimeAware=!0){return{type:constants.LAYER_STYLE_TYPE.VECTOR,properties:{...Object(vector_style_defaults.h)(),...properties},isTimeAware:isTimeAware}}static createDefaultStyleProperties(mapColors){return Object(vector_style_defaults.h)(mapColors)}constructor(descriptor,source,layer,chartsPaletteServiceGetColor){vector_style_defineProperty(this,"_descriptor",void 0),vector_style_defineProperty(this,"_layer",void 0),vector_style_defineProperty(this,"_source",void 0),vector_style_defineProperty(this,"_styleMeta",void 0),vector_style_defineProperty(this,"_symbolizeAsStyleProperty",void 0),vector_style_defineProperty(this,"_lineColorStyleProperty",void 0),vector_style_defineProperty(this,"_fillColorStyleProperty",void 0),vector_style_defineProperty(this,"_lineWidthStyleProperty",void 0),vector_style_defineProperty(this,"_iconStyleProperty",void 0),vector_style_defineProperty(this,"_iconSizeStyleProperty",void 0),vector_style_defineProperty(this,"_iconOrientationProperty",void 0),vector_style_defineProperty(this,"_labelStyleProperty",void 0),vector_style_defineProperty(this,"_labelSizeStyleProperty",void 0),vector_style_defineProperty(this,"_labelColorStyleProperty",void 0),vector_style_defineProperty(this,"_labelBorderColorStyleProperty",void 0),vector_style_defineProperty(this,"_labelBorderSizeStyleProperty",void 0),vector_style_defineProperty(this,"_getIsPointsOnly",()=>this._styleMeta.isPointsOnly()),vector_style_defineProperty(this,"_getIsLinesOnly",()=>this._styleMeta.isLinesOnly()),vector_style_defineProperty(this,"_getIsPolygonsOnly",()=>this._styleMeta.isPolygonsOnly()),vector_style_defineProperty(this,"_getFieldFormatter",fieldName=>{const dynamicProp=this._getDynamicPropertyByFieldName(fieldName);if(!dynamicProp)return null;let dataRequestId;if(dynamicProp.getFieldOrigin()===constants.FIELD_ORIGIN.SOURCE)dataRequestId=constants.SOURCE_FORMATTERS_DATA_REQUEST_ID;else{const targetJoin=this._layer.getValidJoins().find(join=>!!join.getRightJoinSource().getFieldByName(fieldName));targetJoin&&(dataRequestId=targetJoin.getSourceFormattersDataRequestId())}if(!dataRequestId)return null;const formattersDataRequest=this._layer.getDataRequest(dataRequestId);if(!formattersDataRequest||!formattersDataRequest.hasData())return null;const formatters=formattersDataRequest.getData();return formatters?formatters[fieldName]:null}),vector_style_defineProperty(this,"getIcon",()=>{const isLinesOnly=this._getIsLinesOnly();let strokeColor;isLinesOnly?strokeColor=extractColorFromStyleProperty(this._descriptor.properties[constants.VECTOR_STYLES.LINE_COLOR],"grey"):this._hasBorder()&&(strokeColor=extractColorFromStyleProperty(this._descriptor.properties[constants.VECTOR_STYLES.LINE_COLOR],"none"));const fillColor=isLinesOnly?void 0:extractColorFromStyleProperty(this._descriptor.properties[constants.VECTOR_STYLES.FILL_COLOR],"grey");return external_kbnSharedDeps_React_default.a.createElement(VectorIcon,{isPointsOnly:this._getIsPointsOnly(),isLinesOnly:isLinesOnly,symbolId:this._getSymbolId(),strokeColor:strokeColor,fillColor:fillColor})}),vector_style_defineProperty(this,"_getLegendDetailStyleProperties",()=>this.getDynamicPropertiesArray().filter(styleProperty=>{const styleName=styleProperty.getStyleName();return![constants.VECTOR_STYLES.ICON_ORIENTATION,constants.VECTOR_STYLES.LABEL_TEXT].includes(styleName)&&(this._getIsLinesOnly()?vector_style_defaults.c.includes(styleName):!this._getIsPolygonsOnly()||vector_style_defaults.f.includes(styleName))})),this._source=source,this._layer=layer,this._descriptor=descriptor?{...descriptor,...vector_style_VectorStyle.createDescriptor(descriptor.properties,descriptor.isTimeAware)}:vector_style_VectorStyle.createDescriptor(),this._styleMeta=new StyleMeta(this._descriptor.__styleMeta),this._symbolizeAsStyleProperty=new symbolize_as_property_SymbolizeAsProperty(this._descriptor.properties[constants.VECTOR_STYLES.SYMBOLIZE_AS].options,constants.VECTOR_STYLES.SYMBOLIZE_AS),this._lineColorStyleProperty=this._makeColorProperty(this._descriptor.properties[constants.VECTOR_STYLES.LINE_COLOR],constants.VECTOR_STYLES.LINE_COLOR,chartsPaletteServiceGetColor),this._fillColorStyleProperty=this._makeColorProperty(this._descriptor.properties[constants.VECTOR_STYLES.FILL_COLOR],constants.VECTOR_STYLES.FILL_COLOR,chartsPaletteServiceGetColor),this._lineWidthStyleProperty=this._makeSizeProperty(this._descriptor.properties[constants.VECTOR_STYLES.LINE_WIDTH],constants.VECTOR_STYLES.LINE_WIDTH,this._symbolizeAsStyleProperty.isSymbolizedAsIcon()),this._iconStyleProperty=this._makeIconProperty(this._descriptor.properties[constants.VECTOR_STYLES.ICON]),this._iconSizeStyleProperty=this._makeSizeProperty(this._descriptor.properties[constants.VECTOR_STYLES.ICON_SIZE],constants.VECTOR_STYLES.ICON_SIZE,this._symbolizeAsStyleProperty.isSymbolizedAsIcon()),this._iconOrientationProperty=this._makeOrientationProperty(this._descriptor.properties[constants.VECTOR_STYLES.ICON_ORIENTATION],constants.VECTOR_STYLES.ICON_ORIENTATION),this._labelStyleProperty=this._makeLabelProperty(this._descriptor.properties[constants.VECTOR_STYLES.LABEL_TEXT]),this._labelSizeStyleProperty=this._makeSizeProperty(this._descriptor.properties[constants.VECTOR_STYLES.LABEL_SIZE],constants.VECTOR_STYLES.LABEL_SIZE,this._symbolizeAsStyleProperty.isSymbolizedAsIcon()),this._labelColorStyleProperty=this._makeColorProperty(this._descriptor.properties[constants.VECTOR_STYLES.LABEL_COLOR],constants.VECTOR_STYLES.LABEL_COLOR,chartsPaletteServiceGetColor),this._labelBorderColorStyleProperty=this._makeColorProperty(this._descriptor.properties[constants.VECTOR_STYLES.LABEL_BORDER_COLOR],constants.VECTOR_STYLES.LABEL_BORDER_COLOR,chartsPaletteServiceGetColor),this._labelBorderSizeStyleProperty=new label_border_size_property_LabelBorderSizeProperty(this._descriptor.properties[constants.VECTOR_STYLES.LABEL_BORDER_SIZE].options,constants.VECTOR_STYLES.LABEL_BORDER_SIZE,this._labelSizeStyleProperty)}async _updateFieldsInDescriptor(nextFields,styleFieldsHelper,previousFields,mapColors){const originalProperties=this.getRawProperties(),invalidStyleNames=Object.keys(originalProperties).filter(key=>{const dynamicOptions=getDynamicOptions(originalProperties,key);if(!dynamicOptions||!dynamicOptions.field||!dynamicOptions.field.name)return!1;return!nextFields.some(field=>dynamicOptions&&dynamicOptions.field&&dynamicOptions.field.name===field.getName())});let hasChanges=!1;const updatedProperties={...originalProperties};return invalidStyleNames.forEach(invalidStyleName=>{for(let i=0;i<previousFields.length;i++){const previousField=previousFields[i],nextField=nextFields[i];if(previousField.isEqual(nextField))continue;if(!styleFieldsHelper.hasFieldForStyle(nextField,invalidStyleName))return;hasChanges=!0,updatedProperties[invalidStyleName]={type:constants.STYLE_TYPE.DYNAMIC,options:{...originalProperties[invalidStyleName].options,field:(currentField=nextField,previousFieldDescriptor={origin:previousField.getOrigin(),name:previousField.getName()},{origin:previousFieldDescriptor.origin,name:currentField.getName()})}}}var currentField,previousFieldDescriptor}),this._deleteFieldsFromDescriptorAndUpdateStyling(nextFields,updatedProperties,hasChanges,styleFieldsHelper,mapColors)}async _deleteFieldsFromDescriptorAndUpdateStyling(nextFields,originalProperties,hasChanges,styleFieldsHelper,mapColors){const updatedProperties={};return Object.keys(originalProperties).filter(key=>{const dynamicOptions=getDynamicOptions(originalProperties,key);return dynamicOptions&&dynamicOptions.field&&dynamicOptions.field.name}).forEach(key=>{if(0===styleFieldsHelper.getFieldsForStyle(key).length){const staticProperties=Object(vector_style_defaults.h)(mapColors);return void(updatedProperties[key]=staticProperties[key])}const dynamicProperty=originalProperties[key];if(!dynamicProperty||!dynamicProperty.options)return;const fieldName=dynamicProperty.options.field.name;if(!fieldName)return;nextFields.find(ordinalField=>fieldName===ordinalField.getName())||(updatedProperties[key]={type:dynamic_style_property_DynamicStyleProperty.type,options:{...originalProperties[key].options}},"field"in updatedProperties[key].options&&delete updatedProperties[key].options.field)}),0!==Object.keys(updatedProperties).length?{hasChanges:!0,nextStyleDescriptor:vector_style_VectorStyle.createDescriptor({...originalProperties,...updatedProperties},this.isTimeAware())}:{hasChanges:hasChanges,nextStyleDescriptor:vector_style_VectorStyle.createDescriptor({...originalProperties},this.isTimeAware())}}async getDescriptorWithUpdatedStyleProps(nextFields,previousFields,mapColors){const styleFieldsHelper=await createStyleFieldsHelper(nextFields);return previousFields.length===nextFields.length?await this._updateFieldsInDescriptor(nextFields,styleFieldsHelper,previousFields,mapColors):await this._deleteFieldsFromDescriptorAndUpdateStyling(nextFields,this.getRawProperties(),!1,styleFieldsHelper,mapColors)}getType(){return constants.LAYER_STYLE_TYPE.VECTOR}getAllStyleProperties(){return[this._symbolizeAsStyleProperty,this._iconStyleProperty,this._lineColorStyleProperty,this._fillColorStyleProperty,this._lineWidthStyleProperty,this._iconSizeStyleProperty,this._iconOrientationProperty,this._labelStyleProperty,this._labelSizeStyleProperty,this._labelColorStyleProperty,this._labelBorderColorStyleProperty,this._labelBorderSizeStyleProperty]}_hasBorder(){return this._lineWidthStyleProperty.isDynamic()?this._lineWidthStyleProperty.isComplete():0!==this._lineWidthStyleProperty.getOptions().size}renderEditor(onStyleDescriptorChange){const rawProperties=this.getRawProperties(),propertiesWithFieldMeta=this.getDynamicPropertiesArray().filter(dynamicStyleProp=>dynamicStyleProp.isFieldMetaEnabled()),styleProperties={};return this.getAllStyleProperties().forEach(styleProperty=>{styleProperties[styleProperty.getStyleName()]=styleProperty}),external_kbnSharedDeps_React_default.a.createElement(vector_style_editor_VectorStyleEditor,{handlePropertyChange:(propertyName,stylePropertyDescriptor)=>{rawProperties[propertyName]=stylePropertyDescriptor;const vectorStyleDescriptor=vector_style_VectorStyle.createDescriptor(rawProperties,this.isTimeAware());onStyleDescriptorChange(vectorStyleDescriptor)},styleProperties:styleProperties,layer:this._layer,isPointsOnly:this._getIsPointsOnly(),isLinesOnly:this._getIsLinesOnly(),onIsTimeAwareChange:isTimeAware=>{const vectorStyleDescriptor=vector_style_VectorStyle.createDescriptor(rawProperties,isTimeAware);onStyleDescriptorChange(vectorStyleDescriptor)},isTimeAware:this.isTimeAware(),showIsTimeAware:propertiesWithFieldMeta.length>0,hasBorder:this._hasBorder()})}async pluckStyleMetaFromSourceDataRequest(sourceDataRequest){const features=external_kbnSharedDeps_Lodash_default.a.get(sourceDataRequest.getData(),"features",[]),supportedFeatures=await this._source.getSupportedShapeTypes(),hasFeatureType={[constants.VECTOR_SHAPE_TYPE.POINT]:!1,[constants.VECTOR_SHAPE_TYPE.LINE]:!1,[constants.VECTOR_SHAPE_TYPE.POLYGON]:!1};if(supportedFeatures.length>1)for(let i=0;i<features.length;i++){const feature=features[i];feature.properties[constants.KBN_IS_CENTROID_FEATURE]||(!hasFeatureType[constants.VECTOR_SHAPE_TYPE.POINT]&&POINTS.includes(feature.geometry.type)&&(hasFeatureType[constants.VECTOR_SHAPE_TYPE.POINT]=!0),!hasFeatureType[constants.VECTOR_SHAPE_TYPE.LINE]&&LINES.includes(feature.geometry.type)&&(hasFeatureType[constants.VECTOR_SHAPE_TYPE.LINE]=!0),!hasFeatureType[constants.VECTOR_SHAPE_TYPE.POLYGON]&&POLYGONS.includes(feature.geometry.type)&&(hasFeatureType[constants.VECTOR_SHAPE_TYPE.POLYGON]=!0))}const styleMeta={geometryTypes:{isPointsOnly:Object(style_util.f)(constants.VECTOR_SHAPE_TYPE.POINT,supportedFeatures,hasFeatureType),isLinesOnly:Object(style_util.f)(constants.VECTOR_SHAPE_TYPE.LINE,supportedFeatures,hasFeatureType),isPolygonsOnly:Object(style_util.f)(constants.VECTOR_SHAPE_TYPE.POLYGON,supportedFeatures,hasFeatureType)},fieldMeta:{}},dynamicProperties=this.getDynamicPropertiesArray();return 0===dynamicProperties.length||0===features.length||dynamicProperties.forEach(dynamicProperty=>{const categoricalStyleMeta=dynamicProperty.pluckCategoricalStyleMetaFromFeatures(features),ordinalStyleMeta=dynamicProperty.pluckOrdinalStyleMetaFromFeatures(features),name=dynamicProperty.getFieldName();styleMeta.fieldMeta[name]||(styleMeta.fieldMeta[name]={}),categoricalStyleMeta&&(styleMeta.fieldMeta[name].categories=categoricalStyleMeta),ordinalStyleMeta&&(styleMeta.fieldMeta[name].range=ordinalStyleMeta)}),styleMeta}getSourceFieldNames(){const fieldNames=[];return this.getDynamicPropertiesArray().forEach(styleProperty=>{styleProperty.getFieldOrigin()===constants.FIELD_ORIGIN.SOURCE&&fieldNames.push(styleProperty.getFieldName())}),fieldNames}isTimeAware(){return this._descriptor.isTimeAware}getRawProperties(){return this._descriptor.properties||{}}getDynamicPropertiesArray(){return this.getAllStyleProperties().filter(styleProperty=>styleProperty.isDynamic()&&styleProperty.isComplete())}_getDynamicPropertyByFieldName(fieldName){return this.getDynamicPropertiesArray().find(dynamicProp=>fieldName===dynamicProp.getFieldName())}getStyleMeta(){return this._styleMeta}_getSymbolId(){return this.arePointsSymbolizedAsCircles()||this._iconStyleProperty.isDynamic()?void 0:this._iconStyleProperty.getOptions().value}async hasLegendDetails(){return this._getLegendDetailStyleProperties().length>0}renderLegendDetails(){return external_kbnSharedDeps_React_default.a.createElement(VectorStyleLegend,{styles:this._getLegendDetailStyleProperties(),isPointsOnly:this._getIsPointsOnly(),isLinesOnly:this._getIsLinesOnly(),symbolId:this._getSymbolId()})}clearFeatureState(featureCollection,mbMap,sourceId){const tmpFeatureIdentifier={source:"",id:void 0};for(let i=0;i<featureCollection.features.length;i++){const feature=featureCollection.features[i];tmpFeatureIdentifier.source=sourceId,tmpFeatureIdentifier.id=feature.id,mbMap.removeFeatureState(tmpFeatureIdentifier)}}setFeatureStateAndStyleProps(featureCollection,mbMap,mbSourceId){if(!featureCollection)return!1;const dynamicStyleProps=this.getDynamicPropertiesArray();if(0===dynamicStyleProps.length)return!1;let shouldResetAllData=!1;for(let j=0;j<dynamicStyleProps.length;j++){dynamicStyleProps[j].enrichGeoJsonAndMbFeatureState(featureCollection,mbMap,mbSourceId)||(shouldResetAllData=!0)}return shouldResetAllData}arePointsSymbolizedAsCircles(){return!this._symbolizeAsStyleProperty.isSymbolizedAsIcon()}setMBPaintProperties({alpha:alpha,mbMap:mbMap,fillLayerId:fillLayerId,lineLayerId:lineLayerId}){this._fillColorStyleProperty.syncFillColorWithMb(fillLayerId,mbMap,alpha),this._lineColorStyleProperty.syncLineColorWithMb(lineLayerId,mbMap,alpha),this._lineWidthStyleProperty.syncLineWidthWithMb(lineLayerId,mbMap)}setMBPaintPropertiesForPoints({alpha:alpha,mbMap:mbMap,pointLayerId:pointLayerId}){this._fillColorStyleProperty.syncCircleColorWithMb(pointLayerId,mbMap,alpha),this._lineColorStyleProperty.syncCircleStrokeWithMb(pointLayerId,mbMap,alpha);const hasNoRadius=!this._iconSizeStyleProperty.isDynamic()&&0===this._iconSizeStyleProperty.getOptions().size;this._lineWidthStyleProperty.syncCircleStrokeWidthWithMb(pointLayerId,mbMap,hasNoRadius),this._iconSizeStyleProperty.syncCircleRadiusWithMb(pointLayerId,mbMap)}setMBPropertiesForLabelText({alpha:alpha,mbMap:mbMap,textLayerId:textLayerId}){mbMap.setLayoutProperty(textLayerId,"icon-allow-overlap",!0),mbMap.setLayoutProperty(textLayerId,"text-allow-overlap",!0),this._labelStyleProperty.syncTextFieldWithMb(textLayerId,mbMap),this._labelColorStyleProperty.syncLabelColorWithMb(textLayerId,mbMap,alpha),this._labelSizeStyleProperty.syncLabelSizeWithMb(textLayerId,mbMap),this._labelBorderSizeStyleProperty.syncLabelBorderSizeWithMb(textLayerId,mbMap),this._labelBorderColorStyleProperty.syncLabelBorderColorWithMb(textLayerId,mbMap)}setMBSymbolPropertiesForPoints({mbMap:mbMap,symbolLayerId:symbolLayerId,alpha:alpha}){mbMap.setLayoutProperty(symbolLayerId,"icon-ignore-placement",!0),mbMap.setPaintProperty(symbolLayerId,"icon-opacity",alpha),this._iconStyleProperty.syncIconWithMb(symbolLayerId,mbMap,this._iconSizeStyleProperty.getIconPixelSize()),this._fillColorStyleProperty.syncIconColorWithMb(symbolLayerId,mbMap),this._lineColorStyleProperty.syncHaloBorderColorWithMb(symbolLayerId,mbMap),this._lineWidthStyleProperty.syncHaloWidthWithMb(symbolLayerId,mbMap),this._iconSizeStyleProperty.syncIconSizeWithMb(symbolLayerId,mbMap),this._iconOrientationProperty.syncIconRotationWithMb(symbolLayerId,mbMap)}_makeField(fieldDescriptor){if(!fieldDescriptor||!fieldDescriptor.name)return null;if(fieldDescriptor.origin===constants.FIELD_ORIGIN.SOURCE)return this._source.getFieldByName(fieldDescriptor.name);if(fieldDescriptor.origin===constants.FIELD_ORIGIN.JOIN){const targetJoin=this._layer.getValidJoins().find(join=>!!join.getRightJoinSource().getFieldByName(fieldDescriptor.name));return targetJoin?targetJoin.getRightJoinSource().getFieldByName(fieldDescriptor.name):null}throw new Error("Unknown origin-type "+fieldDescriptor.origin)}_makeSizeProperty(descriptor,styleName,isSymbolizedAsIcon){if(descriptor&&descriptor.options){if(descriptor.type===static_style_property_StaticStyleProperty.type)return new static_size_property_StaticSizeProperty(descriptor.options,styleName);if(descriptor.type===dynamic_style_property_DynamicStyleProperty.type){const options=descriptor.options,field=this._makeField(options.field);return new dynamic_size_property_DynamicSizeProperty(options,styleName,field,this._layer,this._getFieldFormatter,isSymbolizedAsIcon)}throw new Error(descriptor+" not implemented")}return new static_size_property_StaticSizeProperty({size:0},styleName)}_makeColorProperty(descriptor,styleName,chartsPaletteServiceGetColor){if(descriptor&&descriptor.options){if(descriptor.type===static_style_property_StaticStyleProperty.type)return new static_color_property_StaticColorProperty(descriptor.options,styleName);if(descriptor.type===dynamic_style_property_DynamicStyleProperty.type){const options=descriptor.options,field=this._makeField(options.field);return new dynamic_color_property_DynamicColorProperty(options,styleName,field,this._layer,this._getFieldFormatter,chartsPaletteServiceGetColor)}throw new Error(descriptor+" not implemented")}return new static_color_property_StaticColorProperty({color:""},styleName)}_makeOrientationProperty(descriptor,styleName){if(descriptor&&descriptor.options){if(descriptor.type===static_style_property_StaticStyleProperty.type)return new static_orientation_property_StaticOrientationProperty(descriptor.options,styleName);if(descriptor.type===dynamic_style_property_DynamicStyleProperty.type){const options=descriptor.options,field=this._makeField(options.field);return new dynamic_orientation_property_DynamicOrientationProperty(options,styleName,field,this._layer,this._getFieldFormatter)}throw new Error(descriptor+" not implemented")}return new static_orientation_property_StaticOrientationProperty({orientation:0},styleName)}_makeLabelProperty(descriptor){if(descriptor&&descriptor.options){if(descriptor.type===static_style_property_StaticStyleProperty.type)return new static_text_property_StaticTextProperty(descriptor.options,constants.VECTOR_STYLES.LABEL_TEXT);if(descriptor.type===dynamic_style_property_DynamicStyleProperty.type){const options=descriptor.options,field=this._makeField(options.field);return new dynamic_text_property_DynamicTextProperty(options,constants.VECTOR_STYLES.LABEL_TEXT,field,this._layer,this._getFieldFormatter)}throw new Error(descriptor+" not implemented")}return new static_text_property_StaticTextProperty({value:""},constants.VECTOR_STYLES.LABEL_TEXT)}_makeIconProperty(descriptor){if(descriptor&&descriptor.options){if(descriptor.type===static_style_property_StaticStyleProperty.type)return new static_icon_property_StaticIconProperty(descriptor.options,constants.VECTOR_STYLES.ICON);if(descriptor.type===dynamic_style_property_DynamicStyleProperty.type){const options=descriptor.options,field=this._makeField(options.field);return new dynamic_icon_property_DynamicIconProperty(options,constants.VECTOR_STYLES.ICON,field,this._layer,this._getFieldFormatter)}throw new Error(descriptor+" not implemented")}return new static_icon_property_StaticIconProperty({value:constants.DEFAULT_ICON},constants.VECTOR_STYLES.ICON)}}function getDynamicOptions(originalProperties,key){if(!originalProperties[key])return null;const propertyDescriptor=originalProperties[key];return propertyDescriptor&&"type"in propertyDescriptor&&propertyDescriptor.type===constants.STYLE_TYPE.DYNAMIC&&propertyDescriptor.options?propertyDescriptor.options:null}},function(module,exports){module.exports=function(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getFlyoutDisplay})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getIsLayerTOCOpen})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getOpenTOCDetails})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getIsFullScreen})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getIsReadOnly}));const getFlyoutDisplay=({ui:ui})=>ui.flyoutDisplay,getIsLayerTOCOpen=({ui:ui})=>ui.isLayerTOCOpen,getOpenTOCDetails=({ui:ui})=>ui.openTOCDetails,getIsFullScreen=({ui:ui})=>ui.isFullScreen,getIsReadOnly=({ui:ui})=>ui.isReadOnly},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return FLYOUT_STATE})),__webpack_require__.d(__webpack_exports__,"a",(function(){return DEFAULT_IS_LAYER_TOC_OPEN})),__webpack_require__.d(__webpack_exports__,"b",(function(){return DEFAULT_MAP_UI_STATE})),__webpack_require__.d(__webpack_exports__,"d",(function(){return ui}));var _kibana_services__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_actions__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(38);let FLYOUT_STATE;!function(FLYOUT_STATE){FLYOUT_STATE.NONE="NONE",FLYOUT_STATE.LAYER_PANEL="LAYER_PANEL",FLYOUT_STATE.ADD_LAYER_WIZARD="ADD_LAYER_WIZARD",FLYOUT_STATE.MAP_SETTINGS_PANEL="MAP_SETTINGS_PANEL"}(FLYOUT_STATE||(FLYOUT_STATE={}));const DEFAULT_IS_LAYER_TOC_OPEN=!0,DEFAULT_MAP_UI_STATE={flyoutDisplay:FLYOUT_STATE.NONE,isFullScreen:!1,isReadOnly:!Object(_kibana_services__WEBPACK_IMPORTED_MODULE_0__.w)().save,isLayerTOCOpen:DEFAULT_IS_LAYER_TOC_OPEN,openTOCDetails:[]};function ui(state=DEFAULT_MAP_UI_STATE,action){switch(action.type){case _actions__WEBPACK_IMPORTED_MODULE_1__.N:return{...state,flyoutDisplay:action.display};case _actions__WEBPACK_IMPORTED_MODULE_1__.s:return{...state,isLayerTOCOpen:action.isLayerTOCOpen};case _actions__WEBPACK_IMPORTED_MODULE_1__.q:return{...state,isFullScreen:action.isFullScreen};case _actions__WEBPACK_IMPORTED_MODULE_1__.D:return{...state,isReadOnly:action.isReadOnly};case _actions__WEBPACK_IMPORTED_MODULE_1__.A:return{...state,openTOCDetails:action.layerIds};case _actions__WEBPACK_IMPORTED_MODULE_1__.I:return{...state,openTOCDetails:[...state.openTOCDetails,action.layerId]};case _actions__WEBPACK_IMPORTED_MODULE_1__.f:return{...state,openTOCDetails:state.openTOCDetails.filter(layerId=>layerId!==action.layerId)};default:return state}}},function(module,exports,__webpack_require__){const SemVer=__webpack_require__(43);module.exports=(a,b,loose)=>new SemVer(a,loose).compare(new SemVer(b,loose))},function(module,exports,__webpack_require__){class Range{constructor(range,options){if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),range instanceof Range)return range.loose===!!options.loose&&range.includePrerelease===!!options.includePrerelease?range:new Range(range.raw,options);if(range instanceof Comparator)return this.raw=range.value,this.set=[[range]],this.format(),this;if(this.options=options,this.loose=!!options.loose,this.includePrerelease=!!options.includePrerelease,this.raw=range,this.set=range.split(/\s*\|\|\s*/).map(range=>this.parseRange(range.trim())).filter(c=>c.length),!this.set.length)throw new TypeError("Invalid SemVer Range: "+range);this.format()}format(){return this.range=this.set.map(comps=>comps.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(range){const loose=this.options.loose;range=range.trim();const hr=loose?re[t.HYPHENRANGELOOSE]:re[t.HYPHENRANGE];range=range.replace(hr,hyphenReplace(this.options.includePrerelease)),debug("hyphen replace",range),range=range.replace(re[t.COMPARATORTRIM],comparatorTrimReplace),debug("comparator trim",range,re[t.COMPARATORTRIM]),range=(range=(range=range.replace(re[t.TILDETRIM],tildeTrimReplace)).replace(re[t.CARETTRIM],caretTrimReplace)).split(/\s+/).join(" ");const compRe=loose?re[t.COMPARATORLOOSE]:re[t.COMPARATOR];return range.split(" ").map(comp=>parseComparator(comp,this.options)).join(" ").split(/\s+/).map(comp=>replaceGTE0(comp,this.options)).filter(this.options.loose?comp=>!!comp.match(compRe):()=>!0).map(comp=>new Comparator(comp,this.options))}intersects(range,options){if(!(range instanceof Range))throw new TypeError("a Range is required");return this.set.some(thisComparators=>isSatisfiable(thisComparators,options)&&range.set.some(rangeComparators=>isSatisfiable(rangeComparators,options)&&thisComparators.every(thisComparator=>rangeComparators.every(rangeComparator=>thisComparator.intersects(rangeComparator,options)))))}test(version){if(!version)return!1;if("string"==typeof version)try{version=new SemVer(version,this.options)}catch(er){return!1}for(let i=0;i<this.set.length;i++)if(testSet(this.set[i],version,this.options))return!0;return!1}}module.exports=Range;const Comparator=__webpack_require__(96),debug=__webpack_require__(94),SemVer=__webpack_require__(43),{re:re,t:t,comparatorTrimReplace:comparatorTrimReplace,tildeTrimReplace:tildeTrimReplace,caretTrimReplace:caretTrimReplace}=__webpack_require__(73),isSatisfiable=(comparators,options)=>{let result=!0;const remainingComparators=comparators.slice();let testComparator=remainingComparators.pop();for(;result&&remainingComparators.length;)result=remainingComparators.every(otherComparator=>testComparator.intersects(otherComparator,options)),testComparator=remainingComparators.pop();return result},parseComparator=(comp,options)=>(debug("comp",comp,options),comp=replaceCarets(comp,options),debug("caret",comp),comp=replaceTildes(comp,options),debug("tildes",comp),comp=replaceXRanges(comp,options),debug("xrange",comp),comp=replaceStars(comp,options),debug("stars",comp),comp),isX=id=>!id||"x"===id.toLowerCase()||"*"===id,replaceTildes=(comp,options)=>comp.trim().split(/\s+/).map(comp=>replaceTilde(comp,options)).join(" "),replaceTilde=(comp,options)=>{const r=options.loose?re[t.TILDELOOSE]:re[t.TILDE];return comp.replace(r,(_,M,m,p,pr)=>{let ret;return debug("tilde",comp,_,M,m,p,pr),isX(M)?ret="":isX(m)?ret=`>=${M}.0.0 <${+M+1}.0.0-0`:isX(p)?ret=`>=${M}.${m}.0 <${M}.${+m+1}.0-0`:pr?(debug("replaceTilde pr",pr),ret=`>=${M}.${m}.${p}-${pr} <${M}.${+m+1}.0-0`):ret=`>=${M}.${m}.${p} <${M}.${+m+1}.0-0`,debug("tilde return",ret),ret})},replaceCarets=(comp,options)=>comp.trim().split(/\s+/).map(comp=>replaceCaret(comp,options)).join(" "),replaceCaret=(comp,options)=>{debug("caret",comp,options);const r=options.loose?re[t.CARETLOOSE]:re[t.CARET],z=options.includePrerelease?"-0":"";return comp.replace(r,(_,M,m,p,pr)=>{let ret;return debug("caret",comp,_,M,m,p,pr),isX(M)?ret="":isX(m)?ret=`>=${M}.0.0${z} <${+M+1}.0.0-0`:isX(p)?ret="0"===M?`>=${M}.${m}.0${z} <${M}.${+m+1}.0-0`:`>=${M}.${m}.0${z} <${+M+1}.0.0-0`:pr?(debug("replaceCaret pr",pr),ret="0"===M?"0"===m?`>=${M}.${m}.${p}-${pr} <${M}.${m}.${+p+1}-0`:`>=${M}.${m}.${p}-${pr} <${M}.${+m+1}.0-0`:`>=${M}.${m}.${p}-${pr} <${+M+1}.0.0-0`):(debug("no pr"),ret="0"===M?"0"===m?`>=${M}.${m}.${p}${z} <${M}.${m}.${+p+1}-0`:`>=${M}.${m}.${p}${z} <${M}.${+m+1}.0-0`:`>=${M}.${m}.${p} <${+M+1}.0.0-0`),debug("caret return",ret),ret})},replaceXRanges=(comp,options)=>(debug("replaceXRanges",comp,options),comp.split(/\s+/).map(comp=>replaceXRange(comp,options)).join(" ")),replaceXRange=(comp,options)=>{comp=comp.trim();const r=options.loose?re[t.XRANGELOOSE]:re[t.XRANGE];return comp.replace(r,(ret,gtlt,M,m,p,pr)=>{debug("xRange",comp,ret,gtlt,M,m,p,pr);const xM=isX(M),xm=xM||isX(m),xp=xm||isX(p),anyX=xp;return"="===gtlt&&anyX&&(gtlt=""),pr=options.includePrerelease?"-0":"",xM?ret=">"===gtlt||"<"===gtlt?"<0.0.0-0":"*":gtlt&&anyX?(xm&&(m=0),p=0,">"===gtlt?(gtlt=">=",xm?(M=+M+1,m=0,p=0):(m=+m+1,p=0)):"<="===gtlt&&(gtlt="<",xm?M=+M+1:m=+m+1),"<"===gtlt&&(pr="-0"),ret=`${gtlt+M}.${m}.${p}${pr}`):xm?ret=`>=${M}.0.0${pr} <${+M+1}.0.0-0`:xp&&(ret=`>=${M}.${m}.0${pr} <${M}.${+m+1}.0-0`),debug("xRange return",ret),ret})},replaceStars=(comp,options)=>(debug("replaceStars",comp,options),comp.trim().replace(re[t.STAR],"")),replaceGTE0=(comp,options)=>(debug("replaceGTE0",comp,options),comp.trim().replace(re[options.includePrerelease?t.GTE0PRE:t.GTE0],"")),hyphenReplace=incPr=>($0,from,fM,fm,fp,fpr,fb,to,tM,tm,tp,tpr,tb)=>`${from=isX(fM)?"":isX(fm)?`>=${fM}.0.0${incPr?"-0":""}`:isX(fp)?`>=${fM}.${fm}.0${incPr?"-0":""}`:fpr?">="+from:`>=${from}${incPr?"-0":""}`} ${to=isX(tM)?"":isX(tm)?`<${+tM+1}.0.0-0`:isX(tp)?`<${tM}.${+tm+1}.0-0`:tpr?`<=${tM}.${tm}.${tp}-${tpr}`:incPr?`<${tM}.${tm}.${+tp+1}-0`:"<="+to}`.trim(),testSet=(set,version,options)=>{for(let i=0;i<set.length;i++)if(!set[i].test(version))return!1;if(version.prerelease.length&&!options.includePrerelease){for(let i=0;i<set.length;i++)if(debug(set[i].semver),set[i].semver!==Comparator.ANY&&set[i].semver.prerelease.length>0){const allowed=set[i].semver;if(allowed.major===version.major&&allowed.minor===version.minor&&allowed.patch===version.patch)return!0}return!1}return!0}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SingleFieldSelect}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23),lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),_elastic_eui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),_src_plugins_kibana_react_public__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(24);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function fieldsToOptions(fields,isFieldDisabled){return fields?fields.map(field=>{const option={value:field,label:field.displayName?field.displayName:field.name};return isFieldDisabled&&isFieldDisabled(field)&&(option.disabled=!0),option}).sort((a,b)=>a.label.toLowerCase().localeCompare(b.label.toLowerCase())):[]}function SingleFieldSelect({fields:fields,getFieldDisabledReason:getFieldDisabledReason,isFieldDisabled:isFieldDisabled,onChange:onChange,value:value,...rest}){const selectedOptions=[];if(value&&fields){const selectedField=fields.find(field=>field.name===value);selectedField&&selectedOptions.push({value:selectedField,label:selectedField.displayName?selectedField.displayName:selectedField.name})}return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiComboBox,_extends({singleSelection:!0,options:fieldsToOptions(fields,isFieldDisabled),selectedOptions:selectedOptions,onChange:selectedOptions=>{onChange(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(selectedOptions,"0.value.name"))},isDisabled:!fields||0===fields.length,renderOption:function(option,searchValue,contentClassName){const content=react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFlexGroup,{className:contentClassName,gutterSize:"s",alignItems:"center"},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFlexItem,{grow:null},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_src_plugins_kibana_react_public__WEBPACK_IMPORTED_MODULE_3__.FieldIcon,{type:option.value.type,fill:"none"})),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFlexItem,null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiHighlight,{search:searchValue},option.label))),disabledReason=option.disabled&&getFieldDisabledReason?getFieldDisabledReason(option.value):null;return disabledReason?react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiToolTip,{position:"left",content:disabledReason},content):content}},rest))}},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,exports,__webpack_require__){"use strict";var memo,isOldIE=function(){return void 0===memo&&(memo=Boolean(window&&document&&document.all&&!window.atob)),memo},getTarget=function(){var memo={};return function(target){if(void 0===memo[target]){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}}(),stylesInDom=[];function getIndexByIdentifier(identifier){for(var result=-1,i=0;i<stylesInDom.length;i++)if(stylesInDom[i].identifier===identifier){result=i;break}return result}function modulesToDom(list,options){for(var idCountMap={},identifiers=[],i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],count=idCountMap[id]||0,identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier),obj={css:item[1],media:item[2],sourceMap:item[3]};-1!==index?(stylesInDom[index].references++,stylesInDom[index].updater(obj)):stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1}),identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style"),attributes=options.attributes||{};if(void 0===attributes.nonce){var nonce=__webpack_require__.nc;nonce&&(attributes.nonce=nonce)}if(Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])})),"function"==typeof options.insert)options.insert(style);else{var target=getTarget(options.insert||"head");if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");target.appendChild(style)}return style}var textStore,replaceText=(textStore=[],function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")});function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}function applyToTag(style,options,obj){var css=obj.css,media=obj.media,sourceMap=obj.sourceMap;if(media?style.setAttribute("media",media):style.removeAttribute("media"),sourceMap&&btoa&&(css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")),style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}var singleton=null,singletonCounter=0;function addStyle(obj,options){var style,update,remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else style=insertStyleElement(options),update=applyToTag.bind(null,style,options),remove=function(){!function(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style)}(style)};return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}module.exports=function(list,options){(options=options||{}).singleton||"boolean"==typeof options.singleton||(options.singleton=isOldIE());var lastIdentifiers=modulesToDom(list=list||[],options);return function(newList){if(newList=newList||[],"[object Array]"===Object.prototype.toString.call(newList)){for(var i=0;i<lastIdentifiers.length;i++){var index=getIndexByIdentifier(lastIdentifiers[i]);stylesInDom[index].references--}for(var newLastIdentifiers=modulesToDom(newList,options),_i=0;_i<lastIdentifiers.length;_i++){var _index=getIndexByIdentifier(lastIdentifiers[_i]);0===stylesInDom[_index].references&&(stylesInDom[_index].updater(),stylesInDom.splice(_index,1))}lastIdentifiers=newLastIdentifiers}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];return list.toString=function(){return this.map((function(item){var content=function(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=(sourceMap=cssMapping,base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64),"/*# ".concat(data," */")),sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}var sourceMap,base64,data;return[content].join("\n")}(item,useSourceMap);return item[2]?"@media ".concat(item[2]," {").concat(content,"}"):content})).join("")},list.i=function(modules,mediaQuery,dedupe){"string"==typeof modules&&(modules=[[null,modules,""]]);var alreadyImportedModules={};if(dedupe)for(var i=0;i<this.length;i++){var id=this[i][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);dedupe&&alreadyImportedModules[item[0]]||(mediaQuery&&(item[2]?item[2]="".concat(mediaQuery," and ").concat(item[2]):item[2]=mediaQuery),list.push(item))}},list}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DataRequest})),__webpack_require__.d(__webpack_exports__,"b",(function(){return DataRequestAbortError}));class DataRequest{constructor(descriptor){var obj,key,value;value=void 0,(key="_descriptor")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this._descriptor={...descriptor}}getData(){return this._descriptor.data}isLoading(){return!!this._descriptor.dataRequestToken}getMeta(){return this._descriptor.dataMetaAtStart?this._descriptor.dataMetaAtStart:this._descriptor.dataMeta?this._descriptor.dataMeta:{}}hasData(){return!!this._descriptor.data}hasDataOrRequestInProgress(){return this.hasData()||this.isLoading()}getDataId(){return this._descriptor.dataId}getRequestToken(){return this._descriptor.dataRequestToken}}class DataRequestAbortError extends Error{constructor(){super()}}},function(module,exports){(function(){var assign,getValue,isArray,isEmpty,isFunction,isObject,isPlainObject,slice=[].slice,hasProp={}.hasOwnProperty;assign=function(){var i,key,len,source,sources,target;if(target=arguments[0],sources=2<=arguments.length?slice.call(arguments,1):[],isFunction(Object.assign))Object.assign.apply(null,arguments);else for(i=0,len=sources.length;i<len;i++)if(null!=(source=sources[i]))for(key in source)hasProp.call(source,key)&&(target[key]=source[key]);return target},isFunction=function(val){return!!val&&"[object Function]"===Object.prototype.toString.call(val)},isObject=function(val){var ref;return!!val&&("function"==(ref=typeof val)||"object"===ref)},isArray=function(val){return isFunction(Array.isArray)?Array.isArray(val):"[object Array]"===Object.prototype.toString.call(val)},isEmpty=function(val){var key;if(isArray(val))return!val.length;for(key in val)if(hasProp.call(val,key))return!1;return!0},isPlainObject=function(val){var ctor,proto;return isObject(val)&&(proto=Object.getPrototypeOf(val))&&(ctor=proto.constructor)&&"function"==typeof ctor&&ctor instanceof ctor&&Function.prototype.toString.call(ctor)===Function.prototype.toString.call(Object)},getValue=function(obj){return isFunction(obj.valueOf)?obj.valueOf():obj},module.exports.assign=assign,module.exports.isFunction=isFunction,module.exports.isObject=isObject,module.exports.isArray=isArray,module.exports.isEmpty=isEmpty,module.exports.isPlainObject=isPlainObject,module.exports.getValue=getValue}).call(this)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var helpers_1=__webpack_require__(46);exports.getCoord=function(coord){if(!coord)throw new Error("coord is required");if(!Array.isArray(coord)){if("Feature"===coord.type&&null!==coord.geometry&&"Point"===coord.geometry.type)return coord.geometry.coordinates;if("Point"===coord.type)return coord.coordinates}if(Array.isArray(coord)&&coord.length>=2&&!Array.isArray(coord[0])&&!Array.isArray(coord[1]))return coord;throw new Error("coord must be GeoJSON Point or an Array of numbers")},exports.getCoords=function(coords){if(Array.isArray(coords))return coords;if("Feature"===coords.type){if(null!==coords.geometry)return coords.geometry.coordinates}else if(coords.coordinates)return coords.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},exports.containsNumber=function containsNumber(coordinates){if(coordinates.length>1&&helpers_1.isNumber(coordinates[0])&&helpers_1.isNumber(coordinates[1]))return!0;if(Array.isArray(coordinates[0])&&coordinates[0].length)return containsNumber(coordinates[0]);throw new Error("coordinates must only contain numbers")},exports.geojsonType=function(value,type,name){if(!type||!name)throw new Error("type and name required");if(!value||value.type!==type)throw new Error("Invalid input to "+name+": must be a "+type+", given "+value.type)},exports.featureOf=function(feature,type,name){if(!feature)throw new Error("No feature passed");if(!name)throw new Error(".featureOf() requires a name");if(!feature||"Feature"!==feature.type||!feature.geometry)throw new Error("Invalid input to "+name+", Feature with geometry required");if(!feature.geometry||feature.geometry.type!==type)throw new Error("Invalid input to "+name+": must be a "+type+", given "+feature.geometry.type)},exports.collectionOf=function(featureCollection,type,name){if(!featureCollection)throw new Error("No featureCollection passed");if(!name)throw new Error(".collectionOf() requires a name");if(!featureCollection||"FeatureCollection"!==featureCollection.type)throw new Error("Invalid input to "+name+", FeatureCollection required");for(var _i=0,_a=featureCollection.features;_i<_a.length;_i++){var feature=_a[_i];if(!feature||"Feature"!==feature.type||!feature.geometry)throw new Error("Invalid input to "+name+", Feature with geometry required");if(!feature.geometry||feature.geometry.type!==type)throw new Error("Invalid input to "+name+": must be a "+type+", given "+feature.geometry.type)}},exports.getGeom=function(geojson){return"Feature"===geojson.type?geojson.geometry:geojson},exports.getType=function(geojson,name){return"FeatureCollection"===geojson.type?"FeatureCollection":"GeometryCollection"===geojson.type?"GeometryCollection":"Feature"===geojson.type&&null!==geojson.geometry?geojson.geometry.type:geojson.type}},function(module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return getOtherCategoryLabel})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getComputedFieldName})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getComputedFieldNamePrefix})),__webpack_require__.d(__webpack_exports__,"f",(function(){return isOnlySingleFeatureType})),__webpack_require__.d(__webpack_exports__,"b",(function(){return dynamicRound})),__webpack_require__.d(__webpack_exports__,"a",(function(){return assignCategoriesToPalette})),__webpack_require__.d(__webpack_exports__,"g",(function(){return makeMbClampedNumberExpression}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);function getOtherCategoryLabel(){return _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.maps.styles.categorical.otherCategoryLabel",{defaultMessage:"Other"})}function getComputedFieldName(styleName,fieldName){return`${getComputedFieldNamePrefix(fieldName)}__${styleName}`}function getComputedFieldNamePrefix(fieldName){return"__kbn__dynamic__"+fieldName}function isOnlySingleFeatureType(featureType,supportedFeatures,hasFeatureType){if(1===supportedFeatures.length)return supportedFeatures[0]===featureType;return Object.keys(hasFeatureType).reduce((accumulator,featureTypeKey)=>{const hasFeature=hasFeatureType[featureTypeKey];return featureTypeKey===featureType?accumulator&&hasFeature:accumulator&&!hasFeature},!0)}function dynamicRound(value){if("number"!=typeof value)return value;let precision=0,threshold=10;for(;value<threshold&&precision<8;)precision++,threshold/=10;return 0===precision?Math.round(value):parseFloat(value.toFixed(precision+1))}function assignCategoriesToPalette({categories:categories,paletteValues:paletteValues}){const stops=[];let fallbackSymbolId=null;if(categories.length&&paletteValues.length){const maxLength=Math.min(paletteValues.length,categories.length+1);fallbackSymbolId=paletteValues[maxLength-1];for(let i=0;i<maxLength-1;i++)stops.push({stop:categories[i].key,style:paletteValues[i]})}return{stops:stops,fallbackSymbolId:fallbackSymbolId}}function makeMbClampedNumberExpression({lookupFunction:lookupFunction,fieldName:fieldName,minValue:minValue,maxValue:maxValue,fallback:fallback}){return["coalesce",["case",["==",[lookupFunction,fieldName],null],minValue-1,["max",["min",["to-number",[lookupFunction,fieldName]],maxValue],minValue]],fallback]}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(52);exports.__esModule=!0,exports.default=exports.ReactReduxContext=void 0;var ReactReduxContext=_interopRequireDefault(__webpack_require__(2)).default.createContext(null);exports.ReactReduxContext=ReactReduxContext;var _default=ReactReduxContext;exports.default=_default},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getJoinAggKey})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getSourceAggKey}));var _constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);function getJoinAggKey({aggType:aggType,aggFieldName:aggFieldName,rightSourceId:rightSourceId}){const metricKey=aggType!==_constants__WEBPACK_IMPORTED_MODULE_0__.AGG_TYPE.COUNT?`${aggType}${_constants__WEBPACK_IMPORTED_MODULE_0__.AGG_DELIMITER}${aggFieldName}`:aggType;return`${_constants__WEBPACK_IMPORTED_MODULE_0__.JOIN_FIELD_NAME_PREFIX}${metricKey}__${rightSourceId}`}function getSourceAggKey({aggType:aggType,aggFieldName:aggFieldName}){return aggType!==_constants__WEBPACK_IMPORTED_MODULE_0__.AGG_TYPE.COUNT?`${aggType}${_constants__WEBPACK_IMPORTED_MODULE_0__.AGG_DELIMITER}${aggFieldName}`:_constants__WEBPACK_IMPORTED_MODULE_0__.COUNT_PROP_NAME}},function(module,exports,__webpack_require__){"use strict";var pna=__webpack_require__(103),objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};module.exports=Duplex;var util=Object.create(__webpack_require__(79));util.inherits=__webpack_require__(80);var Readable=__webpack_require__(179),Writable=__webpack_require__(137);util.inherits(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options),Writable.call(this,options),options&&!1===options.readable&&(this.readable=!1),options&&!1===options.writable&&(this.writable=!1),this.allowHalfOpen=!0,options&&!1===options.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||pna.nextTick(onEndNT,this)}function onEndNT(self){self.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(value){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=value,this._writableState.destroyed=value)}}),Duplex.prototype._destroy=function(err,cb){this.push(null),this.end(),pna.nextTick(cb,err)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return TooltipProperty}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23),lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class TooltipProperty{constructor(propertyKey,propertyName,rawValue){_defineProperty(this,"_propertyKey",void 0),_defineProperty(this,"_rawValue",void 0),_defineProperty(this,"_propertyName",void 0),this._propertyKey=propertyKey,this._propertyName=propertyName,this._rawValue=rawValue}getPropertyKey(){return this._propertyKey}getPropertyName(){return this._propertyName}getHtmlDisplayValue(){return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.escape(Array.isArray(this._rawValue)?this._rawValue.join():this._rawValue)}getRawValue(){return this._rawValue}isFilterable(){return!1}async getESFilters(){return[]}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return nonSerializableInstances})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getInspectorAdapters})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getEventHandlers})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getChartsPaletteServiceGetColor})),__webpack_require__.d(__webpack_exports__,"f",(function(){return registerCancelCallback})),__webpack_require__.d(__webpack_exports__,"i",(function(){return unregisterCancelCallback})),__webpack_require__.d(__webpack_exports__,"a",(function(){return cancelRequest})),__webpack_require__.d(__webpack_exports__,"h",(function(){return setEventHandlers})),__webpack_require__.d(__webpack_exports__,"g",(function(){return setChartsPaletteServiceGetColor}));var request_=__webpack_require__(31),events=__webpack_require__(78);class map_adapter_MapAdapter extends events.EventEmitter{setMapState({stats:stats,style:style}){this.stats=stats,this.style=style,this._onChange()}getMapState(){return{stats:this.stats,style:this.style}}_onChange(){this.emit("change")}}var kibana_services=__webpack_require__(4);function createInspectorAdapters(){const inspectorAdapters={requests:new request_.RequestAdapter};return Object(kibana_services.H)()&&(inspectorAdapters.map=new map_adapter_MapAdapter),inspectorAdapters}function nonSerializableInstances(state,action={}){if(!state)return{inspectorAdapters:createInspectorAdapters(),cancelRequestCallbacks:new Map,eventHandlers:{},chartsPaletteServiceGetColor:null};switch(action.type){case"REGISTER_CANCEL_CALLBACK":return state.cancelRequestCallbacks.set(action.requestToken,action.callback),{...state};case"UNREGISTER_CANCEL_CALLBACK":return state.cancelRequestCallbacks.delete(action.requestToken),{...state};case"SET_EVENT_HANDLERS":return{...state,eventHandlers:action.eventHandlers};case"SET_CHARTS_PALETTE_SERVICE_GET_COLOR":return{...state,chartsPaletteServiceGetColor:action.chartsPaletteServiceGetColor};default:return state}}const getInspectorAdapters=({nonSerializableInstances:nonSerializableInstances})=>nonSerializableInstances.inspectorAdapters,getEventHandlers=({nonSerializableInstances:nonSerializableInstances})=>nonSerializableInstances.eventHandlers;function getChartsPaletteServiceGetColor({nonSerializableInstances:nonSerializableInstances}){return nonSerializableInstances.chartsPaletteServiceGetColor}const registerCancelCallback=(requestToken,callback)=>({type:"REGISTER_CANCEL_CALLBACK",requestToken:requestToken,callback:callback}),unregisterCancelCallback=requestToken=>({type:"UNREGISTER_CANCEL_CALLBACK",requestToken:requestToken}),cancelRequest=requestToken=>(dispatch,getState)=>{if(!requestToken)return;const cancelCallback=(({nonSerializableInstances:nonSerializableInstances})=>nonSerializableInstances.cancelRequestCallbacks)(getState()).get(requestToken);cancelCallback&&(cancelCallback(),dispatch(unregisterCancelCallback(requestToken)))},setEventHandlers=(eventHandlers={})=>({type:"SET_EVENT_HANDLERS",eventHandlers:eventHandlers});function setChartsPaletteServiceGetColor(chartsPaletteServiceGetColor){return{type:"SET_CHARTS_PALETTE_SERVICE_GET_COLOR",chartsPaletteServiceGetColor:chartsPaletteServiceGetColor}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var helpers=__webpack_require__(46);function coordEach(geojson,callback,excludeWrapCoord){if(null!==geojson)for(var j,k,l,geometry,stopG,coords,geometryMaybeCollection,isGeometryCollection,wrapShrink=0,coordIndex=0,type=geojson.type,isFeatureCollection="FeatureCollection"===type,isFeature="Feature"===type,stop=isFeatureCollection?geojson.features.length:1,featureIndex=0;featureIndex<stop;featureIndex++){stopG=(isGeometryCollection=!!(geometryMaybeCollection=isFeatureCollection?geojson.features[featureIndex].geometry:isFeature?geojson.geometry:geojson)&&"GeometryCollection"===geometryMaybeCollection.type)?geometryMaybeCollection.geometries.length:1;for(var geomIndex=0;geomIndex<stopG;geomIndex++){var multiFeatureIndex=0,geometryIndex=0;if(null!==(geometry=isGeometryCollection?geometryMaybeCollection.geometries[geomIndex]:geometryMaybeCollection)){coords=geometry.coordinates;var geomType=geometry.type;switch(wrapShrink=!excludeWrapCoord||"Polygon"!==geomType&&"MultiPolygon"!==geomType?0:1,geomType){case null:break;case"Point":if(!1===callback(coords,coordIndex,featureIndex,multiFeatureIndex,geometryIndex))return!1;coordIndex++,multiFeatureIndex++;break;case"LineString":case"MultiPoint":for(j=0;j<coords.length;j++){if(!1===callback(coords[j],coordIndex,featureIndex,multiFeatureIndex,geometryIndex))return!1;coordIndex++,"MultiPoint"===geomType&&multiFeatureIndex++}"LineString"===geomType&&multiFeatureIndex++;break;case"Polygon":case"MultiLineString":for(j=0;j<coords.length;j++){for(k=0;k<coords[j].length-wrapShrink;k++){if(!1===callback(coords[j][k],coordIndex,featureIndex,multiFeatureIndex,geometryIndex))return!1;coordIndex++}"MultiLineString"===geomType&&multiFeatureIndex++,"Polygon"===geomType&&geometryIndex++}"Polygon"===geomType&&multiFeatureIndex++;break;case"MultiPolygon":for(j=0;j<coords.length;j++){for(geometryIndex=0,k=0;k<coords[j].length;k++){for(l=0;l<coords[j][k].length-wrapShrink;l++){if(!1===callback(coords[j][k][l],coordIndex,featureIndex,multiFeatureIndex,geometryIndex))return!1;coordIndex++}geometryIndex++}multiFeatureIndex++}break;case"GeometryCollection":for(j=0;j<geometry.geometries.length;j++)if(!1===coordEach(geometry.geometries[j],callback,excludeWrapCoord))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function propEach(geojson,callback){var i;switch(geojson.type){case"FeatureCollection":for(i=0;i<geojson.features.length&&!1!==callback(geojson.features[i].properties,i);i++);break;case"Feature":callback(geojson.properties,0)}}function featureEach(geojson,callback){if("Feature"===geojson.type)callback(geojson,0);else if("FeatureCollection"===geojson.type)for(var i=0;i<geojson.features.length&&!1!==callback(geojson.features[i],i);i++);}function geomEach(geojson,callback){var i,j,g,geometry,stopG,geometryMaybeCollection,isGeometryCollection,featureProperties,featureBBox,featureId,featureIndex=0,isFeatureCollection="FeatureCollection"===geojson.type,isFeature="Feature"===geojson.type,stop=isFeatureCollection?geojson.features.length:1;for(i=0;i<stop;i++){for(geometryMaybeCollection=isFeatureCollection?geojson.features[i].geometry:isFeature?geojson.geometry:geojson,featureProperties=isFeatureCollection?geojson.features[i].properties:isFeature?geojson.properties:{},featureBBox=isFeatureCollection?geojson.features[i].bbox:isFeature?geojson.bbox:void 0,featureId=isFeatureCollection?geojson.features[i].id:isFeature?geojson.id:void 0,stopG=(isGeometryCollection=!!geometryMaybeCollection&&"GeometryCollection"===geometryMaybeCollection.type)?geometryMaybeCollection.geometries.length:1,g=0;g<stopG;g++)if(null!==(geometry=isGeometryCollection?geometryMaybeCollection.geometries[g]:geometryMaybeCollection))switch(geometry.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===callback(geometry,featureIndex,featureProperties,featureBBox,featureId))return!1;break;case"GeometryCollection":for(j=0;j<geometry.geometries.length;j++)if(!1===callback(geometry.geometries[j],featureIndex,featureProperties,featureBBox,featureId))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===callback(null,featureIndex,featureProperties,featureBBox,featureId))return!1;featureIndex++}}function flattenEach(geojson,callback){geomEach(geojson,(function(geometry,featureIndex,properties,bbox,id){var geomType,type=null===geometry?null:geometry.type;switch(type){case null:case"Point":case"LineString":case"Polygon":return!1!==callback(helpers.feature(geometry,properties,{bbox:bbox,id:id}),featureIndex,0)&&void 0}switch(type){case"MultiPoint":geomType="Point";break;case"MultiLineString":geomType="LineString";break;case"MultiPolygon":geomType="Polygon"}for(var multiFeatureIndex=0;multiFeatureIndex<geometry.coordinates.length;multiFeatureIndex++){var geom={type:geomType,coordinates:geometry.coordinates[multiFeatureIndex]};if(!1===callback(helpers.feature(geom,properties),featureIndex,multiFeatureIndex))return!1}}))}function segmentEach(geojson,callback){flattenEach(geojson,(function(feature,featureIndex,multiFeatureIndex){var segmentIndex=0;if(feature.geometry){var type=feature.geometry.type;if("Point"!==type&&"MultiPoint"!==type){var previousCoords,previousFeatureIndex=0,previousMultiIndex=0,prevGeomIndex=0;return!1!==coordEach(feature,(function(currentCoord,coordIndex,featureIndexCoord,multiPartIndexCoord,geometryIndex){if(void 0===previousCoords||featureIndex>previousFeatureIndex||multiPartIndexCoord>previousMultiIndex||geometryIndex>prevGeomIndex)return previousCoords=currentCoord,previousFeatureIndex=featureIndex,previousMultiIndex=multiPartIndexCoord,prevGeomIndex=geometryIndex,void(segmentIndex=0);var currentSegment=helpers.lineString([previousCoords,currentCoord],feature.properties);if(!1===callback(currentSegment,featureIndex,multiFeatureIndex,geometryIndex,segmentIndex))return!1;segmentIndex++,previousCoords=currentCoord}))&&void 0}}}))}function lineEach(geojson,callback){if(!geojson)throw new Error("geojson is required");flattenEach(geojson,(function(feature,featureIndex,multiFeatureIndex){if(null!==feature.geometry){var type=feature.geometry.type,coords=feature.geometry.coordinates;switch(type){case"LineString":if(!1===callback(feature,featureIndex,multiFeatureIndex,0,0))return!1;break;case"Polygon":for(var geometryIndex=0;geometryIndex<coords.length;geometryIndex++)if(!1===callback(helpers.lineString(coords[geometryIndex],feature.properties),featureIndex,multiFeatureIndex,geometryIndex))return!1}}}))}exports.coordEach=coordEach,exports.coordReduce=function(geojson,callback,initialValue,excludeWrapCoord){var previousValue=initialValue;return coordEach(geojson,(function(currentCoord,coordIndex,featureIndex,multiFeatureIndex,geometryIndex){previousValue=0===coordIndex&&void 0===initialValue?currentCoord:callback(previousValue,currentCoord,coordIndex,featureIndex,multiFeatureIndex,geometryIndex)}),excludeWrapCoord),previousValue},exports.propEach=propEach,exports.propReduce=function(geojson,callback,initialValue){var previousValue=initialValue;return propEach(geojson,(function(currentProperties,featureIndex){previousValue=0===featureIndex&&void 0===initialValue?currentProperties:callback(previousValue,currentProperties,featureIndex)})),previousValue},exports.featureEach=featureEach,exports.featureReduce=function(geojson,callback,initialValue){var previousValue=initialValue;return featureEach(geojson,(function(currentFeature,featureIndex){previousValue=0===featureIndex&&void 0===initialValue?currentFeature:callback(previousValue,currentFeature,featureIndex)})),previousValue},exports.coordAll=function(geojson){var coords=[];return coordEach(geojson,(function(coord){coords.push(coord)})),coords},exports.geomEach=geomEach,exports.geomReduce=function(geojson,callback,initialValue){var previousValue=initialValue;return geomEach(geojson,(function(currentGeometry,featureIndex,featureProperties,featureBBox,featureId){previousValue=0===featureIndex&&void 0===initialValue?currentGeometry:callback(previousValue,currentGeometry,featureIndex,featureProperties,featureBBox,featureId)})),previousValue},exports.flattenEach=flattenEach,exports.flattenReduce=function(geojson,callback,initialValue){var previousValue=initialValue;return flattenEach(geojson,(function(currentFeature,featureIndex,multiFeatureIndex){previousValue=0===featureIndex&&0===multiFeatureIndex&&void 0===initialValue?currentFeature:callback(previousValue,currentFeature,featureIndex,multiFeatureIndex)})),previousValue},exports.segmentEach=segmentEach,exports.segmentReduce=function(geojson,callback,initialValue){var previousValue=initialValue,started=!1;return segmentEach(geojson,(function(currentSegment,featureIndex,multiFeatureIndex,geometryIndex,segmentIndex){previousValue=!1===started&&void 0===initialValue?currentSegment:callback(previousValue,currentSegment,featureIndex,multiFeatureIndex,geometryIndex,segmentIndex),started=!0})),previousValue},exports.lineEach=lineEach,exports.lineReduce=function(geojson,callback,initialValue){var previousValue=initialValue;return lineEach(geojson,(function(currentLine,featureIndex,multiFeatureIndex,geometryIndex){previousValue=0===featureIndex&&void 0===initialValue?currentLine:callback(previousValue,currentLine,featureIndex,multiFeatureIndex,geometryIndex)})),previousValue},exports.findSegment=function(geojson,options){if(options=options||{},!helpers.isObject(options))throw new Error("options is invalid");var geometry,featureIndex=options.featureIndex||0,multiFeatureIndex=options.multiFeatureIndex||0,geometryIndex=options.geometryIndex||0,segmentIndex=options.segmentIndex||0,properties=options.properties;switch(geojson.type){case"FeatureCollection":featureIndex<0&&(featureIndex=geojson.features.length+featureIndex),properties=properties||geojson.features[featureIndex].properties,geometry=geojson.features[featureIndex].geometry;break;case"Feature":properties=properties||geojson.properties,geometry=geojson.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":geometry=geojson;break;default:throw new Error("geojson is invalid")}if(null===geometry)return null;var coords=geometry.coordinates;switch(geometry.type){case"Point":case"MultiPoint":return null;case"LineString":return segmentIndex<0&&(segmentIndex=coords.length+segmentIndex-1),helpers.lineString([coords[segmentIndex],coords[segmentIndex+1]],properties,options);case"Polygon":return geometryIndex<0&&(geometryIndex=coords.length+geometryIndex),segmentIndex<0&&(segmentIndex=coords[geometryIndex].length+segmentIndex-1),helpers.lineString([coords[geometryIndex][segmentIndex],coords[geometryIndex][segmentIndex+1]],properties,options);case"MultiLineString":return multiFeatureIndex<0&&(multiFeatureIndex=coords.length+multiFeatureIndex),segmentIndex<0&&(segmentIndex=coords[multiFeatureIndex].length+segmentIndex-1),helpers.lineString([coords[multiFeatureIndex][segmentIndex],coords[multiFeatureIndex][segmentIndex+1]],properties,options);case"MultiPolygon":return multiFeatureIndex<0&&(multiFeatureIndex=coords.length+multiFeatureIndex),geometryIndex<0&&(geometryIndex=coords[multiFeatureIndex].length+geometryIndex),segmentIndex<0&&(segmentIndex=coords[multiFeatureIndex][geometryIndex].length-segmentIndex-1),helpers.lineString([coords[multiFeatureIndex][geometryIndex][segmentIndex],coords[multiFeatureIndex][geometryIndex][segmentIndex+1]],properties,options)}throw new Error("geojson is invalid")},exports.findPoint=function(geojson,options){if(options=options||{},!helpers.isObject(options))throw new Error("options is invalid");var geometry,featureIndex=options.featureIndex||0,multiFeatureIndex=options.multiFeatureIndex||0,geometryIndex=options.geometryIndex||0,coordIndex=options.coordIndex||0,properties=options.properties;switch(geojson.type){case"FeatureCollection":featureIndex<0&&(featureIndex=geojson.features.length+featureIndex),properties=properties||geojson.features[featureIndex].properties,geometry=geojson.features[featureIndex].geometry;break;case"Feature":properties=properties||geojson.properties,geometry=geojson.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":geometry=geojson;break;default:throw new Error("geojson is invalid")}if(null===geometry)return null;var coords=geometry.coordinates;switch(geometry.type){case"Point":return helpers.point(coords,properties,options);case"MultiPoint":return multiFeatureIndex<0&&(multiFeatureIndex=coords.length+multiFeatureIndex),helpers.point(coords[multiFeatureIndex],properties,options);case"LineString":return coordIndex<0&&(coordIndex=coords.length+coordIndex),helpers.point(coords[coordIndex],properties,options);case"Polygon":return geometryIndex<0&&(geometryIndex=coords.length+geometryIndex),coordIndex<0&&(coordIndex=coords[geometryIndex].length+coordIndex),helpers.point(coords[geometryIndex][coordIndex],properties,options);case"MultiLineString":return multiFeatureIndex<0&&(multiFeatureIndex=coords.length+multiFeatureIndex),coordIndex<0&&(coordIndex=coords[multiFeatureIndex].length+coordIndex),helpers.point(coords[multiFeatureIndex][coordIndex],properties,options);case"MultiPolygon":return multiFeatureIndex<0&&(multiFeatureIndex=coords.length+multiFeatureIndex),geometryIndex<0&&(geometryIndex=coords[multiFeatureIndex].length+geometryIndex),coordIndex<0&&(coordIndex=coords[multiFeatureIndex][geometryIndex].length-coordIndex),helpers.point(coords[multiFeatureIndex][geometryIndex][coordIndex],properties,options)}throw new Error("geojson is invalid")}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return TRACKED_LAYER_DESCRIPTOR})),__webpack_require__.d(__webpack_exports__,"b",(function(){return copyPersistentState}));const TRACKED_LAYER_DESCRIPTOR="__trackedLayerDescriptor";function copyPersistentState(input){if("object"!=typeof input||null===input)return input;const copyInput=Array.isArray(input)?[]:{};for(const key in input)key.startsWith("__")||(copyInput[key]=copyPersistentState(input[key]));return copyInput}},function(module,exports,__webpack_require__){const{MAX_SAFE_COMPONENT_LENGTH:MAX_SAFE_COMPONENT_LENGTH}=__webpack_require__(93),debug=__webpack_require__(94),re=(exports=module.exports={}).re=[],src=exports.src=[],t=exports.t={};let R=0;const createToken=(name,value,isGlobal)=>{const index=R++;debug(index,value),t[name]=index,src[index]=value,re[index]=new RegExp(value,isGlobal?"g":void 0)};createToken("NUMERICIDENTIFIER","0|[1-9]\\d*"),createToken("NUMERICIDENTIFIERLOOSE","[0-9]+"),createToken("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),createToken("MAINVERSION",`(${src[t.NUMERICIDENTIFIER]})\\.(${src[t.NUMERICIDENTIFIER]})\\.(${src[t.NUMERICIDENTIFIER]})`),createToken("MAINVERSIONLOOSE",`(${src[t.NUMERICIDENTIFIERLOOSE]})\\.(${src[t.NUMERICIDENTIFIERLOOSE]})\\.(${src[t.NUMERICIDENTIFIERLOOSE]})`),createToken("PRERELEASEIDENTIFIER",`(?:${src[t.NUMERICIDENTIFIER]}|${src[t.NONNUMERICIDENTIFIER]})`),createToken("PRERELEASEIDENTIFIERLOOSE",`(?:${src[t.NUMERICIDENTIFIERLOOSE]}|${src[t.NONNUMERICIDENTIFIER]})`),createToken("PRERELEASE",`(?:-(${src[t.PRERELEASEIDENTIFIER]}(?:\\.${src[t.PRERELEASEIDENTIFIER]})*))`),createToken("PRERELEASELOOSE",`(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`),createToken("BUILDIDENTIFIER","[0-9A-Za-z-]+"),createToken("BUILD",`(?:\\+(${src[t.BUILDIDENTIFIER]}(?:\\.${src[t.BUILDIDENTIFIER]})*))`),createToken("FULLPLAIN",`v?${src[t.MAINVERSION]}${src[t.PRERELEASE]}?${src[t.BUILD]}?`),createToken("FULL",`^${src[t.FULLPLAIN]}$`),createToken("LOOSEPLAIN",`[v=\\s]*${src[t.MAINVERSIONLOOSE]}${src[t.PRERELEASELOOSE]}?${src[t.BUILD]}?`),createToken("LOOSE",`^${src[t.LOOSEPLAIN]}$`),createToken("GTLT","((?:<|>)?=?)"),createToken("XRANGEIDENTIFIERLOOSE",src[t.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*"),createToken("XRANGEIDENTIFIER",src[t.NUMERICIDENTIFIER]+"|x|X|\\*"),createToken("XRANGEPLAIN",`[v=\\s]*(${src[t.XRANGEIDENTIFIER]})(?:\\.(${src[t.XRANGEIDENTIFIER]})(?:\\.(${src[t.XRANGEIDENTIFIER]})(?:${src[t.PRERELEASE]})?${src[t.BUILD]}?)?)?`),createToken("XRANGEPLAINLOOSE",`[v=\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})(?:\\.(${src[t.XRANGEIDENTIFIERLOOSE]})(?:\\.(${src[t.XRANGEIDENTIFIERLOOSE]})(?:${src[t.PRERELEASELOOSE]})?${src[t.BUILD]}?)?)?`),createToken("XRANGE",`^${src[t.GTLT]}\\s*${src[t.XRANGEPLAIN]}$`),createToken("XRANGELOOSE",`^${src[t.GTLT]}\\s*${src[t.XRANGEPLAINLOOSE]}$`),createToken("COERCE",`(^|[^\\d])(\\d{1,${MAX_SAFE_COMPONENT_LENGTH}})(?:\\.(\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?(?:\\.(\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?(?:$|[^\\d])`),createToken("COERCERTL",src[t.COERCE],!0),createToken("LONETILDE","(?:~>?)"),createToken("TILDETRIM",`(\\s*)${src[t.LONETILDE]}\\s+`,!0),exports.tildeTrimReplace="$1~",createToken("TILDE",`^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`),createToken("TILDELOOSE",`^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`),createToken("LONECARET","(?:\\^)"),createToken("CARETTRIM",`(\\s*)${src[t.LONECARET]}\\s+`,!0),exports.caretTrimReplace="$1^",createToken("CARET",`^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`),createToken("CARETLOOSE",`^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`),createToken("COMPARATORLOOSE",`^${src[t.GTLT]}\\s*(${src[t.LOOSEPLAIN]})$|^$`),createToken("COMPARATOR",`^${src[t.GTLT]}\\s*(${src[t.FULLPLAIN]})$|^$`),createToken("COMPARATORTRIM",`(\\s*)${src[t.GTLT]}\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`,!0),exports.comparatorTrimReplace="$1$2$3",createToken("HYPHENRANGE",`^\\s*(${src[t.XRANGEPLAIN]})\\s+-\\s+(${src[t.XRANGEPLAIN]})\\s*$`),createToken("HYPHENRANGELOOSE",`^\\s*(${src[t.XRANGEPLAINLOOSE]})\\s+-\\s+(${src[t.XRANGEPLAINLOOSE]})\\s*$`),createToken("STAR","(<|>)?=?\\s*\\*"),createToken("GTE0","^\\s*>=\\s*0.0.0\\s*$"),createToken("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},function(module,exports,__webpack_require__){const{MAX_LENGTH:MAX_LENGTH}=__webpack_require__(93),{re:re,t:t}=__webpack_require__(73),SemVer=__webpack_require__(43);module.exports=(version,options)=>{if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),version instanceof SemVer)return version;if("string"!=typeof version)return null;if(version.length>MAX_LENGTH)return null;if(!(options.loose?re[t.LOOSE]:re[t.FULL]).test(version))return null;try{return new SemVer(version,options)}catch(er){return null}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ESDocField}));var _tooltips_es_tooltip_property__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(206),_tooltips_tooltip_property__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(69),_src_plugins_data_public__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(10),_field__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(85);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class ESDocField extends _field__WEBPACK_IMPORTED_MODULE_3__.a{constructor({fieldName:fieldName,source:source,origin:origin,canReadFromGeoJson:canReadFromGeoJson=!0}){super({fieldName:fieldName,origin:origin}),_defineProperty(this,"_source",void 0),_defineProperty(this,"_canReadFromGeoJson",void 0),this._source=source,this._canReadFromGeoJson=canReadFromGeoJson}canValueBeFormatted(){return!0}getSource(){return this._source}async _getIndexPatternField(){const indexPatternField=(await this._source.getIndexPattern()).fields.getByName(this.getName());return indexPatternField&&_src_plugins_data_public__WEBPACK_IMPORTED_MODULE_2__.indexPatterns.isNestedField(indexPatternField)?void 0:indexPatternField}async createTooltipProperty(value){const indexPattern=await this._source.getIndexPattern(),tooltipProperty=new _tooltips_tooltip_property__WEBPACK_IMPORTED_MODULE_1__.a(this.getName(),await this.getLabel(),value);return new _tooltips_es_tooltip_property__WEBPACK_IMPORTED_MODULE_0__.a(tooltipProperty,indexPattern,this)}async getDataType(){const indexPatternField=await this._getIndexPatternField();return indexPatternField?indexPatternField.type:""}async getLabel(){const indexPatternField=await this._getIndexPatternField();return indexPatternField&&indexPatternField.displayName?indexPatternField.displayName:super.getLabel()}supportsFieldMeta(){return!0}canReadFromGeoJson(){return this._canReadFromGeoJson}async getExtendedStatsFieldMetaRequest(){const indexPatternField=await this._getIndexPatternField();if(!indexPatternField||"number"!==indexPatternField.type&&"date"!==indexPatternField.type)return null;const metricAggConfig={};return indexPatternField.scripted?metricAggConfig.script={source:indexPatternField.script,lang:indexPatternField.lang}:metricAggConfig.field=this.getName(),{[this.getName()+"_range"]:{extended_stats:metricAggConfig}}}async getPercentilesFieldMetaRequest(percentiles){const indexPatternField=await this._getIndexPatternField();if(!indexPatternField||"number"!==indexPatternField.type)return null;const metricAggConfig={percents:[0,...percentiles]};return indexPatternField.scripted?metricAggConfig.script={source:indexPatternField.script,lang:indexPatternField.lang}:metricAggConfig.field=this.getName(),{[this.getName()+"_percentiles"]:{percentiles:metricAggConfig}}}async getCategoricalFieldMetaRequest(size){const indexPatternField=await this._getIndexPatternField();if(!indexPatternField||size<=0)return null;const topTerms={size:size-1};return indexPatternField.scripted?topTerms.script={source:indexPatternField.script,lang:indexPatternField.lang}:topTerms.field=this.getName(),{[this.getName()+"_terms"]:{terms:topTerms}}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return tile_layer_TileLayer}));var obj,key,value,layers_layer=__webpack_require__(110),external_kbnSharedDeps_Lodash_=__webpack_require__(23),external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_),constants=__webpack_require__(0);class tile_style_TileStyle{constructor(){var obj,key,value;value=void 0,(key="_descriptor")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this._descriptor={type:constants.LAYER_STYLE_TYPE.TILE}}getType(){return constants.LAYER_STYLE_TYPE.TILE}renderEditor(){return null}}class tile_layer_TileLayer extends layers_layer.a{static createDescriptor(options,mapColors){const tileLayerDescriptor=super.createDescriptor(options,mapColors);return tileLayerDescriptor.type=tile_layer_TileLayer.type,tileLayerDescriptor.alpha=external_kbnSharedDeps_Lodash_default.a.get(options,"alpha",1),tileLayerDescriptor.style={type:constants.LAYER_STYLE_TYPE.TILE},tileLayerDescriptor}constructor({source:source,layerDescriptor:layerDescriptor}){super({source:source,layerDescriptor:layerDescriptor}),this._style=new tile_style_TileStyle}getStyleForEditing(){return this._style}getStyle(){return this._style}getCurrentStyle(){return this._style}async syncData({startLoading:startLoading,stopLoading:stopLoading,onLoadError:onLoadError,dataFilters:dataFilters}){if(this.getSourceDataRequest())return;const requestToken=Symbol(`layer-source-refresh:${this.getId()} - source`);startLoading(constants.SOURCE_DATA_REQUEST_ID,requestToken,dataFilters);try{const url=await this.getSource().getUrlTemplate();stopLoading(constants.SOURCE_DATA_REQUEST_ID,requestToken,{url:url},{})}catch(error){onLoadError(constants.SOURCE_DATA_REQUEST_ID,requestToken,error.message)}}_getMbLayerId(){return this.makeMbLayerId("raster")}getMbLayerIds(){return[this._getMbLayerId()]}ownsMbLayerId(mbLayerId){return this._getMbLayerId()===mbLayerId}ownsMbSourceId(mbSourceId){return this.getId()===mbSourceId}syncLayerWithMB(mbMap){const source=mbMap.getSource(this.getId()),mbLayerId=this._getMbLayerId();if(!source){const sourceDataRequest=this.getSourceDataRequest();if(!sourceDataRequest)return;const tmsSourceData=sourceDataRequest.getData();if(!tmsSourceData||!tmsSourceData.url)return;const mbSourceId=this._getMbSourceId();mbMap.addSource(mbSourceId,{type:"raster",tiles:[tmsSourceData.url],tileSize:256,scheme:"xyz"}),mbMap.addLayer({id:mbLayerId,type:"raster",source:mbSourceId,minzoom:this._descriptor.minZoom,maxzoom:this._descriptor.maxZoom})}this._setTileLayerProperties(mbMap,mbLayerId)}_setTileLayerProperties(mbMap,mbLayerId){this.syncVisibilityWithMb(mbMap,mbLayerId),mbMap.setLayerZoomRange(mbLayerId,this._descriptor.minZoom,this._descriptor.maxZoom),mbMap.setPaintProperty(mbLayerId,"raster-opacity",this.getAlpha())}getLayerTypeIconName(){return"grid"}}obj=tile_layer_TileLayer,key="type",value=constants.LAYER_TYPE.TILE,key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ValidatedRange}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_elastic_eui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function isWithinRange(min,max,value){return value>=min&&value<=max}class ValidatedRange extends react__WEBPACK_IMPORTED_MODULE_0___default.a.Component{constructor(...args){super(...args),_defineProperty(this,"state",{}),_defineProperty(this,"_onRangeChange",e=>{const sanitizedValue=parseFloat(e.target.value,10);let newValue=isNaN(sanitizedValue)?"":sanitizedValue;newValue=Number(newValue);const isValid=!!isWithinRange(this.props.min,this.props.max,newValue);this.setState({value:newValue,isValid:isValid}),isValid&&this.props.onChange(newValue)})}static getDerivedStateFromProps(nextProps,prevState){return nextProps.value!==prevState.prevValue?{value:nextProps.value,prevValue:nextProps.value,isValid:isWithinRange(nextProps.min,nextProps.max,nextProps.value)}:null}render(){const{max:max,min:min,value:value,onChange:onChange,...rest}=this.props,rangeInput=react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiRange,_extends({min:min,max:max,value:this.state.value.toString(),onChange:this._onRangeChange},rest));return this.state.isValid?rangeInput:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,rangeInput,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiFormErrorText,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage,{id:"xpack.maps.validatedRange.rangeErrorMessage",defaultMessage:"Must be between {min} and {max}",values:{min:min,max:max}})))}}},function(module,exports,__webpack_require__){"use strict";var ReflectOwnKeys,R="object"==typeof Reflect?Reflect:null,ReflectApply=R&&"function"==typeof R.apply?R.apply:function(target,receiver,args){return Function.prototype.apply.call(target,receiver,args)};ReflectOwnKeys=R&&"function"==typeof R.ownKeys?R.ownKeys:Object.getOwnPropertySymbols?function(target){return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))}:function(target){return Object.getOwnPropertyNames(target)};var NumberIsNaN=Number.isNaN||function(value){return value!=value};function EventEmitter(){EventEmitter.init.call(this)}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function $getMaxListeners(that){return void 0===that._maxListeners?EventEmitter.defaultMaxListeners:that._maxListeners}function _addListener(target,type,listener,prepend){var m,events,existing,warning;if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener);if(void 0===(events=target._events)?(events=target._events=Object.create(null),target._eventsCount=0):(void 0!==events.newListener&&(target.emit("newListener",type,listener.listener?listener.listener:listener),events=target._events),existing=events[type]),void 0===existing)existing=events[type]=listener,++target._eventsCount;else if("function"==typeof existing?existing=events[type]=prepend?[listener,existing]:[existing,listener]:prepend?existing.unshift(listener):existing.push(listener),(m=$getMaxListeners(target))>0&&existing.length>m&&!existing.warned){existing.warned=!0;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+" "+String(type)+" listeners added. Use emitter.setMaxListeners() to increase limit");w.name="MaxListenersExceededWarning",w.emitter=target,w.type=type,w.count=existing.length,warning=w,console&&console.warn&&console.warn(warning)}return target}function onceWrapper(){for(var args=[],i=0;i<arguments.length;i++)args.push(arguments[i]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,ReflectApply(this.listener,this.target,args))}function _onceWrap(target,type,listener){var state={fired:!1,wrapFn:void 0,target:target,type:type,listener:listener},wrapped=onceWrapper.bind(state);return wrapped.listener=listener,state.wrapFn=wrapped,wrapped}function _listeners(target,type,unwrap){var events=target._events;if(void 0===events)return[];var evlistener=events[type];return void 0===evlistener?[]:"function"==typeof evlistener?unwrap?[evlistener.listener||evlistener]:[evlistener]:unwrap?function(arr){for(var ret=new Array(arr.length),i=0;i<ret.length;++i)ret[i]=arr[i].listener||arr[i];return ret}(evlistener):arrayClone(evlistener,evlistener.length)}function listenerCount(type){var events=this._events;if(void 0!==events){var evlistener=events[type];if("function"==typeof evlistener)return 1;if(void 0!==evlistener)return evlistener.length}return 0}function arrayClone(arr,n){for(var copy=new Array(n),i=0;i<n;++i)copy[i]=arr[i];return copy}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(arg){if("number"!=typeof arg||arg<0||NumberIsNaN(arg))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+arg+".");defaultMaxListeners=arg}}),EventEmitter.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function(n){if("number"!=typeof n||n<0||NumberIsNaN(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this},EventEmitter.prototype.getMaxListeners=function(){return $getMaxListeners(this)},EventEmitter.prototype.emit=function(type){for(var args=[],i=1;i<arguments.length;i++)args.push(arguments[i]);var doError="error"===type,events=this._events;if(void 0!==events)doError=doError&&void 0===events.error;else if(!doError)return!1;if(doError){var er;if(args.length>0&&(er=args[0]),er instanceof Error)throw er;var err=new Error("Unhandled error."+(er?" ("+er.message+")":""));throw err.context=er,err}var handler=events[type];if(void 0===handler)return!1;if("function"==typeof handler)ReflectApply(handler,this,args);else{var len=handler.length,listeners=arrayClone(handler,len);for(i=0;i<len;++i)ReflectApply(listeners[i],this,args)}return!0},EventEmitter.prototype.addListener=function(type,listener){return _addListener(this,type,listener,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(type,listener){return _addListener(this,type,listener,!0)},EventEmitter.prototype.once=function(type,listener){if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener);return this.on(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.prependOnceListener=function(type,listener){if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener);return this.prependListener(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.removeListener=function(type,listener){var list,events,position,i,originalListener;if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener);if(void 0===(events=this._events))return this;if(void 0===(list=events[type]))return this;if(list===listener||list.listener===listener)0==--this._eventsCount?this._events=Object.create(null):(delete events[type],events.removeListener&&this.emit("removeListener",type,list.listener||listener));else if("function"!=typeof list){for(position=-1,i=list.length-1;i>=0;i--)if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener,position=i;break}if(position<0)return this;0===position?list.shift():function(list,index){for(;index+1<list.length;index++)list[index]=list[index+1];list.pop()}(list,position),1===list.length&&(events[type]=list[0]),void 0!==events.removeListener&&this.emit("removeListener",type,originalListener||listener)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function(type){var listeners,events,i;if(void 0===(events=this._events))return this;if(void 0===events.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==events[type]&&(0==--this._eventsCount?this._events=Object.create(null):delete events[type]),this;if(0===arguments.length){var key,keys=Object.keys(events);for(i=0;i<keys.length;++i)"removeListener"!==(key=keys[i])&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(listeners=events[type]))this.removeListener(type,listeners);else if(void 0!==listeners)for(i=listeners.length-1;i>=0;i--)this.removeListener(type,listeners[i]);return this},EventEmitter.prototype.listeners=function(type){return _listeners(this,type,!0)},EventEmitter.prototype.rawListeners=function(type){return _listeners(this,type,!1)},EventEmitter.listenerCount=function(emitter,type){return"function"==typeof emitter.listenerCount?emitter.listenerCount(type):listenerCount.call(emitter,type)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]}},function(module,exports,__webpack_require__){(function(Buffer){function objectToString(o){return Object.prototype.toString.call(o)}exports.isArray=function(arg){return Array.isArray?Array.isArray(arg):"[object Array]"===objectToString(arg)},exports.isBoolean=function(arg){return"boolean"==typeof arg},exports.isNull=function(arg){return null===arg},exports.isNullOrUndefined=function(arg){return null==arg},exports.isNumber=function(arg){return"number"==typeof arg},exports.isString=function(arg){return"string"==typeof arg},exports.isSymbol=function(arg){return"symbol"==typeof arg},exports.isUndefined=function(arg){return void 0===arg},exports.isRegExp=function(re){return"[object RegExp]"===objectToString(re)},exports.isObject=function(arg){return"object"==typeof arg&&null!==arg},exports.isDate=function(d){return"[object Date]"===objectToString(d)},exports.isError=function(e){return"[object Error]"===objectToString(e)||e instanceof Error},exports.isFunction=function(arg){return"function"==typeof arg},exports.isPrimitive=function(arg){return null===arg||"boolean"==typeof arg||"number"==typeof arg||"string"==typeof arg||"symbol"==typeof arg||void 0===arg},exports.isBuffer=Buffer.isBuffer}).call(this,__webpack_require__(135).Buffer)},function(module,exports){"function"==typeof Object.create?module.exports=function(ctor,superCtor){superCtor&&(ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}}))}:module.exports=function(ctor,superCtor){if(superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(140);module.exports=bind.call(Function.call,Object.prototype.hasOwnProperty)},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(48),callBind=__webpack_require__(338),$indexOf=callBind(GetIntrinsic("String.prototype.indexOf"));module.exports=function(name,allowMissing){var intrinsic=GetIntrinsic(name,!!allowMissing);return"function"==typeof intrinsic&&$indexOf(name,".prototype.")>-1?callBind(intrinsic):intrinsic}},function(module,exports,__webpack_require__){"use strict";var ES5Type=__webpack_require__(340);module.exports=function(x){return"symbol"==typeof x?"Symbol":ES5Type(x)}},function(module,__webpack_exports__,__webpack_require__){"use strict";function isValidStringConfig(value){return"string"==typeof value&&""!==value}__webpack_require__.d(__webpack_exports__,"a",(function(){return isValidStringConfig}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AbstractField}));var _common_constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_tooltips_tooltip_property__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(69);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class AbstractField{constructor({fieldName:fieldName,origin:origin}){_defineProperty(this,"_fieldName",void 0),_defineProperty(this,"_origin",void 0),this._fieldName=fieldName,this._origin=origin||_common_constants__WEBPACK_IMPORTED_MODULE_0__.FIELD_ORIGIN.SOURCE}getName(){return this._fieldName}getRootName(){return this.getName()}canValueBeFormatted(){return!1}getSource(){throw new Error("must implement Field#getSource")}isValid(){return!!this._fieldName}async getDataType(){return"string"}async getLabel(){return this._fieldName}async createTooltipProperty(value){const label=await this.getLabel();return new _tooltips_tooltip_property__WEBPACK_IMPORTED_MODULE_1__.a(this.getName(),label,value)}getOrigin(){return this._origin}supportsFieldMeta(){return!1}async getExtendedStatsFieldMetaRequest(){return null}async getPercentilesFieldMetaRequest(percentiles){return null}async getCategoricalFieldMetaRequest(size){return null}supportsAutoDomain(){return!0}canReadFromGeoJson(){return!0}isEqual(field){return this._origin===field.getOrigin()&&this._fieldName===field.getName()}}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){for(var classes=[],i=0;i<arguments.length;i++){var arg=arguments[i];if(arg){var argType=typeof arg;if("string"===argType||"number"===argType)classes.push(arg);else if(Array.isArray(arg)&&arg.length){var inner=classNames.apply(null,arg);inner&&classes.push(inner)}else if("object"===argType)for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&classes.push(key)}}return classes.join(" ")}module.exports?(classNames.default=classNames,module.exports=classNames):void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,[]))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return DEFAULT_METRIC})),__webpack_require__.d(__webpack_exports__,"a",(function(){return es_agg_source_AbstractESAggSource}));var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),es_source=__webpack_require__(205),constants=__webpack_require__(0),es_doc_field=__webpack_require__(75),tooltip_property=__webpack_require__(69);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class top_term_percentage_field_TopTermPercentageField{constructor(topTermAggField,canReadFromGeoJson=!0){_defineProperty(this,"_topTermAggField",void 0),_defineProperty(this,"_canReadFromGeoJson",void 0),this._topTermAggField=topTermAggField,this._canReadFromGeoJson=canReadFromGeoJson}getSource(){return this._topTermAggField.getSource()}getOrigin(){return this._topTermAggField.getOrigin()}getName(){return`${this._topTermAggField.getName()}${constants.TOP_TERM_PERCENTAGE_SUFFIX}`}getRootName(){return""}async getLabel(){return await this._topTermAggField.getLabel()+"%"}isValid(){return this._topTermAggField.isValid()}async getDataType(){return"number"}async createTooltipProperty(value){return new tooltip_property.a(this.getName(),await this.getLabel(),value)}getValueAggDsl(){return null}getBucketCount(){return 0}supportsAutoDomain(){return this._canReadFromGeoJson}supportsFieldMeta(){return!1}async getExtendedStatsFieldMetaRequest(){return null}async getPercentilesFieldMetaRequest(percentiles){return null}async getCategoricalFieldMetaRequest(){return null}canValueBeFormatted(){return!1}canReadFromGeoJson(){return this._canReadFromGeoJson}isEqual(field){return field.getName()===this.getName()}}var es_tooltip_property=__webpack_require__(206);class es_agg_tooltip_property_ESAggTooltipProperty extends es_tooltip_property.a{constructor(tooltipProperty,indexPattern,field,aggType){var obj,key,value;super(tooltipProperty,indexPattern,field),value=void 0,(key="_aggType")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this._aggType=aggType}isFilterable(){return this._aggType===constants.AGG_TYPE.TERMS}}function count_agg_field_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class count_agg_field_CountAggField{constructor({label:label,source:source,origin:origin,canReadFromGeoJson:canReadFromGeoJson=!0}){count_agg_field_defineProperty(this,"_source",void 0),count_agg_field_defineProperty(this,"_origin",void 0),count_agg_field_defineProperty(this,"_label",void 0),count_agg_field_defineProperty(this,"_canReadFromGeoJson",void 0),this._source=source,this._origin=origin,this._label=label,this._canReadFromGeoJson=canReadFromGeoJson}_getAggType(){return constants.AGG_TYPE.COUNT}getSource(){return this._source}getOrigin(){return this._origin}getName(){return this._source.getAggKey(this._getAggType(),this.getRootName())}getRootName(){return""}async getLabel(){return this._label?this._label:this._source.getAggLabel(constants.AGG_TYPE.COUNT,"")}isValid(){return!0}async getDataType(){return"number"}async createTooltipProperty(value){const indexPattern=await this._source.getIndexPattern(),tooltipProperty=new tooltip_property.a(this.getName(),await this.getLabel(),value);return new es_agg_tooltip_property_ESAggTooltipProperty(tooltipProperty,indexPattern,this,this._getAggType())}getValueAggDsl(indexPattern){return null}supportsFieldMeta(){return!1}getBucketCount(){return 0}canValueBeFormatted(){return!1}async getExtendedStatsFieldMetaRequest(){return null}async getPercentilesFieldMetaRequest(percentiles){return null}async getCategoricalFieldMetaRequest(size){return null}supportsAutoDomain(){return!!this._canReadFromGeoJson||this.supportsFieldMeta()}canReadFromGeoJson(){return this._canReadFromGeoJson}isEqual(field){return field.getName()===this.getName()}}var is_metric_countable=__webpack_require__(143),elasticsearch_util=__webpack_require__(40);function agg_field_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class agg_field_AggField extends count_agg_field_CountAggField{constructor(params){super(params),agg_field_defineProperty(this,"_esDocField",void 0),agg_field_defineProperty(this,"_aggType",void 0),this._esDocField=params.esDocField,this._aggType=params.aggType}isValid(){return!!this._esDocField}supportsFieldMeta(){return!Object(is_metric_countable.a)(this._getAggType())}canValueBeFormatted(){return this._getAggType()!==constants.AGG_TYPE.UNIQUE_COUNT}_getAggType(){return this._aggType}getValueAggDsl(indexPattern){const field=Object(elasticsearch_util.l)(indexPattern,this.getRootName()),aggType=this._getAggType(),aggBody=aggType===constants.AGG_TYPE.TERMS?{size:1,shard_size:5}:{};return{[aggType]:Object(elasticsearch_util.a)(aggBody,field)}}getRootName(){return this._esDocField?this._esDocField.getName():""}async getLabel(){return this._label?this._label:this._source.getAggLabel(this._aggType,this._esDocField?await this._esDocField.getLabel():"")}async getDataType(){return this._getAggType()===constants.AGG_TYPE.TERMS?"string":"number"}getBucketCount(){return this._getAggType()===constants.AGG_TYPE.TERMS?5:0}async getExtendedStatsFieldMetaRequest(){return this._esDocField?await this._esDocField.getExtendedStatsFieldMetaRequest():null}async getPercentilesFieldMetaRequest(percentiles){return this._esDocField?await this._esDocField.getPercentilesFieldMetaRequest(percentiles):null}async getCategoricalFieldMetaRequest(size){return this._esDocField?await this._esDocField.getCategoricalFieldMetaRequest(size):null}}var ordinal_suffix=__webpack_require__(198);class percentile_agg_field_PercentileAggField extends agg_field_AggField{constructor(params){var obj,key,value;super({...params,aggType:constants.AGG_TYPE.PERCENTILE}),value=void 0,(key="_percentile")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this._percentile=params.percentile}supportsFieldMeta(){return!0}canValueBeFormatted(){return!0}async getLabel(){if(this._label)return this._label;if(50===this._percentile){return`${external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.fields.percentileMedianLabek",{defaultMessage:"median"})} ${this.getRootName()}`}const suffix=Object(ordinal_suffix.a)(this._percentile);return`${this._percentile}${suffix} ${this._source.getAggLabel(this._getAggType(),this.getRootName())}`}getName(){return`${super.getName()}_${this._percentile}`}getValueAggDsl(indexPattern){const field=Object(elasticsearch_util.l)(indexPattern,this.getRootName()),dsl=Object(elasticsearch_util.a)({},field);return dsl.percents=[this._percentile],{percentiles:dsl}}}function esAggFieldsFactory(aggDescriptor,source,origin,canReadFromGeoJson=!0){let aggField;aggField=aggDescriptor.type===constants.AGG_TYPE.COUNT?new count_agg_field_CountAggField({label:aggDescriptor.label,source:source,origin:origin,canReadFromGeoJson:canReadFromGeoJson}):aggDescriptor.type===constants.AGG_TYPE.PERCENTILE?new percentile_agg_field_PercentileAggField({label:aggDescriptor.label,esDocField:"field"in aggDescriptor&&aggDescriptor.field?new es_doc_field.a({fieldName:aggDescriptor.field,source:source,origin:origin}):void 0,percentile:"percentile"in aggDescriptor&&"number"==typeof aggDescriptor.percentile?aggDescriptor.percentile:constants.DEFAULT_PERCENTILE,source:source,origin:origin,canReadFromGeoJson:canReadFromGeoJson}):new agg_field_AggField({label:aggDescriptor.label,esDocField:"field"in aggDescriptor&&aggDescriptor.field?new es_doc_field.a({fieldName:aggDescriptor.field,source:source,origin:origin}):void 0,aggType:aggDescriptor.type,source:source,origin:origin,canReadFromGeoJson:canReadFromGeoJson});const aggFields=[aggField];return"field"in aggDescriptor&&aggDescriptor.type===constants.AGG_TYPE.TERMS&&aggFields.push(new top_term_percentage_field_TopTermPercentageField(aggField,canReadFromGeoJson)),aggFields}__webpack_require__(207);var get_agg_key=__webpack_require__(67);function es_agg_source_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const DEFAULT_METRIC={type:constants.AGG_TYPE.COUNT};class es_agg_source_AbstractESAggSource extends es_source.a{static createDescriptor(descriptor){return{...es_source.a.createDescriptor(descriptor),type:descriptor.type?descriptor.type:"",metrics:descriptor.metrics&&descriptor.metrics.length>0?descriptor.metrics:[DEFAULT_METRIC]}}constructor(descriptor,inspectorAdapters,canReadFromGeoJson=!0){super(descriptor,inspectorAdapters),es_agg_source_defineProperty(this,"_metricFields",void 0),es_agg_source_defineProperty(this,"_canReadFromGeoJson",void 0),this._metricFields=[],this._canReadFromGeoJson=canReadFromGeoJson,descriptor.metrics&&descriptor.metrics.forEach(aggDescriptor=>{this._metricFields.push(...esAggFieldsFactory(aggDescriptor,this,this.getOriginForField(),this._canReadFromGeoJson))})}getFieldByName(fieldName){return this.getMetricFieldForName(fieldName)}createField({fieldName:fieldName}){throw new Error("Cannot create a new field from just a fieldname for an es_agg_source.")}getMetricFieldForName(fieldName){const targetMetricField=this.getMetricFields().find(metricField=>metricField.getName()===fieldName);return targetMetricField||null}getOriginForField(){return constants.FIELD_ORIGIN.SOURCE}getMetricFields(){const metrics=this._metricFields.filter(esAggField=>esAggField.isValid());return 0===metrics.length?esAggFieldsFactory({type:constants.AGG_TYPE.COUNT},this,this.getOriginForField(),this._canReadFromGeoJson):metrics}getAggKey(aggType,fieldName){return Object(get_agg_key.b)({aggType:aggType,aggFieldName:fieldName})}getAggLabel(aggType,fieldLabel){switch(aggType){case constants.AGG_TYPE.COUNT:return constants.COUNT_PROP_LABEL;case constants.AGG_TYPE.TERMS:return external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esAggSource.topTermLabel",{defaultMessage:"Top {fieldLabel}",values:{fieldLabel:fieldLabel}});default:return`${aggType} ${fieldLabel}`}}async getFields(){return this.getMetricFields()}getValueAggsDsl(indexPattern){const valueAggsDsl={};return this.getMetricFields().forEach(esAggMetric=>{esAggMetric.getValueAggDsl(indexPattern)&&(valueAggsDsl[esAggMetric.getName()]=esAggMetric.getValueAggDsl(indexPattern))}),valueAggsDsl}async getTooltipProperties(properties){const metricFields=await this.getFields(),promises=[];return metricFields.forEach(metricField=>{let value;for(const key in properties)if(properties.hasOwnProperty(key)&&metricField.getName()===key){value=properties[key];break}const tooltipPromise=metricField.createTooltipProperty(value);promises.push(tooltipPromise)}),await Promise.all(promises)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return clustersTitle})),__webpack_require__.d(__webpack_exports__,"c",(function(){return heatmapTitle})),__webpack_require__.d(__webpack_exports__,"a",(function(){return es_geo_grid_source_ESGeoGridSource}));var external_kbnSharedDeps_React_=__webpack_require__(2),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),external_kbnSharedDeps_RisonNode_=__webpack_require__(13),external_kbnSharedDeps_RisonNode_default=__webpack_require__.n(external_kbnSharedDeps_RisonNode_),elasticsearch_util=__webpack_require__(40),constants=__webpack_require__(0),metrics_editor=__webpack_require__(106),kibana_services=__webpack_require__(4),external_kbnSharedDeps_ElasticEui_=__webpack_require__(3);const BASE_OPTIONS=[{value:constants.GRID_RESOLUTION.COARSE,text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGrid.coarseDropdownOption",{defaultMessage:"coarse"})},{value:constants.GRID_RESOLUTION.FINE,text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGrid.fineDropdownOption",{defaultMessage:"fine"})},{value:constants.GRID_RESOLUTION.MOST_FINE,text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGrid.finestDropdownOption",{defaultMessage:"finest"})}];function ResolutionEditor({resolution:resolution,onChange:onChange,includeSuperFine:includeSuperFine}){const options=[...BASE_OPTIONS];return includeSuperFine&&options.push({value:constants.GRID_RESOLUTION.SUPER_FINE,text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGrid.superFineDropDownOption",{defaultMessage:"super fine (beta)"})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.geoGrid.resolutionLabel",{defaultMessage:"Grid resolution"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{options:options,value:resolution,onChange:e=>onChange(e.target.value),compressed:!0}))}var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(8),is_metric_countable=__webpack_require__(143),public_=__webpack_require__(10),render_as_select=__webpack_require__(208);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class update_source_editor_UpdateSourceEditor extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),_defineProperty(this,"state",{fields:null}),_defineProperty(this,"_onMetricsChange",metrics=>{this.props.onChange({propName:"metrics",value:metrics})}),_defineProperty(this,"_onResolutionChange",resolution=>{let newLayerType;if(this.props.currentLayerType===constants.LAYER_TYPE.VECTOR||this.props.currentLayerType===constants.LAYER_TYPE.TILED_VECTOR)newLayerType=resolution===constants.GRID_RESOLUTION.SUPER_FINE?constants.LAYER_TYPE.TILED_VECTOR:constants.LAYER_TYPE.VECTOR;else{if(this.props.currentLayerType!==constants.LAYER_TYPE.HEATMAP)throw new Error("Unexpected layer-type");if(resolution===constants.GRID_RESOLUTION.SUPER_FINE)throw new Error("Heatmap does not support SUPER_FINE resolution");newLayerType=constants.LAYER_TYPE.HEATMAP}this.props.onChange({propName:"resolution",value:resolution,newLayerType:newLayerType})}),_defineProperty(this,"_onRequestTypeSelect",requestType=>{this.props.onChange({propName:"requestType",value:requestType})})}componentDidMount(){this._isMounted=!0,this._loadFields()}componentWillUnmount(){this._isMounted=!1}async _loadFields(){let indexPattern;try{indexPattern=await Object(kibana_services.p)().get(this.props.indexPatternId)}catch(err){return void(this._isMounted&&this.setState({loadError:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGrid.noIndexPatternErrorMessage",{defaultMessage:"Unable to find Index pattern {id}",values:{id:this.props.indexPatternId}})}))}this._isMounted&&this.setState({fields:indexPattern.fields.filter(field=>!public_.indexPatterns.isNestedField(field))})}_renderMetricsPanel(){const metricsFilter=this.props.currentLayerType===constants.LAYER_TYPE.HEATMAP?metric=>Object(is_metric_countable.a)(metric.value):null,allowMultipleMetrics=this.props.currentLayerType!==constants.LAYER_TYPE.HEATMAP;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h6",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.source.esGrid.metricsLabel",defaultMessage:"Metrics"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(metrics_editor.a,{allowMultipleMetrics:allowMultipleMetrics,metricsFilter:metricsFilter,fields:this.state.fields,metrics:this.props.metrics,onChange:this._onMetricsChange}))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,this._renderMetricsPanel(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h6",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.source.esGrid.geoTileGridLabel",defaultMessage:"Grid parameters"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(ResolutionEditor,{includeSuperFine:this.props.currentLayerType!==constants.LAYER_TYPE.HEATMAP,resolution:this.props.resolution,onChange:this._onResolutionChange}),external_kbnSharedDeps_React_default.a.createElement(render_as_select.a,{isColumnCompressed:!0,renderAs:this.props.renderAs,onChange:this._onRequestTypeSelect})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}))}}var i18n_getters=__webpack_require__(5),es_agg_source=__webpack_require__(87),data_request=__webpack_require__(61),source_registry=__webpack_require__(45),licensed_features=__webpack_require__(9),valid_string_config=__webpack_require__(84);const clustersTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGridClustersTitle",{defaultMessage:"Clusters and grids"}),heatmapTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGridHeatmapTitle",{defaultMessage:"Heat map"});class es_geo_grid_source_ESGeoGridSource extends es_agg_source.a{static createDescriptor(descriptor){const normalizedDescriptor=es_agg_source.a.createDescriptor(descriptor);if(!Object(valid_string_config.a)(normalizedDescriptor.geoField))throw new Error("Cannot create an ESGeoGridSourceDescriptor without a geoField");return{...normalizedDescriptor,type:constants.SOURCE_TYPES.ES_GEO_GRID,geoField:normalizedDescriptor.geoField,requestType:descriptor.requestType||constants.RENDER_AS.POINT,resolution:descriptor.resolution?descriptor.resolution:constants.GRID_RESOLUTION.COARSE}}constructor(descriptor,inspectorAdapters){const sourceDescriptor=es_geo_grid_source_ESGeoGridSource.createDescriptor(descriptor);var obj,key,value;super(sourceDescriptor,inspectorAdapters,descriptor.resolution!==constants.GRID_RESOLUTION.SUPER_FINE),value=void 0,(key="_descriptor")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this._descriptor=sourceDescriptor}renderSourceSettingsEditor(sourceEditorArgs){return external_kbnSharedDeps_React_default.a.createElement(update_source_editor_UpdateSourceEditor,{currentLayerType:sourceEditorArgs.currentLayerType,indexPatternId:this.getIndexPatternId(),onChange:sourceEditorArgs.onChange,metrics:this._descriptor.metrics,renderAs:this._descriptor.requestType,resolution:this._descriptor.resolution})}getSyncMeta(){return{requestType:this._descriptor.requestType}}async getImmutableProperties(){let indexPatternName=this.getIndexPatternId();try{indexPatternName=(await this.getIndexPattern()).title}catch(error){}return[{label:Object(i18n_getters.b)(),value:this._descriptor.requestType===constants.RENDER_AS.HEATMAP?heatmapTitle:clustersTitle},{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGrid.indexPatternLabel",{defaultMessage:"Index pattern"}),value:indexPatternName},{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGrid.geospatialFieldLabel",{defaultMessage:"Geospatial field"}),value:this._descriptor.geoField}]}getFieldNames(){return this.getMetricFields().map(esAggMetricField=>esAggMetricField.getName())}isGeoGridPrecisionAware(){return this._descriptor.resolution!==constants.GRID_RESOLUTION.SUPER_FINE}showJoinEditor(){return!1}getGridResolution(){return this._descriptor.resolution}getGeoGridPrecision(zoom){if(this._descriptor.resolution===constants.GRID_RESOLUTION.SUPER_FINE)return NaN;const targetGeotileLevel=Math.ceil(zoom)+this._getGeoGridPrecisionResolutionDelta();return Math.min(targetGeotileLevel,29)}_getGeoGridPrecisionResolutionDelta(){if(this._descriptor.resolution===constants.GRID_RESOLUTION.COARSE)return 2;if(this._descriptor.resolution===constants.GRID_RESOLUTION.FINE)return 3;if(this._descriptor.resolution===constants.GRID_RESOLUTION.MOST_FINE)return 4;throw new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGrid.resolutionParamErrorMessage",{defaultMessage:"Grid resolution param not recognized: {resolution}",values:{resolution:this._descriptor.resolution}}))}async _compositeAggRequest({searchSource:searchSource,searchSessionId:searchSessionId,indexPattern:indexPattern,precision:precision,layerName:layerName,registerCancelCallback:registerCancelCallback,bucketsPerGrid:bucketsPerGrid,isRequestStillActive:isRequestStillActive,bufferedExtent:bufferedExtent}){const gridsPerRequest=Math.floor(constants.DEFAULT_MAX_BUCKETS_LIMIT/bucketsPerGrid),aggs={compositeSplit:{composite:{size:gridsPerRequest,sources:[{[constants.GEOTILE_GRID_AGG_NAME]:{geotile_grid:{bounds:Object(elasticsearch_util.o)(bufferedExtent),field:this._descriptor.geoField,precision:precision}}}]},aggs:{[constants.GEOCENTROID_AGG_NAME]:{geo_centroid:{field:this._descriptor.geoField}},...this.getValueAggsDsl(indexPattern)}}},features=[];let requestCount=0,afterKey=null;for(;;){if(!isRequestStillActive())throw new data_request.b;if(requestCount++,requestCount>5)throw new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGrid.compositePaginationErrorMessage",{defaultMessage:'{layerName} is causing too many requests. Reduce "Grid resolution" and/or reduce the number of top term "Metrics".',values:{layerName:layerName}}));afterKey&&(aggs.compositeSplit.composite.after=afterKey),searchSource.setField("aggs",aggs);const requestId=afterKey?`${this.getId()} afterKey ${afterKey.geoSplit}`:this.getId(),esResponse=await this._runEsQuery({requestId:requestId,requestName:`${layerName} (${requestCount})`,searchSource:searchSource,registerCancelCallback:registerCancelCallback,requestDescription:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGrid.compositeInspectorDescription",{defaultMessage:"Elasticsearch geo grid aggregation request: {requestId}",values:{requestId:requestId}}),searchSessionId:searchSessionId});if(features.push(...Object(elasticsearch_util.d)(esResponse,this._descriptor.requestType)),afterKey=esResponse.aggregations.compositeSplit.after_key,esResponse.aggregations.compositeSplit.buckets.length<gridsPerRequest)break}return features}_addNonCompositeAggsToSearchSource(searchSource,indexPattern,precision,bufferedExtent){searchSource.setField("aggs",{[constants.GEOTILE_GRID_AGG_NAME]:{geotile_grid:{bounds:bufferedExtent?Object(elasticsearch_util.o)(bufferedExtent):null,field:this._descriptor.geoField,precision:precision,size:constants.DEFAULT_MAX_BUCKETS_LIMIT,shard_size:constants.DEFAULT_MAX_BUCKETS_LIMIT},aggs:{[constants.GEOCENTROID_AGG_NAME]:{geo_centroid:{field:this._descriptor.geoField}},...this.getValueAggsDsl(indexPattern)}}})}async _nonCompositeAggRequest({searchSource:searchSource,searchSessionId:searchSessionId,indexPattern:indexPattern,precision:precision,layerName:layerName,registerCancelCallback:registerCancelCallback,bufferedExtent:bufferedExtent}){this._addNonCompositeAggsToSearchSource(searchSource,indexPattern,precision,bufferedExtent);const esResponse=await this._runEsQuery({requestId:this.getId(),requestName:layerName,searchSource:searchSource,registerCancelCallback:registerCancelCallback,requestDescription:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGrid.inspectorDescription",{defaultMessage:"Elasticsearch geo grid aggregation request"}),searchSessionId:searchSessionId});return Object(elasticsearch_util.e)(esResponse,this._descriptor.requestType)}async getGeoJsonWithMeta(layerName,searchFilters,registerCancelCallback,isRequestStillActive){const indexPattern=await this.getIndexPattern(),searchSource=await this.makeSearchSource(searchFilters,0);searchSource.setField("trackTotalHits",!1);let features,bucketsPerGrid=1;if(this.getMetricFields().forEach(metricField=>{bucketsPerGrid+=metricField.getBucketCount()}),!searchFilters.buffer)throw new Error("Cannot get GeoJson without searchFilter.buffer");return features=1===bucketsPerGrid?await this._nonCompositeAggRequest({searchSource:searchSource,searchSessionId:searchFilters.searchSessionId,indexPattern:indexPattern,precision:searchFilters.geogridPrecision||0,layerName:layerName,registerCancelCallback:registerCancelCallback,bufferedExtent:searchFilters.buffer}):await this._compositeAggRequest({searchSource:searchSource,searchSessionId:searchFilters.searchSessionId,indexPattern:indexPattern,precision:searchFilters.geogridPrecision||0,layerName:layerName,registerCancelCallback:registerCancelCallback,bucketsPerGrid:bucketsPerGrid,isRequestStillActive:isRequestStillActive,bufferedExtent:searchFilters.buffer}),{data:{type:"FeatureCollection",features:features},meta:{areResultsTrimmed:!1}}}getLayerName(){return constants.MVT_SOURCE_LAYER_NAME}async getUrlTemplateWithMeta(searchFilters){const indexPattern=await this.getIndexPattern(),searchSource=await this.makeSearchSource(searchFilters,0);this._addNonCompositeAggsToSearchSource(searchSource,indexPattern,null,null);const dsl=searchSource.getSearchRequestBody(),risonDsl=external_kbnSharedDeps_RisonNode_default.a.encode(dsl),mvtUrlServicePath=Object(kibana_services.n)().basePath.prepend(`/${constants.GIS_API_PATH}/${constants.MVT_GETGRIDTILE_API_PATH}/{z}/{x}/{y}.pbf`),geoField=await this._getGeoField(),urlTemplate=`${mvtUrlServicePath}?geometryFieldName=${this._descriptor.geoField}&index=${indexPattern.title}&requestBody=${risonDsl}&requestType=${this._descriptor.requestType}&geoFieldType=${geoField.type}`;return{refreshTokenParamName:constants.MVT_TOKEN_PARAM_NAME,layerName:this.getLayerName(),minSourceZoom:this.getMinZoom(),maxSourceZoom:this.getMaxZoom(),urlTemplate:searchFilters.searchSessionId?urlTemplate+"&searchSessionId="+searchFilters.searchSessionId:urlTemplate}}isFilterByMapBounds(){return this._descriptor.resolution!==constants.GRID_RESOLUTION.SUPER_FINE}canFormatFeatureProperties(){return!0}async getSupportedShapeTypes(){return this._descriptor.requestType===constants.RENDER_AS.GRID?[constants.VECTOR_SHAPE_TYPE.POLYGON]:[constants.VECTOR_SHAPE_TYPE.POINT]}async getLicensedFeatures(){return(await this._getGeoField()).type===constants.ES_GEO_FIELD_TYPE.GEO_SHAPE?[licensed_features.a.GEO_SHAPE_AGGS_GEO_TILE]:[]}}Object(source_registry.b)({ConstructorFunction:es_geo_grid_source_ESGeoGridSource,type:constants.SOURCE_TYPES.ES_GEO_GRID})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return vector_source_AbstractVectorSource}));var constants=__webpack_require__(0),tooltip_property=__webpack_require__(69),source=__webpack_require__(142);class vector_source_AbstractVectorSource extends source.a{getFieldNames(){return[]}createField({fieldName:fieldName}){throw new Error("Not implemented")}getFieldByName(fieldName){return this.createField({fieldName:fieldName})}isFilterByMapBounds(){return!1}isBoundsAware(){return!1}async supportsFitToBounds(){return!0}async getBoundsForFilters(boundsFilters,registerCancelCallback){return null}async getFields(){return[]}async getLeftJoinFields(){return[]}async getGeoJsonWithMeta(layerName,searchFilters,registerCancelCallback,isRequestStillActive){throw new Error("Should implement VectorSource#getGeoJson")}canFormatFeatureProperties(){return!1}async getTooltipProperties(properties){const tooltipProperties=[];for(const key in properties)key.startsWith("__kbn")||tooltipProperties.push(new tooltip_property.a(key,key,properties[key]));return tooltipProperties}async isTimeAware(){return!1}showJoinEditor(){return!0}async getSupportedShapeTypes(){return[constants.VECTOR_SHAPE_TYPE.POINT,constants.VECTOR_SHAPE_TYPE.LINE,constants.VECTOR_SHAPE_TYPE.POLYGON]}getSourceTooltipContent(sourceDataRequest){return{tooltipContent:null,areResultsTrimmed:!1}}getSyncMeta(){return null}}},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var meta_1=__webpack_require__(71);exports.default=function(geojson){var result=[1/0,1/0,-1/0,-1/0];return meta_1.coordEach(geojson,(function(coord){result[0]>coord[0]&&(result[0]=coord[0]),result[1]>coord[1]&&(result[1]=coord[1]),result[2]<coord[0]&&(result[2]=coord[0]),result[3]<coord[1]&&(result[3]=coord[1])})),result}},function(module,exports,__webpack_require__){"use strict";var punycode=__webpack_require__(249),util=__webpack_require__(250);function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}exports.parse=urlParse,exports.resolve=function(source,relative){return urlParse(source,!1,!0).resolve(relative)},exports.resolveObject=function(source,relative){return source?urlParse(source,!1,!0).resolveObject(relative):relative},exports.format=function(obj){util.isString(obj)&&(obj=urlParse(obj));return obj instanceof Url?obj.format():Url.prototype.format.call(obj)},exports.Url=Url;var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,unwise=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=__webpack_require__(251);function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&util.isObject(url)&&url instanceof Url)return url;var u=new Url;return u.parse(url,parseQueryString,slashesDenoteHost),u}Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!util.isString(url))throw new TypeError("Parameter 'url' must be a string, not "+typeof url);var queryIndex=url.indexOf("?"),splitter=-1!==queryIndex&&queryIndex<url.indexOf("#")?"?":"#",uSplit=url.split(splitter);uSplit[0]=uSplit[0].replace(/\\/g,"/");var rest=url=uSplit.join(splitter);if(rest=rest.trim(),!slashesDenoteHost&&1===url.split("#").length){var simplePath=simplePathPattern.exec(rest);if(simplePath)return this.path=rest,this.href=rest,this.pathname=simplePath[1],simplePath[2]?(this.search=simplePath[2],this.query=parseQueryString?querystring.parse(this.search.substr(1)):this.search.substr(1)):parseQueryString&&(this.search="",this.query={}),this}var proto=protocolPattern.exec(rest);if(proto){var lowerProto=(proto=proto[0]).toLowerCase();this.protocol=lowerProto,rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes="//"===rest.substr(0,2);!slashes||proto&&hostlessProtocol[proto]||(rest=rest.substr(2),this.slashes=!0)}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){for(var auth,atSign,hostEnd=-1,i=0;i<hostEndingChars.length;i++){-1!==(hec=rest.indexOf(hostEndingChars[i]))&&(-1===hostEnd||hec<hostEnd)&&(hostEnd=hec)}-1!==(atSign=-1===hostEnd?rest.lastIndexOf("@"):rest.lastIndexOf("@",hostEnd))&&(auth=rest.slice(0,atSign),rest=rest.slice(atSign+1),this.auth=decodeURIComponent(auth)),hostEnd=-1;for(i=0;i<nonHostChars.length;i++){var hec;-1!==(hec=rest.indexOf(nonHostChars[i]))&&(-1===hostEnd||hec<hostEnd)&&(hostEnd=hec)}-1===hostEnd&&(hostEnd=rest.length),this.host=rest.slice(0,hostEnd),rest=rest.slice(hostEnd),this.parseHost(),this.hostname=this.hostname||"";var ipv6Hostname="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!ipv6Hostname)for(var hostparts=this.hostname.split(/\./),l=(i=0,hostparts.length);i<l;i++){var part=hostparts[i];if(part&&!part.match(hostnamePartPattern)){for(var newpart="",j=0,k=part.length;j<k;j++)part.charCodeAt(j)>127?newpart+="x":newpart+=part[j];if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i),notHost=hostparts.slice(i+1),bit=part.match(hostnamePartStart);bit&&(validParts.push(bit[1]),notHost.unshift(bit[2])),notHost.length&&(rest="/"+notHost.join(".")+rest),this.hostname=validParts.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),ipv6Hostname||(this.hostname=punycode.toASCII(this.hostname));var p=this.port?":"+this.port:"",h=this.hostname||"";this.host=h+p,this.href+=this.host,ipv6Hostname&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==rest[0]&&(rest="/"+rest))}if(!unsafeProtocol[lowerProto])for(i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i];if(-1!==rest.indexOf(ae)){var esc=encodeURIComponent(ae);esc===ae&&(esc=escape(ae)),rest=rest.split(ae).join(esc)}}var hash=rest.indexOf("#");-1!==hash&&(this.hash=rest.substr(hash),rest=rest.slice(0,hash));var qm=rest.indexOf("?");if(-1!==qm?(this.search=rest.substr(qm),this.query=rest.substr(qm+1),parseQueryString&&(this.query=querystring.parse(this.query)),rest=rest.slice(0,qm)):parseQueryString&&(this.search="",this.query={}),rest&&(this.pathname=rest),slashedProtocol[lowerProto]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){p=this.pathname||"";var s=this.search||"";this.path=p+s}return this.href=this.format(),this},Url.prototype.format=function(){var auth=this.auth||"";auth&&(auth=(auth=encodeURIComponent(auth)).replace(/%3A/i,":"),auth+="@");var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=!1,query="";this.host?host=auth+this.host:this.hostname&&(host=auth+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(host+=":"+this.port)),this.query&&util.isObject(this.query)&&Object.keys(this.query).length&&(query=querystring.stringify(this.query));var search=this.search||query&&"?"+query||"";return protocol&&":"!==protocol.substr(-1)&&(protocol+=":"),this.slashes||(!protocol||slashedProtocol[protocol])&&!1!==host?(host="//"+(host||""),pathname&&"/"!==pathname.charAt(0)&&(pathname="/"+pathname)):host||(host=""),hash&&"#"!==hash.charAt(0)&&(hash="#"+hash),search&&"?"!==search.charAt(0)&&(search="?"+search),protocol+host+(pathname=pathname.replace(/[?#]/g,(function(match){return encodeURIComponent(match)})))+(search=search.replace("#","%23"))+hash},Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,!1,!0)).format()},Url.prototype.resolveObject=function(relative){if(util.isString(relative)){var rel=new Url;rel.parse(relative,!1,!0),relative=rel}for(var result=new Url,tkeys=Object.keys(this),tk=0;tk<tkeys.length;tk++){var tkey=tkeys[tk];result[tkey]=this[tkey]}if(result.hash=relative.hash,""===relative.href)return result.href=result.format(),result;if(relative.slashes&&!relative.protocol){for(var rkeys=Object.keys(relative),rk=0;rk<rkeys.length;rk++){var rkey=rkeys[rk];"protocol"!==rkey&&(result[rkey]=relative[rkey])}return slashedProtocol[result.protocol]&&result.hostname&&!result.pathname&&(result.path=result.pathname="/"),result.href=result.format(),result}if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){for(var keys=Object.keys(relative),v=0;v<keys.length;v++){var k=keys[v];result[k]=relative[k]}return result.href=result.format(),result}if(result.protocol=relative.protocol,relative.host||hostlessProtocol[relative.protocol])result.pathname=relative.pathname;else{for(var relPath=(relative.pathname||"").split("/");relPath.length&&!(relative.host=relPath.shift()););relative.host||(relative.host=""),relative.hostname||(relative.hostname=""),""!==relPath[0]&&relPath.unshift(""),relPath.length<2&&relPath.unshift(""),result.pathname=relPath.join("/")}if(result.search=relative.search,result.query=relative.query,result.host=relative.host||"",result.auth=relative.auth,result.hostname=relative.hostname||relative.host,result.port=relative.port,result.pathname||result.search){var p=result.pathname||"",s=result.search||"";result.path=p+s}return result.slashes=result.slashes||relative.slashes,result.href=result.format(),result}var isSourceAbs=result.pathname&&"/"===result.pathname.charAt(0),isRelAbs=relative.host||relative.pathname&&"/"===relative.pathname.charAt(0),mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],psychotic=(relPath=relative.pathname&&relative.pathname.split("/")||[],result.protocol&&!slashedProtocol[result.protocol]);if(psychotic&&(result.hostname="",result.port=null,result.host&&(""===srcPath[0]?srcPath[0]=result.host:srcPath.unshift(result.host)),result.host="",relative.protocol&&(relative.hostname=null,relative.port=null,relative.host&&(""===relPath[0]?relPath[0]=relative.host:relPath.unshift(relative.host)),relative.host=null),mustEndAbs=mustEndAbs&&(""===relPath[0]||""===srcPath[0])),isRelAbs)result.host=relative.host||""===relative.host?relative.host:result.host,result.hostname=relative.hostname||""===relative.hostname?relative.hostname:result.hostname,result.search=relative.search,result.query=relative.query,srcPath=relPath;else if(relPath.length)srcPath||(srcPath=[]),srcPath.pop(),srcPath=srcPath.concat(relPath),result.search=relative.search,result.query=relative.query;else if(!util.isNullOrUndefined(relative.search)){if(psychotic)result.hostname=result.host=srcPath.shift(),(authInHost=!!(result.host&&result.host.indexOf("@")>0)&&result.host.split("@"))&&(result.auth=authInHost.shift(),result.host=result.hostname=authInHost.shift());return result.search=relative.search,result.query=relative.query,util.isNull(result.pathname)&&util.isNull(result.search)||(result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")),result.href=result.format(),result}if(!srcPath.length)return result.pathname=null,result.search?result.path="/"+result.search:result.path=null,result.href=result.format(),result;for(var last=srcPath.slice(-1)[0],hasTrailingSlash=(result.host||relative.host||srcPath.length>1)&&("."===last||".."===last)||""===last,up=0,i=srcPath.length;i>=0;i--)"."===(last=srcPath[i])?srcPath.splice(i,1):".."===last?(srcPath.splice(i,1),up++):up&&(srcPath.splice(i,1),up--);if(!mustEndAbs&&!removeAllDots)for(;up--;up)srcPath.unshift("..");!mustEndAbs||""===srcPath[0]||srcPath[0]&&"/"===srcPath[0].charAt(0)||srcPath.unshift(""),hasTrailingSlash&&"/"!==srcPath.join("/").substr(-1)&&srcPath.push("");var authInHost,isAbsolute=""===srcPath[0]||srcPath[0]&&"/"===srcPath[0].charAt(0);psychotic&&(result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"",(authInHost=!!(result.host&&result.host.indexOf("@")>0)&&result.host.split("@"))&&(result.auth=authInHost.shift(),result.host=result.hostname=authInHost.shift()));return(mustEndAbs=mustEndAbs||result.host&&srcPath.length)&&!isAbsolute&&srcPath.unshift(""),srcPath.length?result.pathname=srcPath.join("/"):(result.pathname=null,result.path=null),util.isNull(result.pathname)&&util.isNull(result.search)||(result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")),result.auth=relative.auth||result.auth,result.slashes=result.slashes||relative.slashes,result.href=result.format(),result},Url.prototype.parseHost=function(){var host=this.host,port=portPattern.exec(host);port&&(":"!==(port=port[0])&&(this.port=port.substr(1)),host=host.substr(0,host.length-port.length)),host&&(this.hostname=host)}},function(module,exports){const MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;module.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER,MAX_SAFE_COMPONENT_LENGTH:16}},function(module,exports,__webpack_require__){(function(process){const debug="object"==typeof process&&Object({IS_KIBANA_DISTRIBUTABLE:"true"})&&Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG)?(...args)=>console.error("SEMVER",...args):()=>{};module.exports=debug}).call(this,__webpack_require__(64))},function(module,exports,__webpack_require__){const compare=__webpack_require__(55);module.exports=(a,b,loose)=>compare(a,b,loose)>0},function(module,exports,__webpack_require__){const ANY=Symbol("SemVer ANY");class Comparator{static get ANY(){return ANY}constructor(comp,options){if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),comp instanceof Comparator){if(comp.loose===!!options.loose)return comp;comp=comp.value}debug("comparator",comp,options),this.options=options,this.loose=!!options.loose,this.parse(comp),this.semver===ANY?this.value="":this.value=this.operator+this.semver.version,debug("comp",this)}parse(comp){const r=this.options.loose?re[t.COMPARATORLOOSE]:re[t.COMPARATOR],m=comp.match(r);if(!m)throw new TypeError("Invalid comparator: "+comp);this.operator=void 0!==m[1]?m[1]:"","="===this.operator&&(this.operator=""),m[2]?this.semver=new SemVer(m[2],this.options.loose):this.semver=ANY}toString(){return this.value}test(version){if(debug("Comparator.test",version,this.options.loose),this.semver===ANY||version===ANY)return!0;if("string"==typeof version)try{version=new SemVer(version,this.options)}catch(er){return!1}return cmp(version,this.operator,this.semver,this.options)}intersects(comp,options){if(!(comp instanceof Comparator))throw new TypeError("a Comparator is required");if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),""===this.operator)return""===this.value||new Range(comp.value,options).test(this.value);if(""===comp.operator)return""===comp.value||new Range(this.value,options).test(comp.semver);const sameDirectionIncreasing=!(">="!==this.operator&&">"!==this.operator||">="!==comp.operator&&">"!==comp.operator),sameDirectionDecreasing=!("<="!==this.operator&&"<"!==this.operator||"<="!==comp.operator&&"<"!==comp.operator),sameSemVer=this.semver.version===comp.semver.version,differentDirectionsInclusive=!(">="!==this.operator&&"<="!==this.operator||">="!==comp.operator&&"<="!==comp.operator),oppositeDirectionsLessThan=cmp(this.semver,"<",comp.semver,options)&&(">="===this.operator||">"===this.operator)&&("<="===comp.operator||"<"===comp.operator),oppositeDirectionsGreaterThan=cmp(this.semver,">",comp.semver,options)&&("<="===this.operator||"<"===this.operator)&&(">="===comp.operator||">"===comp.operator);return sameDirectionIncreasing||sameDirectionDecreasing||sameSemVer&&differentDirectionsInclusive||oppositeDirectionsLessThan||oppositeDirectionsGreaterThan}}module.exports=Comparator;const{re:re,t:t}=__webpack_require__(73),cmp=__webpack_require__(165),debug=__webpack_require__(94),SemVer=__webpack_require__(43),Range=__webpack_require__(56)},function(module,exports,__webpack_require__){const Range=__webpack_require__(56);module.exports=(version,range,options)=>{try{range=new Range(range,options)}catch(er){return!1}return range.test(version)}},function(module,exports,__webpack_require__){(function(process){var getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function(obj){for(var keys=Object.keys(obj),descriptors={},i=0;i<keys.length;i++)descriptors[keys[i]]=Object.getOwnPropertyDescriptor(obj,keys[i]);return descriptors},formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){for(var objects=[],i=0;i<arguments.length;i++)objects.push(inspect(arguments[i]));return objects.join(" ")}i=1;for(var args=arguments,len=args.length,str=String(f).replace(formatRegExp,(function(x){if("%%"===x)return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}})),x=args[i];i<len;x=args[++i])isNull(x)||!isObject(x)?str+=" "+x:str+=" "+inspect(x);return str},exports.deprecate=function(fn,msg){if(void 0!==process&&!0===process.noDeprecation)return fn;if(void 0===process)return function(){return exports.deprecate(fn,msg).apply(this,arguments)};var warned=!1;return function(){if(!warned){if(process.throwDeprecation)throw new Error(msg);process.traceDeprecation?console.trace(msg):console.error(msg),warned=!0}return fn.apply(this,arguments)}};var debugEnviron,debugs={};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(ctx.depth=arguments[2]),arguments.length>=4&&(ctx.colors=arguments[3]),isBoolean(opts)?ctx.showHidden=opts:opts&&exports._extend(ctx,opts),isUndefined(ctx.showHidden)&&(ctx.showHidden=!1),isUndefined(ctx.depth)&&(ctx.depth=2),isUndefined(ctx.colors)&&(ctx.colors=!1),isUndefined(ctx.customInspect)&&(ctx.customInspect=!0),ctx.colors&&(ctx.stylize=stylizeWithColor),formatValue(ctx,obj,ctx.depth)}function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];return style?"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m":str}function stylizeNoColor(str,styleType){return str}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&(!value.constructor||value.constructor.prototype!==value)){var ret=value.inspect(recurseTimes,ctx);return isString(ret)||(ret=formatValue(ctx,ret,recurseTimes)),ret}var primitive=function(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}if(isNumber(value))return ctx.stylize(""+value,"number");if(isBoolean(value))return ctx.stylize(""+value,"boolean");if(isNull(value))return ctx.stylize("null","null")}(ctx,value);if(primitive)return primitive;var keys=Object.keys(value),visibleKeys=function(array){var hash={};return array.forEach((function(val,idx){hash[val]=!0})),hash}(keys);if(ctx.showHidden&&(keys=Object.getOwnPropertyNames(value)),isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0))return formatError(value);if(0===keys.length){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value))return ctx.stylize(RegExp.prototype.toString.call(value),"regexp");if(isDate(value))return ctx.stylize(Date.prototype.toString.call(value),"date");if(isError(value))return formatError(value)}var output,base="",array=!1,braces=["{","}"];(isArray(value)&&(array=!0,braces=["[","]"]),isFunction(value))&&(base=" [Function"+(value.name?": "+value.name:"")+"]");return isRegExp(value)&&(base=" "+RegExp.prototype.toString.call(value)),isDate(value)&&(base=" "+Date.prototype.toUTCString.call(value)),isError(value)&&(base=" "+formatError(value)),0!==keys.length||array&&0!=value.length?recurseTimes<0?isRegExp(value)?ctx.stylize(RegExp.prototype.toString.call(value),"regexp"):ctx.stylize("[Object]","special"):(ctx.seen.push(value),output=array?function(ctx,value,recurseTimes,visibleKeys,keys){for(var output=[],i=0,l=value.length;i<l;++i)hasOwnProperty(value,String(i))?output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),!0)):output.push("");return keys.forEach((function(key){key.match(/^\d+$/)||output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,!0))})),output}(ctx,value,recurseTimes,visibleKeys,keys):keys.map((function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)})),ctx.seen.pop(),function(output,base,braces){if(output.reduce((function(prev,cur){return cur.indexOf("\n")>=0&&0,prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return braces[0]+(""===base?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1];return braces[0]+base+" "+output.join(", ")+" "+braces[1]}(output,base,braces)):braces[0]+base+braces[1]}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;if((desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]}).get?str=desc.set?ctx.stylize("[Getter/Setter]","special"):ctx.stylize("[Getter]","special"):desc.set&&(str=ctx.stylize("[Setter]","special")),hasOwnProperty(visibleKeys,key)||(name="["+key+"]"),str||(ctx.seen.indexOf(desc.value)<0?(str=isNull(recurseTimes)?formatValue(ctx,desc.value,null):formatValue(ctx,desc.value,recurseTimes-1)).indexOf("\n")>-1&&(str=array?str.split("\n").map((function(line){return"  "+line})).join("\n").substr(2):"\n"+str.split("\n").map((function(line){return"   "+line})).join("\n")):str=ctx.stylize("[Circular]","special")),isUndefined(name)){if(array&&key.match(/^\d+$/))return str;(name=JSON.stringify(""+key)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(name=name.substr(1,name.length-2),name=ctx.stylize(name,"name")):(name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),name=ctx.stylize(name,"string"))}return name+": "+str}function isArray(ar){return Array.isArray(ar)}function isBoolean(arg){return"boolean"==typeof arg}function isNull(arg){return null===arg}function isNumber(arg){return"number"==typeof arg}function isString(arg){return"string"==typeof arg}function isUndefined(arg){return void 0===arg}function isRegExp(re){return isObject(re)&&"[object RegExp]"===objectToString(re)}function isObject(arg){return"object"==typeof arg&&null!==arg}function isDate(d){return isObject(d)&&"[object Date]"===objectToString(d)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(arg){return"function"==typeof arg}function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}exports.debuglog=function(set){if(isUndefined(debugEnviron)&&(debugEnviron=Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG||""),set=set.toUpperCase(),!debugs[set])if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else debugs[set]=function(){};return debugs[set]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=function(arg){return null==arg},exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=function(arg){return"symbol"==typeof arg},exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=function(arg){return null===arg||"boolean"==typeof arg||"number"==typeof arg||"string"==typeof arg||"symbol"==typeof arg||void 0===arg},exports.isBuffer=__webpack_require__(284);var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date,time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))},exports.inherits=__webpack_require__(285),exports._extend=function(origin,add){if(!add||!isObject(add))return origin;for(var keys=Object.keys(add),i=keys.length;i--;)origin[keys[i]]=add[keys[i]];return origin};var kCustomPromisifiedSymbol="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function callbackifyOnRejected(reason,cb){if(!reason){var newReason=new Error("Promise was rejected with a falsy value");newReason.reason=reason,reason=newReason}return cb(reason)}exports.promisify=function(original){if("function"!=typeof original)throw new TypeError('The "original" argument must be of type Function');if(kCustomPromisifiedSymbol&&original[kCustomPromisifiedSymbol]){var fn;if("function"!=typeof(fn=original[kCustomPromisifiedSymbol]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(fn,kCustomPromisifiedSymbol,{value:fn,enumerable:!1,writable:!1,configurable:!0}),fn}function fn(){for(var promiseResolve,promiseReject,promise=new Promise((function(resolve,reject){promiseResolve=resolve,promiseReject=reject})),args=[],i=0;i<arguments.length;i++)args.push(arguments[i]);args.push((function(err,value){err?promiseReject(err):promiseResolve(value)}));try{original.apply(this,args)}catch(err){promiseReject(err)}return promise}return Object.setPrototypeOf(fn,Object.getPrototypeOf(original)),kCustomPromisifiedSymbol&&Object.defineProperty(fn,kCustomPromisifiedSymbol,{value:fn,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(fn,getOwnPropertyDescriptors(original))},exports.promisify.custom=kCustomPromisifiedSymbol,exports.callbackify=function(original){if("function"!=typeof original)throw new TypeError('The "original" argument must be of type Function');function callbackified(){for(var args=[],i=0;i<arguments.length;i++)args.push(arguments[i]);var maybeCb=args.pop();if("function"!=typeof maybeCb)throw new TypeError("The last argument must be of type Function");var self=this,cb=function(){return maybeCb.apply(self,arguments)};original.apply(this,args).then((function(ret){process.nextTick(cb,null,ret)}),(function(rej){process.nextTick(callbackifyOnRejected,rej,cb)}))}return Object.setPrototypeOf(callbackified,Object.getPrototypeOf(original)),Object.defineProperties(callbackified,getOwnPropertyDescriptors(original)),callbackified}}).call(this,__webpack_require__(64))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return canSkipSourceUpdate})),__webpack_require__.d(__webpack_exports__,"c",(function(){return canSkipStyleMetaUpdate})),__webpack_require__.d(__webpack_exports__,"a",(function(){return canSkipFormattersUpdate}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23),lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__),_turf_bbox_polygon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(162),_turf_bbox_polygon__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_turf_bbox_polygon__WEBPACK_IMPORTED_MODULE_1__),_turf_boolean_contains__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(163),_turf_boolean_contains__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_turf_boolean_contains__WEBPACK_IMPORTED_MODULE_2__),_is_refresh_only_query__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(169);async function canSkipSourceUpdate({source:source,prevDataRequest:prevDataRequest,nextMeta:nextMeta,extentAware:extentAware}){const timeAware=await source.isTimeAware(),refreshTimerAware=await source.isRefreshTimerAware(),isFieldAware=source.isFieldAware(),isQueryAware=source.isQueryAware(),isGeoGridPrecisionAware=source.isGeoGridPrecisionAware();if(!(timeAware||refreshTimerAware||extentAware||isFieldAware||isQueryAware||isGeoGridPrecisionAware))return!!prevDataRequest&&prevDataRequest.hasDataOrRequestInProgress();if(!prevDataRequest)return!1;const prevMeta=prevDataRequest.getMeta();if(!prevMeta)return!1;let updateDueToApplyGlobalTime=!1,updateDueToTime=!1;timeAware&&(updateDueToApplyGlobalTime=prevMeta.applyGlobalTime!==nextMeta.applyGlobalTime,nextMeta.applyGlobalTime&&(updateDueToTime=!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEqual(prevMeta.timeFilters,nextMeta.timeFilters)));let updateDueToRefreshTimer=!1;refreshTimerAware&&nextMeta.refreshTimerLastTriggeredAt&&(updateDueToRefreshTimer=!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEqual(prevMeta.refreshTimerLastTriggeredAt,nextMeta.refreshTimerLastTriggeredAt));let updateDueToFields=!1;isFieldAware&&(updateDueToFields=!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEqual(prevMeta.fieldNames,nextMeta.fieldNames));let updateDueToQuery=!1,updateDueToFilters=!1,updateDueToSourceQuery=!1,updateDueToApplyGlobalQuery=!1;isQueryAware&&(updateDueToApplyGlobalQuery=prevMeta.applyGlobalQuery!==nextMeta.applyGlobalQuery,updateDueToSourceQuery=!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEqual(prevMeta.sourceQuery,nextMeta.sourceQuery),nextMeta.applyGlobalQuery?(updateDueToQuery=!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEqual(prevMeta.query,nextMeta.query),updateDueToFilters=!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEqual(prevMeta.filters,nextMeta.filters)):updateDueToQuery=Object(_is_refresh_only_query__WEBPACK_IMPORTED_MODULE_3__.a)(prevMeta.query,nextMeta.query));let updateDueToSearchSessionId=!1;(timeAware||isQueryAware)&&(updateDueToSearchSessionId=prevMeta.searchSessionId!==nextMeta.searchSessionId);let updateDueToPrecisionChange=!1,updateDueToExtentChange=!1;isGeoGridPrecisionAware&&(updateDueToPrecisionChange=!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEqual(prevMeta.geogridPrecision,nextMeta.geogridPrecision)),extentAware&&(updateDueToExtentChange=function(prevMeta={},nextMeta={}){const{buffer:previousBuffer}=prevMeta,{buffer:newBuffer}=nextMeta;if(!previousBuffer||!previousBuffer||!newBuffer)return!0;if(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEqual(previousBuffer,newBuffer))return!1;const previousBufferGeometry=_turf_bbox_polygon__WEBPACK_IMPORTED_MODULE_1___default()([previousBuffer.minLon,previousBuffer.minLat,previousBuffer.maxLon,previousBuffer.maxLat]),newBufferGeometry=_turf_bbox_polygon__WEBPACK_IMPORTED_MODULE_1___default()([newBuffer.minLon,newBuffer.minLat,newBuffer.maxLon,newBuffer.maxLat]),doesPreviousBufferContainNewBuffer=_turf_boolean_contains__WEBPACK_IMPORTED_MODULE_2___default()(previousBufferGeometry,newBufferGeometry),isTrimmed=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(prevMeta,"areResultsTrimmed",!1);return!(doesPreviousBufferContainNewBuffer&&!isTrimmed)}(prevMeta,nextMeta));const updateDueToSourceMetaChange=!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEqual(prevMeta.sourceMeta,nextMeta.sourceMeta);return!(updateDueToApplyGlobalTime||updateDueToTime||updateDueToRefreshTimer||updateDueToExtentChange||updateDueToFields||updateDueToQuery||updateDueToFilters||updateDueToSourceQuery||updateDueToApplyGlobalQuery||updateDueToPrecisionChange||updateDueToSourceMetaChange||updateDueToSearchSessionId)}function canSkipStyleMetaUpdate({prevDataRequest:prevDataRequest,nextMeta:nextMeta}){if(!prevDataRequest)return!1;const prevMeta=prevDataRequest.getMeta();if(!prevMeta)return!1;const updateDueToFields=!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEqual(prevMeta.dynamicStyleFields,nextMeta.dynamicStyleFields),updateDueToSourceQuery=!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEqual(prevMeta.sourceQuery,nextMeta.sourceQuery),updateDueToIsTimeAware=nextMeta.isTimeAware!==prevMeta.isTimeAware,updateDueToTime=!!nextMeta.isTimeAware&&!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEqual(prevMeta.timeFilters,nextMeta.timeFilters),updateDueToSearchSessionId=prevMeta.searchSessionId!==nextMeta.searchSessionId;return!(updateDueToFields||updateDueToSourceQuery||updateDueToIsTimeAware||updateDueToTime||updateDueToSearchSessionId)}function canSkipFormattersUpdate({prevDataRequest:prevDataRequest,nextMeta:nextMeta}){if(!prevDataRequest)return!1;const prevMeta=prevDataRequest.getMeta();return!!prevMeta&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEqual(prevMeta.fieldNames,nextMeta.fieldNames)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return MbValidatedColorPicker}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_elastic_eui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class MbValidatedColorPicker extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(...args){super(...args),_defineProperty(this,"state",{colorInputValue:"rgba(0,0,0,0)"===this.props.color?"":this.props.color}),_defineProperty(this,"_onColorChange",color=>{this.setState({colorInputValue:color}),this.props.onChange(Object(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.isValidHex)(color)?color:"rgba(0,0,0,0)")})}render(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiColorPicker,{onChange:this._onColorChange,color:this.state.colorInputValue,swatches:this.props.swatches,append:this.props.append,compressed:!0})}}},function(module,exports,__webpack_require__){(function(){var XMLNode,hasProp={}.hasOwnProperty;XMLNode=__webpack_require__(50),module.exports=function(superClass){function XMLCharacterData(parent){XMLCharacterData.__super__.constructor.call(this,parent),this.value=""}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(XMLCharacterData,superClass),Object.defineProperty(XMLCharacterData.prototype,"data",{get:function(){return this.value},set:function(value){return this.value=value||""}}),Object.defineProperty(XMLCharacterData.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(XMLCharacterData.prototype,"textContent",{get:function(){return this.value},set:function(value){return this.value=value||""}}),XMLCharacterData.prototype.clone=function(){return Object.create(this)},XMLCharacterData.prototype.substringData=function(offset,count){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLCharacterData.prototype.appendData=function(arg){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLCharacterData.prototype.insertData=function(offset,arg){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLCharacterData.prototype.deleteData=function(offset,count){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLCharacterData.prototype.replaceData=function(offset,count,arg){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLCharacterData.prototype.isEqualNode=function(node){return!!XMLCharacterData.__super__.isEqualNode.apply(this,arguments).isEqualNode(node)&&node.data===this.data},XMLCharacterData}(XMLNode)}).call(this)},function(module,exports){(function(){module.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},function(module,exports,__webpack_require__){"use strict";(function(process){void 0===process||!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?module.exports={nextTick:function(fn,arg1,arg2,arg3){if("function"!=typeof fn)throw new TypeError('"callback" argument must be a function');var args,i,len=arguments.length;switch(len){case 0:case 1:return process.nextTick(fn);case 2:return process.nextTick((function(){fn.call(null,arg1)}));case 3:return process.nextTick((function(){fn.call(null,arg1,arg2)}));case 4:return process.nextTick((function(){fn.call(null,arg1,arg2,arg3)}));default:for(args=new Array(len-1),i=0;i<args.length;)args[i++]=arguments[i];return process.nextTick((function(){fn.apply(null,args)}))}}}:module.exports=process}).call(this,__webpack_require__(64))},function(module,exports,__webpack_require__){var buffer=__webpack_require__(135),Buffer=buffer.Buffer;function copyProps(src,dst){for(var key in src)dst[key]=src[key]}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length)}Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(arg,encodingOrOffset,length){if("number"==typeof arg)throw new TypeError("Argument must not be a number");return Buffer(arg,encodingOrOffset,length)},SafeBuffer.alloc=function(size,fill,encoding){if("number"!=typeof size)throw new TypeError("Argument must be a number");var buf=Buffer(size);return void 0!==fill?"string"==typeof encoding?buf.fill(fill,encoding):buf.fill(fill):buf.fill(0),buf},SafeBuffer.allocUnsafe=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return Buffer(size)},SafeBuffer.allocUnsafeSlow=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return buffer.SlowBuffer(size)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return heatmap_layer_HeatmapLayer}));var layers_layer=__webpack_require__(110),external_kbnSharedDeps_React_=__webpack_require__(2),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),external_kbnSharedDeps_ElasticEui_=__webpack_require__(3),color_palettes=__webpack_require__(49);const HEATMAP_COLOR_RAMP_LABEL=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.heatmap.colorRampLabel",{defaultMessage:"Color range"});function HeatmapStyleEditor({colorRampName:colorRampName,onHeatmapColorChange:onHeatmapColorChange}){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:HEATMAP_COLOR_RAMP_LABEL,display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiColorPalettePicker,{palettes:color_palettes.e,onChange:selectedPaletteId=>{onHeatmapColorChange({colorRampName:selectedPaletteId})},valueOfSelected:colorRampName,compressed:!0}))}const ColorGradient=({colorPaletteId:colorPaletteId})=>{const palette=Object(color_palettes.f)(colorPaletteId);return palette.length?external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapColorGradient",style:{background:Object(color_palettes.h)(palette)}}):null};var ranged_style_legend_row=__webpack_require__(197);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class heatmap_legend_HeatmapLegend extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),_defineProperty(this,"_isMounted",!1),_defineProperty(this,"state",{label:""})}componentDidUpdate(){this._loadLabel()}componentDidMount(){this._isMounted=!0,this._loadLabel()}componentWillUnmount(){this._isMounted=!1}async _loadLabel(){const label=await this.props.field.getLabel();this._isMounted&&this.state.label!==label&&this.setState({label:label})}render(){return external_kbnSharedDeps_React_default.a.createElement(ranged_style_legend_row.a,{header:external_kbnSharedDeps_React_default.a.createElement(ColorGradient,{colorPaletteId:this.props.colorRampName}),minLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.heatmapLegend.coldLabel",{defaultMessage:"cold"}),maxLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.heatmapLegend.hotLabel",{defaultMessage:"hot"}),propertyLabel:HEATMAP_COLOR_RAMP_LABEL,fieldLabel:this.state.label})}}var constants=__webpack_require__(0);class heatmap_style_HeatmapStyle{constructor(descriptor={colorRampName:color_palettes.c}){var obj,key,value;value=void 0,(key="_descriptor")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this._descriptor=heatmap_style_HeatmapStyle.createDescriptor(descriptor.colorRampName)}static createDescriptor(colorRampName){return{type:constants.LAYER_STYLE_TYPE.HEATMAP,colorRampName:colorRampName||color_palettes.c}}getType(){return constants.LAYER_STYLE_TYPE.HEATMAP}renderEditor(onStyleDescriptorChange){return external_kbnSharedDeps_React_default.a.createElement(HeatmapStyleEditor,{colorRampName:this._descriptor.colorRampName,onHeatmapColorChange:({colorRampName:colorRampName})=>{const styleDescriptor=heatmap_style_HeatmapStyle.createDescriptor(colorRampName);onStyleDescriptorChange(styleDescriptor)}})}renderLegendDetails(field){return external_kbnSharedDeps_React_default.a.createElement(heatmap_legend_HeatmapLegend,{colorRampName:this._descriptor.colorRampName,field:field})}getIcon(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{size:"m",type:"heatmap"})}setMBPaintProperties({mbMap:mbMap,layerId:layerId,propertyName:propertyName,resolution:resolution}){let radius;if(resolution===constants.GRID_RESOLUTION.COARSE)radius=128;else if(resolution===constants.GRID_RESOLUTION.FINE)radius=64;else{if(resolution!==constants.GRID_RESOLUTION.MOST_FINE){const errorMessage=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.style.heatmap.resolutionStyleErrorMessage",{defaultMessage:"Resolution param not recognized: {resolution}",values:{resolution:resolution}});throw new Error(errorMessage)}radius=32}mbMap.setPaintProperty(layerId,"heatmap-radius",radius),mbMap.setPaintProperty(layerId,"heatmap-weight",{type:"identity",property:propertyName});const colorStops=Object(color_palettes.i)(this._descriptor.colorRampName,.1,1);colorStops&&mbMap.setPaintProperty(layerId,"heatmap-color",["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",...colorStops])}}var vector_layer=__webpack_require__(41),data_request=__webpack_require__(61);function heatmap_layer_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class heatmap_layer_HeatmapLayer extends layers_layer.a{static createDescriptor(options){const heatmapLayerDescriptor=super.createDescriptor(options);return heatmapLayerDescriptor.type=heatmap_layer_HeatmapLayer.type,heatmapLayerDescriptor.style=heatmap_style_HeatmapStyle.createDescriptor(),heatmapLayerDescriptor}constructor({layerDescriptor:layerDescriptor,source:source}){if(super({layerDescriptor:layerDescriptor,source:source}),heatmap_layer_defineProperty(this,"_style",void 0),layerDescriptor.style)this._style=new heatmap_style_HeatmapStyle(layerDescriptor.style);else{const defaultStyle=heatmap_style_HeatmapStyle.createDescriptor();this._style=new heatmap_style_HeatmapStyle(defaultStyle)}}destroy(){this.getSource()&&this.getSource().destroy()}getSource(){return super.getSource()}getStyleForEditing(){return this._style}getStyle(){return this._style}getCurrentStyle(){return this._style}_getPropKeyOfSelectedMetric(){return this.getSource().getMetricFields()[0].getName()}_getHeatmapLayerId(){return this.makeMbLayerId("heatmap")}getMbLayerIds(){return[this._getHeatmapLayerId()]}ownsMbLayerId(mbLayerId){return this._getHeatmapLayerId()===mbLayerId}ownsMbSourceId(mbSourceId){return this.getId()===mbSourceId}async syncData(syncContext){if(this.isLoadingBounds())return;const sourceQuery=this.getQuery();try{await Object(vector_layer.d)({layerId:this.getId(),layerName:await this.getDisplayName(this.getSource()),prevDataRequest:this.getSourceDataRequest(),requestMeta:{...syncContext.dataFilters,fieldNames:this.getSource().getFieldNames(),geogridPrecision:this.getSource().getGeoGridPrecision(syncContext.dataFilters.zoom),sourceQuery:sourceQuery||void 0,applyGlobalQuery:this.getSource().getApplyGlobalQuery(),applyGlobalTime:this.getSource().getApplyGlobalTime(),sourceMeta:this.getSource().getSyncMeta()},syncContext:syncContext,source:this.getSource()})}catch(error){if(!(error instanceof data_request.b))throw error}}syncLayerWithMB(mbMap){Object(vector_layer.b)(this._getMbSourceId(),this.getMbLayerIds(),mbMap);const heatmapLayerId=this._getHeatmapLayerId();mbMap.getLayer(heatmapLayerId)||mbMap.addLayer({id:heatmapLayerId,type:"heatmap",source:this.getId(),paint:{}});const mbGeoJSONSource=mbMap.getSource(this.getId()),sourceDataRequest=this.getSourceDataRequest(),featureCollection=sourceDataRequest?sourceDataRequest.getData():null;if(!featureCollection)return void mbGeoJSONSource.setData(constants.EMPTY_FEATURE_COLLECTION);const propertyKey=this._getPropKeyOfSelectedMetric();if(featureCollection!==layers_layer.a.getBoundDataForSource(mbMap,this.getId())){let max=1;for(let i=0;i<featureCollection.features.length;i++){var _featureCollection$fe;max=Math.max(null===(_featureCollection$fe=featureCollection.features[i].properties)||void 0===_featureCollection$fe?void 0:_featureCollection$fe[propertyKey],max)}for(let i=0;i<featureCollection.features.length;i++)featureCollection.features[i].properties&&(featureCollection.features[i].properties.__kbn_heatmap_weight__=featureCollection.features[i].properties[propertyKey]/max);mbGeoJSONSource.setData(featureCollection)}this.syncVisibilityWithMb(mbMap,heatmapLayerId),this.getCurrentStyle().setMBPaintProperties({mbMap:mbMap,layerId:heatmapLayerId,propertyName:"__kbn_heatmap_weight__",resolution:this.getSource().getGridResolution()}),mbMap.setPaintProperty(heatmapLayerId,"heatmap-opacity",this.getAlpha()),mbMap.setLayerZoomRange(heatmapLayerId,this.getMinZoom(),this.getMaxZoom())}getLayerTypeIconName(){return"heatmap"}async getFields(){return this.getSource().getFields()}async hasLegendDetails(){return!0}renderLegendDetails(){const metricFields=this.getSource().getMetricFields();return this.getCurrentStyle().renderLegendDetails(metricFields[0])}async getBounds(syncContext){return await Object(vector_layer.c)({layerId:this.getId(),syncContext:syncContext,source:this.getSource(),sourceQuery:this.getQuery()})}async isFilteredByGlobalTime(){return this.getSource().getApplyGlobalTime()&&await this.getSource().isTimeAware()}getIndexPatternIds(){return this.getSource().getIndexPatternIds()}getQueryableIndexPatternIds(){return this.getSource().getQueryableIndexPatternIds()}async getLicensedFeatures(){return await this.getSource().getLicensedFeatures()}}heatmap_layer_defineProperty(heatmap_layer_HeatmapLayer,"type",constants.LAYER_TYPE.HEATMAP)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return metrics_editor_MetricsEditor}));var external_kbnSharedDeps_React_=__webpack_require__(2),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(8),external_kbnSharedDeps_ElasticEui_=__webpack_require__(3),external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),constants=__webpack_require__(0);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const AGG_OPTIONS=[{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.metricSelect.averageDropDownOptionLabel",{defaultMessage:"Average"}),value:constants.AGG_TYPE.AVG},{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.metricSelect.countDropDownOptionLabel",{defaultMessage:"Count"}),value:constants.AGG_TYPE.COUNT},{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.metricSelect.maxDropDownOptionLabel",{defaultMessage:"Max"}),value:constants.AGG_TYPE.MAX},{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.metricSelect.minDropDownOptionLabel",{defaultMessage:"Min"}),value:constants.AGG_TYPE.MIN},{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.metricSelect.percentileDropDownOptionLabel",{defaultMessage:"Percentile"}),value:constants.AGG_TYPE.PERCENTILE},{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.metricSelect.sumDropDownOptionLabel",{defaultMessage:"Sum"}),value:constants.AGG_TYPE.SUM},{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.metricSelect.termsDropDownOptionLabel",{defaultMessage:"Top term"}),value:constants.AGG_TYPE.TERMS},{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.metricSelect.cardinalityDropDownOptionLabel",{defaultMessage:"Unique count"}),value:constants.AGG_TYPE.UNIQUE_COUNT}];function MetricSelect({value:value,onChange:onChange,metricsFilter:metricsFilter,...rest}){const options=metricsFilter?AGG_OPTIONS.filter(metricsFilter):AGG_OPTIONS;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiComboBox,_extends({placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.metricSelect.selectAggregationPlaceholder",{defaultMessage:"Select aggregation"}),singleSelection:!0,isClearable:!1,options:options,selectedOptions:AGG_OPTIONS.filter(option=>value===option.value),onChange:function(selectedOptions){if(0===selectedOptions.length)return;const aggType=selectedOptions[0].value;onChange(aggType)}},rest))}var single_field_select=__webpack_require__(57),index_pattern_util=__webpack_require__(44),validated_number_input=__webpack_require__(204);function filterFieldsForAgg(fields,aggType){if(!fields)return[];if(aggType===constants.AGG_TYPE.UNIQUE_COUNT||aggType===constants.AGG_TYPE.TERMS)return Object(index_pattern_util.h)(fields);const metricAggFieldTypes=["number"];return aggType!==constants.AGG_TYPE.SUM&&metricAggFieldTypes.push("date"),fields.filter(field=>field.aggregatable&&metricAggFieldTypes.includes(field.type))}function MetricEditor({fields:fields,metricsFilter:metricsFilter,metric:metric,onChange:onChange,showRemoveButton:showRemoveButton,onRemove:onRemove}){const onFieldChange=fieldName=>{fieldName&&metric.type!==constants.AGG_TYPE.COUNT&&onChange({label:metric.label,type:metric.type,field:fieldName})},onPercentileChange=percentile=>{metric.type===constants.AGG_TYPE.PERCENTILE&&onChange({...metric,percentile:percentile})},onLabelChange=e=>{onChange({...metric,label:e.target.value})};let fieldSelect,percentileSelect,labelInput,removeButton;if(metric.type&&metric.type!==constants.AGG_TYPE.COUNT){const showErrors=void 0===metric.field;fieldSelect=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.metricsEditor.selectFieldLabel",{defaultMessage:"Field"}),display:"columnCompressed",isInvalid:showErrors,error:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.metricsEditor.selectFieldError",{defaultMessage:"Field required for aggregation"})},external_kbnSharedDeps_React_default.a.createElement(single_field_select.a,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.metricsEditor.selectFieldPlaceholder",{defaultMessage:"Select field"}),value:metric.field?metric.field:null,onChange:onFieldChange,fields:filterFieldsForAgg(fields,metric.type),isClearable:!1,isInvalid:showErrors,compressed:!0}))}if(metric.type===constants.AGG_TYPE.PERCENTILE){const label=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.metricsEditor.selectPercentileLabel",{defaultMessage:"Percentile"});percentileSelect=external_kbnSharedDeps_React_default.a.createElement(validated_number_input.a,{min:0,max:100,onChange:onPercentileChange,label:label,initialValue:"number"==typeof metric.percentile?metric.percentile:constants.DEFAULT_PERCENTILE,display:"columnCompressed"})}return metric.type&&(labelInput=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.metricsEditor.customLabel",{defaultMessage:"Custom label"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{onChange:onLabelChange,value:metric.label?metric.label:"",compressed:!0}))),showRemoveButton&&(removeButton=external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapMetricEditorPanel__metricRemoveButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{iconType:"trash",size:"xs",color:"danger",onClick:onRemove,"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.metricsEditor.deleteMetricAriaLabel",{defaultMessage:"Delete metric"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.metricsEditor.deleteMetricButtonLabel",defaultMessage:"Delete metric"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.metricsEditor.aggregationLabel",{defaultMessage:"Aggregation"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(MetricSelect,{onChange:metricAggregationType=>{if(!metricAggregationType)return;const descriptor={type:metricAggregationType,label:metric.label};if(metricAggregationType===constants.AGG_TYPE.COUNT||!("field"in metric)||!metric.field)return void onChange(descriptor);const found=filterFieldsForAgg(fields,metricAggregationType).find(field=>field.name===metric.field),newDescriptor={...descriptor,field:found?metric.field:void 0};metricAggregationType===constants.AGG_TYPE.PERCENTILE?onChange({...newDescriptor,percentile:"percentile"in metric?metric.percentile:constants.DEFAULT_PERCENTILE}):onChange(newDescriptor)},value:metric.type,metricsFilter:metricsFilter,compressed:!0})),fieldSelect,percentileSelect,labelInput,removeButton)}var es_agg_source=__webpack_require__(87);class metrics_editor_MetricsEditor extends external_kbnSharedDeps_React_.Component{constructor(props){var obj,key,value;super(props),value=()=>{this.setState({metrics:[...this.state.metrics,{type:constants.AGG_TYPE.COUNT}]},this._onSubmit)},(key="_addMetric")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this.state={metrics:0===this.props.metrics.length?[es_agg_source.b]:this.props.metrics}}_onSubmit(){this.state.metrics.some(metric=>{return!((aggDescriptor=metric).type===constants.AGG_TYPE.COUNT||void 0!==aggDescriptor.field);var aggDescriptor})||this.props.onChange(this.state.metrics)}_renderMetrics(){return this.state.metrics.map((metric,index)=>external_kbnSharedDeps_React_default.a.createElement("div",{key:index,className:"mapMetricEditorPanel__metricEditor"},external_kbnSharedDeps_React_default.a.createElement(MetricEditor,{onChange:updatedMetric=>{this.setState({metrics:[...this.state.metrics.slice(0,index),updatedMetric,...this.state.metrics.slice(index+1)]},this._onSubmit)},metric:metric,fields:this.props.fields,metricsFilter:this.props.metricsFilter,showRemoveButton:index>0,onRemove:()=>{this.setState({metrics:[...this.state.metrics.slice(0,index),...this.state.metrics.slice(index+1)]},this._onSubmit)}})))}_renderAddMetricButton(){return this.props.allowMultipleMetrics?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextAlign,{textAlign:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:this._addMetric,size:"xs",iconType:"plusInCircleFilled"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.metricsEditor.addMetricButtonLabel",defaultMessage:"Add metric"})))):null}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapMapLayerPanel__metrics"},this._renderMetrics()),this._renderAddMetricButton())}}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;var _batch=__webpack_require__(151),nullListeners={notify:function(){}};var Subscription=function(){function Subscription(store,parentSub){this.store=store,this.parentSub=parentSub,this.unsubscribe=null,this.listeners=nullListeners,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var _proto=Subscription.prototype;return _proto.addNestedSub=function(listener){return this.trySubscribe(),this.listeners.subscribe(listener)},_proto.notifyNestedSubs=function(){this.listeners.notify()},_proto.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},_proto.isSubscribed=function(){return Boolean(this.unsubscribe)},_proto.trySubscribe=function(){var batch,first,last;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=(batch=(0,_batch.getBatch)(),first=null,last=null,{clear:function(){first=null,last=null},notify:function(){batch((function(){for(var listener=first;listener;)listener.callback(),listener=listener.next}))},get:function(){for(var listeners=[],listener=first;listener;)listeners.push(listener),listener=listener.next;return listeners},subscribe:function(callback){var isSubscribed=!0,listener=last={callback:callback,next:null,prev:last};return listener.prev?listener.prev.next=listener:first=listener,function(){isSubscribed&&null!==first&&(isSubscribed=!1,listener.next?listener.next.prev=listener.prev:last=listener.prev,listener.prev?listener.prev.next=listener.next:first=listener.next)}}}))},_proto.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=nullListeners)},Subscription}();exports.default=Subscription},function(module,exports){function _extends(){return module.exports=_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}module.exports=_extends},function(module,exports){module.exports=function(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AbstractLayer}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23),lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),_elastic_eui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),uuid_v4__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(11),uuid_v4__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(uuid_v4__WEBPACK_IMPORTED_MODULE_3__),_util_data_request__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(61),_common_constants__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),_reducers_copy_persistent_state__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(72),_common_get_agg_key__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(67);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class AbstractLayer{static createDescriptor(options){return{...options,sourceDescriptor:options.sourceDescriptor?options.sourceDescriptor:null,__dataRequests:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(options,"__dataRequests",[]),id:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(options,"id",uuid_v4__WEBPACK_IMPORTED_MODULE_3___default()()),label:options.label&&options.label.length>0?options.label:null,minZoom:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(options,"minZoom",_common_constants__WEBPACK_IMPORTED_MODULE_5__.MIN_ZOOM),maxZoom:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(options,"maxZoom",_common_constants__WEBPACK_IMPORTED_MODULE_5__.MAX_ZOOM),alpha:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(options,"alpha",.75),visible:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(options,"visible",!0),style:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(options,"style",null)}}destroy(){this._source&&this._source.destroy()}constructor({layerDescriptor:layerDescriptor,source:source}){_defineProperty(this,"_descriptor",void 0),_defineProperty(this,"_source",void 0),_defineProperty(this,"_dataRequests",void 0),this._descriptor=AbstractLayer.createDescriptor(layerDescriptor),this._source=source,this._descriptor.__dataRequests?this._dataRequests=this._descriptor.__dataRequests.map(dataRequest=>new _util_data_request__WEBPACK_IMPORTED_MODULE_4__.a(dataRequest)):this._dataRequests=[]}static getBoundDataForSource(mbMap,sourceId){return mbMap.getStyle().sources[sourceId].data}async cloneDescriptor(){const clonedDescriptor=Object(_reducers_copy_persistent_state__WEBPACK_IMPORTED_MODULE_6__.b)(this._descriptor);clonedDescriptor.id=uuid_v4__WEBPACK_IMPORTED_MODULE_3___default()();const displayName=await this.getDisplayName();return clonedDescriptor.label="Clone of "+displayName,clonedDescriptor.sourceDescriptor=this.getSource().cloneDescriptor(),clonedDescriptor.joins&&clonedDescriptor.joins.forEach(joinDescriptor=>{if(joinDescriptor.right&&joinDescriptor.right.type===_common_constants__WEBPACK_IMPORTED_MODULE_5__.SOURCE_TYPES.TABLE_SOURCE)throw new Error("Cannot clone table-source. Should only be used in MapEmbeddable, not in UX");const termSourceDescriptor=joinDescriptor.right,originalJoinId=joinDescriptor.right.id;if(joinDescriptor.right.id=uuid_v4__WEBPACK_IMPORTED_MODULE_3___default()(),clonedDescriptor.style&&"properties"in clonedDescriptor.style){(termSourceDescriptor.metrics&&termSourceDescriptor.metrics.length?termSourceDescriptor.metrics:[{type:_common_constants__WEBPACK_IMPORTED_MODULE_5__.AGG_TYPE.COUNT}]).forEach(metricsDescriptor=>{const originalJoinKey=Object(_common_get_agg_key__WEBPACK_IMPORTED_MODULE_7__.a)({aggType:metricsDescriptor.type,aggFieldName:"field"in metricsDescriptor?metricsDescriptor.field:"",rightSourceId:originalJoinId}),newJoinKey=Object(_common_get_agg_key__WEBPACK_IMPORTED_MODULE_7__.a)({aggType:metricsDescriptor.type,aggFieldName:"field"in metricsDescriptor?metricsDescriptor.field:"",rightSourceId:joinDescriptor.right.id});Object.keys(clonedDescriptor.style.properties).forEach(key=>{const styleProp=clonedDescriptor.style.properties[key];styleProp.type===_common_constants__WEBPACK_IMPORTED_MODULE_5__.STYLE_TYPE.DYNAMIC&&styleProp.options.field&&styleProp.options.field.origin===_common_constants__WEBPACK_IMPORTED_MODULE_5__.FIELD_ORIGIN.JOIN&&styleProp.options.field.name===originalJoinKey&&(styleProp.options.field.name=newJoinKey)})})}}),clonedDescriptor}makeMbLayerId(layerNameSuffix){return`${this.getId()}${_common_constants__WEBPACK_IMPORTED_MODULE_5__.MB_SOURCE_ID_LAYER_ID_PREFIX_DELIMITER}${layerNameSuffix}`}showJoinEditor(){return this.getSource().showJoinEditor()}getJoinsDisabledReason(){return this.getSource().getJoinsDisabledReason()}isPreviewLayer(){return!!this._descriptor.__isPreviewLayer}supportsElasticsearchFilters(){return this.getSource().isESSource()}async supportsFitToBounds(){return await this.getSource().supportsFitToBounds()}async isFittable(){return await this.supportsFitToBounds()&&this.isVisible()}async isFilteredByGlobalTime(){return!1}async getDisplayName(source){if(this._descriptor.label)return this._descriptor.label;return(source?await source.getDisplayName():await this.getSource().getDisplayName())||"Layer "+this._descriptor.id}async getAttributions(){return this.hasErrors()?[]:await this.getSource().getAttributions()}getStyleForEditing(){throw new Error("Should implement AbstractLayer#getStyleForEditing")}getStyle(){throw new Error("Should implement AbstractLayer#getStyle")}getCurrentStyle(){throw new Error("Should implement AbstractLayer#getCurrentStyle")}getLabel(){return this._descriptor.label?this._descriptor.label:""}getCustomIconAndTooltipContent(){return{icon:react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiIcon,{size:"m",type:this.getLayerTypeIconName()})}}async hasLegendDetails(){return!1}renderLegendDetails(){return null}getId(){return this._descriptor.id}getSource(){return this._source}getSourceForEditing(){return this._source}isVisible(){return!!this._descriptor.visible}showAtZoomLevel(zoom){return zoom>=this.getMinZoom()&&zoom<=this.getMaxZoom()}getMinZoom(){return"number"==typeof this._descriptor.minZoom?this._descriptor.minZoom:_common_constants__WEBPACK_IMPORTED_MODULE_5__.MIN_ZOOM}getMaxZoom(){return"number"==typeof this._descriptor.maxZoom?this._descriptor.maxZoom:_common_constants__WEBPACK_IMPORTED_MODULE_5__.MAX_ZOOM}getMinSourceZoom(){return this._source.getMinZoom()}_getMbSourceId(){return this.getId()}_requiresPrevSourceCleanup(mbMap){return!1}_removeStaleMbSourcesAndLayers(mbMap){if(this._requiresPrevSourceCleanup(mbMap)){const mbStyle=mbMap.getStyle();mbStyle.layers.forEach(mbLayer=>{this.ownsMbLayerId(mbLayer.id)&&mbMap.removeLayer(mbLayer.id)}),Object.keys(mbStyle.sources).some(mbSourceId=>{this.ownsMbSourceId(mbSourceId)&&mbMap.removeSource(mbSourceId)})}}getAlpha(){return"number"==typeof this._descriptor.alpha?this._descriptor.alpha:1}getQuery(){return this._descriptor.query?this._descriptor.query:null}async getImmutableSourceProperties(){const source=this.getSource();return await source.getImmutableProperties()}renderSourceSettingsEditor({onChange:onChange}){return this.getSourceForEditing().renderSourceSettingsEditor({onChange:onChange,currentLayerType:this._descriptor.type})}getPrevRequestToken(dataId){const prevDataRequest=this.getDataRequest(dataId);if(prevDataRequest)return prevDataRequest.getRequestToken()}getInFlightRequestTokens(){if(!this._dataRequests)return[];const requestTokens=this._dataRequests.map(dataRequest=>dataRequest.getRequestToken());return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.compact(requestTokens)}getSourceDataRequest(){return this.getDataRequest(_common_constants__WEBPACK_IMPORTED_MODULE_5__.SOURCE_DATA_REQUEST_ID)}getDataRequest(id){return this._dataRequests.find(dataRequest=>dataRequest.getDataId()===id)}isLayerLoading(){return void 0!==this._descriptor.__areTilesLoaded&&!this._descriptor.__areTilesLoaded||this._dataRequests.some(dataRequest=>dataRequest.isLoading())}isLoadingBounds(){const boundsDataRequest=this.getDataRequest(_common_constants__WEBPACK_IMPORTED_MODULE_5__.SOURCE_BOUNDS_DATA_REQUEST_ID);return!!boundsDataRequest&&boundsDataRequest.isLoading()}hasErrors(){return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(this._descriptor,"__isInErrorState",!1)}getErrors(){return this.hasErrors()&&this._descriptor.__errorMessage?this._descriptor.__errorMessage:""}async syncData(syncContext){}getMbLayerIds(){throw new Error("Should implement AbstractLayer#getMbLayerIds")}ownsMbLayerId(layerId){throw new Error("Should implement AbstractLayer#ownsMbLayerId")}ownsMbSourceId(mbSourceId){throw new Error("Should implement AbstractLayer#ownsMbSourceId")}canShowTooltip(){return!1}syncLayerWithMB(mbMap){throw new Error("Should implement AbstractLayer#syncLayerWithMB")}getLayerTypeIconName(){throw new Error("should implement Layer#getLayerTypeIconName")}isInitialDataLoadComplete(){const sourceDataRequest=this.getSourceDataRequest();return!!sourceDataRequest&&sourceDataRequest.hasData()}async getBounds(dataRequestContext){return null}renderStyleEditor(onStyleDescriptorChange){const style=this.getStyleForEditing();return style?style.renderEditor(onStyleDescriptorChange):null}getIndexPatternIds(){return[]}getQueryableIndexPatternIds(){return[]}syncVisibilityWithMb(mbMap,mbLayerId){mbMap.setLayoutProperty(mbLayerId,"visibility",this.isVisible()?"visible":"none")}getType(){return this._descriptor.type}areLabelsOnTop(){return!1}supportsLabelsOnTop(){return!1}async getLicensedFeatures(){return[]}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return VectorTileLayer}));var _tile_layer_tile_layer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(76),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(23),lodash__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__),_common_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(42),_connected_components_mb_map_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(216);const MB_STYLE_TYPE_TO_OPACITY={fill:["fill-opacity"],line:["line-opacity"],circle:["circle-opacity"],background:["background-opacity"],symbol:["icon-opacity","text-opacity"]};class VectorTileLayer extends _tile_layer_tile_layer__WEBPACK_IMPORTED_MODULE_0__.a{static createDescriptor(options){const tileLayerDescriptor=super.createDescriptor(options);return tileLayerDescriptor.type=VectorTileLayer.type,tileLayerDescriptor.alpha=lodash__WEBPACK_IMPORTED_MODULE_1___default.a.get(options,"alpha",1),tileLayerDescriptor.style={type:_common_constants__WEBPACK_IMPORTED_MODULE_2__.LAYER_STYLE_TYPE.TILE},tileLayerDescriptor}_canSkipSync({prevDataRequest:prevDataRequest,nextMeta:nextMeta}){if(!prevDataRequest)return!1;const prevMeta=prevDataRequest.getMeta();return!!prevMeta&&prevMeta.tileLayerId===nextMeta.tileLayerId}async syncData({startLoading:startLoading,stopLoading:stopLoading,onLoadError:onLoadError}){const nextMeta={tileLayerId:this.getSource().getTileLayerId()};if(this._canSkipSync({prevDataRequest:this.getSourceDataRequest(),nextMeta:nextMeta}))return;const requestToken=Symbol(`layer-source-refresh:${this.getId()} - source`);try{startLoading(_common_constants__WEBPACK_IMPORTED_MODULE_2__.SOURCE_DATA_REQUEST_ID,requestToken,nextMeta);const styleAndSprites=await this.getSource().getVectorStyleSheetAndSpriteMeta(Object(_util__WEBPACK_IMPORTED_MODULE_3__.g)()),spriteSheetImageData=await Object(_connected_components_mb_map_utils__WEBPACK_IMPORTED_MODULE_4__.b)(styleAndSprites.spriteMeta.png),data={...styleAndSprites,spriteSheetImageData:spriteSheetImageData};stopLoading(_common_constants__WEBPACK_IMPORTED_MODULE_2__.SOURCE_DATA_REQUEST_ID,requestToken,data)}catch(error){onLoadError(_common_constants__WEBPACK_IMPORTED_MODULE_2__.SOURCE_DATA_REQUEST_ID,requestToken,error.message)}}_generateMbId(name){return`${this.getId()}_${name}`}_generateMbSourceIdPrefix(){return`${this.getId()}___${this.getSource().getTileLayerId()}___`}_generateMbSourceId(name){return`${this._generateMbSourceIdPrefix()}${name}`}_getVectorStyle(){const sourceDataRequest=this.getSourceDataRequest();if(!sourceDataRequest)return null;const vectorStyleAndSprites=sourceDataRequest.getData();return vectorStyleAndSprites?vectorStyleAndSprites.vectorStyleSheet:null}_getSpriteMeta(){const sourceDataRequest=this.getSourceDataRequest();if(!sourceDataRequest)return null;return sourceDataRequest.getData().spriteMeta}_getSpriteImageData(){const sourceDataRequest=this.getSourceDataRequest();if(!sourceDataRequest)return null;return sourceDataRequest.getData().spriteSheetImageData}getMbLayerIds(){const vectorStyle=this._getVectorStyle();return vectorStyle?vectorStyle.layers.map(layer=>this._generateMbId(layer.id)):[]}getMbSourceIds(){const vectorStyle=this._getVectorStyle();if(!vectorStyle)return[];return Object.keys(vectorStyle.sources).map(sourceId=>this._generateMbSourceId(sourceId))}ownsMbLayerId(mbLayerId){return mbLayerId.startsWith(this.getId())}ownsMbSourceId(mbSourceId){return mbSourceId.startsWith(this.getId())}_makeNamespacedImageId(imageId){return this.getSource().getSpriteNamespacePrefix()+"/"+imageId}_requiresPrevSourceCleanup(mbMap){const sourceIdPrefix=this._generateMbSourceIdPrefix(),mbStyle=mbMap.getStyle();return Object.keys(mbStyle.sources).some(mbSourceId=>{const doesMbSourceBelongToLayer=this.ownsMbSourceId(mbSourceId),doesMbSourceBelongToSource=mbSourceId.startsWith(sourceIdPrefix);return doesMbSourceBelongToLayer&&!doesMbSourceBelongToSource})}syncLayerWithMB(mbMap){const vectorStyle=this._getVectorStyle();if(!vectorStyle)return;this._removeStaleMbSourcesAndLayers(mbMap);let initialBootstrapCompleted=!1;if(Object.keys(vectorStyle.sources).forEach(sourceId=>{if(initialBootstrapCompleted)return;const mbSourceId=this._generateMbSourceId(sourceId);mbMap.getSource(mbSourceId)?initialBootstrapCompleted=!0:mbMap.addSource(mbSourceId,vectorStyle.sources[sourceId])}),!initialBootstrapCompleted){const spriteMeta=this._getSpriteMeta();if(!spriteMeta)return;const newJson={};for(const imageId in spriteMeta.json)if(spriteMeta.json.hasOwnProperty(imageId)){newJson[this._makeNamespacedImageId(imageId)]=spriteMeta.json[imageId]}const imageData=this._getSpriteImageData();if(!imageData)return;Object(_connected_components_mb_map_utils__WEBPACK_IMPORTED_MODULE_4__.a)(newJson,imageData,mbMap),vectorStyle.layers.forEach(layer=>{const mbLayerId=this._generateMbId(layer.id);if(mbMap.getLayer(mbLayerId))return;const newLayerObject={...layer,source:this._generateMbSourceId(layer.source),id:mbLayerId};"symbol"===newLayerObject.type&&newLayerObject.layout&&"string"==typeof newLayerObject.layout["icon-image"]&&(newLayerObject.layout["icon-image"]=this._makeNamespacedImageId(newLayerObject.layout["icon-image"])),"fill"===newLayerObject.type&&newLayerObject.paint&&"string"==typeof newLayerObject.paint["fill-pattern"]&&(newLayerObject.paint["fill-pattern"]=this._makeNamespacedImageId(newLayerObject.paint["fill-pattern"])),mbMap.addLayer(newLayerObject)})}this._setTileLayerProperties(mbMap)}_setOpacityForType(mbMap,mbLayer,mbLayerId){const opacityProps=MB_STYLE_TYPE_TO_OPACITY[mbLayer.type];opacityProps&&opacityProps.forEach(opacityProp=>{if(mbLayer.paint&&"number"==typeof mbLayer.paint[opacityProp]){const newOpacity=mbLayer.paint[opacityProp]*this.getAlpha();mbMap.setPaintProperty(mbLayerId,opacityProp,newOpacity)}else mbMap.setPaintProperty(mbLayerId,opacityProp,this.getAlpha())})}_setLayerZoomRange(mbMap,mbLayer,mbLayerId){let minZoom=this._descriptor.minZoom;"number"==typeof mbLayer.minzoom&&(minZoom=Math.max(minZoom,mbLayer.minzoom));let maxZoom=this._descriptor.maxZoom;"number"==typeof mbLayer.maxzoom&&(maxZoom=Math.min(maxZoom,mbLayer.maxzoom)),mbMap.setLayerZoomRange(mbLayerId,minZoom,maxZoom)}_setTileLayerProperties(mbMap){const vectorStyle=this._getVectorStyle();vectorStyle&&vectorStyle.layers.forEach(mbLayer=>{const mbLayerId=this._generateMbId(mbLayer.id);this.syncVisibilityWithMb(mbMap,mbLayerId),this._setLayerZoomRange(mbMap,mbLayer,mbLayerId),this._setOpacityForType(mbMap,mbLayer,mbLayerId)})}areLabelsOnTop(){return!!this._descriptor.areLabelsOnTop}supportsLabelsOnTop(){return!0}async getLicensedFeatures(){return this._source.getLicensedFeatures()}}var obj,key,value;obj=VectorTileLayer,key="type",value=_common_constants__WEBPACK_IMPORTED_MODULE_2__.LAYER_TYPE.VECTOR_TILE,key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value},function(module,exports){const numeric=/^[0-9]+$/,compareIdentifiers=(a,b)=>{const anum=numeric.test(a),bnum=numeric.test(b);return anum&&bnum&&(a=+a,b=+b),a===b?0:anum&&!bnum?-1:bnum&&!anum?1:a<b?-1:1};module.exports={compareIdentifiers:compareIdentifiers,rcompareIdentifiers:(a,b)=>compareIdentifiers(b,a)}},function(module,exports,__webpack_require__){const compare=__webpack_require__(55);module.exports=(a,b,loose)=>0===compare(a,b,loose)},function(module,exports,__webpack_require__){const SemVer=__webpack_require__(43);module.exports=(a,b,loose)=>{const versionA=new SemVer(a,loose),versionB=new SemVer(b,loose);return versionA.compare(versionB)||versionA.compareBuild(versionB)}},function(module,exports,__webpack_require__){const compare=__webpack_require__(55);module.exports=(a,b,loose)=>compare(a,b,loose)<0},function(module,exports,__webpack_require__){const compare=__webpack_require__(55);module.exports=(a,b,loose)=>compare(a,b,loose)>=0},function(module,exports,__webpack_require__){const compare=__webpack_require__(55);module.exports=(a,b,loose)=>compare(a,b,loose)<=0},function(module,exports,__webpack_require__){const SemVer=__webpack_require__(43),Comparator=__webpack_require__(96),{ANY:ANY}=Comparator,Range=__webpack_require__(56),satisfies=__webpack_require__(97),gt=__webpack_require__(95),lt=__webpack_require__(115),lte=__webpack_require__(117),gte=__webpack_require__(116);module.exports=(version,range,hilo,options)=>{let gtfn,ltefn,ltfn,comp,ecomp;switch(version=new SemVer(version,options),range=new Range(range,options),hilo){case">":gtfn=gt,ltefn=lte,ltfn=lt,comp=">",ecomp=">=";break;case"<":gtfn=lt,ltefn=gte,ltfn=gt,comp="<",ecomp="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies(version,range,options))return!1;for(let i=0;i<range.set.length;++i){const comparators=range.set[i];let high=null,low=null;if(comparators.forEach(comparator=>{comparator.semver===ANY&&(comparator=new Comparator(">=0.0.0")),high=high||comparator,low=low||comparator,gtfn(comparator.semver,high.semver,options)?high=comparator:ltfn(comparator.semver,low.semver,options)&&(low=comparator)}),high.operator===comp||high.operator===ecomp)return!1;if((!low.operator||low.operator===comp)&&ltefn(version,low.semver))return!1;if(low.operator===ecomp&&ltfn(version,low.semver))return!1}return!0}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var invariant_1=__webpack_require__(63),helpers_1=__webpack_require__(46);exports.default=function(from,to,options){void 0===options&&(options={});var coordinates1=invariant_1.getCoord(from),coordinates2=invariant_1.getCoord(to),dLat=helpers_1.degreesToRadians(coordinates2[1]-coordinates1[1]),dLon=helpers_1.degreesToRadians(coordinates2[0]-coordinates1[0]),lat1=helpers_1.degreesToRadians(coordinates1[1]),lat2=helpers_1.degreesToRadians(coordinates2[1]),a=Math.pow(Math.sin(dLat/2),2)+Math.pow(Math.sin(dLon/2),2)*Math.cos(lat1)*Math.cos(lat2);return helpers_1.radiansToLength(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),options.units)}},function(module,exports){(function(){exports.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLAttribute,XMLNamedNodeMap,XMLNode,getValue,isFunction,isObject,ref,hasProp={}.hasOwnProperty;ref=__webpack_require__(62),isObject=ref.isObject,isFunction=ref.isFunction,getValue=ref.getValue,XMLNode=__webpack_require__(50),NodeType=__webpack_require__(39),XMLAttribute=__webpack_require__(174),XMLNamedNodeMap=__webpack_require__(122),module.exports=function(superClass){function XMLElement(parent,name,attributes){var child,j,len,ref1;if(XMLElement.__super__.constructor.call(this,parent),null==name)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(name),this.type=NodeType.Element,this.attribs={},this.schemaTypeInfo=null,null!=attributes&&this.attribute(attributes),parent.type===NodeType.Document&&(this.isRoot=!0,this.documentObject=parent,parent.rootObject=this,parent.children))for(j=0,len=(ref1=parent.children).length;j<len;j++)if((child=ref1[j]).type===NodeType.DocType){child.name=this.name;break}}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(XMLElement,superClass),Object.defineProperty(XMLElement.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(XMLElement.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(XMLElement.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(XMLElement.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(XMLElement.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(XMLElement.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(XMLElement.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(XMLElement.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new XMLNamedNodeMap(this.attribs)),this.attributeMap}}),XMLElement.prototype.clone=function(){var att,attName,clonedSelf,ref1;for(attName in(clonedSelf=Object.create(this)).isRoot&&(clonedSelf.documentObject=null),clonedSelf.attribs={},ref1=this.attribs)hasProp.call(ref1,attName)&&(att=ref1[attName],clonedSelf.attribs[attName]=att.clone());return clonedSelf.children=[],this.children.forEach((function(child){var clonedChild;return(clonedChild=child.clone()).parent=clonedSelf,clonedSelf.children.push(clonedChild)})),clonedSelf},XMLElement.prototype.attribute=function(name,value){var attName,attValue;if(null!=name&&(name=getValue(name)),isObject(name))for(attName in name)hasProp.call(name,attName)&&(attValue=name[attName],this.attribute(attName,attValue));else isFunction(value)&&(value=value.apply()),this.options.keepNullAttributes&&null==value?this.attribs[name]=new XMLAttribute(this,name,""):null!=value&&(this.attribs[name]=new XMLAttribute(this,name,value));return this},XMLElement.prototype.removeAttribute=function(name){var attName,j,len;if(null==name)throw new Error("Missing attribute name. "+this.debugInfo());if(name=getValue(name),Array.isArray(name))for(j=0,len=name.length;j<len;j++)attName=name[j],delete this.attribs[attName];else delete this.attribs[name];return this},XMLElement.prototype.toString=function(options){return this.options.writer.element(this,this.options.writer.filterOptions(options))},XMLElement.prototype.att=function(name,value){return this.attribute(name,value)},XMLElement.prototype.a=function(name,value){return this.attribute(name,value)},XMLElement.prototype.getAttribute=function(name){return this.attribs.hasOwnProperty(name)?this.attribs[name].value:null},XMLElement.prototype.setAttribute=function(name,value){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getAttributeNode=function(name){return this.attribs.hasOwnProperty(name)?this.attribs[name]:null},XMLElement.prototype.setAttributeNode=function(newAttr){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.removeAttributeNode=function(oldAttr){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getElementsByTagName=function(name){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getAttributeNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.setAttributeNS=function(namespaceURI,qualifiedName,value){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.removeAttributeNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getAttributeNodeNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.setAttributeNodeNS=function(newAttr){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getElementsByTagNameNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.hasAttribute=function(name){return this.attribs.hasOwnProperty(name)},XMLElement.prototype.hasAttributeNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.setIdAttribute=function(name,isId){return this.attribs.hasOwnProperty(name)?this.attribs[name].isId:isId},XMLElement.prototype.setIdAttributeNS=function(namespaceURI,localName,isId){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.setIdAttributeNode=function(idAttr,isId){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getElementsByTagName=function(tagname){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getElementsByTagNameNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getElementsByClassName=function(classNames){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.isEqualNode=function(node){var i,j,ref1;if(!XMLElement.__super__.isEqualNode.apply(this,arguments).isEqualNode(node))return!1;if(node.namespaceURI!==this.namespaceURI)return!1;if(node.prefix!==this.prefix)return!1;if(node.localName!==this.localName)return!1;if(node.attribs.length!==this.attribs.length)return!1;for(i=j=0,ref1=this.attribs.length-1;0<=ref1?j<=ref1:j>=ref1;i=0<=ref1?++j:--j)if(!this.attribs[i].isEqualNode(node.attribs[i]))return!1;return!0},XMLElement}(XMLNode)}).call(this)},function(module,exports){(function(){module.exports=function(){function XMLNamedNodeMap(nodes){this.nodes=nodes}return Object.defineProperty(XMLNamedNodeMap.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),XMLNamedNodeMap.prototype.clone=function(){return this.nodes=null},XMLNamedNodeMap.prototype.getNamedItem=function(name){return this.nodes[name]},XMLNamedNodeMap.prototype.setNamedItem=function(node){var oldNode;return oldNode=this.nodes[node.nodeName],this.nodes[node.nodeName]=node,oldNode||null},XMLNamedNodeMap.prototype.removeNamedItem=function(name){var oldNode;return oldNode=this.nodes[name],delete this.nodes[name],oldNode||null},XMLNamedNodeMap.prototype.item=function(index){return this.nodes[Object.keys(this.nodes)[index]]||null},XMLNamedNodeMap.prototype.getNamedItemNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented.")},XMLNamedNodeMap.prototype.setNamedItemNS=function(node){throw new Error("This DOM method is not implemented.")},XMLNamedNodeMap.prototype.removeNamedItemNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented.")},XMLNamedNodeMap}()}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLCharacterData,hasProp={}.hasOwnProperty;NodeType=__webpack_require__(39),XMLCharacterData=__webpack_require__(101),module.exports=function(superClass){function XMLCData(parent,text){if(XMLCData.__super__.constructor.call(this,parent),null==text)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=NodeType.CData,this.value=this.stringify.cdata(text)}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(XMLCData,superClass),XMLCData.prototype.clone=function(){return Object.create(this)},XMLCData.prototype.toString=function(options){return this.options.writer.cdata(this,this.options.writer.filterOptions(options))},XMLCData}(XMLCharacterData)}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLCharacterData,hasProp={}.hasOwnProperty;NodeType=__webpack_require__(39),XMLCharacterData=__webpack_require__(101),module.exports=function(superClass){function XMLComment(parent,text){if(XMLComment.__super__.constructor.call(this,parent),null==text)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=NodeType.Comment,this.value=this.stringify.comment(text)}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(XMLComment,superClass),XMLComment.prototype.clone=function(){return Object.create(this)},XMLComment.prototype.toString=function(options){return this.options.writer.comment(this,this.options.writer.filterOptions(options))},XMLComment}(XMLCharacterData)}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLNode,isObject,hasProp={}.hasOwnProperty;isObject=__webpack_require__(62).isObject,XMLNode=__webpack_require__(50),NodeType=__webpack_require__(39),module.exports=function(superClass){function XMLDeclaration(parent,version,encoding,standalone){var ref;XMLDeclaration.__super__.constructor.call(this,parent),isObject(version)&&(version=(ref=version).version,encoding=ref.encoding,standalone=ref.standalone),version||(version="1.0"),this.type=NodeType.Declaration,this.version=this.stringify.xmlVersion(version),null!=encoding&&(this.encoding=this.stringify.xmlEncoding(encoding)),null!=standalone&&(this.standalone=this.stringify.xmlStandalone(standalone))}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(XMLDeclaration,superClass),XMLDeclaration.prototype.toString=function(options){return this.options.writer.declaration(this,this.options.writer.filterOptions(options))},XMLDeclaration}(XMLNode)}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLDTDAttList,XMLDTDElement,XMLDTDEntity,XMLDTDNotation,XMLNamedNodeMap,XMLNode,isObject,hasProp={}.hasOwnProperty;isObject=__webpack_require__(62).isObject,XMLNode=__webpack_require__(50),NodeType=__webpack_require__(39),XMLDTDAttList=__webpack_require__(127),XMLDTDEntity=__webpack_require__(128),XMLDTDElement=__webpack_require__(129),XMLDTDNotation=__webpack_require__(130),XMLNamedNodeMap=__webpack_require__(122),module.exports=function(superClass){function XMLDocType(parent,pubID,sysID){var child,i,len,ref,ref1,ref2;if(XMLDocType.__super__.constructor.call(this,parent),this.type=NodeType.DocType,parent.children)for(i=0,len=(ref=parent.children).length;i<len;i++)if((child=ref[i]).type===NodeType.Element){this.name=child.name;break}this.documentObject=parent,isObject(pubID)&&(pubID=(ref1=pubID).pubID,sysID=ref1.sysID),null==sysID&&(sysID=(ref2=[pubID,sysID])[0],pubID=ref2[1]),null!=pubID&&(this.pubID=this.stringify.dtdPubID(pubID)),null!=sysID&&(this.sysID=this.stringify.dtdSysID(sysID))}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(XMLDocType,superClass),Object.defineProperty(XMLDocType.prototype,"entities",{get:function(){var child,i,len,nodes,ref;for(nodes={},i=0,len=(ref=this.children).length;i<len;i++)(child=ref[i]).type!==NodeType.EntityDeclaration||child.pe||(nodes[child.name]=child);return new XMLNamedNodeMap(nodes)}}),Object.defineProperty(XMLDocType.prototype,"notations",{get:function(){var child,i,len,nodes,ref;for(nodes={},i=0,len=(ref=this.children).length;i<len;i++)(child=ref[i]).type===NodeType.NotationDeclaration&&(nodes[child.name]=child);return new XMLNamedNodeMap(nodes)}}),Object.defineProperty(XMLDocType.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(XMLDocType.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(XMLDocType.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),XMLDocType.prototype.element=function(name,value){var child;return child=new XMLDTDElement(this,name,value),this.children.push(child),this},XMLDocType.prototype.attList=function(elementName,attributeName,attributeType,defaultValueType,defaultValue){var child;return child=new XMLDTDAttList(this,elementName,attributeName,attributeType,defaultValueType,defaultValue),this.children.push(child),this},XMLDocType.prototype.entity=function(name,value){var child;return child=new XMLDTDEntity(this,!1,name,value),this.children.push(child),this},XMLDocType.prototype.pEntity=function(name,value){var child;return child=new XMLDTDEntity(this,!0,name,value),this.children.push(child),this},XMLDocType.prototype.notation=function(name,value){var child;return child=new XMLDTDNotation(this,name,value),this.children.push(child),this},XMLDocType.prototype.toString=function(options){return this.options.writer.docType(this,this.options.writer.filterOptions(options))},XMLDocType.prototype.ele=function(name,value){return this.element(name,value)},XMLDocType.prototype.att=function(elementName,attributeName,attributeType,defaultValueType,defaultValue){return this.attList(elementName,attributeName,attributeType,defaultValueType,defaultValue)},XMLDocType.prototype.ent=function(name,value){return this.entity(name,value)},XMLDocType.prototype.pent=function(name,value){return this.pEntity(name,value)},XMLDocType.prototype.not=function(name,value){return this.notation(name,value)},XMLDocType.prototype.up=function(){return this.root()||this.documentObject},XMLDocType.prototype.isEqualNode=function(node){return!!XMLDocType.__super__.isEqualNode.apply(this,arguments).isEqualNode(node)&&(node.name===this.name&&(node.publicId===this.publicId&&node.systemId===this.systemId))},XMLDocType}(XMLNode)}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLNode,hasProp={}.hasOwnProperty;XMLNode=__webpack_require__(50),NodeType=__webpack_require__(39),module.exports=function(superClass){function XMLDTDAttList(parent,elementName,attributeName,attributeType,defaultValueType,defaultValue){if(XMLDTDAttList.__super__.constructor.call(this,parent),null==elementName)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==attributeName)throw new Error("Missing DTD attribute name. "+this.debugInfo(elementName));if(!attributeType)throw new Error("Missing DTD attribute type. "+this.debugInfo(elementName));if(!defaultValueType)throw new Error("Missing DTD attribute default. "+this.debugInfo(elementName));if(0!==defaultValueType.indexOf("#")&&(defaultValueType="#"+defaultValueType),!defaultValueType.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(elementName));if(defaultValue&&!defaultValueType.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(elementName));this.elementName=this.stringify.name(elementName),this.type=NodeType.AttributeDeclaration,this.attributeName=this.stringify.name(attributeName),this.attributeType=this.stringify.dtdAttType(attributeType),defaultValue&&(this.defaultValue=this.stringify.dtdAttDefault(defaultValue)),this.defaultValueType=defaultValueType}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(XMLDTDAttList,superClass),XMLDTDAttList.prototype.toString=function(options){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(options))},XMLDTDAttList}(XMLNode)}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLNode,isObject,hasProp={}.hasOwnProperty;isObject=__webpack_require__(62).isObject,XMLNode=__webpack_require__(50),NodeType=__webpack_require__(39),module.exports=function(superClass){function XMLDTDEntity(parent,pe,name,value){if(XMLDTDEntity.__super__.constructor.call(this,parent),null==name)throw new Error("Missing DTD entity name. "+this.debugInfo(name));if(null==value)throw new Error("Missing DTD entity value. "+this.debugInfo(name));if(this.pe=!!pe,this.name=this.stringify.name(name),this.type=NodeType.EntityDeclaration,isObject(value)){if(!value.pubID&&!value.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(name));if(value.pubID&&!value.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(name));if(this.internal=!1,null!=value.pubID&&(this.pubID=this.stringify.dtdPubID(value.pubID)),null!=value.sysID&&(this.sysID=this.stringify.dtdSysID(value.sysID)),null!=value.nData&&(this.nData=this.stringify.dtdNData(value.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(name))}else this.value=this.stringify.dtdEntityValue(value),this.internal=!0}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(XMLDTDEntity,superClass),Object.defineProperty(XMLDTDEntity.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(XMLDTDEntity.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(XMLDTDEntity.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(XMLDTDEntity.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(XMLDTDEntity.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(XMLDTDEntity.prototype,"xmlVersion",{get:function(){return null}}),XMLDTDEntity.prototype.toString=function(options){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(options))},XMLDTDEntity}(XMLNode)}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLNode,hasProp={}.hasOwnProperty;XMLNode=__webpack_require__(50),NodeType=__webpack_require__(39),module.exports=function(superClass){function XMLDTDElement(parent,name,value){if(XMLDTDElement.__super__.constructor.call(this,parent),null==name)throw new Error("Missing DTD element name. "+this.debugInfo());value||(value="(#PCDATA)"),Array.isArray(value)&&(value="("+value.join(",")+")"),this.name=this.stringify.name(name),this.type=NodeType.ElementDeclaration,this.value=this.stringify.dtdElementValue(value)}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(XMLDTDElement,superClass),XMLDTDElement.prototype.toString=function(options){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(options))},XMLDTDElement}(XMLNode)}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLNode,hasProp={}.hasOwnProperty;XMLNode=__webpack_require__(50),NodeType=__webpack_require__(39),module.exports=function(superClass){function XMLDTDNotation(parent,name,value){if(XMLDTDNotation.__super__.constructor.call(this,parent),null==name)throw new Error("Missing DTD notation name. "+this.debugInfo(name));if(!value.pubID&&!value.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(name));this.name=this.stringify.name(name),this.type=NodeType.NotationDeclaration,null!=value.pubID&&(this.pubID=this.stringify.dtdPubID(value.pubID)),null!=value.sysID&&(this.sysID=this.stringify.dtdSysID(value.sysID))}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(XMLDTDNotation,superClass),Object.defineProperty(XMLDTDNotation.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(XMLDTDNotation.prototype,"systemId",{get:function(){return this.sysID}}),XMLDTDNotation.prototype.toString=function(options){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(options))},XMLDTDNotation}(XMLNode)}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLNode,hasProp={}.hasOwnProperty;NodeType=__webpack_require__(39),XMLNode=__webpack_require__(50),module.exports=function(superClass){function XMLRaw(parent,text){if(XMLRaw.__super__.constructor.call(this,parent),null==text)throw new Error("Missing raw text. "+this.debugInfo());this.type=NodeType.Raw,this.value=this.stringify.raw(text)}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(XMLRaw,superClass),XMLRaw.prototype.clone=function(){return Object.create(this)},XMLRaw.prototype.toString=function(options){return this.options.writer.raw(this,this.options.writer.filterOptions(options))},XMLRaw}(XMLNode)}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLCharacterData,hasProp={}.hasOwnProperty;NodeType=__webpack_require__(39),XMLCharacterData=__webpack_require__(101),module.exports=function(superClass){function XMLText(parent,text){if(XMLText.__super__.constructor.call(this,parent),null==text)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=NodeType.Text,this.value=this.stringify.text(text)}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(XMLText,superClass),Object.defineProperty(XMLText.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(XMLText.prototype,"wholeText",{get:function(){var next,prev,str;for(str="",prev=this.previousSibling;prev;)str=prev.data+str,prev=prev.previousSibling;for(str+=this.data,next=this.nextSibling;next;)str+=next.data,next=next.nextSibling;return str}}),XMLText.prototype.clone=function(){return Object.create(this)},XMLText.prototype.toString=function(options){return this.options.writer.text(this,this.options.writer.filterOptions(options))},XMLText.prototype.splitText=function(offset){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLText.prototype.replaceWholeText=function(content){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLText}(XMLCharacterData)}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLCharacterData,hasProp={}.hasOwnProperty;NodeType=__webpack_require__(39),XMLCharacterData=__webpack_require__(101),module.exports=function(superClass){function XMLProcessingInstruction(parent,target,value){if(XMLProcessingInstruction.__super__.constructor.call(this,parent),null==target)throw new Error("Missing instruction target. "+this.debugInfo());this.type=NodeType.ProcessingInstruction,this.target=this.stringify.insTarget(target),this.name=this.target,value&&(this.value=this.stringify.insValue(value))}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(XMLProcessingInstruction,superClass),XMLProcessingInstruction.prototype.clone=function(){return Object.create(this)},XMLProcessingInstruction.prototype.toString=function(options){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(options))},XMLProcessingInstruction.prototype.isEqualNode=function(node){return!!XMLProcessingInstruction.__super__.isEqualNode.apply(this,arguments).isEqualNode(node)&&node.target===this.target},XMLProcessingInstruction}(XMLCharacterData)}).call(this)},function(module,exports,__webpack_require__){(function(){var XMLWriterBase,hasProp={}.hasOwnProperty;XMLWriterBase=__webpack_require__(177),module.exports=function(superClass){function XMLStringWriter(options){XMLStringWriter.__super__.constructor.call(this,options)}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(XMLStringWriter,superClass),XMLStringWriter.prototype.document=function(doc,options){var child,i,len,r,ref;for(options=this.filterOptions(options),r="",i=0,len=(ref=doc.children).length;i<len;i++)child=ref[i],r+=this.writeChildNode(child,options,0);return options.pretty&&r.slice(-options.newline.length)===options.newline&&(r=r.slice(0,-options.newline.length)),r},XMLStringWriter}(XMLWriterBase)}).call(this)},function(module,exports,__webpack_require__){"use strict";(function(global){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var base64=__webpack_require__(315),ieee754=__webpack_require__(316),isArray=__webpack_require__(178);function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(that,length){if(kMaxLength()<length)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(that=new Uint8Array(length)).__proto__=Buffer.prototype:(null===that&&(that=new Buffer(length)),that.length=length),that}function Buffer(arg,encodingOrOffset,length){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(arg,encodingOrOffset,length);if("number"==typeof arg){if("string"==typeof encodingOrOffset)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,arg)}return from(this,arg,encodingOrOffset,length)}function from(that,value,encodingOrOffset,length){if("number"==typeof value)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&value instanceof ArrayBuffer?function(that,array,byteOffset,length){if(array.byteLength,byteOffset<0||array.byteLength<byteOffset)throw new RangeError("'offset' is out of bounds");if(array.byteLength<byteOffset+(length||0))throw new RangeError("'length' is out of bounds");array=void 0===byteOffset&&void 0===length?new Uint8Array(array):void 0===length?new Uint8Array(array,byteOffset):new Uint8Array(array,byteOffset,length);Buffer.TYPED_ARRAY_SUPPORT?(that=array).__proto__=Buffer.prototype:that=fromArrayLike(that,array);return that}(that,value,encodingOrOffset,length):"string"==typeof value?function(that,string,encoding){"string"==typeof encoding&&""!==encoding||(encoding="utf8");if(!Buffer.isEncoding(encoding))throw new TypeError('"encoding" must be a valid string encoding');var length=0|byteLength(string,encoding),actual=(that=createBuffer(that,length)).write(string,encoding);actual!==length&&(that=that.slice(0,actual));return that}(that,value,encodingOrOffset):function(that,obj){if(Buffer.isBuffer(obj)){var len=0|checked(obj.length);return 0===(that=createBuffer(that,len)).length||obj.copy(that,0,0,len),that}if(obj){if("undefined"!=typeof ArrayBuffer&&obj.buffer instanceof ArrayBuffer||"length"in obj)return"number"!=typeof obj.length||(val=obj.length)!=val?createBuffer(that,0):fromArrayLike(that,obj);if("Buffer"===obj.type&&isArray(obj.data))return fromArrayLike(that,obj.data)}var val;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(that,value)}function assertSize(size){if("number"!=typeof size)throw new TypeError('"size" argument must be a number');if(size<0)throw new RangeError('"size" argument must not be negative')}function allocUnsafe(that,size){if(assertSize(size),that=createBuffer(that,size<0?0:0|checked(size)),!Buffer.TYPED_ARRAY_SUPPORT)for(var i=0;i<size;++i)that[i]=0;return that}function fromArrayLike(that,array){var length=array.length<0?0:0|checked(array.length);that=createBuffer(that,length);for(var i=0;i<length;i+=1)that[i]=255&array[i];return that}function checked(length){if(length>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|length}function byteLength(string,encoding){if(Buffer.isBuffer(string))return string.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(string)||string instanceof ArrayBuffer))return string.byteLength;"string"!=typeof string&&(string=""+string);var len=string.length;if(0===len)return 0;for(var loweredCase=!1;;)switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":case void 0:return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*len;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase(),loweredCase=!0}}function slowToString(encoding,start,end){var loweredCase=!1;if((void 0===start||start<0)&&(start=0),start>this.length)return"";if((void 0===end||end>this.length)&&(end=this.length),end<=0)return"";if((end>>>=0)<=(start>>>=0))return"";for(encoding||(encoding="utf8");;)switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase(),loweredCase=!0}}function swap(b,n,m){var i=b[n];b[n]=b[m],b[m]=i}function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(0===buffer.length)return-1;if("string"==typeof byteOffset?(encoding=byteOffset,byteOffset=0):byteOffset>2147483647?byteOffset=2147483647:byteOffset<-2147483648&&(byteOffset=-2147483648),byteOffset=+byteOffset,isNaN(byteOffset)&&(byteOffset=dir?0:buffer.length-1),byteOffset<0&&(byteOffset=buffer.length+byteOffset),byteOffset>=buffer.length){if(dir)return-1;byteOffset=buffer.length-1}else if(byteOffset<0){if(!dir)return-1;byteOffset=0}if("string"==typeof val&&(val=Buffer.from(val,encoding)),Buffer.isBuffer(val))return 0===val.length?-1:arrayIndexOf(buffer,val,byteOffset,encoding,dir);if("number"==typeof val)return val&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?dir?Uint8Array.prototype.indexOf.call(buffer,val,byteOffset):Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset):arrayIndexOf(buffer,[val],byteOffset,encoding,dir);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var i,indexSize=1,arrLength=arr.length,valLength=val.length;if(void 0!==encoding&&("ucs2"===(encoding=String(encoding).toLowerCase())||"ucs-2"===encoding||"utf16le"===encoding||"utf-16le"===encoding)){if(arr.length<2||val.length<2)return-1;indexSize=2,arrLength/=2,valLength/=2,byteOffset/=2}function read(buf,i){return 1===indexSize?buf[i]:buf.readUInt16BE(i*indexSize)}if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++)if(read(arr,i)===read(val,-1===foundIndex?0:i-foundIndex)){if(-1===foundIndex&&(foundIndex=i),i-foundIndex+1===valLength)return foundIndex*indexSize}else-1!==foundIndex&&(i-=i-foundIndex),foundIndex=-1}else for(byteOffset+valLength>arrLength&&(byteOffset=arrLength-valLength),i=byteOffset;i>=0;i--){for(var found=!0,j=0;j<valLength;j++)if(read(arr,i+j)!==read(val,j)){found=!1;break}if(found)return i}return-1}function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;length?(length=Number(length))>remaining&&(length=remaining):length=remaining;var strLen=string.length;if(strLen%2!=0)throw new TypeError("Invalid hex string");length>strLen/2&&(length=strLen/2);for(var i=0;i<length;++i){var parsed=parseInt(string.substr(2*i,2),16);if(isNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(function(str){for(var byteArray=[],i=0;i<str.length;++i)byteArray.push(255&str.charCodeAt(i));return byteArray}(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(function(str,units){for(var c,hi,lo,byteArray=[],i=0;i<str.length&&!((units-=2)<0);++i)c=str.charCodeAt(i),hi=c>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}(string,buf.length-offset),buf,offset,length)}function base64Slice(buf,start,end){return 0===start&&end===buf.length?base64.fromByteArray(buf):base64.fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);for(var res=[],i=start;i<end;){var secondByte,thirdByte,fourthByte,tempCodePoint,firstByte=buf[i],codePoint=null,bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end)switch(bytesPerSequence){case 1:firstByte<128&&(codePoint=firstByte);break;case 2:128==(192&(secondByte=buf[i+1]))&&(tempCodePoint=(31&firstByte)<<6|63&secondByte)>127&&(codePoint=tempCodePoint);break;case 3:secondByte=buf[i+1],thirdByte=buf[i+2],128==(192&secondByte)&&128==(192&thirdByte)&&(tempCodePoint=(15&firstByte)<<12|(63&secondByte)<<6|63&thirdByte)>2047&&(tempCodePoint<55296||tempCodePoint>57343)&&(codePoint=tempCodePoint);break;case 4:secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],128==(192&secondByte)&&128==(192&thirdByte)&&128==(192&fourthByte)&&(tempCodePoint=(15&firstByte)<<18|(63&secondByte)<<12|(63&thirdByte)<<6|63&fourthByte)>65535&&tempCodePoint<1114112&&(codePoint=tempCodePoint)}null===codePoint?(codePoint=65533,bytesPerSequence=1):codePoint>65535&&(codePoint-=65536,res.push(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint),res.push(codePoint),i+=bytesPerSequence}return function(codePoints){var len=codePoints.length;if(len<=4096)return String.fromCharCode.apply(String,codePoints);var res="",i=0;for(;i<len;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=4096));return res}(res)}exports.Buffer=Buffer,exports.SlowBuffer=function(length){+length!=length&&(length=0);return Buffer.alloc(+length)},exports.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:function(){try{var arr=new Uint8Array(1);return arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===arr.foo()&&"function"==typeof arr.subarray&&0===arr.subarray(1,1).byteLength}catch(e){return!1}}(),exports.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(arr){return arr.__proto__=Buffer.prototype,arr},Buffer.from=function(value,encodingOrOffset,length){return from(null,value,encodingOrOffset,length)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(size,fill,encoding){return function(that,size,fill,encoding){return assertSize(size),size<=0?createBuffer(that,size):void 0!==fill?"string"==typeof encoding?createBuffer(that,size).fill(fill,encoding):createBuffer(that,size).fill(fill):createBuffer(that,size)}(null,size,fill,encoding)},Buffer.allocUnsafe=function(size){return allocUnsafe(null,size)},Buffer.allocUnsafeSlow=function(size){return allocUnsafe(null,size)},Buffer.isBuffer=function(b){return!(null==b||!b._isBuffer)},Buffer.compare=function(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);i<len;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return x<y?-1:y<x?1:0},Buffer.isEncoding=function(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(list,length){if(!isArray(list))throw new TypeError('"list" argument must be an Array of Buffers');if(0===list.length)return Buffer.alloc(0);var i;if(void 0===length)for(length=0,i=0;i<list.length;++i)length+=list[i].length;var buffer=Buffer.allocUnsafe(length),pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(!Buffer.isBuffer(buf))throw new TypeError('"list" argument must be an Array of Buffers');buf.copy(buffer,pos),pos+=buf.length}return buffer},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var len=this.length;if(len%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<len;i+=2)swap(this,i,i+1);return this},Buffer.prototype.swap32=function(){var len=this.length;if(len%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<len;i+=4)swap(this,i,i+3),swap(this,i+1,i+2);return this},Buffer.prototype.swap64=function(){var len=this.length;if(len%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<len;i+=8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this},Buffer.prototype.toString=function(){var length=0|this.length;return 0===length?"":0===arguments.length?utf8Slice(this,0,length):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===Buffer.compare(this,b)},Buffer.prototype.inspect=function(){var str="",max=exports.INSPECT_MAX_BYTES;return this.length>0&&(str=this.toString("hex",0,max).match(/.{2}/g).join(" "),this.length>max&&(str+=" ... ")),"<Buffer "+str+">"},Buffer.prototype.compare=function(target,start,end,thisStart,thisEnd){if(!Buffer.isBuffer(target))throw new TypeError("Argument must be a Buffer");if(void 0===start&&(start=0),void 0===end&&(end=target?target.length:0),void 0===thisStart&&(thisStart=0),void 0===thisEnd&&(thisEnd=this.length),start<0||end>target.length||thisStart<0||thisEnd>this.length)throw new RangeError("out of range index");if(thisStart>=thisEnd&&start>=end)return 0;if(thisStart>=thisEnd)return-1;if(start>=end)return 1;if(this===target)return 0;for(var x=(thisEnd>>>=0)-(thisStart>>>=0),y=(end>>>=0)-(start>>>=0),len=Math.min(x,y),thisCopy=this.slice(thisStart,thisEnd),targetCopy=target.slice(start,end),i=0;i<len;++i)if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i],y=targetCopy[i];break}return x<y?-1:y<x?1:0},Buffer.prototype.includes=function(val,byteOffset,encoding){return-1!==this.indexOf(val,byteOffset,encoding)},Buffer.prototype.indexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!0)},Buffer.prototype.lastIndexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!1)},Buffer.prototype.write=function(string,offset,length,encoding){if(void 0===offset)encoding="utf8",length=this.length,offset=0;else if(void 0===length&&"string"==typeof offset)encoding=offset,length=this.length,offset=0;else{if(!isFinite(offset))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");offset|=0,isFinite(length)?(length|=0,void 0===encoding&&(encoding="utf8")):(encoding=length,length=void 0)}var remaining=this.length-offset;if((void 0===length||length>remaining)&&(length=remaining),string.length>0&&(length<0||offset<0)||offset>this.length)throw new RangeError("Attempt to write outside buffer bounds");encoding||(encoding="utf8");for(var loweredCase=!1;;)switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase(),loweredCase=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(127&buf[i]);return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(buf[i]);return ret}function hexSlice(buf,start,end){var len=buf.length;(!start||start<0)&&(start=0),(!end||end<0||end>len)&&(end=len);for(var out="",i=start;i<end;++i)out+=toHex(buf[i]);return out}function utf16leSlice(buf,start,end){for(var bytes=buf.slice(start,end),res="",i=0;i<bytes.length;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}function checkOffset(offset,ext,length){if(offset%1!=0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}function objectWriteUInt16(buf,value,offset,littleEndian){value<0&&(value=65535+value+1);for(var i=0,j=Math.min(buf.length-offset,2);i<j;++i)buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>8*(littleEndian?i:1-i)}function objectWriteUInt32(buf,value,offset,littleEndian){value<0&&(value=4294967295+value+1);for(var i=0,j=Math.min(buf.length-offset,4);i<j;++i)buf[offset+i]=value>>>8*(littleEndian?i:3-i)&255}function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,0,offset,4),ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,0,offset,8),ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}Buffer.prototype.slice=function(start,end){var newBuf,len=this.length;if((start=~~start)<0?(start+=len)<0&&(start=0):start>len&&(start=len),(end=void 0===end?len:~~end)<0?(end+=len)<0&&(end=0):end>len&&(end=len),end<start&&(end=start),Buffer.TYPED_ARRAY_SUPPORT)(newBuf=this.subarray(start,end)).__proto__=Buffer.prototype;else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,void 0);for(var i=0;i<sliceLen;++i)newBuf[i]=this[i+start]}return newBuf},Buffer.prototype.readUIntLE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val},Buffer.prototype.readUIntBE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset+--byteLength],mul=1;byteLength>0&&(mul*=256);)val+=this[offset+--byteLength]*mul;return val},Buffer.prototype.readUInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),this[offset]},Buffer.prototype.readUInt16LE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8},Buffer.prototype.readUInt16BE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]},Buffer.prototype.readUInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+16777216*this[offset+3]},Buffer.prototype.readUInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),16777216*this[offset]+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])},Buffer.prototype.readIntLE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val>=(mul*=128)&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readIntBE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var i=byteLength,mul=1,val=this[offset+--i];i>0&&(mul*=256);)val+=this[offset+--i]*mul;return val>=(mul*=128)&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),128&this[offset]?-1*(255-this[offset]+1):this[offset]},Buffer.prototype.readInt16LE=function(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt16BE=function(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24},Buffer.prototype.readInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]},Buffer.prototype.readFloatLE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!0,23,4)},Buffer.prototype.readFloatBE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!1,23,4)},Buffer.prototype.readDoubleLE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!0,52,8)},Buffer.prototype.readDoubleBE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!1,52,8)},Buffer.prototype.writeUIntLE=function(value,offset,byteLength,noAssert){(value=+value,offset|=0,byteLength|=0,noAssert)||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var mul=1,i=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUIntBE=function(value,offset,byteLength,noAssert){(value=+value,offset|=0,byteLength|=0,noAssert)||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var i=byteLength-1,mul=1;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUInt8=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),this[offset]=255&value,offset+1},Buffer.prototype.writeUInt16LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeUInt16BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeUInt32LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=255&value):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeUInt32BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeIntLE=function(value,offset,byteLength,noAssert){if(value=+value,offset|=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0,mul=1,sub=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i-1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeIntBE=function(value,offset,byteLength,noAssert){if(value=+value,offset|=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1,mul=1,sub=0;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i+1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeInt8=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),value<0&&(value=255+value+1),this[offset]=255&value,offset+1},Buffer.prototype.writeInt16LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeInt16BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeInt32LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeInt32BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),value<0&&(value=4294967295+value+1),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeFloatLE=function(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.copy=function(target,targetStart,start,end){if(start||(start=0),end||0===end||(end=this.length),targetStart>=target.length&&(targetStart=target.length),targetStart||(targetStart=0),end>0&&end<start&&(end=start),end===start)return 0;if(0===target.length||0===this.length)return 0;if(targetStart<0)throw new RangeError("targetStart out of bounds");if(start<0||start>=this.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");end>this.length&&(end=this.length),target.length-targetStart<end-start&&(end=target.length-targetStart+start);var i,len=end-start;if(this===target&&start<targetStart&&targetStart<end)for(i=len-1;i>=0;--i)target[i+targetStart]=this[i+start];else if(len<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;i<len;++i)target[i+targetStart]=this[i+start];else Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart);return len},Buffer.prototype.fill=function(val,start,end,encoding){if("string"==typeof val){if("string"==typeof start?(encoding=start,start=0,end=this.length):"string"==typeof end&&(encoding=end,end=this.length),1===val.length){var code=val.charCodeAt(0);code<256&&(val=code)}if(void 0!==encoding&&"string"!=typeof encoding)throw new TypeError("encoding must be a string");if("string"==typeof encoding&&!Buffer.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding)}else"number"==typeof val&&(val&=255);if(start<0||this.length<start||this.length<end)throw new RangeError("Out of range index");if(end<=start)return this;var i;if(start>>>=0,end=void 0===end?this.length:end>>>0,val||(val=0),"number"==typeof val)for(i=start;i<end;++i)this[i]=val;else{var bytes=Buffer.isBuffer(val)?val:utf8ToBytes(new Buffer(val,encoding).toString()),len=bytes.length;for(i=0;i<end-start;++i)this[i+start]=bytes[i%len]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function toHex(n){return n<16?"0"+n.toString(16):n.toString(16)}function utf8ToBytes(string,units){var codePoint;units=units||1/0;for(var length=string.length,leadSurrogate=null,bytes=[],i=0;i<length;++i){if((codePoint=string.charCodeAt(i))>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){(units-=3)>-1&&bytes.push(239,191,189);continue}if(i+1===length){(units-=3)>-1&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){(units-=3)>-1&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=65536+(leadSurrogate-55296<<10|codePoint-56320)}else leadSurrogate&&(units-=3)>-1&&bytes.push(239,191,189);if(leadSurrogate=null,codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,63&codePoint|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,63&codePoint|128)}else{if(!(codePoint<1114112))throw new Error("Invalid code point");if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,63&codePoint|128)}}return bytes}function base64ToBytes(str){return base64.toByteArray(function(str){if((str=function(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")}(str).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;str.length%4!=0;)str+="=";return str}(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length&&!(i+offset>=dst.length||i>=src.length);++i)dst[i+offset]=src[i];return i}}).call(this,__webpack_require__(58))},function(module,exports,__webpack_require__){(exports=module.exports=__webpack_require__(179)).Stream=exports,exports.Readable=exports,exports.Writable=__webpack_require__(137),exports.Duplex=__webpack_require__(68),exports.Transform=__webpack_require__(183),exports.PassThrough=__webpack_require__(324)},function(module,exports,__webpack_require__){"use strict";(function(process,setImmediate,global){var pna=__webpack_require__(103);function CorkedRequest(state){var _this=this;this.next=null,this.entry=null,this.finish=function(){!function(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;for(;entry;){var cb=entry.callback;state.pendingcb--,cb(err),entry=entry.next}state.corkedRequestsFree?state.corkedRequestsFree.next=corkReq:state.corkedRequestsFree=corkReq}(_this,state)}}module.exports=Writable;var Duplex,asyncWrite=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:pna.nextTick;Writable.WritableState=WritableState;var util=Object.create(__webpack_require__(79));util.inherits=__webpack_require__(80);var internalUtil={deprecate:__webpack_require__(323)},Stream=__webpack_require__(180),Buffer=__webpack_require__(104).Buffer,OurUint8Array=global.Uint8Array||function(){};var realHasInstance,destroyImpl=__webpack_require__(181);function nop(){}function WritableState(options,stream){Duplex=Duplex||__webpack_require__(68),options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.writableObjectMode);var hwm=options.highWaterMark,writableHwm=options.writableHighWaterMark,defaultHwm=this.objectMode?16:16384;this.highWaterMark=hwm||0===hwm?hwm:isDuplex&&(writableHwm||0===writableHwm)?writableHwm:defaultHwm,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var noDecode=!1===options.decodeStrings;this.decodeStrings=!noDecode,this.defaultEncoding=options.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(er){!function(stream,er){var state=stream._writableState,sync=state.sync,cb=state.writecb;if(function(state){state.writing=!1,state.writecb=null,state.length-=state.writelen,state.writelen=0}(state),er)!function(stream,state,sync,er,cb){--state.pendingcb,sync?(pna.nextTick(cb,er),pna.nextTick(finishMaybe,stream,state),stream._writableState.errorEmitted=!0,stream.emit("error",er)):(cb(er),stream._writableState.errorEmitted=!0,stream.emit("error",er),finishMaybe(stream,state))}(stream,state,sync,er,cb);else{var finished=needFinish(state);finished||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(stream,state),sync?asyncWrite(afterWrite,stream,state,finished,cb):afterWrite(stream,state,finished,cb)}}(stream,er)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(options){if(Duplex=Duplex||__webpack_require__(68),!(realHasInstance.call(Writable,this)||this instanceof Duplex))return new Writable(options);this._writableState=new WritableState(options,this),this.writable=!0,options&&("function"==typeof options.write&&(this._write=options.write),"function"==typeof options.writev&&(this._writev=options.writev),"function"==typeof options.destroy&&(this._destroy=options.destroy),"function"==typeof options.final&&(this._final=options.final)),Stream.call(this)}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len,state.writecb=cb,state.writing=!0,state.sync=!0,writev?stream._writev(chunk,state.onwrite):stream._write(chunk,encoding,state.onwrite),state.sync=!1}function afterWrite(stream,state,finished,cb){finished||function(stream,state){0===state.length&&state.needDrain&&(state.needDrain=!1,stream.emit("drain"))}(stream,state),state.pendingcb--,cb(),finishMaybe(stream,state)}function clearBuffer(stream,state){state.bufferProcessing=!0;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount,buffer=new Array(l),holder=state.corkedRequestsFree;holder.entry=entry;for(var count=0,allBuffers=!0;entry;)buffer[count]=entry,entry.isBuf||(allBuffers=!1),entry=entry.next,count+=1;buffer.allBuffers=allBuffers,doWrite(stream,state,!0,state.length,buffer,"",holder.finish),state.pendingcb++,state.lastBufferedRequest=null,holder.next?(state.corkedRequestsFree=holder.next,holder.next=null):state.corkedRequestsFree=new CorkedRequest(state),state.bufferedRequestCount=0}else{for(;entry;){var chunk=entry.chunk,encoding=entry.encoding,cb=entry.callback;if(doWrite(stream,state,!1,state.objectMode?1:chunk.length,chunk,encoding,cb),entry=entry.next,state.bufferedRequestCount--,state.writing)break}null===entry&&(state.lastBufferedRequest=null)}state.bufferedRequest=entry,state.bufferProcessing=!1}function needFinish(state){return state.ending&&0===state.length&&null===state.bufferedRequest&&!state.finished&&!state.writing}function callFinal(stream,state){stream._final((function(err){state.pendingcb--,err&&stream.emit("error",err),state.prefinished=!0,stream.emit("prefinish"),finishMaybe(stream,state)}))}function finishMaybe(stream,state){var need=needFinish(state);return need&&(!function(stream,state){state.prefinished||state.finalCalled||("function"==typeof stream._final?(state.pendingcb++,state.finalCalled=!0,pna.nextTick(callFinal,stream,state)):(state.prefinished=!0,stream.emit("prefinish")))}(stream,state),0===state.pendingcb&&(state.finished=!0,stream.emit("finish"))),need}util.inherits(Writable,Stream),WritableState.prototype.getBuffer=function(){for(var current=this.bufferedRequest,out=[];current;)out.push(current),current=current.next;return out},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(_){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(object){return!!realHasInstance.call(this,object)||this===Writable&&(object&&object._writableState instanceof WritableState)}})):realHasInstance=function(object){return object instanceof this},Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Writable.prototype.write=function(chunk,encoding,cb){var obj,state=this._writableState,ret=!1,isBuf=!state.objectMode&&(obj=chunk,Buffer.isBuffer(obj)||obj instanceof OurUint8Array);return isBuf&&!Buffer.isBuffer(chunk)&&(chunk=function(chunk){return Buffer.from(chunk)}(chunk)),"function"==typeof encoding&&(cb=encoding,encoding=null),isBuf?encoding="buffer":encoding||(encoding=state.defaultEncoding),"function"!=typeof cb&&(cb=nop),state.ended?function(stream,cb){var er=new Error("write after end");stream.emit("error",er),pna.nextTick(cb,er)}(this,cb):(isBuf||function(stream,state,chunk,cb){var valid=!0,er=!1;return null===chunk?er=new TypeError("May not write null values to stream"):"string"==typeof chunk||void 0===chunk||state.objectMode||(er=new TypeError("Invalid non-string/buffer chunk")),er&&(stream.emit("error",er),pna.nextTick(cb,er),valid=!1),valid}(this,state,chunk,cb))&&(state.pendingcb++,ret=function(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=function(state,chunk,encoding){state.objectMode||!1===state.decodeStrings||"string"!=typeof chunk||(chunk=Buffer.from(chunk,encoding));return chunk}(state,chunk,encoding);chunk!==newChunk&&(isBuf=!0,encoding="buffer",chunk=newChunk)}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;ret||(state.needDrain=!0);if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk:chunk,encoding:encoding,isBuf:isBuf,callback:cb,next:null},last?last.next=state.lastBufferedRequest:state.bufferedRequest=state.lastBufferedRequest,state.bufferedRequestCount+=1}else doWrite(stream,state,!1,len,chunk,encoding,cb);return ret}(this,state,isBuf,chunk,encoding,cb)),ret},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var state=this._writableState;state.corked&&(state.corked--,state.writing||state.corked||state.finished||state.bufferProcessing||!state.bufferedRequest||clearBuffer(this,state))},Writable.prototype.setDefaultEncoding=function(encoding){if("string"==typeof encoding&&(encoding=encoding.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+encoding);return this._writableState.defaultEncoding=encoding,this},Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(chunk,encoding,cb){cb(new Error("_write() is not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;"function"==typeof chunk?(cb=chunk,chunk=null,encoding=null):"function"==typeof encoding&&(cb=encoding,encoding=null),null!=chunk&&this.write(chunk,encoding),state.corked&&(state.corked=1,this.uncork()),state.ending||state.finished||function(stream,state,cb){state.ending=!0,finishMaybe(stream,state),cb&&(state.finished?pna.nextTick(cb):stream.once("finish",cb));state.ended=!0,stream.writable=!1}(this,state,cb)},Object.defineProperty(Writable.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(value){this._writableState&&(this._writableState.destroyed=value)}}),Writable.prototype.destroy=destroyImpl.destroy,Writable.prototype._undestroy=destroyImpl.undestroy,Writable.prototype._destroy=function(err,cb){this.end(),cb(err)}}).call(this,__webpack_require__(64),__webpack_require__(182).setImmediate,__webpack_require__(58))},function(module,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(104).Buffer,isEncoding=Buffer.isEncoding||function(encoding){switch((encoding=""+encoding)&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function StringDecoder(encoding){var nb;switch(this.encoding=function(enc){var nenc=function(enc){if(!enc)return"utf8";for(var retried;;)switch(enc){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return enc;default:if(retried)return;enc=(""+enc).toLowerCase(),retried=!0}}(enc);if("string"!=typeof nenc&&(Buffer.isEncoding===isEncoding||!isEncoding(enc)))throw new Error("Unknown encoding: "+enc);return nenc||enc}(encoding),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,nb=4;break;case"utf8":this.fillLast=utf8FillLast,nb=4;break;case"base64":this.text=base64Text,this.end=base64End,nb=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer.allocUnsafe(nb)}function utf8CheckByte(byte){return byte<=127?0:byte>>5==6?2:byte>>4==14?3:byte>>3==30?4:byte>>6==2?-1:-2}function utf8FillLast(buf){var p=this.lastTotal-this.lastNeed,r=function(self,buf,p){if(128!=(192&buf[0]))return self.lastNeed=0,"�";if(self.lastNeed>1&&buf.length>1){if(128!=(192&buf[1]))return self.lastNeed=1,"�";if(self.lastNeed>2&&buf.length>2&&128!=(192&buf[2]))return self.lastNeed=2,"�"}}(this,buf);return void 0!==r?r:this.lastNeed<=buf.length?(buf.copy(this.lastChar,p,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(buf.copy(this.lastChar,p,0,buf.length),void(this.lastNeed-=buf.length))}function utf16Text(buf,i){if((buf.length-i)%2==0){var r=buf.toString("utf16le",i);if(r){var c=r.charCodeAt(r.length-1);if(c>=55296&&c<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=buf[buf.length-1],buf.toString("utf16le",i,buf.length-1)}function utf16End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed){var end=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,end)}return r}function base64Text(buf,i){var n=(buf.length-i)%3;return 0===n?buf.toString("base64",i):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=buf[buf.length-1]:(this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1]),buf.toString("base64",i,buf.length-n))}function base64End(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function simpleWrite(buf){return buf.toString(this.encoding)}function simpleEnd(buf){return buf&&buf.length?this.write(buf):""}exports.StringDecoder=StringDecoder,StringDecoder.prototype.write=function(buf){if(0===buf.length)return"";var r,i;if(this.lastNeed){if(void 0===(r=this.fillLast(buf)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<buf.length?r?r+this.text(buf,i):this.text(buf,i):r||""},StringDecoder.prototype.end=function(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+"�":r},StringDecoder.prototype.text=function(buf,i){var total=function(self,buf,i){var j=buf.length-1;if(j<i)return 0;var nb=utf8CheckByte(buf[j]);if(nb>=0)return nb>0&&(self.lastNeed=nb-1),nb;if(--j<i||-2===nb)return 0;if((nb=utf8CheckByte(buf[j]))>=0)return nb>0&&(self.lastNeed=nb-2),nb;if(--j<i||-2===nb)return 0;if((nb=utf8CheckByte(buf[j]))>=0)return nb>0&&(2===nb?nb=0:self.lastNeed=nb-3),nb;return 0}(this,buf,i);if(!this.lastNeed)return buf.toString("utf8",i);this.lastTotal=total;var end=buf.length-(total-this.lastNeed);return buf.copy(this.lastChar,0,end),buf.toString("utf8",i,end)},StringDecoder.prototype.fillLast=function(buf){if(this.lastNeed<=buf.length)return buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,buf.length),this.lastNeed-=buf.length}},function(module,exports,__webpack_require__){"use strict";var keys=__webpack_require__(331),hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),toStr=Object.prototype.toString,concat=Array.prototype.concat,origDefineProperty=Object.defineProperty,supportsDescriptors=origDefineProperty&&function(){var obj={};try{for(var _ in origDefineProperty(obj,"x",{enumerable:!1,value:obj}),obj)return!1;return obj.x===obj}catch(e){return!1}}(),defineProperty=function(object,name,value,predicate){var fn;(!(name in object)||"function"==typeof(fn=predicate)&&"[object Function]"===toStr.call(fn)&&predicate())&&(supportsDescriptors?origDefineProperty(object,name,{configurable:!0,enumerable:!1,value:value,writable:!0}):object[name]=value)},defineProperties=function(object,map){var predicates=arguments.length>2?arguments[2]:{},props=keys(map);hasSymbols&&(props=concat.call(props,Object.getOwnPropertySymbols(map)));for(var i=0;i<props.length;i+=1)defineProperty(object,props[i],map[props[i]],predicates[props[i]])};defineProperties.supportsDescriptors=!!supportsDescriptors,module.exports=defineProperties},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(336);module.exports=Function.prototype.bind||implementation},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return isSearchSourceAbortError})),__webpack_require__.d(__webpack_exports__,"a",(function(){return AbstractESSource}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),uuid_v4__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(11),uuid_v4__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(uuid_v4__WEBPACK_IMPORTED_MODULE_1__),_vector_source__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(89),_kibana_services__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4),_common_elasticsearch_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(40),_reducers_copy_persistent_state__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(72),_util_data_request__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(61),_common_geo_tile_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(202),_util_valid_string_config__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(84);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function isSearchSourceAbortError(error){return"AbortError"===error.name}class AbstractESSource extends _vector_source__WEBPACK_IMPORTED_MODULE_2__.a{static createDescriptor(descriptor){if(!Object(_util_valid_string_config__WEBPACK_IMPORTED_MODULE_8__.a)(descriptor.indexPatternId))throw new Error("Cannot create AbstractESSourceDescriptor when indexPatternId is not provided");return{...descriptor,id:Object(_util_valid_string_config__WEBPACK_IMPORTED_MODULE_8__.a)(descriptor.id)?descriptor.id:uuid_v4__WEBPACK_IMPORTED_MODULE_1___default()(),type:Object(_util_valid_string_config__WEBPACK_IMPORTED_MODULE_8__.a)(descriptor.type)?descriptor.type:"",indexPatternId:descriptor.indexPatternId,applyGlobalQuery:void 0===descriptor.applyGlobalQuery||descriptor.applyGlobalQuery,applyGlobalTime:void 0===descriptor.applyGlobalTime||descriptor.applyGlobalTime}}constructor(descriptor,inspectorAdapters){super(AbstractESSource.createDescriptor(descriptor),inspectorAdapters),_defineProperty(this,"indexPattern",void 0),_defineProperty(this,"_descriptor",void 0),_defineProperty(this,"getValueSuggestions",async(field,query)=>{try{const indexPattern=await this.getIndexPattern(),indexPatternField=indexPattern.fields.getByName(field.getRootName());return await Object(_kibana_services__WEBPACK_IMPORTED_MODULE_3__.a)().getValueSuggestions({indexPattern:indexPattern,field:indexPatternField,query:query})}catch(error){return console.warn(`Unable to fetch suggestions for field: ${field.getRootName()}, query: ${query}, error: ${error.message}`),[]}}),this._descriptor=descriptor}getId(){return this._descriptor.id}getApplyGlobalQuery(){return this._descriptor.applyGlobalQuery}getApplyGlobalTime(){return this._descriptor.applyGlobalTime}isFieldAware(){return!0}isRefreshTimerAware(){return!0}isQueryAware(){return!0}getIndexPatternIds(){return[this.getIndexPatternId()]}getQueryableIndexPatternIds(){return this.getApplyGlobalQuery()?[this.getIndexPatternId()]:[]}isESSource(){return!0}destroy(){const inspectorAdapters=this.getInspectorAdapters();null!=inspectorAdapters&&inspectorAdapters.requests&&inspectorAdapters.requests.resetRequest(this.getId())}cloneDescriptor(){const clonedDescriptor=Object(_reducers_copy_persistent_state__WEBPACK_IMPORTED_MODULE_5__.b)(this._descriptor);return clonedDescriptor.id=uuid_v4__WEBPACK_IMPORTED_MODULE_1___default()(),clonedDescriptor}async _runEsQuery({registerCancelCallback:registerCancelCallback,requestDescription:requestDescription,requestId:requestId,requestName:requestName,searchSessionId:searchSessionId,searchSource:searchSource}){const abortController=new AbortController;let resp;registerCancelCallback(()=>abortController.abort());try{var _this$getInspectorAda;resp=await searchSource.fetch$({abortSignal:abortController.signal,sessionId:searchSessionId,legacyHitsTotal:!1,inspector:{adapter:null===(_this$getInspectorAda=this.getInspectorAdapters())||void 0===_this$getInspectorAda?void 0:_this$getInspectorAda.requests,id:requestId,title:requestName,description:requestDescription}}).toPromise()}catch(error){if(isSearchSourceAbortError(error))throw new _util_data_request__WEBPACK_IMPORTED_MODULE_6__.b;throw new Error(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.maps.source.esSource.requestFailedErrorMessage",{defaultMessage:"Elasticsearch search request failed, error: {message}",values:{message:error.message}}))}return resp}async makeSearchSource(searchFilters,limit,initialSearchContext){const indexPattern=await this.getIndexPattern(),allFilters=[...searchFilters.applyGlobalQuery?searchFilters.filters:[]];if(this.isFilterByMapBounds()&&"buffer"in searchFilters&&searchFilters.buffer){const geoField=await this._getGeoField(),buffer=this.isGeoGridPrecisionAware()&&"geogridPrecision"in searchFilters&&"number"==typeof searchFilters.geogridPrecision?Object(_common_geo_tile_utils__WEBPACK_IMPORTED_MODULE_7__.a)(searchFilters.buffer,searchFilters.geogridPrecision):searchFilters.buffer,extentFilter=Object(_common_elasticsearch_util__WEBPACK_IMPORTED_MODULE_4__.g)(buffer,geoField.name);allFilters.push(extentFilter)}if(searchFilters.applyGlobalTime&&await this.isTimeAware()){const filter=Object(_kibana_services__WEBPACK_IMPORTED_MODULE_3__.J)().createFilter(indexPattern,searchFilters.timeFilters);filter&&allFilters.push(filter)}const searchService=Object(_kibana_services__WEBPACK_IMPORTED_MODULE_3__.F)(),searchSource=await searchService.searchSource.create(initialSearchContext);if(searchSource.setField("index",indexPattern),searchSource.setField("size",limit),searchSource.setField("filter",allFilters),searchFilters.applyGlobalQuery&&searchSource.setField("query",searchFilters.query),searchFilters.sourceQuery){const layerSearchSource=searchService.searchSource.createEmpty();layerSearchSource.setField("index",indexPattern),layerSearchSource.setField("query",searchFilters.sourceQuery),searchSource.setParent(layerSearchSource)}return searchSource}async getBoundsForFilters(boundsFilters,registerCancelCallback){const searchSource=await this.makeSearchSource(boundsFilters,0);let esBounds;searchSource.setField("trackTotalHits",!1),searchSource.setField("aggs",{fitToBounds:{geo_bounds:{field:this.getGeoFieldName()}}});try{const abortController=new AbortController;registerCancelCallback(()=>abortController.abort());const esResp=await searchSource.fetch({abortSignal:abortController.signal,legacyHitsTotal:!1});if(!esResp.aggregations)return null;const fitToBounds=esResp.aggregations.fitToBounds;if(!fitToBounds.bounds)return null;esBounds=fitToBounds.bounds}catch(error){if("AbortError"===error.name)throw new _util_data_request__WEBPACK_IMPORTED_MODULE_6__.b;return null}const minLon=esBounds.top_left.lon,maxLon=esBounds.bottom_right.lon;return{minLon:minLon>maxLon?minLon-360:minLon,maxLon:maxLon,minLat:esBounds.bottom_right.lat,maxLat:esBounds.top_left.lat}}async isTimeAware(){try{const indexPattern=await this.getIndexPattern();return!!indexPattern.timeFieldName}catch(error){return!1}}getIndexPatternId(){return this._descriptor.indexPatternId}getGeoFieldName(){if(!this._descriptor.geoField)throw new Error("Should not call");return this._descriptor.geoField}async getIndexPattern(){if(this.indexPattern)return this.indexPattern;try{return this.indexPattern=await Object(_kibana_services__WEBPACK_IMPORTED_MODULE_3__.p)().get(this.getIndexPatternId()),this.indexPattern}catch(error){throw new Error(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.maps.source.esSource.noIndexPatternErrorMessage",{defaultMessage:"Unable to find Index pattern for id: {indexPatternId}",values:{indexPatternId:this.getIndexPatternId()}}))}}async supportsFitToBounds(){try{return!!(await this._getGeoField()).aggregatable}catch(error){return!1}}async _getGeoField(){const indexPattern=await this.getIndexPattern(),geoField=indexPattern.fields.getByName(this.getGeoFieldName());if(!geoField)throw new Error(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.maps.source.esSource.noGeoFieldErrorMessage",{defaultMessage:"Index pattern {indexPatternTitle} no longer contains the geo field {geoField}",values:{indexPatternTitle:indexPattern.title,geoField:this.getGeoFieldName()}}));return geoField}async getDisplayName(){try{return(await this.getIndexPattern()).title}catch(error){return this.getIndexPatternId()}}isBoundsAware(){return!0}async createFieldFormatter(field){let indexPattern;try{indexPattern=await this.getIndexPattern()}catch(error){return null}const fieldFromIndexPattern=indexPattern.fields.getByName(field.getRootName());return fieldFromIndexPattern?indexPattern.getFormatterForField(fieldFromIndexPattern).getConverterFor("text"):null}async loadStylePropsMeta({layerName:layerName,style:style,dynamicStyleProps:dynamicStyleProps,registerCancelCallback:registerCancelCallback,sourceQuery:sourceQuery,timeFilters:timeFilters,searchSessionId:searchSessionId}){const promises=dynamicStyleProps.map(dynamicStyleProp=>dynamicStyleProp.getFieldMetaRequest()),allAggs=(await Promise.all(promises)).reduce((aggs,fieldAggRequest)=>fieldAggRequest?{...aggs,...fieldAggRequest}:aggs,{}),indexPattern=await this.getIndexPattern(),searchSource=Object(_kibana_services__WEBPACK_IMPORTED_MODULE_3__.F)().searchSource.createEmpty();if(searchSource.setField("index",indexPattern),searchSource.setField("size",0),searchSource.setField("aggs",allAggs),sourceQuery&&searchSource.setField("query",sourceQuery),style.isTimeAware()&&await this.isTimeAware()){const timeFilter=Object(_kibana_services__WEBPACK_IMPORTED_MODULE_3__.J)().createFilter(indexPattern,timeFilters);timeFilter&&searchSource.setField("filter",[timeFilter])}return(await this._runEsQuery({requestId:this.getId()+"_styleMeta",requestName:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.maps.source.esSource.stylePropsMetaRequestName",{defaultMessage:"{layerName} - metadata",values:{layerName:layerName}}),searchSource:searchSource,registerCancelCallback:registerCancelCallback,requestDescription:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.maps.source.esSource.stylePropsMetaRequestDescription",{defaultMessage:"Elasticsearch request retrieving field metadata used for calculating symbolization bands."}),searchSessionId:searchSessionId})).aggregations}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AbstractSource}));var _reducers_copy_persistent_state__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(72),_common_constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class AbstractSource{constructor(descriptor,inspectorAdapters){_defineProperty(this,"_descriptor",void 0),_defineProperty(this,"_inspectorAdapters",void 0),this._descriptor=descriptor,this._inspectorAdapters=inspectorAdapters}destroy(){}cloneDescriptor(){return Object(_reducers_copy_persistent_state__WEBPACK_IMPORTED_MODULE_0__.b)(this._descriptor)}async supportsFitToBounds(){return!1}async getImmutableProperties(){return[]}getInspectorAdapters(){return this._inspectorAdapters}async getDisplayName(){return""}async getAttributions(){return[]}isFieldAware(){return!1}isRefreshTimerAware(){return!1}isGeoGridPrecisionAware(){return!1}isQueryAware(){return!1}getFieldNames(){return[]}renderSourceSettingsEditor(sourceEditorArgs){return null}getApplyGlobalQuery(){return!1}getApplyGlobalTime(){return!1}getIndexPatternIds(){return[]}getQueryableIndexPatternIds(){return[]}getGeoGridPrecision(zoom){return 0}showJoinEditor(){return!1}getJoinsDisabledReason(){return null}isESSource(){return!1}async getPreIndexedShape(properties){return null}async createFieldFormatter(field){return null}async getValueSuggestions(field,query){return[]}async isTimeAware(){return!1}isFilterByMapBounds(){return!1}getMinZoom(){return _common_constants__WEBPACK_IMPORTED_MODULE_1__.MIN_ZOOM}getMaxZoom(){return _common_constants__WEBPACK_IMPORTED_MODULE_1__.MAX_ZOOM}async getLicensedFeatures(){return[]}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return isMetricCountable}));var _common_constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);function isMetricCountable(aggType){return[_common_constants__WEBPACK_IMPORTED_MODULE_0__.AGG_TYPE.COUNT,_common_constants__WEBPACK_IMPORTED_MODULE_0__.AGG_TYPE.SUM,_common_constants__WEBPACK_IMPORTED_MODULE_0__.AGG_TYPE.UNIQUE_COUNT].includes(aggType)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return TiledVectorLayer}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_elastic_eui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),uuid_v4__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(11),uuid_v4__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(uuid_v4__WEBPACK_IMPORTED_MODULE_2__),url__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(92),_styles_vector_vector_style__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(51),_common_constants__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),_vector_layer__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(41),_util_can_skip_fetch__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(99),_util_is_refresh_only_query__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(169);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class TiledVectorLayer extends _vector_layer__WEBPACK_IMPORTED_MODULE_6__.a{static createDescriptor(descriptor,mapColors){const layerDescriptor=super.createDescriptor(descriptor,mapColors);if(layerDescriptor.type=TiledVectorLayer.type,!layerDescriptor.style){const styleProperties=_styles_vector_vector_style__WEBPACK_IMPORTED_MODULE_4__.a.createDefaultStyleProperties(mapColors||[]);layerDescriptor.style=_styles_vector_vector_style__WEBPACK_IMPORTED_MODULE_4__.a.createDescriptor(styleProperties)}return layerDescriptor}constructor({layerDescriptor:layerDescriptor,source:source}){super({layerDescriptor:layerDescriptor,source:source}),_defineProperty(this,"_source",void 0),this._source=source}getCustomIconAndTooltipContent(){return{icon:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiIcon,{size:"m",type:this.getLayerTypeIconName()})}}async _syncMVTUrlTemplate({startLoading:startLoading,stopLoading:stopLoading,onLoadError:onLoadError,dataFilters:dataFilters}){const requestToken=Symbol(`layer-${this.getId()}-${_common_constants__WEBPACK_IMPORTED_MODULE_5__.SOURCE_DATA_REQUEST_ID}`),searchFilters=this._getSearchFilters(dataFilters,this.getSource(),this._style),prevDataRequest=this.getSourceDataRequest();if(prevDataRequest){const data=prevDataRequest.getData();if(data){const noChangesInSourceState=data.layerName===this._source.getLayerName()&&data.minSourceZoom===this._source.getMinZoom()&&data.maxSourceZoom===this._source.getMaxZoom(),noChangesInSearchState=await Object(_util_can_skip_fetch__WEBPACK_IMPORTED_MODULE_7__.b)({extentAware:!1,source:this.getSource(),prevDataRequest:prevDataRequest,nextMeta:searchFilters});if(noChangesInSourceState&&noChangesInSearchState)return null}}startLoading(_common_constants__WEBPACK_IMPORTED_MODULE_5__.SOURCE_DATA_REQUEST_ID,requestToken,searchFilters);try{const prevMeta=prevDataRequest?prevDataRequest.getMeta():void 0,prevData=prevDataRequest?prevDataRequest.getData():void 0,urlToken=!prevData||Object(_util_is_refresh_only_query__WEBPACK_IMPORTED_MODULE_8__.a)(prevMeta?prevMeta.query:void 0,searchFilters.query)?uuid_v4__WEBPACK_IMPORTED_MODULE_2___default()():prevData.urlToken,newUrlTemplateAndMeta=await this._source.getUrlTemplateWithMeta(searchFilters);let urlTemplate;if(newUrlTemplateAndMeta.refreshTokenParamName){const parsedUrl=Object(url__WEBPACK_IMPORTED_MODULE_3__.parse)(newUrlTemplateAndMeta.urlTemplate,!0),separator=parsedUrl.query&&0!==Object.keys(parsedUrl.query).length?"&":"?";urlTemplate=`${newUrlTemplateAndMeta.urlTemplate}${separator}${newUrlTemplateAndMeta.refreshTokenParamName}=${urlToken}`}else urlTemplate=newUrlTemplateAndMeta.urlTemplate;const urlTemplateAndMetaWithToken={...newUrlTemplateAndMeta,urlToken:urlToken,urlTemplate:urlTemplate};stopLoading(_common_constants__WEBPACK_IMPORTED_MODULE_5__.SOURCE_DATA_REQUEST_ID,requestToken,urlTemplateAndMetaWithToken,{})}catch(error){onLoadError(_common_constants__WEBPACK_IMPORTED_MODULE_5__.SOURCE_DATA_REQUEST_ID,requestToken,error.message)}}async syncData(syncContext){await this._syncSourceStyleMeta(syncContext,this._source,this._style),await this._syncSourceFormatters(syncContext,this._source,this._style),await this._syncMVTUrlTemplate(syncContext)}_syncSourceBindingWithMb(mbMap){if(mbMap.getSource(this._getMbSourceId()))return;const sourceDataRequest=this.getSourceDataRequest();if(!sourceDataRequest)return;const sourceMeta=sourceDataRequest.getData();if(!sourceMeta)return;const mbSourceId=this._getMbSourceId();mbMap.addSource(mbSourceId,{type:"vector",tiles:[sourceMeta.urlTemplate],minzoom:sourceMeta.minSourceZoom,maxzoom:sourceMeta.maxSourceZoom})}ownsMbSourceId(mbSourceId){return this._getMbSourceId()===mbSourceId}_syncStylePropertiesWithMb(mbMap){if(!mbMap.getSource(this._getMbSourceId()))return;const sourceDataRequest=this.getSourceDataRequest();if(!sourceDataRequest)return;const sourceMeta=sourceDataRequest.getData();""!==sourceMeta.layerName&&(this._setMbPointsProperties(mbMap,sourceMeta.layerName),this._setMbLinePolygonProperties(mbMap,sourceMeta.layerName),this._setMbCentroidProperties(mbMap,sourceMeta.layerName))}_requiresPrevSourceCleanup(mbMap){var _mbTileSource$tiles;const mbSource=mbMap.getSource(this._getMbSourceId());if(!mbSource)return!1;if(!("tiles"in mbSource))return!0;const mbTileSource=mbSource,dataRequest=this.getSourceDataRequest();if(!dataRequest)return!1;const tiledSourceMeta=dataRequest.getData();if(!tiledSourceMeta)return!1;if((null===(_mbTileSource$tiles=mbTileSource.tiles)||void 0===_mbTileSource$tiles?void 0:_mbTileSource$tiles[0])!==tiledSourceMeta.urlTemplate||mbTileSource.minzoom!==tiledSourceMeta.minSourceZoom||mbTileSource.maxzoom!==tiledSourceMeta.maxSourceZoom)return!0;const layerIds=this.getMbLayerIds();for(let i=0;i<layerIds.length;i++){const mbLayer=mbMap.getLayer(layerIds[i]);if(mbLayer&&mbLayer.sourceLayer!==tiledSourceMeta.layerName)return!0}return!1}syncLayerWithMB(mbMap){this._removeStaleMbSourcesAndLayers(mbMap),this._syncSourceBindingWithMb(mbMap),this._syncStylePropertiesWithMb(mbMap)}getJoins(){return[]}getMinZoom(){return Math.max(this._source.getMinZoom(),super.getMinZoom())}getFeatureById(id){return null}}_defineProperty(TiledVectorLayer,"type",_common_constants__WEBPACK_IMPORTED_MODULE_5__.LAYER_TYPE.TILED_VECTOR)},function(module,exports){var hat=module.exports=function(bits,base){if(base||(base=16),void 0===bits&&(bits=128),bits<=0)return"0";for(var digits=Math.log(Math.pow(2,bits))/Math.log(base),i=2;digits===1/0;i*=2)digits=Math.log(Math.pow(2,bits/i))/Math.log(base)*i;var rem=digits-Math.floor(digits),res="";for(i=0;i<Math.floor(digits);i++){res=Math.floor(Math.random()*base).toString(base)+res}if(rem){var b=Math.pow(base,rem);res=Math.floor(Math.random()*b).toString(base)+res}var parsed=parseInt(res,base);return parsed!==1/0&&parsed>=Math.pow(2,bits)?hat(bits,base):res};hat.rack=function(bits,base,expandBy){var fn=function(data){var iters=0;do{if(iters++>10){if(!expandBy)throw new Error("too many ID collisions, use more bits");bits+=expandBy}var id=hat(bits,base)}while(Object.hasOwnProperty.call(hats,id));return hats[id]=data,id},hats=fn.hats={};return fn.get=function(id){return fn.hats[id]},fn.set=function(id,value){return fn.hats[id]=value,fn},fn.bits=bits||128,fn.base=base||16,fn}},function(module,exports){module.exports=function(){for(var target={},i=0;i<arguments.length;i++){var source=arguments[i];for(var key in source)hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var hasOwnProperty=Object.prototype.hasOwnProperty},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getDefaultMapSettings}));var _kbn_ui_shared_deps_theme__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(32),_common_constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0);function getDefaultMapSettings(){return{autoFitToDataBounds:!1,backgroundColor:_kbn_ui_shared_deps_theme__WEBPACK_IMPORTED_MODULE_0__.euiThemeVars.euiColorEmptyShade,disableInteractive:!1,disableTooltipControl:!1,hideToolbarOverlay:!1,hideLayerControl:!1,hideViewControl:!1,initialLocation:_common_constants__WEBPACK_IMPORTED_MODULE_1__.INITIAL_LOCATION.LAST_SAVED_LOCATION,fixedLocation:{lat:0,lon:0,zoom:2},browserLocation:{zoom:2},maxZoom:_common_constants__WEBPACK_IMPORTED_MODULE_1__.MAX_ZOOM,minZoom:_common_constants__WEBPACK_IMPORTED_MODULE_1__.MIN_ZOOM,showScaleControl:!1,showSpatialFilters:!0,spatialFiltersAlpa:.3,spatialFiltersFillColor:"#DA8B45",spatialFiltersLineColor:"#DA8B45"}}},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DEFAULT_MAP_STATE})),__webpack_require__.d(__webpack_exports__,"b",(function(){return map}));var actions=__webpack_require__(38),default_map_settings=__webpack_require__(147),copy_persistent_state=__webpack_require__(72);function getLayerIndex(list,layerId){return list.findIndex(({id:id})=>layerId===id)}function findLayerById(state,layerId){return state.layerList.find(({id:id})=>layerId===id)}function updateLayerInList(state,layerId,attribute,newValue){if(!layerId)return state;const{layerList:layerList}=state,layerIdx=getLayerIndex(layerList,layerId);if(-1===layerIdx)return state;const updatedLayer={...layerList[layerIdx],[attribute]:newValue||""===newValue||0===newValue?newValue:!layerList[layerIdx][attribute]},updatedList=[...layerList.slice(0,layerIdx),updatedLayer,...layerList.slice(layerIdx+1)];return{...state,layerList:updatedList}}function setLayer(layerList,layerDescriptor){const layerIndex=getLayerIndex(layerList,layerDescriptor.id);if(-1===layerIndex)return layerList;const newLayerList=[...layerList];return newLayerList[layerIndex]=layerDescriptor,newLayerList}var constants=__webpack_require__(0);function stopDataRequest(state,layerId,dataRequestId,requestToken,responseMeta,data){const dataRequest=getDataRequest(state,layerId,dataRequestId,requestToken);return dataRequest?setDataRequest(state,layerId,{...dataRequest,data:data,dataMeta:{...dataRequest.dataMetaAtStart?dataRequest.dataMetaAtStart:{},...responseMeta||{}},dataMetaAtStart:void 0,dataRequestToken:void 0}):state}function setDataRequest(state,layerId,dataRequest){const layerDescriptor=findLayerById(state,layerId);if(!layerDescriptor)return state;const updatedLayerDescriptor={...layerDescriptor,__dataRequests:layerDescriptor.__dataRequests?[...layerDescriptor.__dataRequests]:[]},dataRequestIndex=updatedLayerDescriptor.__dataRequests.findIndex(({dataId:dataId})=>dataRequest.dataId===dataId);return-1===dataRequestIndex?updatedLayerDescriptor.__dataRequests.push(dataRequest):updatedLayerDescriptor.__dataRequests[dataRequestIndex]=dataRequest,{...state,layerList:setLayer(state.layerList,updatedLayerDescriptor)}}function getDataRequest(state,layerId,dataRequestId,requestToken){const layerDescriptor=findLayerById(state,layerId);if(layerDescriptor&&layerDescriptor.__dataRequests)return layerDescriptor.__dataRequests.find(dataRequest=>requestToken?dataRequest.dataRequestToken===requestToken&&dataRequest.dataId===dataRequestId:dataRequest.dataId===dataRequestId)}const DEFAULT_MAP_STATE={ready:!1,mapInitError:null,goto:null,openTooltips:[],mapState:{zoom:void 0,center:void 0,scrollZoom:!0,extent:void 0,mouseCoordinates:void 0,timeFilters:void 0,query:void 0,filters:[],refreshConfig:void 0,refreshTimerLastTriggeredAt:void 0,drawState:void 0},selectedLayerId:null,layerList:[],waitingForMapReadyLayerList:[],settings:Object(default_map_settings.a)(),__rollbackSettings:null};function map(state=DEFAULT_MAP_STATE,action){switch(action.type){case actions.M:return{...state,mapState:{...state.mapState,drawState:action.drawState}};case actions.n:return function(state,layerId){const layer=findLayerById(state,layerId);if(!layer)return state;const copyLayer={...layer};return delete copyLayer[copy_persistent_state.a],{...state,layerList:setLayer(state.layerList,copyLayer)}}(state,action.layerId);case actions.J:return function(state,layerId){const layer=findLayerById(state,layerId),layerCopy=Object(copy_persistent_state.b)(layer);return updateLayerInList(state,layerId,copy_persistent_state.a,layerCopy)}(state,action.layerId);case actions.p:return function(state,layerId){const layer=findLayerById(state,layerId);if(!layer)return state;const trackedLayerDescriptor=layer[copy_persistent_state.a],rolledbackLayer={...layer,...trackedLayerDescriptor};return delete rolledbackLayer[copy_persistent_state.a],{...state,layerList:setLayer(state.layerList,rolledbackLayer)}}(state,action.layerId);case actions.B:return{...state,openTooltips:action.openTooltips};case actions.z:return{...state,mapState:{...state.mapState,mouseCoordinates:{lat:action.lat,lon:action.lon}}};case actions.d:return{...state,mapState:{...state.mapState,mouseCoordinates:null}};case actions.r:return{...state,goto:{center:action.center,bounds:action.bounds}};case actions.c:return{...state,goto:null};case actions.y:return{...state,settings:{...Object(default_map_settings.a)(),...action.settings}};case actions.o:return state.__rollbackSettings?{...state,settings:{...state.__rollbackSettings},__rollbackSettings:null}:state;case actions.K:return{...state,__rollbackSettings:state.settings};case actions.R:return{...state,settings:{...state.settings?state.settings:{},[action.settingKey]:action.settingValue}};case actions.u:const{layerList:layerList}=state,layerIdx=getLayerIndex(layerList,action.layerId);return-1===layerIdx?state:{...state,layerList:[...layerList.slice(0,layerIdx),{...layerList[layerIdx],__isInErrorState:action.isInErrorState,__errorMessage:action.errorMessage},...layerList.slice(layerIdx+1)]};case actions.S:return function(state,layerId,newData){const dataRequest=getDataRequest(state,layerId,constants.SOURCE_DATA_REQUEST_ID);return dataRequest?setDataRequest(state,layerId,{...dataRequest,data:newData}):state}(state,action.layerId,action.newData);case actions.i:return function(state,layerId,dataRequestId,requestToken,requestMeta){if(!findLayerById(state,layerId))return state;const prevDataRequest=getDataRequest(state,layerId,dataRequestId),dataRequest=prevDataRequest?{...prevDataRequest}:{dataId:dataRequestId};return dataRequest.dataMetaAtStart=requestMeta,dataRequest.dataRequestToken=requestToken,setDataRequest(state,layerId,dataRequest)}(state,action.layerId,action.dataId,action.requestToken,action.meta);case actions.h:return stopDataRequest(state,action.layerId,action.dataId,action.requestToken);case actions.g:return stopDataRequest(state,action.layerId,action.dataId,action.requestToken,action.meta,action.data);case actions.l:return{...state,ready:!0};case actions.j:return{...state,ready:!1};case actions.k:const newMapState={center:action.mapState.center,zoom:action.mapState.zoom,extent:action.mapState.extent,buffer:action.mapState.buffer};return{...state,mapState:{...state.mapState,...newMapState}};case actions.C:const{query:query,timeFilters:timeFilters,filters:filters,searchSessionId:searchSessionId,searchSessionMapBuffer:searchSessionMapBuffer}=action;return{...state,mapState:{...state.mapState,query:query,timeFilters:timeFilters,filters:filters,searchSessionId:searchSessionId,searchSessionMapBuffer:searchSessionMapBuffer}};case actions.E:const{isPaused:isPaused,interval:interval}=action;return{...state,mapState:{...state.mapState,refreshConfig:{isPaused:isPaused,interval:interval}}};case actions.L:return{...state,mapState:{...state.mapState,refreshTimerLastTriggeredAt:(new Date).toISOString()}};case actions.G:const selectedMatch=state.layerList.find(layer=>layer.id===action.selectedLayerId);return{...state,selectedLayerId:selectedMatch?action.selectedLayerId:null};case actions.O:return{...state,layerList:action.newLayerOrder.map(layerNumber=>state.layerList[layerNumber])};case actions.P:return updateLayerInList(state,action.id,action.propName,action.newValue);case actions.T:return function(state,layerId,propName,value){const{layerList:layerList}=state,layerIdx=getLayerIndex(layerList,layerId),updatedLayer={...layerList[layerIdx],sourceDescriptor:{...layerList[layerIdx].sourceDescriptor,[propName]:value}},updatedList=[...layerList.slice(0,layerIdx),updatedLayer,...layerList.slice(layerIdx+1)];return{...state,layerList:updatedList}}(state,action.layerId,action.propName,action.value);case actions.t:const layerDescriptor=state.layerList.find(descriptor=>descriptor.id===action.layer.getId());if(layerDescriptor){const newLayerDescriptor={...layerDescriptor,joins:action.joins.slice()},index=state.layerList.findIndex(descriptor=>descriptor.id===action.layer.getId()),newLayerList=state.layerList.slice();return newLayerList[index]=newLayerDescriptor,{...state,layerList:newLayerList}}return state;case actions.a:return{...state,layerList:[...state.layerList,action.layer]};case actions.m:return{...state,layerList:[...state.layerList.filter(({id:id})=>id!==action.id)]};case actions.b:return{...state,waitingForMapReadyLayerList:[...state.waitingForMapReadyLayerList,action.layer]};case actions.e:return{...state,waitingForMapReadyLayerList:[]};case actions.w:return updateLayerInList(state,action.layerId,"visible",action.visibility);case actions.Q:const styleLayerId=action.layerId;return updateLayerInList(state,styleLayerId,"style",{...action.style});case actions.v:const{layerId:layerId,styleMeta:styleMeta}=action,index=getLayerIndex(state.layerList,layerId);return-1===index?state:updateLayerInList(state,layerId,"style",{...state.layerList[index].style,__styleMeta:styleMeta});case actions.F:return{...state,mapState:{...state.mapState,scrollZoom:action.scrollZoom}};case actions.x:return{...state,mapInitError:action.errorMessage};case actions.H:return{...state,waitingForMapReadyLayerList:state.waitingForMapReadyLayerList.map(layer=>({...layer,visible:!action.hiddenLayerIds.includes(layer.id)}))};default:return state}}},function(module,exports,__webpack_require__){var _typeof=__webpack_require__(228);function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}module.exports=function(obj){if(obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.getBatch=exports.setBatch=void 0;var batch=function(callback){callback()};exports.setBatch=function(newBatch){return batch=newBatch};exports.getBatch=function(){return batch}},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(150),_interopRequireDefault=__webpack_require__(52);exports.__esModule=!0,exports.default=function(selectorFactory,_ref){void 0===_ref&&(_ref={});var _ref2=_ref,_ref2$getDisplayName=_ref2.getDisplayName,getDisplayName=void 0===_ref2$getDisplayName?function(name){return"ConnectAdvanced("+name+")"}:_ref2$getDisplayName,_ref2$methodName=_ref2.methodName,methodName=void 0===_ref2$methodName?"connectAdvanced":_ref2$methodName,_ref2$renderCountProp=_ref2.renderCountProp,renderCountProp=void 0===_ref2$renderCountProp?void 0:_ref2$renderCountProp,_ref2$shouldHandleSta=_ref2.shouldHandleStateChanges,shouldHandleStateChanges=void 0===_ref2$shouldHandleSta||_ref2$shouldHandleSta,_ref2$storeKey=_ref2.storeKey,storeKey=void 0===_ref2$storeKey?"store":_ref2$storeKey,_ref2$forwardRef=(_ref2.withRef,_ref2.forwardRef),forwardRef=void 0!==_ref2$forwardRef&&_ref2$forwardRef,_ref2$context=_ref2.context,context=void 0===_ref2$context?_Context.ReactReduxContext:_ref2$context,connectOptions=(0,_objectWithoutPropertiesLoose2.default)(_ref2,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]);0;var Context=context;return function(WrappedComponent){var wrappedComponentName=WrappedComponent.displayName||WrappedComponent.name||"Component",displayName=getDisplayName(wrappedComponentName),selectorFactoryOptions=(0,_extends2.default)({},connectOptions,{getDisplayName:getDisplayName,methodName:methodName,renderCountProp:renderCountProp,shouldHandleStateChanges:shouldHandleStateChanges,storeKey:storeKey,displayName:displayName,wrappedComponentName:wrappedComponentName,WrappedComponent:WrappedComponent}),pure=connectOptions.pure;var usePureOnlyMemo=pure?_react.useMemo:function(callback){return callback()};function ConnectFunction(props){var _useMemo=(0,_react.useMemo)((function(){var forwardedRef=props.forwardedRef,wrapperProps=(0,_objectWithoutPropertiesLoose2.default)(props,["forwardedRef"]);return[props.context,forwardedRef,wrapperProps]}),[props]),propsContext=_useMemo[0],forwardedRef=_useMemo[1],wrapperProps=_useMemo[2],ContextToUse=(0,_react.useMemo)((function(){return propsContext&&propsContext.Consumer&&(0,_reactIs.isContextConsumer)(_react.default.createElement(propsContext.Consumer,null))?propsContext:Context}),[propsContext,Context]),contextValue=(0,_react.useContext)(ContextToUse),didStoreComeFromProps=Boolean(props.store)&&Boolean(props.store.getState)&&Boolean(props.store.dispatch);Boolean(contextValue)&&Boolean(contextValue.store);var store=didStoreComeFromProps?props.store:contextValue.store,childPropsSelector=(0,_react.useMemo)((function(){return function(store){return selectorFactory(store.dispatch,selectorFactoryOptions)}(store)}),[store]),_useMemo2=(0,_react.useMemo)((function(){if(!shouldHandleStateChanges)return NO_SUBSCRIPTION_ARRAY;var subscription=new _Subscription.default(store,didStoreComeFromProps?null:contextValue.subscription),notifyNestedSubs=subscription.notifyNestedSubs.bind(subscription);return[subscription,notifyNestedSubs]}),[store,didStoreComeFromProps,contextValue]),subscription=_useMemo2[0],notifyNestedSubs=_useMemo2[1],overriddenContextValue=(0,_react.useMemo)((function(){return didStoreComeFromProps?contextValue:(0,_extends2.default)({},contextValue,{subscription:subscription})}),[didStoreComeFromProps,contextValue,subscription]),_useReducer=(0,_react.useReducer)(storeStateUpdatesReducer,EMPTY_ARRAY,initStateUpdates),previousStateUpdateResult=_useReducer[0][0],forceComponentUpdateDispatch=_useReducer[1];if(previousStateUpdateResult&&previousStateUpdateResult.error)throw previousStateUpdateResult.error;var lastChildProps=(0,_react.useRef)(),lastWrapperProps=(0,_react.useRef)(wrapperProps),childPropsFromStoreUpdate=(0,_react.useRef)(),renderIsScheduled=(0,_react.useRef)(!1),actualChildProps=usePureOnlyMemo((function(){return childPropsFromStoreUpdate.current&&wrapperProps===lastWrapperProps.current?childPropsFromStoreUpdate.current:childPropsSelector(store.getState(),wrapperProps)}),[store,previousStateUpdateResult,wrapperProps]);useIsomorphicLayoutEffectWithArgs(captureWrapperProps,[lastWrapperProps,lastChildProps,renderIsScheduled,wrapperProps,actualChildProps,childPropsFromStoreUpdate,notifyNestedSubs]),useIsomorphicLayoutEffectWithArgs(subscribeUpdates,[shouldHandleStateChanges,store,subscription,childPropsSelector,lastWrapperProps,lastChildProps,renderIsScheduled,childPropsFromStoreUpdate,notifyNestedSubs,forceComponentUpdateDispatch],[store,subscription,childPropsSelector]);var renderedWrappedComponent=(0,_react.useMemo)((function(){return _react.default.createElement(WrappedComponent,(0,_extends2.default)({},actualChildProps,{ref:forwardedRef}))}),[forwardedRef,WrappedComponent,actualChildProps]);return(0,_react.useMemo)((function(){return shouldHandleStateChanges?_react.default.createElement(ContextToUse.Provider,{value:overriddenContextValue},renderedWrappedComponent):renderedWrappedComponent}),[ContextToUse,renderedWrappedComponent,overriddenContextValue])}var Connect=pure?_react.default.memo(ConnectFunction):ConnectFunction;if(Connect.WrappedComponent=WrappedComponent,Connect.displayName=displayName,forwardRef){var forwarded=_react.default.forwardRef((function(props,ref){return _react.default.createElement(Connect,(0,_extends2.default)({},props,{forwardedRef:ref}))}));return forwarded.displayName=displayName,forwarded.WrappedComponent=WrappedComponent,(0,_hoistNonReactStatics.default)(forwarded,WrappedComponent)}return(0,_hoistNonReactStatics.default)(Connect,WrappedComponent)}};var _extends2=_interopRequireDefault(__webpack_require__(108)),_objectWithoutPropertiesLoose2=_interopRequireDefault(__webpack_require__(109)),_hoistNonReactStatics=_interopRequireDefault(__webpack_require__(232)),_react=_interopRequireWildcard(__webpack_require__(2)),_reactIs=__webpack_require__(153),_Subscription=_interopRequireDefault(__webpack_require__(107)),_useIsomorphicLayoutEffect=__webpack_require__(154),_Context=__webpack_require__(66),EMPTY_ARRAY=[],NO_SUBSCRIPTION_ARRAY=[null,null];function storeStateUpdatesReducer(state,action){var updateCount=state[1];return[action.payload,updateCount+1]}function useIsomorphicLayoutEffectWithArgs(effectFunc,effectArgs,dependencies){(0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)((function(){return effectFunc.apply(void 0,effectArgs)}),dependencies)}function captureWrapperProps(lastWrapperProps,lastChildProps,renderIsScheduled,wrapperProps,actualChildProps,childPropsFromStoreUpdate,notifyNestedSubs){lastWrapperProps.current=wrapperProps,lastChildProps.current=actualChildProps,renderIsScheduled.current=!1,childPropsFromStoreUpdate.current&&(childPropsFromStoreUpdate.current=null,notifyNestedSubs())}function subscribeUpdates(shouldHandleStateChanges,store,subscription,childPropsSelector,lastWrapperProps,lastChildProps,renderIsScheduled,childPropsFromStoreUpdate,notifyNestedSubs,forceComponentUpdateDispatch){if(shouldHandleStateChanges){var didUnsubscribe=!1,lastThrownError=null,checkForUpdates=function(){if(!didUnsubscribe){var newChildProps,error,latestStoreState=store.getState();try{newChildProps=childPropsSelector(latestStoreState,lastWrapperProps.current)}catch(e){error=e,lastThrownError=e}error||(lastThrownError=null),newChildProps===lastChildProps.current?renderIsScheduled.current||notifyNestedSubs():(lastChildProps.current=newChildProps,childPropsFromStoreUpdate.current=newChildProps,renderIsScheduled.current=!0,forceComponentUpdateDispatch({type:"STORE_UPDATED",payload:{error:error}}))}};subscription.onStateChange=checkForUpdates,subscription.trySubscribe(),checkForUpdates();return function(){if(didUnsubscribe=!0,subscription.tryUnsubscribe(),subscription.onStateChange=null,lastThrownError)throw lastThrownError}}}var initStateUpdates=function(){return[null,0]}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(233)},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.useIsomorphicLayoutEffect=void 0;var _react=__webpack_require__(2),useIsomorphicLayoutEffect="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?_react.useLayoutEffect:_react.useEffect;exports.useIsomorphicLayoutEffect=useIsomorphicLayoutEffect},function(module,exports,__webpack_require__){"use strict";function is(x,y){return x===y?0!==x||0!==y||1/x==1/y:x!=x&&y!=y}exports.__esModule=!0,exports.default=function(objA,objB){if(is(objA,objB))return!0;if("object"!=typeof objA||null===objA||"object"!=typeof objB||null===objB)return!1;var keysA=Object.keys(objA),keysB=Object.keys(objB);if(keysA.length!==keysB.length)return!1;for(var i=0;i<keysA.length;i++)if(!Object.prototype.hasOwnProperty.call(objB,keysA[i])||!is(objA[keysA[i]],objB[keysA[i]]))return!1;return!0}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ex,$$observable=(ex=__webpack_require__(236))&&"object"==typeof ex&&"default"in ex?ex.default:ex,randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject(obj){if("object"!=typeof obj||null===obj)return!1;for(var proto=obj;null!==Object.getPrototypeOf(proto);)proto=Object.getPrototypeOf(proto);return Object.getPrototypeOf(obj)===proto}function getUndefinedStateErrorMessage(key,action){var actionType=action&&action.type;return"Given "+(actionType&&'action "'+String(actionType)+'"'||"an action")+', reducer "'+key+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function bindActionCreator(actionCreator,dispatch){return function(){return dispatch(actionCreator.apply(this,arguments))}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);return Object.getOwnPropertySymbols&&keys.push.apply(keys,Object.getOwnPropertySymbols(object)),enumerableOnly&&(keys=keys.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function compose(){for(var _len=arguments.length,funcs=new Array(_len),_key=0;_key<_len;_key++)funcs[_key]=arguments[_key];return 0===funcs.length?function(arg){return arg}:1===funcs.length?funcs[0]:funcs.reduce((function(a,b){return function(){return a(b.apply(void 0,arguments))}}))}exports.__DO_NOT_USE__ActionTypes=ActionTypes,exports.applyMiddleware=function(){for(var _len=arguments.length,middlewares=new Array(_len),_key=0;_key<_len;_key++)middlewares[_key]=arguments[_key];return function(createStore){return function(){var store=createStore.apply(void 0,arguments),_dispatch=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},middlewareAPI={getState:store.getState,dispatch:function(){return _dispatch.apply(void 0,arguments)}},chain=middlewares.map((function(middleware){return middleware(middlewareAPI)}));return _objectSpread2({},store,{dispatch:_dispatch=compose.apply(void 0,chain)(store.dispatch)})}}},exports.bindActionCreators=function(actionCreators,dispatch){if("function"==typeof actionCreators)return bindActionCreator(actionCreators,dispatch);if("object"!=typeof actionCreators||null===actionCreators)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===actionCreators?"null":typeof actionCreators)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var boundActionCreators={};for(var key in actionCreators){var actionCreator=actionCreators[key];"function"==typeof actionCreator&&(boundActionCreators[key]=bindActionCreator(actionCreator,dispatch))}return boundActionCreators},exports.combineReducers=function(reducers){for(var reducerKeys=Object.keys(reducers),finalReducers={},i=0;i<reducerKeys.length;i++){var key=reducerKeys[i];0,"function"==typeof reducers[key]&&(finalReducers[key]=reducers[key])}var shapeAssertionError,finalReducerKeys=Object.keys(finalReducers);try{!function(reducers){Object.keys(reducers).forEach((function(key){var reducer=reducers[key];if(void 0===reducer(void 0,{type:ActionTypes.INIT}))throw new Error('Reducer "'+key+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===reducer(void 0,{type:ActionTypes.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+key+"\" returned undefined when probed with a random type. Don't try to handle "+ActionTypes.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(finalReducers)}catch(e){shapeAssertionError=e}return function(state,action){if(void 0===state&&(state={}),shapeAssertionError)throw shapeAssertionError;for(var hasChanged=!1,nextState={},_i=0;_i<finalReducerKeys.length;_i++){var _key=finalReducerKeys[_i],reducer=finalReducers[_key],previousStateForKey=state[_key],nextStateForKey=reducer(previousStateForKey,action);if(void 0===nextStateForKey){var errorMessage=getUndefinedStateErrorMessage(_key,action);throw new Error(errorMessage)}nextState[_key]=nextStateForKey,hasChanged=hasChanged||nextStateForKey!==previousStateForKey}return(hasChanged=hasChanged||finalReducerKeys.length!==Object.keys(state).length)?nextState:state}},exports.compose=compose,exports.createStore=function createStore(reducer,preloadedState,enhancer){var _ref2;if("function"==typeof preloadedState&&"function"==typeof enhancer||"function"==typeof enhancer&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof preloadedState&&void 0===enhancer&&(enhancer=preloadedState,preloadedState=void 0),void 0!==enhancer){if("function"!=typeof enhancer)throw new Error("Expected the enhancer to be a function.");return enhancer(createStore)(reducer,preloadedState)}if("function"!=typeof reducer)throw new Error("Expected the reducer to be a function.");var currentReducer=reducer,currentState=preloadedState,currentListeners=[],nextListeners=currentListeners,isDispatching=!1;function ensureCanMutateNextListeners(){nextListeners===currentListeners&&(nextListeners=currentListeners.slice())}function getState(){if(isDispatching)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return currentState}function subscribe(listener){if("function"!=typeof listener)throw new Error("Expected the listener to be a function.");if(isDispatching)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var isSubscribed=!0;return ensureCanMutateNextListeners(),nextListeners.push(listener),function(){if(isSubscribed){if(isDispatching)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");isSubscribed=!1,ensureCanMutateNextListeners();var index=nextListeners.indexOf(listener);nextListeners.splice(index,1),currentListeners=null}}}function dispatch(action){if(!isPlainObject(action))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===action.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(isDispatching)throw new Error("Reducers may not dispatch actions.");try{isDispatching=!0,currentState=currentReducer(currentState,action)}finally{isDispatching=!1}for(var listeners=currentListeners=nextListeners,i=0;i<listeners.length;i++){(0,listeners[i])()}return action}function replaceReducer(nextReducer){if("function"!=typeof nextReducer)throw new Error("Expected the nextReducer to be a function.");currentReducer=nextReducer,dispatch({type:ActionTypes.REPLACE})}function observable(){var _ref,outerSubscribe=subscribe;return(_ref={subscribe:function(observer){if("object"!=typeof observer||null===observer)throw new TypeError("Expected the observer to be an object.");function observeState(){observer.next&&observer.next(getState())}return observeState(),{unsubscribe:outerSubscribe(observeState)}}})[$$observable]=function(){return this},_ref}return dispatch({type:ActionTypes.INIT}),(_ref2={dispatch:dispatch,subscribe:subscribe,getState:getState,replaceReducer:replaceReducer})[$$observable]=observable,_ref2}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(52);exports.__esModule=!0,exports.wrapMapToPropsConstant=function(getConstant){return function(dispatch,options){var constant=getConstant(dispatch,options);function constantSelector(){return constant}return constantSelector.dependsOnOwnProps=!1,constantSelector}},exports.getDependsOnOwnProps=getDependsOnOwnProps,exports.wrapMapToPropsFunc=function(mapToProps,methodName){return function(dispatch,_ref){_ref.displayName;var proxy=function(stateOrDispatch,ownProps){return proxy.dependsOnOwnProps?proxy.mapToProps(stateOrDispatch,ownProps):proxy.mapToProps(stateOrDispatch)};return proxy.dependsOnOwnProps=!0,proxy.mapToProps=function(stateOrDispatch,ownProps){proxy.mapToProps=mapToProps,proxy.dependsOnOwnProps=getDependsOnOwnProps(mapToProps);var props=proxy(stateOrDispatch,ownProps);return"function"==typeof props&&(proxy.mapToProps=props,proxy.dependsOnOwnProps=getDependsOnOwnProps(props),props=proxy(stateOrDispatch,ownProps)),props},proxy}};_interopRequireDefault(__webpack_require__(158));function getDependsOnOwnProps(mapToProps){return null!==mapToProps.dependsOnOwnProps&&void 0!==mapToProps.dependsOnOwnProps?Boolean(mapToProps.dependsOnOwnProps):1!==mapToProps.length}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(52);exports.__esModule=!0,exports.default=function(value,displayName,methodName){(0,_isPlainObject.default)(value)||(0,_warning.default)(methodName+"() in "+displayName+" must return a plain object. Instead received "+value+".")};var _isPlainObject=_interopRequireDefault(__webpack_require__(238)),_warning=_interopRequireDefault(__webpack_require__(159))},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=function(message){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(message);try{throw new Error(message)}catch(e){}}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.createStoreHook=createStoreHook,exports.useStore=void 0;var _react=__webpack_require__(2),_Context=__webpack_require__(66),_useReduxContext2=__webpack_require__(161);function createStoreHook(context){void 0===context&&(context=_Context.ReactReduxContext);var useReduxContext=context===_Context.ReactReduxContext?_useReduxContext2.useReduxContext:function(){return(0,_react.useContext)(context)};return function(){return useReduxContext().store}}var useStore=createStoreHook();exports.useStore=useStore},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.useReduxContext=function(){0;return(0,_react.useContext)(_Context.ReactReduxContext)};var _react=__webpack_require__(2),_Context=__webpack_require__(66)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var helpers_1=__webpack_require__(46);exports.default=function(bbox,options){void 0===options&&(options={});var west=Number(bbox[0]),south=Number(bbox[1]),east=Number(bbox[2]),north=Number(bbox[3]);if(6===bbox.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var lowLeft=[west,south],topLeft=[west,north],topRight=[east,north],lowRight=[east,south];return helpers_1.polygon([[lowLeft,lowRight,topRight,topLeft,lowLeft]],options.properties,{bbox:bbox,id:options.id})}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var bbox_1=__importDefault(__webpack_require__(91)),boolean_point_in_polygon_1=__importDefault(__webpack_require__(246)),boolean_point_on_line_1=__importDefault(__webpack_require__(247)),invariant_1=__webpack_require__(63);function isPointInMultiPoint(multiPoint,pt){var i,output=!1;for(i=0;i<multiPoint.coordinates.length;i++)if(compareCoords(multiPoint.coordinates[i],pt.coordinates)){output=!0;break}return output}function isMultiPointInMultiPoint(multiPoint1,multiPoint2){for(var _i=0,_a=multiPoint2.coordinates;_i<_a.length;_i++){for(var coord2=_a[_i],matchFound=!1,_b=0,_c=multiPoint1.coordinates;_b<_c.length;_b++){if(compareCoords(coord2,_c[_b])){matchFound=!0;break}}if(!matchFound)return!1}return!0}function isMultiPointOnLine(lineString,multiPoint){for(var haveFoundInteriorPoint=!1,_i=0,_a=multiPoint.coordinates;_i<_a.length;_i++){var coord=_a[_i];if(boolean_point_on_line_1.default(coord,lineString,{ignoreEndVertices:!0})&&(haveFoundInteriorPoint=!0),!boolean_point_on_line_1.default(coord,lineString))return!1}return!!haveFoundInteriorPoint}function isMultiPointInPoly(polygon,multiPoint){for(var _i=0,_a=multiPoint.coordinates;_i<_a.length;_i++){var coord=_a[_i];if(!boolean_point_in_polygon_1.default(coord,polygon,{ignoreBoundary:!0}))return!1}return!0}function isLineOnLine(lineString1,lineString2){for(var haveFoundInteriorPoint=!1,_i=0,_a=lineString2.coordinates;_i<_a.length;_i++){var coords=_a[_i];if(boolean_point_on_line_1.default({type:"Point",coordinates:coords},lineString1,{ignoreEndVertices:!0})&&(haveFoundInteriorPoint=!0),!boolean_point_on_line_1.default({type:"Point",coordinates:coords},lineString1,{ignoreEndVertices:!1}))return!1}return haveFoundInteriorPoint}function isLineInPoly(polygon,linestring){var output=!1,i=0;if(!doBBoxOverlap(bbox_1.default(polygon),bbox_1.default(linestring)))return!1;for(;i<linestring.coordinates.length-1;i++){var midPoint=getMidpoint(linestring.coordinates[i],linestring.coordinates[i+1]);if(boolean_point_in_polygon_1.default({type:"Point",coordinates:midPoint},polygon,{ignoreBoundary:!0})){output=!0;break}}return output}function isPolyInPoly(feature1,feature2){if("Feature"===feature1.type&&null===feature1.geometry)return!1;if("Feature"===feature2.type&&null===feature2.geometry)return!1;if(!doBBoxOverlap(bbox_1.default(feature1),bbox_1.default(feature2)))return!1;for(var _i=0,coords_1=invariant_1.getGeom(feature2).coordinates;_i<coords_1.length;_i++)for(var _a=0,ring_1=coords_1[_i];_a<ring_1.length;_a++){var coord=ring_1[_a];if(!boolean_point_in_polygon_1.default(coord,feature1))return!1}return!0}function doBBoxOverlap(bbox1,bbox2){return!(bbox1[0]>bbox2[0])&&(!(bbox1[2]<bbox2[2])&&(!(bbox1[1]>bbox2[1])&&!(bbox1[3]<bbox2[3])))}function compareCoords(pair1,pair2){return pair1[0]===pair2[0]&&pair1[1]===pair2[1]}function getMidpoint(pair1,pair2){return[(pair1[0]+pair2[0])/2,(pair1[1]+pair2[1])/2]}exports.default=function(feature1,feature2){var geom1=invariant_1.getGeom(feature1),geom2=invariant_1.getGeom(feature2),type1=invariant_1.getType(feature1),type2=invariant_1.getType(feature2),coords1=invariant_1.getCoords(feature1),coords2=invariant_1.getCoords(feature2);switch(type1){case"Point":switch(type2){case"Point":return compareCoords(coords1,coords2);default:throw new Error("feature2 "+type2+" geometry not supported")}case"MultiPoint":switch(type2){case"Point":return isPointInMultiPoint(geom1,geom2);case"MultiPoint":return isMultiPointInMultiPoint(geom1,geom2);default:throw new Error("feature2 "+type2+" geometry not supported")}case"LineString":switch(type2){case"Point":return boolean_point_on_line_1.default(geom2,geom1,{ignoreEndVertices:!0});case"LineString":return isLineOnLine(geom1,geom2);case"MultiPoint":return isMultiPointOnLine(geom1,geom2);default:throw new Error("feature2 "+type2+" geometry not supported")}case"Polygon":switch(type2){case"Point":return boolean_point_in_polygon_1.default(geom2,geom1,{ignoreBoundary:!0});case"LineString":return isLineInPoly(geom1,geom2);case"Polygon":return isPolyInPoly(geom1,geom2);case"MultiPoint":return isMultiPointInPoly(geom1,geom2);default:throw new Error("feature2 "+type2+" geometry not supported")}default:throw new Error("feature1 "+type1+" geometry not supported")}},exports.isPointInMultiPoint=isPointInMultiPoint,exports.isMultiPointInMultiPoint=isMultiPointInMultiPoint,exports.isMultiPointOnLine=isMultiPointOnLine,exports.isMultiPointInPoly=isMultiPointInPoly,exports.isLineOnLine=isLineOnLine,exports.isLineInPoly=isLineInPoly,exports.isPolyInPoly=isPolyInPoly,exports.doBBoxOverlap=doBBoxOverlap,exports.compareCoords=compareCoords,exports.getMidpoint=getMidpoint},function(module,exports,__webpack_require__){const compare=__webpack_require__(55);module.exports=(a,b,loose)=>0!==compare(a,b,loose)},function(module,exports,__webpack_require__){const eq=__webpack_require__(113),neq=__webpack_require__(164),gt=__webpack_require__(95),gte=__webpack_require__(116),lt=__webpack_require__(115),lte=__webpack_require__(117);module.exports=(a,op,b,loose)=>{switch(op){case"===":return"object"==typeof a&&(a=a.version),"object"==typeof b&&(b=b.version),a===b;case"!==":return"object"==typeof a&&(a=a.version),"object"==typeof b&&(b=b.version),a!==b;case"":case"=":case"==":return eq(a,b,loose);case"!=":return neq(a,b,loose);case">":return gt(a,b,loose);case">=":return gte(a,b,loose);case"<":return lt(a,b,loose);case"<=":return lte(a,b,loose);default:throw new TypeError("Invalid operator: "+op)}}},function(module,exports,__webpack_require__){"use strict";var global=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==global)return global;throw new Error("unable to locate global object")}();module.exports=exports=global.fetch,global.fetch&&(exports.default=global.fetch.bind(global)),exports.Headers=global.Headers,exports.Request=global.Request,exports.Response=global.Response},function(module,__webpack_exports__,__webpack_require__){"use strict";function isGlDrawLayer(mbLayerId){return mbLayerId.startsWith("gl-draw")}function doesMbLayerBelongToMapLayerAndClass(mapLayer,mbLayer,layerClass){if(!mapLayer.ownsMbLayerId(mbLayer.id))return!1;if(layerClass===LAYER_CLASS.ANY)return!0;const isTextLayer=function(mbLayer){if("symbol"!==mbLayer.type)return!1;const styleNames=[];return mbLayer.paint&&styleNames.push(...Object.keys(mbLayer.paint)),mbLayer.layout&&styleNames.push(...Object.keys(mbLayer.layout)),styleNames.some(styleName=>styleName.startsWith("text-"))}(mbLayer);return layerClass===LAYER_CLASS.LABEL?isTextLayer:!isTextLayer}var LAYER_CLASS;function moveMapLayer(mbMap,mbLayers,mapLayer,layerClass,beneathMbLayerId){mbLayers.filter(mbLayer=>doesMbLayerBelongToMapLayerAndClass(mapLayer,mbLayer,layerClass)).forEach(mbLayer=>{mbMap.moveLayer(mbLayer.id,beneathMbLayerId)})}function getBottomMbLayerId(mbLayers,mapLayer,layerClass){const bottomMbLayer=mbLayers.find(mbLayer=>doesMbLayerBelongToMapLayerAndClass(mapLayer,mbLayer,layerClass));return bottomMbLayer?bottomMbLayer.id:void 0}function isLayerInOrder(mbMap,mapLayer,layerClass,beneathMbLayerId){const mbLayers=mbMap.getStyle().layers;if(!beneathMbLayerId)return doesMbLayerBelongToMapLayerAndClass(mapLayer,mbLayers[mbLayers.length-1],layerClass);let inMapLayerBlock=!1,nextMbLayerId=null;for(let i=0;i<mbLayers.length;i++)if(inMapLayerBlock){if(!doesMbLayerBelongToMapLayerAndClass(mapLayer,mbLayers[i],layerClass)){nextMbLayerId=mbLayers[i].id;break}}else doesMbLayerBelongToMapLayerAndClass(mapLayer,mbLayers[i],layerClass)&&(inMapLayerBlock=!0);return nextMbLayerId===beneathMbLayerId}function syncLayerOrder(mbMap,spatialFiltersLayer,layerList){const mbLayers=mbMap.getStyle().layers;if(!mbLayers||0===mbLayers.length)return;isLayerInOrder(mbMap,spatialFiltersLayer,LAYER_CLASS.ANY)||moveMapLayer(mbMap,mbLayers,spatialFiltersLayer,LAYER_CLASS.ANY);let beneathMbLayerId=getBottomMbLayerId(mbLayers,spatialFiltersLayer,LAYER_CLASS.ANY);const glDrawLayer={ownsMbLayerId:mbLayerId=>isGlDrawLayer(mbLayerId)};moveMapLayer(mbMap,mbLayers,glDrawLayer,LAYER_CLASS.ANY,beneathMbLayerId);const glDrawBottomMbLayerId=getBottomMbLayerId(mbLayers,glDrawLayer,LAYER_CLASS.ANY);glDrawBottomMbLayerId&&(beneathMbLayerId=glDrawBottomMbLayerId),[...layerList].reverse().filter(mapLayer=>mapLayer.areLabelsOnTop()).forEach(mapLayer=>{isLayerInOrder(mbMap,mapLayer,LAYER_CLASS.LABEL,beneathMbLayerId)||moveMapLayer(mbMap,mbLayers,mapLayer,LAYER_CLASS.LABEL,beneathMbLayerId);const bottomMbLayerId=getBottomMbLayerId(mbLayers,mapLayer,LAYER_CLASS.LABEL);bottomMbLayerId&&(beneathMbLayerId=bottomMbLayerId)}),[...layerList].reverse().forEach(mapLayer=>{const layerClass=mapLayer.areLabelsOnTop()?LAYER_CLASS.NON_LABEL:LAYER_CLASS.ANY;isLayerInOrder(mbMap,mapLayer,layerClass,beneathMbLayerId)||moveMapLayer(mbMap,mbLayers,mapLayer,layerClass,beneathMbLayerId);const bottomMbLayerId=getBottomMbLayerId(mbLayers,mapLayer,layerClass);bottomMbLayerId&&(beneathMbLayerId=bottomMbLayerId)})}__webpack_require__.d(__webpack_exports__,"a",(function(){return isGlDrawLayer})),__webpack_require__.d(__webpack_exports__,"b",(function(){return syncLayerOrder})),function(LAYER_CLASS){LAYER_CLASS.ANY="ANY",LAYER_CLASS.LABEL="LABEL",LAYER_CLASS.NON_LABEL="NON_LABEL"}(LAYER_CLASS||(LAYER_CLASS={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var helpers_1=__webpack_require__(46),invariant_1=__webpack_require__(63);exports.default=function(origin,distance,bearing,options){void 0===options&&(options={});var coordinates1=invariant_1.getCoord(origin),longitude1=helpers_1.degreesToRadians(coordinates1[0]),latitude1=helpers_1.degreesToRadians(coordinates1[1]),bearingRad=helpers_1.degreesToRadians(bearing),radians=helpers_1.lengthToRadians(distance,options.units),latitude2=Math.asin(Math.sin(latitude1)*Math.cos(radians)+Math.cos(latitude1)*Math.sin(radians)*Math.cos(bearingRad)),longitude2=longitude1+Math.atan2(Math.sin(bearingRad)*Math.sin(radians)*Math.cos(latitude1),Math.cos(radians)-Math.sin(latitude1)*Math.sin(latitude2)),lng=helpers_1.radiansToDegrees(longitude2),lat=helpers_1.radiansToDegrees(latitude2);return helpers_1.point([lng,lat],options.properties)}},function(module,__webpack_exports__,__webpack_require__){"use strict";function isRefreshOnlyQuery(prevQuery,newQuery){return!(!prevQuery||!newQuery)&&(prevQuery.queryLastTriggeredAt!==newQuery.queryLastTriggeredAt&&prevQuery.language===newQuery.language&&prevQuery.query===newQuery.query)}__webpack_require__.d(__webpack_exports__,"a",(function(){return isRefreshOnlyQuery}))},function(module,exports,__webpack_require__){module.exports={layouts:{all:__webpack_require__(299)},svgArray:__webpack_require__(300),spritesheet:{1:__webpack_require__(301),2:__webpack_require__(302),4:__webpack_require__(303)}}},function(module,exports,__webpack_require__){(function(){"use strict";var builder,defaults,parser,processors,hasProp={}.hasOwnProperty;defaults=__webpack_require__(120),builder=__webpack_require__(304),parser=__webpack_require__(313),processors=__webpack_require__(184),exports.defaults=defaults.defaults,exports.processors=processors,exports.ValidationError=function(superClass){function ValidationError(message){this.message=message}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(ValidationError,Error),ValidationError}(),exports.Builder=builder.Builder,exports.Parser=parser.Parser,exports.parseString=parser.parseString,exports.parseStringPromise=parser.parseStringPromise}).call(this)},function(module,exports){(function(){module.exports=function(){function XMLDOMImplementation(){}return XMLDOMImplementation.prototype.hasFeature=function(feature,version){return!0},XMLDOMImplementation.prototype.createDocumentType=function(qualifiedName,publicId,systemId){throw new Error("This DOM method is not implemented.")},XMLDOMImplementation.prototype.createDocument=function(namespaceURI,qualifiedName,doctype){throw new Error("This DOM method is not implemented.")},XMLDOMImplementation.prototype.createHTMLDocument=function(title){throw new Error("This DOM method is not implemented.")},XMLDOMImplementation.prototype.getFeature=function(feature,version){throw new Error("This DOM method is not implemented.")},XMLDOMImplementation}()}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLDOMConfiguration,XMLDOMImplementation,XMLNode,XMLStringWriter,XMLStringifier,isPlainObject,hasProp={}.hasOwnProperty;isPlainObject=__webpack_require__(62).isPlainObject,XMLDOMImplementation=__webpack_require__(172),XMLDOMConfiguration=__webpack_require__(306),XMLNode=__webpack_require__(50),NodeType=__webpack_require__(39),XMLStringifier=__webpack_require__(176),XMLStringWriter=__webpack_require__(134),module.exports=function(superClass){function XMLDocument(options){XMLDocument.__super__.constructor.call(this,null),this.name="#document",this.type=NodeType.Document,this.documentURI=null,this.domConfig=new XMLDOMConfiguration,options||(options={}),options.writer||(options.writer=new XMLStringWriter),this.options=options,this.stringify=new XMLStringifier(options)}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(XMLDocument,superClass),Object.defineProperty(XMLDocument.prototype,"implementation",{value:new XMLDOMImplementation}),Object.defineProperty(XMLDocument.prototype,"doctype",{get:function(){var child,i,len,ref;for(i=0,len=(ref=this.children).length;i<len;i++)if((child=ref[i]).type===NodeType.DocType)return child;return null}}),Object.defineProperty(XMLDocument.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(XMLDocument.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(XMLDocument.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(XMLDocument.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===NodeType.Declaration?this.children[0].encoding:null}}),Object.defineProperty(XMLDocument.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===NodeType.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(XMLDocument.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===NodeType.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(XMLDocument.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(XMLDocument.prototype,"origin",{get:function(){return null}}),Object.defineProperty(XMLDocument.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(XMLDocument.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(XMLDocument.prototype,"contentType",{get:function(){return null}}),XMLDocument.prototype.end=function(writer){var writerOptions;return writerOptions={},writer?isPlainObject(writer)&&(writerOptions=writer,writer=this.options.writer):writer=this.options.writer,writer.document(this,writer.filterOptions(writerOptions))},XMLDocument.prototype.toString=function(options){return this.options.writer.document(this,this.options.writer.filterOptions(options))},XMLDocument.prototype.createElement=function(tagName){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createTextNode=function(data){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createComment=function(data){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createCDATASection=function(data){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createProcessingInstruction=function(target,data){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createAttribute=function(name){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createEntityReference=function(name){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.getElementsByTagName=function(tagname){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.importNode=function(importedNode,deep){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createElementNS=function(namespaceURI,qualifiedName){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createAttributeNS=function(namespaceURI,qualifiedName){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.getElementsByTagNameNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.getElementById=function(elementId){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.adoptNode=function(source){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.renameNode=function(node,namespaceURI,qualifiedName){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.getElementsByClassName=function(classNames){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createEvent=function(eventInterface){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createNodeIterator=function(root,whatToShow,filter){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createTreeWalker=function(root,whatToShow,filter){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument}(XMLNode)}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType;NodeType=__webpack_require__(39),__webpack_require__(50),module.exports=function(){function XMLAttribute(parent,name,value){if(this.parent=parent,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==name)throw new Error("Missing attribute name. "+this.debugInfo(name));this.name=this.stringify.name(name),this.value=this.stringify.attValue(value),this.type=NodeType.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(XMLAttribute.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(XMLAttribute.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(XMLAttribute.prototype,"textContent",{get:function(){return this.value},set:function(value){return this.value=value||""}}),Object.defineProperty(XMLAttribute.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(XMLAttribute.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(XMLAttribute.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(XMLAttribute.prototype,"specified",{get:function(){return!0}}),XMLAttribute.prototype.clone=function(){return Object.create(this)},XMLAttribute.prototype.toString=function(options){return this.options.writer.attribute(this,this.options.writer.filterOptions(options))},XMLAttribute.prototype.debugInfo=function(name){return null==(name=name||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+name+"}, parent: <"+this.parent.name+">"},XMLAttribute.prototype.isEqualNode=function(node){return node.namespaceURI===this.namespaceURI&&(node.prefix===this.prefix&&(node.localName===this.localName&&node.value===this.value))},XMLAttribute}()}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,XMLNode,hasProp={}.hasOwnProperty;XMLNode=__webpack_require__(50),NodeType=__webpack_require__(39),module.exports=function(superClass){function XMLDummy(parent){XMLDummy.__super__.constructor.call(this,parent),this.type=NodeType.Dummy}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(XMLDummy,superClass),XMLDummy.prototype.clone=function(){return Object.create(this)},XMLDummy.prototype.toString=function(options){return""},XMLDummy}(XMLNode)}).call(this)},function(module,exports){(function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},hasProp={}.hasOwnProperty;module.exports=function(){function XMLStringifier(options){var key,ref,value;for(key in this.assertLegalName=bind(this.assertLegalName,this),this.assertLegalChar=bind(this.assertLegalChar,this),options||(options={}),this.options=options,this.options.version||(this.options.version="1.0"),ref=options.stringify||{})hasProp.call(ref,key)&&(value=ref[key],this[key]=value)}return XMLStringifier.prototype.name=function(val){return this.options.noValidation?val:this.assertLegalName(""+val||"")},XMLStringifier.prototype.text=function(val){return this.options.noValidation?val:this.assertLegalChar(this.textEscape(""+val||""))},XMLStringifier.prototype.cdata=function(val){return this.options.noValidation?val:(val=(val=""+val||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(val))},XMLStringifier.prototype.comment=function(val){if(this.options.noValidation)return val;if((val=""+val||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+val);return this.assertLegalChar(val)},XMLStringifier.prototype.raw=function(val){return this.options.noValidation?val:""+val||""},XMLStringifier.prototype.attValue=function(val){return this.options.noValidation?val:this.assertLegalChar(this.attEscape(val=""+val||""))},XMLStringifier.prototype.insTarget=function(val){return this.options.noValidation?val:this.assertLegalChar(""+val||"")},XMLStringifier.prototype.insValue=function(val){if(this.options.noValidation)return val;if((val=""+val||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+val);return this.assertLegalChar(val)},XMLStringifier.prototype.xmlVersion=function(val){if(this.options.noValidation)return val;if(!(val=""+val||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+val);return val},XMLStringifier.prototype.xmlEncoding=function(val){if(this.options.noValidation)return val;if(!(val=""+val||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+val);return this.assertLegalChar(val)},XMLStringifier.prototype.xmlStandalone=function(val){return this.options.noValidation?val:val?"yes":"no"},XMLStringifier.prototype.dtdPubID=function(val){return this.options.noValidation?val:this.assertLegalChar(""+val||"")},XMLStringifier.prototype.dtdSysID=function(val){return this.options.noValidation?val:this.assertLegalChar(""+val||"")},XMLStringifier.prototype.dtdElementValue=function(val){return this.options.noValidation?val:this.assertLegalChar(""+val||"")},XMLStringifier.prototype.dtdAttType=function(val){return this.options.noValidation?val:this.assertLegalChar(""+val||"")},XMLStringifier.prototype.dtdAttDefault=function(val){return this.options.noValidation?val:this.assertLegalChar(""+val||"")},XMLStringifier.prototype.dtdEntityValue=function(val){return this.options.noValidation?val:this.assertLegalChar(""+val||"")},XMLStringifier.prototype.dtdNData=function(val){return this.options.noValidation?val:this.assertLegalChar(""+val||"")},XMLStringifier.prototype.convertAttKey="@",XMLStringifier.prototype.convertPIKey="?",XMLStringifier.prototype.convertTextKey="#text",XMLStringifier.prototype.convertCDataKey="#cdata",XMLStringifier.prototype.convertCommentKey="#comment",XMLStringifier.prototype.convertRawKey="#raw",XMLStringifier.prototype.assertLegalChar=function(str){var regex,res;if(this.options.noValidation)return str;if(regex="","1.0"===this.options.version){if(regex=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,res=str.match(regex))throw new Error("Invalid character in string: "+str+" at index "+res.index)}else if("1.1"===this.options.version&&(regex=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,res=str.match(regex)))throw new Error("Invalid character in string: "+str+" at index "+res.index);return str},XMLStringifier.prototype.assertLegalName=function(str){var regex;if(this.options.noValidation)return str;if(this.assertLegalChar(str),regex=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!str.match(regex))throw new Error("Invalid character in name");return str},XMLStringifier.prototype.textEscape=function(str){var ampregex;return this.options.noValidation?str:(ampregex=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,str.replace(ampregex,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},XMLStringifier.prototype.attEscape=function(str){var ampregex;return this.options.noValidation?str:(ampregex=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,str.replace(ampregex,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},XMLStringifier}()}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,WriterState,assign,hasProp={}.hasOwnProperty;assign=__webpack_require__(62).assign,NodeType=__webpack_require__(39),__webpack_require__(125),__webpack_require__(126),__webpack_require__(123),__webpack_require__(124),__webpack_require__(121),__webpack_require__(131),__webpack_require__(132),__webpack_require__(133),__webpack_require__(175),__webpack_require__(127),__webpack_require__(129),__webpack_require__(128),__webpack_require__(130),WriterState=__webpack_require__(102),module.exports=function(){function XMLWriterBase(options){var key,ref,value;for(key in options||(options={}),this.options=options,ref=options.writer||{})hasProp.call(ref,key)&&(value=ref[key],this["_"+key]=this[key],this[key]=value)}return XMLWriterBase.prototype.filterOptions=function(options){var filteredOptions,ref,ref1,ref2,ref3,ref4,ref5,ref6;return options||(options={}),options=assign({},this.options,options),(filteredOptions={writer:this}).pretty=options.pretty||!1,filteredOptions.allowEmpty=options.allowEmpty||!1,filteredOptions.indent=null!=(ref=options.indent)?ref:"  ",filteredOptions.newline=null!=(ref1=options.newline)?ref1:"\n",filteredOptions.offset=null!=(ref2=options.offset)?ref2:0,filteredOptions.dontPrettyTextNodes=null!=(ref3=null!=(ref4=options.dontPrettyTextNodes)?ref4:options.dontprettytextnodes)?ref3:0,filteredOptions.spaceBeforeSlash=null!=(ref5=null!=(ref6=options.spaceBeforeSlash)?ref6:options.spacebeforeslash)?ref5:"",!0===filteredOptions.spaceBeforeSlash&&(filteredOptions.spaceBeforeSlash=" "),filteredOptions.suppressPrettyCount=0,filteredOptions.user={},filteredOptions.state=WriterState.None,filteredOptions},XMLWriterBase.prototype.indent=function(node,options,level){var indentLevel;return!options.pretty||options.suppressPrettyCount?"":options.pretty&&(indentLevel=(level||0)+options.offset+1)>0?new Array(indentLevel).join(options.indent):""},XMLWriterBase.prototype.endline=function(node,options,level){return!options.pretty||options.suppressPrettyCount?"":options.newline},XMLWriterBase.prototype.attribute=function(att,options,level){var r;return this.openAttribute(att,options,level),r=" "+att.name+'="'+att.value+'"',this.closeAttribute(att,options,level),r},XMLWriterBase.prototype.cdata=function(node,options,level){var r;return this.openNode(node,options,level),options.state=WriterState.OpenTag,r=this.indent(node,options,level)+"<![CDATA[",options.state=WriterState.InsideTag,r+=node.value,options.state=WriterState.CloseTag,r+="]]>"+this.endline(node,options,level),options.state=WriterState.None,this.closeNode(node,options,level),r},XMLWriterBase.prototype.comment=function(node,options,level){var r;return this.openNode(node,options,level),options.state=WriterState.OpenTag,r=this.indent(node,options,level)+"\x3c!-- ",options.state=WriterState.InsideTag,r+=node.value,options.state=WriterState.CloseTag,r+=" --\x3e"+this.endline(node,options,level),options.state=WriterState.None,this.closeNode(node,options,level),r},XMLWriterBase.prototype.declaration=function(node,options,level){var r;return this.openNode(node,options,level),options.state=WriterState.OpenTag,r=this.indent(node,options,level)+"<?xml",options.state=WriterState.InsideTag,r+=' version="'+node.version+'"',null!=node.encoding&&(r+=' encoding="'+node.encoding+'"'),null!=node.standalone&&(r+=' standalone="'+node.standalone+'"'),options.state=WriterState.CloseTag,r+=options.spaceBeforeSlash+"?>",r+=this.endline(node,options,level),options.state=WriterState.None,this.closeNode(node,options,level),r},XMLWriterBase.prototype.docType=function(node,options,level){var child,i,len,r,ref;if(level||(level=0),this.openNode(node,options,level),options.state=WriterState.OpenTag,r=this.indent(node,options,level),r+="<!DOCTYPE "+node.root().name,node.pubID&&node.sysID?r+=' PUBLIC "'+node.pubID+'" "'+node.sysID+'"':node.sysID&&(r+=' SYSTEM "'+node.sysID+'"'),node.children.length>0){for(r+=" [",r+=this.endline(node,options,level),options.state=WriterState.InsideTag,i=0,len=(ref=node.children).length;i<len;i++)child=ref[i],r+=this.writeChildNode(child,options,level+1);options.state=WriterState.CloseTag,r+="]"}return options.state=WriterState.CloseTag,r+=options.spaceBeforeSlash+">",r+=this.endline(node,options,level),options.state=WriterState.None,this.closeNode(node,options,level),r},XMLWriterBase.prototype.element=function(node,options,level){var att,child,childNodeCount,firstChildNode,i,j,len,len1,name,prettySuppressed,r,ref,ref1,ref2;for(name in level||(level=0),prettySuppressed=!1,r="",this.openNode(node,options,level),options.state=WriterState.OpenTag,r+=this.indent(node,options,level)+"<"+node.name,ref=node.attribs)hasProp.call(ref,name)&&(att=ref[name],r+=this.attribute(att,options,level));if(firstChildNode=0===(childNodeCount=node.children.length)?null:node.children[0],0===childNodeCount||node.children.every((function(e){return(e.type===NodeType.Text||e.type===NodeType.Raw)&&""===e.value})))options.allowEmpty?(r+=">",options.state=WriterState.CloseTag,r+="</"+node.name+">"+this.endline(node,options,level)):(options.state=WriterState.CloseTag,r+=options.spaceBeforeSlash+"/>"+this.endline(node,options,level));else if(!options.pretty||1!==childNodeCount||firstChildNode.type!==NodeType.Text&&firstChildNode.type!==NodeType.Raw||null==firstChildNode.value){if(options.dontPrettyTextNodes)for(i=0,len=(ref1=node.children).length;i<len;i++)if(((child=ref1[i]).type===NodeType.Text||child.type===NodeType.Raw)&&null!=child.value){options.suppressPrettyCount++,prettySuppressed=!0;break}for(r+=">"+this.endline(node,options,level),options.state=WriterState.InsideTag,j=0,len1=(ref2=node.children).length;j<len1;j++)child=ref2[j],r+=this.writeChildNode(child,options,level+1);options.state=WriterState.CloseTag,r+=this.indent(node,options,level)+"</"+node.name+">",prettySuppressed&&options.suppressPrettyCount--,r+=this.endline(node,options,level),options.state=WriterState.None}else r+=">",options.state=WriterState.InsideTag,options.suppressPrettyCount++,prettySuppressed=!0,r+=this.writeChildNode(firstChildNode,options,level+1),options.suppressPrettyCount--,prettySuppressed=!1,options.state=WriterState.CloseTag,r+="</"+node.name+">"+this.endline(node,options,level);return this.closeNode(node,options,level),r},XMLWriterBase.prototype.writeChildNode=function(node,options,level){switch(node.type){case NodeType.CData:return this.cdata(node,options,level);case NodeType.Comment:return this.comment(node,options,level);case NodeType.Element:return this.element(node,options,level);case NodeType.Raw:return this.raw(node,options,level);case NodeType.Text:return this.text(node,options,level);case NodeType.ProcessingInstruction:return this.processingInstruction(node,options,level);case NodeType.Dummy:return"";case NodeType.Declaration:return this.declaration(node,options,level);case NodeType.DocType:return this.docType(node,options,level);case NodeType.AttributeDeclaration:return this.dtdAttList(node,options,level);case NodeType.ElementDeclaration:return this.dtdElement(node,options,level);case NodeType.EntityDeclaration:return this.dtdEntity(node,options,level);case NodeType.NotationDeclaration:return this.dtdNotation(node,options,level);default:throw new Error("Unknown XML node type: "+node.constructor.name)}},XMLWriterBase.prototype.processingInstruction=function(node,options,level){var r;return this.openNode(node,options,level),options.state=WriterState.OpenTag,r=this.indent(node,options,level)+"<?",options.state=WriterState.InsideTag,r+=node.target,node.value&&(r+=" "+node.value),options.state=WriterState.CloseTag,r+=options.spaceBeforeSlash+"?>",r+=this.endline(node,options,level),options.state=WriterState.None,this.closeNode(node,options,level),r},XMLWriterBase.prototype.raw=function(node,options,level){var r;return this.openNode(node,options,level),options.state=WriterState.OpenTag,r=this.indent(node,options,level),options.state=WriterState.InsideTag,r+=node.value,options.state=WriterState.CloseTag,r+=this.endline(node,options,level),options.state=WriterState.None,this.closeNode(node,options,level),r},XMLWriterBase.prototype.text=function(node,options,level){var r;return this.openNode(node,options,level),options.state=WriterState.OpenTag,r=this.indent(node,options,level),options.state=WriterState.InsideTag,r+=node.value,options.state=WriterState.CloseTag,r+=this.endline(node,options,level),options.state=WriterState.None,this.closeNode(node,options,level),r},XMLWriterBase.prototype.dtdAttList=function(node,options,level){var r;return this.openNode(node,options,level),options.state=WriterState.OpenTag,r=this.indent(node,options,level)+"<!ATTLIST",options.state=WriterState.InsideTag,r+=" "+node.elementName+" "+node.attributeName+" "+node.attributeType,"#DEFAULT"!==node.defaultValueType&&(r+=" "+node.defaultValueType),node.defaultValue&&(r+=' "'+node.defaultValue+'"'),options.state=WriterState.CloseTag,r+=options.spaceBeforeSlash+">"+this.endline(node,options,level),options.state=WriterState.None,this.closeNode(node,options,level),r},XMLWriterBase.prototype.dtdElement=function(node,options,level){var r;return this.openNode(node,options,level),options.state=WriterState.OpenTag,r=this.indent(node,options,level)+"<!ELEMENT",options.state=WriterState.InsideTag,r+=" "+node.name+" "+node.value,options.state=WriterState.CloseTag,r+=options.spaceBeforeSlash+">"+this.endline(node,options,level),options.state=WriterState.None,this.closeNode(node,options,level),r},XMLWriterBase.prototype.dtdEntity=function(node,options,level){var r;return this.openNode(node,options,level),options.state=WriterState.OpenTag,r=this.indent(node,options,level)+"<!ENTITY",options.state=WriterState.InsideTag,node.pe&&(r+=" %"),r+=" "+node.name,node.value?r+=' "'+node.value+'"':(node.pubID&&node.sysID?r+=' PUBLIC "'+node.pubID+'" "'+node.sysID+'"':node.sysID&&(r+=' SYSTEM "'+node.sysID+'"'),node.nData&&(r+=" NDATA "+node.nData)),options.state=WriterState.CloseTag,r+=options.spaceBeforeSlash+">"+this.endline(node,options,level),options.state=WriterState.None,this.closeNode(node,options,level),r},XMLWriterBase.prototype.dtdNotation=function(node,options,level){var r;return this.openNode(node,options,level),options.state=WriterState.OpenTag,r=this.indent(node,options,level)+"<!NOTATION",options.state=WriterState.InsideTag,r+=" "+node.name,node.pubID&&node.sysID?r+=' PUBLIC "'+node.pubID+'" "'+node.sysID+'"':node.pubID?r+=' PUBLIC "'+node.pubID+'"':node.sysID&&(r+=' SYSTEM "'+node.sysID+'"'),options.state=WriterState.CloseTag,r+=options.spaceBeforeSlash+">"+this.endline(node,options,level),options.state=WriterState.None,this.closeNode(node,options,level),r},XMLWriterBase.prototype.openNode=function(node,options,level){},XMLWriterBase.prototype.closeNode=function(node,options,level){},XMLWriterBase.prototype.openAttribute=function(att,options,level){},XMLWriterBase.prototype.closeAttribute=function(att,options,level){},XMLWriterBase}()}).call(this)},function(module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},function(module,exports,__webpack_require__){"use strict";(function(global,process){var pna=__webpack_require__(103);module.exports=Readable;var Duplex,isArray=__webpack_require__(178);Readable.ReadableState=ReadableState;__webpack_require__(78).EventEmitter;var EElistenerCount=function(emitter,type){return emitter.listeners(type).length},Stream=__webpack_require__(180),Buffer=__webpack_require__(104).Buffer,OurUint8Array=global.Uint8Array||function(){};var util=Object.create(__webpack_require__(79));util.inherits=__webpack_require__(80);var debugUtil=__webpack_require__(319),debug=void 0;debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog("stream"):function(){};var StringDecoder,BufferList=__webpack_require__(320),destroyImpl=__webpack_require__(181);util.inherits(Readable,Stream);var kProxyEvents=["error","close","destroy","pause","resume"];function ReadableState(options,stream){options=options||{};var isDuplex=stream instanceof(Duplex=Duplex||__webpack_require__(68));this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.readableObjectMode);var hwm=options.highWaterMark,readableHwm=options.readableHighWaterMark,defaultHwm=this.objectMode?16:16384;this.highWaterMark=hwm||0===hwm?hwm:isDuplex&&(readableHwm||0===readableHwm)?readableHwm:defaultHwm,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=options.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,options.encoding&&(StringDecoder||(StringDecoder=__webpack_require__(138).StringDecoder),this.decoder=new StringDecoder(options.encoding),this.encoding=options.encoding)}function Readable(options){if(Duplex=Duplex||__webpack_require__(68),!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this),this.readable=!0,options&&("function"==typeof options.read&&(this._read=options.read),"function"==typeof options.destroy&&(this._destroy=options.destroy)),Stream.call(this)}function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){var er,state=stream._readableState;null===chunk?(state.reading=!1,function(stream,state){if(state.ended)return;if(state.decoder){var chunk=state.decoder.end();chunk&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length)}state.ended=!0,emitReadable(stream)}(stream,state)):(skipChunkCheck||(er=function(state,chunk){var er;obj=chunk,Buffer.isBuffer(obj)||obj instanceof OurUint8Array||"string"==typeof chunk||void 0===chunk||state.objectMode||(er=new TypeError("Invalid non-string/buffer chunk"));var obj;return er}(state,chunk)),er?stream.emit("error",er):state.objectMode||chunk&&chunk.length>0?("string"==typeof chunk||state.objectMode||Object.getPrototypeOf(chunk)===Buffer.prototype||(chunk=function(chunk){return Buffer.from(chunk)}(chunk)),addToFront?state.endEmitted?stream.emit("error",new Error("stream.unshift() after end event")):addChunk(stream,state,chunk,!0):state.ended?stream.emit("error",new Error("stream.push() after EOF")):(state.reading=!1,state.decoder&&!encoding?(chunk=state.decoder.write(chunk),state.objectMode||0!==chunk.length?addChunk(stream,state,chunk,!1):maybeReadMore(stream,state)):addChunk(stream,state,chunk,!1))):addToFront||(state.reading=!1));return function(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||0===state.length)}(state)}function addChunk(stream,state,chunk,addToFront){state.flowing&&0===state.length&&!state.sync?(stream.emit("data",chunk),stream.read(0)):(state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):state.buffer.push(chunk),state.needReadable&&emitReadable(stream)),maybeReadMore(stream,state)}Object.defineProperty(Readable.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(value){this._readableState&&(this._readableState.destroyed=value)}}),Readable.prototype.destroy=destroyImpl.destroy,Readable.prototype._undestroy=destroyImpl.undestroy,Readable.prototype._destroy=function(err,cb){this.push(null),cb(err)},Readable.prototype.push=function(chunk,encoding){var skipChunkCheck,state=this._readableState;return state.objectMode?skipChunkCheck=!0:"string"==typeof chunk&&((encoding=encoding||state.defaultEncoding)!==state.encoding&&(chunk=Buffer.from(chunk,encoding),encoding=""),skipChunkCheck=!0),readableAddChunk(this,chunk,encoding,!1,skipChunkCheck)},Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(enc){return StringDecoder||(StringDecoder=__webpack_require__(138).StringDecoder),this._readableState.decoder=new StringDecoder(enc),this._readableState.encoding=enc,this};function howMuchToRead(n,state){return n<=0||0===state.length&&state.ended?0:state.objectMode?1:n!=n?state.flowing&&state.length?state.buffer.head.data.length:state.length:(n>state.highWaterMark&&(state.highWaterMark=function(n){return n>=8388608?n=8388608:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}(n)),n<=state.length?n:state.ended?state.length:(state.needReadable=!0,0))}function emitReadable(stream){var state=stream._readableState;state.needReadable=!1,state.emittedReadable||(debug("emitReadable",state.flowing),state.emittedReadable=!0,state.sync?pna.nextTick(emitReadable_,stream):emitReadable_(stream))}function emitReadable_(stream){debug("emit readable"),stream.emit("readable"),flow(stream)}function maybeReadMore(stream,state){state.readingMore||(state.readingMore=!0,pna.nextTick(maybeReadMore_,stream,state))}function maybeReadMore_(stream,state){for(var len=state.length;!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark&&(debug("maybeReadMore read 0"),stream.read(0),len!==state.length);)len=state.length;state.readingMore=!1}function nReadingNextTick(self){debug("readable nexttick read 0"),self.read(0)}function resume_(stream,state){state.reading||(debug("resume read 0"),stream.read(0)),state.resumeScheduled=!1,state.awaitDrain=0,stream.emit("resume"),flow(stream),state.flowing&&!state.reading&&stream.read(0)}function flow(stream){var state=stream._readableState;for(debug("flow",state.flowing);state.flowing&&null!==stream.read(););}function fromList(n,state){return 0===state.length?null:(state.objectMode?ret=state.buffer.shift():!n||n>=state.length?(ret=state.decoder?state.buffer.join(""):1===state.buffer.length?state.buffer.head.data:state.buffer.concat(state.length),state.buffer.clear()):ret=function(n,list,hasStrings){var ret;n<list.head.data.length?(ret=list.head.data.slice(0,n),list.head.data=list.head.data.slice(n)):ret=n===list.head.data.length?list.shift():hasStrings?function(n,list){var p=list.head,c=1,ret=p.data;n-=ret.length;for(;p=p.next;){var str=p.data,nb=n>str.length?str.length:n;if(nb===str.length?ret+=str:ret+=str.slice(0,n),0===(n-=nb)){nb===str.length?(++c,p.next?list.head=p.next:list.head=list.tail=null):(list.head=p,p.data=str.slice(nb));break}++c}return list.length-=c,ret}(n,list):function(n,list){var ret=Buffer.allocUnsafe(n),p=list.head,c=1;p.data.copy(ret),n-=p.data.length;for(;p=p.next;){var buf=p.data,nb=n>buf.length?buf.length:n;if(buf.copy(ret,ret.length-n,0,nb),0===(n-=nb)){nb===buf.length?(++c,p.next?list.head=p.next:list.head=list.tail=null):(list.head=p,p.data=buf.slice(nb));break}++c}return list.length-=c,ret}(n,list);return ret}(n,state.buffer,state.decoder),ret);var ret}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error('"endReadable()" called on non-empty stream');state.endEmitted||(state.ended=!0,pna.nextTick(endReadableNT,state,stream))}function endReadableNT(state,stream){state.endEmitted||0!==state.length||(state.endEmitted=!0,stream.readable=!1,stream.emit("end"))}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}Readable.prototype.read=function(n){debug("read",n),n=parseInt(n,10);var state=this._readableState,nOrig=n;if(0!==n&&(state.emittedReadable=!1),0===n&&state.needReadable&&(state.length>=state.highWaterMark||state.ended))return debug("read: emitReadable",state.length,state.ended),0===state.length&&state.ended?endReadable(this):emitReadable(this),null;if(0===(n=howMuchToRead(n,state))&&state.ended)return 0===state.length&&endReadable(this),null;var ret,doRead=state.needReadable;return debug("need readable",doRead),(0===state.length||state.length-n<state.highWaterMark)&&debug("length less than watermark",doRead=!0),state.ended||state.reading?debug("reading or ended",doRead=!1):doRead&&(debug("do read"),state.reading=!0,state.sync=!0,0===state.length&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1,state.reading||(n=howMuchToRead(nOrig,state))),null===(ret=n>0?fromList(n,state):null)?(state.needReadable=!0,n=0):state.length-=n,0===state.length&&(state.ended||(state.needReadable=!0),nOrig!==n&&state.ended&&endReadable(this)),null!==ret&&this.emit("data",ret),ret},Readable.prototype._read=function(n){this.emit("error",new Error("_read() is not implemented"))},Readable.prototype.pipe=function(dest,pipeOpts){var src=this,state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest)}state.pipesCount+=1,debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var endFn=(!pipeOpts||!1!==pipeOpts.end)&&dest!==process.stdout&&dest!==process.stderr?onend:unpipe;function onunpipe(readable,unpipeInfo){debug("onunpipe"),readable===src&&unpipeInfo&&!1===unpipeInfo.hasUnpiped&&(unpipeInfo.hasUnpiped=!0,debug("cleanup"),dest.removeListener("close",onclose),dest.removeListener("finish",onfinish),dest.removeListener("drain",ondrain),dest.removeListener("error",onerror),dest.removeListener("unpipe",onunpipe),src.removeListener("end",onend),src.removeListener("end",unpipe),src.removeListener("data",ondata),cleanedUp=!0,!state.awaitDrain||dest._writableState&&!dest._writableState.needDrain||ondrain())}function onend(){debug("onend"),dest.end()}state.endEmitted?pna.nextTick(endFn):src.once("end",endFn),dest.on("unpipe",onunpipe);var ondrain=function(src){return function(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain),state.awaitDrain&&state.awaitDrain--,0===state.awaitDrain&&EElistenerCount(src,"data")&&(state.flowing=!0,flow(src))}}(src);dest.on("drain",ondrain);var cleanedUp=!1;var increasedAwaitDrain=!1;function ondata(chunk){debug("ondata"),increasedAwaitDrain=!1,!1!==dest.write(chunk)||increasedAwaitDrain||((1===state.pipesCount&&state.pipes===dest||state.pipesCount>1&&-1!==indexOf(state.pipes,dest))&&!cleanedUp&&(debug("false write response, pause",src._readableState.awaitDrain),src._readableState.awaitDrain++,increasedAwaitDrain=!0),src.pause())}function onerror(er){debug("onerror",er),unpipe(),dest.removeListener("error",onerror),0===EElistenerCount(dest,"error")&&dest.emit("error",er)}function onclose(){dest.removeListener("finish",onfinish),unpipe()}function onfinish(){debug("onfinish"),dest.removeListener("close",onclose),unpipe()}function unpipe(){debug("unpipe"),src.unpipe(dest)}return src.on("data",ondata),function(emitter,event,fn){if("function"==typeof emitter.prependListener)return emitter.prependListener(event,fn);emitter._events&&emitter._events[event]?isArray(emitter._events[event])?emitter._events[event].unshift(fn):emitter._events[event]=[fn,emitter._events[event]]:emitter.on(event,fn)}(dest,"error",onerror),dest.once("close",onclose),dest.once("finish",onfinish),dest.emit("pipe",src),state.flowing||(debug("pipe resume"),src.resume()),dest},Readable.prototype.unpipe=function(dest){var state=this._readableState,unpipeInfo={hasUnpiped:!1};if(0===state.pipesCount)return this;if(1===state.pipesCount)return dest&&dest!==state.pipes||(dest||(dest=state.pipes),state.pipes=null,state.pipesCount=0,state.flowing=!1,dest&&dest.emit("unpipe",this,unpipeInfo)),this;if(!dest){var dests=state.pipes,len=state.pipesCount;state.pipes=null,state.pipesCount=0,state.flowing=!1;for(var i=0;i<len;i++)dests[i].emit("unpipe",this,unpipeInfo);return this}var index=indexOf(state.pipes,dest);return-1===index||(state.pipes.splice(index,1),state.pipesCount-=1,1===state.pipesCount&&(state.pipes=state.pipes[0]),dest.emit("unpipe",this,unpipeInfo)),this},Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if("data"===ev)!1!==this._readableState.flowing&&this.resume();else if("readable"===ev){var state=this._readableState;state.endEmitted||state.readableListening||(state.readableListening=state.needReadable=!0,state.emittedReadable=!1,state.reading?state.length&&emitReadable(this):pna.nextTick(nReadingNextTick,this))}return res},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var state=this._readableState;return state.flowing||(debug("resume"),state.flowing=!0,function(stream,state){state.resumeScheduled||(state.resumeScheduled=!0,pna.nextTick(resume_,stream,state))}(this,state)),this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(stream){var _this=this,state=this._readableState,paused=!1;for(var i in stream.on("end",(function(){if(debug("wrapped end"),state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&_this.push(chunk)}_this.push(null)})),stream.on("data",(function(chunk){(debug("wrapped data"),state.decoder&&(chunk=state.decoder.write(chunk)),state.objectMode&&null==chunk)||(state.objectMode||chunk&&chunk.length)&&(_this.push(chunk)||(paused=!0,stream.pause()))})),stream)void 0===this[i]&&"function"==typeof stream[i]&&(this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i));for(var n=0;n<kProxyEvents.length;n++)stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));return this._read=function(n){debug("wrapped _read",n),paused&&(paused=!1,stream.resume())},this},Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Readable._fromList=fromList}).call(this,__webpack_require__(58),__webpack_require__(64))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(78).EventEmitter},function(module,exports,__webpack_require__){"use strict";var pna=__webpack_require__(103);function emitErrorNT(self,err){self.emit("error",err)}module.exports={destroy:function(err,cb){var _this=this,readableDestroyed=this._readableState&&this._readableState.destroyed,writableDestroyed=this._writableState&&this._writableState.destroyed;return readableDestroyed||writableDestroyed?(cb?cb(err):!err||this._writableState&&this._writableState.errorEmitted||pna.nextTick(emitErrorNT,this,err),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(err||null,(function(err){!cb&&err?(pna.nextTick(emitErrorNT,_this,err),_this._writableState&&(_this._writableState.errorEmitted=!0)):cb&&cb(err)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(module,exports,__webpack_require__){(function(global){var apply=Function.prototype.apply;function Timeout(id,clearFn){this._id=id,this._clearFn=clearFn}exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(timeout){timeout&&timeout.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId),item._idleTimeout=msecs},exports.unenroll=function(item){clearTimeout(item._idleTimeoutId),item._idleTimeout=-1},exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;msecs>=0&&(item._idleTimeoutId=setTimeout((function(){item._onTimeout&&item._onTimeout()}),msecs))},__webpack_require__(322),exports.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==global&&global.setImmediate||this&&this.setImmediate,exports.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==global&&global.clearImmediate||this&&this.clearImmediate}).call(this,__webpack_require__(58))},function(module,exports,__webpack_require__){"use strict";module.exports=Transform;var Duplex=__webpack_require__(68),util=Object.create(__webpack_require__(79));function afterTransform(er,data){var ts=this._transformState;ts.transforming=!1;var cb=ts.writecb;if(!cb)return this.emit("error",new Error("write callback called multiple times"));ts.writechunk=null,ts.writecb=null,null!=data&&this.push(data),cb(er);var rs=this._readableState;rs.reading=!1,(rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,options&&("function"==typeof options.transform&&(this._transform=options.transform),"function"==typeof options.flush&&(this._flush=options.flush)),this.on("prefinish",prefinish)}function prefinish(){var _this=this;"function"==typeof this._flush?this._flush((function(er,data){done(_this,er,data)})):done(this,null,null)}function done(stream,er,data){if(er)return stream.emit("error",er);if(null!=data&&stream.push(data),stream._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(stream._transformState.transforming)throw new Error("Calling transform done when still transforming");return stream.push(null)}util.inherits=__webpack_require__(80),util.inherits(Transform,Duplex),Transform.prototype.push=function(chunk,encoding){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,chunk,encoding)},Transform.prototype._transform=function(chunk,encoding,cb){throw new Error("_transform() is not implemented")},Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;if(ts.writecb=cb,ts.writechunk=chunk,ts.writeencoding=encoding,!ts.transforming){var rs=this._readableState;(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}},Transform.prototype._read=function(n){var ts=this._transformState;null!==ts.writechunk&&ts.writecb&&!ts.transforming?(ts.transforming=!0,this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)):ts.needTransform=!0},Transform.prototype._destroy=function(err,cb){var _this2=this;Duplex.prototype._destroy.call(this,err,(function(err2){cb(err2),_this2.emit("close")}))}},function(module,exports){(function(){"use strict";var prefixMatch;prefixMatch=new RegExp(/(?!xmlns)^.*:/),exports.normalize=function(str){return str.toLowerCase()},exports.firstCharLowerCase=function(str){return str.charAt(0).toLowerCase()+str.slice(1)},exports.stripPrefix=function(str){return str.replace(prefixMatch,"")},exports.parseNumbers=function(str){return isNaN(str)||(str=str%1==0?parseInt(str,10):parseFloat(str)),str},exports.parseBooleans=function(str){return/^(?:true|false)$/i.test(str)&&(str="true"===str.toLowerCase()),str}}).call(this)},function(module,exports,__webpack_require__){"use strict";var toStr=Object.prototype.toString;module.exports=function(value){var str=toStr.call(value),isArgs="[object Arguments]"===str;return isArgs||(isArgs="[object Array]"!==str&&null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&"[object Function]"===toStr.call(value.callee)),isArgs}},function(module,exports,__webpack_require__){"use strict";if(!("function"==typeof Object.defineProperty&&"function"==typeof Object.defineProperties&&"function"==typeof Object.getPrototypeOf&&"function"==typeof Object.setPrototypeOf))throw new TypeError("util.promisify requires a true ES5 environment");var getOwnPropertyDescriptors=__webpack_require__(333);if("function"!=typeof Promise)throw new TypeError("`Promise` must be globally available for util.promisify to work.");var slice=Function.call.bind(Array.prototype.slice),concat=Function.call.bind(Array.prototype.concat),forEach=Function.call.bind(Array.prototype.forEach),hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol(""),kCustomPromisifiedSymbol=hasSymbols?Symbol("util.promisify.custom"):null,kCustomPromisifyArgsSymbol=hasSymbols?Symbol("customPromisifyArgs"):null;module.exports=function(orig){if("function"!=typeof orig){var error=new TypeError('The "original" argument must be of type function');throw error.name="TypeError [ERR_INVALID_ARG_TYPE]",error.code="ERR_INVALID_ARG_TYPE",error}if(hasSymbols&&orig[kCustomPromisifiedSymbol]){var customFunction=orig[kCustomPromisifiedSymbol];if("function"!=typeof customFunction)throw new TypeError("The [util.promisify.custom] property must be a function");return Object.defineProperty(customFunction,kCustomPromisifiedSymbol,{configurable:!0,enumerable:!1,value:customFunction,writable:!1}),customFunction}var argumentNames=orig[kCustomPromisifyArgsSymbol],promisified=function(){var args=slice(arguments),self=this;return new Promise((function(resolve,reject){orig.apply(self,concat(args,(function(err){var values=arguments.length>1?slice(arguments,1):[];if(err)reject(err);else if(void 0!==argumentNames&&values.length>1){var obj={};forEach(argumentNames,(function(name,index){obj[name]=values[index]})),resolve(obj)}else resolve(values[0])})))}))};return Object.setPrototypeOf(promisified,Object.getPrototypeOf(orig)),Object.defineProperty(promisified,kCustomPromisifiedSymbol,{configurable:!0,enumerable:!1,value:promisified,writable:!1}),Object.defineProperties(promisified,getOwnPropertyDescriptors(orig))},module.exports.custom=kCustomPromisifiedSymbol,module.exports.customPromisifyArgs=kCustomPromisifyArgsSymbol},function(module,exports,__webpack_require__){"use strict";var CreateDataProperty=__webpack_require__(334),IsCallable=__webpack_require__(192),RequireObjectCoercible=__webpack_require__(193),ToObject=__webpack_require__(354),callBound=__webpack_require__(355),$gOPD=Object.getOwnPropertyDescriptor,$getOwnNames=Object.getOwnPropertyNames,$getSymbols=Object.getOwnPropertySymbols,$concat=callBound("Array.prototype.concat"),$reduce=callBound("Array.prototype.reduce"),getAll=$getSymbols?function(obj){return $concat($getOwnNames(obj),$getSymbols(obj))}:$getOwnNames,isES5=IsCallable($gOPD)&&IsCallable($getOwnNames);module.exports=function(value){if(RequireObjectCoercible(value),!isES5)throw new TypeError("getOwnPropertyDescriptors requires Object.getOwnPropertyDescriptor");var O=ToObject(value);return $reduce(getAll(O),(function(acc,key){var descriptor=$gOPD(O,key);return void 0!==descriptor&&CreateDataProperty(acc,key,descriptor),acc}),{})}},function(module,exports,__webpack_require__){"use strict";var origSymbol="undefined"!=typeof Symbol&&Symbol,hasSymbolSham=__webpack_require__(335);module.exports=function(){return"function"==typeof origSymbol&&("function"==typeof Symbol&&("symbol"==typeof origSymbol("foo")&&("symbol"==typeof Symbol("bar")&&hasSymbolSham())))}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(48),$TypeError=GetIntrinsic("%TypeError%"),$SyntaxError=GetIntrinsic("%SyntaxError%"),has=__webpack_require__(81),predicates={"Property Descriptor":function(Type,Desc){if("Object"!==Type(Desc))return!1;var allowed={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var key in Desc)if(has(Desc,key)&&!allowed[key])return!1;var isData=has(Desc,"[[Value]]"),IsAccessor=has(Desc,"[[Get]]")||has(Desc,"[[Set]]");if(isData&&IsAccessor)throw new $TypeError("Property Descriptors may not be both accessor and data descriptors");return!0}};module.exports=function(Type,recordType,argumentName,value){var predicate=predicates[recordType];if("function"!=typeof predicate)throw new $SyntaxError("unknown record type: "+recordType);if(!predicate(Type,value))throw new $TypeError(argumentName+" must be a "+recordType)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(argument){return"string"==typeof argument||"symbol"==typeof argument}},function(module,exports,__webpack_require__){"use strict";module.exports=function(value){return!!value}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(347)},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(353)},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(187);module.exports=function(){return"function"==typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:implementation}},function(module,exports,__webpack_require__){"use strict";var util=__webpack_require__(98),implementation=__webpack_require__(186);module.exports=function(){return"function"==typeof util.promisify?util.promisify:implementation}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return parseXmlString}));var xml2js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(171);async function parseXmlString(xmlString){const parsePromise=new Promise((resolve,reject)=>{Object(xml2js__WEBPACK_IMPORTED_MODULE_0__.parseString)(xmlString,(error,result)=>{error?reject(error):resolve(result)})});return await parsePromise}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return RangedStyleLegendRow}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_elastic_eui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3);function RangedStyleLegendRow({header:header,minLabel:minLabel,maxLabel:maxLabel,propertyLabel:propertyLabel,fieldLabel:fieldLabel}){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiFlexGroup,{gutterSize:"xs",justifyContent:"spaceBetween"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiFlexItem,{grow:!1},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiToolTip,{position:"top",title:propertyLabel,content:fieldLabel},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiText,{className:"eui-textTruncate",size:"xs",style:{maxWidth:"180px"}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("small",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("strong",null,fieldLabel)))))),header,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiFlexGroup,{gutterSize:"xs",justifyContent:"spaceBetween"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiFlexItem,{grow:!0},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiText,{size:"xs"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("small",null,minLabel))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiFlexItem,{grow:!0},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiText,{textAlign:"right",size:"xs"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("small",null,maxLabel)))))}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getOrdinalSuffix}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);function getOrdinalSuffix(value){const lastDigit=value%10;return 1===lastDigit&&11!==value?_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.maps.styles.firstOrdinalSuffix",{defaultMessage:"st"}):2===lastDigit&&12!==value?_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.maps.styles.secondOrdinalSuffix",{defaultMessage:"nd"}):3===lastDigit&&13!==value?_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.maps.styles.thirdOrdinalSuffix",{defaultMessage:"rd"}):_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.maps.styles.ordinalSuffix",{defaultMessage:"th"})}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getFeatureCollectionBounds}));var _turf_bbox__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(91),_turf_bbox__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_turf_bbox__WEBPACK_IMPORTED_MODULE_0__),_common_constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0);function getFeatureCollectionBounds(featureCollection,hasJoins){if(!featureCollection)return null;const visibleFeatures=hasJoins?featureCollection.features.filter(feature=>feature.properties&&feature.properties[_common_constants__WEBPACK_IMPORTED_MODULE_1__.FEATURE_VISIBLE_PROPERTY_NAME]):featureCollection.features;if(0===visibleFeatures.length)return null;const bbox=_turf_bbox__WEBPACK_IMPORTED_MODULE_0___default()({type:"FeatureCollection",features:visibleFeatures});return{minLon:bbox[0],minLat:bbox[1],maxLon:bbox[2],maxLat:bbox[3]}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return EXCLUDE_TOO_MANY_FEATURES_BOX})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getFillFilterExpression})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getLineFilterExpression})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getPointFilterExpression})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getCentroidFilterExpression}));var _common_constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);const EXCLUDE_TOO_MANY_FEATURES_BOX=["!=",["get",_common_constants__WEBPACK_IMPORTED_MODULE_0__.KBN_TOO_MANY_FEATURES_PROPERTY],!0],EXCLUDE_CENTROID_FEATURES=["!=",["get",_common_constants__WEBPACK_IMPORTED_MODULE_0__.KBN_IS_CENTROID_FEATURE],!0],VISIBILITY_FILTER_CLAUSE=["all",["==",["get",_common_constants__WEBPACK_IMPORTED_MODULE_0__.FEATURE_VISIBLE_PROPERTY_NAME],!0]],EXCLUDE_KBN_FEATURES=["all",EXCLUDE_TOO_MANY_FEATURES_BOX,EXCLUDE_CENTROID_FEATURES],CLOSED_SHAPE_MB_FILTER=[...EXCLUDE_KBN_FEATURES,["any",["==",["geometry-type"],_common_constants__WEBPACK_IMPORTED_MODULE_0__.GEO_JSON_TYPE.POLYGON],["==",["geometry-type"],_common_constants__WEBPACK_IMPORTED_MODULE_0__.GEO_JSON_TYPE.MULTI_POLYGON]]],VISIBLE_CLOSED_SHAPE_MB_FILTER=[...VISIBILITY_FILTER_CLAUSE,CLOSED_SHAPE_MB_FILTER],ALL_SHAPE_MB_FILTER=[...EXCLUDE_KBN_FEATURES,["any",["==",["geometry-type"],_common_constants__WEBPACK_IMPORTED_MODULE_0__.GEO_JSON_TYPE.POLYGON],["==",["geometry-type"],_common_constants__WEBPACK_IMPORTED_MODULE_0__.GEO_JSON_TYPE.MULTI_POLYGON],["==",["geometry-type"],_common_constants__WEBPACK_IMPORTED_MODULE_0__.GEO_JSON_TYPE.LINE_STRING],["==",["geometry-type"],_common_constants__WEBPACK_IMPORTED_MODULE_0__.GEO_JSON_TYPE.MULTI_LINE_STRING]]],VISIBLE_ALL_SHAPE_MB_FILTER=[...VISIBILITY_FILTER_CLAUSE,ALL_SHAPE_MB_FILTER],POINT_MB_FILTER=[...EXCLUDE_KBN_FEATURES,["any",["==",["geometry-type"],_common_constants__WEBPACK_IMPORTED_MODULE_0__.GEO_JSON_TYPE.POINT],["==",["geometry-type"],_common_constants__WEBPACK_IMPORTED_MODULE_0__.GEO_JSON_TYPE.MULTI_POINT]]],VISIBLE_POINT_MB_FILTER=[...VISIBILITY_FILTER_CLAUSE,POINT_MB_FILTER],CENTROID_MB_FILTER=["all",["==",["get",_common_constants__WEBPACK_IMPORTED_MODULE_0__.KBN_IS_CENTROID_FEATURE],!0]],VISIBLE_CENTROID_MB_FILTER=[...VISIBILITY_FILTER_CLAUSE,CENTROID_MB_FILTER];function getFillFilterExpression(hasJoins){return hasJoins?VISIBLE_CLOSED_SHAPE_MB_FILTER:CLOSED_SHAPE_MB_FILTER}function getLineFilterExpression(hasJoins){return hasJoins?VISIBLE_ALL_SHAPE_MB_FILTER:ALL_SHAPE_MB_FILTER}function getPointFilterExpression(hasJoins){return hasJoins?VISIBLE_POINT_MB_FILTER:POINT_MB_FILTER}function getCentroidFilterExpression(hasJoins){return hasJoins?VISIBLE_CENTROID_MB_FILTER:CENTROID_MB_FILTER}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return BlendedVectorLayer}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_vector_layer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(41),_styles_vector_vector_style__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(51),_styles_vector_vector_style_defaults__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(47),_common_constants__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(0),_common_elasticsearch_util__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(40),_sources_es_geo_grid_source_es_geo_grid_source__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(88),_util_can_skip_fetch__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(99),_util_data_request__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(61),_sources_es_source_es_source__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(141);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function getAggType(dynamicProperty){return dynamicProperty.isOrdinal()?_common_constants__WEBPACK_IMPORTED_MODULE_4__.AGG_TYPE.AVG:_common_constants__WEBPACK_IMPORTED_MODULE_4__.AGG_TYPE.TERMS}class BlendedVectorLayer extends _vector_layer__WEBPACK_IMPORTED_MODULE_1__.a{static createDescriptor(options,mapColors){const layerDescriptor=_vector_layer__WEBPACK_IMPORTED_MODULE_1__.a.createDescriptor(options,mapColors);return layerDescriptor.type=BlendedVectorLayer.type,layerDescriptor}constructor(options){super({...options,joins:[]}),_defineProperty(this,"_isClustered",void 0),_defineProperty(this,"_clusterSource",void 0),_defineProperty(this,"_clusterStyle",void 0),_defineProperty(this,"_documentSource",void 0),_defineProperty(this,"_documentStyle",void 0),this._documentSource=this._source,this._documentStyle=this._style,this._clusterSource=function(documentSource,documentStyle){const clusterSourceDescriptor=_sources_es_geo_grid_source_es_geo_grid_source__WEBPACK_IMPORTED_MODULE_6__.a.createDescriptor({indexPatternId:documentSource.getIndexPatternId(),geoField:documentSource.getGeoFieldName(),requestType:_common_constants__WEBPACK_IMPORTED_MODULE_4__.RENDER_AS.POINT});return clusterSourceDescriptor.applyGlobalQuery=documentSource.getApplyGlobalQuery(),clusterSourceDescriptor.applyGlobalTime=documentSource.getApplyGlobalTime(),clusterSourceDescriptor.metrics=[{type:_common_constants__WEBPACK_IMPORTED_MODULE_4__.AGG_TYPE.COUNT,label:_common_constants__WEBPACK_IMPORTED_MODULE_4__.COUNT_PROP_LABEL},...documentStyle.getDynamicPropertiesArray().map(dynamicProperty=>({type:getAggType(dynamicProperty),field:dynamicProperty.getFieldName()}))],clusterSourceDescriptor.id=documentSource.getId(),new _sources_es_geo_grid_source_es_geo_grid_source__WEBPACK_IMPORTED_MODULE_6__.a(clusterSourceDescriptor,documentSource.getInspectorAdapters())}(this._documentSource,this._documentStyle);const clusterStyleDescriptor=function(documentStyle,clusterSource){const defaultDynamicProperties=Object(_styles_vector_vector_style_defaults__WEBPACK_IMPORTED_MODULE_3__.g)(),clusterStyleDescriptor={type:_common_constants__WEBPACK_IMPORTED_MODULE_4__.LAYER_STYLE_TYPE.VECTOR,properties:{[_common_constants__WEBPACK_IMPORTED_MODULE_4__.VECTOR_STYLES.LABEL_TEXT]:{type:_common_constants__WEBPACK_IMPORTED_MODULE_4__.STYLE_TYPE.DYNAMIC,options:{...defaultDynamicProperties[_common_constants__WEBPACK_IMPORTED_MODULE_4__.VECTOR_STYLES.LABEL_TEXT].options,field:{name:_common_constants__WEBPACK_IMPORTED_MODULE_4__.COUNT_PROP_NAME,origin:_common_constants__WEBPACK_IMPORTED_MODULE_4__.FIELD_ORIGIN.SOURCE}}},[_common_constants__WEBPACK_IMPORTED_MODULE_4__.VECTOR_STYLES.ICON_SIZE]:{type:_common_constants__WEBPACK_IMPORTED_MODULE_4__.STYLE_TYPE.DYNAMIC,options:{...defaultDynamicProperties[_common_constants__WEBPACK_IMPORTED_MODULE_4__.VECTOR_STYLES.ICON_SIZE].options,field:{name:_common_constants__WEBPACK_IMPORTED_MODULE_4__.COUNT_PROP_NAME,origin:_common_constants__WEBPACK_IMPORTED_MODULE_4__.FIELD_ORIGIN.SOURCE}}}},isTimeAware:!0};return documentStyle.getAllStyleProperties().forEach(styleProperty=>{const styleName=styleProperty.getStyleName();if(![_common_constants__WEBPACK_IMPORTED_MODULE_4__.VECTOR_STYLES.LABEL_TEXT,_common_constants__WEBPACK_IMPORTED_MODULE_4__.VECTOR_STYLES.ICON_SIZE].includes(styleName)||styleProperty.isDynamic()&&styleProperty.isComplete())if(styleName===_common_constants__WEBPACK_IMPORTED_MODULE_4__.VECTOR_STYLES.SYMBOLIZE_AS||styleName===_common_constants__WEBPACK_IMPORTED_MODULE_4__.VECTOR_STYLES.LABEL_BORDER_SIZE)clusterStyleDescriptor.properties[styleName]={options:{...styleProperty.getOptions()}};else if(styleProperty.isDynamic()){const options=styleProperty.getOptions(),field=options&&options.field&&options.field.name?{...options.field,name:clusterSource.getAggKey(getAggType(styleProperty),options.field.name)}:void 0;clusterStyleDescriptor.properties[styleName]={type:_common_constants__WEBPACK_IMPORTED_MODULE_4__.STYLE_TYPE.DYNAMIC,options:{...options,field:field}}}else clusterStyleDescriptor.properties[styleName]={type:_common_constants__WEBPACK_IMPORTED_MODULE_4__.STYLE_TYPE.STATIC,options:{...styleProperty.getOptions()}}}),clusterStyleDescriptor}(this._documentStyle,this._clusterSource);this._clusterStyle=new _styles_vector_vector_style__WEBPACK_IMPORTED_MODULE_2__.a(clusterStyleDescriptor,this._clusterSource,this,options.chartsPaletteServiceGetColor);let isClustered=!1;const countDataRequest=this.getDataRequest("ACTIVE_COUNT_DATA_ID");if(countDataRequest){const requestData=countDataRequest.getData();requestData&&requestData.isSyncClustered&&(isClustered=!0)}this._isClustered=isClustered}destroy(){this._documentSource&&this._documentSource.destroy(),this._clusterSource&&this._clusterSource.destroy()}async getDisplayName(source){const displayName=await super.getDisplayName(source);return this._isClustered?_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.maps.blendedVectorLayer.clusteredLayerName",{defaultMessage:"Clustered {displayName}",values:{displayName:displayName}}):displayName}showJoinEditor(){return!0}getJoinsDisabledReason(){return this._documentSource.getJoinsDisabledReason()}getJoins(){return[]}hasJoins(){return!1}async cloneDescriptor(){const clonedDescriptor=await super.cloneDescriptor(),displayName=await super.getDisplayName();return clonedDescriptor.label="Clone of "+displayName,clonedDescriptor.sourceDescriptor=this._documentSource.cloneDescriptor(),clonedDescriptor}getSource(){return this._isClustered?this._clusterSource:this._documentSource}getSourceForEditing(){return this._documentSource}getCurrentStyle(){return this._isClustered?this._clusterStyle:this._documentStyle}getStyleForEditing(){return this._documentStyle}async syncData(syncContext){const requestToken=Symbol("layer-active-count:"+this.getId()),searchFilters=this._getSearchFilters(syncContext.dataFilters,this.getSource(),this.getCurrentStyle()),source=this.getSource();let activeSource,activeStyle;if(await Object(_util_can_skip_fetch__WEBPACK_IMPORTED_MODULE_7__.b)({source:source,prevDataRequest:this.getDataRequest("ACTIVE_COUNT_DATA_ID"),nextMeta:searchFilters,extentAware:source.isFilterByMapBounds()}))this._isClustered?(activeSource=this._clusterSource,activeStyle=this._clusterStyle):(activeSource=this._documentSource,activeStyle=this._documentStyle);else{let isSyncClustered;try{syncContext.startLoading("ACTIVE_COUNT_DATA_ID",requestToken,searchFilters);const abortController=new AbortController;syncContext.registerCancelCallback(requestToken,()=>abortController.abort());const maxResultWindow=await this._documentSource.getMaxResultWindow(),searchSource=await this._documentSource.makeSearchSource(searchFilters,0);searchSource.setField("trackTotalHits",maxResultWindow+1);const resp=await searchSource.fetch({abortSignal:abortController.signal,sessionId:syncContext.dataFilters.searchSessionId,legacyHitsTotal:!1});isSyncClustered=Object(_common_elasticsearch_util__WEBPACK_IMPORTED_MODULE_5__.n)(resp.hits.total,maxResultWindow);const countData={isSyncClustered:isSyncClustered};syncContext.stopLoading("ACTIVE_COUNT_DATA_ID",requestToken,countData,searchFilters)}catch(error){return void(error instanceof _util_data_request__WEBPACK_IMPORTED_MODULE_8__.b&&Object(_sources_es_source_es_source__WEBPACK_IMPORTED_MODULE_9__.b)(error)||syncContext.onLoadError("ACTIVE_COUNT_DATA_ID",requestToken,error.message))}isSyncClustered?(activeSource=this._clusterSource,activeStyle=this._clusterStyle):(activeSource=this._documentSource,activeStyle=this._documentStyle)}super._syncData(syncContext,activeSource,activeStyle)}async getLicensedFeatures(){return[...await this._clusterSource.getLicensedFeatures(),...await this._documentSource.getLicensedFeatures()]}}_defineProperty(BlendedVectorLayer,"type",_common_constants__WEBPACK_IMPORTED_MODULE_4__.LAYER_TYPE.BLENDED_VECTOR)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getTileBoundingBox})),__webpack_require__.d(__webpack_exports__,"a",(function(){return expandToTileBoundaries}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23),lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__),_constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_elasticsearch_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(40);function getTileCount(zoom){return Math.pow(2,zoom)}function precisionRounding(v,minPrecision,binSize){let precision=Math.ceil(Math.abs(Math.log10(binSize)))+1;return precision=Math.max(precision,minPrecision),lodash__WEBPACK_IMPORTED_MODULE_0___default.a.round(v,precision)}function tileToLatitude(y,tileCount){const radians=Math.atan((x=Math.PI-2*Math.PI*y/tileCount,(Math.exp(x)-Math.exp(-x))/2));var x;return precisionRounding(180/Math.PI*radians,_constants__WEBPACK_IMPORTED_MODULE_1__.DECIMAL_DEGREES_PRECISION,180/tileCount)}function tileToLongitude(x,tileCount){return precisionRounding(x/tileCount*360-180,_constants__WEBPACK_IMPORTED_MODULE_1__.DECIMAL_DEGREES_PRECISION,360/tileCount)}function getTileBoundingBox(tileKey){const{x:x,y:y,tileCount:tileCount}=function(tileKey){const tileKeyParts=tileKey.split("/");if(3!==tileKeyParts.length)throw new Error('Invalid tile key, expecting "zoom/x/y" format but got '+tileKey);const zoom=parseInt(tileKeyParts[0],10),x=parseInt(tileKeyParts[1],10),y=parseInt(tileKeyParts[2],10),tileCount=getTileCount(zoom);if(x>=tileCount)throw new Error(`Tile key is malformed, expected x to be less than ${tileCount}, you provided ${x}`);if(y>=tileCount)throw new Error(`Tile key is malformed, expected y to be less than ${tileCount}, you provided ${y}`);return{x:x,y:y,zoom:zoom,tileCount:tileCount}}(tileKey);return{top:tileToLatitude(y,tileCount),bottom:tileToLatitude(y+1,tileCount),left:tileToLongitude(x,tileCount),right:tileToLongitude(x+1,tileCount)}}function latitudeToTile(lat,tileCount){const radians=Object(_elasticsearch_util__WEBPACK_IMPORTED_MODULE_2__.b)(lat)*Math.PI/180,y=(1-Math.log(Math.tan(radians)+(value=radians,1/Math.cos(value)))/Math.PI)/2*tileCount;var value;return Math.floor(y)}function longitudeToTile(lon,tileCount){const x=(lon+180)/360*tileCount;return Math.floor(x)}function expandToTileBoundaries(extent,zoom){const tileCount=getTileCount(zoom),upperLeftX=longitudeToTile(extent.minLon,tileCount),upperLeftY=latitudeToTile(Math.min(extent.maxLat,90),tileCount),lowerRightX=longitudeToTile(extent.maxLon,tileCount),lowerRightY=latitudeToTile(Math.max(extent.minLat,-90),tileCount);return{minLon:tileToLongitude(upperLeftX,tileCount),minLat:tileToLatitude(lowerRightY+1,tileCount),maxLon:tileToLongitude(lowerRightX+1,tileCount),maxLat:tileToLatitude(upperLeftY,tileCount)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var destination_1=__webpack_require__(168),helpers_1=__webpack_require__(46);exports.default=function(center,radius,options){void 0===options&&(options={});for(var steps=options.steps||64,properties=options.properties?options.properties:!Array.isArray(center)&&"Feature"===center.type&&center.properties?center.properties:{},coordinates=[],i=0;i<steps;i++)coordinates.push(destination_1.default(center,radius,-360*i/steps,options).geometry.coordinates);return coordinates.push(coordinates[0]),helpers_1.polygon([coordinates],properties)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ValidatedNumberInput}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_elastic_eui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),lodash__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(23),lodash__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function getErrorMessage(min,max){return _kbn_i18n__WEBPACK_IMPORTED_MODULE_2__.i18n.translate("xpack.maps.validatedNumberInput.invalidClampErrorMessage",{defaultMessage:"Must be between {min} and {max}",values:{min:min,max:max}})}function isNumberValid(value,min,max){const parsedValue=parseFloat(value.toString());if(isNaN(parsedValue))return{isValid:!1,errorMessage:getErrorMessage(min,max)};const isValid=parsedValue>=min&&parsedValue<=max;return{parsedValue:parsedValue,isValid:isValid,errorMessage:isValid?"":getErrorMessage(min,max)}}class ValidatedNumberInput extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),_defineProperty(this,"_submit",lodash__WEBPACK_IMPORTED_MODULE_3___default.a.debounce(value=>{this.props.onChange(value)},250)),_defineProperty(this,"_onChange",e=>{const value=e.target.value,{isValid:isValid,errorMessage:errorMessage,parsedValue:parsedValue}=isNumberValid(value,this.props.min,this.props.max);this.setState({value:value,errorMessage:errorMessage,isValid:isValid}),isValid&&this._submit(parsedValue)});const{isValid:_isValid,errorMessage:_errorMessage}=isNumberValid(props.initialValue,this.props.min,this.props.max);this.state={value:props.initialValue,errorMessage:_errorMessage,isValid:_isValid}}render(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiFormRow,{label:this.props.label,isInvalid:!this.state.isValid,error:this.state.errorMessage?[this.state.errorMessage]:[],display:this.props.display,helpText:this.props.helpText},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiFieldNumber,{isInvalid:!this.state.isValid,min:this.props.min,max:this.props.max,value:this.state.value,onChange:this._onChange,"aria-label":this.props.label+" number input"}))}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _es_source__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(141);__webpack_require__.d(__webpack_exports__,"a",(function(){return _es_source__WEBPACK_IMPORTED_MODULE_0__.a}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ESTooltipProperty}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23),lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__),_src_plugins_data_public__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(10);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class ESTooltipProperty{constructor(tooltipProperty,indexPattern,field){_defineProperty(this,"_tooltipProperty",void 0),_defineProperty(this,"_indexPattern",void 0),_defineProperty(this,"_field",void 0),this._tooltipProperty=tooltipProperty,this._indexPattern=indexPattern,this._field=field}getPropertyKey(){return this._tooltipProperty.getPropertyKey()}getPropertyName(){return this._tooltipProperty.getPropertyName()}getRawValue(){return this._tooltipProperty.getRawValue()}_getIndexPatternField(){return this._indexPattern.fields.getByName(this._field.getRootName())}getHtmlDisplayValue(){if(void 0===this.getRawValue())return"-";const indexPatternField=this._getIndexPatternField();if(!indexPatternField||!this._field.canValueBeFormatted()){const rawValue=this.getRawValue();return Array.isArray(rawValue)?lodash__WEBPACK_IMPORTED_MODULE_0___default.a.escape(rawValue.join()):lodash__WEBPACK_IMPORTED_MODULE_0___default.a.escape(rawValue)}const formatter=this._indexPattern.getFormatterForField(indexPatternField),htmlConverter=formatter.getConverterFor("html");return htmlConverter?htmlConverter(this.getRawValue()):formatter.convert(this.getRawValue())}isFilterable(){const indexPatternField=this._getIndexPatternField();return!!indexPatternField&&("string"===indexPatternField.type||"date"===indexPatternField.type||"ip"===indexPatternField.type||"number"===indexPatternField.type)}async getESFilters(){const indexPatternField=this._getIndexPatternField();if(!indexPatternField)return[];const value=this.getRawValue();if(null==value){const existsFilter=_src_plugins_data_public__WEBPACK_IMPORTED_MODULE_1__.esFilters.buildExistsFilter(indexPatternField,this._indexPattern);return existsFilter.meta.negate=!0,[existsFilter]}return[_src_plugins_data_public__WEBPACK_IMPORTED_MODULE_1__.esFilters.buildPhraseFilter(indexPatternField,value,this._indexPattern)]}}},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return RenderAsSelect}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_elastic_eui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_common_constants__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0);const options=[{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__.i18n.translate("xpack.maps.source.esGeoGrid.pointsDropdownOption",{defaultMessage:"clusters"}),value:_common_constants__WEBPACK_IMPORTED_MODULE_3__.RENDER_AS.POINT},{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__.i18n.translate("xpack.maps.source.esGeoGrid.gridRectangleDropdownOption",{defaultMessage:"grids"}),value:_common_constants__WEBPACK_IMPORTED_MODULE_3__.RENDER_AS.GRID}];function RenderAsSelect(props){if(props.renderAs===_common_constants__WEBPACK_IMPORTED_MODULE_3__.RENDER_AS.HEATMAP)return null;const selectedOptions=[],selectedOption=options.find(option=>option.value===props.renderAs);return selectedOption&&selectedOptions.push(selectedOption),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiFormRow,{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__.i18n.translate("xpack.maps.source.esGeoGrid.showAsLabel",{defaultMessage:"Show as"}),display:props.isColumnCompressed?"columnCompressed":"row"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiComboBox,{singleSelection:{asPlainText:!0},options:options,selectedOptions:selectedOptions,onChange:function(selectedOptions){selectedOptions&&selectedOptions.length&&props.onChange(selectedOptions[0].value)},isClearable:!1,compressed:!0}))}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return InlineField}));var _field__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(85);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class InlineField extends _field__WEBPACK_IMPORTED_MODULE_0__.a{constructor({fieldName:fieldName,source:source,origin:origin,dataType:dataType}){super({fieldName:fieldName,origin:origin}),_defineProperty(this,"_source",void 0),_defineProperty(this,"_dataType",void 0),this._source=source,this._dataType=dataType}getSource(){return this._source}async getLabel(){return this.getName()}async getDataType(){return this._dataType}}},function(module,exports){module.exports=function(gj){if(!gj||!gj.type)return null;var type=types[gj.type];if(!type)return null;if("geometry"===type)return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:gj}]};if("feature"===type)return{type:"FeatureCollection",features:[gj]};if("featurecollection"===type)return gj};var types={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},function(module,exports,__webpack_require__){(function(process){function normalizeArray(parts,allowAboveRoot){for(var up=0,i=parts.length-1;i>=0;i--){var last=parts[i];"."===last?parts.splice(i,1):".."===last?(parts.splice(i,1),up++):up&&(parts.splice(i,1),up--)}if(allowAboveRoot)for(;up--;up)parts.unshift("..");return parts}function filter(xs,f){if(xs.filter)return xs.filter(f);for(var res=[],i=0;i<xs.length;i++)f(xs[i],i,xs)&&res.push(xs[i]);return res}exports.resolve=function(){for(var resolvedPath="",resolvedAbsolute=!1,i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:process.cwd();if("string"!=typeof path)throw new TypeError("Arguments to path.resolve must be strings");path&&(resolvedPath=path+"/"+resolvedPath,resolvedAbsolute="/"===path.charAt(0))}return(resolvedAbsolute?"/":"")+(resolvedPath=normalizeArray(filter(resolvedPath.split("/"),(function(p){return!!p})),!resolvedAbsolute).join("/"))||"."},exports.normalize=function(path){var isAbsolute=exports.isAbsolute(path),trailingSlash="/"===substr(path,-1);return(path=normalizeArray(filter(path.split("/"),(function(p){return!!p})),!isAbsolute).join("/"))||isAbsolute||(path="."),path&&trailingSlash&&(path+="/"),(isAbsolute?"/":"")+path},exports.isAbsolute=function(path){return"/"===path.charAt(0)},exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(paths,(function(p,index){if("string"!=typeof p)throw new TypeError("Arguments to path.join must be strings");return p})).join("/"))},exports.relative=function(from,to){function trim(arr){for(var start=0;start<arr.length&&""===arr[start];start++);for(var end=arr.length-1;end>=0&&""===arr[end];end--);return start>end?[]:arr.slice(start,end-start+1)}from=exports.resolve(from).substr(1),to=exports.resolve(to).substr(1);for(var fromParts=trim(from.split("/")),toParts=trim(to.split("/")),length=Math.min(fromParts.length,toParts.length),samePartsLength=length,i=0;i<length;i++)if(fromParts[i]!==toParts[i]){samePartsLength=i;break}var outputParts=[];for(i=samePartsLength;i<fromParts.length;i++)outputParts.push("..");return(outputParts=outputParts.concat(toParts.slice(samePartsLength))).join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(path){if("string"!=typeof path&&(path+=""),0===path.length)return".";for(var code=path.charCodeAt(0),hasRoot=47===code,end=-1,matchedSlash=!0,i=path.length-1;i>=1;--i)if(47===(code=path.charCodeAt(i))){if(!matchedSlash){end=i;break}}else matchedSlash=!1;return-1===end?hasRoot?"/":".":hasRoot&&1===end?"/":path.slice(0,end)},exports.basename=function(path,ext){var f=function(path){"string"!=typeof path&&(path+="");var i,start=0,end=-1,matchedSlash=!0;for(i=path.length-1;i>=0;--i)if(47===path.charCodeAt(i)){if(!matchedSlash){start=i+1;break}}else-1===end&&(matchedSlash=!1,end=i+1);return-1===end?"":path.slice(start,end)}(path);return ext&&f.substr(-1*ext.length)===ext&&(f=f.substr(0,f.length-ext.length)),f},exports.extname=function(path){"string"!=typeof path&&(path+="");for(var startDot=-1,startPart=0,end=-1,matchedSlash=!0,preDotState=0,i=path.length-1;i>=0;--i){var code=path.charCodeAt(i);if(47!==code)-1===end&&(matchedSlash=!1,end=i+1),46===code?-1===startDot?startDot=i:1!==preDotState&&(preDotState=1):-1!==startDot&&(preDotState=-1);else if(!matchedSlash){startPart=i+1;break}}return-1===startDot||-1===end||0===preDotState||1===preDotState&&startDot===end-1&&startDot===startPart+1?"":path.slice(startDot,end)};var substr="b"==="ab".substr(-1)?function(str,start,len){return str.substr(start,len)}:function(str,start,len){return start<0&&(start=str.length+start),str.substr(start,len)}}).call(this,__webpack_require__(64))},function(module,exports,__webpack_require__){module.exports=minimatch,minimatch.Minimatch=Minimatch;var path={sep:"/"};try{path=__webpack_require__(211)}catch(er){}var GLOBSTAR=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={},expand=__webpack_require__(391),plTypes={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},reSpecials="().*{}+?[]^$\\!".split("").reduce((function(set,c){return set[c]=!0,set}),{});var slashSplit=/\/+/;function ext(a,b){a=a||{},b=b||{};var t={};return Object.keys(b).forEach((function(k){t[k]=b[k]})),Object.keys(a).forEach((function(k){t[k]=a[k]})),t}function minimatch(p,pattern,options){if("string"!=typeof pattern)throw new TypeError("glob pattern string required");return options||(options={}),!(!options.nocomment&&"#"===pattern.charAt(0))&&(""===pattern.trim()?""===p:new Minimatch(pattern,options).match(p))}function Minimatch(pattern,options){if(!(this instanceof Minimatch))return new Minimatch(pattern,options);if("string"!=typeof pattern)throw new TypeError("glob pattern string required");options||(options={}),pattern=pattern.trim(),"/"!==path.sep&&(pattern=pattern.split(path.sep).join("/")),this.options=options,this.set=[],this.pattern=pattern,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function braceExpand(pattern,options){if(options||(options=this instanceof Minimatch?this.options:{}),void 0===(pattern=void 0===pattern?this.pattern:pattern))throw new TypeError("undefined pattern");return options.nobrace||!pattern.match(/\{.*\}/)?[pattern]:expand(pattern)}minimatch.filter=function(pattern,options){return options=options||{},function(p,i,list){return minimatch(p,pattern,options)}},minimatch.defaults=function(def){if(!def||!Object.keys(def).length)return minimatch;var orig=minimatch,m=function(p,pattern,options){return orig.minimatch(p,pattern,ext(def,options))};return m.Minimatch=function(pattern,options){return new orig.Minimatch(pattern,ext(def,options))},m},Minimatch.defaults=function(def){return def&&Object.keys(def).length?minimatch.defaults(def).Minimatch:Minimatch},Minimatch.prototype.debug=function(){},Minimatch.prototype.make=function(){if(this._made)return;var pattern=this.pattern,options=this.options;if(!options.nocomment&&"#"===pattern.charAt(0))return void(this.comment=!0);if(!pattern)return void(this.empty=!0);this.parseNegate();var set=this.globSet=this.braceExpand();options.debug&&(this.debug=console.error);this.debug(this.pattern,set),set=this.globParts=set.map((function(s){return s.split(slashSplit)})),this.debug(this.pattern,set),set=set.map((function(s,si,set){return s.map(this.parse,this)}),this),this.debug(this.pattern,set),set=set.filter((function(s){return-1===s.indexOf(!1)})),this.debug(this.pattern,set),this.set=set},Minimatch.prototype.parseNegate=function(){var pattern=this.pattern,negate=!1,options=this.options,negateOffset=0;if(options.nonegate)return;for(var i=0,l=pattern.length;i<l&&"!"===pattern.charAt(i);i++)negate=!negate,negateOffset++;negateOffset&&(this.pattern=pattern.substr(negateOffset));this.negate=negate},minimatch.braceExpand=function(pattern,options){return braceExpand(pattern,options)},Minimatch.prototype.braceExpand=braceExpand,Minimatch.prototype.parse=function(pattern,isSub){if(pattern.length>65536)throw new TypeError("pattern is too long");var options=this.options;if(!options.noglobstar&&"**"===pattern)return GLOBSTAR;if(""===pattern)return"";var stateChar,re="",hasMagic=!!options.nocase,escaping=!1,patternListStack=[],negativeLists=[],inClass=!1,reClassStart=-1,classStart=-1,patternStart="."===pattern.charAt(0)?"":options.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",self=this;function clearStateChar(){if(stateChar){switch(stateChar){case"*":re+="[^/]*?",hasMagic=!0;break;case"?":re+="[^/]",hasMagic=!0;break;default:re+="\\"+stateChar}self.debug("clearStateChar %j %j",stateChar,re),stateChar=!1}}for(var c,i=0,len=pattern.length;i<len&&(c=pattern.charAt(i));i++)if(this.debug("%s\t%s %s %j",pattern,i,re,c),escaping&&reSpecials[c])re+="\\"+c,escaping=!1;else switch(c){case"/":return!1;case"\\":clearStateChar(),escaping=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",pattern,i,re,c),inClass){this.debug("  in class"),"!"===c&&i===classStart+1&&(c="^"),re+=c;continue}self.debug("call clearStateChar %j",stateChar),clearStateChar(),stateChar=c,options.noext&&clearStateChar();continue;case"(":if(inClass){re+="(";continue}if(!stateChar){re+="\\(";continue}patternListStack.push({type:stateChar,start:i-1,reStart:re.length,open:plTypes[stateChar].open,close:plTypes[stateChar].close}),re+="!"===stateChar?"(?:(?!(?:":"(?:",this.debug("plType %j %j",stateChar,re),stateChar=!1;continue;case")":if(inClass||!patternListStack.length){re+="\\)";continue}clearStateChar(),hasMagic=!0;var pl=patternListStack.pop();re+=pl.close,"!"===pl.type&&negativeLists.push(pl),pl.reEnd=re.length;continue;case"|":if(inClass||!patternListStack.length||escaping){re+="\\|",escaping=!1;continue}clearStateChar(),re+="|";continue;case"[":if(clearStateChar(),inClass){re+="\\"+c;continue}inClass=!0,classStart=i,reClassStart=re.length,re+=c;continue;case"]":if(i===classStart+1||!inClass){re+="\\"+c,escaping=!1;continue}if(inClass){var cs=pattern.substring(classStart+1,i);try{RegExp("["+cs+"]")}catch(er){var sp=this.parse(cs,SUBPARSE);re=re.substr(0,reClassStart)+"\\["+sp[0]+"\\]",hasMagic=hasMagic||sp[1],inClass=!1;continue}}hasMagic=!0,inClass=!1,re+=c;continue;default:clearStateChar(),escaping?escaping=!1:!reSpecials[c]||"^"===c&&inClass||(re+="\\"),re+=c}inClass&&(cs=pattern.substr(classStart+1),sp=this.parse(cs,SUBPARSE),re=re.substr(0,reClassStart)+"\\["+sp[0],hasMagic=hasMagic||sp[1]);for(pl=patternListStack.pop();pl;pl=patternListStack.pop()){var tail=re.slice(pl.reStart+pl.open.length);this.debug("setting tail",re,pl),tail=tail.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(_,$1,$2){return $2||($2="\\"),$1+$1+$2+"|"})),this.debug("tail=%j\n   %s",tail,tail,pl,re);var t="*"===pl.type?"[^/]*?":"?"===pl.type?"[^/]":"\\"+pl.type;hasMagic=!0,re=re.slice(0,pl.reStart)+t+"\\("+tail}clearStateChar(),escaping&&(re+="\\\\");var addPatternStart=!1;switch(re.charAt(0)){case".":case"[":case"(":addPatternStart=!0}for(var n=negativeLists.length-1;n>-1;n--){var nl=negativeLists[n],nlBefore=re.slice(0,nl.reStart),nlFirst=re.slice(nl.reStart,nl.reEnd-8),nlLast=re.slice(nl.reEnd-8,nl.reEnd),nlAfter=re.slice(nl.reEnd);nlLast+=nlAfter;var openParensBefore=nlBefore.split("(").length-1,cleanAfter=nlAfter;for(i=0;i<openParensBefore;i++)cleanAfter=cleanAfter.replace(/\)[+*?]?/,"");var dollar="";""===(nlAfter=cleanAfter)&&isSub!==SUBPARSE&&(dollar="$"),re=nlBefore+nlFirst+nlAfter+dollar+nlLast}""!==re&&hasMagic&&(re="(?=.)"+re);addPatternStart&&(re=patternStart+re);if(isSub===SUBPARSE)return[re,hasMagic];if(!hasMagic)return function(s){return s.replace(/\\(.)/g,"$1")}(pattern);var flags=options.nocase?"i":"";try{var regExp=new RegExp("^"+re+"$",flags)}catch(er){return new RegExp("$.")}return regExp._glob=pattern,regExp._src=re,regExp};var SUBPARSE={};minimatch.makeRe=function(pattern,options){return new Minimatch(pattern,options||{}).makeRe()},Minimatch.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var set=this.set;if(!set.length)return this.regexp=!1,this.regexp;var options=this.options,twoStar=options.noglobstar?"[^/]*?":options.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",flags=options.nocase?"i":"",re=set.map((function(pattern){return pattern.map((function(p){return p===GLOBSTAR?twoStar:"string"==typeof p?function(s){return s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(p):p._src})).join("\\/")})).join("|");re="^(?:"+re+")$",this.negate&&(re="^(?!"+re+").*$");try{this.regexp=new RegExp(re,flags)}catch(ex){this.regexp=!1}return this.regexp},minimatch.match=function(list,pattern,options){var mm=new Minimatch(pattern,options=options||{});return list=list.filter((function(f){return mm.match(f)})),mm.options.nonull&&!list.length&&list.push(pattern),list},Minimatch.prototype.match=function(f,partial){if(this.debug("match",f,this.pattern),this.comment)return!1;if(this.empty)return""===f;if("/"===f&&partial)return!0;var options=this.options;"/"!==path.sep&&(f=f.split(path.sep).join("/"));f=f.split(slashSplit),this.debug(this.pattern,"split",f);var filename,i,set=this.set;for(this.debug(this.pattern,"set",set),i=f.length-1;i>=0&&!(filename=f[i]);i--);for(i=0;i<set.length;i++){var pattern=set[i],file=f;if(options.matchBase&&1===pattern.length&&(file=[filename]),this.matchOne(file,pattern,partial))return!!options.flipNegate||!this.negate}return!options.flipNegate&&this.negate},Minimatch.prototype.matchOne=function(file,pattern,partial){var options=this.options;this.debug("matchOne",{this:this,file:file,pattern:pattern}),this.debug("matchOne",file.length,pattern.length);for(var fi=0,pi=0,fl=file.length,pl=pattern.length;fi<fl&&pi<pl;fi++,pi++){this.debug("matchOne loop");var hit,p=pattern[pi],f=file[fi];if(this.debug(pattern,p,f),!1===p)return!1;if(p===GLOBSTAR){this.debug("GLOBSTAR",[pattern,p,f]);var fr=fi,pr=pi+1;if(pr===pl){for(this.debug("** at the end");fi<fl;fi++)if("."===file[fi]||".."===file[fi]||!options.dot&&"."===file[fi].charAt(0))return!1;return!0}for(;fr<fl;){var swallowee=file[fr];if(this.debug("\nglobstar while",file,fr,pattern,pr,swallowee),this.matchOne(file.slice(fr),pattern.slice(pr),partial))return this.debug("globstar found match!",fr,fl,swallowee),!0;if("."===swallowee||".."===swallowee||!options.dot&&"."===swallowee.charAt(0)){this.debug("dot detected!",file,fr,pattern,pr);break}this.debug("globstar swallow a segment, and continue"),fr++}return!(!partial||(this.debug("\n>>> no match, partial?",file,fr,pattern,pr),fr!==fl))}if("string"==typeof p?(hit=options.nocase?f.toLowerCase()===p.toLowerCase():f===p,this.debug("string match",p,f,hit)):(hit=f.match(p),this.debug("pattern match",p,f,hit)),!hit)return!1}if(fi===fl&&pi===pl)return!0;if(fi===fl)return partial;if(pi===pl)return fi===fl-1&&""===file[fi];throw new Error("wtf?")}},function(module,exports,__webpack_require__){var api=__webpack_require__(59),content=__webpack_require__(394);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports){},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return removeOrphanedSourcesAndLayers})),__webpack_require__.d(__webpack_exports__,"b",(function(){return loadSpriteSheetImageData})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addSpriteSheetToMapFromImageData}));var assert=__webpack_require__(283),assert_default=__webpack_require__.n(assert);function createImage(image,{width:width,height:height},channels,data){if(data){if(data instanceof Uint8ClampedArray)data=new Uint8Array(data.buffer);else if(data.length!==width*height*channels)throw new RangeError("mismatched image size")}else data=new Uint8Array(width*height*channels);return image.width=width,image.height=height,image.data=data,image}function resizeImage(image,{width:width,height:height},channels){if(width===image.width&&height===image.height)return;const newImage=createImage({},{width:width,height:height},channels);copyImage(image,newImage,{x:0,y:0},{x:0,y:0},{width:Math.min(image.width,width),height:Math.min(image.height,height)},channels),image.width=width,image.height=height,image.data=newImage.data}function copyImage(srcImg,dstImg,srcPt,dstPt,size,channels){if(0===size.width||0===size.height)return dstImg;if(size.width>srcImg.width||size.height>srcImg.height||srcPt.x>srcImg.width-size.width||srcPt.y>srcImg.height-size.height)throw new RangeError("out of range source coordinates for image copy");if(size.width>dstImg.width||size.height>dstImg.height||dstPt.x>dstImg.width-size.width||dstPt.y>dstImg.height-size.height)throw new RangeError("out of range destination coordinates for image copy");const srcData=srcImg.data,dstData=dstImg.data;assert_default()(srcData!==dstData);for(let y=0;y<size.height;y++){const srcOffset=((srcPt.y+y)*srcImg.width+srcPt.x)*channels,dstOffset=((dstPt.y+y)*dstImg.width+dstPt.x)*channels;for(let i=0;i<size.width*channels;i++)dstData[dstOffset+i]=srcData[srcOffset+i]}return dstImg}class RGBAImage{constructor(size,data){createImage(this,size,4,data)}resize(size){resizeImage(this,size,4)}replace(data,copy){copy?this.data.set(data):data instanceof Uint8ClampedArray?this.data=new Uint8Array(data.buffer):this.data=data}clone(){return new RGBAImage({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(srcImg,dstImg,srcPt,dstPt,size){copyImage(srcImg,dstImg,srcPt,dstPt,size,4)}}var sort_layers=__webpack_require__(167);function removeOrphanedSourcesAndLayers(mbMap,layerList,spatialFilterLayer){const mbStyle=mbMap.getStyle(),mbLayerIdsToRemove=[];mbStyle.layers.forEach(mbLayer=>{if(spatialFilterLayer.ownsMbLayerId(mbLayer.id))return;if(Object(sort_layers.a)(mbLayer.id))return;layerList.find(layer=>layer.ownsMbLayerId(mbLayer.id))||mbLayerIdsToRemove.push(mbLayer.id)}),mbLayerIdsToRemove.forEach(mbLayerId=>mbMap.removeLayer(mbLayerId));const mbSourcesToRemove=[];for(const mbSourceId in mbStyle.sources)if(mbStyle.sources.hasOwnProperty(mbSourceId)){if(spatialFilterLayer.ownsMbSourceId(mbSourceId))return;layerList.find(layer=>layer.ownsMbSourceId(mbSourceId))||mbSourcesToRemove.push(mbSourceId)}mbSourcesToRemove.forEach(mbSourceId=>mbMap.removeSource(mbSourceId))}async function loadSpriteSheetImageData(imgUrl){return new Promise((resolve,reject)=>{const image=new Image;(function(url){const a=window.document.createElement("a");return a.href=url,a.protocol!==window.document.location.protocol||a.host!==window.document.location.host||a.port!==window.document.location.port})(imgUrl)&&(image.crossOrigin="Anonymous"),image.onload=el=>{const imgData=function(img){const canvas=window.document.createElement("canvas"),context=canvas.getContext("2d");if(!context)throw new Error("failed to create canvas 2d context");return canvas.width=img.width,canvas.height=img.height,context.drawImage(img,0,0,img.width,img.height),context.getImageData(0,0,img.width,img.height)}(el.currentTarget);resolve(imgData)},image.onerror=e=>{reject(e)},image.src=imgUrl})}function addSpriteSheetToMapFromImageData(json,imgData,mbMap){for(const imageId in json){if(!json.hasOwnProperty(imageId)||mbMap.hasImage(imageId))continue;const{width:width,height:height,x:x,y:y,sdf:sdf,pixelRatio:pixelRatio}=json[imageId];if("number"!=typeof width||"number"!=typeof height)continue;const data=new RGBAImage({width:width,height:height});RGBAImage.copy(imgData,data,{x:x,y:y},{x:0,y:0},{width:width,height:height}),mbMap.addImage(imageId,data,{pixelRatio:pixelRatio,sdf:sdf})}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return geojson_file_source_GeoJsonFileSource}));var vector_source=__webpack_require__(89),constants=__webpack_require__(0),source_registry=__webpack_require__(45),get_feature_collection_bounds=__webpack_require__(199),inline_field=__webpack_require__(209);class geojson_file_source_GeoJsonFileSource extends vector_source.a{static createDescriptor(descriptor){return{type:constants.SOURCE_TYPES.GEOJSON_FILE,__featureCollection:(geoJson=descriptor.__featureCollection,geoJson?"FeatureCollection"===geoJson.type?geoJson:"Feature"===geoJson.type?{type:"FeatureCollection",features:[geoJson]}:constants.EMPTY_FEATURE_COLLECTION:constants.EMPTY_FEATURE_COLLECTION),__fields:descriptor.__fields||[],areResultsTrimmed:void 0!==descriptor.areResultsTrimmed&&descriptor.areResultsTrimmed,tooltipContent:descriptor.tooltipContent?descriptor.tooltipContent:null,name:descriptor.name||"Features"};var geoJson}constructor(descriptor,inspectorAdapters){super(geojson_file_source_GeoJsonFileSource.createDescriptor(descriptor),inspectorAdapters)}_getFields(){const fields=this._descriptor.__fields;return fields||[]}createField({fieldName:fieldName}){const descriptor=this._getFields().find(field=>field.name===fieldName);if(!descriptor)throw new Error(`Cannot find corresponding field ${fieldName} in __fields array ${JSON.stringify(this._getFields())} `);return new inline_field.a({fieldName:descriptor.name,source:this,origin:constants.FIELD_ORIGIN.SOURCE,dataType:descriptor.type})}async getFields(){return this._getFields().map(field=>new inline_field.a({fieldName:field.name,source:this,origin:constants.FIELD_ORIGIN.SOURCE,dataType:field.type}))}isBoundsAware(){return!0}async getBoundsForFilters(boundsFilters,registerCancelCallback){const featureCollection=this._descriptor.__featureCollection;return Object(get_feature_collection_bounds.a)(featureCollection,!1)}async getGeoJsonWithMeta(){return{data:this._descriptor.__featureCollection,meta:{}}}async getDisplayName(){return this._descriptor.name}canFormatFeatureProperties(){return!0}getSourceTooltipContent(){return{tooltipContent:this._descriptor.tooltipContent,areResultsTrimmed:this._descriptor.areResultsTrimmed}}}Object(source_registry.b)({ConstructorFunction:geojson_file_source_GeoJsonFileSource,type:constants.SOURCE_TYPES.GEOJSON_FILE})},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(219);case"v7light":return __webpack_require__(221);case"v8dark":return __webpack_require__(223);case"v8light":return __webpack_require__(225)}},function(module,exports,__webpack_require__){var api=__webpack_require__(59),content=__webpack_require__(220);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(60)(!1)).push([module.i,"#maps-plugin{height:calc(100vh - 98px);display:flex;flex-direction:column;width:100%;overflow:hidden}.kbnBody--chromeHidden #maps-plugin{height:calc(100vh - 0px)}.kbnBody--hasHeaderBanner #maps-plugin{height:calc(100vh - 130px)}.kbnBody--chromeHidden.kbnBody--hasHeaderBanner #maps-plugin{height:calc(100vh - 32px)}#react-maps-root{flex-grow:1;display:flex;flex-direction:column}.euiColorPicker__emptySwatch{position:relative}.mapContainer{flex-grow:1}.mapContainer .mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin-left:12px;margin-top:12px}.mapContainer .mapboxgl-ctrl-group:not(:empty){box-shadow:0 40px 64px 0 rgba(0,0,0,0.1),0 24px 32px 0 rgba(0,0,0,0.1),0 16px 16px 0 rgba(0,0,0,0.1),0 8px 8px 0 rgba(0,0,0,0.1),0 4px 4px 0 rgba(0,0,0,0.1),0 2px 2px 0 rgba(0,0,0,0.1);border-radius:4px;overflow:hidden;background-color:#1D1E24;transition:transform 250ms ease-in-out}.mapContainer .mapboxgl-ctrl-group:not(:empty):hover{transform:translateY(-1px)}.mapContainer .mapboxgl-ctrl-group:not(:empty)>button{width:32px;height:32px}.mapContainer .mapboxgl-ctrl-group:not(:empty)>button+button{border:none}.mapContainer .mapboxgl-ctrl button:not(:disabled){transition:background 250ms ease-in-out}.mapContainer .mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(152,162,179,0.1)}.mapContainer .mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:none}.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-repeat:no-repeat !important;background-image:url(\"data:image/svg+xml,%0A%3Csvg width='15px' height='15px' viewBox='0 0 15 15' version='1.1' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='rgb%28223, 229, 239%29' d='M8,7 L8,3.5 C8,3.22385763 7.77614237,3 7.5,3 C7.22385763,3 7,3.22385763 7,3.5 L7,7 L3.5,7 C3.22385763,7 3,7.22385763 3,7.5 C3,7.77614237 3.22385763,8 3.5,8 L7,8 L7,11.5 C7,11.7761424 7.22385763,12 7.5,12 C7.77614237,12 8,11.7761424 8,11.5 L8,8 L11.5,8 C11.7761424,8 12,7.77614237 12,7.5 C12,7.22385763 11.7761424,7 11.5,7 L8,7 Z M7.5,15 C3.35786438,15 0,11.6421356 0,7.5 C0,3.35786438 3.35786438,0 7.5,0 C11.6421356,0 15,3.35786438 15,7.5 C15,11.6421356 11.6421356,15 7.5,15 Z' /%3E%3C/svg%3E\") !important;background-position:center !important}.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-repeat:no-repeat !important;background-image:url(\"data:image/svg+xml,%0A%3Csvg width='15px' height='15px' viewBox='0 0 15 15' version='1.1' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='rgb%28223, 229, 239%29' d='M7.5,0 C11.6355882,0 15,3.36441176 15,7.5 C15,11.6355882 11.6355882,15 7.5,15 C3.36441176,15 0,11.6355882 0,7.5 C0,3.36441176 3.36441176,0 7.5,0 Z M3.5,7 C3.22385763,7 3,7.22385763 3,7.5 C3,7.77614237 3.22385763,8 3.5,8 L11.5,8 C11.7761424,8 12,7.77614237 12,7.5 C12,7.22385763 11.7761424,7 11.5,7 L3.5,7 Z' /%3E%3C/svg%3E\") !important;background-position:center !important}.mapMapWrapper{position:relative}.mapMapLayerPanel{background-color:#141519;width:0;overflow:hidden}.mapMapLayerPanel>*{width:480px}.mapMapLayerPanel-isVisible{width:480px;transition:width 250ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.mapLayerPanel__header,.mapLayerPanel__footer{padding:16px}.mapLayerPanel__body{scrollbar-width:thin;padding-bottom:0;flex-grow:1;flex-basis:1px;overflow-y:auto}.mapLayerPanel__body::-webkit-scrollbar{width:16px;height:16px}.mapLayerPanel__body::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.mapLayerPanel__body::-webkit-scrollbar-corner,.mapLayerPanel__body::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.mapLayerPanel__body .mapLayerPanel__bodyOverflow{padding:16px}.mapLayerPanel__body .mapLayerPanel__bodyOverflow>*:last-child{margin-bottom:16px}.mapLayerPanel__sourceDetails{margin-left:32px}.mapLayerPanel__sourceDetail{margin-bottom:0 !important}.mapLayerPanel__footer{border-top:1px solid #343741}.mapFilterEditor{width:calc(95vw - 440px);overflow-y:visible}.mapJoinItem{position:relative;background:#343741;border-radius:4px;padding:8px 4px}.mapJoinItem .mapJoinItem__inner{scrollbar-width:thin;overflow-x:auto}.mapJoinItem .mapJoinItem__inner::-webkit-scrollbar{width:16px;height:16px}.mapJoinItem .mapJoinItem__inner::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.mapJoinItem .mapJoinItem__inner::-webkit-scrollbar-corner,.mapJoinItem .mapJoinItem__inner::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.mapJoinItem:hover .mapJoinItem__delete,.mapJoinItem:focus .mapJoinItem__delete{visibility:visible;opacity:1}.mapJoinItem__delete{box-shadow:0 2px 2px -1px rgba(0,0,0,0.3),0 1px 5px -2px rgba(0,0,0,0.3);position:absolute;right:0;top:50%;margin-right:-8px;margin-top:-12px;background:#1D1E24;padding:4px;visibility:hidden;opacity:0}.mapJoinExpressionHelpText{padding-top:0;padding-bottom:8px}.mapStyleSettings__fixedBox{width:120px}.mapWidgetOverlay{position:absolute;z-index:1000;top:12px;right:12px;bottom:12px;left:0;pointer-events:none}.mapWidgetOverlay__layerWrapper{align-items:flex-end;width:320px;min-height:0}.mapWidgetControl__headerFlexItem{flex-shrink:0}.mapWidgetControl{max-height:100%;width:100%;overflow:hidden;padding-bottom:8px;border-color:transparent !important;flex-direction:column;display:flex;pointer-events:all}.mapWidgetControl.mapWidgetControl-hasShadow{box-shadow:0 40px 64px 0 rgba(0,0,0,0.1),0 24px 32px 0 rgba(0,0,0,0.1),0 16px 16px 0 rgba(0,0,0,0.1),0 8px 8px 0 rgba(0,0,0,0.1),0 4px 4px 0 rgba(0,0,0,0.1),0 2px 2px 0 rgba(0,0,0,0.1)}.mapWidgetControl__header{padding:0 16px;flex-shrink:0;text-transform:uppercase}.mapAttributionControl{text-shadow:0 0 2px #1D1E24,0 0 1px #1D1E24,0 0 1px #1D1E24,0 0 1px #1D1E24,0 0 1px #1D1E24 0 0 1px #1D1E24 0 0 1px #1D1E24;overflow-wrap:break-word !important;word-wrap:break-word !important;word-break:break-word;pointer-events:all;padding-left:12px}.mapAttributionControl__fullScreen{margin-left:160px}.mapLayerControl{scrollbar-width:thin;overflow-y:auto;flex-basis:auto !important;padding-bottom:9px;border-top:1px solid #25262E}.mapLayerControl::-webkit-scrollbar{width:16px;height:16px}.mapLayerControl::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.mapLayerControl::-webkit-scrollbar-corner,.mapLayerControl::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.mapLayerControl__addLayerButton{flex-shrink:0}.mapLayerControl__addLayerButton,.mapLayerControl__openLayerTOCButton{pointer-events:all}.mapLayerControl__addLayerButton:enabled,.mapLayerControl__addLayerButton:enabled:hover,.mapLayerControl__addLayerButton:enabled:focus,.mapLayerControl__openLayerTOCButton:enabled,.mapLayerControl__openLayerTOCButton:enabled:hover,.mapLayerControl__openLayerTOCButton:enabled:focus{box-shadow:0 40px 64px 0 rgba(0,0,0,0.1),0 24px 32px 0 rgba(0,0,0,0.1),0 16px 16px 0 rgba(0,0,0,0.1),0 8px 8px 0 rgba(0,0,0,0.1),0 4px 4px 0 rgba(0,0,0,0.1),0 2px 2px 0 rgba(0,0,0,0.1)}.mapLayerControl__openLayerTOCButton,.mapLayerControl__closeLayerTOCButton{width:32px;height:32px;background-color:#1D1E24 !important}.mapTocEntry{position:relative;padding:8px;border-bottom:1px solid #25262E}.mapTocEntry:hover,.mapTocEntry:focus,.mapTocEntry:focus-within{z-index:2}.mapTocEntry:hover .mapTocEntry__layerIcons,.mapTocEntry:hover .mapTocEntry__detailsToggle,.mapTocEntry:focus .mapTocEntry__layerIcons,.mapTocEntry:focus .mapTocEntry__detailsToggle,.mapTocEntry:focus-within .mapTocEntry__layerIcons,.mapTocEntry:focus-within .mapTocEntry__detailsToggle{display:block;animation:mapTocEntryBecomeVisible 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.mapTocEntry .mapTocEntry__layerIcons:hover,.mapTocEntry .mapTocEntry__layerIcons:focus,.mapTocEntry .mapTocEntry__detailsToggle:hover,.mapTocEntry .mapTocEntry__detailsToggle:focus{display:block;animation:mapTocEntryBecomeVisible 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.mapTocEntry-isDragging{box-shadow:0 6px 12px -1px rgba(0,0,0,0.2),0 4px 4px -1px rgba(0,0,0,0.2),0 2px 2px 0 rgba(0,0,0,0.2)}.mapTocEntry-isDraggingOver{background-color:#1D1E24;pointer-events:none !important}.mapTocEntry-isSelected{background-color:#2a2c34}.mapTocEntry-visible,.mapTocEntry-notVisible{display:flex}.mapLayTocActions{overflow:hidden;flex-grow:1}.mapLayTocActions__popoverAnchor,.mapLayTocActions__tooltipAnchor{max-width:100%}.mapTocEntry-notVisible .mapTocEntry__layerName{opacity:.5}.mapTocEntry__grab:hover{cursor:grab}.mapTocEntry__layerName{font-weight:500}.mapTocEntry__layerNameText{display:flex;align-items:center}.mapTocEntry__layerNameIcon{flex-shrink:0;margin-right:8px}.mapTocEntry__layerNameIcon>*{vertical-align:sub}.mapTocEntry__layerIcons{flex-shrink:0;display:none}.mapTocEntry__detailsToggle{position:absolute;display:none;left:50%;top:32px;transform:translateX(-50%)}.mapTocEntry__detailsToggleButton{background-color:#1D1E24;border:1px solid #343741;color:#DFE5EF;border-radius:2px;height:16px;width:32px;line-height:16px;text-align:center}.mapTocEntry__detailsToggleButton:focus{animation:350ms cubic-bezier(0.694, 0.0482, 0.335, 1) 1 normal forwards focusRingAnimate !important}.mapTocEntry__layerDetails{-webkit-mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);background-color:#141519;padding:16px 8px 8px;margin:8px -8px -8px}@keyframes mapTocEntryBecomeVisible{0%{opacity:0}100%{opacity:1}}.mapViewControl__coordinates{text-shadow:0 0 2px #1D1E24,0 0 1px #1D1E24,0 0 1px #1D1E24,0 0 1px #1D1E24,0 0 1px #1D1E24 0 0 1px #1D1E24 0 0 1px #1D1E24;justify-content:center;pointer-events:none}.mapDrawControl__geometryFilterForm{padding:8px}.mapToolbarOverlay{position:absolute;top:84px;left:12px;z-index:2}.mapToolbarOverlay__button,.mapToolbarOverlay__buttonGroup{position:relative;transition:transform 250ms ease-in-out,background 250ms ease-in-out;border:none !important}.mapToolbarOverlay__button.euiPanel.euiPanel--hasShadow,.mapToolbarOverlay__buttonGroup.euiPanel.euiPanel--hasShadow{box-shadow:0 40px 64px 0 rgba(0,0,0,0.1),0 24px 32px 0 rgba(0,0,0,0.1),0 16px 16px 0 rgba(0,0,0,0.1),0 8px 8px 0 rgba(0,0,0,0.1),0 4px 4px 0 rgba(0,0,0,0.1),0 2px 2px 0 rgba(0,0,0,0.1)}.mapToolbarOverlay__button:hover,.mapToolbarOverlay__buttonGroup:hover{transform:translateY(-1px)}.mapToolbarOverlay__button .euiButtonIcon:hover,.mapToolbarOverlay__buttonGroup .euiButtonIcon:hover{transform:translateY(0)}.mapToolbarOverlay__button .euiButtonIcon:focus:not(:hover),.mapToolbarOverlay__buttonGroup .euiButtonIcon:focus:not(:hover){background:none}.mapToolbarOverlay__buttonGroup{border-radius:4px;overflow:hidden;display:flex;flex-direction:column}.mapToolbarOverlay__buttonGroup .euiButtonIcon{border-radius:0}.mapFeatureTooltip_table{width:100%;max-height:calc(49vh - 64px)}.mapFeatureTooltip_table td{padding:4px}.mapFeatureTooltip_row{border-bottom:1px solid #25262E}.mapFeatureTooltip_actionLinks{padding:4px}.mapFeatureTooltip_backButton{padding-left:0}.mapFeatureTooltip__propertyLabel{max-width:128px;font-weight:600}.mapFeatureTooltip_actionsRow>span{display:flex;justify-content:flex-end}.mapFeatureTooltip_layerIcon img{margin-bottom:0}.mapScaleControl{position:absolute;z-index:1000;left:12px;bottom:12px;pointer-events:none;color:#DFE5EF;border-left:2px solid #DFE5EF;border-bottom:2px solid #DFE5EF;text-align:right}.mapScaleControlFullScreen{bottom:48px}.mapActionSelectIcon{margin-right:8px}.mapMetricEditorPanel{margin-bottom:8px}.mapMetricEditorPanel__metricEditor{padding:12px 0;border-top:1px solid #343741}.mapMetricEditorPanel__metricEditor:first-child{padding-top:0;border-top:none}.mapMetricEditorPanel__metricEditor:last-child{margin-bottom:12px;border-bottom:1px solid #343741}.mapMetricEditorPanel__metricRemoveButton{padding-top:12px;text-align:right}.mapGeometryFilter__geoFieldSuperSelect{height:48px}.mapGeometryFilter__geoFieldSuperSelectWrapper{height:72px}.mapGeometryFilter__geoFieldItem{padding:4px}.mapTooltipSelector__propertyRow{display:flex;padding:4px 0;border-bottom:1px solid #343741;background-color:#1D1E24}.mapTooltipSelector__propertyRow:hover .mapTooltipSelector__propertyIcons,.mapTooltipSelector__propertyRow:focus .mapTooltipSelector__propertyIcons,.mapTooltipSelector__propertyRow:focus-within .mapTooltipSelector__propertyIcons{display:block;animation:mapPropertyIconsBecomeVisible 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.mapTooltipSelector__propertyRow .mapTooltipSelector__propertyIcons:hover,.mapTooltipSelector__propertyRow .mapTooltipSelector__propertyIcons:focus{display:block;animation:mapPropertyIconsBecomeVisible 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.mapTooltipSelector__propertyRow-isDragging{box-shadow:0 6px 12px -1px rgba(0,0,0,0.2),0 4px 4px -1px rgba(0,0,0,0.2),0 2px 2px 0 rgba(0,0,0,0.2)}.mapTooltipSelector__propertyRow-isDraggingOver{pointer-events:none !important}.mapTooltipSelector__propertyContent{overflow:hidden;flex-grow:1;min-height:24px}.mapTooltipSelector__propertyIcons{flex-shrink:0;display:none}.mapTooltipSelector__grab:hover{cursor:grab}@keyframes mapPropertyIconsBecomeVisible{0%{opacity:0}100%{opacity:1}}.mapColorGradient{width:100%;height:4px;position:relative;top:0;right:0;bottom:0;left:0}.mapFillableCircle{overflow:visible}.mapStyleFormDisabledTooltip{width:100%}.mapColorStop{position:relative}.mapColorStop+.mapColorStop{margin-top:8px}.mapIconSelectSymbol__inputButton{margin-left:8px}.mapLegendIconPreview{width:24px}.vectorStyleLegendSpacer:not(:last-child){margin-bottom:8px}.mapLayersWizardIcon{margin-top:8px}.mapLayersWizardIcon__highlight{fill:#fff}.mapLayersWizardIcon__background{fill:#535966}.mapLayersWizardIcon__backgroundDarker{fill:#98A2B3}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(59),content=__webpack_require__(222);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(60)(!1)).push([module.i,"#maps-plugin{height:calc(100vh - 98px);display:flex;flex-direction:column;width:100%;overflow:hidden}.kbnBody--chromeHidden #maps-plugin{height:calc(100vh - 0px)}.kbnBody--hasHeaderBanner #maps-plugin{height:calc(100vh - 130px)}.kbnBody--chromeHidden.kbnBody--hasHeaderBanner #maps-plugin{height:calc(100vh - 32px)}#react-maps-root{flex-grow:1;display:flex;flex-direction:column}.euiColorPicker__emptySwatch{position:relative}.mapContainer{flex-grow:1}.mapContainer .mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin-left:12px;margin-top:12px}.mapContainer .mapboxgl-ctrl-group:not(:empty){box-shadow:0 40px 64px 0 rgba(65,78,101,0.1),0 24px 32px 0 rgba(65,78,101,0.1),0 16px 16px 0 rgba(65,78,101,0.1),0 8px 8px 0 rgba(65,78,101,0.1),0 4px 4px 0 rgba(65,78,101,0.1),0 2px 2px 0 rgba(65,78,101,0.1);border-radius:4px;overflow:hidden;background-color:#fff;transition:transform 250ms ease-in-out}.mapContainer .mapboxgl-ctrl-group:not(:empty):hover{transform:translateY(-1px)}.mapContainer .mapboxgl-ctrl-group:not(:empty)>button{width:32px;height:32px}.mapContainer .mapboxgl-ctrl-group:not(:empty)>button+button{border:none}.mapContainer .mapboxgl-ctrl button:not(:disabled){transition:background 250ms ease-in-out}.mapContainer .mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(105,112,125,0.1)}.mapContainer .mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:none}.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-repeat:no-repeat !important;background-image:url(\"data:image/svg+xml,%0A%3Csvg width='15px' height='15px' viewBox='0 0 15 15' version='1.1' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='rgb%2852, 55, 65%29' d='M8,7 L8,3.5 C8,3.22385763 7.77614237,3 7.5,3 C7.22385763,3 7,3.22385763 7,3.5 L7,7 L3.5,7 C3.22385763,7 3,7.22385763 3,7.5 C3,7.77614237 3.22385763,8 3.5,8 L7,8 L7,11.5 C7,11.7761424 7.22385763,12 7.5,12 C7.77614237,12 8,11.7761424 8,11.5 L8,8 L11.5,8 C11.7761424,8 12,7.77614237 12,7.5 C12,7.22385763 11.7761424,7 11.5,7 L8,7 Z M7.5,15 C3.35786438,15 0,11.6421356 0,7.5 C0,3.35786438 3.35786438,0 7.5,0 C11.6421356,0 15,3.35786438 15,7.5 C15,11.6421356 11.6421356,15 7.5,15 Z' /%3E%3C/svg%3E\") !important;background-position:center !important}.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-repeat:no-repeat !important;background-image:url(\"data:image/svg+xml,%0A%3Csvg width='15px' height='15px' viewBox='0 0 15 15' version='1.1' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='rgb%2852, 55, 65%29' d='M7.5,0 C11.6355882,0 15,3.36441176 15,7.5 C15,11.6355882 11.6355882,15 7.5,15 C3.36441176,15 0,11.6355882 0,7.5 C0,3.36441176 3.36441176,0 7.5,0 Z M3.5,7 C3.22385763,7 3,7.22385763 3,7.5 C3,7.77614237 3.22385763,8 3.5,8 L11.5,8 C11.7761424,8 12,7.77614237 12,7.5 C12,7.22385763 11.7761424,7 11.5,7 L3.5,7 Z' /%3E%3C/svg%3E\") !important;background-position:center !important}.mapMapWrapper{position:relative}.mapMapLayerPanel{background-color:#fafbfd;width:0;overflow:hidden}.mapMapLayerPanel>*{width:480px}.mapMapLayerPanel-isVisible{width:480px;transition:width 250ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.mapLayerPanel__header,.mapLayerPanel__footer{padding:16px}.mapLayerPanel__body{scrollbar-width:thin;padding-bottom:0;flex-grow:1;flex-basis:1px;overflow-y:auto}.mapLayerPanel__body::-webkit-scrollbar{width:16px;height:16px}.mapLayerPanel__body::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.mapLayerPanel__body::-webkit-scrollbar-corner,.mapLayerPanel__body::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.mapLayerPanel__body .mapLayerPanel__bodyOverflow{padding:16px}.mapLayerPanel__body .mapLayerPanel__bodyOverflow>*:last-child{margin-bottom:16px}.mapLayerPanel__sourceDetails{margin-left:32px}.mapLayerPanel__sourceDetail{margin-bottom:0 !important}.mapLayerPanel__footer{border-top:1px solid #D3DAE6}.mapFilterEditor{width:calc(95vw - 440px);overflow-y:visible}.mapJoinItem{position:relative;background:#f8f9fb;border-radius:4px;padding:8px 4px}.mapJoinItem .mapJoinItem__inner{scrollbar-width:thin;overflow-x:auto}.mapJoinItem .mapJoinItem__inner::-webkit-scrollbar{width:16px;height:16px}.mapJoinItem .mapJoinItem__inner::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.mapJoinItem .mapJoinItem__inner::-webkit-scrollbar-corner,.mapJoinItem .mapJoinItem__inner::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.mapJoinItem:hover .mapJoinItem__delete,.mapJoinItem:focus .mapJoinItem__delete{visibility:visible;opacity:1}.mapJoinItem__delete{box-shadow:0 2px 2px -1px rgba(152,162,179,0.3),0 1px 5px -2px rgba(152,162,179,0.3);position:absolute;right:0;top:50%;margin-right:-8px;margin-top:-12px;background:#fff;padding:4px;visibility:hidden;opacity:0}.mapJoinExpressionHelpText{padding-top:0;padding-bottom:8px}.mapStyleSettings__fixedBox{width:120px}.mapWidgetOverlay{position:absolute;z-index:1000;top:12px;right:12px;bottom:12px;left:0;pointer-events:none}.mapWidgetOverlay__layerWrapper{align-items:flex-end;width:320px;min-height:0}.mapWidgetControl__headerFlexItem{flex-shrink:0}.mapWidgetControl{max-height:100%;width:100%;overflow:hidden;padding-bottom:8px;border-color:transparent !important;flex-direction:column;display:flex;pointer-events:all}.mapWidgetControl.mapWidgetControl-hasShadow{box-shadow:0 40px 64px 0 rgba(65,78,101,0.1),0 24px 32px 0 rgba(65,78,101,0.1),0 16px 16px 0 rgba(65,78,101,0.1),0 8px 8px 0 rgba(65,78,101,0.1),0 4px 4px 0 rgba(65,78,101,0.1),0 2px 2px 0 rgba(65,78,101,0.1)}.mapWidgetControl__header{padding:0 16px;flex-shrink:0;text-transform:uppercase}.mapAttributionControl{text-shadow:0 0 2px #fff,0 0 1px #fff,0 0 1px #fff,0 0 1px #fff,0 0 1px #fff 0 0 1px #fff 0 0 1px #fff;overflow-wrap:break-word !important;word-wrap:break-word !important;word-break:break-word;pointer-events:all;padding-left:12px}.mapAttributionControl__fullScreen{margin-left:160px}.mapLayerControl{scrollbar-width:thin;overflow-y:auto;flex-basis:auto !important;padding-bottom:9px;border-top:1px solid #F5F7FA}.mapLayerControl::-webkit-scrollbar{width:16px;height:16px}.mapLayerControl::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.mapLayerControl::-webkit-scrollbar-corner,.mapLayerControl::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.mapLayerControl__addLayerButton{flex-shrink:0}.mapLayerControl__addLayerButton,.mapLayerControl__openLayerTOCButton{pointer-events:all}.mapLayerControl__addLayerButton:enabled,.mapLayerControl__addLayerButton:enabled:hover,.mapLayerControl__addLayerButton:enabled:focus,.mapLayerControl__openLayerTOCButton:enabled,.mapLayerControl__openLayerTOCButton:enabled:hover,.mapLayerControl__openLayerTOCButton:enabled:focus{box-shadow:0 40px 64px 0 rgba(65,78,101,0.1),0 24px 32px 0 rgba(65,78,101,0.1),0 16px 16px 0 rgba(65,78,101,0.1),0 8px 8px 0 rgba(65,78,101,0.1),0 4px 4px 0 rgba(65,78,101,0.1),0 2px 2px 0 rgba(65,78,101,0.1)}.mapLayerControl__openLayerTOCButton,.mapLayerControl__closeLayerTOCButton{width:32px;height:32px;background-color:#fff !important}.mapTocEntry{position:relative;padding:8px;border-bottom:1px solid #F5F7FA}.mapTocEntry:hover,.mapTocEntry:focus,.mapTocEntry:focus-within{z-index:2}.mapTocEntry:hover .mapTocEntry__layerIcons,.mapTocEntry:hover .mapTocEntry__detailsToggle,.mapTocEntry:focus .mapTocEntry__layerIcons,.mapTocEntry:focus .mapTocEntry__detailsToggle,.mapTocEntry:focus-within .mapTocEntry__layerIcons,.mapTocEntry:focus-within .mapTocEntry__detailsToggle{display:block;animation:mapTocEntryBecomeVisible 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.mapTocEntry .mapTocEntry__layerIcons:hover,.mapTocEntry .mapTocEntry__layerIcons:focus,.mapTocEntry .mapTocEntry__detailsToggle:hover,.mapTocEntry .mapTocEntry__detailsToggle:focus{display:block;animation:mapTocEntryBecomeVisible 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.mapTocEntry-isDragging{box-shadow:0 6px 12px -1px rgba(152,162,179,0.2),0 4px 4px -1px rgba(152,162,179,0.2),0 2px 2px 0 rgba(152,162,179,0.2)}.mapTocEntry-isDraggingOver{background-color:#fff;pointer-events:none !important}.mapTocEntry-isSelected{background-color:#edf0f5}.mapTocEntry-visible,.mapTocEntry-notVisible{display:flex}.mapLayTocActions{overflow:hidden;flex-grow:1}.mapLayTocActions__popoverAnchor,.mapLayTocActions__tooltipAnchor{max-width:100%}.mapTocEntry-notVisible .mapTocEntry__layerName{opacity:.5}.mapTocEntry__grab:hover{cursor:grab}.mapTocEntry__layerName{font-weight:500}.mapTocEntry__layerNameText{display:flex;align-items:center}.mapTocEntry__layerNameIcon{flex-shrink:0;margin-right:8px}.mapTocEntry__layerNameIcon>*{vertical-align:sub}.mapTocEntry__layerIcons{flex-shrink:0;display:none}.mapTocEntry__detailsToggle{position:absolute;display:none;left:50%;top:32px;transform:translateX(-50%)}.mapTocEntry__detailsToggleButton{background-color:#fff;border:1px solid #D3DAE6;color:#343741;border-radius:2px;height:16px;width:32px;line-height:16px;text-align:center}.mapTocEntry__detailsToggleButton:focus{animation:350ms cubic-bezier(0.694, 0.0482, 0.335, 1) 1 normal forwards focusRingAnimate !important}.mapTocEntry__layerDetails{-webkit-mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);background-color:#fafbfd;padding:16px 8px 8px;margin:8px -8px -8px}@keyframes mapTocEntryBecomeVisible{0%{opacity:0}100%{opacity:1}}.mapViewControl__coordinates{text-shadow:0 0 2px #fff,0 0 1px #fff,0 0 1px #fff,0 0 1px #fff,0 0 1px #fff 0 0 1px #fff 0 0 1px #fff;justify-content:center;pointer-events:none}.mapDrawControl__geometryFilterForm{padding:8px}.mapToolbarOverlay{position:absolute;top:84px;left:12px;z-index:2}.mapToolbarOverlay__button,.mapToolbarOverlay__buttonGroup{position:relative;transition:transform 250ms ease-in-out,background 250ms ease-in-out;border:none !important}.mapToolbarOverlay__button.euiPanel.euiPanel--hasShadow,.mapToolbarOverlay__buttonGroup.euiPanel.euiPanel--hasShadow{box-shadow:0 40px 64px 0 rgba(65,78,101,0.1),0 24px 32px 0 rgba(65,78,101,0.1),0 16px 16px 0 rgba(65,78,101,0.1),0 8px 8px 0 rgba(65,78,101,0.1),0 4px 4px 0 rgba(65,78,101,0.1),0 2px 2px 0 rgba(65,78,101,0.1)}.mapToolbarOverlay__button:hover,.mapToolbarOverlay__buttonGroup:hover{transform:translateY(-1px)}.mapToolbarOverlay__button .euiButtonIcon:hover,.mapToolbarOverlay__buttonGroup .euiButtonIcon:hover{transform:translateY(0)}.mapToolbarOverlay__button .euiButtonIcon:focus:not(:hover),.mapToolbarOverlay__buttonGroup .euiButtonIcon:focus:not(:hover){background:none}.mapToolbarOverlay__buttonGroup{border-radius:4px;overflow:hidden;display:flex;flex-direction:column}.mapToolbarOverlay__buttonGroup .euiButtonIcon{border-radius:0}.mapFeatureTooltip_table{width:100%;max-height:calc(49vh - 64px)}.mapFeatureTooltip_table td{padding:4px}.mapFeatureTooltip_row{border-bottom:1px solid #F5F7FA}.mapFeatureTooltip_actionLinks{padding:4px}.mapFeatureTooltip_backButton{padding-left:0}.mapFeatureTooltip__propertyLabel{max-width:128px;font-weight:600}.mapFeatureTooltip_actionsRow>span{display:flex;justify-content:flex-end}.mapFeatureTooltip_layerIcon img{margin-bottom:0}.mapScaleControl{position:absolute;z-index:1000;left:12px;bottom:12px;pointer-events:none;color:#343741;border-left:2px solid #343741;border-bottom:2px solid #343741;text-align:right}.mapScaleControlFullScreen{bottom:48px}.mapActionSelectIcon{margin-right:8px}.mapMetricEditorPanel{margin-bottom:8px}.mapMetricEditorPanel__metricEditor{padding:12px 0;border-top:1px solid #D3DAE6}.mapMetricEditorPanel__metricEditor:first-child{padding-top:0;border-top:none}.mapMetricEditorPanel__metricEditor:last-child{margin-bottom:12px;border-bottom:1px solid #D3DAE6}.mapMetricEditorPanel__metricRemoveButton{padding-top:12px;text-align:right}.mapGeometryFilter__geoFieldSuperSelect{height:48px}.mapGeometryFilter__geoFieldSuperSelectWrapper{height:72px}.mapGeometryFilter__geoFieldItem{padding:4px}.mapTooltipSelector__propertyRow{display:flex;padding:4px 0;border-bottom:1px solid #D3DAE6;background-color:#fff}.mapTooltipSelector__propertyRow:hover .mapTooltipSelector__propertyIcons,.mapTooltipSelector__propertyRow:focus .mapTooltipSelector__propertyIcons,.mapTooltipSelector__propertyRow:focus-within .mapTooltipSelector__propertyIcons{display:block;animation:mapPropertyIconsBecomeVisible 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.mapTooltipSelector__propertyRow .mapTooltipSelector__propertyIcons:hover,.mapTooltipSelector__propertyRow .mapTooltipSelector__propertyIcons:focus{display:block;animation:mapPropertyIconsBecomeVisible 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.mapTooltipSelector__propertyRow-isDragging{box-shadow:0 6px 12px -1px rgba(152,162,179,0.2),0 4px 4px -1px rgba(152,162,179,0.2),0 2px 2px 0 rgba(152,162,179,0.2)}.mapTooltipSelector__propertyRow-isDraggingOver{pointer-events:none !important}.mapTooltipSelector__propertyContent{overflow:hidden;flex-grow:1;min-height:24px}.mapTooltipSelector__propertyIcons{flex-shrink:0;display:none}.mapTooltipSelector__grab:hover{cursor:grab}@keyframes mapPropertyIconsBecomeVisible{0%{opacity:0}100%{opacity:1}}.mapColorGradient{width:100%;height:4px;position:relative;top:0;right:0;bottom:0;left:0}.mapFillableCircle{overflow:visible}.mapStyleFormDisabledTooltip{width:100%}.mapColorStop{position:relative}.mapColorStop+.mapColorStop{margin-top:8px}.mapIconSelectSymbol__inputButton{margin-left:8px}.mapLegendIconPreview{width:24px}.vectorStyleLegendSpacer:not(:last-child){margin-bottom:8px}.mapLayersWizardIcon{margin-top:8px}.mapLayersWizardIcon__highlight{fill:#000}.mapLayersWizardIcon__background{fill:#D3DAE6}.mapLayersWizardIcon__backgroundDarker{fill:#98A2B3}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(59),content=__webpack_require__(224);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(60)(!1)).push([module.i,"#maps-plugin{height:calc(100vh - 96px);display:flex;flex-direction:column;width:100%;overflow:hidden}.kbnBody--chromeHidden #maps-plugin{height:calc(100vh - 0px)}.kbnBody--hasHeaderBanner #maps-plugin{height:calc(100vh - 128px)}.kbnBody--chromeHidden.kbnBody--hasHeaderBanner #maps-plugin{height:calc(100vh - 32px)}#react-maps-root{flex-grow:1;display:flex;flex-direction:column}.euiColorPicker__emptySwatch{position:relative}.mapContainer{flex-grow:1}.mapContainer .mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin-left:12px;margin-top:12px}.mapContainer .mapboxgl-ctrl-group:not(:empty){box-shadow:0 2.7px 9px rgba(0,0,0,0.325),0 9.4px 24px rgba(0,0,0,0.225),0 21.8px 43px rgba(0,0,0,0.2);border-radius:4px;overflow:hidden;background-color:#1D1E24;transition:transform 250ms ease-in-out}.mapContainer .mapboxgl-ctrl-group:not(:empty):hover{transform:translateY(-1px)}.mapContainer .mapboxgl-ctrl-group:not(:empty)>button{width:32px;height:32px}.mapContainer .mapboxgl-ctrl-group:not(:empty)>button+button{border:none}.mapContainer .mapboxgl-ctrl button:not(:disabled){transition:background 250ms ease-in-out}.mapContainer .mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(152,162,179,0.1)}.mapContainer .mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:none}.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-repeat:no-repeat !important;background-image:url(\"data:image/svg+xml,%0A%3Csvg width='15px' height='15px' viewBox='0 0 15 15' version='1.1' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='rgb%28223, 229, 239%29' d='M8,7 L8,3.5 C8,3.22385763 7.77614237,3 7.5,3 C7.22385763,3 7,3.22385763 7,3.5 L7,7 L3.5,7 C3.22385763,7 3,7.22385763 3,7.5 C3,7.77614237 3.22385763,8 3.5,8 L7,8 L7,11.5 C7,11.7761424 7.22385763,12 7.5,12 C7.77614237,12 8,11.7761424 8,11.5 L8,8 L11.5,8 C11.7761424,8 12,7.77614237 12,7.5 C12,7.22385763 11.7761424,7 11.5,7 L8,7 Z M7.5,15 C3.35786438,15 0,11.6421356 0,7.5 C0,3.35786438 3.35786438,0 7.5,0 C11.6421356,0 15,3.35786438 15,7.5 C15,11.6421356 11.6421356,15 7.5,15 Z' /%3E%3C/svg%3E\") !important;background-position:center !important}.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-repeat:no-repeat !important;background-image:url(\"data:image/svg+xml,%0A%3Csvg width='15px' height='15px' viewBox='0 0 15 15' version='1.1' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='rgb%28223, 229, 239%29' d='M7.5,0 C11.6355882,0 15,3.36441176 15,7.5 C15,11.6355882 11.6355882,15 7.5,15 C3.36441176,15 0,11.6355882 0,7.5 C0,3.36441176 3.36441176,0 7.5,0 Z M3.5,7 C3.22385763,7 3,7.22385763 3,7.5 C3,7.77614237 3.22385763,8 3.5,8 L11.5,8 C11.7761424,8 12,7.77614237 12,7.5 C12,7.22385763 11.7761424,7 11.5,7 L3.5,7 Z' /%3E%3C/svg%3E\") !important;background-position:center !important}.mapMapWrapper{position:relative}.mapMapLayerPanel{background-color:#141519;width:0;overflow:hidden}.mapMapLayerPanel>*{width:480px}.mapMapLayerPanel-isVisible{width:480px;transition:width 250ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.mapLayerPanel__header,.mapLayerPanel__footer{padding:16px}.mapLayerPanel__body{scrollbar-width:thin;padding-bottom:0;flex-grow:1;flex-basis:1px;overflow-y:auto}.mapLayerPanel__body::-webkit-scrollbar{width:16px;height:16px}.mapLayerPanel__body::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.mapLayerPanel__body::-webkit-scrollbar-corner,.mapLayerPanel__body::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.mapLayerPanel__body .mapLayerPanel__bodyOverflow{padding:16px}.mapLayerPanel__body .mapLayerPanel__bodyOverflow>*:last-child{margin-bottom:16px}.mapLayerPanel__sourceDetails{margin-left:32px}.mapLayerPanel__sourceDetail{margin-bottom:0 !important}.mapLayerPanel__footer{border-top:1px solid #343741}.mapFilterEditor{width:calc(95vw - 440px);overflow-y:visible}.mapJoinItem{position:relative;background:#343741;border-radius:6px;padding:8px 4px}.mapJoinItem .mapJoinItem__inner{scrollbar-width:thin;overflow-x:auto}.mapJoinItem .mapJoinItem__inner::-webkit-scrollbar{width:16px;height:16px}.mapJoinItem .mapJoinItem__inner::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.mapJoinItem .mapJoinItem__inner::-webkit-scrollbar-corner,.mapJoinItem .mapJoinItem__inner::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.mapJoinItem:hover .mapJoinItem__delete,.mapJoinItem:focus .mapJoinItem__delete{visibility:visible;opacity:1}.mapJoinItem__delete{box-shadow:0 0.7px 1.4px rgba(0,0,0,0.175),0 1.9px 4px rgba(0,0,0,0.125),0 4.5px 10px rgba(0,0,0,0.125);position:absolute;right:0;top:50%;margin-right:-8px;margin-top:-12px;background:#1D1E24;padding:4px;visibility:hidden;opacity:0}.mapJoinExpressionHelpText{padding-top:0;padding-bottom:8px}.mapStyleSettings__fixedBox{width:120px}.mapWidgetOverlay{position:absolute;z-index:1000;top:12px;right:12px;bottom:12px;left:0;pointer-events:none}.mapWidgetOverlay__layerWrapper{align-items:flex-end;width:320px;min-height:0}.mapWidgetControl__headerFlexItem{flex-shrink:0}.mapWidgetControl{max-height:100%;width:100%;overflow:hidden;padding-bottom:8px;border-color:transparent !important;flex-direction:column;display:flex;pointer-events:all}.mapWidgetControl.mapWidgetControl-hasShadow{box-shadow:0 2.7px 9px rgba(0,0,0,0.325),0 9.4px 24px rgba(0,0,0,0.225),0 21.8px 43px rgba(0,0,0,0.2)}.mapWidgetControl__header{padding:0 16px;flex-shrink:0;text-transform:uppercase}.mapAttributionControl{text-shadow:0 0 2px #1D1E24,0 0 1px #1D1E24,0 0 1px #1D1E24,0 0 1px #1D1E24,0 0 1px #1D1E24 0 0 1px #1D1E24 0 0 1px #1D1E24;overflow-wrap:break-word !important;word-wrap:break-word !important;word-break:break-word;pointer-events:all;padding-left:12px}.mapAttributionControl__fullScreen{margin-left:160px}.mapLayerControl{scrollbar-width:thin;overflow-y:auto;flex-basis:auto !important;padding-bottom:9px;border-top:1px solid #25262E}.mapLayerControl::-webkit-scrollbar{width:16px;height:16px}.mapLayerControl::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.mapLayerControl::-webkit-scrollbar-corner,.mapLayerControl::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.mapLayerControl__addLayerButton{flex-shrink:0}.mapLayerControl__addLayerButton,.mapLayerControl__openLayerTOCButton{pointer-events:all}.mapLayerControl__addLayerButton:enabled,.mapLayerControl__addLayerButton:enabled:hover,.mapLayerControl__addLayerButton:enabled:focus,.mapLayerControl__openLayerTOCButton:enabled,.mapLayerControl__openLayerTOCButton:enabled:hover,.mapLayerControl__openLayerTOCButton:enabled:focus{box-shadow:0 2.7px 9px rgba(0,0,0,0.325),0 9.4px 24px rgba(0,0,0,0.225),0 21.8px 43px rgba(0,0,0,0.2)}.mapLayerControl__openLayerTOCButton,.mapLayerControl__closeLayerTOCButton{width:32px;height:32px;background-color:#1D1E24 !important}.mapTocEntry{position:relative;padding:8px;border-bottom:1px solid #25262E}.mapTocEntry:hover,.mapTocEntry:focus,.mapTocEntry:focus-within{z-index:2}.mapTocEntry:hover .mapTocEntry__layerIcons,.mapTocEntry:hover .mapTocEntry__detailsToggle,.mapTocEntry:focus .mapTocEntry__layerIcons,.mapTocEntry:focus .mapTocEntry__detailsToggle,.mapTocEntry:focus-within .mapTocEntry__layerIcons,.mapTocEntry:focus-within .mapTocEntry__detailsToggle{display:block;animation:mapTocEntryBecomeVisible 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.mapTocEntry .mapTocEntry__layerIcons:hover,.mapTocEntry .mapTocEntry__layerIcons:focus,.mapTocEntry .mapTocEntry__detailsToggle:hover,.mapTocEntry .mapTocEntry__detailsToggle:focus{display:block;animation:mapTocEntryBecomeVisible 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.mapTocEntry-isDragging{box-shadow:0 0.9px 4px -1px rgba(0,0,0,0.2),0 2.6px 8px -1px rgba(0,0,0,0.15),0 5.7px 12px -1px rgba(0,0,0,0.125),0 15px 15px -1px rgba(0,0,0,0.1)}.mapTocEntry-isDraggingOver{background-color:#1D1E24;pointer-events:none !important}.mapTocEntry-isSelected{background-color:#2a2c34}.mapTocEntry-visible,.mapTocEntry-notVisible{display:flex}.mapLayTocActions{overflow:hidden;flex-grow:1}.mapLayTocActions__popoverAnchor,.mapLayTocActions__tooltipAnchor{max-width:100%}.mapTocEntry-notVisible .mapTocEntry__layerName{opacity:.5}.mapTocEntry__grab:hover{cursor:grab}.mapTocEntry__layerName{font-weight:500}.mapTocEntry__layerNameText{display:flex;align-items:center}.mapTocEntry__layerNameIcon{flex-shrink:0;margin-right:8px}.mapTocEntry__layerNameIcon>*{vertical-align:sub}.mapTocEntry__layerIcons{flex-shrink:0;display:none}.mapTocEntry__detailsToggle{position:absolute;display:none;left:50%;top:32px;transform:translateX(-50%)}.mapTocEntry__detailsToggleButton{background-color:#1D1E24;border:1px solid #343741;color:#DFE5EF;border-radius:3px;height:16px;width:32px;line-height:16px;text-align:center}.mapTocEntry__detailsToggleButton:focus{outline:2px solid currentColor}.mapTocEntry__detailsToggleButton:focus:focus-visible{outline-style:auto}.mapTocEntry__detailsToggleButton:focus:not(:focus-visible){outline:none}.mapTocEntry__layerDetails{-webkit-mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);background-color:#141519;padding:16px 8px 8px;margin:8px -8px -8px}@keyframes mapTocEntryBecomeVisible{0%{opacity:0}100%{opacity:1}}.mapViewControl__coordinates{text-shadow:0 0 2px #1D1E24,0 0 1px #1D1E24,0 0 1px #1D1E24,0 0 1px #1D1E24,0 0 1px #1D1E24 0 0 1px #1D1E24 0 0 1px #1D1E24;justify-content:center;pointer-events:none}.mapDrawControl__geometryFilterForm{padding:8px}.mapToolbarOverlay{position:absolute;top:84px;left:12px;z-index:2}.mapToolbarOverlay__button,.mapToolbarOverlay__buttonGroup{position:relative;transition:transform 250ms ease-in-out,background 250ms ease-in-out}.mapToolbarOverlay__button:hover,.mapToolbarOverlay__buttonGroup:hover{transform:translateY(-1px)}.mapToolbarOverlay__button .euiButtonIcon:hover,.mapToolbarOverlay__buttonGroup .euiButtonIcon:hover{transform:translateY(0)}.mapToolbarOverlay__button .euiButtonIcon:focus:not(:hover),.mapToolbarOverlay__buttonGroup .euiButtonIcon:focus:not(:hover){background:none}.mapToolbarOverlay__buttonGroup{border-radius:4px;overflow:hidden;display:flex;flex-direction:column}.mapToolbarOverlay__buttonGroup .euiButtonIcon{border-radius:0}.mapFeatureTooltip_table{width:100%;max-height:calc(49vh - 64px)}.mapFeatureTooltip_table td{padding:4px}.mapFeatureTooltip_row{border-bottom:1px solid #25262E}.mapFeatureTooltip_actionLinks{padding:4px}.mapFeatureTooltip_backButton{padding-left:0}.mapFeatureTooltip__propertyLabel{max-width:128px;font-weight:600}.mapFeatureTooltip_actionsRow>span{display:flex;justify-content:flex-end}.mapFeatureTooltip_layerIcon img{margin-bottom:0}.mapScaleControl{position:absolute;z-index:1000;left:12px;bottom:12px;pointer-events:none;color:#DFE5EF;border-left:2px solid #DFE5EF;border-bottom:2px solid #DFE5EF;text-align:right}.mapScaleControlFullScreen{bottom:48px}.mapActionSelectIcon{margin-right:8px}.mapMetricEditorPanel{margin-bottom:8px}.mapMetricEditorPanel__metricEditor{padding:12px 0;border-top:1px solid #343741}.mapMetricEditorPanel__metricEditor:first-child{padding-top:0;border-top:none}.mapMetricEditorPanel__metricEditor:last-child{margin-bottom:12px;border-bottom:1px solid #343741}.mapMetricEditorPanel__metricRemoveButton{padding-top:12px;text-align:right}.mapGeometryFilter__geoFieldSuperSelect{height:48px}.mapGeometryFilter__geoFieldSuperSelectWrapper{height:72px}.mapGeometryFilter__geoFieldItem{padding:4px}.mapTooltipSelector__propertyRow{display:flex;padding:4px 0;border-bottom:1px solid #343741;background-color:#1D1E24}.mapTooltipSelector__propertyRow:hover .mapTooltipSelector__propertyIcons,.mapTooltipSelector__propertyRow:focus .mapTooltipSelector__propertyIcons,.mapTooltipSelector__propertyRow:focus-within .mapTooltipSelector__propertyIcons{display:block;animation:mapPropertyIconsBecomeVisible 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.mapTooltipSelector__propertyRow .mapTooltipSelector__propertyIcons:hover,.mapTooltipSelector__propertyRow .mapTooltipSelector__propertyIcons:focus{display:block;animation:mapPropertyIconsBecomeVisible 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.mapTooltipSelector__propertyRow-isDragging{box-shadow:0 0.9px 4px -1px rgba(0,0,0,0.2),0 2.6px 8px -1px rgba(0,0,0,0.15),0 5.7px 12px -1px rgba(0,0,0,0.125),0 15px 15px -1px rgba(0,0,0,0.1)}.mapTooltipSelector__propertyRow-isDraggingOver{pointer-events:none !important}.mapTooltipSelector__propertyContent{overflow:hidden;flex-grow:1;min-height:24px}.mapTooltipSelector__propertyIcons{flex-shrink:0;display:none}.mapTooltipSelector__grab:hover{cursor:grab}@keyframes mapPropertyIconsBecomeVisible{0%{opacity:0}100%{opacity:1}}.mapColorGradient{width:100%;height:4px;position:relative;top:0;right:0;bottom:0;left:0}.mapFillableCircle{overflow:visible}.mapStyleFormDisabledTooltip{width:100%}.mapColorStop{position:relative}.mapColorStop+.mapColorStop{margin-top:8px}.mapIconSelectSymbol__inputButton{margin-left:8px}.mapLegendIconPreview{width:24px}.vectorStyleLegendSpacer:not(:last-child){margin-bottom:8px}.mapLayersWizardIcon{margin-top:8px}.mapLayersWizardIcon__highlight{fill:#fff}.mapLayersWizardIcon__background{fill:#535966}.mapLayersWizardIcon__backgroundDarker{fill:#98A2B3}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(59),content=__webpack_require__(226);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(60)(!1)).push([module.i,"#maps-plugin{height:calc(100vh - 96px);display:flex;flex-direction:column;width:100%;overflow:hidden}.kbnBody--chromeHidden #maps-plugin{height:calc(100vh - 0px)}.kbnBody--hasHeaderBanner #maps-plugin{height:calc(100vh - 128px)}.kbnBody--chromeHidden.kbnBody--hasHeaderBanner #maps-plugin{height:calc(100vh - 32px)}#react-maps-root{flex-grow:1;display:flex;flex-direction:column}.euiColorPicker__emptySwatch{position:relative}.mapContainer{flex-grow:1}.mapContainer .mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin-left:12px;margin-top:12px}.mapContainer .mapboxgl-ctrl-group:not(:empty){box-shadow:0 2.7px 9px rgba(0,0,0,0.13),0 9.4px 24px rgba(0,0,0,0.09),0 21.8px 43px rgba(0,0,0,0.08);border-radius:4px;overflow:hidden;background-color:#fff;transition:transform 250ms ease-in-out}.mapContainer .mapboxgl-ctrl-group:not(:empty):hover{transform:translateY(-1px)}.mapContainer .mapboxgl-ctrl-group:not(:empty)>button{width:32px;height:32px}.mapContainer .mapboxgl-ctrl-group:not(:empty)>button+button{border:none}.mapContainer .mapboxgl-ctrl button:not(:disabled){transition:background 250ms ease-in-out}.mapContainer .mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(105,112,125,0.1)}.mapContainer .mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:none}.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-repeat:no-repeat !important;background-image:url(\"data:image/svg+xml,%0A%3Csvg width='15px' height='15px' viewBox='0 0 15 15' version='1.1' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='rgb%2852, 55, 65%29' d='M8,7 L8,3.5 C8,3.22385763 7.77614237,3 7.5,3 C7.22385763,3 7,3.22385763 7,3.5 L7,7 L3.5,7 C3.22385763,7 3,7.22385763 3,7.5 C3,7.77614237 3.22385763,8 3.5,8 L7,8 L7,11.5 C7,11.7761424 7.22385763,12 7.5,12 C7.77614237,12 8,11.7761424 8,11.5 L8,8 L11.5,8 C11.7761424,8 12,7.77614237 12,7.5 C12,7.22385763 11.7761424,7 11.5,7 L8,7 Z M7.5,15 C3.35786438,15 0,11.6421356 0,7.5 C0,3.35786438 3.35786438,0 7.5,0 C11.6421356,0 15,3.35786438 15,7.5 C15,11.6421356 11.6421356,15 7.5,15 Z' /%3E%3C/svg%3E\") !important;background-position:center !important}.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-repeat:no-repeat !important;background-image:url(\"data:image/svg+xml,%0A%3Csvg width='15px' height='15px' viewBox='0 0 15 15' version='1.1' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='rgb%2852, 55, 65%29' d='M7.5,0 C11.6355882,0 15,3.36441176 15,7.5 C15,11.6355882 11.6355882,15 7.5,15 C3.36441176,15 0,11.6355882 0,7.5 C0,3.36441176 3.36441176,0 7.5,0 Z M3.5,7 C3.22385763,7 3,7.22385763 3,7.5 C3,7.77614237 3.22385763,8 3.5,8 L11.5,8 C11.7761424,8 12,7.77614237 12,7.5 C12,7.22385763 11.7761424,7 11.5,7 L3.5,7 Z' /%3E%3C/svg%3E\") !important;background-position:center !important}.mapMapWrapper{position:relative}.mapMapLayerPanel{background-color:#fafbfd;width:0;overflow:hidden}.mapMapLayerPanel>*{width:480px}.mapMapLayerPanel-isVisible{width:480px;transition:width 250ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.mapLayerPanel__header,.mapLayerPanel__footer{padding:16px}.mapLayerPanel__body{scrollbar-width:thin;padding-bottom:0;flex-grow:1;flex-basis:1px;overflow-y:auto}.mapLayerPanel__body::-webkit-scrollbar{width:16px;height:16px}.mapLayerPanel__body::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.mapLayerPanel__body::-webkit-scrollbar-corner,.mapLayerPanel__body::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.mapLayerPanel__body .mapLayerPanel__bodyOverflow{padding:16px}.mapLayerPanel__body .mapLayerPanel__bodyOverflow>*:last-child{margin-bottom:16px}.mapLayerPanel__sourceDetails{margin-left:32px}.mapLayerPanel__sourceDetail{margin-bottom:0 !important}.mapLayerPanel__footer{border-top:1px solid #D3DAE6}.mapFilterEditor{width:calc(95vw - 440px);overflow-y:visible}.mapJoinItem{position:relative;background:#f8f9fb;border-radius:6px;padding:8px 4px}.mapJoinItem .mapJoinItem__inner{scrollbar-width:thin;overflow-x:auto}.mapJoinItem .mapJoinItem__inner::-webkit-scrollbar{width:16px;height:16px}.mapJoinItem .mapJoinItem__inner::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.mapJoinItem .mapJoinItem__inner::-webkit-scrollbar-corner,.mapJoinItem .mapJoinItem__inner::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.mapJoinItem:hover .mapJoinItem__delete,.mapJoinItem:focus .mapJoinItem__delete{visibility:visible;opacity:1}.mapJoinItem__delete{box-shadow:0 0.7px 1.4px rgba(0,0,0,0.07),0 1.9px 4px rgba(0,0,0,0.05),0 4.5px 10px rgba(0,0,0,0.05);position:absolute;right:0;top:50%;margin-right:-8px;margin-top:-12px;background:#fff;padding:4px;visibility:hidden;opacity:0}.mapJoinExpressionHelpText{padding-top:0;padding-bottom:8px}.mapStyleSettings__fixedBox{width:120px}.mapWidgetOverlay{position:absolute;z-index:1000;top:12px;right:12px;bottom:12px;left:0;pointer-events:none}.mapWidgetOverlay__layerWrapper{align-items:flex-end;width:320px;min-height:0}.mapWidgetControl__headerFlexItem{flex-shrink:0}.mapWidgetControl{max-height:100%;width:100%;overflow:hidden;padding-bottom:8px;border-color:transparent !important;flex-direction:column;display:flex;pointer-events:all}.mapWidgetControl.mapWidgetControl-hasShadow{box-shadow:0 2.7px 9px rgba(0,0,0,0.13),0 9.4px 24px rgba(0,0,0,0.09),0 21.8px 43px rgba(0,0,0,0.08)}.mapWidgetControl__header{padding:0 16px;flex-shrink:0;text-transform:uppercase}.mapAttributionControl{text-shadow:0 0 2px #fff,0 0 1px #fff,0 0 1px #fff,0 0 1px #fff,0 0 1px #fff 0 0 1px #fff 0 0 1px #fff;overflow-wrap:break-word !important;word-wrap:break-word !important;word-break:break-word;pointer-events:all;padding-left:12px}.mapAttributionControl__fullScreen{margin-left:160px}.mapLayerControl{scrollbar-width:thin;overflow-y:auto;flex-basis:auto !important;padding-bottom:9px;border-top:1px solid #F5F7FA}.mapLayerControl::-webkit-scrollbar{width:16px;height:16px}.mapLayerControl::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.mapLayerControl::-webkit-scrollbar-corner,.mapLayerControl::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.mapLayerControl__addLayerButton{flex-shrink:0}.mapLayerControl__addLayerButton,.mapLayerControl__openLayerTOCButton{pointer-events:all}.mapLayerControl__addLayerButton:enabled,.mapLayerControl__addLayerButton:enabled:hover,.mapLayerControl__addLayerButton:enabled:focus,.mapLayerControl__openLayerTOCButton:enabled,.mapLayerControl__openLayerTOCButton:enabled:hover,.mapLayerControl__openLayerTOCButton:enabled:focus{box-shadow:0 2.7px 9px rgba(0,0,0,0.13),0 9.4px 24px rgba(0,0,0,0.09),0 21.8px 43px rgba(0,0,0,0.08)}.mapLayerControl__openLayerTOCButton,.mapLayerControl__closeLayerTOCButton{width:32px;height:32px;background-color:#fff !important}.mapTocEntry{position:relative;padding:8px;border-bottom:1px solid #F5F7FA}.mapTocEntry:hover,.mapTocEntry:focus,.mapTocEntry:focus-within{z-index:2}.mapTocEntry:hover .mapTocEntry__layerIcons,.mapTocEntry:hover .mapTocEntry__detailsToggle,.mapTocEntry:focus .mapTocEntry__layerIcons,.mapTocEntry:focus .mapTocEntry__detailsToggle,.mapTocEntry:focus-within .mapTocEntry__layerIcons,.mapTocEntry:focus-within .mapTocEntry__detailsToggle{display:block;animation:mapTocEntryBecomeVisible 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.mapTocEntry .mapTocEntry__layerIcons:hover,.mapTocEntry .mapTocEntry__layerIcons:focus,.mapTocEntry .mapTocEntry__detailsToggle:hover,.mapTocEntry .mapTocEntry__detailsToggle:focus{display:block;animation:mapTocEntryBecomeVisible 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.mapTocEntry-isDragging{box-shadow:0 0.9px 4px -1px rgba(0,0,0,0.08),0 2.6px 8px -1px rgba(0,0,0,0.06),0 5.7px 12px -1px rgba(0,0,0,0.05),0 15px 15px -1px rgba(0,0,0,0.04)}.mapTocEntry-isDraggingOver{background-color:#fff;pointer-events:none !important}.mapTocEntry-isSelected{background-color:#edf0f5}.mapTocEntry-visible,.mapTocEntry-notVisible{display:flex}.mapLayTocActions{overflow:hidden;flex-grow:1}.mapLayTocActions__popoverAnchor,.mapLayTocActions__tooltipAnchor{max-width:100%}.mapTocEntry-notVisible .mapTocEntry__layerName{opacity:.5}.mapTocEntry__grab:hover{cursor:grab}.mapTocEntry__layerName{font-weight:500}.mapTocEntry__layerNameText{display:flex;align-items:center}.mapTocEntry__layerNameIcon{flex-shrink:0;margin-right:8px}.mapTocEntry__layerNameIcon>*{vertical-align:sub}.mapTocEntry__layerIcons{flex-shrink:0;display:none}.mapTocEntry__detailsToggle{position:absolute;display:none;left:50%;top:32px;transform:translateX(-50%)}.mapTocEntry__detailsToggleButton{background-color:#fff;border:1px solid #D3DAE6;color:#343741;border-radius:3px;height:16px;width:32px;line-height:16px;text-align:center}.mapTocEntry__detailsToggleButton:focus{outline:2px solid currentColor}.mapTocEntry__detailsToggleButton:focus:focus-visible{outline-style:auto}.mapTocEntry__detailsToggleButton:focus:not(:focus-visible){outline:none}.mapTocEntry__layerDetails{-webkit-mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);background-color:#fafbfd;padding:16px 8px 8px;margin:8px -8px -8px}@keyframes mapTocEntryBecomeVisible{0%{opacity:0}100%{opacity:1}}.mapViewControl__coordinates{text-shadow:0 0 2px #fff,0 0 1px #fff,0 0 1px #fff,0 0 1px #fff,0 0 1px #fff 0 0 1px #fff 0 0 1px #fff;justify-content:center;pointer-events:none}.mapDrawControl__geometryFilterForm{padding:8px}.mapToolbarOverlay{position:absolute;top:84px;left:12px;z-index:2}.mapToolbarOverlay__button,.mapToolbarOverlay__buttonGroup{position:relative;transition:transform 250ms ease-in-out,background 250ms ease-in-out}.mapToolbarOverlay__button:hover,.mapToolbarOverlay__buttonGroup:hover{transform:translateY(-1px)}.mapToolbarOverlay__button .euiButtonIcon:hover,.mapToolbarOverlay__buttonGroup .euiButtonIcon:hover{transform:translateY(0)}.mapToolbarOverlay__button .euiButtonIcon:focus:not(:hover),.mapToolbarOverlay__buttonGroup .euiButtonIcon:focus:not(:hover){background:none}.mapToolbarOverlay__buttonGroup{border-radius:4px;overflow:hidden;display:flex;flex-direction:column}.mapToolbarOverlay__buttonGroup .euiButtonIcon{border-radius:0}.mapFeatureTooltip_table{width:100%;max-height:calc(49vh - 64px)}.mapFeatureTooltip_table td{padding:4px}.mapFeatureTooltip_row{border-bottom:1px solid #F5F7FA}.mapFeatureTooltip_actionLinks{padding:4px}.mapFeatureTooltip_backButton{padding-left:0}.mapFeatureTooltip__propertyLabel{max-width:128px;font-weight:600}.mapFeatureTooltip_actionsRow>span{display:flex;justify-content:flex-end}.mapFeatureTooltip_layerIcon img{margin-bottom:0}.mapScaleControl{position:absolute;z-index:1000;left:12px;bottom:12px;pointer-events:none;color:#343741;border-left:2px solid #343741;border-bottom:2px solid #343741;text-align:right}.mapScaleControlFullScreen{bottom:48px}.mapActionSelectIcon{margin-right:8px}.mapMetricEditorPanel{margin-bottom:8px}.mapMetricEditorPanel__metricEditor{padding:12px 0;border-top:1px solid #D3DAE6}.mapMetricEditorPanel__metricEditor:first-child{padding-top:0;border-top:none}.mapMetricEditorPanel__metricEditor:last-child{margin-bottom:12px;border-bottom:1px solid #D3DAE6}.mapMetricEditorPanel__metricRemoveButton{padding-top:12px;text-align:right}.mapGeometryFilter__geoFieldSuperSelect{height:48px}.mapGeometryFilter__geoFieldSuperSelectWrapper{height:72px}.mapGeometryFilter__geoFieldItem{padding:4px}.mapTooltipSelector__propertyRow{display:flex;padding:4px 0;border-bottom:1px solid #D3DAE6;background-color:#fff}.mapTooltipSelector__propertyRow:hover .mapTooltipSelector__propertyIcons,.mapTooltipSelector__propertyRow:focus .mapTooltipSelector__propertyIcons,.mapTooltipSelector__propertyRow:focus-within .mapTooltipSelector__propertyIcons{display:block;animation:mapPropertyIconsBecomeVisible 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.mapTooltipSelector__propertyRow .mapTooltipSelector__propertyIcons:hover,.mapTooltipSelector__propertyRow .mapTooltipSelector__propertyIcons:focus{display:block;animation:mapPropertyIconsBecomeVisible 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.mapTooltipSelector__propertyRow-isDragging{box-shadow:0 0.9px 4px -1px rgba(0,0,0,0.08),0 2.6px 8px -1px rgba(0,0,0,0.06),0 5.7px 12px -1px rgba(0,0,0,0.05),0 15px 15px -1px rgba(0,0,0,0.04)}.mapTooltipSelector__propertyRow-isDraggingOver{pointer-events:none !important}.mapTooltipSelector__propertyContent{overflow:hidden;flex-grow:1;min-height:24px}.mapTooltipSelector__propertyIcons{flex-shrink:0;display:none}.mapTooltipSelector__grab:hover{cursor:grab}@keyframes mapPropertyIconsBecomeVisible{0%{opacity:0}100%{opacity:1}}.mapColorGradient{width:100%;height:4px;position:relative;top:0;right:0;bottom:0;left:0}.mapFillableCircle{overflow:visible}.mapStyleFormDisabledTooltip{width:100%}.mapColorStop{position:relative}.mapColorStop+.mapColorStop{margin-top:8px}.mapIconSelectSymbol__inputButton{margin-left:8px}.mapLegendIconPreview{width:24px}.vectorStyleLegendSpacer:not(:last-child){margin-bottom:8px}.mapLayersWizardIcon{margin-top:8px}.mapLayersWizardIcon__highlight{fill:#000}.mapLayersWizardIcon__background{fill:#D3DAE6}.mapLayersWizardIcon__backgroundDarker{fill:#98A2B3}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(52),_interopRequireWildcard=__webpack_require__(150);exports.__esModule=!0,exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(2)),_Context=(_interopRequireDefault(__webpack_require__(229)),__webpack_require__(66)),_Subscription=_interopRequireDefault(__webpack_require__(107));var _default=function(_ref){var store=_ref.store,context=_ref.context,children=_ref.children,contextValue=(0,_react.useMemo)((function(){var subscription=new _Subscription.default(store);return subscription.onStateChange=subscription.notifyNestedSubs,{store:store,subscription:subscription}}),[store]),previousState=(0,_react.useMemo)((function(){return store.getState()}),[store]);(0,_react.useEffect)((function(){var subscription=contextValue.subscription;return subscription.trySubscribe(),previousState!==store.getState()&&subscription.notifyNestedSubs(),function(){subscription.tryUnsubscribe(),subscription.onStateChange=null}}),[contextValue,previousState]);var Context=context||_Context.ReactReduxContext;return _react.default.createElement(Context.Provider,{value:contextValue},children)};exports.default=_default},function(module,exports){function _typeof(obj){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?module.exports=_typeof=function(obj){return typeof obj}:module.exports=_typeof=function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}module.exports=_typeof},function(module,exports,__webpack_require__){module.exports=__webpack_require__(230)()},function(module,exports,__webpack_require__){"use strict";var ReactPropTypesSecret=__webpack_require__(231);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret!==ReactPropTypesSecret){var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw err.name="Invariant Violation",err}}function getShim(){return shim}shim.isRequired=shim;var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return ReactPropTypes.PropTypes=ReactPropTypes,ReactPropTypes}},function(module,exports,__webpack_require__){"use strict";module.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(module,exports,__webpack_require__){"use strict";var reactIs=__webpack_require__(153),REACT_STATICS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KNOWN_STATICS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};function getStatics(component){return reactIs.isMemo(component)?MEMO_STATICS:TYPE_STATICS[component.$$typeof]||REACT_STATICS}TYPE_STATICS[reactIs.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;var defineProperty=Object.defineProperty,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf=Object.getPrototypeOf,objectPrototype=Object.prototype;module.exports=function hoistNonReactStatics(targetComponent,sourceComponent,blacklist){if("string"!=typeof sourceComponent){if(objectPrototype){var inheritedComponent=getPrototypeOf(sourceComponent);inheritedComponent&&inheritedComponent!==objectPrototype&&hoistNonReactStatics(targetComponent,inheritedComponent,blacklist)}var keys=getOwnPropertyNames(sourceComponent);getOwnPropertySymbols&&(keys=keys.concat(getOwnPropertySymbols(sourceComponent)));for(var targetStatics=getStatics(targetComponent),sourceStatics=getStatics(sourceComponent),i=0;i<keys.length;++i){var key=keys[i];if(!(KNOWN_STATICS[key]||blacklist&&blacklist[key]||sourceStatics&&sourceStatics[key]||targetStatics&&targetStatics[key])){var descriptor=getOwnPropertyDescriptor(sourceComponent,key);try{defineProperty(targetComponent,key,descriptor)}catch(e){}}}}return targetComponent}},function(module,exports,__webpack_require__){"use strict";
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b="function"==typeof Symbol&&Symbol.for,c=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,k=b?Symbol.for("react.context"):60110,l=b?Symbol.for("react.async_mode"):60111,m=b?Symbol.for("react.concurrent_mode"):60111,n=b?Symbol.for("react.forward_ref"):60112,p=b?Symbol.for("react.suspense"):60113,q=b?Symbol.for("react.suspense_list"):60120,r=b?Symbol.for("react.memo"):60115,t=b?Symbol.for("react.lazy"):60116,v=b?Symbol.for("react.block"):60121,w=b?Symbol.for("react.fundamental"):60117,x=b?Symbol.for("react.responder"):60118,y=b?Symbol.for("react.scope"):60119;function z(a){if("object"==typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l,exports.ConcurrentMode=m,exports.ContextConsumer=k,exports.ContextProvider=h,exports.Element=c,exports.ForwardRef=n,exports.Fragment=e,exports.Lazy=t,exports.Memo=r,exports.Portal=d,exports.Profiler=g,exports.StrictMode=f,exports.Suspense=p,exports.isAsyncMode=function(a){return A(a)||z(a)===l},exports.isConcurrentMode=A,exports.isContextConsumer=function(a){return z(a)===k},exports.isContextProvider=function(a){return z(a)===h},exports.isElement=function(a){return"object"==typeof a&&null!==a&&a.$$typeof===c},exports.isForwardRef=function(a){return z(a)===n},exports.isFragment=function(a){return z(a)===e},exports.isLazy=function(a){return z(a)===t},exports.isMemo=function(a){return z(a)===r},exports.isPortal=function(a){return z(a)===d},exports.isProfiler=function(a){return z(a)===g},exports.isStrictMode=function(a){return z(a)===f},exports.isSuspense=function(a){return z(a)===p},exports.isValidElementType=function(a){return"string"==typeof a||"function"==typeof a||a===e||a===m||a===g||a===f||a===p||a===q||"object"==typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)},exports.typeOf=z},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(52);exports.__esModule=!0,exports.createConnect=createConnect,exports.default=void 0;var _extends2=_interopRequireDefault(__webpack_require__(108)),_objectWithoutPropertiesLoose2=_interopRequireDefault(__webpack_require__(109)),_connectAdvanced=_interopRequireDefault(__webpack_require__(152)),_shallowEqual=_interopRequireDefault(__webpack_require__(155)),_mapDispatchToProps=_interopRequireDefault(__webpack_require__(235)),_mapStateToProps=_interopRequireDefault(__webpack_require__(239)),_mergeProps=_interopRequireDefault(__webpack_require__(240)),_selectorFactory=_interopRequireDefault(__webpack_require__(241));function match(arg,factories,name){for(var i=factories.length-1;i>=0;i--){var result=factories[i](arg);if(result)return result}return function(dispatch,options){throw new Error("Invalid value of type "+typeof arg+" for "+name+" argument when connecting component "+options.wrappedComponentName+".")}}function strictEqual(a,b){return a===b}function createConnect(_temp){var _ref=void 0===_temp?{}:_temp,_ref$connectHOC=_ref.connectHOC,connectHOC=void 0===_ref$connectHOC?_connectAdvanced.default:_ref$connectHOC,_ref$mapStateToPropsF=_ref.mapStateToPropsFactories,mapStateToPropsFactories=void 0===_ref$mapStateToPropsF?_mapStateToProps.default:_ref$mapStateToPropsF,_ref$mapDispatchToPro=_ref.mapDispatchToPropsFactories,mapDispatchToPropsFactories=void 0===_ref$mapDispatchToPro?_mapDispatchToProps.default:_ref$mapDispatchToPro,_ref$mergePropsFactor=_ref.mergePropsFactories,mergePropsFactories=void 0===_ref$mergePropsFactor?_mergeProps.default:_ref$mergePropsFactor,_ref$selectorFactory=_ref.selectorFactory,selectorFactory=void 0===_ref$selectorFactory?_selectorFactory.default:_ref$selectorFactory;return function(mapStateToProps,mapDispatchToProps,mergeProps,_ref2){void 0===_ref2&&(_ref2={});var _ref3=_ref2,_ref3$pure=_ref3.pure,pure=void 0===_ref3$pure||_ref3$pure,_ref3$areStatesEqual=_ref3.areStatesEqual,areStatesEqual=void 0===_ref3$areStatesEqual?strictEqual:_ref3$areStatesEqual,_ref3$areOwnPropsEqua=_ref3.areOwnPropsEqual,areOwnPropsEqual=void 0===_ref3$areOwnPropsEqua?_shallowEqual.default:_ref3$areOwnPropsEqua,_ref3$areStatePropsEq=_ref3.areStatePropsEqual,areStatePropsEqual=void 0===_ref3$areStatePropsEq?_shallowEqual.default:_ref3$areStatePropsEq,_ref3$areMergedPropsE=_ref3.areMergedPropsEqual,areMergedPropsEqual=void 0===_ref3$areMergedPropsE?_shallowEqual.default:_ref3$areMergedPropsE,extraOptions=(0,_objectWithoutPropertiesLoose2.default)(_ref3,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),initMapStateToProps=match(mapStateToProps,mapStateToPropsFactories,"mapStateToProps"),initMapDispatchToProps=match(mapDispatchToProps,mapDispatchToPropsFactories,"mapDispatchToProps"),initMergeProps=match(mergeProps,mergePropsFactories,"mergeProps");return connectHOC(selectorFactory,(0,_extends2.default)({methodName:"connect",getDisplayName:function(name){return"Connect("+name+")"},shouldHandleStateChanges:Boolean(mapStateToProps),initMapStateToProps:initMapStateToProps,initMapDispatchToProps:initMapDispatchToProps,initMergeProps:initMergeProps,pure:pure,areStatesEqual:areStatesEqual,areOwnPropsEqual:areOwnPropsEqual,areStatePropsEqual:areStatePropsEqual,areMergedPropsEqual:areMergedPropsEqual},extraOptions))}}var _default=createConnect();exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.whenMapDispatchToPropsIsFunction=whenMapDispatchToPropsIsFunction,exports.whenMapDispatchToPropsIsMissing=whenMapDispatchToPropsIsMissing,exports.whenMapDispatchToPropsIsObject=whenMapDispatchToPropsIsObject,exports.default=void 0;var _redux=__webpack_require__(156),_wrapMapToProps=__webpack_require__(157);function whenMapDispatchToPropsIsFunction(mapDispatchToProps){return"function"==typeof mapDispatchToProps?(0,_wrapMapToProps.wrapMapToPropsFunc)(mapDispatchToProps,"mapDispatchToProps"):void 0}function whenMapDispatchToPropsIsMissing(mapDispatchToProps){return mapDispatchToProps?void 0:(0,_wrapMapToProps.wrapMapToPropsConstant)((function(dispatch){return{dispatch:dispatch}}))}function whenMapDispatchToPropsIsObject(mapDispatchToProps){return mapDispatchToProps&&"object"==typeof mapDispatchToProps?(0,_wrapMapToProps.wrapMapToPropsConstant)((function(dispatch){return(0,_redux.bindActionCreators)(mapDispatchToProps,dispatch)})):void 0}var _default=[whenMapDispatchToPropsIsFunction,whenMapDispatchToPropsIsMissing,whenMapDispatchToPropsIsObject];exports.default=_default},function(module,exports,__webpack_require__){"use strict";(function(global,module){Object.defineProperty(exports,"__esModule",{value:!0});var obj,root,_ponyfill=__webpack_require__(237),_ponyfill2=(obj=_ponyfill)&&obj.__esModule?obj:{default:obj};root="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:module;var result=(0,_ponyfill2.default)(root);exports.default=result}).call(this,__webpack_require__(58),__webpack_require__(90)(module))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(root){var result,_Symbol=root.Symbol;"function"==typeof _Symbol?_Symbol.observable?result=_Symbol.observable:(result=_Symbol("observable"),_Symbol.observable=result):result="@@observable";return result}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=function(obj){if("object"!=typeof obj||null===obj)return!1;var proto=Object.getPrototypeOf(obj);if(null===proto)return!0;var baseProto=proto;for(;null!==Object.getPrototypeOf(baseProto);)baseProto=Object.getPrototypeOf(baseProto);return proto===baseProto}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.whenMapStateToPropsIsFunction=whenMapStateToPropsIsFunction,exports.whenMapStateToPropsIsMissing=whenMapStateToPropsIsMissing,exports.default=void 0;var _wrapMapToProps=__webpack_require__(157);function whenMapStateToPropsIsFunction(mapStateToProps){return"function"==typeof mapStateToProps?(0,_wrapMapToProps.wrapMapToPropsFunc)(mapStateToProps,"mapStateToProps"):void 0}function whenMapStateToPropsIsMissing(mapStateToProps){return mapStateToProps?void 0:(0,_wrapMapToProps.wrapMapToPropsConstant)((function(){return{}}))}var _default=[whenMapStateToPropsIsFunction,whenMapStateToPropsIsMissing];exports.default=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(52);exports.__esModule=!0,exports.defaultMergeProps=defaultMergeProps,exports.wrapMergePropsFunc=wrapMergePropsFunc,exports.whenMergePropsIsFunction=whenMergePropsIsFunction,exports.whenMergePropsIsOmitted=whenMergePropsIsOmitted,exports.default=void 0;var _extends2=_interopRequireDefault(__webpack_require__(108));_interopRequireDefault(__webpack_require__(158));function defaultMergeProps(stateProps,dispatchProps,ownProps){return(0,_extends2.default)({},ownProps,{},stateProps,{},dispatchProps)}function wrapMergePropsFunc(mergeProps){return function(dispatch,_ref){_ref.displayName;var mergedProps,pure=_ref.pure,areMergedPropsEqual=_ref.areMergedPropsEqual,hasRunOnce=!1;return function(stateProps,dispatchProps,ownProps){var nextMergedProps=mergeProps(stateProps,dispatchProps,ownProps);return hasRunOnce?pure&&areMergedPropsEqual(nextMergedProps,mergedProps)||(mergedProps=nextMergedProps):(hasRunOnce=!0,mergedProps=nextMergedProps),mergedProps}}}function whenMergePropsIsFunction(mergeProps){return"function"==typeof mergeProps?wrapMergePropsFunc(mergeProps):void 0}function whenMergePropsIsOmitted(mergeProps){return mergeProps?void 0:function(){return defaultMergeProps}}var _default=[whenMergePropsIsFunction,whenMergePropsIsOmitted];exports.default=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(52);exports.__esModule=!0,exports.impureFinalPropsSelectorFactory=impureFinalPropsSelectorFactory,exports.pureFinalPropsSelectorFactory=pureFinalPropsSelectorFactory,exports.default=function(dispatch,_ref2){var initMapStateToProps=_ref2.initMapStateToProps,initMapDispatchToProps=_ref2.initMapDispatchToProps,initMergeProps=_ref2.initMergeProps,options=(0,_objectWithoutPropertiesLoose2.default)(_ref2,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),mapStateToProps=initMapStateToProps(dispatch,options),mapDispatchToProps=initMapDispatchToProps(dispatch,options),mergeProps=initMergeProps(dispatch,options);0;return(options.pure?pureFinalPropsSelectorFactory:impureFinalPropsSelectorFactory)(mapStateToProps,mapDispatchToProps,mergeProps,dispatch,options)};var _objectWithoutPropertiesLoose2=_interopRequireDefault(__webpack_require__(109));_interopRequireDefault(__webpack_require__(242));function impureFinalPropsSelectorFactory(mapStateToProps,mapDispatchToProps,mergeProps,dispatch){return function(state,ownProps){return mergeProps(mapStateToProps(state,ownProps),mapDispatchToProps(dispatch,ownProps),ownProps)}}function pureFinalPropsSelectorFactory(mapStateToProps,mapDispatchToProps,mergeProps,dispatch,_ref){var state,ownProps,stateProps,dispatchProps,mergedProps,areStatesEqual=_ref.areStatesEqual,areOwnPropsEqual=_ref.areOwnPropsEqual,areStatePropsEqual=_ref.areStatePropsEqual,hasRunAtLeastOnce=!1;function handleSubsequentCalls(nextState,nextOwnProps){var nextStateProps,statePropsChanged,propsChanged=!areOwnPropsEqual(nextOwnProps,ownProps),stateChanged=!areStatesEqual(nextState,state);return state=nextState,ownProps=nextOwnProps,propsChanged&&stateChanged?(stateProps=mapStateToProps(state,ownProps),mapDispatchToProps.dependsOnOwnProps&&(dispatchProps=mapDispatchToProps(dispatch,ownProps)),mergedProps=mergeProps(stateProps,dispatchProps,ownProps)):propsChanged?(mapStateToProps.dependsOnOwnProps&&(stateProps=mapStateToProps(state,ownProps)),mapDispatchToProps.dependsOnOwnProps&&(dispatchProps=mapDispatchToProps(dispatch,ownProps)),mergedProps=mergeProps(stateProps,dispatchProps,ownProps)):stateChanged?(nextStateProps=mapStateToProps(state,ownProps),statePropsChanged=!areStatePropsEqual(nextStateProps,stateProps),stateProps=nextStateProps,statePropsChanged&&(mergedProps=mergeProps(stateProps,dispatchProps,ownProps)),mergedProps):mergedProps}return function(nextState,nextOwnProps){return hasRunAtLeastOnce?handleSubsequentCalls(nextState,nextOwnProps):(stateProps=mapStateToProps(state=nextState,ownProps=nextOwnProps),dispatchProps=mapDispatchToProps(dispatch,ownProps),mergedProps=mergeProps(stateProps,dispatchProps,ownProps),hasRunAtLeastOnce=!0,mergedProps)}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(52);exports.__esModule=!0,exports.default=function(mapStateToProps,mapDispatchToProps,mergeProps,displayName){verify(mapStateToProps,"mapStateToProps",displayName),verify(mapDispatchToProps,"mapDispatchToProps",displayName),verify(mergeProps,"mergeProps",displayName)};var _warning=_interopRequireDefault(__webpack_require__(159));function verify(selector,methodName,displayName){if(!selector)throw new Error("Unexpected value for "+methodName+" in "+displayName+".");"mapStateToProps"!==methodName&&"mapDispatchToProps"!==methodName||Object.prototype.hasOwnProperty.call(selector,"dependsOnOwnProps")||(0,_warning.default)("The selector for "+methodName+" of "+displayName+" did not specify a value for dependsOnOwnProps.")}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.createDispatchHook=createDispatchHook,exports.useDispatch=void 0;var _Context=__webpack_require__(66),_useStore=__webpack_require__(160);function createDispatchHook(context){void 0===context&&(context=_Context.ReactReduxContext);var useStore=context===_Context.ReactReduxContext?_useStore.useStore:(0,_useStore.createStoreHook)(context);return function(){return useStore().dispatch}}var useDispatch=createDispatchHook();exports.useDispatch=useDispatch},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(52);exports.__esModule=!0,exports.createSelectorHook=createSelectorHook,exports.useSelector=void 0;var _react=__webpack_require__(2),_useReduxContext2=__webpack_require__(161),_Subscription=_interopRequireDefault(__webpack_require__(107)),_useIsomorphicLayoutEffect=__webpack_require__(154),_Context=__webpack_require__(66),refEquality=function(a,b){return a===b};function createSelectorHook(context){void 0===context&&(context=_Context.ReactReduxContext);var useReduxContext=context===_Context.ReactReduxContext?_useReduxContext2.useReduxContext:function(){return(0,_react.useContext)(context)};return function(selector,equalityFn){void 0===equalityFn&&(equalityFn=refEquality);var _useReduxContext=useReduxContext();return function(selector,equalityFn,store,contextSub){var selectedState,forceRender=(0,_react.useReducer)((function(s){return s+1}),0)[1],subscription=(0,_react.useMemo)((function(){return new _Subscription.default(store,contextSub)}),[store,contextSub]),latestSubscriptionCallbackError=(0,_react.useRef)(),latestSelector=(0,_react.useRef)(),latestSelectedState=(0,_react.useRef)();try{selectedState=selector!==latestSelector.current||latestSubscriptionCallbackError.current?selector(store.getState()):latestSelectedState.current}catch(err){throw latestSubscriptionCallbackError.current&&(err.message+="\nThe error may be correlated with this previous error:\n"+latestSubscriptionCallbackError.current.stack+"\n\n"),err}return(0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)((function(){latestSelector.current=selector,latestSelectedState.current=selectedState,latestSubscriptionCallbackError.current=void 0})),(0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)((function(){function checkForUpdates(){try{var newSelectedState=latestSelector.current(store.getState());if(equalityFn(newSelectedState,latestSelectedState.current))return;latestSelectedState.current=newSelectedState}catch(err){latestSubscriptionCallbackError.current=err}forceRender({})}return subscription.onStateChange=checkForUpdates,subscription.trySubscribe(),checkForUpdates(),function(){return subscription.tryUnsubscribe()}}),[store,subscription]),selectedState}(selector,equalityFn,_useReduxContext.store,_useReduxContext.subscription)}}var useSelector=createSelectorHook();exports.useSelector=useSelector},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.unstable_batchedUpdates=void 0;var _reactDom=__webpack_require__(25);exports.unstable_batchedUpdates=_reactDom.unstable_batchedUpdates},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var invariant_1=__webpack_require__(63);function inRing(pt,ring,ignoreBoundary){var isInside=!1;ring[0][0]===ring[ring.length-1][0]&&ring[0][1]===ring[ring.length-1][1]&&(ring=ring.slice(0,ring.length-1));for(var i=0,j=ring.length-1;i<ring.length;j=i++){var xi=ring[i][0],yi=ring[i][1],xj=ring[j][0],yj=ring[j][1];if(pt[1]*(xi-xj)+yi*(xj-pt[0])+yj*(pt[0]-xi)==0&&(xi-pt[0])*(xj-pt[0])<=0&&(yi-pt[1])*(yj-pt[1])<=0)return!ignoreBoundary;yi>pt[1]!=yj>pt[1]&&pt[0]<(xj-xi)*(pt[1]-yi)/(yj-yi)+xi&&(isInside=!isInside)}return isInside}exports.default=function(point,polygon,options){if(void 0===options&&(options={}),!point)throw new Error("point is required");if(!polygon)throw new Error("polygon is required");var pt=invariant_1.getCoord(point),geom=invariant_1.getGeom(polygon),type=geom.type,bbox=polygon.bbox,polys=geom.coordinates;if(bbox&&!1===function(pt,bbox){return bbox[0]<=pt[0]&&bbox[1]<=pt[1]&&bbox[2]>=pt[0]&&bbox[3]>=pt[1]}(pt,bbox))return!1;"Polygon"===type&&(polys=[polys]);for(var insidePoly=!1,i=0;i<polys.length&&!insidePoly;i++)if(inRing(pt,polys[i][0],options.ignoreBoundary)){for(var inHole=!1,k=1;k<polys[i].length&&!inHole;)inRing(pt,polys[i][k],!options.ignoreBoundary)&&(inHole=!0),k++;inHole||(insidePoly=!0)}return insidePoly}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var invariant_1=__webpack_require__(63);function isPointOnLineSegment(lineSegmentStart,lineSegmentEnd,pt,excludeBoundary){var x=pt[0],y=pt[1],x1=lineSegmentStart[0],y1=lineSegmentStart[1],x2=lineSegmentEnd[0],y2=lineSegmentEnd[1],dxl=x2-x1,dyl=y2-y1;return 0==(pt[0]-x1)*dyl-(pt[1]-y1)*dxl&&(excludeBoundary?"start"===excludeBoundary?Math.abs(dxl)>=Math.abs(dyl)?dxl>0?x1<x&&x<=x2:x2<=x&&x<x1:dyl>0?y1<y&&y<=y2:y2<=y&&y<y1:"end"===excludeBoundary?Math.abs(dxl)>=Math.abs(dyl)?dxl>0?x1<=x&&x<x2:x2<x&&x<=x1:dyl>0?y1<=y&&y<y2:y2<y&&y<=y1:"both"===excludeBoundary&&(Math.abs(dxl)>=Math.abs(dyl)?dxl>0?x1<x&&x<x2:x2<x&&x<x1:dyl>0?y1<y&&y<y2:y2<y&&y<y1):Math.abs(dxl)>=Math.abs(dyl)?dxl>0?x1<=x&&x<=x2:x2<=x&&x<=x1:dyl>0?y1<=y&&y<=y2:y2<=y&&y<=y1)}exports.default=function(pt,line,options){void 0===options&&(options={});for(var ptCoords=invariant_1.getCoord(pt),lineCoords=invariant_1.getCoords(line),i=0;i<lineCoords.length-1;i++){var ignoreBoundary=!1;if(options.ignoreEndVertices&&(0===i&&(ignoreBoundary="start"),i===lineCoords.length-2&&(ignoreBoundary="end"),0===i&&i+1===lineCoords.length-1&&(ignoreBoundary="both")),isPointOnLineSegment(lineCoords[i],lineCoords[i+1],ptCoords,ignoreBoundary))return!0}return!1}},function(module,exports,__webpack_require__){"use strict";function defaultEqualityCheck(a,b){return a===b}function areArgumentsShallowlyEqual(equalityCheck,prev,next){if(null===prev||null===next||prev.length!==next.length)return!1;for(var length=prev.length,i=0;i<length;i++)if(!equalityCheck(prev[i],next[i]))return!1;return!0}function defaultMemoize(func){var equalityCheck=arguments.length>1&&void 0!==arguments[1]?arguments[1]:defaultEqualityCheck,lastArgs=null,lastResult=null;return function(){return areArgumentsShallowlyEqual(equalityCheck,lastArgs,arguments)||(lastResult=func.apply(null,arguments)),lastArgs=arguments,lastResult}}function getDependencies(funcs){var dependencies=Array.isArray(funcs[0])?funcs[0]:funcs;if(!dependencies.every((function(dep){return"function"==typeof dep}))){var dependencyTypes=dependencies.map((function(dep){return typeof dep})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+dependencyTypes+"]")}return dependencies}function createSelectorCreator(memoize){for(var _len=arguments.length,memoizeOptions=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)memoizeOptions[_key-1]=arguments[_key];return function(){for(var _len2=arguments.length,funcs=Array(_len2),_key2=0;_key2<_len2;_key2++)funcs[_key2]=arguments[_key2];var recomputations=0,resultFunc=funcs.pop(),dependencies=getDependencies(funcs),memoizedResultFunc=memoize.apply(void 0,[function(){return recomputations++,resultFunc.apply(null,arguments)}].concat(memoizeOptions)),selector=memoize((function(){for(var params=[],length=dependencies.length,i=0;i<length;i++)params.push(dependencies[i].apply(null,arguments));return memoizedResultFunc.apply(null,params)}));return selector.resultFunc=resultFunc,selector.dependencies=dependencies,selector.recomputations=function(){return recomputations},selector.resetRecomputations=function(){return recomputations=0},selector}}exports.__esModule=!0,exports.defaultMemoize=defaultMemoize,exports.createSelectorCreator=createSelectorCreator,exports.createStructuredSelector=function(selectors){var selectorCreator=arguments.length>1&&void 0!==arguments[1]?arguments[1]:createSelector;if("object"!=typeof selectors)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof selectors);var objectKeys=Object.keys(selectors);return selectorCreator(objectKeys.map((function(key){return selectors[key]})),(function(){for(var _len3=arguments.length,values=Array(_len3),_key3=0;_key3<_len3;_key3++)values[_key3]=arguments[_key3];return values.reduce((function(composition,value,index){return composition[objectKeys[index]]=value,composition}),{})}))};var createSelector=exports.createSelector=createSelectorCreator(defaultMemoize)},function(module,exports,__webpack_require__){(function(module,global){var __WEBPACK_AMD_DEFINE_RESULT__;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(root){exports&&exports.nodeType,module&&module.nodeType;var freeGlobal="object"==typeof global&&global;freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal&&freeGlobal.self;var punycode,maxInt=2147483647,regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},floor=Math.floor,stringFromCharCode=String.fromCharCode;function error(type){throw new RangeError(errors[type])}function map(array,fn){for(var length=array.length,result=[];length--;)result[length]=fn(array[length]);return result}function mapDomain(string,fn){var parts=string.split("@"),result="";return parts.length>1&&(result=parts[0]+"@",string=parts[1]),result+map((string=string.replace(regexSeparators,".")).split("."),fn).join(".")}function ucs2decode(string){for(var value,extra,output=[],counter=0,length=string.length;counter<length;)(value=string.charCodeAt(counter++))>=55296&&value<=56319&&counter<length?56320==(64512&(extra=string.charCodeAt(counter++)))?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),counter--):output.push(value);return output}function ucs2encode(array){return map(array,(function(value){var output="";return value>65535&&(output+=stringFromCharCode((value-=65536)>>>10&1023|55296),value=56320|1023&value),output+=stringFromCharCode(value)})).join("")}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((0!=flag)<<5)}function adapt(delta,numPoints,firstTime){var k=0;for(delta=firstTime?floor(delta/700):delta>>1,delta+=floor(delta/numPoints);delta>455;k+=36)delta=floor(delta/35);return floor(k+36*delta/(delta+38))}function decode(input){var out,basic,j,index,oldi,w,k,digit,t,baseMinusT,codePoint,output=[],inputLength=input.length,i=0,n=128,bias=72;for((basic=input.lastIndexOf("-"))<0&&(basic=0),j=0;j<basic;++j)input.charCodeAt(j)>=128&&error("not-basic"),output.push(input.charCodeAt(j));for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=36;index>=inputLength&&error("invalid-input"),((digit=(codePoint=input.charCodeAt(index++))-48<10?codePoint-22:codePoint-65<26?codePoint-65:codePoint-97<26?codePoint-97:36)>=36||digit>floor((maxInt-i)/w))&&error("overflow"),i+=digit*w,!(digit<(t=k<=bias?1:k>=bias+26?26:k-bias));k+=36)w>floor(maxInt/(baseMinusT=36-t))&&error("overflow"),w*=baseMinusT;bias=adapt(i-oldi,out=output.length+1,0==oldi),floor(i/out)>maxInt-n&&error("overflow"),n+=floor(i/out),i%=out,output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,inputLength,handledCPCountPlusOne,baseMinusT,qMinusT,output=[];for(inputLength=(input=ucs2decode(input)).length,n=128,delta=0,bias=72,j=0;j<inputLength;++j)(currentValue=input[j])<128&&output.push(stringFromCharCode(currentValue));for(handledCPCount=basicLength=output.length,basicLength&&output.push("-");handledCPCount<inputLength;){for(m=maxInt,j=0;j<inputLength;++j)(currentValue=input[j])>=n&&currentValue<m&&(m=currentValue);for(m-n>floor((maxInt-delta)/(handledCPCountPlusOne=handledCPCount+1))&&error("overflow"),delta+=(m-n)*handledCPCountPlusOne,n=m,j=0;j<inputLength;++j)if((currentValue=input[j])<n&&++delta>maxInt&&error("overflow"),currentValue==n){for(q=delta,k=36;!(q<(t=k<=bias?1:k>=bias+26?26:k-bias));k+=36)qMinusT=q-t,baseMinusT=36-t,output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0))),q=floor(qMinusT/baseMinusT);output.push(stringFromCharCode(digitToBasic(q,0))),bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength),delta=0,++handledCPCount}++delta,++n}return output.join("")}punycode={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:function(input){return mapDomain(input,(function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string}))},toUnicode:function(input){return mapDomain(input,(function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string}))}},void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return punycode}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()}).call(this,__webpack_require__(90)(module),__webpack_require__(58))},function(module,exports,__webpack_require__){"use strict";module.exports={isString:function(arg){return"string"==typeof arg},isObject:function(arg){return"object"==typeof arg&&null!==arg},isNull:function(arg){return null===arg},isNullOrUndefined:function(arg){return null==arg}}},function(module,exports,__webpack_require__){"use strict";exports.decode=exports.parse=__webpack_require__(252),exports.encode=exports.stringify=__webpack_require__(253)},function(module,exports,__webpack_require__){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&",eq=eq||"=";var obj={};if("string"!=typeof qs||0===qs.length)return obj;var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;options&&"number"==typeof options.maxKeys&&(maxKeys=options.maxKeys);var len=qs.length;maxKeys>0&&len>maxKeys&&(len=maxKeys);for(var i=0;i<len;++i){var kstr,vstr,k,v,x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq);idx>=0?(kstr=x.substr(0,idx),vstr=x.substr(idx+1)):(kstr=x,vstr=""),k=decodeURIComponent(kstr),v=decodeURIComponent(vstr),hasOwnProperty(obj,k)?isArray(obj[k])?obj[k].push(v):obj[k]=[obj[k],v]:obj[k]=v}return obj};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)}},function(module,exports,__webpack_require__){"use strict";var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){return sep=sep||"&",eq=eq||"=",null===obj&&(obj=void 0),"object"==typeof obj?map(objectKeys(obj),(function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;return isArray(obj[k])?map(obj[k],(function(v){return ks+encodeURIComponent(stringifyPrimitive(v))})).join(sep):ks+encodeURIComponent(stringifyPrimitive(obj[k]))})).join(sep):name?encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj)):""};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)};function map(xs,f){if(xs.map)return xs.map(f);for(var res=[],i=0;i<xs.length;i++)res.push(f(xs[i],i));return res}var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&res.push(key);return res}},function(module,exports,__webpack_require__){!function(exports){"use strict";function identity(x){return x}function transform(transform){if(null==transform)return identity;var x0,y0,kx=transform.scale[0],ky=transform.scale[1],dx=transform.translate[0],dy=transform.translate[1];return function(input,i){i||(x0=y0=0);var j=2,n=input.length,output=new Array(n);for(output[0]=(x0+=input[0])*kx+dx,output[1]=(y0+=input[1])*ky+dy;j<n;)output[j]=input[j],++j;return output}}function bbox(topology){var key,t=transform(topology.transform),x0=1/0,y0=x0,x1=-x0,y1=-x0;function bboxPoint(p){(p=t(p))[0]<x0&&(x0=p[0]),p[0]>x1&&(x1=p[0]),p[1]<y0&&(y0=p[1]),p[1]>y1&&(y1=p[1])}function bboxGeometry(o){switch(o.type){case"GeometryCollection":o.geometries.forEach(bboxGeometry);break;case"Point":bboxPoint(o.coordinates);break;case"MultiPoint":o.coordinates.forEach(bboxPoint)}}for(key in topology.arcs.forEach((function(arc){for(var p,i=-1,n=arc.length;++i<n;)(p=t(arc[i],i))[0]<x0&&(x0=p[0]),p[0]>x1&&(x1=p[0]),p[1]<y0&&(y0=p[1]),p[1]>y1&&(y1=p[1])})),topology.objects)bboxGeometry(topology.objects[key]);return[x0,y0,x1,y1]}function feature$1(topology,o){var id=o.id,bbox=o.bbox,properties=null==o.properties?{}:o.properties,geometry=object(topology,o);return null==id&&null==bbox?{type:"Feature",properties:properties,geometry:geometry}:null==bbox?{type:"Feature",id:id,properties:properties,geometry:geometry}:{type:"Feature",id:id,bbox:bbox,properties:properties,geometry:geometry}}function object(topology,o){var transformPoint=transform(topology.transform),arcs=topology.arcs;function arc(i,points){points.length&&points.pop();for(var a=arcs[i<0?~i:i],k=0,n=a.length;k<n;++k)points.push(transformPoint(a[k],k));i<0&&function(array,n){for(var t,j=array.length,i=j-n;i<--j;)t=array[i],array[i++]=array[j],array[j]=t}(points,n)}function point(p){return transformPoint(p)}function line(arcs){for(var points=[],i=0,n=arcs.length;i<n;++i)arc(arcs[i],points);return points.length<2&&points.push(points[0]),points}function ring(arcs){for(var points=line(arcs);points.length<4;)points.push(points[0]);return points}function polygon(arcs){return arcs.map(ring)}return function geometry(o){var coordinates,type=o.type;switch(type){case"GeometryCollection":return{type:type,geometries:o.geometries.map(geometry)};case"Point":coordinates=point(o.coordinates);break;case"MultiPoint":coordinates=o.coordinates.map(point);break;case"LineString":coordinates=line(o.arcs);break;case"MultiLineString":coordinates=o.arcs.map(line);break;case"Polygon":coordinates=polygon(o.arcs);break;case"MultiPolygon":coordinates=o.arcs.map(polygon);break;default:return null}return{type:type,coordinates:coordinates}}(o)}function stitch(topology,arcs){var stitchedArcs={},fragmentByStart={},fragmentByEnd={},fragments=[],emptyIndex=-1;function flush(fragmentByEnd,fragmentByStart){for(var k in fragmentByEnd){var f=fragmentByEnd[k];delete fragmentByStart[f.start],delete f.start,delete f.end,f.forEach((function(i){stitchedArcs[i<0?~i:i]=1})),fragments.push(f)}}return arcs.forEach((function(i,j){var t,arc=topology.arcs[i<0?~i:i];arc.length<3&&!arc[1][0]&&!arc[1][1]&&(t=arcs[++emptyIndex],arcs[emptyIndex]=i,arcs[j]=t)})),arcs.forEach((function(i){var f,g,e=function(i){var p1,arc=topology.arcs[i<0?~i:i],p0=arc[0];return topology.transform?(p1=[0,0],arc.forEach((function(dp){p1[0]+=dp[0],p1[1]+=dp[1]}))):p1=arc[arc.length-1],i<0?[p1,p0]:[p0,p1]}(i),start=e[0],end=e[1];if(f=fragmentByEnd[start])if(delete fragmentByEnd[f.end],f.push(i),f.end=end,g=fragmentByStart[end]){delete fragmentByStart[g.start];var fg=g===f?f:f.concat(g);fragmentByStart[fg.start=f.start]=fragmentByEnd[fg.end=g.end]=fg}else fragmentByStart[f.start]=fragmentByEnd[f.end]=f;else if(f=fragmentByStart[end])if(delete fragmentByStart[f.start],f.unshift(i),f.start=start,g=fragmentByEnd[start]){delete fragmentByEnd[g.end];var gf=g===f?f:g.concat(f);fragmentByStart[gf.start=g.start]=fragmentByEnd[gf.end=f.end]=gf}else fragmentByStart[f.start]=fragmentByEnd[f.end]=f;else fragmentByStart[(f=[i]).start=start]=fragmentByEnd[f.end=end]=f})),flush(fragmentByEnd,fragmentByStart),flush(fragmentByStart,fragmentByEnd),arcs.forEach((function(i){stitchedArcs[i<0?~i:i]||fragments.push([i])})),fragments}function meshArcs(topology,object,filter){var arcs,i,n;if(arguments.length>1)arcs=extractArcs(0,object,filter);else for(i=0,arcs=new Array(n=topology.arcs.length);i<n;++i)arcs[i]=i;return{type:"MultiLineString",arcs:stitch(topology,arcs)}}function extractArcs(topology,object,filter){var geom,arcs=[],geomsByArc=[];function extract0(i){var j=i<0?~i:i;(geomsByArc[j]||(geomsByArc[j]=[])).push({i:i,g:geom})}function extract1(arcs){arcs.forEach(extract0)}function extract2(arcs){arcs.forEach(extract1)}return function geometry(o){switch(geom=o,o.type){case"GeometryCollection":o.geometries.forEach(geometry);break;case"LineString":extract1(o.arcs);break;case"MultiLineString":case"Polygon":extract2(o.arcs);break;case"MultiPolygon":!function(arcs){arcs.forEach(extract2)}(o.arcs)}}(object),geomsByArc.forEach(null==filter?function(geoms){arcs.push(geoms[0].i)}:function(geoms){filter(geoms[0].g,geoms[geoms.length-1].g)&&arcs.push(geoms[0].i)}),arcs}function mergeArcs(topology,objects){var polygonsByArc={},polygons=[],groups=[];function extract(polygon){polygon.forEach((function(ring){ring.forEach((function(arc){(polygonsByArc[arc=arc<0?~arc:arc]||(polygonsByArc[arc]=[])).push(polygon)}))})),polygons.push(polygon)}function area(ring){return function(ring){for(var a,i=-1,n=ring.length,b=ring[n-1],area=0;++i<n;)a=b,b=ring[i],area+=a[0]*b[1]-a[1]*b[0];return Math.abs(area)}(object(topology,{type:"Polygon",arcs:[ring]}).coordinates[0])}return objects.forEach((function geometry(o){switch(o.type){case"GeometryCollection":o.geometries.forEach(geometry);break;case"Polygon":extract(o.arcs);break;case"MultiPolygon":o.arcs.forEach(extract)}})),polygons.forEach((function(polygon){if(!polygon._){var group=[],neighbors=[polygon];for(polygon._=1,groups.push(group);polygon=neighbors.pop();)group.push(polygon),polygon.forEach((function(ring){ring.forEach((function(arc){polygonsByArc[arc<0?~arc:arc].forEach((function(polygon){polygon._||(polygon._=1,neighbors.push(polygon))}))}))}))}})),polygons.forEach((function(polygon){delete polygon._})),{type:"MultiPolygon",arcs:groups.map((function(polygons){var n,arcs=[];if(polygons.forEach((function(polygon){polygon.forEach((function(ring){ring.forEach((function(arc){polygonsByArc[arc<0?~arc:arc].length<2&&arcs.push(arc)}))}))})),(n=(arcs=stitch(topology,arcs)).length)>1)for(var ki,t,i=1,k=area(arcs[0]);i<n;++i)(ki=area(arcs[i]))>k&&(t=arcs[0],arcs[0]=arcs[i],arcs[i]=t,k=ki);return arcs})).filter((function(arcs){return arcs.length>0}))}}function bisect(a,x){for(var lo=0,hi=a.length;lo<hi;){var mid=lo+hi>>>1;a[mid]<x?lo=mid+1:hi=mid}return lo}function untransform(transform){if(null==transform)return identity;var x0,y0,kx=transform.scale[0],ky=transform.scale[1],dx=transform.translate[0],dy=transform.translate[1];return function(input,i){i||(x0=y0=0);var j=2,n=input.length,output=new Array(n),x1=Math.round((input[0]-dx)/kx),y1=Math.round((input[1]-dy)/ky);for(output[0]=x1-x0,x0=x1,output[1]=y1-y0,y0=y1;j<n;)output[j]=input[j],++j;return output}}exports.bbox=bbox,exports.feature=function(topology,o){return"string"==typeof o&&(o=topology.objects[o]),"GeometryCollection"===o.type?{type:"FeatureCollection",features:o.geometries.map((function(o){return feature$1(topology,o)}))}:feature$1(topology,o)},exports.merge=function(topology){return object(topology,mergeArcs.apply(this,arguments))},exports.mergeArcs=mergeArcs,exports.mesh=function(topology){return object(topology,meshArcs.apply(this,arguments))},exports.meshArcs=meshArcs,exports.neighbors=function(objects){var indexesByArc={},neighbors=objects.map((function(){return[]}));function line(arcs,i){arcs.forEach((function(a){a<0&&(a=~a);var o=indexesByArc[a];o?o.push(i):indexesByArc[a]=[i]}))}function polygon(arcs,i){arcs.forEach((function(arc){line(arc,i)}))}var geometryType={LineString:line,MultiLineString:polygon,Polygon:polygon,MultiPolygon:function(arcs,i){arcs.forEach((function(arc){polygon(arc,i)}))}};for(var i in objects.forEach((function geometry(o,i){"GeometryCollection"===o.type?o.geometries.forEach((function(o){geometry(o,i)})):o.type in geometryType&&geometryType[o.type](o.arcs,i)})),indexesByArc)for(var indexes=indexesByArc[i],m=indexes.length,j=0;j<m;++j)for(var k=j+1;k<m;++k){var n,ij=indexes[j],ik=indexes[k];(n=neighbors[ij])[i=bisect(n,ik)]!==ik&&n.splice(i,0,ik),(n=neighbors[ik])[i=bisect(n,ij)]!==ij&&n.splice(i,0,ij)}return neighbors},exports.quantize=function(topology,transform){if(topology.transform)throw new Error("already quantized");if(transform&&transform.scale)box=topology.bbox;else{if(!((n=Math.floor(transform))>=2))throw new Error("n must be ≥2");var n,x0=(box=topology.bbox||bbox(topology))[0],y0=box[1],x1=box[2],y1=box[3];transform={scale:[x1-x0?(x1-x0)/(n-1):1,y1-y0?(y1-y0)/(n-1):1],translate:[x0,y0]}}var box,key,t=untransform(transform),inputs=topology.objects,outputs={};function quantizePoint(point){return t(point)}function quantizeGeometry(input){var output;switch(input.type){case"GeometryCollection":output={type:"GeometryCollection",geometries:input.geometries.map(quantizeGeometry)};break;case"Point":output={type:"Point",coordinates:quantizePoint(input.coordinates)};break;case"MultiPoint":output={type:"MultiPoint",coordinates:input.coordinates.map(quantizePoint)};break;default:return input}return null!=input.id&&(output.id=input.id),null!=input.bbox&&(output.bbox=input.bbox),null!=input.properties&&(output.properties=input.properties),output}for(key in inputs)outputs[key]=quantizeGeometry(inputs[key]);return{type:"Topology",bbox:box,transform:transform,objects:outputs,arcs:topology.arcs.map((function(input){var p,i=0,j=1,n=input.length,output=new Array(n);for(output[0]=t(input[0],0);++i<n;)((p=t(input[i],i))[0]||p[1])&&(output[j++]=p);return 1===j&&(output[j++]=[0,0]),output.length=j,output}))}},exports.transform=transform,exports.untransform=untransform,Object.defineProperty(exports,"__esModule",{value:!0})}(exports)},function(module,exports,__webpack_require__){const internalRe=__webpack_require__(73);module.exports={re:internalRe.re,src:internalRe.src,tokens:internalRe.t,SEMVER_SPEC_VERSION:__webpack_require__(93).SEMVER_SPEC_VERSION,SemVer:__webpack_require__(43),compareIdentifiers:__webpack_require__(112).compareIdentifiers,rcompareIdentifiers:__webpack_require__(112).rcompareIdentifiers,parse:__webpack_require__(74),valid:__webpack_require__(256),clean:__webpack_require__(257),inc:__webpack_require__(258),diff:__webpack_require__(259),major:__webpack_require__(260),minor:__webpack_require__(261),patch:__webpack_require__(262),prerelease:__webpack_require__(263),compare:__webpack_require__(55),rcompare:__webpack_require__(264),compareLoose:__webpack_require__(265),compareBuild:__webpack_require__(114),sort:__webpack_require__(266),rsort:__webpack_require__(267),gt:__webpack_require__(95),lt:__webpack_require__(115),eq:__webpack_require__(113),neq:__webpack_require__(164),gte:__webpack_require__(116),lte:__webpack_require__(117),cmp:__webpack_require__(165),coerce:__webpack_require__(268),Comparator:__webpack_require__(96),Range:__webpack_require__(56),satisfies:__webpack_require__(97),toComparators:__webpack_require__(269),maxSatisfying:__webpack_require__(270),minSatisfying:__webpack_require__(271),minVersion:__webpack_require__(272),validRange:__webpack_require__(273),outside:__webpack_require__(118),gtr:__webpack_require__(274),ltr:__webpack_require__(275),intersects:__webpack_require__(276),simplifyRange:__webpack_require__(277),subset:__webpack_require__(278)}},function(module,exports,__webpack_require__){const parse=__webpack_require__(74);module.exports=(version,options)=>{const v=parse(version,options);return v?v.version:null}},function(module,exports,__webpack_require__){const parse=__webpack_require__(74);module.exports=(version,options)=>{const s=parse(version.trim().replace(/^[=v]+/,""),options);return s?s.version:null}},function(module,exports,__webpack_require__){const SemVer=__webpack_require__(43);module.exports=(version,release,options,identifier)=>{"string"==typeof options&&(identifier=options,options=void 0);try{return new SemVer(version,options).inc(release,identifier).version}catch(er){return null}}},function(module,exports,__webpack_require__){const parse=__webpack_require__(74),eq=__webpack_require__(113);module.exports=(version1,version2)=>{if(eq(version1,version2))return null;{const v1=parse(version1),v2=parse(version2),hasPre=v1.prerelease.length||v2.prerelease.length,prefix=hasPre?"pre":"",defaultResult=hasPre?"prerelease":"";for(const key in v1)if(("major"===key||"minor"===key||"patch"===key)&&v1[key]!==v2[key])return prefix+key;return defaultResult}}},function(module,exports,__webpack_require__){const SemVer=__webpack_require__(43);module.exports=(a,loose)=>new SemVer(a,loose).major},function(module,exports,__webpack_require__){const SemVer=__webpack_require__(43);module.exports=(a,loose)=>new SemVer(a,loose).minor},function(module,exports,__webpack_require__){const SemVer=__webpack_require__(43);module.exports=(a,loose)=>new SemVer(a,loose).patch},function(module,exports,__webpack_require__){const parse=__webpack_require__(74);module.exports=(version,options)=>{const parsed=parse(version,options);return parsed&&parsed.prerelease.length?parsed.prerelease:null}},function(module,exports,__webpack_require__){const compare=__webpack_require__(55);module.exports=(a,b,loose)=>compare(b,a,loose)},function(module,exports,__webpack_require__){const compare=__webpack_require__(55);module.exports=(a,b)=>compare(a,b,!0)},function(module,exports,__webpack_require__){const compareBuild=__webpack_require__(114);module.exports=(list,loose)=>list.sort((a,b)=>compareBuild(a,b,loose))},function(module,exports,__webpack_require__){const compareBuild=__webpack_require__(114);module.exports=(list,loose)=>list.sort((a,b)=>compareBuild(b,a,loose))},function(module,exports,__webpack_require__){const SemVer=__webpack_require__(43),parse=__webpack_require__(74),{re:re,t:t}=__webpack_require__(73);module.exports=(version,options)=>{if(version instanceof SemVer)return version;if("number"==typeof version&&(version=String(version)),"string"!=typeof version)return null;let match=null;if((options=options||{}).rtl){let next;for(;(next=re[t.COERCERTL].exec(version))&&(!match||match.index+match[0].length!==version.length);)match&&next.index+next[0].length===match.index+match[0].length||(match=next),re[t.COERCERTL].lastIndex=next.index+next[1].length+next[2].length;re[t.COERCERTL].lastIndex=-1}else match=version.match(re[t.COERCE]);return null===match?null:parse(`${match[2]}.${match[3]||"0"}.${match[4]||"0"}`,options)}},function(module,exports,__webpack_require__){const Range=__webpack_require__(56);module.exports=(range,options)=>new Range(range,options).set.map(comp=>comp.map(c=>c.value).join(" ").trim().split(" "))},function(module,exports,__webpack_require__){const SemVer=__webpack_require__(43),Range=__webpack_require__(56);module.exports=(versions,range,options)=>{let max=null,maxSV=null,rangeObj=null;try{rangeObj=new Range(range,options)}catch(er){return null}return versions.forEach(v=>{rangeObj.test(v)&&(max&&-1!==maxSV.compare(v)||(max=v,maxSV=new SemVer(max,options)))}),max}},function(module,exports,__webpack_require__){const SemVer=__webpack_require__(43),Range=__webpack_require__(56);module.exports=(versions,range,options)=>{let min=null,minSV=null,rangeObj=null;try{rangeObj=new Range(range,options)}catch(er){return null}return versions.forEach(v=>{rangeObj.test(v)&&(min&&1!==minSV.compare(v)||(min=v,minSV=new SemVer(min,options)))}),min}},function(module,exports,__webpack_require__){const SemVer=__webpack_require__(43),Range=__webpack_require__(56),gt=__webpack_require__(95);module.exports=(range,loose)=>{range=new Range(range,loose);let minver=new SemVer("0.0.0");if(range.test(minver))return minver;if(minver=new SemVer("0.0.0-0"),range.test(minver))return minver;minver=null;for(let i=0;i<range.set.length;++i){range.set[i].forEach(comparator=>{const compver=new SemVer(comparator.semver.version);switch(comparator.operator){case">":0===compver.prerelease.length?compver.patch++:compver.prerelease.push(0),compver.raw=compver.format();case"":case">=":minver&&!gt(minver,compver)||(minver=compver);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+comparator.operator)}})}return minver&&range.test(minver)?minver:null}},function(module,exports,__webpack_require__){const Range=__webpack_require__(56);module.exports=(range,options)=>{try{return new Range(range,options).range||"*"}catch(er){return null}}},function(module,exports,__webpack_require__){const outside=__webpack_require__(118);module.exports=(version,range,options)=>outside(version,range,">",options)},function(module,exports,__webpack_require__){const outside=__webpack_require__(118);module.exports=(version,range,options)=>outside(version,range,"<",options)},function(module,exports,__webpack_require__){const Range=__webpack_require__(56);module.exports=(r1,r2,options)=>(r1=new Range(r1,options),r2=new Range(r2,options),r1.intersects(r2))},function(module,exports,__webpack_require__){const satisfies=__webpack_require__(97),compare=__webpack_require__(55);module.exports=(versions,range,options)=>{const set=[];let min=null,prev=null;const v=versions.sort((a,b)=>compare(a,b,options));for(const version of v){satisfies(version,range,options)?(prev=version,min||(min=version)):(prev&&set.push([min,prev]),prev=null,min=null)}min&&set.push([min,null]);const ranges=[];for(const[min,max]of set)min===max?ranges.push(min):max||min!==v[0]?max?min===v[0]?ranges.push("<="+max):ranges.push(`${min} - ${max}`):ranges.push(">="+min):ranges.push("*");const simplified=ranges.join(" || "),original="string"==typeof range.raw?range.raw:String(range);return simplified.length<original.length?simplified:range}},function(module,exports,__webpack_require__){const Range=__webpack_require__(56),{ANY:ANY}=__webpack_require__(96),satisfies=__webpack_require__(97),compare=__webpack_require__(55),simpleSubset=(sub,dom,options)=>{if(1===sub.length&&sub[0].semver===ANY)return 1===dom.length&&dom[0].semver===ANY;const eqSet=new Set;let gt,lt,gtltComp,higher,lower,hasDomLT,hasDomGT;for(const c of sub)">"===c.operator||">="===c.operator?gt=higherGT(gt,c,options):"<"===c.operator||"<="===c.operator?lt=lowerLT(lt,c,options):eqSet.add(c.semver);if(eqSet.size>1)return null;if(gt&&lt){if(gtltComp=compare(gt.semver,lt.semver,options),gtltComp>0)return null;if(0===gtltComp&&(">="!==gt.operator||"<="!==lt.operator))return null}for(const eq of eqSet){if(gt&&!satisfies(eq,String(gt),options))return null;if(lt&&!satisfies(eq,String(lt),options))return null;for(const c of dom)if(!satisfies(eq,String(c),options))return!1;return!0}for(const c of dom){if(hasDomGT=hasDomGT||">"===c.operator||">="===c.operator,hasDomLT=hasDomLT||"<"===c.operator||"<="===c.operator,gt)if(">"===c.operator||">="===c.operator){if(higher=higherGT(gt,c,options),higher===c)return!1}else if(">="===gt.operator&&!satisfies(gt.semver,String(c),options))return!1;if(lt)if("<"===c.operator||"<="===c.operator){if(lower=lowerLT(lt,c,options),lower===c)return!1}else if("<="===lt.operator&&!satisfies(lt.semver,String(c),options))return!1;if(!c.operator&&(lt||gt)&&0!==gtltComp)return!1}return!(gt&&hasDomLT&&!lt&&0!==gtltComp)&&!(lt&&hasDomGT&&!gt&&0!==gtltComp)},higherGT=(a,b,options)=>{if(!a)return b;const comp=compare(a.semver,b.semver,options);return comp>0?a:comp<0||">"===b.operator&&">="===a.operator?b:a},lowerLT=(a,b,options)=>{if(!a)return b;const comp=compare(a.semver,b.semver,options);return comp<0?a:comp>0||"<"===b.operator&&"<="===a.operator?b:a};module.exports=(sub,dom,options)=>{sub=new Range(sub,options),dom=new Range(dom,options);let sawNonNull=!1;OUTER:for(const simpleSub of sub.set){for(const simpleDom of dom.set){const isSub=simpleSubset(simpleSub,simpleDom,options);if(sawNonNull=sawNonNull||null!==isSub,isSub)continue OUTER}if(sawNonNull)return!1}return!0}},function(module,exports,__webpack_require__){"use strict";const Yallist=__webpack_require__(280),MAX=Symbol("max"),LENGTH=Symbol("length"),LENGTH_CALCULATOR=Symbol("lengthCalculator"),ALLOW_STALE=Symbol("allowStale"),MAX_AGE=Symbol("maxAge"),DISPOSE=Symbol("dispose"),NO_DISPOSE_ON_SET=Symbol("noDisposeOnSet"),LRU_LIST=Symbol("lruList"),CACHE=Symbol("cache"),UPDATE_AGE_ON_GET=Symbol("updateAgeOnGet"),naiveLength=()=>1;const get=(self,key,doUse)=>{const node=self[CACHE].get(key);if(node){const hit=node.value;if(isStale(self,hit)){if(del(self,node),!self[ALLOW_STALE])return}else doUse&&(self[UPDATE_AGE_ON_GET]&&(node.value.now=Date.now()),self[LRU_LIST].unshiftNode(node));return hit.value}},isStale=(self,hit)=>{if(!hit||!hit.maxAge&&!self[MAX_AGE])return!1;const diff=Date.now()-hit.now;return hit.maxAge?diff>hit.maxAge:self[MAX_AGE]&&diff>self[MAX_AGE]},trim=self=>{if(self[LENGTH]>self[MAX])for(let walker=self[LRU_LIST].tail;self[LENGTH]>self[MAX]&&null!==walker;){const prev=walker.prev;del(self,walker),walker=prev}},del=(self,node)=>{if(node){const hit=node.value;self[DISPOSE]&&self[DISPOSE](hit.key,hit.value),self[LENGTH]-=hit.length,self[CACHE].delete(hit.key),self[LRU_LIST].removeNode(node)}};class Entry{constructor(key,value,length,now,maxAge){this.key=key,this.value=value,this.length=length,this.now=now,this.maxAge=maxAge||0}}const forEachStep=(self,fn,node,thisp)=>{let hit=node.value;isStale(self,hit)&&(del(self,node),self[ALLOW_STALE]||(hit=void 0)),hit&&fn.call(thisp,hit.value,hit.key,self)};module.exports=class{constructor(options){if("number"==typeof options&&(options={max:options}),options||(options={}),options.max&&("number"!=typeof options.max||options.max<0))throw new TypeError("max must be a non-negative number");this[MAX]=options.max||1/0;const lc=options.length||naiveLength;if(this[LENGTH_CALCULATOR]="function"!=typeof lc?naiveLength:lc,this[ALLOW_STALE]=options.stale||!1,options.maxAge&&"number"!=typeof options.maxAge)throw new TypeError("maxAge must be a number");this[MAX_AGE]=options.maxAge||0,this[DISPOSE]=options.dispose,this[NO_DISPOSE_ON_SET]=options.noDisposeOnSet||!1,this[UPDATE_AGE_ON_GET]=options.updateAgeOnGet||!1,this.reset()}set max(mL){if("number"!=typeof mL||mL<0)throw new TypeError("max must be a non-negative number");this[MAX]=mL||1/0,trim(this)}get max(){return this[MAX]}set allowStale(allowStale){this[ALLOW_STALE]=!!allowStale}get allowStale(){return this[ALLOW_STALE]}set maxAge(mA){if("number"!=typeof mA)throw new TypeError("maxAge must be a non-negative number");this[MAX_AGE]=mA,trim(this)}get maxAge(){return this[MAX_AGE]}set lengthCalculator(lC){"function"!=typeof lC&&(lC=naiveLength),lC!==this[LENGTH_CALCULATOR]&&(this[LENGTH_CALCULATOR]=lC,this[LENGTH]=0,this[LRU_LIST].forEach(hit=>{hit.length=this[LENGTH_CALCULATOR](hit.value,hit.key),this[LENGTH]+=hit.length})),trim(this)}get lengthCalculator(){return this[LENGTH_CALCULATOR]}get length(){return this[LENGTH]}get itemCount(){return this[LRU_LIST].length}rforEach(fn,thisp){thisp=thisp||this;for(let walker=this[LRU_LIST].tail;null!==walker;){const prev=walker.prev;forEachStep(this,fn,walker,thisp),walker=prev}}forEach(fn,thisp){thisp=thisp||this;for(let walker=this[LRU_LIST].head;null!==walker;){const next=walker.next;forEachStep(this,fn,walker,thisp),walker=next}}keys(){return this[LRU_LIST].toArray().map(k=>k.key)}values(){return this[LRU_LIST].toArray().map(k=>k.value)}reset(){this[DISPOSE]&&this[LRU_LIST]&&this[LRU_LIST].length&&this[LRU_LIST].forEach(hit=>this[DISPOSE](hit.key,hit.value)),this[CACHE]=new Map,this[LRU_LIST]=new Yallist,this[LENGTH]=0}dump(){return this[LRU_LIST].map(hit=>!isStale(this,hit)&&{k:hit.key,v:hit.value,e:hit.now+(hit.maxAge||0)}).toArray().filter(h=>h)}dumpLru(){return this[LRU_LIST]}set(key,value,maxAge){if((maxAge=maxAge||this[MAX_AGE])&&"number"!=typeof maxAge)throw new TypeError("maxAge must be a number");const now=maxAge?Date.now():0,len=this[LENGTH_CALCULATOR](value,key);if(this[CACHE].has(key)){if(len>this[MAX])return del(this,this[CACHE].get(key)),!1;const item=this[CACHE].get(key).value;return this[DISPOSE]&&(this[NO_DISPOSE_ON_SET]||this[DISPOSE](key,item.value)),item.now=now,item.maxAge=maxAge,item.value=value,this[LENGTH]+=len-item.length,item.length=len,this.get(key),trim(this),!0}const hit=new Entry(key,value,len,now,maxAge);return hit.length>this[MAX]?(this[DISPOSE]&&this[DISPOSE](key,value),!1):(this[LENGTH]+=hit.length,this[LRU_LIST].unshift(hit),this[CACHE].set(key,this[LRU_LIST].head),trim(this),!0)}has(key){if(!this[CACHE].has(key))return!1;const hit=this[CACHE].get(key).value;return!isStale(this,hit)}get(key){return get(this,key,!0)}peek(key){return get(this,key,!1)}pop(){const node=this[LRU_LIST].tail;return node?(del(this,node),node.value):null}del(key){del(this,this[CACHE].get(key))}load(arr){this.reset();const now=Date.now();for(let l=arr.length-1;l>=0;l--){const hit=arr[l],expiresAt=hit.e||0;if(0===expiresAt)this.set(hit.k,hit.v);else{const maxAge=expiresAt-now;maxAge>0&&this.set(hit.k,hit.v,maxAge)}}}prune(){this[CACHE].forEach((value,key)=>get(this,key,!1))}}},function(module,exports,__webpack_require__){"use strict";function Yallist(list){var self=this;if(self instanceof Yallist||(self=new Yallist),self.tail=null,self.head=null,self.length=0,list&&"function"==typeof list.forEach)list.forEach((function(item){self.push(item)}));else if(arguments.length>0)for(var i=0,l=arguments.length;i<l;i++)self.push(arguments[i]);return self}function insert(self,node,value){var inserted=node===self.head?new Node(value,null,node,self):new Node(value,node,node.next,self);return null===inserted.next&&(self.tail=inserted),null===inserted.prev&&(self.head=inserted),self.length++,inserted}function push(self,item){self.tail=new Node(item,self.tail,null,self),self.head||(self.head=self.tail),self.length++}function unshift(self,item){self.head=new Node(item,null,self.head,self),self.tail||(self.tail=self.head),self.length++}function Node(value,prev,next,list){if(!(this instanceof Node))return new Node(value,prev,next,list);this.list=list,this.value=value,prev?(prev.next=this,this.prev=prev):this.prev=null,next?(next.prev=this,this.next=next):this.next=null}module.exports=Yallist,Yallist.Node=Node,Yallist.create=Yallist,Yallist.prototype.removeNode=function(node){if(node.list!==this)throw new Error("removing node which does not belong to this list");var next=node.next,prev=node.prev;return next&&(next.prev=prev),prev&&(prev.next=next),node===this.head&&(this.head=next),node===this.tail&&(this.tail=prev),node.list.length--,node.next=null,node.prev=null,node.list=null,next},Yallist.prototype.unshiftNode=function(node){if(node!==this.head){node.list&&node.list.removeNode(node);var head=this.head;node.list=this,node.next=head,head&&(head.prev=node),this.head=node,this.tail||(this.tail=node),this.length++}},Yallist.prototype.pushNode=function(node){if(node!==this.tail){node.list&&node.list.removeNode(node);var tail=this.tail;node.list=this,node.prev=tail,tail&&(tail.next=node),this.tail=node,this.head||(this.head=node),this.length++}},Yallist.prototype.push=function(){for(var i=0,l=arguments.length;i<l;i++)push(this,arguments[i]);return this.length},Yallist.prototype.unshift=function(){for(var i=0,l=arguments.length;i<l;i++)unshift(this,arguments[i]);return this.length},Yallist.prototype.pop=function(){if(this.tail){var res=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,res}},Yallist.prototype.shift=function(){if(this.head){var res=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,res}},Yallist.prototype.forEach=function(fn,thisp){thisp=thisp||this;for(var walker=this.head,i=0;null!==walker;i++)fn.call(thisp,walker.value,i,this),walker=walker.next},Yallist.prototype.forEachReverse=function(fn,thisp){thisp=thisp||this;for(var walker=this.tail,i=this.length-1;null!==walker;i--)fn.call(thisp,walker.value,i,this),walker=walker.prev},Yallist.prototype.get=function(n){for(var i=0,walker=this.head;null!==walker&&i<n;i++)walker=walker.next;if(i===n&&null!==walker)return walker.value},Yallist.prototype.getReverse=function(n){for(var i=0,walker=this.tail;null!==walker&&i<n;i++)walker=walker.prev;if(i===n&&null!==walker)return walker.value},Yallist.prototype.map=function(fn,thisp){thisp=thisp||this;for(var res=new Yallist,walker=this.head;null!==walker;)res.push(fn.call(thisp,walker.value,this)),walker=walker.next;return res},Yallist.prototype.mapReverse=function(fn,thisp){thisp=thisp||this;for(var res=new Yallist,walker=this.tail;null!==walker;)res.push(fn.call(thisp,walker.value,this)),walker=walker.prev;return res},Yallist.prototype.reduce=function(fn,initial){var acc,walker=this.head;if(arguments.length>1)acc=initial;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");walker=this.head.next,acc=this.head.value}for(var i=0;null!==walker;i++)acc=fn(acc,walker.value,i),walker=walker.next;return acc},Yallist.prototype.reduceReverse=function(fn,initial){var acc,walker=this.tail;if(arguments.length>1)acc=initial;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");walker=this.tail.prev,acc=this.tail.value}for(var i=this.length-1;null!==walker;i--)acc=fn(acc,walker.value,i),walker=walker.prev;return acc},Yallist.prototype.toArray=function(){for(var arr=new Array(this.length),i=0,walker=this.head;null!==walker;i++)arr[i]=walker.value,walker=walker.next;return arr},Yallist.prototype.toArrayReverse=function(){for(var arr=new Array(this.length),i=0,walker=this.tail;null!==walker;i++)arr[i]=walker.value,walker=walker.prev;return arr},Yallist.prototype.slice=function(from,to){(to=to||this.length)<0&&(to+=this.length),(from=from||0)<0&&(from+=this.length);var ret=new Yallist;if(to<from||to<0)return ret;from<0&&(from=0),to>this.length&&(to=this.length);for(var i=0,walker=this.head;null!==walker&&i<from;i++)walker=walker.next;for(;null!==walker&&i<to;i++,walker=walker.next)ret.push(walker.value);return ret},Yallist.prototype.sliceReverse=function(from,to){(to=to||this.length)<0&&(to+=this.length),(from=from||0)<0&&(from+=this.length);var ret=new Yallist;if(to<from||to<0)return ret;from<0&&(from=0),to>this.length&&(to=this.length);for(var i=this.length,walker=this.tail;null!==walker&&i>to;i--)walker=walker.prev;for(;null!==walker&&i>from;i--,walker=walker.prev)ret.push(walker.value);return ret},Yallist.prototype.splice=function(start,deleteCount,...nodes){start>this.length&&(start=this.length-1),start<0&&(start=this.length+start);for(var i=0,walker=this.head;null!==walker&&i<start;i++)walker=walker.next;var ret=[];for(i=0;walker&&i<deleteCount;i++)ret.push(walker.value),walker=this.removeNode(walker);null===walker&&(walker=this.tail),walker!==this.head&&walker!==this.tail&&(walker=walker.prev);for(i=0;i<nodes.length;i++)walker=insert(this,walker,nodes[i]);return ret},Yallist.prototype.reverse=function(){for(var head=this.head,tail=this.tail,walker=head;null!==walker;walker=walker.prev){var p=walker.prev;walker.prev=walker.next,walker.next=p}return this.head=tail,this.tail=head,this};try{__webpack_require__(281)(Yallist)}catch(er){}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Yallist){Yallist.prototype[Symbol.iterator]=function*(){for(let walker=this.head;walker;walker=walker.next)yield walker.value}}},function(module,exports,__webpack_require__){!function(exports){"use strict";var identity=function(x){return x},transform=function(transform){if(null==transform)return identity;var x0,y0,kx=transform.scale[0],ky=transform.scale[1],dx=transform.translate[0],dy=transform.translate[1];return function(input,i){i||(x0=y0=0);var j=2,n=input.length,output=new Array(n);for(output[0]=(x0+=input[0])*kx+dx,output[1]=(y0+=input[1])*ky+dy;j<n;)output[j]=input[j],++j;return output}},bbox=function(topology){var key,t=transform(topology.transform),x0=1/0,y0=x0,x1=-x0,y1=-x0;function bboxPoint(p){(p=t(p))[0]<x0&&(x0=p[0]),p[0]>x1&&(x1=p[0]),p[1]<y0&&(y0=p[1]),p[1]>y1&&(y1=p[1])}function bboxGeometry(o){switch(o.type){case"GeometryCollection":o.geometries.forEach(bboxGeometry);break;case"Point":bboxPoint(o.coordinates);break;case"MultiPoint":o.coordinates.forEach(bboxPoint)}}for(key in topology.arcs.forEach((function(arc){for(var p,i=-1,n=arc.length;++i<n;)(p=t(arc[i],i))[0]<x0&&(x0=p[0]),p[0]>x1&&(x1=p[0]),p[1]<y0&&(y0=p[1]),p[1]>y1&&(y1=p[1])})),topology.objects)bboxGeometry(topology.objects[key]);return[x0,y0,x1,y1]};function feature$1(topology,o){var id=o.id,bbox=o.bbox,properties=null==o.properties?{}:o.properties,geometry=object(topology,o);return null==id&&null==bbox?{type:"Feature",properties:properties,geometry:geometry}:null==bbox?{type:"Feature",id:id,properties:properties,geometry:geometry}:{type:"Feature",id:id,bbox:bbox,properties:properties,geometry:geometry}}function object(topology,o){var transformPoint=transform(topology.transform),arcs=topology.arcs;function arc(i,points){points.length&&points.pop();for(var a=arcs[i<0?~i:i],k=0,n=a.length;k<n;++k)points.push(transformPoint(a[k],k));i<0&&function(array,n){for(var t,j=array.length,i=j-n;i<--j;)t=array[i],array[i++]=array[j],array[j]=t}(points,n)}function point(p){return transformPoint(p)}function line(arcs){for(var points=[],i=0,n=arcs.length;i<n;++i)arc(arcs[i],points);return points.length<2&&points.push(points[0]),points}function ring(arcs){for(var points=line(arcs);points.length<4;)points.push(points[0]);return points}function polygon(arcs){return arcs.map(ring)}return function geometry(o){var coordinates,type=o.type;switch(type){case"GeometryCollection":return{type:type,geometries:o.geometries.map(geometry)};case"Point":coordinates=point(o.coordinates);break;case"MultiPoint":coordinates=o.coordinates.map(point);break;case"LineString":coordinates=line(o.arcs);break;case"MultiLineString":coordinates=o.arcs.map(line);break;case"Polygon":coordinates=polygon(o.arcs);break;case"MultiPolygon":coordinates=o.arcs.map(polygon);break;default:return null}return{type:type,coordinates:coordinates}}(o)}var stitch=function(topology,arcs){var stitchedArcs={},fragmentByStart={},fragmentByEnd={},fragments=[],emptyIndex=-1;function flush(fragmentByEnd,fragmentByStart){for(var k in fragmentByEnd){var f=fragmentByEnd[k];delete fragmentByStart[f.start],delete f.start,delete f.end,f.forEach((function(i){stitchedArcs[i<0?~i:i]=1})),fragments.push(f)}}return arcs.forEach((function(i,j){var t,arc=topology.arcs[i<0?~i:i];arc.length<3&&!arc[1][0]&&!arc[1][1]&&(t=arcs[++emptyIndex],arcs[emptyIndex]=i,arcs[j]=t)})),arcs.forEach((function(i){var f,g,e=function(i){var p1,arc=topology.arcs[i<0?~i:i],p0=arc[0];return topology.transform?(p1=[0,0],arc.forEach((function(dp){p1[0]+=dp[0],p1[1]+=dp[1]}))):p1=arc[arc.length-1],i<0?[p1,p0]:[p0,p1]}(i),start=e[0],end=e[1];if(f=fragmentByEnd[start])if(delete fragmentByEnd[f.end],f.push(i),f.end=end,g=fragmentByStart[end]){delete fragmentByStart[g.start];var fg=g===f?f:f.concat(g);fragmentByStart[fg.start=f.start]=fragmentByEnd[fg.end=g.end]=fg}else fragmentByStart[f.start]=fragmentByEnd[f.end]=f;else if(f=fragmentByStart[end])if(delete fragmentByStart[f.start],f.unshift(i),f.start=start,g=fragmentByEnd[start]){delete fragmentByEnd[g.end];var gf=g===f?f:g.concat(f);fragmentByStart[gf.start=g.start]=fragmentByEnd[gf.end=f.end]=gf}else fragmentByStart[f.start]=fragmentByEnd[f.end]=f;else fragmentByStart[(f=[i]).start=start]=fragmentByEnd[f.end=end]=f})),flush(fragmentByEnd,fragmentByStart),flush(fragmentByStart,fragmentByEnd),arcs.forEach((function(i){stitchedArcs[i<0?~i:i]||fragments.push([i])})),fragments};function meshArcs(topology,object$$1,filter){var arcs,i,n;if(arguments.length>1)arcs=extractArcs(0,object$$1,filter);else for(i=0,arcs=new Array(n=topology.arcs.length);i<n;++i)arcs[i]=i;return{type:"MultiLineString",arcs:stitch(topology,arcs)}}function extractArcs(topology,object$$1,filter){var geom,arcs=[],geomsByArc=[];function extract0(i){var j=i<0?~i:i;(geomsByArc[j]||(geomsByArc[j]=[])).push({i:i,g:geom})}function extract1(arcs){arcs.forEach(extract0)}function extract2(arcs){arcs.forEach(extract1)}return function geometry(o){switch(geom=o,o.type){case"GeometryCollection":o.geometries.forEach(geometry);break;case"LineString":extract1(o.arcs);break;case"MultiLineString":case"Polygon":extract2(o.arcs);break;case"MultiPolygon":!function(arcs){arcs.forEach(extract2)}(o.arcs)}}(object$$1),geomsByArc.forEach(null==filter?function(geoms){arcs.push(geoms[0].i)}:function(geoms){filter(geoms[0].g,geoms[geoms.length-1].g)&&arcs.push(geoms[0].i)}),arcs}function mergeArcs(topology,objects){var polygonsByArc={},polygons=[],groups=[];function extract(polygon){polygon.forEach((function(ring){ring.forEach((function(arc){(polygonsByArc[arc=arc<0?~arc:arc]||(polygonsByArc[arc]=[])).push(polygon)}))})),polygons.push(polygon)}function area(ring){return function(ring){for(var a,i=-1,n=ring.length,b=ring[n-1],area=0;++i<n;)a=b,b=ring[i],area+=a[0]*b[1]-a[1]*b[0];return Math.abs(area)}(object(topology,{type:"Polygon",arcs:[ring]}).coordinates[0])}return objects.forEach((function geometry(o){switch(o.type){case"GeometryCollection":o.geometries.forEach(geometry);break;case"Polygon":extract(o.arcs);break;case"MultiPolygon":o.arcs.forEach(extract)}})),polygons.forEach((function(polygon){if(!polygon._){var group=[],neighbors=[polygon];for(polygon._=1,groups.push(group);polygon=neighbors.pop();)group.push(polygon),polygon.forEach((function(ring){ring.forEach((function(arc){polygonsByArc[arc<0?~arc:arc].forEach((function(polygon){polygon._||(polygon._=1,neighbors.push(polygon))}))}))}))}})),polygons.forEach((function(polygon){delete polygon._})),{type:"MultiPolygon",arcs:groups.map((function(polygons){var n,arcs=[];if(polygons.forEach((function(polygon){polygon.forEach((function(ring){ring.forEach((function(arc){polygonsByArc[arc<0?~arc:arc].length<2&&arcs.push(arc)}))}))})),(n=(arcs=stitch(topology,arcs)).length)>1)for(var ki,t,i=1,k=area(arcs[0]);i<n;++i)(ki=area(arcs[i]))>k&&(t=arcs[0],arcs[0]=arcs[i],arcs[i]=t,k=ki);return arcs}))}}var bisect=function(a,x){for(var lo=0,hi=a.length;lo<hi;){var mid=lo+hi>>>1;a[mid]<x?lo=mid+1:hi=mid}return lo},untransform=function(transform){if(null==transform)return identity;var x0,y0,kx=transform.scale[0],ky=transform.scale[1],dx=transform.translate[0],dy=transform.translate[1];return function(input,i){i||(x0=y0=0);var j=2,n=input.length,output=new Array(n),x1=Math.round((input[0]-dx)/kx),y1=Math.round((input[1]-dy)/ky);for(output[0]=x1-x0,x0=x1,output[1]=y1-y0,y0=y1;j<n;)output[j]=input[j],++j;return output}};exports.bbox=bbox,exports.feature=function(topology,o){return"GeometryCollection"===o.type?{type:"FeatureCollection",features:o.geometries.map((function(o){return feature$1(topology,o)}))}:feature$1(topology,o)},exports.mesh=function(topology){return object(topology,meshArcs.apply(this,arguments))},exports.meshArcs=meshArcs,exports.merge=function(topology){return object(topology,mergeArcs.apply(this,arguments))},exports.mergeArcs=mergeArcs,exports.neighbors=function(objects){var indexesByArc={},neighbors=objects.map((function(){return[]}));function line(arcs,i){arcs.forEach((function(a){a<0&&(a=~a);var o=indexesByArc[a];o?o.push(i):indexesByArc[a]=[i]}))}function polygon(arcs,i){arcs.forEach((function(arc){line(arc,i)}))}var geometryType={LineString:line,MultiLineString:polygon,Polygon:polygon,MultiPolygon:function(arcs,i){arcs.forEach((function(arc){polygon(arc,i)}))}};for(var i in objects.forEach((function geometry(o,i){"GeometryCollection"===o.type?o.geometries.forEach((function(o){geometry(o,i)})):o.type in geometryType&&geometryType[o.type](o.arcs,i)})),indexesByArc)for(var indexes=indexesByArc[i],m=indexes.length,j=0;j<m;++j)for(var k=j+1;k<m;++k){var n,ij=indexes[j],ik=indexes[k];(n=neighbors[ij])[i=bisect(n,ik)]!==ik&&n.splice(i,0,ik),(n=neighbors[ik])[i=bisect(n,ij)]!==ij&&n.splice(i,0,ij)}return neighbors},exports.quantize=function(topology,transform){if(topology.transform)throw new Error("already quantized");if(transform&&transform.scale)box=topology.bbox;else{if(!((n=Math.floor(transform))>=2))throw new Error("n must be ≥2");var n,x0=(box=topology.bbox||bbox(topology))[0],y0=box[1],x1=box[2],y1=box[3];transform={scale:[x1-x0?(x1-x0)/(n-1):1,y1-y0?(y1-y0)/(n-1):1],translate:[x0,y0]}}var box,key,t=untransform(transform),inputs=topology.objects,outputs={};function quantizePoint(point){return t(point)}function quantizeGeometry(input){var output;switch(input.type){case"GeometryCollection":output={type:"GeometryCollection",geometries:input.geometries.map(quantizeGeometry)};break;case"Point":output={type:"Point",coordinates:quantizePoint(input.coordinates)};break;case"MultiPoint":output={type:"MultiPoint",coordinates:input.coordinates.map(quantizePoint)};break;default:return input}return null!=input.id&&(output.id=input.id),null!=input.bbox&&(output.bbox=input.bbox),null!=input.properties&&(output.properties=input.properties),output}for(key in inputs)outputs[key]=quantizeGeometry(inputs[key]);return{type:"Topology",bbox:box,transform:transform,objects:outputs,arcs:topology.arcs.map((function(input){var p,i=0,j=1,n=input.length,output=new Array(n);for(output[0]=t(input[0],0);++i<n;)((p=t(input[i],i))[0]||p[1])&&(output[j++]=p);return 1===j&&(output[j++]=[0,0]),output.length=j,output}))}},exports.transform=transform,exports.untransform=untransform,Object.defineProperty(exports,"__esModule",{value:!0})}(exports)},function(module,exports,__webpack_require__){"use strict";(function(global){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function compare(a,b){if(a===b)return 0;for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);i<len;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return x<y?-1:y<x?1:0}function isBuffer(b){return global.Buffer&&"function"==typeof global.Buffer.isBuffer?global.Buffer.isBuffer(b):!(null==b||!b._isBuffer)}var util=__webpack_require__(98),hasOwn=Object.prototype.hasOwnProperty,pSlice=Array.prototype.slice,functionsHaveNames="foo"===function(){}.name;function pToString(obj){return Object.prototype.toString.call(obj)}function isView(arrbuf){return!isBuffer(arrbuf)&&("function"==typeof global.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(arrbuf):!!arrbuf&&(arrbuf instanceof DataView||!!(arrbuf.buffer&&arrbuf.buffer instanceof ArrayBuffer))))}var assert=module.exports=ok,regex=/\s*function\s+([^\(\s]*)\s*/;function getName(func){if(util.isFunction(func)){if(functionsHaveNames)return func.name;var match=func.toString().match(regex);return match&&match[1]}}function truncate(s,n){return"string"==typeof s?s.length<n?s:s.slice(0,n):s}function inspect(something){if(functionsHaveNames||!util.isFunction(something))return util.inspect(something);var rawname=getName(something);return"[Function"+(rawname?": "+rawname:"")+"]"}function fail(actual,expected,message,operator,stackStartFunction){throw new assert.AssertionError({message:message,actual:actual,expected:expected,operator:operator,stackStartFunction:stackStartFunction})}function ok(value,message){value||fail(value,!0,message,"==",assert.ok)}function _deepEqual(actual,expected,strict,memos){if(actual===expected)return!0;if(isBuffer(actual)&&isBuffer(expected))return 0===compare(actual,expected);if(util.isDate(actual)&&util.isDate(expected))return actual.getTime()===expected.getTime();if(util.isRegExp(actual)&&util.isRegExp(expected))return actual.source===expected.source&&actual.global===expected.global&&actual.multiline===expected.multiline&&actual.lastIndex===expected.lastIndex&&actual.ignoreCase===expected.ignoreCase;if(null!==actual&&"object"==typeof actual||null!==expected&&"object"==typeof expected){if(isView(actual)&&isView(expected)&&pToString(actual)===pToString(expected)&&!(actual instanceof Float32Array||actual instanceof Float64Array))return 0===compare(new Uint8Array(actual.buffer),new Uint8Array(expected.buffer));if(isBuffer(actual)!==isBuffer(expected))return!1;var actualIndex=(memos=memos||{actual:[],expected:[]}).actual.indexOf(actual);return-1!==actualIndex&&actualIndex===memos.expected.indexOf(expected)||(memos.actual.push(actual),memos.expected.push(expected),function(a,b,strict,actualVisitedObjects){if(null==a||null==b)return!1;if(util.isPrimitive(a)||util.isPrimitive(b))return a===b;if(strict&&Object.getPrototypeOf(a)!==Object.getPrototypeOf(b))return!1;var aIsArgs=isArguments(a),bIsArgs=isArguments(b);if(aIsArgs&&!bIsArgs||!aIsArgs&&bIsArgs)return!1;if(aIsArgs)return a=pSlice.call(a),b=pSlice.call(b),_deepEqual(a,b,strict);var key,i,ka=objectKeys(a),kb=objectKeys(b);if(ka.length!==kb.length)return!1;for(ka.sort(),kb.sort(),i=ka.length-1;i>=0;i--)if(ka[i]!==kb[i])return!1;for(i=ka.length-1;i>=0;i--)if(key=ka[i],!_deepEqual(a[key],b[key],strict,actualVisitedObjects))return!1;return!0}(actual,expected,strict,memos))}return strict?actual===expected:actual==expected}function isArguments(object){return"[object Arguments]"==Object.prototype.toString.call(object)}function expectedException(actual,expected){if(!actual||!expected)return!1;if("[object RegExp]"==Object.prototype.toString.call(expected))return expected.test(actual);try{if(actual instanceof expected)return!0}catch(e){}return!Error.isPrototypeOf(expected)&&!0===expected.call({},actual)}function _throws(shouldThrow,block,expected,message){var actual;if("function"!=typeof block)throw new TypeError('"block" argument must be a function');"string"==typeof expected&&(message=expected,expected=null),actual=function(block){var error;try{block()}catch(e){error=e}return error}(block),message=(expected&&expected.name?" ("+expected.name+").":".")+(message?" "+message:"."),shouldThrow&&!actual&&fail(actual,expected,"Missing expected exception"+message);var userProvidedMessage="string"==typeof message,isUnexpectedException=!shouldThrow&&actual&&!expected;if((!shouldThrow&&util.isError(actual)&&userProvidedMessage&&expectedException(actual,expected)||isUnexpectedException)&&fail(actual,expected,"Got unwanted exception"+message),shouldThrow&&actual&&expected&&!expectedException(actual,expected)||!shouldThrow&&actual)throw actual}assert.AssertionError=function(options){this.name="AssertionError",this.actual=options.actual,this.expected=options.expected,this.operator=options.operator,options.message?(this.message=options.message,this.generatedMessage=!1):(this.message=function(self){return truncate(inspect(self.actual),128)+" "+self.operator+" "+truncate(inspect(self.expected),128)}(this),this.generatedMessage=!0);var stackStartFunction=options.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,stackStartFunction);else{var err=new Error;if(err.stack){var out=err.stack,fn_name=getName(stackStartFunction),idx=out.indexOf("\n"+fn_name);if(idx>=0){var next_line=out.indexOf("\n",idx+1);out=out.substring(next_line+1)}this.stack=out}}},util.inherits(assert.AssertionError,Error),assert.fail=fail,assert.ok=ok,assert.equal=function(actual,expected,message){actual!=expected&&fail(actual,expected,message,"==",assert.equal)},assert.notEqual=function(actual,expected,message){actual==expected&&fail(actual,expected,message,"!=",assert.notEqual)},assert.deepEqual=function(actual,expected,message){_deepEqual(actual,expected,!1)||fail(actual,expected,message,"deepEqual",assert.deepEqual)},assert.deepStrictEqual=function(actual,expected,message){_deepEqual(actual,expected,!0)||fail(actual,expected,message,"deepStrictEqual",assert.deepStrictEqual)},assert.notDeepEqual=function(actual,expected,message){_deepEqual(actual,expected,!1)&&fail(actual,expected,message,"notDeepEqual",assert.notDeepEqual)},assert.notDeepStrictEqual=function notDeepStrictEqual(actual,expected,message){_deepEqual(actual,expected,!0)&&fail(actual,expected,message,"notDeepStrictEqual",notDeepStrictEqual)},assert.strictEqual=function(actual,expected,message){actual!==expected&&fail(actual,expected,message,"===",assert.strictEqual)},assert.notStrictEqual=function(actual,expected,message){actual===expected&&fail(actual,expected,message,"!==",assert.notStrictEqual)},assert.throws=function(block,error,message){_throws(!0,block,error,message)},assert.doesNotThrow=function(block,error,message){_throws(!1,block,error,message)},assert.ifError=function(err){if(err)throw err};var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)hasOwn.call(obj,key)&&keys.push(key);return keys}}).call(this,__webpack_require__(58))},function(module,exports){module.exports=function(arg){return arg&&"object"==typeof arg&&"function"==typeof arg.copy&&"function"==typeof arg.fill&&"function"==typeof arg.readUInt8}},function(module,exports){"function"==typeof Object.create?module.exports=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var bearing_1=__importDefault(__webpack_require__(287)),destination_1=__importDefault(__webpack_require__(168)),distance_1=__importDefault(__webpack_require__(119)),helpers_1=__webpack_require__(46),invariant_1=__webpack_require__(63);exports.default=function(line,distance,options){void 0===options&&(options={});for(var coords=invariant_1.getGeom(line).coordinates,travelled=0,i=0;i<coords.length&&!(distance>=travelled&&i===coords.length-1);i++){if(travelled>=distance){var overshot=distance-travelled;if(overshot){var direction=bearing_1.default(coords[i],coords[i-1])-180;return destination_1.default(coords[i],overshot,direction,options)}return helpers_1.point(coords[i])}travelled+=distance_1.default(coords[i],coords[i+1],options)}return helpers_1.point(coords[coords.length-1])}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var helpers_1=__webpack_require__(46),invariant_1=__webpack_require__(63);function bearing(start,end,options){if(void 0===options&&(options={}),!0===options.final)return function(start,end){var bear=bearing(end,start);return bear=(bear+180)%360}(start,end);var coordinates1=invariant_1.getCoord(start),coordinates2=invariant_1.getCoord(end),lon1=helpers_1.degreesToRadians(coordinates1[0]),lon2=helpers_1.degreesToRadians(coordinates2[0]),lat1=helpers_1.degreesToRadians(coordinates1[1]),lat2=helpers_1.degreesToRadians(coordinates2[1]),a=Math.sin(lon2-lon1)*Math.cos(lat2),b=Math.cos(lat1)*Math.sin(lat2)-Math.sin(lat1)*Math.cos(lat2)*Math.cos(lon2-lon1);return helpers_1.radiansToDegrees(Math.atan2(a,b))}exports.default=bearing},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var meta_1=__webpack_require__(71);function polygonArea(coords){var total=0;if(coords&&coords.length>0){total+=Math.abs(ringArea(coords[0]));for(var i=1;i<coords.length;i++)total-=Math.abs(ringArea(coords[i]))}return total}function ringArea(coords){var p1,p2,lowerIndex,middleIndex,upperIndex,i,total=0,coordsLength=coords.length;if(coordsLength>2){for(i=0;i<coordsLength;i++)i===coordsLength-2?(lowerIndex=coordsLength-2,middleIndex=coordsLength-1,upperIndex=0):i===coordsLength-1?(lowerIndex=coordsLength-1,middleIndex=0,upperIndex=1):(lowerIndex=i,middleIndex=i+1,upperIndex=i+2),p1=coords[lowerIndex],p2=coords[middleIndex],total+=(rad(coords[upperIndex][0])-rad(p1[0]))*Math.sin(rad(p2[1]));total=6378137*total*6378137/2}return total}function rad(num){return num*Math.PI/180}exports.default=function(geojson){return meta_1.geomReduce(geojson,(function(value,geom){return value+function(geom){var i,total=0;switch(geom.type){case"Polygon":return polygonArea(geom.coordinates);case"MultiPolygon":for(i=0;i<geom.coordinates.length;i++)total+=polygonArea(geom.coordinates[i]);return total;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(geom)}),0)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var convex_1=__webpack_require__(290),centroid_1=__webpack_require__(296),helpers_1=__webpack_require__(46),invariant_1=__webpack_require__(63),meta_1=__webpack_require__(71);exports.default=function centerOfMass(geojson,options){switch(void 0===options&&(options={}),invariant_1.getType(geojson)){case"Point":return geojson;case"Polygon":var coords=[];meta_1.coordEach(geojson,(function(coord){coords.push(coord)}));var i,pi,pj,xi,xj,yi,yj,a,centre=centroid_1.default(geojson,{properties:options.properties}),translation=centre.geometry.coordinates,sx=0,sy=0,sArea=0,neutralizedPoints=coords.map((function(point){return[point[0]-translation[0],point[1]-translation[1]]}));for(i=0;i<coords.length-1;i++)xi=(pi=neutralizedPoints[i])[0],yi=pi[1],xj=(pj=neutralizedPoints[i+1])[0],sArea+=a=xi*(yj=pj[1])-xj*yi,sx+=(xi+xj)*a,sy+=(yi+yj)*a;if(0===sArea)return centre;var areaFactor=1/(6*(.5*sArea));return helpers_1.point([translation[0]+areaFactor*sx,translation[1]+areaFactor*sy],options.properties);default:var hull=convex_1.default(geojson);return hull?centerOfMass(hull,{properties:options.properties}):centroid_1.default(geojson,{properties:options.properties})}}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var helpers_1=__webpack_require__(46),meta_1=__webpack_require__(71),concaveman_1=__importDefault(__webpack_require__(291));exports.default=function(geojson,options){void 0===options&&(options={}),options.concavity=options.concavity||1/0;var points=[];if(meta_1.coordEach(geojson,(function(coord){points.push([coord[0],coord[1]])})),!points.length)return null;var convexHull=concaveman_1.default(points,options.concavity);return convexHull.length>3?helpers_1.polygon([convexHull]):null}},function(module,exports,__webpack_require__){"use strict";var RBush=__webpack_require__(292),Queue=__webpack_require__(293),pointInPolygon=__webpack_require__(294);const orient=__webpack_require__(295).orient2d;function concaveman(points,concavity,lengthThreshold){concavity=Math.max(0,void 0===concavity?2:concavity),lengthThreshold=lengthThreshold||0;var hull=function(points){for(var left=points[0],top=points[0],right=points[0],bottom=points[0],i=0;i<points.length;i++){var p=points[i];p[0]<left[0]&&(left=p),p[0]>right[0]&&(right=p),p[1]<top[1]&&(top=p),p[1]>bottom[1]&&(bottom=p)}var cull=[left,top,right,bottom],filtered=cull.slice();for(i=0;i<points.length;i++)pointInPolygon(points[i],cull)||filtered.push(points[i]);return function(points){points.sort(compareByX);for(var lower=[],i=0;i<points.length;i++){for(;lower.length>=2&&cross(lower[lower.length-2],lower[lower.length-1],points[i])<=0;)lower.pop();lower.push(points[i])}for(var upper=[],ii=points.length-1;ii>=0;ii--){for(;upper.length>=2&&cross(upper[upper.length-2],upper[upper.length-1],points[ii])<=0;)upper.pop();upper.push(points[ii])}return upper.pop(),lower.pop(),lower.concat(upper)}(filtered)}(points),tree=new RBush(16);tree.toBBox=function(a){return{minX:a[0],minY:a[1],maxX:a[0],maxY:a[1]}},tree.compareMinX=function(a,b){return a[0]-b[0]},tree.compareMinY=function(a,b){return a[1]-b[1]},tree.load(points);for(var last,queue=[],i=0;i<hull.length;i++){var p=hull[i];tree.remove(p),last=insertNode(p,last),queue.push(last)}var segTree=new RBush(16);for(i=0;i<queue.length;i++)segTree.insert(updateBBox(queue[i]));for(var sqConcavity=concavity*concavity,sqLenThreshold=lengthThreshold*lengthThreshold;queue.length;){var node=queue.shift(),a=node.p,b=node.next.p,sqLen=getSqDist(a,b);if(!(sqLen<sqLenThreshold)){var maxSqLen=sqLen/sqConcavity;(p=findCandidate(tree,node.prev.p,a,b,node.next.next.p,maxSqLen,segTree))&&Math.min(getSqDist(p,a),getSqDist(p,b))<=maxSqLen&&(queue.push(node),queue.push(insertNode(p,node)),tree.remove(p),segTree.remove(node),segTree.insert(updateBBox(node)),segTree.insert(updateBBox(node.next)))}}node=last;var concave=[];do{concave.push(node.p),node=node.next}while(node!==last);return concave.push(node.p),concave}function findCandidate(tree,a,b,c,d,maxDist,segTree){for(var queue=new Queue([],compareDist),node=tree.data;node;){for(var i=0;i<node.children.length;i++){var child=node.children[i],dist=node.leaf?sqSegDist(child,b,c):sqSegBoxDist(b,c,child);dist>maxDist||queue.push({node:child,dist:dist})}for(;queue.length&&!queue.peek().node.children;){var item=queue.pop(),p=item.node,d0=sqSegDist(p,a,b),d1=sqSegDist(p,c,d);if(item.dist<d0&&item.dist<d1&&noIntersections(b,p,segTree)&&noIntersections(c,p,segTree))return p}(node=queue.pop())&&(node=node.node)}return null}function compareDist(a,b){return a.dist-b.dist}function sqSegBoxDist(a,b,bbox){if(inside(a,bbox)||inside(b,bbox))return 0;var d1=sqSegSegDist(a[0],a[1],b[0],b[1],bbox.minX,bbox.minY,bbox.maxX,bbox.minY);if(0===d1)return 0;var d2=sqSegSegDist(a[0],a[1],b[0],b[1],bbox.minX,bbox.minY,bbox.minX,bbox.maxY);if(0===d2)return 0;var d3=sqSegSegDist(a[0],a[1],b[0],b[1],bbox.maxX,bbox.minY,bbox.maxX,bbox.maxY);if(0===d3)return 0;var d4=sqSegSegDist(a[0],a[1],b[0],b[1],bbox.minX,bbox.maxY,bbox.maxX,bbox.maxY);return 0===d4?0:Math.min(d1,d2,d3,d4)}function inside(a,bbox){return a[0]>=bbox.minX&&a[0]<=bbox.maxX&&a[1]>=bbox.minY&&a[1]<=bbox.maxY}function noIntersections(a,b,segTree){for(var p1,q1,p2,q2,minX=Math.min(a[0],b[0]),minY=Math.min(a[1],b[1]),maxX=Math.max(a[0],b[0]),maxY=Math.max(a[1],b[1]),edges=segTree.search({minX:minX,minY:minY,maxX:maxX,maxY:maxY}),i=0;i<edges.length;i++)if(p1=edges[i].p,q1=edges[i].next.p,p2=a,p1!==(q2=b)&&q1!==p2&&cross(p1,q1,p2)>0!=cross(p1,q1,q2)>0&&cross(p2,q2,p1)>0!=cross(p2,q2,q1)>0)return!1;return!0}function cross(p1,p2,p3){return orient(p1[0],p1[1],p2[0],p2[1],p3[0],p3[1])}function updateBBox(node){var p1=node.p,p2=node.next.p;return node.minX=Math.min(p1[0],p2[0]),node.minY=Math.min(p1[1],p2[1]),node.maxX=Math.max(p1[0],p2[0]),node.maxY=Math.max(p1[1],p2[1]),node}function insertNode(p,prev){var node={p:p,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return prev?(node.next=prev.next,node.prev=prev,prev.next.prev=node,prev.next=node):(node.prev=node,node.next=node),node}function getSqDist(p1,p2){var dx=p1[0]-p2[0],dy=p1[1]-p2[1];return dx*dx+dy*dy}function sqSegDist(p,p1,p2){var x=p1[0],y=p1[1],dx=p2[0]-x,dy=p2[1]-y;if(0!==dx||0!==dy){var t=((p[0]-x)*dx+(p[1]-y)*dy)/(dx*dx+dy*dy);t>1?(x=p2[0],y=p2[1]):t>0&&(x+=dx*t,y+=dy*t)}return(dx=p[0]-x)*dx+(dy=p[1]-y)*dy}function sqSegSegDist(x0,y0,x1,y1,x2,y2,x3,y3){var sc,sN,tc,tN,ux=x1-x0,uy=y1-y0,vx=x3-x2,vy=y3-y2,wx=x0-x2,wy=y0-y2,a=ux*ux+uy*uy,b=ux*vx+uy*vy,c=vx*vx+vy*vy,d=ux*wx+uy*wy,e=vx*wx+vy*wy,D=a*c-b*b,sD=D,tD=D;0===D?(sN=0,sD=1,tN=e,tD=c):(tN=a*e-b*d,(sN=b*e-c*d)<0?(sN=0,tN=e,tD=c):sN>sD&&(sN=sD,tN=e+b,tD=c)),tN<0?(tN=0,-d<0?sN=0:-d>a?sN=sD:(sN=-d,sD=a)):tN>tD&&(tN=tD,-d+b<0?sN=0:-d+b>a?sN=sD:(sN=-d+b,sD=a));var dx=(1-(tc=0===tN?0:tN/tD))*x2+tc*x3-((1-(sc=0===sN?0:sN/sD))*x0+sc*x1),dy=(1-tc)*y2+tc*y3-((1-sc)*y0+sc*y1);return dx*dx+dy*dy}function compareByX(a,b){return a[0]===b[0]?a[1]-b[1]:a[0]-b[0]}module.exports=concaveman,module.exports.default=concaveman},function(module,exports,__webpack_require__){module.exports=function(){"use strict";function t(t,r,e,a,h){!function t(n,r,e,a,h){for(;a>e;){if(a-e>600){var o=a-e+1,s=r-e+1,l=Math.log(o),f=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*f*(o-f)/o)*(s-o/2<0?-1:1);t(n,r,Math.max(e,Math.floor(r-s*f/o+u)),Math.min(a,Math.floor(r+(o-s)*f/o+u)),h)}var p=n[r],d=e,x=a;for(i(n,e,r),h(n[a],p)>0&&i(n,e,a);d<x;){for(i(n,d,x),d++,x--;h(n[d],p)<0;)d++;for(;h(n[x],p)>0;)x--}0===h(n[e],p)?i(n,e,x):i(n,++x,a),x<=r&&(e=x+1),r<=x&&(a=x-1)}}(t,r,e||0,a||t.length-1,h||n)}function i(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function n(t,i){return t<i?-1:t>i?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,r,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=i;a<n;a++){var h=t.children[a];o(e,t.leaf?r(h):h)}return e}function o(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function c(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,e,a){for(var h=[n,r];h.length;)if(!((r=h.pop())-(n=h.pop())<=e)){var o=n+Math.ceil((r-n)/e/2)*e;t(i,o,n,r,a),h.push(n,o,o,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var i=this.data,n=[];if(!c(t,i))return n;for(var r=this.toBBox,e=[];i;){for(var a=0;a<i.children.length;a++){var h=i.children[a],o=i.leaf?r(h):h;c(t,o)&&(i.leaf?n.push(h):m(t,o)?this._all(h,n):e.push(h))}i=e.pop()}return n},r.prototype.collides=function(t){var i=this.data;if(!c(t,i))return!1;for(var n=[];i;){for(var r=0;r<i.children.length;r++){var e=i.children[r],a=i.leaf?this.toBBox(e):e;if(c(t,a)){if(i.leaf||m(t,a))return!0;n.push(e)}}i=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,i){if(!t)return this;for(var n,r,a,h=this.data,o=this.toBBox(t),s=[],l=[];h||s.length;){if(h||(h=s.pop(),r=s[s.length-1],n=l.pop(),a=!0),h.leaf){var f=e(t,h.children,i);if(-1!==f)return h.children.splice(f,1),s.push(h),this._condense(s),this}a||h.leaf||!m(h,o)?r?(n++,h=r.children[n],a=!1):h=null:(s.push(h),l.push(n),n=0,r=h,h=h.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,i){return t.minX-i.minX},r.prototype.compareMinY=function(t,i){return t.minY-i.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},r.prototype._build=function(t,i,n,r){var e,h=n-i+1,o=this._maxEntries;if(h<=o)return a(e=p(t.slice(i,n+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(h)/Math.log(o)),o=Math.ceil(h/Math.pow(o,r-1))),(e=p([])).leaf=!1,e.height=r;var s=Math.ceil(h/o),l=s*Math.ceil(Math.sqrt(o));d(t,i,n,l,this.compareMinX);for(var f=i;f<=n;f+=l){var u=Math.min(f+l-1,n);d(t,f,u,s,this.compareMinY);for(var m=f;m<=u;m+=s){var c=Math.min(m+s-1,u);e.children.push(this._build(t,m,c,r-1))}}return a(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){for(var e=1/0,a=1/0,h=void 0,o=0;o<i.children.length;o++){var s=i.children[o],l=f(s),u=(m=t,c=s,(Math.max(c.maxX,m.maxX)-Math.min(c.minX,m.minX))*(Math.max(c.maxY,m.maxY)-Math.min(c.minY,m.minY))-l);u<a?(a=u,e=l<e?l:e,h=s):u===a&&l<e&&(e=l,h=s)}i=h||i.children[0]}var m,c;return i},r.prototype._insert=function(t,i,n){var r=n?t:this.toBBox(t),e=[],a=this._chooseSubtree(r,this.data,i,e);for(a.children.push(t),o(a,r);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(r,e,i)},r.prototype._split=function(t,i){var n=t[i],r=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,r);var h=this._chooseSplitIndex(n,e,r),o=p(n.children.splice(h,n.children.length-h));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},r.prototype._splitRoot=function(t,i){this.data=p([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,i,n){for(var r,e,a,o,s,l,u,m=1/0,c=1/0,p=i;p<=n-i;p++){var d=h(t,0,p,this.toBBox),x=h(t,p,n,this.toBBox),v=(e=d,a=x,o=Math.max(e.minX,a.minX),s=Math.max(e.minY,a.minY),l=Math.min(e.maxX,a.maxX),u=Math.min(e.maxY,a.maxY),Math.max(0,l-o)*Math.max(0,u-s)),M=f(d)+f(x);v<m?(m=v,r=p,c=M<c?M:c):v===m&&M<c&&(c=M,r=p)}return r||n-i},r.prototype._chooseSplitAxis=function(t,i,n){var r=t.leaf?this.compareMinX:s,e=t.leaf?this.compareMinY:l;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,i,n,r){t.children.sort(r);for(var e=this.toBBox,a=h(t,0,i,e),s=h(t,n-i,n,e),l=u(a)+u(s),f=i;f<n-i;f++){var m=t.children[f];o(a,t.leaf?e(m):m),l+=u(a)}for(var c=n-i-1;c>=i;c--){var p=t.children[c];o(s,t.leaf?e(p):p),l+=u(s)}return l},r.prototype._adjustParentBBoxes=function(t,i,n){for(var r=n;r>=0;r--)o(i[r],t)},r.prototype._condense=function(t){for(var i=t.length-1,n=void 0;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},r}()},function(module,exports,__webpack_require__){module.exports=function(){"use strict";var TinyQueue=function(data,compare){if(void 0===data&&(data=[]),void 0===compare&&(compare=defaultCompare),this.data=data,this.length=this.data.length,this.compare=compare,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function defaultCompare(a,b){return a<b?-1:a>b?1:0}return TinyQueue.prototype.push=function(item){this.data.push(item),this.length++,this._up(this.length-1)},TinyQueue.prototype.pop=function(){if(0!==this.length){var top=this.data[0],bottom=this.data.pop();return this.length--,this.length>0&&(this.data[0]=bottom,this._down(0)),top}},TinyQueue.prototype.peek=function(){return this.data[0]},TinyQueue.prototype._up=function(pos){for(var data=this.data,compare=this.compare,item=data[pos];pos>0;){var parent=pos-1>>1,current=data[parent];if(compare(item,current)>=0)break;data[pos]=current,pos=parent}data[pos]=item},TinyQueue.prototype._down=function(pos){for(var data=this.data,compare=this.compare,halfLength=this.length>>1,item=data[pos];pos<halfLength;){var left=1+(pos<<1),best=data[left],right=left+1;if(right<this.length&&compare(data[right],best)<0&&(left=right,best=data[right]),compare(best,item)>=0)break;data[pos]=best,pos=left}data[pos]=item},TinyQueue}()},function(module,exports){module.exports=function(point,vs){for(var x=point[0],y=point[1],inside=!1,i=0,j=vs.length-1;i<vs.length;j=i++){var xi=vs[i][0],yi=vs[i][1],xj=vs[j][0],yj=vs[j][1];yi>y!=yj>y&&x<(xj-xi)*(y-yi)/(yj-yi)+xi&&(inside=!inside)}return inside}},function(module,exports,__webpack_require__){!function(t){"use strict";const e=134217729;function r(t,e,n,r,o){let f,i,u,c,s=e[0],a=r[0],d=0,l=0;a>s==a>-s?(f=s,s=e[++d]):(f=a,a=r[++l]);let p=0;if(d<t&&l<n)for(a>s==a>-s?(u=f-((i=s+f)-s),s=e[++d]):(u=f-((i=a+f)-a),a=r[++l]),f=i,0!==u&&(o[p++]=u);d<t&&l<n;)a>s==a>-s?(u=f-((i=f+s)-(c=i-f))+(s-c),s=e[++d]):(u=f-((i=f+a)-(c=i-f))+(a-c),a=r[++l]),f=i,0!==u&&(o[p++]=u);for(;d<t;)u=f-((i=f+s)-(c=i-f))+(s-c),s=e[++d],f=i,0!==u&&(o[p++]=u);for(;l<n;)u=f-((i=f+a)-(c=i-f))+(a-c),a=r[++l],f=i,0!==u&&(o[p++]=u);return 0===f&&0!==p||(o[p++]=f),p}function o(t){return new Float64Array(t)}const c=o(4),s=o(8),a=o(12),d=o(16),l=o(4);t.orient2d=function(t,o,p,b,y,h){const M=(o-h)*(p-y),x=(t-y)*(b-h),j=M-x;if(0===M||0===x||M>0!=x>0)return j;const m=Math.abs(M+x);return Math.abs(j)>=33306690738754716e-32*m?j:-function(t,o,f,p,b,y,h){let M,x,j,m,_,v,w,A,F,O,P,g,k,q,z,B,C,D;const E=t-b,G=f-b,H=o-y,I=p-y;_=(z=(A=E-(w=(v=e*E)-(v-E)))*(O=I-(F=(v=e*I)-(v-I)))-((q=E*I)-w*F-A*F-w*O))-(P=z-(C=(A=H-(w=(v=e*H)-(v-H)))*(O=G-(F=(v=e*G)-(v-G)))-((B=H*G)-w*F-A*F-w*O))),c[0]=z-(P+_)+(_-C),_=(k=q-((g=q+P)-(_=g-q))+(P-_))-(P=k-B),c[1]=k-(P+_)+(_-B),_=(D=g+P)-g,c[2]=g-(D-_)+(P-_),c[3]=D;let J=function(t,e){let n=e[0];for(let r=1;r<4;r++)n+=e[r];return n}(0,c),K=22204460492503146e-32*h;if(J>=K||-J>=K)return J;if(M=t-(E+(_=t-E))+(_-b),j=f-(G+(_=f-G))+(_-b),x=o-(H+(_=o-H))+(_-y),m=p-(I+(_=p-I))+(_-y),0===M&&0===x&&0===j&&0===m)return J;if(K=11093356479670487e-47*h+33306690738754706e-32*Math.abs(J),(J+=E*m+I*M-(H*j+G*x))>=K||-J>=K)return J;_=(z=(A=M-(w=(v=e*M)-(v-M)))*(O=I-(F=(v=e*I)-(v-I)))-((q=M*I)-w*F-A*F-w*O))-(P=z-(C=(A=x-(w=(v=e*x)-(v-x)))*(O=G-(F=(v=e*G)-(v-G)))-((B=x*G)-w*F-A*F-w*O))),l[0]=z-(P+_)+(_-C),_=(k=q-((g=q+P)-(_=g-q))+(P-_))-(P=k-B),l[1]=k-(P+_)+(_-B),_=(D=g+P)-g,l[2]=g-(D-_)+(P-_),l[3]=D;const L=r(4,c,4,l,s);_=(z=(A=E-(w=(v=e*E)-(v-E)))*(O=m-(F=(v=e*m)-(v-m)))-((q=E*m)-w*F-A*F-w*O))-(P=z-(C=(A=H-(w=(v=e*H)-(v-H)))*(O=j-(F=(v=e*j)-(v-j)))-((B=H*j)-w*F-A*F-w*O))),l[0]=z-(P+_)+(_-C),_=(k=q-((g=q+P)-(_=g-q))+(P-_))-(P=k-B),l[1]=k-(P+_)+(_-B),_=(D=g+P)-g,l[2]=g-(D-_)+(P-_),l[3]=D;const N=r(L,s,4,l,a);_=(z=(A=M-(w=(v=e*M)-(v-M)))*(O=m-(F=(v=e*m)-(v-m)))-((q=M*m)-w*F-A*F-w*O))-(P=z-(C=(A=x-(w=(v=e*x)-(v-x)))*(O=j-(F=(v=e*j)-(v-j)))-((B=x*j)-w*F-A*F-w*O))),l[0]=z-(P+_)+(_-C),_=(k=q-((g=q+P)-(_=g-q))+(P-_))-(P=k-B),l[1]=k-(P+_)+(_-B),_=(D=g+P)-g,l[2]=g-(D-_)+(P-_),l[3]=D;const Q=r(N,a,4,l,d);return d[Q-1]}(t,o,p,b,y,h,m)},t.orient2dfast=function(t,e,n,r,o,f){return(e-f)*(n-o)-(t-o)*(r-f)},Object.defineProperty(t,"__esModule",{value:!0})}(exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var meta_1=__webpack_require__(71),helpers_1=__webpack_require__(46);exports.default=function(geojson,options){void 0===options&&(options={});var xSum=0,ySum=0,len=0;return meta_1.coordEach(geojson,(function(coord){xSum+=coord[0],ySum+=coord[1],len++})),helpers_1.point([xSum/len,ySum/len],options.properties)}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var distance_1=__importDefault(__webpack_require__(119)),meta_1=__webpack_require__(71);exports.default=function(geojson,options){return void 0===options&&(options={}),meta_1.segmentReduce(geojson,(function(previousValue,segment){var coords=segment.geometry.coordinates;return previousValue+distance_1.default(coords[0],coords[1],options)}),0)}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(Math){var trimLeft=/^\s+/,trimRight=/\s+$/,tinyCounter=0,mathRound=Math.round,mathMin=Math.min,mathMax=Math.max,mathRandom=Math.random;function tinycolor(color,opts){if(opts=opts||{},(color=color||"")instanceof tinycolor)return color;if(!(this instanceof tinycolor))return new tinycolor(color,opts);var rgb=function(color){var rgb={r:0,g:0,b:0},a=1,s=null,v=null,l=null,ok=!1,format=!1;"string"==typeof color&&(color=function(color){color=color.replace(trimLeft,"").replace(trimRight,"").toLowerCase();var match,named=!1;if(names[color])color=names[color],named=!0;else if("transparent"==color)return{r:0,g:0,b:0,a:0,format:"name"};if(match=matchers.rgb.exec(color))return{r:match[1],g:match[2],b:match[3]};if(match=matchers.rgba.exec(color))return{r:match[1],g:match[2],b:match[3],a:match[4]};if(match=matchers.hsl.exec(color))return{h:match[1],s:match[2],l:match[3]};if(match=matchers.hsla.exec(color))return{h:match[1],s:match[2],l:match[3],a:match[4]};if(match=matchers.hsv.exec(color))return{h:match[1],s:match[2],v:match[3]};if(match=matchers.hsva.exec(color))return{h:match[1],s:match[2],v:match[3],a:match[4]};if(match=matchers.hex8.exec(color))return{r:parseIntFromHex(match[1]),g:parseIntFromHex(match[2]),b:parseIntFromHex(match[3]),a:convertHexToDecimal(match[4]),format:named?"name":"hex8"};if(match=matchers.hex6.exec(color))return{r:parseIntFromHex(match[1]),g:parseIntFromHex(match[2]),b:parseIntFromHex(match[3]),format:named?"name":"hex"};if(match=matchers.hex4.exec(color))return{r:parseIntFromHex(match[1]+""+match[1]),g:parseIntFromHex(match[2]+""+match[2]),b:parseIntFromHex(match[3]+""+match[3]),a:convertHexToDecimal(match[4]+""+match[4]),format:named?"name":"hex8"};if(match=matchers.hex3.exec(color))return{r:parseIntFromHex(match[1]+""+match[1]),g:parseIntFromHex(match[2]+""+match[2]),b:parseIntFromHex(match[3]+""+match[3]),format:named?"name":"hex"};return!1}(color));"object"==typeof color&&(isValidCSSUnit(color.r)&&isValidCSSUnit(color.g)&&isValidCSSUnit(color.b)?(r=color.r,g=color.g,b=color.b,rgb={r:255*bound01(r,255),g:255*bound01(g,255),b:255*bound01(b,255)},ok=!0,format="%"===String(color.r).substr(-1)?"prgb":"rgb"):isValidCSSUnit(color.h)&&isValidCSSUnit(color.s)&&isValidCSSUnit(color.v)?(s=convertToPercentage(color.s),v=convertToPercentage(color.v),rgb=function(h,s,v){h=6*bound01(h,360),s=bound01(s,100),v=bound01(v,100);var i=Math.floor(h),f=h-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s),mod=i%6;return{r:255*[v,q,p,p,t,v][mod],g:255*[t,v,v,q,p,p][mod],b:255*[p,p,t,v,v,q][mod]}}(color.h,s,v),ok=!0,format="hsv"):isValidCSSUnit(color.h)&&isValidCSSUnit(color.s)&&isValidCSSUnit(color.l)&&(s=convertToPercentage(color.s),l=convertToPercentage(color.l),rgb=function(h,s,l){var r,g,b;function hue2rgb(p,q,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?p+6*(q-p)*t:t<.5?q:t<2/3?p+(q-p)*(2/3-t)*6:p}if(h=bound01(h,360),s=bound01(s,100),l=bound01(l,100),0===s)r=g=b=l;else{var q=l<.5?l*(1+s):l+s-l*s,p=2*l-q;r=hue2rgb(p,q,h+1/3),g=hue2rgb(p,q,h),b=hue2rgb(p,q,h-1/3)}return{r:255*r,g:255*g,b:255*b}}(color.h,s,l),ok=!0,format="hsl"),color.hasOwnProperty("a")&&(a=color.a));var r,g,b;return a=boundAlpha(a),{ok:ok,format:color.format||format,r:mathMin(255,mathMax(rgb.r,0)),g:mathMin(255,mathMax(rgb.g,0)),b:mathMin(255,mathMax(rgb.b,0)),a:a}}(color);this._originalInput=color,this._r=rgb.r,this._g=rgb.g,this._b=rgb.b,this._a=rgb.a,this._roundA=mathRound(100*this._a)/100,this._format=opts.format||rgb.format,this._gradientType=opts.gradientType,this._r<1&&(this._r=mathRound(this._r)),this._g<1&&(this._g=mathRound(this._g)),this._b<1&&(this._b=mathRound(this._b)),this._ok=rgb.ok,this._tc_id=tinyCounter++}function rgbToHsl(r,g,b){r=bound01(r,255),g=bound01(g,255),b=bound01(b,255);var h,s,max=mathMax(r,g,b),min=mathMin(r,g,b),l=(max+min)/2;if(max==min)h=s=0;else{var d=max-min;switch(s=l>.5?d/(2-max-min):d/(max+min),max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return{h:h,s:s,l:l}}function rgbToHsv(r,g,b){r=bound01(r,255),g=bound01(g,255),b=bound01(b,255);var h,s,max=mathMax(r,g,b),min=mathMin(r,g,b),v=max,d=max-min;if(s=0===max?0:d/max,max==min)h=0;else{switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return{h:h,s:s,v:v}}function rgbToHex(r,g,b,allow3Char){var hex=[pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16))];return allow3Char&&hex[0].charAt(0)==hex[0].charAt(1)&&hex[1].charAt(0)==hex[1].charAt(1)&&hex[2].charAt(0)==hex[2].charAt(1)?hex[0].charAt(0)+hex[1].charAt(0)+hex[2].charAt(0):hex.join("")}function rgbaToArgbHex(r,g,b,a){return[pad2(convertDecimalToHex(a)),pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16))].join("")}function desaturate(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.s-=amount/100,hsl.s=clamp01(hsl.s),tinycolor(hsl)}function saturate(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.s+=amount/100,hsl.s=clamp01(hsl.s),tinycolor(hsl)}function greyscale(color){return tinycolor(color).desaturate(100)}function lighten(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.l+=amount/100,hsl.l=clamp01(hsl.l),tinycolor(hsl)}function brighten(color,amount){amount=0===amount?0:amount||10;var rgb=tinycolor(color).toRgb();return rgb.r=mathMax(0,mathMin(255,rgb.r-mathRound(-amount/100*255))),rgb.g=mathMax(0,mathMin(255,rgb.g-mathRound(-amount/100*255))),rgb.b=mathMax(0,mathMin(255,rgb.b-mathRound(-amount/100*255))),tinycolor(rgb)}function darken(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.l-=amount/100,hsl.l=clamp01(hsl.l),tinycolor(hsl)}function spin(color,amount){var hsl=tinycolor(color).toHsl(),hue=(hsl.h+amount)%360;return hsl.h=hue<0?360+hue:hue,tinycolor(hsl)}function complement(color){var hsl=tinycolor(color).toHsl();return hsl.h=(hsl.h+180)%360,tinycolor(hsl)}function triad(color){var hsl=tinycolor(color).toHsl(),h=hsl.h;return[tinycolor(color),tinycolor({h:(h+120)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+240)%360,s:hsl.s,l:hsl.l})]}function tetrad(color){var hsl=tinycolor(color).toHsl(),h=hsl.h;return[tinycolor(color),tinycolor({h:(h+90)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+180)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+270)%360,s:hsl.s,l:hsl.l})]}function splitcomplement(color){var hsl=tinycolor(color).toHsl(),h=hsl.h;return[tinycolor(color),tinycolor({h:(h+72)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+216)%360,s:hsl.s,l:hsl.l})]}function analogous(color,results,slices){results=results||6,slices=slices||30;var hsl=tinycolor(color).toHsl(),part=360/slices,ret=[tinycolor(color)];for(hsl.h=(hsl.h-(part*results>>1)+720)%360;--results;)hsl.h=(hsl.h+part)%360,ret.push(tinycolor(hsl));return ret}function monochromatic(color,results){results=results||6;for(var hsv=tinycolor(color).toHsv(),h=hsv.h,s=hsv.s,v=hsv.v,ret=[],modification=1/results;results--;)ret.push(tinycolor({h:h,s:s,v:v})),v=(v+modification)%1;return ret}tinycolor.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var rgb=this.toRgb();return(299*rgb.r+587*rgb.g+114*rgb.b)/1e3},getLuminance:function(){var RsRGB,GsRGB,BsRGB,rgb=this.toRgb();return RsRGB=rgb.r/255,GsRGB=rgb.g/255,BsRGB=rgb.b/255,.2126*(RsRGB<=.03928?RsRGB/12.92:Math.pow((RsRGB+.055)/1.055,2.4))+.7152*(GsRGB<=.03928?GsRGB/12.92:Math.pow((GsRGB+.055)/1.055,2.4))+.0722*(BsRGB<=.03928?BsRGB/12.92:Math.pow((BsRGB+.055)/1.055,2.4))},setAlpha:function(value){return this._a=boundAlpha(value),this._roundA=mathRound(100*this._a)/100,this},toHsv:function(){var hsv=rgbToHsv(this._r,this._g,this._b);return{h:360*hsv.h,s:hsv.s,v:hsv.v,a:this._a}},toHsvString:function(){var hsv=rgbToHsv(this._r,this._g,this._b),h=mathRound(360*hsv.h),s=mathRound(100*hsv.s),v=mathRound(100*hsv.v);return 1==this._a?"hsv("+h+", "+s+"%, "+v+"%)":"hsva("+h+", "+s+"%, "+v+"%, "+this._roundA+")"},toHsl:function(){var hsl=rgbToHsl(this._r,this._g,this._b);return{h:360*hsl.h,s:hsl.s,l:hsl.l,a:this._a}},toHslString:function(){var hsl=rgbToHsl(this._r,this._g,this._b),h=mathRound(360*hsl.h),s=mathRound(100*hsl.s),l=mathRound(100*hsl.l);return 1==this._a?"hsl("+h+", "+s+"%, "+l+"%)":"hsla("+h+", "+s+"%, "+l+"%, "+this._roundA+")"},toHex:function(allow3Char){return rgbToHex(this._r,this._g,this._b,allow3Char)},toHexString:function(allow3Char){return"#"+this.toHex(allow3Char)},toHex8:function(allow4Char){return function(r,g,b,a,allow4Char){var hex=[pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16)),pad2(convertDecimalToHex(a))];if(allow4Char&&hex[0].charAt(0)==hex[0].charAt(1)&&hex[1].charAt(0)==hex[1].charAt(1)&&hex[2].charAt(0)==hex[2].charAt(1)&&hex[3].charAt(0)==hex[3].charAt(1))return hex[0].charAt(0)+hex[1].charAt(0)+hex[2].charAt(0)+hex[3].charAt(0);return hex.join("")}(this._r,this._g,this._b,this._a,allow4Char)},toHex8String:function(allow4Char){return"#"+this.toHex8(allow4Char)},toRgb:function(){return{r:mathRound(this._r),g:mathRound(this._g),b:mathRound(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+mathRound(this._r)+", "+mathRound(this._g)+", "+mathRound(this._b)+")":"rgba("+mathRound(this._r)+", "+mathRound(this._g)+", "+mathRound(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:mathRound(100*bound01(this._r,255))+"%",g:mathRound(100*bound01(this._g,255))+"%",b:mathRound(100*bound01(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+mathRound(100*bound01(this._r,255))+"%, "+mathRound(100*bound01(this._g,255))+"%, "+mathRound(100*bound01(this._b,255))+"%)":"rgba("+mathRound(100*bound01(this._r,255))+"%, "+mathRound(100*bound01(this._g,255))+"%, "+mathRound(100*bound01(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(hexNames[rgbToHex(this._r,this._g,this._b,!0)]||!1)},toFilter:function(secondColor){var hex8String="#"+rgbaToArgbHex(this._r,this._g,this._b,this._a),secondHex8String=hex8String,gradientType=this._gradientType?"GradientType = 1, ":"";if(secondColor){var s=tinycolor(secondColor);secondHex8String="#"+rgbaToArgbHex(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+gradientType+"startColorstr="+hex8String+",endColorstr="+secondHex8String+")"},toString:function(format){var formatSet=!!format;format=format||this._format;var formattedString=!1,hasAlpha=this._a<1&&this._a>=0;return formatSet||!hasAlpha||"hex"!==format&&"hex6"!==format&&"hex3"!==format&&"hex4"!==format&&"hex8"!==format&&"name"!==format?("rgb"===format&&(formattedString=this.toRgbString()),"prgb"===format&&(formattedString=this.toPercentageRgbString()),"hex"!==format&&"hex6"!==format||(formattedString=this.toHexString()),"hex3"===format&&(formattedString=this.toHexString(!0)),"hex4"===format&&(formattedString=this.toHex8String(!0)),"hex8"===format&&(formattedString=this.toHex8String()),"name"===format&&(formattedString=this.toName()),"hsl"===format&&(formattedString=this.toHslString()),"hsv"===format&&(formattedString=this.toHsvString()),formattedString||this.toHexString()):"name"===format&&0===this._a?this.toName():this.toRgbString()},clone:function(){return tinycolor(this.toString())},_applyModification:function(fn,args){var color=fn.apply(null,[this].concat([].slice.call(args)));return this._r=color._r,this._g=color._g,this._b=color._b,this.setAlpha(color._a),this},lighten:function(){return this._applyModification(lighten,arguments)},brighten:function(){return this._applyModification(brighten,arguments)},darken:function(){return this._applyModification(darken,arguments)},desaturate:function(){return this._applyModification(desaturate,arguments)},saturate:function(){return this._applyModification(saturate,arguments)},greyscale:function(){return this._applyModification(greyscale,arguments)},spin:function(){return this._applyModification(spin,arguments)},_applyCombination:function(fn,args){return fn.apply(null,[this].concat([].slice.call(args)))},analogous:function(){return this._applyCombination(analogous,arguments)},complement:function(){return this._applyCombination(complement,arguments)},monochromatic:function(){return this._applyCombination(monochromatic,arguments)},splitcomplement:function(){return this._applyCombination(splitcomplement,arguments)},triad:function(){return this._applyCombination(triad,arguments)},tetrad:function(){return this._applyCombination(tetrad,arguments)}},tinycolor.fromRatio=function(color,opts){if("object"==typeof color){var newColor={};for(var i in color)color.hasOwnProperty(i)&&(newColor[i]="a"===i?color[i]:convertToPercentage(color[i]));color=newColor}return tinycolor(color,opts)},tinycolor.equals=function(color1,color2){return!(!color1||!color2)&&tinycolor(color1).toRgbString()==tinycolor(color2).toRgbString()},tinycolor.random=function(){return tinycolor.fromRatio({r:mathRandom(),g:mathRandom(),b:mathRandom()})},tinycolor.mix=function(color1,color2,amount){amount=0===amount?0:amount||50;var rgb1=tinycolor(color1).toRgb(),rgb2=tinycolor(color2).toRgb(),p=amount/100;return tinycolor({r:(rgb2.r-rgb1.r)*p+rgb1.r,g:(rgb2.g-rgb1.g)*p+rgb1.g,b:(rgb2.b-rgb1.b)*p+rgb1.b,a:(rgb2.a-rgb1.a)*p+rgb1.a})},tinycolor.readability=function(color1,color2){var c1=tinycolor(color1),c2=tinycolor(color2);return(Math.max(c1.getLuminance(),c2.getLuminance())+.05)/(Math.min(c1.getLuminance(),c2.getLuminance())+.05)},tinycolor.isReadable=function(color1,color2,wcag2){var wcag2Parms,out,readability=tinycolor.readability(color1,color2);switch(out=!1,(wcag2Parms=function(parms){var level,size;level=((parms=parms||{level:"AA",size:"small"}).level||"AA").toUpperCase(),size=(parms.size||"small").toLowerCase(),"AA"!==level&&"AAA"!==level&&(level="AA");"small"!==size&&"large"!==size&&(size="small");return{level:level,size:size}}(wcag2)).level+wcag2Parms.size){case"AAsmall":case"AAAlarge":out=readability>=4.5;break;case"AAlarge":out=readability>=3;break;case"AAAsmall":out=readability>=7}return out},tinycolor.mostReadable=function(baseColor,colorList,args){var readability,includeFallbackColors,level,size,bestColor=null,bestScore=0;includeFallbackColors=(args=args||{}).includeFallbackColors,level=args.level,size=args.size;for(var i=0;i<colorList.length;i++)(readability=tinycolor.readability(baseColor,colorList[i]))>bestScore&&(bestScore=readability,bestColor=tinycolor(colorList[i]));return tinycolor.isReadable(baseColor,bestColor,{level:level,size:size})||!includeFallbackColors?bestColor:(args.includeFallbackColors=!1,tinycolor.mostReadable(baseColor,["#fff","#000"],args))};var names=tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},hexNames=tinycolor.hexNames=function(o){var flipped={};for(var i in o)o.hasOwnProperty(i)&&(flipped[o[i]]=i);return flipped}(names);function boundAlpha(a){return a=parseFloat(a),(isNaN(a)||a<0||a>1)&&(a=1),a}function bound01(n,max){(function(n){return"string"==typeof n&&-1!=n.indexOf(".")&&1===parseFloat(n)})(n)&&(n="100%");var processPercent=function(n){return"string"==typeof n&&-1!=n.indexOf("%")}(n);return n=mathMin(max,mathMax(0,parseFloat(n))),processPercent&&(n=parseInt(n*max,10)/100),Math.abs(n-max)<1e-6?1:n%max/parseFloat(max)}function clamp01(val){return mathMin(1,mathMax(0,val))}function parseIntFromHex(val){return parseInt(val,16)}function pad2(c){return 1==c.length?"0"+c:""+c}function convertToPercentage(n){return n<=1&&(n=100*n+"%"),n}function convertDecimalToHex(d){return Math.round(255*parseFloat(d)).toString(16)}function convertHexToDecimal(h){return parseIntFromHex(h)/255}var CSS_UNIT,PERMISSIVE_MATCH3,PERMISSIVE_MATCH4,matchers=(PERMISSIVE_MATCH3="[\\s|\\(]+("+(CSS_UNIT="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?",PERMISSIVE_MATCH4="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?",{CSS_UNIT:new RegExp(CSS_UNIT),rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hsva:new RegExp("hsva"+PERMISSIVE_MATCH4),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function isValidCSSUnit(color){return!!matchers.CSS_UNIT.exec(color)}module.exports?module.exports=tinycolor:void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return tinycolor}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(Math)},function(module){module.exports=JSON.parse('{"all":["aerialway","airfield","airport","alcohol-shop","american-football","amusement-park","aquarium","arrow-es","art-gallery","attraction","bakery","bank","bar","barrier","baseball","basketball","bbq","beach","beer","bicycle","bicycle-share","blood-bank","boat-es","bowling-alley","bridge","building","building-alt1","bus","cafe","campsite","car","car-rental","car-repair","car-top-es","casino","castle","cemetery","charging-station","cinema","circle","circle-stroked","city","clothing-store","college","commercial","communications-tower","confectionery","convenience","cricket","cross","dam","danger","defibrillator","dentist","doctor","dog-park","drinking-water","embassy","emergency-phone","entrance","entrance-alt1","farm","fast-food","fence","ferry","fire-station","fitness-centre","florist","fuel","furniture","gaming","garden","garden-centre","gift","globe","golf","grocery","hairdresser","harbor","hardware","heart","heliport","home","horse-riding","hospital","ice-cream","industry","information","jewelry-store","karaoke","landmark","landuse","laundry","library","lighthouse","lodging","logging","marker","marker-stroked","mobile-phone","monument","mountain","museum","music","natural","oil-rig-es","optician","paint","park","park-alt1","parking","parking-garage","pharmacy","picnic-site","pitch","place-of-worship","playground","police","post","prison","rail","rail-light","rail-metro","ranger-station","recycling","religious-buddhist","religious-christian","religious-jewish","religious-muslim","residential-community","restaurant","restaurant-noodle","restaurant-pizza","restaurant-seafood","roadblock","rocket","school","scooter","shelter","shoe","shop","skateboard","skiing","slaughterhouse","slipway","snowmobile","soccer","square","square-stroked","stadium","star","star-stroked","suitcase","sushi","swimming","table-tennis","teahouse","telephone","tennis","theatre","toilet","town","town-hall","triangle","triangle-stroked","veterinary","viewpoint","village","volcano","volleyball","warehouse","waste-basket","watch","water","waterfall","watermill","wetland","wheelchair","windmill","zoo"]}')},function(module){module.exports=JSON.parse('["<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"aerialway-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9,4.5H6V3.1c0.1992-0.1183,0.3512-0.3021,0.43-0.52L9.5,2C9.7761,2,10,1.7761,10,1.5S9.7761,1,9.5,1&#xA;&#x9;L6.25,1.61C5.8847,1.1957,5.2528,1.156,4.8386,1.5213C4.713,1.6321,4.6172,1.7726,4.56,1.93L1.5,2.5C1.2239,2.5,1,2.7239,1,3&#xA;&#x9;s0.2239,0.5,0.5,0.5l3.25-0.61C4.8213,2.9732,4.9057,3.0442,5,3.1v1.4H2c-0.5523,0-1,0.4477-1,1V9c0,0.5523,0.4477,1,1,1h7&#xA;&#x9;c0.5523,0,1-0.4477,1-1V5.5C10,4.9477,9.5523,4.5,9,4.5z M5,8.5H2.5v-3H5V8.5z M8.5,8.5H6v-3h2.5V8.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"aerialway-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13,5H8V2.6c0.1854-0.1047,0.3325-0.2659,0.42-0.46L13.5,1.5C13.7761,1.5,14,1.2761,14,1s-0.2239-0.5-0.5-0.5L8.28,1.15&#xA;&#x9;C8.0954,0.9037,7.8077,0.7562,7.5,0.75C7.0963,0.752,6.7334,0.9966,6.58,1.37L1.5,2C1.2239,2,1,2.2239,1,2.5S1.2239,3,1.5,3&#xA;&#x9;l5.22-0.65C6.7967,2.4503,6.8917,2.5351,7,2.6V5H2C1.4477,5,1,5.4477,1,6v7c0,0.5523,0.4477,1,1,1h11c0.5523,0,1-0.4477,1-1V6&#xA;&#x9;C14,5.4477,13.5523,5,13,5z M7,11H3V7h4V11z M12,11H8V7h4V11z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"airfield-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path5\\" d=\\"M5,0.5H3.5C3,0.5,3,0,3.5,0h4&#xA;&#x9;C8,0,8,0.5,7.5,0.5H6C6,0.5,6.5,1,6.5,2v1H11v1.5l-4.5,2L6,10l1.5,0.5V11h-4v-0.5L5,10L4.5,6.5L0,4.5V3h4.5V2C4.5,1,5,0.5,5,0.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"airfield-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path5\\" d=\\"M6.8182,0.6818H4.7727&#xA;&#x9;C4.0909,0.6818,4.0909,0,4.7727,0h5.4545c0.6818,0,0.6818,0.6818,0,0.6818H8.1818c0,0,0.8182,0.5909,0.8182,1.9545V4h6v2L9,8l-0.5,5&#xA;&#x9;l2.5,1.3182V15H4v-0.6818L6.5,13L6,8L0,6V4h6V2.6364C6,1.2727,6.8182,0.6818,6.8182,0.6818z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"airport-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M6.5,6.4V6L11,6.5V5L6.5,3.2V1.5c0-1-0.5-1.5-1-1.5s-1,0.5-1,1.5v1.7L0,5v1.4L4.5,6v0.4v1.1v1.8L3,10v1l2.5-0.5L8,11v-1&#xA;&#x9;L6.5,9.2V7.5V6.4z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"airport-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path7712-0\\" d=\\"M15,6.8182L15,8.5l-6.5-1&#xA;&#x9;l-0.3182,4.7727L11,14v1l-3.5-0.6818L4,15v-1l2.8182-1.7273L6.5,7.5L0,8.5V6.8182L6.5,4.5v-3c0,0,0-1.5,1-1.5s1,1.5,1,1.5v2.8182&#xA;&#x9;L15,6.8182z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"alcohol-shop-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M7,4v2.5c0.0018,0.6341,0.4021,1.1986,1,1.41V10H7.5C7.2239,10,7,10.2239,7,10.5S7.2239,11,7.5,11h2&#xA;&#x9;c0.2761,0,0.5-0.2239,0.5-0.5S9.7761,10,9.5,10H9V7.91c0.5979-0.2114,0.9982-0.7759,1-1.41V4H7z M9.5,6.5c0,0.5523-0.4477,1-1,1&#xA;&#x9;s-1-0.4477-1-1v-2h2V6.5z M4.21,2.85V2.5c0.1961,0,0.355-0.1589,0.355-0.355S4.4061,1.79,4.21,1.79V1.44&#xA;&#x9;c0.0001-0.1933-0.1566-0.3501-0.3499-0.3501c-0.0034,0-0.0068,0-0.0101,0.0001H3.14C2.9468,1.0845,2.7857,1.2366,2.7801,1.4299&#xA;&#x9;C2.78,1.4332,2.78,1.4366,2.78,1.44v0.35c-0.1961,0-0.355,0.1589-0.355,0.355S2.5839,2.5,2.78,2.5v0.35C2.79,3.87,1,5,1,6v4.25&#xA;&#x9;c-0.0056,0.3866,0.3033,0.7044,0.6899,0.71c0.0067,0.0001,0.0134,0.0001,0.0201,0h3.58c0.3628-0.0329,0.6561-0.3097,0.71-0.67V6&#xA;&#x9;C6,5.09,4.21,3.81,4.21,2.85z M3.5,9C2.6716,9,2,8.3284,2,7.5S2.6716,6,3.5,6S5,6.6716,5,7.5S4.3284,9,3.5,9z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"alcohol-shop-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M14,4h-4v3.44l0,0c0,0,0,0,0,0.06c0.003,0.9096,0.6193,1.7026,1.5,1.93V13H11c-0.2761,0-0.5,0.2239-0.5,0.5&#xA;&#x9;S10.7239,14,11,14h2c0.2761,0,0.5-0.2239,0.5-0.5S13.2761,13,13,13h-0.5V9.43c0.8807-0.2274,1.497-1.0204,1.5-1.93c0,0,0,0,0-0.06&#xA;&#x9;l0,0V4z M13,7.5c0,0.5523-0.4477,1-1,1s-1-0.4477-1-1V5h2V7.5z M5.5,2.5V2C5.7761,2,6,1.7761,6,1.5S5.7761,1,5.5,1V0.5&#xA;&#x9;C5.5,0.2239,5.2761,0,5,0H4C3.7239,0,3.5,0.2239,3.5,0.5V1C3.2239,1,3,1.2239,3,1.5S3.2239,2,3.5,2v0.5C3.5,3.93,1,5.57,1,7v6&#xA;&#x9;c0,0.5523,0.4477,1,1,1h5c0.5318-0.0465,0.9535-0.4682,1-1V7C8,5.65,5.5,3.85,5.5,2.5z M4.5,12C3.1193,12,2,10.8807,2,9.5&#xA;&#x9;S3.1193,7,4.5,7S7,8.1193,7,9.5S5.8807,12,4.5,12z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"american-football-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M5.53,2C2.47,2,1,5.5,1,5.5S2.47,9,5.53,9S10,5.5,10,5.5S8.6,2,5.53,2z M7,6H4C3.7239,6,3.5,5.7761,3.5,5.5S3.7239,5,4,5h3&#xA;&#x9;c0.2761,0,0.5,0.2239,0.5,0.5S7.2761,6,7,6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"american-football-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M7.53,3C3.09,3,1,7.5,1,7.5S3.09,12,7.53,12S14,7.5,14,7.5S12,3,7.53,3z M11,7v1.5C11,8.7761,10.7761,9,10.5,9&#xA;&#x9;S10,8.7761,10,8.5V8H8v0.5C8,8.7761,7.7761,9,7.5,9S7,8.7761,7,8.5V8H5v0.5C5,8.7761,4.7761,9,4.5,9S4,8.7761,4,8.5v-2&#xA;&#x9;C4,6.2239,4.2239,6,4.5,6S5,6.2239,5,6.5V7h2V6.5C7,6.2239,7.2239,6,7.5,6S8,6.2239,8,6.5V7h2V6.5C10,6.2239,10.2239,6,10.5,6&#xA;&#x9;S11,6.2239,11,6.5V7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"amusement-park-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path5082\\" d=\\"M5.5,1C3.0206,1,1,3.0206,1,5.5c0,1.7919,1.0627,3.3316,2.584,4.0547L2.5,11h6L7.416,9.5547&#xA;&#x9;C8.9373,8.8316,10,7.2919,10,5.5C10,3.0206,7.9794,1,5.5,1z M5.375,2.0117v1.9941c-0.3108,0.026-0.6057,0.1482-0.8438,0.3496&#xA;&#x9;L3.1191,2.9434C3.7146,2.3888,4.5013,2.0428,5.375,2.0117z M5.625,2.0117c0.8737,0.0311,1.6604,0.3771,2.2559,0.9316L6.4688,4.3555&#xA;&#x9;c-0.0007-0.0007-0.0013-0.0013-0.002-0.002C6.229,4.1532,5.9348,4.0317,5.625,4.0059V2.0117z M2.9434,3.1191l1.4121,1.4121&#xA;&#x9;c-0.0007,0.0007-0.0013,0.0013-0.002,0.002C4.1532,4.771,4.0317,5.0652,4.0059,5.375H2.0117&#xA;&#x9;C2.0428,4.5013,2.3888,3.7146,2.9434,3.1191z M8.0566,3.1191C8.6112,3.7146,8.9572,4.5013,8.9883,5.375H6.9941&#xA;&#x9;c-0.026-0.3108-0.1482-0.6057-0.3496-0.8438L8.0566,3.1191z M2.0117,5.625h1.9941c0.026,0.3108,0.1482,0.6057,0.3496,0.8438&#xA;&#x9;L2.9434,7.8809C2.3888,7.2854,2.0428,6.4987,2.0117,5.625z M6.9941,5.625h1.9941C8.9572,6.4987,8.6112,7.2854,8.0566,7.8809&#xA;&#x9;L6.6445,6.4688c0.0007-0.0007,0.0013-0.0013,0.002-0.002C6.8468,6.229,6.9683,5.9348,6.9941,5.625z M4.5312,6.6445&#xA;&#x9;c0.0007,0.0007,0.0013,0.0013,0.002,0.002C4.6716,6.7624,4.8297,6.8524,5,6.9121v2.0391C4.2765,8.8476,3.6278,8.5303,3.1191,8.0566&#xA;&#x9;L4.5312,6.6445z M6.4688,6.6445l1.4121,1.4121C7.3722,8.5303,6.7235,8.8476,6,8.9512V6.9121C6.1711,6.852,6.33,6.7613,6.4688,6.6445&#xA;&#x9;z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"amusement-park-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path5082\\" d=\\"M7.5,0C3.919,0,1,2.919,1,6.5c0,2.3161,1.2251,4.3484,3.0566,5.5H4l-1,2h9l-1-2h-0.0566&#xA;&#x9;C12.7749,10.8484,14,8.8161,14,6.5C14,2.919,11.081,0,7.5,0z M7.375,1.5059v3.5c-0.3108,0.026-0.6057,0.1482-0.8438,0.3496&#xA;&#x9;L4.0566,2.8809C4.9243,2.0555,6.0851,1.5376,7.375,1.5059z M7.625,1.5059c1.2899,0.0317,2.4507,0.5496,3.3184,1.375L8.4688,5.3555&#xA;&#x9;c-0.0007-0.0007-0.0013-0.0013-0.002-0.002C8.229,5.1532,7.9348,5.0317,7.625,5.0059V1.5059z M3.8809,3.0566l2.4746,2.4746&#xA;&#x9;c-0.0007,0.0007-0.0013,0.0013-0.002,0.002C6.1532,5.771,6.0317,6.0652,6.0059,6.375h-3.5&#xA;&#x9;C2.5376,5.0851,3.0555,3.9243,3.8809,3.0566z M11.1191,3.0566c0.8254,0.8676,1.3433,2.0285,1.375,3.3184h-3.5&#xA;&#x9;c-0.026-0.3108-0.1482-0.6057-0.3496-0.8438L11.1191,3.0566z M2.5059,6.625h3.5c0.026,0.3108,0.1482,0.6057,0.3496,0.8438&#xA;&#x9;L3.8809,9.9434C3.0555,9.0757,2.5376,7.9149,2.5059,6.625z M8.9941,6.625h3.5c-0.0317,1.2899-0.5496,2.4507-1.375,3.3184&#xA;&#x9;L8.6445,7.4688c0.0007-0.0007,0.0013-0.0013,0.002-0.002C8.8468,7.229,8.9683,6.9348,8.9941,6.625z M6.5312,7.6445&#xA;&#x9;c0.0007,0.0007,0.0013,0.0013,0.002,0.002C6.6716,7.7624,6.8297,7.8524,7,7.9121v3.5625c-1.1403-0.1124-2.1606-0.6108-2.9434-1.3555&#xA;&#x9;L6.5312,7.6445z M8.4688,7.6445l2.4746,2.4746c-0.7828,0.7447-1.803,1.243-2.9434,1.3555V7.9121&#xA;&#x9;C8.1711,7.852,8.33,7.7613,8.4688,7.6445z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"aquarium-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path3338\\" d=\\"M8,1C7.1243,1,6.1491,1.092,4.9961,1.5273&#xA;&#x9;C3.8431,1.9622,2.8479,2.6569,2,3.5C1.1477,4.3474,0,6,0,6.5s1.1354,1.9426,2.6777,2.6211&#xA;&#x9;c1.5424,0.6784,2.3909,0.7983,3.2832,0.8945c0.7968,0.086,1.9424-0.027,2.8848-0.2324C9.5925,9.6205,10.9937,9.3099,11,9&#xA;&#x9;c0,0-2.7561-0.063-3-0.5c-0.2486-0.4448-0.2494-1.5858,0-2c0.258-0.4283,2.5,1,2.5,1c0.6439,0.2576,0.6439-4.2576,0-4&#xA;&#x9;c0,0-2.2768,1.4474-2.5,1C7.7506,4,7.7506,3,8,2.5C8.2232,2.0526,11,2,11,2C11,1.5,8.8757,1,8,1z M3.5137,4.502&#xA;&#x9;c0.5598,0.0001,1.0136,0.4539,1.0137,1.0137C4.5272,6.0754,4.0735,6.5292,3.5137,6.5293C2.9539,6.5292,2.5001,6.0754,2.5,5.5156&#xA;&#x9;C2.5001,4.9558,2.9539,4.5021,3.5137,4.502z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"aquarium-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M10.9,11.6c-0.3-0.6-0.3-2.3,0-2.8c0.4-0.6,3.4,1.4,3.4,1.4c0.9,0.4,0.9-6.1,0-5.7&#xA;&#x9;c0,0-3.1,2.1-3.4,1.4c-0.3-0.7-0.3-2.1,0-2.8C11.2,2.5,15,2.4,15,2.4C15,1.7,12.1,1,10.9,1S8.4,1.1,6.8,1.8C5.2,2.4,3.9,3.4,2.7,4.6&#xA;&#x9;S0,8.2,0,8.9s1.5,2.8,3.7,3.7s3.3,1.1,4.5,1.3c1.1,0.1,2.6,0,3.9-0.3c1-0.2,2.9-0.7,2.9-1.1C15,12.3,11.2,12.2,10.9,11.6z M4.5,9.3&#xA;&#x9;C3.7,9.3,3,8.6,3,7.8s0.7-1.5,1.5-1.5S6,7,6,7.8S5.3,9.3,4.5,9.3z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"arrow-es-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M6.68912398,9.49179828 C6.31352747,9.03258227 5.76080389,8.34688747 5.74868301,8.33447489 C5.68498686,8.26924579 5.59708162,8.22891566 5.5,8.22891566 C5.40215559,8.22891566 5.31363232,8.26988205 5.24982005,8.33601706 C5.23668308,8.34963221 4.67555385,9.04578733 4.30561702,9.50344914 C4.05607605,9.77151155 3.76174927,9.65438843 3.68323365,9.61819425 C3.15316969,9.38401112 2.86453945,9.14544458 2.67073059,9.00338745 C2.53083631,8.90084839 2.45346069,8.64973179 2.53083631,8.41444699 C2.99857207,6.99215 3.87240865,4.20383407 5.17605634,1.20963855 C5.23626027,1.08584236 5.35836421,1 5.5,1 C5.63991852,1 5.76077596,1.08377338 5.81756824,1.2051232 C7.12501397,4.20572268 8,7.02011108 8.46101379,8.41444699 C8.54510498,8.66885376 8.46030395,8.8727609 8.35740816,8.97040303 C8.22070313,9.10012817 7.82549445,9.39792108 7.28729653,9.63108766 C7.08,9.71022034 6.85346985,9.68 6.68912398,9.49179828 Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"arrow-es-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M10.2605799,13.3863593 C10.1395968,13.4287864 10.0527368,13.45 10,13.45 C9.86888463,13.45 9.7495566,13.3995324 9.66038175,13.3169629 C9.62336122,13.2826846 7.87888372,11.1717162 7.85312988,11.1460236 C7.76268134,11.05579 7.6378559,11 7.5,11 C7.36106093,11 7.23535789,11.0566702 7.14474446,11.1481569 C7.11712067,11.176047 5.38316951,13.2743383 5.3512134,13.3058781 C5.26092214,13.3949932 5.13688483,13.45 5,13.45 C4.94846592,13.45 4.86607927,13.4308817 4.75284004,13.3926451 C3.95322232,13.0192244 3.32116699,12.5002136 3.1295929,12.3130188 C3.04943242,12.222975 2.999749,12.1044865 2.999749,11.9743938 C2.999749,11.8971872 3.01724809,11.8240676 3.04849642,11.7587851 L7.04,1.29 L7.04612499,1.289958 C7.12548958,1.1187486 7.29887718,1 7.5,1 C7.6986843,1 7.87030186,1.11588651 7.9509469,1.28375376 L7.95635553,1.28371668 L11.962677,11.7834625 C11.993942,11.8487592 12.0005287,11.9135014 12.0005287,11.99073 C12.0005287,12.1135282 11.962677,12.2262726 11.8828125,12.3130188 C11.7159576,12.47 10.804184,13.1774445 10.2605799,13.3863593 Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"art-gallery-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M8.21,3L5.85,0.65C5.6555,0.4539,5.339,0.4526,5.1429,0.6471C5.1419,0.6481,5.141,0.649,5.14,0.65L2.79,3H1.5&#xA;&#x9;C1.2239,3,1,3.2239,1,3.5v6C1,9.7761,1.2239,10,1.5,10h8C9.7761,10,10,9.7761,10,9.5v-6C10,3.2239,9.7761,3,9.5,3H8.21z M5.5,1.71&#xA;&#x9;L6.79,3H4.21L5.5,1.71z M9,9H2V4h7V9z M4.5,5.5C4.5,5.7761,4.2761,6,4,6S3.5,5.7761,3.5,5.5S3.7239,5,4,5S4.5,5.2239,4.5,5.5z M8,8&#xA;&#x9;H4l0.75-1.5l0.5,1L6.5,5L8,8z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"art-gallery-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M10.71,4L7.85,1.15C7.6555,0.9539,7.339,0.9526,7.1429,1.1471C7.1419,1.1481,7.141,1.149,7.14,1.15L4.29,4H1.5&#xA;&#x9;C1.2239,4,1,4.2239,1,4.5v9C1,13.7761,1.2239,14,1.5,14h12c0.2761,0,0.5-0.2239,0.5-0.5v-9C14,4.2239,13.7761,4,13.5,4H10.71z&#xA;&#x9; M7.5,2.21L9.29,4H5.71L7.5,2.21z M13,13H2V5h11V13z M5,8C4.4477,8,4,7.5523,4,7s0.4477-1,1-1s1,0.4477,1,1S5.5523,8,5,8z M12,12&#xA;&#x9;H4.5L6,9l1.25,2.5L9.5,7L12,12z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"attraction-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect7143\\" d=\\"M4.5,1.5c0,0-0.5,0-0.7,0.5L3.5,2.5H1c-0.6,0-1,0.4-1,1v5c0,0.6,0.4,1,1,1h9&#xA;&#x9;c0.6,0,1-0.4,1-1v-5c0-0.6-0.4-1-1-1H7.5L7.2,2C7,1.5,6.5,1.5,6.5,1.5H4.5z M5.5,3.5C6.9,3.5,8,4.6,8,6S6.9,8.5,5.5,8.5S3,7.4,3,6&#xA;&#x9;S4.1,3.5,5.5,3.5z M5.5,5c-0.6,0-1,0.4-1,1s0.4,1,1,1s1-0.4,1-1S6.1,5,5.5,5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"attraction-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect7143\\" d=\\"M6,2C5.446,2,5.2478,2.5045,5,3L4.5,4h-2C1.669,4,1,4.669,1,5.5v5C1,11.331,1.669,12,2.5,12h10&#xA;&#x9;c0.831,0,1.5-0.669,1.5-1.5v-5C14,4.669,13.331,4,12.5,4h-2L10,3C9.75,2.5,9.554,2,9,2H6z M2.5,5C2.7761,5,3,5.2239,3,5.5&#xA;&#x9;S2.7761,6,2.5,6S2,5.7761,2,5.5S2.2239,5,2.5,5z M7.5,5c1.6569,0,3,1.3431,3,3s-1.3431,3-3,3s-3-1.3431-3-3S5.8431,5,7.5,5z&#xA;&#x9; M7.5,6.5C6.6716,6.5,6,7.1716,6,8l0,0c0,0.8284,0.6716,1.5,1.5,1.5l0,0C8.3284,9.5,9,8.8284,9,8l0,0C9,7.1716,8.3284,6.5,7.5,6.5&#xA;&#x9;L7.5,6.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bakery-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path5836\\" d=\\"M4.5,2c-1,0-1,1-1,1L5,7.5&#xA;&#x9;C5,7.5,5,8,5.5,8S6,7.5,6,7.5L7.5,3c0,0,0-1-1-1H4.5z M9,3.5l-2,4h1.5l1,1H10c1,0,1-0.9,1-0.9V6.3L9,3.5z M0,6.3v1.2&#xA;&#x9;c0,0,0.0296,1.0097,1,1c0.9704-0.0097,0.5,0,0.5,0l1-1H4l-2-4L0,6.3z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bakery-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path5230\\" d=\\"M5.2941,4.3824L6,9.5&#xA;&#x9;c0,0,0,1,1,1h1c1,0,1-1,1-1l0.7059-5.1176C9.7059,3,7.5,3,7.5,3S5.291,3,5.2941,4.3824z M3.5,5C2,5,2,6,2,6l1,4h1.5&#xA;&#x9;c0.755,0,0.7941-0.7647,0.7941-0.7647L4.5,5H3.5z M1.5,7.5c0,0-0.6176-0.0294-1.0588,0.4118C0,8.3529,0,8.7941,0,8.7941V11h0.8824&#xA;&#x9;C2,11,2,10,2,10L1.5,7.5z\\"/>\\n  <path id=\\"path5230-2\\" d=\\"M11.5,5C13,5,13,6,13,6l-1,4h-1.5&#xA;&#x9;c-0.755,0-0.7941-0.7647-0.7941-0.7647L10.5,5H11.5z M13.5,7.5c0,0,0.6176-0.0294,1.0588,0.4118C15,8.3529,15,8.7941,15,8.7941V11&#xA;&#x9;h-0.8824C13,11,13,10,13,10L13.5,7.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bank-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path5622\\" d=\\"M1,2C0,2,0,3,0,3v5c0,1,1,1,1,1h9c1,0,1-1,1-1V3c0,0,0-1-1-1H1z M1,3h1.5C2.7761,3,3,3.2239,3,3.5&#xA;&#x9;S2.7761,4,2.5,4S2,3.7761,2,3.5L1.5,4C1.7761,4,2,4.2239,2,4.5S1.7761,5,1.5,5S1,4.7761,1,4.5V3z M5.5,3c1.1046,0,2,1.1193,2,2.5&#xA;&#x9;S6.6046,8,5.5,8s-2-1.1193-2-2.5S4.3954,3,5.5,3z M8.5,3H10v1.5C10,4.7761,9.7761,5,9.5,5S9,4.7761,9,4.5S9.2239,4,9.5,4L9,3.5&#xA;&#x9;C9,3.7761,8.7761,4,8.5,4S8,3.7761,8,3.5S8.2239,3,8.5,3z M1.5,6C1.7761,6,2,6.2239,2,6.5S1.7761,7,1.5,7L2,7.5&#xA;&#x9;C2,7.2239,2.2239,7,2.5,7S3,7.2239,3,7.5S2.7761,8,2.5,8H1V6.5C1,6.2239,1.2239,6,1.5,6z M9.5,6C9.7761,6,10,6.2239,10,6.5V8H8.5&#xA;&#x9;C8.2239,8,8,7.7761,8,7.5S8.2239,7,8.5,7S9,7.2239,9,7.5L9.5,7C9.2239,7,9,6.7761,9,6.5S9.2239,6,9.5,6z\\"/>\\n  <path id=\\"path5835\\" d=\\"M4.9023,4.25C4.8261,4.321,4.7584,4.4051,4.7012,4.5h1.5977c-0.0572-0.0949-0.125-0.179-0.2012-0.25H4.9023z&#xA;&#x9; M4.5859,4.75C4.5575,4.8303,4.5359,4.9141,4.5215,5h1.959C6.4661,4.9141,6.4445,4.8303,6.416,4.75H4.5859z M4.5,5.25&#xA;&#x9;C4.4998,5.3339,4.5063,5.4177,4.5195,5.5h1.959C6.4924,5.4178,6.4996,5.334,6.5,5.25H4.5z M4.5859,5.75&#xA;&#x9;C4.6171,5.8387,4.6564,5.9226,4.7031,6h1.5957c0.046-0.0775,0.0847-0.1614,0.1152-0.25H4.5859z M4.9023,6.25&#xA;&#x9;c0.0109,0.0107,0.022,0.0211,0.0332,0.0312L4.5,6.5h2L6.0645,6.2812C6.0757,6.2711,6.0868,6.2607,6.0977,6.25H4.9023z M4.582,6.75&#xA;&#x9;C4.611,6.8289,4.638,6.9091,4.6914,7h1.627c0.0524-0.091,0.0778-0.1711,0.1055-0.25H4.582z M4.8926,7.25&#xA;&#x9;C5.0395,7.3915,5.2332,7.5,5.5,7.5c0.2739,0,0.4701-0.1085,0.6172-0.25H4.8926z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bank-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect5668\\" d=\\"M1,3C0.446,3,0,3.446,0,4v7c0,0.554,0.446,1,1,1h13c0.554,0,1-0.446,1-1V4c0-0.554-0.446-1-1-1H1z M1,4h1.5&#xA;&#x9;C2.7761,4,3,4.2239,3,4.5S2.7761,5,2.5,5S2,4.7761,2,4.5L1.5,5C1.7761,5,2,5.2239,2,5.5S1.7761,6,1.5,6S1,5.7761,1,5.5V4z M7.5,4&#xA;&#x9;C8.8807,4,10,5.567,10,7.5l0,0C10,9.433,8.8807,11,7.5,11S5,9.433,5,7.5S6.1193,4,7.5,4z M12.5,4H14v1.5C14,5.7761,13.7761,6,13.5,6&#xA;&#x9;S13,5.7761,13,5.5S13.2239,5,13.5,5L13,4.5C13,4.7761,12.7761,5,12.5,5S12,4.7761,12,4.5S12.2239,4,12.5,4z M7.5,5.5&#xA;&#x9;c-0.323,0-0.5336,0.1088-0.6816,0.25h1.3633C8.0336,5.6088,7.823,5.5,7.5,5.5z M6.625,6C6.5795,6.091,6.5633,6.1711,6.5449,6.25&#xA;&#x9;h1.9102C8.4367,6.1711,8.4205,6.091,8.375,6H6.625z M6.5,6.5v0.25h2V6.5H6.5z M6.5,7v0.25h2V7H6.5z M6.5,7.5v0.25h2V7.5H6.5z M6.5,8&#xA;&#x9;L6.25,8.25h2L8.5,8H6.5z M6,8.5c0,0,0.0353,0.1024,0.1016,0.25H8.375L8,8.5H6z M1.5,9C1.7761,9,2,9.2239,2,9.5S1.7761,10,1.5,10&#xA;&#x9;L2,10.5C2,10.2239,2.2239,10,2.5,10S3,10.2239,3,10.5S2.7761,11,2.5,11H1V9.5C1,9.2239,1.2239,9,1.5,9z M6.2383,9&#xA;&#x9;C6.2842,9.0856,6.3144,9.159,6.375,9.25h2.2676C8.7092,9.1121,8.75,9,8.75,9H6.2383z M13.5,9C13.7761,9,14,9.2239,14,9.5V11h-1.5&#xA;&#x9;c-0.2761,0-0.5-0.2239-0.5-0.5s0.2239-0.5,0.5-0.5s0.5,0.2239,0.5,0.5l0.5-0.5C13.2239,10,13,9.7761,13,9.5S13.2239,9,13.5,9z&#xA;&#x9; M6.5664,9.5c0.0786,0.0912,0.1647,0.1763,0.2598,0.25h1.4199C8.3462,9.6727,8.4338,9.5883,8.5,9.5H6.5664z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bar-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path15601-4-2_2_\\" d=\\"M5.4883,1C4.9759,1,0.5,1,1,1.5L5,6v2.5C5,9,2.5,9,2.5,10h6&#xA;&#x9;C8.5,9,6,9,6,8.5V6l4-4.5C10.5,1,6.0006,1,5.4883,1z M2.5,2h6l-1,1h-4L2.5,2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bar-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path4\\" d=\\"M7.5,1c-2,0-7,0.25-6.5,0.75L7,8v4&#xA;&#x9;c0,1-3,0.5-3,2h7c0-1.5-3-1-3-2V8l6-6.25C14.5,1.25,9.5,1,7.5,1z M7.5,2c2.5,0,4.75,0.25,4.75,0.25L11.5,3h-8L2.75,2.25&#xA;&#x9;C2.75,2.25,5,2,7.5,2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"barrier-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.5,2h-8a.5.5,0,0,0-.5.5v4a.5.5,0,0,0,.5.5H2V9.5a.5.5,0,0,0,1,0V9H8v.5a.5.5,0,0,0,1,0V7h.5a.5.5,0,0,0,.5-.5v-4A.5.5,0,0,0,9.5,2ZM2,3H3.5l3,3h-2L2,3.5ZM2,6V4.5L3.5,6ZM3,8V7H8V8ZM9,6H7.5l-3-3h2L9,5.5ZM9,4.5,7.5,3H9Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"barrier-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13,3H2A1,1,0,0,0,1,4v6a1,1,0,0,0,1,1H3v2.5a.5.5,0,0,0,1,0V13h7v.5a.5.5,0,0,0,1,0V11h1a1,1,0,0,0,1-1V4A1,1,0,0,0,13,3Zm0,1V6L11,4ZM9.5,4,13,7.5V10L7,4Zm-4,6L2,6.5V4l6,6ZM2,10V8l2,2Zm9,2H4V11h7Zm-.207-2H9.5l-6-6h2l6,6Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"baseball-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M7,3c0,0.5523-0.4477,1-1,1S5,3.5523,5,3s0.4477-1,1-1S7,2.4477,7,3z M9.85,10.24L9.85,10.24l-3-4.85&#xA;&#x9;C6.7391,5.2011,6.5603,5.0616,6.35,5H2.5C2.2239,5,2,5.2239,2,5.5S2.2239,6,2.5,6H5l0.92,1.09l-2.73,3l0,0&#xA;&#x9;C3.0637,10.1876,2.9928,10.3405,3,10.5C3,10.7761,3.2239,11,3.5,11c0.1224-0.0006,0.2401-0.047,0.33-0.13l0,0l3-2.71L9,10.81l0,0&#xA;&#x9;c0.0912,0.1178,0.231,0.1877,0.38,0.19c0.2761,0,0.5-0.2239,0.5-0.5C9.8938,10.4122,9.8834,10.3223,9.85,10.24z M4,0.28&#xA;&#x9;C4,0.1254,3.8746,0,3.72,0C3.6221,0.0262,3.5348,0.0821,3.47,0.16L2,4.59C1.9941,4.6331,1.9941,4.6769,2,4.72&#xA;&#x9;C2,4.8746,2.1254,5,2.28,5c0.1015-0.0243,0.1926-0.0803,0.26-0.16L4,0.41C4.006,0.3669,4.006,0.3231,4,0.28z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"baseball-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M10,3.5C10,4.3284,9.3284,5,8.5,5S7,4.3284,7,3.5S7.6716,2,8.5,2S10,2.6716,10,3.5z M7,0.28C7,0.1254,6.8746,0,6.72,0&#xA;&#x9;c0,0,0,0,0,0C6.6221,0.0262,6.5348,0.0821,6.47,0.16L4,4.59C3.9941,4.6331,3.9941,4.6769,4,4.72C4,4.8746,4.1254,5,4.28,5&#xA;&#x9;c0.1015-0.0243,0.1926-0.0803,0.26-0.16L7,0.41C7.006,0.3669,7.006,0.3231,7,0.28z M12.9,14.2L12.9,14.2L10,6.39l0,0&#xA;&#x9;C9.9526,6.1627,9.7522,5.9999,9.52,6h-5c-0.2761,0-0.5,0.2239-0.5,0.5S4.2439,7,4.52,7H7l1.45,2.51l-4.27,4.61l0,0&#xA;&#x9;C4.0659,14.2132,3.9998,14.3527,4,14.5C4,14.7761,4.2239,15,4.5,15c0.1224-0.0006,0.2401-0.047,0.33-0.13l0,0l4.45-4.15l2.76,4l0,0&#xA;&#x9;c0.0895,0.1592,0.2574,0.2584,0.44,0.26c0.2796,0.0002,0.5092-0.2207,0.52-0.5C12.9958,14.3787,12.961,14.281,12.9,14.2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"basketball-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"icon_concepts:_sports_leisure\\" d=\\"M2.63,3.51a5.1555,5.1555,0,0,1,.34,1.48H2.04A3.2586,3.2586,0,0,1,2.63,3.51Zm.55-.63a6.2022,6.2022,0,0,1,.55,2.11H5.12V2.01A3.4256,3.4256,0,0,0,3.18,2.88Zm2.7-.87V4.99H7.27a6.2022,6.2022,0,0,1,.55-2.11A3.4256,3.4256,0,0,0,5.88,2.01Zm2.49,1.5a5.1555,5.1555,0,0,0-.34,1.48h.93A3.2586,3.2586,0,0,0,8.37,3.51ZM9.9,6.5a.4952.4952,0,0,1-.49.5H8.44L7.91,8.05v1.7a.2176.2176,0,0,1-.14.2.236.236,0,0,1-.08.02.1987.1987,0,0,1-.16-.07l-.75-.74-1.16.77a.2107.2107,0,0,1-.24,0L4.22,9.16l-.75.74a.2222.2222,0,0,1-.38-.15V8.05L2.57,7H1.6a.5.5,0,1,1,0-1H9.4a.4951.4951,0,0,1,.5.49ZM3.53,8V9.22l.5-.5c.01,0,.01-.01.02-.01L5.1,7H3.06l.45.9A.3561.3561,0,0,1,3.53,8Zm2.97.82-1-1.63-1,1.63,1,.67ZM7.94,7H5.9L6.95,8.71c.01,0,.01.01.02.01l.5.5V8a.3561.3561,0,0,1,.02-.1Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"basketball-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"icon_concepts:_sports_leisure\\" d=\\"M3.66,7.0016H2.03a5.3231,5.3231,0,0,1,1.01-2.71A8.7122,8.7122,0,0,1,3.66,7.0016Zm1.075,0h2.34v-4.97a5.4585,5.4585,0,0,0-3.24,1.44A9.2947,9.2947,0,0,1,4.735,7.0016Zm3.19-4.97v4.97h2.34a9.2947,9.2947,0,0,1,.9-3.53A5.4585,5.4585,0,0,0,7.925,2.0316Zm4.035,2.26a8.7122,8.7122,0,0,0-.62,2.71h1.63A5.3231,5.3231,0,0,0,11.96,4.2916ZM14,8.7516a.7555.7555,0,0,1-.75.75H11.72l-.76,1.52v2.38a.392.392,0,0,1-.24.35.5863.5863,0,0,1-.14.02.3274.3274,0,0,1-.26-.11l-1.02-1.01-1.59,1.06a.3975.3975,0,0,1-.42,0l-1.59-1.06-1.02,1.01a.3709.3709,0,0,1-.4.09.392.392,0,0,1-.24-.35v-2.38l-.76-1.52H1.75a.75.75,0,0,1,0-1.5h11.5A.749.749,0,0,1,14,8.75Zm-7.14.75H4.12l.63,1.27a.3175.3175,0,0,1,.04.16v1.56l.56-.55Zm1.98,2.55L7.5,9.8916l-1.34,2.16,1.34.9Zm2.05-2.55H8.14l1.51,2.44.56.55v-1.56a.3175.3175,0,0,1,.04-.16Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"bbq-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M4,1.75c0,0,0-1,1-1c0,0,0.5,0,0.5-0.5C5.5,0.1119,5.6119,0,5.75,0S6,0.1119,6,0.25c0,0,0,1-1,1c0,0-0.5,0-0.5,0.5&#xA;&#x9;C4.5,1.8881,4.3881,2,4.25,2S4,1.8881,4,1.75z M2.25,2C2.3881,2,2.5,1.8881,2.5,1.75c0-0.5,0.5-0.5,0.5-0.5c1,0,1-1,1-1&#xA;&#x9;C4,0.1119,3.8881,0,3.75,0S3.5,0.1119,3.5,0.25c0,0.5-0.5,0.5-0.5,0.5c-1,0-1,1-1,1C2,1.8881,2.1119,2,2.25,2z M6.25,2&#xA;&#x9;C6.3881,2,6.5,1.8881,6.5,1.75c0-0.5,0.5-0.5,0.5-0.5c1,0,1-1,1-1C8,0.1119,7.8881,0,7.75,0S7.5,0.1119,7.5,0.25&#xA;&#x9;c0,0.5-0.5,0.5-0.5,0.5c-1,0-1,1-1,1C6,1.8881,6.1119,2,6.25,2z M9.75,0C9.6119,0,9.5,0.1119,9.5,0.25c0,0.5-0.5,0.5-0.5,0.5&#xA;&#x9;c-1,0-1,1-1,1C8,1.8881,8.1119,2,8.25,2S8.5,1.8881,8.5,1.75c0-0.5,0.5-0.5,0.5-0.5c1,0,1-1,1-1C10,0.1119,9.8881,0,9.75,0z&#xA;&#x9; M6.6746,5.865C6.6745,5.8654,6.6741,5.8657,6.674,5.866l2.3,4.782v0.009c0.055,0.1215,0.0014,0.2646-0.12,0.32&#xA;&#x9;c-0.1237,0.0574-0.2705,0.0037-0.328-0.12L7.845,9.5H4c0,0.2029-0.0411,0.4036-0.1209,0.5901&#xA;&#x9;C3.5532,10.8518,2.6717,11.205,1.91,10.8792c-0.7617-0.3259-1.115-1.2074-0.7891-1.9691C1.4468,8.1484,2.3283,7.7952,3.09,8.121&#xA;&#x9;c0.0531,0.0208,0.1048,0.0449,0.155,0.072L4.278,5.85C2.9692,5.5125,2.0408,4.351,2,3h7C9,3,8.9985,5.2823,6.6746,5.865z M3.25,9.5&#xA;&#x9;c0-0.4142-0.3358-0.75-0.75-0.75S1.75,9.0858,1.75,9.5s0.3358,0.75,0.75,0.75S3.25,9.9142,3.25,9.5z M6.1731,5.9562&#xA;&#x9;C5.9635,5.9829,5.7419,6,5.5,6C5.2147,6,4.787,5.953,4.787,5.953l-1.144,2.58C3.7659,8.6688,3.8607,8.8275,3.922,9h3.673&#xA;&#x9;L6.1731,5.9562z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"bbq-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M9.32,7.655C10.8782,7.108,11.9471,5.6506,12,4H3c0.053,1.6299,1.0978,3.0728,2.63,3.631L4.923,9.044&#xA;&#x9;c-1.3571-0.2355-2.6482,0.6737-2.8837,2.0308s0.6737,2.6482,2.0308,2.8837C4.9927,14.1187,5.9273,13.7485,6.49,13h4.223l0.335,0.717&#xA;&#x9;c0.0836,0.1735,0.2594,0.2836,0.452,0.283c0.0733,0.0003,0.1457-0.0158,0.212-0.047c0.2497-0.117,0.3575-0.4141,0.241-0.664&#xA;&#x9;L9.32,7.655z M4.5,12.75c-0.6904,0-1.25-0.5596-1.25-1.25s0.5596-1.25,1.25-1.25s1.25,0.5596,1.25,1.25&#xA;&#x9;C5.7484,12.1897,5.1897,12.7484,4.5,12.75z M6.95,12c0.2066-1.007-0.2268-2.0374-1.091-2.594L6.6,7.923&#xA;&#x9;c0.577,0.1042,1.168,0.1042,1.745,0l1.9,4.07L6.95,12z M4.75,1C4.6119,1,4.5,1.1119,4.5,1.25c0,0.5-0.5,0.5-0.5,0.5c-1,0-1,1-1,1&#xA;&#x9;C3,2.8881,3.1119,3,3.25,3S3.5,2.8881,3.5,2.75c0-0.5,0.5-0.5,0.5-0.5c1,0,1-1,1-1C5,1.1119,4.8881,1,4.75,1z M6.75,1&#xA;&#x9;C6.6119,1,6.5,1.1119,6.5,1.25c0,0.5-0.5,0.5-0.5,0.5c-1,0-1,1-1,1C5,2.8881,5.1119,3,5.25,3S5.5,2.8881,5.5,2.75&#xA;&#x9;c0-0.5,0.5-0.5,0.5-0.5c1,0,1-1,1-1C7,1.1119,6.8881,1,6.75,1z M8.75,1C8.6119,1,8.5,1.1119,8.5,1.25c0,0.5-0.5,0.5-0.5,0.5&#xA;&#x9;c-1,0-1,1-1,1C7,2.8881,7.1119,3,7.25,3S7.5,2.8881,7.5,2.75c0-0.5,0.5-0.5,0.5-0.5c1,0,1-1,1-1C9,1.1119,8.8881,1,8.75,1z M10.75,1&#xA;&#x9;c-0.1381,0-0.25,0.1119-0.25,0.25c0,0.5-0.5,0.5-0.5,0.5c-1,0-1,1-1,1C9,2.8881,9.1119,3,9.25,3S9.5,2.8881,9.5,2.75&#xA;&#x9;c0-0.5,0.5-0.5,0.5-0.5c1,0,1-1,1-1C11,1.1119,10.8881,1,10.75,1z M12.75,1c-0.1381,0-0.25,0.1119-0.25,0.25c0,0.5-0.5,0.5-0.5,0.5&#xA;&#x9;c-1,0-1,1-1,1C11,2.8881,11.1119,3,11.25,3s0.25-0.1119,0.25-0.25c0-0.5,0.5-0.5,0.5-0.5c1,0,1-1,1-1C13,1.1119,12.8881,1,12.75,1z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"beach-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M3.5,1.65V4.47a1.7027,1.7027,0,0,0-.58-.04c-.28.07-.56.47-.83.57A3.1261,3.1261,0,0,1,3.5,1.65Zm2.31-.62L7.26,3.45a1.2164,1.2164,0,0,1,.45-.31c.27-.07.7.13,1,.09A3.1057,3.1057,0,0,0,5.81,1.03ZM.9839,10h8.99A4.8406,4.8406,0,0,0,6.9,8.68L5.57,3.74c.46-.04,1.02.06,1.27-.01L5.23,1.04a3.5252,3.5252,0,0,0-.62.11A2.96,2.96,0,0,0,4,1.38v3.1c.25-.08.68-.42,1.08-.6L6.35,8.63q-.39-.03-.84-.03C1.99,8.6.9839,10,.9839,10Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"beach-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M5.3608,1.67l-.01,4.02a4.4523,4.4523,0,0,0-1.1-.11c-.37.1-.74.63-1.1.76A4.2019,4.2019,0,0,1,5.3608,1.67Zm2.41-.64,2.03,3.45a3.1832,3.1832,0,0,1,.84-.61c.36-.1.94.17,1.34.11A4.2018,4.2018,0,0,0,7.7708,1.03ZM1.0008,13h13c-.66-.66-2.64-1.11-4.34-1.33l-1.87-7c.52-.05,1.15.03,1.53,0l-2.11-3.6h-.01a6.1743,6.1743,0,0,0-.7.14,4.3792,4.3792,0,0,0-.64.22l-.01,4.15c.35-.17.84-.54,1.3-.74l1.8,6.74c-.58-.05-1.09-.08-1.45-.08C6.0308,11.5,2.0008,12,1.0008,13Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"beer-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M5.5,1c-2.3,0-3,0.66-3,0.66v2c0.0328,0.9197,0.2577,1.8223,0.66,2.65c0.376,0.9646,0.376,2.0354,0,3c0,0,0,0.66,2.32,0.66&#xA;&#x9;S7.8,9.31,7.8,9.31c-0.376-0.9646-0.376-2.0354,0-3c0.4023-0.8277,0.6272-1.7303,0.66-2.65v-2C8.46,1.66,7.8,1,5.5,1z M5.5,9.28&#xA;&#x9;C4.9736,9.3066,4.4465,9.2458,3.94,9.1c0.1326-0.4787,0.1999-0.9732,0.2-1.47h2.72c-0.0144,0.2198-0.0144,0.4402,0,0.66&#xA;&#x9;C6.8939,8.5635,6.9474,8.8342,7.02,9.1C6.5269,9.2448,6.0136,9.309,5.5,9.29V9.28z M7.82,3.28c-1.5116,0.4425-3.1184,0.4425-4.63,0&#xA;&#x9;L3.18,2c1.5151-0.4422,3.1249-0.4422,4.64,0c0,0,0.03,1.33,0,1.33L7.82,3.28z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"beer-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M12,5V2c0,0-1-1-4.5-1S3,2,3,2v3c0.0288,1.3915,0.3706,2.7586,1,4c0.6255,1.4348,0.6255,3.0652,0,4.5c0,0,0,1,3.5,1&#xA;&#x9;s3.5-1,3.5-1c-0.6255-1.4348-0.6255-3.0652,0-4.5C11.6294,7.7586,11.9712,6.3915,12,5z M7.5,13.5&#xA;&#x9;c-0.7966,0.035-1.5937-0.0596-2.36-0.28c0.203-0.7224,0.304-1.4696,0.3-2.22h4.12c-0.004,0.7504,0.097,1.4976,0.3,2.22&#xA;&#x9;C9.0937,13.4404,8.2966,13.535,7.5,13.5z M7.5,5C6.3136,5.0299,5.1306,4.8609,4,4.5v-2C5.131,2.1411,6.3137,1.9722,7.5,2&#xA;&#x9;C8.6863,1.9722,9.869,2.1411,11,2.5v2C9.8694,4.8609,8.6864,5.0299,7.5,5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bicycle-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path4804\\" d=\\"&#xA;&#x9;M6.5,1.5c-0.6761-0.01-0.6761,1.0096,0,1H7V3.211L4.252,4.7813L3.7383,3.5h0.7148c0.6761,0.01,0.6761-1.0096,0-1H2.4258&#xA;&#x9;c-0.6761-0.01-0.6761,1.0096,0,1h0.2344l0.4316,1.0781C2.9011,4.5311,2.7047,4.5001,2.5,4.5001c-1.3748,0-2.5,1.1252-2.5,2.5&#xA;&#x9;s1.1252,2.5,2.5,2.5S5,8.3748,5,7.0001c0-0.4713-0.1399-0.9078-0.3691-1.2852l2.4707-1.4121L7.5039,4.711&#xA;&#x9;C6.6216,5.0981,6,5.9792,6,7.0001c0,1.3748,1.1252,2.5,2.5,2.5s2.5-1.1252,2.5-2.5c0-1.2959-1.0034-2.3575-2.2695-2.4766L8,3.793V2&#xA;&#x9;c0-0.2761-0.2239-0.5-0.5-0.5H6.5z M2.5,5.5C3.3344,5.5,4,6.1657,4,7S3.3344,8.5,2.5,8.5S1,7.8344,1,7S1.6656,5.5,2.5,5.5z&#xA;&#x9; M8.4551,5.504h0.002c0.0299,0.003,0.06,0.003,0.0898,0C9.3587,5.5289,10,6.1818,10,7.0001c0,0.8344-0.6656,1.5-1.5,1.5&#xA;&#x9;S7,7.8345,7,7.0001C7,6.1811,7.6424,5.5279,8.4551,5.504L8.4551,5.504z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bicycle-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path4668\\" d=\\"&#xA;&#x9;M7.5,2c-0.6761-0.01-0.6761,1.0096,0,1H9v1.2656l-2.8027,2.334L5.2226,4H5.5c0.6761,0.01,0.6761-1.0096,0-1h-2&#xA;&#x9;c-0.6761-0.01-0.6761,1.0096,0,1h0.6523L5.043,6.375C4.5752,6.1424,4.0559,6,3.5,6C1.5729,6,0,7.5729,0,9.5S1.5729,13,3.5,13&#xA;&#x9;S7,11.4271,7,9.5c0-0.6699-0.2003-1.2911-0.5293-1.8242L9.291,5.3262l0.4629,1.1602C8.7114,7.0937,8,8.2112,8,9.5&#xA;&#x9;c0,1.9271,1.5729,3.5,3.5,3.5S15,11.4271,15,9.5S13.4271,6,11.5,6c-0.2831,0-0.5544,0.0434-0.8184,0.1074L10,4.4023V2.5&#xA;&#x9;c0-0.2761-0.2239-0.5-0.5-0.5H7.5z M3.5,7c0.5923,0,1.1276,0.2119,1.5547,0.5527l-1.875,1.5625&#xA;&#x9;c-0.5109,0.4273,0.1278,1.1945,0.6406,0.7695l1.875-1.5625C5.8835,8.674,6,9.0711,6,9.5C6,10.8866,4.8866,12,3.5,12S1,10.8866,1,9.5&#xA;&#x9;S2.1133,7,3.5,7L3.5,7z M11.5,7C12.8866,7,14,8.1134,14,9.5S12.8866,12,11.5,12S9,10.8866,9,9.5c0-0.877,0.4468-1.6421,1.125-2.0879&#xA;&#x9;l0.9102,2.2734c0.246,0.6231,1.1804,0.2501,0.9297-0.3711l-0.9082-2.2695C11.2009,7.0193,11.3481,7,11.5,7L11.5,7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bicycle-share-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path4632\\" d=\\"M8,0.0004c-0.5523,0-1,0.4477-1,1s0.4477,1,1,1s1-0.4477,1-1&#xA;&#x9;S8.5523,0.0004,8,0.0004z M6.0137,2.0004C5.8763,1.9967,5.7436,2.0497,5.6465,2.1468l-2,2c-0.1952,0.1953-0.1952,0.5118,0,0.707&#xA;&#x9;L5,6.2074v2.293C4.9961,8.7765,5.2168,9.0035,5.4929,9.0074C5.7691,9.0114,5.9961,8.7907,6,8.5145&#xA;&#x9;c0.0001-0.0047,0.0001-0.0094,0-0.0141v-2.5c0.0005-0.1323-0.0515-0.2594-0.1445-0.3535l-0.752-0.752l1.166-1.2031l0.832,1.1094&#xA;&#x9;C7.1958,4.9263,7.3433,5.0001,7.5,5.0004h2c0.2762,0.0039,0.5032-0.2168,0.5071-0.4929c0.0039-0.2761-0.2168-0.5032-0.493-0.5071&#xA;&#x9;c-0.0047-0.0001-0.0094-0.0001-0.0141,0H7.75L6.4004,2.1996C6.3086,2.0777,6.1662,2.0043,6.0137,2.0004z M2.3633,6.0043&#xA;&#x9;C2.113,6.0182,1.8615,6.0708,1.6191,6.1625C0.6498,6.5293,0.0049,7.46,0.0039,8.4965s0.6411,1.9703,1.6094,2.3398&#xA;&#x9;s2.0683,0.1,2.7578-0.6738c0.1831-0.2068,0.164-0.5229-0.0428-0.706C4.1219,9.2736,3.8064,9.2924,3.623,9.4984&#xA;&#x9;c-0.4154,0.4663-1.0709,0.627-1.6543,0.4043C1.3853,9.68,1.003,9.1229,1.0039,8.4984S1.3886,7.319,1.9727,7.098&#xA;&#x9;c0.584-0.221,1.2402-0.0592,1.6543,0.4082C3.8101,7.713,4.1262,7.7322,4.3329,7.549c0.2068-0.1831,0.226-0.4992,0.0428-0.706&#xA;&#x9;C4.3755,6.8427,4.3752,6.8425,4.375,6.8422C4.0314,6.4543,3.5855,6.1936,3.1035,6.0746C2.8625,6.0151,2.6136,5.9904,2.3633,6.0043&#xA;&#x9;L2.3633,6.0043z M8.6426,6.0043C8.3923,5.9904,8.1433,6.0151,7.9023,6.0746c-0.482,0.119-0.9298,0.3797-1.2734,0.7676&#xA;&#x9;c-0.1834,0.2071-0.1641,0.5237,0.043,0.707s0.5237,0.1641,0.707-0.043C7.793,7.0388,8.4472,6.877,9.0312,7.098&#xA;&#x9;C9.6153,7.319,9.9991,7.8739,10,8.4984S9.6186,9.68,9.0352,9.9027c-0.5834,0.2227-1.2389,0.062-1.6543-0.4043&#xA;&#x9;c-0.1729-0.2153-0.4877-0.2497-0.703-0.0768s-0.2497,0.4877-0.0768,0.703c0.0106,0.0132,0.0218,0.0258,0.0337,0.0378&#xA;&#x9;c0.6895,0.7739,1.7895,1.0434,2.7578,0.6738C10.3609,10.4667,11.0015,9.5329,11,8.4964c-0.001-1.0365-0.6439-1.9671-1.6133-2.334&#xA;&#x9;C9.1444,6.0708,8.8928,6.0182,8.6426,6.0043L8.6426,6.0043z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bicycle-share-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"circle4604\\" d=\\"&#xA;&#x9;M10,1C9.4477,1,9,1.4477,9,2c0,0.5523,0.4477,1,1,1s1-0.4477,1-1C11,1.4477,10.5523,1,10,1z M8.1445,2.9941&#xA;&#x9;c-0.13,0.0005-0.2547,0.0517-0.3477,0.1426l-2.6406,2.5c-0.2256,0.2128-0.2051,0.5775,0.043,0.7637L7,7.75v2.75&#xA;&#x9;c-0.01,0.6762,1.0096,0.6762,1,0v-3c0.0003-0.1574-0.0735-0.3057-0.1992-0.4004L7.0332,6.5234l1.818-1.7212l0.7484,0.9985&#xA;&#x9;C9.6943,5.9265,9.8426,6.0003,10,6h1.5c0.6761,0.01,0.6761-1.0096,0-1h-1.25L9.5,4L8.9004,3.1992&#xA;&#x9;C8.8103,3.0756,8.6685,3,8.5156,2.9941H8.1445z M3,7c-1.6569,0-3,1.3432-3,3s1.3431,3,3,3s3-1.3432,3-3S4.6569,7,3,7z M12,7&#xA;&#x9;c-1.6569,0-3,1.3432-3,3s1.3431,3,3,3s3-1.3432,3-3S13.6569,7,12,7z M3,8c1.1046,0,2,0.8954,2,2s-0.8954,2-2,2s-2-0.8954-2-2&#xA;&#x9;S1.8954,8,3,8z M12,8c1.1046,0,2,0.8954,2,2s-0.8954,2-2,2s-2-0.8954-2-2S10.8954,8,12,8z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\" id=\\"blood-bank-11\\">\\n  <path d=\\"M8.40515,4.64435H8.40643L5.5,1,2.59308,4.64435H2.59485A3.37087,3.37087,0,0,0,2,6.55859,3.464,3.464,0,0,0,5.5,9.98822,3.464,3.464,0,0,0,9,6.55859,3.37087,3.37087,0,0,0,8.40515,4.64435ZM8,7H6V9H5V7H3V6H5V4H6V6H8V7Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"blood-bank-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M11.2,7.1L11.2,7.1L7.5,2L3.8,7.1h0C3.3,7.8,3,8.7,3,9.6C3,12,5,14,7.5,14c0,0,0,0,0,0C10,14,12,12,12,9.6c0,0,0,0,0,0&#xA;&#x9;C12,8.7,11.7,7.8,11.2,7.1z M10,10H8v2H7v-2H5V9h2V7h1v2h2V10z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"boat-es-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M5.49155349,1 C5.8474897,1 7.18272402,1.81764454 7.62717076,3.42307692 C7.91542674,4.46431637 8.05002781,6.45947675 7.98310698,9.40499722 C7.97869503,9.59918917 7.80769593,9.70129941 7.71999041,9.72309588 C6.9771781,9.90769863 6.2343658,10 5.49155349,10 C4.74960052,10 4.00764755,9.90791206 3.26569459,9.72373619 C3.17712972,9.70175163 3,9.60085825 3,9.41035081 C3,6.46424944 3.06615372,4.46983047 3.35593621,3.42307692 C3.80248609,1.81004756 5.13561728,1 5.49155349,1 Z M3.71187243,4.80769231 L3.71187243,5.15384615 C3.87676711,4.83784365 4.62611891,4.46153846 5.48711363,4.46153846 C6.34810835,4.46153846 7.10633986,4.83784365 7.27123455,5.15384615 L7.27123455,4.80769231 C7.27123455,4.23416584 6.47000434,3.76923077 5.48711363,3.76923077 C4.50422292,3.76923077 3.71187243,4.23416584 3.71187243,4.80769231 Z M4.42374485,5.84615385 C4.03058857,5.84615385 3.71187243,6.15611056 3.71187243,6.53846154 L3.71187243,7.92307692 C3.71187243,8.3054279 4.03058857,8.61538462 4.42374485,8.61538462 L6.55936213,8.61538462 C6.95251841,8.61538462 7.27123455,8.3054279 7.27123455,7.92307692 L7.27123455,6.53846154 C7.27123455,6.15611056 6.95251841,5.84615385 6.55936213,5.84615385 L4.42374485,5.84615385 Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"boat-es-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M7.5,1 C8,1 9.87566518,2.18104212 10.5,4.5 C10.9049265,6.00401254 11.0940068,8.88591087 11,13.1405515 C10.9938023,13.421051 10.753592,13.5685436 10.630388,13.6000274 C9.58692536,13.8666758 8.54346268,14 7.5,14 C6.45774448,14 5.41548895,13.8669841 4.37323343,13.6009523 C4.24882229,13.5691968 4,13.4234619 4,13.1482845 C4,8.89280475 4.09292918,6.01197734 4.5,4.5 C5.1272892,2.1700687 7,1 7.5,1 Z M5,6.5 L5,7 C5.23163517,6.54355194 6.28428417,6 7.49376313,6 C8.70324208,6 9.76836483,6.54355194 10,7 L10,6.5 C10,5.67157288 8.874475,5 7.49376313,5 C6.11305125,5 5,5.67157288 5,6.5 Z M6,8 C5.44771525,8 5,8.44771525 5,9 L5,11 C5,11.5522847 5.44771525,12 6,12 L9,12 C9.55228475,12 10,11.5522847 10,11 L10,9 C10,8.44771525 9.55228475,8 9,8 L6,8 Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"bowling-alley-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"icon_concepts:_sports_leisure\\" d=\\"M6.02,3.94c.04-.1.13-.4.17-.49A2.8252,2.8252,0,0,0,4.5,3a3.5,3.5,0,0,0,0,7,2.88,2.88,0,0,0,1.54-.4,8.5971,8.5971,0,0,1-.4-2.61A12.7588,12.7588,0,0,1,6.02,3.94ZM2.5,6.98a.48.48,0,1,1,.48-.48A.4867.4867,0,0,1,2.5,6.98Zm1-2a.48.48,0,1,1,.48-.48A.4867.4867,0,0,1,3.5,4.98Zm1,2a.48.48,0,1,1,.48-.48A.4867.4867,0,0,1,4.5,6.98ZM8.0981,2.4992c0-.5-.1-.5-.1-1,0-.7816.5-.7.5-.7s.5-.0814.5.7c0,.5-.1.5-.1,1,0,1.5,1.075,2.5039,1.075,4.5,0,1.5-.475,3-.975,3h-1c-.5,0-.975-1.5-.975-3C7.0231,5.0031,8.0981,3.9992,8.0981,2.4992Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"bowling-alley-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"icon_concepts:_sports_leisure\\" d=\\"M8.83,5.39a11.0127,11.0127,0,0,0-.96,4.28,11.4686,11.4686,0,0,0,.58,3.69A4.9424,4.9424,0,0,1,6,14,5,5,0,1,1,8.98,4.99C8.94,5.12,8.88,5.25,8.83,5.39ZM4.12,8.5a.62.62,0,1,0-.62.62h0a.6105.6105,0,0,0,.62-.6009C4.12,8.5128,4.12,8.5064,4.12,8.5ZM4.5,7.12a.62.62,0,1,0-.62-.62h0a.6106.6106,0,0,0,.6011.62ZM6.12,8.5a.62.62,0,1,0-.62.62h0a.6105.6105,0,0,0,.62-.6009C6.12,8.5128,6.12,8.5064,6.12,8.5Zm4.8022-5.3341c0-.7222-.1444-.7222-.1444-1.4444a.7222.7222,0,0,1,1.4444-.0007v.0007c0,.7222-.1444.7222-.1444,1.4444,0,2.1667,1.5528,3.6168,1.5528,6.5,0,2.1667-.6861,4.3333-1.4083,4.3333H10.7778c-.7222,0-1.4083-2.1667-1.4083-4.3333C9.3694,6.7826,10.9222,5.3325,10.9222,3.1659Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"bridge-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M0,5.835V9h1c0-1.105,0.896-2.006,2-2.006c1.103,0,1.998,0.903,2,2.006h1c0-1.105,0.895-2.006,1.999-2.006&#xA;&#x9;C9.102,6.994,9.997,7.897,10,9h1V5.835C8.083,1.806,2.389,2.312,0,5.835z M2,6H0.5C0.919,5.449,1.426,4.966,2,4.582V6z M4,6H2.5&#xA;&#x9;V4.263C2.963,4.016,3.491,3.806,4,3.682V6z M6,6H4.5V3.578c0.496-0.081,1-0.102,1.5-0.062V6z M8,6H6.5V3.579&#xA;&#x9;C7.017,3.663,7.52,3.811,8,4.02V6z M8.5,6V4.264C9.28,4.691,9.968,5.287,10.5,6H8.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"bridge-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M0,8.842V13h2v-1c0.036-1.089,0.911-1.964,2-2c1.089,0.036,1.964,0.911,2,2v1h3v-1c0.036-1.089,0.911-1.964,2-2&#xA;&#x9;c1.089,0.036,1.964,0.911,2,2v1h2V8.842C10.6,3.082,3.071,4.4,0,8.842z M9.5,5.734c0.514,0.121,1.016,0.289,1.5,0.5V9H9.5V5.734z&#xA;&#x9; M9,5.634V9H7.5V5.506C8.003,5.506,8.505,5.549,9,5.634z M3.5,6.477C3.98,6.229,4.482,6.026,5,5.871V9H3.5V6.477z M5.5,9V5.73&#xA;&#x9;C5.993,5.615,6.495,5.543,7,5.515V9H5.5z M3,6.744V9H0.5C1.176,8.094,2.032,7.328,3,6.744z M11.5,9V6.5l-0.053-0.053&#xA;&#x9;C12.649,7.05,13.694,7.924,14.5,9H11.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"building-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M2,1v9h4V6h2v4h1V1H2z M5,9H3V6h2V9z M5,5H3V3h2V5z M8,5H6V3h2V5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"building-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M3,2v11h5v-3h3v3h1V2H3z M7,12H4v-2h3V12z M7,9H4V7h3V9z M7,6H4V4h3V6z M11,9H8V7h3V9z M11,6H8V4h3V6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"building-alt1-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M8,9.5v-5C8,4.2,7.8,4,7.5,4H6V1L3,2v7.5H2V10h7V9.5H8z M5,9.5H4V3h1V9.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"building-alt1-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M11,13.5v-9C11,4.2,10.8,4,10.5,4H9V1L5,2.1v11.4H2V14h11v-0.5H11z M7,13.5V3h1v10.5H7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bus-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path8043\\" d=\\"M3,0C2,0,1,0.5312,1,2v4v3.5c0,0,0,0.5,0.5,0.5L2,10.0156V10.5&#xA;&#x9;c0,0,0,0.5,0.5,0.5H3c0,0,0.5,0,0.5-0.5v-0.4844L7.5,10v0.5c0,0,0,0.5,0.5,0.5h0.5C9,11,9,10.5,9,10.5v-0.4844L9.5,10&#xA;&#x9;c0,0,0.5,0,0.5-0.5V6V2c0-1.5-1-2-2-2H3z M3.75,1h3.5C7.3885,1,7.5,1.1115,7.5,1.25S7.3885,1.5,7.25,1.5h-3.5&#xA;&#x9;C3.6115,1.5,3.5,1.3885,3.5,1.25S3.6115,1,3.75,1z M3,2h5c1,0,1,1,1,1v2c0,0,0,1-1,1H3C2,6,2,5,2,5V3C2,3,2,2,3,2z M2.75,7.5&#xA;&#x9;c0.4142,0,0.75,0.3358,0.75,0.75C3.5,8.6642,3.1642,9,2.75,9S2,8.6642,2,8.25C2,7.8358,2.3358,7.5,2.75,7.5z M8.25,7.5&#xA;&#x9;C8.6642,7.5,9,7.8358,9,8.25C9,8.6642,8.6642,9,8.25,9C7.8358,9,7.5,8.6642,7.5,8.25C7.5,7.8358,7.8358,7.5,8.25,7.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"bus-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path8043\\" d=\\"M4,0C2.6364,0,1,0.7433,1,2.7461v5.4531V12c0,0,0,1,1,1v1c0,0,0,1,1,1s1-1,1-1v-1h7v1c0,0,0,1,1,1s1-1,1-1v-1&#xA;&#x9;c0,0,1,0,1-1V2.7461C14,0.7006,12.764,0,11.4004,0H4z M4.25,1.5h6.5C10.8885,1.5,11,1.6115,11,1.75S10.8885,2,10.75,2h-6.5&#xA;&#x9;C4.1115,2,4,1.8885,4,1.75S4.1115,1.5,4.25,1.5z M3,3h9c1,0,1,0.9668,1,0.9668V7c0,0,0,1-1,1H3C2,8,2,7,2,7V4C2,4,2,3,3,3z M3,10&#xA;&#x9;c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1s-1-0.4477-1-1S2.4477,10,3,10z M12,10c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1s-1-0.4477-1-1&#xA;&#x9;S11.4477,10,12,10z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"cafe-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M7,9.5C7,9.7761,6.7761,10,6.5,10h-4C2.2239,10,2,9.7761,2,9.5S2.2239,9,2.5,9h4C6.7761,9,7,9.2239,7,9.5z M8,3H7V2H2v4&#xA;&#x9;c0.0016,1.3807,1.1222,2.4987,2.5029,2.4971C5.4948,8.4959,6.3921,7.9085,6.79,7H8c1.1046,0,2-0.8954,2-2S9.1046,3,8,3z M8,6H7V4h1&#xA;&#x9;c0.5523,0,1,0.4477,1,1S8.5523,6,8,6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"cafe-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M12,5h-2V3H2v4c0.0133,2.2091,1.8149,3.9891,4.024,3.9758C7.4345,10.9673,8.7362,10.2166,9.45,9H12c1.1046,0,2-0.8954,2-2&#xA;&#x9;S13.1046,5,12,5z M12,8H9.86C9.9487,7.6739,9.9958,7.3379,10,7V6h2c0.5523,0,1,0.4477,1,1S12.5523,8,12,8z M10,12.5&#xA;&#x9;c0,0.2761-0.2239,0.5-0.5,0.5h-7C2.2239,13,2,12.7761,2,12.5S2.2239,12,2.5,12h7C9.7761,12,10,12.2239,10,12.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"campsite-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M5.92,2.19C5.7745,1.9553,5.4663,1.8829,5.2316,2.0284C5.166,2.0691,5.1107,2.1244,5.07,2.19L1.5,8h-1&#xA;&#x9;C0.2724,7.9555,0.0517,8.104,0.0072,8.3316C0.0034,8.3509,0.001,8.3704,0,8.39V9.5C-0.0056,9.7706,0.2092,9.9944,0.4798,10&#xA;&#x9;c0.0067,0.0001,0.0135,0.0001,0.0202,0h10c0.2706,0.0056,0.4944-0.2092,0.5-0.4798c0.0001-0.0067,0.0001-0.0135,0-0.0202V8.39&#xA;&#x9;c-0.0123-0.2316-0.21-0.4095-0.4416-0.3972C10.5388,7.9938,10.5193,7.9962,10.5,8h-1L5.92,2.19z M5.5,3l3,5h-6L5.5,3z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"campsite-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect3335\\" d=\\"M7,1.5&#xA;&#x9;l-5.5,9H1c-1,0-1,1-1,1v1c0,0,0,1,1,1h13c1,0,1-1,1-1v-1c0,0,0-1-1-1h-0.5L8,1.5C7.8,1.1,7.2,1.1,7,1.5z M7.5,5l3.2,5.5H4.2L7.5,5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"car-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9,4L8.11,1.34C8.0418,1.1381,7.8531,1.0016,7.64,1H3.36C3.1469,1.0016,2.9582,1.1381,2.89,1.34L2,4C1.4477,4,1,4.4477,1,5&#xA;&#x9;v3h1v1c0,0.5523,0.4477,1,1,1s1-0.4477,1-1V8h3v1c0,0.5523,0.4477,1,1,1s1-0.4477,1-1V8h1V5C10,4.4477,9.5523,4,9,4z M3,7&#xA;&#x9;C2.4477,7,2,6.5523,2,6s0.4477-1,1-1s1,0.4477,1,1S3.5523,7,3,7z M3,4l0.62-2h3.76L8,4H3z M8,7C7.4477,7,7,6.5523,7,6s0.4477-1,1-1&#xA;&#x9;s1,0.4477,1,1S8.5523,7,8,7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"car-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M14,7c-0.004-0.6904-0.4787-1.2889-1.15-1.45l-1.39-3.24l0,0l0,0l0,0C11.3833,2.1233,11.2019,2.001,11,2H4&#xA;&#x9;C3.8124,2.0034,3.6425,2.1115,3.56,2.28l0,0l0,0l0,0L2.15,5.54C1.475,5.702,0.9994,6.3059,1,7v3.5h1v1c0,0.5523,0.4477,1,1,1&#xA;&#x9;s1-0.4477,1-1v-1h7v1c0,0.5523,0.4477,1,1,1s1-0.4477,1-1v-1h1V7z M4.3,3h6.4l1.05,2.5h-8.5L4.3,3z M3,9C2.4477,9,2,8.5523,2,8&#xA;&#x9;s0.4477-1,1-1s1,0.4477,1,1S3.5523,9,3,9z M12,9c-0.5523,0-1-0.4477-1-1s0.4477-1,1-1s1,0.4477,1,1S12.5523,9,12,9z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"car-rental-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <g>\\n    <path d=\\"M9.0252,7H8.84L8.5615,5.3301C8.4824,4.8491,8.0713,4.5,7.583,4.5H3.417c-0.4883,0-0.8994,0.3491-0.9785,0.8291L2.1599,7&#xA;&#x9;&#x9;H1.981C1.4391,7,1,7.4391,1,7.9809V10h1c0,0.5522,0.4477,1,1,1s1-0.4478,1-1h3c0,0.5522,0.4477,1,1,1s1-0.4478,1-1h1V7.9748&#xA;&#x9;&#x9;C10,7.4364,9.5635,7,9.0252,7z M3.25,9C2.8358,9,2.5,8.6642,2.5,8.25c0-0.4142,0.3358-0.75,0.75-0.75S4,7.8358,4,8.25&#xA;&#x9;&#x9;C4,8.6642,3.6642,9,3.25,9z M3.1708,7L3.417,5.5l4.1582-0.0068L7.8264,7H3.1708z M7.75,9C7.3358,9,7,8.6642,7,8.25&#xA;&#x9;&#x9;C7,7.8358,7.3358,7.5,7.75,7.5S8.5,7.8358,8.5,8.25C8.5,8.6642,8.1642,9,7.75,9z\\"/>\\n    <path d=\\"M9.4969,0H7.9973C7.4465,0,7,0.4465,7,0.9972V1H2.5l-1,1l1,1l1-1l1,1l1-1l1,1h0.5008C7.0031,3.5526,7.4509,4,8.004,4&#xA;&#x9;&#x9;h1.4938C9.7751,4,10,3.7751,10,3.4977V0.5031C10,0.2252,9.7748,0,9.4969,0z M9,2.5C9,2.7761,8.7761,3,8.5,3S8,2.7761,8,2.5v-1&#xA;&#x9;&#x9;C8,1.2238,8.2239,1,8.5,1S9,1.2238,9,1.5V2.5z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"car-rental-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <g>\\n    <path d=\\"M11.5039,1H10C9.2616,1,8.6238,1.4047,8.2774,2H3.5l-1,1l1,1l1-1l1,1l1-1l1,1h0.7774C8.6238,4.5953,9.2616,5,10,5h1.4982&#xA;&#x9;&#x9;C11.7753,5,12,4.7753,12,4.4982V1.4961C12,1.2221,11.7779,1,11.5039,1z M11,3.5C11,3.7761,10.7761,4,10.5,4S10,3.7761,10,3.5v-1&#xA;&#x9;&#x9;C10,2.2238,10.2239,2,10.5,2S11,2.2238,11,2.5V3.5z\\"/>\\n    <path d=\\"M10.9252,9.0103l-0.3636-2.1802C10.4824,6.3491,10.0713,6,9.583,6H5.417C4.9302,6,4.5186,6.3486,4.4385,6.8291&#xA;&#x9;&#x9;L4.0746,9.0117C3.4776,9.0436,3,9.5277,3,10.1327V13h1c0,0.5522,0.4477,1,1,1s1-0.4478,1-1h3c0,0.5522,0.4477,1,1,1s1-0.4478,1-1h1&#xA;&#x9;&#x9;v-2.8744C12,9.522,11.5219,9.0383,10.9252,9.0103z M4.75,12C4.3358,12,4,11.6642,4,11.25c0-0.4142,0.3358-0.75,0.75-0.75&#xA;&#x9;&#x9;s0.75,0.3358,0.75,0.75C5.5,11.6642,5.1642,12,4.75,12z M5.0887,9L5.417,7l4.1582-0.0068L9.9098,9H5.0887z M10.25,12&#xA;&#x9;&#x9;c-0.4142,0-0.75-0.3358-0.75-0.75c0-0.4142,0.3358-0.75,0.75-0.75S11,10.8358,11,11.25C11,11.6642,10.6642,12,10.25,12z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"car-repair-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.5,1.25H4.3517C4.0547,0.5176,3.3389,0,2.5,0C1.7616,0,1.1238,0.4047,0.7774,1H2.5L3,2L2.5,3H0.7774&#xA;&#x9;C1.1238,3.5953,1.7616,4,2.5,4c0.8389,0,1.5547-0.5176,1.8517-1.25H9.5c0.4141,0,0.75-0.3359,0.75-0.75S9.9141,1.25,9.5,1.25z\\"/>\\n  <path d=\\"M8.3105,7.0344l-0.249-1.2043C7.9824,5.3491,7.5713,5,7.083,5H3.917C3.4287,5,3.0176,5.3491,2.9424,5.8101L2.6891,7.0355&#xA;&#x9;C2.2987,7.1191,2,7.4498,2,7.8651V10h0.5c0,0.5522,0.4477,1,1,1s1-0.4478,1-1h2c0,0.5522,0.4477,1,1,1s1-0.4478,1-1H9V7.8597&#xA;&#x9;C9,7.4453,8.7008,7.1157,8.3105,7.0344z M3.75,9C3.3358,9,3,8.6642,3,8.25C3,7.8358,3.3358,7.5,3.75,7.5S4.5,7.8358,4.5,8.25&#xA;&#x9;C4.5,8.6642,4.1642,9,3.75,9z M3.7134,7L3.917,6l3.1621,0.0122L7.2831,7H3.7134z M7.25,9C6.8358,9,6.5,8.6642,6.5,8.25&#xA;&#x9;c0-0.4142,0.3358-0.75,0.75-0.75S8,7.8358,8,8.25C8,8.6642,7.6642,9,7.25,9z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"car-repair-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <g>\\n    <path d=\\"M10.9252,9.0103l-0.3636-2.1802C10.4824,6.3491,10.0713,6,9.583,6H5.417C4.9302,6,4.5186,6.3486,4.4385,6.8291&#xA;&#x9;&#x9;L4.0746,9.0117C3.4776,9.0436,3,9.5277,3,10.1327V13h1c0,0.5522,0.4477,1,1,1s1-0.4478,1-1h3c0,0.5522,0.4477,1,1,1s1-0.4478,1-1h1&#xA;&#x9;&#x9;v-2.8744C12,9.522,11.5219,9.0383,10.9252,9.0103z M4.75,12C4.3358,12,4,11.6642,4,11.25c0-0.4142,0.3358-0.75,0.75-0.75&#xA;&#x9;&#x9;s0.75,0.3358,0.75,0.75C5.5,11.6642,5.1642,12,4.75,12z M5.0887,9L5.417,7l4.1582-0.0068L9.9098,9H5.0887z M10.25,12&#xA;&#x9;&#x9;c-0.4142,0-0.75-0.3358-0.75-0.75c0-0.4142,0.3358-0.75,0.75-0.75S11,10.8358,11,11.25C11,11.6642,10.6642,12,10.25,12z\\"/>\\n    <path d=\\"M12,2H5.7889C5.4029,1.1177,4.5247,0.5,3.5,0.5S1.5971,1.1177,1.2111,2H3.5L4,3L3.5,4H1.2111&#xA;&#x9;&#x9;C1.5972,4.8821,2.4754,5.5,3.5,5.5S5.4028,4.8821,5.7889,4H12c0.5527,0,1-0.4478,1-1S12.5527,2,12,2z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"car-top-es-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M8,5 L8,8.5 C8,9.26470196 7.23637967,10 6.5,10 L4.5,10 C3.76362033,10 3,9.26470196 3,8.5 L3,5 L2.33,5 C2.33,4.61764902 2.63181017,4.31 3,4.31 L3,3 C3,2 4,1 5,1 L6,1 C7,1 8,2 8,3 L8,4.31 C8.36818983,4.31 8.67,4.61764902 8.67,5 L8,5 Z M4,7 L3.75,7.75 C4.36111111,7.91666667 4.94444444,8 5.5,8 C6.05555556,8 6.63888889,7.91666667 7.25,7.75 L7,7 L5.5,7 L4,7 Z M3.75,4.25 L4,5 C4.55555556,4.83333333 5.05555556,4.75 5.5,4.75 C5.94444444,4.75 6.44444444,4.83333333 7,5 L7.25,4.25 C6.63888889,3.91666667 6.05555556,3.75 5.5,3.75 C4.94444444,3.75 4.36111111,3.91666667 3.75,4.25 Z M3.76193953,2.60929231 C3.86770819,2.70145623 4.09734355,2.5980894 4.27484444,2.37841601 C4.45234534,2.15874263 4.5104958,1.90594854 4.40472714,1.81378462 C4.29895847,1.72162069 4.06932312,1.82498753 3.89182222,2.04466091 C3.71432133,2.26433429 3.65617086,2.51712838 3.76193953,2.60929231 Z M7.24096539,2.60929231 C7.34673405,2.51712838 7.28858359,2.26433429 7.11108269,2.04466091 C6.9335818,1.82498753 6.70394644,1.72162069 6.59817778,1.81378462 C6.49240911,1.90594854 6.55055957,2.15874263 6.72806047,2.37841601 C6.90556137,2.5980894 7.13519672,2.70145623 7.24096539,2.60929231 Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"car-top-es-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M11,7 L11,12 C11,13.1045695 10.1045695,14 9,14 L6,14 C4.8954305,14 4,13.1045695 4,12 L4,7 L3,7 C3,6.44771525 3.44771525,6 4,6 L4,4 C4,2.34314575 5.34314575,1 7,1 L8,1 C9.65685425,1 11,2.34314575 11,4 L11,6 C11.5522847,6 12,6.44771525 12,7 L11,7 Z M5.5,10 L5,11 C5.83333333,11.3333333 6.66666667,11.5 7.5,11.5 C8.33333333,11.5 9.16666667,11.3333333 10,11 L9.5,10 L7.5,10 L5.5,10 Z M5,6 L5.5,7 C6.16666667,6.66666667 6.83333333,6.5 7.5,6.5 C8.16666667,6.5 8.83333333,6.66666667 9.5,7 L10,6 C9.16666667,5.33333333 8.33333333,5 7.5,5 C6.66666667,5 5.83333333,5.33333333 5,6 Z M4.89290929,3.32453333 C5.05156229,3.45765901 5.39601532,3.30835135 5.66226667,2.99104535 C5.92851801,2.67373936 6.01574371,2.30859234 5.85709071,2.17546667 C5.69843771,2.04234099 5.35398468,2.19164865 5.08773333,2.50895465 C4.82148199,2.82626064 4.73425629,3.19140766 4.89290929,3.32453333 Z M10.1114481,3.32453333 C10.2701011,3.19140766 10.1828754,2.82626064 9.91662404,2.50895465 C9.65037269,2.19164865 9.30591967,2.04234099 9.14726667,2.17546667 C8.98861367,2.30859234 9.07583936,2.67373936 9.34209071,2.99104535 C9.60834205,3.30835135 9.95279508,3.45765901 10.1114481,3.32453333 Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"casino-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M6.1364,6.85C6.4266,7.2446,6.8886,7.5,7.4091,7.5C8.2877,7.5,9,6.7725,9,5.875c0-0.3667-0.1234-0.7014-0.324-0.9733&#xA;&#x9;L8.6818,4.9L5.5,1L2.3182,4.9L2.324,4.9017C2.1234,5.1736,2,5.5083,2,5.875C2,6.7725,2.7123,7.5,3.5909,7.5&#xA;&#x9;c0.5205,0,0.9825-0.2554,1.2728-0.65C4.918,6.776,5.0147,6.6443,5.125,6.4942V8.5c0,0.5-1.75,0.75-1.75,0.75&#xA;&#x9;C3.1679,9.25,3,9.4179,3,9.625S3.1679,10,3.375,10h1.75h0.75h1.75C7.8321,10,8,9.8321,8,9.625S7.8321,9.25,7.625,9.25&#xA;&#x9;c0,0-1.75-0.25-1.75-0.75V6.4942C5.9853,6.6443,6.082,6.776,6.1364,6.85z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"casino-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M8.5,10c0.4561,0.6072,1.1821,1,2,1c1.3807,0,2.5-1.1193,2.5-2.5c0-0.5642-0.1938-1.0789-0.509-1.4973L12.5,7l-5-6l-5,6&#xA;&#x9;l0.009,0.0027C2.1938,7.4211,2,7.9358,2,8.5C2,9.8807,3.1193,11,4.5,11c0.8179,0,1.5439-0.3928,2-1&#xA;&#x9;C6.5997,9.8672,6.7902,9.6135,7,9.3337V11.5C7,13,4.5,13,4.5,13C4.2239,13,4,13.2238,4,13.5C4,13.7761,4.2239,14,4.5,14H7h1h2.5&#xA;&#x9;c0.2761,0,0.5-0.2239,0.5-0.5c0-0.2762-0.2239-0.5-0.5-0.5c0,0-2.5,0-2.5-1.5V9.3337C8.2098,9.6135,8.4003,9.8672,8.5,10z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"castle-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M8.67,0.81v1.48C8.6812,2.6709,8.3815,2.9888,8.0006,3C8.0004,3,8.0002,3,8,3H3.09c-0.381,0.0056-0.6944-0.2988-0.7-0.6799&#xA;&#x9;C2.3899,2.3134,2.3899,2.3067,2.39,2.3V0.81c0-0.1905,0.1545-0.345,0.345-0.345S3.08,0.6195,3.08,0.81V1.5H4V1l0,0&#xA;&#x9;c0-0.2761,0.2239-0.5,0.5-0.5S5,0.7239,5,1l0,0v0.5h1V1l0,0c0-0.2761,0.2239-0.5,0.5-0.5S7,0.7239,7,1l0,0v0.5h1V0.81&#xA;&#x9;C7.9679,0.625,8.0919,0.449,8.2769,0.4169c0.185-0.0321,0.361,0.0919,0.3931,0.2769C8.6767,0.7323,8.6767,0.7716,8.67,0.81z&#xA;&#x9; M10.06,9.63c0,0.1933-0.1567,0.35-0.35,0.35h0H1.35C1.1567,9.9799,1.0001,9.8231,1.0002,9.6298&#xA;&#x9;C1.0004,9.4366,1.1569,9.2801,1.35,9.28H1.7c0.3754,0.0112,0.6888-0.284,0.7-0.6594c0.0004-0.0135,0.0004-0.0271,0-0.0406&#xA;&#x9;c0,0,0.7-3.2,0.7-3.89C3.0944,4.3145,3.3943,4.0056,3.7699,4C3.7766,3.9999,3.7833,3.9999,3.79,4h3.48&#xA;&#x9;c0.3754-0.0112,0.6888,0.284,0.7,0.6594c0.0004,0.0135,0.0004,0.0271,0,0.0406c0,0.7,0.7,3.89,0.7,3.89&#xA;&#x9;c-0.0112,0.3754,0.284,0.6888,0.6594,0.7c0.0135,0.0004,0.0271,0.0004,0.0406,0h0.34c0.1933,0,0.35,0.1567,0.35,0.35v0V9.63z&#xA;&#x9; M6.5,7.5c0-0.5523-0.4477-1-1-1s-1,0.4477-1,1v2h2V7.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"castle-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M11,4H4C3.4477,4,3,3.5523,3,3V0.5C3,0.2239,3.2239,0,3.5,0S4,0.2239,4,0.5V2h1V1c0-0.5523,0.4477-1,1-1s1,0.4477,1,1v1h1V1&#xA;&#x9;c0-0.5523,0.4477-1,1-1s1,0.4477,1,1v1h1V0.5C11,0.2239,11.2239,0,11.5,0S12,0.2239,12,0.5V3C12,3.5523,11.5523,4,11,4z M14,14.5&#xA;&#x9;c0,0.2761-0.2239,0.5-0.5,0.5h-12C1.2239,15,1,14.7761,1,14.5S1.2239,14,1.5,14H2c0.5523,0,1-0.4477,1-1c0,0,1-6,1-7&#xA;&#x9;c0-0.5523,0.4477-1,1-1h5c0.5523,0,1,0.4477,1,1c0,1,1,7,1,7c0,0.5523,0.4477,1,1,1h0.5c0.2723-0.0001,0.4946,0.2178,0.5,0.49V14.5z&#xA;&#x9; M9,10.5C9,9.6716,8.3284,9,7.5,9S6,9.6716,6,10.5V14h3V10.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"cemetery-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M8.65,8H8l0,0l1-5.61c0.0167-0.1981-0.1304-0.3722-0.3286-0.3889C8.6577,1.9999,8.6438,1.9996,8.63,2H7.16&#xA;&#x9;c0-0.65-0.7-1-1.67-1S3.66,1.35,3.66,2H2.35C2.1512,2.0048,1.994,2.1699,1.9988,2.3686C1.999,2.3758,1.9994,2.3829,2,2.39L3,8l0,0&#xA;&#x9;H2.35C2.1567,7.9999,1.9999,8.1566,1.9999,8.3499c0,0.0034,0,0.0068,0.0001,0.0101V10h7V8.36&#xA;&#x9;c0.0055-0.1932-0.1466-0.3543-0.3399-0.3599C8.6568,8,8.6534,8,8.65,8z M7,5H4V4h3V5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"cemetery-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M11.46,12h-0.68L12,3.55c0.0175-0.2867-0.2008-0.5332-0.4874-0.5507C11.4884,2.9979,11.4641,2.9981,11.44,3h-1.18&#xA;&#x9;c0-0.92-1.23-2-2.75-2S4.77,2.08,4.77,3H3.54C3.253,2.9885,3.0111,3.2117,2.9995,3.4987C2.9988,3.5158,2.999,3.5329,3,3.55L4.2,12&#xA;&#x9;H3.55C3.2609,11.9886,3.0162,12.2112,3,12.5V14h9v-1.51C11.9839,12.2067,11.7435,11.9886,11.46,12z M4.5,5h6v1h-6V5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"charging-station-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.5,3H9V1.5C9,1.2239,8.7761,1,8.5,1S8,1.2239,8,1.5V3c0,0.5523,0.4477,1,1,1v4.25C9,8.3881,8.8881,8.5,8.75,8.5&#xA;&#x9;S8.5,8.3881,8.5,8.25V6.5C8.5,5.6716,7.8284,5,7,5V2c0-0.5523-0.4477-1-1-1H2C1.4477,1,1,1.4477,1,2v7c0,0.5523,0.4477,1,1,1h4&#xA;&#x9;c0.5523,0,1-0.4477,1-1V6c0.2761,0,0.5,0.2239,0.5,0.5v1.75c0,0.6904,0.5596,1.25,1.25,1.25S10,8.9404,10,8.25V3.5&#xA;&#x9;C10,3.2239,9.7761,3,9.5,3z M3.5,8.75H3L4,6H1.75L4.5,2.25H5L4,5h2.25L3.5,8.75z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"charging-station-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13,4V2.49C12.9946,2.2178,12.7723,1.9999,12.5,2c-0.2816,0.0047-0.5062,0.2367-0.5015,0.5184&#xA;&#x9;C11.9987,2.5289,11.9992,2.5395,12,2.55V5c0,0.5523,0.4477,1,1,1v5.5c0,0.2761-0.2239,0.5-0.5,0.5S12,11.7761,12,11.5v-2&#xA;&#x9;C12,8.6716,11.3284,8,10.5,8H9V2c0-0.5523-0.4477-1-1-1H2C1.4477,1,1,1.4477,1,2v11c0,0.5523,0.4477,1,1,1h6c0.5523,0,1-0.4477,1-1&#xA;&#x9;V9h1.5C10.7761,9,11,9.2239,11,9.5v2c0,0.8284,0.6716,1.5,1.5,1.5c0.8284,0,1.5-0.6716,1.5-1.5V5C14,4.4477,13.5523,4,13,4z&#xA;&#x9; M7.2004,7.3995l-2.6006,3.4674l-0.0164-0.0072C4.5369,10.9384,4.4667,11,4.3688,11c-0.1476,0-0.2672-0.1196-0.2672-0.2672&#xA;&#x9;c0-0.028,0.0217-0.0463,0.0297-0.0717l-0.0177-0.0078l0.7766-2.3245C4.9442,8.1671,4.8238,8,4.6533,8H2.9994&#xA;&#x9;C2.7936,8,2.6762,7.7651,2.7996,7.6005l2.6006-3.4674l0.0164,0.0072C5.4631,4.0616,5.5333,4,5.6312,4&#xA;&#x9;c0.1476,0,0.2672,0.1196,0.2672,0.2672c0,0.028-0.0217,0.0463-0.0297,0.0717l0.0176,0.0078L5.1099,6.6711&#xA;&#x9;C5.0558,6.8329,5.1762,7,5.3467,7h1.6539C7.2064,7,7.3238,7.2349,7.2004,7.3995z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"cinema-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10,5.5v2C10,7.7761,9.7761,8,9.5,8S9,7.7761,9,7.5l0,0C8.9427,7.2478,8.7433,7.0523,8.49,7H8v1.63&#xA;&#x9;C8,8.8343,7.8343,9,7.63,9H1.37C1.1657,9,1,8.8343,1,8.63V5.37C1,5.1657,1.1657,5,1.37,5h6.26C7.8343,5,8,5.1657,8,5.37V6h0.49&#xA;&#x9;C8.7433,5.9477,8.9427,5.7522,9,5.5C9,5.2239,9.2239,5,9.5,5S10,5.2239,10,5.5z M2.5,2C1.6716,2,1,2.6716,1,3.5S1.6716,5,2.5,5&#xA;&#x9;S4,4.3284,4,3.5S3.3284,2,2.5,2z M2.5,4C2.2239,4,2,3.7761,2,3.5S2.2239,3,2.5,3S3,3.2239,3,3.5S2.7761,4,2.5,4z M6,1&#xA;&#x9;C4.8954,1,4,1.8954,4,3s0.8954,2,2,2s2-0.8954,2-2S7.1046,1,6,1z M6,4C5.4477,4,5,3.5523,5,3s0.4477-1,1-1s1,0.4477,1,1&#xA;&#x9;S6.5523,4,6,4z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"cinema-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M14,7.5v2c0,0.2761-0.2239,0.5-0.5,0.5S13,9.7761,13,9.5c0,0,0.06-0.5-1-0.5h-1v2.5c0,0.2761-0.2239,0.5-0.5,0.5h-8&#xA;&#x9;C2.2239,12,2,11.7761,2,11.5v-4C2,7.2239,2.2239,7,2.5,7h8C10.7761,7,11,7.2239,11,7.5V8h1c1.06,0,1-0.5,1-0.5&#xA;&#x9;C13,7.2239,13.2239,7,13.5,7S14,7.2239,14,7.5z M4,3C2.8954,3,2,3.8954,2,5s0.8954,2,2,2s2-0.8954,2-2S5.1046,3,4,3z M4,6&#xA;&#x9;C3.4477,6,3,5.5523,3,5s0.4477-1,1-1s1,0.4477,1,1S4.5523,6,4,6z M8.5,2C7.1193,2,6,3.1193,6,4.5S7.1193,7,8.5,7S11,5.8807,11,4.5&#xA;&#x9;S9.8807,2,8.5,2z M8.5,6C7.6716,6,7,5.3284,7,4.5S7.6716,3,8.5,3S10,3.6716,10,4.5S9.3284,6,8.5,6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"circle-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10,5.5C10,7.9853,7.9853,10,5.5,10S1,7.9853,1,5.5S3.0147,1,5.5,1S10,3.0147,10,5.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"circle-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M14,7.5c0,3.5899-2.9101,6.5-6.5,6.5S1,11.0899,1,7.5S3.9101,1,7.5,1S14,3.9101,14,7.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"circle-stroked-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path8564-5-6-2\\" d=\\"M5.5,0C8.5376,0,11,2.4624,11,5.5S8.5376,11,5.5,11S0,8.5376,0,5.5&#xA;&#x9;S2.4624,0,5.5,0z M5.5,1.2222c-2.3626,0-4.2778,1.9152-4.2778,4.2778S3.1374,9.7778,5.5,9.7778S9.7778,7.8626,9.7778,5.5&#xA;&#x9;S7.8626,1.2222,5.5,1.2222z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"circle-stroked-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path8564-5-6-4\\" d=\\"M7.5,0C11.6422,0,15,3.3578,15,7.5S11.6422,15,7.5,15&#xA;&#x9;S0,11.6422,0,7.5S3.3578,0,7.5,0z M7.5,1.6666c-3.2217,0-5.8333,2.6117-5.8333,5.8334S4.2783,13.3334,7.5,13.3334&#xA;&#x9;s5.8333-2.6117,5.8333-5.8334S10.7217,1.6666,7.5,1.6666z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\" id=\\"city-11\\">\\n  <path d=\\"M9.7514,3h-0.75V1.25c0-0.13807-0.11193-0.25-0.25-0.25C8.75137,1,8.75133,1,8.7513,1h-0.5&#xA;&#x9;c-0.13807,0-0.25,0.11193-0.25,0.25V3h-0.75c-0.13807,0-0.25,0.11193-0.25,0.25v3.751H5.2518c-0.13862,0-0.251,0.11238-0.251,0.251&#xA;&#x9;v2.5c0.0011,0.13784,0.11315,0.249,0.251,0.249h4.5006c0.13768-0.00055,0.249-0.11232,0.249-0.25V3.25&#xA;&#x9;C10.0014,3.11193,9.88947,3,9.7514,3z M6.0009,8.0012h1v1h-1V8.0012z M9.0009,9.0012h-1v-1h1V9.0012z M9.0009,7.0012h-1v-1h1V7.0012&#xA;&#x9;z M9.0009,5.0012h-1v-1h1V5.0012z M6.0009,1.2507C6.00129,1.11263,5.88967,1.00039,5.7516,1C5.75133,1,5.75107,1,5.7508,1H3.25&#xA;&#x9;C3.11193,1,3,1.11193,3,1.25V2H2.25C2.11193,2,2,2.11193,2,2.25V3H1.25C1.11193,3,1,3.11193,1,3.25v6.5014&#xA;&#x9;c0,0.13807,0.11193,0.25,0.25,0.25H4V6.0009h2V1.25L6.0009,1.2507z M3,9.0013H2v-1h1V9.0013z M3,7.0013H2v-1h1V7.0013z M3,5.0013H2&#xA;&#x9;v-1h1V5.0013z M5,5.0013H4v-1h1V5.0013z M5,3.0013H4V2h1v1V3.0013z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\" id=\\"city-15\\">\\n  <path d=\\"M13.6368,3.9994h-1.6387V1.3608C11.99804,1.16148,11.83642,0.99994,11.6371,1l0,0h-0.278&#xA;&#x9;c-0.19932,0-0.3609,0.16158-0.3609,0.3609l0,0v2.6385H9.36c-0.19932,0-0.3609,0.16158-0.3609,0.3609l0,0l0,0v5.6381h-3.637&#xA;&#x9;c-0.20042,0-0.3629,0.16248-0.3629,0.3629v3.2745c0.00055,0.20003,0.16287,0.3619,0.3629,0.3619h8.2747&#xA;&#x9;c0.19932,0,0.3609-0.16158,0.3609-0.3609l0,0V4.36c0-0.19932-0.16158-0.3609-0.3609-0.3609l0,0L13.6368,3.9994z M6.9989,11.9981h-1&#xA;&#x9;v-1h1V11.9981z M8.9989,11.9981h-1v-1h1V11.9981z M10.9989,11.9981h-1v-1h1V11.9981z M10.9989,9.9981h-1v-1h1V9.9981z&#xA;&#x9; M10.9989,7.9981h-1v-1h1V7.9981z M10.9989,5.9981h-1v-1h1V5.9981z M12.9989,11.9971h-1v-1h1V11.9971z M12.9989,9.9971h-1v-1h1&#xA;&#x9;V9.9971z M12.9989,7.9971h-1v-1h1V7.9971z M12.9989,5.9971h-1v-1h1V5.9971z M7.9987,1.3608C7.99864,1.16152,7.83708,1,7.6378,1H5.36&#xA;&#x9;C5.16068,1,4.9991,1.16158,4.9991,1.3609l0,0V3H3.36C3.16138,3.00049,3.00049,3.16138,3,3.36l0,0v0.6394H1.3608&#xA;&#x9;C1.16164,3.99945,1.00017,4.16084,1,4.36l0,0v9.2765c0,0.19932,0.16158,0.3609,0.3609,0.3609h2.6385V8.9986h3.9993V1.3608z&#xA;&#x9; M3,11.9981H2v-1h1V11.9981z M3,9.9981H2v-1h1V9.9981z M3,7.9981H2v-1h1V7.9981z M3,5.9981H2v-1h1V5.9981z M5,7.9981H4v-1h1V7.9981z&#xA;&#x9; M5,5.9981H4v-1h1V5.9981z M7,7.9981H6v-1h1V7.9981z M7,5.9981H6v-1h1V5.9981z M7,3.9981H6V3h1v1V3.9981z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"clothing-store-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect4181-0-0\\" d=\\"&#xA;&#x9;M2.5,1l-2,2v2h2v5h6V5h2V3l-2-2H7L5.5,4L4,1H2.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"clothing-store-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect4181-0-0\\" d=\\"&#xA;&#x9;M3.5,1L0,4v3h2.9L3,14h9V7h3V4l-3.5-3H10L7.5,5L5,1H3.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"college-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <g>\\n    <path d=\\"M2,7.3c0.3-0.2,0.5-0.5,0.5-0.8c0-0.4-0.2-0.7-0.6-0.9V4.4L5.5,6L11,3.5L5.5,1L0,3.5L1.2,4v1.6&#xA;  C0.8,5.8,0.6,6.1,0.6,6.5c0,0.3,0.2,0.6,0.5,0.8L0.6,9c-0.3,1,0.5,1,0.5,1h1c0,0,0.8,0,0.5-1L2,7.3z\\"/>\\n    <path d=\\"M3.5,6.2c0,0.1,0,0.2,0,0.3c0,0.4-0.2,0.8-0.4,1.1C3.3,8,3.5,8.4,3.5,9v0.6C4,9.8,4.7,10,5.5,10&#xA;  C8,10,9,8.5,9,8.5v-3L5.5,7.1L3.5,6.2z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"college-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M7.5,1L0,4.5l2,0.9v1.7C1.4,7.3,1,7.9,1,8.5s0.4,1.2,1,1.4V10l-0.9,2.1&#xA; C0.8,13,1,14,2.5,14s1.7-1,1.4-1.9L3,10c0.6-0.3,1-0.8,1-1.5S3.6,7.3,3,7.1V5.9L7.5,8L15,4.5L7.5,1z M11.9,7.5l-4.5,2L5,8.4v0.1&#xA; c0,0.7-0.3,1.3-0.8,1.8l0.6,1.4v0.1C4.9,12.2,5,12.6,4.9,13c0.7,0.3,1.5,0.5,2.5,0.5c3.3,0,4.5-2,4.5-3L11.9,7.5L11.9,7.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"commercial-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M0,5c-0.0224-1.0854,0.3309-2.1451,1-3h9c0.6691,0.8549,1.0224,1.9146,1,3H0z M2,6v5h4V7h2v4h1V6H2z M5,9H3V7h2V9z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"commercial-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M14,7H1c0.0881-1.3829,0.427-2.7383,1-4h11C13.5731,4.2617,13.9119,5.6171,14,7z M3,8h9v6h-1V9H8v5H3V8z M4,11h3V9H4V11z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"communications-tower-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <g id=\\"communications-tower-11\\">\\n    <path d=\\"M7.6553,3.5645h-.4V1.4482h.4ZM3.7017,1.4482h-.4V3.5645h.4Zm6-.2851h-.4V4.4414h.4Zm-8.023,0h-.4V4.4414h.4ZM5.7572,4.1683l.4366,0h0a.3541.3541,0,0,1,.3457.2812L7.5792,9.4366H9V10H2V9.4366H3.434L4.4731,4.45a.3548.3548,0,0,1,.3453-.2813l.4388,0V2.912h0A.9155.9155,0,0,1,4.59,2.0373a.9272.9272,0,1,1,1.167.8874Zm-.96,2.1881H6.2159L5.9072,4.875H5.106ZM4.383,8.3447H6.63L6.2786,6.6572H4.7346ZM6.8577,9.4366l-.1648-.7911H4.32l-.1648.7911Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"communications-tower-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <g id=\\"communications-tower-15\\">\\n    <path d=\\"M11.8545,6.4336l-.4131-.2813a4.7623,4.7623,0,0,0,.2813-4.8779l-.0835-.1533L12.0747.875l.0908.167a5.2619,5.2619,0,0,1-.311,5.3916Zm1.1521,7.1316V14h-11v-.4348H4.4952L6.0439,6.4a.5.5,0,0,1,.4888-.3945h.7255V4.6014A1.14,1.14,0,0,1,6.3756,3.5a1.1568,1.1568,0,1,1,2.3136,0,1.14,1.14,0,0,1-.931,1.1112V6.0059h.7223A.5.5,0,0,1,8.9692,6.4l1.5478,7.1648ZM8.4543,8.751H6.5588L6.236,10.2441H8.777ZM6.1279,10.7441l-.3233,1.4952H9.2082l-.3231-1.4952ZM6.936,7.0059,6.6669,8.251H8.3463L8.0771,7.0059ZM5.5179,13.5652H9.4948l-.1786-.8259h-3.62ZM5.21,5.0137a2.7523,2.7523,0,0,1,.0161-3.0518L4.812,1.6826a3.25,3.25,0,0,0-.019,3.6065ZM10.7568,3.5a3.2433,3.2433,0,0,0-.5341-1.7861l-.418.2754a2.7517,2.7517,0,0,1-.0176,3.0488l.4141.2793A3.2341,3.2341,0,0,0,10.7568,3.5ZM3.5342,6.1182A4.7637,4.7637,0,0,1,3.3813,1.13L2.9478.88a5.2643,5.2643,0,0,0,.1694,5.5137Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"confectionery-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <g id=\\"confectionary-11\\">\\n    <path d=\\"M9.2407,2.513a.7461.7461,0,0,0-.7461-.7461.7461.7461,0,1,0-1.4922,0V3.5132A2.4888,2.4888,0,0,0,3.5113,7H1.7485a.7461.7461,0,0,0,0,1.4922.7461.7461,0,0,0,.7461.7461.7461.7461,0,0,0,1.4922,0V7.4778A2.4887,2.4887,0,0,0,7.493,4.0052H9.2407a.7461.7461,0,0,0,0-1.4922ZM5.5,7.2842a1.7824,1.7824,0,0,1-.72-3.4135.8158.8158,0,0,1,.2438.1772A1.6481,1.6481,0,0,1,5.3252,5.124v.7373a1.9718,1.9718,0,0,0,.3877,1.3213,1.1554,1.1554,0,0,0,.0958.07A1.7759,1.7759,0,0,1,5.5,7.2842Zm.72-.1549a.8158.8158,0,0,1-.2438-.1772A1.6481,1.6481,0,0,1,5.6748,5.876V5.1387a1.9718,1.9718,0,0,0-.3877-1.3213,1.1554,1.1554,0,0,0-.0958-.07A1.78,1.78,0,0,1,6.22,7.1293Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"confectionery-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <g id=\\"confectionary-15\\">\\n    <path d=\\"M13,4a1,1,0,0,0-1-1,1,1,0,0,0-2,0V5.0673A3.4808,3.4808,0,0,0,4.3583,9H2a1,1,0,0,0,0,2,1,1,0,0,0,1,1,1,1,0,0,0,2,0V9.9326A3.4807,3.4807,0,0,0,10.6417,6H13a1,1,0,0,0,0-2ZM7.5,9.9925A2.484,2.484,0,0,1,6.3184,5.319a1.0809,1.0809,0,0,1,.5459.307A2.1243,2.1243,0,0,1,7.25,7.0117l.001.9561A2.5821,2.5821,0,0,0,7.76,9.7031a1.5462,1.5462,0,0,0,.2591.2333A2.4861,2.4861,0,0,1,7.5,9.9925ZM8.6815,9.681a1.0813,1.0813,0,0,1-.5458-.307A2.1243,2.1243,0,0,1,7.75,7.9883l-.001-.9561A2.5821,2.5821,0,0,0,7.24,5.2969a1.5557,1.5557,0,0,0-.2592-.2334A2.4843,2.4843,0,0,1,8.6815,9.681Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"convenience-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <g id=\\"convenience-store-11\\">\\n    <path d=\\"M8.8211,4.2685h-.62c-.1554-.6-.28-1.0651-.2826-1.0734l-.0111-.05c0-.0011-.12-.5479-.41-.5479H3.519c-.2889,0-.4091.5468-.41.5523-.008.0333-.136.5119-.293,1.1185h-.62c.1756-.6809.3228-1.2291.3228-1.2291s.1875-1.0417,1-1.0417h.4963a.4932.4932,0,0,1,.4829-.4153h2a.4932.4932,0,0,1,.4829.4153h.5171c.8125,0,1,1.0417,1,1.0417S8.6454,3.5876,8.8211,4.2685ZM2.9189,9.9954a.4945.4945,0,0,1-.4828-.368c-.23-.8736-.8-3.0538-.9379-3.63a.5.5,0,1,1,0-1h8a.5.5,0,0,1,0,1c-.1375.5763-.7156,2.7587-.9487,3.6313a.4948.4948,0,0,1-.4825.3665Zm1.094-3.2968a.5129.5129,0,0,0-1.0235,0V8.51a.5129.5129,0,0,0,1.0235,0Zm1.9971,0a.5129.5129,0,0,0-1.0235,0V8.51a.5129.5129,0,0,0,1.0235,0Zm2.0058,0a.5129.5129,0,0,0-1.0236,0V8.51a.5129.5129,0,0,0,1.0236,0Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"convenience-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <g id=\\"convenience-store-15\\">\\n    <path d=\\"M2.9982,3.0687s.1875-1.062,1-1.062H5.0043V1.7276a.5.5,0,0,1,.5-.5H9.4882a.5.5,0,0,1,.5.5v.2791h1.01a.8324.8324,0,0,1,.6373.2937,1.7589,1.7589,0,0,1,.3627.7683s.3108,1.5719.5921,2.9181h-.938L11,3,3.982,2.9956,3.3336,5.9868H2.382Zm11,4.9144a1,1,0,0,1-.9992,1l-1.0008,3.973s-.1875,1.0417-1,1.0417h-7c-.8125,0-1-1.0417-1-1.0417L1.9822,8.98a.9985.9985,0,0,1,.016-1.9968h11A1,1,0,0,1,13.9982,7.9831ZM5.0327,12.13,5.03,11.0051,4.6392,9.4686a.5373.5373,0,1,0-1.0649.1445L3.78,11.0075l.1874,1.2672A.5373.5373,0,1,0,5.0327,12.13Zm2-2.5967A.5332.5332,0,0,0,6.4994,9l-.0039.0008L6.4886,9a.4992.4992,0,0,0-.3575.1509.529.529,0,0,0-.1648.3828v2.68a.5332.5332,0,1,0,1.0663,0Zm1.998,0A.5314.5314,0,0,0,8.694,9.04a.4992.4992,0,0,0-.393,0,.5312.5312,0,0,0-.3366.4934v2.68a.5331.5331,0,1,0,1.0662,0Zm2.3857.08a.5373.5373,0,1,0-1.0649-.1445L9.96,10.9938,9.9579,12.13a.5373.5373,0,1,0,1.0649.1446Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"cricket-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M6,1c0,0.5523-0.4477,1-1,1S4,1.5523,4,1s0.4477-1,1-1S6,0.4477,6,1z M8.88,5.18l-1-2l0,0l0,0&#xA;&#x9;C7.7859,3.0671,7.647,3.0012,7.5,3H2.77C2.3827,2.9815,2.0467,3.2651,2,3.65l0,0l-1,6.71l0,0c-0.0068,0.0464-0.0068,0.0936,0,0.14&#xA;&#x9;C1,10.7761,1.2239,11,1.5,11c0.2307,0.0129,0.4391-0.1371,0.5-0.36l0,0l1.22-3.89l0,0l0.21-0.83l0.4,0.44l0,0L5,7.6v2.9&#xA;&#x9;C5,10.7761,5.2239,11,5.5,11S6,10.7761,6,10.5v-3l0,0l0,0C5.9971,7.3984,5.9621,7.3004,5.9,7.22l0,0L4.45,5.5L5.5,4h1.71l0.92,1.84&#xA;&#x9;l0,0C8.2247,5.9439,8.3594,6.0022,8.5,6C8.7723,6.0001,8.9946,5.7822,9,5.51C8.9826,5.3931,8.9418,5.2808,8.88,5.18z M10.5,8&#xA;&#x9;C10.2239,8,10,8.2239,10,8.5S10.2239,9,10.5,9S11,8.7761,11,8.5S10.7761,8,10.5,8z M8.69,8V7.25C8.69,7.1119,8.5781,7,8.44,7&#xA;&#x9;S8.19,7.1119,8.19,7.25V8C8.0378,8.0855,7.9426,8.2455,7.94,8.42v2.08c0,0.2761,0.2239,0.5,0.5,0.5s0.5-0.2239,0.5-0.5V8.41&#xA;&#x9;C8.9339,8.2391,8.8392,8.0837,8.69,8z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"cricket-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M8,1.5C8,2.3284,7.3284,3,6.5,3S5,2.3284,5,1.5S5.6716,0,6.5,0S8,0.6716,8,1.5z M10.88,7.18L10.88,7.18l-2-2l0,0l0,0&#xA;&#x9;C8.7815,5.0616,8.6339,4.9952,8.48,5H3.75C3.3736,4.9915,3.0508,5.2669,3,5.64l0,0l-1,7.7l0,0c-0.0068,0.0464-0.0068,0.0936,0,0.14&#xA;&#x9;c0,0.2761,0.2239,0.5,0.5,0.5c0.2251,0.0153,0.4315-0.1251,0.5-0.34l0,0l1.2-3.89l0,0l0.26-0.83l0.4,0.44l0,0L6,10.6v2.9&#xA;&#x9;C6,13.7761,6.2239,14,6.5,14S7,13.7761,7,13.5v-3l0,0l0,0c-0.0081-0.0788-0.0356-0.1544-0.08-0.22l0,0L5.48,8.5l1-2.5h1.71l2,1.84&#xA;&#x9;l0,0c0.0928,0.1077,0.2278,0.1697,0.37,0.17C10.8163,7.9791,11.007,7.7581,11,7.5C10.9997,7.3824,10.9571,7.2688,10.88,7.18z&#xA;&#x9; M14,11.27c-0.4142,0-0.75,0.3358-0.75,0.75s0.3358,0.75,0.75,0.75s0.75-0.3358,0.75-0.75S14.4142,11.27,14,11.27z M10.76,9.74V9&#xA;&#x9;c0-0.1381-0.1119-0.25-0.25-0.25S10.26,8.8619,10.26,9v0.74c-0.1522,0.0855-0.2474,0.2455-0.25,0.42v3.34&#xA;&#x9;c0,0.2761,0.2239,0.5,0.5,0.5s0.5-0.2239,0.5-0.5v-3.34C11.0074,9.9855,10.9122,9.8255,10.76,9.74z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"cross-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M2.2,1.19l3.3,3.3L8.8,1.2C8.9314,1.0663,9.1127,0.9938,9.3,1C9.6761,1.0243,9.9757,1.3239,10,1.7&#xA;&#x9;c0.0018,0.1806-0.0705,0.3541-0.2,0.48L6.49,5.5L9.8,8.82C9.9295,8.9459,10.0018,9.1194,10,9.3C9.9757,9.6761,9.6761,9.9757,9.3,10&#xA;&#x9;c-0.1873,0.0062-0.3686-0.0663-0.5-0.2L5.5,6.51L2.21,9.8c-0.1314,0.1337-0.3127,0.2062-0.5,0.2C1.3265,9.98,1.02,9.6735,1,9.29&#xA;&#x9;C0.9982,9.1094,1.0705,8.9359,1.2,8.81L4.51,5.5L1.19,2.18C1.0641,2.0524,0.9955,1.8792,1,1.7C1.0243,1.3239,1.3239,1.0243,1.7,1&#xA;&#x9;C1.8858,0.9912,2.0669,1.06,2.2,1.19z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"cross-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M2.64,1.27L7.5,6.13l4.84-4.84C12.5114,1.1076,12.7497,1.0029,13,1c0.5523,0,1,0.4477,1,1&#xA;&#x9;c0.0047,0.2478-0.093,0.4866-0.27,0.66L8.84,7.5l4.89,4.89c0.1648,0.1612,0.2615,0.3796,0.27,0.61c0,0.5523-0.4477,1-1,1&#xA;&#x9;c-0.2577,0.0107-0.508-0.0873-0.69-0.27L7.5,8.87l-4.85,4.85C2.4793,13.8963,2.2453,13.9971,2,14c-0.5523,0-1-0.4477-1-1&#xA;&#x9;c-0.0047-0.2478,0.093-0.4866,0.27-0.66L6.16,7.5L1.27,2.61C1.1052,2.4488,1.0085,2.2304,1,2c0-0.5523,0.4477-1,1-1&#xA;&#x9;C2.2404,1.0029,2.4701,1.0998,2.64,1.27z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"dam-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10,7.51c0,0.2761-0.2239,0.5-0.5,0.5l0,0C9.241,8.0319,9.0006,8.1539,8.83,8.35c-0.2714,0.2887-0.6175,0.4964-1,0.6&#xA;&#x9;C7.2185,9.1316,6.5566,8.9924,6.07,8.58L5.73,8.23c-0.2997-0.2948-0.7803-0.2948-1.08,0L5,9.38&#xA;&#x9;c0.0664,0.268-0.0971,0.5392-0.3651,0.6055C4.5908,9.9965,4.5454,10.0013,4.5,10h-3C1.2239,10,1,9.7761,1,9.5v-8&#xA;&#x9;C0.9999,1.2277,1.2178,1.0054,1.49,1h0.7c0.2346-0.0011,0.4384,0.1611,0.49,0.39L3.41,3.9l0.1-0.06C3.67,3.72,3.82,3.57,4,3.44&#xA;&#x9;c0.7076-0.5968,1.7424-0.5968,2.45,0C6.6,3.57,6.74,3.71,6.89,3.83c0.2847,0.2546,0.7153,0.2546,1,0l0.41-0.4&#xA;&#x9;C8.6306,3.1458,9.0541,2.9928,9.49,3l0,0c0.2761,0,0.5,0.2239,0.5,0.5S9.7661,4,9.49,4l0,0C9.231,4.0219,8.9906,4.1439,8.82,4.34&#xA;&#x9;c-0.2714,0.2887-0.6175,0.4964-1,0.6C7.2085,5.1216,6.5466,4.9824,6.06,4.57L5.73,4.23C5.4324,3.9262,4.9449,3.9213,4.6411,4.2189&#xA;&#x9;C4.6374,4.2226,4.6337,4.2263,4.63,4.23C4.49,4.35,4.36,4.48,4.21,4.6C4.0521,4.7221,3.8768,4.8198,3.69,4.89l0.67,2.32&#xA;&#x9;c0.6727-0.3402,1.4836-0.2458,2.06,0.24c0.15,0.13,0.29,0.27,0.44,0.39c0.2847,0.2546,0.7153,0.2546,1,0L8.3,7.42&#xA;&#x9;C8.6321,7.1394,9.0554,6.99,9.49,7l0,0C9.7661,6.9944,9.9944,7.2137,10,7.4898C10.0001,7.4965,10.0001,7.5033,10,7.51z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"dam-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.94,9.5c0,0.2761-0.2239,0.5-0.5,0.5l0,0c-0.259,0.0219-0.4994,0.1439-0.67,0.34c-0.2714,0.2887-0.6175,0.4964-1,0.6&#xA;&#x9;c-0.6115,0.1816-1.2734,0.0424-1.76-0.37l-0.39-0.35c-0.2976-0.3038-0.7851-0.3087-1.0889-0.0111&#xA;&#x9;C8.5274,10.2126,8.5237,10.2163,8.52,10.22c-0.14,0.12-0.27,0.25-0.42,0.37c-0.7278,0.5784-1.7663,0.5489-2.46-0.07L5.3,10.19&#xA;&#x9;l-0.1-0.06l0.3,1.22l0.49,2c0.0829,0.2634-0.0634,0.5441-0.3267,0.6271C5.6105,13.9937,5.5553,14.0014,5.5,14h-4&#xA;&#x9;C1.2239,14,1,13.7761,1,13.5v-12C1,1.2239,1.2239,1,1.5,1h1.1c0.2346-0.0011,0.4384,0.1611,0.49,0.39L4,5.06V5.2&#xA;&#x9;c0.6569-0.314,1.4361-0.2205,2,0.24c0.16,0.13,0.31,0.28,0.47,0.41c0.2847,0.2546,0.7153,0.2546,1,0c0.16-0.13,0.31-0.28,0.47-0.41&#xA;&#x9;c0.7076-0.5968,1.7424-0.5968,2.45,0c0.15,0.13,0.29,0.27,0.44,0.39c0.2847,0.2546,0.7153,0.2546,1,0l0.47-0.41&#xA;&#x9;c0.3163-0.2672,0.7159-0.4157,1.13-0.42l0,0c0.2761,0,0.5,0.2239,0.5,0.5S13.7061,6,13.43,6l0,0&#xA;&#x9;c-0.259,0.0219-0.4994,0.1439-0.67,0.34c-0.2714,0.2887-0.6175,0.4964-1,0.6C11.1485,7.1216,10.4866,6.9824,10,6.57L9.67,6.23&#xA;&#x9;C9.3724,5.9262,8.8849,5.9213,8.5811,6.2189C8.5774,6.2226,8.5737,6.2263,8.57,6.23C8.43,6.35,8.3,6.48,8.15,6.6&#xA;&#x9;C7.4222,7.1784,6.3837,7.1489,5.69,6.53L5.3,6.19c-0.2847-0.2546-0.7153-0.2546-1,0L4.24,6.24L4.93,9&#xA;&#x9;C5.3226,9.029,5.6965,9.1793,6,9.43c0.16,0.13,0.31,0.28,0.47,0.41c0.2847,0.2546,0.7153,0.2546,1,0c0.16-0.13,0.31-0.28,0.47-0.41&#xA;&#x9;c0.7076-0.5968,1.7424-0.5968,2.45,0c0.15,0.13,0.29,0.27,0.44,0.39c0.2847,0.2546,0.7153,0.2546,1,0l0.47-0.41&#xA;&#x9;c0.3177-0.2636,0.7172-0.4085,1.13-0.41l0,0c0.2761-0.0055,0.5044,0.2138,0.5099,0.4899C13.94,9.4933,13.94,9.4966,13.94,9.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"danger-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M6.62,8.5l3.11,1.55l-0.45,0.89L5.5,9.06l-3.78,1.89l-0.45-0.89L4.38,8.5l-3.1-1.55l0.45-0.89L5.5,7.94l3.78-1.89l0.44,0.9&#xA;&#x9;L6.62,8.5z M8.5,3.21V3.5l-1,1v1l-2,1l-2-1v-1l-1-1V3C2.4438,1.3994,3.6958,0.0562,5.2964,0C5.3643-0.0024,5.4322-0.0024,5.5,0&#xA;&#x9;c1.7059,0.0484,3.0495,1.4705,3.0011,3.1764C8.5008,3.1876,8.5004,3.1988,8.5,3.21z M4.71,2.71c0-0.4363-0.3537-0.79-0.79-0.79&#xA;&#x9;S3.13,2.2737,3.13,2.71c0,0.4363,0.3537,0.79,0.79,0.79l0,0C4.3563,3.5,4.71,3.1463,4.71,2.71z M5,4.5H4.5v1H5V4.5z M6.5,4.5H6v1&#xA;&#x9;h0.5V4.5z M7.86,2.71c0-0.4363-0.3537-0.79-0.79-0.79S6.28,2.2737,6.28,2.71S6.6337,3.5,7.07,3.5l0,0&#xA;&#x9;C7.5063,3.5,7.86,3.1463,7.86,2.71z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"danger-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.94,14.68c-0.0749,0.194-0.262,0.3215-0.47,0.32c-0.0595,0.0107-0.1205,0.0107-0.18,0L7.5,12.56L1.7,15&#xA;&#x9;c-0.2572,0.1005-0.5472-0.0266-0.6476-0.2838C1.0516,14.7141,1.0508,14.7121,1.05,14.71c-0.1291-0.2441-0.0358-0.5467,0.2084-0.6757&#xA;&#x9;C1.2845,14.0205,1.3118,14.009,1.34,14l4.85-2l-4.85-2C1.0758,9.9197,0.9267,9.6404,1.007,9.3762s0.3596-0.4133,0.6238-0.333&#xA;&#x9;C1.6545,9.0504,1.6776,9.0594,1.7,9.07l5.8,2.41l5.8-2.41c0.2494-0.1185,0.5477-0.0124,0.6662,0.237&#xA;&#x9;c0.1185,0.2494,0.0124,0.5477-0.237,0.6662C13.7068,9.9839,13.6837,9.9928,13.66,10L8.8,12l4.85,2&#xA;&#x9;c0.2607,0.091,0.3983,0.3761,0.3074,0.6368C13.9523,14.6515,13.9465,14.6659,13.94,14.68z M12,4.23v0.45&#xA;&#x9;c-0.0021,0.2129-0.0722,0.4196-0.2,0.59C11.2414,5.8883,10.6399,6.4664,10,7v1.16c0.0015,0.208-0.126,0.3951-0.32,0.47L7.52,9.5&#xA;&#x9;H7.45L5.28,8.63C5.1016,8.5428,4.9917,8.3584,5,8.16V7C4.3528,6.4675,3.7446,5.8893,3.18,5.27C3.0593,5.0972,2.9963,4.8907,3,4.68&#xA;&#x9;V4.23C3.1669,2.0117,4.8974,0.2307,7.11,0h0.36l0,0h0.39C10.0862,0.2131,11.8348,1.9997,12,4.23z M6,4c0-0.5523-0.4477-1-1-1&#xA;&#x9;S4,3.4477,4,4s0.4477,1,1,1S6,4.5523,6,4z M7,7c0-0.2761-0.2239-0.5-0.5-0.5S6,6.7239,6,7v0.5C6,7.7761,6.2239,8,6.5,8&#xA;&#x9;S7,7.7761,7,7.5V7z M9,7c0-0.2761-0.2239-0.5-0.5-0.5S8,6.7239,8,7v0.5C8,7.7761,8.2239,8,8.5,8S9,7.7761,9,7.5V7z M11,4&#xA;&#x9;c0-0.5523-0.4477-1-1-1S9,3.4477,9,4s0.4477,1,1,1S11,4.5523,11,4z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\" id=\\"defibrillator-11\\">\\n  <path d=\\"M1.42,4.7955C-0.2131,1.5291,3.9327-.6514,5.512,2.6149,7.0914-.6514,11.2371,1.5291,9.6039,4.7955c-0.0225.0377-.0483,0.0732-0.071,0.1108H8.3867L7.5586,3.252a0.65,0.65,0,0,0-1.1172,0L5,6.1338,4.5586,5.252A0.6243,0.6243,0,0,0,4,4.9063H1.4913C1.4685,4.8687,1.4427,4.8332,1.42,4.7955ZM8,6.1563a0.6243,0.6243,0,0,1-.5586-0.3457L7,4.9287,5.5586,7.8105a0.6241,0.6241,0,0,1-1.1172,0L3.6133,6.1563H2.3006a24.2269,24.2269,0,0,0,2.8973,3.449L5.2134,9.6208A0.44,0.44,0,0,0,5.835,9.6053a24.2289,24.2289,0,0,0,2.8905-3.449H8Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\" id=\\"defibrillator-15\\">\\n  <path d=\\"M1.55,6.3381C-0.8368,1.7416,5.18-1.3228,7.502,3.2737c2.3215-4.5965,8.3387-1.5322,5.9523,3.0644-0.0869.1671-.2028,0.3456-0.3114,0.5212H11.335L9.5205,4.1377A0.6252,0.6252,0,0,0,8.42,4.2524l-1.6484,4.12-1.33-1.33A0.6254,0.6254,0,0,0,5,6.8594H1.8611C1.7525,6.6837,1.6366,6.5052,1.55,6.3381ZM11,8.1094a0.6263,0.6263,0,0,1-.5205-0.2783L9.1387,5.82,7.58,9.7168a0.6245,0.6245,0,0,1-.4546.38A0.6047,0.6047,0,0,1,7,10.1094a0.6251,0.6251,0,0,1-.4419-0.1826L4.7412,8.1094H2.7358a42.67,42.67,0,0,0,4.46,4.6732,0.4642,0.4642,0,0,0,.6222,0,43.26,43.26,0,0,0,4.4505-4.6732H11Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"dentist-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M5.48,6C4.857,6.0823,4.3088,6.4527,4,7c-0.46,1.21-0.14,3-0.82,3S2.7,8.49,2.5,7C2.2864,6.3547,2.0326,5.7235,1.74,5.11&#xA;&#x9;C1.53,3.7,1,1.28,2.67,1S4.35,2.52,5.5,2.52S6.67,0.72,8.33,1s1.14,2.7,0.93,4.11C8.9674,5.7235,8.7136,6.3547,8.5,7&#xA;&#x9;c-0.2,1.49,0,3-0.68,3S7.46,8.21,7,7C6.6912,6.4527,6.143,6.0823,5.52,6l0,0H5.48z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"dentist-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M4.36,14c-1,0-0.56-2.67-0.86-5c-0.1-0.76-1-1.49-1.12-2.06C2,5,1.39,1.44,3.66,1S6,3,7.54,3s1.57-2.36,3.85-2&#xA;&#x9;s1.59,3.9,1.29,5.9c-0.1,0.45-1.1,1.48-1.18,2.06c-0.33,2.4,0.32,5-0.8,5c-0.93,0-1.32-2.72-2-4.5C8.43,8.63,8.06,8,7.54,8&#xA;&#x9;C6,8,5.75,14,4.36,14z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"doctor-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.5,5.87c0.0017-0.8174-0.6596-1.4813-1.477-1.483S6.5417,5.0466,6.54,5.864C6.5386,6.54,6.9955,7.131,7.65,7.3v0.42&#xA;&#x9;c0,1.0245-0.8305,1.855-1.855,1.855S3.94,8.7445,3.94,7.72l0,0C3.9776,6.8275,4.3787,5.9893,5.05,5.4H5&#xA;&#x9;c0.718-0.4684,1.1564-1.2628,1.17-2.12V1.79c0-0.613-0.4969-1.11-1.11-1.11c-0.0033,0-0.0067,0-0.01,0H4.5&#xA;&#x9;c-0.2043,0-0.37,0.1657-0.37,0.37S4.2957,1.42,4.5,1.42h0.55c0.2043,0,0.37,0.1657,0.37,0.37v1.49l0,0&#xA;&#x9;c0,1.0178-0.8222,1.8445-1.84,1.85V5.4l0,0V5.13C2.5583,5.1355,1.7255,4.3117,1.72,3.29c0-0.0033,0-0.0067,0-0.01l0,0V1.79&#xA;&#x9;c0-0.2043,0.1657-0.37,0.37-0.37l0,0h0.52c0.2043,0,0.37-0.1657,0.3699-0.3701C2.9799,0.8456,2.8143,0.68,2.61,0.68H2.09&#xA;&#x9;C1.4848,0.6909,0.9999,1.1847,1,1.79v1.49C0.9978,4.1241,1.4086,4.9158,2.1,5.4l0,0c0.6676,0.591,1.065,1.429,1.1,2.32&#xA;&#x9;c0,1.4332,1.1618,2.595,2.595,2.595S8.39,9.1532,8.39,7.72V7.3C9.0424,7.1316,9.4986,6.5438,9.5,5.87z M8,6.61&#xA;&#x9;c-0.4087,0-0.74-0.3313-0.74-0.74S7.5913,5.13,8,5.13s0.74,0.3313,0.74,0.74l0,0C8.74,6.2787,8.4087,6.61,8,6.61z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"doctor-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M5.5,7C4.1193,7,3,5.8807,3,4.5l0,0v-2C3,2.2239,3.2239,2,3.5,2H4c0.2761,0,0.5-0.2239,0.5-0.5S4.2761,1,4,1H3.5&#xA;&#x9;C2.6716,1,2,1.6716,2,2.5v2c0.0013,1.1466,0.5658,2.2195,1.51,2.87l0,0C4.4131,8.1662,4.9514,9.297,5,10.5C5,12.433,6.567,14,8.5,14&#xA;&#x9;s3.5-1.567,3.5-3.5V9.93c1.0695-0.2761,1.7126-1.367,1.4365-2.4365C13.1603,6.424,12.0695,5.7809,11,6.057&#xA;&#x9;C9.9305,6.3332,9.2874,7.424,9.5635,8.4935C9.7454,9.198,10.2955,9.7481,11,9.93v0.57c0,1.3807-1.1193,2.5-2.5,2.5S6,11.8807,6,10.5&#xA;&#x9;c0.0511-1.2045,0.5932-2.3356,1.5-3.13l0,0C8.4404,6.7172,9.001,5.6448,9,4.5v-2C9,1.6716,8.3284,1,7.5,1H7&#xA;&#x9;C6.7239,1,6.5,1.2239,6.5,1.5S6.7239,2,7,2h0.5C7.7761,2,8,2.2239,8,2.5v2l0,0C8,5.8807,6.8807,7,5.5,7 M11.5,9&#xA;&#x9;c-0.5523,0-1-0.4477-1-1s0.4477-1,1-1s1,0.4477,1,1S12.0523,9,11.5,9z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"dog-park-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect4698\\" d=\\"M7.5,1&#xA;&#x9;c0,0-0.3457,0.0371-0.5,0.5l-0.5,2l2,1.5H10c1,0,1-1,1-1L9.5,2.5C9,2,8.5,2,8,2V1.5C8,1.5,8,1,7.5,1z M2.5,2&#xA;&#x9;c0,0-0.3534-0.0069-0.7227,0.1777S1,2.8333,1,3.5v0.9648C0.9996,4.4766,0.9996,4.4883,1,4.5V5v0.5C1,6.5,1,7,0.5,7C0.5,7,0,7,0,7.5&#xA;&#x9;v2c0,0,0,0.5,0.5,0.5S1,9.5,1,9.5V8c0.3537,0,0.6906-0.1371,1-0.2988V9.5c0,0,0,0.5,0.5,0.5S3,9.5,3,9.5V7h3l0.6641,1.9922&#xA;&#x9;C7,9.9999,7.5,10,7.5,10H8c0,0,0.5,0,0.5-0.5S8,9,8,9V6.5C8,5.6094,7.3678,5.2449,7,5L5.498,4H2V3.5&#xA;&#x9;c0-0.3333,0.0919-0.3624,0.2227-0.4277C2.3534,3.0069,2.5,3,2.5,3C3.1762,3.0096,3.1762,1.9904,2.5,2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" version=\\"1.1\\" id=\\"dog-park-15\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <g id=\\"g3\\">\\n    <path d=\\"M 10.300781 1.2207031 C 9.9144812 1.2207031 9.6 1.2 9.5 2 L 9.0996094 4.5214844 L 11.5 6.5 L 13.5 6.5 C 14.9 6.5 15 5.5410156 15 5.5410156 L 13.099609 3.3222656 C 12.399609 2.6222656 11.7 2.5 11 2.5 L 11 2 C 11 2 11.067481 1.2206031 10.300781 1.2207031 z M 4.75 1.5 C 4.75 1.5 3.7992187 1.5206031 3.1992188 1.7207031 C 2.5992187 1.9207031 2 2.6210938 2 3.6210938 L 2 7.5214844 C 2 9.2214844 1.3 9.5 1 9.5 C 1 9.5 0 9.5214844 0 10.521484 L 0 12.720703 C 0 12.720703 0.00078125 13.521484 0.80078125 13.521484 L 1 13.521484 L 1.5 13.521484 L 2 13.521484 L 2 13.021484 L 2 12.822266 C 2 12.422266 1.8 12.221094 1.5 12.121094 L 1.5 11.021484 C 2.5 11.021484 2.6 10.820703 3 10.720703 L 3.5507812 12.917969 C 3.6507813 13.217969 3.7507813 13.417578 4.0507812 13.517578 L 5.0507812 13.517578 L 6 13.5 L 6 12.699219 C 6 12.022819 5 12 5 12 L 5 9.5 L 8.5 9.5 L 9.1992188 12.121094 C 9.5992188 13.521094 10.5 13.5 10.5 13.5 L 11 13.5 L 12 13.5 L 12 12.699219 C 12 11.987419 11 12 11 12 L 11.099609 7.921875 L 8 5.5 L 3.5 5.5 L 3.5 3.5 C 3.5 3.1 3.7765 3.0053 4 3 C 4.4941 2.9882 4.75 3 4.75 3 C 5.1642 3 5.5 2.6642 5.5 2.25 C 5.5 1.8358 5.1642 1.5 4.75 1.5 z M 11.75 4 C 11.8881 4 12 4.1119 12 4.25 C 12 4.3881 11.8881 4.5 11.75 4.5 C 11.6119 4.5 11.5 4.3881 11.5 4.25 C 11.5 4.1119 11.6119 4 11.75 4 z \\" id=\\"path5\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\" id=\\"drinking-water-11\\">\\n  <path d=\\"M5,11H3a0.51,0.51,0,0,1-.5-0.4L1,5.6A0.5,0.5,0,0,1,1.5,5h5A0.5,0.5,0,0,1,7,5.6l-1.49,5A0.51,0.51,0,0,1,5,11ZM2.76,8L5.22,8,5.89,6H2.11Z\\"/>\\n  <path d=\\"M4.5,0h0A1.5,1.5,0,0,0,3,1.51v2a0.5,0.5,0,0,0,.5.5h1A0.5,0.5,0,0,0,5,3.5v-1A0.5,0.5,0,0,1,5.5,2H10V0H4.5Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\" id=\\"drinking-water-15\\">\\n  <path d=\\"M6,1A2,2,0,0,0,4,3V6.5a0.5,0.5,0,0,0,.5.5h2A0.5,0.5,0,0,0,7,6.5v-2A0.5,0.5,0,0,1,7.5,4H14V1H6Z\\"/>\\n  <path d=\\"M7,15H4a0.5,0.5,0,0,1-.48-0.38L2,8.62A0.5,0.5,0,0,1,2.5,8h6A0.5,0.5,0,0,1,9,8.62l-1.5,6A0.5,0.5,0,0,1,7,15ZM3.65,11l3.71,0L7.86,9H3.14Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"embassy-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M5.5,2C4.6014,2.0766,3.7537,2.4494,3.09,3.06C3.0316,3.1262,2.9995,3.2117,3,3.3v3.32&#xA;&#x9;C2.9889,6.8074,3.1318,6.9684,3.3193,6.9796C3.4115,6.985,3.5021,6.9527,3.57,6.89C4.1239,6.4637,4.8011,6.2286,5.5,6.22&#xA;&#x9;C6.61,6.22,6.85,7,8,7c0.6869-0.0671,1.3313-0.3629,1.83-0.84C9.9401,6.0917,10.0051,5.9695,10,5.84V2.37&#xA;&#x9;c0.0309-0.1908-0.0987-0.3705-0.2896-0.4014C9.6387,1.9569,9.5652,1.9679,9.5,2C9.0686,2.3529,8.5507,2.5842,8,2.67&#xA;&#x9;C6.85,2.67,6.65,2,5.5,2z M1.5,1.5c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1s-1-0.4477-1-1S0.9477,1.5,1.5,1.5z M2,4.5v6&#xA;&#x9;C2,10.7761,1.7761,11,1.5,11S1,10.7761,1,10.5v-6C1,4.2239,1.2239,4,1.5,4S2,4.2239,2,4.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"embassy-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M6.65,2C5.43,2,4.48,3.38,4.11,3.82C4.0365,3.9102,3.9975,4.0237,4,4.14v4.4C3.9884,8.7827,4.1758,8.9889,4.4185,9.0005&#xA;&#x9;C4.528,9.0057,4.6355,8.9699,4.72,8.9c0.4665-0.6264,1.1589-1.0461,1.93-1.17C8.06,7.73,8.6,9,10.07,9&#xA;&#x9;c0.9948-0.0976,1.9415-0.4756,2.73-1.09c0.1272-0.0934,0.2016-0.2422,0.2-0.4V2.45c0.0275-0.2414-0.1459-0.4595-0.3874-0.487&#xA;&#x9;C12.5332,1.954,12.4527,1.9668,12.38,2c-0.6813,0.5212-1.4706,0.8834-2.31,1.06C8.6,3.08,8.12,2,6.65,2z M2.5,3&#xA;&#x9;c-0.5523,0-1-0.4477-1-1s0.4477-1,1-1s1,0.4477,1,1S3.0523,3,2.5,3z M3,4v9.48c0,0.2761-0.2239,0.5-0.5,0.5S2,13.7561,2,13.48V4&#xA;&#x9;c0-0.2761,0.2239-0.5,0.5-0.5S3,3.7239,3,4z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"emergency-phone-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M8.87,8.53a.73.73,0,0,0,0-1l-.74-.74a.73.73,0,0,0-1,0ZM4.27,3.97a.73.73,0,0,0,0-1l-.71-.71a.73.73,0,0,0-1,0ZM3.04,5.65,5.35,7.96a.37.37,0,0,0,.52,0l.44-.43L8.07,9.27A2.27,2.27,0,0,1,6.73,10h-1a1.345,1.345,0,0,1-1-.52L1.52,6.27a1.345,1.345,0,0,1-.52-1v-1a2.27,2.27,0,0,1,.73-1.34L3.47,4.69l-.43.44a.37.37,0,0,0,0,.52M8,2.5H6.5v1H8V5H9V3.5h1.5v-1H9V1H8Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"emergency-phone-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M7.875,11.49a.51.51,0,0,0,.72,0l.72-.72,2.18,2.16-.37.37a2.24,2.24,0,0,1-1.44.7H8.24a2.24,2.24,0,0,1-1.45-.7L1.72,8.23A2.24,2.24,0,0,1,1,6.78V5.33a2.24,2.24,0,0,1,.72-1.45l.36-.36L4.26,5.69l-.73.73a.51.51,0,0,0,0,.72Zm4.72.38a1,1,0,0,0,.036-1.414h0l-.036-.036-.72-.72a1,1,0,0,0-1.414-.036h0l-.036.036ZM5.315,4.62a1,1,0,0,0,.036-1.414h0L4.595,2.45a1,1,0,0,0-1.414-.036h0L3.14,2.45ZM10,2V4H8V5h2V7h1V5h2V4H11V2Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"entrance-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M4,2.25C4,1.8358,4.3358,1.5,4.75,1.5S5.5,1.8358,5.5,2.25S5.1642,3,4.75,3S4,2.6642,4,2.25z M9.27,4H7.88&#xA;&#x9;C7.6856,3.998,7.4985,4.0736,7.36,4.21l-4,4C3.224,8.344,3.0409,8.4194,2.85,8.42H1.73C1.3268,8.42,1,8.7468,1,9.15l0,0&#xA;&#x9;c0,0.4032,0.3268,0.73,0.73,0.73h1.89c0.1909-0.0006,0.374-0.076,0.51-0.21l4-4C8.2644,5.5576,8.4348,5.4972,8.61,5.5h0.66&#xA;&#x9;C9.6732,5.5,10,5.1732,10,4.77l0,0c0.0221-0.4026-0.2863-0.7468-0.6889-0.7689C9.2974,4.0003,9.2837,4,9.27,4z M4.75,3.5&#xA;&#x9;C4.3358,3.5,4,3.8358,4,4.25V6l1.5-1.5V4.25C5.5,3.8358,5.1642,3.5,4.75,3.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"entrance-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M7,6.5v-1c0-0.5523-0.4477-1-1-1s-1,0.4477-1,1v3L7,6.5z M4.65,10.56L5,3c0-0.5523,0.4477-1,1-1s1,0.4477,1,1S6.5523,4,6,4&#xA;&#x9;S5,3.5523,5,3L4.65,10.56z\\"/>\\n  <path d=\\"M14,6L14,6c0,0.5523-0.4477,1-1,1h-1.58c-0.2658-0.0015-0.5213,0.1028-0.71,0.29l-5.42,5.42&#xA;&#x9;c-0.1863,0.1847-0.4377,0.2889-0.7,0.29H2c-0.5523,0-1-0.4477-1-1l0,0c0-0.5523,0.4477-1,1-1h1.59&#xA;&#x9;c0.2623-0.0011,0.5137-0.1053,0.7-0.29l5.42-5.42C9.8987,5.1028,10.1542,4.9985,10.42,5H13C13.5523,5,14,5.4477,14,6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"entrance-alt1-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M4.793,7.263A.5.5,0,0,0,5.5,7.97L7.743,5.677a.25.25,0,0,0,0-.354h0L5.489,3.042a.5.5,0,0,0-.707.707L6,5H1.5a.5.5,0,0,0,0,1H6ZM9,1H4.5a.5.5,0,0,0,0,1h4a.5.5,0,0,1,.5.5v6a.5.5,0,0,1-.5.5h-4a.5.5,0,0,0,0,1H9a1,1,0,0,0,1-1V2A1,1,0,0,0,9,1Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"entrance-alt1-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M6.554,9.639a.5.5,0,0,0,.707.707L9.928,7.669a.25.25,0,0,0,0-.354h0L7.261,4.639a.5.5,0,0,0-.707.707L8.2,7H1.5a.5.5,0,0,0,0,1H8.2ZM12,1H5.5a.5.5,0,0,0,0,1h6a.5.5,0,0,1,.5.5v10a.5.5,0,0,1-.5.5H5.25a.5.5,0,0,0,0,1H12a1,1,0,0,0,1-1V2A1,1,0,0,0,12,1Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"farm-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M6,5L4,4,2,5,1,7v3l1.5,0V8h3v2L7,10V7ZM5,7H3V5.5H5V7Z\\"/>\\n  <path d=\\"M10,2A1,1,0,0,0,8,2v8h2V2Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"farm-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M8,7L5,5,2,7,1,9v4H3V11H7v2H9V9ZM6,9H4V7H6V9Zm8,4H11V3.5a1.5,1.5,0,0,1,3,0V13Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"fast-food-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10,8L10,8c0,1.1046-0.8954,2-2,2H3c-1.1046,0-2-0.8954-2-2H10z M10,5H1C0.4477,5,0,5.4477,0,6s0.4477,1,1,1h9&#xA;&#x9;c0.5523,0,1-0.4477,1-1S10.5523,5,10,5z M8.55,1H2.46C1.6537,1,1,1.6536,1,2.46c0,0.0033,0,0.0067,0,0.01V4h9V2.47&#xA;&#x9;C10.0055,1.6637,9.3564,1.0055,8.55,1C8.55,1,8.55,1,8.55,1z M3.55,3C3.2752,3.0276,3.0301,2.8273,3.0025,2.5525&#xA;&#x9;C2.9749,2.2777,3.1753,2.0326,3.45,2.005c0.2748-0.0276,0.5199,0.1727,0.5475,0.4475C3.9991,2.4683,3.9999,2.4841,4,2.5&#xA;&#x9;C4,2.7761,3.7761,3,3.5,3H3.55z M7.55,3C7.2752,3.0276,7.0301,2.8273,7.0025,2.5525S7.1753,2.0326,7.45,2.005&#xA;&#x9;c0.2748-0.0276,0.5199,0.1727,0.5475,0.4475C7.9991,2.4683,7.9999,2.4841,8,2.5C8,2.7761,7.7761,3,7.5,3H7.55z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"fast-food-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M14,8c0,0.5523-0.4477,1-1,1H2C1.4477,9,1,8.5523,1,8s0.4477-1,1-1h11C13.5523,7,14,7.4477,14,8z M3.5,10H2&#xA;&#x9;c0,1.6569,1.3431,3,3,3h5c1.6569,0,3-1.3431,3-3H3.5z M3,6H2V4c0-1.1046,0.8954-2,2-2h7c1.1046,0,2,0.8954,2,2v2H3z M11,4.5&#xA;&#x9;C11,4.7761,11.2239,5,11.5,5S12,4.7761,12,4.5S11.7761,4,11.5,4S11,4.2239,11,4.5z M9,3.5C9,3.7761,9.2239,4,9.5,4S10,3.7761,10,3.5&#xA;&#x9;S9.7761,3,9.5,3S9,3.2239,9,3.5z M7,4.5C7,4.7761,7.2239,5,7.5,5S8,4.7761,8,4.5S7.7761,4,7.5,4S7,4.2239,7,4.5z M5,3.5&#xA;&#x9;C5,3.7761,5.2239,4,5.5,4S6,3.7761,6,3.5S5.7761,3,5.5,3S5,3.2239,5,3.5z M3,4.5C3,4.7761,3.2239,5,3.5,5S4,4.7761,4,4.5&#xA;&#x9;S3.7761,4,3.5,4S3,4.2239,3,4.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"fence-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.5,7H9V5h.5a.5.5,0,0,0,0-1H9V3l-.278-.555a.254.254,0,0,0-.443,0L8,3V4H7V3l-.278-.555a.254.254,0,0,0-.443,0L6,3V4H5V3l-.278-.555a.254.254,0,0,0-.443,0L4,3V4H3V3l-.278-.555a.254.254,0,0,0-.443,0L2,3V4H1.5a.5.5,0,0,0,0,1H2V7H1.5a.5.5,0,0,0,0,1H2v.5a.5.5,0,0,0,1,0V8H4v.5a.5.5,0,0,0,1,0V8H6v.5a.5.5,0,0,0,1,0V8H8v.5a.5.5,0,0,0,1,0V8h.5a.5.5,0,0,0,0-1ZM3,7V5H4V7ZM5,7V5H6V7ZM7,7V5H8V7Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"fence-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.5,10H13V7h.5a.5.5,0,0,0,0-1H13V4l-.286-.573a.249.249,0,0,0-.424-.006L12,4V6H11V4l-.286-.573a.249.249,0,0,0-.424-.006L10,4V6H9V4l-.286-.573a.249.249,0,0,0-.424-.006L8,4V6H7V4l-.286-.573a.249.249,0,0,0-.424-.006L6,4V6H5V4l-.286-.573a.249.249,0,0,0-.424-.006L4,4V6H3V4l-.286-.573a.249.249,0,0,0-.424-.006L2,4V6H1.5a.5.5,0,0,0,0,1H2v3H1.5a.5.5,0,0,0,0,1H2v1.5a.5.5,0,0,0,1,0V11H4v1.5a.5.5,0,0,0,1,0V11H6v1.5a.5.5,0,0,0,1,0V11H8v1.5a.5.5,0,0,0,1,0V11h1v1.5a.5.5,0,0,0,1,0V11h1v1.5a.5.5,0,0,0,1,0V11h.5a.5.5,0,0,0,0-1ZM3,10V7H4v3Zm2,0V7H6v3Zm2,0V7H8v3Zm2,0V7h1v3Zm2,0V7h1v3Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"ferry-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M11,9.45v0.77c-0.2167,0.0089-0.4213,0.1022-0.57,0.26c-0.2266,0.2196-0.5054,0.3779-0.81,0.46&#xA;&#x9;c-0.5149,0.1365-1.0639,0.0296-1.49-0.29L7.8,10.38c-0.2669-0.2313-0.6631-0.2313-0.93,0c-0.12,0.09-0.23,0.2-0.35,0.28&#xA;&#x9;c-0.6333,0.452-1.4889,0.4316-2.1-0.05l-0.33-0.27c-0.2457-0.185-0.5843-0.185-0.83,0c-0.16,0.11-0.3,0.25-0.46,0.36&#xA;&#x9;c-0.601,0.4185-1.399,0.4185-2,0l-0.26-0.21C0.4009,10.3346,0.2078,10.238,0,10.22V9.45c0.2162-0.0231,0.4345,0.015,0.63,0.11&#xA;&#x9;C0.8642,9.6894,1.0882,9.8365,1.3,10c0.1841,0.1814,0.4478,0.2567,0.7,0.2c0.093-0.0244,0.181-0.0651,0.26-0.12&#xA;&#x9;c0.13-0.09,0.25-0.2,0.38-0.3c0.616-0.4518,1.454-0.4518,2.07,0l0.4,0.31c0.2416,0.1752,0.5684,0.1752,0.81,0l0.4-0.31&#xA;&#x9;c0.6181-0.4567,1.4619-0.4567,2.08,0l0.38,0.3c0.2437,0.18,0.5763,0.18,0.82,0L10,9.77C10.2882,9.5546,10.6403,9.4419,11,9.45z&#xA;&#x9; M2.61,7.61L1,5l1-0.91V1.15C2.0163,0.5061,2.546-0.0057,3.19,0h4.62C8.454-0.0057,8.9837,0.5061,9,1.15v2.94L10,5L8.39,7.62&#xA;&#x9;C7.5729,7.0755,6.4952,7.1324,5.74,7.76L5.5,8l0,0L5.3,7.82C4.5536,7.1506,3.4512,7.0646,2.61,7.61z M2.81,3.61L5.5,2l2.69,1.63&#xA;&#x9;V1.15c0.0114-0.1985-0.1403-0.3686-0.3388-0.38c-0.0137-0.0008-0.0275-0.0008-0.0412,0H3.19&#xA;&#x9;C2.9915,0.7586,2.8214,0.9103,2.81,1.1088c-0.0008,0.0137-0.0008,0.0275,0,0.0412v2.48V3.61z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"ferry-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M5.33,11c0.6745,0.009,1.3262,0.245,1.85,0.67l0.26,0.23h0.05l0.31-0.28c0.9817-0.8115,2.379-0.8846,3.44-0.18L13.5,7L12,6&#xA;&#x9;V2.45c-0.0466-0.8-0.6989-1.4305-1.5-1.45H10c0.0343-0.518-0.3579-0.9657-0.8759-1C9.0828-0.0027,9.0413-0.0027,9,0H6&#xA;&#x9;C5.482-0.0343,5.0343,0.3579,5,0.8759C4.9973,0.9172,4.9973,0.9587,5,1H4.5C3.6989,1.0195,3.0466,1.65,3,2.45V6L1.5,7l2.25,4.53&#xA;&#x9;C4.2143,11.2041,4.7631,11.02,5.33,11z M4,2.45c0.0105-0.2594,0.2293-0.4611,0.4886-0.4506C4.4924,1.9996,4.4962,1.9998,4.5,2h6&#xA;&#x9;c0.259-0.0171,0.4829,0.1789,0.5,0.4379c0.0014,0.0207,0.0014,0.0414,0,0.0621v3l-3.5-2L4,5.45C4,5.45,4,2.45,4,2.45z M14,13v1&#xA;&#x9;c-0.2626,0.0194-0.5069,0.1416-0.68,0.34c-0.2717,0.2883-0.6178,0.4959-1,0.6c-0.6147,0.1815-1.2795,0.0425-1.77-0.37l-0.39-0.35&#xA;&#x9;c-0.3043-0.3026-0.7957-0.3026-1.1,0c-0.14,0.12-0.27,0.25-0.42,0.37c-0.7328,0.5856-1.7814,0.556-2.48-0.07l-0.39-0.35&#xA;&#x9;c-0.2864-0.2502-0.7136-0.2502-1,0c-0.19,0.15-0.36,0.32-0.55,0.47c-0.7043,0.5215-1.6732,0.4968-2.35-0.06l-0.31-0.27&#xA;&#x9;C1.4153,14.1443,1.2172,14.0346,1,14v-1c0.2585-0.032,0.5205,0.0169,0.75,0.14c0.2782,0.1722,0.5424,0.3661,0.79,0.58&#xA;&#x9;c0.2051,0.2235,0.5147,0.319,0.81,0.25c0.1125-0.0333,0.2177-0.0876,0.31-0.16c0.16-0.12,0.29-0.26,0.45-0.39&#xA;&#x9;c0.7106-0.5888,1.7394-0.5888,2.45,0c0.16,0.13,0.31,0.28,0.47,0.41c0.2864,0.2502,0.7136,0.2502,1,0c0.16-0.13,0.31-0.28,0.47-0.41&#xA;&#x9;c0.7123-0.5943,1.7477-0.5943,2.46,0c0.15,0.13,0.29,0.27,0.44,0.39c0.2864,0.2502,0.7136,0.2502,1,0l0.47-0.41&#xA;&#x9;C13.1895,13.1408,13.5886,12.9995,14,13z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"fire-station-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path10041-3-2\\" d=\\"M5.5,0l-2,4L2,2&#xA;&#x9;C1.595,2.7121,0,4.1667,0,6c0,2.7001,2.7999,5,5.5,5S11,8.7001,11,6c0-1.8333-1.595-3.2879-2-4L7.5,4L5.5,0z M5.5,5.5&#xA;&#x9;c0,0,2,1.585,2,3c0,0.6111-0.7778,1.2778-2,1.2778s-2-0.6667-2-1.2778C3.5,7.1336,5.5,5.5,5.5,5.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"fire-station-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path10041-3-3\\" d=\\"M7.5,0.5L5,4.5l-1.5-2&#xA;&#x9;C2.9452,3.4753,0.8036,5.7924,0.8036,8.3036C0.8036,12.002,3.8017,15,7.5,15s6.6964-2.998,6.6964-6.6964&#xA;&#x9;c0-2.5112-2.1416-4.8283-2.6964-5.8036l-1.5,2L7.5,0.5z M7.5,7c0,0,2.5,2.5618,2.5,4.5c0,0.8371-0.8259,2-2.5,2S5,12.3371,5,11.5&#xA;&#x9;C5,9.6283,7.5,7,7.5,7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"fitness-centre-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M7,6H4V5H7ZM2,3V4H1V5A.5.5,0,0,0,1,6V7H2V8H3.5V3Zm8,2V4H9V3H7.5V8H9V7h1V6a.5.5,0,0,0,0-1Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"fitness-centre-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"daec40ff-71f5-4432-9d75-dcba7b9c1b89\\" d=\\"M14.5,7V8h-1v2h-1v1H11V8H4v3H2.5V10h-1V8H.5V7h1V5h1V4H4V7h7V4h1.5V5h1V7Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"florist-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M1,2.5a3.1,3.1,0,0,0-1-2A3.9,3.9,0,0,1,2,2l.526-2,.437,2a3.9,3.9,0,0,1,2-1.5,3.1,3.1,0,0,0-1,2A1.307,1.307,0,0,1,2.662,4H2.409A1.36,1.36,0,0,1,1,2.5ZM9,8.982l2-.437L9,8.018a3.9,3.9,0,0,0,1.5-2,3.1,3.1,0,0,1-2,1A1.36,1.36,0,0,0,7,8.427V8.68a1.307,1.307,0,0,0,1.5,1.3,3.1,3.1,0,0,1,2,1A3.9,3.9,0,0,0,9,8.982ZM3.4,7.9,6.113,5.181a1.382,1.382,0,0,1-.436-.271L3.044,7.543l-.279-.279A11.045,11.045,0,0,0,3,4.5H2.5a15.272,15.272,0,0,1-.161,2.338L2.251,6.75a.247.247,0,0,0-.4.071L.059,10.657a.27.27,0,0,0-.026.108.25.25,0,0,0,.25.25.27.27,0,0,0,.089-.021L.378,11l3.8-1.85a.247.247,0,0,0,.068-.4l-.063-.063A12.768,12.768,0,0,1,6.5,8.5V8a10.381,10.381,0,0,0-2.724.275ZM7.243,2.522a.75.75,0,0,1,.018-1.5.739.739,0,0,1,.561.266.75.75,0,1,1,1.383,0,.739.739,0,0,1,.561-.266.75.75,0,0,1,.014,1.5.748.748,0,1,1-.561,1.26A.728.728,0,0,1,9.263,4a.75.75,0,1,1-1.5,0,.737.737,0,0,1,.05-.238.739.739,0,0,1-.558.26.75.75,0,0,1-.012-1.5ZM7.761,2.5a.75.75,0,1,0,.75-.75A.75.75,0,0,0,7.761,2.5Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"florist-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M1.5,1A2.7,2.7,0,0,1,4,3l.5-3L5,3A2.7,2.7,0,0,1,7.5,1c-.2.03-1,.26-1,2v.083A1.959,1.959,0,0,1,4.5,5H4.417A1.959,1.959,0,0,1,2.5,3C2.5,1.261,1.7,1.03,1.5,1ZM12.012,11l3-.5-3-.5A2.686,2.686,0,0,0,14,7.5c-.03.2-.248,1-1.988,1a2,2,0,0,0,0,4c1.739,0,1.958.8,1.988,1A2.686,2.686,0,0,0,12.012,11ZM9.688,5.548a1,1,0,0,1,0-2,1,1,0,0,1,0-2,.986.986,0,0,1,.852.507l.023-.012a.978.978,0,0,1-.116-.444,1,1,0,1,1,2,0,.978.978,0,0,1-.116.444l.019.01a.986.986,0,0,1,.85-.5,1,1,0,0,1,.025,2,1,1,0,0,1-.025,2,.986.986,0,0,1-.85-.5l-.016.009a.978.978,0,0,1,.113.44,1,1,0,0,1-2,0,.978.978,0,0,1,.113-.44l-.02-.011a.986.986,0,0,1-.852.507Zm.71-1.995A1.051,1.051,0,1,0,11.449,2.5,1.051,1.051,0,0,0,10.4,3.553v0ZM4.946,11.444l-.516-.515L8.892,6.475A1.746,1.746,0,0,1,8.44,6.22L4.076,10.575l-.519-.518A16.051,16.051,0,0,0,4.912,6a3.373,3.373,0,0,1-.412.035c-.041,0-.073-.008-.112-.01A16.953,16.953,0,0,1,3.131,9.631L2.76,9.26a.246.246,0,0,0-.4.079L.231,14.445a.287.287,0,0,0-.016.089.25.25,0,0,0,.25.25.289.289,0,0,0,.1-.019l5.1-2.124a.246.246,0,0,0,.079-.4l-.372-.372a16.874,16.874,0,0,1,3.612-1.256c0-.059-.015-.106-.015-.166A3.349,3.349,0,0,1,9,10.089,16.076,16.076,0,0,0,4.946,11.444Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"fuel-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.5,3H9V1.5l0,0C9,1.2239,8.7761,1,8.5,1S8,1.2239,8,1.5l0,0V3c0,0.5523,0.4477,1,1,1v4.25C9,8.3881,8.8881,8.5,8.75,8.5&#xA;&#x9;S8.5,8.3881,8.5,8.25V6.5C8.5,5.6716,7.8284,5,7,5V2c0-0.5523-0.4477-1-1-1H2C1.4477,1,1,1.4477,1,2v7c0,0.5523,0.4477,1,1,1h4&#xA;&#x9;c0.5523,0,1-0.4477,1-1V6c0.2761,0,0.5,0.2239,0.5,0.5v1.75c0,0.6904,0.5596,1.25,1.25,1.25S10,8.9404,10,8.25V3.5&#xA;&#x9;C10,3.2239,9.7761,3,9.5,3z M6,4.5C6.0056,4.7706,5.7908,4.9944,5.5202,5C5.5201,5,5.5201,5,5.52,5h-3&#xA;&#x9;C2.2384,5.0056,2.0056,4.7818,2,4.5002C2,4.5001,2,4.5001,2,4.5l0,0V3c0-0.2761,0.2239-0.5,0.5-0.5h3C5.7761,2.5,6,2.7239,6,3V4.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"fuel-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13,6L13,6v5.5c0,0.2761-0.2239,0.5-0.5,0.5S12,11.7761,12,11.5v-2C12,8.6716,11.3284,8,10.5,8H9V2c0-0.5523-0.4477-1-1-1H2&#xA;&#x9;C1.4477,1,1,1.4477,1,2v11c0,0.5523,0.4477,1,1,1h6c0.5523,0,1-0.4477,1-1V9h1.5C10.7761,9,11,9.2239,11,9.5v2&#xA;&#x9;c0,0.8284,0.6716,1.5,1.5,1.5s1.5-0.6716,1.5-1.5V5c0-0.5523-0.4477-1-1-1l0,0V2.49C12.9946,2.2178,12.7723,1.9999,12.5,2&#xA;&#x9;c-0.2816,0.0047-0.5062,0.2367-0.5015,0.5184C11.9987,2.5289,11.9992,2.5395,12,2.55V5C12,5.5523,12.4477,6,13,6s1-0.4477,1-1&#xA;&#x9;s-0.4477-1-1-1 M8,6.5C8,6.7761,7.7761,7,7.5,7h-5C2.2239,7,2,6.7761,2,6.5v-3C2,3.2239,2.2239,3,2.5,3h5C7.7761,3,8,3.2239,8,3.5&#xA;&#x9;V6.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"furniture-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <g>\\n    <path d=\\"M6,7.5552V6c0-0.2762-0.2239-0.5-0.5-0.5S5,5.7238,5,6v1.5552c-0.9391,0.1914-1.6886,0.9044-1.9231,1.827&#xA;&#x9;&#x9;C2.9976,9.6944,3.244,10,3.566,10H7.434c0.3221,0,0.5685-0.3056,0.4891-0.6177C7.6886,8.4596,6.9391,7.7466,6,7.5552z\\"/>\\n    <path d=\\"M9.1348,4.2697L7.6395,1.2789C7.554,1.108,7.3793,1,7.1881,1H3.8119C3.6207,1,3.446,1.108,3.3605,1.2789L1.8652,4.2697&#xA;&#x9;&#x9;C1.6974,4.6052,1.9414,5,2.3166,5H7v0.75C7,5.8881,7.1119,6,7.25,6S7.5,5.8881,7.5,5.75V5h1.1834&#xA;&#x9;&#x9;C9.0586,5,9.3026,4.6052,9.1348,4.2697z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"furniture-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <g>\\n    <path d=\\"M9,10.1419V8.5013C9,8.2244,8.7756,8,8.4987,8H7.5013C7.2244,8,7,8.2244,7,8.5013v1.6406&#xA;&#x9;&#x9;c-1.538,0.3984-2.7227,1.6744-2.9573,3.2719C3.9976,13.7202,4.2291,14,4.5389,14h6.9222c0.3098,0,0.5413-0.2798,0.4962-0.5862&#xA;&#x9;&#x9;C11.7227,11.8163,10.538,10.5403,9,10.1419z\\"/>\\n    <path d=\\"M13.6394,6.2788l-2.5016-5.0034C11.0533,1.1066,10.8808,1,10.692,1H5.308C5.1192,1,4.9467,1.1066,4.8622,1.2755&#xA;&#x9;&#x9;L2.3606,6.2788C2.1949,6.6102,2.4359,7,2.8063,7H11v1.5C11,8.7761,11.2239,9,11.5,9S12,8.7761,12,8.5V7h1.1937&#xA;&#x9;&#x9;C13.5641,7,13.8051,6.6102,13.6394,6.2788z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\" id=\\"gaming-11\\">\\n  <path d=\\"M9.715,5.8a2.046,2.046,0,0,0-2-1.8h-1.7V2.5c0-.2.2-.5.4-.5h2.1a.472.472,0,0,0,.5-.5.472.472,0,0,0-.5-.5h-2a1.453,1.453,0,0,0-1.5,1.4V4h-1.8a2.046,2.046,0,0,0-2,1.8l-.2,2.8a.991.991,0,0,0,.8,1.1,1.613,1.613,0,0,0,.9-.3L4.115,8h2.8l1.4,1.4a1.071,1.071,0,0,0,1.4.1,1.613,1.613,0,0,0,.3-.9ZM4.015,7h-2V6a.945.945,0,0,1,1-1h1Zm5,0h-2V5h1a1,1,0,0,1,1,1Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"gaming-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.1,12.5c-0.6,0.3-1.4,0.1-1.8-0.5l-1.1-1.4H4.8L3.7,12l0,0c-0.5,0.7-1.4,0.8-2.1,0.3c-0.5-0.4-0.7-1-0.6-1.5l0.7-3.7l0,0&#xA;&#x9;C1.9,5.9,3,5,4.2,5v0H7V3.5C7,2.7,7.6,2,8.4,2h3.1C11.8,2,12,2.2,12,2.5S11.8,3,11.5,3h-3C8.2,3,8,3.2,8,3.4c0,0,0,0.1,0,0.1V5h2.8&#xA;&#x9;v0c1.2,0,2.3,0.9,2.5,2.1l0,0l0.7,3.7l0,0C14.1,11.5,13.8,12.2,13.1,12.5z M6,7.5C6,6.7,5.3,6,4.5,6S3,6.7,3,7.5S3.7,9,4.5,9&#xA;&#x9;S6,8.3,6,7.5z M12,7.5C12,7.2,11.8,7,11.5,7H11V6.5C11,6.2,10.8,6,10.5,6S10,6.2,10,6.5V7H9.5C9.2,7,9,7.2,9,7.5S9.2,8,9.5,8H10v0.5&#xA;&#x9;C10,8.8,10.2,9,10.5,9S11,8.8,11,8.5V8h0.5C11.8,8,12,7.8,12,7.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"garden-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10,6c0.0043,2.2091-1.783,4.0035-3.9922,4.0078C5.9218,10.008,5.8358,10.0054,5.75,10&#xA;&#x9;c-2.2048,0.1381-4.1041-1.5374-4.2422-3.7422C1.5024,6.172,1.4998,6.086,1.5,6c1.6411-0.1206,3.1886,0.7762,3.9,2.26V5h-2&#xA;&#x9;C2.9085,5.0055,2.5056,4.6116,2.5001,4.1201C2.5,4.1167,2.5,4.1134,2.5,4.11V1.84C2.492,1.6469,2.6421,1.4838,2.8352,1.4758&#xA;&#x9;C2.9567,1.4708,3.0721,1.5292,3.14,1.63L4.28,3l1.17-2.33c0.0996-0.1657,0.3146-0.2193,0.4803-0.1197&#xA;&#x9;C5.9794,0.5798,6.0205,0.6209,6.05,0.67L7.22,3l1.13-1.38c0.0982-0.1665,0.3128-0.2219,0.4793-0.1237&#xA;&#x9;C8.946,1.5651,9.0125,1.6951,9,1.83v2.28C9,4.6015,8.6016,5,8.1101,5.0001C8.1067,5.0001,8.1034,5,8.1,5h-2v3.26&#xA;&#x9;C6.8114,6.7762,8.3589,5.8794,10,6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"garden-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13,8c0,3.31-2.19,6-5.5,6S2,11.31,2,8c2.2643,0.0191,4.2694,1.4667,5,3.61V7H4.5C3.6716,7,3,6.3284,3,5.5v-3&#xA;&#x9;C3,2.2239,3.2239,2,3.5,2c0.1574,0,0.3056,0.0741,0.4,0.2l1.53,2l1.65-3c0.1498-0.232,0.4593-0.2985,0.6913-0.1487&#xA;&#x9;C7.8308,1.0898,7.8815,1.1404,7.92,1.2l1.65,3l1.53-2c0.1657-0.2209,0.4791-0.2657,0.7-0.1C11.9259,2.1944,12,2.3426,12,2.5v3&#xA;&#x9;C12,6.3284,11.3284,7,10.5,7H8v4.61C8.7306,9.4667,10.7357,8.0191,13,8z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"garden-centre-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10.875,5.1642l-0.007-.008-0.029-.029-0.971-.971A0.5,0.5,0,0,0,9,4.4952V5.6429L7,7.6458V3A2,2,0,0,0,3,3,2,2,0,0,0,3,7V8A1,1,0,0,0,4,9H6a0.9843,0.9843,0,0,0,.8328-0.48L9.3606,5.9893H10.422A0.5,0.5,0,0,0,10.875,5.1642ZM1.5,5A1.5,1.5,0,0,1,3,3.5v3A1.5,1.5,0,0,1,1.5,5Zm2-2a1.5,1.5,0,0,1,3,0h-3Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\" version=\\"1.1\\" xmlns=\\"http://www.w3.org/2000/svg\\" id=\\"garden-centre-15\\">\\n  <path d=\\"M4,5L4,4.5C4,3.12 5.12,2 6.5,2C7.88,2 9,3.12 9,4.5L9,10.293L11.365,7.928L11.018,6.633C11.018,6.631 11.017,6.629 11.017,6.627L11.016,6.627L11.016,6.627C10.973,6.461 11.016,6.276 11.147,6.146C11.342,5.951 11.659,5.951 11.854,6.146L13.854,8.146C14.049,8.341 14.049,8.658 13.854,8.853C13.724,8.983 13.541,9.027 13.375,8.984C13.375,8.984 13.375,8.984 13.375,8.984C13.372,8.983 13.369,8.982 13.365,8.981L12.072,8.635L9,11.707L9,12C9,12.552 8.552,13 8,13L5,13C4.448,13 4,12.552 4,12L4,11.536L1.732,9.268C0.757,8.292 0.757,6.708 1.732,5.732C2.22,5.244 2.86,5 3.5,5L3.5,5L4,5ZM4,6L3.5,6L3.5,6C3.116,6 2.732,6.147 2.439,6.439C1.854,7.025 1.854,7.975 2.439,8.561L4,10.121L4,6ZM8,5L8,4.5C8,3.672 7.328,3 6.5,3C5.672,3 5,3.672 5,4.5L5,5L8,5Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"gift-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M0,5h4.5v1H0V5z M1,9.79C1,10.4583,1.5417,11,2.21,11c0.0033,0,0.0067,0,0.01,0h2.3V7H1V9.79z M7.64,4H3.36&#xA;&#x9;C2.6675,4.0686,2.0505,3.5629,1.9819,2.8704C1.9696,2.7467,1.9757,2.6219,2,2.5C1.9503,1.7229,2.5399,1.0526,3.3171,1.0028&#xA;&#x9;C3.3513,1.0006,3.3857,0.9997,3.42,1c1.0141-0.0115,1.8944,0.6969,2.1,1.69C5.7292,1.699,6.6072,0.9924,7.62,1&#xA;&#x9;c0.7893,0.026,1.4081,0.687,1.3821,1.4763C9.0016,2.4909,9.0009,2.5055,9,2.52c0.1185,0.6913-0.3458,1.3478-1.0371,1.4664&#xA;&#x9;C7.8563,4.0046,7.7478,4.0092,7.64,4z M4.82,3.25c0.0388-0.7888-0.5692-1.4597-1.358-1.4986C3.448,1.7508,3.434,1.7503,3.42,1.75&#xA;&#x9;C3.0447,1.7369,2.7298,2.0306,2.7168,2.4059C2.7157,2.4373,2.7167,2.4688,2.72,2.5C2.6811,2.8735,2.9524,3.2079,3.3259,3.2468&#xA;&#x9;C3.3572,3.25,3.3886,3.2511,3.42,3.25H4.82z M7.62,3.25c0.3753,0.0131,0.6902-0.2806,0.7032-0.6559&#xA;&#x9;c0.0011-0.0314,0-0.0628-0.0032-0.0941c0.0221-0.3915-0.2773-0.7268-0.6688-0.7489C7.6408,1.7505,7.6304,1.7501,7.62,1.75&#xA;&#x9;C6.8304,1.7656,6.2029,2.4184,6.2186,3.208C6.2188,3.222,6.2193,3.236,6.22,3.25H7.62z M6.52,5v1H11V5H6.52z M6.52,11h2.29&#xA;&#x9;c0.6604-0.0109,1.1901-0.5495,1.19-1.21V7H6.52V11z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"gift-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M6.5,5v2H0V5H6.5z M8.5,5v2H15V5H8.5z M1,8v4.5C1,13.3284,1.6716,14,2.5,14h4V8H1z M8.5,8v6h4c0.8284,0,1.5-0.6716,1.5-1.5&#xA;&#x9;V8H8.5z M10.5,0c-1.4033-0.0444-2.6497,0.8904-3,2.25C7.1497,0.8904,5.9033-0.0444,4.5,0c-1.0709-0.0337-1.9663,0.8072-2,1.8781&#xA;&#x9;C2.4987,1.9187,2.4987,1.9594,2.5,2C2.3443,2.9427,2.9822,3.8331,3.9249,3.9888C4.0853,4.0153,4.2486,4.0191,4.41,4h6.13&#xA;&#x9;c0.9548,0.1497,1.8503-0.5029,2-1.4577c0.0282-0.1797,0.0282-0.3626,0-0.5423c0.0002-1.1046-0.895-2.0002-1.9996-2.0004&#xA;&#x9;C10.5269-0.0004,10.5135-0.0003,10.5,0z M4.5,3c-0.506,0.0463-0.9537-0.3264-1-0.8323C3.4949,2.1119,3.4949,2.0558,3.5,2&#xA;&#x9;C3.4537,1.494,3.8264,1.0463,4.3323,1C4.3881,0.9949,4.4442,0.9949,4.5,1c1.1046,0,2,0.8954,2,2H4.5z M10.5,3h-2&#xA;&#x9;c0-1.1046,0.8954-2,2-2c0.5523,0,1,0.4477,1,1c0.0463,0.506-0.3264,0.9537-0.8323,1C10.6119,3.0051,10.5558,3.0051,10.5,3z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"globe-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <g>\\n    <g>\\n      <path d=\\"M6.5,10H6V8.9496C7.0402,8.8331,7.9799,8.3841,8.682,7.682L8.1504,7.1504C7.4713,7.8294,6.5339,8.25,5.5,8.25&#xA;&#x9;&#x9;&#x9;c-2.0677,0-3.75-1.6823-3.75-3.75c0-1.0339,0.4206-1.9713,1.0996-2.6504L2.318,1.318C1.5037,2.1323,1,3.2573,1,4.5&#xA;&#x9;&#x9;&#x9;c0,2.314,1.7532,4.1979,4,4.4496V10H4.5C4.2239,10,4,10.2238,4,10.5C4,10.7761,4.2239,11,4.5,11h2C6.7761,11,7,10.7761,7,10.5&#xA;&#x9;&#x9;&#x9;C7,10.2238,6.7761,10,6.5,10z\\"/>\\n    </g>\\n    <g>\\n      <path d=\\"M5.5,7C6.8807,7,8,5.8807,8,4.5C8,3.1193,6.8807,2,5.5,2S3,3.1193,3,4.5C3,5.8807,4.1193,7,5.5,7z M4.9549,2.5847&#xA;&#x9;&#x9;&#x9;l0.4928,0.6168v0.8362l0.6129,1.1115h1.3224C7.2133,5.6406,6.8611,6.0414,6.4035,6.275L5.5,5.5h-1L3.5323,4.1791&#xA;&#x9;&#x9;&#x9;C3.6572,3.4099,4.2178,2.7946,4.9549,2.5847z\\"/>\\n    </g>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"globe-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <g>\\n    <g>\\n      <path d=\\"M11.9807,9.4807l-0.7208-0.7208C10.3425,9.8168,9.006,10.5,7.5,10.5c-2.757,0-5-2.243-5-5&#xA;&#x9;&#x9;&#x9;c0-1.506,0.6832-2.8425,1.7401-3.7599L3.5193,1.0193C2.2831,2.1183,1.5,3.7158,1.5,5.5c0,3.1449,2.4208,5.72,5.5,5.9747V13H6.5&#xA;&#x9;&#x9;&#x9;C6.2239,13,6,13.2238,6,13.5C6,13.7761,6.2239,14,6.5,14h2C8.7761,14,9,13.7761,9,13.5C9,13.2238,8.7761,13,8.5,13H8v-1.5273&#xA;&#x9;&#x9;&#x9;C9.5806,11.341,10.9858,10.5997,11.9807,9.4807z\\"/>\\n    </g>\\n    <g>\\n      <path d=\\"M7.5,9C9.433,9,11,7.433,11,5.5S9.433,2,7.5,2S4,3.567,4,5.5S5.567,9,7.5,9z M8.5,4l0.3638-0.5915&#xA;&#x9;&#x9;&#x9;c0.3463,0.2263,0.6249,0.5394,0.8235,0.9042L9.5,5h-1V4z M6.6563,3.1563L7.5,4v1L8,6h1.5h0.4396&#xA;&#x9;&#x9;&#x9;C9.7708,6.826,9.2026,7.5041,8.4381,7.8144L8,7H6.5L5.0504,5C5.2251,4.1396,5.8452,3.4486,6.6563,3.1563z\\"/>\\n    </g>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"golf-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path11685\\" d=\\"M4.0492,0.638&#xA;&#x9;C3.5323,1.1814,4.2729,1.813,4.7284,1.3132l0.4953-0.5434l2.3326,1.3937L3.3063,4.5C3.0126,4.6615,2.9648,4.9407,3.0724,5.2212&#xA;&#x9;l0.8886,2.3165l-0.9355,2.8046C2.8974,10.7268,3.1975,10.991,3.5001,11c0.1954,0.0058,0.3919-0.093,0.4747-0.3413l0.9199-2.7636&#xA;&#x9;l0.8535-0.2832L6,8.1172V10.5c0,0,0,0.5,0.5,0.5S7,10.5,7,10.5V8.1172C7,8,6.9893,7.8618,6.9358,7.7548L5.6546,4.415l2.5528-1.4035&#xA;&#x9;c0.1868-0.0802,0.2901-0.2535,0.2901-0.5115c0-0.2259-0.2177-0.413-0.4564-0.5556L4.9047,0.0706&#xA;&#x9;c-0.1595-0.0953-0.2749-0.043-0.3226,0.0071L4.0492,0.638z M3,2.0002c-0.5523,0-1,0.4477-1,1s0.4477,1,1,1s1-0.4477,1-1&#xA;&#x9;S3.5523,2.0002,3,2.0002z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"golf-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path11758\\" d=\\"&#xA;&#x9;M3.3999,1.1c0,0.1,0,0.2,0,0.2c0,0.4,0.3,0.7,0.7,0.7c0.3,0,0.5-0.2,0.6-0.5l0,0L4.9,1l5.6,2.3L6.6,6C6.2,6.3,6.2,6.7,6.3,7.1&#xA;&#x9;l0.9,2.1l-1.3,3.9C5.7,13.6,6.1,14,6.5,14c0.3,0,0.5-0.1,0.6-0.5l1.4-4l0.1,0.3v3.5c0,0,0,0.7,0.7,0.7s0.7-0.7,0.7-0.7V10&#xA;&#x9;c0-0.2,0-0.3-0.1-0.5L8.5,6.1l2.7-1.9c0.2-0.2,0.4-0.3,0.4-0.6s-0.2-0.5-0.4-0.6L4,0.1c-0.0878,0-0.118,0.0179-0.2001,0.1&#xA;&#x9;L3.3999,1.1z M5.5,3C4.7,3,4,3.7,4,4.5S4.7,6,5.5,6S7,5.3,7,4.5S6.2999,3,5.5,3z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"grocery-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect7842-7\\" d=\\"M9.75,1.5C9.7464,1.4999,9.4324,1.4942,9.1191,1.6875C8.8041,1.8819,8.5,2.3013,8.5,3H8.2539H1l0.75,3.5&#xA;&#x9;C1.8571,7,2.5,7,2.5,7h6c0,0-0.0027,0.2466-0.1523,0.4961S7.9306,8,7.25,8H2C1.6619,7.9952,1.6619,8.5048,2,8.5h1.25h4&#xA;&#x9;c0.8194,0,1.302-0.3705,1.5273-0.7461C9.0027,7.3784,9,7,9,7V3c0-0.567,0.1959-0.7725,0.3809-0.8867&#xA;&#x9;C9.5659,1.9991,9.7461,2,9.7461,2C9.7474,2,9.7487,2,9.75,2h0.5c0.3381,0.0048,0.3381-0.5048,0-0.5H9.7539H9.75z M7.25,8.5&#xA;&#x9;C6.8358,8.5,6.5,8.8358,6.5,9.25S6.8358,10,7.25,10S8,9.6642,8,9.25S7.6642,8.5,7.25,8.5z M3.25,8.5C2.8358,8.5,2.5,8.8358,2.5,9.25&#xA;&#x9;S2.8358,10,3.25,10S4,9.6642,4,9.25S3.6642,8.5,3.25,8.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" version=\\"1.1\\" id=\\"grocery-15\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <g id=\\"g3\\">\\n    <path d=\\"M 13.199219 1.5 C 13.199219 1.5 11.808806 1.4588 11.253906 2 C 10.720406 2.5202 10.5 2.9177 10.5 4 L 1.1992188 4 L 2.59375 8.8144531 C 2.59725 8.8217531 2.6036219 8.8287375 2.6074219 8.8359375 C 2.8418219 9.4932375 3.4545469 9.9666406 4.1855469 9.9941406 C 4.1885469 9.9954406 4.1992187 10 4.1992188 10 L 10.699219 10 L 10.699219 10.199219 C 10.699219 10.199219 10.7 10.500391 10.5 10.900391 C 10.3 11.300391 10.200391 11.5 9.4003906 11.5 L 2.9003906 11.5 C 1.9003906 11.5 1.9003906 13 2.9003906 13 L 4.0996094 13 L 4.1992188 13 L 9.0996094 13 L 9.1992188 13 L 9.3007812 13 C 10.500781 13 11.399219 12.299609 11.699219 11.599609 C 11.999219 10.899609 12 10.300781 12 10.300781 L 12 10 L 12 4 C 12 3.4764 12.228619 3 12.699219 3 L 13.25 3 C 13.6642 3 14 2.6642 14 2.25 C 14 1.8358 13.6642 1.5 13.25 1.5 L 13.199219 1.5 z M 9.1992188 13 C 8.5992188 13 8.1992188 13.4 8.1992188 14 C 8.1992188 14.6 8.5992187 15 9.1992188 15 C 9.7992187 15 10.199219 14.6 10.199219 14 C 10.199219 13.4 9.7992188 13 9.1992188 13 z M 4.1992188 13 C 3.5992188 13 3.1992188 13.4 3.1992188 14 C 3.1992188 14.6 3.5992187 15 4.1992188 15 C 4.7992188 15 5.1992188 14.6 5.1992188 14 C 5.1992188 13.4 4.7992187 13 4.1992188 13 z \\" id=\\"path5\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"hairdresser-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path6232\\" d=\\"M1.5,2C0.6716,2,0,2.6716,0,3.5v1C0,5,0.5,5,0.5,5h1C3,5,4,5.5,4,5.5S3,6,1.5,6h-1C0.5,6,0,6,0,6.5v1&#xA;&#x9;C0,8.3284,0.6716,9,1.5,9S3,8.3284,3,7.5V6.8848C3.8082,6.727,4.5865,6.4316,5.2246,6.1426L8.5,8C10,8.75,11,8,11,8L6.5,5.5L11,3&#xA;&#x9;c0,0-1-0.75-2.5,0L5.2246,4.8574C4.5866,4.5684,3.8081,4.2731,3,4.1152V3.5039C3,3.5026,3,3.5013,3,3.5C3,2.6716,2.3284,2,1.5,2z&#xA;&#x9; M1.5,3C1.7761,3,2,3.2239,2,3.5S1.7761,4,1.5,4S1,3.7761,1,3.5S1.2239,3,1.5,3z M5.2324,5.25c0.0059-0.0002,0.0117-0.0002,0.0176,0&#xA;&#x9;c0.1381,0,0.25,0.1119,0.25,0.25S5.3881,5.75,5.25,5.75S5,5.6381,5,5.5C4.9997,5.3685,5.1013,5.2592,5.2324,5.25z M1.5,7&#xA;&#x9;C1.7761,7,2,7.2239,2,7.5S1.7761,8,1.5,8S1,7.7761,1,7.5S1.2239,7,1.5,7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"hairdresser-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M15,3c0,0-2-0.6-3.5,0.5l-4.3,3C6.4,5.9,5.2,5.2,4,4.8V4c0-1.1-0.9-2-2-2C0.9,2,0,2.9,0,4v1.5&#xA;&#x9;C0,6,0.5,6,0.5,6H2h0.5C4.5,6,6,7.5,6,7.5S4.5,9,2.5,9H2H0.5C0.5,9,0,9,0,9.5V11c0,1.1,0.9,2,2,2c1.1,0,2-0.9,2-2v-0.8&#xA;&#x9;c1.2-0.4,2.4-1.1,3.2-1.7l4.3,3C13,12.6,15,12,15,12L8.5,7.5L15,3z M3,5H2H1V4c0-0.6,0.4-1,1-1c0.6,0,1,0.4,1,1V5z M3,11&#xA;&#x9;c0,0.6-0.4,1-1,1c-0.6,0-1-0.4-1-1v-1h1h1V11z M7.25,8c-0.2761,0-0.5-0.2239-0.5-0.5S6.9739,7,7.25,7s0.5,0.2239,0.5,0.5&#xA;&#x9;S7.5261,8,7.25,8z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"harbor-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path5263\\" d=\\"M5.5,0C4.1193,0,3,1.1193,3,2.5c0.0018,1.0981,0.7217,2.0466,1.75,2.3711V9.416&#xA;&#x9;c-0.659-0.115-1.3381-0.3753-1.8926-0.8574C2.0886,7.8901,1.5,6.8297,1.5,5c0.0055-0.4226-0.3391-0.7664-0.7617-0.7598&#xA;&#x9;C0.3248,4.2467-0.0054,4.5865,0,5c0,2.1703,0.7731,3.7349,1.873,4.6914S4.3333,11,5.5,11s2.527-0.3521,3.627-1.3086S11,7.1703,11,5&#xA;&#x9;c0.0143-1.0142-1.5143-1.0142-1.5,0c0,1.8297-0.5886,2.8901-1.3574,3.5586C7.5881,9.0407,6.909,9.3011,6.25,9.416V4.875&#xA;&#x9;C7.2795,4.55,7.9999,3.5995,8,2.5C8,1.1193,6.8807,0,5.5,0z M5.5,1.5c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1s-1-0.4477-1-1&#xA;&#x9;S4.9477,1.5,5.5,1.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"harbor-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path5263\\" d=\\"M7.5,0C5.5,0,4,1.567,4,3.5c0.0024,1.5629,1.0397,2.902,2.5,3.3379v6.0391&#xA;&#x9;c-0.9305-0.1647-1.8755-0.5496-2.6484-1.2695C2.7992,10.6273,2.002,9.0676,2.002,6.498c0.0077-0.5646-0.4531-1.0236-1.0176-1.0137&#xA;&#x9;C0.4329,5.493-0.0076,5.9465,0,6.498c0,3.0029,1.0119,5.1955,2.4902,6.5723C3.9685,14.4471,5.8379,15,7.5,15&#xA;&#x9;c1.6656,0,3.535-0.5596,5.0117-1.9395S14.998,9.4868,14.998,6.498c0.0648-1.3953-2.0628-1.3953-1.998,0&#xA;&#x9;c0,2.553-0.7997,4.1149-1.8535,5.0996C10.3731,12.3203,9.4288,12.7084,8.5,12.875V6.8418C9.9607,6.4058,10.9986,5.0642,11,3.5&#xA;&#x9;C11,1.567,9.5,0,7.5,0z M7.5,2C8.3284,2,9,2.6716,9,3.5S8.3284,5,7.5,5S6,4.3284,6,3.5S6.6716,2,7.5,2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"hardware-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <g id=\\"GaLBQ6.tif_2_\\">\\n    <g>\\n      <path d=\\"M1.2174,8.3652C0.8535,8.8127,0.9497,9.4896,1.423,9.8184c0.4178,0.2902,0.9442,0.238,1.3172-0.1347&#xA;&#x9;&#x9;&#x9;c1.2813-1.2802,2.562-2.5611,3.841-3.8436C6.6447,5.7764,6.6952,5.7546,6.788,5.7863c0.4279,0.1458,0.8659,0.1627,1.3055,0.0611&#xA;&#x9;&#x9;&#x9;c1.3402-0.3096,2.1605-1.6406,1.8354-2.9751C9.906,2.7783,9.8722,2.6868,9.8351,2.567C9.7998,2.6112,8.8376,3.5803,8.3764,4.0471&#xA;&#x9;&#x9;&#x9;c-0.0587,0.0595-0.1167,0.0784-0.195,0.0665C8.0791,4.0979,7.2868,4.034,7,4C6.9522,3.5907,6.9268,3.1638,6.8846,2.7619&#xA;&#x9;&#x9;&#x9;c-0.004-0.0378,0.0229-0.0894,0.0517-0.1185C7.2869,2.2885,8.2679,1.31,8.4116,1.1666C8.1,1.0195,7.5652,0.9615,7.1668,1.0263&#xA;&#x9;&#x9;&#x9;c-1.5072,0.245-2.4274,1.7518-1.95,3.1974c0.0262,0.0795,0.0098,0.1259-0.0469,0.1824L1.2174,8.3652z\\"/>\\n    </g>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"hardware-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.7919,3.2619c0,0-1.676,1.675-2.1163,2.1208c-0.085,0.0861-0.1688,0.1135-0.282,0.0961&#xA;&#x9;c-0.1481-0.0226-0.2974-0.038-0.4462-0.0558c-0.4072-0.0485-0.8145-0.0966-1.2292-0.1458C9.649,4.6852,9.5787,4.1049,9.5177,3.5236&#xA;&#x9;C9.512,3.4689,9.5509,3.3943,9.5925,3.3522c0.5071-0.5134,1.9261-1.9287,2.134-2.136c-0.4508-0.2129-1.2243-0.2968-1.8007-0.2031&#xA;&#x9;c-2.1801,0.3543-3.5112,2.534-2.8206,4.625C7.1432,5.753,7.1194,5.8201,7.0374,5.902C5.1891,7.7454,3.3436,9.5914,1.498,11.4374&#xA;&#x9;c-0.0616,0.0616-0.1231,0.124-0.1779,0.1913c-0.5264,0.6473-0.3873,1.6264,0.2974,2.102c0.6044,0.4197,1.3658,0.3442,1.9053-0.1948&#xA;&#x9;c1.8534-1.8519,3.7059-3.7047,5.556-5.5598C9.1707,7.884,9.2437,7.8526,9.3779,7.8983c0.6189,0.2109,1.2524,0.2354,1.8884,0.0884&#xA;&#x9;c1.9386-0.4478,3.1251-2.3732,2.6549-4.3034C13.8895,3.5532,13.843,3.4244,13.7919,3.2619z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"heart-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10.06,4.76c-1.1682,1.9568-2.5794,3.7577-4.2,5.36c-0.1865,0.1961-0.4967,0.2038-0.6927,0.0173&#xA;&#x9;C5.1614,10.1316,5.1556,10.1259,5.15,10.12C3.5259,8.5183,2.1113,6.7173,0.94,4.76c-1.82-3.64,2.8-6.07,4.56-2.43&#xA;&#x9;C7.26-1.31,11.88,1.12,10.06,4.76z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"heart-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.91,6.75c-1.17,2.25-4.3,5.31-6.07,6.94c-0.1903,0.1718-0.4797,0.1718-0.67,0C5.39,12.06,2.26,9,1.09,6.75&#xA;&#x9;C-1.48,1.8,5-1.5,7.5,3.45C10-1.5,16.48,1.8,13.91,6.75z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"heliport-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path10415\\" d=\\"M3,1&#xA;&#x9;C2.723,1,2.5,1.223,2.5,1.5S2.7236,1.9824,3,2h3v2H2.9141h-0.002C2.7004,3.4014,2.1349,3.0009,1.5,3C0.6716,3,0,3.6716,0,4.5&#xA;&#x9;S0.6716,6,1.5,6c0.3794-0.0007,0.7444-0.1452,1.0215-0.4043L4.5,8.5c0.6812,1,1.5,1,2,1h3.5352c0,0,0.9648-0.0008,0.9648-1v-1&#xA;&#x9;c0-0.5-0.5-1-0.5-1l-2-2c0,0-0.5-0.5-1-0.5H7V2h3c0.277,0,0.5-0.223,0.5-0.5S10.277,1,10,1H3z M1.5,4C1.7761,4,2,4.2239,2,4.5&#xA;&#x9;S1.7761,5,1.5,5S1,4.7761,1,4.5S1.2239,4,1.5,4z M7.75,5C7.75,5,8,5,8.5,5.5L10,7H7.5C7.5,7,7,7,7,6.5v-1C7,5.5,7,5,7.5,5H7.75z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"heliport-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path10415\\" d=\\"M4,2C3,2,3,3,4,3h4v1C7.723,4,7.5,4.223,7.5,4.5V5H5H3.9707H3.9316&#xA;&#x9;C3.7041,4.1201,2.9122,3.5011,2,3.5c-1.1046,0-2,0.8954-2,2s0.8954,2,2,2c0.3722-0.001,0.7368-0.1058,1.0527-0.3027L5.5,10.5&#xA;&#x9;C6.5074,11.9505,8.3182,12,9,12h5c0,0,1,0,1-1v-0.9941C15,9.2734,14.874,8.874,14.5,8.5l-3-3c0,0-0.5916-0.5-1.2734-0.5H9.5V4.5&#xA;&#x9;C9.5,4.223,9.277,4,9,4V3h4c1,0,1-1,0-1C13,2,4,2,4,2z M2,4.5c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1s-1-0.4477-1-1&#xA;&#x9;C1,4.9477,1.4477,4.5,2,4.5z M10,6c0.5,0,0.7896,0.3231,1,0.5L13.5,9H10c0,0-1,0-1-1V7C9,7,9,6,10,6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\" id=\\"home-11\\">\\n  <path d=\\"M10.0015,4.7507c0,0.13807-0.11193,0.25-0.25,0.25H1.25c-0.13807,0-0.25-0.11193-0.25-0.25&#xA;&#x9;c-0.00054-0.07163,0.02839-0.14033,0.08-0.19l4.2378-3.4545l0.016-0.016c0.10112-0.09209,0.2577-0.08493,0.35,0.016l2.3174,1.8892&#xA;&#x9;V1.5c0-0.27614,0.22386-0.5,0.5-0.5s0.5,0.22386,0.5,0.5v2.31l0.92,0.75C9.9731,4.60979,10.00215,4.67878,10.0015,4.7507z M2,9.7514&#xA;&#x9;c-0.00111,0.13696,0.10902,0.24889,0.24598,0.25c0.00001,0,0.00001,0,0.00002,0h2.7547v-2h1v2h2.7526&#xA;&#x9;c0.13697,0,0.248-0.11103,0.248-0.248l0,0l0,0V6.0009H2V9.7514z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\" id=\\"home-15\\">\\n  <path d=\\"M2,13.7478c0,0.13807,0.11193,0.25,0.25,0.25h3.749v-3h3v3h3.749c0.13807,0,0.25-0.11193,0.25-0.25V7.9987H2&#xA;&#x9;C2,7.9987,2,13.7478,2,13.7478z M13.93,6.5778l-0.9319-0.8189V2c0-0.55228-0.44771-1-1-1s-1,0.44772-1,1v2L7.6808,1.09&#xA;&#x9;C7.5863,0.9897,7.42846,0.98478,7.3279,1.079L7.3169,1.09L1.0678,6.553C0.9734,6.65376,0.97856,6.81197,1.07932,6.90637&#xA;&#x9;C1.12478,6.94896,1.18451,6.97304,1.2468,6.9739L3,6.9989h10.7468c0.13807,0.00046,0.25037-0.1111,0.25083-0.24917&#xA;&#x9;C13.99784,6.68592,13.97365,6.62445,13.93,6.5779V6.5778z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"horse-riding-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M4,1A1,1,0,1,1,5,2,1,1,0,0,1,4,1Zm6.88,3.5L9,3V2.5L7,5H6L7,6V7.014a.5.5,0,1,1-1,0V6.5L4,5H3a1,1,0,0,0-.8.446A1.189,1.189,0,0,0,1.247,5,1.076,1.076,0,0,0,0,5.988C0,7.3.635,7.471.635,7.471a.33.33,0,0,0,.115.023A.253.253,0,0,0,1,7.25V6a.49.49,0,0,1,.48-.5H1.5A.5.5,0,0,1,2,6V8.014l-.3.6a1.609,1.609,0,0,0-.2.6v1.542A.244.244,0,0,0,1.744,11,.255.255,0,0,0,2,10.756V9.514a.367.367,0,0,1,.1-.3l.9-1.2V9l.467,1.816A.256.256,0,0,0,3.709,11a.25.25,0,0,0,.25-.25v-.016l-.242-1.61a.6.6,0,0,1,.025-.236L3.8,8.714,4,8H6V9l.466,1.816A.256.256,0,0,0,6.709,11a.25.25,0,0,0,.25-.25L6.718,9.124a.6.6,0,0,1,.025-.236L7,8a.877.877,0,0,0,.934-.661L8.5,4.5a.6.6,0,0,0,.71.454.562.562,0,0,0,.143-.07l.9.116a.721.721,0,0,0,.392.1A.331.331,0,0,0,11,4.784.406.406,0,0,0,10.88,4.5ZM6,3.5A.51.51,0,0,0,5.5,3h-1a.482.482,0,0,0-.5.5V5H6Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"horse-riding-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M6,1A1,1,0,1,1,7,2,1,1,0,0,1,6,1ZM8,3.5a.484.484,0,0,0,0-.058A.472.472,0,0,0,7.5,3h-1a.484.484,0,0,0-.058,0A.472.472,0,0,0,6,3.5V7H8Zm6.85,3.644L12.8,4.8l.085-.509a.478.478,0,0,0,.008-.063.25.25,0,0,0-.25-.25.346.346,0,0,0-.158.056L9,7H8L9,8V9.5a.5.5,0,0,1-1,0v-1L6,7H4a1.5,1.5,0,0,0-1.243.661A1.466,1.466,0,0,0,1.563,7H1.5A1.449,1.449,0,0,0,0,8.4v.086A3.781,3.781,0,0,0,.559,10.4a.278.278,0,0,0,.191.1A.25.25,0,0,0,1,10.25V9s-.02-.924.753-1c.5-.048.747.253.747.5V11L2,13v1.75a.25.25,0,0,0,.25.25.254.254,0,0,0,.25-.234V13L4,11v1l.5,2.8a.255.255,0,0,0,.246.2A.25.25,0,0,0,5,14.754H5L4.855,12.3,5.5,11H8v1l.508,2.813A.257.257,0,0,0,8.75,15,.25.25,0,0,0,9,14.75V12l.367-1a1.155,1.155,0,0,0,.543-.6l2.161-3.767a.863.863,0,0,0,1.023.4l1.066.818a.591.591,0,0,0,.35.135.487.487,0,0,0,.475-.4A.552.552,0,0,0,14.85,7.144Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"hospital-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10,4H7V1C6.9616,0.4644,6.5356,0.0384,6,0H5C4.4644,0.0384,4.0384,0.4644,4,1v3H1C0.4644,4.0384,0.0384,4.4644,0,5v1&#xA;&#x9;c0.0384,0.5356,0.4644,0.9616,1,1h3v3c0.0384,0.5356,0.4644,0.9616,1,1h1c0.5356-0.0384,0.9616-0.4644,1-1V7h3&#xA;&#x9;c0.5356-0.0384,0.9616-0.4644,1-1V5C11,4.4477,10.5523,4,10,4z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"hospital-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect4194\\" d=\\"M7,1C6.4,1,6,1.4,6,2v4H2C1.4,6,1,6.4,1,7v1&#xA;&#x9;c0,0.6,0.4,1,1,1h4v4c0,0.6,0.4,1,1,1h1c0.6,0,1-0.4,1-1V9h4c0.6,0,1-0.4,1-1V7c0-0.6-0.4-1-1-1H9V2c0-0.6-0.4-1-1-1H7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"ice-cream-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M4,6c0.541,0.0007,1.0676-0.1748,1.5-0.5C5.9324,5.8252,6.459,6.0007,7,6l-1,4.69c-0.1082,0.2541-0.4019,0.3723-0.656,0.264&#xA;&#x9;c-0.1188-0.0506-0.2134-0.1452-0.264-0.264L4,6z M7,2H6.91c0.2826-0.7787-0.1195-1.6391-0.8982-1.9218S4.3726,0.1978,4.09,0.9765&#xA;&#x9;C3.97,1.3071,3.97,1.6694,4.09,2H4C3.1716,2,2.5,2.6716,2.5,3.5S3.1716,5,4,5s1.5-0.6716,1.5-1.5l0,0l0,0l0,0&#xA;&#x9;C5.5,4.3284,6.1716,5,7,5s1.5-0.6716,1.5-1.5S7.8284,2,7,2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"ice-cream-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M5.44,8.17c0.7156,0.0006,1.414-0.2194,2-0.63C7.9037,7.8634,8.4391,8.0693,9,8.14h0.44L8,13.7&#xA;&#x9;c-0.1082,0.2541-0.4019,0.3723-0.656,0.264C7.2252,13.9134,7.1306,13.8188,7.08,13.7L5.44,8.17z\\"/>\\n  <path d=\\"M11.44,4.67c0,1.1046-0.8954,2-2,2s-2-0.8954-2-2l0,0l0,0l0,0c0,1.1046-0.8954,2-2,2s-2-0.8954-2-2s0.8954-2,2-2h0.12&#xA;&#x9;C5.1756,1.6345,5.7035,0.4834,6.739,0.099s2.1866,0.1435,2.571,1.179c0.1667,0.449,0.1667,0.9429,0,1.3919h0.13&#xA;&#x9;C10.5446,2.67,11.44,3.5654,11.44,4.67z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"industry-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10,1v8H1V6l2.11-1.78C3.43,3.9,4,3.91,4,4.36V6l2.13-1.86c0.1854-0.2047,0.5016-0.2203,0.7062-0.0349&#xA;&#x9;C6.9472,4.2056,7.0073,4.3505,7,4.5V8h2V1H10z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"industry-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M14,1v12H1V8.72c0.0016-0.1419,0.0634-0.2764,0.17-0.37l3-3.22c0.2074-0.1823,0.5234-0.1618,0.7056,0.0456&#xA;&#x9;C4.9568,5.268,5.0011,5.387,5,5.51v3l3.16-3.37c0.2025-0.1878,0.5188-0.1759,0.7066,0.0266C8.9532,5.2599,9.0009,5.3827,9,5.51V11h3&#xA;&#x9;V1H14z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"information-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect8399\\" d=\\"&#xA;&#x9;M5.5989,0.9391c-0.6,0-1.1,0.5-1.1,1.1s0.5,1.1,1.1,1.1s1.1-0.5,1.1-1.1S6.1989,0.9391,5.5989,0.9391z M3,4L2.9989,4.7391&#xA;&#x9;C2.9989,4.7391,4.5,4.6353,4.5,6v1.5c0,1.5-1.5011,1.7391-1.5011,1.7391L3,10h5.2L8.1989,9.2391c0,0-1.2,0-1.2-1.5L7,5c0,0,0-1-1-1&#xA;&#x9;H3z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"information-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect8399\\" d=\\"M7.5,1&#xA;&#x9;C6.7,1,6,1.7,6,2.5S6.7,4,7.5,4S9,3.3,9,2.5S8.3,1,7.5,1z M4,5v1c0,0,2,0,2,2v2c0,2-2,2-2,2v1h7v-1c0,0-2,0-2-2V6c0-0.5-0.5-1-1-1H4&#xA;&#x9;z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"jewelry-store-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M7.574,3.6944L6.7227,4.3329C7.4811,4.7628,8,5.5677,8,6.5C8,7.8785,6.8785,9,5.5,9S3,7.8785,3,6.5&#xA;&#x9;c0-0.9323,0.5189-1.7372,1.2773-2.1671L3.426,3.6944C2.5652,4.332,2,5.3465,2,6.5C2,8.433,3.567,10,5.5,10S9,8.433,9,6.5&#xA;&#x9;C9,5.3465,8.4348,4.332,7.574,3.6944z M7.5,2.5L6.5,1h-2l-1,1.5l2,1.5L7.5,2.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"jewelry-store-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M12,8.5c0,2.4853-2.0147,4.5-4.5,4.5S3,10.9853,3,8.5c0-1.8483,1.1164-3.4329,2.7099-4.1255l0.1761,0.137l0.7739,0.6019&#xA;&#x9;C5.1366,5.4922,4,6.8611,4,8.5C4,10.4299,5.5701,12,7.5,12S11,10.4299,11,8.5c0-1.6389-1.1366-3.0078-2.6599-3.3866l0.95-0.7388&#xA;&#x9;C10.8836,5.0672,12,6.6517,12,8.5z M7.5,4.5L10,2.5555L9,1H6L5,2.5555l1.5,1.1667L7.5,4.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"karaoke-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M4.5,4.4l-2,2l-1,1C1,7.8,0.9,8.5,1.2,9.1l0.6,0.7c0.6,0.4,1.3,0.2,1.7-0.3l1-1l2-2L4.5,4.4z M3.1,8.5L2.5,7.8l2-2l0.7,0.7&#xA;&#x9;L3.1,8.5z M5,2l1-1h3l1,1v3L9,6H8L5,3V2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\" id=\\"karaoke-15\\">\\n  <g>\\n    <path d=\\"M12.1,2.952A2.988,2.988,0,0,0,6.99,4.917l3.142,3.142A2.988,2.988,0,0,0,12.1,2.952Z\\"/>\\n    <path d=\\"M4.672,8.255,2.55,10.377a1,1,0,0,0,0,1.414l.707.707a1,1,0,0,0,1.414,0l2.121-2.121L8.914,8.255,6.793,6.134Zm.741,2.087-.707-.707L6.793,7.548l.707.707Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"landmark-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.5,9H8V5h1l1-2C9.3,3.1,8.7,3.1,8,3C7.3,2.7,6.6,2.4,6,2V1.5C6,1.2,5.8,1,5.5,1S5,1.2,5,1.5V2C4.4,2.4,3.7,2.7,3,3&#xA;&#x9;C2.3,3.1,1.7,3.1,1,3l1,2h1v4H1.5C1.2,9,1,9.2,1,9.5S1.2,10,1.5,10h8C9.8,10,10,9.8,10,9.5S9.8,9,9.5,9z M7,9H4V5h3V9z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"landmark-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M12.5,12H12v-0.5c0-0.3-0.2-0.5-0.5-0.5H11V6h1l1-2c-1,0.1-2,0.1-3,0C9.2,3.4,8.6,2.8,8,2V1.5C8,1.2,7.8,1,7.5,1&#xA;&#x9;S7,1.2,7,1.5V2C6.4,2.8,5.8,3.4,5,4C4,4.1,3,4.1,2,4l1,2h1v5c0,0-0.5,0-0.5,0C3.2,11,3,11.2,3,11.5V12H2.5C2.2,12,2,12.2,2,12.5V13&#xA;&#x9;h11v-0.5C13,12.2,12.8,12,12.5,12z M7,11H5V6h2V11z M10,11H8V6h2V11z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"landuse-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M1,4.749.995,2.057a.251.251,0,0,1,.1-.2L3.344.057A.251.251,0,0,1,3.657.052l2.249,1.8a.251.251,0,0,1,.094.2v2.7A.251.251,0,0,1,5.751,5h-1.5A.251.251,0,0,1,4,4.749V3H3V4.752A.251.251,0,0,1,2.746,5h-1.5A.247.247,0,0,1,1,4.749Zm4.753,2.6h0a.248.248,0,0,0-.173.072L4,9V6.5a.5.5,0,0,0-1,0V9H2V6.5a.5.5,0,0,0-1,0v4.25a.25.25,0,0,0,.25.25h4.5A.249.249,0,0,0,6,10.752V7.6A.25.25,0,0,0,5.753,7.347ZM11,3.253v6.5a.247.247,0,0,1-.247.247H7.247A.247.247,0,0,1,7,9.753v-6.5A.252.252,0,0,1,7.252,3H8V2.248A.248.248,0,0,1,8.248,2H9.754A.246.246,0,0,1,10,2.246V3h.747A.253.253,0,0,1,11,3.253ZM10,8H8V9h2Zm0-2H8V7h2Zm0-2H8V5h2Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"landuse-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M8.911,3.854A.248.248,0,0,1,9,4.044V7.75A.25.25,0,0,1,8.75,8H6.25A.25.25,0,0,1,6,7.75V6H5V7.75A.25.25,0,0,1,4.75,8H2.25A.25.25,0,0,1,2,7.75v-3.7a.248.248,0,0,1,.089-.19L5.343,1.132a.245.245,0,0,1,.315,0ZM7.752,9.5a.248.248,0,0,0-.138.042L5,11.5H4v-2a.5.5,0,0,0-1,0v2H2v-2a.5.5,0,0,0-1,0v4.25a.25.25,0,0,0,.25.25h6.5A.25.25,0,0,0,8,13.75v-4A.248.248,0,0,0,7.752,9.5ZM14,6.245v6.5a.253.253,0,0,1-.253.253H10.253A.253.253,0,0,1,10,12.747V6.25A.249.249,0,0,1,10.25,6H11V5.249A.249.249,0,0,1,11.249,5h1.5A.253.253,0,0,1,13,5.253V6h.755A.245.245,0,0,1,14,6.245ZM13,11H11v1h2Zm0-2H11v1h2Zm0-2H11V8h2Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"laundry-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path3291\\" d=\\"M5,0L4,2H2c0,0-1,0-1,1v7c0,0,0,1,1,1h7c1,0,1-1,1-1V1c0-1-1-1-1-1H5z M6,1h3v1H6V1z M5.5,4&#xA;&#x9;C6.8807,4,8,5.1193,8,6.5S6.8807,9,5.5,9S3,7.8807,3,6.5S4.1193,4,5.5,4z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"laundry-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path3291-2\\" d=\\"M8,1L6,3H3c0,0-1,0-1,1v9c0,1,1,1,1,1h9c0,0,1,0,1-1V2c0-1-1-1-1-1&#xA;&#x9;S8,1,8,1z M8.5,2h2C10.777,2,11,2.223,11,2.5S10.777,3,10.5,3h-2C8.223,3,8,2.777,8,2.5S8.223,2,8.5,2z M7.5,6&#xA;&#x9;c1.6569,0,3,1.3431,3,3s-1.3431,3-3,3s-3-1.3431-3-3S5.8431,6,7.5,6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"library-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path5\\" d=\\"&#xA;&#x9;M0,1v7c3.26,0,5.4902,2,5.4902,2S7.76,8,11,8V1C7,1,5.4902,2.7246,5.4902,2.7246S4,1,0,1z M1,2c1.1953-0.0313,3.053,0.4015,4,1.3477&#xA;&#x9;L5.5,4L6,3.3477C6.9615,2.4183,8.8009,1.9878,10,2v5C8,7,6.6456,7.8564,5.4902,8.7812C4.3506,7.8533,3,7,1,7V2z M2,3.3027v0.1816&#xA;&#x9;c0.8234,0.1688,2.0997,0.6868,3,1.1758V4.4316C4.0828,3.9535,2.8241,3.46,2,3.3027z M9,3.3027C8.1759,3.46,6.9172,3.9535,6,4.4316&#xA;&#x9;v0.2285c0.9003-0.489,2.1766-1.007,3-1.1758V3.3027z M2,4.2227v0.1816c0.8217,0.1539,2.0985,0.6584,3,1.1328V5.3418&#xA;&#x9;C4.0827,4.8663,2.8238,4.3752,2,4.2227z M9,4.2227C8.1762,4.3752,6.9173,4.8663,6,5.3418v0.1953&#xA;&#x9;c0.9015-0.4744,2.1783-0.9789,3-1.1328V4.2227z M2,5.1172v0.1816c0.8216,0.1547,2.0984,0.659,3,1.1328V6.2363&#xA;&#x9;C4.0825,5.7614,2.8236,5.2707,2,5.1172z M9,5.1172C8.1764,5.2707,6.9175,5.7614,6,6.2363v0.1953&#xA;&#x9;c0.9016-0.4738,2.1784-0.9781,3-1.1328V5.1172z M2,6v0.1816C2.8201,6.322,4.097,6.811,5,7.2695V7.1191&#xA;&#x9;C4.0825,6.6445,2.8236,6.1538,2,6z M9,6C8.1764,6.1538,6.9175,6.6445,6,7.1191v0.1504C6.903,6.811,8.1799,6.322,9,6.1816V6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"library-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M7.47,4.92C7.47,4.92,5.7,3,1,3v8c4.7,0,6.47,2,6.47,2S9.3,11,14,11V3C9.3,3,7.47,4.92,7.47,4.92z M13,10&#xA;&#x9;c-1.9614,0.0492-3.8727,0.6299-5.53,1.68C5.836,10.6273,3.9432,10.0459,2,10V4c3.4,0.26,4.73,1.6,4.75,1.61l0.73,0.74L8.2,5.6&#xA;&#x9;c0,0,1.4-1.34,4.8-1.6V10z M8,10.24l-0.1-0.17c1.3011-0.5931,2.6827-0.9907,4.1-1.18v0.2c-1.3839,0.1953-2.7316,0.5929-4,1.18V10.24&#xA;&#x9;z M8,9.24L7.9,9.07C9.2016,8.4802,10.5832,8.086,12,7.9v0.2c-1.3844,0.1988-2.7321,0.5997-4,1.19V9.24z M8,8.24L7.9,8.07&#xA;&#x9;C9.2015,7.48,10.5831,7.0857,12,6.9v0.2c-1.3845,0.1981-2.7323,0.599-4,1.19V8.24z M8,7.24L7.9,7.07&#xA;&#x9;C9.2013,6.4794,10.583,6.0851,12,5.9v0.2c-1.3844,0.1986-2.7321,0.5996-4,1.19V7.24z M6.9,10.24C5.6639,9.6641,4.3499,9.2733,3,9.08&#xA;&#x9;v-0.2c1.3872,0.2028,2.7358,0.6141,4,1.22L6.9,10.24z M6.9,9.24C5.6629,8.671,4.3488,8.2869,3,8.1V7.9&#xA;&#x9;c1.386,0.2027,2.7341,0.6105,4,1.21L6.9,9.24z M6.9,8.24C5.6631,7.6705,4.3489,7.2863,3,7.1V6.9c1.3868,0.199,2.7354,0.607,4,1.21&#xA;&#x9;L6.9,8.24z M6.9,7.24C5.6629,6.671,4.3488,6.2869,3,6.1V5.9c1.386,0.2024,2.7342,0.6102,4,1.21L6.9,7.24z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"lighthouse-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M7,6l1,5H3l1-5h1.2V2H4.28C4.1042,1.9823,3.9759,1.8255,3.9936,1.6496C4.0042,1.544,4.0665,1.4504,4.16,1.4L5.38,1&#xA;&#x9;c0.0762-0.0347,0.1638-0.0347,0.24,0l1.22,0.4c0.1555,0.0839,0.2136,0.2781,0.1296,0.4336C6.9192,1.927,6.8257,1.9894,6.72,2H5.81v4&#xA;&#x9;H7z M8,3v0.5L11,3V2.5L8,3z M8,5.5L11,6V5.5L8,5V5.5z M3,3L0,2.5V3l3,0.5V3z M3,5L0,5.5V6l3-0.5V5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"lighthouse-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M4.5,6L0,7V6.5l4.5-1V6z M4.5,3.5L0,2.5V3l4.5,1V3.5z M10.5,3.5V4L15,3V2.5L10.5,3.5z M10.5,6L15,7V6.5l-4.5-1V6z M8,7V2&#xA;&#x9;h2.5c0.2761,0.0552,0.5448-0.1239,0.6-0.4c0.0552-0.2761-0.1239-0.5448-0.4-0.6l-3-1C7.5696-0.0586,7.4204-0.0586,7.29,0l-3,1&#xA;&#x9;c-0.2761,0.0552-0.4552,0.3239-0.4,0.6S4.2139,2.0552,4.49,2H7v5H5l-2,7h9l-2-7H8z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"lodging-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect6430\\" d=\\"M1.5,2C1.2239,2,1,2.2239,1,2.5v6C1,8.7761,1.2239,9,1.5,9S2,8.7761,2,8.5V8h7v0.5C9,8.7761,9.2239,9,9.5,9&#xA;&#x9;S10,8.7761,10,8.5v-1C10,7.2239,9.7761,7,9.5,7H2V2.5C2,2.2239,1.7761,2,1.5,2z M3.5,2c-0.5523,0-1,0.4477-1,1s0.4477,1,1,1&#xA;&#x9;s1-0.4477,1-1S4.0523,2,3.5,2z M6,3C5.4477,3,5,3.4477,5,4v1H3C2.7239,5,2.5,5.2239,2.5,5.5S2.7239,6,3,6h7V5c0-1.1046-0.8954-2-2-2&#xA;&#x9;H6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"lodging-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect6507\\" d=\\"M0.5,2.5C0.2,2.5,0,2.7,0,3v7.5v2C0,12.8,0.2,13,0.5,13S1,12.8,1,12.5V11h13v1.5&#xA;&#x9;c0,0.3,0.2,0.5,0.5,0.5s0.5-0.2,0.5-0.5v-2c0-0.3-0.2-0.5-0.5-0.5H1V3C1,2.7,0.8,2.5,0.5,2.5z M3.5,3C2.7,3,2,3.7,2,4.5l0,0&#xA;&#x9;C2,5.3,2.7,6,3.5,6l0,0C4.3,6,5,5.3,5,4.5l0,0C5,3.7,4.3,3,3.5,3L3.5,3z M7,4C5.5,4,5.5,5.5,5.5,5.5V7h-3C2.2,7,2,7.2,2,7.5v1&#xA;&#x9;C2,8.8,2.2,9,2.5,9H6h9V6.5C15,4,12.5,4,12.5,4H7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"logging-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.25,1a.409.409,0,0,0-.11.01.668.668,0,0,0-.44.24L8,2H7.263A.25.25,0,0,0,7,2.236a.243.243,0,0,0,0,.025V3H6.263a.256.256,0,0,0-.19.073A.248.248,0,0,0,6,3.252V4H5.237a.275.275,0,0,0-.164.073A.248.248,0,0,0,5,4.252V5H4.249a.257.257,0,0,0-.176.075l.178.178.5.5L8.5,2H9v.5L5.25,6.25l.5.5.177.177A.249.249,0,0,0,6,6.749V6h.751a.25.25,0,0,0,.176-.073A.266.266,0,0,0,7,5.759V5h.748A.248.248,0,0,0,8,4.756H8V4h.751a.267.267,0,0,0,.176-.073A.258.258,0,0,0,9,3.733V3l.78-.72a.734.734,0,0,0,.21-.42L10,1.75A.755.755,0,0,0,9.25,1ZM2,8,1.569,6.8h0a1.422,1.422,0,0,1-.07-.465V6.25A.25.25,0,0,1,1.749,6h1a.25.25,0,0,0,0-.5H1.5A.5.5,0,0,0,1,6v.415a2,2,0,0,0,.106.642L1.57,8.43a1.841,1.841,0,0,0,.1.24,1.551,1.551,0,0,0,.624.643,1.342,1.342,0,0,0,1.315,0C3.869,9.122,5,8,5,8L3.5,6.5Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"logging-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.91,3.41,13.5,3l.2-.28c.02-.03.04-.05.06-.08A.969.969,0,0,0,14,1.99a1,1,0,0,0-1.62-.77c-.03.02-.06.05-.09.07L12,1.5l-.386-.386a.354.354,0,0,0-.525.475l.417.417-.5.5-.392-.392a.354.354,0,0,0-.525.475L10.5,3l-.5.5-.381-.381a.354.354,0,1,0-.528.472h0l.028.028L9.5,4,9,4.5l-.395-.395a.354.354,0,0,0-.517.483L8.5,5,8,5.5l-.365-.365a.354.354,0,0,0-.556.439h0C7.1,5.6,7.508,6,7.508,6L7,6.5l-.394-.392a.392.392,0,0,0-.5-.028.384.384,0,0,0-.028.5L6.1,6.6l.4.4L6,7.5l-.4-.4a.37.37,0,0,0-.5,0L6.248,8.244,12.09,2.41,12.5,2H13v.5l-.41.41L6.751,8.749,7.9,9.9a.355.355,0,0,0,0-.5l-.008-.009L7.5,9,8,8.5l.384.384a.354.354,0,0,0,.528-.472L8.5,8,9,7.5l.38.38a.354.354,0,0,0,.528-.472l-.02-.02L9.5,7l.5-.5.377.377A.35.35,0,0,0,10.64,7a.347.347,0,0,0,.252-.6L10.5,6l.5-.5.38.38a.354.354,0,0,0,.528-.472L11.88,5.38,11.5,5l.5-.5.381.381a.354.354,0,0,0,.528-.472l-.025-.025L12.5,4l.5-.5.382.382a.354.354,0,0,0,.528-.472ZM4.39,7.916C3.893,7.419,3.641,7,3,7H1.5a.5.5,0,0,0-.5.5v3A2.19,2.19,0,0,0,1.5,12l.815.811A2.251,2.251,0,0,0,5.493,13h0L7.5,11ZM3.5,10,2.262,11.238A1.3,1.3,0,0,1,2,10.5V8H3a.545.545,0,0,1,.335.194.455.455,0,0,1,.165.418Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"marker-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path4133\\" d=\\"M5.5-0.0176c-1.7866,0-3.8711,1.0918-3.8711,3.8711&#xA;&#x9;C1.6289,5.7393,4.6067,9.9082,5.5,11c0.7941-1.0918,3.871-5.1614,3.871-7.1466C9.371,1.0742,7.2866-0.0176,5.5-0.0176z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"marker-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path4133\\" d=\\"M7.5,0C5.0676,0,2.2297,1.4865,2.2297,5.2703&#xA;&#x9;C2.2297,7.8378,6.2838,13.5135,7.5,15c1.0811-1.4865,5.2703-7.027,5.2703-9.7297C12.7703,1.4865,9.9324,0,7.5,0z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"marker-stroked-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"Layer_7\\" d=\\"M5.486,11l-.365-.446c-.7-.858-3.544-4.739-3.544-6.638A3.726,3.726,0,0,1,5.132.026q.167-.008.333,0A3.726,3.726,0,0,1,9.353,3.583q.007.166,0,.331c0,1.6-1.806,4.268-3.38,6.415ZM5.465.916a2.817,2.817,0,0,0-3,3c0,1.268,1.883,4.161,2.987,5.62.935-1.282,3.011-4.217,3.011-5.62a2.817,2.817,0,0,0-3-3Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"marker-stroked-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"Layer_7\\" d=\\"M7.5,14.941l-.4-.495c-.973-1.189-4.9-6.556-4.9-9.16A5.066,5.066,0,0,1,7.036,0q.222-.01.445,0a5.066,5.066,0,0,1,5.286,4.836q.01.225,0,.45c0,2.213-2.669,6.111-4.678,8.851ZM7.481.986a4.077,4.077,0,0,0-4.3,4.3c0,1.832,2.759,6.038,4.286,8.034,1.25-1.71,4.315-5.989,4.315-8.034a4.077,4.077,0,0,0-4.3-4.3Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"mobile-phone-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M7,2V1.5a.5.5,0,0,0-1,0V2H4A1,1,0,0,0,3,3V9a1,1,0,0,0,1,1H7A1,1,0,0,0,8,9V3A1,1,0,0,0,7,2ZM5,9H4V8H5ZM5,7H4V6H5ZM7,9H6V8H7ZM7,7H6V6H7ZM7,5H4V3H7Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"mobile-phone-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M10,2h0V1.5a.5.5,0,0,0-1,0V2H5A1,1,0,0,0,4,3V13a1,1,0,0,0,1,1h5a1,1,0,0,0,1-1V3A1,1,0,0,0,10,2ZM6,13H5V12H6Zm0-2H5V10H6ZM6,9H5V8H6Zm2,4H7V12H8Zm0-2H7V10H8ZM8,9H7V8H8Zm2,4H9V12h1Zm0-2H9V10h1Zm0-2H9V8h1Zm0-2.5a.5.5,0,0,1-.5.5h-4A.5.5,0,0,1,5,6.5v-3A.5.5,0,0,1,5.5,3h4a.5.5,0,0,1,.5.5Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"monument-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path11719-7\\" d=\\"M5.5,0L4,2v4.5h3V2L5.5,0z M3,7L2,8&#xA;&#x9;v3h7V8L8,7H3z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"monument-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path11719-7\\" d=\\"M7.5,0L6,2.5v7h3v-7L7.5,0z M3,11.5&#xA;&#x9;L3,15h9v-3.5L10.5,10h-6L3,11.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"mountain-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect3338\\" d=\\"M5.5176,1.2324C5.3165,1.2262,5.1271,1.328,5.0234,1.5l-4,6.6602&#xA;&#x9;C0.8007,8.5296,1.0679,8.9999,1.5,9h8c0.4321-0.0001,0.6993-0.4704,0.4766-0.8398l-4-6.6602&#xA;&#x9;C5.8793,1.3386,5.7062,1.2384,5.5176,1.2324z M5.5195,2.1543L8.4316,7H7.7598L6.416,5.7734L5.5195,7L4.625,5.7734L3.2812,7H2.6094&#xA;&#x9;C2.6094,7,5.5195,2.1543,5.5195,2.1543z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"mountain-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path5571\\" d=\\"M7.5,2C7.2,2,7.1,2.2,6.9,2.4&#xA;&#x9;l-5.8,9.5C1,12,1,12.2,1,12.3C1,12.8,1.4,13,1.7,13h11.6c0.4,0,0.7-0.2,0.7-0.7c0-0.2,0-0.2-0.1-0.4L8.2,2.4C8,2.2,7.8,2,7.5,2z&#xA;&#x9; M7.5,3.5L10.8,9H10L8.5,7.5L7.5,9l-1-1.5L5,9H4.1L7.5,3.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"museum-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M5.5,0L1,2v1h9V2L5.5,0z M2,4v4L1,9v1h9V9L9,8V4H2z M3.49,5c0.1354-0.0008,0.2653,0.0533,0.36,0.15L5.5,6.79l1.65-1.64&#xA;&#x9;c0.1972-0.1933,0.5137-0.1902,0.7071,0.007C7.947,5.2487,7.9982,5.3715,8,5.5v3C8,8.7761,7.7761,9,7.5,9S7,8.7761,7,8.5l0,0V6.71&#xA;&#x9;L5.85,7.85C5.6555,8.0461,5.339,8.0474,5.1429,7.8529C5.1419,7.8519,5.141,7.851,5.14,7.85L4,6.71V8.5C4,8.7761,3.7761,9,3.5,9&#xA;&#x9;S3,8.7761,3,8.5l0,0v-3C2.9999,5.2277,3.2178,5.0054,3.49,5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"museum-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path7509\\" d=\\"M7.5,0L1,3.4453V4h13V3.4453L7.5,0z M2,5v5l-1,1.5547V13h13v-1.4453L13,10&#xA;&#x9;V5H2z M4.6152,6c0.169-0.0023,0.3318,0.0639,0.4512,0.1836L7.5,8.6172l2.4336-2.4336c0.2445-0.2437,0.6402-0.2432,0.884,0.0013&#xA;&#x9;C10.9341,6.3017,10.9997,6.46,11,6.625v4.2422c0.0049,0.3452-0.271,0.629-0.6162,0.6338c-0.3452,0.0049-0.629-0.271-0.6338-0.6162&#xA;&#x9;c-0.0001-0.0059-0.0001-0.0118,0-0.0177V8.1328L7.9414,9.9414c-0.244,0.2433-0.6388,0.2433-0.8828,0L5.25,8.1328v2.7344&#xA;&#x9;c0.0049,0.3452-0.271,0.629-0.6162,0.6338C4.2887,11.5059,4.0049,11.2301,4,10.8849c-0.0001-0.0059-0.0001-0.0118,0-0.0177V6.625&#xA;&#x9;C4,6.2836,4.2739,6.0054,4.6152,6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"music-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.5,0.5C9.4238,0.4993,9.3484,0.5164,9.28,0.55L3.5,2C3.2239,2,3,2.2239,3,2.5v4.59&#xA;&#x9;C2.219,6.8139,1.3619,7.2232,1.0858,8.0042S1.219,9.6423,2,9.9184s1.6381-0.1332,1.9142-0.9142C3.9715,8.8423,4.0005,8.6717,4,8.5&#xA;&#x9;V5.38l5-1.25v1.46C8.219,5.3139,7.3619,5.7232,7.0858,6.5042C6.8097,7.2853,7.219,8.1423,8,8.4184s1.6381-0.1332,1.9142-0.9142&#xA;&#x9;C9.9715,7.3423,10.0005,7.1717,10,7V1C10,0.7239,9.7761,0.5,9.5,0.5z M4,4.38v-1.5l5-1.25v1.5L4,4.38z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"music-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.5,1c-0.0804,0.0008-0.1594,0.0214-0.23,0.06L4.5,3.5C4.2239,3.5,4,3.7239,4,4v6.28C3.6971,10.1002,3.3522,10.0037,3,10&#xA;&#x9;c-1.1046,0-2,0.8954-2,2s0.8954,2,2,2s2-0.8954,2-2V7.36l8-2.22v3.64c-0.3029-0.1798-0.6478-0.2763-1-0.28c-1.1046,0-2,0.8954-2,2&#xA;&#x9;s0.8954,2,2,2s2-0.8954,2-2v-9C14,1.2239,13.7761,1,13.5,1z M13,4.14L5,6.36v-2l8-2.22C13,2.14,13,4.14,13,4.14z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"natural-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M4.579,9.579h0L3,8H4.4a.25.25,0,0,0,.25-.25.246.246,0,0,0-.079-.179L3,6h.736a.25.25,0,0,0,.25-.25.246.246,0,0,0-.078-.179h0l-1.2-1.253a.253.253,0,0,0-.4-.015c-.02.023-1.21,1.266-1.21,1.266a.245.245,0,0,0-.082.18.25.25,0,0,0,.25.25H2L.425,7.575h0A.249.249,0,0,0,.6,8H2L.434,9.566h0a.244.244,0,0,0-.082.18A.25.25,0,0,0,.6,10H2v1H3V10H4.4a.247.247,0,0,0,.179-.421Zm6.242-.938-2.1-4.2a.248.248,0,0,0-.443,0l-2.1,4.2A.248.248,0,0,0,6.4,9h4.2a.248.248,0,0,0,.221-.359ZM7.5,7l1-2,1,2Zm.279-5.921a.266.266,0,0,1-.049.148A3.513,3.513,0,0,0,7,3,2.141,2.141,0,0,1,5.709,4.911a.475.475,0,0,1-.419,0A2.141,2.141,0,0,1,4,3a3.5,3.5,0,0,0-.726-1.769.271.271,0,0,1-.046-.148.25.25,0,0,1,.25-.25.27.27,0,0,1,.067.009A2.939,2.939,0,0,1,5,2L5.25.224A.25.25,0,0,1,5.744.2L6,2A2.957,2.957,0,0,1,7.453.841.272.272,0,0,1,7.529.829.25.25,0,0,1,7.779,1.079Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"natural-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M8.753,6.278a.5.5,0,0,1-.51,0A4.109,4.109,0,0,1,6.5,3.5a2.779,2.779,0,0,0-.59-1.506l-.019-.027a.257.257,0,0,1-.056-.144.237.237,0,0,1,.25-.25.264.264,0,0,1,.057.011A3.523,3.523,0,0,1,7.5,2.5L8.28.94a.246.246,0,0,1,.44,0L9.5,2.5a3.4,3.4,0,0,1,1.339-.907.283.283,0,0,1,.1-.021c.175.009.212.119.221.249a.35.35,0,0,1-.043.141A5.2,5.2,0,0,0,10.5,3.5,4.113,4.113,0,0,1,8.753,6.278ZM5,8H6.289a.25.25,0,0,0,.25-.25.241.241,0,0,0-.061-.15L4.7,5.235a.255.255,0,0,0-.391,0L2.518,7.589a.274.274,0,0,0-.062.161.25.25,0,0,0,.25.25H4L1.335,10.6a.273.273,0,0,0-.058.152A.25.25,0,0,0,1.529,11H3L1.435,12.565a.255.255,0,0,0,.18.435H4v1H5V13H7.385a.255.255,0,0,0,.18-.435L6,11H7.471a.25.25,0,0,0,.25-.25.233.233,0,0,0-.058-.149Zm9.345,3.748a.252.252,0,0,1-.252.252H8.908a.252.252,0,0,1-.226-.365L11.27,6.451a.252.252,0,0,1,.451,0l2.6,5.184h0A.251.251,0,0,1,14.345,11.748ZM12.75,10,11.5,7.5,10.25,10Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\" xmlns=\\"http://www.w3.org/2000/svg\\" id=\\"oil-rig-es-11\\">\\n  <path d=\\"M10.2667 9.53333H8.8L7.33333 1.46667H6.6V0.733333H5.86667V0H5.13333V0.733333H4.4V1.46667H3.66667L2.2 9.53333H0.733333L0 11H11L10.2667 9.53333ZM4.268 2.2H6.732L7.13533 4.4H3.86467L4.268 2.2ZM6.6 5.13333L5.5 6.78333L4.4 5.13333H6.6ZM2.93333 9.53333L3.718 5.214L5.13333 7.33333L3.66667 9.53333H2.93333ZM4.4 9.53333L5.5 7.88333L6.6 9.53333H4.4ZM7.33333 9.53333L5.86667 7.33333L7.282 5.214L8.06667 9.53333H7.33333Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"oil-rig-es-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M14,13H12L10,2H9V1H8V0H7V1H6V2H5L3,13H1L0,15H15ZM5.82,3H9.18l.55,3H5.27ZM9,7,7.5,9.25,6,7ZM4,13,5.07,7.11,7,10,5,13Zm2,0,1.5-2.25L9,13Zm4,0L8,10,9.93,7.11,11,13Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"optician-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10.5,4c-0.0246,0-0.0457,0.0106-0.0694,0.014C10.2798,3.35,9.8149,3,9,3H7.5C6.6155,3,6.1454,3.4145,6.0433,4.1969&#xA;&#x9;C5.8868,4.1503,5.6987,4.1084,5.5,4.1084S5.1132,4.1503,4.9567,4.1969C4.8546,3.4145,4.3845,3,3.5,3H2&#xA;&#x9;C1.1851,3,0.7202,3.35,0.5694,4.014C0.5457,4.0106,0.5246,4,0.5,4C0.2239,4,0,4.2238,0,4.5C0,4.7761,0.2239,5,0.5,5&#xA;&#x9;c0,1.5,1,2,2.25,2S5,6.5,5,5V4.9735c0.1148-0.0472,0.3174-0.1151,0.5-0.1151S5.8852,4.9263,6,4.9735V5c0,1.5,1,2,2.25,2&#xA;&#x9;s2.25-0.5,2.25-2C10.7761,5,11,4.7761,11,4.5C11,4.2238,10.7761,4,10.5,4z M4.25,5c0,0.6492-0.1817,1.25-1.5,1.25&#xA;&#x9;S1.25,5.6492,1.25,5V4.5c0-0.5888,0.1612-0.75,0.75-0.75h1.5c0.5888,0,0.75,0.1612,0.75,0.75V5z M9.75,5&#xA;&#x9;c0,0.6492-0.1817,1.25-1.5,1.25S6.75,5.6492,6.75,5V4.5c0-0.5888,0.1612-0.75,0.75-0.75H9c0.5888,0,0.75,0.1612,0.75,0.75V5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"optician-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M14.5,6h-0.6766c-0.2828-0.5892-0.8801-1-1.5763-1H9.752C8.9344,5,8.2513,5.5656,8.059,6.3246&#xA;&#x9;C7.8854,6.2835,7.6991,6.25,7.5,6.25S7.1146,6.2834,6.941,6.3245C6.7487,5.5656,6.0654,5,5.2476,5H2.7529&#xA;&#x9;C2.0566,5,1.4592,5.4108,1.1765,6H0.4992C0.2235,6,0,6.2234,0,6.4991v0.0016C0,6.7765,0.2235,7,0.4992,7H1v0.5&#xA;&#x9;C1,9.0889,2.0024,10,3.75,10h0.5C5.9976,10,7,9.0889,7,7.5V7.3413C7.1503,7.2933,7.3307,7.25,7.5,7.25&#xA;&#x9;c0.1693,0,0.3499,0.0433,0.5,0.0913V7.5C8,9.0889,9.002,10,10.75,10h0.5C12.998,10,14,9.0889,14,7.5V7h0.5&#xA;&#x9;C14.7761,7,15,6.7761,15,6.5C15,6.2238,14.7761,6,14.5,6z M6,7.5C6,8.1982,5.8013,9,4.25,9h-0.5C2.1987,9,2,8.1982,2,7.5V6.7524&#xA;&#x9;C2,6.3374,2.3379,6,2.7529,6h2.4946C5.6626,6,6,6.3374,6,6.7524V7.5z M13,7.5C13,8.1982,12.8008,9,11.25,9h-0.5&#xA;&#x9;C9.1992,9,9,8.1982,9,7.5V6.7524C9,6.3374,9.3369,6,9.752,6h2.4951C12.6621,6,13,6.3379,13,6.7529V7.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"paint-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10,2H9V1.3631C9,1.1625,8.8374,1,8.6369,1H1.3631C1.1626,1,1,1.1625,1,1.3631v2.2737C1,3.8374,1.1626,4,1.3631,4h7.2738&#xA;&#x9;C8.8374,4,9,3.8374,9,3.6368V3h0.5v2.0176L4.8965,5.9917C4.665,6.0405,4.5,6.2446,4.5,6.481v1.0959H4.459&#xA;&#x9;C4.2055,7.5769,4,7.7824,4,8.0359v2.0051C4,10.2945,4.2055,10.5,4.459,10.5h1.082C5.7945,10.5,6,10.2945,6,10.041V8.0359&#xA;&#x9;c0-0.2535-0.2055-0.459-0.459-0.459H5.5V6.8862l4.6035-0.9741C10.335,5.8633,10.5,5.6592,10.5,5.4229V2.5&#xA;&#x9;C10.5,2.2236,10.2764,2,10,2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"paint-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.5,2.5h-1V1.5027C12.5,1.225,12.2749,1,11.9973,1H1.5027C1.2251,1,1,1.225,1,1.5027v2.9946C1,4.7749,1.2251,5,1.5027,5&#xA;&#x9;h10.4946C12.2749,5,12.5,4.7749,12.5,4.4973V3.5H13v3.1021L6.8877,8.0127C6.6606,8.0654,6.5,8.2676,6.5,8.5v1.5074&#xA;&#x9;c-0.2783,0.02-0.5,0.246-0.5,0.5295v2.9261C6,13.7596,6.2404,14,6.5369,14h0.9261C7.7596,14,8,13.7596,8,13.4631v-2.9261&#xA;&#x9;c0-0.2834-0.2217-0.5095-0.5-0.5295v-1.11l6.1123-1.4102C13.8389,7.4351,14,7.2329,14,7V3C14,2.7236,13.7764,2.5,13.5,2.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"park-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M11,3.75C11,2.7835,10.2165,2,9.25,2c-0.2789,0.0012-0.5534,0.0698-0.8,0.2C8.4284,1.5308,7.8795,0.9997,7.21,1&#xA;&#x9;C7.1386,1.0103,7.0683,1.027,7,1.05C6.9091,0.4341,6.3724-0.0168,5.75,0C5.2633,0.0026,4.8224,0.2874,4.62,0.73&#xA;&#x9;C4.4366,0.6044,4.222,0.5317,4,0.52C3.5966,0.5282,3.223,0.7338,3,1.07C2.8417,1.0195,2.6761,0.9959,2.51,1&#xA;&#x9;C1.6761,0.9991,0.9992,1.6743,0.9983,2.5083C0.9981,2.7043,1.036,2.8985,1.11,3.08C0.302,3.2358-0.2268,4.0171-0.071,4.8251&#xA;&#x9;C0.0422,5.4122,0.4954,5.8748,1.08,6c0.2492,0.7843,1.087,1.218,1.8713,0.9688C3.2148,6.8851,3.4498,6.7297,3.63,6.52h0.12&#xA;&#x9;c0.3212-0.0009,0.6295-0.1264,0.86-0.35V10L3,11h5l-1.6-1V9c0.6623-0.8086,1.4694-1.4868,2.38-2&#xA;&#x9;c0.2593-0.0493,0.5009-0.1667,0.7-0.34l0,0l0,0C9.8179,6.3704,10.0086,5.9449,10,5.5c0.0033-0.0566,0.0033-0.1134,0-0.17&#xA;&#x9;C10.6103,5.0405,10.9996,4.4255,11,3.75z M6.36,8.25V6h0.18c0.1812-0.0015,0.3607-0.0353,0.53-0.1&#xA;&#x9;c0.1232,0.4546,0.4528,0.8249,0.89,1C7.375,7.2849,6.8378,7.7381,6.36,8.25z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"park-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M14,5.75c0.0113-0.6863-0.3798-1.3159-1-1.61C12.9475,3.4906,12.4014,2.9926,11.75,3&#xA;&#x9;c-0.0988,0.0079-0.1962,0.0281-0.29,0.06c-0.0607-0.66-0.6449-1.1458-1.3048-1.0851C9.8965,1.9987,9.6526,2.1058,9.46,2.28l0,0&#xA;&#x9;c0-0.6904-0.5596-1.25-1.25-1.25S6.96,1.5896,6.96,2.28C6.96,2.28,7,2.3,7,2.33C6.4886,1.8913,5.7184,1.9503,5.2797,2.4618&#xA;&#x9;C5.1316,2.6345,5.0347,2.8451,5,3.07C4.8417,3.0195,4.6761,2.9959,4.51,3C3.6816,2.9931,3.0044,3.659,2.9975,4.4874&#xA;&#x9;C2.9958,4.6872,3.0341,4.8852,3.11,5.07C2.3175,5.2915,1.8546,6.1136,2.0761,6.9061C2.2163,7.4078,2.6083,7.7998,3.11,7.94&#xA;&#x9;c0.2533,0.7829,1.0934,1.2123,1.8763,0.959C5.5216,8.7258,5.9137,8.2659,6,7.71C6.183,7.8691,6.4093,7.9701,6.65,8v5L5,14h5l-1.6-1&#xA;&#x9;v-2c0.7381-0.8915,1.6915-1.5799,2.77-2c0.8012,0.1879,1.603-0.3092,1.7909-1.1103C12.9893,7.7686,13.0025,7.6444,13,7.52&#xA;&#x9;c0.0029-0.0533,0.0029-0.1067,0-0.16C13.6202,7.0659,14.0113,6.4363,14,5.75z M8.4,10.26V6.82C8.6703,7.3007,9.1785,7.5987,9.73,7.6&#xA;&#x9;h0.28c0.0156,0.4391,0.2242,0.849,0.57,1.12C9.7643,9.094,9.0251,9.6162,8.4,10.26z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"park-alt1-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.571,8.563,7.425,6.424a.255.255,0,0,1-.069-.174A.25.25,0,0,1,7.6,6h.8a.25.25,0,0,0,.25-.25.246.246,0,0,0-.068-.165l-.008-.008L6.4,3.4a.27.27,0,0,1-.051-.149A.25.25,0,0,1,6.6,3H7.48a.257.257,0,0,0,.25-.258A.234.234,0,0,0,7.68,2.6L5.694.224A.223.223,0,0,0,5.343.186h0C5.327.2,3.352,2.578,3.352,2.578a.246.246,0,0,0-.068.164A.257.257,0,0,0,3.534,3H4.4a.25.25,0,0,1,.25.25.262.262,0,0,1-.066.17L2.431,5.571a.247.247,0,0,0-.077.178A.251.251,0,0,0,2.6,6h.789a.249.249,0,0,1,.25.249.3.3,0,0,1-.063.17L1.43,8.563A.253.253,0,0,0,1.6,9H5v1H6V9H9.4a.255.255,0,0,0,.249-.255A.248.248,0,0,0,9.571,8.563Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"park-alt1-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M9.428,10.429a.269.269,0,0,1-.074-.18A.25.25,0,0,1,9.6,10h1.447a.25.25,0,0,0,.25-.25.258.258,0,0,0-.079-.179L9.07,7.419a.3.3,0,0,1-.063-.17A.249.249,0,0,1,9.257,7H10.4a.251.251,0,0,0,.25-.251.247.247,0,0,0-.077-.178L8.432,4.434,8.418,4.42a.262.262,0,0,1-.066-.17A.25.25,0,0,1,8.6,4h.866a.25.25,0,0,0,.25-.25.246.246,0,0,0-.068-.164h.006L7.7,1.238a.253.253,0,0,0-.042-.044A.249.249,0,0,0,7.5,1.139h0a.249.249,0,0,0-.158.055.253.253,0,0,0-.042.044L5.352,3.586a.246.246,0,0,0-.068.164.25.25,0,0,0,.25.25H6.4a.241.241,0,0,1,.184.42l-.014.014L4.431,6.571a.247.247,0,0,0-.077.178A.251.251,0,0,0,4.6,7H5.745a.249.249,0,0,1,.25.249.3.3,0,0,1-.063.17L3.782,9.571A.258.258,0,0,0,3.7,9.75a.25.25,0,0,0,.25.25H5.4a.25.25,0,0,1,.248.249.269.269,0,0,1-.074.18l-2.14,2.132-.009.009a.248.248,0,0,0,0,.351A.256.256,0,0,0,3.605,13H7v1l1-.008V13h3.391a.263.263,0,0,0,.26-.254.248.248,0,0,0-.071-.177Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"parking-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M8.1,6.1C7.4363,6.5788,6.6268,6.8121,5.81,6.76H3.9V10H2V1h3.93c0.7801-0.0414,1.5484,0.2041,2.16,0.69&#xA;&#x9;C8.6707,2.2518,8.9681,3.0449,8.9,3.85C8.9884,4.6825,8.6941,5.5101,8.1,6.1z M6.64,2.86c-0.289-0.2119-0.6421-0.3178-1-0.3H3.9&#xA;&#x9;v2.65h1.72c0.3612,0.0191,0.717-0.0947,1-0.32c0.2559-0.2675,0.3867-0.6308,0.36-1C7.0323,3.5125,6.9068,3.1321,6.64,2.86z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"parking-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M11.85,8.37c-0.9532,0.7086-2.1239,1.0623-3.31,1H5.79V14H3V1h5.72c1.1305-0.0605,2.244,0.2952,3.13,1&#xA;&#x9;c0.8321,0.8147,1.2543,1.9601,1.15,3.12C13.1271,6.3214,12.7045,7.5159,11.85,8.37z M9.75,3.7C9.3254,3.3892,8.8052,3.237,8.28,3.27&#xA;&#x9;H5.79v3.82h2.49c0.5315,0.0326,1.056-0.1351,1.47-0.47c0.3795-0.3947,0.5693-0.9346,0.52-1.48C10.324,4.606,10.1327,4.0763,9.75,3.7&#xA;&#x9;z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"parking-garage-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M7.25,7.44C6.8067,7.7602,6.2657,7.9158,5.72,7.88H4.45V10H3.19V4H5.8c0.5201-0.0279,1.0324,0.1358,1.44,0.46&#xA;&#x9;c0.3847,0.372,0.5828,0.8966,0.54,1.43C7.8557,6.4611,7.6596,7.0348,7.25,7.44z M6.25,5.28c-0.1946-0.1475-0.4365-0.2186-0.68-0.2&#xA;&#x9;H4.45v1.76H5.6c0.246,0.0129,0.4882-0.0654,0.68-0.22c0.1746-0.1813,0.2621-0.4293,0.24-0.68c0.023-0.2449-0.0651-0.4871-0.24-0.66&#xA;&#x9;L6.25,5.28z M10.41,3.28c0.1349-0.2403,0.0499-0.5444-0.19-0.68l-4.5-2.5c-0.1521-0.0855-0.3379-0.0855-0.49,0l-4.5,2.5&#xA;&#x9;C0.4972,2.7485,0.4288,3.0576,0.5773,3.2904C0.7144,3.5054,0.9913,3.5828,1.22,3.47l4.28-2.4l4.26,2.37&#xA;&#x9;c0.2421,0.1328,0.546,0.0442,0.6789-0.1979C10.4392,3.2414,10.4396,3.2407,10.44,3.24L10.41,3.28z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"parking-garage-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M10.5,10.14c-0.6637,0.4788-1.4732,0.7121-2.29,0.66h-1.9V14h-1.9V5h3.92&#xA;&#x9;c0.7801-0.0414,1.5484,0.2041,2.16,0.69c0.5779,0.5595,0.875,1.3483,0.81,2.15C11.4042,8.6892,11.1088,9.5388,10.5,10.14z M9,6.9&#xA;&#x9;C8.711,6.6881,8.3579,6.5822,8,6.6H6.31v2.65H8c0.3612,0.0191,0.717-0.0947,1-0.32c0.2559-0.2675,0.3867-0.6308,0.36-1&#xA;&#x9;C9.4072,7.5493,9.274,7.1684,9,6.9z M14.41,4.21c0.114-0.2486,0.007-0.5427-0.24-0.66L7.5,0.45l-6.71,3.1&#xA;&#x9;C0.5387,3.666,0.429,3.9637,0.545,4.215C0.661,4.4663,0.9587,4.576,1.21,4.46l0,0L7.5,1.55l6.29,2.9&#xA;&#x9;c0.2486,0.114,0.5427,0.007,0.66-0.24H14.41z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"pharmacy-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M6,4l2-2C7.9899,1.9304,7.9899,1.8596,8,1.79c0-0.4142,0.3358-0.75,0.75-0.75S9.5,1.3758,9.5,1.79S9.1642,2.54,8.75,2.54&#xA;&#x9;H8.64L7.5,4H6z M9.48,5.83L8.65,7.5l0.83,1.67V10h-8V9.17L2.32,7.5L1.48,5.83V5h8V5.83z M7.5,7H6V5.5H5V7H3.5v1H5v1.5h1V8h1.5V7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"pharmacy-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M9.5,4l1.07-1.54c0.0599,0.0046,0.1201,0.0046,0.18,0c0.6904-0.0004,1.2497-0.5603,1.2494-1.2506&#xA;&#x9;C11.999,0.519,11.4391-0.0404,10.7487-0.04C10.0584-0.0396,9.499,0.5203,9.4994,1.2106c0,0.0131,0.0002,0.0262,0.0006,0.0394&#xA;&#x9;c0,0,0,0.07,0,0.1L7,4H9.5z M12,6V5H3v1l1.5,3.5L3,13v1h9v-1l-1-3.5L12,6z M10,10H8v2H7v-2H5V9h2V7h1v2h2V10z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"picnic-site-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect4760\\" d=\\"M2.75,2C2.3345,2,2,2.3345,2,2.75S2.3345,3.5,2.75,3.5H4L3.5391,5H1.75C1.3345,5,1,5.3345,1,5.75&#xA;&#x9;S1.3345,6.5,1.75,6.5h1.3262L2,10h1l1.0762-3.5h2.8477L8,10h1L7.9238,6.5H9.25C9.6655,6.5,10,6.1655,10,5.75S9.6655,5,9.25,5H7.4609&#xA;&#x9;L7,3.5h1.25C8.6655,3.5,9,3.1655,9,2.75S8.6655,2,8.25,2H2.75z M5,3.5h1L6.4609,5H4.5391L5,3.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"picnic-site-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect4760\\" d=\\"M4,3C3.446,3,3,3.446,3,4s0.446,1,1,1h1.2969&#xA;&#x9;L4.6523,7H2.5c-0.554,0-1,0.446-1,1s0.446,1,1,1h1.5098L3.041,12.0098c-0.1284,0.3939,0.0868,0.8173,0.4807,0.9457&#xA;&#x9;s0.8173-0.0868,0.9457-0.4807c0.0005-0.0013,0.0009-0.0027,0.0013-0.004L5.5859,9h3.8281l1.1172,3.4707&#xA;&#x9;c0.1273,0.3943,0.5501,0.6107,0.9443,0.4834s0.6107-0.5501,0.4834-0.9443l0,0L10.9902,9H12.5c0.554,0,1-0.446,1-1s-0.446-1-1-1&#xA;&#x9;h-2.1523L9.7031,5H11c0.554,0,1-0.446,1-1s-0.446-1-1-1H4z M6.873,5H8.127l0.6445,2h-2.543L6.873,5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"pitch-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M4,2C3.4477,2,3,1.5523,3,1s0.4477-1,1-1s1,0.4477,1,1S4.5523,2,4,2z M10.5,8H9L8,5L7,3.25L8,3l2.3,1l0,0&#xA;&#x9;c0.2761,0.0994,0.5806-0.0439,0.68-0.32c0.0994-0.2761-0.0439-0.5806-0.32-0.68l0,0L8,2H6L4,3L3,4H1.47&#xA;&#x9;c-0.2761,0-0.5,0.2239-0.5,0.5S1.1939,5,1.47,5H4l1-1l1,2L4,7v3.5C4,10.7761,4.2239,11,4.5,11S5,10.7761,5,10.5V7.39L7,7l1,2h2.5&#xA;&#x9;C10.7761,9,11,8.7761,11,8.5S10.7761,8,10.5,8z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"pitch-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M5,3C4.4477,3,4,2.5523,4,2s0.4477-1,1-1s1,0.4477,1,1S5.5523,3,5,3z M12.5,10H10L9,7L8,5.25L9,5l2.3,1l0,0&#xA;&#x9;c0.2761,0.1105,0.5895-0.0239,0.7-0.3S11.9761,5.1105,11.7,5l0,0L9,4H7L5,5L4,6H2.5C2.2239,6,2,6.2239,2,6.5S2.2239,7,2.5,7H5l1-1&#xA;&#x9;l1,2l-2,2v3.5C5,13.7761,5.2239,14,5.5,14S6,13.7761,6,13.5v-3.11L8,9l1,2h3.5c0.2761,0,0.5-0.2239,0.5-0.5S12.7761,10,12.5,10z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"place-of-worship-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M5.52,0L4,2v1h3V2L5.52,0z M4,4L2,5v5h7V5L7,4H4z M11,5.5V10h-1V5.5C10,5.2239,10.2239,5,10.5,5S11,5.2239,11,5.5z M1,5.5&#xA;&#x9;V10H0V5.5C0,5.2239,0.2239,5,0.5,5S1,5.2239,1,5.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"place-of-worship-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path9064\\" d=\\"M7.5,0l-2,2v2h4V2&#xA;&#x9;L7.5,0z M5.5,4.5L4,6h7L9.5,4.5H5.5z M2,6.5c-0.5523,0-1,0.4477-1,1V13h2V7.5C3,6.9477,2.5523,6.5,2,6.5z M4,6.5V13h7V6.5H4z&#xA;&#x9; M13,6.5c-0.5523,0-1,0.4477-1,1V13h2V7.5C14,6.9477,13.5523,6.5,13,6.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"playground-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M1,0.79c0.1286-0.5371,0.6683-0.8683,1.2054-0.7397S3.0736,0.7186,2.945,1.2557C2.8183,1.7849,2.2917,2.1156,1.76,2&#xA;&#x9;C1.2203,1.8826,0.878,1.35,0.9954,0.8103C0.9968,0.8035,0.9984,0.7968,1,0.79z M10.85,8.16L10.85,8.16l-2-2l0,0&#xA;&#x9;C8.76,6.0612,8.6336,6.0034,8.5,6H8.37l0,0L6.5,6.55V4l0,0C6.746,4.0083,6.96,3.8328,7,3.59C7.0558,3.3225,6.8866,3.0598,6.62,3H6.5&#xA;&#x9;V0H6.28v3L1.82,3.55l0,0C1.4201,3.6111,1.0965,3.9072,1,4.3C0.9688,4.4416,0.9688,4.5884,1,4.73l0,0l0.81,3.13l0,0&#xA;&#x9;c0.1012,0.3354,0.3706,0.5933,0.71,0.68c0.1513,0.0357,0.3087,0.0357,0.46,0H3l3.29-0.89v1.62l-3,0.74l0,0&#xA;&#x9;c-0.2761,0.0856-0.4306,0.3789-0.345,0.655c0.0856,0.2761,0.3789,0.4306,0.655,0.345c0.0566,0.0051,0.1134,0.0051,0.17,0l4-1&#xA;&#x9;c0.2761-0.0828,0.4328-0.3739,0.35-0.65C8.0372,9.0839,7.7461,8.9272,7.47,9.01L7.27,9L6.5,9.22V7.58l1.83-0.51l1.81,1.78l0,0&#xA;&#x9;c0.1758,0.213,0.4909,0.2432,0.7039,0.0674c0.213-0.1758,0.2432-0.4909,0.0674-0.7039C10.8956,8.1945,10.8784,8.1766,10.86,8.16&#xA;&#x9;H10.85z M6.28,6.61L4.21,7.07L3.5,4.33L6.28,4V6.61z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"playground-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M2,1.15c0.2091-0.8016,1.0284-1.2819,1.83-1.0729s1.2819,1.0284,1.0729,1.83C4.7026,2.6752,3.9386,3.1542,3.16,3&#xA;&#x9;C2.3474,2.839,1.8191,2.0498,1.98,1.2371C1.9858,1.2079,1.9925,1.1788,2,1.15z M13,12.32c0.1032,0.5426-0.2531,1.066-0.7956,1.1692&#xA;&#x9;c-0.0015,0.0003-0.0029,0.0006-0.0044,0.0008c-0.4252,0.086-0.8574-0.1119-1.07-0.49l0,0L9.45,9.63L8,9.92L7.78,10H7.72v2.15&#xA;&#x9;L8.34,12h0.14c0.2871,0.0054,0.5155,0.2425,0.5101,0.5297C8.9862,12.7361,8.8606,12.9207,8.67,13l-5,1l0,0&#xA;&#x9;c-0.0563,0.0095-0.1137,0.0095-0.17,0c-0.2872,0-0.52-0.2328-0.52-0.52c0-0.2099,0.1262-0.3993,0.32-0.48l0,0l4.15-0.83V10&#xA;&#x9;l-3.22,0.58l0,0c-0.164,0.0423-0.336,0.0423-0.5,0c-0.3394-0.0867-0.6088-0.3446-0.71-0.68H3L2,5.83l0,0&#xA;&#x9;C1.9688,5.6884,1.9688,5.5416,2,5.4c0.0936-0.387,0.4078-0.6815,0.8-0.75l0,0l4.7-0.52V0h0.22v4.1h0.06L8,4.08L8.4,4h0.21&#xA;&#x9;c0.2673,0.0643,0.4326,0.3323,0.37,0.6C8.9361,4.835,8.729,5.0041,8.49,5L8,5.08H7.78H7.72v2.86h0.06L8,7.88l1.81-0.36l0,0l0,0&#xA;&#x9;c0.4275-0.0352,0.8299,0.2062,1,0.6l0,0l2,3.94l0,0C12.887,12.1358,12.9511,12.2236,13,12.32z M7.5,5.13L5,5.4l0.74,2.94L7.5,8V5.13&#xA;&#x9;z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"police-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"circle4929\\" d=\\"M4.5,0.5l0.5,1h3&#xA;&#x9;l0.5-1H4.5z M5,2v1c0,0.8284,0.6716,1.5,1.5,1.5S8,3.8284,8,3V2H5z M1.75,3C1,3,1,3.75,1,3.75v3&#xA;&#x9;c0.0006,0.506,0.4918,0.8663,0.9746,0.7148L4,6.8262V10l4-5H5c0,0-0.1945,0-0.4238,0.0723L2.5,5.7266V3.75C2.5,3.75,2.5,3,1.75,3z&#xA;&#x9; M8.7715,5.3887L5,10h4V6C9,5.7648,8.9064,5.5591,8.7715,5.3887z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"police-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect4718\\" d=\\"M5.5,1L6,2h5l0.5-1H5.5z M6,2.5v1.25c0,0,0,2.75,2.5,2.75S11,3.75,11,3.75V2.5H6z M1.9844,3.9863&#xA;&#x9;C1.4329,3.9949,0.9924,4.4485,1,5v4c-0.0001,0.6398,0.5922,1.1152,1.2168,0.9766L5,9.3574V14l5.8789-6.9297&#xA;&#x9;C10.7391,7.0294,10.5947,7,10.4414,7H6.5L3,7.7539V5C3.0077,4.4362,2.5481,3.9775,1.9844,3.9863z M11.748,7.7109L6.4121,14H12&#xA;&#x9;V8.5586C12,8.2451,11.9061,7.9548,11.748,7.7109z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"post-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M10,5.5V9c0,0.5523-0.4477,1-1,1H2c-0.5523,0-1-0.4477-1-1V5.5C1,5.2239,1.2239,5,1.5,5c0.0692-0.0152,0.1408-0.0152,0.21,0&#xA;&#x9;l0,0L5.5,7l3.8-2l0,0c0.066-0.0138,0.134-0.0138,0.2,0C9.7761,5,10,5.2239,10,5.5z M1.25,2.92L1.25,2.92L1.33,3L5.5,5l4.19-2l0,0&#xA;&#x9;h0.06l0,0C9.9296,2.9019,10.0292,2.7025,10,2.5C10,2.2239,9.7761,2,9.5,2h-8C1.2239,2,1,2.2239,1,2.5&#xA;&#x9;C1.0026,2.6745,1.0978,2.8345,1.25,2.92z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"post-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M14,6.5V12c0,0.5523-0.4477,1-1,1H2c-0.5523,0-1-0.4477-1-1V6.5C1,6.2239,1.2239,6,1.5,6&#xA;&#x9;c0.0692-0.0152,0.1408-0.0152,0.21,0l0,0l5.79,4l5.8-4l0,0c0.066-0.0138,0.134-0.0138,0.2,0C13.7761,6,14,6.2239,14,6.5z M1.25,3.92&#xA;&#x9;L1.25,3.92L1.33,4L7.5,8l6.19-4l0,0h0.06l0,0c0.1796-0.0981,0.2792-0.2975,0.25-0.5C14,3.2239,13.7761,3,13.5,3h-12&#xA;&#x9;C1.2239,3,1,3.2239,1,3.5C1.0026,3.6745,1.0978,3.8345,1.25,3.92z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"prison-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect3607\\" d=\\"M2,1v9h7V1H2z M3,2h1v3H3V2z M5,2h1v3H5V2z M7,2h1v2H7V2z M7.5,5C7.7761,5,8,5.2239,8,5.5S7.7761,6,7.5,6&#xA;&#x9;S7,5.7761,7,5.5S7.2239,5,7.5,5z M3,6h1v3H3V6z M5,6h1v3H5V6z M7,7h1v2H7V7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"prison-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect3607\\" d=\\"M3.5,1v13H12V1H3.5z M9.5,2H11v3.5H9.5V2z M4.5,2.0547H6V7H4.5V2.0547z M7,2.0547h1.5V7H7V2.0547z M10.25,6.5&#xA;&#x9;C10.6642,6.5,11,6.8358,11,7.25S10.6642,8,10.25,8l0,0C9.8358,8,9.5,7.6642,9.5,7.25l0,0C9.5,6.8358,9.8358,6.5,10.25,6.5z M7,8&#xA;&#x9;h1.4727L8.5,13H7.0273L7,8z M4.5,8.166H6V13H4.5V8.166z M9.5,9H11v4H9.5V9z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"rail-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9,10.5C9,10.7761,8.7761,11,8.5,11c-0.1824-0.0029-0.3481-0.107-0.43-0.27l0,0L7.69,10H3.31l-0.37,0.74l0,0&#xA;&#x9;C2.8537,10.9023,2.6838,11.0027,2.5,11C2.2239,11,2,10.7761,2,10.5c0.0022-0.0847,0.0263-0.1674,0.07-0.24l0,0l1-2l0,0&#xA;&#x9;C3.1546,8.1008,3.3198,8.001,3.5,8c0.2751-0.0235,0.5172,0.1805,0.5407,0.4556C4.0479,8.5392,4.0339,8.6233,4,8.7L3.81,9h3.38L7,8.7&#xA;&#x9;C6.8991,8.443,7.0256,8.1528,7.2826,8.0518C7.514,7.9609,7.7771,8.0539,7.9,8.27l0,0l1,2l0,0C8.9527,10.3367,8.9872,10.416,9,10.5z&#xA;&#x9; M8,0H3C2.4477,0,2,0.4477,2,1v5c0,0.5523,0.4477,1,1,1h5c0.5523,0,1-0.4477,1-1V1C9,0.4477,8.5523,0,8,0z M3.5,6&#xA;&#x9;C3.2239,6,3,5.7761,3,5.5S3.2239,5,3.5,5S4,5.2239,4,5.5S3.7761,6,3.5,6z M3.5,4C3.2239,4,3,3.7761,3,3.5v-2&#xA;&#x9;C3,1.2239,3.2239,1,3.5,1h1.79v3H3.5z M7.5,6C7.2239,6,7,5.7761,7,5.5S7.2239,5,7.5,5S8,5.2239,8,5.5S7.7761,6,7.5,6z M8,3.5&#xA;&#x9;C8,3.7761,7.7761,4,7.5,4H5.69V1H7.5C7.7761,1,8,1.2239,8,1.5V3.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" version=\\"1.1\\" id=\\"rail-15\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M 3 1 C 2.4477 1 2 1.4477 2 2 L 2 10 C 2 10.5523 2.4477 11 3 11 L 12 11 C 12.5523 11 13 10.5523 13 10 L 13 2 C 13 1.4477 12.5523 1 12 1 L 3 1 z M 5.75 1.5 L 5.7597656 1.5 L 9.2597656 1.5 C 9.3978656 1.5 9.5097656 1.6119 9.5097656 1.75 C 9.5097656 1.8881 9.3978656 2 9.2597656 2 L 5.75 2 C 5.6119 2 5.5 1.8881 5.5 1.75 C 5.5 1.6119 5.6119 1.5 5.75 1.5 z M 3.5 3 L 7 3 L 7 7 L 3.5 7 C 3.2239 7 3 6.7761 3 6.5 L 3 3.5 C 3 3.2239 3.2239 3 3.5 3 z M 8 3 L 11.5 3 C 11.7761 3 12 3.2239 12 3.5 L 12 6.5 C 12 6.7761 11.7761 7 11.5 7 L 8 7 L 8 3 z M 5 8 C 5.5523 8 6 8.4477 6 9 C 6 9.5523 5.5523 10 5 10 C 4.4477 10 4 9.5523 4 9 C 4 8.4477 4.4477 8 5 8 z M 10 8 C 10.5523 8 11 8.4477 11 9 C 11 9.5523 10.5523 10 10 10 C 9.4477 10 9 9.5523 9 9 C 9 8.4477 9.4477 8 10 8 z M 10.445312 11.994141 C 10.380597 11.999652 10.314981 12.018581 10.253906 12.050781 C 10.030606 12.168381 9.9302313 12.433922 10.019531 12.669922 L 10.189453 13 L 4.8105469 13 L 4.9394531 12.730469 C 5.0371531 12.472169 4.9067375 12.183637 4.6484375 12.085938 C 4.4124375 11.996738 4.1468969 12.097113 4.0292969 12.320312 L 3.0292969 14.320312 C 3.0080969 14.377912 2.9986 14.4387 3 14.5 C 3 14.7761 3.2239 15 3.5 15 C 3.6802 14.999 3.8450875 14.899434 3.9296875 14.740234 L 3.9296875 14.689453 L 4 14.689453 L 4.3105469 14 L 10.689453 14 L 11 14.689453 L 11 14.740234 C 11.0846 14.899434 11.249488 14.999 11.429688 15 C 11.705787 15 11.929688 14.7761 11.929688 14.5 C 11.949587 14.4212 11.949587 14.338566 11.929688 14.259766 L 10.929688 12.259766 C 10.833163 12.076541 10.639459 11.977608 10.445312 11.994141 z \\" id=\\"path3\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"rail-light-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path14245\\" d=\\"M4,0&#xA;&#x9;C3.5,0,3.5,0.5,3.5,0.5S3.5,1,4,1h1v0.9707L4,2c0,0-1,0-1,1v3c0,2,2,2,2,2h1c0,0,2,0,2-2V3c0-1-1-1-1-1H6V1h1c0.5,0,0.5-0.5,0.5-0.5&#xA;&#x9;S7.5,0,7,0H4z M5.5,3L7,3.5V5H5.5H4V3.5L5.5,3z M5.5,6C5.777,6,6,6.223,6,6.5S5.777,7,5.5,7S5,6.777,5,6.5S5.223,6,5.5,6z&#xA;&#x9; M2.834,8.5L2,11h1.5l0.334-1h3.332L7.5,11H9L8.166,8.5H6.668L6.834,9H4.166l0.166-0.5H2.834z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"rail-light-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path14245\\" d=\\"M5.5,0C5,0,5,0.5,5,0.5v1C5,1.777,5.223,2,5.5,2S6,1.777,6,1.5V1h1v2H6c0,0-2,0-2,2v3c0,3,3,3,3,3h1&#xA;&#x9;c0,0,3,0,3-3V5c0-2-2-2-2-2H8V1h1v0.5C9,1.777,9.223,2,9.5,2S10,1.777,10,1.5v-1C10,0,9.5,0,9.5,0H5.5z M7.5,4l2.0449,0.7734L10,6.5&#xA;&#x9;C10.1316,7,9.5,7,9.5,7h-4c0,0-0.6316,0-0.5-0.5l0.4551-1.7266L7.5,4z M7.5,8C7.7761,8,8,8.2239,8,8.5S7.7761,9,7.5,9&#xA;&#x9;S7,8.7761,7,8.5S7.2239,8,7.5,8z M4.125,12L3,15h1.5l0.375-1h5.25l0.375,1H12l-1.125-3h-1.5l0.375,1h-4.5l0.375-1H4.125z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"rail-metro-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path14200\\" d=\\"M3.5,0C3,0,3,0.5,3,0.5L2,5v1c0,1.0244,1,1,1,1h5c0,0,1,0,1-1V5L8,0.5C8,0.5,8,0,7.5,0H3.5z M4,1h3l0.5,3h-4&#xA;&#x9;L4,1z M3.5,5C3.7761,5,4,5.2239,4,5.5S3.7761,6,3.5,6S3,5.7761,3,5.5S3.2239,5,3.5,5z M5.25,5h0.5C5.8885,5,6,5.1115,6,5.25&#xA;&#x9;S5.8885,5.5,5.75,5.5h-0.5C5.1115,5.5,5,5.3885,5,5.25S5.1115,5,5.25,5z M7.5,5C7.7761,5,8,5.2239,8,5.5S7.7761,6,7.5,6&#xA;&#x9;S7,5.7761,7,5.5S7.2239,5,7.5,5z M3,8l-1,3h1.5l0.334-1h3.332L7.5,11H9L8,8H6.5l0.334,1H4.166L4.5,8H3z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"rail-metro-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path5258\\" d=\\"M5.5,0c0,0-0.75,0-1,1L3,6.5V10c0,1,1,1,1,1h7c0,0,1,0,1-1V6.5L10.5,1c-0.2727-1-1-1-1-1H5.5z M6.5,1.5h2&#xA;&#x9;c0,0,0.5357,0,0.75,1L10,6c0.2146,1.0017-1,1-1,1H6c0,0-1.2146,0.0017-1-1l0.75-3.5C5.9643,1.5,6.5,1.5,6.5,1.5z M5,8&#xA;&#x9;c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1S4,9.5523,4,9S4.4477,8,5,8z M6.75,8h1.5C8.3885,8,8.5,8.1115,8.5,8.25S8.3885,8.5,8.25,8.5&#xA;&#x9;h-1.5C6.6115,8.5,6.5,8.3885,6.5,8.25S6.6115,8,6.75,8z M10,8c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1S9,9.5523,9,9S9.4477,8,10,8z&#xA;&#x9; M4.125,12L3,15h1.5l0.375-1h5.25l0.375,1H12l-1.125-3h-1.5l0.375,1h-4.5l0.375-1H4.125z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"ranger-station-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect4911\\" d=\\"M6.334,0L5,1v3L1,6.0547V10h3V7&#xA;&#x9;h3v3h3V6.0547L6,4V2.25L6.334,2l1.332,1L9,2V0L7.666,1L6.334,0z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"ranger-station-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect4911\\" d=\\"M9,0.5l-2,1v3.7734L2,8v6h4v-4h3&#xA;&#x9;v4h4V8L8,5.2734V4l1-0.5l2,1l2-1v-3l-2,1L9,0.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"recycling-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.5,8.5C8.953,9.019,7.84,8.935,7,9v1L4.5,8.5L7,7v1h1c0.634,0,0.83,0,1.054-0.127&#xA;&#x9;c0.3524-0.1763,0.5267-0.5807,0.413-0.958C9.3824,6.5569,9.8667,6.4902,9.952,6.8C10.1235,7.4067,9.9502,8.0586,9.5,8.5z&#xA;&#x9; M1.9482,5.0922C1.9479,5.0928,1.9473,5.0934,1.947,5.094c-0.4,0.743-1.065,1.637-0.921,2.377&#xA;&#x9;c0.1311,0.6165,0.5882,1.1123,1.192,1.293c0.3722,0.1203,0.4663-0.3954,0.161-0.472C2.0002,8.1852,1.753,7.8215,1.793,7.43&#xA;&#x9;c0.012-0.258,0.122-0.42,0.461-0.956c0.134-0.211,0.309-0.485,0.537-0.843c0.0003-0.0004,0.0005-0.0008,0.0008-0.0012L3.635,6.167&#xA;&#x9;l0.078-2.914L1.105,4.555L1.9482,5.0922z M4.884,1.914c0.2504-0.3036,0.6828-0.3834,1.025-0.189C6.14,1.84,6.245,2.006,6.598,2.532&#xA;&#x9;c0.14,0.208,0.32,0.479,0.555,0.832l0.0001,0.0001L6.322,3.919l2.636,1.246L8.817,2.253L7.9843,2.8091&#xA;&#x9;C7.4644,2.1472,6.9173,1.1786,6.188,1.014C5.5701,0.8809,4.9288,1.0965,4.517,1.576C4.2529,1.9137,4.7157,2.1216,4.884,1.914z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"recycling-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M2.4556,8.6134C2.118,9.2112,1.501,10.3021,2.593,11.0312c0.3432,0.2268,0.7275,0.3836,1.131,0.4614&#xA;&#x9;C4.0314,11.5382,4.0466,12.0111,3.6855,12c-0.3849-0.0193-2.2596-0.1934-2.5606-1.5995c-0.1556-0.8213,0.0204-1.5571,0.504-2.3556&#xA;&#x9;L2.3263,6.812L1.0196,6.0688L4.5,4v4L3.1941,7.3057L2.4556,8.6134z M6.7,2.034c1.155-0.628,1.823,0.43,2.191,1.007l0.8059,1.2631&#xA;&#x9;L8.431,5.112L12,6.986L11.803,2.96l-1.2639,0.8066L9.779,2.578C9.2572,1.8321,8.875,1.2812,7.944,1.033&#xA;&#x9;C6.307,0.7203,5.3007,2.6194,5.311,2.607c-0.1639,0.2871,0.2156,0.5399,0.451,0.21C6.0202,2.4969,6.339,2.2309,6.7,2.034z&#xA;&#x9; M13.294,8.221c-0.0877-0.1897-0.5487-0.1413-0.419,0.267c0.1312,0.3892,0.1845,0.8003,0.157,1.21C12.939,11.01,11.684,11,11,11H9.5&#xA;&#x9;V9.5l-3.5,2l3.488,2.025L9.4926,12H11c0.8906,0.0153,1.5999-0.1759,2.2-0.713C14.4,10.226,13.294,8.221,13.294,8.221z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\" id=\\"religious-buddhist-11\\">\\n  <path d=\\"M11.0016,5.8008v-0.5H9.9895C9.93427,4.28235,9.53269,3.31335,8.8513,2.5544l0.8271-0.8271l-0.354-0.3541L8.5012,2.2&#xA;&#x9;c-0.75994-0.68207-1.73031-1.08369-2.75-1.1382V0h-0.5v1.0622c-0.99761,0.05474-1.94816,0.442-2.7,1.1l-0.876-0.886L1.32,1.6282&#xA;&#x9;L2.19,2.5C1.48299,3.26753,1.06626,4.25789,1.0118,5.3H0v0.5h1.0121C1.06715,6.81867,1.46863,7.78795,2.15,8.5472L1.3229,9.3743&#xA;&#x9;l0.3543,0.3541L2.5,8.9013c0.75994,0.68207,1.73031,1.08369,2.75,1.1382v0.9621h0.5v-0.9621&#xA;&#x9;C6.77029,9.98353,7.74071,9.58012,8.5,8.8963l0.82,0.8311l0.3551-0.3521L8.8553,8.5412c0.67858-0.75782,1.07864-1.72428,1.1342-2.74&#xA;&#x9;h1.0121V5.8008z M9.5624,5.3008H6.1009l2.4483-2.4444C9.15109,3.53478,9.50787,4.39554,9.5624,5.3008z M8.1952,2.5L5.7508,4.9467&#xA;&#x9;V1.4892C6.65579,1.54295,7.51655,1.89889,8.1952,2.5z M5.2508,1.4892v3.4L2.85,2.4614C3.5221,1.88298,4.36561,1.5414,5.2508,1.4892z&#xA;&#x9; M2.4914,2.8092l2.46,2.4914H1.4392c0.05523-0.92636,0.42665-1.80572,1.0522-2.4912L2.4914,2.8092z M1.4392,5.8008h3.4615&#xA;&#x9;L2.4524,8.2452C1.85051,7.56682,1.49373,6.70606,1.4392,5.8008z M2.8064,8.6008l2.4444-2.4469v3.4575&#xA;&#x9;C4.34592,9.55774,3.4852,9.20206,2.8064,8.6013V8.6008z M5.7508,9.6108V6.1109l2.45,2.4814&#xA;&#x9;c-0.67905,0.60519-1.54206,0.96416-2.45,1.0191V9.6108z M8.5508,8.2366L6.1479,5.8008h3.4145&#xA;&#x9;C9.5079,6.70256,9.15336,7.56019,8.5552,8.2372h-0.004L8.5508,8.2366z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\" id=\\"religious-buddhist-15\\">\\n  <path d=\\"M13.4978,6.9989h-0.5329c-0.09997-1.10708-0.53528-2.15731-1.2478-3.0105l0.378-0.3784&#xA;&#x9;c0.19605-0.19447,0.19733-0.51105,0.00286-0.7071C11.90698,2.71037,11.59733,2.70518,11.4,2.8912l0,0l-0.0123,0.0123L11.01,3.2815&#xA;&#x9;c-0.85331-0.71298-1.90385-1.14864-3.0113-1.2488V1.5c0-0.27614-0.22386-0.5-0.5-0.5s-0.5,0.22386-0.5,0.5v0.5327&#xA;&#x9;C5.8916,2.13306,4.84144,2.56871,3.9884,3.2815L3.61,2.9C3.41007,2.70952,3.09358,2.71717,2.9031,2.9171&#xA;&#x9;c-0.184,0.19312-0.184,0.49668,0,0.6898l0.3784,0.3775C2.56787,4.83856,2.13216,5.89031,2.0327,6.9989H1.5&#xA;&#x9;c-0.27614,0-0.5,0.22386-0.5,0.5s0.22386,0.5,0.5,0.5h0.5327c0.09987,1.10695,0.535,2.15711,1.2473,3.0103l-0.3779,0.3779&#xA;&#x9;c-0.19538,0.19514-0.19557,0.51173-0.00043,0.70711c0.19053,0.19076,0.49798,0.19611,0.69503,0.01209L3.609,12.094l0.3779-0.3779&#xA;&#x9;c0.8533,0.71312,1.90395,1.1488,3.0115,1.2488v0.5329c0,0.27614,0.22386,0.5,0.5,0.5s0.5-0.22386,0.5-0.5v-0.5329&#xA;&#x9;c1.10719-0.10026,2.15744-0.53592,3.0105-1.2488l0.3779,0.3779c0.19514,0.19538,0.51173,0.19557,0.70711,0.00043&#xA;&#x9;c0.19076-0.19053,0.19611-0.49798,0.01209-0.69503l-0.0123-0.0123l0,0l-0.3779-0.3779c0.71283-0.8531,1.14848-1.90333,1.2488-3.0105&#xA;&#x9;h0.5329c0.27609-0.00544,0.49549-0.23366,0.49006-0.50975C13.98227,7.22064,13.76611,7.00435,13.4978,6.9989z M7.9987,3.0505&#xA;&#x9;c0.83871,0.09248,1.63383,0.42154,2.2926,0.9488l-2.15,2.15c-0.04663-0.0218-0.09436-0.04116-0.143-0.058V3.0505H7.9987z&#xA;&#x9; M6.9987,3.0505V6.091c-0.04864,0.01684-0.09637,0.0362-0.143,0.058l-2.15-2.15c0.65897-0.52726,1.45431-0.85622,2.2932-0.9485&#xA;&#x9;H6.9987z M3.9987,4.7062l2.15,2.15c-0.0218,0.04663-0.04116,0.09436-0.058,0.143H3.0505&#xA;&#x9;c0.09243-0.83886,0.42154-1.63413,0.9489-2.293L3.9987,4.7062z M3.0505,7.9987H6.091c0.01687,0.04863,0.03623,0.09636,0.058,0.143&#xA;&#x9;l-2.15,2.15C3.47173,9.63281,3.14276,8.83753,3.0505,7.9987z M6.9989,11.9471c-0.83871-0.09248-1.63383-0.42154-2.2926-0.9488&#xA;&#x9;l2.15-2.15c0.04663,0.0218,0.09436,0.04116,0.143,0.058v3.0405L6.9989,11.9471z M7.9989,11.9471V8.9066&#xA;&#x9;c0.04864-0.01683,0.09638-0.03619,0.143-0.058l2.15,2.15c-0.65895,0.5273-1.4543,0.85627-2.2932,0.9485H7.9989z M10.9989,10.2914&#xA;&#x9;l-2.15-2.15c0.02177-0.04664,0.04113-0.09437,0.058-0.143h3.0415c-0.09276,0.83901-0.42232,1.6343-0.9502,2.293H10.9989z&#xA;&#x9; M8.9066,6.9989c-0.01684-0.04864-0.0362-0.09637-0.058-0.143l2.15-2.15c0.52726,0.65877,0.85632,1.45389,0.9488,2.2926H8.9066&#xA;&#x9;V6.9989z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"religious-christian-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect3338\\" d=\\"M4.5,0v3H2v2h2.5v6h2V5H9V3H6.5V0H4.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"religious-christian-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect3338\\" d=\\"M6,0.9552V4H3v3h3v8h3V7h3V4H9V1&#xA;&#x9;c0-1-0.9776-1-0.9776-1H6.9887C6.9887,0,6,0,6,0.9552z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"religious-jewish-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M11,8H7.1l-1.6,3L3.9,8H0l1.95-2.5L0,3h3.9l1.6-3l1.6,3H11L9.05,5.5L11,8z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"religious-jewish-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M15,12H9.78L7.5,15l-2.26-3H0l2.7-4L0,4h5.3l2.2-4l2.34,4H15l-2.56,4L15,12z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"religious-muslim-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path16908\\" d=\\"M4.9,0C2.2,0,0,2.2,0,4.9&#xA;&#x9;s2.2,4.9,4.9,4.9c0.9,0,1.7-0.2,2.4-0.6H6.7c-2.4,0-4.3-1.9-4.3-4.3s1.9-4.3,4.3-4.3h0.6C6.5,0.2,5.8,0,4.9,0z M8.5,2L7.6845,3.7&#xA;&#x9;L6,4l1,1.5L6.5,7l2-1l2,1L10,5.5L11,4L9.5,3.7L8.5,2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"religious-muslim-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path7552-2-1\\" d=\\"M6.7941,0C3,0,0,3,0,6.7941&#xA;&#x9;s3,6.7941,6.7941,6.7941c2.1176,0,4.4118-0.7059,5.6471-2.2941C11.6471,11.8235,10.1471,12.4412,9,12.4412&#xA;&#x9;c-2.9118,0-5.1176-2.9118-5.1176-5.8235S6.0882,1.1471,9,1.1471c1.0588,0,2.5588,0.6176,3.4412,1.1471&#xA;&#x9;C11.2059,0.7059,8.9118,0,6.7941,0z M11,3l-1,2.5H7L9.5,7l-1,3L11,8.5l2.5,1.5l-1-3L15,5.5h-3L11,3z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"residential-community-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M8.8,8C9.5,7.9,10,7.2,10,6.5C10,5.7,9.3,5,8.5,5S7,5.7,7,6.5C7,7.2,7.5,7.9,8.2,8v1.5H6.4H6V1H2v8.5H1V10h1h4.4h1.9h0.5H10&#xA;&#x9;V9.5H8.8V8z M3,2h2v1H3V2z M3,4h2v1H3V4z M3,6h2v1H3V6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"residential-community-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M11.8,13.5V11c0.7-0.1,1.2-0.7,1.2-1.5S12.3,8,11.5,8S10,8.7,10,9.5c0,0.7,0.5,1.4,1.2,1.5v2.5H7V2H2v11.5H1V14h13v-0.5&#xA;&#x9;H11.8z M6,11H3v-1h3V11z M6,9H3V8h3V9z M6,7H3V6h3V7z M6,5H3V4h3V5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"restaurant-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path11193\\" d=\\"M2.25,0l-0.5,3.5C1.6793,3.995,2.9908,4.9001,3,5.5V11h1V5.5c0-0.6,1.3207-1.505,1.25-2L4.75,0h-0.5&#xA;&#x9;L4.5,2.75l-0.75,0.5V0h-0.5v3.25L2.5,2.75L2.75,0H2.25z M9,0C7.5,0,7.0064,1.7242,7,3v3h1v5h1V0z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"restaurant-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path11774\\" d=\\"M3.5,0l-1,5.5c-0.1464,0.805,1.7815,1.181,1.75,2L4,14c-0.0384,0.9993,1,1,1,1s1.0384-0.0007,1-1L5.75,7.5&#xA;&#x9;c-0.0314-0.8176,1.7334-1.1808,1.75-2L6.5,0H6l0.25,4L5.5,4.5L5.25,0h-0.5L4.5,4.5L3.75,4L4,0H3.5z M12,0&#xA;&#x9;c-0.7364,0-1.9642,0.6549-2.4551,1.6367C9.1358,2.3731,9,4.0182,9,5v2.5c0,0.8182,1.0909,1,1.5,1L10,14c-0.0905,0.9959,1,1,1,1&#xA;&#x9;s1,0,1-1V0z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"restaurant-noodle-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <g id=\\"restaurant-noodle-11\\">\\n    <path d=\\"M3.4688,8.81,1,6.625V6h9v.625L7.5156,8.8259ZM2.9934,1.7137a.3324.3324,0,0,0-.6648,0v.88l-1.0979.24a.25.25,0,0,0,.0928.4913L2.3286,3.148V3.58L1.25,3.6019a.25.25,0,1,0,0,.5l1.0786.0221V5.3249h.6648ZM9.5,3.3519l-.4912.1932-4.1764.046V2.6652l4.0543-.7879.5192.1141A.5.5,0,1,0,9.22,1.0088L8.7751,1.28l-3.9427.8471V1.7137a.3324.3324,0,0,0-.6648,0v.5575l-.6259.1368v.4788l.6259-.11v.8208L3.5417,3.61v.4863l5.4566.0394L9.5,4.3519a.5.5,0,1,0,0-1ZM7.5313,9.7435H3.4531V9.988H7.5313Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"restaurant-noodle-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <g id=\\"restaurant-noodle-15\\">\\n    <path d=\\"M4.457,11.9892,1,8V7H14V8l-3.4961,3.9891ZM3.9882,2.5a.5.5,0,0,0-1,0v.5671l-1.7969.3675a.25.25,0,1,0,.094.4911l1.7029-.2776v.5662l-1.75.0357a.25.25,0,0,0,0,.5l1.75.0357V5.998h1Zm9.5,1.5-7.5.2625V2.9951l7.594-1.0737a.5.5,0,0,0-.1881-.9822L5.9792,2.4555a.4963.4963,0,0,0-.991.0445v.2276l-.493.1009V3.18l.493-.08V4.2974l-.493.01v.4608L13.4882,5a.5.5,0,0,0,0-1ZM10,13H5v.5757h5Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"restaurant-pizza-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <g id=\\"restaurant-pizza-11\\">\\n    <path d=\\"M1.9366,6.5067,1.0224,6.1A10.038,10.038,0,0,1,6.1,1.0224l.4064.9144h0a9.0333,9.0333,0,0,0-4.57,4.57ZM9.62,9.9471,2.897,6.9594A8.03,8.03,0,0,1,6.9594,2.897h0l.391.88a.7476.7476,0,0,0-.6288.7318.7578.7578,0,0,0,.7578.7578.7424.7424,0,0,0,.4578-.1694l2.01,4.5223A.2482.2482,0,0,1,9.62,9.9471ZM6.2524,6.4955a.75.75,0,1,0-.75.75A.75.75,0,0,0,6.2524,6.4955Zm1.9841,1.006a.74.74,0,1,0-.74.74A.74.74,0,0,0,8.2365,7.5015Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"restaurant-pizza-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <g id=\\"restaurant-pizza-15\\">\\n    <path d=\\"M2.3926,8.9315,1.0245,8.3148A14.0478,14.0478,0,0,1,8.7637.9994l.027.07L9.3022,2.4l-.0037.0013a12.6131,12.6131,0,0,0-6.9057,6.53Zm10.9631,4.96L3.42,9.413a11.6038,11.6038,0,0,1,6.354-6.0088l.0033-.0013.8163,2.1222c-.0281-.0022-.0521-.0162-.0808-.0162a1.062,1.062,0,1,0,.7642,1.7932L13.69,13.575A.2487.2487,0,0,1,13.3557,13.891Zm-4.93-5.3727a.9245.9245,0,1,0-.9245.9244A.9245.9245,0,0,0,8.4255,8.5183Zm3.0169,2.03a.9252.9252,0,1,0-.9252.9252A.9252.9252,0,0,0,11.4424,10.5478Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"restaurant-seafood-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <g id=\\"restaurant-seafood-11\\">\\n    <path d=\\"M8.478,7.1855H9.9722v.6H8.6465A3.3857,3.3857,0,0,1,9.6982,9.3311L9.13,9.5244A2.7584,2.7584,0,0,0,7.87,7.9763L6.3715,8.9914,4.53,8.9744,3.0376,8.0105A2.7482,2.7482,0,0,0,1.832,9.5244l-.5683-.1933A3.3857,3.3857,0,0,1,2.3154,7.7852H.99v-.6H2.4882a.539.539,0,0,1,.0727-.081l.7122-.6387-.7-1.1433c-.0146,0-.0246.0048-.04.0048,0,0-1.5334,0-1.5334-1.4445A4.9644,4.9644,0,0,1,2.5334.994L2,3V4H3l.9918-2.006v2a1.4231,1.4231,0,0,1-.7024,1.159l.5132.838.132-.1184a2.5517,2.5517,0,0,1,3.11,0l.116.1043.5148-.8381A1.4264,1.4264,0,0,1,7.0072,3.994v-2L8,4H9V3L8.4656.994A4.9682,4.9682,0,0,1,9.994,3.8828c0,1.4445-1.5284,1.4445-1.5284,1.4445-.0294,0-.05-.0083-.0777-.0094L7.6907,6.4531l.6729.6049A.5511.5511,0,0,1,8.478,7.1855Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"restaurant-seafood-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <g id=\\"restaurant-seafood-15\\">\\n    <path d=\\"M11.433,10.0889h2.49v.75H11.8525A4.81,4.81,0,0,1,13.4751,13.14l-.71.2422a4.01,4.01,0,0,0-1.74-2.1971,1.7775,1.7775,0,0,1-1.0352.4538L8.4374,12.9852H6.5188L4.9839,11.623a2.0222,2.0222,0,0,1-1.0929-.44,4.0093,4.0093,0,0,0-1.7426,2.1988l-.71-.2422a4.8146,4.8146,0,0,1,1.622-2.3007H.99v-.75H3.4839l.8633-.6764L3.3329,7.7567a2.2738,2.2738,0,0,1-.269.0293,2.0192,2.0192,0,0,1-2.0532-2.08c0-2.08,1.979-4.16,1.979-4.16L2.2531,5.9931l1.7255-.0012L4.9913,2.9852l0,2.9956a2.0936,2.0936,0,0,1-.6993,1.4121l.8536,1.3936L5.23,8.7208a3.8669,3.8669,0,0,1,4.4784,0l.0605.0474.869-1.4152a2.1177,2.1177,0,0,1-.6433-1.3722l0-2.9956.9836,3.0067,1.7547.0012-.7367-4.4466s1.982,2.08,1.982,4.16a2.0211,2.0211,0,0,1-2.0562,2.08,2.3125,2.3125,0,0,1-.3441-.0376L10.5676,9.3945l.8407.6593C11.4212,10.0638,11.4218,10.0782,11.433,10.0889Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"roadblock-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"g12530\\" d=\\"M5.5,0C2.4624,0,0,2.4624,0,5.5S2.4624,11,5.5,11S11,8.5376,11,5.5S8.5376,0,5.5,0z M2,4.5h7v2H2V4.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"roadblock-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"roadblock-24\\" d=\\"M7.5,0C3.3579,0,0,3.3579,0,7.5S3.3579,15,7.5,15S15,11.6421,15,7.5S11.6421,0,7.5,0z M3,6h9v3H3V6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"rocket-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path7143\\" d=\\"M9,1C7.488,1,5.4077,2.1459,4.0488,4H3C2.1988,4,1.8162,4.3675,1.5,5L1,6h1h1l1,1l1,1v1v1l1-0.5&#xA;&#x9;C6.6325,9.1838,7,8.8012,7,8V6.9512C8.8541,5.5923,10,3.512,10,2V1H9z M7.5,3C7.7761,3,8,3.2239,8,3.5S7.7761,4,7.5,4&#xA;&#x9;S7,3.7761,7,3.5S7.2239,3,7.5,3z M2.75,7.25L2.5,7.5C2,8,2,9,2,9s0.9448,0.0552,1.5-0.5l0.25-0.25L2.75,7.25z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"rocket-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path7143\\" d=\\"M12.5547,1c-2.1441,0-5.0211,1.471-6.9531,4H4&#xA;&#x9;C2.8427,5,2.1794,5.8638,1.7227,6.7773L1.1113,8h1.4434H4l1.5,1.5L7,11v1.4453v1.4434l1.2227-0.6113&#xA;&#x9;C9.1362,12.8206,10,12.1573,10,11V9.3984c2.529-1.932,4-4.809,4-6.9531V1H12.5547z M10,4c0.5523,0,1,0.4477,1,1l0,0&#xA;&#x9;c0,0.5523-0.4477,1-1,1l0,0C9.4477,6,9,5.5523,9,5v0C9,4.4477,9.4477,4,10,4L10,4z M3.5,10L3,10.5C2.2778,11.2222,2,13,2,13&#xA;&#x9;s1.698-0.198,2.5-1L5,11.5L3.5,10z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"school-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M8.5,9V8H10V6H7.5V5H10V3H8.5V2H10V1H6v9h4V9H8.5z M4,7H1V1h3V7z M4,8l-1.5,2L1,8H4z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"school-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M11,13v-1h2v-1H9.5v-1H13V9h-2V8h2V7h-2V6h2V5H9.5V4H13V3h-2V2h2V1H8v13h5v-1H11z M6,11H2V1h4V11z M6,12l-2,2l-2-2H6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"scooter-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M1,9H3a.979.979,0,0,1-1,1A.979.979,0,0,1,1,9ZM9.753,4H9V3h.351a.282.282,0,0,0,.223-.148l.268-.536a.333.333,0,0,0,.009-.066A.25.25,0,0,0,9.6,2H9V1.5H6.25a.25.25,0,0,0,0,.5H8V4.5L5,7H4V5.5A.5.5,0,0,0,3.5,5H3V4H4.75A.25.25,0,0,0,5,3.75a.245.245,0,0,0-.223-.239V3.5L1.25,3A.25.25,0,0,0,1,3.25v.5A.25.25,0,0,0,1.25,4H2V5H1.5a.5.5,0,0,0-.5.5V8H6.172a1,1,0,0,0,.709-.294L7.3,7.292A1,1,0,0,1,8,7H9.752A.248.248,0,0,0,10,6.752v-2.5A.247.247,0,0,0,9.753,4ZM9,8a1,1,0,1,0,1,1A1,1,0,0,0,9,8Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"scooter-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M4.908,12a1.5,1.5,0,1,1-2.816,0Zm8.65-6C13.539,6,13,6,13,6V3h.351a.282.282,0,0,0,.223-.148l.268-.536a.334.334,0,0,0,.009-.066A.25.25,0,0,0,13.6,2H13V1.7a.215.215,0,0,0-.2-.2H9.25a.25.25,0,0,0,0,.5H12V6.6L7.6,10H6V7.5A.5.5,0,0,0,5.5,7H5V5H6.75a.25.25,0,0,0,0-.5L2.266,4.034c-.006,0-.01-.007-.016-.007a.25.25,0,0,0-.25.25V4.75A.25.25,0,0,0,2.25,5H3V7H2.5A1.538,1.538,0,0,0,1,8.5v2a.472.472,0,0,0,.442.5C1.461,11,7.5,11,7.5,11L10,10h3.5a.472.472,0,0,0,.5-.442C14,9.539,14,6.5,14,6.5A.472.472,0,0,0,13.558,6ZM12.5,11A1.5,1.5,0,1,0,14,12.5,1.538,1.538,0,0,0,12.5,11Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"shelter-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M4,5v3h6v2H2l0,0l0,0V5.67L1,6V4l9-3v2L4,5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"shelter-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M4,7v5h9.5v2H2l0,0l0,0V7.78L1,8.16V6l13-5v2.14L4,7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"shoe-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <g>\\n    <path d=\\"M7.5,5L5.8046,3.9827L4.8011,2.6763c-0.1514-0.1979-0.4349-0.2345-0.6275-0.083c-0.124,0.0961-0.1756,0.2449-0.164,0.3913&#xA;&#x9;&#x9;H4.0024V4H2V3.5C2,3.2238,1.7761,3,1.5,3S1,3.2238,1,3.5V4v1v1h3.5C5.5,6,6,7,7,7c1.0385,0,3,0,3,0l0.0038-0.5&#xA;&#x9;&#x9;C10.0038,5.9456,7.5,5,7.5,5z\\"/>\\n    <path d=\\"M5.5273,7.584C5.1172,7.3101,4.6514,7,4,7H1v1.4707C1,8.763,1.237,9,1.5293,9h1.9414C3.763,9,4,8.763,4,8.4707V8&#xA;&#x9;&#x9;c0.3486,0,0.6377,0.1924,0.9727,0.416C5.3828,8.6895,5.8486,9,6.5,9h3C9.7764,9,10,8.7764,10,8.5V8H6.5&#xA;&#x9;&#x9;C6.1514,8,5.8623,7.8071,5.5273,7.584z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"shoe-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <g>\\n    <path d=\\"M9.5,7C9.086,6.7652,8.6109,6.4041,8.1848,6.0524l-2.1743-2.831C5.8204,2.9729,5.4644,2.927,5.2227,3.1172&#xA;&#x9;&#x9;C5.0977,3.214,5.0262,3.3536,5.0097,3.5H5V5H3.2087C3.0751,5,2.9469,4.9469,2.8524,4.8524C2.8524,4.8524,2.5,4,2,4&#xA;&#x9;&#x9;S1.4997,4,1.4997,4C1.2238,4,1,4.2237,1,4.4997V6.25v0.634V9h5.5c1.5,0,2,1,3.5,1s4,0,4,0V9.5C14,8,10.5469,7.5938,9.5,7z\\"/>\\n    <path d=\\"M9.5,11c-0.6318,0-1.0469-0.207-1.5264-0.4473C7.4556,10.2939,6.8682,10,6,10H1.5004H1v1.4996&#xA;&#x9;&#x9;C1,11.7759,1.224,12,1.5004,12h3.9993C5.776,12,6,11.7759,6,11.4996V11c0.6318,0,1.0464,0.207,1.5264,0.4473&#xA;&#x9;&#x9;C8.0449,11.7061,8.6318,12,9.5,12h4c0.2764,0,0.5-0.2236,0.5-0.5V11H9.5z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"shop-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.6,4H8.49L8.2,2.27C8.0832,1.7303,7.6738,1.3015,7.14,1.16C6.8794,1.0669,6.6064,1.013,6.33,1H4.67&#xA;&#x9;c-0.2721,0.0075-0.5416,0.0547-0.8,0.14C3.3269,1.2815,2.9117,1.7199,2.8,2.27L2.51,4H1.34&#xA;&#x9;C1.1357,4.0055,0.9746,4.1755,0.9801,4.3798C0.9811,4.4173,0.9878,4.4545,1,4.49l1.21,4.7l0,0C2.3454,9.6605,2.7706,9.9885,3.26,10&#xA;&#x9;h4.48C8.2331,9.9928,8.6635,9.6639,8.8,9.19l0,0l1.2-4.7c0.0682-0.1926-0.0326-0.4041-0.2252-0.4723&#xA;&#x9;C9.7188,3.9978,9.6588,3.9918,9.6,4z M3.27,4l0.27-1.61c0.061-0.2688,0.2782-0.4741,0.55-0.52c0.1846-0.0591,0.3763-0.0928,0.57-0.1&#xA;&#x9;h1.67c0.1937,0.0072,0.3854,0.0409,0.57,0.1c0.2718,0.0459,0.489,0.2512,0.55,0.52L7.73,4H3.27z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"shop-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.33,6H11.5l-0.39-2.33c-0.1601-0.7182-0.7017-1.2905-1.41-1.49C9.3507,2.0676,8.9869,2.007,8.62,2H6.38&#xA;&#x9;C6.0131,2.007,5.6493,2.0676,5.3,2.18C4.5917,2.3795,4.0501,2.9518,3.89,3.67L3.5,6H1.67C1.3939,5.9983,1.1687,6.2208,1.167,6.497&#xA;&#x9;C1.1667,6.5489,1.1744,6.6005,1.19,6.65l1.88,6.3l0,0C3.2664,13.5746,3.8453,13.9996,4.5,14h6c0.651-0.0047,1.2247-0.4289,1.42-1.05&#xA;&#x9;l0,0l1.88-6.3c0.0829-0.2634-0.0635-0.5441-0.3269-0.627C13.4268,6.0084,13.3786,6.0007,13.33,6z M4.52,6l0.36-2.17&#xA;&#x9;c0.0807-0.3625,0.3736-0.6395,0.74-0.7C5.8663,3.0524,6.1219,3.0087,6.38,3h2.24c0.2614,0.0078,0.5205,0.0515,0.77,0.13&#xA;&#x9;c0.3664,0.0605,0.6593,0.3375,0.74,0.7L10.48,6h-6H4.52z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"skateboard-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"icon_concepts:_sports_leisure\\" d=\\"M8,6H3A2.0024,2.0024,0,0,1,1,4H2A1.001,1.001,0,0,0,3,5H8A1.001,1.001,0,0,0,9,4h1A2.0024,2.0024,0,0,1,8,6ZM8,7A1,1,0,1,0,9,8,1,1,0,0,0,8,7ZM3,7A1,1,0,1,0,4,8,1,1,0,0,0,3,7Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"skateboard-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"icon_concepts:_sports_leisure\\" d=\\"M11,8H4A2.0024,2.0024,0,0,1,2,6H3A1.001,1.001,0,0,0,4,7h7a1.001,1.001,0,0,0,1-1h1A2.0024,2.0024,0,0,1,11,8Zm0,1a1,1,0,1,0,1,1A1,1,0,0,0,11,9ZM4,9a1,1,0,1,0,1,1A1,1,0,0,0,4,9Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"skiing-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M11,3.68c-0.0021,0.602-0.4917,1.0883-1.0937,1.0863C9.3043,4.7642,8.818,4.2745,8.82,3.6726&#xA;&#x9;c0.0021-0.602,0.4917-1.0883,1.0937-1.0863C9.9425,2.5864,9.9713,2.5876,10,2.59C10.5666,2.6369,11.0019,3.1115,11,3.68z M10.17,9&#xA;&#x9;c-0.0623-0.1197-0.2083-0.1684-0.33-0.11C9.3623,9.1811,8.7807,9.247,8.25,9.07L3.69,6.81l1.9-1V3.68l1.09,0.55v2.18L7.77,7&#xA;&#x9;l1.09-0.55L7.77,5.86V2.59L5.59,1.5L4.5,2v3.32l-1.9,1l-2-1C0.4757,5.2592,0.3258,5.3107,0.265,5.435&#xA;&#x9;C0.2042,5.5593,0.2557,5.7092,0.38,5.77l0,0L8,9.54c0.2402,0.1011,0.4995,0.1489,0.76,0.14c0.4466-0.0082,0.8851-0.1212,1.28-0.33&#xA;&#x9;c0.1286-0.0502,0.1922-0.1951,0.142-0.3238C10.1785,9.0173,10.1745,9.0085,10.17,9z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"skiing-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M15,4.5C15,5.3284,14.3284,6,13.5,6S12,5.3284,12,4.5S12.6716,3,13.5,3S15,3.6716,15,4.5z M13.72,11.89&#xA;&#x9;c-0.0623-0.1197-0.2083-0.1684-0.33-0.11c-0.6846,0.4194-1.5208,0.5111-2.28,0.25L4.78,8.86L7.5,7.5v-3L9,5.25v3L10.5,9L12,8.25&#xA;&#x9;L10.5,7.5V3l-3-1.5L6,2.25v4.5L3.28,8.11L0.61,6.78C0.4857,6.7192,0.3358,6.7707,0.275,6.895C0.2142,7.0193,0.2657,7.1692,0.39,7.23&#xA;&#x9;l10.5,5.25c0.3156,0.135,0.6568,0.1998,1,0.19c0.5998-0.0103,1.1889-0.161,1.72-0.44c0.1236-0.0615,0.174-0.2116,0.1125-0.3352&#xA;&#x9;C13.7217,11.8932,13.7208,11.8916,13.72,11.89z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"slaughterhouse-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M11,5.75v.241C11,7,10,6.5,10,6.5H8A3.081,3.081,0,0,1,7,8a2.848,2.848,0,0,1-.416.9.26.26,0,0,0-.05.242l.458,1.55A.227.227,0,0,1,7,10.75a.25.25,0,0,1-.25.25.259.259,0,0,1-.244-.173L6,9V8.5H2.75l-.21.42a.25.25,0,0,0-.02.168L3,10.75a.25.25,0,0,1-.25.25.26.26,0,0,1-.237-.172L2,9V8.5a4.013,4.013,0,0,1-.843-.139,1.383,1.383,0,0,1-.5,1.045.242.242,0,0,0-.094.282l.414.99a.213.213,0,0,1,.011.072.25.25,0,0,1-.25.25.253.253,0,0,1-.228-.148L0,9.5a6.031,6.031,0,0,0,0-2v-2A1.486,1.486,0,0,1,2,4.1s.768.132,1.1.154A2.457,2.457,0,0,0,4,4.087,1.666,1.666,0,0,1,4.5,4a1.648,1.648,0,0,1,.844.257,3.166,3.166,0,0,0,.9.23L7,4.5s.966-.484,1-.5V3.5l.5.5A1.474,1.474,0,0,1,10,3.5.914.914,0,0,0,9,4l1,1,.68.529a.425.425,0,0,1,.07-.029A.238.238,0,0,1,11,5.75Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"slaughterhouse-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M15,8.1c0,1.376-1.363.694-1.363.694L12.5,9H11a5.309,5.309,0,0,1-1.5,2,3.272,3.272,0,0,1-.523,1.125c-.077.091-.061.2-.068.33L9,14.755a.264.264,0,0,1-.266.25A.242.242,0,0,1,8.5,14.8L8,11.5H4v3.253A.247.247,0,0,1,3.753,15h0a.25.25,0,0,1-.241-.2L3,12v-.5a8.2,8.2,0,0,1-1.426-.1A1.886,1.886,0,0,1,.9,12.826c-.128.083-.148.211-.133.386,0,0,.19,1.532.19,1.538a.25.25,0,0,1-.25.25.238.238,0,0,1-.23-.174l-.427-1.7a.35.35,0,0,1,.055-.3c.437-.68-.049-2.55-.049-2.55A1.354,1.354,0,0,1,0,9.922V7.5A2.027,2.027,0,0,1,2.736,5.586s.1.03.142.049a15.15,15.15,0,0,0,3.814.038l.179-.062a1.842,1.842,0,0,1,1.26,0,.972.972,0,0,1,.227.089,1.994,1.994,0,0,1,.287.171A1.8,1.8,0,0,0,9.5,6h1V5l.5.5c.5-1.5,2.5-1,2.5-1a1.687,1.687,0,0,0-1.5,1l2.5,2a.613.613,0,0,1,.186-.069A.318.318,0,0,1,15,7.752V8.1Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"slipway-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <g id=\\"slipway-final\\">\\n    <path d=\\"M1.0417,8l8,1.3794V10h-8Zm8-4-1,1v.625L3.7345,4.01l.0777-.2852.86-.8447H5.5a.35.35,0,0,0,0-.6992H4.529a.3478.3478,0,0,0-.2451.1L3.2546,3.291a.3566.3566,0,0,0-.0928.1582l-.0856.3137L1.0417,3C1.0948,4,1,5.5094,3,5.8844,3.9829,6.0687,8.0948,7,8.0948,7l1.9469-2Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"slipway-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <g id=\\"slipway-final\\">\\n    <path d=\\"M1.0417,11l12,1.495V13h-12Zm12-4-1,1v.5833L4.2381,5.3318l.0624-.1248L5.652,3.8447h.8311a.35.35,0,0,0,0-.6992H5.5065a.3518.3518,0,0,0-.248.1025L3.7643,4.7529a.3714.3714,0,0,0-.0654.0909l-.109.218L1.0417,4c0,2-.0293,3.9578,2.8595,4.4994C5.321,8.7656,12.0417,10,12.0417,10l2-2Z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\" id=\\"snowmobile-11\\">\\n  <path d=\\"M4,8.5a.5.5,0,0,1-.5.5H.5a.5.5,0,0,1,0-1h3A.5.5,0,0,1,4,8.5Zm7-3a.5.5,0,0,0-.5-.5.9289.9289,0,0,0-.0969.0094L6,6H5.5A.5.5,0,0,1,5,5.5v-3a.5.5,0,0,0-.9314-.2528L3,4,.3118,5.038A.4989.4989,0,0,0,0,5.5a.5209.5209,0,0,0,.0864.2809L1,7l2.4113.0007a.4876.4876,0,0,1,.314.1149L5.7234,8.7709A.9964.9964,0,0,0,6.3591,9H9.4949a.5045.5045,0,0,0,.4512-.73L9,7l1.7792-1.0852A.5033.5033,0,0,0,11,5.5Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\" id=\\"snowmobile-15\\">\\n  <path d=\\"M15,11a1,1,0,0,1-1,1l0,0v0H9.4142a1,1,0,0,1-.7071-.2929L7.146,10.146A.4984.4984,0,0,0,6.7935,10H3.3343a1.0023,1.0023,0,0,1-.6015-.2006L1.3857,8.7888A1.0134,1.0134,0,0,1,1,8a.9953.9953,0,0,1,.4719-.8444L5,5,6.0385,3.3076h0A.5.5,0,0,1,7,3.5V7L8,8H9l5.4115-.9922a.5.5,0,0,1,.3555.915L13,9l1.6313,1.2243A.99.99,0,0,1,15,11ZM5.5,11H3.2247a3.0035,3.0035,0,0,1-1.44-.3679L.74,10.0612a.5.5,0,0,0-.48.8775l1.2687.6934A3.0032,3.0032,0,0,0,2.969,12H5.5a.5.5,0,0,0,0-1Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"soccer-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9,1.25C8.9996,1.9404,8.4397,2.4997,7.7494,2.4994S6.4996,1.9391,6.5,1.2487C6.5004,0.5584,7.0603-0.001,7.7506-0.0006&#xA;&#x9;C7.7638-0.0006,7.7769-0.0004,7.79,0C8.4647,0.0216,9.0003,0.575,9,1.25z M9,8.48c-0.5523,0-1,0.4477-1,1s0.4477,1,1,1s1-0.4477,1-1&#xA;&#x9;S9.5523,8.48,9,8.48z M10.81,5.09L8.94,3.18l0,0C8.8477,3.0648,8.7076,2.9984,8.56,3H1.51c-0.2761,0-0.5,0.2239-0.5,0.5&#xA;&#x9;S1.2339,4,1.51,4H5L2.07,8.3l0,0c-0.0138,0.066-0.0138,0.134,0,0.2C2.012,8.7761,2.1889,9.047,2.465,9.105&#xA;&#x9;C2.7411,9.163,3.012,8.9861,3.07,8.71H3L4.16,7H6l-1.93,3.24l0,0C4.0228,10.3184,3.9986,10.4085,4,10.5&#xA;&#x9;c-0.0552,0.2761,0.1239,0.5448,0.4,0.6c0.2761,0.0552,0.5448-0.1239,0.6-0.4l0,0l3.67-6.38l1.48,1.48&#xA;&#x9;c0.1812,0.2084,0.497,0.2305,0.7054,0.0493c0.2084-0.1812,0.2305-0.497,0.0493-0.7054C10.8879,5.1246,10.8696,5.1065,10.85,5.09&#xA;&#x9;L10.81,5.09z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"soccer-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M11,1.5C11,2.3284,10.3284,3,9.5,3S8,2.3284,8,1.5S8.6716,0,9.5,0S11,0.6716,11,1.5z M11,11c-0.5523,0-1,0.4477-1,1&#xA;&#x9;s0.4477,1,1,1s1-0.4477,1-1S11.5523,11,11,11z M12.84,6.09l-1.91-1.91l0,0C10.8399,4.0675,10.7041,4.0014,10.56,4H3.5&#xA;&#x9;C3.2239,4,3,4.2239,3,4.5S3.2239,5,3.5,5h2.7L3,11.3l0,0c-0.0138,0.066-0.0138,0.134,0,0.2c-0.058,0.2761,0.1189,0.547,0.395,0.605&#xA;&#x9;C3.6711,12.163,3.942,11.9861,4,11.71l0,0L5,10h2l-1.93,4.24l0,0C5.0228,14.3184,4.9986,14.4085,5,14.5&#xA;&#x9;c-0.0552,0.2761,0.1239,0.5448,0.4,0.6c0.2761,0.0552,0.5448-0.1239,0.6-0.4l0,0l4.7-9.38l1.44,1.48&#xA;&#x9;c0.211,0.1782,0.5264,0.1516,0.7046-0.0593C13.0037,6.5523,13.0018,6.2761,12.84,6.09z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"square-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9,10H2c-0.5523,0-1-0.4477-1-1V2c0-0.5523,0.4477-1,1-1h7c0.5523,0,1,0.4477,1,1v7C10,9.5523,9.5523,10,9,10z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"square-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13,14H2c-0.5523,0-1-0.4477-1-1V2c0-0.5523,0.4477-1,1-1h11c0.5523,0,1,0.4477,1,1v11C14,13.5523,13.5523,14,13,14z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"square-stroked-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.19,1H1.81C1.3626,1,1,1.3626,1,1.81v7.38C1,9.6374,1.3626,10,1.81,10c0,0,0,0,0,0h7.38C9.6374,10,10,9.6374,10,9.19v0&#xA;&#x9;V1.81C10,1.3626,9.6374,1,9.19,1L9.19,1L9.19,1z M2,2h7v7H2V2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"square-stroked-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M12.7,2.3v10.4H2.3V2.3H12.7 M13,1H2C1.4477,1,1,1.4477,1,2v11c0,0.5523,0.4477,1,1,1h11c0.5523,0,1-0.4477,1-1V2&#xA;&#x9;C14,1.4477,13.5523,1,13,1L13,1z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"stadium-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path4177\\" d=\\"M5,0v3v0.0117&#xA;&#x9;C2.7922,3.1089,1.0876,3.8182,1,4.6816c0,0,0,2.4594,0,3.6816C0.9995,9.2672,3.0143,10,5.5,10s4.5005-0.7328,4.5-1.6367V4.6816&#xA;&#x9;C9.9122,3.8177,8.2093,3.1082,6,3.0117V2.5723L8.5,1.5L5,0z M1.8184,5.752C2.1366,5.9302,2.5373,6.0838,3,6.2051v2.459&#xA;&#x9;C2.2493,8.4283,1.8213,8.0972,1.8184,7.75V5.752z M9.1816,5.7559V7.75C9.1803,8.0979,8.7521,8.4298,8,8.666V6.2031&#xA;&#x9;C8.4614,6.0836,8.862,5.932,9.1816,5.7559z M4,6.3984C4.4815,6.4652,4.9888,6.4995,5.5,6.5C6.0112,6.4995,6.5185,6.4652,7,6.3984&#xA;&#x9;v2.4922C6.5282,8.9624,6.0171,8.9997,5.5,9C4.9829,8.9997,4.4718,8.9624,4,8.8906V6.3984z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"stadium-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path4177\\" d=\\"M7,1v2v1.5v0.5098C4.1695,5.1037,2.0021,5.9665,2,7v4.5c0,1.1046,2.4624,2,5.5,2s5.5-0.8954,5.5-2V7&#xA;&#x9;c-0.0021-1.0335-2.1695-1.8963-5-1.9902V4.0625L11,2.75L7,1z M3,8.1465c0.5148,0.2671,1.2014,0.4843,2,0.6328v2.9668&#xA;&#x9;C3.7948,11.477,3,11.0199,3,10.5V8.1465z M12,8.1484V10.5c0,0.5199-0.7948,0.977-2,1.2461V8.7812&#xA;&#x9;C10.7986,8.6328,11.4852,8.4155,12,8.1484z M6,8.9219C6.4877,8.973,6.9925,8.9992,7.5,9C8.0073,8.9999,8.5121,8.9743,9,8.9238&#xA;&#x9;v2.9844C8.5287,11.964,8.0288,12,7.5,12S6.4713,11.964,6,11.9082V8.9219z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"star-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path4749-2-8-2\\" d=\\"M5.4,0L4,3.5H0l3,3L1.5,11l3.9-2.6&#xA;&#x9;L9.5,11L8,6.5l3-3H7L5.4,0z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"star-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path4749-2-8-2\\" d=\\"M7.5,0l-2,5h-5l4,3.5l-2,6l5-3.5&#xA;&#x9;l5,3.5l-2-6l4-3.5h-5L7.5,0z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"star-stroked-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path4749-2-8-2\\" d=\\"M5.5,2.69l0.59,1.47l0.25,0.63h1.81l-1,0.9l-0.5,0.44l0.18,0.63l0.56,1.69L6.07,7.53L5.5,7.12&#xA;&#x9;l-0.57,0.4L3.62,8.44l0.55-1.68l0.21-0.63L3.88,5.7l-1-0.9h1.78l0.25-0.63L5.5,2.69 M5.5,0L4,3.79H0.19l3,2.66L1.71,11L5.5,8.34&#xA;&#x9;L9.29,11L7.78,6.45l3-2.66H7L5.5,0L5.5,0z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"star-stroked-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path4749-2-8-2\\" d=\\"M7.5,3.19l1.07,2.68L8.82,6.5h3l-2,1.75l-0.5,0.44l0.23,0.63l1,3.13l-2.48-1.77&#xA;&#x9;l-0.57-0.4l-0.57,0.4l-2.52,1.77l1-3.13l0.21-0.63l-0.5-0.44l-2-1.75h3l0.25-0.63L7.5,3.19 M7.5,0.5l-2,5h-5l4,3.5l-2,6l5-3.5l5,3.5&#xA;&#x9;l-2-6l4-3.5h-5L7.5,0.5L7.5,0.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"suitcase-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path17\\" d=\\"M8,3V1.578L7.3601,1H3.6399&#xA;&#x9;L3,1.7477V3H1.5L1,3.5v6L1.5,10h8L10,9.5v-6L9.5,3H8z M4,2h3v1H4V2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"suitcase-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path17\\" d=\\"M11,4V2c0-1-1-1-1-1H5.0497&#xA;&#x9;c0,0-1.1039,0.0015-1.0497,1v2H2c0,0-1,0-1,1v7c0,1,1,1,1,1h11c0,0,1,0,1-1V5c0-1-1-1-1-1H11z M5.5,2.5h4V4h-4V2.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"sushi-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path4999\\" d=\\"M3.5,2.5C3.2,2.5,3,2.6,3,2.9l0,0H2.1c-1.1,0-2,0.8-2,1.9c0,0.5,0.3,1,0.7,1.4&#xA;&#x9;C0.3,6.5,0,6.9,0,7.5C0,8.3,0.7,9,1.6,9h1.9h2h1.9C8.3,9,9,8.3,9,7.5c0-0.2,0-0.4-0.1-0.6l1,0.5c0.4,0.2,0.8,0,1-0.3&#xA;&#x9;c0.2-0.4-0.053-0.7941-0.3427-0.9442L9.8,5.8l0.5-0.1c0.4-0.1,0.7-0.4,0.6-0.8c-0.1-0.4-0.4-0.6-0.8-0.6l0,0H10L8.4,4.6&#xA;&#x9;C8,3.9,7.3,3.1,6,3c0,0,0-0.5-0.5-0.5l0,0H3.5z M4,3.5h1v4.4l0,0l0,0H4l0,0l0,0V3.5z M7,5.9c0.2,0,0.3,0.1,0.4,0.3l0.1-0.1&#xA;&#x9;C7.6,5.9,7.8,5.9,8,6s0.2,0.3,0.1,0.5L7.8,7C7.9,7.1,8,7.2,8,7.4c0,0.3-0.2,0.5-0.6,0.5H6v-1h0.7V6.3C6.7,6.1,6.8,5.9,7,5.9z M1.9,6&#xA;&#x9;C2,6,2.2,6,2.3,6.2l0.1,0.2c0.1-0.1,0.2-0.1,0.3-0.1C2.9,6.3,3,6.5,3,6.6v0.8l0,0v0.5H1.6C1.2,7.9,1,7.7,1,7.4s0.2-0.5,0.6-0.5h0.3&#xA;&#x9;L1.7,6.5c-0.1-0.2,0-0.4,0.1-0.5C1.8,6,1.8,6,1.9,6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"sushi-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path4999\\" d=\\"M5.5,3C5.2239,3,5,3.2239,5,3.5H2.75C1.2265,3.5,0,4.7265,0,6.25c0,0.8274,0.3687,1.5592,0.9434,2.0625&#xA;&#x9;C0.3803,8.6675,0,9.2893,0,10c0,1.0994,0.9006,2,2,2h3.5h2H10c1.0994,0,2-0.9006,2-2c0-0.4883-0.1863-0.9294-0.4805-1.2773&#xA;&#x9;l2.1777,0.9629c0.3716,0.1831,0.8213,0.0303,1.0044-0.3413c0.1831-0.3716,0.0303-0.8213-0.3413-1.0044&#xA;&#x9;c-0.0188-0.0093-0.038-0.0178-0.0576-0.0254l-1.8105-0.8027l1.6309-0.2715c0.4099-0.0599,0.6936-0.4408,0.6337-0.8507&#xA;&#x9;c-0.0544-0.3724-0.3765-0.6469-0.7528-0.6415c-0.0426,0.0003-0.085,0.0042-0.127,0.0117l-2.1309,0.3555&#xA;&#x9;C11.2595,4.9521,10.0387,3.7837,8,3.5488V3.5C8,3.2239,7.7761,3,7.5,3H5.5z M6,4h1v5v2H6V9V4z M9.5,8&#xA;&#x9;c0.259,0,0.4638,0.1974,0.4902,0.4492l0.0762-0.1328c0.1385-0.2399,0.4437-0.3201,0.6836-0.1816s0.3201,0.4418,0.1816,0.6816&#xA;&#x9;l-0.2578,0.4473C10.8727,9.445,11,9.7021,11,10c0,0.5626-0.4374,1-1,1H8V9h1V8.5C9,8.223,9.223,8,9.5,8z M2.4395,8.0703&#xA;&#x9;c0.1934-0.0242,0.3903,0.0662,0.4941,0.2461l0.2012,0.3477C3.226,8.5647,3.3538,8.5,3.5,8.5C3.777,8.5,4,8.723,4,9h1v2H2&#xA;&#x9;c-0.5626,0-1-0.4374-1-1s0.4374-1,1-1h0.1738L2.0684,8.8164C1.9299,8.5765,2.0101,8.2733,2.25,8.1348&#xA;&#x9;C2.31,8.1001,2.375,8.0784,2.4395,8.0703z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"swimming-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path8421-9-1-0-7\\" d=\\"M8.0039,0.4941l-0.6992,0.502L4.6035,2.5977&#xA;&#x9;C4.3036,2.6967,4.2042,3.1962,4.4023,3.4961l0.5996,1.002l-2.5,2l1,1.002l2-1.002L7.5039,7.5l1-1.002l-3.002-3.502l3.002-1.5v-1.002&#xA;&#x9;C8.5039,0.4941,8.0039,0.4941,8.0039,0.4941z M9.0059,2.9961c-0.553,0-1.002,0.4489-1.002,1.002s0.4489,1,1.002,1&#xA;&#x9;c0.553,0,1-0.447,1-1S9.5589,2.9961,9.0059,2.9961z M2,7.998L0,9v1l2-1l1.5,1l2-1l2,1L9,9l2,1V9L9,7.998L7.5,9l-2-1.002L3.5,9&#xA;&#x9;L2,7.998z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"swimming-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path16388\\" d=\\"M10.1113,2C9.9989,2,9.6758,2.1465,9.6758,2.1465L6.3535,3.8262&#xA;&#x9;C5.9111,4.0024,5.7358,4.7081,6.002,5.0605l0.9707,1.4082L3.002,8.498L5,9.998l2.502-1.5l2.5,1.5l1.002-1.002l-3-4l2.5566-1.5293&#xA;&#x9;c0.5286-0.2662,0.4434-0.7045,0.4434-0.9707C10.9999,2.2861,10.6437,2,10.1113,2z M12.252,5C11.2847,5,10.5,5.7827,10.5,6.75&#xA;&#x9;s0.7847,1.752,1.752,1.752s1.75-0.7847,1.75-1.752S13.2192,5,12.252,5z M2.5,10L0,11.5V13l2.5-1.5L5,13l2.502-1.5l2.5,1.5L12,11.5&#xA;&#x9;l3,1.5v-1.5L12,10l-1.998,1.5l-2.5-1.5L5,11.5L2.5,10z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"table-tennis-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"icon_concepts:_sports_leisure\\" d=\\"M8.5928,7.2324a2.6052,2.6052,0,0,1-1.1448.642L3.1149,3.5413a2.604,2.604,0,0,1,.6419-1.1448C5.3189.8451,7.33.4386,8.9459,2.0541,10.5507,3.659,10.1549,5.6811,8.5928,7.2324ZM3,5.2531a2.5994,2.5994,0,0,1-.0135,1.1555,2.7324,2.7324,0,0,1-.3638.77C1.8845,8.0455,1.05,8.5163,1.05,8.8266A2.3857,2.3857,0,0,0,2.1734,9.95c.31,0,.77-.8024,1.6583-1.5621a2.5178,2.5178,0,0,1,.8024-.3959A2.6735,2.6735,0,0,1,5.7255,8Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"table-tennis-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"icon_concepts:_sports_leisure\\" d=\\"M11.9676,10.2275a3.8116,3.8116,0,0,1-1.9122.9831L3.7678,4.9338A4.0283,4.0283,0,0,1,4.7725,3.0324C7.03.7745,9.98.2235,12.3781,2.6219S14.2255,7.97,11.9676,10.2275Zm-6.987,1.6093A3.8422,3.8422,0,0,1,6.149,11.278,4.5328,4.5328,0,0,1,8,11.4452L3.5456,7a4.4126,4.4126,0,0,1,.1572,1.9223,3.6639,3.6639,0,0,1-.5208,1.1159c-1.072,1.263-2.132,1.727-2.132,2.1879A1.8378,1.8378,0,0,0,2.7739,13.95C3.2348,13.95,3.6917,12.9368,4.9806,11.8368Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"teahouse-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M6.2,4C7.4,3.7,8,3.7,8,2.5c0-0.6-0.4-0.8-1.6-1.3C5.6,0.9,5.3,0.9,5.3,0.1C5,1,5.2,1.3,6.1,1.8C8.1,2.8,6.2,4,6.2,4z&#xA;&#x9; M3.9,4C4.6,3.8,5,3.8,5,3.1C5,2.7,4.7,2.6,4,2.2C3.5,2,3.3,1.5,3.3,1C3.1,1.6,3.2,2.3,3.8,2.6C5,3.2,3.9,4,3.9,4z M9,5H2l1,3&#xA;&#x9;c0.3,0.4,0.6,0.7,1,1v2h3V9c0.4-0.3,0.7-0.6,1-1L9,5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"teahouse-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M11,7c-0.2,1.4-0.5,2.7-1,4c-0.3,0.4-0.6,0.7-1,1v2H6v-2c-0.4-0.3-0.7-0.6-1-1C4.5,9.7,4.2,8.4,4,7H11z M8.1,5.7&#xA;&#x9;c1.2-0.3,1.7-0.3,1.8-1.5c0-0.6-0.4-0.8-1.5-1.4C7.5,2.4,7.1,1.8,7.2,1C6.8,1.9,7,3,8,3.5C10,4.5,8.1,5.7,8.1,5.7z M5.8,6&#xA;&#x9;c0.7-0.2,1.1-0.2,1.1-0.9c0-0.4-0.3-0.5-0.9-0.9C5.4,4,5.1,3.5,5.2,3C4.9,3.6,5.1,4.3,5.7,4.6C6.9,5.2,5.8,6,5.8,6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\" id=\\"telephone-11\\">\\n  <path d=\\"M3,9.4a0.73,0.73,0,0,0,1,0l0.74-.74a0.73,0.73,0,0,0,0-1ZM7.56,4.8a0.73,0.73,0,0,0,1,0l0.71-.71a0.73,0.73,0,0,0,0-1ZM5.88,3.57L3.57,5.88a0.37,0.37,0,0,0,0,.52L4,6.84,2.26,8.6a2.27,2.27,0,0,1-.73-1.34v-1a1.3452,1.3452,0,0,1,.52-1L5.26,2.05a1.3452,1.3452,0,0,1,1-.52h1a2.27,2.27,0,0,1,1.34.73L6.84,4,6.4,3.57a0.37,0.37,0,0,0-.52,0\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\" id=\\"telephone-15\\">\\n  <path d=\\"M4.51,8.88a0.51,0.51,0,0,0,0,.72l0.72,0.72L3.07,12.5,2.7,12.13A2.24,2.24,0,0,1,2,10.69V9.24a2.24,2.24,0,0,1,.7-1.45L7.77,2.72A2.24,2.24,0,0,1,9.22,2h1.45a2.24,2.24,0,0,1,1.45.72l0.36,0.36L10.31,5.26,9.58,4.53a0.51,0.51,0,0,0-.72,0ZM4.13,13.6a1,1,0,0,0,1.4137.0363Q5.5623,13.6186,5.58,13.6l0.72-.72a1,1,0,0,0,.0363-1.4137Q6.3186,11.4477,6.3,11.43Zm7.25-7.28a1,1,0,0,0,1.4137.0363C12.8061,6.3445,13.55,5.6,13.55,5.6a1,1,0,0,0,.0363-1.4137Q13.5686,4.1677,13.55,4.15Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"tennis-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.38,1.63C8.5569.7765,6.6118.8078,5.24,2.24A4.26,4.26,0,0,0,4.05,5a4.1491,4.1491,0,0,1-.5,2.07.62.62,0,0,0-.67.12L1.19,8.88a.61.61,0,0,0,0,.85l.09.09a.5941.5941,0,0,0,.84.01l.01-.01L3.82,8.13a.5994.5994,0,0,0,.12-.67,5.8237,5.8237,0,0,1,2.21-.49A3.9655,3.9655,0,0,0,8.77,5.78C10.09,4.46,10.3421,2.6276,9.38,1.63ZM6.15,6.47a1.6589,1.6589,0,0,1-1.17-.44,1.923,1.923,0,0,1-.31-1.98L6.95,6.33A2.5434,2.5434,0,0,1,6.15,6.47Zm1.06-.23L4.77,3.8a3.72,3.72,0,0,1,.7-1.07L8.28,5.55A3.5558,3.5558,0,0,1,7.21,6.24Zm1.25-.87L5.64,2.54a3.9241,3.9241,0,0,1,1.04-.71h.01l2.5,2.5A3.578,3.578,0,0,1,8.46,5.37Zm.83-1.29L6.94,1.72a2.76,2.76,0,0,1,.92-.17,1.6156,1.6156,0,0,1,1.17.44,1.7156,1.7156,0,0,1,.41,1.52A3,3,0,0,1,9.29,4.08Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"tennis-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.1284,1.87c-1.5418-1.5406-4.5535-.7759-6.28,1.05a6.8282,6.8282,0,0,0-1.88,4.4,5.7275,5.7275,0,0,1-.57,2.72.6814.6814,0,0,0-.67.17l-2.49,2.5a.6941.6941,0,0,0,0,.98l.07.07a.7051.7051,0,0,0,.98,0l2.5-2.49a.683.683,0,0,0,.18-.66,8.5694,8.5694,0,0,1,3.12-.58,6.5487,6.5487,0,0,0,3.99-1.87C14.1084,6.13,14.579,3.3194,13.1284,1.87Zm-2.2-.04a2.3071,2.3071,0,0,1,1.64.61,2.548,2.548,0,0,1,.5,2.44l-2.95-2.96A3.8648,3.8648,0,0,1,10.9284,1.83Zm-4.57,6.81a2.6485,2.6485,0,0,1-.48-2.55l3.04,3.04A2.8522,2.8522,0,0,1,6.3584,8.64Zm2.88.39-3.26-3.27a5.1623,5.1623,0,0,1,.49-1.08l3.85,3.85A5.5093,5.5093,0,0,1,9.2384,9.03Zm1.34-.66-3.94-3.95a5.2032,5.2032,0,0,1,.74-.9l4.1,4.1A5.6869,5.6869,0,0,1,10.5784,8.37Zm1.11-.96-4.1-4.1a5.5714,5.5714,0,0,1,.84-.65l3.92,3.92A5.7187,5.7187,0,0,1,11.6884,7.41Zm.82-1.09L8.6984,2.5a4.1707,4.1707,0,0,1,1.09-.48l3.2,3.2A5.5656,5.5656,0,0,1,12.5084,6.32Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"theatre-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"path6370\\" d=\\"M0.6055,0.6992C0.3027,0.6992,0,1.0019,0,1.3047v3.7344C0,6.4519,0.578,8,3,8h0.5V6.1836L1.2109,6.1758&#xA;&#x9;c0,0,0.3026-1.1367,1.8164-1.1367c0.3028,0,0.4036,0.0006,0.6055,0.1016V3.7266c0-0.6055,0.2018-1.0078,0.6055-1.3105&#xA;&#x9;C4.541,2.1133,4.789,2,5.3945,2H6V1.3945c0-0.3028-0.1972-0.6582-0.5-0.6582c-0.6055,0-1.1607,0.5684-2.4727,0.5684&#xA;&#x9;C2.0182,1.3047,1.211,0.6992,0.6055,0.6992z M1.75,2.5c0.4142,0,0.75,0.3358,0.75,0.75S2.1642,4,1.75,4S1,3.6642,1,3.25&#xA;&#x9;S1.3358,2.5,1.75,2.5z M5.5,3C5.1972,3,4.9453,3.4238,4.9453,3.7266v3.7344c0,1.4128,0.6053,3.0273,3.0273,3.0273&#xA;&#x9;S11,8.7729,11,7.4609V3.7266C11,3.4238,10.8028,3,10.5,3C9.8945,3,8.9083,3.5,8,3.5S6.1055,3,5.5,3z M6.75,5&#xA;&#x9;C7.1642,5,7.5,5.3358,7.5,5.75S7.1642,6.5,6.75,6.5S6,6.1642,6,5.75S6.3358,5,6.75,5z M9.25,5C9.6642,5,10,5.3358,10,5.75&#xA;&#x9;S9.6642,6.5,9.25,6.5S8.5,6.1642,8.5,5.75S8.8358,5,9.25,5z M6.1562,8.0664h3.7344c0,0-0.3026,1.2109-1.8164,1.2109&#xA;&#x9;S6.1562,8.0664,6.1562,8.0664z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"theatre-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path6342-3\\" d=\\"M2,1c0,0-1,0-1,1v5.1582C1,8.8885,1.354,11,4.5,11H5V8L2.5,9c0,0,0-2.5,2.5-2.5V5&#xA;&#x9;c0-0.7078,0.0868-1.3209,0.5-1.7754C5.8815,2.805,6.5046,1.9674,8.1562,2.7539L9,3.3027V2c0,0,0-1-1-1C7.2922,1,6.0224,2,5,2&#xA;&#x9;S2.7865,1,2,1z M3,3c0.5523,0,1,0.4477,1,1S3.5523,5,3,5S2,4.5523,2,4S2.4477,3,3,3z M7,4c0,0-1,0-1,1v5c0,2,1,4,4,4s4-2,4-4V5&#xA;&#x9;c0-1-1-1-1-1c-0.7078,0-1.9776,1-3,1S7.7865,4,7,4z M8,6c0.5523,0,1,0.4477,1,1S8.5523,8,8,8S7,7.5523,7,7S7.4477,6,8,6z M12,6&#xA;&#x9;c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1s-1-0.4477-1-1S11.4477,6,12,6z M7.5,10H10h2.5c0,0,0,2.5-2.5,2.5S7.5,10,7.5,10z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"toilet-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M3.33,2.19c-0.6075,0-1.1-0.4925-1.1-1.1s0.4925-1.1,1.1-1.1s1.1,0.4925,1.1,1.1v0C4.43,1.6975,3.9375,2.19,3.33,2.19z&#xA;&#x9; M10.27,1.09c0-0.6075-0.4925-1.1-1.1-1.1c-0.6075,0-1.1,0.4925-1.1,1.1s0.4925,1.1,1.1,1.1c0.6036,0,1.0945-0.4864,1.1-1.09V1.09z&#xA;&#x9; M6.51,4.93L6.51,4.93L4.7,3.12l0,0C4.6306,3.0442,4.5328,3.0008,4.43,3H2.22C2.1271,3.0008,2.0378,3.0365,1.97,3.1H2L0.14,4.93&#xA;&#x9;c-0.1709,0.1218-0.2107,0.3591-0.0889,0.53s0.3591,0.2107,0.53,0.0889C0.6155,5.5244,0.6455,5.4944,0.67,5.46l1.58-1.58L0.77,8h1.46&#xA;&#x9;v2.51c-0.0055,0.0365-0.0055,0.0735,0,0.11c0.0339,0.2071,0.2293,0.3475,0.4364,0.3136C2.8274,10.9072,2.9536,10.781,2.98,10.62H3V8&#xA;&#x9;h0.69v2.63l0,0c0.0339,0.2071,0.2293,0.3475,0.4364,0.3136C4.2874,10.9172,4.4136,10.791,4.44,10.63&#xA;&#x9;c0.0055-0.0365,0.0055-0.0735,0-0.11V8h1.44L4.41,3.88L6,5.46l0,0c0.0718,0.0783,0.1738,0.1221,0.28,0.12&#xA;&#x9;c0.2099,0,0.38-0.1701,0.38-0.38l0,0C6.6518,5.0924,6.597,4.9938,6.51,4.93z M8.62,7v3.63&#xA;&#x9;c-0.0335,0.2016,0.1028,0.3921,0.3044,0.4256c0.2016,0.0335,0.3921-0.1028,0.4256-0.3044c0.0067-0.0401,0.0067-0.0811,0-0.1212V7H11&#xA;&#x9;V3.37C11,3.1657,10.8343,3,10.63,3H7.71C7.5057,3,7.34,3.1657,7.34,3.37V7H8.62z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"toilet-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M4.5,3C3.6716,3,3,2.3284,3,1.5S3.6716,0,4.5,0S6,0.6716,6,1.5S5.3284,3,4.5,3z M14,1.5C14,0.6716,13.3284,0,12.5,0&#xA;&#x9;S11,0.6716,11,1.5S11.6716,3,12.5,3S14,2.3284,14,1.5z M8.86,6.64L8.86,6.64L6.38,4.15l0,0C6.2798,4.0492,6.142,3.9949,6,4H3&#xA;&#x9;C2.8697,4.0003,2.7445,4.0503,2.65,4.14l0,0L0.14,6.63c-0.2261,0.177-0.2659,0.5039-0.0889,0.73s0.5039,0.2659,0.73,0.0889&#xA;&#x9;C0.8142,7.423,0.8441,7.3931,0.87,7.36L3,5.2L1,11h2v3.33c-0.0075,0.0497-0.0075,0.1003,0,0.15&#xA;&#x9;c0.0555,0.2761,0.3244,0.455,0.6005,0.3995C3.802,14.839,3.9595,14.6815,4,14.48l0,0V11h1v3.5l0,0&#xA;&#x9;c0.0555,0.2761,0.3244,0.455,0.6005,0.3995C5.802,14.859,5.9595,14.7015,6,14.5c0.0075-0.0497,0.0075-0.1003,0-0.15V11h2L6,5.2&#xA;&#x9;l2.14,2.16l0,0c0.0967,0.1081,0.2349,0.17,0.38,0.17C8.7954,7.5088,9.0061,7.2761,9,7C9.0023,6.8663,8.9521,6.737,8.86,6.64z&#xA;&#x9; M14.5,4h-4C10.2239,4,10,4.2239,10,4.5v5c0,0.2761,0.2239,0.5,0.5,0.5S11,9.7761,11,9.5v5c0,0.2761,0.2239,0.5,0.5,0.5&#xA;&#x9;s0.5-0.2239,0.5-0.5v-5h1v5c0,0.2761,0.2239,0.5,0.5,0.5s0.5-0.2239,0.5-0.5v-5c0,0.2761,0.2239,0.5,0.5,0.5S15,9.7761,15,9.5v-5&#xA;&#x9;C15,4.2239,14.7761,4,14.5,4z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"town-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M3.695,1.1a.256.256,0,0,0-.4,0L1.055,3.931A.254.254,0,0,0,1,4.088V9.75a.25.25,0,0,0,.25.25h1.5A.25.25,0,0,0,3,9.75V8H4V9.75a.25.25,0,0,0,.25.25H5V5.5a.615.615,0,0,1,.147-.4L6,4ZM3,7H2V6H3ZM3,5H2V4H3ZM8.194,3.742a.248.248,0,0,0-.387,0L6.054,5.932A.249.249,0,0,0,6,6.087V9.752A.248.248,0,0,0,6.248,10h3.5A.248.248,0,0,0,10,9.756h0V6.087a.249.249,0,0,0-.054-.155ZM7,6H8V7H7ZM9,9H8V8H9Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"town-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M10.651,7.121a.251.251,0,0,0-.314,0L8.092,8.929A.247.247,0,0,0,8,9.122v4.625A.253.253,0,0,0,8.253,14H9.747A.253.253,0,0,0,10,13.747h0V12h1v1.747a.253.253,0,0,0,.253.253h1.494A.253.253,0,0,0,13,13.747h0V9.12a.25.25,0,0,0-.094-.2ZM10,11H9V10h1Zm2,0H11V10h1ZM5.71,1.815a.252.252,0,0,0-.42,0L2.042,5.936A.252.252,0,0,0,2,6.076v7.671A.252.252,0,0,0,2.251,14h2.5A.252.252,0,0,0,5,13.748V12H6v1.748A.252.252,0,0,0,6.252,14H7V8a.5.5,0,0,1,.188-.391L9,6C9,5.95,5.71,1.815,5.71,1.815ZM4,10H3V9H4ZM4,7H3V6H4Zm2,3H5V9H6ZM6,7H5V6H6Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"town-hall-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M5.5,0L1,2v1h9V2L5.5,0z M2,4v4L1,9v1h9V9L9,8V4H2z M3,5h1v3H3V5z M5,5h1v3H5V5z M7,5h1v3H7V5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"town-hall-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path7509\\" d=\\"M7.5,0L1,3.4453V4h13V3.4453L7.5,0z M2,5v5l-1,1.5547V13h13v-1.4453L13,10V5H2z M4,6h1v5.5H4V6z M7,6h1v5.5H7&#xA;&#x9;V6z M10,6h1v5.5h-1V6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"triangle-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect3338\\" d=\\"M5.5174,1.2315&#xA;&#x9;C5.3163,1.2253,5.1276,1.328,5.024,1.5l-4,6.6598C0.8013,8.5293,1.0679,8.9999,1.5,9h8c0.4321-0.0001,0.6987-0.4707,0.476-0.8402&#xA;&#x9;l-4-6.6598C5.8787,1.3386,5.706,1.2375,5.5174,1.2315z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"triangle-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path21090-9\\" d=\\"M7.5385,2&#xA;&#x9;C7.2437,2,7.0502,2.1772,6.9231,2.3846l-5.8462,9.5385C1,12,1,12.1538,1,12.3077C1,12.8462,1.3846,13,1.6923,13h11.6154&#xA;&#x9;C13.6923,13,14,12.8462,14,12.3077c0-0.1538,0-0.2308-0.0769-0.3846L8.1538,2.3846C8.028,2.1765,7.7882,2,7.5385,2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"triangle-stroked-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect3338\\" d=\\"M5.5174,1.2315&#xA;&#x9;C5.3163,1.2253,5.1276,1.328,5.024,1.5l-4,6.6598C0.8013,8.5293,1.0679,8.9999,1.5,9h8c0.4321-0.0001,0.6987-0.4707,0.476-0.8402&#xA;&#x9;l-4-6.6598C5.8787,1.3386,5.706,1.2375,5.5174,1.2315z M5.5,2.8627l3.0191,5.0286H2.4809L5.5,2.8627z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"triangle-stroked-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"rect3338\\" d=\\"M7.5243,1.5004&#xA;&#x9;C7.2429,1.4913,6.9787,1.6423,6.8336,1.8952l-5.5,9.8692C1.0218,12.3078,1.395,12.9999,2,13h11&#xA;&#x9;c0.605-0.0001,0.9782-0.6922,0.6664-1.2355l-5.5-9.8692C8.0302,1.6579,7.7884,1.5092,7.5243,1.5004z M7.5,3.8993l4.1267,7.4704&#xA;&#x9;H3.3733L7.5,3.8993z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"veterinary-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M5.5,4.32C4.2852,4.3446,3.3204,5.3493,3.345,6.5641C3.3464,6.6363,3.3515,6.7083,3.36,6.78l0,0&#xA;&#x9;C2.9264,6.9258,2.5181,7.1384,2.15,7.41C1.5186,7.8752,1.384,8.7642,1.8492,9.3955C1.8528,9.4004,1.8564,9.4052,1.86,9.41&#xA;&#x9;c0.4895,0.6043,1.3633,0.7267,2,0.28C4.3412,9.3542,4.9132,9.1728,5.5,9.17c0.5836-0.006,1.1554,0.1648,1.64,0.49&#xA;&#x9;c0.6009,0.4953,1.4896,0.4096,1.9848-0.1913C9.1299,9.4625,9.135,9.4563,9.14,9.45c0.5003-0.5528,0.4578-1.4065-0.095-1.9068&#xA;&#x9;C9.0084,7.51,8.97,7.4789,8.93,7.45L8.85,7.41C8.4703,7.1575,8.0646,6.9463,7.64,6.78l0,0c0.1438-1.2065-0.7176-2.3011-1.9241-2.445&#xA;&#x9;C5.6442,4.3265,5.5722,4.3215,5.5,4.32z M1.63,3.12C1.0889,3.3737,0.8458,4.0102,1.08,4.56c0.0427,0.5931,0.5567,1.0401,1.15,1&#xA;&#x9;c0.5411-0.2537,0.7842-0.8902,0.55-1.44C2.7373,3.5269,2.2233,3.0799,1.63,3.12z M9.37,3.12c0.5411,0.2537,0.7842,0.8902,0.55,1.44&#xA;&#x9;c-0.0427,0.5931-0.5567,1.0401-1.15,1C8.2289,5.3063,7.9858,4.6698,8.22,4.12C8.2627,3.5269,8.7767,3.0799,9.37,3.12z M3.77,1&#xA;&#x9;C3.257,1.2045,3.0069,1.7862,3.2115,2.2992C3.2142,2.3062,3.2171,2.3131,3.22,2.32c0.0792,0.5925,0.5637,1.0478,1.16,1.09&#xA;&#x9;c0.513-0.2045,0.7631-0.7862,0.5585-1.2992C4.9358,2.1038,4.9329,2.0969,4.93,2.09C4.8508,1.4975,4.3663,1.0422,3.77,1z M7.23,1&#xA;&#x9;c0.513,0.2045,0.7631,0.7862,0.5585,1.2992C7.7858,2.3062,7.7829,2.3131,7.78,2.32C7.7008,2.9125,7.2163,3.3678,6.62,3.41&#xA;&#x9;C6.107,3.2055,5.8569,2.6238,6.0615,2.1108C6.0642,2.1038,6.0671,2.0969,6.07,2.09C6.1492,1.4975,6.6337,1.0422,7.23,1z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"veterinary-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path3340\\" d=\\"M7.5,6c-2.5,0-3,2.28-3,3.47l0,0c-0.6097,0.2059-1.1834,0.5062-1.7,0.89&#xA;&#x9;c-0.871,0.6614-1.0492,1.8998-0.4,2.78c0.6799,0.8542,1.9081,1.0297,2.8,0.4c0.6779-0.4601,1.4808-0.701,2.3-0.69&#xA;&#x9;c0.8192-0.011,1.6221,0.2299,2.3,0.69c0.8575,0.6854,2.1072,0.5515,2.8-0.3c0.6888-0.8134,0.5878-2.0313-0.2256-2.7201&#xA;&#x9;c-0.0243-0.0206-0.0491-0.0406-0.0744-0.0599l-0.1-0.1c-0.5333-0.3564-1.1032-0.6548-1.7-0.89l0,0C10.5,8.29,10,6,7.5,6z\\"/>\\n  <path id=\\"ellipse4153\\" d=\\"M2.08,4.3c-0.7348,0.3676-1.0652,1.2371-0.76,2c0.064,0.8282,0.7809,1.4517,1.61,1.4&#xA;&#x9;c0.7348-0.3676,1.0652-1.2371,0.76-2C3.626,4.8718,2.9091,4.2483,2.08,4.3z\\"/>\\n  <path id=\\"ellipse4163\\" d=\\"M12.93,4.3c0.7348,0.3676,1.0653,1.2371,0.76,2c-0.064,0.8282-0.7809,1.4517-1.61,1.4&#xA;&#x9;c-0.7348-0.3676-1.0653-1.2371-0.76-2C11.384,4.8718,12.1009,4.2483,12.93,4.3z\\"/>\\n  <path id=\\"ellipse4165\\" d=\\"M5.08,1.3c-0.68,0.09-1,0.94-0.76,1.87C4.4301,3.9951,5.1003,4.6321,5.93,4.7c0.68-0.09,1-0.94,0.76-1.87&#xA;&#x9;C6.5799,2.0049,5.9097,1.3679,5.08,1.3z\\"/>\\n  <path id=\\"ellipse4167\\" d=\\"M9.93,1.3c0.68,0.09,1,0.94,0.76,1.87C10.5791,3.9986,9.9036,4.6365,9.07,4.7c-0.68-0.08-1-0.94-0.76-1.87&#xA;&#x9;C8.4209,2.0014,9.0964,1.3634,9.93,1.3z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"viewpoint-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"e46c0471-5704-47b4-a95f-3ffb079cac96\\" d=\\"M4.4029,5.7765a.852.852,0,0,0-.183.2151L.75,3.3215a5.78,5.78,0,0,1,1.1-1.11ZM9.15,2.2216,6.6059,5.7824a1.3786,1.3786,0,0,1,.1841.1992l3.47-2.66A5.78,5.78,0,0,0,9.15,2.2216ZM5.37,7.0087a1,1,0,1,0,1.122.8609A1,1,0,0,0,5.37,7.0087ZM4.72,1.0216a5.7742,5.7742,0,0,0-1.52.41L4.9676,5.4353a.815.815,0,0,1,.2382-.0618Zm1.56.01L5.8265,5.3853a.7611.7611,0,0,1,.2059.0441L7.79,1.4315A5.5185,5.5185,0,0,0,6.28,1.0316Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"viewpoint-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"cf3b542b-d2af-4732-9b92-9e3dc05e460f\\" d=\\"M6.02,8.425a2.3859,2.3859,0,0,0-.46.44l-4.55-3.5a7.9976,7.9976,0,0,1,1.51-1.51Zm6.46-4.56-3.5,4.55a2.3971,2.3971,0,0,1,.45.45l4.56-3.5A7.945,7.945,0,0,0,12.48,3.865ZM7.3042,10.0129a1.5,1.5,0,1,0,1.6829,1.2914h0A1.5,1.5,0,0,0,7.3042,10.0129ZM6.43,2.235a7.9329,7.9329,0,0,0-2.06.55l2.2,5.32a2.0438,2.0438,0,0,1,.61-.17Zm2.14.01-.75,5.69a2.49,2.49,0,0,1,.61.16l2.2-5.3A7.2129,7.2129,0,0,0,8.57,2.245Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"village-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M2.777,2.3.3,5.6a.272.272,0,0,0-.05.15A.25.25,0,0,0,.5,6H1V9.745A.255.255,0,0,0,1.255,10h2.49A.255.255,0,0,0,4,9.745H4V5.467A.253.253,0,0,1,4.064,5.3L5,4.5,3.2,2.316A.255.255,0,0,0,2.777,2.3ZM3,7H2V6H3ZM9.75,3h-.5A.25.25,0,0,0,9,3.25V5.2L7.658,4.126a.253.253,0,0,0-.316,0L5.1,5.926a.253.253,0,0,0-.095.2V9.747A.253.253,0,0,0,5.253,10H6.747A.253.253,0,0,0,7,9.747H7V8H8V9.747A.253.253,0,0,0,8.253,10H9.747A.253.253,0,0,0,10,9.747h0V3.25A.25.25,0,0,0,9.75,3ZM7,7H6V6H7ZM9,7H8V6H9Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"village-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M6.176,4.176a.249.249,0,0,0-.352,0l-4.4,4.4A.25.25,0,0,0,1.6,9H3v4.751A.249.249,0,0,0,3.249,14h3.5A.249.249,0,0,0,7,13.753H7V8.323a.249.249,0,0,1,.073-.176L8.5,6.5ZM6,12H5V11H6Zm0-2H5V9H6Zm6.75-4h-.5a.25.25,0,0,0-.25.25V8L10.676,6.176a.249.249,0,0,0-.352,0L8.056,8.932A.246.246,0,0,0,8,9.088v4.66A.249.249,0,0,0,8.246,14h1.5A.253.253,0,0,0,10,13.748h0V12h1v1.747a.253.253,0,0,0,.253.253h1.5A.25.25,0,0,0,13,13.751V6.25A.25.25,0,0,0,12.75,6ZM10,11H9V10h1Zm2,0H11V10h1Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"volcano-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path id=\\"rect3338\\" d=\\"M3,1l1.5,3h2L8,3V2L6,3V1H5.5L5,2.5L3.5,1H3z M3.5215,5l-2.498,4.1602C0.8007,9.5296,1.0679,9.9999,1.5,10h8&#xA;&#x9;c0.4321-0.0001,0.6993-0.4704,0.4766-0.8398L7.4785,5H7v0.5C7,5.777,6.777,6,6.5,6S6,5.777,6,5.5C6,5.2239,5.7761,5,5.5,5&#xA;&#x9;S5,5.2239,5,5.5v2C5,7.777,4.777,8,4.5,8S4,7.777,4,7.5V5H3.5215z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"volcano-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path6447\\" d=\\"M8.4844,1.0002&#xA;&#x9;c-0.1464,0.005-0.2835,0.0731-0.375,0.1875L6.4492,3.2619L4.8438,1.7385C4.4079,1.3374,3.7599,1.893,4.0899,2.385l1.666,2.4004&#xA;&#x9;C5.9472,5.061,6.3503,5.0737,6.5586,4.8108C6.7249,4.6009,7,4.133,7.5,4.133s0.7929,0.4907,0.9414,0.6777&#xA;&#x9;c0.175,0.2204,0.4973,0.2531,0.7129,0.0723l1.668-1.4004c0.4408-0.3741,0.0006-1.0735-0.5273-0.8379L9,3.2268V1.5002&#xA;&#x9;C9.0002,1.2179,8.7666,0.9915,8.4844,1.0002L8.4844,1.0002z M5,6.0002L2.0762,11.924C1.9993,12.0009,2,12.155,2,12.3088&#xA;&#x9;c0,0.5385,0.3837,0.6914,0.6914,0.6914h9.6172c0.3846,0,0.6914-0.153,0.6914-0.6914c0-0.1538,0.0008-0.2309-0.0762-0.3848L10,6.0002&#xA;&#x9;c-0.5,0-1,0.5-1,1v0.5c0,0.277-0.223,0.5-0.5,0.5S8,7.7772,8,7.5002v-0.5c0-0.2761-0.2238-0.5-0.5-0.5S7,6.7241,7,7.0002v2&#xA;&#x9;c0,0.277-0.223,0.5-0.5,0.5S6,9.2772,6,9.0002v-2C6,6.5002,5.5,6.0002,5,6.0002z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"volleyball-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.99,5.73a3.6572,3.6572,0,0,1-.1.74A6.3224,6.3224,0,0,0,7.44,5.05a5.9537,5.9537,0,0,0-1.32-.27c-.03,0-.07-.01-.11-.01A4.6052,4.6052,0,0,1,5.5,3.64a1.0563,1.0563,0,0,1-.06-.24h.12a4.8784,4.8784,0,0,1,1.01.11,5.0388,5.0388,0,0,1,1.14.36,4.8341,4.8341,0,0,1,.94.53A5.1356,5.1356,0,0,1,9.99,5.73ZM9.33,7.31a5.1964,5.1964,0,0,0-1.36-.97c-.05.1-.11.19-.17.29a5.8645,5.8645,0,0,1-.59.82,7.1807,7.1807,0,0,1-.78.78,6.72,6.72,0,0,1-.93.65,6.3643,6.3643,0,0,1-1.86.72,4.524,4.524,0,0,0,3.72,0,4.1584,4.1584,0,0,0,1.25-.86,3.1983,3.1983,0,0,0,.43-.47,3.7473,3.7473,0,0,0,.48-.76A1.1915,1.1915,0,0,0,9.33,7.31ZM8.68,2.32a4.5077,4.5077,0,0,0-1.24-.88,3.979,3.979,0,0,0-.75-.28,4.3423,4.3423,0,0,0-1.03-.15,1.2787,1.2787,0,0,0-.32,0A5.3628,5.3628,0,0,0,5.25,2c0,.14.01.28.02.41a1.6165,1.6165,0,0,1,.22-.01,1.9237,1.9237,0,0,1,.24.01,6.6508,6.6508,0,0,1,1,.11,5.6947,5.6947,0,0,1,1,.28,6.7814,6.7814,0,0,1,1.02.47,6.6645,6.6645,0,0,1,.98.69A4.5655,4.5655,0,0,0,8.68,2.32ZM3.03,6.34a5.808,5.808,0,0,1-.4-.92,5.7849,5.7849,0,0,1-.28-1.03,6.86,6.86,0,0,1-.1-1.12V3.25a5.656,5.656,0,0,1,.07-.93A4.3939,4.3939,0,0,0,1.27,3.97,4.3206,4.3206,0,0,0,1,5.5a1.7671,1.7671,0,0,0,.01.23,4.4161,4.4161,0,0,0,.09.73,4.0749,4.0749,0,0,0,.31.91,1.0685,1.0685,0,0,0,.27-.07A5.0679,5.0679,0,0,0,3.2,6.63C3.14,6.53,3.08,6.44,3.03,6.34Zm3.88-.4a5.4992,5.4992,0,0,0-1.35-.19c-.02.03-.04.05-.06.08a6.2466,6.2466,0,0,1-.91,1.01,5.8334,5.8334,0,0,1-.8.61,6.5727,6.5727,0,0,1-1.83.82,3.1983,3.1983,0,0,0,.43.47,5.1724,5.1724,0,0,0,2.18-.51,5.4146,5.4146,0,0,0,.93-.55,5.5958,5.5958,0,0,0,.91-.84A4.8049,4.8049,0,0,0,7,6.01a.0517.0517,0,0,0,.02-.04A.2283.2283,0,0,0,6.91,5.94ZM4.88,4.78a5.6391,5.6391,0,0,1-.45-1.27,6.3861,6.3861,0,0,1-.16-.99c-.01-.17-.02-.35-.02-.52a5.83,5.83,0,0,1,.06-.84,3.9815,3.9815,0,0,0-.75.28A5.5806,5.5806,0,0,0,3.27,2.8c-.01.15-.02.3-.02.45a4.2153,4.2153,0,0,0,.04.62,4.7107,4.7107,0,0,0,.27,1.18,5.0984,5.0984,0,0,0,.42.92A.0517.0517,0,0,0,4,6.01a.1778.1778,0,0,0,.08-.07h.01a5.6817,5.6817,0,0,0,.84-1.06A.3131.3131,0,0,1,4.88,4.78Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"volleyball-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"e086ca83-8703-4df5-a97c-5939eb32113a\\" d=\\"M13.91,7.94a5.9086,5.9086,0,0,1-.13.94,8.8218,8.8218,0,0,0-2.17-1.49,8.89,8.89,0,0,0-1.4-.56,8.6142,8.6142,0,0,0-1.82-.35.221.221,0,0,0-.08-.01A7.32,7.32,0,0,1,7.5,4.59c-.01-.01-.01-.01,0-.02a7.7573,7.7573,0,0,1,1.52.15,7.0987,7.0987,0,0,1,1.56.5,6.8585,6.8585,0,0,1,1.4.78A7.4165,7.4165,0,0,1,13.91,7.94Zm-1.87-5a6.2232,6.2232,0,0,0-1.85-1.27,4.2725,4.2725,0,0,0-.98-.36,5.6412,5.6412,0,0,0-1.55-.23,1.2882,1.2882,0,0,0-.32,0A7.4263,7.4263,0,0,0,7.21,2.5c0,.2.01.39.02.58a2.28,2.28,0,0,1,.26-.01,2.6438,2.6438,0,0,1,.28.01,8.2865,8.2865,0,0,1,1.49.16,8.9879,8.9879,0,0,1,1.35.37,8.7922,8.7922,0,0,1,1.53.7,10.18,10.18,0,0,1,1.39.97A6.4588,6.4588,0,0,0,12.04,2.94ZM4.01,8.76a9.4084,9.4084,0,0,1-.62-1.37,9.1038,9.1038,0,0,1-.37-1.41,9.1748,9.1748,0,0,1-.16-1.67V4.28a8.455,8.455,0,0,1,.1-1.34A6.28,6.28,0,0,0,1.47,5.3a6.2222,6.2222,0,0,0-.4,2.2c0,.15.01.3.02.44a5.9086,5.9086,0,0,0,.13.94,5.7343,5.7343,0,0,0,.41,1.23c.22-.05.44-.11.65-.17a8.0188,8.0188,0,0,0,1.9-.88C4.12,8.96,4.06,8.86,4.01,8.76Zm2.6-2.28a9,9,0,0,1-.63-1.76,9.135,9.135,0,0,1-.24-1.48c-.02-.25-.03-.49-.03-.74a9.3777,9.3777,0,0,1,.08-1.19,4.2725,4.2725,0,0,0-.98.36,7.7038,7.7038,0,0,0-.42,1.94c-.02.22-.03.44-.03.67a7.2659,7.2659,0,0,0,.06.93,7.4258,7.4258,0,0,0,.37,1.63,6.4705,6.4705,0,0,0,.59,1.28A8.0174,8.0174,0,0,0,6.65,6.55.2522.2522,0,0,1,6.61,6.48ZM12.7,9.93s0-.01-.01,0a7.0128,7.0128,0,0,0-1.7-1.16c-.06.1-.11.19-.17.29a8.783,8.783,0,0,1-.88,1.22,8.9125,8.9125,0,0,1-1.06,1.07,10.4181,10.4181,0,0,1-1.38.98,8.9933,8.9933,0,0,1-2.64,1.02,6.2985,6.2985,0,0,0,5.28,0,5.9674,5.9674,0,0,0,2.42-1.89,4.8258,4.8258,0,0,0,.65-1.03A6.0315,6.0315,0,0,0,12.7,9.93Zm-5.17-2c-.01.01-.02.03-.03.04a9.26,9.26,0,0,1-1.25,1.4,9.5925,9.5925,0,0,1-1.19.91,9.2683,9.2683,0,0,1-2.62,1.18,6.0989,6.0989,0,0,0,.53.61,7.7353,7.7353,0,0,0,3.15-.72,7.3839,7.3839,0,0,0,1.38-.82A7.6429,7.6429,0,0,0,8.75,9.37a7.7441,7.7441,0,0,0,.82-1.15A7.3414,7.3414,0,0,0,7.53,7.93Z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"warehouse-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M3,11H0V8h3V11z M7,8H4v3h3V8z M11,8H8v3h3V8z M5,4H2v3h3V4z M9,4H6v3h3V4z M10.44,3.24&#xA;&#x9;c0.1349-0.2403,0.0499-0.5444-0.19-0.68l-4.5-2.5c-0.1521-0.0855-0.3379-0.0855-0.49,0l-4.5,2.5&#xA;&#x9;C0.5272,2.7085,0.4588,3.0176,0.6073,3.2504C0.7444,3.4654,1.0213,3.5428,1.25,3.43L5.5,1.07l4.26,2.37&#xA;&#x9;c0.2421,0.1328,0.546,0.0442,0.6789-0.1979C10.4392,3.2414,10.4396,3.2407,10.44,3.24z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"warehouse-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M13.5,5c-0.0762,0.0003-0.1514-0.0168-0.22-0.05L7.5,2L1.72,4.93C1.4632,5.0515,1.1565,4.9418,1.035,4.685&#xA;&#x9;S1.0232,4.1215,1.28,4L7.5,0.92L13.72,4c0.2761,0.0608,0.4508,0.3339,0.39,0.61C14.0492,4.8861,13.7761,5.0608,13.5,5z M5,10H2v3h3&#xA;&#x9;V10z M9,10H6v3h3V10z M13,10h-3v3h3V10z M11,6H8v3h3V6z M7,6H4v3h3V6z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"waste-basket-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9,4l-1.17,7H3.17L2,4H9z M9.25,2.25C9.25,2.3881,9.1381,2.5,9,2.5H2c-0.1381,0-0.25-0.1119-0.25-0.25S1.8619,2,2,2h2V0h3&#xA;&#x9;v0.5l0,0V2h2C9.1381,2,9.25,2.1119,9.25,2.25z M6.5,2V0.5h-2V2H6.5z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"waste-basket-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M12.41,5.58l-1.34,8c-0.0433,0.2368-0.2493,0.4091-0.49,0.41H4.42c-0.2407-0.0009-0.4467-0.1732-0.49-0.41l-1.34-8&#xA;&#x9;C2.5458,5.3074,2.731,5.0506,3.0035,5.0064C3.0288,5.0023,3.0544,5.0002,3.08,5h8.83c0.2761-0.0036,0.5028,0.2174,0.5064,0.4935&#xA;&#x9;C12.4168,5.5225,12.4146,5.5514,12.41,5.58z M13,3.5C13,3.7761,12.7761,4,12.5,4h-10C2.2239,4,2,3.7761,2,3.5S2.2239,3,2.5,3H5V1.5&#xA;&#x9;C5,1.2239,5.2239,1,5.5,1h4C9.7761,1,10,1.2239,10,1.5V3h2.5C12.7761,3,13,3.2239,13,3.5z M9,3V2H6v1H9z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"watch-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <g>\\n    <path d=\\"M9.0769,5.1538H8.9651C8.8412,3.9112,8.0789,2.8648,7,2.3497V1H4v1.3497C2.8208,2.9127,2,4.1062,2,5.5&#xA;&#x9;&#x9;s0.8208,2.5873,2,3.1503V10h3V8.6503c1.0789-0.5151,1.8413-1.5615,1.9651-2.8041h0.1118c0.1912,0,0.3462-0.155,0.3462-0.3461&#xA;&#x9;&#x9;S9.2681,5.1538,9.0769,5.1538z M5.5,8C4.1193,8,3,6.8807,3,5.5C3,4.1193,4.1193,3,5.5,3S8,4.1193,8,5.5C8,6.8807,6.8807,8,5.5,8z\\"/>\\n    <path d=\\"M6.5,5H6V4c0-0.2762-0.2239-0.5-0.5-0.5S5,3.7238,5,4v1.5C5,5.7761,5.2239,6,5.5,6h1C6.7761,6,7,5.7761,7,5.5&#xA;&#x9;&#x9;C7,5.2238,6.7761,5,6.5,5z\\"/>\\n  </g>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"watch-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M12.5,7H12c-0.0175,0-0.0323,0.0082-0.0494,0.0099C11.8021,5.6575,11.0757,4.4804,10,3.7599V1.4977&#xA;&#x9;&#x9;C10,1.2228,9.7772,1,9.5023,1H5.4977C5.2228,1,5,1.2228,5,1.4977v2.2621C3.7946,4.5673,3,5.9402,3,7.5s0.7946,2.9327,2,3.7401&#xA;&#x9;&#x9;v2.2621C5,13.7771,5.2228,14,5.4977,14h4.0045C9.7772,14,10,13.7771,10,13.5022v-2.2621c1.0757-0.7205,1.8021-1.8976,1.9506-3.2501&#xA;&#x9;&#x9;C11.9677,7.9918,11.9825,8,12,8h0.5C12.7761,8,13,7.7761,13,7.5C13,7.2238,12.7761,7,12.5,7z M7.5,11C5.567,11,4,9.433,4,7.5&#xA;&#x9;&#x9;S5.567,4,7.5,4S11,5.567,11,7.5S9.433,11,7.5,11z\\"/>\\n  <path d=\\"M9,7H8V5.5C8,5.2238,7.7761,5,7.5,5S7,5.2238,7,5.5v2C7,7.7761,7.2239,8,7.5,8H9c0.2761,0,0.5-0.2239,0.5-0.5&#xA;&#x9;&#x9;C9.5,7.2238,9.2761,7,9,7z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"water-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M5.5,11C3.59,11,2,9,2,7s2.61-5.81,3.5-7C6.39,1.19,9,5,9,7S7.41,11,5.5,11z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"water-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M7.49,15C4.5288,14.827,2.1676,12.4615,2,9.5C2,6.6,6.25,1.66,7.49,0c1.24,1.66,5,6.59,5,9.49S10.17,15,7.49,15z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"waterfall-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11\\" height=\\"11\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.9,2H11V1H4C2.4,1,1,2.2,1,3.9c0,0,0,0,0,0c0,0,0,3.4,0,3.4C0,7.8-0.3,9,0.3,10c0.6,1,1.8,1.3,2.7,0.7&#xA;&#x9;c0.7,0.4,1.7,0.3,2.3-0.2c1.4,0.9,3.2,0.6,4.2-0.8c0.9-1.4,0.6-3.2-0.8-4.2C8.5,5.4,8.2,5.3,8,5.2V4C8,2.9,8.8,2,9.9,2z M9,8&#xA;&#x9;c0,1.1-0.9,2-2,2c-1,0-1.1-0.3-1.3-0.5H4.9C4.7,9.7,4.5,10,4,10S3.3,9.8,3.2,9.5H2.8C2.7,9.8,2.4,10,2,10c-0.6,0-1-0.4-1-1&#xA;&#x9;s0.4-1,1-1V7V5c0,0,0-0.5,0.5-0.5S3,5,3,5v2.5C3,7.5,3,8,3.5,8S4,7.5,4,7.5V6c0,0,0-0.5,0.5-0.5S5,6,5,6v1.5C5,7.5,5,8,5.5,8&#xA;&#x9;S6,7.5,6,7.5V5c0,0,0-0.5,0.5-0.5S7,5,7,5v1C8.1,6,9,6.9,9,8z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg id=\\"waterfall-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15\\" height=\\"15\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M12.9,3H15V1H5c0,0-4,0-4,4v5.5h0c-1.1,0.8-1.3,2.4-0.5,3.5s2.4,1.3,3.5,0.5c1,0.8,2.5,0.6,3.4-0.4C8,14.7,8.9,15,9.8,15&#xA;&#x9;c2.1,0,3.7-1.6,3.8-3.7c0-1.6-1-3-2.5-3.5V5C11,3.9,11.8,3,12.9,3z M10,8v0.5c1.5,0.1,2.6,1.5,2.5,3c-0.1,1.4-1.3,2.5-2.7,2.5&#xA;&#x9;c-1.1,0.1-1.8-0.6-2.1-1H6.9c-0.1,0.2-0.4,1-1.4,1s-1.3-0.6-1.4-1H3.9c-0.2,0.4-0.5,0.8-0.9,0.9c-0.9,0.3-1.7-0.2-1.9-1&#xA;&#x9;c-0.2-0.8,0.2-1.6,0.9-1.8V6c0-0.5,0.4-1,1-1c0,0,0,0,0,0h0c0.5,0,1,0.4,1,1c0,0,0,0,0,0c0,0,0,0,0,0v4.5C4,10.8,4.2,11,4.5,11&#xA;&#x9;S5,10.8,5,10.5V7c0-0.6,0.4-1,1-1s1,0.4,1,1v3.5C7,10.8,7.2,11,7.5,11S8,10.8,8,10.5V6c0-0.6,0.4-1,1-1s1,0.4,1,1V8z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"watermill-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9.9874,4.375C9.9216,2.5436,8.4563,1.0784,6.625,1.0126V1h-0.25v0.0126C5.274,1.0521,4.3123,1.6034,3.7004,2.4301L2.5059,1&#xA;&#x9;L0,4h1v4l1.8-1l1.8,1l1.1202-0.6218C5.2513,7.2512,4.825,7.021,4.4765,6.7003L6.252,4.9247c0.0385,0.0226,0.0788,0.0383,0.123,0.05&#xA;&#x9;v2.0399L6.4014,7L6.625,7.1243V4.9747c0.0442-0.0117,0.0845-0.0274,0.123-0.05l1.7755,1.7755&#xA;&#x9;C8.1429,7.0505,7.6736,7.3016,7.1526,7.4177l0.5937,0.3301C9.0195,7.2596,9.9359,6.0602,9.9874,4.625H10v-0.25H9.9874z&#xA;&#x9; M4.2997,6.5235C3.8347,6.0182,3.5435,5.3568,3.5126,4.625h2.5126c0.0117,0.0442,0.0274,0.0845,0.05,0.123L4.2997,6.5235z&#xA;&#x9; M6.0253,4.375H3.5126c0.0308-0.7318,0.3221-1.3932,0.7871-1.8985L6.0753,4.252C6.0527,4.2905,6.037,4.3308,6.0253,4.375z&#xA;&#x9; M6.375,4.0253c-0.0442,0.0117-0.0845,0.0274-0.123,0.05L4.4765,2.2997c0.5053-0.465,1.1667-0.7563,1.8985-0.7871V4.0253z&#xA;&#x9; M6.625,4.0253V1.5126c0.7318,0.0308,1.3932,0.3221,1.8985,0.7871L6.748,4.0753C6.7095,4.0527,6.6692,4.037,6.625,4.0253z&#xA;&#x9; M8.7003,6.5235L6.9247,4.748c0.0226-0.0385,0.0383-0.0788,0.05-0.123h2.5126C9.4565,5.3568,9.1653,6.0182,8.7003,6.5235z&#xA;&#x9; M6.9747,4.375c-0.0117-0.0442-0.0274-0.0845-0.05-0.123l1.7755-1.7755c0.465,0.5053,0.7563,1.1667,0.7871,1.8985H6.9747z M6.4014,8&#xA;&#x9;L4.6,9L3.808,8.56l0,0L2.8,8L1.792,8.56l0,0L1,9v1l1.8-1l1.8,1l1.8014-1L8.2,10L10,9V8L8.2,9L6.4014,8z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"watermill-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M2,10.2L4,9l2.5,1.5l1.4659-0.8788C7.6592,9.4698,7.3716,9.285,7.1231,9.0536l1.4131-1.4131&#xA;&#x9;C8.7672,7.836,9.0557,7.9606,9.375,7.9874V9.224l0.25,0.1501V7.9874c0.3193-0.0268,0.6078-0.1514,0.8388-0.3469l1.4131,1.4131&#xA;&#x9;c-0.4059,0.3781-0.9044,0.6492-1.4528,0.8003L11.5,10.5l0.6984-0.4191C13.2863,9.2595,14,7.9682,14,6.5C14,4.0147,11.9853,2,9.5,2&#xA;&#x9;C8.1917,2,7.0241,2.5674,6.2018,3.4587L4.5,2L1,5h1V10.2z M12.0536,8.8769l-1.4131-1.4131c0.1954-0.231,0.3201-0.5196,0.3469-0.8388&#xA;&#x9;h1.9999C12.956,7.4946,12.6089,8.2806,12.0536,8.8769z M12.9874,6.375h-1.9999c-0.0268-0.3193-0.1514-0.6078-0.3469-0.8388&#xA;&#x9;l1.4131-1.4131C12.6089,4.7193,12.956,5.5054,12.9874,6.375z M9.625,3.0126c0.8696,0.0314,1.6557,0.3784,2.2519,0.9337&#xA;&#x9;l-1.4131,1.4131c-0.231-0.1954-0.5196-0.32-0.8388-0.3468C9.625,5.0126,9.625,3.0126,9.625,3.0126z M9.375,3.0126v1.9999&#xA;&#x9;C9.0558,5.0394,8.7672,5.164,8.5362,5.3594L7.1231,3.9463C7.7193,3.3911,8.5054,3.044,9.375,3.0126z M6.9464,4.1231l1.4131,1.4131&#xA;&#x9;C8.164,5.7672,8.0394,6.0557,8.0126,6.375h-2C6.044,5.5054,6.3911,4.7193,6.9464,4.1231z M8.0126,6.625&#xA;&#x9;c0.0268,0.3192,0.1515,0.6078,0.3469,0.8388L6.9464,8.8769C6.3911,8.2807,6.044,7.4946,6.0126,6.625H8.0126z M9.002,10L6.5,11.5&#xA;&#x9;L4,10l-2.5,1.5V13L4,11.5L6.5,13l2.502-1.5L11.5,13l2.5-1.5V10l-2.5,1.5L9.002,10z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"wetland-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M1.11,3.33C1.4171,3.0907,1.8016,2.9732,2.19,3C3.0659,2.9354,3.8483,3.5449,4,4.41L4.57,7.8&#xA;&#x9;c-0.455-0.219-0.985-0.219-1.44,0L2.56,4.41C2.3459,3.7852,1.7699,3.3562,1.11,3.33z M5.45,8.21&#xA;&#x9;c0.276-0.2223,0.5966-0.3826,0.94-0.47l0.9-5.5c0.2141-0.6248,0.7901-1.0538,1.45-1.08C8.4346,0.9076,8.0456,0.7791,7.65,0.8&#xA;&#x9;C6.7643,0.7373,5.978,1.3629,5.84,2.24L4.9,7.88C5.0968,7.9658,5.2817,8.0767,5.45,8.21z M8.58,7.85L8.58,7.85&#xA;&#x9;C8.6925,7.7563,8.8129,7.6727,8.94,7.6l0.5-3.21c0.2108-0.6287,0.7875-1.0622,1.45-1.09c-0.3054-0.2524-0.6944-0.3809-1.09-0.36&#xA;&#x9;C8.9147,2.8833,8.1331,3.5129,8,4.39l-0.48,3c0.3812,0.0689,0.7409,0.2264,1.05,0.46H8.58z M10.14,8.75L10.14,8.75&#xA;&#x9;c-0.3136-0.0079-0.6193,0.0988-0.86,0.3l-0.34,0.3c-0.2017,0.1717-0.4983,0.1717-0.7,0L7.91,9.07&#xA;&#x9;c-0.5123-0.4282-1.2577-0.4282-1.77,0L5.8,9.37c-0.2,0.1661-0.49,0.1661-0.69,0L4.77,9.05C4.2553,8.6247,3.5099,8.6289,3,9.06&#xA;&#x9;C2.89,9.15,2.79,9.25,2.68,9.34C2.6141,9.3899,2.5395,9.4272,2.46,9.45C2.2484,9.4973,2.0276,9.4288,1.88,9.27&#xA;&#x9;C1.7014,9.1151,1.5108,8.9747,1.31,8.85C1.1537,8.7667,0.9762,8.7318,0.8,8.75l0,0c-0.1988,0-0.36,0.1612-0.36,0.36&#xA;&#x9;c0,0.1988,0.1612,0.36,0.36,0.36l0,0C0.9778,9.4824,1.1434,9.5652,1.26,9.7l0.22,0.2c0.4962,0.3888,1.1938,0.3888,1.69,0&#xA;&#x9;c0.14-0.1,0.26-0.23,0.4-0.34c0.2034-0.1775,0.5066-0.1775,0.71,0l0.25,0.29c0.514,0.4338,1.266,0.4338,1.78,0&#xA;&#x9;c0.11-0.08,0.2-0.18,0.3-0.27c0.2185-0.2174,0.5715-0.2174,0.79,0l0.29,0.3c0.3601,0.3115,0.8561,0.4138,1.31,0.27&#xA;&#x9;c0.2642-0.0794,0.5024-0.2278,0.69-0.43c0.1208-0.1486,0.2987-0.2394,0.49-0.25l0,0c0.2016-0.0138,0.3538-0.1884,0.34-0.39&#xA;&#x9;s-0.1884-0.3538-0.39-0.34L10.14,8.75z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"wetland-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M1.48,4.5C1.905,4.1467,2.4483,3.968,3,4c1.2273-0.0869,2.3154,0.7836,2.5,2l0.78,4.68c-0.6394-0.2893-1.3759-0.2709-2,0.05&#xA;&#x9;L3.48,6C3.1874,5.1347,2.3926,4.5387,1.48,4.5z M7.48,11.24c0.3816-0.3076,0.825-0.5293,1.3-0.65L10,3&#xA;&#x9;c0.2926-0.8653,1.0874-1.4613,2-1.5c-0.4198-0.3485-0.955-0.5269-1.5-0.5C9.2727,0.9131,8.1846,1.7836,8,3l-1.3,7.79&#xA;&#x9;C6.9786,10.9052,7.2408,11.0565,7.48,11.24z M11.8,10.74L11.8,10.74c0.1565-0.1277,0.3238-0.2414,0.5-0.34L13,6&#xA;&#x9;c0.2926-0.8653,1.0874-1.4613,2-1.5c-0.4198-0.3485-0.955-0.5269-1.5-0.5c-1.2273-0.0869-2.3154,0.7836-2.5,2l-0.67,4&#xA;&#x9;C10.8731,10.123,11.3778,10.377,11.8,10.74z M14,12L14,12c-0.4346-0.01-0.8579,0.1394-1.19,0.42l-0.47,0.41&#xA;&#x9;c-0.2847,0.2546-0.7153,0.2546-1,0c-0.15-0.12-0.29-0.26-0.44-0.39c-0.7076-0.5968-1.7424-0.5968-2.45,0&#xA;&#x9;c-0.16,0.13-0.31,0.28-0.47,0.41c-0.2847,0.2546-0.7153,0.2546-1,0c-0.16-0.13-0.31-0.28-0.47-0.41&#xA;&#x9;c-0.7059-0.5912-1.7341-0.5912-2.44,0c-0.15,0.13-0.29,0.27-0.44,0.39c-0.0892,0.0715-0.1909,0.1258-0.3,0.16&#xA;&#x9;c-0.2922,0.0652-0.5969-0.0301-0.8-0.25c-0.2475-0.214-0.5117-0.4079-0.79-0.58C1.5336,12.0421,1.2974,11.9865,1.06,12H1&#xA;&#x9;c-0.2761,0-0.5,0.2239-0.5,0.5S0.7239,13,1,13l0,0c0.246,0.0145,0.4762,0.126,0.64,0.31L2,13.57&#xA;&#x9;c0.6717,0.55,1.6308,0.5747,2.33,0.06c0.19-0.14,0.36-0.32,0.55-0.47c0.2847-0.2546,0.7153-0.2546,1,0l0.39,0.35&#xA;&#x9;c0.6937,0.6189,1.7322,0.6484,2.46,0.07c0.15-0.11,0.27-0.25,0.42-0.37c0.2976-0.3038,0.7851-0.3087,1.0889-0.0111&#xA;&#x9;c0.0037,0.0037,0.0074,0.0074,0.0111,0.0111l0.39,0.35c0.4866,0.4124,1.1485,0.5516,1.76,0.37c0.3825-0.1036,0.7286-0.3113,1-0.6&#xA;&#x9;c0.1549-0.1772,0.3674-0.294,0.6-0.33l0,0c0.2761,0,0.5-0.2239,0.5-0.5S14.2761,12,14,12z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"wheelchair-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M9,2c0,0.5523-0.4477,1-1,1S7,2.5523,7,2s0.4477-1,1-1S9,1.4477,9,2z M2.5,4c0.0595,0.0109,0.1205,0.0109,0.18,0l0,0&#xA;&#x9;l1.79-0.83l0.46,0.48L4.39,4.5c0.7851,0.1244,1.5102,0.4957,2.07,1.06l0.44-0.8c0.1914-0.2972,0.1057-0.6932-0.1915-0.8846&#xA;&#x9;C6.7057,3.8736,6.7029,3.8718,6.7,3.87L4.85,2.15l0,0C4.7176,1.9875,4.4965,1.9272,4.3,2l0,0l-2,1l0,0&#xA;&#x9;C2.0239,3.0552,1.8448,3.3239,1.9,3.6S2.2239,4.0552,2.5,4z M6.59,8.2C6.5854,8.7633,6.4074,9.3115,6.08,9.77&#xA;&#x9;c-0.1844,0.2837-0.4263,0.5256-0.71,0.71C4.9099,10.8129,4.3578,10.9946,3.79,11C2.2475,10.9945,1,9.7425,1,8.2&#xA;&#x9;c0.0054-0.5678,0.1871-1.1199,0.52-1.58c0.2059-0.2655,0.4445-0.5041,0.71-0.71C2.6857,5.5846,3.2301,5.4066,3.79,5.4&#xA;&#x9;C5.3364,5.4,6.59,6.6536,6.59,8.2L6.59,8.2z M5.19,8.89C5.3032,8.6772,5.3648,8.4409,5.37,8.2C5.3645,7.3313,4.6587,6.63,3.79,6.63&#xA;&#x9;C3.5491,6.6352,3.3127,6.6968,3.1,6.81c-0.2885,0.1742-0.5317,0.414-0.71,0.7c-0.1147,0.2158-0.1764,0.4557-0.18,0.7&#xA;&#x9;c0.0055,0.8687,0.7113,1.57,1.58,1.57c0.2443-0.0036,0.4843-0.0653,0.7-0.18C4.7824,9.4299,5.024,9.1848,5.19,8.89z M9,6.4&#xA;&#x9;C8.9544,6.149,8.7238,5.9751,8.47,6H6.82c0.223,0.3051,0.3983,0.6423,0.52,1H8l1,2.59c0.0475,0.2328,0.2524,0.4,0.49,0.4h0.1&#xA;&#x9;c0.2725-0.0445,0.4574-0.3015,0.4129-0.5741C10.002,9.4106,10.001,9.4053,10,9.4L9,6.4z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"wheelchair-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M12,1.5C12,2.3284,11.3284,3,10.5,3S9,2.3284,9,1.5S9.6716,0,10.5,0S12,0.6716,12,1.5z M2.82,4.87l1.74-1.71l1.85,1.29&#xA;&#x9;L5.67,5.7c1.0747,0.3341,2.0207,0.9904,2.71,1.88l0.88-1.5c0.2295-0.4158,0.0785-0.939-0.3373-1.1685&#xA;&#x9;C8.9218,4.911,8.9209,4.9105,8.92,4.91L8.3,4.54L4.79,2.1C4.5927,1.9594,4.3231,1.9805,4.15,2.15l-2,2&#xA;&#x9;C1.9852,4.3716,2.0312,4.6848,2.2528,4.8496C2.4193,4.9735,2.645,4.9816,2.82,4.87z M8.13,10.94&#xA;&#x9;c-0.0143,1.2308-0.5794,2.3904-1.54,3.16c-0.7118,0.5804-1.6016,0.8982-2.52,0.9C1.8261,15,0.0055,13.1839,0,10.94&#xA;&#x9;c0.0023-0.9231,0.3238-1.8169,0.91-2.53c0.1868-0.232,0.398-0.4432,0.63-0.63c0.7131-0.5862,1.6069-0.9077,2.53-0.91&#xA;&#x9;C6.3139,6.8755,8.13,8.6961,8.13,10.94z M6,12.21C6.7679,11.2051,6.5758,9.7679,5.5709,9C4.7501,8.3727,3.6109,8.3727,2.79,9&#xA;&#x9;C2.5283,9.151,2.311,9.3683,2.16,9.63c-0.6923,1.0584-0.3956,2.4777,0.6628,3.17c0.7615,0.4981,1.7457,0.4981,2.5072,0&#xA;&#x9;C5.5805,12.6365,5.8061,12.4378,6,12.21z M14.2,13.21l-2.49-5C11.5906,7.9251,11.3088,7.7425,11,7.75H8.51&#xA;&#x9;c0.3293,0.4578,0.5856,0.9638,0.76,1.5h1.26l2.29,4.58c0.185,0.3728,0.6372,0.525,1.01,0.34c0.3728-0.185,0.525-0.6372,0.34-1.01&#xA;&#x9;L14.2,13.21z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"windmill-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M6.375,3.9375L5.9375,3.5L6.375,3.0625h0.4375L9,0.875L8.125,0L5.9375,2.1875V2.625L5.5,3.0625L5.0625,2.625V2.1875L2.875,0&#xA;&#x9;L2,0.875l2.1875,2.1875H4.625L5.0625,3.5L4.625,3.9375H4.1875L2,6.125L2.875,7l2.1875-2.1875V4.375L5.5,3.9375L5.9375,4.375v0.4375&#xA;&#x9;L8.125,7L9,6.125L6.8125,3.9375H6.375z M8.5,10H8L7,7.5L5.5,6L4,7.5L3,10H2.5C2.2239,10,2,10.2238,2,10.5&#xA;&#x9;C2,10.7761,2.2239,11,2.5,11h6C8.7761,11,9,10.7761,9,10.5C9,10.2238,8.7761,10,8.5,10z M6,9.9717C6,9.9873,5.9874,10,5.9717,10&#xA;&#x9;H5.0283C5.0126,10,5,9.9873,5,9.9717v-0.972C5,8.7238,5.2238,8.5,5.4998,8.5C5.7761,8.5,6,8.7239,6,9.0002V9.9717z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"windmill-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path d=\\"M6,5L3.5,7.5l1,1L7,6V5.5L7.5,5L8,5.5V6l2.5,2.5l1-1L9,5H8.5L8,4.5L8.5,4H9l2.5-2.5l-1-1L8,3v0.5L7.5,4L7,3.5V3L4.5,0.5&#xA;&#x9;l-1,1L6,4h0.5L7,4.5L6.5,5H6z M11.5,13h-1l-1-4l-2-2l-2,2l-1,4h-1C3.2239,13,3,13.2238,3,13.5C3,13.7761,3.2239,14,3.5,14h8&#xA;&#x9;c0.2761,0,0.5-0.2239,0.5-0.5C12,13.2238,11.7761,13,11.5,13z M8,13H7v-1.5024C7,11.2228,7.2228,11,7.4976,11&#xA;&#x9;C7.7751,11,8,11.2249,8,11.5024V13z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"zoo-11\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"11px\\" height=\\"11px\\" viewBox=\\"0 0 11 11\\">\\n  <path d=\\"M8,2C7.1,2,6.5,2.5,6.2,3.1C6.2,3.1,5.5,4,5,4H3C2.5,4,2,4.5,2,4.5l-2,2V7h0.5l1.2-1.2L1.9,6&#xA;&#x9;C1.9,6,1,7.7,1,9c0,0.5,0.5,0.5,0.5,0.5H2c0,0,0.2,0,0-0.2L1.8,9.1c0-0.5,0.8-1.4,1.2-1.9c0,0,0,0.8,0,1.4&#xA;&#x9;c0,0.3,0.1111,0.9,0.4111,0.9h0.5c0,0,0.2,0,0-0.2l-0.2-0.2C3.5111,8.7,4.3,7.5,4.3,7.5h1.8L6.6,9c0.2,0.5,0.5,0.5,0.5,0.5h1&#xA;&#x9;c0.2,0,0.7-0.2,0.2-0.5L8.1,8.8V7l0,0c1,0,1.1-1.3,1.5-1.7l0.7-0.1c0.2,0,0.8-0.2,0.8-0.8V4L9.9,3l0,0C9.4,2.4,8.7,2,8,2z\\"/>\\n</svg>","<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<svg version=\\"1.1\\" id=\\"zoo-15\\" xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"15px\\" height=\\"15px\\" viewBox=\\"0 0 15 15\\">\\n  <path id=\\"path17499\\" d=\\"&#xA;&#x9;M8.3879,3.8928C8.3879,3.8928,7.6818,5,7,5H4.5C3.8182,5,3.2016,5.4086,2.7273,5.8636L0.5,8C0.231,8.258,0.0072,8.7681,0,9&#xA;&#x9;c-0.0156,0.5,0,1,0,1s1,0,1-1V8.5l1-1h0.5l0.158,0.2892c0,0-0.9535,1.8244-0.9535,3.5289C1.7046,12,2.3864,12,2.3864,12h0.6818&#xA;&#x9;c0,0,0.3409,0,0-0.3409l-0.3409-0.3409C2.7273,10.6364,3.5002,9.6667,4,9c0,0,0.0168,1.1579,0,2c-0.008,0.4096,0.2721,1,0.6818,1&#xA;&#x9;h0.6818c0,0,0.3409,0,0-0.3409l-0.3409-0.3409C4.7105,10.7495,5.5,8.5,5.5,8.5C6.7716,8.5,7,9,8.5,9l0.3636,2.3182&#xA;&#x9;C8.975,12.0282,9.5,12,9.5,12H11c0.3409,0,0.9611-0.3115,0.3409-0.7736L11,11V9c1.2142-0.1722,2-1,2-2h1c0.3214,0,1,0,1-0.5v-1&#xA;&#x9;l-1.7045-1.6818C12.5444,3.0772,12,2.5,11,2.5C9.5469,2.5,8.8636,3.0688,8.3879,3.8928z\\"/>\\n</svg>"]')},function(module){module.exports=JSON.parse('{"aerialway-15":{"width":21,"height":21,"x":0,"y":0,"pixelRatio":1,"sdf":true},"airfield-15":{"width":21,"height":21,"x":21,"y":0,"pixelRatio":1,"sdf":true},"airport-15":{"width":21,"height":21,"x":0,"y":21,"pixelRatio":1,"sdf":true},"alcohol-shop-15":{"width":21,"height":21,"x":21,"y":21,"pixelRatio":1,"sdf":true},"american-football-15":{"width":21,"height":21,"x":42,"y":0,"pixelRatio":1,"sdf":true},"amusement-park-15":{"width":21,"height":21,"x":63,"y":0,"pixelRatio":1,"sdf":true},"aquarium-15":{"width":21,"height":21,"x":42,"y":21,"pixelRatio":1,"sdf":true},"arrow-es-15":{"width":21,"height":21,"x":63,"y":21,"pixelRatio":1,"sdf":true},"art-gallery-15":{"width":21,"height":21,"x":0,"y":42,"pixelRatio":1,"sdf":true},"attraction-15":{"width":21,"height":21,"x":21,"y":42,"pixelRatio":1,"sdf":true},"bakery-15":{"width":21,"height":21,"x":42,"y":42,"pixelRatio":1,"sdf":true},"bank-15":{"width":21,"height":21,"x":63,"y":42,"pixelRatio":1,"sdf":true},"bar-15":{"width":21,"height":21,"x":0,"y":63,"pixelRatio":1,"sdf":true},"barrier-15":{"width":21,"height":21,"x":21,"y":63,"pixelRatio":1,"sdf":true},"baseball-15":{"width":21,"height":21,"x":42,"y":63,"pixelRatio":1,"sdf":true},"basketball-15":{"width":21,"height":21,"x":63,"y":63,"pixelRatio":1,"sdf":true},"bbq-15":{"width":21,"height":21,"x":84,"y":0,"pixelRatio":1,"sdf":true},"beach-15":{"width":21,"height":21,"x":105,"y":0,"pixelRatio":1,"sdf":true},"beer-15":{"width":21,"height":21,"x":126,"y":0,"pixelRatio":1,"sdf":true},"bicycle-15":{"width":21,"height":21,"x":147,"y":0,"pixelRatio":1,"sdf":true},"bicycle-share-15":{"width":21,"height":21,"x":84,"y":21,"pixelRatio":1,"sdf":true},"blood-bank-15":{"width":21,"height":21,"x":105,"y":21,"pixelRatio":1,"sdf":true},"boat-es-15":{"width":21,"height":21,"x":126,"y":21,"pixelRatio":1,"sdf":true},"bowling-alley-15":{"width":21,"height":21,"x":147,"y":21,"pixelRatio":1,"sdf":true},"bridge-15":{"width":21,"height":21,"x":84,"y":42,"pixelRatio":1,"sdf":true},"building-15":{"width":21,"height":21,"x":105,"y":42,"pixelRatio":1,"sdf":true},"building-alt1-15":{"width":21,"height":21,"x":126,"y":42,"pixelRatio":1,"sdf":true},"bus-15":{"width":21,"height":21,"x":147,"y":42,"pixelRatio":1,"sdf":true},"cafe-15":{"width":21,"height":21,"x":84,"y":63,"pixelRatio":1,"sdf":true},"campsite-15":{"width":21,"height":21,"x":105,"y":63,"pixelRatio":1,"sdf":true},"car-15":{"width":21,"height":21,"x":126,"y":63,"pixelRatio":1,"sdf":true},"car-rental-15":{"width":21,"height":21,"x":147,"y":63,"pixelRatio":1,"sdf":true},"car-repair-15":{"width":21,"height":21,"x":0,"y":84,"pixelRatio":1,"sdf":true},"car-top-es-15":{"width":21,"height":21,"x":21,"y":84,"pixelRatio":1,"sdf":true},"casino-15":{"width":21,"height":21,"x":42,"y":84,"pixelRatio":1,"sdf":true},"castle-15":{"width":21,"height":21,"x":63,"y":84,"pixelRatio":1,"sdf":true},"cemetery-15":{"width":21,"height":21,"x":84,"y":84,"pixelRatio":1,"sdf":true},"charging-station-15":{"width":21,"height":21,"x":105,"y":84,"pixelRatio":1,"sdf":true},"cinema-15":{"width":21,"height":21,"x":126,"y":84,"pixelRatio":1,"sdf":true},"circle-15":{"width":21,"height":21,"x":147,"y":84,"pixelRatio":1,"sdf":true},"circle-stroked-15":{"width":21,"height":21,"x":0,"y":105,"pixelRatio":1,"sdf":true},"city-15":{"width":21,"height":21,"x":21,"y":105,"pixelRatio":1,"sdf":true},"clothing-store-15":{"width":21,"height":21,"x":42,"y":105,"pixelRatio":1,"sdf":true},"college-15":{"width":21,"height":21,"x":63,"y":105,"pixelRatio":1,"sdf":true},"commercial-15":{"width":21,"height":21,"x":84,"y":105,"pixelRatio":1,"sdf":true},"communications-tower-15":{"width":21,"height":21,"x":105,"y":105,"pixelRatio":1,"sdf":true},"confectionery-15":{"width":21,"height":21,"x":126,"y":105,"pixelRatio":1,"sdf":true},"convenience-15":{"width":21,"height":21,"x":147,"y":105,"pixelRatio":1,"sdf":true},"cricket-15":{"width":21,"height":21,"x":0,"y":126,"pixelRatio":1,"sdf":true},"cross-15":{"width":21,"height":21,"x":21,"y":126,"pixelRatio":1,"sdf":true},"dam-15":{"width":21,"height":21,"x":42,"y":126,"pixelRatio":1,"sdf":true},"danger-15":{"width":21,"height":21,"x":63,"y":126,"pixelRatio":1,"sdf":true},"defibrillator-15":{"width":21,"height":21,"x":84,"y":126,"pixelRatio":1,"sdf":true},"dentist-15":{"width":21,"height":21,"x":105,"y":126,"pixelRatio":1,"sdf":true},"doctor-15":{"width":21,"height":21,"x":126,"y":126,"pixelRatio":1,"sdf":true},"dog-park-15":{"width":21,"height":21,"x":147,"y":126,"pixelRatio":1,"sdf":true},"drinking-water-15":{"width":21,"height":21,"x":0,"y":147,"pixelRatio":1,"sdf":true},"embassy-15":{"width":21,"height":21,"x":21,"y":147,"pixelRatio":1,"sdf":true},"emergency-phone-15":{"width":21,"height":21,"x":42,"y":147,"pixelRatio":1,"sdf":true},"entrance-15":{"width":21,"height":21,"x":63,"y":147,"pixelRatio":1,"sdf":true},"entrance-alt1-15":{"width":21,"height":21,"x":84,"y":147,"pixelRatio":1,"sdf":true},"farm-15":{"width":21,"height":21,"x":105,"y":147,"pixelRatio":1,"sdf":true},"fast-food-15":{"width":21,"height":21,"x":126,"y":147,"pixelRatio":1,"sdf":true},"fence-15":{"width":21,"height":21,"x":147,"y":147,"pixelRatio":1,"sdf":true},"ferry-15":{"width":21,"height":21,"x":168,"y":0,"pixelRatio":1,"sdf":true},"fire-station-15":{"width":21,"height":21,"x":189,"y":0,"pixelRatio":1,"sdf":true},"fitness-centre-15":{"width":21,"height":21,"x":210,"y":0,"pixelRatio":1,"sdf":true},"florist-15":{"width":21,"height":21,"x":231,"y":0,"pixelRatio":1,"sdf":true},"fuel-15":{"width":21,"height":21,"x":252,"y":0,"pixelRatio":1,"sdf":true},"furniture-15":{"width":21,"height":21,"x":273,"y":0,"pixelRatio":1,"sdf":true},"gaming-15":{"width":21,"height":21,"x":294,"y":0,"pixelRatio":1,"sdf":true},"garden-15":{"width":21,"height":21,"x":315,"y":0,"pixelRatio":1,"sdf":true},"garden-centre-15":{"width":21,"height":21,"x":168,"y":21,"pixelRatio":1,"sdf":true},"gift-15":{"width":21,"height":21,"x":189,"y":21,"pixelRatio":1,"sdf":true},"globe-15":{"width":21,"height":21,"x":210,"y":21,"pixelRatio":1,"sdf":true},"golf-15":{"width":21,"height":21,"x":231,"y":21,"pixelRatio":1,"sdf":true},"grocery-15":{"width":21,"height":21,"x":252,"y":21,"pixelRatio":1,"sdf":true},"hairdresser-15":{"width":21,"height":21,"x":273,"y":21,"pixelRatio":1,"sdf":true},"harbor-15":{"width":21,"height":21,"x":294,"y":21,"pixelRatio":1,"sdf":true},"hardware-15":{"width":21,"height":21,"x":315,"y":21,"pixelRatio":1,"sdf":true},"heart-15":{"width":21,"height":21,"x":168,"y":42,"pixelRatio":1,"sdf":true},"heliport-15":{"width":21,"height":21,"x":189,"y":42,"pixelRatio":1,"sdf":true},"home-15":{"width":21,"height":21,"x":210,"y":42,"pixelRatio":1,"sdf":true},"horse-riding-15":{"width":21,"height":21,"x":231,"y":42,"pixelRatio":1,"sdf":true},"hospital-15":{"width":21,"height":21,"x":252,"y":42,"pixelRatio":1,"sdf":true},"ice-cream-15":{"width":21,"height":21,"x":273,"y":42,"pixelRatio":1,"sdf":true},"industry-15":{"width":21,"height":21,"x":294,"y":42,"pixelRatio":1,"sdf":true},"information-15":{"width":21,"height":21,"x":315,"y":42,"pixelRatio":1,"sdf":true},"jewelry-store-15":{"width":21,"height":21,"x":168,"y":63,"pixelRatio":1,"sdf":true},"karaoke-15":{"width":21,"height":21,"x":189,"y":63,"pixelRatio":1,"sdf":true},"landmark-15":{"width":21,"height":21,"x":210,"y":63,"pixelRatio":1,"sdf":true},"landuse-15":{"width":21,"height":21,"x":231,"y":63,"pixelRatio":1,"sdf":true},"laundry-15":{"width":21,"height":21,"x":252,"y":63,"pixelRatio":1,"sdf":true},"library-15":{"width":21,"height":21,"x":273,"y":63,"pixelRatio":1,"sdf":true},"lighthouse-15":{"width":21,"height":21,"x":294,"y":63,"pixelRatio":1,"sdf":true},"lodging-15":{"width":21,"height":21,"x":315,"y":63,"pixelRatio":1,"sdf":true},"logging-15":{"width":21,"height":21,"x":168,"y":84,"pixelRatio":1,"sdf":true},"marker-15":{"width":21,"height":21,"x":189,"y":84,"pixelRatio":1,"sdf":true},"marker-stroked-15":{"width":21,"height":21,"x":210,"y":84,"pixelRatio":1,"sdf":true},"mobile-phone-15":{"width":21,"height":21,"x":231,"y":84,"pixelRatio":1,"sdf":true},"monument-15":{"width":21,"height":21,"x":252,"y":84,"pixelRatio":1,"sdf":true},"mountain-15":{"width":21,"height":21,"x":273,"y":84,"pixelRatio":1,"sdf":true},"museum-15":{"width":21,"height":21,"x":294,"y":84,"pixelRatio":1,"sdf":true},"music-15":{"width":21,"height":21,"x":315,"y":84,"pixelRatio":1,"sdf":true},"natural-15":{"width":21,"height":21,"x":168,"y":105,"pixelRatio":1,"sdf":true},"oil-rig-es-15":{"width":21,"height":21,"x":189,"y":105,"pixelRatio":1,"sdf":true},"optician-15":{"width":21,"height":21,"x":210,"y":105,"pixelRatio":1,"sdf":true},"paint-15":{"width":21,"height":21,"x":231,"y":105,"pixelRatio":1,"sdf":true},"park-15":{"width":21,"height":21,"x":252,"y":105,"pixelRatio":1,"sdf":true},"park-alt1-15":{"width":21,"height":21,"x":273,"y":105,"pixelRatio":1,"sdf":true},"parking-15":{"width":21,"height":21,"x":294,"y":105,"pixelRatio":1,"sdf":true},"parking-garage-15":{"width":21,"height":21,"x":315,"y":105,"pixelRatio":1,"sdf":true},"pharmacy-15":{"width":21,"height":21,"x":168,"y":126,"pixelRatio":1,"sdf":true},"picnic-site-15":{"width":21,"height":21,"x":189,"y":126,"pixelRatio":1,"sdf":true},"pitch-15":{"width":21,"height":21,"x":210,"y":126,"pixelRatio":1,"sdf":true},"place-of-worship-15":{"width":21,"height":21,"x":231,"y":126,"pixelRatio":1,"sdf":true},"playground-15":{"width":21,"height":21,"x":252,"y":126,"pixelRatio":1,"sdf":true},"police-15":{"width":21,"height":21,"x":273,"y":126,"pixelRatio":1,"sdf":true},"post-15":{"width":21,"height":21,"x":294,"y":126,"pixelRatio":1,"sdf":true},"prison-15":{"width":21,"height":21,"x":315,"y":126,"pixelRatio":1,"sdf":true},"rail-15":{"width":21,"height":21,"x":168,"y":147,"pixelRatio":1,"sdf":true},"rail-light-15":{"width":21,"height":21,"x":189,"y":147,"pixelRatio":1,"sdf":true},"rail-metro-15":{"width":21,"height":21,"x":210,"y":147,"pixelRatio":1,"sdf":true},"ranger-station-15":{"width":21,"height":21,"x":231,"y":147,"pixelRatio":1,"sdf":true},"recycling-15":{"width":21,"height":21,"x":252,"y":147,"pixelRatio":1,"sdf":true},"religious-buddhist-15":{"width":21,"height":21,"x":273,"y":147,"pixelRatio":1,"sdf":true},"religious-christian-15":{"width":21,"height":21,"x":294,"y":147,"pixelRatio":1,"sdf":true},"religious-jewish-15":{"width":21,"height":21,"x":315,"y":147,"pixelRatio":1,"sdf":true},"religious-muslim-15":{"width":21,"height":21,"x":0,"y":168,"pixelRatio":1,"sdf":true},"residential-community-15":{"width":21,"height":21,"x":21,"y":168,"pixelRatio":1,"sdf":true},"restaurant-15":{"width":21,"height":21,"x":42,"y":168,"pixelRatio":1,"sdf":true},"restaurant-noodle-15":{"width":21,"height":21,"x":63,"y":168,"pixelRatio":1,"sdf":true},"restaurant-pizza-15":{"width":21,"height":21,"x":84,"y":168,"pixelRatio":1,"sdf":true},"restaurant-seafood-15":{"width":21,"height":21,"x":105,"y":168,"pixelRatio":1,"sdf":true},"roadblock-15":{"width":21,"height":21,"x":126,"y":168,"pixelRatio":1,"sdf":true},"rocket-15":{"width":21,"height":21,"x":147,"y":168,"pixelRatio":1,"sdf":true},"school-15":{"width":21,"height":21,"x":168,"y":168,"pixelRatio":1,"sdf":true},"scooter-15":{"width":21,"height":21,"x":189,"y":168,"pixelRatio":1,"sdf":true},"shelter-15":{"width":21,"height":21,"x":210,"y":168,"pixelRatio":1,"sdf":true},"shoe-15":{"width":21,"height":21,"x":231,"y":168,"pixelRatio":1,"sdf":true},"shop-15":{"width":21,"height":21,"x":252,"y":168,"pixelRatio":1,"sdf":true},"skateboard-15":{"width":21,"height":21,"x":273,"y":168,"pixelRatio":1,"sdf":true},"skiing-15":{"width":21,"height":21,"x":294,"y":168,"pixelRatio":1,"sdf":true},"slaughterhouse-15":{"width":21,"height":21,"x":315,"y":168,"pixelRatio":1,"sdf":true},"slipway-15":{"width":21,"height":21,"x":0,"y":189,"pixelRatio":1,"sdf":true},"snowmobile-15":{"width":21,"height":21,"x":21,"y":189,"pixelRatio":1,"sdf":true},"soccer-15":{"width":21,"height":21,"x":42,"y":189,"pixelRatio":1,"sdf":true},"square-15":{"width":21,"height":21,"x":63,"y":189,"pixelRatio":1,"sdf":true},"square-stroked-15":{"width":21,"height":21,"x":84,"y":189,"pixelRatio":1,"sdf":true},"stadium-15":{"width":21,"height":21,"x":105,"y":189,"pixelRatio":1,"sdf":true},"star-15":{"width":21,"height":21,"x":126,"y":189,"pixelRatio":1,"sdf":true},"star-stroked-15":{"width":21,"height":21,"x":147,"y":189,"pixelRatio":1,"sdf":true},"suitcase-15":{"width":21,"height":21,"x":168,"y":189,"pixelRatio":1,"sdf":true},"sushi-15":{"width":21,"height":21,"x":189,"y":189,"pixelRatio":1,"sdf":true},"swimming-15":{"width":21,"height":21,"x":210,"y":189,"pixelRatio":1,"sdf":true},"table-tennis-15":{"width":21,"height":21,"x":231,"y":189,"pixelRatio":1,"sdf":true},"teahouse-15":{"width":21,"height":21,"x":252,"y":189,"pixelRatio":1,"sdf":true},"telephone-15":{"width":21,"height":21,"x":273,"y":189,"pixelRatio":1,"sdf":true},"tennis-15":{"width":21,"height":21,"x":294,"y":189,"pixelRatio":1,"sdf":true},"theatre-15":{"width":21,"height":21,"x":315,"y":189,"pixelRatio":1,"sdf":true},"toilet-15":{"width":21,"height":21,"x":0,"y":210,"pixelRatio":1,"sdf":true},"town-15":{"width":21,"height":21,"x":21,"y":210,"pixelRatio":1,"sdf":true},"town-hall-15":{"width":21,"height":21,"x":42,"y":210,"pixelRatio":1,"sdf":true},"triangle-15":{"width":21,"height":21,"x":63,"y":210,"pixelRatio":1,"sdf":true},"triangle-stroked-15":{"width":21,"height":21,"x":84,"y":210,"pixelRatio":1,"sdf":true},"veterinary-15":{"width":21,"height":21,"x":105,"y":210,"pixelRatio":1,"sdf":true},"viewpoint-15":{"width":21,"height":21,"x":126,"y":210,"pixelRatio":1,"sdf":true},"village-15":{"width":21,"height":21,"x":147,"y":210,"pixelRatio":1,"sdf":true},"volcano-15":{"width":21,"height":21,"x":168,"y":210,"pixelRatio":1,"sdf":true},"volleyball-15":{"width":21,"height":21,"x":189,"y":210,"pixelRatio":1,"sdf":true},"warehouse-15":{"width":21,"height":21,"x":210,"y":210,"pixelRatio":1,"sdf":true},"waste-basket-15":{"width":21,"height":21,"x":231,"y":210,"pixelRatio":1,"sdf":true},"watch-15":{"width":21,"height":21,"x":252,"y":210,"pixelRatio":1,"sdf":true},"water-15":{"width":21,"height":21,"x":273,"y":210,"pixelRatio":1,"sdf":true},"waterfall-15":{"width":21,"height":21,"x":294,"y":210,"pixelRatio":1,"sdf":true},"watermill-15":{"width":21,"height":21,"x":315,"y":210,"pixelRatio":1,"sdf":true},"wetland-15":{"width":21,"height":21,"x":0,"y":231,"pixelRatio":1,"sdf":true},"wheelchair-15":{"width":21,"height":21,"x":21,"y":231,"pixelRatio":1,"sdf":true},"windmill-15":{"width":21,"height":21,"x":42,"y":231,"pixelRatio":1,"sdf":true},"zoo-15":{"width":21,"height":21,"x":63,"y":231,"pixelRatio":1,"sdf":true},"aerialway-11":{"width":17,"height":17,"x":84,"y":231,"pixelRatio":1,"sdf":true},"airfield-11":{"width":17,"height":17,"x":101,"y":231,"pixelRatio":1,"sdf":true},"airport-11":{"width":17,"height":17,"x":118,"y":231,"pixelRatio":1,"sdf":true},"alcohol-shop-11":{"width":17,"height":17,"x":135,"y":231,"pixelRatio":1,"sdf":true},"american-football-11":{"width":17,"height":17,"x":152,"y":231,"pixelRatio":1,"sdf":true},"amusement-park-11":{"width":17,"height":17,"x":169,"y":231,"pixelRatio":1,"sdf":true},"aquarium-11":{"width":17,"height":17,"x":186,"y":231,"pixelRatio":1,"sdf":true},"arrow-es-11":{"width":17,"height":17,"x":203,"y":231,"pixelRatio":1,"sdf":true},"art-gallery-11":{"width":17,"height":17,"x":220,"y":231,"pixelRatio":1,"sdf":true},"attraction-11":{"width":17,"height":17,"x":237,"y":231,"pixelRatio":1,"sdf":true},"bakery-11":{"width":17,"height":17,"x":254,"y":231,"pixelRatio":1,"sdf":true},"bank-11":{"width":17,"height":17,"x":271,"y":231,"pixelRatio":1,"sdf":true},"bar-11":{"width":17,"height":17,"x":288,"y":231,"pixelRatio":1,"sdf":true},"barrier-11":{"width":17,"height":17,"x":305,"y":231,"pixelRatio":1,"sdf":true},"baseball-11":{"width":17,"height":17,"x":0,"y":252,"pixelRatio":1,"sdf":true},"basketball-11":{"width":17,"height":17,"x":17,"y":252,"pixelRatio":1,"sdf":true},"bbq-11":{"width":17,"height":17,"x":34,"y":252,"pixelRatio":1,"sdf":true},"beach-11":{"width":17,"height":17,"x":51,"y":252,"pixelRatio":1,"sdf":true},"beer-11":{"width":17,"height":17,"x":68,"y":252,"pixelRatio":1,"sdf":true},"bicycle-11":{"width":17,"height":17,"x":85,"y":252,"pixelRatio":1,"sdf":true},"bicycle-share-11":{"width":17,"height":17,"x":102,"y":252,"pixelRatio":1,"sdf":true},"blood-bank-11":{"width":17,"height":17,"x":119,"y":252,"pixelRatio":1,"sdf":true},"boat-es-11":{"width":17,"height":17,"x":136,"y":252,"pixelRatio":1,"sdf":true},"bowling-alley-11":{"width":17,"height":17,"x":153,"y":252,"pixelRatio":1,"sdf":true},"bridge-11":{"width":17,"height":17,"x":170,"y":252,"pixelRatio":1,"sdf":true},"building-11":{"width":17,"height":17,"x":187,"y":252,"pixelRatio":1,"sdf":true},"building-alt1-11":{"width":17,"height":17,"x":204,"y":252,"pixelRatio":1,"sdf":true},"bus-11":{"width":17,"height":17,"x":221,"y":252,"pixelRatio":1,"sdf":true},"cafe-11":{"width":17,"height":17,"x":238,"y":252,"pixelRatio":1,"sdf":true},"campsite-11":{"width":17,"height":17,"x":255,"y":252,"pixelRatio":1,"sdf":true},"car-11":{"width":17,"height":17,"x":272,"y":252,"pixelRatio":1,"sdf":true},"car-rental-11":{"width":17,"height":17,"x":289,"y":252,"pixelRatio":1,"sdf":true},"car-repair-11":{"width":17,"height":17,"x":306,"y":252,"pixelRatio":1,"sdf":true},"car-top-es-11":{"width":17,"height":17,"x":0,"y":269,"pixelRatio":1,"sdf":true},"casino-11":{"width":17,"height":17,"x":17,"y":269,"pixelRatio":1,"sdf":true},"castle-11":{"width":17,"height":17,"x":34,"y":269,"pixelRatio":1,"sdf":true},"cemetery-11":{"width":17,"height":17,"x":51,"y":269,"pixelRatio":1,"sdf":true},"charging-station-11":{"width":17,"height":17,"x":68,"y":269,"pixelRatio":1,"sdf":true},"cinema-11":{"width":17,"height":17,"x":85,"y":269,"pixelRatio":1,"sdf":true},"circle-11":{"width":17,"height":17,"x":102,"y":269,"pixelRatio":1,"sdf":true},"circle-stroked-11":{"width":17,"height":17,"x":119,"y":269,"pixelRatio":1,"sdf":true},"city-11":{"width":17,"height":17,"x":136,"y":269,"pixelRatio":1,"sdf":true},"clothing-store-11":{"width":17,"height":17,"x":153,"y":269,"pixelRatio":1,"sdf":true},"college-11":{"width":17,"height":17,"x":170,"y":269,"pixelRatio":1,"sdf":true},"commercial-11":{"width":17,"height":17,"x":187,"y":269,"pixelRatio":1,"sdf":true},"communications-tower-11":{"width":17,"height":17,"x":204,"y":269,"pixelRatio":1,"sdf":true},"confectionery-11":{"width":17,"height":17,"x":221,"y":269,"pixelRatio":1,"sdf":true},"convenience-11":{"width":17,"height":17,"x":238,"y":269,"pixelRatio":1,"sdf":true},"cricket-11":{"width":17,"height":17,"x":255,"y":269,"pixelRatio":1,"sdf":true},"cross-11":{"width":17,"height":17,"x":272,"y":269,"pixelRatio":1,"sdf":true},"dam-11":{"width":17,"height":17,"x":289,"y":269,"pixelRatio":1,"sdf":true},"danger-11":{"width":17,"height":17,"x":306,"y":269,"pixelRatio":1,"sdf":true},"defibrillator-11":{"width":17,"height":17,"x":0,"y":286,"pixelRatio":1,"sdf":true},"dentist-11":{"width":17,"height":17,"x":17,"y":286,"pixelRatio":1,"sdf":true},"doctor-11":{"width":17,"height":17,"x":34,"y":286,"pixelRatio":1,"sdf":true},"dog-park-11":{"width":17,"height":17,"x":51,"y":286,"pixelRatio":1,"sdf":true},"drinking-water-11":{"width":17,"height":17,"x":68,"y":286,"pixelRatio":1,"sdf":true},"embassy-11":{"width":17,"height":17,"x":85,"y":286,"pixelRatio":1,"sdf":true},"emergency-phone-11":{"width":17,"height":17,"x":102,"y":286,"pixelRatio":1,"sdf":true},"entrance-11":{"width":17,"height":17,"x":119,"y":286,"pixelRatio":1,"sdf":true},"entrance-alt1-11":{"width":17,"height":17,"x":136,"y":286,"pixelRatio":1,"sdf":true},"farm-11":{"width":17,"height":17,"x":153,"y":286,"pixelRatio":1,"sdf":true},"fast-food-11":{"width":17,"height":17,"x":170,"y":286,"pixelRatio":1,"sdf":true},"fence-11":{"width":17,"height":17,"x":187,"y":286,"pixelRatio":1,"sdf":true},"ferry-11":{"width":17,"height":17,"x":204,"y":286,"pixelRatio":1,"sdf":true},"fire-station-11":{"width":17,"height":17,"x":221,"y":286,"pixelRatio":1,"sdf":true},"fitness-centre-11":{"width":17,"height":17,"x":238,"y":286,"pixelRatio":1,"sdf":true},"florist-11":{"width":17,"height":17,"x":255,"y":286,"pixelRatio":1,"sdf":true},"fuel-11":{"width":17,"height":17,"x":272,"y":286,"pixelRatio":1,"sdf":true},"furniture-11":{"width":17,"height":17,"x":289,"y":286,"pixelRatio":1,"sdf":true},"gaming-11":{"width":17,"height":17,"x":306,"y":286,"pixelRatio":1,"sdf":true},"garden-11":{"width":17,"height":17,"x":0,"y":303,"pixelRatio":1,"sdf":true},"garden-centre-11":{"width":17,"height":17,"x":17,"y":303,"pixelRatio":1,"sdf":true},"gift-11":{"width":17,"height":17,"x":34,"y":303,"pixelRatio":1,"sdf":true},"globe-11":{"width":17,"height":17,"x":51,"y":303,"pixelRatio":1,"sdf":true},"golf-11":{"width":17,"height":17,"x":68,"y":303,"pixelRatio":1,"sdf":true},"grocery-11":{"width":17,"height":17,"x":85,"y":303,"pixelRatio":1,"sdf":true},"hairdresser-11":{"width":17,"height":17,"x":102,"y":303,"pixelRatio":1,"sdf":true},"harbor-11":{"width":17,"height":17,"x":119,"y":303,"pixelRatio":1,"sdf":true},"hardware-11":{"width":17,"height":17,"x":136,"y":303,"pixelRatio":1,"sdf":true},"heart-11":{"width":17,"height":17,"x":153,"y":303,"pixelRatio":1,"sdf":true},"heliport-11":{"width":17,"height":17,"x":170,"y":303,"pixelRatio":1,"sdf":true},"home-11":{"width":17,"height":17,"x":187,"y":303,"pixelRatio":1,"sdf":true},"horse-riding-11":{"width":17,"height":17,"x":204,"y":303,"pixelRatio":1,"sdf":true},"hospital-11":{"width":17,"height":17,"x":221,"y":303,"pixelRatio":1,"sdf":true},"ice-cream-11":{"width":17,"height":17,"x":238,"y":303,"pixelRatio":1,"sdf":true},"industry-11":{"width":17,"height":17,"x":255,"y":303,"pixelRatio":1,"sdf":true},"information-11":{"width":17,"height":17,"x":272,"y":303,"pixelRatio":1,"sdf":true},"jewelry-store-11":{"width":17,"height":17,"x":289,"y":303,"pixelRatio":1,"sdf":true},"karaoke-11":{"width":17,"height":17,"x":306,"y":303,"pixelRatio":1,"sdf":true},"landmark-11":{"width":17,"height":17,"x":323,"y":252,"pixelRatio":1,"sdf":true},"landuse-11":{"width":17,"height":17,"x":340,"y":252,"pixelRatio":1,"sdf":true},"laundry-11":{"width":17,"height":17,"x":357,"y":252,"pixelRatio":1,"sdf":true},"library-11":{"width":17,"height":17,"x":374,"y":252,"pixelRatio":1,"sdf":true},"lighthouse-11":{"width":17,"height":17,"x":391,"y":252,"pixelRatio":1,"sdf":true},"lodging-11":{"width":17,"height":17,"x":408,"y":252,"pixelRatio":1,"sdf":true},"logging-11":{"width":17,"height":17,"x":425,"y":252,"pixelRatio":1,"sdf":true},"marker-11":{"width":17,"height":17,"x":442,"y":252,"pixelRatio":1,"sdf":true},"marker-stroked-11":{"width":17,"height":17,"x":459,"y":252,"pixelRatio":1,"sdf":true},"mobile-phone-11":{"width":17,"height":17,"x":476,"y":252,"pixelRatio":1,"sdf":true},"monument-11":{"width":17,"height":17,"x":493,"y":252,"pixelRatio":1,"sdf":true},"mountain-11":{"width":17,"height":17,"x":510,"y":252,"pixelRatio":1,"sdf":true},"museum-11":{"width":17,"height":17,"x":527,"y":252,"pixelRatio":1,"sdf":true},"music-11":{"width":17,"height":17,"x":544,"y":252,"pixelRatio":1,"sdf":true},"natural-11":{"width":17,"height":17,"x":561,"y":252,"pixelRatio":1,"sdf":true},"oil-rig-es-11":{"width":17,"height":17,"x":578,"y":252,"pixelRatio":1,"sdf":true},"optician-11":{"width":17,"height":17,"x":595,"y":252,"pixelRatio":1,"sdf":true},"paint-11":{"width":17,"height":17,"x":612,"y":252,"pixelRatio":1,"sdf":true},"park-11":{"width":17,"height":17,"x":629,"y":252,"pixelRatio":1,"sdf":true},"park-alt1-11":{"width":17,"height":17,"x":646,"y":252,"pixelRatio":1,"sdf":true},"parking-11":{"width":17,"height":17,"x":323,"y":269,"pixelRatio":1,"sdf":true},"parking-garage-11":{"width":17,"height":17,"x":340,"y":269,"pixelRatio":1,"sdf":true},"pharmacy-11":{"width":17,"height":17,"x":357,"y":269,"pixelRatio":1,"sdf":true},"picnic-site-11":{"width":17,"height":17,"x":374,"y":269,"pixelRatio":1,"sdf":true},"pitch-11":{"width":17,"height":17,"x":391,"y":269,"pixelRatio":1,"sdf":true},"place-of-worship-11":{"width":17,"height":17,"x":408,"y":269,"pixelRatio":1,"sdf":true},"playground-11":{"width":17,"height":17,"x":425,"y":269,"pixelRatio":1,"sdf":true},"police-11":{"width":17,"height":17,"x":442,"y":269,"pixelRatio":1,"sdf":true},"post-11":{"width":17,"height":17,"x":459,"y":269,"pixelRatio":1,"sdf":true},"prison-11":{"width":17,"height":17,"x":476,"y":269,"pixelRatio":1,"sdf":true},"rail-11":{"width":17,"height":17,"x":493,"y":269,"pixelRatio":1,"sdf":true},"rail-light-11":{"width":17,"height":17,"x":510,"y":269,"pixelRatio":1,"sdf":true},"rail-metro-11":{"width":17,"height":17,"x":527,"y":269,"pixelRatio":1,"sdf":true},"ranger-station-11":{"width":17,"height":17,"x":544,"y":269,"pixelRatio":1,"sdf":true},"recycling-11":{"width":17,"height":17,"x":561,"y":269,"pixelRatio":1,"sdf":true},"religious-buddhist-11":{"width":17,"height":17,"x":578,"y":269,"pixelRatio":1,"sdf":true},"religious-christian-11":{"width":17,"height":17,"x":595,"y":269,"pixelRatio":1,"sdf":true},"religious-jewish-11":{"width":17,"height":17,"x":612,"y":269,"pixelRatio":1,"sdf":true},"religious-muslim-11":{"width":17,"height":17,"x":629,"y":269,"pixelRatio":1,"sdf":true},"residential-community-11":{"width":17,"height":17,"x":646,"y":269,"pixelRatio":1,"sdf":true},"restaurant-11":{"width":17,"height":17,"x":323,"y":286,"pixelRatio":1,"sdf":true},"restaurant-noodle-11":{"width":17,"height":17,"x":340,"y":286,"pixelRatio":1,"sdf":true},"restaurant-pizza-11":{"width":17,"height":17,"x":357,"y":286,"pixelRatio":1,"sdf":true},"restaurant-seafood-11":{"width":17,"height":17,"x":374,"y":286,"pixelRatio":1,"sdf":true},"roadblock-11":{"width":17,"height":17,"x":391,"y":286,"pixelRatio":1,"sdf":true},"rocket-11":{"width":17,"height":17,"x":408,"y":286,"pixelRatio":1,"sdf":true},"school-11":{"width":17,"height":17,"x":425,"y":286,"pixelRatio":1,"sdf":true},"scooter-11":{"width":17,"height":17,"x":442,"y":286,"pixelRatio":1,"sdf":true},"shelter-11":{"width":17,"height":17,"x":459,"y":286,"pixelRatio":1,"sdf":true},"shoe-11":{"width":17,"height":17,"x":476,"y":286,"pixelRatio":1,"sdf":true},"shop-11":{"width":17,"height":17,"x":493,"y":286,"pixelRatio":1,"sdf":true},"skateboard-11":{"width":17,"height":17,"x":510,"y":286,"pixelRatio":1,"sdf":true},"skiing-11":{"width":17,"height":17,"x":527,"y":286,"pixelRatio":1,"sdf":true},"slaughterhouse-11":{"width":17,"height":17,"x":544,"y":286,"pixelRatio":1,"sdf":true},"slipway-11":{"width":17,"height":17,"x":561,"y":286,"pixelRatio":1,"sdf":true},"snowmobile-11":{"width":17,"height":17,"x":578,"y":286,"pixelRatio":1,"sdf":true},"soccer-11":{"width":17,"height":17,"x":595,"y":286,"pixelRatio":1,"sdf":true},"square-11":{"width":17,"height":17,"x":612,"y":286,"pixelRatio":1,"sdf":true},"square-stroked-11":{"width":17,"height":17,"x":629,"y":286,"pixelRatio":1,"sdf":true},"stadium-11":{"width":17,"height":17,"x":646,"y":286,"pixelRatio":1,"sdf":true},"star-11":{"width":17,"height":17,"x":323,"y":303,"pixelRatio":1,"sdf":true},"star-stroked-11":{"width":17,"height":17,"x":340,"y":303,"pixelRatio":1,"sdf":true},"suitcase-11":{"width":17,"height":17,"x":357,"y":303,"pixelRatio":1,"sdf":true},"sushi-11":{"width":17,"height":17,"x":374,"y":303,"pixelRatio":1,"sdf":true},"swimming-11":{"width":17,"height":17,"x":391,"y":303,"pixelRatio":1,"sdf":true},"table-tennis-11":{"width":17,"height":17,"x":408,"y":303,"pixelRatio":1,"sdf":true},"teahouse-11":{"width":17,"height":17,"x":425,"y":303,"pixelRatio":1,"sdf":true},"telephone-11":{"width":17,"height":17,"x":442,"y":303,"pixelRatio":1,"sdf":true},"tennis-11":{"width":17,"height":17,"x":459,"y":303,"pixelRatio":1,"sdf":true},"theatre-11":{"width":17,"height":17,"x":476,"y":303,"pixelRatio":1,"sdf":true},"toilet-11":{"width":17,"height":17,"x":493,"y":303,"pixelRatio":1,"sdf":true},"town-11":{"width":17,"height":17,"x":510,"y":303,"pixelRatio":1,"sdf":true},"town-hall-11":{"width":17,"height":17,"x":527,"y":303,"pixelRatio":1,"sdf":true},"triangle-11":{"width":17,"height":17,"x":544,"y":303,"pixelRatio":1,"sdf":true},"triangle-stroked-11":{"width":17,"height":17,"x":561,"y":303,"pixelRatio":1,"sdf":true},"veterinary-11":{"width":17,"height":17,"x":578,"y":303,"pixelRatio":1,"sdf":true},"viewpoint-11":{"width":17,"height":17,"x":595,"y":303,"pixelRatio":1,"sdf":true},"village-11":{"width":17,"height":17,"x":612,"y":303,"pixelRatio":1,"sdf":true},"volcano-11":{"width":17,"height":17,"x":629,"y":303,"pixelRatio":1,"sdf":true},"volleyball-11":{"width":17,"height":17,"x":646,"y":303,"pixelRatio":1,"sdf":true},"warehouse-11":{"width":17,"height":17,"x":336,"y":0,"pixelRatio":1,"sdf":true},"waste-basket-11":{"width":17,"height":17,"x":353,"y":0,"pixelRatio":1,"sdf":true},"watch-11":{"width":17,"height":17,"x":370,"y":0,"pixelRatio":1,"sdf":true},"water-11":{"width":17,"height":17,"x":387,"y":0,"pixelRatio":1,"sdf":true},"waterfall-11":{"width":17,"height":17,"x":404,"y":0,"pixelRatio":1,"sdf":true},"watermill-11":{"width":17,"height":17,"x":421,"y":0,"pixelRatio":1,"sdf":true},"wetland-11":{"width":17,"height":17,"x":438,"y":0,"pixelRatio":1,"sdf":true},"wheelchair-11":{"width":17,"height":17,"x":455,"y":0,"pixelRatio":1,"sdf":true},"windmill-11":{"width":17,"height":17,"x":472,"y":0,"pixelRatio":1,"sdf":true},"zoo-11":{"width":17,"height":17,"x":489,"y":0,"pixelRatio":1,"sdf":true}}')},function(module){module.exports=JSON.parse('{"aerialway-15":{"width":36,"height":36,"x":0,"y":0,"pixelRatio":2,"sdf":true},"airfield-15":{"width":36,"height":36,"x":36,"y":0,"pixelRatio":2,"sdf":true},"airport-15":{"width":36,"height":36,"x":0,"y":36,"pixelRatio":2,"sdf":true},"alcohol-shop-15":{"width":36,"height":36,"x":36,"y":36,"pixelRatio":2,"sdf":true},"american-football-15":{"width":36,"height":36,"x":72,"y":0,"pixelRatio":2,"sdf":true},"amusement-park-15":{"width":36,"height":36,"x":108,"y":0,"pixelRatio":2,"sdf":true},"aquarium-15":{"width":36,"height":36,"x":72,"y":36,"pixelRatio":2,"sdf":true},"arrow-es-15":{"width":36,"height":36,"x":108,"y":36,"pixelRatio":2,"sdf":true},"art-gallery-15":{"width":36,"height":36,"x":0,"y":72,"pixelRatio":2,"sdf":true},"attraction-15":{"width":36,"height":36,"x":36,"y":72,"pixelRatio":2,"sdf":true},"bakery-15":{"width":36,"height":36,"x":72,"y":72,"pixelRatio":2,"sdf":true},"bank-15":{"width":36,"height":36,"x":108,"y":72,"pixelRatio":2,"sdf":true},"bar-15":{"width":36,"height":36,"x":0,"y":108,"pixelRatio":2,"sdf":true},"barrier-15":{"width":36,"height":36,"x":36,"y":108,"pixelRatio":2,"sdf":true},"baseball-15":{"width":36,"height":36,"x":72,"y":108,"pixelRatio":2,"sdf":true},"basketball-15":{"width":36,"height":36,"x":108,"y":108,"pixelRatio":2,"sdf":true},"bbq-15":{"width":36,"height":36,"x":144,"y":0,"pixelRatio":2,"sdf":true},"beach-15":{"width":36,"height":36,"x":180,"y":0,"pixelRatio":2,"sdf":true},"beer-15":{"width":36,"height":36,"x":216,"y":0,"pixelRatio":2,"sdf":true},"bicycle-15":{"width":36,"height":36,"x":252,"y":0,"pixelRatio":2,"sdf":true},"bicycle-share-15":{"width":36,"height":36,"x":144,"y":36,"pixelRatio":2,"sdf":true},"blood-bank-15":{"width":36,"height":36,"x":180,"y":36,"pixelRatio":2,"sdf":true},"boat-es-15":{"width":36,"height":36,"x":216,"y":36,"pixelRatio":2,"sdf":true},"bowling-alley-15":{"width":36,"height":36,"x":252,"y":36,"pixelRatio":2,"sdf":true},"bridge-15":{"width":36,"height":36,"x":144,"y":72,"pixelRatio":2,"sdf":true},"building-15":{"width":36,"height":36,"x":180,"y":72,"pixelRatio":2,"sdf":true},"building-alt1-15":{"width":36,"height":36,"x":216,"y":72,"pixelRatio":2,"sdf":true},"bus-15":{"width":36,"height":36,"x":252,"y":72,"pixelRatio":2,"sdf":true},"cafe-15":{"width":36,"height":36,"x":144,"y":108,"pixelRatio":2,"sdf":true},"campsite-15":{"width":36,"height":36,"x":180,"y":108,"pixelRatio":2,"sdf":true},"car-15":{"width":36,"height":36,"x":216,"y":108,"pixelRatio":2,"sdf":true},"car-rental-15":{"width":36,"height":36,"x":252,"y":108,"pixelRatio":2,"sdf":true},"car-repair-15":{"width":36,"height":36,"x":0,"y":144,"pixelRatio":2,"sdf":true},"car-top-es-15":{"width":36,"height":36,"x":36,"y":144,"pixelRatio":2,"sdf":true},"casino-15":{"width":36,"height":36,"x":72,"y":144,"pixelRatio":2,"sdf":true},"castle-15":{"width":36,"height":36,"x":108,"y":144,"pixelRatio":2,"sdf":true},"cemetery-15":{"width":36,"height":36,"x":144,"y":144,"pixelRatio":2,"sdf":true},"charging-station-15":{"width":36,"height":36,"x":180,"y":144,"pixelRatio":2,"sdf":true},"cinema-15":{"width":36,"height":36,"x":216,"y":144,"pixelRatio":2,"sdf":true},"circle-15":{"width":36,"height":36,"x":252,"y":144,"pixelRatio":2,"sdf":true},"circle-stroked-15":{"width":36,"height":36,"x":0,"y":180,"pixelRatio":2,"sdf":true},"city-15":{"width":36,"height":36,"x":36,"y":180,"pixelRatio":2,"sdf":true},"clothing-store-15":{"width":36,"height":36,"x":72,"y":180,"pixelRatio":2,"sdf":true},"college-15":{"width":36,"height":36,"x":108,"y":180,"pixelRatio":2,"sdf":true},"commercial-15":{"width":36,"height":36,"x":144,"y":180,"pixelRatio":2,"sdf":true},"communications-tower-15":{"width":36,"height":36,"x":180,"y":180,"pixelRatio":2,"sdf":true},"confectionery-15":{"width":36,"height":36,"x":216,"y":180,"pixelRatio":2,"sdf":true},"convenience-15":{"width":36,"height":36,"x":252,"y":180,"pixelRatio":2,"sdf":true},"cricket-15":{"width":36,"height":36,"x":0,"y":216,"pixelRatio":2,"sdf":true},"cross-15":{"width":36,"height":36,"x":36,"y":216,"pixelRatio":2,"sdf":true},"dam-15":{"width":36,"height":36,"x":72,"y":216,"pixelRatio":2,"sdf":true},"danger-15":{"width":36,"height":36,"x":108,"y":216,"pixelRatio":2,"sdf":true},"defibrillator-15":{"width":36,"height":36,"x":144,"y":216,"pixelRatio":2,"sdf":true},"dentist-15":{"width":36,"height":36,"x":180,"y":216,"pixelRatio":2,"sdf":true},"doctor-15":{"width":36,"height":36,"x":216,"y":216,"pixelRatio":2,"sdf":true},"dog-park-15":{"width":36,"height":36,"x":252,"y":216,"pixelRatio":2,"sdf":true},"drinking-water-15":{"width":36,"height":36,"x":0,"y":252,"pixelRatio":2,"sdf":true},"embassy-15":{"width":36,"height":36,"x":36,"y":252,"pixelRatio":2,"sdf":true},"emergency-phone-15":{"width":36,"height":36,"x":72,"y":252,"pixelRatio":2,"sdf":true},"entrance-15":{"width":36,"height":36,"x":108,"y":252,"pixelRatio":2,"sdf":true},"entrance-alt1-15":{"width":36,"height":36,"x":144,"y":252,"pixelRatio":2,"sdf":true},"farm-15":{"width":36,"height":36,"x":180,"y":252,"pixelRatio":2,"sdf":true},"fast-food-15":{"width":36,"height":36,"x":216,"y":252,"pixelRatio":2,"sdf":true},"fence-15":{"width":36,"height":36,"x":252,"y":252,"pixelRatio":2,"sdf":true},"ferry-15":{"width":36,"height":36,"x":288,"y":0,"pixelRatio":2,"sdf":true},"fire-station-15":{"width":36,"height":36,"x":324,"y":0,"pixelRatio":2,"sdf":true},"fitness-centre-15":{"width":36,"height":36,"x":360,"y":0,"pixelRatio":2,"sdf":true},"florist-15":{"width":36,"height":36,"x":396,"y":0,"pixelRatio":2,"sdf":true},"fuel-15":{"width":36,"height":36,"x":432,"y":0,"pixelRatio":2,"sdf":true},"furniture-15":{"width":36,"height":36,"x":468,"y":0,"pixelRatio":2,"sdf":true},"gaming-15":{"width":36,"height":36,"x":504,"y":0,"pixelRatio":2,"sdf":true},"garden-15":{"width":36,"height":36,"x":540,"y":0,"pixelRatio":2,"sdf":true},"garden-centre-15":{"width":36,"height":36,"x":288,"y":36,"pixelRatio":2,"sdf":true},"gift-15":{"width":36,"height":36,"x":324,"y":36,"pixelRatio":2,"sdf":true},"globe-15":{"width":36,"height":36,"x":360,"y":36,"pixelRatio":2,"sdf":true},"golf-15":{"width":36,"height":36,"x":396,"y":36,"pixelRatio":2,"sdf":true},"grocery-15":{"width":36,"height":36,"x":432,"y":36,"pixelRatio":2,"sdf":true},"hairdresser-15":{"width":36,"height":36,"x":468,"y":36,"pixelRatio":2,"sdf":true},"harbor-15":{"width":36,"height":36,"x":504,"y":36,"pixelRatio":2,"sdf":true},"hardware-15":{"width":36,"height":36,"x":540,"y":36,"pixelRatio":2,"sdf":true},"heart-15":{"width":36,"height":36,"x":288,"y":72,"pixelRatio":2,"sdf":true},"heliport-15":{"width":36,"height":36,"x":324,"y":72,"pixelRatio":2,"sdf":true},"home-15":{"width":36,"height":36,"x":360,"y":72,"pixelRatio":2,"sdf":true},"horse-riding-15":{"width":36,"height":36,"x":396,"y":72,"pixelRatio":2,"sdf":true},"hospital-15":{"width":36,"height":36,"x":432,"y":72,"pixelRatio":2,"sdf":true},"ice-cream-15":{"width":36,"height":36,"x":468,"y":72,"pixelRatio":2,"sdf":true},"industry-15":{"width":36,"height":36,"x":504,"y":72,"pixelRatio":2,"sdf":true},"information-15":{"width":36,"height":36,"x":540,"y":72,"pixelRatio":2,"sdf":true},"jewelry-store-15":{"width":36,"height":36,"x":288,"y":108,"pixelRatio":2,"sdf":true},"karaoke-15":{"width":36,"height":36,"x":324,"y":108,"pixelRatio":2,"sdf":true},"landmark-15":{"width":36,"height":36,"x":360,"y":108,"pixelRatio":2,"sdf":true},"landuse-15":{"width":36,"height":36,"x":396,"y":108,"pixelRatio":2,"sdf":true},"laundry-15":{"width":36,"height":36,"x":432,"y":108,"pixelRatio":2,"sdf":true},"library-15":{"width":36,"height":36,"x":468,"y":108,"pixelRatio":2,"sdf":true},"lighthouse-15":{"width":36,"height":36,"x":504,"y":108,"pixelRatio":2,"sdf":true},"lodging-15":{"width":36,"height":36,"x":540,"y":108,"pixelRatio":2,"sdf":true},"logging-15":{"width":36,"height":36,"x":288,"y":144,"pixelRatio":2,"sdf":true},"marker-15":{"width":36,"height":36,"x":324,"y":144,"pixelRatio":2,"sdf":true},"marker-stroked-15":{"width":36,"height":36,"x":360,"y":144,"pixelRatio":2,"sdf":true},"mobile-phone-15":{"width":36,"height":36,"x":396,"y":144,"pixelRatio":2,"sdf":true},"monument-15":{"width":36,"height":36,"x":432,"y":144,"pixelRatio":2,"sdf":true},"mountain-15":{"width":36,"height":36,"x":468,"y":144,"pixelRatio":2,"sdf":true},"museum-15":{"width":36,"height":36,"x":504,"y":144,"pixelRatio":2,"sdf":true},"music-15":{"width":36,"height":36,"x":540,"y":144,"pixelRatio":2,"sdf":true},"natural-15":{"width":36,"height":36,"x":288,"y":180,"pixelRatio":2,"sdf":true},"oil-rig-es-15":{"width":36,"height":36,"x":324,"y":180,"pixelRatio":2,"sdf":true},"optician-15":{"width":36,"height":36,"x":360,"y":180,"pixelRatio":2,"sdf":true},"paint-15":{"width":36,"height":36,"x":396,"y":180,"pixelRatio":2,"sdf":true},"park-15":{"width":36,"height":36,"x":432,"y":180,"pixelRatio":2,"sdf":true},"park-alt1-15":{"width":36,"height":36,"x":468,"y":180,"pixelRatio":2,"sdf":true},"parking-15":{"width":36,"height":36,"x":504,"y":180,"pixelRatio":2,"sdf":true},"parking-garage-15":{"width":36,"height":36,"x":540,"y":180,"pixelRatio":2,"sdf":true},"pharmacy-15":{"width":36,"height":36,"x":288,"y":216,"pixelRatio":2,"sdf":true},"picnic-site-15":{"width":36,"height":36,"x":324,"y":216,"pixelRatio":2,"sdf":true},"pitch-15":{"width":36,"height":36,"x":360,"y":216,"pixelRatio":2,"sdf":true},"place-of-worship-15":{"width":36,"height":36,"x":396,"y":216,"pixelRatio":2,"sdf":true},"playground-15":{"width":36,"height":36,"x":432,"y":216,"pixelRatio":2,"sdf":true},"police-15":{"width":36,"height":36,"x":468,"y":216,"pixelRatio":2,"sdf":true},"post-15":{"width":36,"height":36,"x":504,"y":216,"pixelRatio":2,"sdf":true},"prison-15":{"width":36,"height":36,"x":540,"y":216,"pixelRatio":2,"sdf":true},"rail-15":{"width":36,"height":36,"x":288,"y":252,"pixelRatio":2,"sdf":true},"rail-light-15":{"width":36,"height":36,"x":324,"y":252,"pixelRatio":2,"sdf":true},"rail-metro-15":{"width":36,"height":36,"x":360,"y":252,"pixelRatio":2,"sdf":true},"ranger-station-15":{"width":36,"height":36,"x":396,"y":252,"pixelRatio":2,"sdf":true},"recycling-15":{"width":36,"height":36,"x":432,"y":252,"pixelRatio":2,"sdf":true},"religious-buddhist-15":{"width":36,"height":36,"x":468,"y":252,"pixelRatio":2,"sdf":true},"religious-christian-15":{"width":36,"height":36,"x":504,"y":252,"pixelRatio":2,"sdf":true},"religious-jewish-15":{"width":36,"height":36,"x":540,"y":252,"pixelRatio":2,"sdf":true},"religious-muslim-15":{"width":36,"height":36,"x":0,"y":288,"pixelRatio":2,"sdf":true},"residential-community-15":{"width":36,"height":36,"x":36,"y":288,"pixelRatio":2,"sdf":true},"restaurant-15":{"width":36,"height":36,"x":72,"y":288,"pixelRatio":2,"sdf":true},"restaurant-noodle-15":{"width":36,"height":36,"x":108,"y":288,"pixelRatio":2,"sdf":true},"restaurant-pizza-15":{"width":36,"height":36,"x":144,"y":288,"pixelRatio":2,"sdf":true},"restaurant-seafood-15":{"width":36,"height":36,"x":180,"y":288,"pixelRatio":2,"sdf":true},"roadblock-15":{"width":36,"height":36,"x":216,"y":288,"pixelRatio":2,"sdf":true},"rocket-15":{"width":36,"height":36,"x":252,"y":288,"pixelRatio":2,"sdf":true},"school-15":{"width":36,"height":36,"x":288,"y":288,"pixelRatio":2,"sdf":true},"scooter-15":{"width":36,"height":36,"x":324,"y":288,"pixelRatio":2,"sdf":true},"shelter-15":{"width":36,"height":36,"x":360,"y":288,"pixelRatio":2,"sdf":true},"shoe-15":{"width":36,"height":36,"x":396,"y":288,"pixelRatio":2,"sdf":true},"shop-15":{"width":36,"height":36,"x":432,"y":288,"pixelRatio":2,"sdf":true},"skateboard-15":{"width":36,"height":36,"x":468,"y":288,"pixelRatio":2,"sdf":true},"skiing-15":{"width":36,"height":36,"x":504,"y":288,"pixelRatio":2,"sdf":true},"slaughterhouse-15":{"width":36,"height":36,"x":540,"y":288,"pixelRatio":2,"sdf":true},"slipway-15":{"width":36,"height":36,"x":0,"y":324,"pixelRatio":2,"sdf":true},"snowmobile-15":{"width":36,"height":36,"x":36,"y":324,"pixelRatio":2,"sdf":true},"soccer-15":{"width":36,"height":36,"x":72,"y":324,"pixelRatio":2,"sdf":true},"square-15":{"width":36,"height":36,"x":108,"y":324,"pixelRatio":2,"sdf":true},"square-stroked-15":{"width":36,"height":36,"x":144,"y":324,"pixelRatio":2,"sdf":true},"stadium-15":{"width":36,"height":36,"x":180,"y":324,"pixelRatio":2,"sdf":true},"star-15":{"width":36,"height":36,"x":216,"y":324,"pixelRatio":2,"sdf":true},"star-stroked-15":{"width":36,"height":36,"x":252,"y":324,"pixelRatio":2,"sdf":true},"suitcase-15":{"width":36,"height":36,"x":288,"y":324,"pixelRatio":2,"sdf":true},"sushi-15":{"width":36,"height":36,"x":324,"y":324,"pixelRatio":2,"sdf":true},"swimming-15":{"width":36,"height":36,"x":360,"y":324,"pixelRatio":2,"sdf":true},"table-tennis-15":{"width":36,"height":36,"x":396,"y":324,"pixelRatio":2,"sdf":true},"teahouse-15":{"width":36,"height":36,"x":432,"y":324,"pixelRatio":2,"sdf":true},"telephone-15":{"width":36,"height":36,"x":468,"y":324,"pixelRatio":2,"sdf":true},"tennis-15":{"width":36,"height":36,"x":504,"y":324,"pixelRatio":2,"sdf":true},"theatre-15":{"width":36,"height":36,"x":540,"y":324,"pixelRatio":2,"sdf":true},"toilet-15":{"width":36,"height":36,"x":0,"y":360,"pixelRatio":2,"sdf":true},"town-15":{"width":36,"height":36,"x":36,"y":360,"pixelRatio":2,"sdf":true},"town-hall-15":{"width":36,"height":36,"x":72,"y":360,"pixelRatio":2,"sdf":true},"triangle-15":{"width":36,"height":36,"x":108,"y":360,"pixelRatio":2,"sdf":true},"triangle-stroked-15":{"width":36,"height":36,"x":144,"y":360,"pixelRatio":2,"sdf":true},"veterinary-15":{"width":36,"height":36,"x":180,"y":360,"pixelRatio":2,"sdf":true},"viewpoint-15":{"width":36,"height":36,"x":216,"y":360,"pixelRatio":2,"sdf":true},"village-15":{"width":36,"height":36,"x":252,"y":360,"pixelRatio":2,"sdf":true},"volcano-15":{"width":36,"height":36,"x":288,"y":360,"pixelRatio":2,"sdf":true},"volleyball-15":{"width":36,"height":36,"x":324,"y":360,"pixelRatio":2,"sdf":true},"warehouse-15":{"width":36,"height":36,"x":360,"y":360,"pixelRatio":2,"sdf":true},"waste-basket-15":{"width":36,"height":36,"x":396,"y":360,"pixelRatio":2,"sdf":true},"watch-15":{"width":36,"height":36,"x":432,"y":360,"pixelRatio":2,"sdf":true},"water-15":{"width":36,"height":36,"x":468,"y":360,"pixelRatio":2,"sdf":true},"waterfall-15":{"width":36,"height":36,"x":504,"y":360,"pixelRatio":2,"sdf":true},"watermill-15":{"width":36,"height":36,"x":540,"y":360,"pixelRatio":2,"sdf":true},"wetland-15":{"width":36,"height":36,"x":0,"y":396,"pixelRatio":2,"sdf":true},"wheelchair-15":{"width":36,"height":36,"x":36,"y":396,"pixelRatio":2,"sdf":true},"windmill-15":{"width":36,"height":36,"x":72,"y":396,"pixelRatio":2,"sdf":true},"zoo-15":{"width":36,"height":36,"x":108,"y":396,"pixelRatio":2,"sdf":true},"aerialway-11":{"width":28,"height":28,"x":144,"y":396,"pixelRatio":2,"sdf":true},"airfield-11":{"width":28,"height":28,"x":172,"y":396,"pixelRatio":2,"sdf":true},"airport-11":{"width":28,"height":28,"x":200,"y":396,"pixelRatio":2,"sdf":true},"alcohol-shop-11":{"width":28,"height":28,"x":228,"y":396,"pixelRatio":2,"sdf":true},"american-football-11":{"width":28,"height":28,"x":256,"y":396,"pixelRatio":2,"sdf":true},"amusement-park-11":{"width":28,"height":28,"x":284,"y":396,"pixelRatio":2,"sdf":true},"aquarium-11":{"width":28,"height":28,"x":312,"y":396,"pixelRatio":2,"sdf":true},"arrow-es-11":{"width":28,"height":28,"x":340,"y":396,"pixelRatio":2,"sdf":true},"art-gallery-11":{"width":28,"height":28,"x":368,"y":396,"pixelRatio":2,"sdf":true},"attraction-11":{"width":28,"height":28,"x":396,"y":396,"pixelRatio":2,"sdf":true},"bakery-11":{"width":28,"height":28,"x":424,"y":396,"pixelRatio":2,"sdf":true},"bank-11":{"width":28,"height":28,"x":452,"y":396,"pixelRatio":2,"sdf":true},"bar-11":{"width":28,"height":28,"x":480,"y":396,"pixelRatio":2,"sdf":true},"barrier-11":{"width":28,"height":28,"x":508,"y":396,"pixelRatio":2,"sdf":true},"baseball-11":{"width":28,"height":28,"x":536,"y":396,"pixelRatio":2,"sdf":true},"basketball-11":{"width":28,"height":28,"x":0,"y":432,"pixelRatio":2,"sdf":true},"bbq-11":{"width":28,"height":28,"x":28,"y":432,"pixelRatio":2,"sdf":true},"beach-11":{"width":28,"height":28,"x":56,"y":432,"pixelRatio":2,"sdf":true},"beer-11":{"width":28,"height":28,"x":84,"y":432,"pixelRatio":2,"sdf":true},"bicycle-11":{"width":28,"height":28,"x":112,"y":432,"pixelRatio":2,"sdf":true},"bicycle-share-11":{"width":28,"height":28,"x":140,"y":432,"pixelRatio":2,"sdf":true},"blood-bank-11":{"width":28,"height":28,"x":168,"y":432,"pixelRatio":2,"sdf":true},"boat-es-11":{"width":28,"height":28,"x":196,"y":432,"pixelRatio":2,"sdf":true},"bowling-alley-11":{"width":28,"height":28,"x":224,"y":432,"pixelRatio":2,"sdf":true},"bridge-11":{"width":28,"height":28,"x":252,"y":432,"pixelRatio":2,"sdf":true},"building-11":{"width":28,"height":28,"x":280,"y":432,"pixelRatio":2,"sdf":true},"building-alt1-11":{"width":28,"height":28,"x":308,"y":432,"pixelRatio":2,"sdf":true},"bus-11":{"width":28,"height":28,"x":336,"y":432,"pixelRatio":2,"sdf":true},"cafe-11":{"width":28,"height":28,"x":364,"y":432,"pixelRatio":2,"sdf":true},"campsite-11":{"width":28,"height":28,"x":392,"y":432,"pixelRatio":2,"sdf":true},"car-11":{"width":28,"height":28,"x":420,"y":432,"pixelRatio":2,"sdf":true},"car-rental-11":{"width":28,"height":28,"x":448,"y":432,"pixelRatio":2,"sdf":true},"car-repair-11":{"width":28,"height":28,"x":476,"y":432,"pixelRatio":2,"sdf":true},"car-top-es-11":{"width":28,"height":28,"x":504,"y":432,"pixelRatio":2,"sdf":true},"casino-11":{"width":28,"height":28,"x":532,"y":432,"pixelRatio":2,"sdf":true},"castle-11":{"width":28,"height":28,"x":0,"y":460,"pixelRatio":2,"sdf":true},"cemetery-11":{"width":28,"height":28,"x":28,"y":460,"pixelRatio":2,"sdf":true},"charging-station-11":{"width":28,"height":28,"x":56,"y":460,"pixelRatio":2,"sdf":true},"cinema-11":{"width":28,"height":28,"x":84,"y":460,"pixelRatio":2,"sdf":true},"circle-11":{"width":28,"height":28,"x":112,"y":460,"pixelRatio":2,"sdf":true},"circle-stroked-11":{"width":28,"height":28,"x":140,"y":460,"pixelRatio":2,"sdf":true},"city-11":{"width":28,"height":28,"x":168,"y":460,"pixelRatio":2,"sdf":true},"clothing-store-11":{"width":28,"height":28,"x":196,"y":460,"pixelRatio":2,"sdf":true},"college-11":{"width":28,"height":28,"x":224,"y":460,"pixelRatio":2,"sdf":true},"commercial-11":{"width":28,"height":28,"x":252,"y":460,"pixelRatio":2,"sdf":true},"communications-tower-11":{"width":28,"height":28,"x":280,"y":460,"pixelRatio":2,"sdf":true},"confectionery-11":{"width":28,"height":28,"x":308,"y":460,"pixelRatio":2,"sdf":true},"convenience-11":{"width":28,"height":28,"x":336,"y":460,"pixelRatio":2,"sdf":true},"cricket-11":{"width":28,"height":28,"x":364,"y":460,"pixelRatio":2,"sdf":true},"cross-11":{"width":28,"height":28,"x":392,"y":460,"pixelRatio":2,"sdf":true},"dam-11":{"width":28,"height":28,"x":420,"y":460,"pixelRatio":2,"sdf":true},"danger-11":{"width":28,"height":28,"x":448,"y":460,"pixelRatio":2,"sdf":true},"defibrillator-11":{"width":28,"height":28,"x":476,"y":460,"pixelRatio":2,"sdf":true},"dentist-11":{"width":28,"height":28,"x":504,"y":460,"pixelRatio":2,"sdf":true},"doctor-11":{"width":28,"height":28,"x":532,"y":460,"pixelRatio":2,"sdf":true},"dog-park-11":{"width":28,"height":28,"x":0,"y":488,"pixelRatio":2,"sdf":true},"drinking-water-11":{"width":28,"height":28,"x":28,"y":488,"pixelRatio":2,"sdf":true},"embassy-11":{"width":28,"height":28,"x":56,"y":488,"pixelRatio":2,"sdf":true},"emergency-phone-11":{"width":28,"height":28,"x":84,"y":488,"pixelRatio":2,"sdf":true},"entrance-11":{"width":28,"height":28,"x":112,"y":488,"pixelRatio":2,"sdf":true},"entrance-alt1-11":{"width":28,"height":28,"x":140,"y":488,"pixelRatio":2,"sdf":true},"farm-11":{"width":28,"height":28,"x":168,"y":488,"pixelRatio":2,"sdf":true},"fast-food-11":{"width":28,"height":28,"x":196,"y":488,"pixelRatio":2,"sdf":true},"fence-11":{"width":28,"height":28,"x":224,"y":488,"pixelRatio":2,"sdf":true},"ferry-11":{"width":28,"height":28,"x":252,"y":488,"pixelRatio":2,"sdf":true},"fire-station-11":{"width":28,"height":28,"x":280,"y":488,"pixelRatio":2,"sdf":true},"fitness-centre-11":{"width":28,"height":28,"x":308,"y":488,"pixelRatio":2,"sdf":true},"florist-11":{"width":28,"height":28,"x":336,"y":488,"pixelRatio":2,"sdf":true},"fuel-11":{"width":28,"height":28,"x":364,"y":488,"pixelRatio":2,"sdf":true},"furniture-11":{"width":28,"height":28,"x":392,"y":488,"pixelRatio":2,"sdf":true},"gaming-11":{"width":28,"height":28,"x":420,"y":488,"pixelRatio":2,"sdf":true},"garden-11":{"width":28,"height":28,"x":448,"y":488,"pixelRatio":2,"sdf":true},"garden-centre-11":{"width":28,"height":28,"x":476,"y":488,"pixelRatio":2,"sdf":true},"gift-11":{"width":28,"height":28,"x":504,"y":488,"pixelRatio":2,"sdf":true},"globe-11":{"width":28,"height":28,"x":532,"y":488,"pixelRatio":2,"sdf":true},"golf-11":{"width":28,"height":28,"x":0,"y":516,"pixelRatio":2,"sdf":true},"grocery-11":{"width":28,"height":28,"x":28,"y":516,"pixelRatio":2,"sdf":true},"hairdresser-11":{"width":28,"height":28,"x":56,"y":516,"pixelRatio":2,"sdf":true},"harbor-11":{"width":28,"height":28,"x":84,"y":516,"pixelRatio":2,"sdf":true},"hardware-11":{"width":28,"height":28,"x":112,"y":516,"pixelRatio":2,"sdf":true},"heart-11":{"width":28,"height":28,"x":140,"y":516,"pixelRatio":2,"sdf":true},"heliport-11":{"width":28,"height":28,"x":168,"y":516,"pixelRatio":2,"sdf":true},"home-11":{"width":28,"height":28,"x":196,"y":516,"pixelRatio":2,"sdf":true},"horse-riding-11":{"width":28,"height":28,"x":224,"y":516,"pixelRatio":2,"sdf":true},"hospital-11":{"width":28,"height":28,"x":252,"y":516,"pixelRatio":2,"sdf":true},"ice-cream-11":{"width":28,"height":28,"x":280,"y":516,"pixelRatio":2,"sdf":true},"industry-11":{"width":28,"height":28,"x":308,"y":516,"pixelRatio":2,"sdf":true},"information-11":{"width":28,"height":28,"x":336,"y":516,"pixelRatio":2,"sdf":true},"jewelry-store-11":{"width":28,"height":28,"x":364,"y":516,"pixelRatio":2,"sdf":true},"karaoke-11":{"width":28,"height":28,"x":392,"y":516,"pixelRatio":2,"sdf":true},"landmark-11":{"width":28,"height":28,"x":420,"y":516,"pixelRatio":2,"sdf":true},"landuse-11":{"width":28,"height":28,"x":448,"y":516,"pixelRatio":2,"sdf":true},"laundry-11":{"width":28,"height":28,"x":476,"y":516,"pixelRatio":2,"sdf":true},"library-11":{"width":28,"height":28,"x":504,"y":516,"pixelRatio":2,"sdf":true},"lighthouse-11":{"width":28,"height":28,"x":532,"y":516,"pixelRatio":2,"sdf":true},"lodging-11":{"width":28,"height":28,"x":0,"y":544,"pixelRatio":2,"sdf":true},"logging-11":{"width":28,"height":28,"x":28,"y":544,"pixelRatio":2,"sdf":true},"marker-11":{"width":28,"height":28,"x":56,"y":544,"pixelRatio":2,"sdf":true},"marker-stroked-11":{"width":28,"height":28,"x":84,"y":544,"pixelRatio":2,"sdf":true},"mobile-phone-11":{"width":28,"height":28,"x":112,"y":544,"pixelRatio":2,"sdf":true},"monument-11":{"width":28,"height":28,"x":140,"y":544,"pixelRatio":2,"sdf":true},"mountain-11":{"width":28,"height":28,"x":168,"y":544,"pixelRatio":2,"sdf":true},"museum-11":{"width":28,"height":28,"x":196,"y":544,"pixelRatio":2,"sdf":true},"music-11":{"width":28,"height":28,"x":224,"y":544,"pixelRatio":2,"sdf":true},"natural-11":{"width":28,"height":28,"x":252,"y":544,"pixelRatio":2,"sdf":true},"oil-rig-es-11":{"width":28,"height":28,"x":280,"y":544,"pixelRatio":2,"sdf":true},"optician-11":{"width":28,"height":28,"x":308,"y":544,"pixelRatio":2,"sdf":true},"paint-11":{"width":28,"height":28,"x":336,"y":544,"pixelRatio":2,"sdf":true},"park-11":{"width":28,"height":28,"x":364,"y":544,"pixelRatio":2,"sdf":true},"park-alt1-11":{"width":28,"height":28,"x":392,"y":544,"pixelRatio":2,"sdf":true},"parking-11":{"width":28,"height":28,"x":420,"y":544,"pixelRatio":2,"sdf":true},"parking-garage-11":{"width":28,"height":28,"x":448,"y":544,"pixelRatio":2,"sdf":true},"pharmacy-11":{"width":28,"height":28,"x":476,"y":544,"pixelRatio":2,"sdf":true},"picnic-site-11":{"width":28,"height":28,"x":504,"y":544,"pixelRatio":2,"sdf":true},"pitch-11":{"width":28,"height":28,"x":532,"y":544,"pixelRatio":2,"sdf":true},"place-of-worship-11":{"width":28,"height":28,"x":560,"y":432,"pixelRatio":2,"sdf":true},"playground-11":{"width":28,"height":28,"x":588,"y":432,"pixelRatio":2,"sdf":true},"police-11":{"width":28,"height":28,"x":616,"y":432,"pixelRatio":2,"sdf":true},"post-11":{"width":28,"height":28,"x":644,"y":432,"pixelRatio":2,"sdf":true},"prison-11":{"width":28,"height":28,"x":672,"y":432,"pixelRatio":2,"sdf":true},"rail-11":{"width":28,"height":28,"x":700,"y":432,"pixelRatio":2,"sdf":true},"rail-light-11":{"width":28,"height":28,"x":728,"y":432,"pixelRatio":2,"sdf":true},"rail-metro-11":{"width":28,"height":28,"x":756,"y":432,"pixelRatio":2,"sdf":true},"ranger-station-11":{"width":28,"height":28,"x":784,"y":432,"pixelRatio":2,"sdf":true},"recycling-11":{"width":28,"height":28,"x":812,"y":432,"pixelRatio":2,"sdf":true},"religious-buddhist-11":{"width":28,"height":28,"x":840,"y":432,"pixelRatio":2,"sdf":true},"religious-christian-11":{"width":28,"height":28,"x":868,"y":432,"pixelRatio":2,"sdf":true},"religious-jewish-11":{"width":28,"height":28,"x":896,"y":432,"pixelRatio":2,"sdf":true},"religious-muslim-11":{"width":28,"height":28,"x":924,"y":432,"pixelRatio":2,"sdf":true},"residential-community-11":{"width":28,"height":28,"x":952,"y":432,"pixelRatio":2,"sdf":true},"restaurant-11":{"width":28,"height":28,"x":980,"y":432,"pixelRatio":2,"sdf":true},"restaurant-noodle-11":{"width":28,"height":28,"x":1008,"y":432,"pixelRatio":2,"sdf":true},"restaurant-pizza-11":{"width":28,"height":28,"x":1036,"y":432,"pixelRatio":2,"sdf":true},"restaurant-seafood-11":{"width":28,"height":28,"x":1064,"y":432,"pixelRatio":2,"sdf":true},"roadblock-11":{"width":28,"height":28,"x":1092,"y":432,"pixelRatio":2,"sdf":true},"rocket-11":{"width":28,"height":28,"x":1120,"y":432,"pixelRatio":2,"sdf":true},"school-11":{"width":28,"height":28,"x":560,"y":460,"pixelRatio":2,"sdf":true},"scooter-11":{"width":28,"height":28,"x":588,"y":460,"pixelRatio":2,"sdf":true},"shelter-11":{"width":28,"height":28,"x":616,"y":460,"pixelRatio":2,"sdf":true},"shoe-11":{"width":28,"height":28,"x":644,"y":460,"pixelRatio":2,"sdf":true},"shop-11":{"width":28,"height":28,"x":672,"y":460,"pixelRatio":2,"sdf":true},"skateboard-11":{"width":28,"height":28,"x":700,"y":460,"pixelRatio":2,"sdf":true},"skiing-11":{"width":28,"height":28,"x":728,"y":460,"pixelRatio":2,"sdf":true},"slaughterhouse-11":{"width":28,"height":28,"x":756,"y":460,"pixelRatio":2,"sdf":true},"slipway-11":{"width":28,"height":28,"x":784,"y":460,"pixelRatio":2,"sdf":true},"snowmobile-11":{"width":28,"height":28,"x":812,"y":460,"pixelRatio":2,"sdf":true},"soccer-11":{"width":28,"height":28,"x":840,"y":460,"pixelRatio":2,"sdf":true},"square-11":{"width":28,"height":28,"x":868,"y":460,"pixelRatio":2,"sdf":true},"square-stroked-11":{"width":28,"height":28,"x":896,"y":460,"pixelRatio":2,"sdf":true},"stadium-11":{"width":28,"height":28,"x":924,"y":460,"pixelRatio":2,"sdf":true},"star-11":{"width":28,"height":28,"x":952,"y":460,"pixelRatio":2,"sdf":true},"star-stroked-11":{"width":28,"height":28,"x":980,"y":460,"pixelRatio":2,"sdf":true},"suitcase-11":{"width":28,"height":28,"x":1008,"y":460,"pixelRatio":2,"sdf":true},"sushi-11":{"width":28,"height":28,"x":1036,"y":460,"pixelRatio":2,"sdf":true},"swimming-11":{"width":28,"height":28,"x":1064,"y":460,"pixelRatio":2,"sdf":true},"table-tennis-11":{"width":28,"height":28,"x":1092,"y":460,"pixelRatio":2,"sdf":true},"teahouse-11":{"width":28,"height":28,"x":1120,"y":460,"pixelRatio":2,"sdf":true},"telephone-11":{"width":28,"height":28,"x":560,"y":488,"pixelRatio":2,"sdf":true},"tennis-11":{"width":28,"height":28,"x":588,"y":488,"pixelRatio":2,"sdf":true},"theatre-11":{"width":28,"height":28,"x":616,"y":488,"pixelRatio":2,"sdf":true},"toilet-11":{"width":28,"height":28,"x":644,"y":488,"pixelRatio":2,"sdf":true},"town-11":{"width":28,"height":28,"x":672,"y":488,"pixelRatio":2,"sdf":true},"town-hall-11":{"width":28,"height":28,"x":700,"y":488,"pixelRatio":2,"sdf":true},"triangle-11":{"width":28,"height":28,"x":728,"y":488,"pixelRatio":2,"sdf":true},"triangle-stroked-11":{"width":28,"height":28,"x":756,"y":488,"pixelRatio":2,"sdf":true},"veterinary-11":{"width":28,"height":28,"x":784,"y":488,"pixelRatio":2,"sdf":true},"viewpoint-11":{"width":28,"height":28,"x":812,"y":488,"pixelRatio":2,"sdf":true},"village-11":{"width":28,"height":28,"x":840,"y":488,"pixelRatio":2,"sdf":true},"volcano-11":{"width":28,"height":28,"x":868,"y":488,"pixelRatio":2,"sdf":true},"volleyball-11":{"width":28,"height":28,"x":896,"y":488,"pixelRatio":2,"sdf":true},"warehouse-11":{"width":28,"height":28,"x":924,"y":488,"pixelRatio":2,"sdf":true},"waste-basket-11":{"width":28,"height":28,"x":952,"y":488,"pixelRatio":2,"sdf":true},"watch-11":{"width":28,"height":28,"x":980,"y":488,"pixelRatio":2,"sdf":true},"water-11":{"width":28,"height":28,"x":1008,"y":488,"pixelRatio":2,"sdf":true},"waterfall-11":{"width":28,"height":28,"x":1036,"y":488,"pixelRatio":2,"sdf":true},"watermill-11":{"width":28,"height":28,"x":1064,"y":488,"pixelRatio":2,"sdf":true},"wetland-11":{"width":28,"height":28,"x":1092,"y":488,"pixelRatio":2,"sdf":true},"wheelchair-11":{"width":28,"height":28,"x":1120,"y":488,"pixelRatio":2,"sdf":true},"windmill-11":{"width":28,"height":28,"x":560,"y":516,"pixelRatio":2,"sdf":true},"zoo-11":{"width":28,"height":28,"x":588,"y":516,"pixelRatio":2,"sdf":true}}')},function(module){module.exports=JSON.parse('{"aerialway-15":{"width":66,"height":66,"x":0,"y":0,"pixelRatio":4,"sdf":true},"airfield-15":{"width":66,"height":66,"x":66,"y":0,"pixelRatio":4,"sdf":true},"airport-15":{"width":66,"height":66,"x":0,"y":66,"pixelRatio":4,"sdf":true},"alcohol-shop-15":{"width":66,"height":66,"x":66,"y":66,"pixelRatio":4,"sdf":true},"american-football-15":{"width":66,"height":66,"x":132,"y":0,"pixelRatio":4,"sdf":true},"amusement-park-15":{"width":66,"height":66,"x":198,"y":0,"pixelRatio":4,"sdf":true},"aquarium-15":{"width":66,"height":66,"x":132,"y":66,"pixelRatio":4,"sdf":true},"arrow-es-15":{"width":66,"height":66,"x":198,"y":66,"pixelRatio":4,"sdf":true},"art-gallery-15":{"width":66,"height":66,"x":0,"y":132,"pixelRatio":4,"sdf":true},"attraction-15":{"width":66,"height":66,"x":66,"y":132,"pixelRatio":4,"sdf":true},"bakery-15":{"width":66,"height":66,"x":132,"y":132,"pixelRatio":4,"sdf":true},"bank-15":{"width":66,"height":66,"x":198,"y":132,"pixelRatio":4,"sdf":true},"bar-15":{"width":66,"height":66,"x":0,"y":198,"pixelRatio":4,"sdf":true},"barrier-15":{"width":66,"height":66,"x":66,"y":198,"pixelRatio":4,"sdf":true},"baseball-15":{"width":66,"height":66,"x":132,"y":198,"pixelRatio":4,"sdf":true},"basketball-15":{"width":66,"height":66,"x":198,"y":198,"pixelRatio":4,"sdf":true},"bbq-15":{"width":66,"height":66,"x":264,"y":0,"pixelRatio":4,"sdf":true},"beach-15":{"width":66,"height":66,"x":330,"y":0,"pixelRatio":4,"sdf":true},"beer-15":{"width":66,"height":66,"x":396,"y":0,"pixelRatio":4,"sdf":true},"bicycle-15":{"width":66,"height":66,"x":462,"y":0,"pixelRatio":4,"sdf":true},"bicycle-share-15":{"width":66,"height":66,"x":264,"y":66,"pixelRatio":4,"sdf":true},"blood-bank-15":{"width":66,"height":66,"x":330,"y":66,"pixelRatio":4,"sdf":true},"boat-es-15":{"width":66,"height":66,"x":396,"y":66,"pixelRatio":4,"sdf":true},"bowling-alley-15":{"width":66,"height":66,"x":462,"y":66,"pixelRatio":4,"sdf":true},"bridge-15":{"width":66,"height":66,"x":264,"y":132,"pixelRatio":4,"sdf":true},"building-15":{"width":66,"height":66,"x":330,"y":132,"pixelRatio":4,"sdf":true},"building-alt1-15":{"width":66,"height":66,"x":396,"y":132,"pixelRatio":4,"sdf":true},"bus-15":{"width":66,"height":66,"x":462,"y":132,"pixelRatio":4,"sdf":true},"cafe-15":{"width":66,"height":66,"x":264,"y":198,"pixelRatio":4,"sdf":true},"campsite-15":{"width":66,"height":66,"x":330,"y":198,"pixelRatio":4,"sdf":true},"car-15":{"width":66,"height":66,"x":396,"y":198,"pixelRatio":4,"sdf":true},"car-rental-15":{"width":66,"height":66,"x":462,"y":198,"pixelRatio":4,"sdf":true},"car-repair-15":{"width":66,"height":66,"x":0,"y":264,"pixelRatio":4,"sdf":true},"car-top-es-15":{"width":66,"height":66,"x":66,"y":264,"pixelRatio":4,"sdf":true},"casino-15":{"width":66,"height":66,"x":132,"y":264,"pixelRatio":4,"sdf":true},"castle-15":{"width":66,"height":66,"x":198,"y":264,"pixelRatio":4,"sdf":true},"cemetery-15":{"width":66,"height":66,"x":264,"y":264,"pixelRatio":4,"sdf":true},"charging-station-15":{"width":66,"height":66,"x":330,"y":264,"pixelRatio":4,"sdf":true},"cinema-15":{"width":66,"height":66,"x":396,"y":264,"pixelRatio":4,"sdf":true},"circle-15":{"width":66,"height":66,"x":462,"y":264,"pixelRatio":4,"sdf":true},"circle-stroked-15":{"width":66,"height":66,"x":0,"y":330,"pixelRatio":4,"sdf":true},"city-15":{"width":66,"height":66,"x":66,"y":330,"pixelRatio":4,"sdf":true},"clothing-store-15":{"width":66,"height":66,"x":132,"y":330,"pixelRatio":4,"sdf":true},"college-15":{"width":66,"height":66,"x":198,"y":330,"pixelRatio":4,"sdf":true},"commercial-15":{"width":66,"height":66,"x":264,"y":330,"pixelRatio":4,"sdf":true},"communications-tower-15":{"width":66,"height":66,"x":330,"y":330,"pixelRatio":4,"sdf":true},"confectionery-15":{"width":66,"height":66,"x":396,"y":330,"pixelRatio":4,"sdf":true},"convenience-15":{"width":66,"height":66,"x":462,"y":330,"pixelRatio":4,"sdf":true},"cricket-15":{"width":66,"height":66,"x":0,"y":396,"pixelRatio":4,"sdf":true},"cross-15":{"width":66,"height":66,"x":66,"y":396,"pixelRatio":4,"sdf":true},"dam-15":{"width":66,"height":66,"x":132,"y":396,"pixelRatio":4,"sdf":true},"danger-15":{"width":66,"height":66,"x":198,"y":396,"pixelRatio":4,"sdf":true},"defibrillator-15":{"width":66,"height":66,"x":264,"y":396,"pixelRatio":4,"sdf":true},"dentist-15":{"width":66,"height":66,"x":330,"y":396,"pixelRatio":4,"sdf":true},"doctor-15":{"width":66,"height":66,"x":396,"y":396,"pixelRatio":4,"sdf":true},"dog-park-15":{"width":66,"height":66,"x":462,"y":396,"pixelRatio":4,"sdf":true},"drinking-water-15":{"width":66,"height":66,"x":0,"y":462,"pixelRatio":4,"sdf":true},"embassy-15":{"width":66,"height":66,"x":66,"y":462,"pixelRatio":4,"sdf":true},"emergency-phone-15":{"width":66,"height":66,"x":132,"y":462,"pixelRatio":4,"sdf":true},"entrance-15":{"width":66,"height":66,"x":198,"y":462,"pixelRatio":4,"sdf":true},"entrance-alt1-15":{"width":66,"height":66,"x":264,"y":462,"pixelRatio":4,"sdf":true},"farm-15":{"width":66,"height":66,"x":330,"y":462,"pixelRatio":4,"sdf":true},"fast-food-15":{"width":66,"height":66,"x":396,"y":462,"pixelRatio":4,"sdf":true},"fence-15":{"width":66,"height":66,"x":462,"y":462,"pixelRatio":4,"sdf":true},"ferry-15":{"width":66,"height":66,"x":528,"y":0,"pixelRatio":4,"sdf":true},"fire-station-15":{"width":66,"height":66,"x":594,"y":0,"pixelRatio":4,"sdf":true},"fitness-centre-15":{"width":66,"height":66,"x":660,"y":0,"pixelRatio":4,"sdf":true},"florist-15":{"width":66,"height":66,"x":726,"y":0,"pixelRatio":4,"sdf":true},"fuel-15":{"width":66,"height":66,"x":792,"y":0,"pixelRatio":4,"sdf":true},"furniture-15":{"width":66,"height":66,"x":858,"y":0,"pixelRatio":4,"sdf":true},"gaming-15":{"width":66,"height":66,"x":924,"y":0,"pixelRatio":4,"sdf":true},"garden-15":{"width":66,"height":66,"x":990,"y":0,"pixelRatio":4,"sdf":true},"garden-centre-15":{"width":66,"height":66,"x":528,"y":66,"pixelRatio":4,"sdf":true},"gift-15":{"width":66,"height":66,"x":594,"y":66,"pixelRatio":4,"sdf":true},"globe-15":{"width":66,"height":66,"x":660,"y":66,"pixelRatio":4,"sdf":true},"golf-15":{"width":66,"height":66,"x":726,"y":66,"pixelRatio":4,"sdf":true},"grocery-15":{"width":66,"height":66,"x":792,"y":66,"pixelRatio":4,"sdf":true},"hairdresser-15":{"width":66,"height":66,"x":858,"y":66,"pixelRatio":4,"sdf":true},"harbor-15":{"width":66,"height":66,"x":924,"y":66,"pixelRatio":4,"sdf":true},"hardware-15":{"width":66,"height":66,"x":990,"y":66,"pixelRatio":4,"sdf":true},"heart-15":{"width":66,"height":66,"x":528,"y":132,"pixelRatio":4,"sdf":true},"heliport-15":{"width":66,"height":66,"x":594,"y":132,"pixelRatio":4,"sdf":true},"home-15":{"width":66,"height":66,"x":660,"y":132,"pixelRatio":4,"sdf":true},"horse-riding-15":{"width":66,"height":66,"x":726,"y":132,"pixelRatio":4,"sdf":true},"hospital-15":{"width":66,"height":66,"x":792,"y":132,"pixelRatio":4,"sdf":true},"ice-cream-15":{"width":66,"height":66,"x":858,"y":132,"pixelRatio":4,"sdf":true},"industry-15":{"width":66,"height":66,"x":924,"y":132,"pixelRatio":4,"sdf":true},"information-15":{"width":66,"height":66,"x":990,"y":132,"pixelRatio":4,"sdf":true},"jewelry-store-15":{"width":66,"height":66,"x":528,"y":198,"pixelRatio":4,"sdf":true},"karaoke-15":{"width":66,"height":66,"x":594,"y":198,"pixelRatio":4,"sdf":true},"landmark-15":{"width":66,"height":66,"x":660,"y":198,"pixelRatio":4,"sdf":true},"landuse-15":{"width":66,"height":66,"x":726,"y":198,"pixelRatio":4,"sdf":true},"laundry-15":{"width":66,"height":66,"x":792,"y":198,"pixelRatio":4,"sdf":true},"library-15":{"width":66,"height":66,"x":858,"y":198,"pixelRatio":4,"sdf":true},"lighthouse-15":{"width":66,"height":66,"x":924,"y":198,"pixelRatio":4,"sdf":true},"lodging-15":{"width":66,"height":66,"x":990,"y":198,"pixelRatio":4,"sdf":true},"logging-15":{"width":66,"height":66,"x":528,"y":264,"pixelRatio":4,"sdf":true},"marker-15":{"width":66,"height":66,"x":594,"y":264,"pixelRatio":4,"sdf":true},"marker-stroked-15":{"width":66,"height":66,"x":660,"y":264,"pixelRatio":4,"sdf":true},"mobile-phone-15":{"width":66,"height":66,"x":726,"y":264,"pixelRatio":4,"sdf":true},"monument-15":{"width":66,"height":66,"x":792,"y":264,"pixelRatio":4,"sdf":true},"mountain-15":{"width":66,"height":66,"x":858,"y":264,"pixelRatio":4,"sdf":true},"museum-15":{"width":66,"height":66,"x":924,"y":264,"pixelRatio":4,"sdf":true},"music-15":{"width":66,"height":66,"x":990,"y":264,"pixelRatio":4,"sdf":true},"natural-15":{"width":66,"height":66,"x":528,"y":330,"pixelRatio":4,"sdf":true},"oil-rig-es-15":{"width":66,"height":66,"x":594,"y":330,"pixelRatio":4,"sdf":true},"optician-15":{"width":66,"height":66,"x":660,"y":330,"pixelRatio":4,"sdf":true},"paint-15":{"width":66,"height":66,"x":726,"y":330,"pixelRatio":4,"sdf":true},"park-15":{"width":66,"height":66,"x":792,"y":330,"pixelRatio":4,"sdf":true},"park-alt1-15":{"width":66,"height":66,"x":858,"y":330,"pixelRatio":4,"sdf":true},"parking-15":{"width":66,"height":66,"x":924,"y":330,"pixelRatio":4,"sdf":true},"parking-garage-15":{"width":66,"height":66,"x":990,"y":330,"pixelRatio":4,"sdf":true},"pharmacy-15":{"width":66,"height":66,"x":528,"y":396,"pixelRatio":4,"sdf":true},"picnic-site-15":{"width":66,"height":66,"x":594,"y":396,"pixelRatio":4,"sdf":true},"pitch-15":{"width":66,"height":66,"x":660,"y":396,"pixelRatio":4,"sdf":true},"place-of-worship-15":{"width":66,"height":66,"x":726,"y":396,"pixelRatio":4,"sdf":true},"playground-15":{"width":66,"height":66,"x":792,"y":396,"pixelRatio":4,"sdf":true},"police-15":{"width":66,"height":66,"x":858,"y":396,"pixelRatio":4,"sdf":true},"post-15":{"width":66,"height":66,"x":924,"y":396,"pixelRatio":4,"sdf":true},"prison-15":{"width":66,"height":66,"x":990,"y":396,"pixelRatio":4,"sdf":true},"rail-15":{"width":66,"height":66,"x":528,"y":462,"pixelRatio":4,"sdf":true},"rail-light-15":{"width":66,"height":66,"x":594,"y":462,"pixelRatio":4,"sdf":true},"rail-metro-15":{"width":66,"height":66,"x":660,"y":462,"pixelRatio":4,"sdf":true},"ranger-station-15":{"width":66,"height":66,"x":726,"y":462,"pixelRatio":4,"sdf":true},"recycling-15":{"width":66,"height":66,"x":792,"y":462,"pixelRatio":4,"sdf":true},"religious-buddhist-15":{"width":66,"height":66,"x":858,"y":462,"pixelRatio":4,"sdf":true},"religious-christian-15":{"width":66,"height":66,"x":924,"y":462,"pixelRatio":4,"sdf":true},"religious-jewish-15":{"width":66,"height":66,"x":990,"y":462,"pixelRatio":4,"sdf":true},"religious-muslim-15":{"width":66,"height":66,"x":0,"y":528,"pixelRatio":4,"sdf":true},"residential-community-15":{"width":66,"height":66,"x":66,"y":528,"pixelRatio":4,"sdf":true},"restaurant-15":{"width":66,"height":66,"x":132,"y":528,"pixelRatio":4,"sdf":true},"restaurant-noodle-15":{"width":66,"height":66,"x":198,"y":528,"pixelRatio":4,"sdf":true},"restaurant-pizza-15":{"width":66,"height":66,"x":264,"y":528,"pixelRatio":4,"sdf":true},"restaurant-seafood-15":{"width":66,"height":66,"x":330,"y":528,"pixelRatio":4,"sdf":true},"roadblock-15":{"width":66,"height":66,"x":396,"y":528,"pixelRatio":4,"sdf":true},"rocket-15":{"width":66,"height":66,"x":462,"y":528,"pixelRatio":4,"sdf":true},"school-15":{"width":66,"height":66,"x":528,"y":528,"pixelRatio":4,"sdf":true},"scooter-15":{"width":66,"height":66,"x":594,"y":528,"pixelRatio":4,"sdf":true},"shelter-15":{"width":66,"height":66,"x":660,"y":528,"pixelRatio":4,"sdf":true},"shoe-15":{"width":66,"height":66,"x":726,"y":528,"pixelRatio":4,"sdf":true},"shop-15":{"width":66,"height":66,"x":792,"y":528,"pixelRatio":4,"sdf":true},"skateboard-15":{"width":66,"height":66,"x":858,"y":528,"pixelRatio":4,"sdf":true},"skiing-15":{"width":66,"height":66,"x":924,"y":528,"pixelRatio":4,"sdf":true},"slaughterhouse-15":{"width":66,"height":66,"x":990,"y":528,"pixelRatio":4,"sdf":true},"slipway-15":{"width":66,"height":66,"x":0,"y":594,"pixelRatio":4,"sdf":true},"snowmobile-15":{"width":66,"height":66,"x":66,"y":594,"pixelRatio":4,"sdf":true},"soccer-15":{"width":66,"height":66,"x":132,"y":594,"pixelRatio":4,"sdf":true},"square-15":{"width":66,"height":66,"x":198,"y":594,"pixelRatio":4,"sdf":true},"square-stroked-15":{"width":66,"height":66,"x":264,"y":594,"pixelRatio":4,"sdf":true},"stadium-15":{"width":66,"height":66,"x":330,"y":594,"pixelRatio":4,"sdf":true},"star-15":{"width":66,"height":66,"x":396,"y":594,"pixelRatio":4,"sdf":true},"star-stroked-15":{"width":66,"height":66,"x":462,"y":594,"pixelRatio":4,"sdf":true},"suitcase-15":{"width":66,"height":66,"x":528,"y":594,"pixelRatio":4,"sdf":true},"sushi-15":{"width":66,"height":66,"x":594,"y":594,"pixelRatio":4,"sdf":true},"swimming-15":{"width":66,"height":66,"x":660,"y":594,"pixelRatio":4,"sdf":true},"table-tennis-15":{"width":66,"height":66,"x":726,"y":594,"pixelRatio":4,"sdf":true},"teahouse-15":{"width":66,"height":66,"x":792,"y":594,"pixelRatio":4,"sdf":true},"telephone-15":{"width":66,"height":66,"x":858,"y":594,"pixelRatio":4,"sdf":true},"tennis-15":{"width":66,"height":66,"x":924,"y":594,"pixelRatio":4,"sdf":true},"theatre-15":{"width":66,"height":66,"x":990,"y":594,"pixelRatio":4,"sdf":true},"toilet-15":{"width":66,"height":66,"x":0,"y":660,"pixelRatio":4,"sdf":true},"town-15":{"width":66,"height":66,"x":66,"y":660,"pixelRatio":4,"sdf":true},"town-hall-15":{"width":66,"height":66,"x":132,"y":660,"pixelRatio":4,"sdf":true},"triangle-15":{"width":66,"height":66,"x":198,"y":660,"pixelRatio":4,"sdf":true},"triangle-stroked-15":{"width":66,"height":66,"x":264,"y":660,"pixelRatio":4,"sdf":true},"veterinary-15":{"width":66,"height":66,"x":330,"y":660,"pixelRatio":4,"sdf":true},"viewpoint-15":{"width":66,"height":66,"x":396,"y":660,"pixelRatio":4,"sdf":true},"village-15":{"width":66,"height":66,"x":462,"y":660,"pixelRatio":4,"sdf":true},"volcano-15":{"width":66,"height":66,"x":528,"y":660,"pixelRatio":4,"sdf":true},"volleyball-15":{"width":66,"height":66,"x":594,"y":660,"pixelRatio":4,"sdf":true},"warehouse-15":{"width":66,"height":66,"x":660,"y":660,"pixelRatio":4,"sdf":true},"waste-basket-15":{"width":66,"height":66,"x":726,"y":660,"pixelRatio":4,"sdf":true},"watch-15":{"width":66,"height":66,"x":792,"y":660,"pixelRatio":4,"sdf":true},"water-15":{"width":66,"height":66,"x":858,"y":660,"pixelRatio":4,"sdf":true},"waterfall-15":{"width":66,"height":66,"x":924,"y":660,"pixelRatio":4,"sdf":true},"watermill-15":{"width":66,"height":66,"x":990,"y":660,"pixelRatio":4,"sdf":true},"wetland-15":{"width":66,"height":66,"x":0,"y":726,"pixelRatio":4,"sdf":true},"wheelchair-15":{"width":66,"height":66,"x":66,"y":726,"pixelRatio":4,"sdf":true},"windmill-15":{"width":66,"height":66,"x":132,"y":726,"pixelRatio":4,"sdf":true},"zoo-15":{"width":66,"height":66,"x":198,"y":726,"pixelRatio":4,"sdf":true},"aerialway-11":{"width":50,"height":50,"x":264,"y":726,"pixelRatio":4,"sdf":true},"airfield-11":{"width":50,"height":50,"x":314,"y":726,"pixelRatio":4,"sdf":true},"airport-11":{"width":50,"height":50,"x":364,"y":726,"pixelRatio":4,"sdf":true},"alcohol-shop-11":{"width":50,"height":50,"x":414,"y":726,"pixelRatio":4,"sdf":true},"american-football-11":{"width":50,"height":50,"x":464,"y":726,"pixelRatio":4,"sdf":true},"amusement-park-11":{"width":50,"height":50,"x":514,"y":726,"pixelRatio":4,"sdf":true},"aquarium-11":{"width":50,"height":50,"x":564,"y":726,"pixelRatio":4,"sdf":true},"arrow-es-11":{"width":50,"height":50,"x":614,"y":726,"pixelRatio":4,"sdf":true},"art-gallery-11":{"width":50,"height":50,"x":664,"y":726,"pixelRatio":4,"sdf":true},"attraction-11":{"width":50,"height":50,"x":714,"y":726,"pixelRatio":4,"sdf":true},"bakery-11":{"width":50,"height":50,"x":764,"y":726,"pixelRatio":4,"sdf":true},"bank-11":{"width":50,"height":50,"x":814,"y":726,"pixelRatio":4,"sdf":true},"bar-11":{"width":50,"height":50,"x":864,"y":726,"pixelRatio":4,"sdf":true},"barrier-11":{"width":50,"height":50,"x":914,"y":726,"pixelRatio":4,"sdf":true},"baseball-11":{"width":50,"height":50,"x":964,"y":726,"pixelRatio":4,"sdf":true},"basketball-11":{"width":50,"height":50,"x":0,"y":792,"pixelRatio":4,"sdf":true},"bbq-11":{"width":50,"height":50,"x":50,"y":792,"pixelRatio":4,"sdf":true},"beach-11":{"width":50,"height":50,"x":100,"y":792,"pixelRatio":4,"sdf":true},"beer-11":{"width":50,"height":50,"x":150,"y":792,"pixelRatio":4,"sdf":true},"bicycle-11":{"width":50,"height":50,"x":200,"y":792,"pixelRatio":4,"sdf":true},"bicycle-share-11":{"width":50,"height":50,"x":250,"y":792,"pixelRatio":4,"sdf":true},"blood-bank-11":{"width":50,"height":50,"x":300,"y":792,"pixelRatio":4,"sdf":true},"boat-es-11":{"width":50,"height":50,"x":350,"y":792,"pixelRatio":4,"sdf":true},"bowling-alley-11":{"width":50,"height":50,"x":400,"y":792,"pixelRatio":4,"sdf":true},"bridge-11":{"width":50,"height":50,"x":450,"y":792,"pixelRatio":4,"sdf":true},"building-11":{"width":50,"height":50,"x":500,"y":792,"pixelRatio":4,"sdf":true},"building-alt1-11":{"width":50,"height":50,"x":550,"y":792,"pixelRatio":4,"sdf":true},"bus-11":{"width":50,"height":50,"x":600,"y":792,"pixelRatio":4,"sdf":true},"cafe-11":{"width":50,"height":50,"x":650,"y":792,"pixelRatio":4,"sdf":true},"campsite-11":{"width":50,"height":50,"x":700,"y":792,"pixelRatio":4,"sdf":true},"car-11":{"width":50,"height":50,"x":750,"y":792,"pixelRatio":4,"sdf":true},"car-rental-11":{"width":50,"height":50,"x":800,"y":792,"pixelRatio":4,"sdf":true},"car-repair-11":{"width":50,"height":50,"x":850,"y":792,"pixelRatio":4,"sdf":true},"car-top-es-11":{"width":50,"height":50,"x":900,"y":792,"pixelRatio":4,"sdf":true},"casino-11":{"width":50,"height":50,"x":950,"y":792,"pixelRatio":4,"sdf":true},"castle-11":{"width":50,"height":50,"x":1000,"y":792,"pixelRatio":4,"sdf":true},"cemetery-11":{"width":50,"height":50,"x":0,"y":842,"pixelRatio":4,"sdf":true},"charging-station-11":{"width":50,"height":50,"x":50,"y":842,"pixelRatio":4,"sdf":true},"cinema-11":{"width":50,"height":50,"x":100,"y":842,"pixelRatio":4,"sdf":true},"circle-11":{"width":50,"height":50,"x":150,"y":842,"pixelRatio":4,"sdf":true},"circle-stroked-11":{"width":50,"height":50,"x":200,"y":842,"pixelRatio":4,"sdf":true},"city-11":{"width":50,"height":50,"x":250,"y":842,"pixelRatio":4,"sdf":true},"clothing-store-11":{"width":50,"height":50,"x":300,"y":842,"pixelRatio":4,"sdf":true},"college-11":{"width":50,"height":50,"x":350,"y":842,"pixelRatio":4,"sdf":true},"commercial-11":{"width":50,"height":50,"x":400,"y":842,"pixelRatio":4,"sdf":true},"communications-tower-11":{"width":50,"height":50,"x":450,"y":842,"pixelRatio":4,"sdf":true},"confectionery-11":{"width":50,"height":50,"x":500,"y":842,"pixelRatio":4,"sdf":true},"convenience-11":{"width":50,"height":50,"x":550,"y":842,"pixelRatio":4,"sdf":true},"cricket-11":{"width":50,"height":50,"x":600,"y":842,"pixelRatio":4,"sdf":true},"cross-11":{"width":50,"height":50,"x":650,"y":842,"pixelRatio":4,"sdf":true},"dam-11":{"width":50,"height":50,"x":700,"y":842,"pixelRatio":4,"sdf":true},"danger-11":{"width":50,"height":50,"x":750,"y":842,"pixelRatio":4,"sdf":true},"defibrillator-11":{"width":50,"height":50,"x":800,"y":842,"pixelRatio":4,"sdf":true},"dentist-11":{"width":50,"height":50,"x":850,"y":842,"pixelRatio":4,"sdf":true},"doctor-11":{"width":50,"height":50,"x":900,"y":842,"pixelRatio":4,"sdf":true},"dog-park-11":{"width":50,"height":50,"x":950,"y":842,"pixelRatio":4,"sdf":true},"drinking-water-11":{"width":50,"height":50,"x":1000,"y":842,"pixelRatio":4,"sdf":true},"embassy-11":{"width":50,"height":50,"x":0,"y":892,"pixelRatio":4,"sdf":true},"emergency-phone-11":{"width":50,"height":50,"x":50,"y":892,"pixelRatio":4,"sdf":true},"entrance-11":{"width":50,"height":50,"x":100,"y":892,"pixelRatio":4,"sdf":true},"entrance-alt1-11":{"width":50,"height":50,"x":150,"y":892,"pixelRatio":4,"sdf":true},"farm-11":{"width":50,"height":50,"x":200,"y":892,"pixelRatio":4,"sdf":true},"fast-food-11":{"width":50,"height":50,"x":250,"y":892,"pixelRatio":4,"sdf":true},"fence-11":{"width":50,"height":50,"x":300,"y":892,"pixelRatio":4,"sdf":true},"ferry-11":{"width":50,"height":50,"x":350,"y":892,"pixelRatio":4,"sdf":true},"fire-station-11":{"width":50,"height":50,"x":400,"y":892,"pixelRatio":4,"sdf":true},"fitness-centre-11":{"width":50,"height":50,"x":450,"y":892,"pixelRatio":4,"sdf":true},"florist-11":{"width":50,"height":50,"x":500,"y":892,"pixelRatio":4,"sdf":true},"fuel-11":{"width":50,"height":50,"x":550,"y":892,"pixelRatio":4,"sdf":true},"furniture-11":{"width":50,"height":50,"x":600,"y":892,"pixelRatio":4,"sdf":true},"gaming-11":{"width":50,"height":50,"x":650,"y":892,"pixelRatio":4,"sdf":true},"garden-11":{"width":50,"height":50,"x":700,"y":892,"pixelRatio":4,"sdf":true},"garden-centre-11":{"width":50,"height":50,"x":750,"y":892,"pixelRatio":4,"sdf":true},"gift-11":{"width":50,"height":50,"x":800,"y":892,"pixelRatio":4,"sdf":true},"globe-11":{"width":50,"height":50,"x":850,"y":892,"pixelRatio":4,"sdf":true},"golf-11":{"width":50,"height":50,"x":900,"y":892,"pixelRatio":4,"sdf":true},"grocery-11":{"width":50,"height":50,"x":950,"y":892,"pixelRatio":4,"sdf":true},"hairdresser-11":{"width":50,"height":50,"x":1000,"y":892,"pixelRatio":4,"sdf":true},"harbor-11":{"width":50,"height":50,"x":0,"y":942,"pixelRatio":4,"sdf":true},"hardware-11":{"width":50,"height":50,"x":50,"y":942,"pixelRatio":4,"sdf":true},"heart-11":{"width":50,"height":50,"x":100,"y":942,"pixelRatio":4,"sdf":true},"heliport-11":{"width":50,"height":50,"x":150,"y":942,"pixelRatio":4,"sdf":true},"home-11":{"width":50,"height":50,"x":200,"y":942,"pixelRatio":4,"sdf":true},"horse-riding-11":{"width":50,"height":50,"x":250,"y":942,"pixelRatio":4,"sdf":true},"hospital-11":{"width":50,"height":50,"x":300,"y":942,"pixelRatio":4,"sdf":true},"ice-cream-11":{"width":50,"height":50,"x":350,"y":942,"pixelRatio":4,"sdf":true},"industry-11":{"width":50,"height":50,"x":400,"y":942,"pixelRatio":4,"sdf":true},"information-11":{"width":50,"height":50,"x":450,"y":942,"pixelRatio":4,"sdf":true},"jewelry-store-11":{"width":50,"height":50,"x":500,"y":942,"pixelRatio":4,"sdf":true},"karaoke-11":{"width":50,"height":50,"x":550,"y":942,"pixelRatio":4,"sdf":true},"landmark-11":{"width":50,"height":50,"x":600,"y":942,"pixelRatio":4,"sdf":true},"landuse-11":{"width":50,"height":50,"x":650,"y":942,"pixelRatio":4,"sdf":true},"laundry-11":{"width":50,"height":50,"x":700,"y":942,"pixelRatio":4,"sdf":true},"library-11":{"width":50,"height":50,"x":750,"y":942,"pixelRatio":4,"sdf":true},"lighthouse-11":{"width":50,"height":50,"x":800,"y":942,"pixelRatio":4,"sdf":true},"lodging-11":{"width":50,"height":50,"x":850,"y":942,"pixelRatio":4,"sdf":true},"logging-11":{"width":50,"height":50,"x":900,"y":942,"pixelRatio":4,"sdf":true},"marker-11":{"width":50,"height":50,"x":950,"y":942,"pixelRatio":4,"sdf":true},"marker-stroked-11":{"width":50,"height":50,"x":1000,"y":942,"pixelRatio":4,"sdf":true},"mobile-phone-11":{"width":50,"height":50,"x":0,"y":992,"pixelRatio":4,"sdf":true},"monument-11":{"width":50,"height":50,"x":50,"y":992,"pixelRatio":4,"sdf":true},"mountain-11":{"width":50,"height":50,"x":100,"y":992,"pixelRatio":4,"sdf":true},"museum-11":{"width":50,"height":50,"x":150,"y":992,"pixelRatio":4,"sdf":true},"music-11":{"width":50,"height":50,"x":200,"y":992,"pixelRatio":4,"sdf":true},"natural-11":{"width":50,"height":50,"x":250,"y":992,"pixelRatio":4,"sdf":true},"oil-rig-es-11":{"width":50,"height":50,"x":300,"y":992,"pixelRatio":4,"sdf":true},"optician-11":{"width":50,"height":50,"x":350,"y":992,"pixelRatio":4,"sdf":true},"paint-11":{"width":50,"height":50,"x":400,"y":992,"pixelRatio":4,"sdf":true},"park-11":{"width":50,"height":50,"x":450,"y":992,"pixelRatio":4,"sdf":true},"park-alt1-11":{"width":50,"height":50,"x":500,"y":992,"pixelRatio":4,"sdf":true},"parking-11":{"width":50,"height":50,"x":550,"y":992,"pixelRatio":4,"sdf":true},"parking-garage-11":{"width":50,"height":50,"x":600,"y":992,"pixelRatio":4,"sdf":true},"pharmacy-11":{"width":50,"height":50,"x":650,"y":992,"pixelRatio":4,"sdf":true},"picnic-site-11":{"width":50,"height":50,"x":700,"y":992,"pixelRatio":4,"sdf":true},"pitch-11":{"width":50,"height":50,"x":750,"y":992,"pixelRatio":4,"sdf":true},"place-of-worship-11":{"width":50,"height":50,"x":800,"y":992,"pixelRatio":4,"sdf":true},"playground-11":{"width":50,"height":50,"x":850,"y":992,"pixelRatio":4,"sdf":true},"police-11":{"width":50,"height":50,"x":900,"y":992,"pixelRatio":4,"sdf":true},"post-11":{"width":50,"height":50,"x":950,"y":992,"pixelRatio":4,"sdf":true},"prison-11":{"width":50,"height":50,"x":1000,"y":992,"pixelRatio":4,"sdf":true},"rail-11":{"width":50,"height":50,"x":1050,"y":792,"pixelRatio":4,"sdf":true},"rail-light-11":{"width":50,"height":50,"x":1100,"y":792,"pixelRatio":4,"sdf":true},"rail-metro-11":{"width":50,"height":50,"x":1150,"y":792,"pixelRatio":4,"sdf":true},"ranger-station-11":{"width":50,"height":50,"x":1200,"y":792,"pixelRatio":4,"sdf":true},"recycling-11":{"width":50,"height":50,"x":1250,"y":792,"pixelRatio":4,"sdf":true},"religious-buddhist-11":{"width":50,"height":50,"x":1300,"y":792,"pixelRatio":4,"sdf":true},"religious-christian-11":{"width":50,"height":50,"x":1350,"y":792,"pixelRatio":4,"sdf":true},"religious-jewish-11":{"width":50,"height":50,"x":1400,"y":792,"pixelRatio":4,"sdf":true},"religious-muslim-11":{"width":50,"height":50,"x":1450,"y":792,"pixelRatio":4,"sdf":true},"residential-community-11":{"width":50,"height":50,"x":1500,"y":792,"pixelRatio":4,"sdf":true},"restaurant-11":{"width":50,"height":50,"x":1550,"y":792,"pixelRatio":4,"sdf":true},"restaurant-noodle-11":{"width":50,"height":50,"x":1600,"y":792,"pixelRatio":4,"sdf":true},"restaurant-pizza-11":{"width":50,"height":50,"x":1650,"y":792,"pixelRatio":4,"sdf":true},"restaurant-seafood-11":{"width":50,"height":50,"x":1700,"y":792,"pixelRatio":4,"sdf":true},"roadblock-11":{"width":50,"height":50,"x":1750,"y":792,"pixelRatio":4,"sdf":true},"rocket-11":{"width":50,"height":50,"x":1800,"y":792,"pixelRatio":4,"sdf":true},"school-11":{"width":50,"height":50,"x":1850,"y":792,"pixelRatio":4,"sdf":true},"scooter-11":{"width":50,"height":50,"x":1900,"y":792,"pixelRatio":4,"sdf":true},"shelter-11":{"width":50,"height":50,"x":1950,"y":792,"pixelRatio":4,"sdf":true},"shoe-11":{"width":50,"height":50,"x":2000,"y":792,"pixelRatio":4,"sdf":true},"shop-11":{"width":50,"height":50,"x":2050,"y":792,"pixelRatio":4,"sdf":true},"skateboard-11":{"width":50,"height":50,"x":1050,"y":842,"pixelRatio":4,"sdf":true},"skiing-11":{"width":50,"height":50,"x":1100,"y":842,"pixelRatio":4,"sdf":true},"slaughterhouse-11":{"width":50,"height":50,"x":1150,"y":842,"pixelRatio":4,"sdf":true},"slipway-11":{"width":50,"height":50,"x":1200,"y":842,"pixelRatio":4,"sdf":true},"snowmobile-11":{"width":50,"height":50,"x":1250,"y":842,"pixelRatio":4,"sdf":true},"soccer-11":{"width":50,"height":50,"x":1300,"y":842,"pixelRatio":4,"sdf":true},"square-11":{"width":50,"height":50,"x":1350,"y":842,"pixelRatio":4,"sdf":true},"square-stroked-11":{"width":50,"height":50,"x":1400,"y":842,"pixelRatio":4,"sdf":true},"stadium-11":{"width":50,"height":50,"x":1450,"y":842,"pixelRatio":4,"sdf":true},"star-11":{"width":50,"height":50,"x":1500,"y":842,"pixelRatio":4,"sdf":true},"star-stroked-11":{"width":50,"height":50,"x":1550,"y":842,"pixelRatio":4,"sdf":true},"suitcase-11":{"width":50,"height":50,"x":1600,"y":842,"pixelRatio":4,"sdf":true},"sushi-11":{"width":50,"height":50,"x":1650,"y":842,"pixelRatio":4,"sdf":true},"swimming-11":{"width":50,"height":50,"x":1700,"y":842,"pixelRatio":4,"sdf":true},"table-tennis-11":{"width":50,"height":50,"x":1750,"y":842,"pixelRatio":4,"sdf":true},"teahouse-11":{"width":50,"height":50,"x":1800,"y":842,"pixelRatio":4,"sdf":true},"telephone-11":{"width":50,"height":50,"x":1850,"y":842,"pixelRatio":4,"sdf":true},"tennis-11":{"width":50,"height":50,"x":1900,"y":842,"pixelRatio":4,"sdf":true},"theatre-11":{"width":50,"height":50,"x":1950,"y":842,"pixelRatio":4,"sdf":true},"toilet-11":{"width":50,"height":50,"x":2000,"y":842,"pixelRatio":4,"sdf":true},"town-11":{"width":50,"height":50,"x":2050,"y":842,"pixelRatio":4,"sdf":true},"town-hall-11":{"width":50,"height":50,"x":1050,"y":892,"pixelRatio":4,"sdf":true},"triangle-11":{"width":50,"height":50,"x":1100,"y":892,"pixelRatio":4,"sdf":true},"triangle-stroked-11":{"width":50,"height":50,"x":1150,"y":892,"pixelRatio":4,"sdf":true},"veterinary-11":{"width":50,"height":50,"x":1200,"y":892,"pixelRatio":4,"sdf":true},"viewpoint-11":{"width":50,"height":50,"x":1250,"y":892,"pixelRatio":4,"sdf":true},"village-11":{"width":50,"height":50,"x":1300,"y":892,"pixelRatio":4,"sdf":true},"volcano-11":{"width":50,"height":50,"x":1350,"y":892,"pixelRatio":4,"sdf":true},"volleyball-11":{"width":50,"height":50,"x":1400,"y":892,"pixelRatio":4,"sdf":true},"warehouse-11":{"width":50,"height":50,"x":1450,"y":892,"pixelRatio":4,"sdf":true},"waste-basket-11":{"width":50,"height":50,"x":1500,"y":892,"pixelRatio":4,"sdf":true},"watch-11":{"width":50,"height":50,"x":1550,"y":892,"pixelRatio":4,"sdf":true},"water-11":{"width":50,"height":50,"x":1600,"y":892,"pixelRatio":4,"sdf":true},"waterfall-11":{"width":50,"height":50,"x":1650,"y":892,"pixelRatio":4,"sdf":true},"watermill-11":{"width":50,"height":50,"x":1700,"y":892,"pixelRatio":4,"sdf":true},"wetland-11":{"width":50,"height":50,"x":1750,"y":892,"pixelRatio":4,"sdf":true},"wheelchair-11":{"width":50,"height":50,"x":1800,"y":892,"pixelRatio":4,"sdf":true},"windmill-11":{"width":50,"height":50,"x":1850,"y":892,"pixelRatio":4,"sdf":true},"zoo-11":{"width":50,"height":50,"x":1900,"y":892,"pixelRatio":4,"sdf":true}}')},function(module,exports,__webpack_require__){(function(){"use strict";var builder,defaults,escapeCDATA,requiresCDATA,wrapCDATA,hasProp={}.hasOwnProperty;builder=__webpack_require__(305),defaults=__webpack_require__(120).defaults,requiresCDATA=function(entry){return"string"==typeof entry&&(entry.indexOf("&")>=0||entry.indexOf(">")>=0||entry.indexOf("<")>=0)},wrapCDATA=function(entry){return"<![CDATA["+escapeCDATA(entry)+"]]>"},escapeCDATA=function(entry){return entry.replace("]]>","]]]]><![CDATA[>")},exports.Builder=function(){function Builder(opts){var key,ref,value;for(key in this.options={},ref=defaults[.2])hasProp.call(ref,key)&&(value=ref[key],this.options[key]=value);for(key in opts)hasProp.call(opts,key)&&(value=opts[key],this.options[key]=value)}return Builder.prototype.buildObject=function(rootObj){var attrkey,charkey,render,rootElement,rootName,_this;return attrkey=this.options.attrkey,charkey=this.options.charkey,1===Object.keys(rootObj).length&&this.options.rootName===defaults[.2].rootName?rootObj=rootObj[rootName=Object.keys(rootObj)[0]]:rootName=this.options.rootName,_this=this,render=function(element,obj){var attr,child,entry,index,key,value;if("object"!=typeof obj)_this.options.cdata&&requiresCDATA(obj)?element.raw(wrapCDATA(obj)):element.txt(obj);else if(Array.isArray(obj)){for(index in obj)if(hasProp.call(obj,index))for(key in child=obj[index])entry=child[key],element=render(element.ele(key),entry).up()}else for(key in obj)if(hasProp.call(obj,key))if(child=obj[key],key===attrkey){if("object"==typeof child)for(attr in child)value=child[attr],element=element.att(attr,value)}else if(key===charkey)element=_this.options.cdata&&requiresCDATA(child)?element.raw(wrapCDATA(child)):element.txt(child);else if(Array.isArray(child))for(index in child)hasProp.call(child,index)&&(element="string"==typeof(entry=child[index])?_this.options.cdata&&requiresCDATA(entry)?element.ele(key).raw(wrapCDATA(entry)).up():element.ele(key,entry).up():render(element.ele(key),entry).up());else"object"==typeof child?element=render(element.ele(key),child).up():"string"==typeof child&&_this.options.cdata&&requiresCDATA(child)?element=element.ele(key).raw(wrapCDATA(child)).up():(null==child&&(child=""),element=element.ele(key,child.toString()).up());return element},rootElement=builder.create(rootName,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),render(rootElement,rootObj).end(this.options.renderOpts)},Builder}()}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,WriterState,XMLDOMImplementation,XMLDocument,XMLDocumentCB,XMLStreamWriter,XMLStringWriter,assign,isFunction,ref;ref=__webpack_require__(62),assign=ref.assign,isFunction=ref.isFunction,XMLDOMImplementation=__webpack_require__(172),XMLDocument=__webpack_require__(173),XMLDocumentCB=__webpack_require__(311),XMLStringWriter=__webpack_require__(134),XMLStreamWriter=__webpack_require__(312),NodeType=__webpack_require__(39),WriterState=__webpack_require__(102),module.exports.create=function(name,xmldec,doctype,options){var doc,root;if(null==name)throw new Error("Root element needs a name.");return options=assign({},xmldec,doctype,options),root=(doc=new XMLDocument(options)).element(name),options.headless||(doc.declaration(options),null==options.pubID&&null==options.sysID||doc.dtd(options)),root},module.exports.begin=function(options,onData,onEnd){var ref1;return isFunction(options)&&(onData=(ref1=[options,onData])[0],onEnd=ref1[1],options={}),onData?new XMLDocumentCB(options,onData,onEnd):new XMLDocument(options)},module.exports.stringWriter=function(options){return new XMLStringWriter(options)},module.exports.streamWriter=function(stream,options){return new XMLStreamWriter(stream,options)},module.exports.implementation=new XMLDOMImplementation,module.exports.nodeType=NodeType,module.exports.writerState=WriterState}).call(this)},function(module,exports,__webpack_require__){(function(){var XMLDOMErrorHandler,XMLDOMStringList;XMLDOMErrorHandler=__webpack_require__(307),XMLDOMStringList=__webpack_require__(308),module.exports=function(){function XMLDOMConfiguration(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new XMLDOMErrorHandler,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(XMLDOMConfiguration.prototype,"parameterNames",{get:function(){return new XMLDOMStringList(Object.keys(this.defaultParams))}}),XMLDOMConfiguration.prototype.getParameter=function(name){return this.params.hasOwnProperty(name)?this.params[name]:null},XMLDOMConfiguration.prototype.canSetParameter=function(name,value){return!0},XMLDOMConfiguration.prototype.setParameter=function(name,value){return null!=value?this.params[name]=value:delete this.params[name]},XMLDOMConfiguration}()}).call(this)},function(module,exports){(function(){module.exports=function(){function XMLDOMErrorHandler(){}return XMLDOMErrorHandler.prototype.handleError=function(error){throw new Error(error)},XMLDOMErrorHandler}()}).call(this)},function(module,exports){(function(){module.exports=function(){function XMLDOMStringList(arr){this.arr=arr||[]}return Object.defineProperty(XMLDOMStringList.prototype,"length",{get:function(){return this.arr.length}}),XMLDOMStringList.prototype.item=function(index){return this.arr[index]||null},XMLDOMStringList.prototype.contains=function(str){return-1!==this.arr.indexOf(str)},XMLDOMStringList}()}).call(this)},function(module,exports){(function(){module.exports=function(){function XMLNodeList(nodes){this.nodes=nodes}return Object.defineProperty(XMLNodeList.prototype,"length",{get:function(){return this.nodes.length||0}}),XMLNodeList.prototype.clone=function(){return this.nodes=null},XMLNodeList.prototype.item=function(index){return this.nodes[index]||null},XMLNodeList}()}).call(this)},function(module,exports){(function(){module.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,WriterState,XMLAttribute,XMLCData,XMLComment,XMLDTDAttList,XMLDTDElement,XMLDTDEntity,XMLDTDNotation,XMLDeclaration,XMLDocType,XMLDocument,XMLElement,XMLProcessingInstruction,XMLRaw,XMLStringWriter,XMLStringifier,XMLText,getValue,isFunction,isObject,isPlainObject,ref,hasProp={}.hasOwnProperty;ref=__webpack_require__(62),isObject=ref.isObject,isFunction=ref.isFunction,isPlainObject=ref.isPlainObject,getValue=ref.getValue,NodeType=__webpack_require__(39),XMLDocument=__webpack_require__(173),XMLElement=__webpack_require__(121),XMLCData=__webpack_require__(123),XMLComment=__webpack_require__(124),XMLRaw=__webpack_require__(131),XMLText=__webpack_require__(132),XMLProcessingInstruction=__webpack_require__(133),XMLDeclaration=__webpack_require__(125),XMLDocType=__webpack_require__(126),XMLDTDAttList=__webpack_require__(127),XMLDTDEntity=__webpack_require__(128),XMLDTDElement=__webpack_require__(129),XMLDTDNotation=__webpack_require__(130),XMLAttribute=__webpack_require__(174),XMLStringifier=__webpack_require__(176),XMLStringWriter=__webpack_require__(134),WriterState=__webpack_require__(102),module.exports=function(){function XMLDocumentCB(options,onData,onEnd){var writerOptions;this.name="?xml",this.type=NodeType.Document,options||(options={}),writerOptions={},options.writer?isPlainObject(options.writer)&&(writerOptions=options.writer,options.writer=new XMLStringWriter):options.writer=new XMLStringWriter,this.options=options,this.writer=options.writer,this.writerOptions=this.writer.filterOptions(writerOptions),this.stringify=new XMLStringifier(options),this.onDataCallback=onData||function(){},this.onEndCallback=onEnd||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return XMLDocumentCB.prototype.createChildNode=function(node){var att,attName,attributes,child,i,len,ref1,ref2;switch(node.type){case NodeType.CData:this.cdata(node.value);break;case NodeType.Comment:this.comment(node.value);break;case NodeType.Element:for(attName in attributes={},ref1=node.attribs)hasProp.call(ref1,attName)&&(att=ref1[attName],attributes[attName]=att.value);this.node(node.name,attributes);break;case NodeType.Dummy:this.dummy();break;case NodeType.Raw:this.raw(node.value);break;case NodeType.Text:this.text(node.value);break;case NodeType.ProcessingInstruction:this.instruction(node.target,node.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+node.constructor.name)}for(i=0,len=(ref2=node.children).length;i<len;i++)child=ref2[i],this.createChildNode(child),child.type===NodeType.Element&&this.up();return this},XMLDocumentCB.prototype.dummy=function(){return this},XMLDocumentCB.prototype.node=function(name,attributes,text){var ref1;if(null==name)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(name));return this.openCurrent(),name=getValue(name),null==attributes&&(attributes={}),attributes=getValue(attributes),isObject(attributes)||(text=(ref1=[attributes,text])[0],attributes=ref1[1]),this.currentNode=new XMLElement(this,name,attributes),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=text&&this.text(text),this},XMLDocumentCB.prototype.element=function(name,attributes,text){var child,i,len,oldValidationFlag,ref1,root;if(this.currentNode&&this.currentNode.type===NodeType.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(name)||isObject(name)||isFunction(name))for(oldValidationFlag=this.options.noValidation,this.options.noValidation=!0,(root=new XMLDocument(this.options).element("TEMP_ROOT")).element(name),this.options.noValidation=oldValidationFlag,i=0,len=(ref1=root.children).length;i<len;i++)child=ref1[i],this.createChildNode(child),child.type===NodeType.Element&&this.up();else this.node(name,attributes,text);return this},XMLDocumentCB.prototype.attribute=function(name,value){var attName,attValue;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(name));if(null!=name&&(name=getValue(name)),isObject(name))for(attName in name)hasProp.call(name,attName)&&(attValue=name[attName],this.attribute(attName,attValue));else isFunction(value)&&(value=value.apply()),this.options.keepNullAttributes&&null==value?this.currentNode.attribs[name]=new XMLAttribute(this,name,""):null!=value&&(this.currentNode.attribs[name]=new XMLAttribute(this,name,value));return this},XMLDocumentCB.prototype.text=function(value){var node;return this.openCurrent(),node=new XMLText(this,value),this.onData(this.writer.text(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.cdata=function(value){var node;return this.openCurrent(),node=new XMLCData(this,value),this.onData(this.writer.cdata(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.comment=function(value){var node;return this.openCurrent(),node=new XMLComment(this,value),this.onData(this.writer.comment(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.raw=function(value){var node;return this.openCurrent(),node=new XMLRaw(this,value),this.onData(this.writer.raw(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.instruction=function(target,value){var i,insTarget,insValue,len,node;if(this.openCurrent(),null!=target&&(target=getValue(target)),null!=value&&(value=getValue(value)),Array.isArray(target))for(i=0,len=target.length;i<len;i++)insTarget=target[i],this.instruction(insTarget);else if(isObject(target))for(insTarget in target)hasProp.call(target,insTarget)&&(insValue=target[insTarget],this.instruction(insTarget,insValue));else isFunction(value)&&(value=value.apply()),node=new XMLProcessingInstruction(this,target,value),this.onData(this.writer.processingInstruction(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},XMLDocumentCB.prototype.declaration=function(version,encoding,standalone){var node;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return node=new XMLDeclaration(this,version,encoding,standalone),this.onData(this.writer.declaration(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.doctype=function(root,pubID,sysID){if(this.openCurrent(),null==root)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new XMLDocType(this,pubID,sysID),this.currentNode.rootNodeName=root,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},XMLDocumentCB.prototype.dtdElement=function(name,value){var node;return this.openCurrent(),node=new XMLDTDElement(this,name,value),this.onData(this.writer.dtdElement(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.attList=function(elementName,attributeName,attributeType,defaultValueType,defaultValue){var node;return this.openCurrent(),node=new XMLDTDAttList(this,elementName,attributeName,attributeType,defaultValueType,defaultValue),this.onData(this.writer.dtdAttList(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.entity=function(name,value){var node;return this.openCurrent(),node=new XMLDTDEntity(this,!1,name,value),this.onData(this.writer.dtdEntity(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.pEntity=function(name,value){var node;return this.openCurrent(),node=new XMLDTDEntity(this,!0,name,value),this.onData(this.writer.dtdEntity(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.notation=function(name,value){var node;return this.openCurrent(),node=new XMLDTDNotation(this,name,value),this.onData(this.writer.dtdNotation(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},XMLDocumentCB.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},XMLDocumentCB.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},XMLDocumentCB.prototype.openNode=function(node){var att,chunk,name,ref1;if(!node.isOpen){if(this.root||0!==this.currentLevel||node.type!==NodeType.Element||(this.root=node),chunk="",node.type===NodeType.Element){for(name in this.writerOptions.state=WriterState.OpenTag,chunk=this.writer.indent(node,this.writerOptions,this.currentLevel)+"<"+node.name,ref1=node.attribs)hasProp.call(ref1,name)&&(att=ref1[name],chunk+=this.writer.attribute(att,this.writerOptions,this.currentLevel));chunk+=(node.children?">":"/>")+this.writer.endline(node,this.writerOptions,this.currentLevel),this.writerOptions.state=WriterState.InsideTag}else this.writerOptions.state=WriterState.OpenTag,chunk=this.writer.indent(node,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+node.rootNodeName,node.pubID&&node.sysID?chunk+=' PUBLIC "'+node.pubID+'" "'+node.sysID+'"':node.sysID&&(chunk+=' SYSTEM "'+node.sysID+'"'),node.children?(chunk+=" [",this.writerOptions.state=WriterState.InsideTag):(this.writerOptions.state=WriterState.CloseTag,chunk+=">"),chunk+=this.writer.endline(node,this.writerOptions,this.currentLevel);return this.onData(chunk,this.currentLevel),node.isOpen=!0}},XMLDocumentCB.prototype.closeNode=function(node){var chunk;if(!node.isClosed)return chunk="",this.writerOptions.state=WriterState.CloseTag,chunk=node.type===NodeType.Element?this.writer.indent(node,this.writerOptions,this.currentLevel)+"</"+node.name+">"+this.writer.endline(node,this.writerOptions,this.currentLevel):this.writer.indent(node,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(node,this.writerOptions,this.currentLevel),this.writerOptions.state=WriterState.None,this.onData(chunk,this.currentLevel),node.isClosed=!0},XMLDocumentCB.prototype.onData=function(chunk,level){return this.documentStarted=!0,this.onDataCallback(chunk,level+1)},XMLDocumentCB.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},XMLDocumentCB.prototype.debugInfo=function(name){return null==name?"":"node: <"+name+">"},XMLDocumentCB.prototype.ele=function(){return this.element.apply(this,arguments)},XMLDocumentCB.prototype.nod=function(name,attributes,text){return this.node(name,attributes,text)},XMLDocumentCB.prototype.txt=function(value){return this.text(value)},XMLDocumentCB.prototype.dat=function(value){return this.cdata(value)},XMLDocumentCB.prototype.com=function(value){return this.comment(value)},XMLDocumentCB.prototype.ins=function(target,value){return this.instruction(target,value)},XMLDocumentCB.prototype.dec=function(version,encoding,standalone){return this.declaration(version,encoding,standalone)},XMLDocumentCB.prototype.dtd=function(root,pubID,sysID){return this.doctype(root,pubID,sysID)},XMLDocumentCB.prototype.e=function(name,attributes,text){return this.element(name,attributes,text)},XMLDocumentCB.prototype.n=function(name,attributes,text){return this.node(name,attributes,text)},XMLDocumentCB.prototype.t=function(value){return this.text(value)},XMLDocumentCB.prototype.d=function(value){return this.cdata(value)},XMLDocumentCB.prototype.c=function(value){return this.comment(value)},XMLDocumentCB.prototype.r=function(value){return this.raw(value)},XMLDocumentCB.prototype.i=function(target,value){return this.instruction(target,value)},XMLDocumentCB.prototype.att=function(){return this.currentNode&&this.currentNode.type===NodeType.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},XMLDocumentCB.prototype.a=function(){return this.currentNode&&this.currentNode.type===NodeType.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},XMLDocumentCB.prototype.ent=function(name,value){return this.entity(name,value)},XMLDocumentCB.prototype.pent=function(name,value){return this.pEntity(name,value)},XMLDocumentCB.prototype.not=function(name,value){return this.notation(name,value)},XMLDocumentCB}()}).call(this)},function(module,exports,__webpack_require__){(function(){var NodeType,WriterState,XMLWriterBase,hasProp={}.hasOwnProperty;NodeType=__webpack_require__(39),XMLWriterBase=__webpack_require__(177),WriterState=__webpack_require__(102),module.exports=function(superClass){function XMLStreamWriter(stream,options){this.stream=stream,XMLStreamWriter.__super__.constructor.call(this,options)}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(XMLStreamWriter,superClass),XMLStreamWriter.prototype.endline=function(node,options,level){return node.isLastRootNode&&options.state===WriterState.CloseTag?"":XMLStreamWriter.__super__.endline.call(this,node,options,level)},XMLStreamWriter.prototype.document=function(doc,options){var child,i,j,k,len,len1,ref,ref1,results;for(i=j=0,len=(ref=doc.children).length;j<len;i=++j)(child=ref[i]).isLastRootNode=i===doc.children.length-1;for(options=this.filterOptions(options),results=[],k=0,len1=(ref1=doc.children).length;k<len1;k++)child=ref1[k],results.push(this.writeChildNode(child,options,0));return results},XMLStreamWriter.prototype.attribute=function(att,options,level){return this.stream.write(XMLStreamWriter.__super__.attribute.call(this,att,options,level))},XMLStreamWriter.prototype.cdata=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.cdata.call(this,node,options,level))},XMLStreamWriter.prototype.comment=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.comment.call(this,node,options,level))},XMLStreamWriter.prototype.declaration=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.declaration.call(this,node,options,level))},XMLStreamWriter.prototype.docType=function(node,options,level){var child,j,len,ref;if(level||(level=0),this.openNode(node,options,level),options.state=WriterState.OpenTag,this.stream.write(this.indent(node,options,level)),this.stream.write("<!DOCTYPE "+node.root().name),node.pubID&&node.sysID?this.stream.write(' PUBLIC "'+node.pubID+'" "'+node.sysID+'"'):node.sysID&&this.stream.write(' SYSTEM "'+node.sysID+'"'),node.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(node,options,level)),options.state=WriterState.InsideTag,j=0,len=(ref=node.children).length;j<len;j++)child=ref[j],this.writeChildNode(child,options,level+1);options.state=WriterState.CloseTag,this.stream.write("]")}return options.state=WriterState.CloseTag,this.stream.write(options.spaceBeforeSlash+">"),this.stream.write(this.endline(node,options,level)),options.state=WriterState.None,this.closeNode(node,options,level)},XMLStreamWriter.prototype.element=function(node,options,level){var att,child,childNodeCount,firstChildNode,j,len,name,ref,ref1;for(name in level||(level=0),this.openNode(node,options,level),options.state=WriterState.OpenTag,this.stream.write(this.indent(node,options,level)+"<"+node.name),ref=node.attribs)hasProp.call(ref,name)&&(att=ref[name],this.attribute(att,options,level));if(firstChildNode=0===(childNodeCount=node.children.length)?null:node.children[0],0===childNodeCount||node.children.every((function(e){return(e.type===NodeType.Text||e.type===NodeType.Raw)&&""===e.value})))options.allowEmpty?(this.stream.write(">"),options.state=WriterState.CloseTag,this.stream.write("</"+node.name+">")):(options.state=WriterState.CloseTag,this.stream.write(options.spaceBeforeSlash+"/>"));else if(!options.pretty||1!==childNodeCount||firstChildNode.type!==NodeType.Text&&firstChildNode.type!==NodeType.Raw||null==firstChildNode.value){for(this.stream.write(">"+this.endline(node,options,level)),options.state=WriterState.InsideTag,j=0,len=(ref1=node.children).length;j<len;j++)child=ref1[j],this.writeChildNode(child,options,level+1);options.state=WriterState.CloseTag,this.stream.write(this.indent(node,options,level)+"</"+node.name+">")}else this.stream.write(">"),options.state=WriterState.InsideTag,options.suppressPrettyCount++,!0,this.writeChildNode(firstChildNode,options,level+1),options.suppressPrettyCount--,!1,options.state=WriterState.CloseTag,this.stream.write("</"+node.name+">");return this.stream.write(this.endline(node,options,level)),options.state=WriterState.None,this.closeNode(node,options,level)},XMLStreamWriter.prototype.processingInstruction=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.processingInstruction.call(this,node,options,level))},XMLStreamWriter.prototype.raw=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.raw.call(this,node,options,level))},XMLStreamWriter.prototype.text=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.text.call(this,node,options,level))},XMLStreamWriter.prototype.dtdAttList=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.dtdAttList.call(this,node,options,level))},XMLStreamWriter.prototype.dtdElement=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.dtdElement.call(this,node,options,level))},XMLStreamWriter.prototype.dtdEntity=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.dtdEntity.call(this,node,options,level))},XMLStreamWriter.prototype.dtdNotation=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.dtdNotation.call(this,node,options,level))},XMLStreamWriter}(XMLWriterBase)}).call(this)},function(module,exports,__webpack_require__){(function(){"use strict";var bom,defaults,events,isEmpty,processItem,processors,promisify,sax,setImmediate,bind=function(fn,me){return function(){return fn.apply(me,arguments)}},hasProp={}.hasOwnProperty;sax=__webpack_require__(314),events=__webpack_require__(78),bom=__webpack_require__(329),processors=__webpack_require__(184),setImmediate=__webpack_require__(182).setImmediate,defaults=__webpack_require__(120).defaults,promisify=__webpack_require__(330),isEmpty=function(thing){return"object"==typeof thing&&null!=thing&&0===Object.keys(thing).length},processItem=function(processors,item,key){var i,len;for(i=0,len=processors.length;i<len;i++)item=(0,processors[i])(item,key);return item},exports.Parser=function(superClass){function Parser(opts){var key,ref,value;if(this.parseStringPromise=bind(this.parseStringPromise,this),this.parseString=bind(this.parseString,this),this.reset=bind(this.reset,this),this.assignOrPush=bind(this.assignOrPush,this),this.processAsync=bind(this.processAsync,this),!(this instanceof exports.Parser))return new exports.Parser(opts);for(key in this.options={},ref=defaults[.2])hasProp.call(ref,key)&&(value=ref[key],this.options[key]=value);for(key in opts)hasProp.call(opts,key)&&(value=opts[key],this.options[key]=value);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(processors.normalize)),this.reset()}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(Parser,superClass),Parser.prototype.processAsync=function(){var chunk,err;try{return this.remaining.length<=this.options.chunkSize?(chunk=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(chunk),this.saxParser.close()):(chunk=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(chunk),setImmediate(this.processAsync))}catch(error1){if(err=error1,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(err)}},Parser.prototype.assignOrPush=function(obj,key,newValue){return key in obj?(obj[key]instanceof Array||(obj[key]=[obj[key]]),obj[key].push(newValue)):this.options.explicitArray?obj[key]=[newValue]:obj[key]=newValue},Parser.prototype.reset=function(){var attrkey,charkey,ontext,stack,_this;return this.removeAllListeners(),this.saxParser=sax.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(_this=this,function(error){if(_this.saxParser.resume(),!_this.saxParser.errThrown)return _this.saxParser.errThrown=!0,_this.emit("error",error)}),this.saxParser.onend=function(_this){return function(){if(!_this.saxParser.ended)return _this.saxParser.ended=!0,_this.emit("end",_this.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,stack=[],attrkey=this.options.attrkey,charkey=this.options.charkey,this.saxParser.onopentag=function(_this){return function(node){var key,newValue,obj,processedKey,ref;if((obj={})[charkey]="",!_this.options.ignoreAttrs)for(key in ref=node.attributes)hasProp.call(ref,key)&&(attrkey in obj||_this.options.mergeAttrs||(obj[attrkey]={}),newValue=_this.options.attrValueProcessors?processItem(_this.options.attrValueProcessors,node.attributes[key],key):node.attributes[key],processedKey=_this.options.attrNameProcessors?processItem(_this.options.attrNameProcessors,key):key,_this.options.mergeAttrs?_this.assignOrPush(obj,processedKey,newValue):obj[attrkey][processedKey]=newValue);return obj["#name"]=_this.options.tagNameProcessors?processItem(_this.options.tagNameProcessors,node.name):node.name,_this.options.xmlns&&(obj[_this.options.xmlnskey]={uri:node.uri,local:node.local}),stack.push(obj)}}(this),this.saxParser.onclosetag=function(_this){return function(){var cdata,emptyStr,key,node,nodeName,obj,objClone,old,s,xpath;if(obj=stack.pop(),nodeName=obj["#name"],_this.options.explicitChildren&&_this.options.preserveChildrenOrder||delete obj["#name"],!0===obj.cdata&&(cdata=obj.cdata,delete obj.cdata),s=stack[stack.length-1],obj[charkey].match(/^\s*$/)&&!cdata?(emptyStr=obj[charkey],delete obj[charkey]):(_this.options.trim&&(obj[charkey]=obj[charkey].trim()),_this.options.normalize&&(obj[charkey]=obj[charkey].replace(/\s{2,}/g," ").trim()),obj[charkey]=_this.options.valueProcessors?processItem(_this.options.valueProcessors,obj[charkey],nodeName):obj[charkey],1===Object.keys(obj).length&&charkey in obj&&!_this.EXPLICIT_CHARKEY&&(obj=obj[charkey])),isEmpty(obj)&&(obj=""!==_this.options.emptyTag?_this.options.emptyTag:emptyStr),null!=_this.options.validator&&(xpath="/"+function(){var i,len,results;for(results=[],i=0,len=stack.length;i<len;i++)node=stack[i],results.push(node["#name"]);return results}().concat(nodeName).join("/"),function(){var err;try{obj=_this.options.validator(xpath,s&&s[nodeName],obj)}catch(error1){return err=error1,_this.emit("error",err)}}()),_this.options.explicitChildren&&!_this.options.mergeAttrs&&"object"==typeof obj)if(_this.options.preserveChildrenOrder){if(s){for(key in s[_this.options.childkey]=s[_this.options.childkey]||[],objClone={},obj)hasProp.call(obj,key)&&(objClone[key]=obj[key]);s[_this.options.childkey].push(objClone),delete obj["#name"],1===Object.keys(obj).length&&charkey in obj&&!_this.EXPLICIT_CHARKEY&&(obj=obj[charkey])}}else node={},_this.options.attrkey in obj&&(node[_this.options.attrkey]=obj[_this.options.attrkey],delete obj[_this.options.attrkey]),!_this.options.charsAsChildren&&_this.options.charkey in obj&&(node[_this.options.charkey]=obj[_this.options.charkey],delete obj[_this.options.charkey]),Object.getOwnPropertyNames(obj).length>0&&(node[_this.options.childkey]=obj),obj=node;return stack.length>0?_this.assignOrPush(s,nodeName,obj):(_this.options.explicitRoot&&(old=obj,(obj={})[nodeName]=old),_this.resultObject=obj,_this.saxParser.ended=!0,_this.emit("end",_this.resultObject))}}(this),ontext=function(_this){return function(text){var charChild,s;if(s=stack[stack.length-1])return s[charkey]+=text,_this.options.explicitChildren&&_this.options.preserveChildrenOrder&&_this.options.charsAsChildren&&(_this.options.includeWhiteChars||""!==text.replace(/\\n/g,"").trim())&&(s[_this.options.childkey]=s[_this.options.childkey]||[],(charChild={"#name":"__text__"})[charkey]=text,_this.options.normalize&&(charChild[charkey]=charChild[charkey].replace(/\s{2,}/g," ").trim()),s[_this.options.childkey].push(charChild)),s}}(this),this.saxParser.ontext=ontext,this.saxParser.oncdata=function(text){var s;if(s=ontext(text))return s.cdata=!0}},Parser.prototype.parseString=function(str,cb){var err;null!=cb&&"function"==typeof cb&&(this.on("end",(function(result){return this.reset(),cb(null,result)})),this.on("error",(function(err){return this.reset(),cb(err)})));try{return""===(str=str.toString()).trim()?(this.emit("end",null),!0):(str=bom.stripBOM(str),this.options.async?(this.remaining=str,setImmediate(this.processAsync),this.saxParser):this.saxParser.write(str).close())}catch(error1){if(err=error1,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",err),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw err}},Parser.prototype.parseStringPromise=function(str){return promisify(this.parseString)(str)},Parser}(events),exports.parseString=function(str,a,b){var cb,options;return null!=b?("function"==typeof b&&(cb=b),"object"==typeof a&&(options=a)):("function"==typeof a&&(cb=a),options={}),new exports.Parser(options).parseString(str,cb)},exports.parseStringPromise=function(str,a){var options;return"object"==typeof a&&(options=a),new exports.Parser(options).parseStringPromise(str)}}).call(this)},function(module,exports,__webpack_require__){(function(Buffer){!function(sax){sax.parser=function(strict,opt){return new SAXParser(strict,opt)},sax.SAXParser=SAXParser,sax.SAXStream=SAXStream,sax.createStream=function(strict,opt){return new SAXStream(strict,opt)},sax.MAX_BUFFER_LENGTH=65536;var Stream,buffers=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function SAXParser(strict,opt){if(!(this instanceof SAXParser))return new SAXParser(strict,opt);!function(parser){for(var i=0,l=buffers.length;i<l;i++)parser[buffers[i]]=""}(this),this.q=this.c="",this.bufferCheckPosition=sax.MAX_BUFFER_LENGTH,this.opt=opt||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!strict,this.noscript=!(!strict&&!this.opt.noscript),this.state=S.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=this.strictEntities?Object.create(sax.XML_ENTITIES):Object.create(sax.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(rootNS)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),emit(this,"onready")}sax.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(o){function F(){}return F.prototype=o,new F}),Object.keys||(Object.keys=function(o){var a=[];for(var i in o)o.hasOwnProperty(i)&&a.push(i);return a}),SAXParser.prototype={end:function(){end(this)},write:function(chunk){if(this.error)throw this.error;if(this.closed)return error(this,"Cannot write after close. Assign an onready handler.");if(null===chunk)return end(this);"object"==typeof chunk&&(chunk=chunk.toString());var i=0,c="";for(;c=charAt(chunk,i++),this.c=c,c;)switch(this.trackPosition&&(this.position++,"\n"===c?(this.line++,this.column=0):this.column++),this.state){case S.BEGIN:if(this.state=S.BEGIN_WHITESPACE,"\ufeff"===c)continue;beginWhiteSpace(this,c);continue;case S.BEGIN_WHITESPACE:beginWhiteSpace(this,c);continue;case S.TEXT:if(this.sawRoot&&!this.closedRoot){for(var starti=i-1;c&&"<"!==c&&"&"!==c;)(c=charAt(chunk,i++))&&this.trackPosition&&(this.position++,"\n"===c?(this.line++,this.column=0):this.column++);this.textNode+=chunk.substring(starti,i-1)}"<"!==c||this.sawRoot&&this.closedRoot&&!this.strict?(isWhitespace(c)||this.sawRoot&&!this.closedRoot||strictFail(this,"Text data outside of root node."),"&"===c?this.state=S.TEXT_ENTITY:this.textNode+=c):(this.state=S.OPEN_WAKA,this.startTagPosition=this.position);continue;case S.SCRIPT:"<"===c?this.state=S.SCRIPT_ENDING:this.script+=c;continue;case S.SCRIPT_ENDING:"/"===c?this.state=S.CLOSE_TAG:(this.script+="<"+c,this.state=S.SCRIPT);continue;case S.OPEN_WAKA:if("!"===c)this.state=S.SGML_DECL,this.sgmlDecl="";else if(isWhitespace(c));else if(isMatch(nameStart,c))this.state=S.OPEN_TAG,this.tagName=c;else if("/"===c)this.state=S.CLOSE_TAG,this.tagName="";else if("?"===c)this.state=S.PROC_INST,this.procInstName=this.procInstBody="";else{if(strictFail(this,"Unencoded <"),this.startTagPosition+1<this.position){var pad=this.position-this.startTagPosition;c=new Array(pad).join(" ")+c}this.textNode+="<"+c,this.state=S.TEXT}continue;case S.SGML_DECL:"[CDATA["===(this.sgmlDecl+c).toUpperCase()?(emitNode(this,"onopencdata"),this.state=S.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+c==="--"?(this.state=S.COMMENT,this.comment="",this.sgmlDecl=""):"DOCTYPE"===(this.sgmlDecl+c).toUpperCase()?(this.state=S.DOCTYPE,(this.doctype||this.sawRoot)&&strictFail(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===c?(emitNode(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=S.TEXT):isQuote(c)?(this.state=S.SGML_DECL_QUOTED,this.sgmlDecl+=c):this.sgmlDecl+=c;continue;case S.SGML_DECL_QUOTED:c===this.q&&(this.state=S.SGML_DECL,this.q=""),this.sgmlDecl+=c;continue;case S.DOCTYPE:">"===c?(this.state=S.TEXT,emitNode(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=c,"["===c?this.state=S.DOCTYPE_DTD:isQuote(c)&&(this.state=S.DOCTYPE_QUOTED,this.q=c));continue;case S.DOCTYPE_QUOTED:this.doctype+=c,c===this.q&&(this.q="",this.state=S.DOCTYPE);continue;case S.DOCTYPE_DTD:this.doctype+=c,"]"===c?this.state=S.DOCTYPE:isQuote(c)&&(this.state=S.DOCTYPE_DTD_QUOTED,this.q=c);continue;case S.DOCTYPE_DTD_QUOTED:this.doctype+=c,c===this.q&&(this.state=S.DOCTYPE_DTD,this.q="");continue;case S.COMMENT:"-"===c?this.state=S.COMMENT_ENDING:this.comment+=c;continue;case S.COMMENT_ENDING:"-"===c?(this.state=S.COMMENT_ENDED,this.comment=textopts(this.opt,this.comment),this.comment&&emitNode(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+c,this.state=S.COMMENT);continue;case S.COMMENT_ENDED:">"!==c?(strictFail(this,"Malformed comment"),this.comment+="--"+c,this.state=S.COMMENT):this.state=S.TEXT;continue;case S.CDATA:"]"===c?this.state=S.CDATA_ENDING:this.cdata+=c;continue;case S.CDATA_ENDING:"]"===c?this.state=S.CDATA_ENDING_2:(this.cdata+="]"+c,this.state=S.CDATA);continue;case S.CDATA_ENDING_2:">"===c?(this.cdata&&emitNode(this,"oncdata",this.cdata),emitNode(this,"onclosecdata"),this.cdata="",this.state=S.TEXT):"]"===c?this.cdata+="]":(this.cdata+="]]"+c,this.state=S.CDATA);continue;case S.PROC_INST:"?"===c?this.state=S.PROC_INST_ENDING:isWhitespace(c)?this.state=S.PROC_INST_BODY:this.procInstName+=c;continue;case S.PROC_INST_BODY:if(!this.procInstBody&&isWhitespace(c))continue;"?"===c?this.state=S.PROC_INST_ENDING:this.procInstBody+=c;continue;case S.PROC_INST_ENDING:">"===c?(emitNode(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=S.TEXT):(this.procInstBody+="?"+c,this.state=S.PROC_INST_BODY);continue;case S.OPEN_TAG:isMatch(nameBody,c)?this.tagName+=c:(newTag(this),">"===c?openTag(this):"/"===c?this.state=S.OPEN_TAG_SLASH:(isWhitespace(c)||strictFail(this,"Invalid character in tag name"),this.state=S.ATTRIB));continue;case S.OPEN_TAG_SLASH:">"===c?(openTag(this,!0),closeTag(this)):(strictFail(this,"Forward-slash in opening tag not followed by >"),this.state=S.ATTRIB);continue;case S.ATTRIB:if(isWhitespace(c))continue;">"===c?openTag(this):"/"===c?this.state=S.OPEN_TAG_SLASH:isMatch(nameStart,c)?(this.attribName=c,this.attribValue="",this.state=S.ATTRIB_NAME):strictFail(this,"Invalid attribute name");continue;case S.ATTRIB_NAME:"="===c?this.state=S.ATTRIB_VALUE:">"===c?(strictFail(this,"Attribute without value"),this.attribValue=this.attribName,attrib(this),openTag(this)):isWhitespace(c)?this.state=S.ATTRIB_NAME_SAW_WHITE:isMatch(nameBody,c)?this.attribName+=c:strictFail(this,"Invalid attribute name");continue;case S.ATTRIB_NAME_SAW_WHITE:if("="===c)this.state=S.ATTRIB_VALUE;else{if(isWhitespace(c))continue;strictFail(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",emitNode(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===c?openTag(this):isMatch(nameStart,c)?(this.attribName=c,this.state=S.ATTRIB_NAME):(strictFail(this,"Invalid attribute name"),this.state=S.ATTRIB)}continue;case S.ATTRIB_VALUE:if(isWhitespace(c))continue;isQuote(c)?(this.q=c,this.state=S.ATTRIB_VALUE_QUOTED):(strictFail(this,"Unquoted attribute value"),this.state=S.ATTRIB_VALUE_UNQUOTED,this.attribValue=c);continue;case S.ATTRIB_VALUE_QUOTED:if(c!==this.q){"&"===c?this.state=S.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=c;continue}attrib(this),this.q="",this.state=S.ATTRIB_VALUE_CLOSED;continue;case S.ATTRIB_VALUE_CLOSED:isWhitespace(c)?this.state=S.ATTRIB:">"===c?openTag(this):"/"===c?this.state=S.OPEN_TAG_SLASH:isMatch(nameStart,c)?(strictFail(this,"No whitespace between attributes"),this.attribName=c,this.attribValue="",this.state=S.ATTRIB_NAME):strictFail(this,"Invalid attribute name");continue;case S.ATTRIB_VALUE_UNQUOTED:if(!isAttribEnd(c)){"&"===c?this.state=S.ATTRIB_VALUE_ENTITY_U:this.attribValue+=c;continue}attrib(this),">"===c?openTag(this):this.state=S.ATTRIB;continue;case S.CLOSE_TAG:if(this.tagName)">"===c?closeTag(this):isMatch(nameBody,c)?this.tagName+=c:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=S.SCRIPT):(isWhitespace(c)||strictFail(this,"Invalid tagname in closing tag"),this.state=S.CLOSE_TAG_SAW_WHITE);else{if(isWhitespace(c))continue;notMatch(nameStart,c)?this.script?(this.script+="</"+c,this.state=S.SCRIPT):strictFail(this,"Invalid tagname in closing tag."):this.tagName=c}continue;case S.CLOSE_TAG_SAW_WHITE:if(isWhitespace(c))continue;">"===c?closeTag(this):strictFail(this,"Invalid characters in closing tag");continue;case S.TEXT_ENTITY:case S.ATTRIB_VALUE_ENTITY_Q:case S.ATTRIB_VALUE_ENTITY_U:var returnState,buffer;switch(this.state){case S.TEXT_ENTITY:returnState=S.TEXT,buffer="textNode";break;case S.ATTRIB_VALUE_ENTITY_Q:returnState=S.ATTRIB_VALUE_QUOTED,buffer="attribValue";break;case S.ATTRIB_VALUE_ENTITY_U:returnState=S.ATTRIB_VALUE_UNQUOTED,buffer="attribValue"}";"===c?(this[buffer]+=parseEntity(this),this.entity="",this.state=returnState):isMatch(this.entity.length?entityBody:entityStart,c)?this.entity+=c:(strictFail(this,"Invalid character in entity name"),this[buffer]+="&"+this.entity+c,this.entity="",this.state=returnState);continue;default:throw new Error(this,"Unknown state: "+this.state)}this.position>=this.bufferCheckPosition&&function(parser){for(var maxAllowed=Math.max(sax.MAX_BUFFER_LENGTH,10),maxActual=0,i=0,l=buffers.length;i<l;i++){var len=parser[buffers[i]].length;if(len>maxAllowed)switch(buffers[i]){case"textNode":closeText(parser);break;case"cdata":emitNode(parser,"oncdata",parser.cdata),parser.cdata="";break;case"script":emitNode(parser,"onscript",parser.script),parser.script="";break;default:error(parser,"Max buffer length exceeded: "+buffers[i])}maxActual=Math.max(maxActual,len)}var m=sax.MAX_BUFFER_LENGTH-maxActual;parser.bufferCheckPosition=m+parser.position}(this);return this}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var parser;closeText(parser=this),""!==parser.cdata&&(emitNode(parser,"oncdata",parser.cdata),parser.cdata=""),""!==parser.script&&(emitNode(parser,"onscript",parser.script),parser.script="")}};try{Stream=__webpack_require__(317).Stream}catch(ex){Stream=function(){}}var streamWraps=sax.EVENTS.filter((function(ev){return"error"!==ev&&"end"!==ev}));function SAXStream(strict,opt){if(!(this instanceof SAXStream))return new SAXStream(strict,opt);Stream.apply(this),this._parser=new SAXParser(strict,opt),this.writable=!0,this.readable=!0;var me=this;this._parser.onend=function(){me.emit("end")},this._parser.onerror=function(er){me.emit("error",er),me._parser.error=null},this._decoder=null,streamWraps.forEach((function(ev){Object.defineProperty(me,"on"+ev,{get:function(){return me._parser["on"+ev]},set:function(h){if(!h)return me.removeAllListeners(ev),me._parser["on"+ev]=h,h;me.on(ev,h)},enumerable:!0,configurable:!1})}))}SAXStream.prototype=Object.create(Stream.prototype,{constructor:{value:SAXStream}}),SAXStream.prototype.write=function(data){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(data)){if(!this._decoder){var SD=__webpack_require__(138).StringDecoder;this._decoder=new SD("utf8")}data=this._decoder.write(data)}return this._parser.write(data.toString()),this.emit("data",data),!0},SAXStream.prototype.end=function(chunk){return chunk&&chunk.length&&this.write(chunk),this._parser.end(),!0},SAXStream.prototype.on=function(ev,handler){var me=this;return me._parser["on"+ev]||-1===streamWraps.indexOf(ev)||(me._parser["on"+ev]=function(){var args=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);args.splice(0,0,ev),me.emit.apply(me,args)}),Stream.prototype.on.call(me,ev,handler)};var XML_NAMESPACE="http://www.w3.org/XML/1998/namespace",rootNS={xml:XML_NAMESPACE,xmlns:"http://www.w3.org/2000/xmlns/"},nameStart=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,nameBody=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,entityStart=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,entityBody=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function isWhitespace(c){return" "===c||"\n"===c||"\r"===c||"\t"===c}function isQuote(c){return'"'===c||"'"===c}function isAttribEnd(c){return">"===c||isWhitespace(c)}function isMatch(regex,c){return regex.test(c)}function notMatch(regex,c){return!isMatch(regex,c)}var stringFromCharCode,floor,fromCodePoint,S=0;for(var s in sax.STATE={BEGIN:S++,BEGIN_WHITESPACE:S++,TEXT:S++,TEXT_ENTITY:S++,OPEN_WAKA:S++,SGML_DECL:S++,SGML_DECL_QUOTED:S++,DOCTYPE:S++,DOCTYPE_QUOTED:S++,DOCTYPE_DTD:S++,DOCTYPE_DTD_QUOTED:S++,COMMENT_STARTING:S++,COMMENT:S++,COMMENT_ENDING:S++,COMMENT_ENDED:S++,CDATA:S++,CDATA_ENDING:S++,CDATA_ENDING_2:S++,PROC_INST:S++,PROC_INST_BODY:S++,PROC_INST_ENDING:S++,OPEN_TAG:S++,OPEN_TAG_SLASH:S++,ATTRIB:S++,ATTRIB_NAME:S++,ATTRIB_NAME_SAW_WHITE:S++,ATTRIB_VALUE:S++,ATTRIB_VALUE_QUOTED:S++,ATTRIB_VALUE_CLOSED:S++,ATTRIB_VALUE_UNQUOTED:S++,ATTRIB_VALUE_ENTITY_Q:S++,ATTRIB_VALUE_ENTITY_U:S++,CLOSE_TAG:S++,CLOSE_TAG_SAW_WHITE:S++,SCRIPT:S++,SCRIPT_ENDING:S++},sax.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},sax.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(sax.ENTITIES).forEach((function(key){var e=sax.ENTITIES[key],s="number"==typeof e?String.fromCharCode(e):e;sax.ENTITIES[key]=s})),sax.STATE)sax.STATE[sax.STATE[s]]=s;function emit(parser,event,data){parser[event]&&parser[event](data)}function emitNode(parser,nodeType,data){parser.textNode&&closeText(parser),emit(parser,nodeType,data)}function closeText(parser){parser.textNode=textopts(parser.opt,parser.textNode),parser.textNode&&emit(parser,"ontext",parser.textNode),parser.textNode=""}function textopts(opt,text){return opt.trim&&(text=text.trim()),opt.normalize&&(text=text.replace(/\s+/g," ")),text}function error(parser,er){return closeText(parser),parser.trackPosition&&(er+="\nLine: "+parser.line+"\nColumn: "+parser.column+"\nChar: "+parser.c),er=new Error(er),parser.error=er,emit(parser,"onerror",er),parser}function end(parser){return parser.sawRoot&&!parser.closedRoot&&strictFail(parser,"Unclosed root tag"),parser.state!==S.BEGIN&&parser.state!==S.BEGIN_WHITESPACE&&parser.state!==S.TEXT&&error(parser,"Unexpected end"),closeText(parser),parser.c="",parser.closed=!0,emit(parser,"onend"),SAXParser.call(parser,parser.strict,parser.opt),parser}function strictFail(parser,message){if("object"!=typeof parser||!(parser instanceof SAXParser))throw new Error("bad call to strictFail");parser.strict&&error(parser,message)}function newTag(parser){parser.strict||(parser.tagName=parser.tagName[parser.looseCase]());var parent=parser.tags[parser.tags.length-1]||parser,tag=parser.tag={name:parser.tagName,attributes:{}};parser.opt.xmlns&&(tag.ns=parent.ns),parser.attribList.length=0,emitNode(parser,"onopentagstart",tag)}function qname(name,attribute){var qualName=name.indexOf(":")<0?["",name]:name.split(":"),prefix=qualName[0],local=qualName[1];return attribute&&"xmlns"===name&&(prefix="xmlns",local=""),{prefix:prefix,local:local}}function attrib(parser){if(parser.strict||(parser.attribName=parser.attribName[parser.looseCase]()),-1!==parser.attribList.indexOf(parser.attribName)||parser.tag.attributes.hasOwnProperty(parser.attribName))parser.attribName=parser.attribValue="";else{if(parser.opt.xmlns){var qn=qname(parser.attribName,!0),prefix=qn.prefix,local=qn.local;if("xmlns"===prefix)if("xml"===local&&parser.attribValue!==XML_NAMESPACE)strictFail(parser,"xml: prefix must be bound to "+XML_NAMESPACE+"\nActual: "+parser.attribValue);else if("xmlns"===local&&"http://www.w3.org/2000/xmlns/"!==parser.attribValue)strictFail(parser,"xmlns: prefix must be bound to http://www.w3.org/2000/xmlns/\nActual: "+parser.attribValue);else{var tag=parser.tag,parent=parser.tags[parser.tags.length-1]||parser;tag.ns===parent.ns&&(tag.ns=Object.create(parent.ns)),tag.ns[local]=parser.attribValue}parser.attribList.push([parser.attribName,parser.attribValue])}else parser.tag.attributes[parser.attribName]=parser.attribValue,emitNode(parser,"onattribute",{name:parser.attribName,value:parser.attribValue});parser.attribName=parser.attribValue=""}}function openTag(parser,selfClosing){if(parser.opt.xmlns){var tag=parser.tag,qn=qname(parser.tagName);tag.prefix=qn.prefix,tag.local=qn.local,tag.uri=tag.ns[qn.prefix]||"",tag.prefix&&!tag.uri&&(strictFail(parser,"Unbound namespace prefix: "+JSON.stringify(parser.tagName)),tag.uri=qn.prefix);var parent=parser.tags[parser.tags.length-1]||parser;tag.ns&&parent.ns!==tag.ns&&Object.keys(tag.ns).forEach((function(p){emitNode(parser,"onopennamespace",{prefix:p,uri:tag.ns[p]})}));for(var i=0,l=parser.attribList.length;i<l;i++){var nv=parser.attribList[i],name=nv[0],value=nv[1],qualName=qname(name,!0),prefix=qualName.prefix,local=qualName.local,uri=""===prefix?"":tag.ns[prefix]||"",a={name:name,value:value,prefix:prefix,local:local,uri:uri};prefix&&"xmlns"!==prefix&&!uri&&(strictFail(parser,"Unbound namespace prefix: "+JSON.stringify(prefix)),a.uri=prefix),parser.tag.attributes[name]=a,emitNode(parser,"onattribute",a)}parser.attribList.length=0}parser.tag.isSelfClosing=!!selfClosing,parser.sawRoot=!0,parser.tags.push(parser.tag),emitNode(parser,"onopentag",parser.tag),selfClosing||(parser.noscript||"script"!==parser.tagName.toLowerCase()?parser.state=S.TEXT:parser.state=S.SCRIPT,parser.tag=null,parser.tagName=""),parser.attribName=parser.attribValue="",parser.attribList.length=0}function closeTag(parser){if(!parser.tagName)return strictFail(parser,"Weird empty close tag."),parser.textNode+="</>",void(parser.state=S.TEXT);if(parser.script){if("script"!==parser.tagName)return parser.script+="</"+parser.tagName+">",parser.tagName="",void(parser.state=S.SCRIPT);emitNode(parser,"onscript",parser.script),parser.script=""}var t=parser.tags.length,tagName=parser.tagName;parser.strict||(tagName=tagName[parser.looseCase]());for(var closeTo=tagName;t--;){if(parser.tags[t].name===closeTo)break;strictFail(parser,"Unexpected close tag")}if(t<0)return strictFail(parser,"Unmatched closing tag: "+parser.tagName),parser.textNode+="</"+parser.tagName+">",void(parser.state=S.TEXT);parser.tagName=tagName;for(var s=parser.tags.length;s-- >t;){var tag=parser.tag=parser.tags.pop();parser.tagName=parser.tag.name,emitNode(parser,"onclosetag",parser.tagName);var x={};for(var i in tag.ns)x[i]=tag.ns[i];var parent=parser.tags[parser.tags.length-1]||parser;parser.opt.xmlns&&tag.ns!==parent.ns&&Object.keys(tag.ns).forEach((function(p){var n=tag.ns[p];emitNode(parser,"onclosenamespace",{prefix:p,uri:n})}))}0===t&&(parser.closedRoot=!0),parser.tagName=parser.attribValue=parser.attribName="",parser.attribList.length=0,parser.state=S.TEXT}function parseEntity(parser){var num,entity=parser.entity,entityLC=entity.toLowerCase(),numStr="";return parser.ENTITIES[entity]?parser.ENTITIES[entity]:parser.ENTITIES[entityLC]?parser.ENTITIES[entityLC]:("#"===(entity=entityLC).charAt(0)&&("x"===entity.charAt(1)?(entity=entity.slice(2),numStr=(num=parseInt(entity,16)).toString(16)):(entity=entity.slice(1),numStr=(num=parseInt(entity,10)).toString(10))),entity=entity.replace(/^0+/,""),isNaN(num)||numStr.toLowerCase()!==entity?(strictFail(parser,"Invalid character entity"),"&"+parser.entity+";"):String.fromCodePoint(num))}function beginWhiteSpace(parser,c){"<"===c?(parser.state=S.OPEN_WAKA,parser.startTagPosition=parser.position):isWhitespace(c)||(strictFail(parser,"Non-whitespace before first tag."),parser.textNode=c,parser.state=S.TEXT)}function charAt(chunk,i){var result="";return i<chunk.length&&(result=chunk.charAt(i)),result}S=sax.STATE,String.fromCodePoint||(stringFromCharCode=String.fromCharCode,floor=Math.floor,fromCodePoint=function(){var highSurrogate,lowSurrogate,MAX_SIZE=16384,codeUnits=[],index=-1,length=arguments.length;if(!length)return"";for(var result="";++index<length;){var codePoint=Number(arguments[index]);if(!isFinite(codePoint)||codePoint<0||codePoint>1114111||floor(codePoint)!==codePoint)throw RangeError("Invalid code point: "+codePoint);codePoint<=65535?codeUnits.push(codePoint):(highSurrogate=55296+((codePoint-=65536)>>10),lowSurrogate=codePoint%1024+56320,codeUnits.push(highSurrogate,lowSurrogate)),(index+1===length||codeUnits.length>MAX_SIZE)&&(result+=stringFromCharCode.apply(null,codeUnits),codeUnits.length=0)}return result},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:fromCodePoint,configurable:!0,writable:!0}):String.fromCodePoint=fromCodePoint)}(exports)}).call(this,__webpack_require__(135).Buffer)},function(module,exports,__webpack_require__){"use strict";exports.byteLength=function(b64){var lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1];return 3*(validLen+placeHoldersLen)/4-placeHoldersLen},exports.toByteArray=function(b64){var tmp,i,lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1],arr=new Arr(function(b64,validLen,placeHoldersLen){return 3*(validLen+placeHoldersLen)/4-placeHoldersLen}(0,validLen,placeHoldersLen)),curByte=0,len=placeHoldersLen>0?validLen-4:validLen;for(i=0;i<len;i+=4)tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)],arr[curByte++]=tmp>>16&255,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp;2===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4,arr[curByte++]=255&tmp);1===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp);return arr},exports.fromByteArray=function(uint8){for(var tmp,len=uint8.length,extraBytes=len%3,parts=[],i=0,len2=len-extraBytes;i<len2;i+=16383)parts.push(encodeChunk(uint8,i,i+16383>len2?len2:i+16383));1===extraBytes?(tmp=uint8[len-1],parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")):2===extraBytes&&(tmp=(uint8[len-2]<<8)+uint8[len-1],parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"="));return parts.join("")};for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(b64){var len=b64.length;if(len%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var validLen=b64.indexOf("=");return-1===validLen&&(validLen=len),[validLen,validLen===len?0:4-validLen%4]}function encodeChunk(uint8,start,end){for(var tmp,num,output=[],i=start;i<end;i+=3)tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(255&uint8[i+2]),output.push(lookup[(num=tmp)>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[63&num]);return output.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63},function(module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:1/0*(s?-1:1);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)},exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=value<0||0===value&&1/value<0?1:0;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),(value+=e+eBias>=1?rt/c:rt*Math.pow(2,1-eBias))*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));mLen>=8;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}},function(module,exports,__webpack_require__){module.exports=Stream;var EE=__webpack_require__(78).EventEmitter;function Stream(){EE.call(this)}__webpack_require__(318)(Stream,EE),Stream.Readable=__webpack_require__(136),Stream.Writable=__webpack_require__(325),Stream.Duplex=__webpack_require__(326),Stream.Transform=__webpack_require__(327),Stream.PassThrough=__webpack_require__(328),Stream.Stream=Stream,Stream.prototype.pipe=function(dest,options){var source=this;function ondata(chunk){dest.writable&&!1===dest.write(chunk)&&source.pause&&source.pause()}function ondrain(){source.readable&&source.resume&&source.resume()}source.on("data",ondata),dest.on("drain",ondrain),dest._isStdio||options&&!1===options.end||(source.on("end",onend),source.on("close",onclose));var didOnEnd=!1;function onend(){didOnEnd||(didOnEnd=!0,dest.end())}function onclose(){didOnEnd||(didOnEnd=!0,"function"==typeof dest.destroy&&dest.destroy())}function onerror(er){if(cleanup(),0===EE.listenerCount(this,"error"))throw er}function cleanup(){source.removeListener("data",ondata),dest.removeListener("drain",ondrain),source.removeListener("end",onend),source.removeListener("close",onclose),source.removeListener("error",onerror),dest.removeListener("error",onerror),source.removeListener("end",cleanup),source.removeListener("close",cleanup),dest.removeListener("close",cleanup)}return source.on("error",onerror),dest.on("error",onerror),source.on("end",cleanup),source.on("close",cleanup),dest.on("close",cleanup),dest.emit("pipe",source),dest}},function(module,exports){"function"==typeof Object.create?module.exports=function(ctor,superCtor){superCtor&&(ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}}))}:module.exports=function(ctor,superCtor){if(superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}}},function(module,exports){},function(module,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(104).Buffer,util=__webpack_require__(321);module.exports=function(){function BufferList(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BufferList),this.head=null,this.tail=null,this.length=0}return BufferList.prototype.push=function(v){var entry={data:v,next:null};this.length>0?this.tail.next=entry:this.head=entry,this.tail=entry,++this.length},BufferList.prototype.unshift=function(v){var entry={data:v,next:this.head};0===this.length&&(this.tail=entry),this.head=entry,++this.length},BufferList.prototype.shift=function(){if(0!==this.length){var ret=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,ret}},BufferList.prototype.clear=function(){this.head=this.tail=null,this.length=0},BufferList.prototype.join=function(s){if(0===this.length)return"";for(var p=this.head,ret=""+p.data;p=p.next;)ret+=s+p.data;return ret},BufferList.prototype.concat=function(n){if(0===this.length)return Buffer.alloc(0);if(1===this.length)return this.head.data;for(var src,target,offset,ret=Buffer.allocUnsafe(n>>>0),p=this.head,i=0;p;)src=p.data,target=ret,offset=i,src.copy(target,offset),i+=p.data.length,p=p.next;return ret},BufferList}(),util&&util.inspect&&util.inspect.custom&&(module.exports.prototype[util.inspect.custom]=function(){var obj=util.inspect({length:this.length});return this.constructor.name+" "+obj})},function(module,exports){},function(module,exports,__webpack_require__){(function(global,process){!function(global,undefined){"use strict";if(!global.setImmediate){var registerImmediate,html,channel,messagePrefix,onGlobalMessage,nextHandle=1,tasksByHandle={},currentlyRunningATask=!1,doc=global.document,attachTo=Object.getPrototypeOf&&Object.getPrototypeOf(global);attachTo=attachTo&&attachTo.setTimeout?attachTo:global,"[object process]"==={}.toString.call(global.process)?registerImmediate=function(handle){process.nextTick((function(){runIfPresent(handle)}))}:!function(){if(global.postMessage&&!global.importScripts){var postMessageIsAsynchronous=!0,oldOnMessage=global.onmessage;return global.onmessage=function(){postMessageIsAsynchronous=!1},global.postMessage("","*"),global.onmessage=oldOnMessage,postMessageIsAsynchronous}}()?global.MessageChannel?((channel=new MessageChannel).port1.onmessage=function(event){runIfPresent(event.data)},registerImmediate=function(handle){channel.port2.postMessage(handle)}):doc&&"onreadystatechange"in doc.createElement("script")?(html=doc.documentElement,registerImmediate=function(handle){var script=doc.createElement("script");script.onreadystatechange=function(){runIfPresent(handle),script.onreadystatechange=null,html.removeChild(script),script=null},html.appendChild(script)}):registerImmediate=function(handle){setTimeout(runIfPresent,0,handle)}:(messagePrefix="setImmediate$"+Math.random()+"$",onGlobalMessage=function(event){event.source===global&&"string"==typeof event.data&&0===event.data.indexOf(messagePrefix)&&runIfPresent(+event.data.slice(messagePrefix.length))},global.addEventListener?global.addEventListener("message",onGlobalMessage,!1):global.attachEvent("onmessage",onGlobalMessage),registerImmediate=function(handle){global.postMessage(messagePrefix+handle,"*")}),attachTo.setImmediate=function(callback){"function"!=typeof callback&&(callback=new Function(""+callback));for(var args=new Array(arguments.length-1),i=0;i<args.length;i++)args[i]=arguments[i+1];var task={callback:callback,args:args};return tasksByHandle[nextHandle]=task,registerImmediate(nextHandle),nextHandle++},attachTo.clearImmediate=clearImmediate}function clearImmediate(handle){delete tasksByHandle[handle]}function runIfPresent(handle){if(currentlyRunningATask)setTimeout(runIfPresent,0,handle);else{var task=tasksByHandle[handle];if(task){currentlyRunningATask=!0;try{!function(task){var callback=task.callback,args=task.args;switch(args.length){case 0:callback();break;case 1:callback(args[0]);break;case 2:callback(args[0],args[1]);break;case 3:callback(args[0],args[1],args[2]);break;default:callback.apply(void 0,args)}}(task)}finally{clearImmediate(handle),currentlyRunningATask=!1}}}}}("undefined"==typeof self?void 0===global?this:global:self)}).call(this,__webpack_require__(58),__webpack_require__(64))},function(module,exports,__webpack_require__){(function(global){function config(name){try{if(!global.localStorage)return!1}catch(_){return!1}var val=global.localStorage[name];return null!=val&&"true"===String(val).toLowerCase()}module.exports=function(fn,msg){if(config("noDeprecation"))return fn;var warned=!1;return function(){if(!warned){if(config("throwDeprecation"))throw new Error(msg);config("traceDeprecation")?console.trace(msg):console.warn(msg),warned=!0}return fn.apply(this,arguments)}}}).call(this,__webpack_require__(58))},function(module,exports,__webpack_require__){"use strict";module.exports=PassThrough;var Transform=__webpack_require__(183),util=Object.create(__webpack_require__(79));function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}util.inherits=__webpack_require__(80),util.inherits(PassThrough,Transform),PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(137)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(68)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(136).Transform},function(module,exports,__webpack_require__){module.exports=__webpack_require__(136).PassThrough},function(module,exports){(function(){"use strict";exports.stripBOM=function(str){return"\ufeff"===str[0]?str.substring(1):str}}).call(this)},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(139),util=__webpack_require__(98),implementation=__webpack_require__(186),getPolyfill=__webpack_require__(195),polyfill=getPolyfill(),shim=__webpack_require__(357),boundPromisify=function(orig){return polyfill.apply(util,arguments)};define(boundPromisify,{custom:polyfill.custom,customPromisifyArgs:polyfill.customPromisifyArgs,getPolyfill:getPolyfill,implementation:implementation,shim:shim}),module.exports=boundPromisify},function(module,exports,__webpack_require__){"use strict";var slice=Array.prototype.slice,isArgs=__webpack_require__(185),origKeys=Object.keys,keysShim=origKeys?function(o){return origKeys(o)}:__webpack_require__(332),originalKeys=Object.keys;keysShim.shim=function(){Object.keys?function(){var args=Object.keys(arguments);return args&&args.length===arguments.length}(1,2)||(Object.keys=function(object){return isArgs(object)?originalKeys(slice.call(object)):originalKeys(object)}):Object.keys=keysShim;return Object.keys||keysShim},module.exports=keysShim},function(module,exports,__webpack_require__){"use strict";var keysShim;if(!Object.keys){var has=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,isArgs=__webpack_require__(185),isEnumerable=Object.prototype.propertyIsEnumerable,hasDontEnumBug=!isEnumerable.call({toString:null},"toString"),hasProtoEnumBug=isEnumerable.call((function(){}),"prototype"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],equalsConstructorPrototype=function(o){var ctor=o.constructor;return ctor&&ctor.prototype===o},excludedKeys={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},hasAutomationEqualityBug=function(){if("undefined"==typeof window)return!1;for(var k in window)try{if(!excludedKeys["$"+k]&&has.call(window,k)&&null!==window[k]&&"object"==typeof window[k])try{equalsConstructorPrototype(window[k])}catch(e){return!0}}catch(e){return!0}return!1}();keysShim=function(object){var isObject=null!==object&&"object"==typeof object,isFunction="[object Function]"===toStr.call(object),isArguments=isArgs(object),isString=isObject&&"[object String]"===toStr.call(object),theKeys=[];if(!isObject&&!isFunction&&!isArguments)throw new TypeError("Object.keys called on a non-object");var skipProto=hasProtoEnumBug&&isFunction;if(isString&&object.length>0&&!has.call(object,0))for(var i=0;i<object.length;++i)theKeys.push(String(i));if(isArguments&&object.length>0)for(var j=0;j<object.length;++j)theKeys.push(String(j));else for(var name in object)skipProto&&"prototype"===name||!has.call(object,name)||theKeys.push(String(name));if(hasDontEnumBug)for(var skipConstructor=function(o){if("undefined"==typeof window||!hasAutomationEqualityBug)return equalsConstructorPrototype(o);try{return equalsConstructorPrototype(o)}catch(e){return!1}}(object),k=0;k<dontEnums.length;++k)skipConstructor&&"constructor"===dontEnums[k]||!has.call(object,dontEnums[k])||theKeys.push(dontEnums[k]);return theKeys}}module.exports=keysShim},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(139),implementation=__webpack_require__(187);define(implementation,{getPolyfill:__webpack_require__(194),implementation:implementation,shim:__webpack_require__(356)}),module.exports=implementation},function(module,exports,__webpack_require__){"use strict";var $TypeError=__webpack_require__(48)("%TypeError%"),DefineOwnProperty=__webpack_require__(337),FromPropertyDescriptor=__webpack_require__(339),OrdinaryGetOwnProperty=__webpack_require__(341),IsDataDescriptor=__webpack_require__(348),IsExtensible=__webpack_require__(349),IsPropertyKey=__webpack_require__(190),SameValue=__webpack_require__(351),Type=__webpack_require__(83);module.exports=function(O,P,V){if("Object"!==Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var oldDesc=OrdinaryGetOwnProperty(O,P),extensible=!oldDesc||IsExtensible(O);return!(oldDesc&&(!oldDesc["[[Writable]]"]||!oldDesc["[[Configurable]]"])||!extensible)&&DefineOwnProperty(IsDataDescriptor,SameValue,FromPropertyDescriptor,O,P,{"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":V,"[[Writable]]":!0})}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var obj={},sym=Symbol("test"),symObj=Object(sym);if("string"==typeof sym)return!1;if("[object Symbol]"!==Object.prototype.toString.call(sym))return!1;if("[object Symbol]"!==Object.prototype.toString.call(symObj))return!1;for(sym in obj[sym]=42,obj)return!1;if("function"==typeof Object.keys&&0!==Object.keys(obj).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(obj).length)return!1;var syms=Object.getOwnPropertySymbols(obj);if(1!==syms.length||syms[0]!==sym)return!1;if(!Object.prototype.propertyIsEnumerable.call(obj,sym))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var descriptor=Object.getOwnPropertyDescriptor(obj,sym);if(42!==descriptor.value||!0!==descriptor.enumerable)return!1}return!0}},function(module,exports,__webpack_require__){"use strict";var ERROR_MESSAGE="Function.prototype.bind called on incompatible ",slice=Array.prototype.slice,toStr=Object.prototype.toString;module.exports=function(that){var target=this;if("function"!=typeof target||"[object Function]"!==toStr.call(target))throw new TypeError(ERROR_MESSAGE+target);for(var bound,args=slice.call(arguments,1),binder=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))},boundLength=Math.max(0,target.length-args.length),boundArgs=[],i=0;i<boundLength;i++)boundArgs.push("$"+i);if(bound=Function("binder","return function ("+boundArgs.join(",")+"){ return binder.apply(this,arguments); }")(binder),target.prototype){var Empty=function(){};Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null}return bound}},function(module,exports,__webpack_require__){"use strict";var $defineProperty=__webpack_require__(48)("%Object.defineProperty%",!0);if($defineProperty)try{$defineProperty({},"a",{value:1})}catch(e){$defineProperty=null}var $isEnumerable=__webpack_require__(82)("Object.prototype.propertyIsEnumerable");module.exports=function(IsDataDescriptor,SameValue,FromPropertyDescriptor,O,P,desc){if(!$defineProperty){if(!IsDataDescriptor(desc))return!1;if(!desc["[[Configurable]]"]||!desc["[[Writable]]"])return!1;if(P in O&&$isEnumerable(O,P)!==!!desc["[[Enumerable]]"])return!1;var V=desc["[[Value]]"];return O[P]=V,SameValue(O[P],V)}return $defineProperty(O,P,FromPropertyDescriptor(desc)),!0}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(140),GetIntrinsic=__webpack_require__(48),$apply=GetIntrinsic("%Function.prototype.apply%"),$call=GetIntrinsic("%Function.prototype.call%"),$reflectApply=GetIntrinsic("%Reflect.apply%",!0)||bind.call($call,$apply),$gOPD=GetIntrinsic("%Object.getOwnPropertyDescriptor%",!0),$defineProperty=GetIntrinsic("%Object.defineProperty%",!0),$max=GetIntrinsic("%Math.max%");if($defineProperty)try{$defineProperty({},"a",{value:1})}catch(e){$defineProperty=null}module.exports=function(originalFunction){var func=$reflectApply(bind,$call,arguments);if($gOPD&&$defineProperty){var desc=$gOPD(func,"length");desc.configurable&&$defineProperty(func,"length",{value:1+$max(0,originalFunction.length-(arguments.length-1))})}return func};var applyBind=function(){return $reflectApply(bind,$apply,arguments)};$defineProperty?$defineProperty(module.exports,"apply",{value:applyBind}):module.exports.apply=applyBind},function(module,exports,__webpack_require__){"use strict";var assertRecord=__webpack_require__(189),Type=__webpack_require__(83);module.exports=function(Desc){if(void 0===Desc)return Desc;assertRecord(Type,"Property Descriptor","Desc",Desc);var obj={};return"[[Value]]"in Desc&&(obj.value=Desc["[[Value]]"]),"[[Writable]]"in Desc&&(obj.writable=Desc["[[Writable]]"]),"[[Get]]"in Desc&&(obj.get=Desc["[[Get]]"]),"[[Set]]"in Desc&&(obj.set=Desc["[[Set]]"]),"[[Enumerable]]"in Desc&&(obj.enumerable=Desc["[[Enumerable]]"]),"[[Configurable]]"in Desc&&(obj.configurable=Desc["[[Configurable]]"]),obj}},function(module,exports,__webpack_require__){"use strict";module.exports=function(x){return null===x?"Null":void 0===x?"Undefined":"function"==typeof x||"object"==typeof x?"Object":"number"==typeof x?"Number":"boolean"==typeof x?"Boolean":"string"==typeof x?"String":void 0}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(48),$gOPD=__webpack_require__(342),$TypeError=GetIntrinsic("%TypeError%"),$isEnumerable=__webpack_require__(82)("Object.prototype.propertyIsEnumerable"),has=__webpack_require__(81),IsArray=__webpack_require__(343),IsPropertyKey=__webpack_require__(190),IsRegExp=__webpack_require__(344),ToPropertyDescriptor=__webpack_require__(346),Type=__webpack_require__(83);module.exports=function(O,P){if("Object"!==Type(O))throw new $TypeError("Assertion failed: O must be an Object");if(!IsPropertyKey(P))throw new $TypeError("Assertion failed: P must be a Property Key");if(has(O,P)){if(!$gOPD){var arrayLength=IsArray(O)&&"length"===P,regexLastIndex=IsRegExp(O)&&"lastIndex"===P;return{"[[Configurable]]":!(arrayLength||regexLastIndex),"[[Enumerable]]":$isEnumerable(O,P),"[[Value]]":O[P],"[[Writable]]":!0}}return ToPropertyDescriptor($gOPD(O,P))}}},function(module,exports,__webpack_require__){"use strict";var $gOPD=__webpack_require__(48)("%Object.getOwnPropertyDescriptor%");if($gOPD)try{$gOPD([],"length")}catch(e){$gOPD=null}module.exports=$gOPD},function(module,exports,__webpack_require__){"use strict";var $Array=__webpack_require__(48)("%Array%"),toStr=!$Array.isArray&&__webpack_require__(82)("Object.prototype.toString");module.exports=$Array.isArray||function(argument){return"[object Array]"===toStr(argument)}},function(module,exports,__webpack_require__){"use strict";var $match=__webpack_require__(48)("%Symbol.match%",!0),hasRegExpMatcher=__webpack_require__(345),ToBoolean=__webpack_require__(191);module.exports=function(argument){if(!argument||"object"!=typeof argument)return!1;if($match){var isRegExp=argument[$match];if(void 0!==isRegExp)return ToBoolean(isRegExp)}return hasRegExpMatcher(argument)}},function(module,exports,__webpack_require__){"use strict";var has,$exec,isRegexMarker,badStringifier,callBound=__webpack_require__(82),hasToStringTag=__webpack_require__(188)()&&"symbol"==typeof Symbol.toStringTag;if(hasToStringTag){has=callBound("Object.prototype.hasOwnProperty"),$exec=callBound("RegExp.prototype.exec"),isRegexMarker={};var throwRegexMarker=function(){throw isRegexMarker};badStringifier={toString:throwRegexMarker,valueOf:throwRegexMarker},"symbol"==typeof Symbol.toPrimitive&&(badStringifier[Symbol.toPrimitive]=throwRegexMarker)}var $toString=callBound("Object.prototype.toString"),gOPD=Object.getOwnPropertyDescriptor;module.exports=hasToStringTag?function(value){if(!value||"object"!=typeof value)return!1;var descriptor=gOPD(value,"lastIndex");if(!(descriptor&&has(descriptor,"value")))return!1;try{$exec(value,badStringifier)}catch(e){return e===isRegexMarker}}:function(value){return!(!value||"object"!=typeof value&&"function"!=typeof value)&&"[object RegExp]"===$toString(value)}},function(module,exports,__webpack_require__){"use strict";var has=__webpack_require__(81),$TypeError=__webpack_require__(48)("%TypeError%"),Type=__webpack_require__(83),ToBoolean=__webpack_require__(191),IsCallable=__webpack_require__(192);module.exports=function(Obj){if("Object"!==Type(Obj))throw new $TypeError("ToPropertyDescriptor requires an object");var desc={};if(has(Obj,"enumerable")&&(desc["[[Enumerable]]"]=ToBoolean(Obj.enumerable)),has(Obj,"configurable")&&(desc["[[Configurable]]"]=ToBoolean(Obj.configurable)),has(Obj,"value")&&(desc["[[Value]]"]=Obj.value),has(Obj,"writable")&&(desc["[[Writable]]"]=ToBoolean(Obj.writable)),has(Obj,"get")){var getter=Obj.get;if(void 0!==getter&&!IsCallable(getter))throw new $TypeError("getter must be a function");desc["[[Get]]"]=getter}if(has(Obj,"set")){var setter=Obj.set;if(void 0!==setter&&!IsCallable(setter))throw new $TypeError("setter must be a function");desc["[[Set]]"]=setter}if((has(desc,"[[Get]]")||has(desc,"[[Set]]"))&&(has(desc,"[[Value]]")||has(desc,"[[Writable]]")))throw new $TypeError("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return desc}},function(module,exports,__webpack_require__){"use strict";var badArrayLike,isCallableMarker,fnToStr=Function.prototype.toString,reflectApply="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof reflectApply&&"function"==typeof Object.defineProperty)try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={},reflectApply((function(){throw 42}),null,badArrayLike)}catch(_){_!==isCallableMarker&&(reflectApply=null)}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function(value){try{var fnStr=fnToStr.call(value);return constructorRegex.test(fnStr)}catch(e){return!1}},toStr=Object.prototype.toString,hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,documentDotAll="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{};module.exports=reflectApply?function(value){if(value===documentDotAll)return!0;if(!value)return!1;if("function"!=typeof value&&"object"!=typeof value)return!1;if("function"==typeof value&&!value.prototype)return!0;try{reflectApply(value,null,badArrayLike)}catch(e){if(e!==isCallableMarker)return!1}return!isES6ClassFn(value)}:function(value){if(value===documentDotAll)return!0;if(!value)return!1;if("function"!=typeof value&&"object"!=typeof value)return!1;if("function"==typeof value&&!value.prototype)return!0;if(hasToStringTag)return function(value){try{return!isES6ClassFn(value)&&(fnToStr.call(value),!0)}catch(e){return!1}}(value);if(isES6ClassFn(value))return!1;var strClass=toStr.call(value);return"[object Function]"===strClass||"[object GeneratorFunction]"===strClass}},function(module,exports,__webpack_require__){"use strict";var has=__webpack_require__(81),assertRecord=__webpack_require__(189),Type=__webpack_require__(83);module.exports=function(Desc){return void 0!==Desc&&(assertRecord(Type,"Property Descriptor","Desc",Desc),!(!has(Desc,"[[Value]]")&&!has(Desc,"[[Writable]]")))}},function(module,exports,__webpack_require__){"use strict";var $Object=__webpack_require__(48)("%Object%"),isPrimitive=__webpack_require__(350),$preventExtensions=$Object.preventExtensions,$isExtensible=$Object.isExtensible;module.exports=$preventExtensions?function(obj){return!isPrimitive(obj)&&$isExtensible(obj)}:function(obj){return!isPrimitive(obj)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(value){return null===value||"function"!=typeof value&&"object"!=typeof value}},function(module,exports,__webpack_require__){"use strict";var $isNaN=__webpack_require__(352);module.exports=function(x,y){return x===y?0!==x||1/x==1/y:$isNaN(x)&&$isNaN(y)}},function(module,exports,__webpack_require__){"use strict";module.exports=Number.isNaN||function(a){return a!=a}},function(module,exports,__webpack_require__){"use strict";var $TypeError=__webpack_require__(48)("%TypeError%");module.exports=function(value,optMessage){if(null==value)throw new $TypeError(optMessage||"Cannot call method on "+value);return value}},function(module,exports,__webpack_require__){"use strict";var $Object=__webpack_require__(48)("%Object%"),RequireObjectCoercible=__webpack_require__(193);module.exports=function(value){return RequireObjectCoercible(value),$Object(value)}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(82)},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(194),define=__webpack_require__(139);module.exports=function(){var polyfill=getPolyfill();return define(Object,{getOwnPropertyDescriptors:polyfill},{getOwnPropertyDescriptors:function(){return Object.getOwnPropertyDescriptors!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var util=__webpack_require__(98),getPolyfill=__webpack_require__(195);module.exports=function(){var polyfill=getPolyfill();return polyfill!==util.promisify&&(util.promisify=polyfill,Object.defineProperty(util,"promisify",{value:polyfill})),polyfill}},function(module,exports){module.exports=parse,module.exports.parse=parse,module.exports.stringify=function stringify(gj){"Feature"===gj.type&&(gj=gj.geometry);function pairWKT(c){return c.join(" ")}function ringWKT(r){return r.map(pairWKT).join(", ")}function ringsWKT(r){return r.map(ringWKT).map(wrapParens).join(", ")}function wrapParens(s){return"("+s+")"}switch(gj.type){case"Point":return"POINT ("+pairWKT(gj.coordinates)+")";case"LineString":return"LINESTRING ("+ringWKT(gj.coordinates)+")";case"Polygon":return"POLYGON ("+ringsWKT(gj.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+ringWKT(gj.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+(gj.coordinates.map(ringsWKT).map(wrapParens).join(", ")+")");case"MultiLineString":return"MULTILINESTRING ("+ringsWKT(gj.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+gj.geometries.map(stringify).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}};var numberRegexp=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,tuples=new RegExp("^"+numberRegexp.source+"(\\s"+numberRegexp.source+"){1,}");function parse(input){var obj,parts=input.split(";"),_=parts.pop(),srid=(parts.shift()||"").split("=").pop(),i=0;function $(re){var match=_.substring(i).match(re);return match?(i+=match[0].length,match[0]):null}function white(){$(/^\s*/)}function multicoords(){white();for(var elem,depth=0,rings=[],stack=[rings],pointer=rings;elem=$(/^(\()/)||$(/^(\))/)||$(/^(,)/)||$(tuples);){if("("===elem)stack.push(pointer),pointer=[],stack[stack.length-1].push(pointer),depth++;else if(")"===elem){if(0===pointer.length)return null;if(!(pointer=stack.pop()))return null;if(0===--depth)break}else if(","===elem)pointer=[],stack[stack.length-1].push(pointer);else{if(elem.split(/\s/g).some(isNaN))return null;Array.prototype.push.apply(pointer,elem.split(/\s/g).map(parseFloat))}white()}return 0!==depth?null:rings}function coords(){for(var item,pt,list=[];pt=$(tuples)||$(/^(,)/);)","===pt?(list.push(item),item=[]):pt.split(/\s/g).some(isNaN)||(item||(item=[]),Array.prototype.push.apply(item,pt.split(/\s/g).map(parseFloat))),white();return item?(list.push(item),list.length?list:null):null}function root(){return function(){if(!$(/^(point(\sz)?)/i))return null;if(white(),!$(/^(\()/))return null;var c=coords();return c?(white(),$(/^(\))/)?{type:"Point",coordinates:c[0]}:null):null}()||function(){if(!$(/^(linestring(\sz)?)/i))return null;if(white(),!$(/^(\()/))return null;var c=coords();return c&&$(/^(\))/)?{type:"LineString",coordinates:c}:null}()||function(){if(!$(/^(polygon(\sz)?)/i))return null;white();var c=multicoords();return c?{type:"Polygon",coordinates:c}:null}()||function(){if(!$(/^(multipoint)/i))return null;white();var newCoordsFormat=_.substring(_.indexOf("(")+1,_.length-1).replace(/\(/g,"").replace(/\)/g,"");_="MULTIPOINT ("+newCoordsFormat+")";var c=multicoords();return c?(white(),{type:"MultiPoint",coordinates:c}):null}()||function(){if(!$(/^(multilinestring)/i))return null;white();var c=multicoords();return c?(white(),{type:"MultiLineString",coordinates:c}):null}()||function(){if(!$(/^(multipolygon)/i))return null;white();var c=multicoords();return c?{type:"MultiPolygon",coordinates:c}:null}()||function(){var geometry,geometries=[];if(!$(/^(geometrycollection)/i))return null;if(white(),!$(/^(\()/))return null;for(;geometry=root();)geometries.push(geometry),white(),$(/^(,)/),white();return $(/^(\))/)?{type:"GeometryCollection",geometries:geometries}:null}()}return(obj=root())&&srid.match(/\d+/)&&(obj.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+srid}}),obj}},function(module,exports,__webpack_require__){var v1=__webpack_require__(360),v4=__webpack_require__(11),uuid=v4;uuid.v1=v1,uuid.v4=v4,module.exports=uuid},function(module,exports,__webpack_require__){var _nodeId,_clockseq,rng=__webpack_require__(18),bytesToUuid=__webpack_require__(19),_lastMSecs=0,_lastNSecs=0;module.exports=function(options,buf,offset){var i=buf&&offset||0,b=buf||[],node=(options=options||{}).node||_nodeId,clockseq=void 0!==options.clockseq?options.clockseq:_clockseq;if(null==node||null==clockseq){var seedBytes=rng();null==node&&(node=_nodeId=[1|seedBytes[0],seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]]),null==clockseq&&(clockseq=_clockseq=16383&(seedBytes[6]<<8|seedBytes[7]))}var msecs=void 0!==options.msecs?options.msecs:(new Date).getTime(),nsecs=void 0!==options.nsecs?options.nsecs:_lastNSecs+1,dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&void 0===options.clockseq&&(clockseq=clockseq+1&16383),(dt<0||msecs>_lastMSecs)&&void 0===options.nsecs&&(nsecs=0),nsecs>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=msecs,_lastNSecs=nsecs,_clockseq=clockseq;var tl=(1e4*(268435455&(msecs+=122192928e5))+nsecs)%4294967296;b[i++]=tl>>>24&255,b[i++]=tl>>>16&255,b[i++]=tl>>>8&255,b[i++]=255&tl;var tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255,b[i++]=255&tmh,b[i++]=tmh>>>24&15|16,b[i++]=tmh>>>16&255,b[i++]=clockseq>>>8|128,b[i++]=255&clockseq;for(var n=0;n<6;++n)b[i+n]=node[n];return buf||bytesToUuid(b)}},function(module,exports,__webpack_require__){module.exports=function(){"use strict";function t(t,e){return t(e={exports:{}},e.exports),e.exports}var e=t((function(t){function e(t){return!i(t)}function i(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,i=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(i);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var i=e.getImageData(0,0,1,1);return i&&i.width===t.width}()?(void 0===r[i=t&&t.failIfMajorPerformanceCaveat]&&(r[i]=function(t){var i=function(t){var i=document.createElement("canvas"),r=Object.create(e.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,i.probablySupportsContext?i.probablySupportsContext("webgl",r)||i.probablySupportsContext("experimental-webgl",r):i.supportsContext?i.supportsContext("webgl",r)||i.supportsContext("experimental-webgl",r):i.getContext("webgl",r)||i.getContext("experimental-webgl",r)}(t);if(!i)return!1;var r=i.createShader(i.VERTEX_SHADER);return!(!r||i.isContextLost())&&(i.shaderSource(r,"void main() {}"),i.compileShader(r),!0===i.getShaderParameter(r,i.COMPILE_STATUS))}(i)),r[i]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var i}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e,window.mapboxgl.notSupportedReason=i);var r={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),i=r;function r(t,e,i,r){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=i,this.p2y=r}r.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},r.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},r.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},r.prototype.solveCurveX=function(t,e){var i,r,n,o,a;for(void 0===e&&(e=1e-6),n=t,a=0;a<8;a++){if(o=this.sampleCurveX(n)-t,Math.abs(o)<e)return n;var s=this.sampleCurveDerivativeX(n);if(Math.abs(s)<1e-6)break;n-=o/s}if((n=t)<(i=0))return i;if(n>(r=1))return r;for(;i<r;){if(o=this.sampleCurveX(n),Math.abs(o-t)<e)return n;t>o?i=n:r=n,n=.5*(r-i)+i}return n},r.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var n=o;function o(t,e){this.x=t,this.y=e}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),r=i*this.x+e*this.y;return this.x=e*this.x-i*this.y,this.y=r,this},_rotateAround:function(t,e){var i=Math.cos(t),r=Math.sin(t),n=e.y+r*(this.x-e.x)+i*(this.y-e.y);return this.x=e.x+i*(this.x-e.x)-r*(this.y-e.y),this.y=n,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t};var a="undefined"!=typeof self?self:{};function s(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!s(t[i],e[i]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var r in t)if(!s(t[r],e[r]))return!1;return!0}return t===e}var u=Math.pow(2,53)-1;function l(t,e,r,n){var o=new i(t,e,r,n);return function(t){return o.solve(t)}}var c=l(.25,.1,.25,1);function p(t,e,i){return Math.min(i,Math.max(e,t))}function h(t,e,i){var r=i-e,n=((t-e)%r+r)%r+e;return n===e?i:n}function f(t,e,i){if(!t.length)return i(null,[]);var r=t.length,n=new Array(t.length),o=null;t.forEach((function(t,a){e(t,(function(t,e){t&&(o=t),n[a]=e,0==--r&&i(o,n)}))}))}function d(t){var e=[];for(var i in t)e.push(t[i]);return e}function m(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var r=0,n=e;r<n.length;r+=1){var o=n[r];for(var a in o)t[a]=o[a]}return t}function y(t,e){for(var i={},r=0;r<e.length;r++){var n=e[r];n in t&&(i[n]=t[n])}return i}var _=1;function g(){return _++}function v(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function x(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function b(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))}function w(t,e){return-1!==t.indexOf(e,t.length-e.length)}function I(t,e,i){var r={};for(var n in t)r[n]=e.call(i||this,t[n],n,t);return r}function S(t,e,i){var r={};for(var n in t)e.call(i||this,t[n],n,t)&&(r[n]=t[n]);return r}function T(t){return Array.isArray(t)?t.map(T):"object"==typeof t&&t?I(t,T):t}var A={};function z(t){A[t]||("undefined"!=typeof console&&console.warn(t),A[t]=!0)}function E(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}function k(t){for(var e=0,i=0,r=t.length,n=r-1,o=void 0,a=void 0;i<r;n=i++)e+=((a=t[n]).x-(o=t[i]).x)*(o.y+a.y);return e}function C(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function P(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(t,i,r,n){var o=r||n;return e[i]=!o||o.toLowerCase(),""})),e["max-age"]){var i=parseInt(e["max-age"],10);isNaN(i)?delete e["max-age"]:e["max-age"]=i}return e}var D=null;function M(t){if(null==D){var e=t.navigator?t.navigator.userAgent:null;D=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return D}function L(t){try{var e=a[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var B,R,F=a.performance&&a.performance.now?a.performance.now.bind(a.performance):Date.now.bind(Date),O=a.requestAnimationFrame||a.mozRequestAnimationFrame||a.webkitRequestAnimationFrame||a.msRequestAnimationFrame,V=a.cancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelAnimationFrame||a.msCancelAnimationFrame,U={now:F,frame:function(t){var e=O(t);return{cancel:function(){return V(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var i=a.document.createElement("canvas"),r=i.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return i.width=t.width,i.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return B||(B=a.document.createElement("a")),B.href=t,B.href},hardwareConcurrency:a.navigator&&a.navigator.hardwareConcurrency||4,get devicePixelRatio(){return a.devicePixelRatio},get prefersReducedMotion(){return!!a.matchMedia&&(null==R&&(R=a.matchMedia("(prefers-reduced-motion: reduce)")),R.matches)}},j={create:function(t,e,i){var r=a.document.createElement(t);return void 0!==e&&(r.className=e),i&&i.appendChild(r),r},createNS:function(t,e){return a.document.createElementNS(t,e)}},N=a.document&&a.document.documentElement.style;function q(t){if(!N)return t[0];for(var e=0;e<t.length;e++)if(t[e]in N)return t[e];return t[0]}var Z,G=q(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);j.disableDrag=function(){N&&G&&(Z=N[G],N[G]="none")},j.enableDrag=function(){N&&G&&(N[G]=Z)};var X=q(["transform","WebkitTransform"]);j.setTransform=function(t,e){t.style[X]=e};var W=!1;try{var H=Object.defineProperty({},"passive",{get:function(){W=!0}});a.addEventListener("test",H,H),a.removeEventListener("test",H,H)}catch(t){W=!1}j.addEventListener=function(t,e,i,r){void 0===r&&(r={}),t.addEventListener(e,i,"passive"in r&&W?r:r.capture)},j.removeEventListener=function(t,e,i,r){void 0===r&&(r={}),t.removeEventListener(e,i,"passive"in r&&W?r:r.capture)};var K=function(t){t.preventDefault(),t.stopPropagation(),a.removeEventListener("click",K,!0)};j.suppressClick=function(){a.addEventListener("click",K,!0),a.setTimeout((function(){a.removeEventListener("click",K,!0)}),0)},j.mousePos=function(t,e){var i=t.getBoundingClientRect();return new n(e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop)},j.touchPos=function(t,e){for(var i=t.getBoundingClientRect(),r=[],o=0;o<e.length;o++)r.push(new n(e[o].clientX-i.left-t.clientLeft,e[o].clientY-i.top-t.clientTop));return r},j.mouseButton=function(t){return void 0!==a.InstallTrigger&&2===t.button&&t.ctrlKey&&a.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button},j.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var Y,J,Q={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},$={supported:!1,testSupport:function(t){!tt&&J&&(et?it(t):Y=t)}},tt=!1,et=!1;function it(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,J),t.isContextLost())return;$.supported=!0}catch(t){}t.deleteTexture(e),tt=!0}a.document&&((J=a.document.createElement("img")).onload=function(){Y&&it(Y),Y=null,et=!0},J.onerror=function(){tt=!0,Y=null},J.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var rt="01",nt=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function ot(t){return 0===t.indexOf("mapbox:")}nt.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",rt,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},nt.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},nt.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},nt.prototype.normalizeStyleURL=function(t,e){if(!ot(t))return t;var i=lt(t);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||e)},nt.prototype.normalizeGlyphsURL=function(t,e){if(!ot(t))return t;var i=lt(t);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||e)},nt.prototype.normalizeSourceURL=function(t,e){if(!ot(t))return t;var i=lt(t);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||e)},nt.prototype.normalizeSpriteURL=function(t,e,i,r){var n=lt(t);return ot(t)?(n.path="/styles/v1"+n.path+"/sprite"+e+i,this._makeAPIURL(n,this._customAccessToken||r)):(n.path+=""+e+i,ct(n))},nt.prototype.normalizeTileURL=function(t,e){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!ot(t))return t;var i=lt(t);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(U.devicePixelRatio>=2||512===e?"@2x":"")+($.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var r=this._customAccessToken||function(t){for(var e=0,i=t;e<i.length;e+=1){var r=i[e].match(/^access_token=(.*)$/);if(r)return r[1]}return null}(i.params)||Q.ACCESS_TOKEN;return Q.REQUIRE_ACCESS_TOKEN&&r&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,r)},nt.prototype.canonicalizeTileURL=function(t,e){var i=lt(t);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return t;var r="mapbox://tiles/";r+=i.path.replace("/v4/","");var n=i.params;return e&&(n=n.filter((function(t){return!t.match(/^access_token=/)}))),n.length&&(r+="?"+n.join("&")),r},nt.prototype.canonicalizeTileset=function(t,e){for(var i=!!e&&ot(e),r=[],n=0,o=t.tiles||[];n<o.length;n+=1){var a=o[n];st(a)?r.push(this.canonicalizeTileURL(a,i)):r.push(a)}return r},nt.prototype._makeAPIURL=function(t,e){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",r=lt(Q.API_URL);if(t.protocol=r.protocol,t.authority=r.authority,"http"===t.protocol){var n=t.params.indexOf("secure");n>=0&&t.params.splice(n,1)}if("/"!==r.path&&(t.path=""+r.path+t.path),!Q.REQUIRE_ACCESS_TOKEN)return ct(t);if(!(e=e||Q.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return t.params=t.params.filter((function(t){return-1===t.indexOf("access_token")})),t.params.push("access_token="+e),ct(t)};var at=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function st(t){return at.test(t)}var ut=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function lt(t){var e=t.match(ut);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function ct(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function pt(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(a.atob(e[1]).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(t){return null}}var ht=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};ht.prototype.getStorageKey=function(t){var e,i=pt(Q.ACCESS_TOKEN);return e=i&&i.u?a.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))}))):Q.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+e:"mapbox.eventData:"+e},ht.prototype.fetchEventData=function(){var t=L("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{var r=a.localStorage.getItem(e);r&&(this.eventData=JSON.parse(r));var n=a.localStorage.getItem(i);n&&(this.anonId=n)}catch(t){z("Unable to read from LocalStorage")}},ht.prototype.saveEventData=function(){var t=L("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{a.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&a.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){z("Unable to write to LocalStorage")}},ht.prototype.processRequests=function(t){},ht.prototype.postEvent=function(t,e,i,r){var n=this;if(Q.EVENTS_URL){var o=lt(Q.EVENTS_URL);o.params.push("access_token="+(r||Q.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.1",skuId:rt,userId:this.anonId},s=e?m(a,e):a,u={url:ct(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=Rt(u,(function(t){n.pendingRequest=null,i(t),n.saveEventData(),n.processRequests(r)}))}},ht.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var ft,dt,mt=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(t,e,i,r){this.skuToken=i,(Q.EVENTS_URL&&r||Q.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return ot(t)||st(t)})))&&this.queueRequest({id:e,timestamp:Date.now()},r)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var i=this.queue.shift(),r=i.id,n=i.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),x(this.anonId)||(this.anonId=v()),this.postEvent(n,{skuToken:this.skuToken},(function(t){t||r&&(e.success[r]=!0)}),t))}},e}(ht),yt=new(function(t){function e(e){t.call(this,"appUserTurnstile"),this._customAccessToken=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(t,e){Q.EVENTS_URL&&Q.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return ot(t)||st(t)}))&&this.queueRequest(Date.now(),e)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var i=pt(Q.ACCESS_TOKEN),r=i?i.u:Q.ACCESS_TOKEN,n=r!==this.eventData.tokenU;x(this.anonId)||(this.anonId=v(),n=!0);var o=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),s=new Date(o),u=(o-this.eventData.lastSuccess)/864e5;n=n||u>=1||u<-1||a.getDate()!==s.getDate()}else n=!0;if(!n)return this.processRequests();this.postEvent(o,{"enabled.telemetry":!1},(function(t){t||(e.eventData.lastSuccess=o,e.eventData.tokenU=r)}),t)}},e}(ht)),_t=yt.postTurnstileEvent.bind(yt),gt=new mt,vt=gt.postMapLoadEvent.bind(gt),xt=500,bt=50;function wt(){a.caches&&!ft&&(ft=a.caches.open("mapbox-tiles"))}function It(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var St,Tt=1/0;function At(t){++Tt>bt&&(t.getActor().send("enforceCacheSizeLimit",xt),Tt=0)}function zt(){return null==St&&(St=a.OffscreenCanvas&&new a.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof a.createImageBitmap),St}var Et={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Et);var Pt,Dt,kt=function(t){function e(e,i,r){401===i&&st(r)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=i,this.url=r,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),Ct=C()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===a.location.protocol?a.parent:a).location.href},Mt=function(t,e){if(!(/^file:/.test(i=t.url)||/^file:/.test(Ct())&&!/^\w+:/.test(i))){if(a.fetch&&a.Request&&a.AbortController&&a.Request.prototype.hasOwnProperty("signal"))return function(t,e){var i,r=new a.AbortController,n=new a.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:Ct(),signal:r.signal}),o=!1,s=!1,u=(i=n.url).indexOf("sku=")>0&&st(i);"json"===t.type&&n.headers.set("Accept","application/json");var l=function(i,r,o){if(!s){if(i&&"SecurityError"!==i.message&&z(i),r&&o)return c(r);var l=Date.now();a.fetch(n).then((function(i){if(i.ok){var r=u?i.clone():null;return c(i,r,l)}return e(new kt(i.statusText,i.status,t.url))})).catch((function(t){20!==t.code&&e(new Error(t.message))}))}},c=function(i,r,u){("arrayBuffer"===t.type?i.arrayBuffer():"json"===t.type?i.json():i.text()).then((function(t){s||(r&&u&&function(t,e,i){if(wt(),ft){var r={status:e.status,statusText:e.statusText,headers:new a.Headers};e.headers.forEach((function(t,e){return r.headers.set(e,t)}));var n=P(e.headers.get("Cache-Control")||"");n["no-store"]||(n["max-age"]&&r.headers.set("Expires",new Date(i+1e3*n["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-i<42e4||function(t,e){if(void 0===dt)try{new Response(new ReadableStream),dt=!0}catch(t){dt=!1}dt?e(t.body):t.blob().then(e)}(e,(function(e){var i=new a.Response(e,r);wt(),ft&&ft.then((function(e){return e.put(It(t.url),i)})).catch((function(t){return z(t.message)}))})))}}(n,r,u),o=!0,e(null,t,i.headers.get("Cache-Control"),i.headers.get("Expires")))})).catch((function(t){s||e(new Error(t.message))}))};return u?function(t,e){if(wt(),!ft)return e(null);var i=It(t.url);ft.then((function(t){t.match(i).then((function(r){var n=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),i=P(t.headers.get("Cache-Control")||"");return e>Date.now()&&!i["no-cache"]}(r);t.delete(i),n&&t.put(i,r.clone()),e(null,r,n)})).catch(e)})).catch(e)}(n,l):l(null,null),{cancel:function(){s=!0,o||r.abort()}}}(t,e);if(C()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var i;return function(t,e){var i=new a.XMLHttpRequest;for(var r in i.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(i.responseType="arraybuffer"),t.headers)i.setRequestHeader(r,t.headers[r]);return"json"===t.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===t.credentials,i.onerror=function(){e(new Error(i.statusText))},i.onload=function(){if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){var r=i.response;if("json"===t.type)try{r=JSON.parse(i.response)}catch(t){return e(t)}e(null,r,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else e(new kt(i.statusText,i.status,t.url))},i.send(t.body),{cancel:function(){return i.abort()}}}(t,e)},Lt=function(t,e){return Mt(m(t,{type:"json"}),e)},Bt=function(t,e){return Mt(m(t,{type:"arrayBuffer"}),e)},Rt=function(t,e){return Mt(m(t,{method:"POST"}),e)},Ft="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Pt=[],Dt=0;var Ot=function(t,e){if($.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),Dt>=Q.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return Pt.push(i),i}Dt++;var r=!1,n=function(){if(!r)for(r=!0,Dt--;Pt.length&&Dt<Q.MAX_PARALLEL_IMAGE_REQUESTS;){var t=Pt.shift();t.cancelled||(t.cancel=Ot(t.requestParameters,t.callback).cancel)}},o=Bt(t,(function(t,i,r,o){n(),t?e(t):i&&(zt()?function(t,e){var i=new a.Blob([new Uint8Array(t)],{type:"image/png"});a.createImageBitmap(i).then((function(t){e(null,t)})).catch((function(t){e(new Error("Could not load image because of "+t.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))}(i,e):function(t,e,i,r){var n=new a.Image,o=a.URL;n.onload=function(){e(null,n),o.revokeObjectURL(n.src),n.onload=null,a.requestAnimationFrame((function(){n.src=Ft}))},n.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var s=new a.Blob([new Uint8Array(t)],{type:"image/png"});n.cacheControl=i,n.expires=r,n.src=t.byteLength?o.createObjectURL(s):Ft}(i,e,r,o))}));return{cancel:function(){o.cancel(),n()}}};function Vt(t,e,i){i[t]&&-1!==i[t].indexOf(e)||(i[t]=i[t]||[],i[t].push(e))}function Ut(t,e,i){if(i&&i[t]){var r=i[t].indexOf(e);-1!==r&&i[t].splice(r,1)}}var jt=function(t,e){void 0===e&&(e={}),m(this,e),this.type=t},Nt=function(t){function e(e,i){void 0===i&&(i={}),t.call(this,"error",m({error:e},i))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(jt),qt=function(){};qt.prototype.on=function(t,e){return this._listeners=this._listeners||{},Vt(t,e,this._listeners),this},qt.prototype.off=function(t,e){return Ut(t,e,this._listeners),Ut(t,e,this._oneTimeListeners),this},qt.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},Vt(t,e,this._oneTimeListeners),this},qt.prototype.fire=function(t,e){"string"==typeof t&&(t=new jt(t,e||{}));var i=t.type;if(this.listens(i)){t.target=this;for(var r=0,n=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];r<n.length;r+=1)n[r].call(this,t);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];o<a.length;o+=1){var s=a[o];Ut(i,s,this._oneTimeListeners),s.call(this,t)}var u=this._eventedParent;u&&(m(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),u.fire(t))}else t instanceof Nt&&console.error(t.error);return this},qt.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},qt.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var Zt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Gt=function(t,e,i,r){this.message=(t?t+": ":"")+i,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)};function Xt(t){var e=t.value;return e?[new Gt(t.key,e,"constants have been deprecated as of v8")]:[]}function Wt(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var r=0,n=e;r<n.length;r+=1){var o=n[r];for(var a in o)t[a]=o[a]}return t}function Ht(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Kt(t){if(Array.isArray(t))return t.map(Kt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var i in t)e[i]=Kt(t[i]);return e}return Ht(t)}var Yt=function(t){function e(e,i){t.call(this,i),this.message=i,this.key=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),Jt=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var i=0,r=e;i<r.length;i+=1){var n=r[i];this.bindings[n[0]]=n[1]}};Jt.prototype.concat=function(t){return new Jt(this,t)},Jt.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Jt.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Qt={kind:"null"},$t={kind:"number"},te={kind:"string"},ee={kind:"boolean"},ie={kind:"color"},re={kind:"object"},ne={kind:"value"},oe={kind:"collator"},ae={kind:"formatted"},se={kind:"resolvedImage"};function ue(t,e){return{kind:"array",itemType:t,N:e}}function le(t){if("array"===t.kind){var e=le(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var ce=[Qt,$t,te,ee,ie,ae,re,ue(ne),se];function pe(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!pe(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var i=0,r=ce;i<r.length;i+=1)if(!pe(r[i],e))return null}return"Expected "+le(t)+" but found "+le(e)+" instead."}function he(t,e){return e.some((function(e){return e.kind===t.kind}))}function fe(t,e){return e.some((function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t}))}var de=t((function(t,e){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(t){return(t=Math.round(t))<0?0:t>255?255:t}function n(t){return r("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function a(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}try{e.parseCSSColor=function(t){var e,s=t.replace(/ /g,"").toLowerCase();if(s in i)return i[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=s.indexOf("("),l=s.indexOf(")");if(-1!==u&&l+1===s.length){var c=s.substr(0,u),p=s.substr(u+1,l-(u+1)).split(","),h=1;switch(c){case"rgba":if(4!==p.length)return null;h=o(p.pop());case"rgb":return 3!==p.length?null:[n(p[0]),n(p[1]),n(p[2]),h];case"hsla":if(4!==p.length)return null;h=o(p.pop());case"hsl":if(3!==p.length)return null;var f=(parseFloat(p[0])%360+360)%360/360,d=o(p[1]),m=o(p[2]),y=m<=.5?m*(d+1):m+d-m*d,_=2*m-y;return[r(255*a(_,y,f+1/3)),r(255*a(_,y,f)),r(255*a(_,y,f-1/3)),h];default:return null}}return null}}catch(t){}})).parseCSSColor,me=function(t,e,i,r){void 0===r&&(r=1),this.r=t,this.g=e,this.b=i,this.a=r};me.parse=function(t){if(t){if(t instanceof me)return t;if("string"==typeof t){var e=de(t);if(e)return new me(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},me.prototype.toString=function(){var t=this.toArray(),e=t[1],i=t[2],r=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(i)+","+r+")"},me.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},me.black=new me(0,0,0,1),me.white=new me(1,1,1,1),me.transparent=new me(0,0,0,0),me.red=new me(1,0,0,1);var ye=function(t,e,i){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ye.prototype.compare=function(t,e){return this.collator.compare(t,e)},ye.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var _e=function(t,e,i,r,n){this.text=t,this.image=e,this.scale=i,this.fontStack=r,this.textColor=n},ge=function(t){this.sections=t};ge.fromString=function(t){return new ge([new _e(t,null,null,null,null)])},ge.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))},ge.factory=function(t){return t instanceof ge?t:ge.fromString(t)},ge.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")},ge.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var r=i[e];if(r.image)t.push(["image",r.image.name]);else{t.push(r.text);var n={};r.fontStack&&(n["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(n["font-scale"]=r.scale),r.textColor&&(n["text-color"]=["rgba"].concat(r.textColor.toArray())),t.push(n)}}return t};var ve=function(t){this.name=t.name,this.available=t.available};function xe(t,e,i,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[t,e,i,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,e,i,r]:[t,e,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function be(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof me)return!0;if(t instanceof ye)return!0;if(t instanceof ge)return!0;if(t instanceof ve)return!0;if(Array.isArray(t)){for(var e=0,i=t;e<i.length;e+=1)if(!be(i[e]))return!1;return!0}if("object"==typeof t){for(var r in t)if(!be(t[r]))return!1;return!0}return!1}function we(t){if(null===t)return Qt;if("string"==typeof t)return te;if("boolean"==typeof t)return ee;if("number"==typeof t)return $t;if(t instanceof me)return ie;if(t instanceof ye)return oe;if(t instanceof ge)return ae;if(t instanceof ve)return se;if(Array.isArray(t)){for(var e,i=t.length,r=0,n=t;r<n.length;r+=1){var o=we(n[r]);if(e){if(e===o)continue;e=ne;break}e=o}return ue(e||ne,i)}return re}function Ie(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof me||t instanceof ge||t instanceof ve?t.toString():JSON.stringify(t)}ve.prototype.toString=function(){return this.name},ve.fromString=function(t){return t?new ve({name:t,available:!1}):null},ve.prototype.serialize=function(){return["image",this.name]};var Se=function(t,e){this.type=t,this.value=e};Se.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!be(t[1]))return e.error("invalid value");var i=t[1],r=we(i),n=e.expectedType;return"array"!==r.kind||0!==r.N||!n||"array"!==n.kind||"number"==typeof n.N&&0!==n.N||(r=n),new Se(r,i)},Se.prototype.evaluate=function(){return this.value},Se.prototype.eachChild=function(){},Se.prototype.outputDefined=function(){return!0},Se.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof me?["rgba"].concat(this.value.toArray()):this.value instanceof ge?this.value.serialize():this.value};var Te=function(t){this.name="ExpressionEvaluationError",this.message=t};Te.prototype.toJSON=function(){return this.message};var Ae={string:te,number:$t,boolean:ee,object:re},ze=function(t,e){this.type=t,this.args=e};ze.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i,r=1,n=t[0];if("array"===n){var o,a;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in Ae)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=Ae[s],r++}else o=ne;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],r++}i=ue(o,a)}else i=Ae[n];for(var u=[];r<t.length;r++){var l=e.parse(t[r],r,ne);if(!l)return null;u.push(l)}return new ze(i,u)},ze.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var i=this.args[e].evaluate(t);if(!pe(this.type,we(i)))return i;if(e===this.args.length-1)throw new Te("Expected value to be of type "+le(this.type)+", but found "+le(we(i))+" instead.")}return null},ze.prototype.eachChild=function(t){this.args.forEach(t)},ze.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},ze.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var i=t.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){e.push(i.kind);var r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map((function(t){return t.serialize()})))};var Ee=function(t){this.type=ae,this.sections=t};Ee.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");for(var r=[],n=!1,o=1;o<=t.length-1;++o){var a=t[o];if(n&&"object"==typeof a&&!Array.isArray(a)){n=!1;var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,$t)))return null;var u=null;if(a["text-font"]&&!(u=e.parse(a["text-font"],1,ue(te))))return null;var l=null;if(a["text-color"]&&!(l=e.parse(a["text-color"],1,ie)))return null;var c=r[r.length-1];c.scale=s,c.font=u,c.textColor=l}else{var p=e.parse(t[o],1,ne);if(!p)return null;var h=p.type.kind;if("string"!==h&&"value"!==h&&"null"!==h&&"resolvedImage"!==h)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");n=!0,r.push({content:p,scale:null,font:null,textColor:null})}}return new Ee(r)},Ee.prototype.evaluate=function(t){return new ge(this.sections.map((function(e){var i=e.content.evaluate(t);return we(i)===se?new _e("",i,null,null,null):new _e(Ie(i),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))},Ee.prototype.eachChild=function(t){for(var e=0,i=this.sections;e<i.length;e+=1){var r=i[e];t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}},Ee.prototype.outputDefined=function(){return!1},Ee.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var r=i[e];t.push(r.content.serialize());var n={};r.scale&&(n["font-scale"]=r.scale.serialize()),r.font&&(n["text-font"]=r.font.serialize()),r.textColor&&(n["text-color"]=r.textColor.serialize()),t.push(n)}return t};var ke=function(t){this.type=se,this.input=t};ke.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,te);return i?new ke(i):e.error("No image name provided.")},ke.prototype.evaluate=function(t){var e=this.input.evaluate(t),i=ve.fromString(e);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(e)>-1),i},ke.prototype.eachChild=function(t){t(this.input)},ke.prototype.outputDefined=function(){return!1},ke.prototype.serialize=function(){return["image",this.input.serialize()]};var Ce={"to-boolean":ee,"to-color":ie,"to-number":$t,"to-string":te},Pe=function(t,e){this.type=t,this.args=e};Pe.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[0];if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");for(var r=Ce[i],n=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,ne);if(!a)return null;n.push(a)}return new Pe(r,n)},Pe.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,i,r=0,n=this.args;r<n.length;r+=1){if(i=null,(e=n[r].evaluate(t))instanceof me)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(i=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":xe(e[0],e[1],e[2],e[3])))return new me(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Te(i||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var a=null,s=0,u=this.args;s<u.length;s+=1){if(null===(a=u[s].evaluate(t)))return 0;var l=Number(a);if(!isNaN(l))return l}throw new Te("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?ge.fromString(Ie(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?ve.fromString(Ie(this.args[0].evaluate(t))):Ie(this.args[0].evaluate(t))},Pe.prototype.eachChild=function(t){this.args.forEach(t)},Pe.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},Pe.prototype.serialize=function(){if("formatted"===this.type.kind)return new Ee([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ke(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild((function(e){t.push(e.serialize())})),t};var De=["Unknown","Point","LineString","Polygon"],Me=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Me.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Me.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?De[this.feature.type]:this.feature.type:null},Me.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Me.prototype.canonicalID=function(){return this.canonical},Me.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Me.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=me.parse(t)),e};var Le=function(t,e,i,r){this.name=t,this.type=e,this._evaluate=i,this.args=r};Le.prototype.evaluate=function(t){return this._evaluate(t,this.args)},Le.prototype.eachChild=function(t){this.args.forEach(t)},Le.prototype.outputDefined=function(){return!1},Le.prototype.serialize=function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))},Le.parse=function(t,e){var i,r=t[0],n=Le.definitions[r];if(!n)return e.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(n)?n[0]:n.type,a=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,s=a.filter((function(e){var i=e[0];return!Array.isArray(i)||i.length===t.length-1})),u=null,l=0,c=s;l<c.length;l+=1){var p=c[l],h=p[0],f=p[1];u=new ii(e.registry,e.path,null,e.scope);for(var d=[],m=!1,y=1;y<t.length;y++){var _=t[y],g=Array.isArray(h)?h[y-1]:h.type,v=u.parse(_,1+d.length,g);if(!v){m=!0;break}d.push(v)}if(!m)if(Array.isArray(h)&&h.length!==d.length)u.error("Expected "+h.length+" arguments, but found "+d.length+" instead.");else{for(var x=0;x<d.length;x++){var b=Array.isArray(h)?h[x]:h.type,w=d[x];u.concat(x+1).checkSubtype(b,w.type)}if(0===u.errors.length)return new Le(r,o,f,d)}}if(1===s.length)(i=e.errors).push.apply(i,u.errors);else{for(var I=(s.length?s:a).map((function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(le).join(", ")+")":"("+le(e.type)+"...)"})).join(" | "),S=[],T=1;T<t.length;T++){var A=e.parse(t[T],1+S.length);if(!A)return null;S.push(le(A.type))}e.error("Expected arguments of type "+I+", but found ("+S.join(", ")+") instead.")}return null},Le.register=function(t,e){for(var i in Le.definitions=e,e)t[i]=Le};var Be=function(t,e,i){this.type=oe,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e};function Re(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Fe(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Oe(t,e){var i=(180+t[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,n=Math.pow(2,e.z);return[Math.round(i*n*8192),Math.round(r*n*8192)]}function Ve(t,e,i){return e[1]>t[1]!=i[1]>t[1]&&t[0]<(i[0]-e[0])*(t[1]-e[1])/(i[1]-e[1])+e[0]}function Ue(t,e){for(var i,r,n,o,a,s,u,l=!1,c=0,p=e.length;c<p;c++)for(var h=e[c],f=0,d=h.length;f<d-1;f++){if((o=(i=t)[0]-(r=h[f])[0])*(u=i[1]-(n=h[f+1])[1])-(s=i[0]-n[0])*(a=i[1]-r[1])==0&&o*s<=0&&a*u<=0)return!1;Ve(t,h[f],h[f+1])&&(l=!l)}return l}function je(t,e){for(var i=0;i<e.length;i++)if(Ue(t,e[i]))return!0;return!1}function Ne(t,e,i,r){var n=r[0]-i[0],o=r[1]-i[1],a=(t[0]-i[0])*o-n*(t[1]-i[1]),s=(e[0]-i[0])*o-n*(e[1]-i[1]);return a>0&&s<0||a<0&&s>0}function qe(t,e,i){for(var r=0,n=i;r<n.length;r+=1)for(var o=n[r],a=0;a<o.length-1;++a)if(0!=(p=[(c=o[a+1])[0]-(l=o[a])[0],c[1]-l[1]])[0]*(h=[(u=e)[0]-(s=t)[0],u[1]-s[1]])[1]-p[1]*h[0]&&Ne(s,u,l,c)&&Ne(l,c,s,u))return!0;var s,u,l,c,p,h;return!1}function Ze(t,e){for(var i=0;i<t.length;++i)if(!Ue(t[i],e))return!1;for(var r=0;r<t.length-1;++r)if(qe(t[r],t[r+1],e))return!1;return!0}function Ge(t,e){for(var i=0;i<e.length;i++)if(Ze(t,e[i]))return!0;return!1}function Xe(t,e,i){for(var r=[],n=0;n<t.length;n++){for(var o=[],a=0;a<t[n].length;a++){var s=Oe(t[n][a],i);Re(e,s),o.push(s)}r.push(o)}return r}function We(t,e,i){for(var r=[],n=0;n<t.length;n++){var o=Xe(t[n],e,i);r.push(o)}return r}function He(t,e,i,r){if(t[0]<i[0]||t[0]>i[2]){var n=.5*r,o=t[0]-i[0]>n?-r:i[0]-t[0]>n?r:0;0===o&&(o=t[0]-i[2]>n?-r:i[2]-t[0]>n?r:0),t[0]+=o}Re(e,t)}function Ke(t,e,i,r){for(var n=8192*Math.pow(2,r.z),o=[8192*r.x,8192*r.y],a=[],s=0,u=t;s<u.length;s+=1)for(var l=0,c=u[s];l<c.length;l+=1){var p=c[l],h=[p.x+o[0],p.y+o[1]];He(h,e,i,n),a.push(h)}return a}function Ye(t,e,i,r){for(var n,o=8192*Math.pow(2,r.z),a=[8192*r.x,8192*r.y],s=[],u=0,l=t;u<l.length;u+=1){for(var c=[],p=0,h=l[u];p<h.length;p+=1){var f=h[p],d=[f.x+a[0],f.y+a[1]];Re(e,d),c.push(d)}s.push(c)}if(e[2]-e[0]<=o/2){(n=e)[0]=n[1]=1/0,n[2]=n[3]=-1/0;for(var m=0,y=s;m<y.length;m+=1)for(var _=0,g=y[m];_<g.length;_+=1)He(g[_],e,i,o)}return s}Be.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");var r=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,ee);if(!r)return null;var n=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,ee);if(!n)return null;var o=null;return i.locale&&!(o=e.parse(i.locale,1,te))?null:new Be(r,n,o)},Be.prototype.evaluate=function(t){return new ye(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},Be.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},Be.prototype.outputDefined=function(){return!1},Be.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Je=function(t,e){this.type=ee,this.geojson=t,this.geometries=e};function Qe(t){if(t instanceof Le){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Je)return!1;var e=!0;return t.eachChild((function(t){e&&!Qe(t)&&(e=!1)})),e}function $e(t){if(t instanceof Le&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!$e(t)&&(e=!1)})),e}function ti(t,e){if(t instanceof Le&&e.indexOf(t.name)>=0)return!1;var i=!0;return t.eachChild((function(t){i&&!ti(t,e)&&(i=!1)})),i}Je.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(be(t[1])){var i=t[1];if("FeatureCollection"===i.type)for(var r=0;r<i.features.length;++r){var n=i.features[r].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new Je(i,i.features[r].geometry)}else if("Feature"===i.type){var o=i.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new Je(i,i.geometry)}else if("Polygon"===i.type||"MultiPolygon"===i.type)return new Je(i,i)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Je.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=t.canonicalID();if("Polygon"===e.type){var o=Xe(e.coordinates,r,n),a=Ke(t.geometry(),i,r,n);if(!Fe(i,r))return!1;for(var s=0,u=a;s<u.length;s+=1)if(!Ue(u[s],o))return!1}if("MultiPolygon"===e.type){var l=We(e.coordinates,r,n),c=Ke(t.geometry(),i,r,n);if(!Fe(i,r))return!1;for(var p=0,h=c;p<h.length;p+=1)if(!je(h[p],l))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=t.canonicalID();if("Polygon"===e.type){var o=Xe(e.coordinates,r,n),a=Ye(t.geometry(),i,r,n);if(!Fe(i,r))return!1;for(var s=0,u=a;s<u.length;s+=1)if(!Ze(u[s],o))return!1}if("MultiPolygon"===e.type){var l=We(e.coordinates,r,n),c=Ye(t.geometry(),i,r,n);if(!Fe(i,r))return!1;for(var p=0,h=c;p<h.length;p+=1)if(!Ge(h[p],l))return!1}return!0}(t,this.geometries)}return!1},Je.prototype.eachChild=function(){},Je.prototype.outputDefined=function(){return!0},Je.prototype.serialize=function(){return["within",this.geojson]};var ei=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};ei.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var i=t[1];return e.scope.has(i)?new ei(i,e.scope.get(i)):e.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},ei.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},ei.prototype.eachChild=function(){},ei.prototype.outputDefined=function(){return!1},ei.prototype.serialize=function(){return["var",this.name]};var ii=function(t,e,i,r,n){void 0===e&&(e=[]),void 0===r&&(r=new Jt),void 0===n&&(n=[]),this.registry=t,this.path=e,this.key=e.map((function(t){return"["+t+"]"})).join(""),this.scope=r,this.errors=n,this.expectedType=i};function ri(t,e){for(var i,r=t.length-1,n=0,o=r,a=0;n<=o;)if((i=t[a=Math.floor((n+o)/2)])<=e){if(a===r||e<t[a+1])return a;n=a+1}else{if(!(i>e))throw new Te("Input is not a number.");o=a-1}return 0}ii.prototype.parse=function(t,e,i,r,n){return void 0===n&&(n={}),e?this.concat(e,i,r)._parse(t,n):this._parse(t,n)},ii.prototype._parse=function(t,e){function i(t,e,i){return"assert"===i?new ze(e,[t]):"coerce"===i?new Pe(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var n=this.registry[r];if(n){var o=n.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=i(o,a,e.typeAnnotation||"coerce");else o=i(o,a,e.typeAnnotation||"assert")}if(!(o instanceof Se)&&"resolvedImage"!==o.type.kind&&function t(e){if(e instanceof ei)return t(e.boundExpression);if(e instanceof Le&&"error"===e.name)return!1;if(e instanceof Be)return!1;if(e instanceof Je)return!1;var i=e instanceof Pe||e instanceof ze,r=!0;return e.eachChild((function(e){r=i?r&&t(e):r&&e instanceof Se})),!!r&&Qe(e)&&ti(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var u=new Me;try{o=new Se(o.type,o.evaluate(u))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},ii.prototype.concat=function(t,e,i){var r="number"==typeof t?this.path.concat(t):this.path,n=i?this.scope.concat(i):this.scope;return new ii(this.registry,r,e||null,n,this.errors)},ii.prototype.error=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];var r=""+this.key+e.map((function(t){return"["+t+"]"})).join("");this.errors.push(new Yt(r,t))},ii.prototype.checkSubtype=function(t,e){var i=pe(t,e);return i&&this.error(i),i};var ni=function(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var r=0,n=i;r<n.length;r+=1){var o=n[r],a=o[1];this.labels.push(o[0]),this.outputs.push(a)}};function oi(t,e,i){return t*(1-i)+e*i}ni.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var i=e.parse(t[1],1,$t);if(!i)return null;var r=[],n=null;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var o=1;o<t.length;o+=2){var a=1===o?-1/0:t[o],s=t[o+1],u=o,l=o+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(r.length&&r[r.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var c=e.parse(s,l,n);if(!c)return null;n=n||c.type,r.push([a,c])}return new ni(n,i,r)},ni.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);var n=e.length;return r>=e[n-1]?i[n-1].evaluate(t):i[ri(e,r)].evaluate(t)},ni.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},ni.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},ni.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var ai=Object.freeze({__proto__:null,number:oi,color:function(t,e,i){return new me(oi(t.r,e.r,i),oi(t.g,e.g,i),oi(t.b,e.b,i),oi(t.a,e.a,i))},array:function(t,e,i){return t.map((function(t,r){return oi(t,e[r],i)}))}}),si=6/29*3*(6/29),ui=Math.PI/180,li=180/Math.PI;function ci(t){return t>.008856451679035631?Math.pow(t,1/3):t/si+4/29}function pi(t){return t>6/29?t*t*t:si*(t-4/29)}function hi(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function fi(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function di(t){var e=fi(t.r),i=fi(t.g),r=fi(t.b),n=ci((.4124564*e+.3575761*i+.1804375*r)/.95047),o=ci((.2126729*e+.7151522*i+.072175*r)/1);return{l:116*o-16,a:500*(n-o),b:200*(o-ci((.0193339*e+.119192*i+.9503041*r)/1.08883)),alpha:t.a}}function mi(t){var e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*pi(e),i=.95047*pi(i),r=1.08883*pi(r),new me(hi(3.2404542*i-1.5371385*e-.4985314*r),hi(-.969266*i+1.8760108*e+.041556*r),hi(.0556434*i-.2040259*e+1.0572252*r),t.alpha)}function yi(t,e,i){var r=e-t;return t+i*(r>180||r<-180?r-360*Math.round(r/360):r)}var _i={forward:di,reverse:mi,interpolate:function(t,e,i){return{l:oi(t.l,e.l,i),a:oi(t.a,e.a,i),b:oi(t.b,e.b,i),alpha:oi(t.alpha,e.alpha,i)}}},gi={forward:function(t){var e=di(t),i=e.l,r=e.a,n=e.b,o=Math.atan2(n,r)*li;return{h:o<0?o+360:o,c:Math.sqrt(r*r+n*n),l:i,alpha:t.a}},reverse:function(t){var e=t.h*ui,i=t.c;return mi({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:yi(t.h,e.h,i),c:oi(t.c,e.c,i),l:oi(t.l,e.l,i),alpha:oi(t.alpha,e.alpha,i)}}},vi=Object.freeze({__proto__:null,lab:_i,hcl:gi}),xi=function(t,e,i,r,n){this.type=t,this.operator=e,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(var o=0,a=n;o<a.length;o+=1){var s=a[o],u=s[1];this.labels.push(s[0]),this.outputs.push(u)}};function bi(t,e,i,r){var n=r-i,o=t-i;return 0===n?0:1===e?o/n:(Math.pow(e,o)-1)/(Math.pow(e,n)-1)}xi.interpolationFactor=function(t,e,r,n){var o=0;if("exponential"===t.name)o=bi(e,t.base,r,n);else if("linear"===t.name)o=bi(e,1,r,n);else if("cubic-bezier"===t.name){var a=t.controlPoints;o=new i(a[0],a[1],a[2],a[3]).solve(bi(e,1,r,n))}return o},xi.parse=function(t,e){var i=t[0],r=t[1],n=t[2],o=t.slice(3);if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var a=r[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:a}}else{if("cubic-bezier"!==r[0])return e.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some((function(t){return"number"!=typeof t||t<0||t>1})))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,2,$t)))return null;var u=[],l=null;"interpolate-hcl"===i||"interpolate-lab"===i?l=ie:e.expectedType&&"value"!==e.expectedType.kind&&(l=e.expectedType);for(var c=0;c<o.length;c+=2){var p=o[c],h=o[c+1],f=c+3,d=c+4;if("number"!=typeof p)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(u.length&&u[u.length-1][0]>=p)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',f);var m=e.parse(h,d,l);if(!m)return null;l=l||m.type,u.push([p,m])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new xi(l,i,r,n,u):e.error("Type "+le(l)+" is not interpolatable.")},xi.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);var n=e.length;if(r>=e[n-1])return i[n-1].evaluate(t);var o=ri(e,r),a=xi.interpolationFactor(this.interpolation,r,e[o],e[o+1]),s=i[o].evaluate(t),u=i[o+1].evaluate(t);return"interpolate"===this.operator?ai[this.type.kind.toLowerCase()](s,u,a):"interpolate-hcl"===this.operator?gi.reverse(gi.interpolate(gi.forward(s),gi.forward(u),a)):_i.reverse(_i.interpolate(_i.forward(s),_i.forward(u),a))},xi.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},xi.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},xi.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],i=0;i<this.labels.length;i++)e.push(this.labels[i],this.outputs[i].serialize());return e};var wi=function(t,e){this.type=t,this.args=e};wi.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var i=null,r=e.expectedType;r&&"value"!==r.kind&&(i=r);for(var n=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=e.parse(a[o],1+n.length,i,void 0,{typeAnnotation:"omit"});if(!s)return null;i=i||s.type,n.push(s)}var u=r&&n.some((function(t){return pe(r,t.type)}));return new wi(u?ne:i,n)},wi.prototype.evaluate=function(t){for(var e,i=null,r=0,n=0,o=this.args;n<o.length&&(r++,(i=o[n].evaluate(t))&&i instanceof ve&&!i.available&&(e||(e=i.name),i=null,r===this.args.length&&(i=e)),null===i);n+=1);return i},wi.prototype.eachChild=function(t){this.args.forEach(t)},wi.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},wi.prototype.serialize=function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t};var Ii=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};Ii.prototype.evaluate=function(t){return this.result.evaluate(t)},Ii.prototype.eachChild=function(t){for(var e=0,i=this.bindings;e<i.length;e+=1)t(i[e][1]);t(this.result)},Ii.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var i=[],r=1;r<t.length-1;r+=2){var n=t[r];if("string"!=typeof n)return e.error("Expected string, but found "+typeof n+" instead.",r);if(/[^a-zA-Z0-9_]/.test(n))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=e.parse(t[r+1],r+1);if(!o)return null;i.push([n,o])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return a?new Ii(i,a):null},Ii.prototype.outputDefined=function(){return this.result.outputDefined()},Ii.prototype.serialize=function(){for(var t=["let"],e=0,i=this.bindings;e<i.length;e+=1){var r=i[e];t.push(r[0],r[1].serialize())}return t.push(this.result.serialize()),t};var Si=function(t,e,i){this.type=t,this.index=e,this.input=i};Si.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,$t),r=e.parse(t[2],2,ue(e.expectedType||ne));return i&&r?new Si(r.type.itemType,i,r):null},Si.prototype.evaluate=function(t){var e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new Te("Array index out of bounds: "+e+" < 0.");if(e>=i.length)throw new Te("Array index out of bounds: "+e+" > "+(i.length-1)+".");if(e!==Math.floor(e))throw new Te("Array index must be an integer, but found "+e+" instead.");return i[e]},Si.prototype.eachChild=function(t){t(this.index),t(this.input)},Si.prototype.outputDefined=function(){return!1},Si.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Ti=function(t,e){this.type=ee,this.needle=t,this.haystack=e};Ti.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,ne),r=e.parse(t[2],2,ne);return i&&r?he(i.type,[ee,te,$t,Qt,ne])?new Ti(i,r):e.error("Expected first argument to be of type boolean, string, number or null, but found "+le(i.type)+" instead"):null},Ti.prototype.evaluate=function(t){var e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!i)return!1;if(!fe(e,["boolean","string","number","null"]))throw new Te("Expected first argument to be of type boolean, string, number or null, but found "+le(we(e))+" instead.");if(!fe(i,["string","array"]))throw new Te("Expected second argument to be of type array or string, but found "+le(we(i))+" instead.");return i.indexOf(e)>=0},Ti.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},Ti.prototype.outputDefined=function(){return!0},Ti.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ai=function(t,e,i){this.type=$t,this.needle=t,this.haystack=e,this.fromIndex=i};Ai.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,ne),r=e.parse(t[2],2,ne);if(!i||!r)return null;if(!he(i.type,[ee,te,$t,Qt,ne]))return e.error("Expected first argument to be of type boolean, string, number or null, but found "+le(i.type)+" instead");if(4===t.length){var n=e.parse(t[3],3,$t);return n?new Ai(i,r,n):null}return new Ai(i,r)},Ai.prototype.evaluate=function(t){var e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!fe(e,["boolean","string","number","null"]))throw new Te("Expected first argument to be of type boolean, string, number or null, but found "+le(we(e))+" instead.");if(!fe(i,["string","array"]))throw new Te("Expected second argument to be of type array or string, but found "+le(we(i))+" instead.");if(this.fromIndex){var r=this.fromIndex.evaluate(t);return i.indexOf(e,r)}return i.indexOf(e)},Ai.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},Ai.prototype.outputDefined=function(){return!1},Ai.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var zi=function(t,e,i,r,n,o){this.inputType=t,this.type=e,this.input=i,this.cases=r,this.outputs=n,this.otherwise=o};zi.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var i,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var n={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],u=t[a+1];Array.isArray(s)||(s=[s]);var l=e.concat(a);if(0===s.length)return l.error("Expected at least one branch label.");for(var c=0,p=s;c<p.length;c+=1){var h=p[c];if("number"!=typeof h&&"string"!=typeof h)return l.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return l.error("Numeric branch labels must be integer values.");if(i){if(l.checkSubtype(i,we(h)))return null}else i=we(h);if(void 0!==n[String(h)])return l.error("Branch labels must be unique.");n[String(h)]=o.length}var f=e.parse(u,a,r);if(!f)return null;r=r||f.type,o.push(f)}var d=e.parse(t[1],1,ne);if(!d)return null;var m=e.parse(t[t.length-1],t.length-1,r);return m?"value"!==d.type.kind&&e.concat(1).checkSubtype(i,d.type)?null:new zi(i,r,d,n,o,m):null},zi.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(we(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},zi.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},zi.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()},zi.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],i=[],r={},n=0,o=Object.keys(this.cases).sort();n<o.length;n+=1){var a=o[n];void 0===(p=r[this.cases[a]])?(r[this.cases[a]]=i.length,i.push([this.cases[a],[a]])):i[p][1].push(a)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},u=0,l=i;u<l.length;u+=1){var c=l[u],p=c[0],h=c[1];e.push(1===h.length?s(h[0]):h.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var Ei=function(t,e,i){this.type=t,this.branches=e,this.otherwise=i};Ei.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var r=[],n=1;n<t.length-1;n+=2){var o=e.parse(t[n],n,ee);if(!o)return null;var a=e.parse(t[n+1],n+1,i);if(!a)return null;r.push([o,a]),i=i||a.type}var s=e.parse(t[t.length-1],t.length-1,i);return s?new Ei(i,r,s):null},Ei.prototype.evaluate=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var r=i[e],n=r[1];if(r[0].evaluate(t))return n.evaluate(t)}return this.otherwise.evaluate(t)},Ei.prototype.eachChild=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var r=i[e],n=r[1];t(r[0]),t(n)}t(this.otherwise)},Ei.prototype.outputDefined=function(){return this.branches.every((function(t){return t[1].outputDefined()}))&&this.otherwise.outputDefined()},Ei.prototype.serialize=function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t};var ki=function(t,e,i,r){this.type=t,this.input=e,this.beginIndex=i,this.endIndex=r};function Ci(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Pi(t,e,i,r){return 0===r.compare(e,i)}function Di(t,e,i){var r="=="!==t&&"!="!==t;return function(){function n(t,e,i){this.type=ee,this.lhs=t,this.rhs=e,this.collator=i,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return n.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var i=t[0],o=e.parse(t[1],1,ne);if(!o)return null;if(!Ci(i,o.type))return e.concat(1).error('"'+i+"\" comparisons are not supported for type '"+le(o.type)+"'.");var a=e.parse(t[2],2,ne);if(!a)return null;if(!Ci(i,a.type))return e.concat(2).error('"'+i+"\" comparisons are not supported for type '"+le(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '"+le(o.type)+"' and '"+le(a.type)+"'.");r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new ze(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new ze(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,oe)))return null}return new n(o,a,s)},n.prototype.evaluate=function(n){var o=this.lhs.evaluate(n),a=this.rhs.evaluate(n);if(r&&this.hasUntypedArgument){var s=we(o),u=we(a);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new Te('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var l=we(o),c=we(a);if("string"!==l.kind||"string"!==c.kind)return e(n,o,a)}return this.collator?i(n,o,a,this.collator.evaluate(n)):e(n,o,a)},n.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},n.prototype.outputDefined=function(){return!0},n.prototype.serialize=function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e},n}()}ki.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,ne),r=e.parse(t[2],2,$t);if(!i||!r)return null;if(!he(i.type,[ue(ne),te,ne]))return e.error("Expected first argument to be of type array or string, but found "+le(i.type)+" instead");if(4===t.length){var n=e.parse(t[3],3,$t);return n?new ki(i.type,i,r,n):null}return new ki(i.type,i,r)},ki.prototype.evaluate=function(t){var e=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!fe(e,["string","array"]))throw new Te("Expected first argument to be of type array or string, but found "+le(we(e))+" instead.");if(this.endIndex){var r=this.endIndex.evaluate(t);return e.slice(i,r)}return e.slice(i)},ki.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},ki.prototype.outputDefined=function(){return!1},ki.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Mi=Di("==",(function(t,e,i){return e===i}),Pi),Li=Di("!=",(function(t,e,i){return e!==i}),(function(t,e,i,r){return!Pi(0,e,i,r)})),Bi=Di("<",(function(t,e,i){return e<i}),(function(t,e,i,r){return r.compare(e,i)<0})),Ri=Di(">",(function(t,e,i){return e>i}),(function(t,e,i,r){return r.compare(e,i)>0})),Fi=Di("<=",(function(t,e,i){return e<=i}),(function(t,e,i,r){return r.compare(e,i)<=0})),Oi=Di(">=",(function(t,e,i){return e>=i}),(function(t,e,i,r){return r.compare(e,i)>=0})),Vi=function(t,e,i,r,n){this.type=te,this.number=t,this.locale=e,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=n};Vi.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,$t);if(!i)return null;var r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");var n=null;if(r.locale&&!(n=e.parse(r.locale,1,te)))return null;var o=null;if(r.currency&&!(o=e.parse(r.currency,1,te)))return null;var a=null;if(r["min-fraction-digits"]&&!(a=e.parse(r["min-fraction-digits"],1,$t)))return null;var s=null;return r["max-fraction-digits"]&&!(s=e.parse(r["max-fraction-digits"],1,$t))?null:new Vi(i,n,o,a,s)},Vi.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},Vi.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},Vi.prototype.outputDefined=function(){return!1},Vi.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var Ui=function(t){this.type=$t,this.input=t};Ui.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error("Expected argument of type string or array, but found "+le(i.type)+" instead."):new Ui(i):null},Ui.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Te("Expected value to be of type string or array, but found "+le(we(e))+" instead.")},Ui.prototype.eachChild=function(t){t(this.input)},Ui.prototype.outputDefined=function(){return!1},Ui.prototype.serialize=function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t};var ji={"==":Mi,"!=":Li,">":Ri,"<":Bi,">=":Oi,"<=":Fi,array:ze,at:Si,boolean:ze,case:Ei,coalesce:wi,collator:Be,format:Ee,image:ke,in:Ti,"index-of":Ai,interpolate:xi,"interpolate-hcl":xi,"interpolate-lab":xi,length:Ui,let:Ii,literal:Se,match:zi,number:ze,"number-format":Vi,object:ze,slice:ki,step:ni,string:ze,"to-boolean":Pe,"to-color":Pe,"to-number":Pe,"to-string":Pe,var:ei,within:Je};function Ni(t,e){var i=e[0],r=e[1],n=e[2],o=e[3];i=i.evaluate(t),r=r.evaluate(t),n=n.evaluate(t);var a=o?o.evaluate(t):1,s=xe(i,r,n,a);if(s)throw new Te(s);return new me(i/255*a,r/255*a,n/255*a,a)}function qi(t,e){return t in e}function Zi(t,e){var i=e[t];return void 0===i?null:i}function Gi(t){return{type:t}}function Xi(t){return{result:"success",value:t}}function Wi(t){return{result:"error",value:t}}function Hi(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Ki(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Yi(t){return!!t.expression&&t.expression.interpolated}function Ji(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Qi(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function $i(t){return t}function tr(t,e,i){return void 0!==t?t:void 0!==e?e:void 0!==i?i:void 0}function er(t,e,i,r,n){return tr(typeof i===n?r[i]:void 0,t.default,e.default)}function ir(t,e,i){if("number"!==Ji(i))return tr(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[r-1][0])return t.stops[r-1][1];var n=ri(t.stops.map((function(t){return t[0]})),i);return t.stops[n][1]}function rr(t,e,i){var r=void 0!==t.base?t.base:1;if("number"!==Ji(i))return tr(t.default,e.default);var n=t.stops.length;if(1===n)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[n-1][0])return t.stops[n-1][1];var o=ri(t.stops.map((function(t){return t[0]})),i),a=function(t,e,i,r){var n=r-i,o=t-i;return 0===n?0:1===e?o/n:(Math.pow(e,o)-1)/(Math.pow(e,n)-1)}(i,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],u=t.stops[o+1][1],l=ai[e.type]||$i;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=vi[t.colorSpace];l=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=s.evaluate.apply(void 0,t),r=u.evaluate.apply(void 0,t);if(void 0!==i&&void 0!==r)return l(i,r,a)}}:l(s,u,a)}function nr(t,e,i){return"color"===e.type?i=me.parse(i):"formatted"===e.type?i=ge.fromString(i.toString()):"resolvedImage"===e.type?i=ve.fromString(i.toString()):Ji(i)===e.type||"enum"===e.type&&e.values[i]||(i=void 0),tr(i,t.default,e.default)}Le.register(ji,{error:[{kind:"error"},[te],function(t,e){throw new Te(e[0].evaluate(t))}],typeof:[te,[ne],function(t,e){return le(we(e[0].evaluate(t)))}],"to-rgba":[ue($t,4),[ie],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[ie,[$t,$t,$t],Ni],rgba:[ie,[$t,$t,$t,$t],Ni],has:{type:ee,overloads:[[[te],function(t,e){return qi(e[0].evaluate(t),t.properties())}],[[te,re],function(t,e){var i=e[1];return qi(e[0].evaluate(t),i.evaluate(t))}]]},get:{type:ne,overloads:[[[te],function(t,e){return Zi(e[0].evaluate(t),t.properties())}],[[te,re],function(t,e){var i=e[1];return Zi(e[0].evaluate(t),i.evaluate(t))}]]},"feature-state":[ne,[te],function(t,e){return Zi(e[0].evaluate(t),t.featureState||{})}],properties:[re,[],function(t){return t.properties()}],"geometry-type":[te,[],function(t){return t.geometryType()}],id:[ne,[],function(t){return t.id()}],zoom:[$t,[],function(t){return t.globals.zoom}],"heatmap-density":[$t,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[$t,[],function(t){return t.globals.lineProgress||0}],accumulated:[ne,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[$t,Gi($t),function(t,e){for(var i=0,r=0,n=e;r<n.length;r+=1)i+=n[r].evaluate(t);return i}],"*":[$t,Gi($t),function(t,e){for(var i=1,r=0,n=e;r<n.length;r+=1)i*=n[r].evaluate(t);return i}],"-":{type:$t,overloads:[[[$t,$t],function(t,e){var i=e[1];return e[0].evaluate(t)-i.evaluate(t)}],[[$t],function(t,e){return-e[0].evaluate(t)}]]},"/":[$t,[$t,$t],function(t,e){var i=e[1];return e[0].evaluate(t)/i.evaluate(t)}],"%":[$t,[$t,$t],function(t,e){var i=e[1];return e[0].evaluate(t)%i.evaluate(t)}],ln2:[$t,[],function(){return Math.LN2}],pi:[$t,[],function(){return Math.PI}],e:[$t,[],function(){return Math.E}],"^":[$t,[$t,$t],function(t,e){var i=e[1];return Math.pow(e[0].evaluate(t),i.evaluate(t))}],sqrt:[$t,[$t],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[$t,[$t],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[$t,[$t],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[$t,[$t],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[$t,[$t],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[$t,[$t],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[$t,[$t],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[$t,[$t],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[$t,[$t],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[$t,[$t],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[$t,Gi($t),function(t,e){return Math.min.apply(Math,e.map((function(e){return e.evaluate(t)})))}],max:[$t,Gi($t),function(t,e){return Math.max.apply(Math,e.map((function(e){return e.evaluate(t)})))}],abs:[$t,[$t],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[$t,[$t],function(t,e){var i=e[0].evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[$t,[$t],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[$t,[$t],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[ee,[te,ne],function(t,e){var i=e[0],r=e[1];return t.properties()[i.value]===r.value}],"filter-id-==":[ee,[ne],function(t,e){var i=e[0];return t.id()===i.value}],"filter-type-==":[ee,[te],function(t,e){var i=e[0];return t.geometryType()===i.value}],"filter-<":[ee,[te,ne],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&n<o}],"filter-id-<":[ee,[ne],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&r<n}],"filter->":[ee,[te,ne],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&n>o}],"filter-id->":[ee,[ne],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&r>n}],"filter-<=":[ee,[te,ne],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&n<=o}],"filter-id-<=":[ee,[ne],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&r<=n}],"filter->=":[ee,[te,ne],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&n>=o}],"filter-id->=":[ee,[ne],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&r>=n}],"filter-has":[ee,[ne],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[ee,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[ee,[ue(te)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[ee,[ue(ne)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[ee,[te,ue(ne)],function(t,e){var i=e[0];return e[1].value.indexOf(t.properties()[i.value])>=0}],"filter-in-large":[ee,[te,ue(ne)],function(t,e){var i=e[0],r=e[1];return function(t,e,i,r){for(;i<=r;){var n=i+r>>1;if(e[n]===t)return!0;e[n]>t?r=n-1:i=n+1}return!1}(t.properties()[i.value],r.value,0,r.value.length-1)}],all:{type:ee,overloads:[[[ee,ee],function(t,e){var i=e[1];return e[0].evaluate(t)&&i.evaluate(t)}],[Gi(ee),function(t,e){for(var i=0,r=e;i<r.length;i+=1)if(!r[i].evaluate(t))return!1;return!0}]]},any:{type:ee,overloads:[[[ee,ee],function(t,e){var i=e[1];return e[0].evaluate(t)||i.evaluate(t)}],[Gi(ee),function(t,e){for(var i=0,r=e;i<r.length;i+=1)if(r[i].evaluate(t))return!0;return!1}]]},"!":[ee,[ee],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[ee,[te],function(t,e){var i=t.globals&&t.globals.isSupportedScript;return!i||i(e[0].evaluate(t))}],upcase:[te,[te],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[te,[te],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[te,Gi(ne),function(t,e){return e.map((function(e){return Ie(e.evaluate(t))})).join("")}],"resolved-locale":[te,[oe],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var or=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Me,this._defaultValue=e?function(t){return"color"===t.type&&Qi(t.default)?new me(0,0,0,0):"color"===t.type?me.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};function ar(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in ji}function sr(t,e){var i=new ii(ji,[],e?function(t){var e={color:ie,string:te,number:$t,enum:te,boolean:ee,formatted:ae,resolvedImage:se};return"array"===t.type?ue(e[t.value]||ne,t.length):e[t.type]}(e):void 0),r=i.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?Xi(new or(r,e)):Wi(i.errors)}or.prototype.evaluateWithoutErrorHandling=function(t,e,i,r,n,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)},or.prototype.evaluate=function(t,e,i,r,n,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new Te("Expected value to be one of "+Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var ur=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!$e(e.expression)};ur.prototype.evaluateWithoutErrorHandling=function(t,e,i,r,n,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,r,n,o)},ur.prototype.evaluate=function(t,e,i,r,n,o){return this._styleExpression.evaluate(t,e,i,r,n,o)};var lr=function(t,e,i,r){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!$e(e.expression),this.interpolationType=r};function cr(t,e){if("error"===(t=sr(t,e)).result)return t;var i=t.value.expression,r=Qe(i);if(!r&&!Hi(e))return Wi([new Yt("","data expressions not supported")]);var n=ti(i,["zoom"]);if(!n&&!Ki(e))return Wi([new Yt("","zoom expressions not supported")]);var o=function t(e){var i=null;if(e instanceof Ii)i=t(e.result);else if(e instanceof wi)for(var r=0,n=e.args;r<n.length&&!(i=t(n[r]));r+=1);else(e instanceof ni||e instanceof xi)&&e.input instanceof Le&&"zoom"===e.input.name&&(i=e);return i instanceof Yt||e.eachChild((function(e){var r=t(e);r instanceof Yt?i=r:!i&&r?i=new Yt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&r&&i!==r&&(i=new Yt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),i}(i);return o||n?o instanceof Yt?Wi([o]):o instanceof xi&&!Yi(e)?Wi([new Yt("",'"interpolate" expressions cannot be used with this property')]):Xi(o?new lr(r?"camera":"composite",t.value,o.labels,o instanceof xi?o.interpolation:void 0):new ur(r?"constant":"source",t.value)):Wi([new Yt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}lr.prototype.evaluateWithoutErrorHandling=function(t,e,i,r,n,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,r,n,o)},lr.prototype.evaluate=function(t,e,i,r,n,o){return this._styleExpression.evaluate(t,e,i,r,n,o)},lr.prototype.interpolationFactor=function(t,e,i){return this.interpolationType?xi.interpolationFactor(this.interpolationType,t,e,i):0};var pr=function(t,e){this._parameters=t,this._specification=e,Wt(this,function t(e,i){var r,n,o,a="color"===i.type,s=e.stops&&"object"==typeof e.stops[0][0],u=s||!(s||void 0!==e.property),l=e.type||(Yi(i)?"exponential":"interval");if(a&&((e=Wt({},e)).stops&&(e.stops=e.stops.map((function(t){return[t[0],me.parse(t[1])]}))),e.default=me.parse(e.default?e.default:i.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!vi[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===l)r=rr;else if("interval"===l)r=ir;else if("categorical"===l){r=er,n=Object.create(null);for(var c=0,p=e.stops;c<p.length;c+=1){var h=p[c];n[h[0]]=h[1]}o=typeof e.stops[0][0]}else{if("identity"!==l)throw new Error('Unknown function type "'+l+'"');r=nr}if(s){for(var f={},d=[],m=0;m<e.stops.length;m++){var y=e.stops[m],_=y[0].zoom;void 0===f[_]&&(f[_]={zoom:_,type:e.type,property:e.property,default:e.default,stops:[]},d.push(_)),f[_].stops.push([y[0].value,y[1]])}for(var g=[],v=0,x=d;v<x.length;v+=1){var b=x[v];g.push([f[b].zoom,t(f[b],i)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:xi.interpolationFactor.bind(void 0,w),zoomStops:g.map((function(t){return t[0]})),evaluate:function(t,r){var n=t.zoom;return rr({stops:g,base:e.base},i,n).evaluate(n,r)}}}if(u){var I="exponential"===l?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:I,interpolationFactor:xi.interpolationFactor.bind(void 0,I),zoomStops:e.stops.map((function(t){return t[0]})),evaluate:function(t){return r(e,i,t.zoom,n,o)}}}return{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?tr(e.default,i.default):r(e,i,s,n,o)}}}(this._parameters,this._specification))};function hr(t){var e=t.key,i=t.value,r=t.valueSpec||{},n=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],u=Ji(i);if("object"!==u)return[new Gt(e,i,"object expected, "+u+" found")];for(var l in i){var c=l.split(".")[0],p=r[c]||r["*"],h=void 0;if(n[c])h=n[c];else if(r[c])h=Fr;else if(n["*"])h=n["*"];else{if(!r["*"]){s.push(new Gt(e,i[l],'unknown property "'+l+'"'));continue}h=Fr}s=s.concat(h({key:(e?e+".":e)+l,value:i[l],valueSpec:p,style:o,styleSpec:a,object:i,objectKey:l},i))}for(var f in r)n[f]||r[f].required&&void 0===r[f].default&&void 0===i[f]&&s.push(new Gt(e,i,'missing required property "'+f+'"'));return s}function fr(t){var e=t.value,i=t.valueSpec,r=t.style,n=t.styleSpec,o=t.key,a=t.arrayElementValidator||Fr;if("array"!==Ji(e))return[new Gt(o,e,"array expected, "+Ji(e)+" found")];if(i.length&&e.length!==i.length)return[new Gt(o,e,"array length "+i.length+" expected, length "+e.length+" found")];if(i["min-length"]&&e.length<i["min-length"])return[new Gt(o,e,"array length at least "+i["min-length"]+" expected, length "+e.length+" found")];var s={type:i.value,values:i.values};n.$version<7&&(s.function=i.function),"object"===Ji(i.value)&&(s=i.value);for(var u=[],l=0;l<e.length;l++)u=u.concat(a({array:e,arrayIndex:l,value:e[l],valueSpec:s,style:r,styleSpec:n,key:o+"["+l+"]"}));return u}function dr(t){var e=t.key,i=t.value,r=t.valueSpec,n=Ji(i);return"number"===n&&i!=i&&(n="NaN"),"number"!==n?[new Gt(e,i,"number expected, "+n+" found")]:"minimum"in r&&i<r.minimum?[new Gt(e,i,i+" is less than the minimum value "+r.minimum)]:"maximum"in r&&i>r.maximum?[new Gt(e,i,i+" is greater than the maximum value "+r.maximum)]:[]}function mr(t){var e,i,r,n=t.valueSpec,o=Ht(t.value.type),a={},s="categorical"!==o&&void 0===t.value.property,u=!s,l="array"===Ji(t.value.stops)&&"array"===Ji(t.value.stops[0])&&"object"===Ji(t.value.stops[0][0]),c=hr({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===o)return[new Gt(t.key,t.value,'identity function may not have a "stops" property')];var e=[],i=t.value;return e=e.concat(fr({key:t.key,value:i,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:p})),"array"===Ji(i)&&0===i.length&&e.push(new Gt(t.key,i,"array must have at least one stop")),e},default:function(t){return Fr({key:t.key,value:t.value,valueSpec:n,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===o&&s&&c.push(new Gt(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||c.push(new Gt(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!Yi(t.valueSpec)&&c.push(new Gt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(u&&!Hi(t.valueSpec)?c.push(new Gt(t.key,t.value,"property functions not supported")):s&&!Ki(t.valueSpec)&&c.push(new Gt(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!l||void 0!==t.value.property||c.push(new Gt(t.key,t.value,'"property" property is required')),c;function p(t){var e=[],o=t.value,s=t.key;if("array"!==Ji(o))return[new Gt(s,o,"array expected, "+Ji(o)+" found")];if(2!==o.length)return[new Gt(s,o,"array length 2 expected, length "+o.length+" found")];if(l){if("object"!==Ji(o[0]))return[new Gt(s,o,"object expected, "+Ji(o[0])+" found")];if(void 0===o[0].zoom)return[new Gt(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new Gt(s,o,"object stop key must have value")];if(r&&r>Ht(o[0].zoom))return[new Gt(s,o[0].zoom,"stop zoom values must appear in ascending order")];Ht(o[0].zoom)!==r&&(r=Ht(o[0].zoom),i=void 0,a={}),e=e.concat(hr({key:s+"[0]",value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:dr,value:h}}))}else e=e.concat(h({key:s+"[0]",value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return ar(Kt(o[1]))?e.concat([new Gt(s+"[1]",o[1],"expressions are not allowed in function stops.")]):e.concat(Fr({key:s+"[1]",value:o[1],valueSpec:n,style:t.style,styleSpec:t.styleSpec}))}function h(t,r){var s=Ji(t.value),u=Ht(t.value),l=null!==t.value?t.value:r;if(e){if(s!==e)return[new Gt(t.key,l,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Gt(t.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var c="number expected, "+s+" found";return Hi(n)&&void 0===o&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Gt(t.key,l,c)]}return"categorical"!==o||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==o&&"number"===s&&void 0!==i&&u<i?[new Gt(t.key,l,"stop domain values must appear in ascending order")]:(i=u,"categorical"===o&&u in a?[new Gt(t.key,l,"stop domain values must be unique")]:(a[u]=!0,[])):[new Gt(t.key,l,"integer expected, found "+u)]}}function yr(t){var e=("property"===t.expressionContext?cr:sr)(Kt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((function(e){return new Gt(""+t.key+e.key,t.value,e.message)}));var i=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!i.outputDefined())return[new Gt(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!$e(i))return[new Gt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!$e(i))return[new Gt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!ti(i,["zoom","feature-state"]))return[new Gt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Qe(i))return[new Gt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function _r(t){var e=t.key,i=t.value,r=t.valueSpec,n=[];return Array.isArray(r.values)?-1===r.values.indexOf(Ht(i))&&n.push(new Gt(e,i,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(i)+" found")):-1===Object.keys(r.values).indexOf(Ht(i))&&n.push(new Gt(e,i,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(i)+" found")),n}function gr(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,i=t.slice(1);e<i.length;e+=1){var r=i[e];if(!gr(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}pr.deserialize=function(t){return new pr(t._parameters,t._specification)},pr.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var vr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function xr(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};gr(t)||(t=wr(t));var e=sr(t,vr);if("error"===e.result)throw new Error(e.value.map((function(t){return t.key+": "+t.message})).join(", "));return{filter:function(t,i,r){return e.value.evaluate(t,i,{},r)},needGeometry:function t(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var i=1;i<e.length;i++)if(t(e[i]))return!0;return!1}(t)}}function br(t,e){return t<e?-1:t>e?1:0}function wr(t){if(!t)return!0;var e,i=t[0];return t.length<=1?"any"!==i:"=="===i?Ir(t[1],t[2],"=="):"!="===i?Ar(Ir(t[1],t[2],"==")):"<"===i||">"===i||"<="===i||">="===i?Ir(t[1],t[2],i):"any"===i?(e=t.slice(1),["any"].concat(e.map(wr))):"all"===i?["all"].concat(t.slice(1).map(wr)):"none"===i?["all"].concat(t.slice(1).map(wr).map(Ar)):"in"===i?Sr(t[1],t.slice(2)):"!in"===i?Ar(Sr(t[1],t.slice(2))):"has"===i?Tr(t[1]):"!has"===i?Ar(Tr(t[1])):"within"!==i||t}function Ir(t,e,i){switch(t){case"$type":return["filter-type-"+i,e];case"$id":return["filter-id-"+i,e];default:return["filter-"+i,t,e]}}function Sr(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return typeof t!=typeof e[0]}))?["filter-in-large",t,["literal",e.sort(br)]]:["filter-in-small",t,["literal",e]]}}function Tr(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Ar(t){return["!",t]}function zr(t){return gr(Kt(t.value))?yr(Wt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var i=e.value,r=e.key;if("array"!==Ji(i))return[new Gt(r,i,"array expected, "+Ji(i)+" found")];var n,o=e.styleSpec,a=[];if(i.length<1)return[new Gt(r,i,"filter array must have at least 1 element")];switch(a=a.concat(_r({key:r+"[0]",value:i[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),Ht(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&"$type"===Ht(i[1])&&a.push(new Gt(r,i,'"$type" cannot be use with operator "'+i[0]+'"'));case"==":case"!=":3!==i.length&&a.push(new Gt(r,i,'filter array for operator "'+i[0]+'" must have 3 elements'));case"in":case"!in":i.length>=2&&"string"!==(n=Ji(i[1]))&&a.push(new Gt(r+"[1]",i[1],"string expected, "+n+" found"));for(var s=2;s<i.length;s++)n=Ji(i[s]),"$type"===Ht(i[1])?a=a.concat(_r({key:r+"["+s+"]",value:i[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&a.push(new Gt(r+"["+s+"]",i[s],"string, number, or boolean expected, "+n+" found"));break;case"any":case"all":case"none":for(var u=1;u<i.length;u++)a=a.concat(t({key:r+"["+u+"]",value:i[u],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":n=Ji(i[1]),2!==i.length?a.push(new Gt(r,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"string"!==n&&a.push(new Gt(r+"[1]",i[1],"string expected, "+n+" found"));break;case"within":n=Ji(i[1]),2!==i.length?a.push(new Gt(r,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"object"!==n&&a.push(new Gt(r+"[1]",i[1],"object expected, "+n+" found"))}return a}(t)}function Er(t,e){var i=t.key,r=t.style,n=t.styleSpec,o=t.value,a=t.objectKey,s=n[e+"_"+t.layerType];if(!s)return[];var u=a.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return Fr({key:i,value:o,valueSpec:n.transition,style:r,styleSpec:n});var l,c=t.valueSpec||s[a];if(!c)return[new Gt(i,o,'unknown property "'+a+'"')];if("string"===Ji(o)&&Hi(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(o)))return[new Gt(i,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var p=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&p.push(new Gt(i,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Qi(Kt(o))&&"identity"===Ht(o.type)&&p.push(new Gt(i,o,'"text-font" does not support identity functions'))),p.concat(Fr({key:t.key,value:o,valueSpec:c,style:r,styleSpec:n,expressionContext:"property",propertyType:e,propertyKey:a}))}function kr(t){return Er(t,"paint")}function Cr(t){return Er(t,"layout")}function Pr(t){var e=[],i=t.value,r=t.key,n=t.style,o=t.styleSpec;i.type||i.ref||e.push(new Gt(r,i,'either "type" or "ref" is required'));var a,s=Ht(i.type),u=Ht(i.ref);if(i.id)for(var l=Ht(i.id),c=0;c<t.arrayIndex;c++){var p=n.layers[c];Ht(p.id)===l&&e.push(new Gt(r,i.id,'duplicate layer id "'+i.id+'", previously used at line '+p.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach((function(t){t in i&&e.push(new Gt(r,i[t],'"'+t+'" is prohibited for ref layers'))})),n.layers.forEach((function(t){Ht(t.id)===u&&(a=t)})),a?a.ref?e.push(new Gt(r,i.ref,"ref cannot reference another ref layer")):s=Ht(a.type):e.push(new Gt(r,i.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(i.source){var h=n.sources&&n.sources[i.source],f=h&&Ht(h.type);h?"vector"===f&&"raster"===s?e.push(new Gt(r,i.source,'layer "'+i.id+'" requires a raster source')):"raster"===f&&"raster"!==s?e.push(new Gt(r,i.source,'layer "'+i.id+'" requires a vector source')):"vector"!==f||i["source-layer"]?"raster-dem"===f&&"hillshade"!==s?e.push(new Gt(r,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!i.paint||!i.paint["line-gradient"]||"geojson"===f&&h.lineMetrics||e.push(new Gt(r,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new Gt(r,i,'layer "'+i.id+'" must specify a "source-layer"')):e.push(new Gt(r,i.source,'source "'+i.source+'" not found'))}else e.push(new Gt(r,i,'missing required property "source"'));return e=e.concat(hr({key:r,value:i,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Fr({key:r+".type",value:i.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:i,objectKey:"type"})},filter:zr,layout:function(t){return hr({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Cr(Wt({layerType:s},t))}}})},paint:function(t){return hr({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return kr(Wt({layerType:s},t))}}})}}}))}function Dr(t){var e=t.value,i=t.key,r=Ji(e);return"string"!==r?[new Gt(i,e,"string expected, "+r+" found")]:[]}var Mr={promoteId:function(t){var e=t.key,i=t.value;if("string"===Ji(i))return Dr({key:e,value:i});var r=[];for(var n in i)r.push.apply(r,Dr({key:e+"."+n,value:i[n]}));return r}};function Lr(t){var e=t.value,i=t.key,r=t.styleSpec,n=t.style;if(!e.type)return[new Gt(i,e,'"type" is required')];var o,a=Ht(e.type);switch(a){case"vector":case"raster":case"raster-dem":return hr({key:i,value:e,valueSpec:r["source_"+a.replace("-","_")],style:t.style,styleSpec:r,objectElementValidators:Mr});case"geojson":if(o=hr({key:i,value:e,valueSpec:r.source_geojson,style:n,styleSpec:r,objectElementValidators:Mr}),e.cluster)for(var s in e.clusterProperties){var u=e.clusterProperties[s],l=u[0],c="string"==typeof l?[l,["accumulated"],["get",s]]:l;o.push.apply(o,yr({key:i+"."+s+".map",value:u[1],expressionContext:"cluster-map"})),o.push.apply(o,yr({key:i+"."+s+".reduce",value:c,expressionContext:"cluster-reduce"}))}return o;case"video":return hr({key:i,value:e,valueSpec:r.source_video,style:n,styleSpec:r});case"image":return hr({key:i,value:e,valueSpec:r.source_image,style:n,styleSpec:r});case"canvas":return[new Gt(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return _r({key:i+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:n,styleSpec:r})}}function Br(t){var e=t.value,i=t.styleSpec,r=i.light,n=t.style,o=[],a=Ji(e);if(void 0===e)return o;if("object"!==a)return o.concat([new Gt("light",e,"object expected, "+a+" found")]);for(var s in e){var u=s.match(/^(.*)-transition$/);o=o.concat(u&&r[u[1]]&&r[u[1]].transition?Fr({key:s,value:e[s],valueSpec:i.transition,style:n,styleSpec:i}):r[s]?Fr({key:s,value:e[s],valueSpec:r[s],style:n,styleSpec:i}):[new Gt(s,e[s],'unknown property "'+s+'"')])}return o}var Rr={"*":function(){return[]},array:fr,boolean:function(t){var e=t.value,i=t.key,r=Ji(e);return"boolean"!==r?[new Gt(i,e,"boolean expected, "+r+" found")]:[]},number:dr,color:function(t){var e=t.key,i=t.value,r=Ji(i);return"string"!==r?[new Gt(e,i,"color expected, "+r+" found")]:null===de(i)?[new Gt(e,i,'color expected, "'+i+'" found')]:[]},constants:Xt,enum:_r,filter:zr,function:mr,layer:Pr,object:hr,source:Lr,light:Br,string:Dr,formatted:function(t){return 0===Dr(t).length?[]:yr(t)},resolvedImage:function(t){return 0===Dr(t).length?[]:yr(t)}};function Fr(t){var e=t.value,i=t.valueSpec,r=t.styleSpec;return i.expression&&Qi(Ht(e))?mr(t):i.expression&&ar(Kt(e))?yr(t):i.type&&Rr[i.type]?Rr[i.type](t):hr(Wt({},t,{valueSpec:i.type?r[i.type]:i}))}function Or(t){var e=t.value,i=t.key,r=Dr(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new Gt(i,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new Gt(i,e,'"glyphs" url must include a "{range}" token'))),r}function Vr(t,e){void 0===e&&(e=Zt);var i=[];return i=i.concat(Fr({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Or,"*":function(){return[]}}})),t.constants&&(i=i.concat(Xt({key:"constants",value:t.constants,style:t,styleSpec:e}))),Ur(i)}function Ur(t){return[].concat(t).sort((function(t,e){return t.line-e.line}))}function jr(t){return function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];return Ur(t.apply(this,e))}}Vr.source=jr(Lr),Vr.light=jr(Br),Vr.layer=jr(Pr),Vr.filter=jr(zr),Vr.paintProperty=jr(kr),Vr.layoutProperty=jr(Cr);var Nr=Vr,qr=Nr.light,Zr=Nr.paintProperty,Gr=Nr.layoutProperty;function Xr(t,e){var i=!1;if(e&&e.length)for(var r=0,n=e;r<n.length;r+=1)t.fire(new Nt(new Error(n[r].message))),i=!0;return i}var Wr=Hr;function Hr(t,e,i){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var n=new Int32Array(this.arrayBuffer);t=n[0],this.d=(e=n[1])+2*(i=n[2]);for(var o=0;o<this.d*this.d;o++){var a=n[3+o],s=n[3+o+1];r.push(a===s?null:n.subarray(a,s))}var u=n[3+r.length+1];this.keys=n.subarray(n[3+r.length],u),this.bboxes=n.subarray(u),this.insert=this._insertReadonly}else{this.d=e+2*i;for(var l=0;l<this.d*this.d;l++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=i,this.scale=e/t,this.uid=0;var c=i/e*t;this.min=-c,this.max=t+c}Hr.prototype.insert=function(t,e,i,r,n){this._forEachCell(e,i,r,n,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)},Hr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Hr.prototype._insertCell=function(t,e,i,r,n,o){this.cells[n].push(o)},Hr.prototype.query=function(t,e,i,r,n){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=i&&a<=r&&!n)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,i,r,this._queryCell,s,{},n),s},Hr.prototype._queryCell=function(t,e,i,r,n,o,a,s){var u=this.cells[n];if(null!==u)for(var l=this.keys,c=this.bboxes,p=0;p<u.length;p++){var h=u[p];if(void 0===a[h]){var f=4*h;(s?s(c[f+0],c[f+1],c[f+2],c[f+3]):t<=c[f+2]&&e<=c[f+3]&&i>=c[f+0]&&r>=c[f+1])?(a[h]=!0,o.push(l[h])):a[h]=!1}}},Hr.prototype._forEachCell=function(t,e,i,r,n,o,a,s){for(var u=this._convertToCellCoord(t),l=this._convertToCellCoord(e),c=this._convertToCellCoord(i),p=this._convertToCellCoord(r),h=u;h<=c;h++)for(var f=l;f<=p;f++){var d=this.d*f+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(f),this._convertFromCellCoord(h+1),this._convertFromCellCoord(f+1)))&&n.call(this,t,e,i,r,d,o,a,s))return}},Hr.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Hr.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Hr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,i=0,r=0;r<this.cells.length;r++)i+=this.cells[r].length;var n=new Int32Array(e+i+this.keys.length+this.bboxes.length);n[0]=this.extent,n[1]=this.n,n[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];n[3+a]=o,n.set(s,o),o+=s.length}return n[3+t.length]=o,n.set(this.keys,o),n[3+t.length+1]=o+=this.keys.length,n.set(this.bboxes,o),o+=this.bboxes.length,n.buffer};var Kr=a.ImageData,Yr=a.ImageBitmap,Jr={};function Qr(t,e,i){void 0===i&&(i={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Jr[t]={klass:e,omit:i.omit||[],shallow:i.shallow||[]}}for(var $r in Qr("Object",Object),Wr.serialize=function(t,e){var i=t.toArrayBuffer();return e&&e.push(i),{buffer:i}},Wr.deserialize=function(t){return new Wr(t.buffer)},Qr("Grid",Wr),Qr("Color",me),Qr("Error",Error),Qr("ResolvedImage",ve),Qr("StylePropertyFunction",pr),Qr("StyleExpression",or,{omit:["_evaluator"]}),Qr("ZoomDependentExpression",lr),Qr("ZoomConstantExpression",ur),Qr("CompoundExpression",Le,{omit:["_evaluate"]}),ji)ji[$r]._classRegistryKey||Qr("Expression_"+$r,ji[$r]);function tn(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function en(t){return Yr&&t instanceof Yr}function rn(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(tn(t)||en(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var i=t;return e&&e.push(i.buffer),i}if(t instanceof Kr)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var r=[],n=0,o=t;n<o.length;n+=1)r.push(rn(o[n],e));return r}if("object"==typeof t){var a=t.constructor,s=a._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var u=a.serialize?a.serialize(t,e):{};if(!a.serialize){for(var l in t)if(t.hasOwnProperty(l)&&!(Jr[s].omit.indexOf(l)>=0)){var c=t[l];u[l]=Jr[s].shallow.indexOf(l)>=0?c:rn(c,e)}t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(u.$name=s),u}throw new Error("can't serialize object of type "+typeof t)}function nn(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||tn(t)||en(t)||ArrayBuffer.isView(t)||t instanceof Kr)return t;if(Array.isArray(t))return t.map(nn);if("object"==typeof t){var e=t.$name||"Object",i=Jr[e].klass;if(!i)throw new Error("can't deserialize unregistered class "+e);if(i.deserialize)return i.deserialize(t);for(var r=Object.create(i.prototype),n=0,o=Object.keys(t);n<o.length;n+=1){var a=o[n];if("$name"!==a){var s=t[a];r[a]=Jr[e].shallow.indexOf(a)>=0?s:nn(s)}}return r}throw new Error("can't deserialize object of type "+typeof t)}var on=function(){this.first=!0};on.prototype.update=function(t,e){var i=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=i,!0))};var an=function(t){return t>=12288&&t<=12351},sn=function(t){return t>=12352&&t<=12447},un=function(t){return t>=12448&&t<=12543},ln=function(t){return t>=19968&&t<=40959},cn=function(t){return t>=44032&&t<=55215},pn=function(t){return t>=65072&&t<=65103},hn=function(t){return t>=65104&&t<=65135},fn=function(t){return t>=65280&&t<=65519};function dn(t){for(var e=0,i=t;e<i.length;e+=1)if(mn(i[e].charCodeAt(0)))return!0;return!1}function mn(t){return!(746!==t&&747!==t&&(t<4352||!(function(t){return t>=12704&&t<=12735}(t)||function(t){return t>=12544&&t<=12591}(t)||pn(t)&&!(t>=65097&&t<=65103)||function(t){return t>=63744&&t<=64255}(t)||function(t){return t>=13056&&t<=13311}(t)||function(t){return t>=11904&&t<=12031}(t)||function(t){return t>=12736&&t<=12783}(t)||!(!an(t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||function(t){return t>=13312&&t<=19903}(t)||ln(t)||function(t){return t>=12800&&t<=13055}(t)||function(t){return t>=12592&&t<=12687}(t)||function(t){return t>=43360&&t<=43391}(t)||function(t){return t>=55216&&t<=55295}(t)||function(t){return t>=4352&&t<=4607}(t)||cn(t)||sn(t)||function(t){return t>=12272&&t<=12287}(t)||function(t){return t>=12688&&t<=12703}(t)||function(t){return t>=12032&&t<=12255}(t)||function(t){return t>=12784&&t<=12799}(t)||un(t)&&12540!==t||!(!fn(t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!hn(t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||function(t){return t>=5120&&t<=5759}(t)||function(t){return t>=6320&&t<=6399}(t)||function(t){return t>=65040&&t<=65055}(t)||function(t){return t>=19904&&t<=19967}(t)||function(t){return t>=40960&&t<=42127}(t)||function(t){return t>=42128&&t<=42191}(t))))}function yn(t){return!(mn(t)||function(t){return!!(function(t){return t>=128&&t<=255}(t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||function(t){return t>=8192&&t<=8303}(t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||function(t){return t>=8448&&t<=8527}(t)||function(t){return t>=8528&&t<=8591}(t)||function(t){return t>=8960&&t<=9215}(t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||function(t){return t>=9216&&t<=9279}(t)&&9251!==t||function(t){return t>=9280&&t<=9311}(t)||function(t){return t>=9312&&t<=9471}(t)||function(t){return t>=9632&&t<=9727}(t)||function(t){return t>=9728&&t<=9983}(t)&&!(t>=9754&&t<=9759)||function(t){return t>=11008&&t<=11263}(t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||an(t)||un(t)||function(t){return t>=57344&&t<=63743}(t)||pn(t)||hn(t)||fn(t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function _n(t){return t>=1424&&t<=2303||function(t){return t>=64336&&t<=65023}(t)||function(t){return t>=65136&&t<=65279}(t)}function gn(t,e){return!(!e&&_n(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||function(t){return t>=6016&&t<=6143}(t))}function vn(t){for(var e=0,i=t;e<i.length;e+=1)if(_n(i[e].charCodeAt(0)))return!0;return!1}var xn=null,bn="unavailable",wn=null,In=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(bn="error"),xn&&xn(t)};function Sn(){Tn.fire(new jt("pluginStateChange",{pluginStatus:bn,pluginURL:wn}))}var Tn=new qt,An=function(){return bn},zn=function(){if("deferred"!==bn||!wn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");bn="loading",Sn(),wn&&Bt({url:wn},(function(t){t?In(t):(bn="loaded",Sn())}))},En={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===bn||null!=En.applyArabicShaping},isLoading:function(){return"loading"===bn},setState:function(t){bn=t.pluginStatus,wn=t.pluginURL},isParsed:function(){return null!=En.applyArabicShaping&&null!=En.processBidirectionalText&&null!=En.processStyledBidirectionalText},getPluginURL:function(){return wn}},kn=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new on,this.transition={})};kn.prototype.isSupportedScript=function(t){return function(t,e){for(var i=0,r=t;i<r.length;i+=1)if(!gn(r[i].charCodeAt(0),e))return!1;return!0}(t,En.isLoaded())},kn.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},kn.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),i=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*e}};var Cn=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Qi(t))return new pr(t,e);if(ar(t)){var i=cr(t,e);if("error"===i.result)throw new Error(i.value.map((function(t){return t.key+": "+t.message})).join(", "));return i.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=me.parse(t)),{kind:"constant",evaluate:function(){return r}}}(void 0===e?t.specification.default:e,t.specification)};Cn.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Cn.prototype.possiblyEvaluate=function(t,e,i){return this.property.possiblyEvaluate(this,t,e,i)};var Pn=function(t){this.property=t,this.value=new Cn(t,void 0)};Pn.prototype.transitioned=function(t,e){return new Mn(this.property,this.value,e,m({},t.transition,this.transition),t.now)},Pn.prototype.untransitioned=function(){return new Mn(this.property,this.value,null,{},0)};var Dn=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};Dn.prototype.getValue=function(t){return T(this._values[t].value.value)},Dn.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Pn(this._values[t].property)),this._values[t].value=new Cn(this._values[t].property,null===e?void 0:T(e))},Dn.prototype.getTransition=function(t){return T(this._values[t].transition)},Dn.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Pn(this._values[t].property)),this._values[t].transition=T(e)||void 0},Dn.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var r=i[e],n=this.getValue(r);void 0!==n&&(t[r]=n);var o=this.getTransition(r);void 0!==o&&(t[r+"-transition"]=o)}return t},Dn.prototype.transitioned=function(t,e){for(var i=new Ln(this._properties),r=0,n=Object.keys(this._values);r<n.length;r+=1){var o=n[r];i._values[o]=this._values[o].transitioned(t,e._values[o])}return i},Dn.prototype.untransitioned=function(){for(var t=new Ln(this._properties),e=0,i=Object.keys(this._values);e<i.length;e+=1){var r=i[e];t._values[r]=this._values[r].untransitioned()}return t};var Mn=function(t,e,i,r,n){this.property=t,this.value=e,this.begin=n+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=i)};Mn.prototype.possiblyEvaluate=function(t,e,i){var r=t.now||0,n=this.value.possiblyEvaluate(t,e,i),o=this.prior;if(o){if(r>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(r<this.begin)return o.possiblyEvaluate(t,e,i);var a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,i),n,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)}(a))}return n};var Ln=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};Ln.prototype.possiblyEvaluate=function(t,e,i){for(var r=new Fn(this._properties),n=0,o=Object.keys(this._values);n<o.length;n+=1){var a=o[n];r._values[a]=this._values[a].possiblyEvaluate(t,e,i)}return r},Ln.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var Bn=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};Bn.prototype.getValue=function(t){return T(this._values[t].value)},Bn.prototype.setValue=function(t,e){this._values[t]=new Cn(this._values[t].property,null===e?void 0:T(e))},Bn.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var r=i[e],n=this.getValue(r);void 0!==n&&(t[r]=n)}return t},Bn.prototype.possiblyEvaluate=function(t,e,i){for(var r=new Fn(this._properties),n=0,o=Object.keys(this._values);n<o.length;n+=1){var a=o[n];r._values[a]=this._values[a].possiblyEvaluate(t,e,i)}return r};var Rn=function(t,e,i){this.property=t,this.value=e,this.parameters=i};Rn.prototype.isConstant=function(){return"constant"===this.value.kind},Rn.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},Rn.prototype.evaluate=function(t,e,i,r){return this.property.evaluate(this.value,this.parameters,t,e,i,r)};var Fn=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};Fn.prototype.get=function(t){return this._values[t]};var On=function(t){this.specification=t};On.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},On.prototype.interpolate=function(t,e,i){var r=ai[this.specification.type];return r?r(t,e,i):t};var Vn=function(t,e){this.specification=t,this.overrides=e};Vn.prototype.possiblyEvaluate=function(t,e,i,r){return new Rn(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},i,r)}:t.expression,e)},Vn.prototype.interpolate=function(t,e,i){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Rn(this,{kind:"constant",value:void 0},t.parameters);var r=ai[this.specification.type];return r?new Rn(this,{kind:"constant",value:r(t.value.value,e.value.value,i)},t.parameters):t},Vn.prototype.evaluate=function(t,e,i,r,n,o){return"constant"===t.kind?t.value:t.evaluate(e,i,r,n,o)};var Un=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(t,e,i,r){if(void 0===t.value)return new Rn(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var n=t.expression.evaluate(e,null,{},i,r),o="resolvedImage"===t.property.specification.type&&"string"!=typeof n?n.name:n,a=this._calculate(o,o,o,e);return new Rn(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){var s=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new Rn(this,{kind:"constant",value:s},e)}return new Rn(this,t.expression,e)},e.prototype.evaluate=function(t,e,i,r,n,o){if("source"===t.kind){var a=t.evaluate(e,i,r,n,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},i,r),t.evaluate({zoom:Math.floor(e.zoom)},i,r),t.evaluate({zoom:Math.floor(e.zoom)+1},i,r),e):t.value},e.prototype._calculate=function(t,e,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}},e.prototype.interpolate=function(t){return t},e}(Vn),jn=function(t){this.specification=t};jn.prototype.possiblyEvaluate=function(t,e,i,r){if(void 0!==t.value){if("constant"===t.expression.kind){var n=t.expression.evaluate(e,null,{},i,r);return this._calculate(n,n,n,e)}return this._calculate(t.expression.evaluate(new kn(Math.floor(e.zoom-1),e)),t.expression.evaluate(new kn(Math.floor(e.zoom),e)),t.expression.evaluate(new kn(Math.floor(e.zoom+1),e)),e)}},jn.prototype._calculate=function(t,e,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}},jn.prototype.interpolate=function(t){return t};var Nn=function(t){this.specification=t};Nn.prototype.possiblyEvaluate=function(t,e,i,r){return!!t.expression.evaluate(e,null,{},i,r)},Nn.prototype.interpolate=function(){return!1};var qn=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var i=t[e];i.specification.overridable&&this.overridableProperties.push(e);var r=this.defaultPropertyValues[e]=new Cn(i,void 0),n=this.defaultTransitionablePropertyValues[e]=new Pn(i);this.defaultTransitioningPropertyValues[e]=n.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}};Qr("DataDrivenProperty",Vn),Qr("DataConstantProperty",On),Qr("CrossFadedDataDrivenProperty",Un),Qr("CrossFadedProperty",jn),Qr("ColorRampProperty",Nn);var Zn=function(t){function e(e,i){if(t.call(this),this.id=e.id,this.type=e.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),i.layout&&(this._unevaluatedLayout=new Bn(i.layout)),i.paint)){for(var r in this._transitionablePaint=new Dn(i.paint),e.paint)this.setPaintProperty(r,e.paint[r],{validate:!1});for(var n in e.layout)this.setLayoutProperty(n,e.layout[n],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Fn(i.paint)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,i){void 0===i&&(i={}),null!=e&&this._validate(Gr,"layers."+this.id+".layout."+t,t,e,i)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)},e.prototype.getPaintProperty=function(t){return w(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,i){if(void 0===i&&(i={}),null!=e&&this._validate(Zr,"layers."+this.id+".paint."+t,t,e,i))return!1;if(w(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var r=this._transitionablePaint._values[t],n="cross-faded-data-driven"===r.property.specification["property-type"],o=r.value.isDataDriven(),a=r.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var s=this._transitionablePaint._values[t].value;return s.isDataDriven()||o||n||this._handleOverridablePaintPropertyUpdate(t,a,s)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype._handleOverridablePaintPropertyUpdate=function(t,e,i){return!1},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),S(t,(function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)}))},e.prototype._validate=function(t,e,i,r,n){return void 0===n&&(n={}),(!n||!1!==n.validate)&&Xr(this,t.call(Nr,{key:e,layerType:this.type,objectKey:i,value:r,styleSpec:Zt,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof Rn&&Hi(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(qt),Gn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Xn=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Wn=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Hn(t,e){void 0===e&&(e=1);var i=0,r=0;return{members:t.map((function(t){var n=Gn[t.type].BYTES_PER_ELEMENT,o=i=Kn(i,Math.max(e,n)),a=t.components||1;return r=Math.max(r,n),i+=n*a,{name:t.name,type:t.type,components:a,offset:o}})),size:Kn(i,Math.max(r,e)),alignment:e}}function Kn(t,e){return Math.ceil(t/e)*e}Wn.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Wn.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},Wn.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Wn.prototype.clear=function(){this.length=0},Wn.prototype.resize=function(t){this.reserve(t),this.length=t},Wn.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},Wn.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Yn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},e.prototype.emplace=function(t,e,i){var r=2*t;return this.int16[r+0]=e,this.int16[r+1]=i,t},e}(Wn);Yn.prototype.bytesPerElement=4,Qr("StructArrayLayout2i4",Yn);var Jn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)},e.prototype.emplace=function(t,e,i,r,n){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=i,this.int16[o+2]=r,this.int16[o+3]=n,t},e}(Wn);Jn.prototype.bytesPerElement=8,Qr("StructArrayLayout4i8",Jn);var Qn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,r,n,o)},e.prototype.emplace=function(t,e,i,r,n,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.int16[s+2]=r,this.int16[s+3]=n,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Wn);Qn.prototype.bytesPerElement=12,Qr("StructArrayLayout2i4i12",Qn);var $n=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,r,n,o)},e.prototype.emplace=function(t,e,i,r,n,o,a){var s=4*t,u=8*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.uint8[u+4]=r,this.uint8[u+5]=n,this.uint8[u+6]=o,this.uint8[u+7]=a,t},e}(Wn);$n.prototype.bytesPerElement=8,Qr("StructArrayLayout2i4ub8",$n);var to=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},e.prototype.emplace=function(t,e,i){var r=2*t;return this.float32[r+0]=e,this.float32[r+1]=i,t},e}(Wn);to.prototype.bytesPerElement=8,Qr("StructArrayLayout2f8",to);var eo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o,a,s,u,l){var c=this.length;return this.resize(c+1),this.emplace(c,t,e,i,r,n,o,a,s,u,l)},e.prototype.emplace=function(t,e,i,r,n,o,a,s,u,l,c){var p=10*t;return this.uint16[p+0]=e,this.uint16[p+1]=i,this.uint16[p+2]=r,this.uint16[p+3]=n,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=u,this.uint16[p+8]=l,this.uint16[p+9]=c,t},e}(Wn);eo.prototype.bytesPerElement=20,Qr("StructArrayLayout10ui20",eo);var io=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o,a,s,u,l,c,p){var h=this.length;return this.resize(h+1),this.emplace(h,t,e,i,r,n,o,a,s,u,l,c,p)},e.prototype.emplace=function(t,e,i,r,n,o,a,s,u,l,c,p,h){var f=12*t;return this.int16[f+0]=e,this.int16[f+1]=i,this.int16[f+2]=r,this.int16[f+3]=n,this.uint16[f+4]=o,this.uint16[f+5]=a,this.uint16[f+6]=s,this.uint16[f+7]=u,this.int16[f+8]=l,this.int16[f+9]=c,this.int16[f+10]=p,this.int16[f+11]=h,t},e}(Wn);io.prototype.bytesPerElement=24,Qr("StructArrayLayout4i4ui4i24",io);var ro=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)},e.prototype.emplace=function(t,e,i,r){var n=3*t;return this.float32[n+0]=e,this.float32[n+1]=i,this.float32[n+2]=r,t},e}(Wn);ro.prototype.bytesPerElement=12,Qr("StructArrayLayout3f12",ro);var no=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint32[1*t+0]=e,t},e}(Wn);no.prototype.bytesPerElement=4,Qr("StructArrayLayout1ul4",no);var oo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o,a,s,u){var l=this.length;return this.resize(l+1),this.emplace(l,t,e,i,r,n,o,a,s,u)},e.prototype.emplace=function(t,e,i,r,n,o,a,s,u,l){var c=10*t,p=5*t;return this.int16[c+0]=e,this.int16[c+1]=i,this.int16[c+2]=r,this.int16[c+3]=n,this.int16[c+4]=o,this.int16[c+5]=a,this.uint32[p+3]=s,this.uint16[c+8]=u,this.uint16[c+9]=l,t},e}(Wn);oo.prototype.bytesPerElement=20,Qr("StructArrayLayout6i1ul2ui20",oo);var ao=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,r,n,o)},e.prototype.emplace=function(t,e,i,r,n,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.int16[s+2]=r,this.int16[s+3]=n,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Wn);ao.prototype.bytesPerElement=12,Qr("StructArrayLayout2i2i2i12",ao);var so=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,i,r,n)},e.prototype.emplace=function(t,e,i,r,n,o){var a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=i,this.float32[a+2]=r,this.int16[s+6]=n,this.int16[s+7]=o,t},e}(Wn);so.prototype.bytesPerElement=16,Qr("StructArrayLayout2f1f2i16",so);var uo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)},e.prototype.emplace=function(t,e,i,r,n){var o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=i,this.float32[a+1]=r,this.float32[a+2]=n,t},e}(Wn);uo.prototype.bytesPerElement=12,Qr("StructArrayLayout2ub2f12",uo);var lo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)},e.prototype.emplace=function(t,e,i,r){var n=3*t;return this.uint16[n+0]=e,this.uint16[n+1]=i,this.uint16[n+2]=r,t},e}(Wn);lo.prototype.bytesPerElement=6,Qr("StructArrayLayout3ui6",lo);var co=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o,a,s,u,l,c,p,h,f,d,m,y){var _=this.length;return this.resize(_+1),this.emplace(_,t,e,i,r,n,o,a,s,u,l,c,p,h,f,d,m,y)},e.prototype.emplace=function(t,e,i,r,n,o,a,s,u,l,c,p,h,f,d,m,y,_){var g=24*t,v=12*t,x=48*t;return this.int16[g+0]=e,this.int16[g+1]=i,this.uint16[g+2]=r,this.uint16[g+3]=n,this.uint32[v+2]=o,this.uint32[v+3]=a,this.uint32[v+4]=s,this.uint16[g+10]=u,this.uint16[g+11]=l,this.uint16[g+12]=c,this.float32[v+7]=p,this.float32[v+8]=h,this.uint8[x+36]=f,this.uint8[x+37]=d,this.uint8[x+38]=m,this.uint32[v+10]=y,this.int16[g+22]=_,t},e}(Wn);co.prototype.bytesPerElement=48,Qr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",co);var po=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o,a,s,u,l,c,p,h,f,d,m,y,_,g,v,x,b,w,I,S,T,A,z){var E=this.length;return this.resize(E+1),this.emplace(E,t,e,i,r,n,o,a,s,u,l,c,p,h,f,d,m,y,_,g,v,x,b,w,I,S,T,A,z)},e.prototype.emplace=function(t,e,i,r,n,o,a,s,u,l,c,p,h,f,d,m,y,_,g,v,x,b,w,I,S,T,A,z,E){var k=34*t,C=17*t;return this.int16[k+0]=e,this.int16[k+1]=i,this.int16[k+2]=r,this.int16[k+3]=n,this.int16[k+4]=o,this.int16[k+5]=a,this.int16[k+6]=s,this.int16[k+7]=u,this.uint16[k+8]=l,this.uint16[k+9]=c,this.uint16[k+10]=p,this.uint16[k+11]=h,this.uint16[k+12]=f,this.uint16[k+13]=d,this.uint16[k+14]=m,this.uint16[k+15]=y,this.uint16[k+16]=_,this.uint16[k+17]=g,this.uint16[k+18]=v,this.uint16[k+19]=x,this.uint16[k+20]=b,this.uint16[k+21]=w,this.uint16[k+22]=I,this.uint32[C+12]=S,this.float32[C+13]=T,this.float32[C+14]=A,this.float32[C+15]=z,this.float32[C+16]=E,t},e}(Wn);po.prototype.bytesPerElement=68,Qr("StructArrayLayout8i15ui1ul4f68",po);var ho=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.float32[1*t+0]=e,t},e}(Wn);ho.prototype.bytesPerElement=4,Qr("StructArrayLayout1f4",ho);var fo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)},e.prototype.emplace=function(t,e,i,r){var n=3*t;return this.int16[n+0]=e,this.int16[n+1]=i,this.int16[n+2]=r,t},e}(Wn);fo.prototype.bytesPerElement=6,Qr("StructArrayLayout3i6",fo);var mo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)},e.prototype.emplace=function(t,e,i,r){var n=4*t;return this.uint32[2*t+0]=e,this.uint16[n+2]=i,this.uint16[n+3]=r,t},e}(Wn);mo.prototype.bytesPerElement=8,Qr("StructArrayLayout1ul2ui8",mo);var yo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},e.prototype.emplace=function(t,e,i){var r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=i,t},e}(Wn);yo.prototype.bytesPerElement=4,Qr("StructArrayLayout2ui4",yo);var _o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint16[1*t+0]=e,t},e}(Wn);_o.prototype.bytesPerElement=2,Qr("StructArrayLayout1ui2",_o);var go=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)},e.prototype.emplace=function(t,e,i,r,n){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=i,this.float32[o+2]=r,this.float32[o+3]=n,t},e}(Wn);go.prototype.bytesPerElement=16,Qr("StructArrayLayout4f16",go);var vo=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new n(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,i),e}(Xn);vo.prototype.size=20;var xo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new vo(this,t)},e}(oo);Qr("CollisionBoxArray",xo);var bo=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(e.prototype,i),e}(Xn);bo.prototype.size=48;var wo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new bo(this,t)},e}(co);Qr("PlacedSymbolArray",wo);var Io=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(t){this._structArray.uint32[this._pos4+12]=t},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(e.prototype,i),e}(Xn);Io.prototype.size=68;var So=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Io(this,t)},e}(po);Qr("SymbolInstanceArray",So);var To=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e}(ho);Qr("GlyphOffsetArray",To);var Ao=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e}(fo);Qr("SymbolLineVertexArray",Ao);var zo=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(e.prototype,i),e}(Xn);zo.prototype.size=8;var Eo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new zo(this,t)},e}(mo);Qr("FeatureIndexArray",Eo);var ko=Hn([{name:"a_pos",components:2,type:"Int16"}],4).members,Co=function(t){void 0===t&&(t=[]),this.segments=t};function Po(t,e){return 256*(t=p(Math.floor(t),0,255))+p(Math.floor(e),0,255)}Co.prototype.prepareSegment=function(t,e,i,r){var n=this.segments[this.segments.length-1];return t>Co.MAX_VERTEX_ARRAY_LENGTH&&z("Max vertices per segment is "+Co.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!n||n.vertexLength+t>Co.MAX_VERTEX_ARRAY_LENGTH||n.sortKey!==r)&&(n={vertexOffset:e.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==r&&(n.sortKey=r),this.segments.push(n)),n},Co.prototype.get=function(){return this.segments},Co.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var i=e[t];for(var r in i.vaos)i.vaos[r].destroy()}},Co.simpleSegment=function(t,e,i,r){return new Co([{vertexOffset:t,primitiveOffset:e,vertexLength:i,primitiveLength:r,vaos:{},sortKey:0}])},Co.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Qr("SegmentVector",Co);var Do=Hn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Mo=t((function(t){t.exports=function(t,e){var i,r,n,o,a,s,u,l;for(r=t.length-(i=3&t.length),n=e,a=3432918353,s=461845907,l=0;l<r;)u=255&t.charCodeAt(l)|(255&t.charCodeAt(++l))<<8|(255&t.charCodeAt(++l))<<16|(255&t.charCodeAt(++l))<<24,++l,n=27492+(65535&(o=5*(65535&(n=(n^=u=(65535&(u=(u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|n>>>19))+((5*(n>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(u=0,i){case 3:u^=(255&t.charCodeAt(l+2))<<16;case 2:u^=(255&t.charCodeAt(l+1))<<8;case 1:n^=u=(65535&(u=(u=(65535&(u^=255&t.charCodeAt(l)))*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return n^=t.length,n=2246822507*(65535&(n^=n>>>16))+((2246822507*(n>>>16)&65535)<<16)&4294967295,n=3266489909*(65535&(n^=n>>>13))+((3266489909*(n>>>16)&65535)<<16)&4294967295,(n^=n>>>16)>>>0}})),Lo=t((function(t){t.exports=function(t,e){for(var i,r=t.length,n=e^r,o=0;r>=4;)i=1540483477*(65535&(i=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(i>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:n^=(255&t.charCodeAt(o+2))<<16;case 2:n^=(255&t.charCodeAt(o+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(o)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),(n^=n>>>15)>>>0}})),Bo=Mo,Ro=Lo;Bo.murmur3=Mo,Bo.murmur2=Ro;var Fo=function(){this.ids=[],this.positions=[],this.indexed=!1};Fo.prototype.add=function(t,e,i,r){this.ids.push(Vo(t)),this.positions.push(e,i,r)},Fo.prototype.getPositions=function(t){for(var e=Vo(t),i=0,r=this.ids.length-1;i<r;){var n=i+r>>1;this.ids[n]>=e?r=n:i=n+1}for(var o=[];this.ids[i]===e;)o.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return o},Fo.serialize=function(t,e){var i=new Float64Array(t.ids),r=new Uint32Array(t.positions);return function t(e,i,r,n){for(;r<n;){for(var o=e[r+n>>1],a=r-1,s=n+1;;){do{a++}while(e[a]<o);do{s--}while(e[s]>o);if(a>=s)break;Uo(e,a,s),Uo(i,3*a,3*s),Uo(i,3*a+1,3*s+1),Uo(i,3*a+2,3*s+2)}s-r<n-s?(t(e,i,r,s),r=s+1):(t(e,i,s+1,n),n=s)}}(i,r,0,i.length-1),e&&e.push(i.buffer,r.buffer),{ids:i,positions:r}},Fo.deserialize=function(t){var e=new Fo;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var Oo=Math.pow(2,53)-1;function Vo(t){var e=+t;return!isNaN(e)&&e<=Oo?e:Bo(String(t))}function Uo(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}Qr("FeaturePositionMap",Fo);var jo=function(t,e){this.gl=t.gl,this.location=e},No=function(t){function e(e,i){t.call(this,e,i),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(jo),qo=function(t){function e(e,i){t.call(this,e,i),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(jo),Zo=function(t){function e(e,i){t.call(this,e,i),this.current=[0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(jo),Go=function(t){function e(e,i){t.call(this,e,i),this.current=[0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(jo),Xo=function(t){function e(e,i){t.call(this,e,i),this.current=[0,0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(jo),Wo=function(t){function e(e,i){t.call(this,e,i),this.current=me.transparent}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(jo),Ho=new Float32Array(16),Ko=function(t){function e(e,i){t.call(this,e,i),this.current=Ho}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(jo);function Yo(t){return[Po(255*t.r,255*t.g),Po(255*t.b,255*t.a)]}var Jo=function(t,e,i){this.value=t,this.uniformNames=e.map((function(t){return"u_"+t})),this.type=i};Jo.prototype.setUniform=function(t,e,i){t.set(i.constantOr(this.value))},Jo.prototype.getBinding=function(t,e,i){return"color"===this.type?new Wo(t,e):new qo(t,e)};var Qo=function(t,e){this.uniformNames=e.map((function(t){return"u_"+t})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Qo.prototype.setConstantPatternPositions=function(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr},Qo.prototype.setUniform=function(t,e,i,r){var n="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;n&&t.set(n)},Qo.prototype.getBinding=function(t,e,i){return"u_pattern"===i.substr(0,9)?new Xo(t,e):new qo(t,e)};var $o=function(t,e,i,r){this.expression=t,this.type=i,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===i?2:1,offset:0}})),this.paintVertexArray=new r};$o.prototype.populatePaintArray=function(t,e,i,r,n){var o=this.paintVertexArray.length,a=this.expression.evaluate(new kn(0),e,{},r,[],n);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)},$o.prototype.updatePaintArray=function(t,e,i,r){var n=this.expression.evaluate({zoom:0},i,r);this._setPaintValue(t,e,n)},$o.prototype._setPaintValue=function(t,e,i){if("color"===this.type)for(var r=Yo(i),n=t;n<e;n++)this.paintVertexArray.emplace(n,r[0],r[1]);else{for(var o=t;o<e;o++)this.paintVertexArray.emplace(o,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},$o.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},$o.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var ta=function(t,e,i,r,n,o){this.expression=t,this.uniformNames=e.map((function(t){return"u_"+t+"_t"})),this.type=i,this.useIntegerZoom=r,this.zoom=n,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===i?4:2,offset:0}})),this.paintVertexArray=new o};ta.prototype.populatePaintArray=function(t,e,i,r,n){var o=this.expression.evaluate(new kn(this.zoom),e,{},r,[],n),a=this.expression.evaluate(new kn(this.zoom+1),e,{},r,[],n),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)},ta.prototype.updatePaintArray=function(t,e,i,r){var n=this.expression.evaluate({zoom:this.zoom},i,r),o=this.expression.evaluate({zoom:this.zoom+1},i,r);this._setPaintValue(t,e,n,o)},ta.prototype._setPaintValue=function(t,e,i,r){if("color"===this.type)for(var n=Yo(i),o=Yo(r),a=t;a<e;a++)this.paintVertexArray.emplace(a,n[0],n[1],o[0],o[1]);else{for(var s=t;s<e;s++)this.paintVertexArray.emplace(s,i,r);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(r))}},ta.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ta.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ta.prototype.setUniform=function(t,e){var i=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,r=p(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);t.set(r)},ta.prototype.getBinding=function(t,e,i){return new qo(t,e)};var ea=function(t,e,i,r,n,o){this.expression=t,this.type=e,this.useIntegerZoom=i,this.zoom=r,this.layerId=o,this.zoomInPaintVertexArray=new n,this.zoomOutPaintVertexArray=new n};ea.prototype.populatePaintArray=function(t,e,i){var r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],i)},ea.prototype.updatePaintArray=function(t,e,i,r,n){this._setPaintValues(t,e,i.patterns&&i.patterns[this.layerId],n)},ea.prototype._setPaintValues=function(t,e,i,r){if(r&&i){var n=r[i.min],o=r[i.mid],a=r[i.max];if(n&&o&&a)for(var s=t;s<e;s++)this.zoomInPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],n.tl[0],n.tl[1],n.br[0],n.br[1],o.pixelRatio,n.pixelRatio),this.zoomOutPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],o.pixelRatio,a.pixelRatio)}},ea.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Do.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Do.members,this.expression.isStateDependent))},ea.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ia=function(t,e,i){this.binders={},this._buffers=[];var r=[];for(var n in t.paint._values)if(i(n)){var o=t.paint.get(n);if(o instanceof Rn&&Hi(o.property.specification)){var a=na(n,t.type),s=o.value,u=o.property.specification.type,l=o.property.useIntegerZoom,c=o.property.specification["property-type"],p="cross-faded"===c||"cross-faded-data-driven"===c;if("constant"===s.kind)this.binders[n]=p?new Qo(s.value,a):new Jo(s.value,a,u),r.push("/u_"+n);else if("source"===s.kind||p){var h=oa(n,u,"source");this.binders[n]=p?new ea(s,u,l,e,h,t.id):new $o(s,a,u,h),r.push("/a_"+n)}else{var f=oa(n,u,"composite");this.binders[n]=new ta(s,a,u,l,e,f),r.push("/z_"+n)}}}this.cacheKey=r.sort().join("")};ia.prototype.getMaxValue=function(t){var e=this.binders[t];return e instanceof $o||e instanceof ta?e.maxValue:0},ia.prototype.populatePaintArrays=function(t,e,i,r,n){for(var o in this.binders){var a=this.binders[o];(a instanceof $o||a instanceof ta||a instanceof ea)&&a.populatePaintArray(t,e,i,r,n)}},ia.prototype.setConstantPatternPositions=function(t,e){for(var i in this.binders){var r=this.binders[i];r instanceof Qo&&r.setConstantPatternPositions(t,e)}},ia.prototype.updatePaintArrays=function(t,e,i,r,n){var o=!1;for(var a in t)for(var s=0,u=e.getPositions(a);s<u.length;s+=1){var l=u[s],c=i.feature(l.index);for(var p in this.binders){var h=this.binders[p];if((h instanceof $o||h instanceof ta||h instanceof ea)&&!0===h.expression.isStateDependent){var f=r.paint.get(p);h.expression=f.value,h.updatePaintArray(l.start,l.end,c,t[a],n),o=!0}}}return o},ia.prototype.defines=function(){var t=[];for(var e in this.binders){var i=this.binders[e];(i instanceof Jo||i instanceof Qo)&&t.push.apply(t,i.uniformNames.map((function(t){return"#define HAS_UNIFORM_"+t})))}return t},ia.prototype.getBinderAttributes=function(){var t=[];for(var e in this.binders){var i=this.binders[e];if(i instanceof $o||i instanceof ta)for(var r=0;r<i.paintVertexAttributes.length;r++)t.push(i.paintVertexAttributes[r].name);else if(i instanceof ea)for(var n=0;n<Do.members.length;n++)t.push(Do.members[n].name)}return t},ia.prototype.getBinderUniforms=function(){var t=[];for(var e in this.binders){var i=this.binders[e];if(i instanceof Jo||i instanceof Qo||i instanceof ta)for(var r=0,n=i.uniformNames;r<n.length;r+=1)t.push(n[r])}return t},ia.prototype.getPaintVertexBuffers=function(){return this._buffers},ia.prototype.getUniforms=function(t,e){var i=[];for(var r in this.binders){var n=this.binders[r];if(n instanceof Jo||n instanceof Qo||n instanceof ta)for(var o=0,a=n.uniformNames;o<a.length;o+=1){var s=a[o];if(e[s]){var u=n.getBinding(t,e[s],s);i.push({name:s,property:r,binding:u})}}}return i},ia.prototype.setUniforms=function(t,e,i,r){for(var n=0,o=e;n<o.length;n+=1){var a=o[n],s=a.name,u=a.property;this.binders[u].setUniform(a.binding,r,i.get(u),s)}},ia.prototype.updatePaintBuffers=function(t){for(var e in this._buffers=[],this.binders){var i=this.binders[e];if(t&&i instanceof ea){var r=2===t.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;r&&this._buffers.push(r)}else(i instanceof $o||i instanceof ta)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},ia.prototype.upload=function(t){for(var e in this.binders){var i=this.binders[e];(i instanceof $o||i instanceof ta||i instanceof ea)&&i.upload(t)}this.updatePaintBuffers()},ia.prototype.destroy=function(){for(var t in this.binders){var e=this.binders[t];(e instanceof $o||e instanceof ta||e instanceof ea)&&e.destroy()}};var ra=function(t,e,i){void 0===i&&(i=function(){return!0}),this.programConfigurations={};for(var r=0,n=t;r<n.length;r+=1){var o=n[r];this.programConfigurations[o.id]=new ia(o,e,i)}this.needsUpload=!1,this._featureMap=new Fo,this._bufferOffset=0};function na(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function oa(t,e,i){var r={color:{source:to,composite:go},number:{source:ho,composite:to}},n=function(t){return{"line-pattern":{source:eo,composite:eo},"fill-pattern":{source:eo,composite:eo},"fill-extrusion-pattern":{source:eo,composite:eo}}[t]}(t);return n&&n[i]||r[e][i]}ra.prototype.populatePaintArrays=function(t,e,i,r,n,o){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,r,n,o);void 0!==e.id&&this._featureMap.add(e.id,i,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},ra.prototype.updatePaintArrays=function(t,e,i,r){for(var n=0,o=i;n<o.length;n+=1){var a=o[n];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,this._featureMap,e,a,r)||this.needsUpload}},ra.prototype.get=function(t){return this.programConfigurations[t]},ra.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},ra.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},Qr("ConstantBinder",Jo),Qr("CrossFadedConstantBinder",Qo),Qr("SourceExpressionBinder",$o),Qr("CrossFadedCompositeBinder",ea),Qr("CompositeExpressionBinder",ta),Qr("ProgramConfiguration",ia,{omit:["_buffers"]}),Qr("ProgramConfigurationSet",ra);var aa=Math.pow(2,14)-1,sa=-aa-1;function ua(t){for(var e=8192/t.extent,i=t.loadGeometry(),r=0;r<i.length;r++)for(var n=i[r],o=0;o<n.length;o++){var a=n[o],s=Math.round(a.x*e),u=Math.round(a.y*e);a.x=p(s,sa,aa),a.y=p(u,sa,aa),(s<a.x||s>a.x+1||u<a.y||u>a.y+1)&&z("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function la(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?ua(t):[]}}function ca(t,e,i,r,n){t.emplaceBack(2*e+(r+1)/2,2*i+(n+1)/2)}var pa=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Yn,this.indexArray=new lo,this.segments=new Co,this.programConfigurations=new ra(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function ha(t,e){for(var i=0;i<t.length;i++)if(ba(e,t[i]))return!0;for(var r=0;r<e.length;r++)if(ba(t,e[r]))return!0;return!!ya(t,e)}function fa(t,e,i){return!!ba(t,e)||!!ga(e,t,i)}function da(t,e){if(1===t.length)return xa(e,t[0]);for(var i=0;i<e.length;i++)for(var r=e[i],n=0;n<r.length;n++)if(ba(t,r[n]))return!0;for(var o=0;o<t.length;o++)if(xa(e,t[o]))return!0;for(var a=0;a<e.length;a++)if(ya(t,e[a]))return!0;return!1}function ma(t,e,i){if(t.length>1){if(ya(t,e))return!0;for(var r=0;r<e.length;r++)if(ga(e[r],t,i))return!0}for(var n=0;n<t.length;n++)if(ga(t[n],e,i))return!0;return!1}function ya(t,e){if(0===t.length||0===e.length)return!1;for(var i=0;i<t.length-1;i++)for(var r=t[i],n=t[i+1],o=0;o<e.length-1;o++)if(_a(r,n,e[o],e[o+1]))return!0;return!1}function _a(t,e,i,r){return E(t,i,r)!==E(e,i,r)&&E(t,e,i)!==E(t,e,r)}function ga(t,e,i){var r=i*i;if(1===e.length)return t.distSqr(e[0])<r;for(var n=1;n<e.length;n++)if(va(t,e[n-1],e[n])<r)return!0;return!1}function va(t,e,i){var r=e.distSqr(i);if(0===r)return t.distSqr(e);var n=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/r;return t.distSqr(n<0?e:n>1?i:i.sub(e)._mult(n)._add(e))}function xa(t,e){for(var i,r,n,o=!1,a=0;a<t.length;a++)for(var s=0,u=(i=t[a]).length-1;s<i.length;u=s++)(r=i[s]).y>e.y!=(n=i[u]).y>e.y&&e.x<(n.x-r.x)*(e.y-r.y)/(n.y-r.y)+r.x&&(o=!o);return o}function ba(t,e){for(var i=!1,r=0,n=t.length-1;r<t.length;n=r++){var o=t[r],a=t[n];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(i=!i)}return i}function wa(t,e,i){var r=i[0],n=i[2];if(t.x<r.x&&e.x<r.x||t.x>n.x&&e.x>n.x||t.y<r.y&&e.y<r.y||t.y>n.y&&e.y>n.y)return!1;var o=E(t,e,i[0]);return o!==E(t,e,i[1])||o!==E(t,e,i[2])||o!==E(t,e,i[3])}function Ia(t,e,i){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:i.programConfigurations.get(e.id).getMaxValue(t)}function Sa(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Ta(t,e,i,r,o){if(!e[0]&&!e[1])return t;var a=n.convert(e)._mult(o);"viewport"===i&&a._rotate(-r);for(var s=[],u=0;u<t.length;u++)s.push(t[u].sub(a));return s}pa.prototype.populate=function(t,e,i){var r=this.layers[0],n=[],o=null;"circle"===r.type&&(o=r.layout.get("circle-sort-key"));for(var a=0,s=t;a<s.length;a+=1){var u=s[a],l=u.feature,c=u.id,p=u.index,h=u.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,d=la(l,f);if(this.layers[0]._featureFilter.filter(new kn(this.zoom),d,i)){var m=o?o.evaluate(d,{},i):void 0,y={id:c,properties:l.properties,type:l.type,sourceLayerIndex:h,index:p,geometry:f?d.geometry:ua(l),patterns:{},sortKey:m};n.push(y)}}o&&n.sort((function(t,e){return t.sortKey-e.sortKey}));for(var _=0,g=n;_<g.length;_+=1){var v=g[_],x=v.geometry,b=v.index,w=v.sourceLayerIndex,I=t[b].feature;this.addFeature(v,x,b,i),e.featureIndex.insert(I,x,b,w,this.index)}},pa.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},pa.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},pa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},pa.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ko),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},pa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},pa.prototype.addFeature=function(t,e,i,r){for(var n=0,o=e;n<o.length;n+=1)for(var a=0,s=o[n];a<s.length;a+=1){var u=s[a],l=u.x,c=u.y;if(!(l<0||l>=8192||c<0||c>=8192)){var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),h=p.vertexLength;ca(this.layoutVertexArray,l,c,-1,-1),ca(this.layoutVertexArray,l,c,1,-1),ca(this.layoutVertexArray,l,c,1,1),ca(this.layoutVertexArray,l,c,-1,1),this.indexArray.emplaceBack(h,h+1,h+2),this.indexArray.emplaceBack(h,h+3,h+2),p.vertexLength+=4,p.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,{},r)},Qr("CircleBucket",pa,{omit:["layers"]});var Aa=new qn({"circle-sort-key":new Vn(Zt.layout_circle["circle-sort-key"])}),za={paint:new qn({"circle-radius":new Vn(Zt.paint_circle["circle-radius"]),"circle-color":new Vn(Zt.paint_circle["circle-color"]),"circle-blur":new Vn(Zt.paint_circle["circle-blur"]),"circle-opacity":new Vn(Zt.paint_circle["circle-opacity"]),"circle-translate":new On(Zt.paint_circle["circle-translate"]),"circle-translate-anchor":new On(Zt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new On(Zt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new On(Zt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Vn(Zt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Vn(Zt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Vn(Zt.paint_circle["circle-stroke-opacity"])}),layout:Aa},Ea="undefined"!=typeof Float32Array?Float32Array:Array;function ka(){var t=new Ea(16);return Ea!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Ca(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Pa(t,e){var i=e[0],r=e[1],n=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],p=e[9],h=e[10],f=e[11],d=e[12],m=e[13],y=e[14],_=e[15],g=i*s-r*a,v=i*u-n*a,x=i*l-o*a,b=r*u-n*s,w=r*l-o*s,I=n*l-o*u,S=c*m-p*d,T=c*y-h*d,A=c*_-f*d,z=p*y-h*m,E=p*_-f*m,k=h*_-f*y,C=g*k-v*E+x*z+b*A-w*T+I*S;return C?(t[0]=(s*k-u*E+l*z)*(C=1/C),t[1]=(n*E-r*k-o*z)*C,t[2]=(m*I-y*w+_*b)*C,t[3]=(h*w-p*I-f*b)*C,t[4]=(u*A-a*k-l*T)*C,t[5]=(i*k-n*A+o*T)*C,t[6]=(y*x-d*I-_*v)*C,t[7]=(c*I-h*x+f*v)*C,t[8]=(a*E-s*A+l*S)*C,t[9]=(r*A-i*E-o*S)*C,t[10]=(d*w-m*x+_*g)*C,t[11]=(p*x-c*w-f*g)*C,t[12]=(s*T-a*z-u*S)*C,t[13]=(i*z-r*T+n*S)*C,t[14]=(m*v-d*b-y*g)*C,t[15]=(c*b-p*v+h*g)*C,t):null}function Da(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],m=e[12],y=e[13],_=e[14],g=e[15],v=i[0],x=i[1],b=i[2],w=i[3];return t[0]=v*r+x*s+b*p+w*m,t[1]=v*n+x*u+b*h+w*y,t[2]=v*o+x*l+b*f+w*_,t[3]=v*a+x*c+b*d+w*g,t[4]=(v=i[4])*r+(x=i[5])*s+(b=i[6])*p+(w=i[7])*m,t[5]=v*n+x*u+b*h+w*y,t[6]=v*o+x*l+b*f+w*_,t[7]=v*a+x*c+b*d+w*g,t[8]=(v=i[8])*r+(x=i[9])*s+(b=i[10])*p+(w=i[11])*m,t[9]=v*n+x*u+b*h+w*y,t[10]=v*o+x*l+b*f+w*_,t[11]=v*a+x*c+b*d+w*g,t[12]=(v=i[12])*r+(x=i[13])*s+(b=i[14])*p+(w=i[15])*m,t[13]=v*n+x*u+b*h+w*y,t[14]=v*o+x*l+b*f+w*_,t[15]=v*a+x*c+b*d+w*g,t}function Ma(t,e,i){var r,n,o,a,s,u,l,c,p,h,f,d,m=i[0],y=i[1],_=i[2];return e===t?(t[12]=e[0]*m+e[4]*y+e[8]*_+e[12],t[13]=e[1]*m+e[5]*y+e[9]*_+e[13],t[14]=e[2]*m+e[6]*y+e[10]*_+e[14],t[15]=e[3]*m+e[7]*y+e[11]*_+e[15]):(n=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],t[0]=r=e[0],t[1]=n,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=p,t[9]=h,t[10]=f,t[11]=d,t[12]=r*m+s*y+p*_+e[12],t[13]=n*m+u*y+h*_+e[13],t[14]=o*m+l*y+f*_+e[14],t[15]=a*m+c*y+d*_+e[15]),t}function La(t,e,i){var r=i[0],n=i[1],o=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ba(t,e,i){var r=Math.sin(i),n=Math.cos(i),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],p=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n+l*r,t[1]=a*n+c*r,t[2]=s*n+p*r,t[3]=u*n+h*r,t[4]=l*n-o*r,t[5]=c*n-a*r,t[6]=p*n-s*r,t[7]=h*n-u*r,t}function Ra(t,e,i,r,n,o,a){var s=1/(e-i),u=1/(r-n),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+i)*s,t[13]=(n+r)*u,t[14]=(a+o)*l,t[15]=1,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,i=arguments.length;i--;)e+=t[i]*t[i];return Math.sqrt(e)});var Fa=Da;function Oa(t){var e=new Ea(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}var Va,Ua=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t};function ja(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*o+i[12]*a,t[1]=i[1]*r+i[5]*n+i[9]*o+i[13]*a,t[2]=i[2]*r+i[6]*n+i[10]*o+i[14]*a,t[3]=i[3]*r+i[7]*n+i[11]*o+i[15]*a,t}Va=new Ea(3),Ea!=Float32Array&&(Va[0]=0,Va[1]=0,Va[2]=0),function(){var t=new Ea(4);Ea!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var Na=function(t){var e=t[0],i=t[1];return e*e+i*i},qa=(function(){var t=new Ea(2);Ea!=Float32Array&&(t[0]=0,t[1]=0)}(),function(t){function e(e){t.call(this,e,za)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new pa(t)},e.prototype.queryRadius=function(t){var e=t;return Ia("circle-radius",this,e)+Ia("circle-stroke-width",this,e)+Sa(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,i,r,n,o,a,s){for(var u=Ta(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),l=this.paint.get("circle-radius").evaluate(e,i)+this.paint.get("circle-stroke-width").evaluate(e,i),c="map"===this.paint.get("circle-pitch-alignment"),p=c?u:function(t,e){return t.map((function(t){return Za(t,e)}))}(u,s),h=c?l*a:l,f=0,d=r;f<d.length;f+=1)for(var m=0,y=d[f];m<y.length;m+=1){var _=y[m],g=c?_:Za(_,s),v=h,x=ja([],[_.x,_.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?v*=x[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(v*=o.cameraToCenterDistance/x[3]),fa(p,g,v))return!0}return!1},e}(Zn));function Za(t,e){var i=ja([],[t.x,t.y,0,1],e);return new n(i[0]/i[3],i[1]/i[3])}var Ga=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(pa);function Xa(t,e,i,r){var n=e.width,o=e.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==n*o*i)throw new RangeError("mismatched image size")}else r=new Uint8Array(n*o*i);return t.width=n,t.height=o,t.data=r,t}function Wa(t,e,i){var r=e.width,n=e.height;if(r!==t.width||n!==t.height){var o=Xa({},{width:r,height:n},i);Ha(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,n)},i),t.width=r,t.height=n,t.data=o.data}}function Ha(t,e,i,r,n,o){if(0===n.width||0===n.height)return e;if(n.width>t.width||n.height>t.height||i.x>t.width-n.width||i.y>t.height-n.height)throw new RangeError("out of range source coordinates for image copy");if(n.width>e.width||n.height>e.height||r.x>e.width-n.width||r.y>e.height-n.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,u=0;u<n.height;u++)for(var l=((i.y+u)*t.width+i.x)*o,c=((r.y+u)*e.width+r.x)*o,p=0;p<n.width*o;p++)s[c+p]=a[l+p];return e}Qr("HeatmapBucket",Ga,{omit:["layers"]});var Ka=function(t,e){Xa(this,t,1,e)};Ka.prototype.resize=function(t){Wa(this,t,1)},Ka.prototype.clone=function(){return new Ka({width:this.width,height:this.height},new Uint8Array(this.data))},Ka.copy=function(t,e,i,r,n){Ha(t,e,i,r,n,1)};var Ya=function(t,e){Xa(this,t,4,e)};Ya.prototype.resize=function(t){Wa(this,t,4)},Ya.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},Ya.prototype.clone=function(){return new Ya({width:this.width,height:this.height},new Uint8Array(this.data))},Ya.copy=function(t,e,i,r,n){Ha(t,e,i,r,n,4)},Qr("AlphaImage",Ka),Qr("RGBAImage",Ya);var Ja={paint:new qn({"heatmap-radius":new Vn(Zt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Vn(Zt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new On(Zt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Nn(Zt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new On(Zt.paint_heatmap["heatmap-opacity"])})};function Qa(t){var e={},i=t.resolution||256,r=t.clips?t.clips.length:1,n=t.image||new Ya({width:i,height:r}),o=function(i,r,o){e[t.evaluationKey]=o;var a=t.expression.evaluate(e);n.data[i+r+0]=Math.floor(255*a.r/a.a),n.data[i+r+1]=Math.floor(255*a.g/a.a),n.data[i+r+2]=Math.floor(255*a.b/a.a),n.data[i+r+3]=Math.floor(255*a.a)};if(t.clips)for(var a=0,s=0;a<r;++a,s+=4*i)for(var u=0,l=0;u<i;u++,l+=4){var c=u/(i-1),p=t.clips[a];o(s,l,p.start*(1-c)+p.end*c)}else for(var h=0,f=0;h<i;h++,f+=4)o(0,f,h/(i-1));return n}var $a=function(t){function e(e){t.call(this,e,Ja),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new Ga(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=Qa({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(Zn),ts={paint:new qn({"hillshade-illumination-direction":new On(Zt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new On(Zt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new On(Zt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new On(Zt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new On(Zt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new On(Zt.paint_hillshade["hillshade-accent-color"])})},es=function(t){function e(e){t.call(this,e,ts)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(Zn),is=Hn([{name:"a_pos",components:2,type:"Int16"}],4).members,rs=os,ns=os;function os(t,e,i){i=i||2;var r,n,o,a,s,u,l,c=e&&e.length,p=c?e[0]*i:t.length,h=as(t,0,p,i,!0),f=[];if(!h||h.next===h.prev)return f;if(c&&(h=function(t,e,i,r){var n,o,a,s=[];for(n=0,o=e.length;n<o;n++)(a=as(t,e[n]*r,n<o-1?e[n+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(_s(a));for(s.sort(fs),n=0;n<s.length;n++)ds(s[n],i),i=ss(i,i.next);return i}(t,e,h,i)),t.length>80*i){r=o=t[0],n=a=t[1];for(var d=i;d<p;d+=i)(s=t[d])<r&&(r=s),(u=t[d+1])<n&&(n=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-n))?1/l:0}return us(h,f,i,r,n,l),f}function as(t,e,i,r,n){var o,a;if(n===Cs(t,e,i,r)>0)for(o=e;o<i;o+=r)a=zs(o,t[o],t[o+1],a);else for(o=i-r;o>=e;o-=r)a=zs(o,t[o],t[o+1],a);return a&&bs(a,a.next)&&(Es(a),a=a.next),a}function ss(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!bs(r,r.next)&&0!==xs(r.prev,r,r.next))r=r.next;else{if(Es(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function us(t,e,i,r,n,o,a){if(t){!a&&o&&function(t,e,i,r){var n=t;do{null===n.z&&(n.z=ys(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,o,a,s,u,l=1;do{for(i=t,t=null,o=null,a=0;i;){for(a++,r=i,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||i.z<=r.z)?(n=i,i=i.nextZ,s--):(n=r,r=r.nextZ,u--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;i=r}o.nextZ=null,l*=2}while(a>1)}(n)}(t,r,n,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?cs(t,r,n,o):ls(t))e.push(s.i/i),e.push(t.i/i),e.push(u.i/i),Es(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?us(t=ps(ss(t),e,i),e,i,r,n,o,2):2===a&&hs(t,e,i,r,n,o):us(ss(t),e,i,r,n,o,1);break}}}function ls(t){var e=t.prev,i=t,r=t.next;if(xs(e,i,r)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(gs(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&xs(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function cs(t,e,i,r){var n=t.prev,o=t,a=t.next;if(xs(n,o,a)>=0)return!1;for(var s=n.x>o.x?n.x>a.x?n.x:a.x:o.x>a.x?o.x:a.x,u=n.y>o.y?n.y>a.y?n.y:a.y:o.y>a.y?o.y:a.y,l=ys(n.x<o.x?n.x<a.x?n.x:a.x:o.x<a.x?o.x:a.x,n.y<o.y?n.y<a.y?n.y:a.y:o.y<a.y?o.y:a.y,e,i,r),c=ys(s,u,e,i,r),p=t.prevZ,h=t.nextZ;p&&p.z>=l&&h&&h.z<=c;){if(p!==t.prev&&p!==t.next&&gs(n.x,n.y,o.x,o.y,a.x,a.y,p.x,p.y)&&xs(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,h!==t.prev&&h!==t.next&&gs(n.x,n.y,o.x,o.y,a.x,a.y,h.x,h.y)&&xs(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(;p&&p.z>=l;){if(p!==t.prev&&p!==t.next&&gs(n.x,n.y,o.x,o.y,a.x,a.y,p.x,p.y)&&xs(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;h&&h.z<=c;){if(h!==t.prev&&h!==t.next&&gs(n.x,n.y,o.x,o.y,a.x,a.y,h.x,h.y)&&xs(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function ps(t,e,i){var r=t;do{var n=r.prev,o=r.next.next;!bs(n,o)&&ws(n,r,r.next,o)&&Ts(n,o)&&Ts(o,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(o.i/i),Es(r),Es(r.next),r=t=o),r=r.next}while(r!==t);return ss(r)}function hs(t,e,i,r,n,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&vs(a,s)){var u=As(a,s);return a=ss(a,a.next),u=ss(u,u.next),us(a,e,i,r,n,o),void us(u,e,i,r,n,o)}s=s.next}a=a.next}while(a!==t)}function fs(t,e){return t.x-e.x}function ds(t,e){if(e=function(t,e){var i,r=e,n=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>a){if(a=s,s===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===a)return i;var u,l=i,c=i.x,p=i.y,h=1/0;r=i;do{n>=r.x&&r.x>=c&&n!==r.x&&gs(o<p?n:a,o,c,p,o<p?a:n,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(n-r.x),Ts(r,t)&&(u<h||u===h&&(r.x>i.x||r.x===i.x&&ms(i,r)))&&(i=r,h=u)),r=r.next}while(r!==l);return i}(t,e)){var i=As(e,t);ss(e,e.next),ss(i,i.next)}}function ms(t,e){return xs(t.prev,t,e.prev)<0&&xs(e.next,t,t.next)<0}function ys(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function _s(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function gs(t,e,i,r,n,o,a,s){return(n-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(i-a)*(e-s)>=0&&(i-a)*(o-s)-(n-a)*(r-s)>=0}function vs(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&ws(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(Ts(t,e)&&Ts(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)&&(xs(t.prev,t,e.prev)||xs(t,e.prev,e))||bs(t,e)&&xs(t.prev,t,t.next)>0&&xs(e.prev,e,e.next)>0)}function xs(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function bs(t,e){return t.x===e.x&&t.y===e.y}function ws(t,e,i,r){var n=Ss(xs(t,e,i)),o=Ss(xs(t,e,r)),a=Ss(xs(i,r,t)),s=Ss(xs(i,r,e));return n!==o&&a!==s||!(0!==n||!Is(t,i,e))||!(0!==o||!Is(t,r,e))||!(0!==a||!Is(i,t,r))||!(0!==s||!Is(i,e,r))}function Is(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function Ss(t){return t>0?1:t<0?-1:0}function Ts(t,e){return xs(t.prev,t,t.next)<0?xs(t,e,t.next)>=0&&xs(t,t.prev,e)>=0:xs(t,e,t.prev)<0||xs(t,t.next,e)<0}function As(t,e){var i=new ks(t.i,t.x,t.y),r=new ks(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,o.next=r,r.prev=o,r}function zs(t,e,i,r){var n=new ks(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function Es(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ks(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Cs(t,e,i,r){for(var n=0,o=e,a=i-r;o<i;o+=r)n+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return n}function Ps(t,e,i,r,n){!function t(e,i,r,n,o){for(;n>r;){if(n-r>600){var a=n-r+1,s=i-r+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1);t(e,i,Math.max(r,Math.floor(i-s*l/a+c)),Math.min(n,Math.floor(i+(a-s)*l/a+c)),o)}var p=e[i],h=r,f=n;for(Ds(e,r,i),o(e[n],p)>0&&Ds(e,r,n);h<f;){for(Ds(e,h,f),h++,f--;o(e[h],p)<0;)h++;for(;o(e[f],p)>0;)f--}0===o(e[r],p)?Ds(e,r,f):Ds(e,++f,n),f<=i&&(r=f+1),i<=f&&(n=f-1)}}(t,e,i||0,r||t.length-1,n||Ms)}function Ds(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function Ms(t,e){return t<e?-1:t>e?1:0}function Ls(t,e){var i=t.length;if(i<=1)return[t];for(var r,n,o=[],a=0;a<i;a++){var s=k(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===n&&(n=s<0),n===s<0?(r&&o.push(r),r=[t[a]]):r.push(t[a]))}if(r&&o.push(r),e>1)for(var u=0;u<o.length;u++)o[u].length<=e||(Ps(o[u],e,1,o[u].length-1,Bs),o[u]=o[u].slice(0,e));return o}function Bs(t,e){return e.area-t.area}function Rs(t,e,i){for(var r=i.patternDependencies,n=!1,o=0,a=e;o<a.length;o+=1){var s=a[o].paint.get(t+"-pattern");s.isConstant()||(n=!0);var u=s.constantOr(null);u&&(n=!0,r[u.to]=!0,r[u.from]=!0)}return n}function Fs(t,e,i,r,n){for(var o=n.patternDependencies,a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.paint.get(t+"-pattern").value;if("constant"!==l.kind){var c=l.evaluate({zoom:r-1},i,{},n.availableImages),p=l.evaluate({zoom:r},i,{},n.availableImages),h=l.evaluate({zoom:r+1},i,{},n.availableImages);p=p&&p.name?p.name:p,h=h&&h.name?h.name:h,o[c=c&&c.name?c.name:c]=!0,o[p]=!0,o[h]=!0,i.patterns[u.id]={min:c,mid:p,max:h}}}return i}os.deviation=function(t,e,i,r){var n=e&&e.length,o=Math.abs(Cs(t,0,n?e[0]*i:t.length,i));if(n)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(Cs(t,e[a]*i,a<s-1?e[a+1]*i:t.length,i));var u=0;for(a=0;a<r.length;a+=3){var l=r[a]*i,c=r[a+1]*i,p=r[a+2]*i;u+=Math.abs((t[l]-t[p])*(t[c+1]-t[l+1])-(t[l]-t[c])*(t[p+1]-t[l+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},os.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var a=0;a<e;a++)i.vertices.push(t[n][o][a]);n>0&&i.holes.push(r+=t[n-1].length)}return i},rs.default=ns;var Os=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Yn,this.indexArray=new lo,this.indexArray2=new yo,this.programConfigurations=new ra(t.layers,t.zoom),this.segments=new Co,this.segments2=new Co,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};Os.prototype.populate=function(t,e,i){this.hasPattern=Rs("fill",this.layers,e);for(var r=this.layers[0].layout.get("fill-sort-key"),n=[],o=0,a=t;o<a.length;o+=1){var s=a[o],u=s.feature,l=s.id,c=s.index,p=s.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,f=la(u,h);if(this.layers[0]._featureFilter.filter(new kn(this.zoom),f,i)){var d=r?r.evaluate(f,{},i,e.availableImages):void 0,m={id:l,properties:u.properties,type:u.type,sourceLayerIndex:p,index:c,geometry:h?f.geometry:ua(u),patterns:{},sortKey:d};n.push(m)}}r&&n.sort((function(t,e){return t.sortKey-e.sortKey}));for(var y=0,_=n;y<_.length;y+=1){var g=_[y],v=g.geometry,x=g.index,b=g.sourceLayerIndex;if(this.hasPattern){var w=Fs("fill",this.layers,g,this.zoom,e);this.patternFeatures.push(w)}else this.addFeature(g,v,x,i,{});e.featureIndex.insert(t[x].feature,v,x,b,this.index)}},Os.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},Os.prototype.addFeatures=function(t,e,i){for(var r=0,n=this.patternFeatures;r<n.length;r+=1){var o=n[r];this.addFeature(o,o.geometry,o.index,e,i)}},Os.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Os.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Os.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,is),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},Os.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Os.prototype.addFeature=function(t,e,i,r,n){for(var o=0,a=Ls(e,500);o<a.length;o+=1){for(var s=a[o],u=0,l=0,c=s;l<c.length;l+=1)u+=c[l].length;for(var p=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray),h=p.vertexLength,f=[],d=[],m=0,y=s;m<y.length;m+=1){var _=y[m];if(0!==_.length){_!==s[0]&&d.push(f.length/2);var g=this.segments2.prepareSegment(_.length,this.layoutVertexArray,this.indexArray2),v=g.vertexLength;this.layoutVertexArray.emplaceBack(_[0].x,_[0].y),this.indexArray2.emplaceBack(v+_.length-1,v),f.push(_[0].x),f.push(_[0].y);for(var x=1;x<_.length;x++)this.layoutVertexArray.emplaceBack(_[x].x,_[x].y),this.indexArray2.emplaceBack(v+x-1,v+x),f.push(_[x].x),f.push(_[x].y);g.vertexLength+=_.length,g.primitiveLength+=_.length}}for(var b=rs(f,d),w=0;w<b.length;w+=3)this.indexArray.emplaceBack(h+b[w],h+b[w+1],h+b[w+2]);p.vertexLength+=u,p.primitiveLength+=b.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)},Qr("FillBucket",Os,{omit:["layers","patternFeatures"]});var Vs=new qn({"fill-sort-key":new Vn(Zt.layout_fill["fill-sort-key"])}),Us={paint:new qn({"fill-antialias":new On(Zt.paint_fill["fill-antialias"]),"fill-opacity":new Vn(Zt.paint_fill["fill-opacity"]),"fill-color":new Vn(Zt.paint_fill["fill-color"]),"fill-outline-color":new Vn(Zt.paint_fill["fill-outline-color"]),"fill-translate":new On(Zt.paint_fill["fill-translate"]),"fill-translate-anchor":new On(Zt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Un(Zt.paint_fill["fill-pattern"])}),layout:Vs},js=function(t){function e(e){t.call(this,e,Us)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,i){t.prototype.recalculate.call(this,e,i);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new Os(t)},e.prototype.queryRadius=function(){return Sa(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,i,r,n,o,a){return da(Ta(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)},e.prototype.isTileClipped=function(){return!0},e}(Zn),Ns=Hn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,qs=Zs;function Zs(t,e,i,r,n){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=n,t.readFields(Gs,this,e)}function Gs(t,e,i){1==t?e.id=i.readVarint():2==t?function(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var r=e._keys[t.readVarint()],n=e._values[t.readVarint()];e.properties[r]=n}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function Xs(t){for(var e,i,r=0,n=0,o=t.length,a=o-1;n<o;a=n++)r+=((i=t[a]).x-(e=t[n]).x)*(e.y+i.y);return r}Zs.types=["Unknown","Point","LineString","Polygon"],Zs.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,r=1,o=0,a=0,s=0,u=[];t.pos<i;){if(o<=0){var l=t.readVarint();r=7&l,o=l>>3}if(o--,1===r||2===r)a+=t.readSVarint(),s+=t.readSVarint(),1===r&&(e&&u.push(e),e=[]),e.push(new n(a,s));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&u.push(e),u},Zs.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,r=0,n=0,o=0,a=1/0,s=-1/0,u=1/0,l=-1/0;t.pos<e;){if(r<=0){var c=t.readVarint();i=7&c,r=c>>3}if(r--,1===i||2===i)(n+=t.readSVarint())<a&&(a=n),n>s&&(s=n),(o+=t.readSVarint())<u&&(u=o),o>l&&(l=o);else if(7!==i)throw new Error("unknown command "+i)}return[a,u,s,l]},Zs.prototype.toGeoJSON=function(t,e,i){var r,n,o=this.extent*Math.pow(2,i),a=this.extent*t,s=this.extent*e,u=this.loadGeometry(),l=Zs.types[this.type];function c(t){for(var e=0;e<t.length;e++){var i=t[e];t[e]=[360*(i.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(r=0;r<u.length;r++)p[r]=u[r][0];c(u=p);break;case 2:for(r=0;r<u.length;r++)c(u[r]);break;case 3:for(u=function(t){var e=t.length;if(e<=1)return[t];for(var i,r,n=[],o=0;o<e;o++){var a=Xs(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(i&&n.push(i),i=[t[o]]):i.push(t[o]))}return i&&n.push(i),n}(u),r=0;r<u.length;r++)for(n=0;n<u[r].length;n++)c(u[r][n])}1===u.length?u=u[0]:l="Multi"+l;var h={type:"Feature",geometry:{type:l,coordinates:u},properties:this.properties};return"id"in this&&(h.id=this.id),h};var Ws=Hs;function Hs(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Ks,this,e),this.length=this._features.length}function Ks(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(i))}function Ys(t,e,i){if(3===t){var r=new Ws(i,i.readVarint()+i.pos);r.length&&(e[r.name]=r)}}Hs.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new qs(this._pbf,e,this.extent,this._keys,this._values)};var Js={VectorTile:function(t,e){this.layers=t.readFields(Ys,{},e)},VectorTileFeature:qs,VectorTileLayer:Ws},Qs=Js.VectorTileFeature.types,$s=Math.pow(2,13);function tu(t,e,i,r,n,o,a,s){t.emplaceBack(e,i,2*Math.floor(r*$s)+a,n*$s*2,o*$s*2,Math.round(s))}var eu=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Qn,this.indexArray=new lo,this.programConfigurations=new ra(t.layers,t.zoom),this.segments=new Co,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function iu(t,e){return t.x===e.x&&(t.x<0||t.x>8192)||t.y===e.y&&(t.y<0||t.y>8192)}eu.prototype.populate=function(t,e,i){this.features=[],this.hasPattern=Rs("fill-extrusion",this.layers,e);for(var r=0,n=t;r<n.length;r+=1){var o=n[r],a=o.feature,s=o.id,u=o.index,l=o.sourceLayerIndex,c=this.layers[0]._featureFilter.needGeometry,p=la(a,c);if(this.layers[0]._featureFilter.filter(new kn(this.zoom),p,i)){var h={id:s,sourceLayerIndex:l,index:u,geometry:c?p.geometry:ua(a),properties:a.properties,type:a.type,patterns:{}};this.hasPattern?this.features.push(Fs("fill-extrusion",this.layers,h,this.zoom,e)):this.addFeature(h,h.geometry,u,i,{}),e.featureIndex.insert(a,h.geometry,u,l,this.index,!0)}}},eu.prototype.addFeatures=function(t,e,i){for(var r=0,n=this.features;r<n.length;r+=1){var o=n[r];this.addFeature(o,o.geometry,o.index,e,i)}},eu.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},eu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},eu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},eu.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ns),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},eu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},eu.prototype.addFeature=function(t,e,i,r,n){for(var o=0,a=Ls(e,500);o<a.length;o+=1){for(var s=a[o],u=0,l=0,c=s;l<c.length;l+=1)u+=c[l].length;for(var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),h=0,f=s;h<f.length;h+=1){var d=f[h];if(0!==d.length&&!((D=d).every((function(t){return t.x<0}))||D.every((function(t){return t.x>8192}))||D.every((function(t){return t.y<0}))||D.every((function(t){return t.y>8192}))))for(var m=0,y=0;y<d.length;y++){var _=d[y];if(y>=1){var g=d[y-1];if(!iu(_,g)){p.vertexLength+4>Co.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var v=_.sub(g)._perp()._unit(),x=g.dist(_);m+x>32768&&(m=0),tu(this.layoutVertexArray,_.x,_.y,v.x,v.y,0,0,m),tu(this.layoutVertexArray,_.x,_.y,v.x,v.y,0,1,m),tu(this.layoutVertexArray,g.x,g.y,v.x,v.y,0,0,m+=x),tu(this.layoutVertexArray,g.x,g.y,v.x,v.y,0,1,m);var b=p.vertexLength;this.indexArray.emplaceBack(b,b+2,b+1),this.indexArray.emplaceBack(b+1,b+2,b+3),p.vertexLength+=4,p.primitiveLength+=2}}}}if(p.vertexLength+u>Co.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray)),"Polygon"===Qs[t.type]){for(var w=[],I=[],S=p.vertexLength,T=0,A=s;T<A.length;T+=1){var z=A[T];if(0!==z.length){z!==s[0]&&I.push(w.length/2);for(var E=0;E<z.length;E++){var k=z[E];tu(this.layoutVertexArray,k.x,k.y,0,0,1,1,0),w.push(k.x),w.push(k.y)}}}for(var C=rs(w,I),P=0;P<C.length;P+=3)this.indexArray.emplaceBack(S+C[P],S+C[P+2],S+C[P+1]);p.primitiveLength+=C.length/3,p.vertexLength+=u}}var D;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)},Qr("FillExtrusionBucket",eu,{omit:["layers","features"]});var ru={paint:new qn({"fill-extrusion-opacity":new On(Zt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Vn(Zt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new On(Zt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new On(Zt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Un(Zt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Vn(Zt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Vn(Zt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new On(Zt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},nu=function(t){function e(e){t.call(this,e,ru)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new eu(t)},e.prototype.queryRadius=function(){return Sa(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(t,e,i,r,o,a,s,u){var l=Ta(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,s),c=this.paint.get("fill-extrusion-height").evaluate(e,i),p=this.paint.get("fill-extrusion-base").evaluate(e,i),h=function(t,e,i,r){for(var o=[],a=0,s=t;a<s.length;a+=1){var u=s[a],l=[u.x,u.y,0,1];ja(l,l,e),o.push(new n(l[0]/l[3],l[1]/l[3]))}return o}(l,u),f=function(t,e,i,r){for(var o=[],a=[],s=r[8]*e,u=r[9]*e,l=r[10]*e,c=r[11]*e,p=r[8]*i,h=r[9]*i,f=r[10]*i,d=r[11]*i,m=0,y=t;m<y.length;m+=1){for(var _=[],g=[],v=0,x=y[m];v<x.length;v+=1){var b=x[v],w=b.x,I=b.y,S=r[0]*w+r[4]*I+r[12],T=r[1]*w+r[5]*I+r[13],A=r[2]*w+r[6]*I+r[14],z=r[3]*w+r[7]*I+r[15],E=A+l,k=z+c,C=S+p,P=T+h,D=A+f,M=z+d,L=new n((S+s)/k,(T+u)/k);L.z=E/k,_.push(L);var B=new n(C/M,P/M);B.z=D/M,g.push(B)}o.push(_),a.push(g)}return[o,a]}(r,p,c,u);return function(t,e,i){var r=1/0;da(i,e)&&(r=au(i,e[0]));for(var n=0;n<e.length;n++)for(var o=e[n],a=t[n],s=0;s<o.length-1;s++){var u=o[s],l=[u,o[s+1],a[s+1],a[s],u];ha(i,l)&&(r=Math.min(r,au(i,l)))}return r!==1/0&&r}(f[0],f[1],h)},e}(Zn);function ou(t,e){return t.x*e.x+t.y*e.y}function au(t,e){if(1===t.length){for(var i,r=0,n=e[r++];!i||n.equals(i);)if(!(i=e[r++]))return 1/0;for(;r<e.length;r++){var o=e[r],a=t[0],s=i.sub(n),u=o.sub(n),l=a.sub(n),c=ou(s,s),p=ou(s,u),h=ou(u,u),f=ou(l,s),d=ou(l,u),m=c*h-p*p,y=(h*f-p*d)/m,_=(c*d-p*f)/m,g=n.z*(1-y-_)+i.z*y+o.z*_;if(isFinite(g))return g}return 1/0}for(var v=1/0,x=0,b=e;x<b.length;x+=1)v=Math.min(v,b[x].z);return v}var su=Hn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,uu=Hn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,lu=Js.VectorTileFeature.types,cu=Math.cos(Math.PI/180*37.5),pu=Math.pow(2,14)/.5,hu=function(t){var e=this;this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(t){e.gradients[t.id]={}})),this.layoutVertexArray=new $n,this.layoutVertexArray2=new to,this.indexArray=new lo,this.programConfigurations=new ra(t.layers,t.zoom),this.segments=new Co,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};hu.prototype.populate=function(t,e,i){this.hasPattern=Rs("line",this.layers,e);for(var r=this.layers[0].layout.get("line-sort-key"),n=[],o=0,a=t;o<a.length;o+=1){var s=a[o],u=s.feature,l=s.id,c=s.index,p=s.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,f=la(u,h);if(this.layers[0]._featureFilter.filter(new kn(this.zoom),f,i)){var d=r?r.evaluate(f,{},i):void 0,m={id:l,properties:u.properties,type:u.type,sourceLayerIndex:p,index:c,geometry:h?f.geometry:ua(u),patterns:{},sortKey:d};n.push(m)}}r&&n.sort((function(t,e){return t.sortKey-e.sortKey}));for(var y=0,_=n;y<_.length;y+=1){var g=_[y],v=g.geometry,x=g.index,b=g.sourceLayerIndex;if(this.hasPattern){var w=Fs("line",this.layers,g,this.zoom,e);this.patternFeatures.push(w)}else this.addFeature(g,v,x,i,{});e.featureIndex.insert(t[x].feature,v,x,b,this.index)}},hu.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},hu.prototype.addFeatures=function(t,e,i){for(var r=0,n=this.patternFeatures;r<n.length;r+=1){var o=n[r];this.addFeature(o,o.geometry,o.index,e,i)}},hu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},hu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},hu.prototype.upload=function(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,uu)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,su),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},hu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},hu.prototype.lineFeatureClips=function(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}},hu.prototype.addFeature=function(t,e,i,r,n){var o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap"),u=o.get("line-miter-limit"),l=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(var c=0,p=e;c<p.length;c+=1)this.addLine(p[c],t,a,s,u,l);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)},hu.prototype.addLine=function(t,e,i,r,n,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var a=0;a<t.length-1;a++)this.totalDistance+=t[a].dist(t[a+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===lu[e.type],u=t.length;u>=2&&t[u-1].equals(t[u-2]);)u--;for(var l=0;l<u-1&&t[l].equals(t[l+1]);)l++;if(!(u<(s?3:2))){"bevel"===i&&(n=1.05);var c,p=this.overscaling<=16?122880/(512*this.overscaling):0,h=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray),f=void 0,d=void 0,m=void 0,y=void 0;this.e1=this.e2=-1,s&&(y=t[l].sub(c=t[u-2])._unit()._perp());for(var _=l;_<u;_++)if(!(d=_===u-1?s?t[l+1]:void 0:t[_+1])||!t[_].equals(d)){y&&(m=y),c&&(f=c),c=t[_],y=d?d.sub(c)._unit()._perp():m;var g=(m=m||y).add(y);0===g.x&&0===g.y||g._unit();var v=m.x*y.x+m.y*y.y,x=g.x*y.x+g.y*y.y,b=0!==x?1/x:1/0,w=2*Math.sqrt(2-2*x),I=x<cu&&f&&d,S=m.x*y.y-m.y*y.x>0;if(I&&_>l){var T=c.dist(f);if(T>2*p){var A=c.sub(c.sub(f)._mult(p/T)._round());this.updateDistance(f,A),this.addCurrentVertex(A,m,0,0,h),f=A}}var z=f&&d,E=z?i:s?"butt":r;if(z&&"round"===E&&(b<o?E="miter":b<=2&&(E="fakeround")),"miter"===E&&b>n&&(E="bevel"),"bevel"===E&&(b>2&&(E="flipbevel"),b<n&&(E="miter")),f&&this.updateDistance(f,c),"miter"===E)g._mult(b),this.addCurrentVertex(c,g,0,0,h);else if("flipbevel"===E){if(b>100)g=y.mult(-1);else{var k=b*m.add(y).mag()/m.sub(y).mag();g._perp()._mult(k*(S?-1:1))}this.addCurrentVertex(c,g,0,0,h),this.addCurrentVertex(c,g.mult(-1),0,0,h)}else if("bevel"===E||"fakeround"===E){var C=-Math.sqrt(b*b-1),P=S?C:0,D=S?0:C;if(f&&this.addCurrentVertex(c,m,P,D,h),"fakeround"===E)for(var M=Math.round(180*w/Math.PI/20),L=1;L<M;L++){var B=L/M;if(.5!==B){var R=B-.5;B+=B*R*(B-1)*((1.0904+v*(v*(3.55645-1.43519*v)-3.2452))*R*R+(.848013+v*(.215638*v-1.06021)))}var F=y.sub(m)._mult(B)._add(m)._unit()._mult(S?-1:1);this.addHalfVertex(c,F.x,F.y,!1,S,0,h)}d&&this.addCurrentVertex(c,y,-P,-D,h)}else if("butt"===E)this.addCurrentVertex(c,g,0,0,h);else if("square"===E){var O=f?1:-1;this.addCurrentVertex(c,g,O,O,h)}else"round"===E&&(f&&(this.addCurrentVertex(c,m,0,0,h),this.addCurrentVertex(c,m,1,1,h,!0)),d&&(this.addCurrentVertex(c,y,-1,-1,h,!0),this.addCurrentVertex(c,y,0,0,h)));if(I&&_<u-1){var V=c.dist(d);if(V>2*p){var U=c.add(d.sub(c)._mult(p/V)._round());this.updateDistance(c,U),this.addCurrentVertex(U,y,0,0,h),c=U}}}}},hu.prototype.addCurrentVertex=function(t,e,i,r,n,o){void 0===o&&(o=!1);var a=e.y*r-e.x,s=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*i,e.y-e.x*i,o,!1,i,n),this.addHalfVertex(t,a,s,o,!0,-r,n),this.distance>pu/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,i,r,n,o))},hu.prototype.addHalfVertex=function(t,e,i,r,n,o,a){var s=.5*(this.lineClips?this.scaledDistance*(pu-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t.x<<1)+(r?1:0),(t.y<<1)+(n?1:0),Math.round(63*e)+128,Math.round(63*i)+128,1+(0===o?0:o<0?-1:1)|(63&s)<<2,s>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var u=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),a.primitiveLength++),n?this.e2=u:this.e1=u},hu.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},hu.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()},Qr("LineBucket",hu,{omit:["layers","patternFeatures"]});var fu=new qn({"line-cap":new On(Zt.layout_line["line-cap"]),"line-join":new Vn(Zt.layout_line["line-join"]),"line-miter-limit":new On(Zt.layout_line["line-miter-limit"]),"line-round-limit":new On(Zt.layout_line["line-round-limit"]),"line-sort-key":new Vn(Zt.layout_line["line-sort-key"])}),du={paint:new qn({"line-opacity":new Vn(Zt.paint_line["line-opacity"]),"line-color":new Vn(Zt.paint_line["line-color"]),"line-translate":new On(Zt.paint_line["line-translate"]),"line-translate-anchor":new On(Zt.paint_line["line-translate-anchor"]),"line-width":new Vn(Zt.paint_line["line-width"]),"line-gap-width":new Vn(Zt.paint_line["line-gap-width"]),"line-offset":new Vn(Zt.paint_line["line-offset"]),"line-blur":new Vn(Zt.paint_line["line-blur"]),"line-dasharray":new jn(Zt.paint_line["line-dasharray"]),"line-pattern":new Un(Zt.paint_line["line-pattern"]),"line-gradient":new Nn(Zt.paint_line["line-gradient"])}),layout:fu},mu=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(e,i){return i=new kn(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,zoomHistory:i.zoomHistory,transition:i.transition}),t.prototype.possiblyEvaluate.call(this,e,i)},e.prototype.evaluate=function(e,i,r,n){return i=m({},i,{zoom:Math.floor(i.zoom)}),t.prototype.evaluate.call(this,e,i,r,n)},e}(Vn))(du.paint.properties["line-width"].specification);mu.useIntegerZoom=!0;var yu=function(t){function e(e){t.call(this,e,du),this.gradientVersion=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof ni,this.gradientVersion=(this.gradientVersion+1)%u)},e.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},e.prototype.recalculate=function(e,i){t.prototype.recalculate.call(this,e,i),this.paint._values["line-floorwidth"]=mu.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new hu(t)},e.prototype.queryRadius=function(t){var e=t,i=_u(Ia("line-width",this,e),Ia("line-gap-width",this,e)),r=Ia("line-offset",this,e);return i/2+Math.abs(r)+Sa(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,i,r,o,a,s){var u=Ta(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),l=s/2*_u(this.paint.get("line-width").evaluate(e,i),this.paint.get("line-gap-width").evaluate(e,i)),c=this.paint.get("line-offset").evaluate(e,i);return c&&(r=function(t,e){for(var i=[],r=new n(0,0),o=0;o<t.length;o++){for(var a=t[o],s=[],u=0;u<a.length;u++){var l=a[u],c=a[u+1],p=0===u?r:l.sub(a[u-1])._unit()._perp(),h=u===a.length-1?r:c.sub(l)._unit()._perp(),f=p._add(h)._unit();f._mult(1/(f.x*h.x+f.y*h.y)),s.push(f._mult(e)._add(l))}i.push(s)}return i}(r,c*s)),function(t,e,i){for(var r=0;r<e.length;r++){var n=e[r];if(t.length>=3)for(var o=0;o<n.length;o++)if(ba(t,n[o]))return!0;if(ma(t,n,i))return!0}return!1}(u,r,l)},e.prototype.isTileClipped=function(){return!0},e}(Zn);function _u(t,e){return e>0?e+2*t:t}var gu=Hn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),vu=Hn([{name:"a_projected_pos",components:3,type:"Float32"}],4),xu=(Hn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Hn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),bu=(Hn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Hn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),wu=Hn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Iu(t,e,i){return t.sections.forEach((function(t){t.text=function(t,e,i){var r=e.layout.get("text-transform").evaluate(i,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),En.applyArabicShaping&&(t=En.applyArabicShaping(t)),t}(t.text,e,i)})),t}Hn([{name:"triangle",components:3,type:"Uint16"}]),Hn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Hn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Hn([{type:"Float32",name:"offsetX"}]),Hn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Su={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},Tu=function(t,e,i,r,n){var o,a,s=8*n-r-1,u=(1<<s)-1,l=u>>1,c=-7,p=i?n-1:0,h=i?-1:1,f=t[e+p];for(p+=h,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+t[e+p],p+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+p],p+=h,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=l}return(f?-1:1)*a*Math.pow(2,o-r)},Au=function(t,e,i,r,n,o){var a,s,u,l=8*o-n-1,c=(1<<l)-1,p=c>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+p>=1?h/u:h*Math.pow(2,1-p))*u>=2&&(a++,u/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(e*u-1)*Math.pow(2,n),a+=p):(s=e*Math.pow(2,p-1)*Math.pow(2,n),a=0));n>=8;t[i+f]=255&s,f+=d,s/=256,n-=8);for(a=a<<n|s,l+=n;l>0;t[i+f]=255&a,f+=d,a/=256,l-=8);t[i+f-d]|=128*m},zu=Eu;function Eu(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Eu.Varint=0,Eu.Fixed64=1,Eu.Bytes=2,Eu.Fixed32=5;var ku="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Cu(t){return t.type===Eu.Bytes?t.readVarint()+t.pos:t.pos+1}function Pu(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Du(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;n>=t;n--)i.buf[n+r]=i.buf[n]}function Mu(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function Lu(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function Bu(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function Ru(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function Fu(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function Ou(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function Vu(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function Uu(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function ju(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function Nu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function qu(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function Zu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Gu(t,e,i){1===t&&i.readMessage(Xu,e)}function Xu(t,e,i){if(3===t){var r=i.readMessage(Wu,{}),n=r.width,o=r.height,a=r.left,s=r.top,u=r.advance;e.push({id:r.id,bitmap:new Ka({width:n+6,height:o+6},r.bitmap),metrics:{width:n,height:o,left:a,top:s,advance:u}})}}function Wu(t,e,i){1===t?e.id=i.readVarint():2===t?e.bitmap=i.readBytes():3===t?e.width=i.readVarint():4===t?e.height=i.readVarint():5===t?e.left=i.readSVarint():6===t?e.top=i.readSVarint():7===t&&(e.advance=i.readVarint())}function Hu(t){for(var e=0,i=0,r=0,n=t;r<n.length;r+=1){var o=n[r];e+=o.w*o.h,i=Math.max(i,o.w)}t.sort((function(t,e){return e.h-t.h}));for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}],s=0,u=0,l=0,c=t;l<c.length;l+=1)for(var p=c[l],h=a.length-1;h>=0;h--){var f=a[h];if(!(p.w>f.w||p.h>f.h)){if(p.x=f.x,p.y=f.y,u=Math.max(u,p.y+p.h),s=Math.max(s,p.x+p.w),p.w===f.w&&p.h===f.h){var d=a.pop();h<a.length&&(a[h]=d)}else p.h===f.h?(f.x+=p.w,f.w-=p.w):p.w===f.w?(f.y+=p.h,f.h-=p.h):(a.push({x:f.x+p.w,y:f.y,w:f.w-p.w,h:p.h}),f.y+=p.h,f.h-=p.h);break}}return{w:s,h:u,fill:e/(s*u)||0}}Eu.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),n=r>>3,o=this.pos;this.type=7&r,t(n,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Nu(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Zu(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Nu(this.buf,this.pos)+4294967296*Nu(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=Nu(this.buf,this.pos)+4294967296*Zu(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Tu(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Tu(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,r=this.buf;return e=127&(i=r[this.pos++]),i<128?e:(e|=(127&(i=r[this.pos++]))<<7,i<128?e:(e|=(127&(i=r[this.pos++]))<<14,i<128?e:(e|=(127&(i=r[this.pos++]))<<21,i<128?e:function(t,e,i){var r,n,o=i.buf;if(r=(112&(n=o[i.pos++]))>>4,n<128)return Pu(t,r,e);if(r|=(127&(n=o[i.pos++]))<<3,n<128)return Pu(t,r,e);if(r|=(127&(n=o[i.pos++]))<<10,n<128)return Pu(t,r,e);if(r|=(127&(n=o[i.pos++]))<<17,n<128)return Pu(t,r,e);if(r|=(127&(n=o[i.pos++]))<<24,n<128)return Pu(t,r,e);if(r|=(1&(n=o[i.pos++]))<<31,n<128)return Pu(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&ku?function(t,e,i){return ku.decode(t.subarray(e,i))}(this.buf,e,t):function(t,e,i){for(var r="",n=e;n<i;){var o,a,s,u=t[n],l=null,c=u>239?4:u>223?3:u>191?2:1;if(n+c>i)break;1===c?u<128&&(l=u):2===c?128==(192&(o=t[n+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(a=t[n+2],128==(192&(o=t[n+1]))&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(a=t[n+2],s=t[n+3],128==(192&(o=t[n+1]))&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),n+=c}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Eu.Bytes)return t.push(this.readVarint(e));var i=Cu(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Eu.Bytes)return t.push(this.readSVarint());var e=Cu(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Eu.Bytes)return t.push(this.readBoolean());var e=Cu(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Eu.Bytes)return t.push(this.readFloat());var e=Cu(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Eu.Bytes)return t.push(this.readDouble());var e=Cu(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Eu.Bytes)return t.push(this.readFixed32());var e=Cu(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Eu.Bytes)return t.push(this.readSFixed32());var e=Cu(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Eu.Bytes)return t.push(this.readFixed64());var e=Cu(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Eu.Bytes)return t.push(this.readSFixed64());var e=Cu(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Eu.Varint)for(;this.buf[this.pos++]>127;);else if(e===Eu.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Eu.Fixed32)this.pos+=4;else{if(e!==Eu.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),qu(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),qu(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),qu(this.buf,-1&t,this.pos),qu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),qu(this.buf,-1&t,this.pos),qu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,r;if(t>=0?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,i.buf[i.pos]=127&(t>>>=7)}(i,0,e),function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var r,n,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!n){r>56319||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):n=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&(t[i++]=239,t[i++]=191,t[i++]=189,n=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&Du(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),Au(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Au(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;r>=128&&Du(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,Eu.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Mu,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Lu,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Fu,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,Bu,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Ru,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Ou,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Vu,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Uu,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,ju,e)},writeBytesField:function(t,e){this.writeTag(t,Eu.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Eu.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Eu.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Eu.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Eu.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Eu.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Eu.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Eu.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Eu.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Eu.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var Ku=function(t,e){var i=e.pixelRatio,r=e.version,n=e.stretchX,o=e.stretchY,a=e.content;this.paddedRect=t,this.pixelRatio=i,this.stretchX=n,this.stretchY=o,this.content=a,this.version=r},Yu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Yu.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Yu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Yu.tlbr.get=function(){return this.tl.concat(this.br)},Yu.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Ku.prototype,Yu);var Ju=function(t,e){var i={},r={};this.haveRenderCallbacks=[];var n=[];this.addImages(t,i,n),this.addImages(e,r,n);var o=Hu(n),a=new Ya({width:o.w||1,height:o.h||1});for(var s in t){var u=t[s],l=i[s].paddedRect;Ya.copy(u.data,a,{x:0,y:0},{x:l.x+1,y:l.y+1},u.data)}for(var c in e){var p=e[c],h=r[c].paddedRect,f=h.x+1,d=h.y+1,m=p.data.width,y=p.data.height;Ya.copy(p.data,a,{x:0,y:0},{x:f,y:d},p.data),Ya.copy(p.data,a,{x:0,y:y-1},{x:f,y:d-1},{width:m,height:1}),Ya.copy(p.data,a,{x:0,y:0},{x:f,y:d+y},{width:m,height:1}),Ya.copy(p.data,a,{x:m-1,y:0},{x:f-1,y:d},{width:1,height:y}),Ya.copy(p.data,a,{x:0,y:0},{x:f+m,y:d},{width:1,height:y})}this.image=a,this.iconPositions=i,this.patternPositions=r};Ju.prototype.addImages=function(t,e,i){for(var r in t){var n=t[r],o={x:0,y:0,w:n.data.width+2,h:n.data.height+2};i.push(o),e[r]=new Ku(o,n),n.hasRenderCallback&&this.haveRenderCallbacks.push(r)}},Ju.prototype.patchUpdatedImages=function(t,e){for(var i in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[i],t.getImage(i),e),this.patchUpdatedImage(this.patternPositions[i],t.getImage(i),e)},Ju.prototype.patchUpdatedImage=function(t,e,i){if(t&&e&&t.version!==e.version){t.version=e.version;var r=t.tl;i.update(e.data,void 0,{x:r[0],y:r[1]})}},Qr("ImagePosition",Ku),Qr("ImageAtlas",Ju);var Qu={horizontal:1,vertical:2,horizontalOnly:3},$u=function(){this.scale=1,this.fontStack="",this.imageName=null};$u.forText=function(t,e){var i=new $u;return i.scale=t||1,i.fontStack=e,i},$u.forImage=function(t){var e=new $u;return e.imageName=t,e};var tl=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};tl.fromFeature=function(t,e){for(var i=new tl,r=0;r<t.sections.length;r++){var n=t.sections[r];n.image?i.addImageSection(n):i.addTextSection(n,e)}return i},tl.prototype.length=function(){return this.text.length},tl.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},tl.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},tl.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},tl.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",i=0;i<t.length;i++){var r=t.charCodeAt(i+1)||null,n=t.charCodeAt(i-1)||null;e+=r&&yn(r)&&!Su[t[i+1]]||n&&yn(n)&&!Su[t[i-1]]||!Su[t[i]]?t[i]:Su[t[i]]}return e}(this.text)},tl.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&el[this.text.charCodeAt(e)];e++)t++;for(var i=this.text.length,r=this.text.length-1;r>=0&&r>=t&&el[this.text.charCodeAt(r)];r--)i--;this.text=this.text.substring(t,i),this.sectionIndex=this.sectionIndex.slice(t,i)},tl.prototype.substring=function(t,e){var i=new tl;return i.text=this.text.substring(t,e),i.sectionIndex=this.sectionIndex.slice(t,e),i.sections=this.sections,i},tl.prototype.toString=function(){return this.text},tl.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce((function(e,i){return Math.max(e,t.sections[i].scale)}),0)},tl.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push($u.forText(t.scale,t.fontStack||e));for(var i=this.sections.length-1,r=0;r<t.text.length;++r)this.sectionIndex.push(i)},tl.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push($u.forImage(e)),this.sectionIndex.push(this.sections.length-1)):z("Reached maximum number of images 6401")}else z("Can't add FormattedSection with an empty image.")},tl.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var el={};function il(t){var e=.5,i=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function rl(t,e){var i=e.expression;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new kn(t+1))};if("source"===i.kind)return{kind:"source"};for(var r=i.zoomStops,n=i.interpolationType,o=0;o<r.length&&r[o]<=t;)o++;for(var a=o=Math.max(0,o-1);a<r.length&&r[a]<t+1;)a++;a=Math.min(r.length-1,a);var s=r[o],u=r[a];return"composite"===i.kind?{kind:"composite",minZoom:s,maxZoom:u,interpolationType:n}:{kind:"camera",minZoom:s,maxZoom:u,minSize:i.evaluate(new kn(s)),maxSize:i.evaluate(new kn(u)),interpolationType:n}}function nl(t,e,i){var r=e.uSize,n=i.lowerSize;return"source"===t.kind?n/128:"composite"===t.kind?oi(n/128,i.upperSize/128,e.uSizeT):r}function ol(t,e){var i=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){var n=t.interpolationType,o=n?p(xi.interpolationFactor(n,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?r=oi(t.minSize,t.maxSize,o):i=o}return{uSizeT:i,uSize:r}}el[9]=!0,el[10]=!0,el[11]=!0,el[12]=!0,el[13]=!0,el[32]=!0,Qr("Anchor",function(t){function e(e,i,r,n){t.call(this,e,i),this.angle=r,void 0!==n&&(this.segment=n)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(n));var al=Object.freeze({__proto__:null,getSizeData:rl,evaluateSizeForFeature:nl,evaluateSizeForZoom:ol,SIZE_PACK_FACTOR:128}),sl=Number.POSITIVE_INFINITY;function ul(t,e){return e[1]!==sl?function(t,e,i){var r=0,n=0;switch(e=Math.abs(e),i=Math.abs(i),t){case"top-right":case"top-left":case"top":n=i-7;break;case"bottom-right":case"bottom-left":case"bottom":n=7-i}switch(t){case"top-right":case"bottom-right":case"right":r=-e;break;case"top-left":case"bottom-left":case"left":r=e}return[r,n]}(t,e[0],e[1]):function(t,e){var i=0,r=0;e<0&&(e=0);var n=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":r=n-7;break;case"bottom-right":case"bottom-left":r=7-n;break;case"bottom":r=7-e;break;case"top":r=e-7}switch(t){case"top-right":case"bottom-right":i=-n;break;case"top-left":case"bottom-left":i=n;break;case"left":i=e;break;case"right":i=-e}return[i,r]}(t,e[0])}var ll=Js.VectorTileFeature.types,cl=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function pl(t,e,i,r,n,o,a,s,u,l,c,p,h){var f=s?Math.min(32640,Math.round(s[0])):0,d=s?Math.min(32640,Math.round(s[1])):0;t.emplaceBack(e,i,Math.round(32*r),Math.round(32*n),o,a,(f<<1)+(u?1:0),d,16*l,16*c,256*p,256*h)}function hl(t,e,i){t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i)}function fl(t){for(var e=0,i=t.sections;e<i.length;e+=1)if(vn(i[e].text))return!0;return!1}var dl=function(t){this.layoutVertexArray=new io,this.indexArray=new lo,this.programConfigurations=t,this.segments=new Co,this.dynamicLayoutVertexArray=new ro,this.opacityVertexArray=new no,this.placedSymbolArray=new wo};dl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},dl.prototype.upload=function(t,e,i,r){this.isEmpty()||(i&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,gu.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,vu.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,cl,!0),this.opacityVertexBuffer.itemSize=1),(i||r)&&this.programConfigurations.upload(t))},dl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Qr("SymbolBuffers",dl);var ml=function(t,e,i){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new i,this.segments=new Co,this.collisionVertexArray=new uo};ml.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,xu.members,!0)},ml.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Qr("CollisionBuffers",ml);var yl=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ca([]),this.placementViewportMatrix=Ca([]);var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=rl(this.zoom,e["text-size"]),this.iconSizeData=rl(this.zoom,e["icon-size"]);var i=this.layers[0].layout,r=i.get("symbol-sort-key"),n=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==n&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===n||"auto"===n&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map((function(t){return Qu[t]}))),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id})),this.sourceID=t.sourceID};yl.prototype.createArrays=function(){this.text=new dl(new ra(this.layers,this.zoom,(function(t){return/^text/.test(t)}))),this.icon=new dl(new ra(this.layers,this.zoom,(function(t){return/^icon/.test(t)}))),this.glyphOffsetArray=new To,this.lineVertexArray=new Ao,this.symbolInstances=new So},yl.prototype.calculateGlyphDependencies=function(t,e,i,r,n){for(var o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(i||r)&&n){var a=Su[t.charAt(o)];a&&(e[a.charCodeAt(0)]=!0)}},yl.prototype.populate=function(t,e,i){var r=this.layers[0],n=r.layout,o=n.get("text-font"),a=n.get("text-field"),s=n.get("icon-image"),u=("constant"!==a.value.kind||a.value.value instanceof ge&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),l="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,c=n.get("symbol-sort-key");if(this.features=[],u||l){for(var p=e.iconDependencies,h=e.glyphDependencies,f=e.availableImages,d=new kn(this.zoom),m=0,y=t;m<y.length;m+=1){var _=y[m],g=_.feature,v=_.id,x=_.index,b=_.sourceLayerIndex,w=r._featureFilter.needGeometry,I=la(g,w);if(r._featureFilter.filter(d,I,i)){w||(I.geometry=ua(g));var S=void 0;if(u){var T=r.getValueAndResolveTokens("text-field",I,i,f),A=ge.factory(T);fl(A)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===An()||this.hasRTLText&&En.isParsed())&&(S=Iu(A,r,I))}var z=void 0;if(l){var E=r.getValueAndResolveTokens("icon-image",I,i,f);z=E instanceof ve?E:ve.fromString(E)}if(S||z){var k=this.sortFeaturesByKey?c.evaluate(I,{},i):void 0;if(this.features.push({id:v,text:S,icon:z,index:x,sourceLayerIndex:b,geometry:I.geometry,properties:g.properties,type:ll[g.type],sortKey:k}),z&&(p[z.name]=!0),S){var C=o.evaluate(I,{},i).join(","),P="map"===n.get("text-rotation-alignment")&&"point"!==n.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Qu.vertical)>=0;for(var D=0,M=S.sections;D<M.length;D+=1){var L=M[D];if(L.image)p[L.image.name]=!0;else{var B=dn(S.toString()),R=L.fontStack||C,F=h[R]=h[R]||{};this.calculateGlyphDependencies(L.text,F,P,this.allowVerticalPlacement,B)}}}}}}"line"===n.get("symbol-placement")&&(this.features=function(t){var e={},i={},r=[],n=0;function o(e){r.push(t[e]),n++}function a(t,e,n){var o=i[t];return delete i[t],i[e]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(n[0]),o}function s(t,i,n){var o=e[i];return delete e[i],e[t]=o,r[o].geometry[0].shift(),r[o].geometry[0]=n[0].concat(r[o].geometry[0]),o}function u(t,e,i){var r=i?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var l=0;l<t.length;l++){var c=t[l],p=c.geometry,h=c.text?c.text.toString():null;if(h){var f=u(h,p),d=u(h,p,!0);if(f in i&&d in e&&i[f]!==e[d]){var m=s(f,d,p),y=a(f,d,r[m].geometry);delete e[f],delete i[d],i[u(h,r[y].geometry,!0)]=y,r[m].geometry=null}else f in i?a(f,d,p):d in e?s(f,d,p):(o(l),e[f]=n-1,i[d]=n-1)}else o(l)}return r.filter((function(t){return t.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(t,e){return t.sortKey-e.sortKey}))}},yl.prototype.update=function(t,e,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,i),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,i))},yl.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},yl.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},yl.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},yl.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},yl.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},yl.prototype.addToLineVertexArray=function(t,e){var i=this.lineVertexArray.length;if(void 0!==t.segment){for(var r=t.dist(e[t.segment+1]),n=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:r},a<e.length-1&&(r+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:n},s>0&&(n+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var l=o[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},yl.prototype.addSymbols=function(t,e,i,r,n,o,a,s,u,l,c,p){for(var h=t.indexArray,f=t.layoutVertexArray,d=t.segments.prepareSegment(4*e.length,f,h,this.canOverlap?o.sortKey:void 0),m=this.glyphOffsetArray.length,y=d.vertexLength,_=this.allowVerticalPlacement&&a===Qu.vertical?Math.PI/2:0,g=o.text&&o.text.sections,v=0;v<e.length;v++){var x=e[v],b=x.tl,w=x.tr,I=x.bl,S=x.br,T=x.tex,A=x.pixelOffsetTL,z=x.pixelOffsetBR,E=x.minFontScaleX,k=x.minFontScaleY,C=x.glyphOffset,P=x.isSDF,D=x.sectionIndex,M=d.vertexLength,L=C[1];pl(f,s.x,s.y,b.x,L+b.y,T.x,T.y,i,P,A.x,A.y,E,k),pl(f,s.x,s.y,w.x,L+w.y,T.x+T.w,T.y,i,P,z.x,A.y,E,k),pl(f,s.x,s.y,I.x,L+I.y,T.x,T.y+T.h,i,P,A.x,z.y,E,k),pl(f,s.x,s.y,S.x,L+S.y,T.x+T.w,T.y+T.h,i,P,z.x,z.y,E,k),hl(t.dynamicLayoutVertexArray,s,_),h.emplaceBack(M,M+1,M+2),h.emplaceBack(M+1,M+2,M+3),d.vertexLength+=4,d.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(C[0]),v!==e.length-1&&D===e[v+1].sectionIndex||t.programConfigurations.populatePaintArrays(f.length,o,o.index,{},p,g&&g[D])}t.placedSymbolArray.emplaceBack(s.x,s.y,m,this.glyphOffsetArray.length-m,y,u,l,s.segment,i?i[0]:0,i?i[1]:0,r[0],r[1],a,0,!1,0,c)},yl.prototype._addCollisionDebugVertex=function(t,e,i,r,n,o){return e.emplaceBack(0,0),t.emplaceBack(i.x,i.y,r,n,Math.round(o.x),Math.round(o.y))},yl.prototype.addCollisionDebugVertices=function(t,e,i,r,o,a,s){var u=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),l=u.vertexLength,c=o.layoutVertexArray,p=o.collisionVertexArray,h=s.anchorX,f=s.anchorY;this._addCollisionDebugVertex(c,p,a,h,f,new n(t,e)),this._addCollisionDebugVertex(c,p,a,h,f,new n(i,e)),this._addCollisionDebugVertex(c,p,a,h,f,new n(i,r)),this._addCollisionDebugVertex(c,p,a,h,f,new n(t,r)),u.vertexLength+=4;var d=o.indexArray;d.emplaceBack(l,l+1),d.emplaceBack(l+1,l+2),d.emplaceBack(l+2,l+3),d.emplaceBack(l+3,l),u.primitiveLength+=4},yl.prototype.addDebugCollisionBoxes=function(t,e,i,r){for(var n=t;n<e;n++){var o=this.collisionBoxArray.get(n);this.addCollisionDebugVertices(o.x1,o.y1,o.x2,o.y2,r?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,i)}},yl.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ml(ao,bu.members,yo),this.iconCollisionBox=new ml(ao,bu.members,yo);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},yl.prototype._deserializeCollisionBoxesForSymbol=function(t,e,i,r,n,o,a,s,u){for(var l={},c=e;c<i;c++){var p=t.get(c);l.textBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},l.textFeatureIndex=p.featureIndex;break}for(var h=r;h<n;h++){var f=t.get(h);l.verticalTextBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,anchorPointX:f.anchorPointX,anchorPointY:f.anchorPointY},l.verticalTextFeatureIndex=f.featureIndex;break}for(var d=o;d<a;d++){var m=t.get(d);l.iconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,anchorPointX:m.anchorPointX,anchorPointY:m.anchorPointY},l.iconFeatureIndex=m.featureIndex;break}for(var y=s;y<u;y++){var _=t.get(y);l.verticalIconBox={x1:_.x1,y1:_.y1,x2:_.x2,y2:_.y2,anchorPointX:_.anchorPointX,anchorPointY:_.anchorPointY},l.verticalIconFeatureIndex=_.featureIndex;break}return l},yl.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var i=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},yl.prototype.hasTextData=function(){return this.text.segments.get().length>0},yl.prototype.hasIconData=function(){return this.icon.segments.get().length>0},yl.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},yl.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},yl.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},yl.prototype.addIndicesForPlacedSymbol=function(t,e){for(var i=t.placedSymbolArray.get(e),r=i.vertexStartIndex+4*i.numGlyphs,n=i.vertexStartIndex;n<r;n+=4)t.indexArray.emplaceBack(n,n+1,n+2),t.indexArray.emplaceBack(n+1,n+2,n+3)},yl.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),i=Math.cos(t),r=[],n=[],o=[],a=0;a<this.symbolInstances.length;++a){o.push(a);var s=this.symbolInstances.get(a);r.push(0|Math.round(e*s.anchorX+i*s.anchorY)),n.push(s.featureIndex)}return o.sort((function(t,e){return r[t]-r[e]||n[e]-n[t]})),o},yl.prototype.addToSortKeyRanges=function(t,e){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===e?i.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},yl.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,r=this.symbolInstanceIndexes;i<r.length;i+=1){var n=this.symbolInstances.get(r[i]);this.featureSortOrder.push(n.featureIndex),[n.rightJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.leftJustifiedTextSymbolIndex].forEach((function(t,i,r){t>=0&&r.indexOf(t)===i&&e.addIndicesForPlacedSymbol(e.text,t)})),n.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,n.verticalPlacedTextSymbolIndex),n.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,n.placedIconSymbolIndex),n.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,n.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Qr("SymbolBucket",yl,{omit:["layers","collisionBoxArray","features","compareText"]}),yl.MAX_GLYPHS=65535,yl.addDynamicAttributes=hl;var _l=new qn({"symbol-placement":new On(Zt.layout_symbol["symbol-placement"]),"symbol-spacing":new On(Zt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new On(Zt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Vn(Zt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new On(Zt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new On(Zt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new On(Zt.layout_symbol["icon-ignore-placement"]),"icon-optional":new On(Zt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new On(Zt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Vn(Zt.layout_symbol["icon-size"]),"icon-text-fit":new On(Zt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new On(Zt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Vn(Zt.layout_symbol["icon-image"]),"icon-rotate":new Vn(Zt.layout_symbol["icon-rotate"]),"icon-padding":new On(Zt.layout_symbol["icon-padding"]),"icon-keep-upright":new On(Zt.layout_symbol["icon-keep-upright"]),"icon-offset":new Vn(Zt.layout_symbol["icon-offset"]),"icon-anchor":new Vn(Zt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new On(Zt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new On(Zt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new On(Zt.layout_symbol["text-rotation-alignment"]),"text-field":new Vn(Zt.layout_symbol["text-field"]),"text-font":new Vn(Zt.layout_symbol["text-font"]),"text-size":new Vn(Zt.layout_symbol["text-size"]),"text-max-width":new Vn(Zt.layout_symbol["text-max-width"]),"text-line-height":new On(Zt.layout_symbol["text-line-height"]),"text-letter-spacing":new Vn(Zt.layout_symbol["text-letter-spacing"]),"text-justify":new Vn(Zt.layout_symbol["text-justify"]),"text-radial-offset":new Vn(Zt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new On(Zt.layout_symbol["text-variable-anchor"]),"text-anchor":new Vn(Zt.layout_symbol["text-anchor"]),"text-max-angle":new On(Zt.layout_symbol["text-max-angle"]),"text-writing-mode":new On(Zt.layout_symbol["text-writing-mode"]),"text-rotate":new Vn(Zt.layout_symbol["text-rotate"]),"text-padding":new On(Zt.layout_symbol["text-padding"]),"text-keep-upright":new On(Zt.layout_symbol["text-keep-upright"]),"text-transform":new Vn(Zt.layout_symbol["text-transform"]),"text-offset":new Vn(Zt.layout_symbol["text-offset"]),"text-allow-overlap":new On(Zt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new On(Zt.layout_symbol["text-ignore-placement"]),"text-optional":new On(Zt.layout_symbol["text-optional"])}),gl={paint:new qn({"icon-opacity":new Vn(Zt.paint_symbol["icon-opacity"]),"icon-color":new Vn(Zt.paint_symbol["icon-color"]),"icon-halo-color":new Vn(Zt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Vn(Zt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Vn(Zt.paint_symbol["icon-halo-blur"]),"icon-translate":new On(Zt.paint_symbol["icon-translate"]),"icon-translate-anchor":new On(Zt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Vn(Zt.paint_symbol["text-opacity"]),"text-color":new Vn(Zt.paint_symbol["text-color"],{runtimeType:ie,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new Vn(Zt.paint_symbol["text-halo-color"]),"text-halo-width":new Vn(Zt.paint_symbol["text-halo-width"]),"text-halo-blur":new Vn(Zt.paint_symbol["text-halo-blur"]),"text-translate":new On(Zt.paint_symbol["text-translate"]),"text-translate-anchor":new On(Zt.paint_symbol["text-translate-anchor"])}),layout:_l},vl=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Qt,this.defaultValue=t};vl.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},vl.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},vl.prototype.outputDefined=function(){return!1},vl.prototype.serialize=function(){return null},Qr("FormatSectionOverride",vl,{omit:["defaultValue"]});var xl=function(t){function e(e){t.call(this,e,gl)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,i){if(t.prototype.recalculate.call(this,e,i),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var r=this.layout.get("text-writing-mode");if(r){for(var n=[],o=0,a=r;o<a.length;o+=1){var s=a[o];n.indexOf(s)<0&&n.push(s)}this.layout._values["text-writing-mode"]=n}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(t,e,i,r){var n=this.layout.get(t).evaluate(e,{},i,r),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||ar(o.value)||!n?n:function(t,e){return e.replace(/{([^{}]+)}/g,(function(e,i){return i in t?String(t[i]):""}))}(e.properties,n)},e.prototype.createBucket=function(t){return new yl(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var t=0,i=gl.paint.overridableProperties;t<i.length;t+=1){var r=i[t];if(e.hasPaintOverride(this.layout,r)){var n,o=this.paint.get(r),a=new vl(o),s=new or(a,o.property.specification);n="constant"===o.value.kind||"source"===o.value.kind?new ur("source",s):new lr("composite",s,o.value.zoomStops,o.value._interpolationType),this.paint._values[r]=new Rn(o.property,n,o.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(t,i,r){return!(!this.layout||i.isDataDriven()||r.isDataDriven())&&e.hasPaintOverride(this.layout,t)},e.hasPaintOverride=function(t,e){var i=t.get("text-field"),r=gl.paint.properties[e],n=!1,o=function(t){for(var e=0,i=t;e<i.length;e+=1)if(r.overrides&&r.overrides.hasOverride(i[e]))return void(n=!0)};if("constant"===i.value.kind&&i.value.value instanceof ge)o(i.value.value.sections);else if("source"===i.value.kind){var a=function(t){n||(t instanceof Se&&we(t.value)===ae?o(t.value.sections):t instanceof Ee?o(t.sections):t.eachChild(a))},s=i.value;s._styleExpression&&a(s._styleExpression.expression)}return n},e}(Zn),bl={paint:new qn({"background-color":new On(Zt.paint_background["background-color"]),"background-pattern":new jn(Zt.paint_background["background-pattern"]),"background-opacity":new On(Zt.paint_background["background-opacity"])})},wl=function(t){function e(e){t.call(this,e,bl)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Zn),Il={paint:new qn({"raster-opacity":new On(Zt.paint_raster["raster-opacity"]),"raster-hue-rotate":new On(Zt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new On(Zt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new On(Zt.paint_raster["raster-brightness-max"]),"raster-saturation":new On(Zt.paint_raster["raster-saturation"]),"raster-contrast":new On(Zt.paint_raster["raster-contrast"]),"raster-resampling":new On(Zt.paint_raster["raster-resampling"]),"raster-fade-duration":new On(Zt.paint_raster["raster-fade-duration"])})},Sl=function(t){function e(e){t.call(this,e,Il)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Zn),Tl=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},e}(Zn),Al={circle:qa,heatmap:$a,hillshade:es,fill:js,"fill-extrusion":nu,line:yu,symbol:xl,background:wl,raster:Sl};function zl(t){return"custom"===t.type?new Tl(t):new Al[t.type](t)}var El=a.HTMLImageElement,kl=a.HTMLCanvasElement,Cl=a.HTMLVideoElement,Pl=a.ImageData,Dl=a.ImageBitmap,Ml=function(t,e,i,r){this.context=t,this.format=i,this.texture=t.gl.createTexture(),this.update(e,r)};function Ll(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}Ml.prototype.update=function(t,e,i){var r=t.width,n=t.height,o=!(this.size&&this.size[0]===r&&this.size[1]===n||i),a=this.context,s=a.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[r,n],t instanceof El||t instanceof kl||t instanceof Cl||t instanceof Pl||Dl&&t instanceof Dl?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,r,n,0,this.format,s.UNSIGNED_BYTE,t.data);else{var u=i||{x:0,y:0},l=u.x,c=u.y;t instanceof El||t instanceof kl||t instanceof Cl||t instanceof Pl||Dl&&t instanceof Dl?s.texSubImage2D(s.TEXTURE_2D,0,l,c,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,l,c,r,n,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},Ml.prototype.bind=function(t,e,i){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),i!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,i||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)},Ml.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Ml.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Bl=function(t){function e(){t.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new Ya({width:1,height:1}),this.dirty=!0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isLoaded=function(){return this.loaded},e.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,i=this.requestors;e<i.length;e+=1){var r=i[e];this._notify(r.ids,r.callback)}this.requestors=[]}},e.prototype.getImage=function(t){return this.images[t]},e.prototype.addImage=function(t,e){this._validate(t,e)&&(this.images[t]=e)},e.prototype._validate=function(t,e){var i=!0;return this._validateStretch(e.stretchX,e.data&&e.data.width)||(this.fire(new Nt(new Error('Image "'+t+'" has invalid "stretchX" value'))),i=!1),this._validateStretch(e.stretchY,e.data&&e.data.height)||(this.fire(new Nt(new Error('Image "'+t+'" has invalid "stretchY" value'))),i=!1),this._validateContent(e.content,e)||(this.fire(new Nt(new Error('Image "'+t+'" has invalid "content" value'))),i=!1),i},e.prototype._validateStretch=function(t,e){if(!t)return!0;for(var i=0,r=0,n=t;r<n.length;r+=1){var o=n[r];if(o[0]<i||o[1]<o[0]||e<o[1])return!1;i=o[1]}return!0},e.prototype._validateContent=function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))},e.prototype.updateImage=function(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0},e.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},e.prototype.listImages=function(){return Object.keys(this.images)},e.prototype.getImages=function(t,e){var i=!0;if(!this.isLoaded())for(var r=0,n=t;r<n.length;r+=1)this.images[n[r]]||(i=!1);this.isLoaded()||i?this._notify(t,e):this.requestors.push({ids:t,callback:e})},e.prototype._notify=function(t,e){for(var i={},r=0,n=t;r<n.length;r+=1){var o=n[r];this.images[o]||this.fire(new jt("styleimagemissing",{id:o}));var a=this.images[o];a?i[o]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf,version:a.version,stretchX:a.stretchX,stretchY:a.stretchY,content:a.content,hasRenderCallback:Boolean(a.userImage&&a.userImage.render)}:z('Image "'+o+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}e(null,i)},e.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},e.prototype.getPattern=function(t){var e=this.patterns[t],i=this.getImage(t);if(!i)return null;if(e&&e.position.version===i.version)return e.position;if(e)e.position.version=i.version;else{var r={w:i.data.width+2,h:i.data.height+2,x:0,y:0},n=new Ku(r,i);this.patterns[t]={bin:r,position:n}}return this._updatePatternAtlas(),this.patterns[t].position},e.prototype.bind=function(t){var e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ml(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)},e.prototype._updatePatternAtlas=function(){var t=[];for(var e in this.patterns)t.push(this.patterns[e].bin);var i=Hu(t),r=i.w,n=i.h,o=this.atlasImage;for(var a in o.resize({width:r||1,height:n||1}),this.patterns){var s=this.patterns[a].bin,u=s.x+1,l=s.y+1,c=this.images[a].data,p=c.width,h=c.height;Ya.copy(c,o,{x:0,y:0},{x:u,y:l},{width:p,height:h}),Ya.copy(c,o,{x:0,y:h-1},{x:u,y:l-1},{width:p,height:1}),Ya.copy(c,o,{x:0,y:0},{x:u,y:l+h},{width:p,height:1}),Ya.copy(c,o,{x:p-1,y:0},{x:u-1,y:l},{width:1,height:h}),Ya.copy(c,o,{x:0,y:0},{x:u+p,y:l},{width:1,height:h})}this.dirty=!0},e.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},e.prototype.dispatchRenderCallbacks=function(t){for(var e=0,i=t;e<i.length;e+=1){var r=i[e];if(!this.callbackDispatchedThisFrame[r]){this.callbackDispatchedThisFrame[r]=!0;var n=this.images[r];Ll(n)&&this.updateImage(r,n)}}},e}(qt),Rl=Vl,Fl=Vl,Ol=1e20;function Vl(t,e,i,r,n,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=n||"sans-serif",this.fontWeight=o||"normal",this.radius=i||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Ul(t,e,i,r,n,o,a){for(var s=0;s<e;s++){for(var u=0;u<i;u++)r[u]=t[u*e+s];for(jl(r,n,o,a,i),u=0;u<i;u++)t[u*e+s]=n[u]}for(u=0;u<i;u++){for(s=0;s<e;s++)r[s]=t[u*e+s];for(jl(r,n,o,a,e),s=0;s<e;s++)t[u*e+s]=Math.sqrt(n[s])}}function jl(t,e,i,r,n){i[0]=0,r[0]=-Ol,r[1]=+Ol;for(var o=1,a=0;o<n;o++){for(var s=(t[o]+o*o-(t[i[a]]+i[a]*i[a]))/(2*o-2*i[a]);s<=r[a];)a--,s=(t[o]+o*o-(t[i[a]]+i[a]*i[a]))/(2*o-2*i[a]);i[++a]=o,r[a]=s,r[a+1]=+Ol}for(o=0,a=0;o<n;o++){for(;r[a+1]<o;)a++;e[o]=(o-i[a])*(o-i[a])+t[i[a]]}}Vl.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var n=e.data[4*r+3]/255;this.gridOuter[r]=1===n?0:0===n?Ol:Math.pow(Math.max(0,.5-n),2),this.gridInner[r]=1===n?Ol:0===n?0:Math.pow(Math.max(0,n-.5),2)}for(Ul(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Ul(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++)i[r]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[r]-this.gridInner[r])/this.radius+this.cutoff))));return i},Rl.default=Fl;var Nl=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};Nl.prototype.setURL=function(t){this.url=t},Nl.prototype.getGlyphs=function(t,e){var i=this,r=[];for(var n in t)for(var o=0,a=t[n];o<a.length;o+=1)r.push({stack:n,id:a[o]});f(r,(function(t,e){var r=t.stack,n=t.id,o=i.entries[r];o||(o=i.entries[r]={glyphs:{},requests:{},ranges:{}});var a=o.glyphs[n];if(void 0===a){if(a=i._tinySDF(o,r,n))return o.glyphs[n]=a,void e(null,{stack:r,id:n,glyph:a});var s=Math.floor(n/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else if(o.ranges[s])e(null,{stack:r,id:n,glyph:a});else{var u=o.requests[s];u||(u=o.requests[s]=[],Nl.loadGlyphRange(r,s,i.url,i.requestManager,(function(t,e){if(e){for(var r in e)i._doesCharSupportLocalGlyph(+r)||(o.glyphs[+r]=e[+r]);o.ranges[s]=!0}for(var n=0,a=u;n<a.length;n+=1)(0,a[n])(t,e);delete o.requests[s]}))),u.push((function(t,i){t?e(t):i&&e(null,{stack:r,id:n,glyph:i[n]||null})}))}}else e(null,{stack:r,id:n,glyph:a})}),(function(t,i){if(t)e(t);else if(i){for(var r={},n=0,o=i;n<o.length;n+=1){var a=o[n],s=a.stack,u=a.id,l=a.glyph;(r[s]||(r[s]={}))[u]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}e(null,r)}}))},Nl.prototype._doesCharSupportLocalGlyph=function(t){return!!this.localIdeographFontFamily&&(ln(t)||cn(t)||sn(t)||un(t))},Nl.prototype._tinySDF=function(t,e,i){var r=this.localIdeographFontFamily;if(r&&this._doesCharSupportLocalGlyph(i)){var n=t.tinySDF;if(!n){var o="400";/bold/i.test(e)?o="900":/medium/i.test(e)?o="500":/light/i.test(e)&&(o="200"),n=t.tinySDF=new Nl.TinySDF(24,3,8,.25,r,o)}return{id:i,bitmap:new Ka({width:30,height:30},n.draw(String.fromCharCode(i))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Nl.loadGlyphRange=function(t,e,i,r,n){var o=256*e,a=o+255,s=r.transformRequest(r.normalizeGlyphsURL(i).replace("{fontstack}",t).replace("{range}",o+"-"+a),Et.Glyphs);Bt(s,(function(t,e){if(t)n(t);else if(e){for(var i={},r=0,o=function(t){return new zu(t).readFields(Gu,[])}(e);r<o.length;r+=1){var a=o[r];i[a.id]=a}n(null,i)}}))},Nl.TinySDF=Rl;var ql=function(){this.specification=Zt.light.position};ql.prototype.possiblyEvaluate=function(t,e){return r=(i=t.expression.evaluate(e))[0],n=i[1],o=i[2],n+=90,n*=Math.PI/180,o*=Math.PI/180,{x:r*Math.cos(n)*Math.sin(o),y:r*Math.sin(n)*Math.sin(o),z:r*Math.cos(o)};var i,r,n,o},ql.prototype.interpolate=function(t,e,i){return{x:oi(t.x,e.x,i),y:oi(t.y,e.y,i),z:oi(t.z,e.z,i)}};var Zl=new qn({anchor:new On(Zt.light.anchor),position:new ql,color:new On(Zt.light.color),intensity:new On(Zt.light.intensity)}),Gl=function(t){function e(e){t.call(this),this._transitionable=new Dn(Zl),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getLight=function(){return this._transitionable.serialize()},e.prototype.setLight=function(t,e){if(void 0===e&&(e={}),!this._validate(qr,t,e))for(var i in t){var r=t[i];w(i,"-transition")?this._transitionable.setTransition(i.slice(0,-"-transition".length),r):this._transitionable.setValue(i,r)}},e.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},e.prototype.hasTransition=function(){return this._transitioning.hasTransition()},e.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},e.prototype._validate=function(t,e,i){return(!i||!1!==i.validate)&&Xr(this,t.call(Nr,m({value:e,style:{glyphs:!0,sprite:!0},styleSpec:Zt})))},e}(qt),Xl=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Xl.prototype.getDash=function(t,e){var i=t.join(",")+String(e);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(t,e)),this.dashEntry[i]},Xl.prototype.getDashRanges=function(t,e,i){var r=[],n=t.length%2==1?-t[t.length-1]*i:0,o=t[0]*i,a=!0;r.push({left:n,right:o,isDash:a,zeroLength:0===t[0]});for(var s=t[0],u=1;u<t.length;u++){var l=t[u];r.push({left:n=s*i,right:o=(s+=l)*i,isDash:a=!a,zeroLength:0===l})}return r},Xl.prototype.addRoundDash=function(t,e,i){for(var r=e/2,n=-i;n<=i;n++)for(var o=this.width*(this.nextRow+i+n),a=0,s=t[a],u=0;u<this.width;u++){u/s.right>1&&(s=t[++a]);var l=Math.abs(u-s.left),c=Math.abs(u-s.right),p=Math.min(l,c),h=void 0,f=n/i*(r+1);if(s.isDash){var d=r-Math.abs(f);h=Math.sqrt(p*p+d*d)}else h=r-Math.sqrt(p*p+f*f);this.data[o+u]=Math.max(0,Math.min(255,h+128))}},Xl.prototype.addRegularDash=function(t){for(var e=t.length-1;e>=0;--e){var i=t[e],r=t[e+1];i.zeroLength?t.splice(e,1):r&&r.isDash===i.isDash&&(r.left=i.left,t.splice(e,1))}var n=t[0],o=t[t.length-1];n.isDash===o.isDash&&(n.left=o.left-this.width,o.right=n.right+this.width);for(var a=this.width*this.nextRow,s=0,u=t[s],l=0;l<this.width;l++){l/u.right>1&&(u=t[++s]);var c=Math.abs(l-u.left),p=Math.abs(l-u.right),h=Math.min(c,p);this.data[a+l]=Math.max(0,Math.min(255,(u.isDash?h:-h)+128))}},Xl.prototype.addDash=function(t,e){var i=e?7:0,r=2*i+1;if(this.nextRow+r>this.height)return z("LineAtlas out of space"),null;for(var n=0,o=0;o<t.length;o++)n+=t[o];if(0!==n){var a=this.width/n,s=this.getDashRanges(t,this.width,a);e?this.addRoundDash(s,a,i):this.addRegularDash(s)}var u={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:n};return this.nextRow+=r,this.dirty=!0,u},Xl.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))};var Wl=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};Wl.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){t._triggered=!1,t._callback()}),0))},Wl.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Hl=function(t,e,i){this.target=t,this.parent=e,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},b(["receive","process"],this),this.invoker=new Wl(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=C()?t:a};Hl.prototype.send=function(t,e,i,r,n){var o=this;void 0===n&&(n=!1);var a=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[a]=i);var s=M(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!i,targetMapId:r,mustQueue:n,sourceMapId:this.mapId,data:rn(e,s)},s),{cancel:function(){i&&delete o.callbacks[a],o.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:o.mapId})}}},Hl.prototype.receive=function(t){var e=t.data,i=e.id;if(i&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[i];var r=this.cancelCallbacks[i];delete this.cancelCallbacks[i],r&&r()}else C()||e.mustQueue?(this.tasks[i]=e,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,e)},Hl.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},Hl.prototype.processTask=function(t,e){var i=this;if("<response>"===e.type){var r=this.callbacks[t];delete this.callbacks[t],r&&(e.error?r(nn(e.error)):r(null,nn(e.data)))}else{var n=!1,o=M(this.globalScope)?void 0:[],a=e.hasCallback?function(e,r){n=!0,delete i.cancelCallbacks[t],i.target.postMessage({id:t,type:"<response>",sourceMapId:i.mapId,error:e?rn(e):null,data:rn(r,o)},o)}:function(t){n=!0},s=null,u=nn(e.data);if(this.parent[e.type])s=this.parent[e.type](e.sourceMapId,u,a);else if(this.parent.getWorkerSource){var l=e.type.split(".");s=this.parent.getWorkerSource(e.sourceMapId,l[0],u.source)[l[1]](u,a)}else a(new Error("Could not find function "+e.type));!n&&s&&s.cancel&&(this.cancelCallbacks[t]=s.cancel)}},Hl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Kl=function t(e,i){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=g();for(var r=this.workerPool.acquire(this.id),n=0;n<r.length;n++){var o=new t.Actor(r[n],i,this.id);o.name="Worker "+n,this.actors.push(o)}};function Yl(t,e,i){var r=2*Math.PI*6378137/256/Math.pow(2,i);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}Kl.prototype.broadcast=function(t,e,i){f(this.actors,(function(i,r){i.send(t,e,r)}),i=i||function(){})},Kl.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Kl.prototype.remove=function(){this.actors.forEach((function(t){t.remove()})),this.actors=[],this.workerPool.release(this.id)},Kl.Actor=Hl;var Jl=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Jl.prototype.setNorthEast=function(t){return this._ne=t instanceof Ql?new Ql(t.lng,t.lat):Ql.convert(t),this},Jl.prototype.setSouthWest=function(t){return this._sw=t instanceof Ql?new Ql(t.lng,t.lat):Ql.convert(t),this},Jl.prototype.extend=function(t){var e,i,r=this._sw,n=this._ne;if(t instanceof Ql)e=t,i=t;else{if(!(t instanceof Jl))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Jl.convert(t)):this.extend(Ql.convert(t)):this;if(i=t._ne,!(e=t._sw)||!i)return this}return r||n?(r.lng=Math.min(e.lng,r.lng),r.lat=Math.min(e.lat,r.lat),n.lng=Math.max(i.lng,n.lng),n.lat=Math.max(i.lat,n.lat)):(this._sw=new Ql(e.lng,e.lat),this._ne=new Ql(i.lng,i.lat)),this},Jl.prototype.getCenter=function(){return new Ql((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Jl.prototype.getSouthWest=function(){return this._sw},Jl.prototype.getNorthEast=function(){return this._ne},Jl.prototype.getNorthWest=function(){return new Ql(this.getWest(),this.getNorth())},Jl.prototype.getSouthEast=function(){return new Ql(this.getEast(),this.getSouth())},Jl.prototype.getWest=function(){return this._sw.lng},Jl.prototype.getSouth=function(){return this._sw.lat},Jl.prototype.getEast=function(){return this._ne.lng},Jl.prototype.getNorth=function(){return this._ne.lat},Jl.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Jl.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Jl.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Jl.prototype.contains=function(t){var e=Ql.convert(t),i=e.lng,r=e.lat,n=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(n=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&n},Jl.convert=function(t){return!t||t instanceof Jl?t:new Jl(t)};var Ql=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ql.prototype.wrap=function(){return new Ql(h(this.lng,-180,180),this.lat)},Ql.prototype.toArray=function(){return[this.lng,this.lat]},Ql.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ql.prototype.distanceTo=function(t){var e=Math.PI/180,i=this.lat*e,r=t.lat*e,n=Math.sin(i)*Math.sin(r)+Math.cos(i)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(n,1))},Ql.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return new Jl(new Ql(this.lng-i,this.lat-e),new Ql(this.lng+i,this.lat+e))},Ql.convert=function(t){if(t instanceof Ql)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Ql(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Ql(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var $l=2*Math.PI*6371008.8;function tc(t){return $l*Math.cos(t*Math.PI/180)}function ec(t){return(180+t)/360}function ic(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function rc(t,e){return t/tc(e)}function nc(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var oc=function(t,e,i){void 0===i&&(i=0),this.x=+t,this.y=+e,this.z=+i};oc.fromLngLat=function(t,e){void 0===e&&(e=0);var i=Ql.convert(t);return new oc(ec(i.lng),ic(i.lat),rc(e,i.lat))},oc.prototype.toLngLat=function(){return new Ql(360*this.x-180,nc(this.y))},oc.prototype.toAltitude=function(){return this.z*tc(nc(this.y))},oc.prototype.meterInMercatorCoordinateUnits=function(){return 1/$l*(t=nc(this.y),1/Math.cos(t*Math.PI/180));var t};var ac=function(t,e,i){this.z=t,this.x=e,this.y=i,this.key=lc(0,t,t,e,i)};ac.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},ac.prototype.url=function(t,e){var i,r,n,o,a,s=(r=this.y,n=this.z,o=Yl(256*(i=this.x),256*(r=Math.pow(2,n)-r-1),n),a=Yl(256*(i+1),256*(r+1),n),o[0]+","+o[1]+","+a[0]+","+a[1]),u=function(t,e,i){for(var r,n="",o=t;o>0;o--)n+=(e&(r=1<<o-1)?1:0)+(i&r?2:0);return n}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)},ac.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new n(8192*(t.x*e-this.x),8192*(t.y*e-this.y))},ac.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var sc=function(t,e){this.wrap=t,this.canonical=e,this.key=lc(t,e.z,e.z,e.x,e.y)},uc=function(t,e,i,r,n){this.overscaledZ=t,this.wrap=e,this.canonical=new ac(i,+r,+n),this.key=lc(e,t,i,r,n)};function lc(t,e,i,r,n){(t*=2)<0&&(t=-1*t-1);var o=1<<i;return(o*o*t+o*n+r).toString(36)+i.toString(36)+e.toString(36)}function cc(t,e,i){var r=function(r,n){if(r)return i(r);if(n){var o=y(m(n,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);n.vector_layers&&(o.vectorLayers=n.vector_layers,o.vectorLayerIds=o.vectorLayers.map((function(t){return t.id}))),o.tiles=e.canonicalizeTileset(o,t.url),i(null,o)}};return t.url?Lt(e.transformRequest(e.normalizeSourceURL(t.url),Et.Source),r):U.frame((function(){return r(null,t)}))}uc.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},uc.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new uc(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new uc(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},uc.prototype.calculateScaledKey=function(t,e){var i=this.canonical.z-t;return t>this.canonical.z?lc(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):lc(this.wrap*+e,t,t,this.canonical.x>>i,this.canonical.y>>i)},uc.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},uc.prototype.children=function(t){if(this.overscaledZ>=t)return[new uc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,i=2*this.canonical.x,r=2*this.canonical.y;return[new uc(e,this.wrap,e,i,r),new uc(e,this.wrap,e,i+1,r),new uc(e,this.wrap,e,i,r+1),new uc(e,this.wrap,e,i+1,r+1)]},uc.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},uc.prototype.wrapped=function(){return new uc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},uc.prototype.unwrapTo=function(t){return new uc(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},uc.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},uc.prototype.toUnwrapped=function(){return new sc(this.wrap,this.canonical)},uc.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},uc.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new oc(t.x-this.wrap,t.y))},Qr("CanonicalTileID",ac),Qr("OverscaledTileID",uc,{omit:["posMatrix"]});var pc=function(t,e,i){this.bounds=Jl.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=i||24};pc.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},pc.prototype.contains=function(t){var e=Math.pow(2,t.z),i=Math.floor(ec(this.bounds.getWest())*e),r=Math.floor(ic(this.bounds.getNorth())*e),n=Math.ceil(ec(this.bounds.getEast())*e),o=Math.ceil(ic(this.bounds.getSouth())*e);return t.x>=i&&t.x<n&&t.y>=r&&t.y<o};var hc=function(t){function e(e,i,r,n){if(t.call(this),this.id=e,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,m(this,y(i,["url","scheme","tileSize","promoteId"])),this._options=m({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(n)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this._loaded=!1,this.fire(new jt("dataloading",{dataType:"source"})),this._tileJSONRequest=cc(this._options,this.map._requestManager,(function(e,i){t._tileJSONRequest=null,t._loaded=!0,e?t.fire(new Nt(e)):i&&(m(t,i),i.bounds&&(t.tileBounds=new pc(i.bounds,t.minzoom,t.maxzoom)),_t(i.tiles,t.map._requestManager._customAccessToken),vt(i.tiles,t.map._getMapId(),t.map._requestManager._skuToken,t.map._requestManager._customAccessToken),t.fire(new jt("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new jt("data",{dataType:"source",sourceDataType:"content"})))}))},e.prototype.loaded=function(){return this._loaded},e.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.setSourceProperty=function(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},e.prototype.setTiles=function(t){var e=this;return this.setSourceProperty((function(){e._options.tiles=t})),this},e.prototype.setUrl=function(t){var e=this;return this.setSourceProperty((function(){e.url=t,e._options.url=t})),this},e.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},e.prototype.serialize=function(){return m({},this._options)},e.prototype.loadTile=function(t,e){var i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),r={request:this.map._requestManager.transformRequest(i,Et.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:U.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function n(i,r){return delete t.request,t.aborted?e(null):i&&404!==i.status?e(i):(r&&r.resourceTiming&&(t.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&t.setExpiryData(r),t.loadVectorData(r,this.map.painter),At(this.dispatcher),e(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}r.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state?"loading"===t.state?t.reloadCallback=e:t.request=t.actor.send("reloadTile",r,n.bind(this)):(t.actor=this.dispatcher.getActor(),t.request=t.actor.send("loadTile",r,n.bind(this)))},e.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},e.prototype.unloadTile=function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},e.prototype.hasTransition=function(){return!1},e}(qt),fc=function(t){function e(e,i,r,n){t.call(this),this.id=e,this.dispatcher=r,this.setEventedParent(n),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=m({type:"raster"},i),m(this,y(i,["url","scheme","tileSize"]))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this._loaded=!1,this.fire(new jt("dataloading",{dataType:"source"})),this._tileJSONRequest=cc(this._options,this.map._requestManager,(function(e,i){t._tileJSONRequest=null,t._loaded=!0,e?t.fire(new Nt(e)):i&&(m(t,i),i.bounds&&(t.tileBounds=new pc(i.bounds,t.minzoom,t.maxzoom)),_t(i.tiles),vt(i.tiles,t.map._getMapId(),t.map._requestManager._skuToken),t.fire(new jt("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new jt("data",{dataType:"source",sourceDataType:"content"})))}))},e.prototype.loaded=function(){return this._loaded},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},e.prototype.serialize=function(){return m({},this._options)},e.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},e.prototype.loadTile=function(t,e){var i=this,r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);t.request=Ot(this.map._requestManager.transformRequest(r,Et.Tile),(function(r,n){if(delete t.request,t.aborted)t.state="unloaded",e(null);else if(r)t.state="errored",e(r);else if(n){i.map._refreshExpiredTiles&&t.setExpiryData(n),delete n.cacheControl,delete n.expires;var o=i.map.painter.context,a=o.gl;t.texture=i.map.painter.getTileTexture(n.width),t.texture?t.texture.update(n,{useMipmap:!0}):(t.texture=new Ml(o,n,a.RGBA,{useMipmap:!0}),t.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),o.extTextureFilterAnisotropic&&a.texParameterf(a.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax)),t.state="loaded",At(i.dispatcher),e(null)}}))},e.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},e.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},e.prototype.hasTransition=function(){return!1},e}(qt),dc=function(t,e,i){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return z('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var r=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=i||"mapbox";for(var n=0;n<r;n++)this.data[this._idx(-1,n)]=this.data[this._idx(0,n)],this.data[this._idx(r,n)]=this.data[this._idx(r-1,n)],this.data[this._idx(n,-1)]=this.data[this._idx(n,0)],this.data[this._idx(n,r)]=this.data[this._idx(n,r-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(r,-1)]=this.data[this._idx(r-1,0)],this.data[this._idx(-1,r)]=this.data[this._idx(0,r-1)],this.data[this._idx(r,r)]=this.data[this._idx(r-1,r-1)]};dc.prototype.get=function(t,e){var i=new Uint8Array(this.data.buffer),r=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[r],i[r+1],i[r+2])},dc.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},dc.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},dc.prototype._unpackMapbox=function(t,e,i){return(256*t*256+256*e+i)/10-1e4},dc.prototype._unpackTerrarium=function(t,e,i){return 256*t+e+i/256-32768},dc.prototype.getPixels=function(){return new Ya({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},dc.prototype.backfillBorder=function(t,e,i){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var r=e*this.dim,n=e*this.dim+this.dim,o=i*this.dim,a=i*this.dim+this.dim;switch(e){case-1:r=n-1;break;case 1:n=r+1}switch(i){case-1:o=a-1;break;case 1:a=o+1}for(var s=-e*this.dim,u=-i*this.dim,l=o;l<a;l++)for(var c=r;c<n;c++)this.data[this._idx(c,l)]=t.data[this._idx(c+s,l+u)]},Qr("DEMData",dc);var mc=function(t){function e(e,i,r,n){t.call(this,e,i,r,n),this.type="raster-dem",this.maxzoom=22,this._options=m({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},e.prototype.loadTile=function(t,e){var i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function r(i,r){i&&(t.state="errored",e(i)),r&&(t.dem=r,t.needsHillshadePrepare=!0,t.state="loaded",e(null))}t.request=Ot(this.map._requestManager.transformRequest(i,Et.Tile),function(i,n){if(delete t.request,t.aborted)t.state="unloaded",e(null);else if(i)t.state="errored",e(i);else if(n){this.map._refreshExpiredTiles&&t.setExpiryData(n),delete n.cacheControl,delete n.expires;var o=a.ImageBitmap&&n instanceof a.ImageBitmap&&zt()?n:U.getImageData(n,1),s={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:o,encoding:this.encoding};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",s,r.bind(this)))}}.bind(this)),t.neighboringTiles=this._getNeighboringTiles(t.tileID)},e.prototype._getNeighboringTiles=function(t){var e=t.canonical,i=Math.pow(2,e.z),r=(e.x-1+i)%i,n=0===e.x?t.wrap-1:t.wrap,o=(e.x+1+i)%i,a=e.x+1===i?t.wrap+1:t.wrap,s={};return s[new uc(t.overscaledZ,n,e.z,r,e.y).key]={backfilled:!1},s[new uc(t.overscaledZ,a,e.z,o,e.y).key]={backfilled:!1},e.y>0&&(s[new uc(t.overscaledZ,n,e.z,r,e.y-1).key]={backfilled:!1},s[new uc(t.overscaledZ,t.wrap,e.z,e.x,e.y-1).key]={backfilled:!1},s[new uc(t.overscaledZ,a,e.z,o,e.y-1).key]={backfilled:!1}),e.y+1<i&&(s[new uc(t.overscaledZ,n,e.z,r,e.y+1).key]={backfilled:!1},s[new uc(t.overscaledZ,t.wrap,e.z,e.x,e.y+1).key]={backfilled:!1},s[new uc(t.overscaledZ,a,e.z,o,e.y+1).key]={backfilled:!1}),s},e.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},e}(fc),yc=function(t){function e(e,i,r,n){t.call(this),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=r.getActor(),this.setEventedParent(n),this._data=i.data,this._options=m({},i),this._collectResourceTiming=i.collectResourceTiming,this._resourceTiming=[],void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;var o=8192/this.tileSize;this.workerOptions=m({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*o,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*o,extent:8192,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?Math.min(i.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:8192,radius:(i.clusterRadius||50)*o,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this.fire(new jt("dataloading",{dataType:"source"})),this._updateWorkerData((function(e){if(e)t.fire(new Nt(e));else{var i={dataType:"source",sourceDataType:"metadata"};t._collectResourceTiming&&t._resourceTiming&&t._resourceTiming.length>0&&(i.resourceTiming=t._resourceTiming,t._resourceTiming=[]),t.fire(new jt("data",i))}}))},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.setData=function(t){var e=this;return this._data=t,this.fire(new jt("dataloading",{dataType:"source"})),this._updateWorkerData((function(t){if(t)e.fire(new Nt(t));else{var i={dataType:"source",sourceDataType:"content"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(i.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new jt("data",i))}})),this},e.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},e.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},e.prototype.getClusterLeaves=function(t,e,i,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:i},r),this},e.prototype._updateWorkerData=function(t){var e=this;this._loaded=!1;var i=m({},this.workerOptions),r=this._data;"string"==typeof r?(i.request=this.map._requestManager.transformRequest(U.resolveURL(r),Et.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(r),this.actor.send(this.type+".loadData",i,(function(r,n){e._removed||n&&n.abandoned||(e._loaded=!0,n&&n.resourceTiming&&n.resourceTiming[e.id]&&(e._resourceTiming=n.resourceTiming[e.id].slice(0)),e.actor.send(e.type+".coalesce",{source:i.source},null),t(r))}))},e.prototype.loaded=function(){return this._loaded},e.prototype.loadTile=function(t,e){var i=this,r=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(r,{type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:U.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(n,o){return delete t.request,t.unloadVectorData(),t.aborted?e(null):n?e(n):(t.loadVectorData(o,i.map.painter,"reloadTile"===r),e(null))}))},e.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},e.prototype.unloadTile=function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},e.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},e.prototype.serialize=function(){return m({},this._options,{type:this.type,data:this._data})},e.prototype.hasTransition=function(){return!1},e}(qt),_c=Hn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),gc=function(t){function e(e,i,r,n){t.call(this),this.id=e,this.dispatcher=r,this.coordinates=i.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(n),this.options=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(t,e){var i=this;this._loaded=!1,this.fire(new jt("dataloading",{dataType:"source"})),this.url=this.options.url,Ot(this.map._requestManager.transformRequest(this.url,Et.Image),(function(r,n){i._loaded=!0,r?i.fire(new Nt(r)):n&&(i.image=n,t&&(i.coordinates=t),e&&e(),i._finishLoading())}))},e.prototype.loaded=function(){return this._loaded},e.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(function(){e.texture=null})),this):this},e.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new jt("data",{dataType:"source",sourceDataType:"metadata"})))},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.setCoordinates=function(t){var e=this;this.coordinates=t;var i=t.map(oc.fromLngLat);this.tileID=function(t){for(var e=1/0,i=1/0,r=-1/0,n=-1/0,o=0,a=t;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),i=Math.min(i,s.y),r=Math.max(r,s.x),n=Math.max(n,s.y)}var u=Math.max(r-e,n-i),l=Math.max(0,Math.floor(-Math.log(u)/Math.LN2)),c=Math.pow(2,l);return new ac(l,Math.floor((e+r)/2*c),Math.floor((i+n)/2*c))}(i),this.minzoom=this.maxzoom=this.tileID.z;var r=i.map((function(t){return e.tileID.getTilePoint(t)._round()}));return this._boundsArray=new Jn,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,8192,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,8192),this._boundsArray.emplaceBack(r[2].x,r[2].y,8192,8192),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new jt("data",{dataType:"source",sourceDataType:"content"})),this},e.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,e=t.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,_c.members)),this.boundsSegments||(this.boundsSegments=Co.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Ml(t,this.image,e.RGBA),this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[i];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},e.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},e.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},e.prototype.hasTransition=function(){return!1},e}(qt),vc=function(t){function e(e,i,r,n){t.call(this,e,i,r,n),this.roundZoom=!0,this.type="video",this.options=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this._loaded=!1;var e=this.options;this.urls=[];for(var i=0,r=e.urls;i<r.length;i+=1)this.urls.push(this.map._requestManager.transformRequest(r[i],Et.Source).url);!function(e,i){var r,n,o=a.document.createElement("video");o.muted=!0,o.onloadstart=function(){!function(e,i){t._loaded=!0,i&&(t.video=i,t.video.loop=!0,t.video.addEventListener("playing",(function(){t.map.triggerRepaint()})),t.map&&t.video.play(),t._finishLoading())}(0,o)};for(var s=0;s<e.length;s++){var u=a.document.createElement("source");r=e[s],n=void 0,(n=a.document.createElement("a")).href=r,(n.protocol!==a.document.location.protocol||n.host!==a.document.location.host)&&(o.crossOrigin="Anonymous"),u.src=e[s],o.appendChild(u)}}(this.urls)},e.prototype.pause=function(){this.video&&this.video.pause()},e.prototype.play=function(){this.video&&this.video.play()},e.prototype.seek=function(t){if(this.video){var e=this.video.seekable;t<e.start(0)||t>e.end(0)?this.fire(new Nt(new Gt("sources."+this.id,null,"Playback for this video can be set only between the "+e.start(0)+" and "+e.end(0)+"-second mark."))):this.video.currentTime=t}},e.prototype.getVideo=function(){return this.video},e.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},e.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,e=t.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,_c.members)),this.boundsSegments||(this.boundsSegments=Co.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE),e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,this.video)):(this.texture=new Ml(t,this.video,e.RGBA),this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[i];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},e.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},e.prototype.hasTransition=function(){return this.video&&!this.video.paused},e}(gc),xc=function(t){function e(e,i,r,n){t.call(this,e,i,r,n),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((function(t){return!Array.isArray(t)||2!==t.length||t.some((function(t){return"number"!=typeof t}))}))||this.fire(new Nt(new Gt("sources."+e,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new Nt(new Gt("sources."+e,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new Nt(new Gt("sources."+e,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof a.HTMLCanvasElement||this.fire(new Nt(new Gt("sources."+e,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new Nt(new Gt("sources."+e,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.HTMLCanvasElement?this.options.canvas:a.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new Nt(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},e.prototype.getCanvas=function(){return this.canvas},e.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},e.prototype.onRemove=function(){this.pause()},e.prototype.prepare=function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var e=this.map.painter.context,i=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,_c.members)),this.boundsSegments||(this.boundsSegments=Co.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ml(e,this.canvas,i.RGBA,{premultiply:!0}),this.tiles){var n=this.tiles[r];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},e.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},e.prototype.hasTransition=function(){return this._playing},e.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var i=e[t];if(isNaN(i)||i<=0)return!0}return!1},e}(gc),bc={vector:hc,raster:fc,"raster-dem":mc,geojson:yc,video:vc,image:gc,canvas:xc};function wc(t,e){var i=Ca([]);return Ma(i,i,[1,1,0]),La(i,i,[.5*t.width,.5*t.height,1]),Da(i,i,t.calculatePosMatrix(e.toUnwrapped()))}function Ic(t,e,i,r,n,o){var a=function(t,e,i){if(t)for(var r=0,n=t;r<n.length;r+=1){var o=e[n[r]];if(o&&o.source===i&&"fill-extrusion"===o.type)return!0}else for(var a in e){var s=e[a];if(s.source===i&&"fill-extrusion"===s.type)return!0}return!1}(n&&n.layers,e,t.id),s=o.maxPitchScaleFactor(),u=t.tilesIn(r,s,a);u.sort(Sc);for(var l=[],c=0,p=u;c<p.length;c+=1){var h=p[c];l.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,i,t._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,n,o,s,wc(t.transform,h.tileID))})}var f=function(t){for(var e={},i={},r=0,n=t;r<n.length;r+=1){var o=n[r],a=o.queryResults,s=o.wrappedTileID,u=i[s]=i[s]||{};for(var l in a)for(var c=a[l],p=u[l]=u[l]||{},h=e[l]=e[l]||[],f=0,d=c;f<d.length;f+=1){var m=d[f];p[m.featureIndex]||(p[m.featureIndex]=!0,h.push(m))}}return e}(l);for(var d in f)f[d].forEach((function(e){var i=e.feature,r=t.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=r}));return f}function Sc(t,e){var i=t.tileID,r=e.tileID;return i.overscaledZ-r.overscaledZ||i.canonical.y-r.canonical.y||i.wrap-r.wrap||i.canonical.x-r.canonical.x}var Tc=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var i=t[e];this._stringToNumber[i]=e,this._numberToString[e]=i}};Tc.prototype.encode=function(t){return this._stringToNumber[t]},Tc.prototype.decode=function(t){return this._numberToString[t]};var Ac=function(t,e,i,r,n){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=i,t._y=r,this.properties=t.properties,this.id=n},zc={geometry:{configurable:!0}};zc.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},zc.geometry.set=function(t){this._geometry=t},Ac.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Ac.prototype,zc);var Ec=function(){this.state={},this.stateChanges={},this.deletedStates={}};Ec.prototype.updateState=function(t,e,i){var r=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][r]=this.stateChanges[t][r]||{},m(this.stateChanges[t][r],i),null===this.deletedStates[t])for(var n in this.deletedStates[t]={},this.state[t])n!==r&&(this.deletedStates[t][n]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][r])for(var o in this.deletedStates[t][r]={},this.state[t][r])i[o]||(this.deletedStates[t][r][o]=null);else for(var a in i)this.deletedStates[t]&&this.deletedStates[t][r]&&null===this.deletedStates[t][r][a]&&delete this.deletedStates[t][r][a]},Ec.prototype.removeFeatureState=function(t,e,i){if(null!==this.deletedStates[t]){var r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},i&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][i]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(i in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][i]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}},Ec.prototype.getState=function(t,e){var i=String(e),r=m({},(this.state[t]||{})[i],(this.stateChanges[t]||{})[i]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var n=this.deletedStates[t][e];if(null===n)return{};for(var o in n)delete r[o]}return r},Ec.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},Ec.prototype.coalesceChanges=function(t,e){var i={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var n={};for(var o in this.stateChanges[r])this.state[r][o]||(this.state[r][o]={}),m(this.state[r][o],this.stateChanges[r][o]),n[o]=this.state[r][o];i[r]=n}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a])for(var u in this.state[a])s[u]={},this.state[a][u]={};else for(var l in this.deletedStates[a]){if(null===this.deletedStates[a][l])this.state[a][l]={};else for(var c=0,p=Object.keys(this.deletedStates[a][l]);c<p.length;c+=1)delete this.state[a][l][p[c]];s[l]=this.state[a][l]}i[a]=i[a]||{},m(i[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(var h in t)t[h].setFeatureState(i,e)};var kc=function(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Wr(8192,16,0),this.grid3D=new Wr(8192,16,0),this.featureIndexArray=new Eo,this.promoteId=e};function Cc(t,e,i,r,n){return I(t,(function(t,o){var a=e instanceof Fn?e.get(o):null;return a&&a.evaluate?a.evaluate(i,r,n):a}))}function Pc(t){for(var e=1/0,i=1/0,r=-1/0,n=-1/0,o=0,a=t;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),i=Math.min(i,s.y),r=Math.max(r,s.x),n=Math.max(n,s.y)}return{minX:e,minY:i,maxX:r,maxY:n}}function Dc(t,e){return e-t}kc.prototype.insert=function(t,e,i,r,n,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,r,n);for(var s=o?this.grid3D:this.grid,u=0;u<e.length;u++){for(var l=e[u],c=[1/0,1/0,-1/0,-1/0],p=0;p<l.length;p++){var h=l[p];c[0]=Math.min(c[0],h.x),c[1]=Math.min(c[1],h.y),c[2]=Math.max(c[2],h.x),c[3]=Math.max(c[3],h.y)}c[0]<8192&&c[1]<8192&&c[2]>=0&&c[3]>=0&&s.insert(a,c[0],c[1],c[2],c[3])}},kc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Js.VectorTile(new zu(this.rawTileData)).layers,this.sourceLayerCoder=new Tc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},kc.prototype.query=function(t,e,i,r){var o=this;this.loadVTLayers();for(var a=t.params||{},s=8192/t.tileSize/t.scale,u=xr(a.filter),l=t.queryGeometry,c=t.queryPadding*s,p=Pc(l),h=this.grid.query(p.minX-c,p.minY-c,p.maxX+c,p.maxY+c),f=Pc(t.cameraQueryGeometry),m=0,y=this.grid3D.query(f.minX-c,f.minY-c,f.maxX+c,f.maxY+c,(function(e,i,r,o){return function(t,e,i,r,o){for(var a=0,s=t;a<s.length;a+=1){var u=s[a];if(e<=u.x&&i<=u.y&&r>=u.x&&o>=u.y)return!0}var l=[new n(e,i),new n(e,o),new n(r,o),new n(r,i)];if(t.length>2)for(var c=0,p=l;c<p.length;c+=1)if(ba(t,p[c]))return!0;for(var h=0;h<t.length-1;h++)if(wa(t[h],t[h+1],l))return!0;return!1}(t.cameraQueryGeometry,e-c,i-c,r+c,o+c)}));m<y.length;m+=1)h.push(y[m]);h.sort(Dc);for(var _,g={},v=function(n){var c=h[n];if(c!==_){_=c;var p=o.featureIndexArray.get(c),f=null;o.loadMatchingFeature(g,p.bucketIndex,p.sourceLayerIndex,p.featureIndex,u,a.layers,a.availableImages,e,i,r,(function(e,i,r){return f||(f=ua(e)),i.queryIntersectsFeature(l,e,r,f,o.z,t.transform,s,t.pixelPosMatrix)}))}},x=0;x<h.length;x++)v(x);return g},kc.prototype.loadMatchingFeature=function(t,e,i,r,n,o,a,s,u,l,c){var p=this.bucketLayerIDs[e];if(!o||function(t,e){for(var i=0;i<t.length;i++)if(e.indexOf(t[i])>=0)return!0;return!1}(o,p)){var h=this.sourceLayerCoder.decode(i),f=this.vtLayers[h].feature(r);if(n.needGeometry){var d=la(f,!0);if(!n.filter(new kn(this.tileID.overscaledZ),d,this.tileID.canonical))return}else if(!n.filter(new kn(this.tileID.overscaledZ),f))return;for(var y=this.getId(f,h),_=0;_<p.length;_++){var g=p[_];if(!(o&&o.indexOf(g)<0)){var v=s[g];if(v){var x={};void 0!==y&&l&&(x=l.getState(v.sourceLayer||"_geojsonTileLayer",y));var b=m({},u[g]);b.paint=Cc(b.paint,v.paint,f,x,a),b.layout=Cc(b.layout,v.layout,f,x,a);var w=!c||c(f,v,x);if(w){var I=new Ac(f,this.z,this.x,this.y,y);I.layer=b;var S=t[g];void 0===S&&(S=t[g]=[]),S.push({featureIndex:r,feature:I,intersectionZ:w})}}}}}},kc.prototype.lookupSymbolFeatures=function(t,e,i,r,n,o,a,s){var u={};this.loadVTLayers();for(var l=xr(n),c=0,p=t;c<p.length;c+=1)this.loadMatchingFeature(u,i,r,p[c],l,o,a,s,e);return u},kc.prototype.hasLayer=function(t){for(var e=0,i=this.bucketLayerIDs;e<i.length;e+=1)for(var r=0,n=i[e];r<n.length;r+=1)if(t===n[r])return!0;return!1},kc.prototype.getId=function(t,e){var i=t.id;return this.promoteId&&"boolean"==typeof(i=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(i=Number(i)),i},Qr("FeatureIndex",kc,{omit:["rawTileData","sourceLayerCoder"]});var Mc=function(t,e){this.tileID=t,this.uid=g(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Mc.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<U.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},Mc.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Mc.prototype.loadVectorData=function(t,e,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var r in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var i={};if(!e)return i;for(var r=function(){var t=o[n],r=t.layerIds.map((function(t){return e.getLayer(t)})).filter(Boolean);if(0!==r.length){t.layers=r,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map((function(t){return r.filter((function(e){return e.id===t}))[0]})));for(var a=0,s=r;a<s.length;a+=1)i[s[a].id]=t}},n=0,o=t;n<o.length;n+=1)r();return i}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var n=this.buckets[r];if(n instanceof yl){if(this.hasSymbolBuckets=!0,!i)break;n.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var a=this.buckets[o];if(a instanceof yl&&a.hasRTLText){this.hasRTLText=!0,En.isLoading()||En.isLoaded()||"deferred"!==An()||zn();break}}for(var s in this.queryPadding=0,this.buckets){var u=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(s).queryRadius(u))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new xo},Mc.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Mc.prototype.getBucket=function(t){return this.buckets[t.id]},Mc.prototype.upload=function(t){for(var e in this.buckets){var i=this.buckets[e];i.uploadPending()&&i.upload(t)}var r=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ml(t,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ml(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},Mc.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},Mc.prototype.queryRenderedFeatures=function(t,e,i,r,n,o,a,s,u,l){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:n,scale:o,tileSize:this.tileSize,pixelPosMatrix:l,transform:s,params:a,queryPadding:this.queryPadding*u},t,e,i):{}},Mc.prototype.querySourceFeatures=function(t,e){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var r=i.loadVTLayers(),n=e?e.sourceLayer:"",o=r._geojsonTileLayer||r[n];if(o)for(var a=xr(e&&e.filter),s=this.tileID.canonical,u=s.z,l=s.x,c=s.y,p={z:u,x:l,y:c},h=0;h<o.length;h++){var f=o.feature(h);if(a.needGeometry){var d=la(f,!0);if(!a.filter(new kn(this.tileID.overscaledZ),d,this.tileID.canonical))continue}else if(!a.filter(new kn(this.tileID.overscaledZ),f))continue;var m=i.getId(f,n),y=new Ac(f,u,l,c,m);y.tile=p,t.push(y)}}},Mc.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Mc.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Mc.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var i=P(t.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var r=Date.now(),n=!1;if(this.expirationTime>r)n=!1;else if(e)if(this.expirationTime<e)n=!0;else{var o=this.expirationTime-e;o?this.expirationTime=r+Math.max(o,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Mc.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Mc.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var i=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets)if(e.style.hasLayer(r)){var n=this.buckets[r],o=n.layers[0].sourceLayer||"_geojsonTileLayer",a=i[o],s=t[o];if(a&&s&&0!==Object.keys(s).length){n.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});var u=e&&e.style&&e.style.getLayer(r);u&&(this.queryPadding=Math.max(this.queryPadding,u.queryRadius(n)))}}}},Mc.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Mc.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<U.now()},Mc.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Mc.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=U.now()+t},Mc.prototype.setDependencies=function(t,e){for(var i={},r=0,n=e;r<n.length;r+=1)i[n[r]]=!0;this.dependencies[t]=i},Mc.prototype.hasDependency=function(t,e){for(var i=0,r=t;i<r.length;i+=1){var n=this.dependencies[r[i]];if(n)for(var o=0,a=e;o<a.length;o+=1)if(n[a[o]])return!0}return!1};var Lc=function(t,e){this.max=t,this.onRemove=e,this.reset()};Lc.prototype.reset=function(){for(var t in this.data)for(var e=0,i=this.data[t];e<i.length;e+=1){var r=i[e];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},Lc.prototype.add=function(t,e,i){var r=this,n=t.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);var o={value:e,timeout:void 0};if(void 0!==i&&(o.timeout=setTimeout((function(){r.remove(t,o)}),i)),this.data[n].push(o),this.order.push(n),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},Lc.prototype.has=function(t){return t.wrapped().key in this.data},Lc.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},Lc.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},Lc.prototype.getByKey=function(t){var e=this.data[t];return e?e[0].value:null},Lc.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},Lc.prototype.remove=function(t,e){if(!this.has(t))return this;var i=t.wrapped().key,r=void 0===e?0:this.data[i].indexOf(e),n=this.data[i][r];return this.data[i].splice(r,1),n.timeout&&clearTimeout(n.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(n.value),this.order.splice(this.order.indexOf(i),1),this},Lc.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this},Lc.prototype.filter=function(t){var e=[];for(var i in this.data)for(var r=0,n=this.data[i];r<n.length;r+=1){var o=n[r];t(o.value)||e.push(o)}for(var a=0,s=e;a<s.length;a+=1){var u=s[a];this.remove(u.value.tileID,u)}};var Bc=function(t,e,i){this.context=t;var r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};Bc.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Bc.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},Bc.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Rc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Fc=function(t,e,i,r){this.length=e.length,this.attributes=i,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;var n=t.gl;this.buffer=n.createBuffer(),t.bindVertexBuffer.set(this.buffer),n.bufferData(n.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};Fc.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Fc.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},Fc.prototype.enableAttributes=function(t,e){for(var i=0;i<this.attributes.length;i++){var r=e.attributes[this.attributes[i].name];void 0!==r&&t.enableVertexAttribArray(r)}},Fc.prototype.setVertexAttribPointers=function(t,e,i){for(var r=0;r<this.attributes.length;r++){var n=this.attributes[r],o=e.attributes[n.name];void 0!==o&&t.vertexAttribPointer(o,n.components,t[Rc[n.type]],!1,this.itemSize,n.offset+this.itemSize*(i||0))}},Fc.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Oc=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Oc.prototype.get=function(){return this.current},Oc.prototype.set=function(t){},Oc.prototype.getDefault=function(){return this.default},Oc.prototype.setDefault=function(){this.set(this.default)};var Vc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return me.transparent},e.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},e}(Oc),Uc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(Oc),jc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(Oc),Nc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(Oc),qc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(Oc),Zc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(Oc),Gc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(Oc),Xc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(Oc),Wc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(Oc),Hc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(Oc),Kc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(Oc),Yc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(Oc),Jc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(Oc),Qc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(Oc),$c=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return me.transparent},e.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},e}(Oc),tp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(Oc),ep=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(Oc),ip=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(Oc),rp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(Oc),np=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(Oc),op=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(Oc),ap=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(Oc),sp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(Oc),up=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(Oc),lp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(Oc),cp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(Oc),pp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(Oc),hp=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(Oc),fp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(Oc),dp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(Oc),mp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(Oc),yp=function(t){function e(e,i){t.call(this,e),this.context=e,this.parent=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e}(Oc),_p=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(yp),gp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(yp),vp=function(t,e,i,r){this.context=t,this.width=e,this.height=i;var n=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new _p(t,n),r&&(this.depthAttachment=new gp(t,n))};vp.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){var i=this.depthAttachment.get();i&&t.deleteRenderbuffer(i)}t.deleteFramebuffer(this.framebuffer)};var xp=function(t,e,i){this.func=t,this.mask=e,this.range=i};xp.ReadOnly=!1,xp.ReadWrite=!0,xp.disabled=new xp(519,xp.ReadOnly,[0,1]);var bp=function(t,e,i,r,n,o){this.test=t,this.ref=e,this.mask=i,this.fail=r,this.depthFail=n,this.pass=o};bp.disabled=new bp({func:519,mask:0},0,0,7680,7680,7680);var wp=function(t,e,i){this.blendFunction=t,this.blendColor=e,this.mask=i};wp.disabled=new wp(wp.Replace=[1,0],me.transparent,[!1,!1,!1,!1]),wp.unblended=new wp(wp.Replace,me.transparent,[!0,!0,!0,!0]),wp.alphaBlended=new wp([1,771],me.transparent,[!0,!0,!0,!0]);var Ip=function(t,e,i){this.enable=t,this.mode=e,this.frontFace=i};Ip.disabled=new Ip(!1,1029,2305),Ip.backCCW=new Ip(!0,1029,2305);var Sp=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Vc(this),this.clearDepth=new Uc(this),this.clearStencil=new jc(this),this.colorMask=new Nc(this),this.depthMask=new qc(this),this.stencilMask=new Zc(this),this.stencilFunc=new Gc(this),this.stencilOp=new Xc(this),this.stencilTest=new Wc(this),this.depthRange=new Hc(this),this.depthTest=new Kc(this),this.depthFunc=new Yc(this),this.blend=new Jc(this),this.blendFunc=new Qc(this),this.blendColor=new $c(this),this.blendEquation=new tp(this),this.cullFace=new ep(this),this.cullFaceSide=new ip(this),this.frontFace=new rp(this),this.program=new np(this),this.activeTexture=new op(this),this.viewport=new ap(this),this.bindFramebuffer=new sp(this),this.bindRenderbuffer=new up(this),this.bindTexture=new lp(this),this.bindVertexBuffer=new cp(this),this.bindElementBuffer=new pp(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new hp(this),this.pixelStoreUnpack=new fp(this),this.pixelStoreUnpackPremultiplyAlpha=new dp(this),this.pixelStoreUnpackFlipY=new mp(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)};Sp.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Sp.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Sp.prototype.createIndexBuffer=function(t,e){return new Bc(this,t,e)},Sp.prototype.createVertexBuffer=function(t,e,i){return new Fc(this,t,e,i)},Sp.prototype.createRenderbuffer=function(t,e,i){var r=this.gl,n=r.createRenderbuffer();return this.bindRenderbuffer.set(n),r.renderbufferStorage(r.RENDERBUFFER,t,e,i),this.bindRenderbuffer.set(null),n},Sp.prototype.createFramebuffer=function(t,e,i){return new vp(this,t,e,i)},Sp.prototype.clear=function(t){var e=t.color,i=t.depth,r=this.gl,n=0;e&&(n|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==i&&(n|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),r.clear(n)},Sp.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},Sp.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},Sp.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},Sp.prototype.setColorMode=function(t){s(t.blendFunction,wp.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)},Sp.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Tp=function(t){function e(e,i,r){var n=this;t.call(this),this.id=e,this.dispatcher=r,this.on("data",(function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(n._sourceLoaded=!0),n._sourceLoaded&&!n._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(n.reload(),n.transform&&n.update(n.transform))})),this.on("error",(function(){n._sourceErrored=!0})),this._source=function(t,e,i,r){var n=new bc[e.type](t,e,i,r);if(n.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+n.id);return b(["load","abort","unload","serialize","prepare"],n),n}(e,i,r,this),this._tiles={},this._cache=new Lc(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ec}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},e.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},e.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},e.prototype.getSource=function(){return this._source},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},e.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},e.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,(function(){}))},e.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,(function(){}))},e.prototype.serialize=function(){return this._source.serialize()},e.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var i=this._tiles[e];i.upload(t),i.prepare(this.map.style.imageManager)}},e.prototype.getIds=function(){return d(this._tiles).map((function(t){return t.tileID})).sort(Ap).map((function(t){return t.key}))},e.prototype.getRenderableIds=function(t){var e=this,i=[];for(var r in this._tiles)this._isIdRenderable(r,t)&&i.push(this._tiles[r]);return t?i.sort((function(t,i){var r=t.tileID,o=i.tileID,a=new n(r.canonical.x,r.canonical.y)._rotate(e.transform.angle),s=new n(o.canonical.x,o.canonical.y)._rotate(e.transform.angle);return r.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x})).map((function(t){return t.tileID.key})):i.map((function(t){return t.tileID})).sort(Ap).map((function(t){return t.key}))},e.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},e.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},e.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},e.prototype._reloadTile=function(t,e){var i=this._tiles[t];i&&("loading"!==i.state&&(i.state=e),this._loadTile(i,this._tileLoaded.bind(this,i,t,e)))},e.prototype._tileLoaded=function(t,e,i,r){if(r)return t.state="errored",void(404!==r.status?this._source.fire(new Nt(r,{tile:t})):this.update(this.transform));t.timeAdded=U.now(),"expired"===i&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new jt("data",{dataType:"source",tile:t,coord:t.tileID}))},e.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),i=0;i<e.length;i++){var r=e[i];if(t.neighboringTiles&&t.neighboringTiles[r]){var n=this.getTileByID(r);o(t,n),o(n,t)}}function o(t,e){t.needsHillshadePrepare=!0;var i=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,n=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===i&&0===r||Math.abs(r)>1||(Math.abs(i)>1&&(1===Math.abs(i+n)?i+=n:1===Math.abs(i-n)&&(i-=n)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,i,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}},e.prototype.getTile=function(t){return this.getTileByID(t.key)},e.prototype.getTileByID=function(t){return this._tiles[t]},e.prototype._retainLoadedChildren=function(t,e,i,r){for(var n in this._tiles){var o=this._tiles[n];if(!(r[n]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>i)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var u=a;u.overscaledZ>e;)if(t[(u=u.scaledTo(u.overscaledZ-1)).key]){r[a.key]=a;break}}}},e.prototype.findLoadedParent=function(t,e){if(t.key in this._loadedParentTiles){var i=this._loadedParentTiles[t.key];return i&&i.tileID.overscaledZ>=e?i:null}for(var r=t.overscaledZ-1;r>=e;r--){var n=t.scaledTo(r),o=this._getLoadedTile(n);if(o)return o}},e.prototype._getLoadedTile=function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)},e.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,i=Math.ceil(t.height/this._source.tileSize)+1,r=Math.floor(e*i*5),n="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(n)},e.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var i={};for(var r in this._tiles){var n=this._tiles[r];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+e),i[n.tileID.key]=n}for(var o in this._tiles=i,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var a in this._tiles)this._setTileReloadTimer(a,this._tiles[a])}},e.prototype.update=function(t){var i=this;if(this.transform=t,this._sourceLoaded&&!this._paused){var r;this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?r=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(t){return new uc(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)})):(r=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter((function(t){return i._source.hasTile(t)})))):r=[];var n=t.coveringZoomLevel(this._source),o=Math.max(n-e.maxOverzooming,this._source.minzoom),a=Math.max(n+e.maxUnderzooming,this._source.minzoom),s=this._updateRetainedTiles(r,n);if(zp(this._source.type)){for(var u={},l={},c=0,p=Object.keys(s);c<p.length;c+=1){var h=p[c],f=s[h],d=this._tiles[h];if(d&&!(d.fadeEndTime&&d.fadeEndTime<=U.now())){var m=this.findLoadedParent(f,o);m&&(this._addTile(m.tileID),u[m.tileID.key]=m.tileID),l[h]=f}}for(var y in this._retainLoadedChildren(l,n,a,s),u)s[y]||(this._coveredTiles[y]=!0,s[y]=u[y])}for(var _ in s)this._tiles[_].clearFadeHold();for(var g=0,v=function(t,e){var i=[];for(var r in t)r in e||i.push(r);return i}(this._tiles,s);g<v.length;g+=1){var x=v[g],b=this._tiles[x];b.hasSymbolBuckets&&!b.holdingForFade()?b.setHoldDuration(this.map._fadeDuration):b.hasSymbolBuckets&&!b.symbolFadeFinished()||this._removeTile(x)}this._updateLoadedParentTileCache()}},e.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},e.prototype._updateRetainedTiles=function(t,i){for(var r={},n={},o=Math.max(i-e.maxOverzooming,this._source.minzoom),a=Math.max(i+e.maxUnderzooming,this._source.minzoom),s={},u=0,l=t;u<l.length;u+=1){var c=l[u],p=this._addTile(c);r[c.key]=c,p.hasData()||i<this._source.maxzoom&&(s[c.key]=c)}this._retainLoadedChildren(s,i,a,r);for(var h=0,f=t;h<f.length;h+=1){var d=f[h],m=this._tiles[d.key];if(!m.hasData()){if(i+1>this._source.maxzoom){var y=d.children(this._source.maxzoom)[0],_=this.getTile(y);if(_&&_.hasData()){r[y.key]=y;continue}}else{var g=d.children(this._source.maxzoom);if(r[g[0].key]&&r[g[1].key]&&r[g[2].key]&&r[g[3].key])continue}for(var v=m.wasRequested(),x=d.overscaledZ-1;x>=o;--x){var b=d.scaledTo(x);if(n[b.key])break;if(n[b.key]=!0,!(m=this.getTile(b))&&v&&(m=this._addTile(b)),m&&(r[b.key]=b,v=m.wasRequested(),m.hasData()))break}}}return r},e.prototype._updateLoadedParentTileCache=function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],i=void 0,r=this._tiles[t].tileID;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){i=this._loadedParentTiles[r.key];break}e.push(r.key);var n=r.scaledTo(r.overscaledZ-1);if(i=this._getLoadedTile(n))break;r=n}for(var o=0,a=e;o<a.length;o+=1)this._loadedParentTiles[a[o]]=i}},e.prototype._addTile=function(t){var e=this._tiles[t.key];if(e)return e;(e=this._cache.getAndRemove(t))&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));var i=Boolean(e);return i||(e=new Mc(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))),e?(e.uses++,this._tiles[t.key]=e,i||this._source.fire(new jt("dataloading",{tile:e,coord:e.tileID,dataType:"source"})),e):null},e.prototype._setTileReloadTimer=function(t,e){var i=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout((function(){i._reloadTile(t,"expired"),delete i._timers[t]}),r))},e.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},e.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},e.prototype.tilesIn=function(t,e,i){var r=this,n=[],o=this.transform;if(!o)return n;for(var a=i?o.getCameraQueryGeometry(t):t,s=t.map((function(t){return o.pointCoordinate(t)})),u=a.map((function(t){return o.pointCoordinate(t)})),l=this.getIds(),c=1/0,p=1/0,h=-1/0,f=-1/0,d=0,m=u;d<m.length;d+=1){var y=m[d];c=Math.min(c,y.x),p=Math.min(p,y.y),h=Math.max(h,y.x),f=Math.max(f,y.y)}for(var _=function(t){var i=r._tiles[l[t]];if(!i.holdingForFade()){var a=i.tileID,d=Math.pow(2,o.zoom-i.tileID.overscaledZ),m=e*i.queryPadding*8192/i.tileSize/d,y=[a.getTilePoint(new oc(c,p)),a.getTilePoint(new oc(h,f))];if(y[0].x-m<8192&&y[0].y-m<8192&&y[1].x+m>=0&&y[1].y+m>=0){var _=s.map((function(t){return a.getTilePoint(t)})),g=u.map((function(t){return a.getTilePoint(t)}));n.push({tile:i,tileID:a,queryGeometry:_,cameraQueryGeometry:g,scale:d})}}},g=0;g<l.length;g++)_(g);return n},e.prototype.getVisibleCoordinates=function(t){for(var e=this,i=this.getRenderableIds(t).map((function(t){return e._tiles[t].tileID})),r=0,n=i;r<n.length;r+=1){var o=n[r];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return i},e.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(zp(this._source.type))for(var t in this._tiles){var e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=U.now())return!0}return!1},e.prototype.setFeatureState=function(t,e,i){this._state.updateState(t=t||"_geojsonTileLayer",e,i)},e.prototype.removeFeatureState=function(t,e,i){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,i)},e.prototype.getFeatureState=function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)},e.prototype.setDependencies=function(t,e,i){var r=this._tiles[t];r&&r.setDependencies(e,i)},e.prototype.reloadTilesForDependencies=function(t,e){for(var i in this._tiles)this._tiles[i].hasDependency(t,e)&&this._reloadTile(i,"reloading");this._cache.filter((function(i){return!i.hasDependency(t,e)}))},e}(qt);function Ap(t,e){var i=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-i||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function zp(t){return"raster"===t||"image"===t||"video"===t}function Ep(){return new a.Worker(Zm.workerUrl)}Tp.maxOverzooming=10,Tp.maxUnderzooming=3;var kp="mapboxgl_preloaded_worker_pool",Cp=function(){this.active={}};Cp.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Cp.workerCount;)this.workers.push(new Ep);return this.active[t]=!0,this.workers.slice()},Cp.prototype.release=function(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((function(t){t.terminate()})),this.workers=null)},Cp.prototype.isPreloaded=function(){return!!this.active[kp]},Cp.prototype.numActive=function(){return Object.keys(this.active).length};var Pp,Dp=Math.floor(U.hardwareConcurrency/2);function Mp(){return Pp||(Pp=new Cp),Pp}Cp.workerCount=Math.max(Math.min(Dp,6),1);var Lp=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Bp(t,e){var i={};for(var r in t)"ref"!==r&&(i[r]=t[r]);return Lp.forEach((function(t){t in e&&(i[t]=e[t])})),i}function Rp(t){t=t.slice();for(var e=Object.create(null),i=0;i<t.length;i++)e[t[i].id]=t[i];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=Bp(t[r],e[t[r].ref]));return t}var Fp={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Op(t,e,i){i.push({command:Fp.addSource,args:[t,e[t]]})}function Vp(t,e,i){e.push({command:Fp.removeSource,args:[t]}),i[t]=!0}function Up(t,e,i,r){Vp(t,i,r),Op(t,e,i)}function jp(t,e,i){var r;for(r in t[i])if(t[i].hasOwnProperty(r)&&"data"!==r&&!s(t[i][r],e[i][r]))return!1;for(r in e[i])if(e[i].hasOwnProperty(r)&&"data"!==r&&!s(t[i][r],e[i][r]))return!1;return!0}function Np(t,e,i,r,n,o){var a;for(a in e=e||{},t=t||{})t.hasOwnProperty(a)&&(s(t[a],e[a])||i.push({command:o,args:[r,a,e[a],n]}));for(a in e)e.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(s(t[a],e[a])||i.push({command:o,args:[r,a,e[a],n]}))}function qp(t){return t.id}function Zp(t,e){return t[e.id]=e,t}var Gp=function(t,e){this.reset(t,e)};Gp.prototype.reset=function(t,e){this.points=t||[],this._distances=[0];for(var i=1;i<this.points.length;i++)this._distances[i]=this._distances[i-1]+this.points[i].dist(this.points[i-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Gp.prototype.lerp=function(t){if(1===this.points.length)return this.points[0];t=p(t,0,1);for(var e=1,i=this._distances[e],r=t*this.paddedLength+this.padding;i<r&&e<this._distances.length;)i=this._distances[++e];var n=e-1,o=this._distances[n],a=i-o,s=a>0?(r-o)/a:0;return this.points[n].mult(1-s).add(this.points[e].mult(s))};var Xp=function(t,e,i){var r=this.boxCells=[],n=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(e/i);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),n.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};function Wp(t,e,i,r,n){var o=ka();return e?(La(o,o,[1/n,1/n,1]),i||Ba(o,o,r.angle)):Da(o,r.labelPlaneMatrix,t),o}function Hp(t,e,i,r,n){if(e){var o=function(t){var e=new Ea(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}(t);return La(o,o,[n,n,1]),i||Ba(o,o,-r.angle),o}return r.glCoordMatrix}function Kp(t,e){var i=[t.x,t.y,0,1];ah(i,i,e);var r=i[3];return{point:new n(i[0]/r,i[1]/r),signedDistanceFromCamera:r}}function Yp(t,e){return.5+t/e*.5}function Jp(t,e){var i=t[0]/t[3],r=t[1]/t[3];return i>=-e[0]&&i<=e[0]&&r>=-e[1]&&r<=e[1]}function Qp(t,e,i,r,o,a,s,u){var l=r?t.textSizeData:t.iconSizeData,c=ol(l,i.transform.zoom),p=[256/i.width*2+1,256/i.height*2+1],h=r?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;h.clear();for(var f=t.lineVertexArray,d=r?t.text.placedSymbolArray:t.icon.placedSymbolArray,m=i.transform.width/i.transform.height,y=!1,_=0;_<d.length;_++){var g=d.get(_);if(g.hidden||g.writingMode===Qu.vertical&&!y)oh(g.numGlyphs,h);else{y=!1;var v=[g.anchorX,g.anchorY,0,1];if(ja(v,v,e),Jp(v,p)){var x=Yp(i.transform.cameraToCenterDistance,v[3]),b=nl(l,c,g),w=s?b/x:b*x,I=new n(g.anchorX,g.anchorY),S=Kp(I,o).point,T={},A=eh(g,w,!1,u,e,o,a,t.glyphOffsetArray,f,h,S,I,T,m);y=A.useVertical,(A.notEnoughRoom||y||A.needsFlipping&&eh(g,w,!0,u,e,o,a,t.glyphOffsetArray,f,h,S,I,T,m).notEnoughRoom)&&oh(g.numGlyphs,h)}else oh(g.numGlyphs,h)}}r?t.text.dynamicLayoutVertexBuffer.updateData(h):t.icon.dynamicLayoutVertexBuffer.updateData(h)}function $p(t,e,i,r,n,o,a,s,u,l,c){var p=s.glyphStartIndex+s.numGlyphs,h=s.lineStartIndex,f=s.lineStartIndex+s.lineLength,d=e.getoffsetX(s.glyphStartIndex),m=e.getoffsetX(p-1),y=rh(t*d,i,r,n,o,a,s.segment,h,f,u,l,c);if(!y)return null;var _=rh(t*m,i,r,n,o,a,s.segment,h,f,u,l,c);return _?{first:y,last:_}:null}function th(t,e,i,r){return t===Qu.horizontal&&Math.abs(i.y-e.y)>Math.abs(i.x-e.x)*r?{useVertical:!0}:(t===Qu.vertical?e.y<i.y:e.x>i.x)?{needsFlipping:!0}:null}function eh(t,e,i,r,o,a,s,u,l,c,p,h,f,d){var m,y=e/24,_=t.lineOffsetX*y,g=t.lineOffsetY*y;if(t.numGlyphs>1){var v=t.glyphStartIndex+t.numGlyphs,x=t.lineStartIndex,b=t.lineStartIndex+t.lineLength,w=$p(y,u,_,g,i,p,h,t,l,a,f);if(!w)return{notEnoughRoom:!0};var I=Kp(w.first.point,s).point,S=Kp(w.last.point,s).point;if(r&&!i){var T=th(t.writingMode,I,S,d);if(T)return T}m=[w.first];for(var A=t.glyphStartIndex+1;A<v-1;A++)m.push(rh(y*u.getoffsetX(A),_,g,i,p,h,t.segment,x,b,l,a,f));m.push(w.last)}else{if(r&&!i){var z=Kp(h,o).point,E=t.lineStartIndex+t.segment+1,k=new n(l.getx(E),l.gety(E)),C=Kp(k,o),P=C.signedDistanceFromCamera>0?C.point:ih(h,k,z,1,o),D=th(t.writingMode,z,P,d);if(D)return D}var M=rh(y*u.getoffsetX(t.glyphStartIndex),_,g,i,p,h,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,l,a,f);if(!M)return{notEnoughRoom:!0};m=[M]}for(var L=0,B=m;L<B.length;L+=1){var R=B[L];hl(c,R.point,R.angle)}return{}}function ih(t,e,i,r,n){var o=Kp(t.add(t.sub(e)._unit()),n).point,a=i.sub(o);return i.add(a._mult(r/a.mag()))}function rh(t,e,i,r,o,a,s,u,l,c,p,h){var f=r?t-e:t+e,d=f>0?1:-1,m=0;r&&(d*=-1,m=Math.PI),d<0&&(m+=Math.PI);for(var y=d>0?u+s:u+s+1,_=o,g=o,v=0,x=0,b=Math.abs(f),w=[];v+x<=b;){if((y+=d)<u||y>=l)return null;if(g=_,w.push(_),void 0===(_=h[y])){var I=new n(c.getx(y),c.gety(y)),S=Kp(I,p);if(S.signedDistanceFromCamera>0)_=h[y]=S.point;else{var T=y-d;_=ih(0===v?a:new n(c.getx(T),c.gety(T)),I,g,b-v+1,p)}}v+=x,x=g.dist(_)}var A=(b-v)/x,z=_.sub(g),E=z.mult(A)._add(g);E._add(z._unit()._perp()._mult(i*d));var k=m+Math.atan2(_.y-g.y,_.x-g.x);return w.push(E),{point:E,angle:k,path:w}}Xp.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Xp.prototype.insert=function(t,e,i,r,n){this._forEachCell(e,i,r,n,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)},Xp.prototype.insertCircle=function(t,e,i,r){this._forEachCell(e-r,i-r,e+r,i+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(r)},Xp.prototype._insertBoxCell=function(t,e,i,r,n,o){this.boxCells[n].push(o)},Xp.prototype._insertCircleCell=function(t,e,i,r,n,o){this.circleCells[n].push(o)},Xp.prototype._query=function(t,e,i,r,n,o){if(i<0||t>this.width||r<0||e>this.height)return!n&&[];var a=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=r){if(n)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var l=this.circles[3*u],c=this.circles[3*u+1],p=this.circles[3*u+2];a.push({key:this.circleKeys[u],x1:l-p,y1:c-p,x2:l+p,y2:c+p})}return o?a.filter(o):a}return this._forEachCell(t,e,i,r,this._queryCell,a,{hitTest:n,seenUids:{box:{},circle:{}}},o),n?a.length>0:a},Xp.prototype._queryCircle=function(t,e,i,r,n){var o=t-i,a=t+i,s=e-i,u=e+i;if(a<0||o>this.width||u<0||s>this.height)return!r&&[];var l=[];return this._forEachCell(o,s,a,u,this._queryCellCircle,l,{hitTest:r,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}},n),r?l.length>0:l},Xp.prototype.query=function(t,e,i,r,n){return this._query(t,e,i,r,!1,n)},Xp.prototype.hitTest=function(t,e,i,r,n){return this._query(t,e,i,r,!0,n)},Xp.prototype.hitTestCircle=function(t,e,i,r){return this._queryCircle(t,e,i,!0,r)},Xp.prototype._queryCell=function(t,e,i,r,n,o,a,s){var u=a.seenUids,l=this.boxCells[n];if(null!==l)for(var c=this.bboxes,p=0,h=l;p<h.length;p+=1){var f=h[p];if(!u.box[f]){u.box[f]=!0;var d=4*f;if(t<=c[d+2]&&e<=c[d+3]&&i>=c[d+0]&&r>=c[d+1]&&(!s||s(this.boxKeys[f]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[f],x1:c[d],y1:c[d+1],x2:c[d+2],y2:c[d+3]})}}}var m=this.circleCells[n];if(null!==m)for(var y=this.circles,_=0,g=m;_<g.length;_+=1){var v=g[_];if(!u.circle[v]){u.circle[v]=!0;var x=3*v;if(this._circleAndRectCollide(y[x],y[x+1],y[x+2],t,e,i,r)&&(!s||s(this.circleKeys[v]))){if(a.hitTest)return o.push(!0),!0;var b=y[x],w=y[x+1],I=y[x+2];o.push({key:this.circleKeys[v],x1:b-I,y1:w-I,x2:b+I,y2:w+I})}}}},Xp.prototype._queryCellCircle=function(t,e,i,r,n,o,a,s){var u=a.circle,l=a.seenUids,c=this.boxCells[n];if(null!==c)for(var p=this.bboxes,h=0,f=c;h<f.length;h+=1){var d=f[h];if(!l.box[d]){l.box[d]=!0;var m=4*d;if(this._circleAndRectCollide(u.x,u.y,u.radius,p[m+0],p[m+1],p[m+2],p[m+3])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}var y=this.circleCells[n];if(null!==y)for(var _=this.circles,g=0,v=y;g<v.length;g+=1){var x=v[g];if(!l.circle[x]){l.circle[x]=!0;var b=3*x;if(this._circlesCollide(_[b],_[b+1],_[b+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[x])))return o.push(!0),!0}}},Xp.prototype._forEachCell=function(t,e,i,r,n,o,a,s){for(var u=this._convertToXCellCoord(t),l=this._convertToYCellCoord(e),c=this._convertToXCellCoord(i),p=this._convertToYCellCoord(r),h=u;h<=c;h++)for(var f=l;f<=p;f++)if(n.call(this,t,e,i,r,this.xCellCount*f+h,o,a,s))return},Xp.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Xp.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Xp.prototype._circlesCollide=function(t,e,i,r,n,o){var a=r-t,s=n-e,u=i+o;return u*u>a*a+s*s},Xp.prototype._circleAndRectCollide=function(t,e,i,r,n,o,a){var s=(o-r)/2,u=Math.abs(t-(r+s));if(u>s+i)return!1;var l=(a-n)/2,c=Math.abs(e-(n+l));if(c>l+i)return!1;if(u<=s||c<=l)return!0;var p=u-s,h=c-l;return p*p+h*h<=i*i};var nh=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function oh(t,e){for(var i=0;i<t;i++){var r=e.length;e.resize(r+4),e.float32.set(nh,3*r)}}function ah(t,e,i){var r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t[3]=i[3]*r+i[7]*n+i[15],t}var sh=function(t,e,i){void 0===e&&(e=new Xp(t.width+200,t.height+200,25)),void 0===i&&(i=new Xp(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function uh(t,e,i){return e*(8192/(t.tileSize*Math.pow(2,i-t.tileID.overscaledZ)))}sh.prototype.placeCollisionBox=function(t,e,i,r,n){var o=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),a=i*o.perspectiveRatio,s=t.x1*a+o.point.x,u=t.y1*a+o.point.y,l=t.x2*a+o.point.x,c=t.y2*a+o.point.y;return!this.isInsideGrid(s,u,l,c)||!e&&this.grid.hitTest(s,u,l,c,n)?{box:[],offscreen:!1}:{box:[s,u,l,c],offscreen:this.isOffscreen(s,u,l,c)}},sh.prototype.placeCollisionCircles=function(t,e,i,r,o,a,s,u,l,c,p,h,f){var d=[],m=new n(e.anchorX,e.anchorY),y=Kp(m,a),_=Yp(this.transform.cameraToCenterDistance,y.signedDistanceFromCamera),g=(c?o/_:o*_)/24,v=Kp(m,s).point,x=$p(g,r,e.lineOffsetX*g,e.lineOffsetY*g,!1,v,m,e,i,s,{}),b=!1,w=!1,I=!0;if(x){for(var S=.5*h*_+f,T=new n(-100,-100),A=new n(this.screenRightBoundary,this.screenBottomBoundary),z=new Gp,E=x.first,k=x.last,C=[],P=E.path.length-1;P>=1;P--)C.push(E.path[P]);for(var D=1;D<k.path.length;D++)C.push(k.path[D]);var M=2.5*S;if(u){var L=C.map((function(t){return Kp(t,u)}));C=L.some((function(t){return t.signedDistanceFromCamera<=0}))?[]:L.map((function(t){return t.point}))}var B=[];if(C.length>0){for(var R=C[0].clone(),F=C[0].clone(),O=1;O<C.length;O++)R.x=Math.min(R.x,C[O].x),R.y=Math.min(R.y,C[O].y),F.x=Math.max(F.x,C[O].x),F.y=Math.max(F.y,C[O].y);B=R.x>=T.x&&F.x<=A.x&&R.y>=T.y&&F.y<=A.y?[C]:F.x<T.x||R.x>A.x||F.y<T.y||R.y>A.y?[]:function(t,e,i,r,o){for(var a=[],s=0;s<t.length;s++)for(var u=t[s],l=void 0,c=0;c<u.length-1;c++){var p=u[c],h=u[c+1];p.x<e&&h.x<e||(p.x<e?p=new n(e,p.y+(e-p.x)/(h.x-p.x)*(h.y-p.y))._round():h.x<e&&(h=new n(e,p.y+(e-p.x)/(h.x-p.x)*(h.y-p.y))._round()),p.y<i&&h.y<i||(p.y<i?p=new n(p.x+(i-p.y)/(h.y-p.y)*(h.x-p.x),i)._round():h.y<i&&(h=new n(p.x+(i-p.y)/(h.y-p.y)*(h.x-p.x),i)._round()),p.x>=r&&h.x>=r||(p.x>=r?p=new n(r,p.y+(r-p.x)/(h.x-p.x)*(h.y-p.y))._round():h.x>=r&&(h=new n(r,p.y+(r-p.x)/(h.x-p.x)*(h.y-p.y))._round()),p.y>=o&&h.y>=o||(p.y>=o?p=new n(p.x+(o-p.y)/(h.y-p.y)*(h.x-p.x),o)._round():h.y>=o&&(h=new n(p.x+(o-p.y)/(h.y-p.y)*(h.x-p.x),o)._round()),l&&p.equals(l[l.length-1])||a.push(l=[p]),l.push(h)))))}return a}([C],T.x,T.y,A.x,A.y)}for(var V=0,U=B;V<U.length;V+=1){var j;z.reset(U[V],.25*S),j=z.length<=.5*S?1:Math.ceil(z.paddedLength/M)+1;for(var N=0;N<j;N++){var q=N/Math.max(j-1,1),Z=z.lerp(q),G=Z.x+100,X=Z.y+100;d.push(G,X,S,0);var W=G-S,H=X-S,K=G+S,Y=X+S;if(I=I&&this.isOffscreen(W,H,K,Y),w=w||this.isInsideGrid(W,H,K,Y),!t&&this.grid.hitTestCircle(G,X,S,p)&&(b=!0,!l))return{circles:[],offscreen:!1,collisionDetected:b}}}}return{circles:!l&&b||!w?[]:d,offscreen:I,collisionDetected:b}},sh.prototype.queryRenderedSymbols=function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var e=[],i=1/0,r=1/0,o=-1/0,a=-1/0,s=0,u=t;s<u.length;s+=1){var l=u[s],c=new n(l.x+100,l.y+100);i=Math.min(i,c.x),r=Math.min(r,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y),e.push(c)}for(var p={},h={},f=0,d=this.grid.query(i,r,o,a).concat(this.ignoredGrid.query(i,r,o,a));f<d.length;f+=1){var m=d[f],y=m.key;void 0===p[y.bucketInstanceId]&&(p[y.bucketInstanceId]={}),p[y.bucketInstanceId][y.featureIndex]||ha(e,[new n(m.x1,m.y1),new n(m.x2,m.y1),new n(m.x2,m.y2),new n(m.x1,m.y2)])&&(p[y.bucketInstanceId][y.featureIndex]=!0,void 0===h[y.bucketInstanceId]&&(h[y.bucketInstanceId]=[]),h[y.bucketInstanceId].push(y.featureIndex))}return h},sh.prototype.insertCollisionBox=function(t,e,i,r,n){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:r,collisionGroupID:n},t[0],t[1],t[2],t[3])},sh.prototype.insertCollisionCircles=function(t,e,i,r,n){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:i,featureIndex:r,collisionGroupID:n},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},sh.prototype.projectAndGetPerspectiveRatio=function(t,e,i){var r=[e,i,0,1];return ah(r,r,t),{point:new n((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}},sh.prototype.isOffscreen=function(t,e,i,r){return i<100||t>=this.screenRightBoundary||r<100||e>this.screenBottomBoundary},sh.prototype.isInsideGrid=function(t,e,i,r){return i>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary},sh.prototype.getViewportMatrix=function(){var t=Ca([]);return Ma(t,t,[-100,-100,0]),t};var lh=function(t,e,i,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&i?1:0,this.placed=i};lh.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var ch=function(t,e,i,r,n){this.text=new lh(t?t.text:null,e,i,n),this.icon=new lh(t?t.icon:null,e,r,n)};ch.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var ph=function(t,e,i){this.text=t,this.icon=e,this.skipFade=i},hh=function(){this.invProjMatrix=ka(),this.viewportMatrix=ka(),this.circles=[]},fh=function(t,e,i,r,n){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=i,this.bucketIndex=r,this.tileID=n},dh=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};function mh(t,e,i,r,o){var a=il(t),s=-(a.horizontalAlign-.5)*e,u=-(a.verticalAlign-.5)*i,l=ul(t,r);return new n(s+l[0]*o,u+l[1]*o)}function yh(t,e,i,r,o,a){var s=t.x1,u=t.x2,l=t.y1,c=t.y2,p=t.anchorPointX,h=t.anchorPointY,f=new n(e,i);return r&&f._rotate(o?a:-a),{x1:s+f.x,y1:l+f.y,x2:u+f.x,y2:c+f.y,anchorPointX:p,anchorPointY:h}}dh.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var _h=function(t,e,i,r){this.transform=t.clone(),this.collisionIndex=new sh(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new dh(i),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}};function gh(t,e,i,r,n){t.emplaceBack(e?1:0,i?1:0,r||0,n||0),t.emplaceBack(e?1:0,i?1:0,r||0,n||0),t.emplaceBack(e?1:0,i?1:0,r||0,n||0),t.emplaceBack(e?1:0,i?1:0,r||0,n||0)}_h.prototype.getBucketParts=function(t,e,i,r){var n=i.getBucket(e),o=i.latestFeatureIndex;if(n&&o&&e.id===n.layerIds[0]){var a=i.collisionBoxArray,s=n.layers[0].layout,u=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),l=i.tileSize/8192,c=this.transform.calculatePosMatrix(i.tileID.toUnwrapped()),p="map"===s.get("text-pitch-alignment"),h="map"===s.get("text-rotation-alignment"),f=uh(i,1,this.transform.zoom),d=Wp(c,p,h,this.transform,f),m=null;if(p){var y=Hp(c,p,h,this.transform,f);m=Da([],this.transform.labelPlaneMatrix,y)}this.retainedQueryData[n.bucketInstanceId]=new fh(n.bucketInstanceId,o,n.sourceLayerIndex,n.index,i.tileID);var _={bucket:n,layout:s,posMatrix:c,textLabelPlaneMatrix:d,labelToScreenMatrix:m,scale:u,textPixelRatio:l,holdingForFade:i.holdingForFade(),collisionBoxArray:a,partiallyEvaluatedTextSize:ol(n.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(n.sourceID)};if(r)for(var g=0,v=n.sortKeyRanges;g<v.length;g+=1){var x=v[g];t.push({sortKey:x.sortKey,symbolInstanceStart:x.symbolInstanceStart,symbolInstanceEnd:x.symbolInstanceEnd,parameters:_})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:n.symbolInstances.length,parameters:_})}},_h.prototype.attemptAnchorPlacement=function(t,e,i,r,n,o,a,s,u,l,c,p,h,f,d){var m,y=[p.textOffset0,p.textOffset1],_=mh(t,i,r,y,n),g=this.collisionIndex.placeCollisionBox(yh(e,_.x,_.y,o,a,this.transform.angle),c,s,u,l.predicate);if(!d||0!==this.collisionIndex.placeCollisionBox(yh(d,_.x,_.y,o,a,this.transform.angle),c,s,u,l.predicate).box.length)return g.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID].text&&(m=this.prevPlacement.variableOffsets[p.crossTileID].anchor),this.variableOffsets[p.crossTileID]={textOffset:y,width:i,height:r,anchor:t,textBoxScale:n,prevAnchor:m},this.markUsedJustification(h,t,p,f),h.allowVerticalPlacement&&(this.markUsedOrientation(h,f,p),this.placedOrientations[p.crossTileID]=f),{shift:_,placedGlyphBoxes:g}):void 0},_h.prototype.placeLayerBucketPart=function(t,e,i){var r=this,n=t.parameters,o=n.bucket,a=n.layout,s=n.posMatrix,u=n.textLabelPlaneMatrix,l=n.labelToScreenMatrix,c=n.textPixelRatio,p=n.holdingForFade,h=n.collisionBoxArray,f=n.partiallyEvaluatedTextSize,d=n.collisionGroup,m=a.get("text-optional"),y=a.get("icon-optional"),_=a.get("text-allow-overlap"),g=a.get("icon-allow-overlap"),v="map"===a.get("text-rotation-alignment"),x="map"===a.get("text-pitch-alignment"),b="none"!==a.get("icon-text-fit"),w="viewport-y"===a.get("symbol-z-order"),I=_&&(g||!o.hasIconData()||y),S=g&&(_||!o.hasTextData()||m);!o.collisionArrays&&h&&o.deserializeCollisionBoxes(h);var T=function(t,n){if(!e[t.crossTileID])if(p)r.placements[t.crossTileID]=new ph(!1,!1,!1);else{var h,w=!1,T=!1,A=!0,z=null,E={box:null,offscreen:null},k={box:null,offscreen:null},C=null,P=null,D=0,M=0,L=0;n.textFeatureIndex?D=n.textFeatureIndex:t.useRuntimeCollisionCircles&&(D=t.featureIndex),n.verticalTextFeatureIndex&&(M=n.verticalTextFeatureIndex);var B=n.textBox;if(B){var R=function(e){var i=Qu.horizontal;if(o.allowVerticalPlacement&&!e&&r.prevPlacement){var n=r.prevPlacement.placedOrientations[t.crossTileID];n&&(r.placedOrientations[t.crossTileID]=n,r.markUsedOrientation(o,i=n,t))}return i},F=function(e,i){if(o.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&n.verticalTextBox)for(var r=0,a=o.writingModes;r<a.length&&(a[r]===Qu.vertical?(E=i(),k=E):E=e(),!(E&&E.box&&E.box.length));r+=1);else E=e()};if(a.get("text-variable-anchor")){var O=a.get("text-variable-anchor");if(r.prevPlacement&&r.prevPlacement.variableOffsets[t.crossTileID]){var V=r.prevPlacement.variableOffsets[t.crossTileID];O.indexOf(V.anchor)>0&&(O=O.filter((function(t){return t!==V.anchor}))).unshift(V.anchor)}var U=function(e,i,n){for(var a=e.x2-e.x1,u=e.y2-e.y1,l=t.textBoxScale,p=b&&!g?i:null,h={box:[],offscreen:!1},f=_?2*O.length:O.length,m=0;m<f;++m){var y=r.attemptAnchorPlacement(O[m%O.length],e,a,u,l,v,x,c,s,d,m>=O.length,t,o,n,p);if(y&&(h=y.placedGlyphBoxes)&&h.box&&h.box.length){w=!0,z=y.shift;break}}return h};F((function(){return U(B,n.iconBox,Qu.horizontal)}),(function(){var e=n.verticalTextBox;return o.allowVerticalPlacement&&!(E&&E.box&&E.box.length)&&t.numVerticalGlyphVertices>0&&e?U(e,n.verticalIconBox,Qu.vertical):{box:null,offscreen:null}})),E&&(w=E.box,A=E.offscreen);var j=R(E&&E.box);if(!w&&r.prevPlacement){var N=r.prevPlacement.variableOffsets[t.crossTileID];N&&(r.variableOffsets[t.crossTileID]=N,r.markUsedJustification(o,N.anchor,t,j))}}else{var q=function(e,i){var n=r.collisionIndex.placeCollisionBox(e,_,c,s,d.predicate);return n&&n.box&&n.box.length&&(r.markUsedOrientation(o,i,t),r.placedOrientations[t.crossTileID]=i),n};F((function(){return q(B,Qu.horizontal)}),(function(){var e=n.verticalTextBox;return o.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&e?q(e,Qu.vertical):{box:null,offscreen:null}})),R(E&&E.box&&E.box.length)}}if(w=(h=E)&&h.box&&h.box.length>0,A=h&&h.offscreen,t.useRuntimeCollisionCircles){var Z=o.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex),G=nl(o.textSizeData,f,Z),X=a.get("text-padding");C=r.collisionIndex.placeCollisionCircles(_,Z,o.lineVertexArray,o.glyphOffsetArray,G,s,u,l,i,x,d.predicate,t.collisionCircleDiameter,X),w=_||C.circles.length>0&&!C.collisionDetected,A=A&&C.offscreen}if(n.iconFeatureIndex&&(L=n.iconFeatureIndex),n.iconBox){var W=function(t){var e=b&&z?yh(t,z.x,z.y,v,x,r.transform.angle):t;return r.collisionIndex.placeCollisionBox(e,g,c,s,d.predicate)};T=k&&k.box&&k.box.length&&n.verticalIconBox?(P=W(n.verticalIconBox)).box.length>0:(P=W(n.iconBox)).box.length>0,A=A&&P.offscreen}var H=m||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,K=y||0===t.numIconVertices;if(H||K?K?H||(T=T&&w):w=T&&w:T=w=T&&w,w&&h&&h.box&&r.collisionIndex.insertCollisionBox(h.box,a.get("text-ignore-placement"),o.bucketInstanceId,k&&k.box&&M?M:D,d.ID),T&&P&&r.collisionIndex.insertCollisionBox(P.box,a.get("icon-ignore-placement"),o.bucketInstanceId,L,d.ID),C&&(w&&r.collisionIndex.insertCollisionCircles(C.circles,a.get("text-ignore-placement"),o.bucketInstanceId,D,d.ID),i)){var Y=o.bucketInstanceId,J=r.collisionCircleArrays[Y];void 0===J&&(J=r.collisionCircleArrays[Y]=new hh);for(var Q=0;Q<C.circles.length;Q+=4)J.circles.push(C.circles[Q+0]),J.circles.push(C.circles[Q+1]),J.circles.push(C.circles[Q+2]),J.circles.push(C.collisionDetected?1:0)}r.placements[t.crossTileID]=new ph(w||I,T||S,A||o.justReloaded),e[t.crossTileID]=!0}};if(w)for(var A=o.getSortedSymbolIndexes(this.transform.angle),z=A.length-1;z>=0;--z){var E=A[z];T(o.symbolInstances.get(E),o.collisionArrays[E])}else for(var k=t.symbolInstanceStart;k<t.symbolInstanceEnd;k++)T(o.symbolInstances.get(k),o.collisionArrays[k]);if(i&&o.bucketInstanceId in this.collisionCircleArrays){var C=this.collisionCircleArrays[o.bucketInstanceId];Pa(C.invProjMatrix,s),C.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1},_h.prototype.markUsedJustification=function(t,e,i,r){var n;n=r===Qu.vertical?i.verticalPlacedTextSymbolIndex:{left:i.leftJustifiedTextSymbolIndex,center:i.centerJustifiedTextSymbolIndex,right:i.rightJustifiedTextSymbolIndex}[function(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}(e)];for(var o=0,a=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex,i.verticalPlacedTextSymbolIndex];o<a.length;o+=1){var s=a[o];s>=0&&(t.text.placedSymbolArray.get(s).crossTileID=n>=0&&s!==n?0:i.crossTileID)}},_h.prototype.markUsedOrientation=function(t,e,i){for(var r=e===Qu.horizontal||e===Qu.horizontalOnly?e:0,n=e===Qu.vertical?e:0,o=0,a=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex];o<a.length;o+=1)t.text.placedSymbolArray.get(a[o]).placedOrientation=r;i.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).placedOrientation=n)},_h.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,i=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var r=e?e.symbolFadeChange(t):1,n=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(var s in this.placements){var u=this.placements[s],l=n[s];l?(this.opacities[s]=new ch(l,r,u.text,u.icon),i=i||u.text!==l.text.placed||u.icon!==l.icon.placed):(this.opacities[s]=new ch(null,r,u.text,u.icon,u.skipFade),i=i||u.text||u.icon)}for(var c in n){var p=n[c];if(!this.opacities[c]){var h=new ch(p,r,!1,!1);h.isHidden()||(this.opacities[c]=h,i=i||p.text.placed||p.icon.placed)}}for(var f in o)this.variableOffsets[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.variableOffsets[f]=o[f]);for(var d in a)this.placedOrientations[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.placedOrientations[d]=a[d]);i?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},_h.prototype.updateLayerOpacities=function(t,e){for(var i={},r=0,n=e;r<n.length;r+=1){var o=n[r],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,i,o.collisionBoxArray)}},_h.prototype.updateBucketOpacities=function(t,e,i){var r=this;t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();var o=t.layers[0].layout,a=new ch(null,0,!1,!1,!0),s=o.get("text-allow-overlap"),u=o.get("icon-allow-overlap"),l=o.get("text-variable-anchor"),c="map"===o.get("text-rotation-alignment"),p="map"===o.get("text-pitch-alignment"),h="none"!==o.get("icon-text-fit"),f=new ch(null,0,s&&(u||!t.hasIconData()||o.get("icon-optional")),u&&(s||!t.hasTextData()||o.get("text-optional")),!0);!t.collisionArrays&&i&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(i);for(var d=function(t,e,i){for(var r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(i)},m=function(i){var o=t.symbolInstances.get(i),s=o.numHorizontalGlyphVertices,u=o.numVerticalGlyphVertices,m=o.crossTileID,y=r.opacities[m];e[m]?y=a:y||(r.opacities[m]=y=f),e[m]=!0;var _=o.numIconVertices>0,g=r.placedOrientations[o.crossTileID],v=g===Qu.vertical,x=g===Qu.horizontal||g===Qu.horizontalOnly;if(s>0||u>0){var b=Ah(y.text);d(t.text,s,v?zh:b),d(t.text,u,x?zh:b);var w=y.text.isHidden();[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((function(e){e>=0&&(t.text.placedSymbolArray.get(e).hidden=w||v?1:0)})),o.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).hidden=w||x?1:0);var I=r.variableOffsets[o.crossTileID];I&&r.markUsedJustification(t,I.anchor,o,g);var S=r.placedOrientations[o.crossTileID];S&&(r.markUsedJustification(t,"left",o,S),r.markUsedOrientation(t,S,o))}if(_){var T=Ah(y.icon),A=!(h&&o.verticalPlacedIconSymbolIndex&&v);o.placedIconSymbolIndex>=0&&(d(t.icon,o.numIconVertices,A?T:zh),t.icon.placedSymbolArray.get(o.placedIconSymbolIndex).hidden=y.icon.isHidden()),o.verticalPlacedIconSymbolIndex>=0&&(d(t.icon,o.numVerticalIconVertices,A?zh:T),t.icon.placedSymbolArray.get(o.verticalPlacedIconSymbolIndex).hidden=y.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){var z=t.collisionArrays[i];if(z){var E=new n(0,0);if(z.textBox||z.verticalTextBox){var k=!0;if(l){var C=r.variableOffsets[m];C?(E=mh(C.anchor,C.width,C.height,C.textOffset,C.textBoxScale),c&&E._rotate(p?r.transform.angle:-r.transform.angle)):k=!1}z.textBox&&gh(t.textCollisionBox.collisionVertexArray,y.text.placed,!k||v,E.x,E.y),z.verticalTextBox&&gh(t.textCollisionBox.collisionVertexArray,y.text.placed,!k||x,E.x,E.y)}var P=Boolean(!x&&z.verticalIconBox);z.iconBox&&gh(t.iconCollisionBox.collisionVertexArray,y.icon.placed,P,h?E.x:0,h?E.y:0),z.verticalIconBox&&gh(t.iconCollisionBox.collisionVertexArray,y.icon.placed,!P,h?E.x:0,h?E.y:0)}}},y=0;y<t.symbolInstances.length;y++)m(y);if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){var _=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=_.invProjMatrix,t.placementViewportMatrix=_.viewportMatrix,t.collisionCircleArray=_.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}},_h.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},_h.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},_h.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},_h.prototype.stillRecent=function(t,e){var i=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*i>t},_h.prototype.setStale=function(){this.stale=!0};var vh=Math.pow(2,25),xh=Math.pow(2,24),bh=Math.pow(2,17),wh=Math.pow(2,16),Ih=Math.pow(2,9),Sh=Math.pow(2,8),Th=Math.pow(2,1);function Ah(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,i=Math.floor(127*t.opacity);return i*vh+e*xh+i*bh+e*wh+i*Ih+e*Sh+i*Th+e}var zh=0,Eh=function(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Eh.prototype.continuePlacement=function(t,e,i,r,n){for(var o=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(o,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,n())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((function(t,e){return t.sortKey-e.sortKey})));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,n())return!0;return!1};var kh=function(t,e,i,r,n,o,a){this.placement=new _h(t,n,o,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=r,this._done=!1};kh.prototype.isDone=function(){return this._done},kh.prototype.continuePlacement=function(t,e,i){for(var r=this,n=U.now(),o=function(){var t=U.now()-n;return!r._forceFullPlacement&&t>2};this._currentPlacementIndex>=0;){var a=e[t[this._currentPlacementIndex]],s=this.placement.collisionIndex.transform.zoom;if("symbol"===a.type&&(!a.minzoom||a.minzoom<=s)&&(!a.maxzoom||a.maxzoom>s)){if(this._inProgressLayer||(this._inProgressLayer=new Eh(a)),this._inProgressLayer.continuePlacement(i[a.source],this.placement,this._showCollisionBoxes,a,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},kh.prototype.commit=function(t){return this.placement.commit(t),this.placement};var Ch=function(t,e,i){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(var r=0;r<e.length;r++){var n=e.get(r),o=n.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:n.crossTileID,coord:this.getScaledCoordinates(n,t)})}};Ch.prototype.getScaledCoordinates=function(t,e){var i=.03125/Math.pow(2,e.canonical.z-this.tileID.canonical.z);return{x:Math.floor((8192*e.canonical.x+t.anchorX)*i),y:Math.floor((8192*e.canonical.y+t.anchorY)*i)}},Ch.prototype.findMatches=function(t,e,i){for(var r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),n=0;n<t.length;n++){var o=t.get(n);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,e),u=0,l=a;u<l.length;u+=1){var c=l[u];if(Math.abs(c.coord.x-s.x)<=r&&Math.abs(c.coord.y-s.y)<=r&&!i[c.crossTileID]){i[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}}};var Ph=function(){this.maxCrossTileID=0};Ph.prototype.generate=function(){return++this.maxCrossTileID};var Dh=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Dh.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var i in this.indexes){var r=this.indexes[i],n={};for(var o in r){var a=r[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),n[a.tileID.key]=a}this.indexes[i]=n}this.lng=t},Dh.prototype.addBucket=function(t,e,i){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var r=0;r<e.symbolInstances.length;r++)e.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var n=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in a){var u=a[s];u.tileID.isChildOf(t)&&u.findMatches(e.symbolInstances,t,n)}else{var l=a[t.scaledTo(Number(o)).key];l&&l.findMatches(e.symbolInstances,t,n)}}for(var c=0;c<e.symbolInstances.length;c++){var p=e.symbolInstances.get(c);p.crossTileID||(p.crossTileID=i.generate(),n[p.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Ch(t,e.symbolInstances,e.bucketInstanceId),!0},Dh.prototype.removeBucketCrossTileIDs=function(t,e){for(var i in e.indexedSymbolInstances)for(var r=0,n=e.indexedSymbolInstances[i];r<n.length;r+=1)delete this.usedCrossTileIDs[t][n[r].crossTileID]},Dh.prototype.removeStaleBuckets=function(t){var e=!1;for(var i in this.indexes){var r=this.indexes[i];for(var n in r)t[r[n].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,r[n]),delete r[n],e=!0)}return e};var Mh=function(){this.layerIndexes={},this.crossTileIDs=new Ph,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Mh.prototype.addLayer=function(t,e,i){var r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new Dh);var n=!1,o={};r.handleWrapJump(i);for(var a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.getBucket(t);l&&t.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,l,this.crossTileIDs)&&(n=!0),o[l.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(n=!0),n},Mh.prototype.pruneUnusedLayers=function(t){var e={};for(var i in t.forEach((function(t){e[t]=!0})),this.layerIndexes)e[i]||delete this.layerIndexes[i]};var Lh=function(t,e){return Xr(t,e&&e.filter((function(t){return"source.canvas"!==t.identifier})))},Bh=y(Fp,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Rh=y(Fp,["setCenter","setZoom","setBearing","setPitch"]),Fh=function(){var t={},e=Zt.$version;for(var i in Zt.$root){var r,n=Zt.$root[i];n.required&&null!=(r="version"===i?e:"array"===n.type?[]:{})&&(t[i]=r)}return t}(),Oh=function(t){function e(i,r){var n=this;void 0===r&&(r={}),t.call(this),this.map=i,this.dispatcher=new Kl(Mp(),this),this.imageManager=new Bl,this.imageManager.setEventedParent(this),this.glyphManager=new Nl(i._requestManager,r.localIdeographFontFamily),this.lineAtlas=new Xl(256,512),this.crossTileSymbolIndex=new Mh,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new on,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",Ct());var o=this;this._rtlTextPluginCallback=e.registerForPluginStateChange((function(t){o.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},(function(t,e){if(In(t),e&&e.every((function(t){return t})))for(var i in o.sourceCaches)o.sourceCaches[i].reload()}))})),this.on("data",(function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=n.sourceCaches[t.sourceId];if(e){var i=e.getSource();if(i&&i.vectorLayerIds)for(var r in n._layers){var o=n._layers[r];o.source===i.id&&n._validateLayer(o)}}}}))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.loadURL=function(t,e){var i=this;void 0===e&&(e={}),this.fire(new jt("dataloading",{dataType:"style"}));var r="boolean"==typeof e.validate?e.validate:!ot(t);t=this.map._requestManager.normalizeStyleURL(t,e.accessToken);var n=this.map._requestManager.transformRequest(t,Et.Style);this._request=Lt(n,(function(t,e){i._request=null,t?i.fire(new Nt(t)):e&&i._load(e,r)}))},e.prototype.loadJSON=function(t,e){var i=this;void 0===e&&(e={}),this.fire(new jt("dataloading",{dataType:"style"})),this._request=U.frame((function(){i._request=null,i._load(t,!1!==e.validate)}))},e.prototype.loadEmpty=function(){this.fire(new jt("dataloading",{dataType:"style"})),this._load(Fh,!1)},e.prototype._load=function(t,e){if(!e||!Lh(this,Nr(t))){for(var i in this._loaded=!0,this.stylesheet=t,t.sources)this.addSource(i,t.sources[i],{validate:!1});t.sprite?this._loadSprite(t.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);var r=Rp(this.stylesheet.layers);this._order=r.map((function(t){return t.id})),this._layers={},this._serializedLayers={};for(var n=0,o=r;n<o.length;n+=1){var a=o[n];(a=zl(a)).setEventedParent(this,{layer:{id:a.id}}),this._layers[a.id]=a,this._serializedLayers[a.id]=a.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Gl(this.stylesheet.light),this.fire(new jt("data",{dataType:"style"})),this.fire(new jt("style.load"))}},e.prototype._loadSprite=function(t){var e=this;this._spriteRequest=function(t,e,i){var r,n,o,a=U.devicePixelRatio>1?"@2x":"",s=Lt(e.transformRequest(e.normalizeSpriteURL(t,a,".json"),Et.SpriteJSON),(function(t,e){s=null,o||(o=t,r=e,l())})),u=Ot(e.transformRequest(e.normalizeSpriteURL(t,a,".png"),Et.SpriteImage),(function(t,e){u=null,o||(o=t,n=e,l())}));function l(){if(o)i(o);else if(r&&n){var t=U.getImageData(n),e={};for(var a in r){var s=r[a],u=s.width,l=s.height,c=s.x,p=s.y,h=s.sdf,f=s.pixelRatio,d=s.stretchX,m=s.stretchY,y=s.content,_=new Ya({width:u,height:l});Ya.copy(t,_,{x:c,y:p},{x:0,y:0},{width:u,height:l}),e[a]={data:_,pixelRatio:f,sdf:h,stretchX:d,stretchY:m,content:y}}i(null,e)}}return{cancel:function(){s&&(s.cancel(),s=null),u&&(u.cancel(),u=null)}}}(t,this.map._requestManager,(function(t,i){if(e._spriteRequest=null,t)e.fire(new Nt(t));else if(i)for(var r in i)e.imageManager.addImage(r,i[r]);e.imageManager.setLoaded(!0),e._availableImages=e.imageManager.listImages(),e.dispatcher.broadcast("setImages",e._availableImages),e.fire(new jt("data",{dataType:"style"}))}))},e.prototype._validateLayer=function(t){var e=this.sourceCaches[t.source];if(e){var i=t.sourceLayer;if(i){var r=e.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(i))&&this.fire(new Nt(new Error('Source layer "'+i+'" does not exist on source "'+r.id+'" as specified by style layer "'+t.id+'"')))}}},e.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},e.prototype._serializeLayers=function(t){for(var e=[],i=0,r=t;i<r.length;i+=1){var n=this._layers[r[i]];"custom"!==n.type&&e.push(n.serialize())}return e},e.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},e.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},e.prototype.update=function(t){if(this._loaded){var e=this._changed;if(this._changed){var i=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var n in(i.length||r.length)&&this._updateWorkerLayers(i,r),this._updatedSources){var o=this._updatedSources[n];"reload"===o?this._reloadSource(n):"clear"===o&&this._clearSource(n)}for(var a in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[a].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}var s={};for(var u in this.sourceCaches){var l=this.sourceCaches[u];s[u]=l.used,l.used=!1}for(var c=0,p=this._order;c<p.length;c+=1){var h=this._layers[p[c]];h.recalculate(t,this._availableImages),!h.isHidden(t.zoom)&&h.source&&(this.sourceCaches[h.source].used=!0)}for(var f in s){var d=this.sourceCaches[f];s[f]!==d.used&&d.fire(new jt("data",{sourceDataType:"visibility",dataType:"source",sourceId:f}))}this.light.recalculate(t),this.z=t.zoom,e&&this.fire(new jt("data",{dataType:"style"}))}},e.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}},e.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},e.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},e.prototype.setState=function(t){var e=this;if(this._checkLoaded(),Lh(this,Nr(t)))return!1;(t=T(t)).layers=Rp(t.layers);var i=function(t,e){if(!t)return[{command:Fp.setStyle,args:[e]}];var i=[];try{if(!s(t.version,e.version))return[{command:Fp.setStyle,args:[e]}];s(t.center,e.center)||i.push({command:Fp.setCenter,args:[e.center]}),s(t.zoom,e.zoom)||i.push({command:Fp.setZoom,args:[e.zoom]}),s(t.bearing,e.bearing)||i.push({command:Fp.setBearing,args:[e.bearing]}),s(t.pitch,e.pitch)||i.push({command:Fp.setPitch,args:[e.pitch]}),s(t.sprite,e.sprite)||i.push({command:Fp.setSprite,args:[e.sprite]}),s(t.glyphs,e.glyphs)||i.push({command:Fp.setGlyphs,args:[e.glyphs]}),s(t.transition,e.transition)||i.push({command:Fp.setTransition,args:[e.transition]}),s(t.light,e.light)||i.push({command:Fp.setLight,args:[e.light]});var r={},n=[];!function(t,e,i,r){var n;for(n in e=e||{},t=t||{})t.hasOwnProperty(n)&&(e.hasOwnProperty(n)||Vp(n,i,r));for(n in e)e.hasOwnProperty(n)&&(t.hasOwnProperty(n)?s(t[n],e[n])||("geojson"===t[n].type&&"geojson"===e[n].type&&jp(t,e,n)?i.push({command:Fp.setGeoJSONSourceData,args:[n,e[n].data]}):Up(n,e,i,r)):Op(n,e,i))}(t.sources,e.sources,n,r);var o=[];t.layers&&t.layers.forEach((function(t){r[t.source]?i.push({command:Fp.removeLayer,args:[t.id]}):o.push(t)})),i=i.concat(n),function(t,e,i){e=e||[];var r,n,o,a,u,l,c,p=(t=t||[]).map(qp),h=e.map(qp),f=t.reduce(Zp,{}),d=e.reduce(Zp,{}),m=p.slice(),y=Object.create(null);for(r=0,n=0;r<p.length;r++)d.hasOwnProperty(o=p[r])?n++:(i.push({command:Fp.removeLayer,args:[o]}),m.splice(m.indexOf(o,n),1));for(r=0,n=0;r<h.length;r++)m[m.length-1-r]!==(o=h[h.length-1-r])&&(f.hasOwnProperty(o)?(i.push({command:Fp.removeLayer,args:[o]}),m.splice(m.lastIndexOf(o,m.length-n),1)):n++,i.push({command:Fp.addLayer,args:[d[o],l=m[m.length-r]]}),m.splice(m.length-r,0,o),y[o]=!0);for(r=0;r<h.length;r++)if(a=f[o=h[r]],u=d[o],!y[o]&&!s(a,u))if(s(a.source,u.source)&&s(a["source-layer"],u["source-layer"])&&s(a.type,u.type)){for(c in Np(a.layout,u.layout,i,o,null,Fp.setLayoutProperty),Np(a.paint,u.paint,i,o,null,Fp.setPaintProperty),s(a.filter,u.filter)||i.push({command:Fp.setFilter,args:[o,u.filter]}),s(a.minzoom,u.minzoom)&&s(a.maxzoom,u.maxzoom)||i.push({command:Fp.setLayerZoomRange,args:[o,u.minzoom,u.maxzoom]}),a)a.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Np(a[c],u[c],i,o,c.slice(6),Fp.setPaintProperty):s(a[c],u[c])||i.push({command:Fp.setLayerProperty,args:[o,c,u[c]]}));for(c in u)u.hasOwnProperty(c)&&!a.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Np(a[c],u[c],i,o,c.slice(6),Fp.setPaintProperty):s(a[c],u[c])||i.push({command:Fp.setLayerProperty,args:[o,c,u[c]]}))}else i.push({command:Fp.removeLayer,args:[o]}),l=m[m.lastIndexOf(o)+1],i.push({command:Fp.addLayer,args:[u,l]})}(o,e.layers,i)}catch(t){console.warn("Unable to compute style diff:",t),i=[{command:Fp.setStyle,args:[e]}]}return i}(this.serialize(),t).filter((function(t){return!(t.command in Rh)}));if(0===i.length)return!1;var r=i.filter((function(t){return!(t.command in Bh)}));if(r.length>0)throw new Error("Unimplemented: "+r.map((function(t){return t.command})).join(", ")+".");return i.forEach((function(t){"setTransition"!==t.command&&e[t.command].apply(e,t.args)})),this.stylesheet=t,!0},e.prototype.addImage=function(t,e){if(this.getImage(t))return this.fire(new Nt(new Error("An image with this name already exists.")));this.imageManager.addImage(t,e),this._afterImageUpdated(t)},e.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},e.prototype.getImage=function(t){return this.imageManager.getImage(t)},e.prototype.removeImage=function(t){if(!this.getImage(t))return this.fire(new Nt(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this._afterImageUpdated(t)},e.prototype._afterImageUpdated=function(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new jt("data",{dataType:"style"}))},e.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},e.prototype.addSource=function(t,e,i){var r=this;if(void 0===i&&(i={}),this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!e.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(e).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(e.type)>=0&&this._validate(Nr.source,"sources."+t,e,null,i))){this.map&&this.map._collectResourceTiming&&(e.collectResourceTiming=!0);var n=this.sourceCaches[t]=new Tp(t,e,this.dispatcher);n.style=this,n.setEventedParent(this,(function(){return{isSourceLoaded:r.loaded(),source:n.serialize(),sourceId:t}})),n.onAdd(this.map),this._changed=!0}},e.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(var e in this._layers)if(this._layers[e].source===t)return this.fire(new Nt(new Error('Source "'+t+'" cannot be removed while layer "'+e+'" is using it.')));var i=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],i.fire(new jt("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),i.setEventedParent(null),i.clearTiles(),i.onRemove&&i.onRemove(this.map),this._changed=!0},e.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},e.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},e.prototype.addLayer=function(t,e,i){void 0===i&&(i={}),this._checkLoaded();var r=t.id;if(this.getLayer(r))this.fire(new Nt(new Error('Layer with id "'+r+'" already exists on this map')));else{var n;if("custom"===t.type){if(Lh(this,function(t){var e=[],i=t.id;return void 0===i&&e.push({message:"layers."+i+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+i+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),e}(t)))return;n=zl(t)}else{if("object"==typeof t.source&&(this.addSource(r,t.source),t=m(t=T(t),{source:r})),this._validate(Nr.layer,"layers."+r,t,{arrayIndex:-1},i))return;n=zl(t),this._validateLayer(n),n.setEventedParent(this,{layer:{id:r}}),this._serializedLayers[n.id]=n.serialize()}var o=e?this._order.indexOf(e):this._order.length;if(e&&-1===o)this.fire(new Nt(new Error('Layer with id "'+e+'" does not exist on this map.')));else{if(this._order.splice(o,0,r),this._layerOrderChanged=!0,this._layers[r]=n,this._removedLayers[r]&&n.source&&"custom"!==n.type){var a=this._removedLayers[r];delete this._removedLayers[r],a.type!==n.type?this._updatedSources[n.source]="clear":(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause())}this._updateLayer(n),n.onAdd&&n.onAdd(this.map)}}},e.prototype.moveLayer=function(t,e){if(this._checkLoaded(),this._changed=!0,this._layers[t]){if(t!==e){var i=this._order.indexOf(t);this._order.splice(i,1);var r=e?this._order.indexOf(e):this._order.length;e&&-1===r?this.fire(new Nt(new Error('Layer with id "'+e+'" does not exist on this map.'))):(this._order.splice(r,0,t),this._layerOrderChanged=!0)}}else this.fire(new Nt(new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")))},e.prototype.removeLayer=function(t){this._checkLoaded();var e=this._layers[t];if(e){e.setEventedParent(null);var i=this._order.indexOf(t);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=e,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],e.onRemove&&e.onRemove(this.map)}else this.fire(new Nt(new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")))},e.prototype.getLayer=function(t){return this._layers[t]},e.prototype.hasLayer=function(t){return t in this._layers},e.prototype.setLayerZoomRange=function(t,e,i){this._checkLoaded();var r=this.getLayer(t);r?r.minzoom===e&&r.maxzoom===i||(null!=e&&(r.minzoom=e),null!=i&&(r.maxzoom=i),this._updateLayer(r)):this.fire(new Nt(new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")))},e.prototype.setFilter=function(t,e,i){void 0===i&&(i={}),this._checkLoaded();var r=this.getLayer(t);if(r){if(!s(r.filter,e))return null==e?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(Nr.filter,"layers."+r.id+".filter",e,null,i)||(r.filter=T(e),this._updateLayer(r)))}else this.fire(new Nt(new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")))},e.prototype.getFilter=function(t){return T(this.getLayer(t).filter)},e.prototype.setLayoutProperty=function(t,e,i,r){void 0===r&&(r={}),this._checkLoaded();var n=this.getLayer(t);n?s(n.getLayoutProperty(e),i)||(n.setLayoutProperty(e,i,r),this._updateLayer(n)):this.fire(new Nt(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},e.prototype.getLayoutProperty=function(t,e){var i=this.getLayer(t);if(i)return i.getLayoutProperty(e);this.fire(new Nt(new Error("The layer '"+t+"' does not exist in the map's style.")))},e.prototype.setPaintProperty=function(t,e,i,r){void 0===r&&(r={}),this._checkLoaded();var n=this.getLayer(t);n?s(n.getPaintProperty(e),i)||(n.setPaintProperty(e,i,r)&&this._updateLayer(n),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new Nt(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},e.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},e.prototype.setFeatureState=function(t,e){this._checkLoaded();var i=t.source,r=t.sourceLayer,n=this.sourceCaches[i];if(void 0!==n){var o=n.getSource().type;"geojson"===o&&r?this.fire(new Nt(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==o||r?(void 0===t.id&&this.fire(new Nt(new Error("The feature id parameter must be provided."))),n.setFeatureState(r,t.id,e)):this.fire(new Nt(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new Nt(new Error("The source '"+i+"' does not exist in the map's style.")))},e.prototype.removeFeatureState=function(t,e){this._checkLoaded();var i=t.source,r=this.sourceCaches[i];if(void 0!==r){var n=r.getSource().type,o="vector"===n?t.sourceLayer:void 0;"vector"!==n||o?e&&"string"!=typeof t.id&&"number"!=typeof t.id?this.fire(new Nt(new Error("A feature id is required to remove its specific state property."))):r.removeFeatureState(o,t.id,e):this.fire(new Nt(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new Nt(new Error("The source '"+i+"' does not exist in the map's style.")))},e.prototype.getFeatureState=function(t){this._checkLoaded();var e=t.source,i=t.sourceLayer,r=this.sourceCaches[e];if(void 0!==r){if("vector"!==r.getSource().type||i)return void 0===t.id&&this.fire(new Nt(new Error("The feature id parameter must be provided."))),r.getFeatureState(i,t.id);this.fire(new Nt(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new Nt(new Error("The source '"+e+"' does not exist in the map's style.")))},e.prototype.getTransition=function(){return m({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},e.prototype.serialize=function(){return S({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:I(this.sourceCaches,(function(t){return t.serialize()})),layers:this._serializeLayers(this._order)},(function(t){return void 0!==t}))},e.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},e.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,i=function(t){return"fill-extrusion"===e._layers[t].type},r={},n=[],o=this._order.length-1;o>=0;o--){var a=this._order[o];if(i(a)){r[a]=o;for(var s=0,u=t;s<u.length;s+=1){var l=u[s][a];if(l)for(var c=0,p=l;c<p.length;c+=1)n.push(p[c])}}}n.sort((function(t,e){return e.intersectionZ-t.intersectionZ}));for(var h=[],f=this._order.length-1;f>=0;f--){var d=this._order[f];if(i(d))for(var m=n.length-1;m>=0;m--){var y=n[m].feature;if(r[y.layer.id]<f)break;h.push(y),n.pop()}else for(var _=0,g=t;_<g.length;_+=1){var v=g[_][d];if(v)for(var x=0,b=v;x<b.length;x+=1)h.push(b[x].feature)}}return h},e.prototype.queryRenderedFeatures=function(t,e,i){e&&e.filter&&this._validate(Nr.filter,"queryRenderedFeatures.filter",e.filter,null,e);var r={};if(e&&e.layers){if(!Array.isArray(e.layers))return this.fire(new Nt(new Error("parameters.layers must be an Array."))),[];for(var n=0,o=e.layers;n<o.length;n+=1){var a=o[n],s=this._layers[a];if(!s)return this.fire(new Nt(new Error("The layer '"+a+"' does not exist in the map's style and cannot be queried for features."))),[];r[s.source]=!0}}var u=[];for(var l in e.availableImages=this._availableImages,this.sourceCaches)e.layers&&!r[l]||u.push(Ic(this.sourceCaches[l],this._layers,this._serializedLayers,t,e,i));return this.placement&&u.push(function(t,e,i,r,n,o,a){for(var s={},u=o.queryRenderedSymbols(r),l=[],c=0,p=Object.keys(u).map(Number);c<p.length;c+=1)l.push(a[p[c]]);l.sort(Sc);for(var h=function(){var i=d[f],r=i.featureIndex.lookupSymbolFeatures(u[i.bucketInstanceId],e,i.bucketIndex,i.sourceLayerIndex,n.filter,n.layers,n.availableImages,t);for(var o in r){var a=s[o]=s[o]||[],l=r[o];l.sort((function(t,e){var r=i.featureSortOrder;if(r){var n=r.indexOf(t.featureIndex);return r.indexOf(e.featureIndex)-n}return e.featureIndex-t.featureIndex}));for(var c=0,p=l;c<p.length;c+=1)a.push(p[c])}},f=0,d=l;f<d.length;f+=1)h();var m=function(e){s[e].forEach((function(r){var n=r.feature,o=i[t[e].source].getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=o}))};for(var y in s)m(y);return s}(this._layers,this._serializedLayers,this.sourceCaches,t,e,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(u)},e.prototype.querySourceFeatures=function(t,e){e&&e.filter&&this._validate(Nr.filter,"querySourceFeatures.filter",e.filter,null,e);var i=this.sourceCaches[t];return i?function(t,e){for(var i=t.getRenderableIds().map((function(e){return t.getTileByID(e)})),r=[],n={},o=0;o<i.length;o++){var a=i[o],s=a.tileID.canonical.key;n[s]||(n[s]=!0,a.querySourceFeatures(r,e))}return r}(i,e):[]},e.prototype.addSourceType=function(t,i,r){return e.getSourceType(t)?r(new Error('A source type called "'+t+'" already exists.')):(e.setSourceType(t,i),i.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:i.workerSourceURL},r):r(null,null))},e.prototype.getLight=function(){return this.light.getLight()},e.prototype.setLight=function(t,e){void 0===e&&(e={}),this._checkLoaded();var i=this.light.getLight(),r=!1;for(var n in t)if(!s(t[n],i[n])){r=!0;break}if(r){var o={now:U.now(),transition:m({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,e),this.light.updateTransitions(o)}},e.prototype._validate=function(t,e,i,r,n){return void 0===n&&(n={}),(!n||!1!==n.validate)&&Lh(this,t.call(Nr,m({key:e,style:this.serialize(),value:i,styleSpec:Zt},r)))},e.prototype._remove=function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),Tn.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[t].setEventedParent(null);for(var e in this.sourceCaches)this.sourceCaches[e].clearTiles(),this.sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},e.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},e.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},e.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},e.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},e.prototype._updatePlacement=function(t,e,i,r,n){void 0===n&&(n=!1);for(var o=!1,a=!1,s={},u=0,l=this._order;u<l.length;u+=1){var c=this._layers[l[u]];if("symbol"===c.type){if(!s[c.source]){var p=this.sourceCaches[c.source];s[c.source]=p.getRenderableIds(!0).map((function(t){return p.getTileByID(t)})).sort((function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)}))}var h=this.crossTileSymbolIndex.addLayer(c,s[c.source],t.center.lng);o=o||h}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((n=n||this._layerOrderChanged||0===i)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(U.now(),t.zoom))&&(this.pauseablePlacement=new kh(t,this._order,n,e,i,r,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(U.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(var f=0,d=this._order;f<d.length;f+=1){var m=this._layers[d[f]];"symbol"===m.type&&this.placement.updateLayerOpacities(m,s[m.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(U.now())},e.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},e.prototype.getImages=function(t,e,i){this.imageManager.getImages(e.icons,i),this._updateTilesForChangedImages();var r=this.sourceCaches[e.source];r&&r.setDependencies(e.tileID.key,e.type,e.icons)},e.prototype.getGlyphs=function(t,e,i){this.glyphManager.getGlyphs(e.stacks,i)},e.prototype.getResource=function(t,e,i){return Mt(e,i)},e}(qt);Oh.getSourceType=function(t){return bc[t]},Oh.setSourceType=function(t,e){bc[t]=e},Oh.registerForPluginStateChange=function(t){return t({pluginStatus:bn,pluginURL:wn}),Tn.on("pluginStateChange",t),t};var Vh=Hn([{name:"a_pos",type:"Int16",components:2}]),Uh=ff("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),jh=ff("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Nh=ff("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),qh=ff("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Zh=ff("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Gh=ff("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Xh=ff("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Wh=ff("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Hh=ff("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Kh=ff("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Yh=ff("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Jh=ff("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Qh=ff("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),$h=ff("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),tf=ff("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),ef=ff("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),rf=ff("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),nf=ff("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),of=ff("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),af=ff("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),sf=ff("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),uf=ff("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),lf=ff("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),cf=ff("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),pf=ff("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),hf=ff("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function ff(t,e){var i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=e.match(/attribute ([\w]+) ([\w]+)/g),n=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(n):n,s={};return{fragmentSource:t=t.replace(i,(function(t,e,i,r,n){return s[n]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+n+"\nvarying "+i+" "+r+" "+n+";\n#else\nuniform "+i+" "+r+" u_"+n+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+n+"\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n"})),vertexSource:e=e.replace(i,(function(t,e,i,r,n){var o="float"===r?"vec2":"vec4",a=n.match(/color/)?"color":o;return s[n]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+n+"\nuniform lowp float u_"+n+"_t;\nattribute "+i+" "+o+" a_"+n+";\nvarying "+i+" "+r+" "+n+";\n#else\nuniform "+i+" "+r+" u_"+n+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+n+" = a_"+n+";\n#else\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+n+" = unpack_mix_"+a+"(a_"+n+", u_"+n+"_t);\n#else\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+n+"\nuniform lowp float u_"+n+"_t;\nattribute "+i+" "+o+" a_"+n+";\n#else\nuniform "+i+" "+r+" u_"+n+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+i+" "+r+" "+n+" = a_"+n+";\n#else\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+i+" "+r+" "+n+" = unpack_mix_"+a+"(a_"+n+", u_"+n+"_t);\n#else\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n"})),staticAttributes:r,staticUniforms:a}}var df=Object.freeze({__proto__:null,prelude:Uh,background:jh,backgroundPattern:Nh,circle:qh,clippingMask:Zh,heatmap:Gh,heatmapTexture:Xh,collisionBox:Wh,collisionCircle:Hh,debug:Kh,fill:Yh,fillOutline:Jh,fillOutlinePattern:Qh,fillPattern:$h,fillExtrusion:tf,fillExtrusionPattern:ef,hillshadePrepare:rf,hillshade:nf,line:of,lineGradient:af,linePattern:sf,lineSDF:uf,raster:lf,symbolIcon:cf,symbolSDF:pf,symbolTextAndIcon:hf}),mf=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function yf(t){for(var e=[],i=0;i<t.length;i++)if(null!==t[i]){var r=t[i].split(" ");e.push(r.pop())}return e}mf.prototype.bind=function(t,e,i,r,n,o,a,s){this.context=t;for(var u=this.boundPaintVertexBuffers.length!==r.length,l=0;!u&&l<r.length;l++)this.boundPaintVertexBuffers[l]!==r[l]&&(u=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===i&&!u&&this.boundIndexBuffer===n&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),n&&n.dynamicDraw&&n.bind(),s&&s.bind()):this.freshBind(e,i,r,n,o,a,s)},mf.prototype.freshBind=function(t,e,i,r,n,o,a){var s,u=t.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=r,this.boundVertexOffset=n,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=l.currentNumAttributes||0;for(var p=u;p<s;p++)c.disableVertexAttribArray(p)}e.enableAttributes(c,t);for(var h=0,f=i;h<f.length;h+=1)f[h].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,n);for(var d=0,m=i;d<m.length;d+=1){var y=m[d];y.bind(),y.setVertexAttribPointers(c,t,n)}o&&(o.bind(),o.setVertexAttribPointers(c,t,n)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,n)),l.currentNumAttributes=u},mf.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var _f=function(t,e,i,r,n,o){var a=t.gl;this.program=a.createProgram();for(var s=yf(i.staticAttributes),u=r?r.getBinderAttributes():[],l=s.concat(u),c=i.staticUniforms?yf(i.staticUniforms):[],p=r?r.getBinderUniforms():[],h=[],f=0,d=c.concat(p);f<d.length;f+=1){var m=d[f];h.indexOf(m)<0&&h.push(m)}var y=r?r.defines():[];o&&y.push("#define OVERDRAW_INSPECTOR;");var _=y.concat(Uh.fragmentSource,i.fragmentSource).join("\n"),g=y.concat(Uh.vertexSource,i.vertexSource).join("\n"),v=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(v,_),a.compileShader(v),a.attachShader(this.program,v);var x=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(x,g),a.compileShader(x),a.attachShader(this.program,x),this.attributes={};var b={};this.numAttributes=l.length;for(var w=0;w<this.numAttributes;w++)l[w]&&(a.bindAttribLocation(this.program,w,l[w]),this.attributes[l[w]]=w);a.linkProgram(this.program),a.deleteShader(x),a.deleteShader(v);for(var I=0;I<h.length;I++){var S=h[I];if(S&&!b[S]){var T=a.getUniformLocation(this.program,S);T&&(b[S]=T)}}this.fixedUniforms=n(t,b),this.binderUniforms=r?r.getUniforms(t,b):[]}}};function gf(t,e,i){var r=1/uh(i,1,e.transform.tileZoom),n=Math.pow(2,i.tileID.overscaledZ),o=i.tileSize*Math.pow(2,e.transform.tileZoom)/n,a=o*(i.tileID.canonical.x+i.tileID.wrap*n),s=o*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[r,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}_f.prototype.draw=function(t,e,i,r,n,o,a,s,u,l,c,p,h,f,d,m){var y,_=t.gl;if(!this.failedToCreate){for(var g in t.program.set(this.program),t.setDepthMode(i),t.setStencilMode(r),t.setColorMode(n),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[g].set(a[g]);f&&f.setUniforms(t,this.binderUniforms,p,{zoom:h});for(var v=(y={},y[_.LINES]=2,y[_.TRIANGLES]=3,y[_.LINE_STRIP]=1,y)[e],x=0,b=c.get();x<b.length;x+=1){var w=b[x],I=w.vaos||(w.vaos={});(I[s]||(I[s]=new mf)).bind(t,this,u,f?f.getPaintVertexBuffers():[],l,w.vertexOffset,d,m),_.drawElements(e,w.primitiveLength*v,_.UNSIGNED_SHORT,w.primitiveOffset*v*2)}}};var vf=function(t,e,i,r){var n=e.style.light,o=n.properties.get("position"),a=[o.x,o.y,o.z],s=function(){var t=new Ea(9);return Ea!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}();"viewport"===n.properties.get("anchor")&&function(t,e){var i=Math.sin(e),r=Math.cos(e);t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1}(s,-e.transform.angle),function(t,e,i){var r=e[0],n=e[1],o=e[2];t[0]=r*i[0]+n*i[3]+o*i[6],t[1]=r*i[1]+n*i[4]+o*i[7],t[2]=r*i[2]+n*i[5]+o*i[8]}(a,a,s);var u=n.properties.get("color");return{u_matrix:t,u_lightpos:a,u_lightintensity:n.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+i,u_opacity:r}},xf=function(t,e,i,r,n,o,a){return m(vf(t,e,i,r),gf(o,e,a),{u_height_factor:-Math.pow(2,n.overscaledZ)/a.tileSize/8})},bf=function(t){return{u_matrix:t}},wf=function(t,e,i,r){return m(bf(t),gf(i,e,r))},If=function(t,e){return{u_matrix:t,u_world:e}},Sf=function(t,e,i,r,n){return m(wf(t,e,i,r),{u_world:n})},Tf=function(t,e,i,r){var n,o,a=t.transform;if("map"===r.paint.get("circle-pitch-alignment")){var s=uh(i,1,a.zoom);n=!0,o=[s,s]}else n=!1,o=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,i,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+n,u_device_pixel_ratio:U.devicePixelRatio,u_extrude_scale:o}},Af=function(t,e,i){var r=uh(i,1,e.zoom),n=Math.pow(2,e.zoom-i.tileID.overscaledZ),o=i.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[e.pixelsToGLUnits[0]/(r*n),e.pixelsToGLUnits[1]/(r*n)],u_overscale_factor:o}},zf=function(t,e,i){return{u_matrix:t,u_inv_matrix:e,u_camera_to_center_distance:i.cameraToCenterDistance,u_viewport_size:[i.width,i.height]}},Ef=function(t,e,i){return void 0===i&&(i=1),{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:i}},kf=function(t){return{u_matrix:t}},Cf=function(t,e,i,r){return{u_matrix:t,u_extrude_scale:uh(e,1,i),u_intensity:r}},Pf=function(t,e,i){var r=t.transform;return{u_matrix:Rf(t,e,i),u_ratio:1/uh(e,1,r.zoom),u_device_pixel_ratio:U.devicePixelRatio,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},Df=function(t,e,i,r){return m(Pf(t,e,i),{u_image:0,u_image_height:r})},Mf=function(t,e,i,r){var n=t.transform,o=Bf(e,n);return{u_matrix:Rf(t,e,i),u_texsize:e.imageAtlasTexture.size,u_ratio:1/uh(e,1,n.zoom),u_device_pixel_ratio:U.devicePixelRatio,u_image:0,u_scale:[o,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/n.pixelsToGLUnits[0],1/n.pixelsToGLUnits[1]]}},Lf=function(t,e,i,r,n){var o=t.lineAtlas,a=Bf(e,t.transform),s="round"===i.layout.get("line-cap"),u=o.getDash(r.from,s),l=o.getDash(r.to,s),c=u.width*n.fromScale,p=l.width*n.toScale;return m(Pf(t,e,i),{u_patternscale_a:[a/c,-u.height/2],u_patternscale_b:[a/p,-l.height/2],u_sdfgamma:o.width/(256*Math.min(c,p)*U.devicePixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:l.y,u_mix:n.t})};function Bf(t,e){return 1/uh(t,1,e.tileZoom)}function Rf(t,e,i){return t.translatePosMatrix(e.tileID.posMatrix,e,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}var Ff=function(t,e,i,r,n){return{u_matrix:t,u_tl_parent:e,u_scale_parent:i,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*n.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:n.paint.get("raster-brightness-min"),u_brightness_high:n.paint.get("raster-brightness-max"),u_saturation_factor:(a=n.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=n.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Of(n.paint.get("raster-hue-rotate"))};var o,a};function Of(t){t*=Math.PI/180;var e=Math.sin(t),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}var Vf,Uf=function(t,e,i,r,n,o,a,s,u,l){var c=n.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:c.width/c.height,u_fade_change:n.options.fadeDuration?n.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+u,u_pitch_with_map:+r,u_texsize:l,u_texture:0}},jf=function(t,e,i,r,n,o,a,s,u,l,c){var p=n.transform;return m(Uf(t,e,i,r,n,o,a,s,u,l),{u_gamma_scale:r?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_device_pixel_ratio:U.devicePixelRatio,u_is_halo:+c})},Nf=function(t,e,i,r,n,o,a,s,u,l){return m(jf(t,e,i,r,n,o,a,s,!0,u,!0),{u_texsize_icon:l,u_texture_icon:1})},qf=function(t,e,i){return{u_matrix:t,u_opacity:e,u_color:i}},Zf=function(t,e,i,r,n,o){return m(function(t,e,i,r){var n=i.imageManager.getPattern(t.from.toString()),o=i.imageManager.getPattern(t.to.toString()),a=i.imageManager.getPixelSize(),s=a.width,u=a.height,l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,i.transform.tileZoom)/l,p=c*(r.tileID.canonical.x+r.tileID.wrap*l),h=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:n.tl,u_pattern_br_a:n.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,u],u_mix:e.t,u_pattern_size_a:n.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/uh(r,1,i.transform.tileZoom),u_pixel_coord_upper:[p>>16,h>>16],u_pixel_coord_lower:[65535&p,65535&h]}}(r,o,i,n),{u_matrix:t,u_opacity:e})},Gf={fillExtrusion:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_lightpos:new Go(t,e.u_lightpos),u_lightintensity:new qo(t,e.u_lightintensity),u_lightcolor:new Go(t,e.u_lightcolor),u_vertical_gradient:new qo(t,e.u_vertical_gradient),u_opacity:new qo(t,e.u_opacity)}},fillExtrusionPattern:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_lightpos:new Go(t,e.u_lightpos),u_lightintensity:new qo(t,e.u_lightintensity),u_lightcolor:new Go(t,e.u_lightcolor),u_vertical_gradient:new qo(t,e.u_vertical_gradient),u_height_factor:new qo(t,e.u_height_factor),u_image:new No(t,e.u_image),u_texsize:new Zo(t,e.u_texsize),u_pixel_coord_upper:new Zo(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new Zo(t,e.u_pixel_coord_lower),u_scale:new Go(t,e.u_scale),u_fade:new qo(t,e.u_fade),u_opacity:new qo(t,e.u_opacity)}},fill:function(t,e){return{u_matrix:new Ko(t,e.u_matrix)}},fillPattern:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_image:new No(t,e.u_image),u_texsize:new Zo(t,e.u_texsize),u_pixel_coord_upper:new Zo(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new Zo(t,e.u_pixel_coord_lower),u_scale:new Go(t,e.u_scale),u_fade:new qo(t,e.u_fade)}},fillOutline:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_world:new Zo(t,e.u_world)}},fillOutlinePattern:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_world:new Zo(t,e.u_world),u_image:new No(t,e.u_image),u_texsize:new Zo(t,e.u_texsize),u_pixel_coord_upper:new Zo(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new Zo(t,e.u_pixel_coord_lower),u_scale:new Go(t,e.u_scale),u_fade:new qo(t,e.u_fade)}},circle:function(t,e){return{u_camera_to_center_distance:new qo(t,e.u_camera_to_center_distance),u_scale_with_map:new No(t,e.u_scale_with_map),u_pitch_with_map:new No(t,e.u_pitch_with_map),u_extrude_scale:new Zo(t,e.u_extrude_scale),u_device_pixel_ratio:new qo(t,e.u_device_pixel_ratio),u_matrix:new Ko(t,e.u_matrix)}},collisionBox:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_camera_to_center_distance:new qo(t,e.u_camera_to_center_distance),u_pixels_to_tile_units:new qo(t,e.u_pixels_to_tile_units),u_extrude_scale:new Zo(t,e.u_extrude_scale),u_overscale_factor:new qo(t,e.u_overscale_factor)}},collisionCircle:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_inv_matrix:new Ko(t,e.u_inv_matrix),u_camera_to_center_distance:new qo(t,e.u_camera_to_center_distance),u_viewport_size:new Zo(t,e.u_viewport_size)}},debug:function(t,e){return{u_color:new Wo(t,e.u_color),u_matrix:new Ko(t,e.u_matrix),u_overlay:new No(t,e.u_overlay),u_overlay_scale:new qo(t,e.u_overlay_scale)}},clippingMask:function(t,e){return{u_matrix:new Ko(t,e.u_matrix)}},heatmap:function(t,e){return{u_extrude_scale:new qo(t,e.u_extrude_scale),u_intensity:new qo(t,e.u_intensity),u_matrix:new Ko(t,e.u_matrix)}},heatmapTexture:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_world:new Zo(t,e.u_world),u_image:new No(t,e.u_image),u_color_ramp:new No(t,e.u_color_ramp),u_opacity:new qo(t,e.u_opacity)}},hillshade:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_image:new No(t,e.u_image),u_latrange:new Zo(t,e.u_latrange),u_light:new Zo(t,e.u_light),u_shadow:new Wo(t,e.u_shadow),u_highlight:new Wo(t,e.u_highlight),u_accent:new Wo(t,e.u_accent)}},hillshadePrepare:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_image:new No(t,e.u_image),u_dimension:new Zo(t,e.u_dimension),u_zoom:new qo(t,e.u_zoom),u_unpack:new Xo(t,e.u_unpack)}},line:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_ratio:new qo(t,e.u_ratio),u_device_pixel_ratio:new qo(t,e.u_device_pixel_ratio),u_units_to_pixels:new Zo(t,e.u_units_to_pixels)}},lineGradient:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_ratio:new qo(t,e.u_ratio),u_device_pixel_ratio:new qo(t,e.u_device_pixel_ratio),u_units_to_pixels:new Zo(t,e.u_units_to_pixels),u_image:new No(t,e.u_image),u_image_height:new qo(t,e.u_image_height)}},linePattern:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_texsize:new Zo(t,e.u_texsize),u_ratio:new qo(t,e.u_ratio),u_device_pixel_ratio:new qo(t,e.u_device_pixel_ratio),u_image:new No(t,e.u_image),u_units_to_pixels:new Zo(t,e.u_units_to_pixels),u_scale:new Go(t,e.u_scale),u_fade:new qo(t,e.u_fade)}},lineSDF:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_ratio:new qo(t,e.u_ratio),u_device_pixel_ratio:new qo(t,e.u_device_pixel_ratio),u_units_to_pixels:new Zo(t,e.u_units_to_pixels),u_patternscale_a:new Zo(t,e.u_patternscale_a),u_patternscale_b:new Zo(t,e.u_patternscale_b),u_sdfgamma:new qo(t,e.u_sdfgamma),u_image:new No(t,e.u_image),u_tex_y_a:new qo(t,e.u_tex_y_a),u_tex_y_b:new qo(t,e.u_tex_y_b),u_mix:new qo(t,e.u_mix)}},raster:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_tl_parent:new Zo(t,e.u_tl_parent),u_scale_parent:new qo(t,e.u_scale_parent),u_buffer_scale:new qo(t,e.u_buffer_scale),u_fade_t:new qo(t,e.u_fade_t),u_opacity:new qo(t,e.u_opacity),u_image0:new No(t,e.u_image0),u_image1:new No(t,e.u_image1),u_brightness_low:new qo(t,e.u_brightness_low),u_brightness_high:new qo(t,e.u_brightness_high),u_saturation_factor:new qo(t,e.u_saturation_factor),u_contrast_factor:new qo(t,e.u_contrast_factor),u_spin_weights:new Go(t,e.u_spin_weights)}},symbolIcon:function(t,e){return{u_is_size_zoom_constant:new No(t,e.u_is_size_zoom_constant),u_is_size_feature_constant:new No(t,e.u_is_size_feature_constant),u_size_t:new qo(t,e.u_size_t),u_size:new qo(t,e.u_size),u_camera_to_center_distance:new qo(t,e.u_camera_to_center_distance),u_pitch:new qo(t,e.u_pitch),u_rotate_symbol:new No(t,e.u_rotate_symbol),u_aspect_ratio:new qo(t,e.u_aspect_ratio),u_fade_change:new qo(t,e.u_fade_change),u_matrix:new Ko(t,e.u_matrix),u_label_plane_matrix:new Ko(t,e.u_label_plane_matrix),u_coord_matrix:new Ko(t,e.u_coord_matrix),u_is_text:new No(t,e.u_is_text),u_pitch_with_map:new No(t,e.u_pitch_with_map),u_texsize:new Zo(t,e.u_texsize),u_texture:new No(t,e.u_texture)}},symbolSDF:function(t,e){return{u_is_size_zoom_constant:new No(t,e.u_is_size_zoom_constant),u_is_size_feature_constant:new No(t,e.u_is_size_feature_constant),u_size_t:new qo(t,e.u_size_t),u_size:new qo(t,e.u_size),u_camera_to_center_distance:new qo(t,e.u_camera_to_center_distance),u_pitch:new qo(t,e.u_pitch),u_rotate_symbol:new No(t,e.u_rotate_symbol),u_aspect_ratio:new qo(t,e.u_aspect_ratio),u_fade_change:new qo(t,e.u_fade_change),u_matrix:new Ko(t,e.u_matrix),u_label_plane_matrix:new Ko(t,e.u_label_plane_matrix),u_coord_matrix:new Ko(t,e.u_coord_matrix),u_is_text:new No(t,e.u_is_text),u_pitch_with_map:new No(t,e.u_pitch_with_map),u_texsize:new Zo(t,e.u_texsize),u_texture:new No(t,e.u_texture),u_gamma_scale:new qo(t,e.u_gamma_scale),u_device_pixel_ratio:new qo(t,e.u_device_pixel_ratio),u_is_halo:new No(t,e.u_is_halo)}},symbolTextAndIcon:function(t,e){return{u_is_size_zoom_constant:new No(t,e.u_is_size_zoom_constant),u_is_size_feature_constant:new No(t,e.u_is_size_feature_constant),u_size_t:new qo(t,e.u_size_t),u_size:new qo(t,e.u_size),u_camera_to_center_distance:new qo(t,e.u_camera_to_center_distance),u_pitch:new qo(t,e.u_pitch),u_rotate_symbol:new No(t,e.u_rotate_symbol),u_aspect_ratio:new qo(t,e.u_aspect_ratio),u_fade_change:new qo(t,e.u_fade_change),u_matrix:new Ko(t,e.u_matrix),u_label_plane_matrix:new Ko(t,e.u_label_plane_matrix),u_coord_matrix:new Ko(t,e.u_coord_matrix),u_is_text:new No(t,e.u_is_text),u_pitch_with_map:new No(t,e.u_pitch_with_map),u_texsize:new Zo(t,e.u_texsize),u_texsize_icon:new Zo(t,e.u_texsize_icon),u_texture:new No(t,e.u_texture),u_texture_icon:new No(t,e.u_texture_icon),u_gamma_scale:new qo(t,e.u_gamma_scale),u_device_pixel_ratio:new qo(t,e.u_device_pixel_ratio),u_is_halo:new No(t,e.u_is_halo)}},background:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_opacity:new qo(t,e.u_opacity),u_color:new Wo(t,e.u_color)}},backgroundPattern:function(t,e){return{u_matrix:new Ko(t,e.u_matrix),u_opacity:new qo(t,e.u_opacity),u_image:new No(t,e.u_image),u_pattern_tl_a:new Zo(t,e.u_pattern_tl_a),u_pattern_br_a:new Zo(t,e.u_pattern_br_a),u_pattern_tl_b:new Zo(t,e.u_pattern_tl_b),u_pattern_br_b:new Zo(t,e.u_pattern_br_b),u_texsize:new Zo(t,e.u_texsize),u_mix:new qo(t,e.u_mix),u_pattern_size_a:new Zo(t,e.u_pattern_size_a),u_pattern_size_b:new Zo(t,e.u_pattern_size_b),u_scale_a:new qo(t,e.u_scale_a),u_scale_b:new qo(t,e.u_scale_b),u_pixel_coord_upper:new Zo(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new Zo(t,e.u_pixel_coord_lower),u_tile_units_to_pixels:new qo(t,e.u_tile_units_to_pixels)}}};function Xf(t,e,i,r,n,o,a){for(var s=t.context,u=s.gl,l=t.useProgram("collisionBox"),c=[],p=0,h=0,f=0;f<r.length;f++){var d=r[f],m=e.getTile(d),y=m.getBucket(i);if(y){var _=d.posMatrix;0===n[0]&&0===n[1]||(_=t.translatePosMatrix(d.posMatrix,m,n,o));var g=a?y.textCollisionBox:y.iconCollisionBox,v=y.collisionCircleArray;if(v.length>0){var x=ka(),b=_;Fa(x,y.placementInvProjMatrix,t.transform.glCoordMatrix),Fa(x,x,y.placementViewportMatrix),c.push({circleArray:v,circleOffset:h,transform:b,invTransform:x}),h=p+=v.length/4}g&&l.draw(s,u.LINES,xp.disabled,bp.disabled,t.colorModeForRenderPass(),Ip.disabled,Af(_,t.transform,m),i.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,null,t.transform.zoom,null,null,g.collisionVertexBuffer)}}if(a&&c.length){var w=t.useProgram("collisionCircle"),I=new so;I.resize(4*p),I._trim();for(var S=0,T=0,A=c;T<A.length;T+=1)for(var z=A[T],E=0;E<z.circleArray.length/4;E++){var k=4*E,C=z.circleArray[k+0],P=z.circleArray[k+1],D=z.circleArray[k+2],M=z.circleArray[k+3];I.emplace(S++,C,P,D,M,0),I.emplace(S++,C,P,D,M,1),I.emplace(S++,C,P,D,M,2),I.emplace(S++,C,P,D,M,3)}(!Vf||Vf.length<2*p)&&(Vf=function(t){var e=2*t,i=new lo;i.resize(e),i._trim();for(var r=0;r<e;r++){var n=6*r;i.uint16[n+0]=4*r+0,i.uint16[n+1]=4*r+1,i.uint16[n+2]=4*r+2,i.uint16[n+3]=4*r+2,i.uint16[n+4]=4*r+3,i.uint16[n+5]=4*r+0}return i}(p));for(var L=s.createIndexBuffer(Vf,!0),B=s.createVertexBuffer(I,wu.members,!0),R=0,F=c;R<F.length;R+=1){var O=F[R],V=zf(O.transform,O.invTransform,t.transform);w.draw(s,u.TRIANGLES,xp.disabled,bp.disabled,t.colorModeForRenderPass(),Ip.disabled,V,i.id,B,L,Co.simpleSegment(0,2*O.circleOffset,O.circleArray.length,O.circleArray.length/2),null,t.transform.zoom,null,null,null)}B.destroy(),L.destroy()}}var Wf=Ca(new Float32Array(16));function Hf(t,e,i,r,o,a){var s=il(t),u=-(s.horizontalAlign-.5)*e,l=-(s.verticalAlign-.5)*i,c=ul(t,r);return new n((u/o+c[0])*a,(l/o+c[1])*a)}function Kf(t,e,i,r,o,a,s,u,l,c,p){var h=t.text.placedSymbolArray,f=t.text.dynamicLayoutVertexArray,d=t.icon.dynamicLayoutVertexArray,m={};f.clear();for(var y=0;y<h.length;y++){var _=h.get(y),g=_.hidden||!_.crossTileID||t.allowVerticalPlacement&&!_.placedOrientation?null:r[_.crossTileID];if(g){var v=new n(_.anchorX,_.anchorY),x=Kp(v,i?u:s),b=Yp(a.cameraToCenterDistance,x.signedDistanceFromCamera),w=o.evaluateSizeForFeature(t.textSizeData,c,_)*b/24;i&&(w*=t.tilePixelRatio/l);for(var I=Hf(g.anchor,g.width,g.height,g.textOffset,g.textBoxScale,w),S=i?Kp(v.add(I),s).point:x.point.add(e?I.rotate(-a.angle):I),T=t.allowVerticalPlacement&&_.placedOrientation===Qu.vertical?Math.PI/2:0,A=0;A<_.numGlyphs;A++)hl(f,S,T);p&&_.associatedIconIndex>=0&&(m[_.associatedIconIndex]={shiftedAnchor:S,angle:T})}else oh(_.numGlyphs,f)}if(p){d.clear();for(var z=t.icon.placedSymbolArray,E=0;E<z.length;E++){var k=z.get(E);if(k.hidden)oh(k.numGlyphs,d);else{var C=m[E];if(C)for(var P=0;P<k.numGlyphs;P++)hl(d,C.shiftedAnchor,C.angle);else oh(k.numGlyphs,d)}}t.icon.dynamicLayoutVertexBuffer.updateData(d)}t.text.dynamicLayoutVertexBuffer.updateData(f)}function Yf(t,e,i){return i.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function Jf(t,e,i,r,n,o,a,s,u,l,c,p){for(var h=t.context,f=h.gl,d=t.transform,m="map"===s,y="map"===u,_=m&&"point"!==i.layout.get("symbol-placement"),g=m&&!y&&!_,v=void 0!==i.layout.get("symbol-sort-key").constantOr(1),x=!1,b=t.depthModeForSublayer(0,xp.ReadOnly),w=i.layout.get("text-variable-anchor"),I=[],S=0,T=r;S<T.length;S+=1){var A=T[S],z=e.getTile(A),E=z.getBucket(i);if(E){var k=n?E.text:E.icon;if(k&&k.segments.get().length){var C=k.programConfigurations.get(i.id),P=n||E.sdfIcons,D=n?E.textSizeData:E.iconSizeData,M=y||0!==d.pitch,L=t.useProgram(Yf(P,n,E),C),B=ol(D,d.zoom),R=void 0,F=[0,0],O=void 0,V=void 0,U=null,j=void 0;if(n)O=z.glyphAtlasTexture,V=f.LINEAR,R=z.glyphAtlasTexture.size,E.iconsInText&&(F=z.imageAtlasTexture.size,U=z.imageAtlasTexture,j=M||t.options.rotating||t.options.zooming||"composite"===D.kind||"camera"===D.kind?f.LINEAR:f.NEAREST);else{var N=1!==i.layout.get("icon-size").constantOr(0)||E.iconsNeedLinear;O=z.imageAtlasTexture,V=P||t.options.rotating||t.options.zooming||N||M?f.LINEAR:f.NEAREST,R=z.imageAtlasTexture.size}var q=uh(z,1,t.transform.zoom),Z=Wp(A.posMatrix,y,m,t.transform,q),G=Hp(A.posMatrix,y,m,t.transform,q),X=w&&E.hasTextData(),W="none"!==i.layout.get("icon-text-fit")&&X&&E.hasIconData();_&&Qp(E,A.posMatrix,t,n,Z,G,y,l);var H=t.translatePosMatrix(A.posMatrix,z,o,a),K=_||n&&w||W?Wf:Z,Y=t.translatePosMatrix(G,z,o,a,!0),J=P&&0!==i.paint.get(n?"text-halo-width":"icon-halo-width").constantOr(1),Q={program:L,buffers:k,uniformValues:P?E.iconsInText?Nf(D.kind,B,g,y,t,H,K,Y,R,F):jf(D.kind,B,g,y,t,H,K,Y,n,R,!0):Uf(D.kind,B,g,y,t,H,K,Y,n,R),atlasTexture:O,atlasTextureIcon:U,atlasInterpolation:V,atlasInterpolationIcon:j,isSDF:P,hasHalo:J};if(v&&E.canOverlap){x=!0;for(var $=0,tt=k.segments.get();$<tt.length;$+=1){var et=tt[$];I.push({segments:new Co([et]),sortKey:et.sortKey,state:Q})}}else I.push({segments:k.segments,sortKey:0,state:Q})}}}x&&I.sort((function(t,e){return t.sortKey-e.sortKey}));for(var it=0,rt=I;it<rt.length;it+=1){var nt=rt[it],ot=nt.state;if(h.activeTexture.set(f.TEXTURE0),ot.atlasTexture.bind(ot.atlasInterpolation,f.CLAMP_TO_EDGE),ot.atlasTextureIcon&&(h.activeTexture.set(f.TEXTURE1),ot.atlasTextureIcon&&ot.atlasTextureIcon.bind(ot.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),ot.isSDF){var at=ot.uniformValues;ot.hasHalo&&(at.u_is_halo=1,Qf(ot.buffers,nt.segments,i,t,ot.program,b,c,p,at)),at.u_is_halo=0}Qf(ot.buffers,nt.segments,i,t,ot.program,b,c,p,ot.uniformValues)}}function Qf(t,e,i,r,n,o,a,s,u){var l=r.context;n.draw(l,l.gl.TRIANGLES,o,a,s,Ip.disabled,u,i.id,t.layoutVertexBuffer,t.indexBuffer,e,i.paint,r.transform.zoom,t.programConfigurations.get(i.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function $f(t,e,i,r,n,o,a){var s,u,l,c,p,h=t.context.gl,f=i.paint.get("fill-pattern"),d=f&&f.constantOr(1),m=i.getCrossfadeParameters();a?(u=d&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=h.LINES):(u=d?"fillPattern":"fill",s=h.TRIANGLES);for(var y=0,_=r;y<_.length;y+=1){var g=_[y],v=e.getTile(g);if(!d||v.patternsLoaded()){var x=v.getBucket(i);if(x){var b=x.programConfigurations.get(i.id),w=t.useProgram(u,b);d&&(t.context.activeTexture.set(h.TEXTURE0),v.imageAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),b.updatePaintBuffers(m));var I=f.constantOr(null);if(I&&v.imageAtlas){var S=v.imageAtlas,T=S.patternPositions[I.to.toString()],A=S.patternPositions[I.from.toString()];T&&A&&b.setConstantPatternPositions(T,A)}var z=t.translatePosMatrix(g.posMatrix,v,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(a){c=x.indexBuffer2,p=x.segments2;var E=[h.drawingBufferWidth,h.drawingBufferHeight];l="fillOutlinePattern"===u&&d?Sf(z,t,m,v,E):If(z,E)}else c=x.indexBuffer,p=x.segments,l=d?wf(z,t,m,v):bf(z);w.draw(t.context,s,n,t.stencilModeForClipping(g),o,Ip.disabled,l,i.id,x.layoutVertexBuffer,c,p,i.paint,t.transform.zoom,b)}}}}function td(t,e,i,r,n,o,a){for(var s=t.context,u=s.gl,l=i.paint.get("fill-extrusion-pattern"),c=l.constantOr(1),p=i.getCrossfadeParameters(),h=i.paint.get("fill-extrusion-opacity"),f=0,d=r;f<d.length;f+=1){var m=d[f],y=e.getTile(m),_=y.getBucket(i);if(_){var g=_.programConfigurations.get(i.id),v=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",g);c&&(t.context.activeTexture.set(u.TEXTURE0),y.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),g.updatePaintBuffers(p));var x=l.constantOr(null);if(x&&y.imageAtlas){var b=y.imageAtlas,w=b.patternPositions[x.to.toString()],I=b.patternPositions[x.from.toString()];w&&I&&g.setConstantPatternPositions(w,I)}var S=t.translatePosMatrix(m.posMatrix,y,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),T=i.paint.get("fill-extrusion-vertical-gradient"),A=c?xf(S,t,T,h,m,p,y):vf(S,t,T,h);v.draw(s,s.gl.TRIANGLES,n,o,a,Ip.backCCW,A,i.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,i.paint,t.transform.zoom,g)}}}function ed(t,e,i,r,n,o){var a=t.context,s=a.gl,u=e.fbo;if(u){var l=t.useProgram("hillshade");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,u.colorAttachment.get());var c=function(t,e,i){var r=i.paint.get("hillshade-shadow-color"),n=i.paint.get("hillshade-highlight-color"),o=i.paint.get("hillshade-accent-color"),a=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(a-=t.transform.angle);var s,u,l,c=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),c),u_image:0,u_latrange:(s=e.tileID,u=Math.pow(2,s.canonical.z),l=s.canonical.y,[new oc(0,l/u).toLngLat().lat,new oc(0,(l+1)/u).toLngLat().lat]),u_light:[i.paint.get("hillshade-exaggeration"),a],u_shadow:r,u_highlight:n,u_accent:o}}(t,e,i);l.draw(a,s.TRIANGLES,r,n,o,Ip.disabled,c,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function id(t,e,i,r,n,o){var a=t.context,s=a.gl,u=e.dem;if(u&&u.data){var l=u.dim,c=u.stride,p=u.getPixels();if(a.activeTexture.set(s.TEXTURE1),a.pixelStoreUnpackPremultiplyAlpha.set(!1),e.demTexture=e.demTexture||t.getTileTexture(c),e.demTexture){var h=e.demTexture;h.update(p,{premultiply:!1}),h.bind(s.NEAREST,s.CLAMP_TO_EDGE)}else e.demTexture=new Ml(a,p,s.RGBA,{premultiply:!1}),e.demTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE);a.activeTexture.set(s.TEXTURE0);var f=e.fbo;if(!f){var d=new Ml(a,{width:l,height:l,data:null},s.RGBA);d.bind(s.LINEAR,s.CLAMP_TO_EDGE),(f=e.fbo=a.createFramebuffer(l,l,!0)).colorAttachment.set(d.texture)}a.bindFramebuffer.set(f.framebuffer),a.viewport.set([0,0,l,l]),t.useProgram("hillshadePrepare").draw(a,s.TRIANGLES,r,n,o,Ip.disabled,function(t,e){var i=e.stride,r=ka();return Ra(r,0,8192,-8192,0,0,1),Ma(r,r,[0,-8192,0]),{u_matrix:r,u_image:1,u_dimension:[i,i],u_zoom:t.overscaledZ,u_unpack:e.getUnpackVector()}}(e.tileID,u),i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),e.needsHillshadePrepare=!1}}function rd(t,e,i,r,n){var o=r.paint.get("raster-fade-duration");if(o>0){var a=U.now(),s=(a-t.timeAdded)/o,u=e?(a-e.timeAdded)/o:-1,l=i.getSource(),c=n.coveringZoomLevel({tileSize:l.tileSize,roundZoom:l.roundZoom}),h=!e||Math.abs(e.tileID.overscaledZ-c)>Math.abs(t.tileID.overscaledZ-c),f=h&&t.refreshedUponExpiration?1:p(h?s:1-u,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),e?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}var nd=new me(1,0,0,1),od=new me(0,1,0,1),ad=new me(0,0,1,1),sd=new me(1,0,1,1),ud=new me(0,1,1,1);function ld(t,e,i,r){pd(t,0,e+i/2,t.transform.width,i,r)}function cd(t,e,i,r){pd(t,e-i/2,0,i,t.transform.height,r)}function pd(t,e,i,r,n,o){var a=t.context,s=a.gl;s.enable(s.SCISSOR_TEST),s.scissor(e*U.devicePixelRatio,i*U.devicePixelRatio,r*U.devicePixelRatio,n*U.devicePixelRatio),a.clear({color:o}),s.disable(s.SCISSOR_TEST)}function hd(t,e,i){var r=t.context,n=r.gl,o=i.posMatrix,a=t.useProgram("debug"),s=xp.disabled,u=bp.disabled,l=t.colorModeForRenderPass();r.activeTexture.set(n.TEXTURE0),t.emptyTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE),a.draw(r,n.LINE_STRIP,s,u,l,Ip.disabled,Ef(o,me.red),"$debug",t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments);var c=e.getTileByID(i.key).latestRawTileData,p=Math.floor((c&&c.byteLength||0)/1024),h=e.getTile(i).tileSize,f=512/Math.min(h,512)*(i.overscaledZ/t.transform.zoom)*.5,d=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(d+=" => "+i.overscaledZ),function(t,e){t.initDebugOverlayCanvas();var i=t.debugOverlayCanvas,r=t.context.gl,n=t.debugOverlayCanvas.getContext("2d");n.clearRect(0,0,i.width,i.height),n.shadowColor="white",n.shadowBlur=2,n.lineWidth=1.5,n.strokeStyle="white",n.textBaseline="top",n.font="bold 36px Open Sans, sans-serif",n.fillText(e,5,5),n.strokeText(e,5,5),t.debugOverlayTexture.update(i),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,d+" "+p+"kb"),a.draw(r,n.TRIANGLES,s,u,wp.alphaBlended,Ip.disabled,Ef(o,me.transparent,f),"$debug",t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments)}var fd={symbol:function(t,e,i,r,n){if("translucent"===t.renderPass){var o=bp.disabled,a=t.colorModeForRenderPass();i.layout.get("text-variable-anchor")&&function(t,e,i,r,n,o,a){for(var s=e.transform,u="map"===n,l="map"===o,c=0,p=t;c<p.length;c+=1){var h=p[c],f=r.getTile(h),d=f.getBucket(i);if(d&&d.text&&d.text.segments.get().length){var m=ol(d.textSizeData,s.zoom),y=uh(f,1,e.transform.zoom),_=Wp(h.posMatrix,l,u,e.transform,y),g="none"!==i.layout.get("icon-text-fit")&&d.hasIconData();if(m){var v=Math.pow(2,s.zoom-f.tileID.overscaledZ);Kf(d,u,l,a,al,s,_,h.posMatrix,v,m,g)}}}}(r,t,i,e,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),n),0!==i.paint.get("icon-opacity").constantOr(1)&&Jf(t,e,i,r,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),o,a),0!==i.paint.get("text-opacity").constantOr(1)&&Jf(t,e,i,r,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),o,a),e.map.showCollisionBoxes&&(Xf(t,e,i,r,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),!0),Xf(t,e,i,r,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),!1))}},circle:function(t,e,i,r){if("translucent"===t.renderPass){var n=i.paint.get("circle-opacity"),o=i.paint.get("circle-stroke-width"),a=i.paint.get("circle-stroke-opacity"),s=void 0!==i.layout.get("circle-sort-key").constantOr(1);if(0!==n.constantOr(1)||0!==o.constantOr(1)&&0!==a.constantOr(1)){for(var u=t.context,l=u.gl,c=t.depthModeForSublayer(0,xp.ReadOnly),p=bp.disabled,h=t.colorModeForRenderPass(),f=[],d=0;d<r.length;d++){var m=r[d],y=e.getTile(m),_=y.getBucket(i);if(_){var g=_.programConfigurations.get(i.id),v={programConfiguration:g,program:t.useProgram("circle",g),layoutVertexBuffer:_.layoutVertexBuffer,indexBuffer:_.indexBuffer,uniformValues:Tf(t,m,y,i)};if(s)for(var x=0,b=_.segments.get();x<b.length;x+=1){var w=b[x];f.push({segments:new Co([w]),sortKey:w.sortKey,state:v})}else f.push({segments:_.segments,sortKey:0,state:v})}}s&&f.sort((function(t,e){return t.sortKey-e.sortKey}));for(var I=0,S=f;I<S.length;I+=1){var T=S[I],A=T.state;A.program.draw(u,l.TRIANGLES,c,p,h,Ip.disabled,A.uniformValues,i.id,A.layoutVertexBuffer,A.indexBuffer,T.segments,i.paint,t.transform.zoom,A.programConfiguration)}}}},heatmap:function(t,e,i,r){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var n=t.context,o=n.gl,a=bp.disabled,s=new wp([o.ONE,o.ONE],me.transparent,[!0,!0,!0,!0]);!function(t,e,i){var r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var n=i.heatmapFbo;if(n)r.bindTexture(r.TEXTURE_2D,n.colorAttachment.get()),t.bindFramebuffer.set(n.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),n=i.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,i,r){var n=t.gl;n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e.width/4,e.height/4,0,n.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:n.UNSIGNED_BYTE,null),r.colorAttachment.set(i)}(t,e,o,n)}}(n,t,i),n.clear({color:me.transparent});for(var u=0;u<r.length;u++){var l=r[u];if(!e.hasRenderableParent(l)){var c=e.getTile(l),p=c.getBucket(i);if(p){var h=p.programConfigurations.get(i.id);t.useProgram("heatmap",h).draw(n,o.TRIANGLES,xp.disabled,a,s,Ip.disabled,Cf(l.posMatrix,c,t.transform.zoom,i.paint.get("heatmap-intensity")),i.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,i.paint,t.transform.zoom,h)}}}n.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,e){var i=t.context,r=i.gl,n=e.heatmapFbo;if(n){i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,n.colorAttachment.get()),i.activeTexture.set(r.TEXTURE1);var o=e.colorRampTexture;o||(o=e.colorRampTexture=new Ml(i,e.colorRamp,r.RGBA)),o.bind(r.LINEAR,r.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(i,r.TRIANGLES,xp.disabled,bp.disabled,t.colorModeForRenderPass(),Ip.disabled,function(t,e,i,r){var n=ka();Ra(n,0,t.width,t.height,0,0,1);var o=t.context.gl;return{u_matrix:n,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:e.paint.get("heatmap-opacity")}}(t,e),e.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,e.paint,t.transform.zoom)}}(t,i))},line:function(t,e,i,r){if("translucent"===t.renderPass){var n=i.paint.get("line-opacity"),o=i.paint.get("line-width");if(0!==n.constantOr(1)&&0!==o.constantOr(1))for(var a,s=t.depthModeForSublayer(0,xp.ReadOnly),u=t.colorModeForRenderPass(),l=i.paint.get("line-dasharray"),c=i.paint.get("line-pattern"),h=c.constantOr(1),f=i.paint.get("line-gradient"),d=i.getCrossfadeParameters(),m=h?"linePattern":l?"lineSDF":f?"lineGradient":"line",y=t.context,_=y.gl,g=!0,v=0,x=r;v<x.length;v+=1){var b=x[v],w=e.getTile(b);if(!h||w.patternsLoaded()){var I=w.getBucket(i);if(I){var S=I.programConfigurations.get(i.id),T=t.context.program.get(),A=t.useProgram(m,S),z=g||A.program!==T,E=c.constantOr(null);if(E&&w.imageAtlas){var k=w.imageAtlas,C=k.patternPositions[E.to.toString()],P=k.patternPositions[E.from.toString()];C&&P&&S.setConstantPatternPositions(C,P)}var D=h?Mf(t,w,i,d):l?Lf(t,w,i,l,d):f?Df(t,w,i,I.lineClipsArray.length):Pf(t,w,i);if(h)y.activeTexture.set(_.TEXTURE0),w.imageAtlasTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE),S.updatePaintBuffers(d);else if(l&&(z||t.lineAtlas.dirty))y.activeTexture.set(_.TEXTURE0),t.lineAtlas.bind(y);else if(f){var M=I.gradients[i.id],L=M.texture;if(i.gradientVersion!==M.version){var B=256;if(i.stepInterpolant){var R=e.getSource().maxzoom,F=b.canonical.z===R?Math.ceil(1<<t.transform.maxZoom-b.canonical.z):1;B=p((a=I.maxLineLength/8192*1024*F)<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2)),256,y.maxTextureSize)}M.gradient=Qa({expression:i.gradientExpression(),evaluationKey:"lineProgress",resolution:B,image:M.gradient||void 0,clips:I.lineClipsArray}),M.texture?M.texture.update(M.gradient):M.texture=new Ml(y,M.gradient,_.RGBA),M.version=i.gradientVersion,L=M.texture}y.activeTexture.set(_.TEXTURE0),L.bind(i.stepInterpolant?_.NEAREST:_.LINEAR,_.CLAMP_TO_EDGE)}A.draw(y,_.TRIANGLES,s,t.stencilModeForClipping(b),u,Ip.disabled,D,i.id,I.layoutVertexBuffer,I.indexBuffer,I.segments,i.paint,t.transform.zoom,S,I.layoutVertexBuffer2),g=!1}}}}},fill:function(t,e,i,r){var n=i.paint.get("fill-color"),o=i.paint.get("fill-opacity");if(0!==o.constantOr(1)){var a=t.colorModeForRenderPass(),s=i.paint.get("fill-pattern"),u=t.opaquePassEnabledForLayer()&&!s.constantOr(1)&&1===n.constantOr(me.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(t.renderPass===u){var l=t.depthModeForSublayer(1,"opaque"===t.renderPass?xp.ReadWrite:xp.ReadOnly);$f(t,e,i,r,l,a,!1)}if("translucent"===t.renderPass&&i.paint.get("fill-antialias")){var c=t.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,xp.ReadOnly);$f(t,e,i,r,c,a,!0)}}},"fill-extrusion":function(t,e,i,r){var n=i.paint.get("fill-extrusion-opacity");if(0!==n&&"translucent"===t.renderPass){var o=new xp(t.context.gl.LEQUAL,xp.ReadWrite,t.depthRangeFor3D);if(1!==n||i.paint.get("fill-extrusion-pattern").constantOr(1))td(t,e,i,r,o,bp.disabled,wp.disabled),td(t,e,i,r,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var a=t.colorModeForRenderPass();td(t,e,i,r,o,bp.disabled,a)}}},hillshade:function(t,e,i,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var n=t.context,o=t.depthModeForSublayer(0,xp.ReadOnly),a=t.colorModeForRenderPass(),s="translucent"===t.renderPass?t.stencilConfigForOverlap(r):[{},r],u=s[0],l=0,c=s[1];l<c.length;l+=1){var p=c[l],h=e.getTile(p);h.needsHillshadePrepare&&"offscreen"===t.renderPass?id(t,h,i,o,bp.disabled,a):"translucent"===t.renderPass&&ed(t,h,i,o,u[p.overscaledZ],a)}n.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,i,r){if("translucent"===t.renderPass&&0!==i.paint.get("raster-opacity")&&r.length)for(var n=t.context,o=n.gl,a=e.getSource(),s=t.useProgram("raster"),u=t.colorModeForRenderPass(),l=a instanceof gc?[{},r]:t.stencilConfigForOverlap(r),c=l[0],p=l[1],h=p[p.length-1].overscaledZ,f=!t.options.moving,d=0,m=p;d<m.length;d+=1){var y=m[d],_=t.depthModeForSublayer(y.overscaledZ-h,1===i.paint.get("raster-opacity")?xp.ReadWrite:xp.ReadOnly,o.LESS),g=e.getTile(y),v=t.transform.calculatePosMatrix(y.toUnwrapped(),f);g.registerFadeDuration(i.paint.get("raster-fade-duration"));var x=e.findLoadedParent(y,0),b=rd(g,x,e,i,t.transform),w=void 0,I=void 0,S="nearest"===i.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;n.activeTexture.set(o.TEXTURE0),g.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),n.activeTexture.set(o.TEXTURE1),x?(x.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),w=Math.pow(2,x.tileID.overscaledZ-g.tileID.overscaledZ),I=[g.tileID.canonical.x*w%1,g.tileID.canonical.y*w%1]):g.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var T=Ff(v,I||[0,0],w||1,b,i);a instanceof gc?s.draw(n,o.TRIANGLES,_,bp.disabled,u,Ip.disabled,T,i.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):s.draw(n,o.TRIANGLES,_,c[y.overscaledZ],u,Ip.disabled,T,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,i){var r=i.paint.get("background-color"),n=i.paint.get("background-opacity");if(0!==n){var o=t.context,a=o.gl,s=t.transform,u=s.tileSize,l=i.paint.get("background-pattern");if(!t.isPatternMissing(l)){var c=!l&&1===r.a&&1===n&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===c){var p=bp.disabled,h=t.depthModeForSublayer(0,"opaque"===c?xp.ReadWrite:xp.ReadOnly),f=t.colorModeForRenderPass(),d=t.useProgram(l?"backgroundPattern":"background"),m=s.coveringTiles({tileSize:u});l&&(o.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));for(var y=i.getCrossfadeParameters(),_=0,g=m;_<g.length;_+=1){var v=g[_],x=t.transform.calculatePosMatrix(v.toUnwrapped()),b=l?Zf(x,n,t,l,{tileID:v,tileSize:u},y):qf(x,n,r);d.draw(o,a.TRIANGLES,h,p,f,Ip.disabled,b,i.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,i){for(var r=0;r<i.length;r++)hd(t,e,i[r])},custom:function(t,e,i){var r=t.context,n=i.implementation;if("offscreen"===t.renderPass){var o=n.prerender;o&&(t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),o.call(n,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(bp.disabled);var a="3d"===n.renderingMode?new xp(t.context.gl.LEQUAL,xp.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,xp.ReadOnly);r.setDepthMode(a),n.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)}}},dd=function(t,e){this.context=new Sp(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=Tp.maxUnderzooming+Tp.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Mh,this.gpuTimers={}};dd.prototype.resize=function(t,e){if(this.width=t*U.devicePixelRatio,this.height=e*U.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var i=0,r=this.style._order;i<r.length;i+=1)this.style._layers[r[i]].resize()},dd.prototype.setup=function(){var t=this.context,e=new Yn;e.emplaceBack(0,0),e.emplaceBack(8192,0),e.emplaceBack(0,8192),e.emplaceBack(8192,8192),this.tileExtentBuffer=t.createVertexBuffer(e,Vh.members),this.tileExtentSegments=Co.simpleSegment(0,0,4,2);var i=new Yn;i.emplaceBack(0,0),i.emplaceBack(8192,0),i.emplaceBack(0,8192),i.emplaceBack(8192,8192),this.debugBuffer=t.createVertexBuffer(i,Vh.members),this.debugSegments=Co.simpleSegment(0,0,4,5);var r=new Jn;r.emplaceBack(0,0,0,0),r.emplaceBack(8192,0,8192,0),r.emplaceBack(0,8192,0,8192),r.emplaceBack(8192,8192,8192,8192),this.rasterBoundsBuffer=t.createVertexBuffer(r,_c.members),this.rasterBoundsSegments=Co.simpleSegment(0,0,4,2);var n=new Yn;n.emplaceBack(0,0),n.emplaceBack(1,0),n.emplaceBack(0,1),n.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(n,Vh.members),this.viewportSegments=Co.simpleSegment(0,0,4,2);var o=new _o;o.emplaceBack(0),o.emplaceBack(1),o.emplaceBack(3),o.emplaceBack(2),o.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(o);var a=new lo;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(a),this.emptyTexture=new Ml(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA);var s=this.context.gl;this.stencilClearMode=new bp({func:s.ALWAYS,mask:0},0,255,s.ZERO,s.ZERO,s.ZERO)},dd.prototype.clearStencil=function(){var t=this.context,e=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var i=ka();Ra(i,0,this.width,this.height,0,0,1),La(i,i,[e.drawingBufferWidth,e.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,e.TRIANGLES,xp.disabled,this.stencilClearMode,wp.disabled,Ip.disabled,kf(i),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},dd.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var i=this.context,r=i.gl;this.nextStencilID+e.length>256&&this.clearStencil(),i.setColorMode(wp.disabled),i.setDepthMode(xp.disabled);var n=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],u=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;n.draw(i,r.TRIANGLES,xp.disabled,new bp({func:r.ALWAYS,mask:0},u,255,r.KEEP,r.KEEP,r.REPLACE),wp.disabled,Ip.disabled,kf(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},dd.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new bp({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},dd.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new bp({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},dd.prototype.stencilConfigForOverlap=function(t){var e,i=this.context.gl,r=t.sort((function(t,e){return e.overscaledZ-t.overscaledZ})),n=r[r.length-1].overscaledZ,o=r[0].overscaledZ-n+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var a={},s=0;s<o;s++)a[s+n]=new bp({func:i.GEQUAL,mask:255},s+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=o,[a,r]}return[(e={},e[n]=bp.disabled,e),r]},dd.prototype.colorModeForRenderPass=function(){var t=this.context.gl;return this._showOverdrawInspector?new wp([t.CONSTANT_COLOR,t.ONE],new me(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?wp.unblended:wp.alphaBlended},dd.prototype.depthModeForSublayer=function(t,e,i){if(!this.opaquePassEnabledForLayer())return xp.disabled;var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new xp(i||this.context.gl.LEQUAL,e,[r,r])},dd.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},dd.prototype.render=function(t,e){var i=this;this.style=t,this.options=e,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(U.now()),this.imageManager.beginFrame();var r=this.style._order,n=this.style.sourceCaches;for(var o in n){var a=n[o];a.used&&a.prepare(this.context)}var s,u,l={},c={},p={};for(var h in n){var f=n[h];l[h]=f.getVisibleCoordinates(),c[h]=l[h].slice().reverse(),p[h]=f.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var m=0;m<r.length;m++)if(this.style._layers[r[m]].is3D()){this.opaquePassCutoff=m;break}this.renderPass="offscreen";for(var y=0,_=r;y<_.length;y+=1){var g=this.style._layers[_[y]];if(g.hasOffscreenPass()&&!g.isHidden(this.transform.zoom)){var v=c[g.source];("custom"===g.type||v.length)&&this.renderLayer(this,n[g.source],g,v)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:e.showOverdrawInspector?me.black:me.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=e.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){var x=this.style._layers[r[this.currentLayer]],b=n[x.source],w=l[x.source];this._renderTileClippingMasks(x,w),this.renderLayer(this,b,x,w)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){var I=this.style._layers[r[this.currentLayer]],S=n[I.source],T=("symbol"===I.type?p:c)[I.source];this._renderTileClippingMasks(I,l[I.source]),this.renderLayer(this,S,I,T)}this.options.showTileBoundaries&&(d(this.style._layers).forEach((function(t){t.source&&!t.isHidden(i.transform.zoom)&&(t.source!==(u&&u.id)&&(u=i.style.sourceCaches[t.source]),(!s||s.getSource().maxzoom<u.getSource().maxzoom)&&(s=u))})),s&&fd.debug(this,s,s.getVisibleCoordinates())),this.options.showPadding&&function(t){var e=t.transform.padding;ld(t,t.transform.height-(e.top||0),3,nd),ld(t,e.bottom||0,3,od),cd(t,e.left||0,3,ad),cd(t,t.transform.width-(e.right||0),3,sd);var i=t.transform.centerPoint;!function(t,e,i,r){pd(t,e-1,i-10,2,20,r),pd(t,e-10,i-1,20,2,r)}(t,i.x,t.transform.height-i.y,ud)}(this),this.context.setDefault()},dd.prototype.renderLayer=function(t,e,i,r){i.isHidden(this.transform.zoom)||("background"===i.type||"custom"===i.type||r.length)&&(this.id=i.id,this.gpuTimingStart(i),fd[i.type](t,e,i,r,this.style.placement.variableOffsets),this.gpuTimingEnd())},dd.prototype.gpuTimingStart=function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,i=this.gpuTimers[t.id];i||(i=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),i.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,i.query)}},dd.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}},dd.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t},dd.prototype.queryGpuTimers=function(t){var e={};for(var i in t){var r=t[i],n=this.context.extTimerQuery,o=n.getQueryObjectEXT(r.query,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(r.query),e[i]=o}return e},dd.prototype.translatePosMatrix=function(t,e,i,r,n){if(!i[0]&&!i[1])return t;var o=n?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(o){var a=Math.sin(o),s=Math.cos(o);i=[i[0]*s-i[1]*a,i[0]*a+i[1]*s]}var u=[n?i[0]:uh(e,i[0],this.transform.zoom),n?i[1]:uh(e,i[1],this.transform.zoom),0],l=new Float32Array(16);return Ma(l,t,u),l},dd.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},dd.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},dd.prototype.isPatternMissing=function(t){if(!t)return!1;if(!t.from||!t.to)return!0;var e=this.imageManager.getPattern(t.from.toString()),i=this.imageManager.getPattern(t.to.toString());return!e||!i},dd.prototype.useProgram=function(t,e){this.cache=this.cache||{};var i=""+t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[i]||(this.cache[i]=new _f(this.context,t,df[t],e,Gf[t],this._showOverdrawInspector)),this.cache[i]},dd.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},dd.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)},dd.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=a.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ml(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},dd.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var md=function(t,e){this.points=t,this.planes=e};md.fromInvProjectionMatrix=function(t,e,i){var r=Math.pow(2,i),n=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(e){return ja([],e,t)})).map((function(t){return function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}([],t,1/t[3]/e*r)})),o=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(t){var e,i,r=function(t,e){var i=e[0],r=e[1],n=e[2],o=i*i+r*r+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}([],function(t,e,i){var r=e[0],n=e[1],o=e[2],a=i[0],s=i[1],u=i[2];return t[0]=n*u-o*s,t[1]=o*a-r*u,t[2]=r*s-n*a,t}([],Ua([],n[t[0]],n[t[1]]),Ua([],n[t[2]],n[t[1]]))),o=-((e=r)[0]*(i=n[t[1]])[0]+e[1]*i[1]+e[2]*i[2]);return r.concat(o)}));return new md(n,o)};var yd=function(t,e){this.min=t,this.max=e,this.center=function(t,e,i){return t[0]=.5*e[0],t[1]=.5*e[1],t[2]=.5*e[2],t}([],function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}([],this.min,this.max))};yd.prototype.quadrant=function(t){for(var e=[t%2==0,t<2],i=Oa(this.min),r=Oa(this.max),n=0;n<e.length;n++)i[n]=e[n]?this.min[n]:this.center[n],r[n]=e[n]?this.center[n]:this.max[n];return r[2]=this.max[2],new yd(i,r)},yd.prototype.distanceX=function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]},yd.prototype.distanceY=function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]},yd.prototype.intersects=function(t){for(var e,i,r=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],n=!0,o=0;o<t.planes.length;o++){for(var a=t.planes[o],s=0,u=0;u<r.length;u++)s+=(e=a)[0]*(i=r[u])[0]+e[1]*i[1]+e[2]*i[2]+e[3]*i[3]>=0;if(0===s)return 0;s!==r.length&&(n=!1)}if(n)return 2;for(var l=0;l<3;l++){for(var c=Number.MAX_VALUE,p=-Number.MAX_VALUE,h=0;h<t.points.length;h++){var f=t.points[h][l]-this.min[l];c=Math.min(c,f),p=Math.max(p,f)}if(p<0||c>this.max[l]-this.min[l])return 0}return 1};var _d=function(t,e,i,r){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),isNaN(t)||t<0||isNaN(e)||e<0||isNaN(i)||i<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=i,this.right=r};_d.prototype.interpolate=function(t,e,i){return null!=e.top&&null!=t.top&&(this.top=oi(t.top,e.top,i)),null!=e.bottom&&null!=t.bottom&&(this.bottom=oi(t.bottom,e.bottom,i)),null!=e.left&&null!=t.left&&(this.left=oi(t.left,e.left,i)),null!=e.right&&null!=t.right&&(this.right=oi(t.right,e.right,i)),this},_d.prototype.getCenter=function(t,e){var i=p((this.left+t-this.right)/2,0,t),r=p((this.top+e-this.bottom)/2,0,e);return new n(i,r)},_d.prototype.equals=function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right},_d.prototype.clone=function(){return new _d(this.top,this.bottom,this.left,this.right)},_d.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var gd=function(t,e,i,r,n){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===n||n,this._minZoom=t||0,this._maxZoom=e||22,this._minPitch=null==i?0:i,this._maxPitch=null==r?60:r,this.setMaxBounds(),this.width=0,this.height=0,this._center=new Ql(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new _d,this._posMatrixCache={},this._alignedPosMatrixCache={}},vd={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};gd.prototype.clone=function(){var t=new gd(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t},vd.minZoom.get=function(){return this._minZoom},vd.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},vd.maxZoom.get=function(){return this._maxZoom},vd.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},vd.minPitch.get=function(){return this._minPitch},vd.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))},vd.maxPitch.get=function(){return this._maxPitch},vd.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))},vd.renderWorldCopies.get=function(){return this._renderWorldCopies},vd.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},vd.worldSize.get=function(){return this.tileSize*this.scale},vd.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},vd.size.get=function(){return new n(this.width,this.height)},vd.bearing.get=function(){return-this.angle/Math.PI*180},vd.bearing.set=function(t){var e=-h(t,-180,180)*Math.PI/180;this.angle!==e&&(this._unmodified=!1,this.angle=e,this._calcMatrices(),this.rotationMatrix=function(){var t=new Ea(4);return Ea!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}(),function(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3],s=Math.sin(i),u=Math.cos(i);t[0]=r*u+o*s,t[1]=n*u+a*s,t[2]=r*-s+o*u,t[3]=n*-s+a*u}(this.rotationMatrix,this.rotationMatrix,this.angle))},vd.pitch.get=function(){return this._pitch/Math.PI*180},vd.pitch.set=function(t){var e=p(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==e&&(this._unmodified=!1,this._pitch=e,this._calcMatrices())},vd.fov.get=function(){return this._fov/Math.PI*180},vd.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},vd.zoom.get=function(){return this._zoom},vd.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},vd.center.get=function(){return this._center},vd.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},vd.padding.get=function(){return this._edgeInsets.toJSON()},vd.padding.set=function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())},vd.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},gd.prototype.isPaddingEqual=function(t){return this._edgeInsets.equals(t)},gd.prototype.interpolatePadding=function(t,e,i){this._unmodified=!1,this._edgeInsets.interpolate(t,e,i),this._constrain(),this._calcMatrices()},gd.prototype.coveringZoomLevel=function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)},gd.prototype.getVisibleUnwrappedCoordinates=function(t){var e=[new sc(0,t)];if(this._renderWorldCopies)for(var i=this.pointCoordinate(new n(0,0)),r=this.pointCoordinate(new n(this.width,0)),o=this.pointCoordinate(new n(this.width,this.height)),a=this.pointCoordinate(new n(0,this.height)),s=Math.floor(Math.min(i.x,r.x,o.x,a.x)),u=Math.floor(Math.max(i.x,r.x,o.x,a.x)),l=s-1;l<=u+1;l++)0!==l&&e.push(new sc(l,t));return e},gd.prototype.coveringTiles=function(t){var e=this.coveringZoomLevel(t),i=e;if(void 0!==t.minzoom&&e<t.minzoom)return[];void 0!==t.maxzoom&&e>t.maxzoom&&(e=t.maxzoom);var r=oc.fromLngLat(this.center),n=Math.pow(2,e),o=[n*r.x,n*r.y,0],a=md.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,e),s=t.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(s=e);var u=function(t){return{aabb:new yd([t*n,0,0],[(t+1)*n,n,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},l=[],c=[],p=e,h=t.reparseOverscaled?i:e;if(this._renderWorldCopies)for(var f=1;f<=3;f++)l.push(u(-f)),l.push(u(f));for(l.push(u(0));l.length>0;){var d=l.pop(),m=d.x,y=d.y,_=d.fullyVisible;if(!_){var g=d.aabb.intersects(a);if(0===g)continue;_=2===g}var v=d.aabb.distanceX(o),x=d.aabb.distanceY(o),b=Math.max(Math.abs(v),Math.abs(x));if(d.zoom===p||b>3+(1<<p-d.zoom)-2&&d.zoom>=s)c.push({tileID:new uc(d.zoom===p?h:d.zoom,d.wrap,d.zoom,m,y),distanceSq:Na([o[0]-.5-m,o[1]-.5-y])});else for(var w=0;w<4;w++){var I=(m<<1)+w%2,S=(y<<1)+(w>>1);l.push({aabb:d.aabb.quadrant(w),zoom:d.zoom+1,x:I,y:S,wrap:d.wrap,fullyVisible:_})}}return c.sort((function(t,e){return t.distanceSq-e.distanceSq})).map((function(t){return t.tileID}))},gd.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},vd.unmodified.get=function(){return this._unmodified},gd.prototype.zoomScale=function(t){return Math.pow(2,t)},gd.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},gd.prototype.project=function(t){var e=p(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new n(ec(t.lng)*this.worldSize,ic(e)*this.worldSize)},gd.prototype.unproject=function(t){return new oc(t.x/this.worldSize,t.y/this.worldSize).toLngLat()},vd.point.get=function(){return this.project(this.center)},gd.prototype.setLocationAtPoint=function(t,e){var i=this.pointCoordinate(e),r=this.pointCoordinate(this.centerPoint),n=this.locationCoordinate(t),o=new oc(n.x-(i.x-r.x),n.y-(i.y-r.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())},gd.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},gd.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},gd.prototype.locationCoordinate=function(t){return oc.fromLngLat(t)},gd.prototype.coordinateLocation=function(t){return t.toLngLat()},gd.prototype.pointCoordinate=function(t){var e=[t.x,t.y,0,1],i=[t.x,t.y,1,1];ja(e,e,this.pixelMatrixInverse),ja(i,i,this.pixelMatrixInverse);var r=e[3],n=i[3],o=e[1]/r,a=i[1]/n,s=e[2]/r,u=i[2]/n,l=s===u?0:(0-s)/(u-s);return new oc(oi(e[0]/r,i[0]/n,l)/this.worldSize,oi(o,a,l)/this.worldSize)},gd.prototype.coordinatePoint=function(t){var e=[t.x*this.worldSize,t.y*this.worldSize,0,1];return ja(e,e,this.pixelMatrix),new n(e[0]/e[3],e[1]/e[3])},gd.prototype.getBounds=function(){return(new Jl).extend(this.pointLocation(new n(0,0))).extend(this.pointLocation(new n(this.width,0))).extend(this.pointLocation(new n(this.width,this.height))).extend(this.pointLocation(new n(0,this.height)))},gd.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new Jl([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},gd.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},gd.prototype.calculatePosMatrix=function(t,e){void 0===e&&(e=!1);var i=t.key,r=e?this._alignedPosMatrixCache:this._posMatrixCache;if(r[i])return r[i];var n=t.canonical,o=this.worldSize/this.zoomScale(n.z),a=n.x+Math.pow(2,n.z)*t.wrap,s=Ca(new Float64Array(16));return Ma(s,s,[a*o,n.y*o,0]),La(s,s,[o/8192,o/8192,1]),Da(s,e?this.alignedProjMatrix:this.projMatrix,s),r[i]=new Float32Array(s),r[i]},gd.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},gd.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,e,i,r,o=-90,a=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var p=this.latRange;o=ic(p[1])*this.worldSize,t=(a=ic(p[0])*this.worldSize)-o<l.y?l.y/(a-o):0}if(this.lngRange){var h=this.lngRange;s=ec(h[0])*this.worldSize,e=(u=ec(h[1])*this.worldSize)-s<l.x?l.x/(u-s):0}var f=this.point,d=Math.max(e||0,t||0);if(d)return this.center=this.unproject(new n(e?(u+s)/2:f.x,t?(a+o)/2:f.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var m=f.y,y=l.y/2;m-y<o&&(r=o+y),m+y>a&&(r=a-y)}if(this.lngRange){var _=f.x,g=l.x/2;_-g<s&&(i=s+g),_+g>u&&(i=u-g)}void 0===i&&void 0===r||(this.center=this.unproject(new n(void 0!==i?i:f.x,void 0!==r?r:f.y))),this._unmodified=c,this._constraining=!1}},gd.prototype._calcMatrices=function(){if(this.height){var t=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=Math.PI/2+this._pitch,i=this._fov*(.5+t.y/this.height),r=Math.sin(i)*this.cameraToCenterDistance/Math.sin(p(Math.PI-e-i,.01,Math.PI-.01)),n=this.point,o=n.x,a=n.y,s=1.01*(Math.cos(Math.PI/2-this._pitch)*r+this.cameraToCenterDistance),u=this.height/50,l=new Float64Array(16);!function(t,e,i,r,n){var o,a=1/Math.tan(e/2);t[0]=a/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(t[10]=(n+r)*(o=1/(r-n)),t[14]=2*n*r*o):(t[10]=-1,t[14]=-2*r)}(l,this._fov,this.width/this.height,u,s),l[8]=2*-t.x/this.width,l[9]=2*t.y/this.height,La(l,l,[1,-1,1]),Ma(l,l,[0,0,-this.cameraToCenterDistance]),function(t,e,i){var r=Math.sin(i),n=Math.cos(i),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],p=e[10],h=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*n+l*r,t[5]=a*n+c*r,t[6]=s*n+p*r,t[7]=u*n+h*r,t[8]=l*n-o*r,t[9]=c*n-a*r,t[10]=p*n-s*r,t[11]=h*n-u*r}(l,l,this._pitch),Ba(l,l,this.angle),Ma(l,l,[-o,-a,0]),this.mercatorMatrix=La([],l,[this.worldSize,this.worldSize,this.worldSize]),La(l,l,[1,1,rc(1,this.center.lat)*this.worldSize,1]),this.projMatrix=l,this.invProjMatrix=Pa([],this.projMatrix);var c=this.width%2/2,h=this.height%2/2,f=Math.cos(this.angle),d=Math.sin(this.angle),m=o-Math.round(o)+f*c+d*h,y=a-Math.round(a)+f*h+d*c,_=new Float64Array(l);if(Ma(_,_,[m>.5?m-1:m,y>.5?y-1:y,0]),this.alignedProjMatrix=_,La(l=ka(),l,[this.width/2,-this.height/2,1]),Ma(l,l,[1,-1,0]),this.labelPlaneMatrix=l,La(l=ka(),l,[1,-1,1]),Ma(l,l,[-1,-1,0]),La(l,l,[2/this.width,2/this.height,1]),this.glCoordMatrix=l,this.pixelMatrix=Da(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(l=Pa(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=l,this._posMatrixCache={},this._alignedPosMatrixCache={}}},gd.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var t=this.pointCoordinate(new n(0,0)),e=[t.x*this.worldSize,t.y*this.worldSize,0,1];return ja(e,e,this.pixelMatrix)[3]/this.cameraToCenterDistance},gd.prototype.getCameraPoint=function(){var t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n(0,t))},gd.prototype.getCameraQueryGeometry=function(t){var e=this.getCameraPoint();if(1===t.length)return[t[0],e];for(var i=e.x,r=e.y,o=e.x,a=e.y,s=0,u=t;s<u.length;s+=1){var l=u[s];i=Math.min(i,l.x),r=Math.min(r,l.y),o=Math.max(o,l.x),a=Math.max(a,l.y)}return[new n(i,r),new n(o,r),new n(o,a),new n(i,a),new n(i,r)]},Object.defineProperties(gd.prototype,vd);var xd=function(t){var e,i,r,n;this._hashName=t&&encodeURIComponent(t),b(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(e=this._updateHashUnthrottled.bind(this),i=!1,r=null,n=function(){r=null,i&&(e(),r=setTimeout(n,300),i=!1)},function(){return i=!0,r||n(),r})};xd.prototype.addTo=function(t){return this._map=t,a.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},xd.prototype.remove=function(){return a.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},xd.prototype.getHashString=function(t){var e=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,r=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),n=Math.pow(10,r),o=Math.round(e.lng*n)/n,s=Math.round(e.lat*n)/n,u=this._map.getBearing(),l=this._map.getPitch(),c="";if(c+=t?"/"+o+"/"+s+"/"+i:i+"/"+s+"/"+o,(u||l)&&(c+="/"+Math.round(10*u)/10),l&&(c+="/"+Math.round(l)),this._hashName){var p=this._hashName,h=!1,f=a.location.hash.slice(1).split("&").map((function(t){var e=t.split("=")[0];return e===p?(h=!0,e+"="+c):t})).filter((function(t){return t}));return h||f.push(p+"="+c),"#"+f.join("&")}return"#"+c},xd.prototype._getCurrentHash=function(){var t,e=this,i=a.location.hash.replace("#","");return this._hashName?(i.split("&").map((function(t){return t.split("=")})).forEach((function(i){i[0]===e._hashName&&(t=i)})),(t&&t[1]||"").split("/")):i.split("/")},xd.prototype._onHashChange=function(){var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(t){return isNaN(t)}))){var e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},xd.prototype._updateHashUnthrottled=function(){var t=a.location.href.replace(/(#.+)?$/,this.getHashString());try{a.history.replaceState(a.history.state,null,t)}catch(t){}};var bd={linearity:.3,easing:l(0,0,.3,1)},wd=m({deceleration:2500,maxSpeed:1400},bd),Id=m({deceleration:20,maxSpeed:1400},bd),Sd=m({deceleration:1e3,maxSpeed:360},bd),Td=m({deceleration:1e3,maxSpeed:90},bd),Ad=function(t){this._map=t,this.clear()};function zd(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function Ed(t,e,i){var r=i.maxSpeed,n=i.linearity,o=i.deceleration,a=p(t*n/(e/1e3),-r,r),s=Math.abs(a)/(o*n);return{easing:i.easing,duration:1e3*s,amount:a*(s/2)}}Ad.prototype.clear=function(){this._inertiaBuffer=[]},Ad.prototype.record=function(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:U.now(),settings:t})},Ad.prototype._drainInertiaBuffer=function(){for(var t=this._inertiaBuffer,e=U.now();t.length>0&&e-t[0].time>160;)t.shift()},Ad.prototype._onMoveEnd=function(t){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var e={zoom:0,bearing:0,pitch:0,pan:new n(0,0),pinchAround:void 0,around:void 0},i=0,r=this._inertiaBuffer;i<r.length;i+=1){var o=r[i].settings;e.zoom+=o.zoomDelta||0,e.bearing+=o.bearingDelta||0,e.pitch+=o.pitchDelta||0,o.panDelta&&e.pan._add(o.panDelta),o.around&&(e.around=o.around),o.pinchAround&&(e.pinchAround=o.pinchAround)}var a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(e.pan.mag()){var u=Ed(e.pan.mag(),a,m({},wd,t||{}));s.offset=e.pan.mult(u.amount/e.pan.mag()),s.center=this._map.transform.center,zd(s,u)}if(e.zoom){var l=Ed(e.zoom,a,Id);s.zoom=this._map.transform.zoom+l.amount,zd(s,l)}if(e.bearing){var c=Ed(e.bearing,a,Sd);s.bearing=this._map.transform.bearing+p(c.amount,-179,179),zd(s,c)}if(e.pitch){var h=Ed(e.pitch,a,Td);s.pitch=this._map.transform.pitch+h.amount,zd(s,h)}if(s.zoom||s.bearing){var f=void 0===e.pinchAround?e.around:e.pinchAround;s.around=f?this._map.unproject(f):this._map.getCenter()}return this.clear(),m(s,{noMoveStart:!0})}};var kd=function(t){function e(e,i,r,n){void 0===n&&(n={});var o=j.mousePos(i.getCanvasContainer(),r),a=i.unproject(o);t.call(this,e,m({point:o,lngLat:a,originalEvent:r},n)),this._defaultPrevented=!1,this.target=i}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,i),e}(jt),Cd=function(t){function e(e,i,r){var o="touchend"===e?r.changedTouches:r.touches,a=j.touchPos(i.getCanvasContainer(),o),s=a.map((function(t){return i.unproject(t)})),u=a.reduce((function(t,e,i,r){return t.add(e.div(r.length))}),new n(0,0)),l=i.unproject(u);t.call(this,e,{points:a,point:u,lngLats:s,lngLat:l,originalEvent:r}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,i),e}(jt),Pd=function(t){function e(e,i,r){t.call(this,e,{originalEvent:r}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,i),e}(jt),Dd=function(t,e){this._map=t,this._clickTolerance=e.clickTolerance};Dd.prototype.reset=function(){delete this._mousedownPos},Dd.prototype.wheel=function(t){return this._firePreventable(new Pd(t.type,this._map,t))},Dd.prototype.mousedown=function(t,e){return this._mousedownPos=e,this._firePreventable(new kd(t.type,this._map,t))},Dd.prototype.mouseup=function(t){this._map.fire(new kd(t.type,this._map,t))},Dd.prototype.click=function(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new kd(t.type,this._map,t))},Dd.prototype.dblclick=function(t){return this._firePreventable(new kd(t.type,this._map,t))},Dd.prototype.mouseover=function(t){this._map.fire(new kd(t.type,this._map,t))},Dd.prototype.mouseout=function(t){this._map.fire(new kd(t.type,this._map,t))},Dd.prototype.touchstart=function(t){return this._firePreventable(new Cd(t.type,this._map,t))},Dd.prototype.touchmove=function(t){this._map.fire(new Cd(t.type,this._map,t))},Dd.prototype.touchend=function(t){this._map.fire(new Cd(t.type,this._map,t))},Dd.prototype.touchcancel=function(t){this._map.fire(new Cd(t.type,this._map,t))},Dd.prototype._firePreventable=function(t){if(this._map.fire(t),t.defaultPrevented)return{}},Dd.prototype.isEnabled=function(){return!0},Dd.prototype.isActive=function(){return!1},Dd.prototype.enable=function(){},Dd.prototype.disable=function(){};var Md=function(t){this._map=t};Md.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Md.prototype.mousemove=function(t){this._map.fire(new kd(t.type,this._map,t))},Md.prototype.mousedown=function(){this._delayContextMenu=!0},Md.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new kd("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Md.prototype.contextmenu=function(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new kd(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()},Md.prototype.isEnabled=function(){return!0},Md.prototype.isActive=function(){return!1},Md.prototype.enable=function(){},Md.prototype.disable=function(){};var Ld=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1};function Bd(t,e){for(var i={},r=0;r<t.length;r++)i[t[r].identifier]=e[r];return i}Ld.prototype.isEnabled=function(){return!!this._enabled},Ld.prototype.isActive=function(){return!!this._active},Ld.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Ld.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ld.prototype.mousedown=function(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(j.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)},Ld.prototype.mousemoveWindow=function(t,e){if(this._active){var i=e;if(!(this._lastPos.equals(i)||!this._box&&i.dist(this._startPos)<this._clickTolerance)){var r=this._startPos;this._lastPos=i,this._box||(this._box=j.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var n=Math.min(r.x,i.x),o=Math.max(r.x,i.x),a=Math.min(r.y,i.y),s=Math.max(r.y,i.y);j.setTransform(this._box,"translate("+n+"px,"+a+"px)"),this._box.style.width=o-n+"px",this._box.style.height=s-a+"px"}}},Ld.prototype.mouseupWindow=function(t,e){var i=this;if(this._active&&0===t.button){var r=this._startPos,n=e;if(this.reset(),j.suppressClick(),r.x!==n.x||r.y!==n.y)return this._map.fire(new jt("boxzoomend",{originalEvent:t})),{cameraAnimation:function(t){return t.fitScreenCoordinates(r,n,i._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",t)}},Ld.prototype.keydown=function(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))},Ld.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(j.remove(this._box),this._box=null),j.enableDrag(),delete this._startPos,delete this._lastPos},Ld.prototype._fireEvent=function(t,e){return this._map.fire(new jt(t,{originalEvent:e}))};var Rd=function(t){this.reset(),this.numTouches=t.numTouches};Rd.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Rd.prototype.touchstart=function(t,e,i){(this.centroid||i.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),i.length===this.numTouches&&(this.centroid=function(t){for(var e=new n(0,0),i=0,r=t;i<r.length;i+=1)e._add(r[i]);return e.div(t.length)}(e),this.touches=Bd(i,e)))},Rd.prototype.touchmove=function(t,e,i){if(!this.aborted&&this.centroid){var r=Bd(i,e);for(var n in this.touches){var o=r[n];(!o||o.dist(this.touches[n])>30)&&(this.aborted=!0)}}},Rd.prototype.touchend=function(t,e,i){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}};var Fd=function(t){this.singleTap=new Rd(t),this.numTaps=t.numTaps,this.reset()};Fd.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Fd.prototype.touchstart=function(t,e,i){this.singleTap.touchstart(t,e,i)},Fd.prototype.touchmove=function(t,e,i){this.singleTap.touchmove(t,e,i)},Fd.prototype.touchend=function(t,e,i){var r=this.singleTap.touchend(t,e,i);if(r){var n=t.timeStamp-this.lastTime<500,o=!this.lastTap||this.lastTap.dist(r)<30;if(n&&o||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}};var Od=function(){this._zoomIn=new Fd({numTouches:1,numTaps:2}),this._zoomOut=new Fd({numTouches:2,numTaps:1}),this.reset()};Od.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Od.prototype.touchstart=function(t,e,i){this._zoomIn.touchstart(t,e,i),this._zoomOut.touchstart(t,e,i)},Od.prototype.touchmove=function(t,e,i){this._zoomIn.touchmove(t,e,i),this._zoomOut.touchmove(t,e,i)},Od.prototype.touchend=function(t,e,i){var r=this,n=this._zoomIn.touchend(t,e,i),o=this._zoomOut.touchend(t,e,i);return n?(this._active=!0,t.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(n)},{originalEvent:t})}}):o?(this._active=!0,t.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(o)},{originalEvent:t})}}):void 0},Od.prototype.touchcancel=function(){this.reset()},Od.prototype.enable=function(){this._enabled=!0},Od.prototype.disable=function(){this._enabled=!1,this.reset()},Od.prototype.isEnabled=function(){return this._enabled},Od.prototype.isActive=function(){return this._active};var Vd={0:1,2:2},Ud=function(t){this.reset(),this._clickTolerance=t.clickTolerance||1};Ud.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Ud.prototype._correctButton=function(t,e){return!1},Ud.prototype._move=function(t,e){return{}},Ud.prototype.mousedown=function(t,e){if(!this._lastPoint){var i=j.mouseButton(t);this._correctButton(t,i)&&(this._lastPoint=e,this._eventButton=i)}},Ud.prototype.mousemoveWindow=function(t,e){var i=this._lastPoint;if(i)if(t.preventDefault(),function(t,e){var i=Vd[e];return void 0===t.buttons||(t.buttons&i)!==i}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(i,e)},Ud.prototype.mouseupWindow=function(t){this._lastPoint&&j.mouseButton(t)===this._eventButton&&(this._moved&&j.suppressClick(),this.reset())},Ud.prototype.enable=function(){this._enabled=!0},Ud.prototype.disable=function(){this._enabled=!1,this.reset()},Ud.prototype.isEnabled=function(){return this._enabled},Ud.prototype.isActive=function(){return this._active};var jd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.mousedown=function(e,i){t.prototype.mousedown.call(this,e,i),this._lastPoint&&(this._active=!0)},e.prototype._correctButton=function(t,e){return 0===e&&!t.ctrlKey},e.prototype._move=function(t,e){return{around:e,panDelta:e.sub(t)}},e}(Ud),Nd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var i=.8*(e.x-t.x);if(i)return this._active=!0,{bearingDelta:i}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Ud),qd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var i=-.5*(e.y-t.y);if(i)return this._active=!0,{pitchDelta:i}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Ud),Zd=function(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()};Zd.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new n(0,0)},Zd.prototype.touchstart=function(t,e,i){return this._calculateTransform(t,e,i)},Zd.prototype.touchmove=function(t,e,i){if(this._active&&!(i.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,i)},Zd.prototype.touchend=function(t,e,i){this._calculateTransform(t,e,i),this._active&&i.length<this._minTouches&&this.reset()},Zd.prototype.touchcancel=function(){this.reset()},Zd.prototype._calculateTransform=function(t,e,i){i.length>0&&(this._active=!0);var r=Bd(i,e),o=new n(0,0),a=new n(0,0),s=0;for(var u in r){var l=r[u],c=this._touches[u];c&&(o._add(l),a._add(l.sub(c)),s++,r[u]=l)}if(this._touches=r,!(s<this._minTouches)&&a.mag()){var p=a.div(s);if(this._sum._add(p),!(this._sum.mag()<this._clickTolerance))return{around:o.div(s),panDelta:p}}},Zd.prototype.enable=function(){this._enabled=!0},Zd.prototype.disable=function(){this._enabled=!1,this.reset()},Zd.prototype.isEnabled=function(){return this._enabled},Zd.prototype.isActive=function(){return this._active};var Gd=function(){this.reset()};function Xd(t,e,i){for(var r=0;r<t.length;r++)if(t[r].identifier===i)return e[r]}function Wd(t,e){return Math.log(t/e)/Math.LN2}Gd.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Gd.prototype._start=function(t){},Gd.prototype._move=function(t,e,i){return{}},Gd.prototype.touchstart=function(t,e,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([e[0],e[1]]))},Gd.prototype.touchmove=function(t,e,i){if(this._firstTwoTouches){t.preventDefault();var r=this._firstTwoTouches,n=r[1],o=Xd(i,e,r[0]),a=Xd(i,e,n);if(o&&a){var s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,t)}}},Gd.prototype.touchend=function(t,e,i){if(this._firstTwoTouches){var r=this._firstTwoTouches,n=r[1],o=Xd(i,e,r[0]),a=Xd(i,e,n);o&&a||(this._active&&j.suppressClick(),this.reset())}},Gd.prototype.touchcancel=function(){this.reset()},Gd.prototype.enable=function(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around},Gd.prototype.disable=function(){this._enabled=!1,this.reset()},Gd.prototype.isEnabled=function(){return this._enabled},Gd.prototype.isActive=function(){return this._active};var Hd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._distance,delete this._startDistance},e.prototype._start=function(t){this._startDistance=this._distance=t[0].dist(t[1])},e.prototype._move=function(t,e){var i=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Wd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Wd(this._distance,i),pinchAround:e}},e}(Gd);function Kd(t,e){return 180*t.angleWith(e)/Math.PI}var Yd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},e.prototype._start=function(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])},e.prototype._move=function(t,e){var i=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Kd(this._vector,i),pinchAround:e}},e.prototype._isBelowThreshold=function(t){this._minDiameter=Math.min(this._minDiameter,t.mag());var e=25/(Math.PI*this._minDiameter)*360,i=Kd(t,this._startVector);return Math.abs(i)<e},e}(Gd);function Jd(t){return Math.abs(t.y)>Math.abs(t.x)}var Qd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},e.prototype._start=function(t){this._lastPoints=t,Jd(t[0].sub(t[1]))&&(this._valid=!1)},e.prototype._move=function(t,e,i){var r=t[0].sub(this._lastPoints[0]),n=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(r,n,i.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(r.y+n.y)/2*-.5}},e.prototype.gestureBeginsVertically=function(t,e,i){if(void 0!==this._valid)return this._valid;var r=t.mag()>=2,n=e.mag()>=2;if(r||n){if(!r||!n)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;var o=t.y>0==e.y>0;return Jd(t)&&Jd(e)&&o}},e}(Gd),$d={panStep:100,bearingStep:15,pitchStep:10},tm=function(){var t=$d;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1};function em(t){return t*(2-t)}tm.prototype.reset=function(){this._active=!1},tm.prototype.keydown=function(t){var e=this;if(!(t.altKey||t.ctrlKey||t.metaKey)){var i=0,r=0,n=0,o=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:i=1;break;case 189:case 109:case 173:i=-1;break;case 37:t.shiftKey?r=-1:(t.preventDefault(),o=-1);break;case 39:t.shiftKey?r=1:(t.preventDefault(),o=1);break;case 38:t.shiftKey?n=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?n=-1:(t.preventDefault(),a=1);break;default:return}return this._rotationDisabled&&(r=0,n=0),{cameraAnimation:function(s){var u=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:em,zoom:i?Math.round(u)+i*(t.shiftKey?2:1):u,bearing:s.getBearing()+r*e._bearingStep,pitch:s.getPitch()+n*e._pitchStep,offset:[-o*e._panStep,-a*e._panStep],center:s.getCenter()},{originalEvent:t})}}}},tm.prototype.enable=function(){this._enabled=!0},tm.prototype.disable=function(){this._enabled=!1,this.reset()},tm.prototype.isEnabled=function(){return this._enabled},tm.prototype.isActive=function(){return this._active},tm.prototype.disableRotation=function(){this._rotationDisabled=!0},tm.prototype.enableRotation=function(){this._rotationDisabled=!1};var im=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._handler=e,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,b(["_onTimeout"],this)};im.prototype.setZoomRate=function(t){this._defaultZoomRate=t},im.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},im.prototype.isEnabled=function(){return!!this._enabled},im.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},im.prototype.isZooming=function(){return!!this._zooming},im.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},im.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},im.prototype.wheel=function(t){if(this.isEnabled()){var e=t.deltaMode===a.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,i=U.now(),r=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==e&&e%4.000244140625==0?this._type="wheel":0!==e&&Math.abs(e)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(r*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&(this._lastWheelEvent=t,this._delta-=e,this._active||this._start(t)),t.preventDefault()}},im.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)},im.prototype._start=function(t){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var e=j.mousePos(this._el,t);this._around=Ql.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(e)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},im.prototype.renderFrame=function(){var t=this;if(this._frameId&&(this._frameId=null,this.isActive())){var e=this._map.transform;if(0!==this._delta){var i="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,r=2/(1+Math.exp(-Math.abs(this._delta*i)));this._delta<0&&0!==r&&(r=1/r);var n="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(n*r))),"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var o,a="number"==typeof this._targetZoom?this._targetZoom:e.zoom,s=this._startZoom,u=this._easing,l=!1;if("wheel"===this._type&&s&&u){var c=Math.min((U.now()-this._lastWheelEventTime)/200,1);o=oi(s,a,u(c)),c<1?this._frameId||(this._frameId=!0):l=!0}else o=a,l=!0;return this._active=!0,l&&(this._active=!1,this._finishTimeout=setTimeout((function(){t._zooming=!1,t._handler._triggerRenderFrame(),delete t._targetZoom,delete t._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!l,zoomDelta:o-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},im.prototype._smoothOutEasing=function(t){var e=c;if(this._prevEase){var i=this._prevEase,r=(U.now()-i.start)/i.duration,n=i.easing(r+.01)-i.easing(r),o=.27/Math.sqrt(n*n+1e-4)*.01;e=l(o,Math.sqrt(.0729-o*o),.25,1)}return this._prevEase={start:U.now(),duration:t,easing:e},e},im.prototype.reset=function(){this._active=!1};var rm=function(t,e){this._clickZoom=t,this._tapZoom=e};rm.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},rm.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},rm.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},rm.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var nm=function(){this.reset()};nm.prototype.reset=function(){this._active=!1},nm.prototype.dblclick=function(t,e){return t.preventDefault(),{cameraAnimation:function(i){i.easeTo({duration:300,zoom:i.getZoom()+(t.shiftKey?-1:1),around:i.unproject(e)},{originalEvent:t})}}},nm.prototype.enable=function(){this._enabled=!0},nm.prototype.disable=function(){this._enabled=!1,this.reset()},nm.prototype.isEnabled=function(){return this._enabled},nm.prototype.isActive=function(){return this._active};var om=function(){this._tap=new Fd({numTouches:1,numTaps:1}),this.reset()};om.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},om.prototype.touchstart=function(t,e,i){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=e[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(t,e,i))},om.prototype.touchmove=function(t,e,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;var r=e[0],n=r.y-this._swipePoint.y;return this._swipePoint=r,t.preventDefault(),this._active=!0,{zoomDelta:n/128}}}else this._tap.touchmove(t,e,i)},om.prototype.touchend=function(t,e,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(t,e,i)&&(this._tapTime=t.timeStamp)},om.prototype.touchcancel=function(){this.reset()},om.prototype.enable=function(){this._enabled=!0},om.prototype.disable=function(){this._enabled=!1,this.reset()},om.prototype.isEnabled=function(){return this._enabled},om.prototype.isActive=function(){return this._active};var am=function(t,e,i){this._el=t,this._mousePan=e,this._touchPan=i};am.prototype.enable=function(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},am.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},am.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},am.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var sm=function(t,e,i){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=i};sm.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},sm.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},sm.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},sm.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var um=function(t,e,i,r){this._el=t,this._touchZoom=e,this._touchRotate=i,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0};um.prototype.enable=function(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},um.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},um.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},um.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},um.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},um.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var lm=function(t){return t.zoom||t.drag||t.pitch||t.rotate},cm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(jt);function pm(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}var hm=function(t,e){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ad(t),this._bearingSnap=e.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(e),b(["handleEvent","handleWindowEvent"],this);var i=this._el;this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[a.document,"mousemove",{capture:!0}],[a.document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[a,"blur",void 0]];for(var r=0,n=this._listeners;r<n.length;r+=1){var o=n[r],s=o[0];j.addEventListener(s,o[1],s===a.document?this.handleWindowEvent:this.handleEvent,o[2])}};hm.prototype.destroy=function(){for(var t=0,e=this._listeners;t<e.length;t+=1){var i=e[t],r=i[0];j.removeEventListener(r,i[1],r===a.document?this.handleWindowEvent:this.handleEvent,i[2])}},hm.prototype._addDefaultHandlers=function(t){var e=this._map,i=e.getCanvasContainer();this._add("mapEvent",new Dd(e,t));var r=e.boxZoom=new Ld(e,t);this._add("boxZoom",r);var n=new Od,o=new nm;e.doubleClickZoom=new rm(o,n),this._add("tapZoom",n),this._add("clickZoom",o);var a=new om;this._add("tapDragZoom",a);var s=e.touchPitch=new Qd;this._add("touchPitch",s);var u=new Nd(t),l=new qd(t);e.dragRotate=new sm(t,u,l),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",l,["mouseRotate"]);var c=new jd(t),p=new Zd(t);e.dragPan=new am(i,c,p),this._add("mousePan",c),this._add("touchPan",p,["touchZoom","touchRotate"]);var h=new Yd,f=new Hd;e.touchZoomRotate=new um(i,f,h,a),this._add("touchRotate",h,["touchPan","touchZoom"]),this._add("touchZoom",f,["touchPan","touchRotate"]);var d=e.scrollZoom=new im(e,this);this._add("scrollZoom",d,["mousePan"]);var m=e.keyboard=new tm;this._add("keyboard",m),this._add("blockableMapEvent",new Md(e));for(var y=0,_=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];y<_.length;y+=1){var g=_[y];t.interactive&&t[g]&&e[g].enable(t[g])}},hm.prototype._add=function(t,e,i){this._handlers.push({handlerName:t,handler:e,allowed:i}),this._handlersById[t]=e},hm.prototype.stop=function(t){if(!this._updatingCamera){for(var e=0,i=this._handlers;e<i.length;e+=1)i[e].handler.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}},hm.prototype.isActive=function(){for(var t=0,e=this._handlers;t<e.length;t+=1)if(e[t].handler.isActive())return!0;return!1},hm.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},hm.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},hm.prototype.isMoving=function(){return Boolean(lm(this._eventsInProgress))||this.isZooming()},hm.prototype._blockedByActive=function(t,e,i){for(var r in t)if(r!==i&&(!e||e.indexOf(r)<0))return!0;return!1},hm.prototype.handleWindowEvent=function(t){this.handleEvent(t,t.type+"Window")},hm.prototype._getMapTouches=function(t){for(var e=[],i=0,r=t;i<r.length;i+=1){var n=r[i];this._el.contains(n.target)&&e.push(n)}return e},hm.prototype.handleEvent=function(t,e){if("blur"!==t.type){this._updatingCamera=!0;for(var i="renderFrame"===t.type?void 0:t,r={needsRenderFrame:!1},n={},o={},a=t.touches?this._getMapTouches(t.touches):void 0,s=a?j.touchPos(this._el,a):j.mousePos(this._el,t),u=0,l=this._handlers;u<l.length;u+=1){var c=l[u],p=c.handlerName,h=c.handler,f=c.allowed;if(h.isEnabled()){var d=void 0;this._blockedByActive(o,f,p)?h.reset():h[e||t.type]&&(d=h[e||t.type](t,s,a),this.mergeHandlerResult(r,n,d,p,i),d&&d.needsRenderFrame&&this._triggerRenderFrame()),(d||h.isActive())&&(o[p]=h)}}var m={};for(var y in this._previousActiveHandlers)o[y]||(m[y]=i);this._previousActiveHandlers=o,(Object.keys(m).length||pm(r))&&(this._changes.push([r,n,m]),this._triggerRenderFrame()),(Object.keys(o).length||pm(r))&&this._map._stop(!0),this._updatingCamera=!1;var _=r.cameraAnimation;_&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],_(this._map))}else this.stop(!0)},hm.prototype.mergeHandlerResult=function(t,e,i,r,n){if(i){m(t,i);var o={handlerName:r,originalEvent:i.originalEvent||n};void 0!==i.zoomDelta&&(e.zoom=o),void 0!==i.panDelta&&(e.drag=o),void 0!==i.pitchDelta&&(e.pitch=o),void 0!==i.bearingDelta&&(e.rotate=o)}},hm.prototype._applyChanges=function(){for(var t={},e={},i={},r=0,o=this._changes;r<o.length;r+=1){var a=o[r],s=a[0],u=a[1],l=a[2];s.panDelta&&(t.panDelta=(t.panDelta||new n(0,0))._add(s.panDelta)),s.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(t.around=s.around),void 0!==s.pinchAround&&(t.pinchAround=s.pinchAround),s.noInertia&&(t.noInertia=s.noInertia),m(e,u),m(i,l)}this._updateMapTransform(t,e,i),this._changes=[]},hm.prototype._updateMapTransform=function(t,e,i){var r=this._map,n=r.transform;if(!pm(t))return this._fireEvents(e,i,!0);var o=t.panDelta,a=t.zoomDelta,s=t.bearingDelta,u=t.pitchDelta,l=t.around,c=t.pinchAround;void 0!==c&&(l=c),r._stop(!0),l=l||r.transform.centerPoint;var p=n.pointLocation(o?l.sub(o):l);s&&(n.bearing+=s),u&&(n.pitch+=u),a&&(n.zoom+=a),n.setLocationAtPoint(p,l),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,i,!0)},hm.prototype._fireEvents=function(t,e,i){var r=this,n=lm(this._eventsInProgress),o=lm(t),a={};for(var s in t)this._eventsInProgress[s]||(a[s+"start"]=t[s].originalEvent),this._eventsInProgress[s]=t[s];for(var u in!n&&o&&this._fireEvent("movestart",o.originalEvent),a)this._fireEvent(u,a[u]);for(var l in o&&this._fireEvent("move",o.originalEvent),t)this._fireEvent(l,t[l].originalEvent);var c,p={};for(var h in this._eventsInProgress){var f=this._eventsInProgress[h],d=f.handlerName,m=f.originalEvent;this._handlersById[d].isActive()||(delete this._eventsInProgress[h],p[h+"end"]=c=e[d]||m)}for(var y in p)this._fireEvent(y,p[y]);var _=lm(this._eventsInProgress);if(i&&(n||o)&&!_){this._updatingCamera=!0;var g=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),v=function(t){return 0!==t&&-r._bearingSnap<t&&t<r._bearingSnap};g?(v(g.bearing||this._map.getBearing())&&(g.bearing=0),this._map.easeTo(g,{originalEvent:c})):(this._map.fire(new jt("moveend",{originalEvent:c})),v(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},hm.prototype._fireEvent=function(t,e){this._map.fire(new jt(t,e?{originalEvent:e}:{}))},hm.prototype._requestFrame=function(){var t=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(e){delete t._frameId,t.handleEvent(new cm("renderFrame",{timeStamp:e})),t._applyChanges()}))},hm.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var fm=function(t){function e(e,i){t.call(this),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=i.bearingSnap,b(["_renderFrameCallback"],this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCenter=function(){return new Ql(this.transform.center.lng,this.transform.center.lat)},e.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},e.prototype.panBy=function(t,e,i){return t=n.convert(t).mult(-1),this.panTo(this.transform.center,m({offset:t},e),i)},e.prototype.panTo=function(t,e,i){return this.easeTo(m({center:t},e),i)},e.prototype.getZoom=function(){return this.transform.zoom},e.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},e.prototype.zoomTo=function(t,e,i){return this.easeTo(m({zoom:t},e),i)},e.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},e.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},e.prototype.getBearing=function(){return this.transform.bearing},e.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},e.prototype.getPadding=function(){return this.transform.padding},e.prototype.setPadding=function(t,e){return this.jumpTo({padding:t},e),this},e.prototype.rotateTo=function(t,e,i){return this.easeTo(m({bearing:t},e),i)},e.prototype.resetNorth=function(t,e){return this.rotateTo(0,m({duration:1e3},t),e),this},e.prototype.resetNorthPitch=function(t,e){return this.easeTo(m({bearing:0,pitch:0,duration:1e3},t),e),this},e.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},e.prototype.getPitch=function(){return this.transform.pitch},e.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},e.prototype.cameraForBounds=function(t,e){t=Jl.convert(t);var i=e&&e.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),i,e)},e.prototype._cameraForBoxAndBearing=function(t,e,i,r){var o={top:0,bottom:0,right:0,left:0};if("number"==typeof(r=m({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding){var a=r.padding;r.padding={top:a,bottom:a,right:a,left:a}}r.padding=m(o,r.padding);var s=this.transform,u=s.padding,l=s.project(Ql.convert(t)),c=s.project(Ql.convert(e)),p=l.rotate(-i*Math.PI/180),h=c.rotate(-i*Math.PI/180),f=new n(Math.max(p.x,h.x),Math.max(p.y,h.y)),d=new n(Math.min(p.x,h.x),Math.min(p.y,h.y)),y=f.sub(d),_=(s.width-(u.left+u.right+r.padding.left+r.padding.right))/y.x,g=(s.height-(u.top+u.bottom+r.padding.top+r.padding.bottom))/y.y;if(!(g<0||_<0)){var v=Math.min(s.scaleZoom(s.scale*Math.min(_,g)),r.maxZoom),x="number"==typeof r.offset.x?new n(r.offset.x,r.offset.y):n.convert(r.offset),b=new n((r.padding.left-r.padding.right)/2,(r.padding.top-r.padding.bottom)/2).rotate(i*Math.PI/180),w=x.add(b).mult(s.scale/s.zoomScale(v));return{center:s.unproject(l.add(c).div(2).sub(w)),zoom:v,bearing:i}}z("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},e.prototype.fitBounds=function(t,e,i){return this._fitInternal(this.cameraForBounds(t,e),e,i)},e.prototype.fitScreenCoordinates=function(t,e,i,r,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(n.convert(t)),this.transform.pointLocation(n.convert(e)),i,r),r,o)},e.prototype._fitInternal=function(t,e,i){return t?(delete(e=m(t,e)).padding,e.linear?this.easeTo(e,i):this.flyTo(e,i)):this},e.prototype.jumpTo=function(t,e){this.stop();var i=this.transform,r=!1,n=!1,o=!1;return"zoom"in t&&i.zoom!==+t.zoom&&(r=!0,i.zoom=+t.zoom),void 0!==t.center&&(i.center=Ql.convert(t.center)),"bearing"in t&&i.bearing!==+t.bearing&&(n=!0,i.bearing=+t.bearing),"pitch"in t&&i.pitch!==+t.pitch&&(o=!0,i.pitch=+t.pitch),null==t.padding||i.isPaddingEqual(t.padding)||(i.padding=t.padding),this.fire(new jt("movestart",e)).fire(new jt("move",e)),r&&this.fire(new jt("zoomstart",e)).fire(new jt("zoom",e)).fire(new jt("zoomend",e)),n&&this.fire(new jt("rotatestart",e)).fire(new jt("rotate",e)).fire(new jt("rotateend",e)),o&&this.fire(new jt("pitchstart",e)).fire(new jt("pitch",e)).fire(new jt("pitchend",e)),this.fire(new jt("moveend",e))},e.prototype.easeTo=function(t,e){var i=this;this._stop(!1,t.easeId),(!1===(t=m({offset:[0,0],duration:500,easing:c},t)).animate||!t.essential&&U.prefersReducedMotion)&&(t.duration=0);var r=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u=this.getPadding(),l="zoom"in t?+t.zoom:o,p="bearing"in t?this._normalizeBearing(t.bearing,a):a,h="pitch"in t?+t.pitch:s,f="padding"in t?t.padding:r.padding,d=n.convert(t.offset),y=r.centerPoint.add(d),_=r.pointLocation(y),g=Ql.convert(t.center||_);this._normalizeCenter(g);var v,x,b=r.project(_),w=r.project(g).sub(b),I=r.zoomScale(l-o);t.around&&(v=Ql.convert(t.around),x=r.locationPoint(v));var S={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==o,this._rotating=this._rotating||a!==p,this._pitching=this._pitching||h!==s,this._padding=!r.isPaddingEqual(f),this._easeId=t.easeId,this._prepareEase(e,t.noMoveStart,S),this._ease((function(t){if(i._zooming&&(r.zoom=oi(o,l,t)),i._rotating&&(r.bearing=oi(a,p,t)),i._pitching&&(r.pitch=oi(s,h,t)),i._padding&&(r.interpolatePadding(u,f,t),y=r.centerPoint.add(d)),v)r.setLocationAtPoint(v,x);else{var n=r.zoomScale(r.zoom-o),c=l>o?Math.min(2,I):Math.max(.5,I),m=Math.pow(c,1-t),_=r.unproject(b.add(w.mult(t*m)).mult(n));r.setLocationAtPoint(r.renderWorldCopies?_.wrap():_,y)}i._fireMoveEvents(e)}),(function(t){i._afterEase(e,t)}),t),this},e.prototype._prepareEase=function(t,e,i){void 0===i&&(i={}),this._moving=!0,e||i.moving||this.fire(new jt("movestart",t)),this._zooming&&!i.zooming&&this.fire(new jt("zoomstart",t)),this._rotating&&!i.rotating&&this.fire(new jt("rotatestart",t)),this._pitching&&!i.pitching&&this.fire(new jt("pitchstart",t))},e.prototype._fireMoveEvents=function(t){this.fire(new jt("move",t)),this._zooming&&this.fire(new jt("zoom",t)),this._rotating&&this.fire(new jt("rotate",t)),this._pitching&&this.fire(new jt("pitch",t))},e.prototype._afterEase=function(t,e){if(!this._easeId||!e||this._easeId!==e){delete this._easeId;var i=this._zooming,r=this._rotating,n=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,i&&this.fire(new jt("zoomend",t)),r&&this.fire(new jt("rotateend",t)),n&&this.fire(new jt("pitchend",t)),this.fire(new jt("moveend",t))}},e.prototype.flyTo=function(t,e){var i=this;if(!t.essential&&U.prefersReducedMotion){var r=y(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,e)}this.stop(),t=m({offset:[0,0],speed:1.2,curve:1.42,easing:c},t);var o=this.transform,a=this.getZoom(),s=this.getBearing(),u=this.getPitch(),l=this.getPadding(),h="zoom"in t?p(+t.zoom,o.minZoom,o.maxZoom):a,f="bearing"in t?this._normalizeBearing(t.bearing,s):s,d="pitch"in t?+t.pitch:u,_="padding"in t?t.padding:o.padding,g=o.zoomScale(h-a),v=n.convert(t.offset),x=o.centerPoint.add(v),b=o.pointLocation(x),w=Ql.convert(t.center||b);this._normalizeCenter(w);var I=o.project(b),S=o.project(w).sub(I),T=t.curve,A=Math.max(o.width,o.height),z=A/g,E=S.mag();if("minZoom"in t){var k=p(Math.min(t.minZoom,a,h),o.minZoom,o.maxZoom),C=A/o.zoomScale(k-a);T=Math.sqrt(C/E*2)}var P=T*T;function D(t){var e=(z*z-A*A+(t?-1:1)*P*P*E*E)/(2*(t?z:A)*P*E);return Math.log(Math.sqrt(e*e+1)-e)}function M(t){return(Math.exp(t)-Math.exp(-t))/2}function L(t){return(Math.exp(t)+Math.exp(-t))/2}var B=D(0),R=function(t){return L(B)/L(B+T*t)},F=function(t){return A*((L(B)*(M(e=B+T*t)/L(e))-M(B))/P)/E;var e},O=(D(1)-B)/T;if(Math.abs(E)<1e-6||!isFinite(O)){if(Math.abs(A-z)<1e-6)return this.easeTo(t,e);var V=z<A?-1:1;O=Math.abs(Math.log(z/A))/T,F=function(){return 0},R=function(t){return Math.exp(V*T*t)}}return t.duration="duration"in t?+t.duration:1e3*O/("screenSpeed"in t?+t.screenSpeed/T:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=s!==f,this._pitching=d!==u,this._padding=!o.isPaddingEqual(_),this._prepareEase(e,!1),this._ease((function(t){var r=t*O,n=1/R(r);o.zoom=1===t?h:a+o.scaleZoom(n),i._rotating&&(o.bearing=oi(s,f,t)),i._pitching&&(o.pitch=oi(u,d,t)),i._padding&&(o.interpolatePadding(l,_,t),x=o.centerPoint.add(v));var c=1===t?w:o.unproject(I.add(S.mult(F(r))).mult(n));o.setLocationAtPoint(o.renderWorldCopies?c.wrap():c,x),i._fireMoveEvents(e)}),(function(){return i._afterEase(e)}),t),this},e.prototype.isEasing=function(){return!!this._easeFrameId},e.prototype.stop=function(){return this._stop()},e.prototype._stop=function(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var i=this._onEaseEnd;delete this._onEaseEnd,i.call(this,e)}if(!t){var r=this.handlers;r&&r.stop(!1)}return this},e.prototype._ease=function(t,e,i){!1===i.animate||0===i.duration?(t(1),e()):(this._easeStart=U.now(),this._easeOptions=i,this._onEaseFrame=t,this._onEaseEnd=e,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},e.prototype._renderFrameCallback=function(){var t=Math.min((U.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},e.prototype._normalizeBearing=function(t,e){t=h(t,-180,180);var i=Math.abs(t-e);return Math.abs(t-360-e)<i&&(t-=360),Math.abs(t+360-e)<i&&(t+=360),t},e.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var i=t.lng-e.center.lng;t.lng+=i>180?-360:i<-180?360:0}},e}(qt),dm=function(t){void 0===t&&(t={}),this.options=t,b(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};dm.prototype.getDefaultPosition=function(){return"bottom-right"},dm.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=j.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=j.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},dm.prototype.onRemove=function(){j.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},dm.prototype._setElementTitle=function(t,e){var i=this._map._getUIString("AttributionControl."+e);t.title=i,t.setAttribute("aria-label",i)},dm.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},dm.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var e=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||Q.ACCESS_TOKEN}];if(t){var i=e.reduce((function(t,i,r){return i.value&&(t+=i.key+"="+i.value+(r<e.length-1?"&":"")),t}),"?");t.href=Q.FEEDBACK_URL+"/"+i+(this._map._hash?this._map._hash.getHashString(!0):""),t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}},dm.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},dm.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((function(t){return"string"!=typeof t?"":t}))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var i=this._map.style.sourceCaches;for(var r in i){var n=i[r];if(n.used){var o=n.getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution)}}t.sort((function(t,e){return t.length-e.length}));var a=(t=t.filter((function(e,i){for(var r=i+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0}))).join(" | ");a!==this._attribHTML&&(this._attribHTML=a,t.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},dm.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var mm=function(){b(["_updateLogo"],this),b(["_updateCompact"],this)};mm.prototype.onAdd=function(t){this._map=t,this._container=j.create("div","mapboxgl-ctrl");var e=j.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},mm.prototype.onRemove=function(){j.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},mm.prototype.getDefaultPosition=function(){return"bottom-left"},mm.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},mm.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},mm.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var ym=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ym.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},ym.prototype.remove=function(t){for(var e=this._currentlyRunning,i=0,r=e?this._queue.concat(e):this._queue;i<r.length;i+=1){var n=r[i];if(n.id===t)return void(n.cancelled=!0)}},ym.prototype.run=function(t){void 0===t&&(t=0);var e=this._currentlyRunning=this._queue;this._queue=[];for(var i=0,r=e;i<r.length;i+=1){var n=r[i];if(!n.cancelled&&(n.callback(t),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ym.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var _m={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},gm=a.HTMLImageElement,vm=a.HTMLElement,xm=a.ImageBitmap,bm={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},wm=function(t){function i(e){var i=this;if(null!=(e=m({},bm,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var r=new gd(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies);if(t.call(this,r,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new ym,this._controls=[],this._mapId=g(),this._locale=m({},_m,e.locale),this._clickTolerance=e.clickTolerance,this._requestManager=new nt(e.transformRequest,e.accessToken),"string"==typeof e.container){if(this._container=a.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof vm))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),b(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return i._update(!1)})),this.on("moveend",(function(){return i._update(!1)})),this.on("zoom",(function(){return i._update(!0)})),void 0!==a&&(a.addEventListener("online",this._onWindowOnline,!1),a.addEventListener("resize",this._onWindowResize,!1),a.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new hm(this,e),this._hash=e.hash&&new xd("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,m({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new dm({customAttribution:e.customAttribution})),this.addControl(new mm,e.logoPosition),this.on("style.load",(function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet)})),this.on("data",(function(t){i._update("style"===t.dataType),i.fire(new jt(t.dataType+"data",t))})),this.on("dataloading",(function(t){i.fire(new jt(t.dataType+"dataloading",t))}))}t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i;var r={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return i.prototype._getMapId=function(){return this._mapId},i.prototype.addControl=function(t,e){if(void 0===e&&(e=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new Nt(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var i=t.onAdd(this);this._controls.push(t);var r=this._controlPositions[e];return-1!==e.indexOf("bottom")?r.insertBefore(i,r.firstChild):r.appendChild(i),this},i.prototype.removeControl=function(t){if(!t||!t.onRemove)return this.fire(new Nt(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var e=this._controls.indexOf(t);return e>-1&&this._controls.splice(e,1),t.onRemove(this),this},i.prototype.hasControl=function(t){return this._controls.indexOf(t)>-1},i.prototype.resize=function(t){var e=this._containerDimensions(),i=e[0],r=e[1];this._resizeCanvas(i,r),this.transform.resize(i,r),this.painter.resize(i,r);var n=!this._moving;return n&&(this.stop(),this.fire(new jt("movestart",t)).fire(new jt("move",t))),this.fire(new jt("resize",t)),n&&this.fire(new jt("moveend",t)),this},i.prototype.getBounds=function(){return this.transform.getBounds()},i.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},i.prototype.setMaxBounds=function(t){return this.transform.setMaxBounds(Jl.convert(t)),this._update()},i.prototype.setMinZoom=function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},i.prototype.getMinZoom=function(){return this.transform.minZoom},i.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},i.prototype.getMaxZoom=function(){return this.transform.maxZoom},i.prototype.setMinPitch=function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},i.prototype.getMinPitch=function(){return this.transform.minPitch},i.prototype.setMaxPitch=function(t){if((t=null==t?60:t)>60)throw new Error("maxPitch must be less than or equal to 60");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")},i.prototype.getMaxPitch=function(){return this.transform.maxPitch},i.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},i.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},i.prototype.project=function(t){return this.transform.locationPoint(Ql.convert(t))},i.prototype.unproject=function(t){return this.transform.pointLocation(n.convert(t))},i.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},i.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},i.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},i.prototype._createDelegatedListener=function(t,e,i){var r,n=this;if("mouseenter"===t||"mouseover"===t){var o=!1;return{layer:e,listener:i,delegates:{mousemove:function(r){var a=n.getLayer(e)?n.queryRenderedFeatures(r.point,{layers:[e]}):[];a.length?o||(o=!0,i.call(n,new kd(t,n,r.originalEvent,{features:a}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:e,listener:i,delegates:{mousemove:function(r){(n.getLayer(e)?n.queryRenderedFeatures(r.point,{layers:[e]}):[]).length?a=!0:a&&(a=!1,i.call(n,new kd(t,n,r.originalEvent)))},mouseout:function(e){a&&(a=!1,i.call(n,new kd(t,n,e.originalEvent)))}}}}return{layer:e,listener:i,delegates:(r={},r[t]=function(t){var r=n.getLayer(e)?n.queryRenderedFeatures(t.point,{layers:[e]}):[];r.length&&(t.features=r,i.call(n,t),delete t.features)},r)}},i.prototype.on=function(e,i,r){if(void 0===r)return t.prototype.on.call(this,e,i);var n=this._createDelegatedListener(e,i,r);for(var o in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(n),n.delegates)this.on(o,n.delegates[o]);return this},i.prototype.once=function(e,i,r){if(void 0===r)return t.prototype.once.call(this,e,i);var n=this._createDelegatedListener(e,i,r);for(var o in n.delegates)this.once(o,n.delegates[o]);return this},i.prototype.off=function(e,i,r){var n=this;return void 0===r?t.prototype.off.call(this,e,i):(this._delegatedListeners&&this._delegatedListeners[e]&&function(t){for(var o=t[e],a=0;a<o.length;a++){var s=o[a];if(s.layer===i&&s.listener===r){for(var u in s.delegates)n.off(u,s.delegates[u]);return o.splice(a,1),n}}}(this._delegatedListeners),this)},i.prototype.queryRenderedFeatures=function(t,e){if(!this.style)return[];var i;if(void 0!==e||void 0===t||t instanceof n||Array.isArray(t)||(e=t,t=void 0),e=e||{},(t=t||[[0,0],[this.transform.width,this.transform.height]])instanceof n||"number"==typeof t[0])i=[n.convert(t)];else{var r=n.convert(t[0]),o=n.convert(t[1]);i=[r,new n(o.x,r.y),o,new n(r.x,o.y),r]}return this.style.queryRenderedFeatures(i,e,this.transform)},i.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},i.prototype.setStyle=function(t,e){return!1!==(e=m({},{localIdeographFontFamily:this._localIdeographFontFamily},e)).diff&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&t?(this._diffStyle(t,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(t,e))},i.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '"+t+"'");return e},i.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new Oh(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},i.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Oh(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},i.prototype._diffStyle=function(t,e){var i=this;if("string"==typeof t){var r=this._requestManager.normalizeStyleURL(t),n=this._requestManager.transformRequest(r,Et.Style);Lt(n,(function(t,r){t?i.fire(new Nt(t)):r&&i._updateDiff(r,e)}))}else"object"==typeof t&&this._updateDiff(t,e)},i.prototype._updateDiff=function(t,e){try{this.style.setState(t)&&this._update(!0)}catch(i){z("Unable to perform style diff: "+(i.message||i.error||i)+".  Rebuilding the style from scratch."),this._updateStyle(t,e)}},i.prototype.getStyle=function(){if(this.style)return this.style.serialize()},i.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():z("There is no style added to the map.")},i.prototype.addSource=function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)},i.prototype.isSourceLoaded=function(t){var e=this.style&&this.style.sourceCaches[t];if(void 0!==e)return e.loaded();this.fire(new Nt(new Error("There is no source with ID '"+t+"'")))},i.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var i=t[e]._tiles;for(var r in i){var n=i[r];if("loaded"!==n.state&&"errored"!==n.state)return!1}}return!0},i.prototype.addSourceType=function(t,e,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,i)},i.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},i.prototype.getSource=function(t){return this.style.getSource(t)},i.prototype.addImage=function(t,e,i){void 0===i&&(i={});var r=i.pixelRatio;void 0===r&&(r=1);var n=i.sdf;void 0===n&&(n=!1);var o=i.stretchX,a=i.stretchY,s=i.content;if(this._lazyInitEmptyStyle(),e instanceof gm||xm&&e instanceof xm){var u=U.getImageData(e);this.style.addImage(t,{data:new Ya({width:u.width,height:u.height},u.data),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:n,version:0})}else{if(void 0===e.width||void 0===e.height)return this.fire(new Nt(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var l=e;this.style.addImage(t,{data:new Ya({width:e.width,height:e.height},new Uint8Array(e.data)),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:n,version:0,userImage:l}),l.onAdd&&l.onAdd(this,t)}},i.prototype.updateImage=function(t,e){var i=this.style.getImage(t);if(!i)return this.fire(new Nt(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var r=e instanceof gm||xm&&e instanceof xm?U.getImageData(e):e,n=r.width,o=r.height,a=r.data;return void 0===n||void 0===o?this.fire(new Nt(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):n!==i.data.width||o!==i.data.height?this.fire(new Nt(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(i.data.replace(a,!(e instanceof gm||xm&&e instanceof xm)),void this.style.updateImage(t,i))},i.prototype.hasImage=function(t){return t?!!this.style.getImage(t):(this.fire(new Nt(new Error("Missing required image id"))),!1)},i.prototype.removeImage=function(t){this.style.removeImage(t)},i.prototype.loadImage=function(t,e){Ot(this._requestManager.transformRequest(t,Et.Image),e)},i.prototype.listImages=function(){return this.style.listImages()},i.prototype.addLayer=function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)},i.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},i.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},i.prototype.getLayer=function(t){return this.style.getLayer(t)},i.prototype.setLayerZoomRange=function(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0)},i.prototype.setFilter=function(t,e,i){return void 0===i&&(i={}),this.style.setFilter(t,e,i),this._update(!0)},i.prototype.getFilter=function(t){return this.style.getFilter(t)},i.prototype.setPaintProperty=function(t,e,i,r){return void 0===r&&(r={}),this.style.setPaintProperty(t,e,i,r),this._update(!0)},i.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},i.prototype.setLayoutProperty=function(t,e,i,r){return void 0===r&&(r={}),this.style.setLayoutProperty(t,e,i,r),this._update(!0)},i.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},i.prototype.setLight=function(t,e){return void 0===e&&(e={}),this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)},i.prototype.getLight=function(){return this.style.getLight()},i.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},i.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},i.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},i.prototype.getContainer=function(){return this._container},i.prototype.getCanvasContainer=function(){return this._canvasContainer},i.prototype.getCanvas=function(){return this._canvas},i.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},i.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==a.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&z("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},i.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=j.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=j.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=j.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var i=this._containerDimensions();this._resizeCanvas(i[0],i[1]);var r=this._controlContainer=j.create("div","mapboxgl-control-container",t),n=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(t){n[t]=j.create("div","mapboxgl-ctrl-"+t,r)})),this._container.addEventListener("scroll",this._onMapScroll,!1)},i.prototype._resizeCanvas=function(t,e){var i=U.devicePixelRatio||1;this._canvas.width=i*t,this._canvas.height=i*e,this._canvas.style.width=t+"px",this._canvas.style.height=e+"px"},i.prototype._setupPainter=function(){var t=m({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);i?(this.painter=new dd(i,this.transform),$.testSupport(i)):this.fire(new Nt(new Error("Failed to initialize WebGL")))},i.prototype._contextLost=function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new jt("webglcontextlost",{originalEvent:t}))},i.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new jt("webglcontextrestored",{originalEvent:t}))},i.prototype._onMapScroll=function(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},i.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},i.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},i.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},i.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},i.prototype._render=function(t){var e,i=this,r=0,n=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(e=n.createQueryEXT(),n.beginQueryEXT(n.TIME_ELAPSED_EXT,e),r=U.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),!this._removed){var o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var a=this.transform.zoom,s=U.now();this.style.zoomHistory.update(a,s);var u=new kn(a,{now:s,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),l=u.crossFadingFactor();1===l&&l===this._crossFadingFactor||(o=!0,this._crossFadingFactor=l),this.style.update(u)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new jt("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new jt("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var c=U.now()-r;n.endQueryEXT(n.TIME_ELAPSED_EXT,e),setTimeout((function(){var t=n.getQueryObjectEXT(e,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(e),i.fire(new jt("gpu-timing-frame",{cpuTime:c,gpuTime:t}))}),50)}if(this.listens("gpu-timing-layer")){var p=this.painter.collectGpuTimers();setTimeout((function(){var t=i.painter.queryGpuTimers(p);i.fire(new jt("gpu-timing-layer",{layerTimes:t}))}),50)}var h=this._sourcesDirty||this._styleDirty||this._placementDirty;return h||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new jt("idle")),!this._loaded||this._fullyLoaded||h||(this._fullyLoaded=!0),this}},i.prototype.remove=function(){this._hash&&this._hash.remove();for(var t=0,e=this._controls;t<e.length;t+=1)e[t].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==a&&(a.removeEventListener("resize",this._onWindowResize,!1),a.removeEventListener("orientationchange",this._onWindowResize,!1),a.removeEventListener("online",this._onWindowOnline,!1));var i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),Im(this._canvasContainer),Im(this._controlContainer),Im(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new jt("remove"))},i.prototype.triggerRepaint=function(){var t=this;this.style&&!this._frame&&(this._frame=U.frame((function(e){t._frame=null,t._render(e)})))},i.prototype._onWindowOnline=function(){this._update()},i.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},r.showTileBoundaries.get=function(){return!!this._showTileBoundaries},r.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},r.showPadding.get=function(){return!!this._showPadding},r.showPadding.set=function(t){this._showPadding!==t&&(this._showPadding=t,this._update())},r.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},r.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},r.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},r.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},r.repaint.get=function(){return!!this._repaint},r.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},r.vertices.get=function(){return!!this._vertices},r.vertices.set=function(t){this._vertices=t,this._update()},i.prototype._setCacheLimits=function(t,e){!function(t,e){xt=t,bt=e}(t,e)},r.version.get=function(){return"1.13.1"},Object.defineProperties(i.prototype,r),i}(fm);function Im(t){t.parentNode&&t.parentNode.removeChild(t)}var Sm={showCompass:!0,showZoom:!0,visualizePitch:!1},Tm=function(t){var e=this;this.options=m({},Sm,t),this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.options.showZoom&&(b(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(t){return e._map.zoomIn({},{originalEvent:t})})),j.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(t){return e._map.zoomOut({},{originalEvent:t})})),j.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(b(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(t){e.options.visualizePitch?e._map.resetNorthPitch({},{originalEvent:t}):e._map.resetNorth({},{originalEvent:t})})),this._compassIcon=j.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Tm.prototype._updateZoomButtons=function(){var t=this._map.getZoom(),e=t===this._map.getMaxZoom(),i=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString())},Tm.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t},Tm.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Am(this._map,this._compass,this.options.visualizePitch)),this._container},Tm.prototype.onRemove=function(){j.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Tm.prototype._createButton=function(t,e){var i=j.create("button",t,this._container);return i.type="button",i.addEventListener("click",e),i},Tm.prototype._setButtonTitle=function(t,e){var i=this._map._getUIString("NavigationControl."+e);t.title=i,t.setAttribute("aria-label",i)};var Am=function(t,e,i){void 0===i&&(i=!1),this._clickTolerance=10,this.element=e,this.mouseRotate=new Nd({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,i&&(this.mousePitch=new qd({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),b(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),j.addEventListener(e,"mousedown",this.mousedown),j.addEventListener(e,"touchstart",this.touchstart,{passive:!1}),j.addEventListener(e,"touchmove",this.touchmove),j.addEventListener(e,"touchend",this.touchend),j.addEventListener(e,"touchcancel",this.reset)};function zm(t,e,i){if(t=new Ql(t.lng,t.lat),e){var r=new Ql(t.lng-360,t.lat),n=new Ql(t.lng+360,t.lat),o=i.locationPoint(t).distSqr(e);i.locationPoint(r).distSqr(e)<o?t=r:i.locationPoint(n).distSqr(e)<o&&(t=n)}for(;Math.abs(t.lng-i.center.lng)>180;){var a=i.locationPoint(t);if(a.x>=0&&a.y>=0&&a.x<=i.width&&a.y<=i.height)break;t.lng>i.center.lng?t.lng-=360:t.lng+=360}return t}Am.prototype.down=function(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),j.disableDrag()},Am.prototype.move=function(t,e){var i=this.map,r=this.mouseRotate.mousemoveWindow(t,e);if(r&&r.bearingDelta&&i.setBearing(i.getBearing()+r.bearingDelta),this.mousePitch){var n=this.mousePitch.mousemoveWindow(t,e);n&&n.pitchDelta&&i.setPitch(i.getPitch()+n.pitchDelta)}},Am.prototype.off=function(){var t=this.element;j.removeEventListener(t,"mousedown",this.mousedown),j.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),j.removeEventListener(t,"touchmove",this.touchmove),j.removeEventListener(t,"touchend",this.touchend),j.removeEventListener(t,"touchcancel",this.reset),this.offTemp()},Am.prototype.offTemp=function(){j.enableDrag(),j.removeEventListener(a,"mousemove",this.mousemove),j.removeEventListener(a,"mouseup",this.mouseup)},Am.prototype.mousedown=function(t){this.down(m({},t,{ctrlKey:!0,preventDefault:function(){return t.preventDefault()}}),j.mousePos(this.element,t)),j.addEventListener(a,"mousemove",this.mousemove),j.addEventListener(a,"mouseup",this.mouseup)},Am.prototype.mousemove=function(t){this.move(t,j.mousePos(this.element,t))},Am.prototype.mouseup=function(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()},Am.prototype.touchstart=function(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=j.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return t.preventDefault()}},this._startPos))},Am.prototype.touchmove=function(t){1!==t.targetTouches.length?this.reset():(this._lastPos=j.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:function(){return t.preventDefault()}},this._lastPos))},Am.prototype.touchend=function(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Am.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Em={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function km(t,e,i){var r=t.classList;for(var n in Em)r.remove("mapboxgl-"+i+"-anchor-"+n);r.add("mapboxgl-"+i+"-anchor-"+e)}var Cm,Pm=function(t){function e(e,i){if(t.call(this),(e instanceof a.HTMLElement||i)&&(e=m({element:e},i)),b(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,e&&e.element)this._element=e.element,this._offset=n.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=j.create("div"),this._element.setAttribute("aria-label","Map marker");var r=j.createNS("http://www.w3.org/2000/svg","svg");r.setAttributeNS(null,"display","block"),r.setAttributeNS(null,"height","41px"),r.setAttributeNS(null,"width","27px"),r.setAttributeNS(null,"viewBox","0 0 27 41");var o=j.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");var s=j.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");var u=j.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"transform","translate(3.0, 29.0)"),u.setAttributeNS(null,"fill","#000000");for(var l=0,c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];l<c.length;l+=1){var p=c[l],h=j.createNS("http://www.w3.org/2000/svg","ellipse");h.setAttributeNS(null,"opacity","0.04"),h.setAttributeNS(null,"cx","10.5"),h.setAttributeNS(null,"cy","5.80029008"),h.setAttributeNS(null,"rx",p.rx),h.setAttributeNS(null,"ry",p.ry),u.appendChild(h)}var f=j.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"fill",this._color);var d=j.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),f.appendChild(d);var y=j.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"opacity","0.25"),y.setAttributeNS(null,"fill","#000000");var _=j.createNS("http://www.w3.org/2000/svg","path");_.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),y.appendChild(_);var g=j.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(6.0, 7.0)"),g.setAttributeNS(null,"fill","#FFFFFF");var v=j.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(8.0, 8.0)");var x=j.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#000000"),x.setAttributeNS(null,"opacity","0.25"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962");var w=j.createNS("http://www.w3.org/2000/svg","circle");w.setAttributeNS(null,"fill","#FFFFFF"),w.setAttributeNS(null,"cx","5.5"),w.setAttributeNS(null,"cy","5.5"),w.setAttributeNS(null,"r","5.4999962"),v.appendChild(x),v.appendChild(w),s.appendChild(u),s.appendChild(f),s.appendChild(y),s.appendChild(g),s.appendChild(v),r.appendChild(s),r.setAttributeNS(null,"height",41*this._scale+"px"),r.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(r),this._offset=n.convert(e&&e.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(t){t.preventDefault()})),this._element.addEventListener("mousedown",(function(t){t.preventDefault()})),km(this._element,this._anchor,"marker"),this._popup=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},e.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),j.remove(this._element),this._popup&&this._popup.remove(),this},e.prototype.getLngLat=function(){return this._lngLat},e.prototype.setLngLat=function(t){return this._lngLat=Ql.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},e.prototype.getElement=function(){return this._element},e.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},e.prototype._onKeyPress=function(t){var e=t.code,i=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==i&&13!==i||this.togglePopup()},e.prototype._onMapClick=function(t){var e=t.originalEvent.target,i=this._element;this._popup&&(e===i||i.contains(e))&&this.togglePopup()},e.prototype.getPopup=function(){return this._popup},e.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},e.prototype._update=function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=zm(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var i="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?i="rotateX(0deg)":"map"===this._pitchAlignment&&(i="rotateX("+this._map.getPitch()+"deg)"),t&&"moveend"!==t.type||(this._pos=this._pos.round()),j.setTransform(this._element,Em[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+i+" "+e)}},e.prototype.getOffset=function(){return this._offset},e.prototype.setOffset=function(t){return this._offset=n.convert(t),this._update(),this},e.prototype._onMove=function(t){if(!this._isDragging){var e=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=e}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new jt("dragstart"))),this.fire(new jt("drag")))},e.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new jt("dragend")),this._state="inactive"},e.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},e.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},e.prototype.isDraggable=function(){return this._draggable},e.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},e.prototype.getRotation=function(){return this._rotation},e.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},e.prototype.getRotationAlignment=function(){return this._rotationAlignment},e.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},e.prototype.getPitchAlignment=function(){return this._pitchAlignment},e}(qt),Dm={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Mm=0,Lm=!1,Bm=function(t){function e(e){t.call(this),this.options=m({},Dm,e),b(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.onAdd=function(t){var e;return this._map=t,this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),e=this._setupUI,void 0!==Cm?e(Cm):void 0!==a.navigator.permissions?a.navigator.permissions.query({name:"geolocation"}).then((function(t){e(Cm="denied"!==t.state)})):e(Cm=!!a.navigator.geolocation),this._container},e.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(a.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),j.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Mm=0,Lm=!1},e.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),i=t.coords;return e&&(i.longitude<e.getWest()||i.longitude>e.getEast()||i.latitude<e.getSouth()||i.latitude>e.getNorth())},e.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},e.prototype._onSuccess=function(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new jt("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new jt("geolocate",t)),this._finish()}},e.prototype._updateCamera=function(t){var e=new Ql(t.coords.longitude,t.coords.latitude),i=t.coords.accuracy,r=m({bearing:this._map.getBearing()},this.options.fitBoundsOptions);this._map.fitBounds(e.toBounds(i),r,{geolocateSource:!0})},e.prototype._updateMarker=function(t){if(t){var e=new Ql(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(e).addTo(this._map),this._userLocationDotMarker.setLngLat(e).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},e.prototype._updateCircleRadius=function(){var t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),i=this._map.unproject([1,t]),r=e.distanceTo(i),n=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=n+"px",this._circleElement.style.height=n+"px"},e.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},e.prototype._onError=function(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&Lm)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new jt("error",t)),this._finish()}},e.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},e.prototype._setupUI=function(t){var e=this;if(this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this._geolocateButton=j.create("button","mapboxgl-ctrl-geolocate",this._container),j.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===t){z("Geolocation support is not available so the GeolocateControl will be disabled.");var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{var r=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=j.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Pm(this._dotElement),this._circleElement=j.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Pm({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(t){t.geolocateSource||"ACTIVE_LOCK"!==e._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(e._watchState="BACKGROUND",e._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),e._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),e.fire(new jt("trackuserlocationend")))}))},e.prototype.trigger=function(){if(!this._setup)return z("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new jt("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Mm--,Lm=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new jt("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new jt("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Mm>1?(t={maximumAge:6e5,timeout:0},Lm=!0):(t=this.options.positionOptions,Lm=!1),this._geolocationWatchID=a.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}else a.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},e.prototype._clearWatch=function(){a.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},e}(qt),Rm={maxWidth:100,unit:"metric"},Fm=function(t){this.options=m({},Rm,t),b(["_onMove","setUnit"],this)};function Om(t,e,i){var r=i&&i.maxWidth||100,n=t._container.clientHeight/2,o=t.unproject([0,n]),a=t.unproject([r,n]),s=o.distanceTo(a);if(i&&"imperial"===i.unit){var u=3.2808*s;u>5280?Vm(e,r,u/5280,t._getUIString("ScaleControl.Miles")):Vm(e,r,u,t._getUIString("ScaleControl.Feet"))}else i&&"nautical"===i.unit?Vm(e,r,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?Vm(e,r,s/1e3,t._getUIString("ScaleControl.Kilometers")):Vm(e,r,s,t._getUIString("ScaleControl.Meters"))}function Vm(t,e,i,r){var n,o,a,s=(n=i,(o=Math.pow(10,(""+Math.floor(n)).length-1))*(a=(a=n/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(a)));t.style.width=e*(s/i)+"px",t.innerHTML=s+"&nbsp;"+r}Fm.prototype.getDefaultPosition=function(){return"bottom-left"},Fm.prototype._onMove=function(){Om(this._map,this._container,this.options)},Fm.prototype.onAdd=function(t){return this._map=t,this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Fm.prototype.onRemove=function(){j.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Fm.prototype.setUnit=function(t){this.options.unit=t,Om(this._map,this._container,this.options)};var Um=function(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof a.HTMLElement?this._container=t.container:z("Full screen control 'container' must be a DOM element.")),b(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.document&&(this._fullscreenchange="MSFullscreenChange")};Um.prototype.onAdd=function(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",z("This device does not support fullscreen mode.")),this._controlContainer},Um.prototype.onRemove=function(){j.remove(this._controlContainer),this._map=null,a.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Um.prototype._checkFullscreenSupport=function(){return!!(a.document.fullscreenEnabled||a.document.mozFullScreenEnabled||a.document.msFullscreenEnabled||a.document.webkitFullscreenEnabled)},Um.prototype._setupUI=function(){var t=this._fullscreenButton=j.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);j.create("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden",!0),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.document.addEventListener(this._fullscreenchange,this._changeIcon)},Um.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},Um.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Um.prototype._isFullscreen=function(){return this._fullscreen},Um.prototype._changeIcon=function(){(a.document.fullscreenElement||a.document.mozFullScreenElement||a.document.webkitFullscreenElement||a.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Um.prototype._onClickFullscreen=function(){this._isFullscreen()?a.document.exitFullscreen?a.document.exitFullscreen():a.document.mozCancelFullScreen?a.document.mozCancelFullScreen():a.document.msExitFullscreen?a.document.msExitFullscreen():a.document.webkitCancelFullScreen&&a.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var jm={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Nm=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),qm=function(t){function e(e){t.call(this),this.options=m(Object.create(jm),e),b(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.addTo=function(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new jt("open")),this},e.prototype.isOpen=function(){return!!this._map},e.prototype.remove=function(){return this._content&&j.remove(this._content),this._container&&(j.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new jt("close")),this},e.prototype.getLngLat=function(){return this._lngLat},e.prototype.setLngLat=function(t){return this._lngLat=Ql.convert(t),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},e.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},e.prototype.getElement=function(){return this._container},e.prototype.setText=function(t){return this.setDOMContent(a.document.createTextNode(t))},e.prototype.setHTML=function(t){var e,i=a.document.createDocumentFragment(),r=a.document.createElement("body");for(r.innerHTML=t;e=r.firstChild;)i.appendChild(e);return this.setDOMContent(i)},e.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},e.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},e.prototype.setDOMContent=function(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=j.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this},e.prototype.addClassName=function(t){this._container&&this._container.classList.add(t)},e.prototype.removeClassName=function(t){this._container&&this._container.classList.remove(t)},e.prototype.setOffset=function(t){return this.options.offset=t,this._update(),this},e.prototype.toggleClassName=function(t){if(this._container)return this._container.classList.toggle(t)},e.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=j.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},e.prototype._onMouseUp=function(t){this._update(t.point)},e.prototype._onMouseMove=function(t){this._update(t.point)},e.prototype._onDrag=function(t){this._update(t.point)},e.prototype._update=function(t){var e=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=j.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=j.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(t){return e._container.classList.add(t)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=zm(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||t)){var i=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat),r=this.options.anchor,o=function t(e){if(e){if("number"==typeof e){var i=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new n(0,0),top:new n(0,e),"top-left":new n(i,i),"top-right":new n(-i,i),bottom:new n(0,-e),"bottom-left":new n(i,-i),"bottom-right":new n(-i,-i),left:new n(e,0),right:new n(-e,0)}}if(e instanceof n||Array.isArray(e)){var r=n.convert(e);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:n.convert(e.center||[0,0]),top:n.convert(e.top||[0,0]),"top-left":n.convert(e["top-left"]||[0,0]),"top-right":n.convert(e["top-right"]||[0,0]),bottom:n.convert(e.bottom||[0,0]),"bottom-left":n.convert(e["bottom-left"]||[0,0]),"bottom-right":n.convert(e["bottom-right"]||[0,0]),left:n.convert(e.left||[0,0]),right:n.convert(e.right||[0,0])}}return t(new n(0,0))}(this.options.offset);if(!r){var a,s=this._container.offsetWidth,u=this._container.offsetHeight;a=i.y+o.bottom.y<u?["top"]:i.y>this._map.transform.height-u?["bottom"]:[],i.x<s/2?a.push("left"):i.x>this._map.transform.width-s/2&&a.push("right"),r=0===a.length?"bottom":a.join("-")}var l=i.add(o[r]).round();j.setTransform(this._container,Em[r]+" translate("+l.x+"px,"+l.y+"px)"),km(this._container,r,"popup")}},e.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var t=this._container.querySelector(Nm);t&&t.focus()}},e.prototype._onClose=function(){this.remove()},e}(qt),Zm={version:"1.13.1",supported:e,setRTLTextPlugin:function(t,e,i){if(void 0===i&&(i=!1),"deferred"===bn||"loading"===bn||"loaded"===bn)throw new Error("setRTLTextPlugin cannot be called multiple times.");wn=U.resolveURL(t),bn="deferred",xn=e,Sn(),i||zn()},getRTLTextPluginStatus:An,Map:wm,NavigationControl:Tm,GeolocateControl:Bm,AttributionControl:dm,ScaleControl:Fm,FullscreenControl:Um,Popup:qm,Marker:Pm,Style:Oh,LngLat:Ql,LngLatBounds:Jl,Point:n,MercatorCoordinate:oc,Evented:qt,config:Q,prewarm:function(){Mp().acquire(kp)},clearPrewarmedResources:function(){var t=Pp;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(kp),Pp=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return Q.ACCESS_TOKEN},set accessToken(t){Q.ACCESS_TOKEN=t},get baseApiUrl(){return Q.API_URL},set baseApiUrl(t){Q.API_URL=t},get workerCount(){return Cp.workerCount},set workerCount(t){Cp.workerCount=t},get maxParallelImageRequests(){return Q.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){Q.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage:function(t){!function(t){var e=a.caches.delete("mapbox-tiles");t&&e.catch(t).then((function(){return t()}))}(t)},workerUrl:""};return Zm}()},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"f01a207f57de9c098b15d34197acd75c.png"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"40cd439cda90e7f7f4135b4037835e37.png"},function(module,exports,__webpack_require__){var wgs84=__webpack_require__(365);function polygonArea(coords){var area=0;if(coords&&coords.length>0){area+=Math.abs(ringArea(coords[0]));for(var i=1;i<coords.length;i++)area-=Math.abs(ringArea(coords[i]))}return area}function ringArea(coords){var p1,p2,lowerIndex,middleIndex,upperIndex,i,area=0,coordsLength=coords.length;if(coordsLength>2){for(i=0;i<coordsLength;i++)i===coordsLength-2?(lowerIndex=coordsLength-2,middleIndex=coordsLength-1,upperIndex=0):i===coordsLength-1?(lowerIndex=coordsLength-1,middleIndex=0,upperIndex=1):(lowerIndex=i,middleIndex=i+1,upperIndex=i+2),p1=coords[lowerIndex],p2=coords[middleIndex],area+=(rad(coords[upperIndex][0])-rad(p1[0]))*Math.sin(rad(p2[1]));area=area*wgs84.RADIUS*wgs84.RADIUS/2}return area}function rad(_){return _*Math.PI/180}module.exports.geometry=function geometry(_){var i,area=0;switch(_.type){case"Polygon":return polygonArea(_.coordinates);case"MultiPolygon":for(i=0;i<_.coordinates.length;i++)area+=polygonArea(_.coordinates[i]);return area;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(i=0;i<_.geometries.length;i++)area+=geometry(_.geometries[i]);return area}},module.exports.ring=ringArea},function(module,exports){module.exports.RADIUS=6378137,module.exports.FLATTENING=1/298.257223563,module.exports.POLAR_RADIUS=6356752.3142},function(module,exports,__webpack_require__){"use strict";function Point(x,y){this.x=x,this.y=y}module.exports=Point,Point.prototype={clone:function(){return new Point(this.x,this.y)},add:function(p){return this.clone()._add(p)},sub:function(p){return this.clone()._sub(p)},multByPoint:function(p){return this.clone()._multByPoint(p)},divByPoint:function(p){return this.clone()._divByPoint(p)},mult:function(k){return this.clone()._mult(k)},div:function(k){return this.clone()._div(k)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,p){return this.clone()._rotateAround(a,p)},matMult:function(m){return this.clone()._matMult(m)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(other){return this.x===other.x&&this.y===other.y},dist:function(p){return Math.sqrt(this.distSqr(p))},distSqr:function(p){var dx=p.x-this.x,dy=p.y-this.y;return dx*dx+dy*dy},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(b){return Math.atan2(this.y-b.y,this.x-b.x)},angleWith:function(b){return this.angleWithSep(b.x,b.y)},angleWithSep:function(x,y){return Math.atan2(this.x*y-this.y*x,this.x*x+this.y*y)},_matMult:function(m){var x=m[0]*this.x+m[1]*this.y,y=m[2]*this.x+m[3]*this.y;return this.x=x,this.y=y,this},_add:function(p){return this.x+=p.x,this.y+=p.y,this},_sub:function(p){return this.x-=p.x,this.y-=p.y,this},_mult:function(k){return this.x*=k,this.y*=k,this},_div:function(k){return this.x/=k,this.y/=k,this},_multByPoint:function(p){return this.x*=p.x,this.y*=p.y,this},_divByPoint:function(p){return this.x/=p.x,this.y/=p.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var y=this.y;return this.y=this.x,this.x=-y,this},_rotate:function(angle){var cos=Math.cos(angle),sin=Math.sin(angle),x=cos*this.x-sin*this.y,y=sin*this.x+cos*this.y;return this.x=x,this.y=y,this},_rotateAround:function(angle,p){var cos=Math.cos(angle),sin=Math.sin(angle),x=p.x+cos*(this.x-p.x)-sin*(this.y-p.y),y=p.y+sin*(this.x-p.x)+cos*(this.y-p.y);return this.x=x,this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Point.convert=function(a){return a instanceof Point?a:Array.isArray(a)?new Point(a[0],a[1]):a}},function(module,exports,__webpack_require__){var geojsonCoords=__webpack_require__(368),traverse=__webpack_require__(371),extent=__webpack_require__(372),geojsonTypesByDataAttributes={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},dataAttributes=Object.keys(geojsonTypesByDataAttributes);function getExtent(_){for(var ext=extent(),coords=geojsonCoords(_),i=0;i<coords.length;i++)ext.include(coords[i]);return ext}module.exports=function(_){return getExtent(_).bbox()},module.exports.polygon=function(_){return getExtent(_).polygon()},module.exports.bboxify=function(_){return traverse(_).map((function(value){value&&(dataAttributes.some((function(attribute){return!!value[attribute]&&-1!==geojsonTypesByDataAttributes[attribute].indexOf(value.type)}))&&(value.bbox=getExtent(value).bbox(),this.update(value)))}))}},function(module,exports,__webpack_require__){var geojsonNormalize=__webpack_require__(210),geojsonFlatten=__webpack_require__(369),flatten=__webpack_require__(370);module.exports=function(_){if(!_)return[];var normalized=geojsonFlatten(geojsonNormalize(_)),coordinates=[];return normalized.features.forEach((function(feature){feature.geometry&&(coordinates=coordinates.concat(flatten(feature.geometry.coordinates)))})),coordinates}},function(module,exports){module.exports=function e(t){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.reduce((function(t,r){return t.concat(e(r))}),[]),t;case"Feature":return t.geometry?e(t.geometry).map((function(e){var r={type:"Feature",properties:JSON.parse(JSON.stringify(t.properties)),geometry:e};return void 0!==t.id&&(r.id=t.id),r})):t;case"MultiPoint":return t.coordinates.map((function(e){return{type:"Point",coordinates:e}}));case"MultiPolygon":return t.coordinates.map((function(e){return{type:"Polygon",coordinates:e}}));case"MultiLineString":return t.coordinates.map((function(e){return{type:"LineString",coordinates:e}}));case"GeometryCollection":return t.geometries.map(e).reduce((function(e,t){return e.concat(t)}),[]);case"Point":case"Polygon":case"LineString":return[t]}}},function(module,exports){module.exports=function(list){return function _flatten(list){if(Array.isArray(list)&&list.length&&"number"==typeof list[0])return[list];return list.reduce((function(acc,item){return Array.isArray(item)&&Array.isArray(item[0])?acc.concat(_flatten(item)):(acc.push(item),acc)}),[])}(list)}},function(module,exports){var traverse=module.exports=function(obj){return new Traverse(obj)};function Traverse(obj){this.value=obj}function walk(root,cb,immutable){var path=[],parents=[],alive=!0;return function walker(node_){var node=immutable?copy(node_):node_,modifiers={},keepGoing=!0,state={node:node,node_:node_,path:[].concat(path),parent:parents[parents.length-1],parents:parents,key:path.slice(-1)[0],isRoot:0===path.length,level:path.length,circular:null,update:function(x,stopHere){state.isRoot||(state.parent.node[state.key]=x),state.node=x,stopHere&&(keepGoing=!1)},delete:function(stopHere){delete state.parent.node[state.key],stopHere&&(keepGoing=!1)},remove:function(stopHere){isArray(state.parent.node)?state.parent.node.splice(state.key,1):delete state.parent.node[state.key],stopHere&&(keepGoing=!1)},keys:null,before:function(f){modifiers.before=f},after:function(f){modifiers.after=f},pre:function(f){modifiers.pre=f},post:function(f){modifiers.post=f},stop:function(){alive=!1},block:function(){keepGoing=!1}};if(!alive)return state;function updateState(){if("object"==typeof state.node&&null!==state.node){state.keys&&state.node_===state.node||(state.keys=objectKeys(state.node)),state.isLeaf=0==state.keys.length;for(var i=0;i<parents.length;i++)if(parents[i].node_===node_){state.circular=parents[i];break}}else state.isLeaf=!0,state.keys=null;state.notLeaf=!state.isLeaf,state.notRoot=!state.isRoot}updateState();var ret=cb.call(state,state.node);return void 0!==ret&&state.update&&state.update(ret),modifiers.before&&modifiers.before.call(state,state.node),keepGoing?("object"!=typeof state.node||null===state.node||state.circular||(parents.push(state),updateState(),forEach(state.keys,(function(key,i){path.push(key),modifiers.pre&&modifiers.pre.call(state,state.node[key],key);var child=walker(state.node[key]);immutable&&hasOwnProperty.call(state.node,key)&&(state.node[key]=child.node),child.isLast=i==state.keys.length-1,child.isFirst=0==i,modifiers.post&&modifiers.post.call(state,child),path.pop()})),parents.pop()),modifiers.after&&modifiers.after.call(state,state.node),state):state}(root).node}function copy(src){if("object"==typeof src&&null!==src){var dst;if(isArray(src))dst=[];else if("[object Date]"===toS(src))dst=new Date(src.getTime?src.getTime():src);else if(function(obj){return"[object RegExp]"===toS(obj)}(src))dst=new RegExp(src);else if(function(obj){return"[object Error]"===toS(obj)}(src))dst={message:src.message};else if(function(obj){return"[object Boolean]"===toS(obj)}(src))dst=new Boolean(src);else if(function(obj){return"[object Number]"===toS(obj)}(src))dst=new Number(src);else if(function(obj){return"[object String]"===toS(obj)}(src))dst=new String(src);else if(Object.create&&Object.getPrototypeOf)dst=Object.create(Object.getPrototypeOf(src));else if(src.constructor===Object)dst={};else{var proto=src.constructor&&src.constructor.prototype||src.__proto__||{},T=function(){};T.prototype=proto,dst=new T}return forEach(objectKeys(src),(function(key){dst[key]=src[key]})),dst}return src}Traverse.prototype.get=function(ps){for(var node=this.value,i=0;i<ps.length;i++){var key=ps[i];if(!node||!hasOwnProperty.call(node,key)){node=void 0;break}node=node[key]}return node},Traverse.prototype.has=function(ps){for(var node=this.value,i=0;i<ps.length;i++){var key=ps[i];if(!node||!hasOwnProperty.call(node,key))return!1;node=node[key]}return!0},Traverse.prototype.set=function(ps,value){for(var node=this.value,i=0;i<ps.length-1;i++){var key=ps[i];hasOwnProperty.call(node,key)||(node[key]={}),node=node[key]}return node[ps[i]]=value,value},Traverse.prototype.map=function(cb){return walk(this.value,cb,!0)},Traverse.prototype.forEach=function(cb){return this.value=walk(this.value,cb,!1),this.value},Traverse.prototype.reduce=function(cb,init){var skip=1===arguments.length,acc=skip?this.value:init;return this.forEach((function(x){this.isRoot&&skip||(acc=cb.call(this,acc,x))})),acc},Traverse.prototype.paths=function(){var acc=[];return this.forEach((function(x){acc.push(this.path)})),acc},Traverse.prototype.nodes=function(){var acc=[];return this.forEach((function(x){acc.push(this.node)})),acc},Traverse.prototype.clone=function(){var parents=[],nodes=[];return function clone(src){for(var i=0;i<parents.length;i++)if(parents[i]===src)return nodes[i];if("object"==typeof src&&null!==src){var dst=copy(src);return parents.push(src),nodes.push(dst),forEach(objectKeys(src),(function(key){dst[key]=clone(src[key])})),parents.pop(),nodes.pop(),dst}return src}(this.value)};var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj)res.push(key);return res};function toS(obj){return Object.prototype.toString.call(obj)}var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)},forEach=function(xs,fn){if(xs.forEach)return xs.forEach(fn);for(var i=0;i<xs.length;i++)fn(xs[i],i,xs)};forEach(objectKeys(Traverse.prototype),(function(key){traverse[key]=function(obj){var args=[].slice.call(arguments,1),t=new Traverse(obj);return t[key].apply(t,args)}}));var hasOwnProperty=Object.hasOwnProperty||function(obj,key){return key in obj}},function(module,exports){function Extent(bbox){if(!(this instanceof Extent))return new Extent(bbox);this._bbox=bbox||[1/0,1/0,-1/0,-1/0],this._valid=!!bbox}module.exports=Extent,Extent.prototype.include=function(ll){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],ll[0]),this._bbox[1]=Math.min(this._bbox[1],ll[1]),this._bbox[2]=Math.max(this._bbox[2],ll[0]),this._bbox[3]=Math.max(this._bbox[3],ll[1]),this},Extent.prototype.equals=function(_){var other;return other=_ instanceof Extent?_.bbox():_,this._bbox[0]==other[0]&&this._bbox[1]==other[1]&&this._bbox[2]==other[2]&&this._bbox[3]==other[3]},Extent.prototype.center=function(_){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Extent.prototype.union=function(_){var other;return this._valid=!0,other=_ instanceof Extent?_.bbox():_,this._bbox[0]=Math.min(this._bbox[0],other[0]),this._bbox[1]=Math.min(this._bbox[1],other[1]),this._bbox[2]=Math.max(this._bbox[2],other[2]),this._bbox[3]=Math.max(this._bbox[3],other[3]),this},Extent.prototype.bbox=function(){return this._valid?this._bbox:null},Extent.prototype.contains=function(ll){if(!ll)return this._fastContains();if(!this._valid)return null;var lon=ll[0],lat=ll[1];return this._bbox[0]<=lon&&this._bbox[1]<=lat&&this._bbox[2]>=lon&&this._bbox[3]>=lat},Extent.prototype.intersect=function(_){return this._valid?(other=_ instanceof Extent?_.bbox():_,!(this._bbox[0]>other[2]||this._bbox[2]<other[0]||this._bbox[3]<other[1]||this._bbox[1]>other[3])):null;var other},Extent.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var body="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",body)},Extent.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null}},function(module,exports,__webpack_require__){(function(global,module){var argsTag="[object Arguments]",mapTag="[object Map]",objectTag="[object Object]",setTag="[object Set]",reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags[argsTag]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags["[object Function]"]=typedArrayTags[mapTag]=typedArrayTags["[object Number]"]=typedArrayTags[objectTag]=typedArrayTags["[object RegExp]"]=typedArrayTags[setTag]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1;var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function arraySome(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach((function(value,key){result[++index]=[key,value]})),result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach((function(value){result[++index]=value})),result}var uid,func,transform,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",nativeObjectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?root.Buffer:void 0,Symbol=root.Symbol,Uint8Array=root.Uint8Array,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,symToStringTag=Symbol?Symbol.toStringTag:void 0,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,nativeKeys=(func=Object.keys,transform=Object,function(arg){return func(transform(arg))}),DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseGetTag(value){return null==value?void 0===value?"[object Undefined]":"[object Null]":symToStringTag&&symToStringTag in Object(value)?function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]);return result}(value):function(value){return nativeObjectToString.call(value)}(value)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:function(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?"[object Array]":getTag(object),othTag=othIsArr?"[object Array]":getTag(other),objIsObj=(objTag=objTag==argsTag?objectTag:objTag)==objectTag,othIsObj=(othTag=othTag==argsTag?objectTag:othTag)==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):function(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case"[object DataView]":if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case"[object ArrayBuffer]":return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case"[object Boolean]":case"[object Date]":case"[object Number]":return eq(+object,+other);case"[object Error]":return object.name==other.name&&object.message==other.message;case"[object RegExp]":case"[object String]":return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=1&bitmask;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case"[object Symbol]":if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(1&bitmask)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag)return!1;return stack||(stack=new Stack),function(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=getAllKeys(object),objLength=objProps.length,othLength=getAllKeys(other).length;if(objLength!=othLength&&!isPartial)return!1;var index=objLength;for(;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=!0;stack.set(object,other),stack.set(other,object);var skipCtor=isPartial;for(;++index<objLength;){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor==othCtor||!("constructor"in object)||!("constructor"in other)||"function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor||(result=!1)}return stack.delete(object),stack.delete(other),result}(object,other,bitmask,customizer,equalFunc,stack)}(value,other,bitmask,customizer,baseIsEqual,stack))}function baseIsNative(value){return!(!isObject(value)||function(func){return!!maskSrcKey&&maskSrcKey in func}(value))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}function baseKeys(object){if(Ctor=(value=object)&&value.constructor,proto="function"==typeof Ctor&&Ctor.prototype||objectProto,value!==proto)return nativeKeys(object);var value,Ctor,proto,result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=2&bitmask?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,(function(othValue,othIndex){if(key=othIndex,!seen.has(key)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex);var key}))){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}function getAllKeys(object){return function(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:function(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}(result,symbolsFunc(object))}(object,keys,getSymbols)}function getMapData(map,key){var value,type,data=map.__data__;return("string"==(type=typeof(value=key))||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=function(object,key){return null==object?void 0:object[key]}(object,key);return baseIsNative(value)?value:void 0}Hash.prototype.clear=function(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0},Hash.prototype.delete=function(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result},Hash.prototype.get=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0},Hash.prototype.has=function(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)},Hash.prototype.set=function(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this},ListCache.prototype.clear=function(){this.__data__=[],this.size=0},ListCache.prototype.delete=function(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)},ListCache.prototype.get=function(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]},ListCache.prototype.has=function(key){return assocIndexOf(this.__data__,key)>-1},ListCache.prototype.set=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this},MapCache.prototype.clear=function(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result},MapCache.prototype.get=function(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this},SetCache.prototype.add=SetCache.prototype.push=function(value){return this.__data__.set(value,"__lodash_hash_undefined__"),this},SetCache.prototype.has=function(value){return this.__data__.has(value)},Stack.prototype.clear=function(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result},Stack.prototype.get=function(key){return this.__data__.get(key)},Stack.prototype.has=function(key){return this.__data__.has(key)},Stack.prototype.set=function(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this};var getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),function(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}(nativeGetSymbols(object),(function(symbol){return propertyIsEnumerable.call(object,symbol)})))}:function(){return[]},getTag=baseGetTag;function isIndex(value,length){return!!(length=null==length?9007199254740991:length)&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function eq(value,other){return value===other||value!=value&&other!=other}(DataView&&"[object DataView]"!=getTag(new DataView(new ArrayBuffer(1)))||Map&&getTag(new Map)!=mapTag||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&getTag(new Set)!=setTag||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return"[object DataView]";case mapCtorString:return mapTag;case promiseCtorString:return"[object Promise]";case setCtorString:return setTag;case weakMapCtorString:return"[object WeakMap]"}return result});var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArray=Array.isArray;var isBuffer=nativeIsBuffer||function(){return!1};function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return"[object Function]"==tag||"[object GeneratorFunction]"==tag||"[object AsyncFunction]"==tag||"[object Proxy]"==tag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=9007199254740991}function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}function isObjectLike(value){return null!=value&&"object"==typeof value}var isTypedArray=nodeIsTypedArray?function(func){return function(value){return func(value)}}(nodeIsTypedArray):function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]};function keys(object){return null!=(value=object)&&isLength(value.length)&&!isFunction(value)?arrayLikeKeys(object):baseKeys(object);var value}module.exports=function(value,other){return baseIsEqual(value,other)}}).call(this,__webpack_require__(58),__webpack_require__(90)(module))},function(module,exports,__webpack_require__){var jsonlint=__webpack_require__(375),geojsonHintObject=__webpack_require__(377);module.exports.hint=function(str,options){var gj,errors=[];if("object"==typeof str)gj=str;else{if("string"!=typeof str)return[{message:"Expected string or object as input",line:0}];try{gj=jsonlint.parse(str)}catch(e){var match=e.message.match(/line (\d+)/);return[{line:parseInt(match[1],10)-1,message:e.message,error:e}]}}return errors=errors.concat(geojsonHintObject.hint(gj,options))}},function(module,exports,__webpack_require__){(function(process,module){var jsonlint=function(){var o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,12],$V1=[1,13],$V2=[1,9],$V3=[1,10],$V4=[1,11],$V5=[1,14],$V6=[1,15],$V7=[14,18,22,24],$V8=[18,22],$V9=[22,24],parser={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:this.$=yytext.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(yytext);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=$$[$0-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=$$[$0-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[$$[$0-2],$$[$0]];break;case 16:this.$={},this.$[$$[$0][0]]=$$[$0][1];break;case 17:this.$=$$[$0-2],void 0!==$$[$0-2][$$[$0][0]]&&(this.$.__duplicateProperties__||Object.defineProperty(this.$,"__duplicateProperties__",{value:[],enumerable:!1}),this.$.__duplicateProperties__.push($$[$0][0])),$$[$0-2][$$[$0][0]]=$$[$0][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[$$[$0]];break;case 21:this.$=$$[$0-2],$$[$0-2].push($$[$0])}},table:[{3:5,4:$V0,5:6,6:$V1,7:3,8:$V2,9:4,10:$V3,11:$V4,12:1,13:2,15:7,16:8,17:$V5,23:$V6},{1:[3]},{14:[1,16]},o($V7,[2,7]),o($V7,[2,8]),o($V7,[2,9]),o($V7,[2,10]),o($V7,[2,11]),o($V7,[2,12]),o($V7,[2,3]),o($V7,[2,4]),o($V7,[2,5]),o([14,18,21,22,24],[2,1]),o($V7,[2,2]),{3:20,4:$V0,18:[1,17],19:18,20:19},{3:5,4:$V0,5:6,6:$V1,7:3,8:$V2,9:4,10:$V3,11:$V4,13:23,15:7,16:8,17:$V5,23:$V6,24:[1,21],25:22},{1:[2,6]},o($V7,[2,13]),{18:[1,24],22:[1,25]},o($V8,[2,16]),{21:[1,26]},o($V7,[2,18]),{22:[1,28],24:[1,27]},o($V9,[2,20]),o($V7,[2,14]),{3:20,4:$V0,20:29},{3:5,4:$V0,5:6,6:$V1,7:3,8:$V2,9:4,10:$V3,11:$V4,13:30,15:7,16:8,17:$V5,23:$V6},o($V7,[2,19]),{3:5,4:$V0,5:6,6:$V1,7:3,8:$V2,9:4,10:$V3,11:$V4,13:31,15:7,16:8,17:$V5,23:$V6},o($V8,[2,17]),o($V8,[2,15]),o($V9,[2,21])],defaultActions:{16:[2,6]},parseError:function(str,hash){if(!hash.recoverable){function _parseError(msg,hash){this.message=msg,this.hash=hash}throw _parseError.prototype=Error,new _parseError(str,hash)}this.trace(str)},parse:function(input){var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,TERROR=2,EOF=1,args=lstack.slice.call(arguments,1),lexer=Object.create(this.lexer),sharedState={yy:{}};for(var k in this.yy)Object.prototype.hasOwnProperty.call(this.yy,k)&&(sharedState.yy[k]=this.yy[k]);lexer.setInput(input,sharedState.yy),sharedState.yy.lexer=lexer,sharedState.yy.parser=this,void 0===lexer.yylloc&&(lexer.yylloc={});var yyloc=lexer.yylloc;lstack.push(yyloc);var ranges=lexer.options&&lexer.options.ranges;"function"==typeof sharedState.yy.parseError?this.parseError=sharedState.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var symbol,preErrorSymbol,state,action,r,p,len,newState,expected,lex=function(){var token;return"number"!=typeof(token=lexer.lex()||EOF)&&(token=self.symbols_[token]||token),token},yyval={};;){if(state=stack[stack.length-1],this.defaultActions[state]?action=this.defaultActions[state]:(null==symbol&&(symbol=lex()),action=table[state]&&table[state][symbol]),void 0===action||!action.length||!action[0]){var errStr="";for(p in expected=[],table[state])this.terminals_[p]&&p>TERROR&&expected.push("'"+this.terminals_[p]+"'");errStr=lexer.showPosition?"Parse error on line "+(yylineno+1)+":\n"+lexer.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(symbol==EOF?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:lexer.match,token:this.terminals_[symbol]||symbol,line:lexer.yylineno,loc:yyloc,expected:expected})}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(lexer.yytext),lstack.push(lexer.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=lexer.yyleng,yytext=lexer.yytext,yylineno=lexer.yylineno,yyloc=lexer.yylloc,recovering>0&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),void 0!==(r=this.performAction.apply(yyval,[yytext,yyleng,yylineno,sharedState.yy,action[1],vstack,lstack].concat(args))))return r;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState);break;case 3:return!0}}return!0}},lexer={EOF:1,parseError:function(str,hash){if(!this.yy.parser)throw new Error(str);this.yy.parser.parseError(str,hash)},setInput:function(input,yy){return this.yy=yy||this.yy||{},this._input=input,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var ch=this._input[0];return this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch,ch.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},unput:function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-len]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(n){this.unput(this.match.slice(n))},pastInput:function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var next=this.match;return next.length<20&&(next+=this._input.substr(0,20-next.length)),(next.substr(0,20)+(next.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pre=this.pastInput(),c=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},test_match:function(match,indexed_rule){var token,lines,backup;if(this.options.backtrack_lexer&&(backup={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(backup.yylloc.range=this.yylloc.range.slice(0))),(lines=match[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match[0].length},this.yytext+=match[0],this.match+=match[0],this.matches=match,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(match[0].length),this.matched+=match[0],token=this.performAction.call(this,this.yy,this,indexed_rule,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token)return token;if(this._backtrack){for(var k in backup)this[k]=backup[k];return!1}return!1},next:function(){if(this.done)return this.EOF;var token,match,tempMatch,index;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i=0;i<rules.length;i++)if((tempMatch=this._input.match(this.rules[rules[i]]))&&(!match||tempMatch[0].length>match[0].length)){if(match=tempMatch,index=i,this.options.backtrack_lexer){if(!1!==(token=this.test_match(tempMatch,rules[i])))return token;if(this._backtrack){match=!1;continue}return!1}if(!this.options.flex)break}return match?!1!==(token=this.test_match(match,rules[index]))&&token:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var r=this.next();return r||this.lex()},begin:function(condition){this.conditionStack.push(condition)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(n){return(n=this.conditionStack.length-1-Math.abs(n||0))>=0?this.conditionStack[n]:"INITIAL"},pushState:function(condition){this.begin(condition)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(yy,yy_,$avoiding_name_collisions,YY_START){switch($avoiding_name_collisions){case 0:break;case 1:return 6;case 2:return yy_.yytext=yy_.yytext.substr(1,yy_.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function Parser(){this.yy={}}return parser.lexer=lexer,Parser.prototype=parser,parser.Parser=Parser,new Parser}();exports.parser=jsonlint,exports.Parser=jsonlint.Parser,exports.parse=function(){return jsonlint.parse.apply(jsonlint,arguments)},exports.main=function(args){args[1]||(console.log("Usage: "+args[0]+" FILE"),process.exit(1));var source=__webpack_require__(376).readFileSync(__webpack_require__(211).normalize(args[1]),"utf8");return exports.parser.parse(source)},__webpack_require__.c[__webpack_require__.s]===module&&exports.main(process.argv.slice(1))}).call(this,__webpack_require__(64),__webpack_require__(90)(module))},function(module,exports){},function(module,exports,__webpack_require__){var rightHandRule=__webpack_require__(378);module.exports.hint=function(gj,options){var errors=[],precisionWarningCount=0;function root(_){if(options&&!1===options.noDuplicateMembers||!_.__duplicateProperties__||errors.push({message:"An object contained duplicate members, making parsing ambigous: "+_.__duplicateProperties__.join(", "),line:_.__line__}),!requiredProperty(_,"type","string"))if(types[_.type])_&&types[_.type](_);else{var expectedType=typesLower[_.type.toLowerCase()];void 0!==expectedType?errors.push({message:"Expected "+expectedType+" but got "+_.type+" (case sensitive)",line:_.__line__}):errors.push({message:"The type "+_.type+" is unknown",line:_.__line__})}}function everyIs(_,type){return _.every((function(x){return null!==x&&typeof x===type}))}function requiredProperty(_,name,type){if(void 0===_[name])return errors.push({message:'"'+name+'" member required',line:_.__line__});if("array"===type){if(!Array.isArray(_[name]))return errors.push({message:'"'+name+'" member should be an array, but is an '+typeof _[name]+" instead",line:_.__line__})}else{if("object"===type&&_[name]&&_[name].constructor!==Object)return errors.push({message:'"'+name+'" member should be '+type+", but is an "+_[name].constructor.name+" instead",line:_.__line__});if(type&&typeof _[name]!==type)return errors.push({message:'"'+name+'" member should be '+type+", but is an "+typeof _[name]+" instead",line:_.__line__})}}function position(_,line){if(!Array.isArray(_))return errors.push({message:"position should be an array, is a "+typeof _+" instead",line:_.__line__||line});if(_.length<2)return errors.push({message:"position must have 2 or more elements",line:_.__line__||line});if(_.length>3)return errors.push({message:"position should not have more than 3 elements",level:"message",line:_.__line__||line});if(!everyIs(_,"number"))return errors.push({message:"each element in a position must be a number",line:_.__line__||line});if(options&&options.precisionWarning){if(10===precisionWarningCount)return precisionWarningCount+=1,errors.push({message:"truncated warnings: we've encountered coordinate precision warning 10 times, no more warnings will be reported",level:"message",line:_.__line__||line});precisionWarningCount<10&&_.forEach((function(num){var precision=0,decimalStr=String(num).split(".")[1];if(void 0!==decimalStr&&(precision=decimalStr.length),precision>6)return precisionWarningCount+=1,errors.push({message:"precision of coordinates should be reduced",level:"message",line:_.__line__||line})}))}}function positionArray(coords,type,depth,line){if(void 0===line&&void 0!==coords.__line__&&(line=coords.__line__),0===depth)return position(coords,line);if(1===depth&&type)if("LinearRing"===type){if(!Array.isArray(coords[coords.length-1]))return errors.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:line}),!0;if(coords.length<4&&errors.push({message:"a LinearRing of coordinates needs to have four or more positions",line:line}),coords.length&&(coords[coords.length-1].length!==coords[0].length||!coords[coords.length-1].every((function(pos,index){return coords[0][index]===pos}))))return errors.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:line}),!0}else if("Line"===type&&coords.length<2)return errors.push({message:"a line needs to have two or more coordinates to be valid",line:line});if(Array.isArray(coords))return coords.map((function(c){return positionArray(c,type,depth-1,c.__line__||line)})).some((function(r){return r}));errors.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:line})}function crs(_){if(_.crs){"object"==typeof _.crs&&_.crs.properties&&"urn:ogc:def:crs:OGC:1.3:CRS84"===_.crs.properties.name?errors.push({message:"old-style crs member is not recommended, this object is equivalent to the default and should be removed",line:_.__line__}):errors.push({message:"old-style crs member is not recommended",line:_.__line__})}}function bbox(_){if(_.bbox)return Array.isArray(_.bbox)?(everyIs(_.bbox,"number")||errors.push({message:"each element in a bbox member must be a number",line:_.bbox.__line__}),4!==_.bbox.length&&6!==_.bbox.length&&errors.push({message:"bbox must contain 4 elements (for 2D) or 6 elements (for 3D)",line:_.bbox.__line__}),errors.length):void errors.push({message:"bbox member must be an array of numbers, but is a "+typeof _.bbox,line:_.__line__})}function Feature(feature){crs(feature),bbox(feature),void 0!==feature.id&&"string"!=typeof feature.id&&"number"!=typeof feature.id&&errors.push({message:'Feature "id" member must have a string or number value',line:feature.__line__}),void 0!==feature.features&&errors.push({message:'Feature object cannot contain a "features" member',line:feature.__line__}),void 0!==feature.coordinates&&errors.push({message:'Feature object cannot contain a "coordinates" member',line:feature.__line__}),"Feature"!==feature.type&&errors.push({message:"GeoJSON features must have a type=feature member",line:feature.__line__}),requiredProperty(feature,"properties","object"),requiredProperty(feature,"geometry","object")||feature.geometry&&root(feature.geometry)}var types={Point:function(point){var geom;crs(point),bbox(point),void 0!==(geom=point).properties&&errors.push({message:'geometry object cannot contain a "properties" member',line:geom.__line__}),void 0!==geom.geometry&&errors.push({message:'geometry object cannot contain a "geometry" member',line:geom.__line__}),void 0!==geom.features&&errors.push({message:'geometry object cannot contain a "features" member',line:geom.__line__}),requiredProperty(point,"coordinates","array")||position(point.coordinates)},Feature:Feature,MultiPoint:function(multiPoint){crs(multiPoint),bbox(multiPoint),requiredProperty(multiPoint,"coordinates","array")||positionArray(multiPoint.coordinates,"",1)},LineString:function(lineString){crs(lineString),bbox(lineString),requiredProperty(lineString,"coordinates","array")||positionArray(lineString.coordinates,"Line",1)},MultiLineString:function(multiLineString){crs(multiLineString),bbox(multiLineString),requiredProperty(multiLineString,"coordinates","array")||positionArray(multiLineString.coordinates,"Line",2)},FeatureCollection:function(featureCollection){if(crs(featureCollection),bbox(featureCollection),void 0!==featureCollection.properties&&errors.push({message:'FeatureCollection object cannot contain a "properties" member',line:featureCollection.__line__}),void 0!==featureCollection.coordinates&&errors.push({message:'FeatureCollection object cannot contain a "coordinates" member',line:featureCollection.__line__}),!requiredProperty(featureCollection,"features","array")){if(!everyIs(featureCollection.features,"object"))return errors.push({message:"Every feature must be an object",line:featureCollection.__line__});featureCollection.features.forEach(Feature)}},GeometryCollection:function(geometryCollection){crs(geometryCollection),bbox(geometryCollection),requiredProperty(geometryCollection,"geometries","array")||(everyIs(geometryCollection.geometries,"object")||errors.push({message:"The geometries array in a GeometryCollection must contain only geometry objects",line:geometryCollection.__line__}),1===geometryCollection.geometries.length&&errors.push({message:"GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type",line:geometryCollection.geometries.__line__}),geometryCollection.geometries.forEach((function(geometry){geometry&&("GeometryCollection"===geometry.type&&errors.push({message:"GeometryCollection should avoid nested geometry collections",line:geometryCollection.geometries.__line__}),root(geometry))})))},Polygon:function(polygon){crs(polygon),bbox(polygon),requiredProperty(polygon,"coordinates","array")||positionArray(polygon.coordinates,"LinearRing",2)||rightHandRule(polygon,errors)},MultiPolygon:function(multiPolygon){crs(multiPolygon),bbox(multiPolygon),requiredProperty(multiPolygon,"coordinates","array")||positionArray(multiPolygon.coordinates,"LinearRing",3)||rightHandRule(multiPolygon,errors)}},typesLower=Object.keys(types).reduce((function(prev,curr){return prev[curr.toLowerCase()]=curr,prev}),{});return"object"!=typeof gj||null==gj?(errors.push({message:"The root of a GeoJSON object must be an object.",line:0}),errors):(root(gj),errors.forEach((function(err){({}).hasOwnProperty.call(err,"line")&&void 0===err.line&&delete err.line})),errors)}},function(module,exports){function rad(x){return x*Math.PI/180}function isRingClockwise(coords){var area=0;if(coords.length>2)for(var p1,p2,i=0;i<coords.length-1;i++)p1=coords[i],area+=rad((p2=coords[i+1])[0]-p1[0])*(2+Math.sin(rad(p1[1]))+Math.sin(rad(p2[1])));return area>=0}function isPolyRHR(coords){if(coords&&coords.length>0){if(isRingClockwise(coords[0]))return!1;if(!coords.slice(1,coords.length).every(isRingClockwise))return!1}return!0}module.exports=function(geometry,errors){(function(geometry){return"Polygon"===geometry.type?isPolyRHR(geometry.coordinates):"MultiPolygon"===geometry.type?geometry.coordinates.every(isPolyRHR):void 0})(geometry)||errors.push({message:"Polygons and MultiPolygons should follow the right-hand rule",level:"message",line:geometry.__line__})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var doubleClickZoom_enable=function(ctx){setTimeout((function(){ctx.map&&ctx.map.doubleClickZoom&&ctx._ctx&&ctx._ctx.store&&ctx._ctx.store.getInitialConfigValue&&ctx._ctx.store.getInitialConfigValue("doubleClickZoom")&&ctx.map.doubleClickZoom.enable()}),0)},doubleClickZoom_disable=function(ctx){setTimeout((function(){ctx.map&&ctx.map.doubleClickZoom&&ctx.map.doubleClickZoom.disable()}),0)},DrawRectangle={onSetup:function(opts){var rectangle=this.newFeature({type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[]]}});return this.addFeature(rectangle),this.clearSelectedFeatures(),doubleClickZoom_disable(this),this.updateUIClasses({mouse:"add"}),this.setActionableState({trash:!0}),{rectangle:rectangle}},onTap:function(state,e){state.startPoint&&this.onMouseMove(state,e),this.onClick(state,e)},onClick:function(state,e){state.startPoint&&state.startPoint[0]!==e.lngLat.lng&&state.startPoint[1]!==e.lngLat.lat&&(this.updateUIClasses({mouse:"pointer"}),state.endPoint=[e.lngLat.lng,e.lngLat.lat],this.changeMode("simple_select",{featuresId:state.rectangle.id}));var startPoint=[e.lngLat.lng,e.lngLat.lat];state.startPoint=startPoint},onMouseMove:function(state,e){state.startPoint&&(state.rectangle.updateCoordinate("0.0",state.startPoint[0],state.startPoint[1]),state.rectangle.updateCoordinate("0.1",e.lngLat.lng,state.startPoint[1]),state.rectangle.updateCoordinate("0.2",e.lngLat.lng,e.lngLat.lat),state.rectangle.updateCoordinate("0.3",state.startPoint[0],e.lngLat.lat),state.rectangle.updateCoordinate("0.4",state.startPoint[0],state.startPoint[1]))},onKeyUp:function(state,e){if(27===e.keyCode)return this.changeMode("simple_select")},onStop:function(state){doubleClickZoom_enable(this),this.updateUIClasses({mouse:"none"}),this.activateUIButton(),void 0!==this.getFeature(state.rectangle.id)&&(state.rectangle.removeCoordinate("0.4"),state.rectangle.isValid()?this.map.fire("draw.create",{features:[state.rectangle.toGeoJSON()]}):(this.deleteFeature([state.rectangle.id],{silent:!0}),this.changeMode("simple_select",{},{silent:!0})))},toDisplayFeatures:function(state,geojson,display){var isActivePolygon=geojson.properties.id===state.rectangle.id;return geojson.properties.active=isActivePolygon?"true":"false",isActivePolygon?state.startPoint?display(geojson):void 0:display(geojson)},onTrash:function(state){this.deleteFeature([state.rectangle.id],{silent:!0}),this.changeMode("simple_select")}};exports.default=DrawRectangle},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"e3b1bd3256c6e2785c1c7786bf60a1a7.js"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"0c45161290be9aad49805fbad1bd5db8.js"},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(383);case"v7light":return __webpack_require__(385);case"v8dark":return __webpack_require__(387);case"v8light":return __webpack_require__(389)}},function(module,exports,__webpack_require__){var api=__webpack_require__(59),content=__webpack_require__(384);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(60)(!1)).push([module.i,".mapMapLayerWizardSelect__tooltip{display:flex;flex:1}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(59),content=__webpack_require__(386);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(60)(!1)).push([module.i,".mapMapLayerWizardSelect__tooltip{display:flex;flex:1}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(59),content=__webpack_require__(388);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(60)(!1)).push([module.i,".mapMapLayerWizardSelect__tooltip{display:flex;flex:1}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(59),content=__webpack_require__(390);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(60)(!1)).push([module.i,".mapMapLayerWizardSelect__tooltip{display:flex;flex:1}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var concatMap=__webpack_require__(392),balanced=__webpack_require__(393);module.exports=function(str){if(!str)return[];"{}"===str.substr(0,2)&&(str="\\{\\}"+str.substr(2));return function expand(str,isTop){var expansions=[],m=balanced("{","}",str);if(!m||/\$$/.test(m.pre))return[str];var n,isNumericSequence=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(m.body),isAlphaSequence=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(m.body),isSequence=isNumericSequence||isAlphaSequence,isOptions=m.body.indexOf(",")>=0;if(!isSequence&&!isOptions)return m.post.match(/,.*\}/)?(str=m.pre+"{"+m.body+escClose+m.post,expand(str)):[str];if(isSequence)n=m.body.split(/\.\./);else{if(1===(n=function parseCommaParts(str){if(!str)return[""];var parts=[],m=balanced("{","}",str);if(!m)return str.split(",");var pre=m.pre,body=m.body,post=m.post,p=pre.split(",");p[p.length-1]+="{"+body+"}";var postParts=parseCommaParts(post);post.length&&(p[p.length-1]+=postParts.shift(),p.push.apply(p,postParts));return parts.push.apply(parts,p),parts}(m.body)).length)if(1===(n=expand(n[0],!1).map(embrace)).length)return(post=m.post.length?expand(m.post,!1):[""]).map((function(p){return m.pre+n[0]+p}))}var N,pre=m.pre,post=m.post.length?expand(m.post,!1):[""];if(isSequence){var x=numeric(n[0]),y=numeric(n[1]),width=Math.max(n[0].length,n[1].length),incr=3==n.length?Math.abs(numeric(n[2])):1,test=lte;y<x&&(incr*=-1,test=gte);var pad=n.some(isPadded);N=[];for(var i=x;test(i,y);i+=incr){var c;if(isAlphaSequence)"\\"===(c=String.fromCharCode(i))&&(c="");else if(c=String(i),pad){var need=width-c.length;if(need>0){var z=new Array(need+1).join("0");c=i<0?"-"+z+c.slice(1):z+c}}N.push(c)}}else N=concatMap(n,(function(el){return expand(el,!1)}));for(var j=0;j<N.length;j++)for(var k=0;k<post.length;k++){var expansion=pre+N[j]+post[k];(!isTop||isSequence||expansion)&&expansions.push(expansion)}return expansions}(function(str){return str.split("\\\\").join(escSlash).split("\\{").join(escOpen).split("\\}").join(escClose).split("\\,").join(escComma).split("\\.").join(escPeriod)}(str),!0).map(unescapeBraces)};var escSlash="\0SLASH"+Math.random()+"\0",escOpen="\0OPEN"+Math.random()+"\0",escClose="\0CLOSE"+Math.random()+"\0",escComma="\0COMMA"+Math.random()+"\0",escPeriod="\0PERIOD"+Math.random()+"\0";function numeric(str){return parseInt(str,10)==str?parseInt(str,10):str.charCodeAt(0)}function unescapeBraces(str){return str.split(escSlash).join("\\").split(escOpen).join("{").split(escClose).join("}").split(escComma).join(",").split(escPeriod).join(".")}function embrace(str){return"{"+str+"}"}function isPadded(el){return/^-?0\d/.test(el)}function lte(i,y){return i<=y}function gte(i,y){return i>=y}},function(module,exports){module.exports=function(xs,fn){for(var res=[],i=0;i<xs.length;i++){var x=fn(xs[i],i);isArray(x)?res.push.apply(res,x):res.push(x)}return res};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)}},function(module,exports,__webpack_require__){"use strict";function balanced(a,b,str){a instanceof RegExp&&(a=maybeMatch(a,str)),b instanceof RegExp&&(b=maybeMatch(b,str));var r=range(a,b,str);return r&&{start:r[0],end:r[1],pre:str.slice(0,r[0]),body:str.slice(r[0]+a.length,r[1]),post:str.slice(r[1]+b.length)}}function maybeMatch(reg,str){var m=str.match(reg);return m?m[0]:null}function range(a,b,str){var begs,beg,left,right,result,ai=str.indexOf(a),bi=str.indexOf(b,ai+1),i=ai;if(ai>=0&&bi>0){for(begs=[],left=str.length;i>=0&&!result;)i==ai?(begs.push(i),ai=str.indexOf(a,i+1)):1==begs.length?result=[begs.pop(),bi]:((beg=begs.pop())<left&&(left=beg,right=bi),bi=str.indexOf(b,i+1)),i=ai<bi&&ai>=0?ai:bi;begs.length&&(result=[left,right])}return result}module.exports=balanced,balanced.range=range},function(module,exports,__webpack_require__){(exports=__webpack_require__(60)(!1)).push([module.i,".mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-moz-box-shadow:0 0 2px rgba(0,0,0,.1);-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;-moz-animation:mapboxgl-spin 2s infinite linear;-o-animation:mapboxgl-spin 2s infinite linear;-ms-animation:mapboxgl-spin 2s infinite linear;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@-moz-keyframes mapboxgl-spin{0%{-moz-transform:rotate(0deg)}to{-moz-transform:rotate(1turn)}}@-o-keyframes mapboxgl-spin{0%{-o-transform:rotate(0deg)}to{-o-transform:rotate(1turn)}}@-ms-keyframes mapboxgl-spin{0%{-ms-transform:rotate(0deg)}to{-ms-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E\")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-flex;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:\"\";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;-moz-animation:mapboxgl-user-location-dot-pulse 2s infinite;-ms-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:\"\";height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box;box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@-ms-keyframes mapboxgl-user-location-dot-pulse{0%{-ms-transform:scale(1);opacity:1}70%{-ms-transform:scale(3);opacity:0}to{-ms-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{transform:scale(1);opacity:1}70%{transform:scale(3);opacity:0}to{transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}",""]),module.exports=exports},function(module,exports,__webpack_require__){"use strict";function createThunkMiddleware(extraArgument){return function(_ref){var dispatch=_ref.dispatch,getState=_ref.getState;return function(next){return function(action){return"function"==typeof action?action(dispatch,getState,extraArgument):next(action)}}}}exports.__esModule=!0;var thunk=createThunkMiddleware();thunk.withExtraArgument=createThunkMiddleware,exports.default=thunk},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(214);var _map__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(149);__webpack_require__.d(__webpack_exports__,"DEFAULT_MAP_STATE",(function(){return _map__WEBPACK_IMPORTED_MODULE_1__.a})),__webpack_require__.d(__webpack_exports__,"map",(function(){return _map__WEBPACK_IMPORTED_MODULE_1__.b}));__webpack_require__(147)},function(module,__webpack_exports__,__webpack_require__){"use strict";var _constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);__webpack_require__.d(__webpack_exports__,"emsRegionLayerId",(function(){return _constants__WEBPACK_IMPORTED_MODULE_0__.emsRegionLayerId})),__webpack_require__.d(__webpack_exports__,"emsUsaZipLayerId",(function(){return _constants__WEBPACK_IMPORTED_MODULE_0__.emsUsaZipLayerId})),__webpack_require__.d(__webpack_exports__,"emsWorldLayerId",(function(){return _constants__WEBPACK_IMPORTED_MODULE_0__.emsWorldLayerId}));__webpack_require__(215)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"MapEmbeddableInput",(function(){return embeddable_types.MapEmbeddableInput})),__webpack_require__.d(__webpack_exports__,"MapEmbeddableOutput",(function(){return embeddable_types.MapEmbeddableOutput})),__webpack_require__.d(__webpack_exports__,"MapEmbeddable",(function(){return map_embeddable_MapEmbeddable})),__webpack_require__.d(__webpack_exports__,"setKibanaVersion",(function(){return kibana_services.Q})),__webpack_require__.d(__webpack_exports__,"getKibanaVersion",(function(){return kibana_services.u})),__webpack_require__.d(__webpack_exports__,"setStartServices",(function(){return kibana_services.S})),__webpack_require__.d(__webpack_exports__,"getIndexPatternService",(function(){return kibana_services.p})),__webpack_require__.d(__webpack_exports__,"getAutocompleteService",(function(){return kibana_services.a})),__webpack_require__.d(__webpack_exports__,"getInspector",(function(){return kibana_services.q})),__webpack_require__.d(__webpack_exports__,"getFileUpload",(function(){return kibana_services.m})),__webpack_require__.d(__webpack_exports__,"getUiSettings",(function(){return kibana_services.M})),__webpack_require__.d(__webpack_exports__,"getIsDarkMode",(function(){return kibana_services.s})),__webpack_require__.d(__webpack_exports__,"getIndexPatternSelectComponent",(function(){return kibana_services.o})),__webpack_require__.d(__webpack_exports__,"getHttp",(function(){return kibana_services.n})),__webpack_require__.d(__webpack_exports__,"getTimeFilter",(function(){return kibana_services.J})),__webpack_require__.d(__webpack_exports__,"getToasts",(function(){return kibana_services.K})),__webpack_require__.d(__webpack_exports__,"getSavedObjectsClient",(function(){return kibana_services.D})),__webpack_require__.d(__webpack_exports__,"getCoreChrome",(function(){return kibana_services.d})),__webpack_require__.d(__webpack_exports__,"getMapsCapabilities",(function(){return kibana_services.w})),__webpack_require__.d(__webpack_exports__,"getVisualizeCapabilities",(function(){return kibana_services.N})),__webpack_require__.d(__webpack_exports__,"getDocLinks",(function(){return kibana_services.h})),__webpack_require__.d(__webpack_exports__,"getCoreOverlays",(function(){return kibana_services.f})),__webpack_require__.d(__webpack_exports__,"getData",(function(){return kibana_services.g})),__webpack_require__.d(__webpack_exports__,"getSavedObjects",(function(){return kibana_services.C})),__webpack_require__.d(__webpack_exports__,"getUiActions",(function(){return kibana_services.L})),__webpack_require__.d(__webpack_exports__,"getCore",(function(){return kibana_services.c})),__webpack_require__.d(__webpack_exports__,"getNavigation",(function(){return kibana_services.y})),__webpack_require__.d(__webpack_exports__,"getCoreI18n",(function(){return kibana_services.e})),__webpack_require__.d(__webpack_exports__,"getSearchService",(function(){return kibana_services.F})),__webpack_require__.d(__webpack_exports__,"getEmbeddableService",(function(){return kibana_services.j})),__webpack_require__.d(__webpack_exports__,"getNavigateToApp",(function(){return kibana_services.x})),__webpack_require__.d(__webpack_exports__,"getSavedObjectsTagging",(function(){return kibana_services.E})),__webpack_require__.d(__webpack_exports__,"getPresentationUtilContext",(function(){return kibana_services.z})),__webpack_require__.d(__webpack_exports__,"setMapAppConfig",(function(){return kibana_services.R})),__webpack_require__.d(__webpack_exports__,"getMapAppConfig",(function(){return kibana_services.v})),__webpack_require__.d(__webpack_exports__,"getEnabled",(function(){return kibana_services.l})),__webpack_require__.d(__webpack_exports__,"getShowMapsInspectorAdapter",(function(){return kibana_services.H})),__webpack_require__.d(__webpack_exports__,"getPreserveDrawingBuffer",(function(){return kibana_services.A})),__webpack_require__.d(__webpack_exports__,"setKibanaCommonConfig",(function(){return kibana_services.P})),__webpack_require__.d(__webpack_exports__,"getKibanaCommonConfig",(function(){return kibana_services.t})),__webpack_require__.d(__webpack_exports__,"setEMSSettings",(function(){return kibana_services.O})),__webpack_require__.d(__webpack_exports__,"getEMSSettings",(function(){return kibana_services.i})),__webpack_require__.d(__webpack_exports__,"getEmsTileLayerId",(function(){return kibana_services.k})),__webpack_require__.d(__webpack_exports__,"getRegionmapLayers",(function(){return kibana_services.B})),__webpack_require__.d(__webpack_exports__,"getTilemap",(function(){return kibana_services.I})),__webpack_require__.d(__webpack_exports__,"getShareService",(function(){return kibana_services.G})),__webpack_require__.d(__webpack_exports__,"getIsAllowByValueEmbeddables",(function(){return kibana_services.r})),__webpack_require__.d(__webpack_exports__,"getChartsPaletteServiceGetColor",(function(){return kibana_services.b})),__webpack_require__.d(__webpack_exports__,"renderApp",(function(){return renderApp})),__webpack_require__.d(__webpack_exports__,"createSecurityLayerDescriptors",(function(){return createSecurityLayerDescriptors})),__webpack_require__.d(__webpack_exports__,"SecurityLayerWizardConfig",(function(){return SecurityLayerWizardConfig})),__webpack_require__.d(__webpack_exports__,"registerLayerWizard",(function(){return registerLayerWizard})),__webpack_require__.d(__webpack_exports__,"registerSource",(function(){return source_registry.b})),__webpack_require__.d(__webpack_exports__,"createTileMapLayerDescriptor",(function(){return createTileMapLayerDescriptor})),__webpack_require__.d(__webpack_exports__,"createRegionMapLayerDescriptor",(function(){return createRegionMapLayerDescriptor})),__webpack_require__.d(__webpack_exports__,"createBasemapLayerDescriptor",(function(){return createBasemapLayerDescriptor})),__webpack_require__.d(__webpack_exports__,"createESSearchSourceLayerDescriptor",(function(){return createLayerDescriptor})),__webpack_require__.d(__webpack_exports__,"suggestEMSTermJoinConfig",(function(){return suggestEMSTermJoinConfig}));var constants_namespaceObject={};__webpack_require__.r(constants_namespaceObject),__webpack_require__.d(constants_namespaceObject,"classes",(function(){return constants_classes})),__webpack_require__.d(constants_namespaceObject,"sources",(function(){return sources})),__webpack_require__.d(constants_namespaceObject,"cursors",(function(){return cursors})),__webpack_require__.d(constants_namespaceObject,"types",(function(){return types})),__webpack_require__.d(constants_namespaceObject,"geojsonTypes",(function(){return geojsonTypes})),__webpack_require__.d(constants_namespaceObject,"modes",(function(){return constants_modes})),__webpack_require__.d(constants_namespaceObject,"events",(function(){return constants_events})),__webpack_require__.d(constants_namespaceObject,"updateActions",(function(){return updateActions})),__webpack_require__.d(constants_namespaceObject,"meta",(function(){return constants_meta})),__webpack_require__.d(constants_namespaceObject,"activeStates",(function(){return activeStates})),__webpack_require__.d(constants_namespaceObject,"interactions",(function(){return interactions})),__webpack_require__.d(constants_namespaceObject,"LAT_MIN",(function(){return LAT_MIN})),__webpack_require__.d(constants_namespaceObject,"LAT_RENDERED_MIN",(function(){return LAT_RENDERED_MIN})),__webpack_require__.d(constants_namespaceObject,"LAT_MAX",(function(){return LAT_MAX})),__webpack_require__.d(constants_namespaceObject,"LAT_RENDERED_MAX",(function(){return LAT_RENDERED_MAX})),__webpack_require__.d(constants_namespaceObject,"LNG_MIN",(function(){return LNG_MIN})),__webpack_require__.d(constants_namespaceObject,"LNG_MAX",(function(){return LNG_MAX}));__webpack_require__(218);var external_kbnSharedDeps_Lodash_=__webpack_require__(23),external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_),external_kbnSharedDeps_React_=__webpack_require__(2),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),lib=__webpack_require__(37),external_kbnSharedDeps_ReactDom_=__webpack_require__(25),public_=__webpack_require__(29),data_public_=__webpack_require__(10),public_actions=__webpack_require__(38),ui_selectors=__webpack_require__(53),non_serializable_instances=__webpack_require__(70),map_selectors=__webpack_require__(36),constants=__webpack_require__(0),kibana_services=__webpack_require__(4),classnames=__webpack_require__(86),classnames_default=__webpack_require__.n(classnames),external_kbnSharedDeps_ElasticEui_=__webpack_require__(3),external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),v4=__webpack_require__(11),v4_default=__webpack_require__.n(v4),mapbox_gl_csp=__webpack_require__(361),mapbox_gl_csp_default=__webpack_require__.n(mapbox_gl_csp),maki=__webpack_require__(170),sprite_1=__webpack_require__(362),sprite_1_default=__webpack_require__.n(sprite_1),sprite_2=__webpack_require__(363),sprite_2_default=__webpack_require__.n(sprite_2),elasticsearch_util=__webpack_require__(40);var mode_handler=function(mode,DrawContext){const handlers={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},ctx={on(event,selector,fn){if(void 0===handlers[event])throw new Error("Invalid event type: "+event);handlers[event].push({selector:selector,fn:fn})},render(id){DrawContext.store.featureChanged(id)}},delegate=function(eventName,event){const handles=handlers[eventName];let iHandle=handles.length;for(;iHandle--;){const handle=handles[iHandle];if(handle.selector(event)){handle.fn.call(ctx,event),DrawContext.store.render(),DrawContext.ui.updateMapClasses();break}}};return mode.start.call(ctx),{render:mode.render,stop(){mode.stop&&mode.stop()},trash(){mode.trash&&(mode.trash(),DrawContext.store.render())},combineFeatures(){mode.combineFeatures&&mode.combineFeatures()},uncombineFeatures(){mode.uncombineFeatures&&mode.uncombineFeatures()},drag(event){delegate("drag",event)},click(event){delegate("click",event)},mousemove(event){delegate("mousemove",event)},mousedown(event){delegate("mousedown",event)},mouseup(event){delegate("mouseup",event)},mouseout(event){delegate("mouseout",event)},keydown(event){delegate("keydown",event)},keyup(event){delegate("keyup",event)},touchstart(event){delegate("touchstart",event)},touchmove(event){delegate("touchmove",event)},touchend(event){delegate("touchend",event)},tap(event){delegate("tap",event)}}},geojson_area=__webpack_require__(364),geojson_area_default=__webpack_require__.n(geojson_area);const constants_classes={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},sources={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},cursors={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},types={POLYGON:"polygon",LINE:"line_string",POINT:"point"},geojsonTypes={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},constants_modes={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},constants_events={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},updateActions={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},constants_meta={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},activeStates={ACTIVE:"true",INACTIVE:"false"},interactions=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],LAT_MIN=-90,LAT_RENDERED_MIN=-85,LAT_MAX=90,LAT_RENDERED_MAX=85,LNG_MIN=-270,LNG_MAX=270,FEATURE_SORT_RANKS={Point:0,LineString:1,Polygon:2};function comparator(a,b){const score=FEATURE_SORT_RANKS[a.geometry.type]-FEATURE_SORT_RANKS[b.geometry.type];return 0===score&&a.geometry.type===geojsonTypes.POLYGON?a.area-b.area:score}var sort_features=function(features){return features.map(feature=>(feature.geometry.type===geojsonTypes.POLYGON&&(feature.area=geojson_area_default.a.geometry({type:geojsonTypes.FEATURE,property:{},geometry:feature.geometry})),feature)).sort(comparator).map(feature=>(delete feature.area,feature))};var map_event_to_bounding_box=function(mapEvent,buffer=0){return[[mapEvent.point.x-buffer,mapEvent.point.y-buffer],[mapEvent.point.x+buffer,mapEvent.point.y+buffer]]};function StringSet(items){if(this._items={},this._nums={},this._length=items?items.length:0,items)for(let i=0,l=items.length;i<l;i++)this.add(items[i]),void 0!==items[i]&&("string"==typeof items[i]?this._items[items[i]]=i:this._nums[items[i]]=i)}StringSet.prototype.add=function(x){return this.has(x)||(this._length++,"string"==typeof x?this._items[x]=this._length:this._nums[x]=this._length),this},StringSet.prototype.delete=function(x){return!1===this.has(x)||(this._length--,delete this._items[x],delete this._nums[x]),this},StringSet.prototype.has=function(x){return("string"==typeof x||"number"==typeof x)&&(void 0!==this._items[x]||void 0!==this._nums[x])},StringSet.prototype.values=function(){const values=[];return Object.keys(this._items).forEach(k=>{values.push({k:k,v:this._items[k]})}),Object.keys(this._nums).forEach(k=>{values.push({k:JSON.parse(k),v:this._nums[k]})}),values.sort((a,b)=>a.v-b.v).map(a=>a.k)},StringSet.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var string_set=StringSet;const META_TYPES=[constants_meta.FEATURE,constants_meta.MIDPOINT,constants_meta.VERTEX];var features_at={click:function(event,bbox,ctx){return featuresAt(event,bbox,ctx,ctx.options.clickBuffer)},touch:function(event,bbox,ctx){return featuresAt(event,bbox,ctx,ctx.options.touchBuffer)}};function featuresAt(event,bbox,ctx,buffer){if(null===ctx.map)return[];const box=event?map_event_to_bounding_box(event,buffer):bbox,queryParams={};ctx.options.styles&&(queryParams.layers=ctx.options.styles.map(s=>s.id));const features=ctx.map.queryRenderedFeatures(box,queryParams).filter(feature=>-1!==META_TYPES.indexOf(feature.properties.meta)),featureIds=new string_set,uniqueFeatures=[];return features.forEach(feature=>{const featureId=feature.properties.id;featureIds.has(featureId)||(featureIds.add(featureId),uniqueFeatures.push(feature))}),sort_features(uniqueFeatures)}function getFeatureAtAndSetCursors(event,ctx){const features=features_at.click(event,null,ctx),classes={mouse:cursors.NONE};return features[0]&&(classes.mouse=features[0].properties.active===activeStates.ACTIVE?cursors.MOVE:cursors.POINTER,classes.feature=features[0].properties.meta),-1!==ctx.events.currentModeName().indexOf("draw")&&(classes.mouse=cursors.ADD),ctx.ui.queueMapClasses(classes),ctx.ui.updateMapClasses(),features[0]}var euclidean_distance=function(a,b){const x=a.x-b.x,y=a.y-b.y;return Math.sqrt(x*x+y*y)};function isClick(start,end,options={}){const fineTolerance=null!=options.fineTolerance?options.fineTolerance:4,grossTolerance=null!=options.grossTolerance?options.grossTolerance:12,interval=null!=options.interval?options.interval:500;start.point=start.point||end.point,start.time=start.time||end.time;const moveDistance=euclidean_distance(start.point,end.point);return moveDistance<fineTolerance||moveDistance<grossTolerance&&end.time-start.time<interval}function isTap(start,end,options={}){const tolerance=null!=options.tolerance?options.tolerance:25,interval=null!=options.interval?options.interval:250;start.point=start.point||end.point,start.time=start.time||end.time;return euclidean_distance(start.point,end.point)<tolerance&&end.time-start.time<interval}var hat=__webpack_require__(145),hat_default=__webpack_require__.n(hat);const Feature=function(ctx,geojson){this.ctx=ctx,this.properties=geojson.properties||{},this.coordinates=geojson.geometry.coordinates,this.id=geojson.id||hat_default()(),this.type=geojson.geometry.type};Feature.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},Feature.prototype.incomingCoords=function(coords){this.setCoordinates(coords)},Feature.prototype.setCoordinates=function(coords){this.coordinates=coords,this.changed()},Feature.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},Feature.prototype.setProperty=function(property,value){this.properties[property]=value},Feature.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:geojsonTypes.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},Feature.prototype.internal=function(mode){const properties={id:this.id,meta:constants_meta.FEATURE,"meta:type":this.type,active:activeStates.INACTIVE,mode:mode};if(this.ctx.options.userProperties)for(const name in this.properties)properties["user_"+name]=this.properties[name];return{type:geojsonTypes.FEATURE,properties:properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var feature_types_feature=Feature;const Point=function(ctx,geojson){feature_types_feature.call(this,ctx,geojson)};(Point.prototype=Object.create(feature_types_feature.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},Point.prototype.updateCoordinate=function(pathOrLng,lngOrLat,lat){this.coordinates=3===arguments.length?[lngOrLat,lat]:[pathOrLng,lngOrLat],this.changed()},Point.prototype.getCoordinate=function(){return this.getCoordinates()};var feature_types_point=Point;const LineString=function(ctx,geojson){feature_types_feature.call(this,ctx,geojson)};(LineString.prototype=Object.create(feature_types_feature.prototype)).isValid=function(){return this.coordinates.length>1},LineString.prototype.addCoordinate=function(path,lng,lat){this.changed();const id=parseInt(path,10);this.coordinates.splice(id,0,[lng,lat])},LineString.prototype.getCoordinate=function(path){const id=parseInt(path,10);return JSON.parse(JSON.stringify(this.coordinates[id]))},LineString.prototype.removeCoordinate=function(path){this.changed(),this.coordinates.splice(parseInt(path,10),1)},LineString.prototype.updateCoordinate=function(path,lng,lat){const id=parseInt(path,10);this.coordinates[id]=[lng,lat],this.changed()};var line_string=LineString;const Polygon=function(ctx,geojson){feature_types_feature.call(this,ctx,geojson),this.coordinates=this.coordinates.map(ring=>ring.slice(0,-1))};(Polygon.prototype=Object.create(feature_types_feature.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(ring=>ring.length>2)},Polygon.prototype.incomingCoords=function(coords){this.coordinates=coords.map(ring=>ring.slice(0,-1)),this.changed()},Polygon.prototype.setCoordinates=function(coords){this.coordinates=coords,this.changed()},Polygon.prototype.addCoordinate=function(path,lng,lat){this.changed();const ids=path.split(".").map(x=>parseInt(x,10));this.coordinates[ids[0]].splice(ids[1],0,[lng,lat])},Polygon.prototype.removeCoordinate=function(path){this.changed();const ids=path.split(".").map(x=>parseInt(x,10)),ring=this.coordinates[ids[0]];ring&&(ring.splice(ids[1],1),ring.length<3&&this.coordinates.splice(ids[0],1))},Polygon.prototype.getCoordinate=function(path){const ids=path.split(".").map(x=>parseInt(x,10)),ring=this.coordinates[ids[0]];return JSON.parse(JSON.stringify(ring[ids[1]]))},Polygon.prototype.getCoordinates=function(){return this.coordinates.map(coords=>coords.concat([coords[0]]))},Polygon.prototype.updateCoordinate=function(path,lng,lat){this.changed();const parts=path.split("."),ringId=parseInt(parts[0],10),coordId=parseInt(parts[1],10);void 0===this.coordinates[ringId]&&(this.coordinates[ringId]=[]),this.coordinates[ringId][coordId]=[lng,lat]};var feature_types_polygon=Polygon;const models={MultiPoint:feature_types_point,MultiLineString:line_string,MultiPolygon:feature_types_polygon},takeAction=(features,action,path,lng,lat)=>{const parts=path.split("."),idx=parseInt(parts[0],10),tail=parts[1]?parts.slice(1).join("."):null;return features[idx][action](tail,lng,lat)},MultiFeature=function(ctx,geojson){if(feature_types_feature.call(this,ctx,geojson),delete this.coordinates,this.model=models[geojson.geometry.type],void 0===this.model)throw new TypeError(geojson.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(geojson.geometry.coordinates)};(MultiFeature.prototype=Object.create(feature_types_feature.prototype))._coordinatesToFeatures=function(coordinates){const Model=this.model.bind(this);return coordinates.map(coords=>new Model(this.ctx,{id:hat_default()(),type:geojsonTypes.FEATURE,properties:{},geometry:{coordinates:coords,type:this.type.replace("Multi","")}}))},MultiFeature.prototype.isValid=function(){return this.features.every(f=>f.isValid())},MultiFeature.prototype.setCoordinates=function(coords){this.features=this._coordinatesToFeatures(coords),this.changed()},MultiFeature.prototype.getCoordinate=function(path){return takeAction(this.features,"getCoordinate",path)},MultiFeature.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(f=>f.type===geojsonTypes.POLYGON?f.getCoordinates():f.coordinates)))},MultiFeature.prototype.updateCoordinate=function(path,lng,lat){takeAction(this.features,"updateCoordinate",path,lng,lat),this.changed()},MultiFeature.prototype.addCoordinate=function(path,lng,lat){takeAction(this.features,"addCoordinate",path,lng,lat),this.changed()},MultiFeature.prototype.removeCoordinate=function(path){takeAction(this.features,"removeCoordinate",path),this.changed()},MultiFeature.prototype.getFeatures=function(){return this.features};var multi_feature=MultiFeature;function ModeInterface(ctx){this.map=ctx.map,this.drawConfig=JSON.parse(JSON.stringify(ctx.options||{})),this._ctx=ctx}ModeInterface.prototype.setSelected=function(features){return this._ctx.store.setSelected(features)},ModeInterface.prototype.setSelectedCoordinates=function(coords){this._ctx.store.setSelectedCoordinates(coords),coords.reduce((m,c)=>(void 0===m[c.feature_id]&&(m[c.feature_id]=!0,this._ctx.store.get(c.feature_id).changed()),m),{})},ModeInterface.prototype.getSelected=function(){return this._ctx.store.getSelected()},ModeInterface.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},ModeInterface.prototype.isSelected=function(id){return this._ctx.store.isSelected(id)},ModeInterface.prototype.getFeature=function(id){return this._ctx.store.get(id)},ModeInterface.prototype.select=function(id){return this._ctx.store.select(id)},ModeInterface.prototype.deselect=function(id){return this._ctx.store.deselect(id)},ModeInterface.prototype.deleteFeature=function(id,opts={}){return this._ctx.store.delete(id,opts)},ModeInterface.prototype.addFeature=function(feature){return this._ctx.store.add(feature)},ModeInterface.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},ModeInterface.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},ModeInterface.prototype.setActionableState=function(actions={}){const newSet={trash:actions.trash||!1,combineFeatures:actions.combineFeatures||!1,uncombineFeatures:actions.uncombineFeatures||!1};return this._ctx.events.actionable(newSet)},ModeInterface.prototype.changeMode=function(mode,opts={},eventOpts={}){return this._ctx.events.changeMode(mode,opts,eventOpts)},ModeInterface.prototype.updateUIClasses=function(opts){return this._ctx.ui.queueMapClasses(opts)},ModeInterface.prototype.activateUIButton=function(name){return this._ctx.ui.setActiveButton(name)},ModeInterface.prototype.featuresAt=function(event,bbox,bufferType="click"){if("click"!==bufferType&&"touch"!==bufferType)throw new Error("invalid buffer type");return features_at[bufferType](event,bbox,this._ctx)},ModeInterface.prototype.newFeature=function(geojson){const type=geojson.geometry.type;return type===geojsonTypes.POINT?new feature_types_point(this._ctx,geojson):type===geojsonTypes.LINE_STRING?new line_string(this._ctx,geojson):type===geojsonTypes.POLYGON?new feature_types_polygon(this._ctx,geojson):new multi_feature(this._ctx,geojson)},ModeInterface.prototype.isInstanceOf=function(type,feature){if(type===geojsonTypes.POINT)return feature instanceof feature_types_point;if(type===geojsonTypes.LINE_STRING)return feature instanceof line_string;if(type===geojsonTypes.POLYGON)return feature instanceof feature_types_polygon;if("MultiFeature"===type)return feature instanceof multi_feature;throw new Error("Unknown feature class: "+type)},ModeInterface.prototype.doRender=function(id){return this._ctx.store.featureChanged(id)};var mode_interface=ModeInterface;ModeInterface.prototype.onSetup=function(){},ModeInterface.prototype.onDrag=function(){},ModeInterface.prototype.onClick=function(){},ModeInterface.prototype.onMouseMove=function(){},ModeInterface.prototype.onMouseDown=function(){},ModeInterface.prototype.onMouseUp=function(){},ModeInterface.prototype.onMouseOut=function(){},ModeInterface.prototype.onKeyUp=function(){},ModeInterface.prototype.onKeyDown=function(){},ModeInterface.prototype.onTouchStart=function(){},ModeInterface.prototype.onTouchMove=function(){},ModeInterface.prototype.onTouchEnd=function(){},ModeInterface.prototype.onTap=function(){},ModeInterface.prototype.onStop=function(){},ModeInterface.prototype.onTrash=function(){},ModeInterface.prototype.onCombineFeature=function(){},ModeInterface.prototype.onUncombineFeature=function(){},ModeInterface.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};const eventMapper={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},eventKeys=Object.keys(eventMapper);var object_to_mode=function(modeObject){const modeObjectKeys=Object.keys(modeObject);return function(ctx,startOpts={}){let state={};const mode=modeObjectKeys.reduce((m,k)=>(m[k]=modeObject[k],m),new mode_interface(ctx));return{start(){state=mode.onSetup(startOpts),eventKeys.forEach(key=>{const modeHandler=eventMapper[key];let selector=()=>!1;var eh;modeObject[modeHandler]&&(selector=()=>!0),this.on(key,selector,(eh=modeHandler,function(e){mode[eh](state,e)}))})},stop(){mode.onStop(state)},trash(){mode.onTrash(state)},combineFeatures(){mode.onCombineFeatures(state)},uncombineFeatures(){mode.onUncombineFeatures(state)},render(geojson,push){mode.toDisplayFeatures(state,geojson,push)}}}};var to_dense_array=function(x){return[].concat(x).filter(y=>void 0!==y)};function render(){const store=this;if(!(store.ctx.map&&void 0!==store.ctx.map.getSource(sources.HOT)))return cleanup();const mode=store.ctx.events.currentModeName();store.ctx.ui.queueMapClasses({mode:mode});let newHotIds=[],newColdIds=[];store.isDirty?newColdIds=store.getAllIds():(newHotIds=store.getChangedIds().filter(id=>void 0!==store.get(id)),newColdIds=store.sources.hot.filter(geojson=>geojson.properties.id&&-1===newHotIds.indexOf(geojson.properties.id)&&void 0!==store.get(geojson.properties.id)).map(geojson=>geojson.properties.id)),store.sources.hot=[];const lastColdCount=store.sources.cold.length;store.sources.cold=store.isDirty?[]:store.sources.cold.filter(geojson=>{const id=geojson.properties.id||geojson.properties.parent;return-1===newHotIds.indexOf(id)});const coldChanged=lastColdCount!==store.sources.cold.length||newColdIds.length>0;function renderFeature(id,source){const featureInternal=store.get(id).internal(mode);store.ctx.events.currentModeRender(featureInternal,geojson=>{store.sources[source].push(geojson)})}if(newHotIds.forEach(id=>renderFeature(id,"hot")),newColdIds.forEach(id=>renderFeature(id,"cold")),coldChanged&&store.ctx.map.getSource(sources.COLD).setData({type:geojsonTypes.FEATURE_COLLECTION,features:store.sources.cold}),store.ctx.map.getSource(sources.HOT).setData({type:geojsonTypes.FEATURE_COLLECTION,features:store.sources.hot}),store._emitSelectionChange&&(store.ctx.map.fire(constants_events.SELECTION_CHANGE,{features:store.getSelected().map(feature=>feature.toGeoJSON()),points:store.getSelectedCoordinates().map(coordinate=>({type:geojsonTypes.FEATURE,properties:{},geometry:{type:geojsonTypes.POINT,coordinates:coordinate.coordinates}}))}),store._emitSelectionChange=!1),store._deletedFeaturesToEmit.length){const geojsonToEmit=store._deletedFeaturesToEmit.map(feature=>feature.toGeoJSON());store._deletedFeaturesToEmit=[],store.ctx.map.fire(constants_events.DELETE,{features:geojsonToEmit})}function cleanup(){store.isDirty=!1,store.clearChangedIds()}cleanup(),store.ctx.map.fire(constants_events.RENDER,{})}function Store(ctx){let renderRequest;this._features={},this._featureIds=new string_set,this._selectedFeatureIds=new string_set,this._selectedCoordinates=[],this._changedFeatureIds=new string_set,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=ctx,this.sources={hot:[],cold:[]},this.render=()=>{renderRequest||(renderRequest=requestAnimationFrame(()=>{renderRequest=null,render.call(this)}))},this.isDirty=!1}function refreshSelectedCoordinates(store,options){const newSelectedCoordinates=store._selectedCoordinates.filter(point=>store._selectedFeatureIds.has(point.feature_id));store._selectedCoordinates.length===newSelectedCoordinates.length||options.silent||(store._emitSelectionChange=!0),store._selectedCoordinates=newSelectedCoordinates}Store.prototype.createRenderBatch=function(){const holdRender=this.render;let numRenders=0;return this.render=function(){numRenders++},()=>{this.render=holdRender,numRenders>0&&this.render()}},Store.prototype.setDirty=function(){return this.isDirty=!0,this},Store.prototype.featureChanged=function(featureId){return this._changedFeatureIds.add(featureId),this},Store.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Store.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Store.prototype.getAllIds=function(){return this._featureIds.values()},Store.prototype.add=function(feature){return this.featureChanged(feature.id),this._features[feature.id]=feature,this._featureIds.add(feature.id),this},Store.prototype.delete=function(featureIds,options={}){return to_dense_array(featureIds).forEach(id=>{this._featureIds.has(id)&&(this._featureIds.delete(id),this._selectedFeatureIds.delete(id),options.silent||-1===this._deletedFeaturesToEmit.indexOf(this._features[id])&&this._deletedFeaturesToEmit.push(this._features[id]),delete this._features[id],this.isDirty=!0)}),refreshSelectedCoordinates(this,options),this},Store.prototype.get=function(id){return this._features[id]},Store.prototype.getAll=function(){return Object.keys(this._features).map(id=>this._features[id])},Store.prototype.select=function(featureIds,options={}){return to_dense_array(featureIds).forEach(id=>{this._selectedFeatureIds.has(id)||(this._selectedFeatureIds.add(id),this._changedFeatureIds.add(id),options.silent||(this._emitSelectionChange=!0))}),this},Store.prototype.deselect=function(featureIds,options={}){return to_dense_array(featureIds).forEach(id=>{this._selectedFeatureIds.has(id)&&(this._selectedFeatureIds.delete(id),this._changedFeatureIds.add(id),options.silent||(this._emitSelectionChange=!0))}),refreshSelectedCoordinates(this,options),this},Store.prototype.clearSelected=function(options={}){return this.deselect(this._selectedFeatureIds.values(),{silent:options.silent}),this},Store.prototype.setSelected=function(featureIds,options={}){return featureIds=to_dense_array(featureIds),this.deselect(this._selectedFeatureIds.values().filter(id=>-1===featureIds.indexOf(id)),{silent:options.silent}),this.select(featureIds.filter(id=>!this._selectedFeatureIds.has(id)),{silent:options.silent}),this},Store.prototype.setSelectedCoordinates=function(coordinates){return this._selectedCoordinates=coordinates,this._emitSelectionChange=!0,this},Store.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Store.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Store.prototype.getSelected=function(){return this._selectedFeatureIds.values().map(id=>this.get(id))},Store.prototype.getSelectedCoordinates=function(){return this._selectedCoordinates.map(coordinate=>({coordinates:this.get(coordinate.feature_id).getCoordinate(coordinate.coord_path)}))},Store.prototype.isSelected=function(featureId){return this._selectedFeatureIds.has(featureId)},Store.prototype.setFeatureProperty=function(featureId,property,value){this.get(featureId).setProperty(property,value),this.featureChanged(featureId)},Store.prototype.storeMapConfig=function(){interactions.forEach(interaction=>{this.ctx.map[interaction]&&(this._mapInitialConfig[interaction]=this.ctx.map[interaction].isEnabled())})},Store.prototype.restoreMapConfig=function(){Object.keys(this._mapInitialConfig).forEach(key=>{this._mapInitialConfig[key]?this.ctx.map[key].enable():this.ctx.map[key].disable()})},Store.prototype.getInitialConfigValue=function(interaction){return void 0===this._mapInitialConfig[interaction]||this._mapInitialConfig[interaction]};var immutable=__webpack_require__(146),immutable_default=__webpack_require__.n(immutable);const classTypes=["mode","feature","mouse"];var src_setup=function(ctx){let controlContainer=null,mapLoadedInterval=null;const setup={onRemove(){return ctx.map.off("load",setup.connect),clearInterval(mapLoadedInterval),setup.removeLayers(),ctx.store.restoreMapConfig(),ctx.ui.removeButtons(),ctx.events.removeEventListeners(),ctx.ui.clearMapClasses(),ctx.map=null,ctx.container=null,ctx.store=null,controlContainer&&controlContainer.parentNode&&controlContainer.parentNode.removeChild(controlContainer),controlContainer=null,this},connect(){ctx.map.off("load",setup.connect),clearInterval(mapLoadedInterval),setup.addLayers(),ctx.store.storeMapConfig(),ctx.events.addEventListeners()},onAdd(map){{const _fire=map.fire;map.fire=function(type,event){let args=arguments;return 1===_fire.length&&1!==arguments.length&&(args=[immutable_default()({},{type:type},event)]),_fire.apply(map,args)}}return ctx.map=map,ctx.events=function(ctx){const modes=Object.keys(ctx.options.modes).reduce((m,k)=>(m[k]=object_to_mode(ctx.options.modes[k]),m),{});let mouseDownInfo={},touchStartInfo={};const events={};let currentModeName=null,currentMode=null;events.drag=function(event,isDrag){isDrag({point:event.point,time:(new Date).getTime()})?(ctx.ui.queueMapClasses({mouse:cursors.DRAG}),currentMode.drag(event)):event.originalEvent.stopPropagation()},events.mousedrag=function(event){events.drag(event,endInfo=>!isClick(mouseDownInfo,endInfo))},events.touchdrag=function(event){events.drag(event,endInfo=>!isTap(touchStartInfo,endInfo))},events.mousemove=function(event){if(1===(void 0!==event.originalEvent.buttons?event.originalEvent.buttons:event.originalEvent.which))return events.mousedrag(event);const target=getFeatureAtAndSetCursors(event,ctx);event.featureTarget=target,currentMode.mousemove(event)},events.mousedown=function(event){mouseDownInfo={time:(new Date).getTime(),point:event.point};const target=getFeatureAtAndSetCursors(event,ctx);event.featureTarget=target,currentMode.mousedown(event)},events.mouseup=function(event){const target=getFeatureAtAndSetCursors(event,ctx);event.featureTarget=target,isClick(mouseDownInfo,{point:event.point,time:(new Date).getTime()})?currentMode.click(event):currentMode.mouseup(event)},events.mouseout=function(event){currentMode.mouseout(event)},events.touchstart=function(event){if(event.originalEvent.preventDefault(),!ctx.options.touchEnabled)return;touchStartInfo={time:(new Date).getTime(),point:event.point};const target=features_at.touch(event,null,ctx)[0];event.featureTarget=target,currentMode.touchstart(event)},events.touchmove=function(event){if(event.originalEvent.preventDefault(),ctx.options.touchEnabled)return currentMode.touchmove(event),events.touchdrag(event)},events.touchend=function(event){if(event.originalEvent.preventDefault(),!ctx.options.touchEnabled)return;const target=features_at.touch(event,null,ctx)[0];event.featureTarget=target,isTap(touchStartInfo,{time:(new Date).getTime(),point:event.point})?currentMode.tap(event):currentMode.touchend(event)};const isKeyModeValid=code=>!(8===code||46===code||code>=48&&code<=57);function changeMode(modename,nextModeOptions,eventOptions={}){currentMode.stop();const modebuilder=modes[modename];if(void 0===modebuilder)throw new Error(modename+" is not valid");currentModeName=modename;const mode=modebuilder(ctx,nextModeOptions);currentMode=mode_handler(mode,ctx),eventOptions.silent||ctx.map.fire(constants_events.MODE_CHANGE,{mode:modename}),ctx.store.setDirty(),ctx.store.render()}events.keydown=function(event){"mapboxgl-canvas"===(event.srcElement||event.target).classList[0]&&(8!==event.keyCode&&46!==event.keyCode||!ctx.options.controls.trash?isKeyModeValid(event.keyCode)?currentMode.keydown(event):49===event.keyCode&&ctx.options.controls.point?changeMode(constants_modes.DRAW_POINT):50===event.keyCode&&ctx.options.controls.line_string?changeMode(constants_modes.DRAW_LINE_STRING):51===event.keyCode&&ctx.options.controls.polygon&&changeMode(constants_modes.DRAW_POLYGON):(event.preventDefault(),currentMode.trash()))},events.keyup=function(event){isKeyModeValid(event.keyCode)&&currentMode.keyup(event)},events.zoomend=function(){ctx.store.changeZoom()},events.data=function(event){if("style"===event.dataType){const{setup:setup,map:map,options:options,store:store}=ctx;options.styles.some(style=>map.getLayer(style.id))||(setup.addLayers(),store.setDirty(),store.render())}};const actionState={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start(){currentModeName=ctx.options.defaultMode,currentMode=mode_handler(modes[currentModeName](ctx),ctx)},changeMode:changeMode,actionable:function(actions){let changed=!1;Object.keys(actions).forEach(action=>{if(void 0===actionState[action])throw new Error("Invalid action type");actionState[action]!==actions[action]&&(changed=!0),actionState[action]=actions[action]}),changed&&ctx.map.fire(constants_events.ACTIONABLE,{actions:actionState})},currentModeName:()=>currentModeName,currentModeRender:(geojson,push)=>currentMode.render(geojson,push),fire(name,event){events[name]&&events[name](event)},addEventListeners(){ctx.map.on("mousemove",events.mousemove),ctx.map.on("mousedown",events.mousedown),ctx.map.on("mouseup",events.mouseup),ctx.map.on("data",events.data),ctx.map.on("touchmove",events.touchmove),ctx.map.on("touchstart",events.touchstart),ctx.map.on("touchend",events.touchend),ctx.container.addEventListener("mouseout",events.mouseout),ctx.options.keybindings&&(ctx.container.addEventListener("keydown",events.keydown),ctx.container.addEventListener("keyup",events.keyup))},removeEventListeners(){ctx.map.off("mousemove",events.mousemove),ctx.map.off("mousedown",events.mousedown),ctx.map.off("mouseup",events.mouseup),ctx.map.off("data",events.data),ctx.map.off("touchmove",events.touchmove),ctx.map.off("touchstart",events.touchstart),ctx.map.off("touchend",events.touchend),ctx.container.removeEventListener("mouseout",events.mouseout),ctx.options.keybindings&&(ctx.container.removeEventListener("keydown",events.keydown),ctx.container.removeEventListener("keyup",events.keyup))},trash(options){currentMode.trash(options)},combineFeatures(){currentMode.combineFeatures()},uncombineFeatures(){currentMode.uncombineFeatures()},getMode:()=>currentModeName}}(ctx),ctx.ui=function(ctx){const buttonElements={};let activeButton=null,currentMapClasses={mode:null,feature:null,mouse:null},nextMapClasses={mode:null,feature:null,mouse:null};function queueMapClasses(options){nextMapClasses=immutable_default()(nextMapClasses,options)}function updateMapClasses(){if(!ctx.container)return;const classesToRemove=[],classesToAdd=[];classTypes.forEach(type=>{nextMapClasses[type]!==currentMapClasses[type]&&(classesToRemove.push(`${type}-${currentMapClasses[type]}`),null!==nextMapClasses[type]&&classesToAdd.push(`${type}-${nextMapClasses[type]}`))}),classesToRemove.length>0&&ctx.container.classList.remove(...classesToRemove),classesToAdd.length>0&&ctx.container.classList.add(...classesToAdd),currentMapClasses=immutable_default()(currentMapClasses,nextMapClasses)}function createControlButton(id,options={}){const button=document.createElement("button");return button.className=`${constants_classes.CONTROL_BUTTON} ${options.className}`,button.setAttribute("title",options.title),options.container.appendChild(button),button.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();if(e.target===activeButton)return deactivateButtons(),void options.onDeactivate();setActiveButton(id),options.onActivate()},!0),button}function deactivateButtons(){activeButton&&(activeButton.classList.remove(constants_classes.ACTIVE_BUTTON),activeButton=null)}function setActiveButton(id){deactivateButtons();const button=buttonElements[id];button&&button&&"trash"!==id&&(button.classList.add(constants_classes.ACTIVE_BUTTON),activeButton=button)}return{setActiveButton:setActiveButton,queueMapClasses:queueMapClasses,updateMapClasses:updateMapClasses,clearMapClasses:function(){queueMapClasses({mode:null,feature:null,mouse:null}),updateMapClasses()},addButtons:function(){const controls=ctx.options.controls,controlGroup=document.createElement("div");return controlGroup.className=`${constants_classes.CONTROL_GROUP} ${constants_classes.CONTROL_BASE}`,controls?(controls[types.LINE]&&(buttonElements[types.LINE]=createControlButton(types.LINE,{container:controlGroup,className:constants_classes.CONTROL_BUTTON_LINE,title:"LineString tool "+(ctx.options.keybindings?"(l)":""),onActivate:()=>ctx.events.changeMode(constants_modes.DRAW_LINE_STRING),onDeactivate:()=>ctx.events.trash()})),controls[types.POLYGON]&&(buttonElements[types.POLYGON]=createControlButton(types.POLYGON,{container:controlGroup,className:constants_classes.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(ctx.options.keybindings?"(p)":""),onActivate:()=>ctx.events.changeMode(constants_modes.DRAW_POLYGON),onDeactivate:()=>ctx.events.trash()})),controls[types.POINT]&&(buttonElements[types.POINT]=createControlButton(types.POINT,{container:controlGroup,className:constants_classes.CONTROL_BUTTON_POINT,title:"Marker tool "+(ctx.options.keybindings?"(m)":""),onActivate:()=>ctx.events.changeMode(constants_modes.DRAW_POINT),onDeactivate:()=>ctx.events.trash()})),controls.trash&&(buttonElements.trash=createControlButton("trash",{container:controlGroup,className:constants_classes.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:()=>{ctx.events.trash()}})),controls.combine_features&&(buttonElements.combine_features=createControlButton("combineFeatures",{container:controlGroup,className:constants_classes.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:()=>{ctx.events.combineFeatures()}})),controls.uncombine_features&&(buttonElements.uncombine_features=createControlButton("uncombineFeatures",{container:controlGroup,className:constants_classes.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:()=>{ctx.events.uncombineFeatures()}})),controlGroup):controlGroup},removeButtons:function(){Object.keys(buttonElements).forEach(buttonId=>{const button=buttonElements[buttonId];button.parentNode&&button.parentNode.removeChild(button),delete buttonElements[buttonId]})}}}(ctx),ctx.container=map.getContainer(),ctx.store=new Store(ctx),controlContainer=ctx.ui.addButtons(),ctx.options.boxSelect&&(map.boxZoom.disable(),map.dragPan.disable(),map.dragPan.enable()),map.loaded()?setup.connect():(map.on("load",setup.connect),mapLoadedInterval=setInterval(()=>{map.loaded()&&setup.connect()},16)),ctx.events.start(),controlContainer},addLayers(){ctx.map.addSource(sources.COLD,{data:{type:geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),ctx.map.addSource(sources.HOT,{data:{type:geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),ctx.options.styles.forEach(style=>{ctx.map.addLayer(style)}),ctx.store.setDirty(!0),ctx.store.render()},removeLayers(){ctx.options.styles.forEach(style=>{ctx.map.getLayer(style.id)&&ctx.map.removeLayer(style.id)}),ctx.map.getSource(sources.COLD)&&ctx.map.removeSource(sources.COLD),ctx.map.getSource(sources.HOT)&&ctx.map.removeSource(sources.HOT)}};return ctx.setup=setup,setup};function isOfMetaType(type){return function(e){const featureTarget=e.featureTarget;return!!featureTarget&&(!!featureTarget.properties&&featureTarget.properties.meta===type)}}function isActiveFeature(e){return!!e.featureTarget&&(!!e.featureTarget.properties&&(e.featureTarget.properties.active===activeStates.ACTIVE&&e.featureTarget.properties.meta===constants_meta.FEATURE))}function isInactiveFeature(e){return!!e.featureTarget&&(!!e.featureTarget.properties&&(e.featureTarget.properties.active===activeStates.INACTIVE&&e.featureTarget.properties.meta===constants_meta.FEATURE))}function noTarget(e){return void 0===e.featureTarget}function isVertex(e){const featureTarget=e.featureTarget;return!!featureTarget&&(!!featureTarget.properties&&featureTarget.properties.meta===constants_meta.VERTEX)}function isShiftDown(e){return!!e.originalEvent&&!0===e.originalEvent.shiftKey}function isEscapeKey(e){return 27===e.keyCode}function isEnterKey(e){return 13===e.keyCode}var point_geometry=__webpack_require__(366),point_geometry_default=__webpack_require__.n(point_geometry);var mouse_event_point=function(mouseEvent,container){const rect=container.getBoundingClientRect();return new point_geometry_default.a(mouseEvent.clientX-rect.left-(container.clientLeft||0),mouseEvent.clientY-rect.top-(container.clientTop||0))},create_vertex=function(parentId,coordinates,path,selected){return{type:geojsonTypes.FEATURE,properties:{meta:constants_meta.VERTEX,parent:parentId,coord_path:path,active:selected?activeStates.ACTIVE:activeStates.INACTIVE},geometry:{type:geojsonTypes.POINT,coordinates:coordinates}}};var create_supplementary_points=function createSupplementaryPoints(geojson,options={},basePath=null){const{type:type,coordinates:coordinates}=geojson.geometry,featureId=geojson.properties&&geojson.properties.id;let supplementaryPoints=[];function processLine(line,lineBasePath){let firstPointString="",lastVertex=null;line.forEach((point,pointIndex)=>{const pointPath=null!=lineBasePath?`${lineBasePath}.${pointIndex}`:String(pointIndex),vertex=create_vertex(featureId,point,pointPath,isSelectedPath(pointPath));if(options.midpoints&&lastVertex){const midpoint=function(parent,startVertex,endVertex,map){const startCoord=startVertex.geometry.coordinates,endCoord=endVertex.geometry.coordinates;if(startCoord[1]>LAT_RENDERED_MAX||startCoord[1]<LAT_RENDERED_MIN||endCoord[1]>LAT_RENDERED_MAX||endCoord[1]<LAT_RENDERED_MIN)return null;const ptA=map.project([startCoord[0],startCoord[1]]),ptB=map.project([endCoord[0],endCoord[1]]),mid=map.unproject([(ptA.x+ptB.x)/2,(ptA.y+ptB.y)/2]);return{type:geojsonTypes.FEATURE,properties:{meta:constants_meta.MIDPOINT,parent:parent,lng:mid.lng,lat:mid.lat,coord_path:endVertex.properties.coord_path},geometry:{type:geojsonTypes.POINT,coordinates:[mid.lng,mid.lat]}}}(featureId,lastVertex,vertex,options.map);midpoint&&supplementaryPoints.push(midpoint)}lastVertex=vertex;const stringifiedPoint=JSON.stringify(point);firstPointString!==stringifiedPoint&&supplementaryPoints.push(vertex),0===pointIndex&&(firstPointString=stringifiedPoint)})}function isSelectedPath(path){return!!options.selectedPaths&&-1!==options.selectedPaths.indexOf(path)}return type===geojsonTypes.POINT?supplementaryPoints.push(create_vertex(featureId,coordinates,basePath,isSelectedPath(basePath))):type===geojsonTypes.POLYGON?coordinates.forEach((line,lineIndex)=>{processLine(line,null!==basePath?`${basePath}.${lineIndex}`:String(lineIndex))}):type===geojsonTypes.LINE_STRING?processLine(coordinates,basePath):0===type.indexOf(geojsonTypes.MULTI_PREFIX)&&function(){const subType=type.replace(geojsonTypes.MULTI_PREFIX,"");coordinates.forEach((subCoordinates,index)=>{const subFeature={type:geojsonTypes.FEATURE,properties:geojson.properties,geometry:{type:subType,coordinates:subCoordinates}};supplementaryPoints=supplementaryPoints.concat(createSupplementaryPoints(subFeature,options,index))})}(),supplementaryPoints},double_click_zoom={enable(ctx){setTimeout(()=>{ctx.map&&ctx.map.doubleClickZoom&&ctx._ctx&&ctx._ctx.store&&ctx._ctx.store.getInitialConfigValue&&ctx._ctx.store.getInitialConfigValue("doubleClickZoom")&&ctx.map.doubleClickZoom.enable()},0)},disable(ctx){setTimeout(()=>{ctx.map&&ctx.map.doubleClickZoom&&ctx.map.doubleClickZoom.disable()},0)}},geojson_extent=__webpack_require__(367),geojson_extent_default=__webpack_require__.n(geojson_extent);const{LAT_MIN:constrain_feature_movement_LAT_MIN,LAT_MAX:constrain_feature_movement_LAT_MAX,LAT_RENDERED_MIN:constrain_feature_movement_LAT_RENDERED_MIN,LAT_RENDERED_MAX:constrain_feature_movement_LAT_RENDERED_MAX,LNG_MIN:constrain_feature_movement_LNG_MIN,LNG_MAX:constrain_feature_movement_LNG_MAX}=constants_namespaceObject;var constrain_feature_movement=function(geojsonFeatures,delta){let northInnerEdge=constrain_feature_movement_LAT_MIN,southInnerEdge=constrain_feature_movement_LAT_MAX,northOuterEdge=constrain_feature_movement_LAT_MIN,southOuterEdge=constrain_feature_movement_LAT_MAX,westEdge=constrain_feature_movement_LNG_MAX,eastEdge=constrain_feature_movement_LNG_MIN;geojsonFeatures.forEach(feature=>{const bounds=geojson_extent_default()(feature),featureSouthEdge=bounds[1],featureNorthEdge=bounds[3],featureWestEdge=bounds[0],featureEastEdge=bounds[2];featureSouthEdge>northInnerEdge&&(northInnerEdge=featureSouthEdge),featureNorthEdge<southInnerEdge&&(southInnerEdge=featureNorthEdge),featureNorthEdge>northOuterEdge&&(northOuterEdge=featureNorthEdge),featureSouthEdge<southOuterEdge&&(southOuterEdge=featureSouthEdge),featureWestEdge<westEdge&&(westEdge=featureWestEdge),featureEastEdge>eastEdge&&(eastEdge=featureEastEdge)});const constrainedDelta=delta;return northInnerEdge+constrainedDelta.lat>constrain_feature_movement_LAT_RENDERED_MAX&&(constrainedDelta.lat=constrain_feature_movement_LAT_RENDERED_MAX-northInnerEdge),northOuterEdge+constrainedDelta.lat>constrain_feature_movement_LAT_MAX&&(constrainedDelta.lat=constrain_feature_movement_LAT_MAX-northOuterEdge),southInnerEdge+constrainedDelta.lat<constrain_feature_movement_LAT_RENDERED_MIN&&(constrainedDelta.lat=constrain_feature_movement_LAT_RENDERED_MIN-southInnerEdge),southOuterEdge+constrainedDelta.lat<constrain_feature_movement_LAT_MIN&&(constrainedDelta.lat=constrain_feature_movement_LAT_MIN-southOuterEdge),westEdge+constrainedDelta.lng<=constrain_feature_movement_LNG_MIN&&(constrainedDelta.lng+=360*Math.ceil(Math.abs(constrainedDelta.lng)/360)),eastEdge+constrainedDelta.lng>=constrain_feature_movement_LNG_MAX&&(constrainedDelta.lng-=360*Math.ceil(Math.abs(constrainedDelta.lng)/360)),constrainedDelta},move_features=function(features,delta){const constrainedDelta=constrain_feature_movement(features.map(feature=>feature.toGeoJSON()),delta);features.forEach(feature=>{const currentCoordinates=feature.getCoordinates(),moveCoordinate=coord=>{const point={lng:coord[0]+constrainedDelta.lng,lat:coord[1]+constrainedDelta.lat};return[point.lng,point.lat]},moveRing=ring=>ring.map(coord=>moveCoordinate(coord)),moveMultiPolygon=multi=>multi.map(ring=>moveRing(ring));let nextCoordinates;feature.type===geojsonTypes.POINT?nextCoordinates=moveCoordinate(currentCoordinates):feature.type===geojsonTypes.LINE_STRING||feature.type===geojsonTypes.MULTI_POINT?nextCoordinates=currentCoordinates.map(moveCoordinate):feature.type===geojsonTypes.POLYGON||feature.type===geojsonTypes.MULTI_LINE_STRING?nextCoordinates=currentCoordinates.map(moveRing):feature.type===geojsonTypes.MULTI_POLYGON&&(nextCoordinates=currentCoordinates.map(moveMultiPolygon)),feature.incomingCoords(nextCoordinates)})};const SimpleSelect={onSetup:function(opts){const state={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:opts.featureIds||[]};return this.setSelected(state.initiallySelectedFeatureIds.filter(id=>void 0!==this.getFeature(id))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),state},fireUpdate:function(){this.map.fire(constants_events.UPDATE,{action:updateActions.MOVE,features:this.getSelected().map(f=>f.toGeoJSON())})},fireActionable:function(){const selectedFeatures=this.getSelected(),multiFeatures=selectedFeatures.filter(feature=>this.isInstanceOf("MultiFeature",feature));let combineFeatures=!1;if(selectedFeatures.length>1){combineFeatures=!0;const featureType=selectedFeatures[0].type.replace("Multi","");selectedFeatures.forEach(feature=>{feature.type.replace("Multi","")!==featureType&&(combineFeatures=!1)})}const uncombineFeatures=multiFeatures.length>0,trash=selectedFeatures.length>0;this.setActionableState({combineFeatures:combineFeatures,uncombineFeatures:uncombineFeatures,trash:trash})},getUniqueIds:function(allFeatures){if(!allFeatures.length)return[];return allFeatures.map(s=>s.properties.id).filter(id=>void 0!==id).reduce((memo,id)=>(memo.add(id),memo),new string_set).values()},stopExtendedInteractions:function(state){state.boxSelectElement&&(state.boxSelectElement.parentNode&&state.boxSelectElement.parentNode.removeChild(state.boxSelectElement),state.boxSelectElement=null),this.map.dragPan.enable(),state.boxSelecting=!1,state.canBoxSelect=!1,state.dragMoving=!1,state.canDragMove=!1},onStop:function(){double_click_zoom.enable(this)},onMouseMove:function(state){return this.stopExtendedInteractions(state)},onMouseOut:function(state){if(state.dragMoving)return this.fireUpdate()}};SimpleSelect.onTap=SimpleSelect.onClick=function(state,e){return noTarget(e)?this.clickAnywhere(state,e):isOfMetaType(constants_meta.VERTEX)(e)?this.clickOnVertex(state,e):function(e){return!!e.featureTarget&&(!!e.featureTarget.properties&&e.featureTarget.properties.meta===constants_meta.FEATURE)}(e)?this.clickOnFeature(state,e):void 0},SimpleSelect.clickAnywhere=function(state){const wasSelected=this.getSelectedIds();wasSelected.length&&(this.clearSelectedFeatures(),wasSelected.forEach(id=>this.doRender(id))),double_click_zoom.enable(this),this.stopExtendedInteractions(state)},SimpleSelect.clickOnVertex=function(state,e){this.changeMode(constants_modes.DIRECT_SELECT,{featureId:e.featureTarget.properties.parent,coordPath:e.featureTarget.properties.coord_path,startPos:e.lngLat}),this.updateUIClasses({mouse:cursors.MOVE})},SimpleSelect.startOnActiveFeature=function(state,e){this.stopExtendedInteractions(state),this.map.dragPan.disable(),this.doRender(e.featureTarget.properties.id),state.canDragMove=!0,state.dragMoveLocation=e.lngLat},SimpleSelect.clickOnFeature=function(state,e){double_click_zoom.disable(this),this.stopExtendedInteractions(state);const isShiftClick=isShiftDown(e),selectedFeatureIds=this.getSelectedIds(),featureId=e.featureTarget.properties.id,isFeatureSelected=this.isSelected(featureId);if(!isShiftClick&&isFeatureSelected&&this.getFeature(featureId).type!==geojsonTypes.POINT)return this.changeMode(constants_modes.DIRECT_SELECT,{featureId:featureId});isFeatureSelected&&isShiftClick?(this.deselect(featureId),this.updateUIClasses({mouse:cursors.POINTER}),1===selectedFeatureIds.length&&double_click_zoom.enable(this)):!isFeatureSelected&&isShiftClick?(this.select(featureId),this.updateUIClasses({mouse:cursors.MOVE})):isFeatureSelected||isShiftClick||(selectedFeatureIds.forEach(id=>this.doRender(id)),this.setSelected(featureId),this.updateUIClasses({mouse:cursors.MOVE})),this.doRender(featureId)},SimpleSelect.onMouseDown=function(state,e){return isActiveFeature(e)?this.startOnActiveFeature(state,e):this.drawConfig.boxSelect&&function(e){return!!e.originalEvent&&(!!e.originalEvent.shiftKey&&0===e.originalEvent.button)}(e)?this.startBoxSelect(state,e):void 0},SimpleSelect.startBoxSelect=function(state,e){this.stopExtendedInteractions(state),this.map.dragPan.disable(),state.boxSelectStartLocation=mouse_event_point(e.originalEvent,this.map.getContainer()),state.canBoxSelect=!0},SimpleSelect.onTouchStart=function(state,e){if(isActiveFeature(e))return this.startOnActiveFeature(state,e)},SimpleSelect.onDrag=function(state,e){return state.canDragMove?this.dragMove(state,e):this.drawConfig.boxSelect&&state.canBoxSelect?this.whileBoxSelect(state,e):void 0},SimpleSelect.whileBoxSelect=function(state,e){state.boxSelecting=!0,this.updateUIClasses({mouse:cursors.ADD}),state.boxSelectElement||(state.boxSelectElement=document.createElement("div"),state.boxSelectElement.classList.add(constants_classes.BOX_SELECT),this.map.getContainer().appendChild(state.boxSelectElement));const current=mouse_event_point(e.originalEvent,this.map.getContainer()),minX=Math.min(state.boxSelectStartLocation.x,current.x),maxX=Math.max(state.boxSelectStartLocation.x,current.x),minY=Math.min(state.boxSelectStartLocation.y,current.y),maxY=Math.max(state.boxSelectStartLocation.y,current.y),translateValue=`translate(${minX}px, ${minY}px)`;state.boxSelectElement.style.transform=translateValue,state.boxSelectElement.style.WebkitTransform=translateValue,state.boxSelectElement.style.width=maxX-minX+"px",state.boxSelectElement.style.height=maxY-minY+"px"},SimpleSelect.dragMove=function(state,e){state.dragMoving=!0,e.originalEvent.stopPropagation();const delta={lng:e.lngLat.lng-state.dragMoveLocation.lng,lat:e.lngLat.lat-state.dragMoveLocation.lat};move_features(this.getSelected(),delta),state.dragMoveLocation=e.lngLat},SimpleSelect.onMouseUp=function(state,e){if(state.dragMoving)this.fireUpdate();else if(state.boxSelecting){const bbox=[state.boxSelectStartLocation,mouse_event_point(e.originalEvent,this.map.getContainer())],featuresInBox=this.featuresAt(null,bbox,"click"),idsToSelect=this.getUniqueIds(featuresInBox).filter(id=>!this.isSelected(id));idsToSelect.length&&(this.select(idsToSelect),idsToSelect.forEach(id=>this.doRender(id)),this.updateUIClasses({mouse:cursors.MOVE}))}this.stopExtendedInteractions(state)},SimpleSelect.toDisplayFeatures=function(state,geojson,display){geojson.properties.active=this.isSelected(geojson.properties.id)?activeStates.ACTIVE:activeStates.INACTIVE,display(geojson),this.fireActionable(),geojson.properties.active===activeStates.ACTIVE&&geojson.geometry.type!==geojsonTypes.POINT&&create_supplementary_points(geojson).forEach(display)},SimpleSelect.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},SimpleSelect.onCombineFeatures=function(){const selectedFeatures=this.getSelected();if(0===selectedFeatures.length||selectedFeatures.length<2)return;const coordinates=[],featuresCombined=[],featureType=selectedFeatures[0].type.replace("Multi","");for(let i=0;i<selectedFeatures.length;i++){const feature=selectedFeatures[i];if(feature.type.replace("Multi","")!==featureType)return;feature.type.includes("Multi")?feature.getCoordinates().forEach(subcoords=>{coordinates.push(subcoords)}):coordinates.push(feature.getCoordinates()),featuresCombined.push(feature.toGeoJSON())}if(featuresCombined.length>1){const multiFeature=this.newFeature({type:geojsonTypes.FEATURE,properties:featuresCombined[0].properties,geometry:{type:"Multi"+featureType,coordinates:coordinates}});this.addFeature(multiFeature),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([multiFeature.id]),this.map.fire(constants_events.COMBINE_FEATURES,{createdFeatures:[multiFeature.toGeoJSON()],deletedFeatures:featuresCombined})}this.fireActionable()},SimpleSelect.onUncombineFeatures=function(){const selectedFeatures=this.getSelected();if(0===selectedFeatures.length)return;const createdFeatures=[],featuresUncombined=[];for(let i=0;i<selectedFeatures.length;i++){const feature=selectedFeatures[i];this.isInstanceOf("MultiFeature",feature)&&(feature.getFeatures().forEach(subFeature=>{this.addFeature(subFeature),subFeature.properties=feature.properties,createdFeatures.push(subFeature.toGeoJSON()),this.select([subFeature.id])}),this.deleteFeature(feature.id,{silent:!0}),featuresUncombined.push(feature.toGeoJSON()))}createdFeatures.length>1&&this.map.fire(constants_events.UNCOMBINE_FEATURES,{createdFeatures:createdFeatures,deletedFeatures:featuresUncombined}),this.fireActionable()};var simple_select=SimpleSelect;const direct_select_isVertex=isOfMetaType(constants_meta.VERTEX),isMidpoint=isOfMetaType(constants_meta.MIDPOINT),DirectSelect={fireUpdate:function(){this.map.fire(constants_events.UPDATE,{action:updateActions.CHANGE_COORDINATES,features:this.getSelected().map(f=>f.toGeoJSON())})},fireActionable:function(state){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:state.selectedCoordPaths.length>0})},startDragging:function(state,e){this.map.dragPan.disable(),state.canDragMove=!0,state.dragMoveLocation=e.lngLat},stopDragging:function(state){this.map.dragPan.enable(),state.dragMoving=!1,state.canDragMove=!1,state.dragMoveLocation=null},onVertex:function(state,e){this.startDragging(state,e);const about=e.featureTarget.properties,selectedIndex=state.selectedCoordPaths.indexOf(about.coord_path);isShiftDown(e)||-1!==selectedIndex?isShiftDown(e)&&-1===selectedIndex&&state.selectedCoordPaths.push(about.coord_path):state.selectedCoordPaths=[about.coord_path];const selectedCoordinates=this.pathsToCoordinates(state.featureId,state.selectedCoordPaths);this.setSelectedCoordinates(selectedCoordinates)},onMidpoint:function(state,e){this.startDragging(state,e);const about=e.featureTarget.properties;state.feature.addCoordinate(about.coord_path,about.lng,about.lat),this.fireUpdate(),state.selectedCoordPaths=[about.coord_path]},pathsToCoordinates:function(featureId,paths){return paths.map(coord_path=>({feature_id:featureId,coord_path:coord_path}))},onFeature:function(state,e){0===state.selectedCoordPaths.length?this.startDragging(state,e):this.stopDragging(state)},dragFeature:function(state,e,delta){move_features(this.getSelected(),delta),state.dragMoveLocation=e.lngLat},dragVertex:function(state,e,delta){const selectedCoords=state.selectedCoordPaths.map(coord_path=>state.feature.getCoordinate(coord_path)),selectedCoordPoints=selectedCoords.map(coords=>({type:geojsonTypes.FEATURE,properties:{},geometry:{type:geojsonTypes.POINT,coordinates:coords}})),constrainedDelta=constrain_feature_movement(selectedCoordPoints,delta);for(let i=0;i<selectedCoords.length;i++){const coord=selectedCoords[i];state.feature.updateCoordinate(state.selectedCoordPaths[i],coord[0]+constrainedDelta.lng,coord[1]+constrainedDelta.lat)}},clickNoTarget:function(){this.changeMode(constants_modes.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(constants_modes.SIMPLE_SELECT)},clickActiveFeature:function(state){state.selectedCoordPaths=[],this.clearSelectedCoordinates(),state.feature.changed()},onSetup:function(opts){const featureId=opts.featureId,feature=this.getFeature(featureId);if(!feature)throw new Error("You must provide a featureId to enter direct_select mode");if(feature.type===geojsonTypes.POINT)throw new TypeError("direct_select mode doesn't handle point features");const state={featureId:featureId,feature:feature,dragMoveLocation:opts.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:opts.coordPath?[opts.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(featureId,state.selectedCoordPaths)),this.setSelected(featureId),double_click_zoom.disable(this),this.setActionableState({trash:!0}),state},onStop:function(){double_click_zoom.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(state,geojson,push){state.featureId===geojson.properties.id?(geojson.properties.active=activeStates.ACTIVE,push(geojson),create_supplementary_points(geojson,{map:this.map,midpoints:!0,selectedPaths:state.selectedCoordPaths}).forEach(push)):(geojson.properties.active=activeStates.INACTIVE,push(geojson)),this.fireActionable(state)},onTrash:function(state){state.selectedCoordPaths.sort((a,b)=>b.localeCompare(a,"en",{numeric:!0})).forEach(id=>state.feature.removeCoordinate(id)),this.fireUpdate(),state.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(state),!1===state.feature.isValid()&&(this.deleteFeature([state.featureId]),this.changeMode(constants_modes.SIMPLE_SELECT,{}))},onMouseMove:function(state,e){const isFeature=isActiveFeature(e),onVertex=direct_select_isVertex(e),noCoords=0===state.selectedCoordPaths.length;isFeature&&noCoords||onVertex&&!noCoords?this.updateUIClasses({mouse:cursors.MOVE}):this.updateUIClasses({mouse:cursors.NONE}),this.stopDragging(state)},onMouseOut:function(state){state.dragMoving&&this.fireUpdate()}};DirectSelect.onTouchStart=DirectSelect.onMouseDown=function(state,e){return direct_select_isVertex(e)?this.onVertex(state,e):isActiveFeature(e)?this.onFeature(state,e):isMidpoint(e)?this.onMidpoint(state,e):void 0},DirectSelect.onDrag=function(state,e){if(!0!==state.canDragMove)return;state.dragMoving=!0,e.originalEvent.stopPropagation();const delta={lng:e.lngLat.lng-state.dragMoveLocation.lng,lat:e.lngLat.lat-state.dragMoveLocation.lat};state.selectedCoordPaths.length>0?this.dragVertex(state,e,delta):this.dragFeature(state,e,delta),state.dragMoveLocation=e.lngLat},DirectSelect.onClick=function(state,e){return noTarget(e)?this.clickNoTarget(state,e):isActiveFeature(e)?this.clickActiveFeature(state,e):isInactiveFeature(e)?this.clickInactive(state,e):void this.stopDragging(state)},DirectSelect.onTap=function(state,e){return noTarget(e)?this.clickNoTarget(state,e):isActiveFeature(e)?this.clickActiveFeature(state,e):isInactiveFeature(e)?this.clickInactive(state,e):void 0},DirectSelect.onTouchEnd=DirectSelect.onMouseUp=function(state){state.dragMoving&&this.fireUpdate(),this.stopDragging(state)};var direct_select=DirectSelect;const DrawPoint={onSetup:function(){const point=this.newFeature({type:geojsonTypes.FEATURE,properties:{},geometry:{type:geojsonTypes.POINT,coordinates:[]}});return this.addFeature(point),this.clearSelectedFeatures(),this.updateUIClasses({mouse:cursors.ADD}),this.activateUIButton(types.POINT),this.setActionableState({trash:!0}),{point:point}},stopDrawingAndRemove:function(state){this.deleteFeature([state.point.id],{silent:!0}),this.changeMode(constants_modes.SIMPLE_SELECT)}};DrawPoint.onTap=DrawPoint.onClick=function(state,e){this.updateUIClasses({mouse:cursors.MOVE}),state.point.updateCoordinate("",e.lngLat.lng,e.lngLat.lat),this.map.fire(constants_events.CREATE,{features:[state.point.toGeoJSON()]}),this.changeMode(constants_modes.SIMPLE_SELECT,{featureIds:[state.point.id]})},DrawPoint.onStop=function(state){this.activateUIButton(),state.point.getCoordinate().length||this.deleteFeature([state.point.id],{silent:!0})},DrawPoint.toDisplayFeatures=function(state,geojson,display){const isActivePoint=geojson.properties.id===state.point.id;if(geojson.properties.active=isActivePoint?activeStates.ACTIVE:activeStates.INACTIVE,!isActivePoint)return display(geojson)},DrawPoint.onTrash=DrawPoint.stopDrawingAndRemove,DrawPoint.onKeyUp=function(state,e){if(isEscapeKey(e)||isEnterKey(e))return this.stopDrawingAndRemove(state,e)};var draw_point=DrawPoint;var is_event_at_coordinates=function(event,coordinates){return!!event.lngLat&&(event.lngLat.lng===coordinates[0]&&event.lngLat.lat===coordinates[1])};const DrawPolygon={onSetup:function(){const polygon=this.newFeature({type:geojsonTypes.FEATURE,properties:{},geometry:{type:geojsonTypes.POLYGON,coordinates:[[]]}});return this.addFeature(polygon),this.clearSelectedFeatures(),double_click_zoom.disable(this),this.updateUIClasses({mouse:cursors.ADD}),this.activateUIButton(types.POLYGON),this.setActionableState({trash:!0}),{polygon:polygon,currentVertexPosition:0}},clickAnywhere:function(state,e){if(state.currentVertexPosition>0&&is_event_at_coordinates(e,state.polygon.coordinates[0][state.currentVertexPosition-1]))return this.changeMode(constants_modes.SIMPLE_SELECT,{featureIds:[state.polygon.id]});this.updateUIClasses({mouse:cursors.ADD}),state.polygon.updateCoordinate("0."+state.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),state.currentVertexPosition++,state.polygon.updateCoordinate("0."+state.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(state){return this.changeMode(constants_modes.SIMPLE_SELECT,{featureIds:[state.polygon.id]})},onMouseMove:function(state,e){state.polygon.updateCoordinate("0."+state.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),isVertex(e)&&this.updateUIClasses({mouse:cursors.POINTER})}};DrawPolygon.onTap=DrawPolygon.onClick=function(state,e){return isVertex(e)?this.clickOnVertex(state,e):this.clickAnywhere(state,e)},DrawPolygon.onKeyUp=function(state,e){isEscapeKey(e)?(this.deleteFeature([state.polygon.id],{silent:!0}),this.changeMode(constants_modes.SIMPLE_SELECT)):isEnterKey(e)&&this.changeMode(constants_modes.SIMPLE_SELECT,{featureIds:[state.polygon.id]})},DrawPolygon.onStop=function(state){this.updateUIClasses({mouse:cursors.NONE}),double_click_zoom.enable(this),this.activateUIButton(),void 0!==this.getFeature(state.polygon.id)&&(state.polygon.removeCoordinate("0."+state.currentVertexPosition),state.polygon.isValid()?this.map.fire(constants_events.CREATE,{features:[state.polygon.toGeoJSON()]}):(this.deleteFeature([state.polygon.id],{silent:!0}),this.changeMode(constants_modes.SIMPLE_SELECT,{},{silent:!0})))},DrawPolygon.toDisplayFeatures=function(state,geojson,display){const isActivePolygon=geojson.properties.id===state.polygon.id;if(geojson.properties.active=isActivePolygon?activeStates.ACTIVE:activeStates.INACTIVE,!isActivePolygon)return display(geojson);if(0===geojson.geometry.coordinates.length)return;const coordinateCount=geojson.geometry.coordinates[0].length;if(!(coordinateCount<3)){if(geojson.properties.meta=constants_meta.FEATURE,display(create_vertex(state.polygon.id,geojson.geometry.coordinates[0][0],"0.0",!1)),coordinateCount>3){const endPos=geojson.geometry.coordinates[0].length-3;display(create_vertex(state.polygon.id,geojson.geometry.coordinates[0][endPos],"0."+endPos,!1))}if(coordinateCount<=4){const lineCoordinates=[[geojson.geometry.coordinates[0][0][0],geojson.geometry.coordinates[0][0][1]],[geojson.geometry.coordinates[0][1][0],geojson.geometry.coordinates[0][1][1]]];if(display({type:geojsonTypes.FEATURE,properties:geojson.properties,geometry:{coordinates:lineCoordinates,type:geojsonTypes.LINE_STRING}}),3===coordinateCount)return}return display(geojson)}},DrawPolygon.onTrash=function(state){this.deleteFeature([state.polygon.id],{silent:!0}),this.changeMode(constants_modes.SIMPLE_SELECT)};var draw_polygon=DrawPolygon;const DrawLineString={onSetup:function(opts){const featureId=(opts=opts||{}).featureId;let line,currentVertexPosition,direction="forward";if(featureId){if(line=this.getFeature(featureId),!line)throw new Error("Could not find a feature with the provided featureId");let from=opts.from;if(from&&"Feature"===from.type&&from.geometry&&"Point"===from.geometry.type&&(from=from.geometry),from&&"Point"===from.type&&from.coordinates&&2===from.coordinates.length&&(from=from.coordinates),!from||!Array.isArray(from))throw new Error("Please use the `from` property to indicate which point to continue the line from");const lastCoord=line.coordinates.length-1;if(line.coordinates[lastCoord][0]===from[0]&&line.coordinates[lastCoord][1]===from[1])currentVertexPosition=lastCoord+1,line.addCoordinate(currentVertexPosition,...line.coordinates[lastCoord]);else{if(line.coordinates[0][0]!==from[0]||line.coordinates[0][1]!==from[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");direction="backwards",currentVertexPosition=0,line.addCoordinate(currentVertexPosition,...line.coordinates[0])}}else line=this.newFeature({type:geojsonTypes.FEATURE,properties:{},geometry:{type:geojsonTypes.LINE_STRING,coordinates:[]}}),currentVertexPosition=0,this.addFeature(line);return this.clearSelectedFeatures(),double_click_zoom.disable(this),this.updateUIClasses({mouse:cursors.ADD}),this.activateUIButton(types.LINE),this.setActionableState({trash:!0}),{line:line,currentVertexPosition:currentVertexPosition,direction:direction}},clickAnywhere:function(state,e){if(state.currentVertexPosition>0&&is_event_at_coordinates(e,state.line.coordinates[state.currentVertexPosition-1])||"backwards"===state.direction&&is_event_at_coordinates(e,state.line.coordinates[state.currentVertexPosition+1]))return this.changeMode(constants_modes.SIMPLE_SELECT,{featureIds:[state.line.id]});this.updateUIClasses({mouse:cursors.ADD}),state.line.updateCoordinate(state.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),"forward"===state.direction?(state.currentVertexPosition++,state.line.updateCoordinate(state.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)):state.line.addCoordinate(0,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(state){return this.changeMode(constants_modes.SIMPLE_SELECT,{featureIds:[state.line.id]})},onMouseMove:function(state,e){state.line.updateCoordinate(state.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),isVertex(e)&&this.updateUIClasses({mouse:cursors.POINTER})}};DrawLineString.onTap=DrawLineString.onClick=function(state,e){if(isVertex(e))return this.clickOnVertex(state,e);this.clickAnywhere(state,e)},DrawLineString.onKeyUp=function(state,e){isEnterKey(e)?this.changeMode(constants_modes.SIMPLE_SELECT,{featureIds:[state.line.id]}):isEscapeKey(e)&&(this.deleteFeature([state.line.id],{silent:!0}),this.changeMode(constants_modes.SIMPLE_SELECT))},DrawLineString.onStop=function(state){double_click_zoom.enable(this),this.activateUIButton(),void 0!==this.getFeature(state.line.id)&&(state.line.removeCoordinate(""+state.currentVertexPosition),state.line.isValid()?this.map.fire(constants_events.CREATE,{features:[state.line.toGeoJSON()]}):(this.deleteFeature([state.line.id],{silent:!0}),this.changeMode(constants_modes.SIMPLE_SELECT,{},{silent:!0})))},DrawLineString.onTrash=function(state){this.deleteFeature([state.line.id],{silent:!0}),this.changeMode(constants_modes.SIMPLE_SELECT)},DrawLineString.toDisplayFeatures=function(state,geojson,display){const isActiveLine=geojson.properties.id===state.line.id;if(geojson.properties.active=isActiveLine?activeStates.ACTIVE:activeStates.INACTIVE,!isActiveLine)return display(geojson);geojson.geometry.coordinates.length<2||(geojson.properties.meta=constants_meta.FEATURE,display(create_vertex(state.line.id,geojson.geometry.coordinates["forward"===state.direction?geojson.geometry.coordinates.length-2:1],""+("forward"===state.direction?geojson.geometry.coordinates.length-2:1),!1)),display(geojson))};var src_modes={simple_select:simple_select,direct_select:direct_select,draw_point:draw_point,draw_polygon:draw_polygon,draw_line_string:DrawLineString};const defaultOptions={defaultMode:constants_modes.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}],modes:src_modes,controls:{},userProperties:!1},showControls={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},hideControls={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function addSources(styles,sourceBucket){return styles.map(style=>style.source?style:immutable_default()(style,{id:`${style.id}.${sourceBucket}`,source:"hot"===sourceBucket?sources.HOT:sources.COLD}))}var lodash_isequal=__webpack_require__(373),lodash_isequal_default=__webpack_require__.n(lodash_isequal),geojson_normalize=__webpack_require__(210),geojson_normalize_default=__webpack_require__.n(geojson_normalize),geojsonhint_lib=__webpack_require__(374),geojsonhint_lib_default=__webpack_require__.n(geojsonhint_lib);const featureTypes={Polygon:feature_types_polygon,LineString:line_string,Point:feature_types_point,MultiPolygon:multi_feature,MultiLineString:multi_feature,MultiPoint:multi_feature};var src_api=function(ctx,api){return api.modes=constants_modes,api.getFeatureIdsAt=function(point){return features_at.click({point:point},null,ctx).map(feature=>feature.properties.id)},api.getSelectedIds=function(){return ctx.store.getSelectedIds()},api.getSelected=function(){return{type:geojsonTypes.FEATURE_COLLECTION,features:ctx.store.getSelectedIds().map(id=>ctx.store.get(id)).map(feature=>feature.toGeoJSON())}},api.getSelectedPoints=function(){return{type:geojsonTypes.FEATURE_COLLECTION,features:ctx.store.getSelectedCoordinates().map(coordinate=>({type:geojsonTypes.FEATURE,properties:{},geometry:{type:geojsonTypes.POINT,coordinates:coordinate.coordinates}}))}},api.set=function(featureCollection){if(void 0===featureCollection.type||featureCollection.type!==geojsonTypes.FEATURE_COLLECTION||!Array.isArray(featureCollection.features))throw new Error("Invalid FeatureCollection");const renderBatch=ctx.store.createRenderBatch();let toDelete=ctx.store.getAllIds().slice();const newIds=api.add(featureCollection),newIdsLookup=new string_set(newIds);return toDelete=toDelete.filter(id=>!newIdsLookup.has(id)),toDelete.length&&api.delete(toDelete),renderBatch(),newIds},api.add=function(geojson){const errors=geojsonhint_lib_default.a.hint(geojson,{precisionWarning:!1}).filter(e=>"message"!==e.level);if(errors.length)throw new Error(errors[0].message);const ids=JSON.parse(JSON.stringify(geojson_normalize_default()(geojson))).features.map(feature=>{if(feature.id=feature.id||hat_default()(),null===feature.geometry)throw new Error("Invalid geometry: null");if(void 0===ctx.store.get(feature.id)||ctx.store.get(feature.id).type!==feature.geometry.type){const Model=featureTypes[feature.geometry.type];if(void 0===Model)throw new Error(`Invalid geometry type: ${feature.geometry.type}.`);const internalFeature=new Model(ctx,feature);ctx.store.add(internalFeature)}else{const internalFeature=ctx.store.get(feature.id);internalFeature.properties=feature.properties,lodash_isequal_default()(internalFeature.getCoordinates(),feature.geometry.coordinates)||internalFeature.incomingCoords(feature.geometry.coordinates)}return feature.id});return ctx.store.render(),ids},api.get=function(id){const feature=ctx.store.get(id);if(feature)return feature.toGeoJSON()},api.getAll=function(){return{type:geojsonTypes.FEATURE_COLLECTION,features:ctx.store.getAll().map(feature=>feature.toGeoJSON())}},api.delete=function(featureIds){return ctx.store.delete(featureIds,{silent:!0}),api.getMode()!==constants_modes.DIRECT_SELECT||ctx.store.getSelectedIds().length?ctx.store.render():ctx.events.changeMode(constants_modes.SIMPLE_SELECT,void 0,{silent:!0}),api},api.deleteAll=function(){return ctx.store.delete(ctx.store.getAllIds(),{silent:!0}),api.getMode()===constants_modes.DIRECT_SELECT?ctx.events.changeMode(constants_modes.SIMPLE_SELECT,void 0,{silent:!0}):ctx.store.render(),api},api.changeMode=function(mode,modeOptions={}){return mode===constants_modes.SIMPLE_SELECT&&api.getMode()===constants_modes.SIMPLE_SELECT?(a=modeOptions.featureIds||[],b=ctx.store.getSelectedIds(),a.length===b.length&&JSON.stringify(a.map(id=>id).sort())===JSON.stringify(b.map(id=>id).sort())||(ctx.store.setSelected(modeOptions.featureIds,{silent:!0}),ctx.store.render()),api):(mode===constants_modes.DIRECT_SELECT&&api.getMode()===constants_modes.DIRECT_SELECT&&modeOptions.featureId===ctx.store.getSelectedIds()[0]||ctx.events.changeMode(mode,modeOptions,{silent:!0}),api);var a,b},api.getMode=function(){return ctx.events.getMode()},api.trash=function(){return ctx.events.trash({silent:!0}),api},api.combineFeatures=function(){return ctx.events.combineFeatures({silent:!0}),api},api.uncombineFeatures=function(){return ctx.events.uncombineFeatures({silent:!0}),api},api.setFeatureProperty=function(featureId,property,value){return ctx.store.setFeatureProperty(featureId,property,value),api},api};const setupDraw=function(options,api){const ctx={options:options=function(options={}){let withDefaults=immutable_default()(options);return options.controls||(withDefaults.controls={}),!1===options.displayControlsDefault?withDefaults.controls=immutable_default()(hideControls,options.controls):withDefaults.controls=immutable_default()(showControls,options.controls),withDefaults=immutable_default()(defaultOptions,withDefaults),withDefaults.styles=addSources(withDefaults.styles,"cold").concat(addSources(withDefaults.styles,"hot")),withDefaults}(options)};api=src_api(ctx,api),ctx.api=api;const setup=src_setup(ctx);return api.onAdd=setup.onAdd,api.onRemove=setup.onRemove,api.types=types,api.options=options,api};function MapboxDraw(options){setupDraw(options,this)}MapboxDraw.modes=src_modes;var mapbox_gl_draw=MapboxDraw,dist=__webpack_require__(379),dist_default=__webpack_require__.n(dist),distance=__webpack_require__(119),distance_default=__webpack_require__.n(distance),_turf_circle=__webpack_require__(203),circle_default=__webpack_require__.n(_turf_circle);const DrawCircle={onSetup(){const circle=this.newFeature({type:"Feature",properties:{center:null,radiusKm:0},geometry:{type:"Polygon",coordinates:[[]]}});return this.addFeature(circle),this.clearSelectedFeatures(),this.updateUIClasses({mouse:"add"}),this.setActionableState({trash:!0}),{circle:circle}},onKeyUp(state,e){27===e.keyCode&&(state.circle.properties.center=null,state.circle.properties.radiusKm=0,state.circle.incomingCoords([[]]))},onClick(state,e){state.circle.properties.center?(this.updateUIClasses({mouse:"pointer"}),state.circle.properties.radiusKm=distance_default()(state.circle.properties.center,[e.lngLat.lng,e.lngLat.lat]),this.changeMode("simple_select",{featuresId:state.circle.id})):state.circle.properties.center=[e.lngLat.lng,e.lngLat.lat]},onMouseMove(state,e){if(!state.circle.properties.center)return;const mouseLocation=[e.lngLat.lng,e.lngLat.lat];state.circle.properties.radiusKm=distance_default()(state.circle.properties.center,mouseLocation);const newCircleFeature=circle_default()(state.circle.properties.center,state.circle.properties.radiusKm);state.circle.incomingCoords(newCircleFeature.geometry.coordinates)},onStop(state){this.updateUIClasses({mouse:"none"}),this.activateUIButton(),void 0!==this.getFeature(state.circle.id)&&(state.circle.properties.center&&state.circle.properties.radiusKm>0?this.map.fire("draw.create",{features:[state.circle.toGeoJSON()]}):(this.deleteFeature([state.circle.id],{silent:!0}),this.changeMode("simple_select",{},{silent:!0})))},toDisplayFeatures(state,geojson,display){if(state.circle.properties.center)return geojson.properties.active="true",display(geojson)},onTrash(state){this.deleteFeature([state.circle.id],{silent:!0}),this.changeMode("simple_select")}};function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const noop=()=>{};class draw_tooltip_DrawTooltip extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),_defineProperty(this,"_popoverRef",external_kbnSharedDeps_React_default.a.createRef()),_defineProperty(this,"state",{x:void 0,y:void 0,isOpen:!1}),_defineProperty(this,"_hideTooltip",()=>{this._updateTooltipLocation.cancel(),this.setState({isOpen:!1})}),_defineProperty(this,"_updateTooltipLocation",external_kbnSharedDeps_Lodash_default.a.throttle(({lngLat:lngLat})=>{const mouseLocation=this.props.mbMap.project(lngLat);this.setState({isOpen:!0,x:mouseLocation.x,y:mouseLocation.y})},100))}componentDidMount(){this.props.mbMap.on("mousemove",this._updateTooltipLocation),this.props.mbMap.on("mouseout",this._hideTooltip)}componentDidUpdate(){this._popoverRef.current&&this._popoverRef.current.positionPopoverFluid()}componentWillUnmount(){this.props.mbMap.off("mousemove",this._updateTooltipLocation),this.props.mbMap.off("mouseout",this._hideTooltip),this._updateTooltipLocation.cancel()}render(){if(void 0===this.state.x||void 0===this.state.y)return null;let instructions;if(this.props.drawType===constants.DRAW_TYPE.BOUNDS)instructions=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.drawTooltip.boundsInstructions",{defaultMessage:"Click to start rectangle. Move mouse to adjust rectangle size. Click again to finish."});else if(this.props.drawType===constants.DRAW_TYPE.DISTANCE)instructions=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.drawTooltip.distanceInstructions",{defaultMessage:"Click to set point. Move mouse to adjust distance. Click to finish."});else{if(this.props.drawType!==constants.DRAW_TYPE.POLYGON)return null;instructions=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.drawTooltip.polygonInstructions",{defaultMessage:"Click to start shape. Click to add vertex. Double click to finish."})}const tooltipAnchor=external_kbnSharedDeps_React_default.a.createElement("div",{style:{height:"26px",width:"26px",background:"transparent"}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{id:"drawInstructionsTooltip",button:tooltipAnchor,anchorPosition:"rightCenter",isOpen:this.state.isOpen,closePopover:noop,ref:this._popoverRef,style:{pointerEvents:"none",transform:`translate(${this.state.x-13}px, ${this.state.y-13}px)`}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{color:"subdued",size:"xs"},instructions))}}function draw_control_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const mbDrawModes=mapbox_gl_draw.modes;mbDrawModes.draw_rectangle=dist_default.a,mbDrawModes.draw_circle=DrawCircle;class draw_control_DrawControl extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),draw_control_defineProperty(this,"_isMounted",!1),draw_control_defineProperty(this,"_mbDrawControlAdded",!1),draw_control_defineProperty(this,"_mbDrawControl",new mapbox_gl_draw({displayControlsDefault:!1,modes:mbDrawModes})),draw_control_defineProperty(this,"_syncDrawControl",external_kbnSharedDeps_Lodash_default.a.debounce(()=>{this._isMounted&&(this.props.drawType?this._updateDrawControl():this._removeDrawControl())},0))}componentDidUpdate(){this._syncDrawControl()}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1,this._removeDrawControl()}_removeDrawControl(){this._mbDrawControlAdded&&(this.props.mbMap.getCanvas().style.cursor="",this.props.mbMap.off("draw.create",this.props.onDraw),this.props.mbMap.removeControl(this._mbDrawControl),this._mbDrawControlAdded=!1)}_updateDrawControl(){if(!this.props.drawType)return;this._mbDrawControlAdded||(this.props.mbMap.addControl(this._mbDrawControl),this._mbDrawControlAdded=!0,this.props.mbMap.getCanvas().style.cursor="crosshair",this.props.mbMap.on("draw.create",this.props.onDraw));const drawMode=this._mbDrawControl.getMode();"draw_rectangle"!==drawMode&&this.props.drawType===constants.DRAW_TYPE.BOUNDS?this._mbDrawControl.changeMode("draw_rectangle"):"draw_circle"!==drawMode&&this.props.drawType===constants.DRAW_TYPE.DISTANCE?this._mbDrawControl.changeMode("draw_circle"):drawMode!==this._mbDrawControl.modes.DRAW_POLYGON&&this.props.drawType===constants.DRAW_TYPE.POLYGON&&this._mbDrawControl.changeMode(this._mbDrawControl.modes.DRAW_POLYGON)}render(){return this.props.drawType?external_kbnSharedDeps_React_default.a.createElement(draw_tooltip_DrawTooltip,{mbMap:this.props.mbMap,drawType:this.props.drawType}):null}}class draw_filter_control_DrawFilterControl extends external_kbnSharedDeps_React_.Component{constructor(...args){var obj,key,value;super(...args),value=async e=>{if(!(e.features.length&&this.props.drawState&&this.props.drawState.geoFieldName&&this.props.drawState.indexPatternId))return;let filter;if(this.props.drawState.drawType===constants.DRAW_TYPE.DISTANCE){const circle=e.features[0],distanceKm=external_kbnSharedDeps_Lodash_default.a.round(circle.properties.radiusKm,circle.properties.radiusKm>10?0:2);let precision=2;distanceKm<=1?precision=5:distanceKm<=10?precision=4:distanceKm<=100&&(precision=3),filter=Object(elasticsearch_util.f)({alias:this.props.drawState.filterLabel?this.props.drawState.filterLabel:"",distanceKm:distanceKm,geoFieldName:this.props.drawState.geoFieldName,indexPatternId:this.props.drawState.indexPatternId,point:[external_kbnSharedDeps_Lodash_default.a.round(circle.properties.center[0],precision),external_kbnSharedDeps_Lodash_default.a.round(circle.properties.center[1],precision)]})}else{const geometry=e.features[0].geometry;Object(elasticsearch_util.p)(geometry.coordinates),filter=Object(elasticsearch_util.h)({geometry:this.props.drawState.drawType===constants.DRAW_TYPE.BOUNDS?Object(elasticsearch_util.k)(geometry):geometry,indexPatternId:this.props.drawState.indexPatternId,geoFieldName:this.props.drawState.geoFieldName,geometryLabel:this.props.drawState.geometryLabel?this.props.drawState.geometryLabel:"",relation:this.props.drawState.relation?this.props.drawState.relation:constants.ES_SPATIAL_RELATIONS.INTERSECTS})}try{await this.props.addFilters([filter],this.props.drawState.actionId)}catch(error){Object(kibana_services.K)().addWarning(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.drawFilterControl.unableToCreatFilter",{defaultMessage:"Unable to create filter, error: '{errorMsg}'.",values:{errorMsg:error.message}}))}finally{this.props.disableDrawState()}},(key="_onDraw")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}render(){return external_kbnSharedDeps_React_default.a.createElement(draw_control_DrawControl,{drawType:this.props.isDrawingFilter&&this.props.drawState?this.props.drawState.drawType:void 0,onDraw:this._onDraw,mbMap:this.props.mbMap})}}const connected=Object(lib.connect)((function(state){return{isDrawingFilter:Object(map_selectors.L)(state),drawState:Object(map_selectors.e)(state)}}),(function(dispatch){return{disableDrawState(){dispatch(Object(public_actions.Mb)(null))}}}))(draw_filter_control_DrawFilterControl);function scale_control_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class scale_control_ScaleControl extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),scale_control_defineProperty(this,"_isMounted",!1),scale_control_defineProperty(this,"state",{label:"",width:0}),scale_control_defineProperty(this,"_onUpdate",()=>{if(!this._isMounted)return;const centerHeight=this.props.mbMap.getContainer().clientHeight/2,leftLatLon=this.props.mbMap.unproject([0,centerHeight]),rightLatLon=this.props.mbMap.unproject([110,centerHeight]),maxDistanceMeters=leftLatLon.distanceTo(rightLatLon);maxDistanceMeters>=1e3?this._setScale(maxDistanceMeters/1e3,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.kilometersAbbr",{defaultMessage:"km"})):this._setScale(maxDistanceMeters,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.metersAbbr",{defaultMessage:"m"}))})}componentDidMount(){this._isMounted=!0,this.props.mbMap.on("move",this._onUpdate),this._onUpdate()}componentWillUnmount(){this._isMounted=!1,this.props.mbMap.off("move",this._onUpdate)}_setScale(maxDistance,unit){const scaleDistance=function(value){const orderOfMagnitude=Math.floor(Math.log10(value)),pow10=Math.pow(10,orderOfMagnitude),distance=value/pow10;return distance<1?pow10*(Math.round(10*distance)/10):distance>=10?10*pow10:distance>=5?5*pow10:distance>=3?3*pow10:Math.floor(distance)*pow10}(maxDistance),zoom=this.props.mbMap.getZoom(),bounds=this.props.mbMap.getBounds();let label=`${scaleDistance} ${unit}`;(zoom<=4||zoom<=6&&(bounds.getNorth()>23.5||bounds.getSouth()<-23.5)||zoom<=8&&(bounds.getNorth()>45||bounds.getSouth()<-45))&&(label="~"+label),this.setState({width:scaleDistance/maxDistance*110,label:label})}render(){return external_kbnSharedDeps_React_default.a.createElement("div",{className:classnames_default()("mapScaleControl",{mapScaleControlFullScreen:this.props.isFullScreen}),style:{width:this.state.width+"px"}},this.state.label)}}function isUrlDrilldown(action){return"URL_DRILLDOWN"===action.type}function toValueClickDataFormat(key,value){return[{table:{columns:[{id:key,meta:{type:"unknown",field:key},name:key}],rows:[{[key]:value}]},column:0,row:0,value:value}]}function feature_properties_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class feature_properties_FeatureProperties extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args),feature_properties_defineProperty(this,"state",{properties:null,actions:[],loadPropertiesErrorMsg:null,prevWidth:null,prevHeight:null}),feature_properties_defineProperty(this,"_loadProperties",async()=>{this._fetchProperties({nextFeatureId:this.props.featureId,nextLayerId:this.props.layerId,mbProperties:this.props.mbProperties})}),feature_properties_defineProperty(this,"_showFilterActions",tooltipProperty=>{this.props.showFilterActions(this._renderFilterActions(tooltipProperty))}),feature_properties_defineProperty(this,"_fetchProperties",async({nextLayerId:nextLayerId,nextFeatureId:nextFeatureId,mbProperties:mbProperties})=>{if(this.prevLayerId===nextLayerId&&this.prevFeatureId===nextFeatureId)return;let properties;this.prevLayerId=nextLayerId,this.prevFeatureId=nextFeatureId,this.setState({properties:void 0,loadPropertiesErrorMsg:void 0}),this.state.properties&&this._node&&this.setState({prevWidth:this._node.clientWidth,prevHeight:this._node.clientHeight});try{properties=await this.props.loadFeatureProperties({layerId:nextLayerId,featureId:nextFeatureId,mbProperties:mbProperties})}catch(error){return void(this._isMounted&&this.setState({properties:[],loadPropertiesErrorMsg:error.message}))}this.prevLayerId!==nextLayerId&&this.prevFeatureId!==nextFeatureId||this._isMounted&&this.setState({properties:properties})})}componentDidMount(){this._isMounted=!0,this.prevLayerId=void 0,this.prevFeatureId=void 0,this._loadProperties(),this._loadActions()}componentDidUpdate(){this._loadProperties()}componentWillUnmount(){this._isMounted=!1}async _loadActions(){if(!this.props.getFilterActions)return;const actions=await this.props.getFilterActions();this._isMounted&&this.setState({actions:actions})}_renderFilterActions(tooltipProperty){const panel={id:0,items:this.state.actions.filter(action=>!isUrlDrilldown(action)||!!this.props.onSingleValueTrigger).map(action=>{const actionContext=this.props.getActionContext(),iconType=action.getIconType(actionContext),name=action.getDisplayName(actionContext);return{name:name||action.id,icon:iconType?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:iconType}):null,onClick:async()=>{if(this.props.onCloseTooltip(),isUrlDrilldown(action))this.props.onSingleValueTrigger(action.id,tooltipProperty.getPropertyKey(),tooltipProperty.getRawValue());else{const filters=await tooltipProperty.getESFilters();this.props.addFilters(filters,action.id)}},"data-test-subj":"mapFilterActionButton__"+name}})};return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement("table",{className:"eui-yScrollWithShadows mapFeatureTooltip_table",ref:node=>this._node=node},external_kbnSharedDeps_React_default.a.createElement("tbody",null,external_kbnSharedDeps_React_default.a.createElement("tr",null,external_kbnSharedDeps_React_default.a.createElement("td",{className:"eui-textOverflowWrap mapFeatureTooltip__propertyLabel"},tooltipProperty.getPropertyName()),external_kbnSharedDeps_React_default.a.createElement("td",{className:"eui-textOverflowWrap",dangerouslySetInnerHTML:{__html:tooltipProperty.getHtmlDisplayValue()}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiContextMenu,{initialPanelId:0,panels:[panel]}))}_renderFilterCell(tooltipProperty){if(!this.props.showFilterButtons||!tooltipProperty.isFilterable())return external_kbnSharedDeps_React_default.a.createElement("td",null);const applyFilterButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"xs",title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.tooltip.filterOnPropertyTitle",{defaultMessage:"Filter on property"}),onClick:async()=>{this.props.onCloseTooltip();const filters=await tooltipProperty.getESFilters();this.props.addFilters(filters,data_public_.ACTION_GLOBAL_APPLY_FILTER)},"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.tooltip.filterOnPropertyAriaLabel",{defaultMessage:"Filter on property"}),"data-test-subj":"mapTooltipCreateFilterButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"filter"}));return 0===this.state.actions.length||1===this.state.actions.length&&this.state.actions[0].id===data_public_.ACTION_GLOBAL_APPLY_FILTER?external_kbnSharedDeps_React_default.a.createElement("td",null,applyFilterButton):external_kbnSharedDeps_React_default.a.createElement("td",{className:"mapFeatureTooltip_actionsRow"},external_kbnSharedDeps_React_default.a.createElement("span",null,applyFilterButton,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"xs",title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.tooltip.viewActionsTitle",{defaultMessage:"View filter actions"}),onClick:()=>{this._showFilterActions(tooltipProperty)},"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.tooltip.viewActionsTitle",{defaultMessage:"View filter actions"}),"data-test-subj":"mapTooltipMoreActionsButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"arrowRight"}))))}render(){if(this.state.loadPropertiesErrorMsg)return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.tooltip.unableToLoadContentTitle",{defaultMessage:"Unable to load tooltip content"}),color:"danger",iconType:"alert",size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,this.state.loadPropertiesErrorMsg));if(!this.state.properties){const loadingMsg=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.tooltip.loadingMsg",{defaultMessage:"Loading"}),style={};return this.state.prevWidth&&this.state.prevHeight&&(style.width=this.state.prevWidth,style.height=this.state.prevHeight),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextAlign,{textAlign:"center",style:style},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"m"}),loadingMsg)}const rows=this.state.properties.map(tooltipProperty=>{const label=tooltipProperty.getPropertyName();return external_kbnSharedDeps_React_default.a.createElement("tr",{key:label,className:"mapFeatureTooltip_row"},external_kbnSharedDeps_React_default.a.createElement("td",{className:"eui-textOverflowWrap mapFeatureTooltip__propertyLabel"},label),external_kbnSharedDeps_React_default.a.createElement("td",{className:"eui-textOverflowWrap",dangerouslySetInnerHTML:{__html:tooltipProperty.getHtmlDisplayValue()}}),this._renderFilterCell(tooltipProperty))});return external_kbnSharedDeps_React_default.a.createElement("table",{className:"eui-yScrollWithShadows mapFeatureTooltip_table",ref:node=>this._node=node},external_kbnSharedDeps_React_default.a.createElement("tbody",null,rows))}}var core_public_=__webpack_require__(14),i18n_getters=__webpack_require__(5);function createOptionId(geoField){return`${geoField.indexPatternId}/${geoField.geoFieldName}`}function MultiIndexGeoFieldSelect({fields:fields,onChange:onChange,selectedField:selectedField}){const options=fields.map(geoField=>({inputDisplay:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextColor,{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("small",null,geoField.indexPatternTitle)),external_kbnSharedDeps_React_default.a.createElement("br",null),geoField.geoFieldName),value:createOptionId(geoField)}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{className:"mapGeometryFilter__geoFieldSuperSelectWrapper",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.multiIndexFieldSelect.fieldLabel",{defaultMessage:"Filtering field"}),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSuperSelect,{className:"mapGeometryFilter__geoFieldSuperSelect",options:options,valueOfSelected:selectedField?createOptionId(selectedField):"",onChange:function(selectedOptionId){const{indexPatternId:indexPatternId,geoFieldName:geoFieldName}=function(optionId){const split=optionId.split("/");return{indexPatternId:split[0],geoFieldName:split[1]}}(selectedOptionId),newSelectedField=fields.find(field=>field.indexPatternId===indexPatternId&&field.geoFieldName===geoFieldName);onChange(newSelectedField)},hasDividers:!0,fullWidth:!0,compressed:!0,itemClassName:"mapGeometryFilter__geoFieldItem"}))}function action_select_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class action_select_ActionSelect extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),action_select_defineProperty(this,"_isMounted",!1),action_select_defineProperty(this,"state",{actions:[]})}componentDidMount(){this._isMounted=!0,this._loadActions()}componentWillUnmount(){this._isMounted=!1}async _loadActions(){if(!this.props.getFilterActions||!this.props.getActionContext)return;const actions=await this.props.getFilterActions();this._isMounted&&this.setState({actions:actions.filter(action=>!isUrlDrilldown(action))})}render(){if(0===this.state.actions.length||!this.props.getActionContext)return null;if(1===this.state.actions.length&&this.props.value===this.state.actions[0].id)return null;const actionContext=this.props.getActionContext(),options=this.state.actions.map(action=>{const iconType=action.getIconType(actionContext);return{value:action.id,inputDisplay:external_kbnSharedDeps_React_default.a.createElement("div",null,iconType?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{className:"mapActionSelectIcon",type:iconType}):null,action.getDisplayName(actionContext))}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.actionSelect.label",{defaultMessage:"Action"}),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSuperSelect,{compressed:!0,options:options,valueOfSelected:this.props.value?this.props.value:"",onChange:this.props.onChange}))}}function geometry_filter_form_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class geometry_filter_form_GeometryFilterForm extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),geometry_filter_form_defineProperty(this,"state",{actionId:data_public_.ACTION_GLOBAL_APPLY_FILTER,selectedField:this.props.geoFields.length?this.props.geoFields[0]:void 0,geometryLabel:this.props.intitialGeometryLabel,relation:constants.ES_SPATIAL_RELATIONS.INTERSECTS}),geometry_filter_form_defineProperty(this,"_onGeoFieldChange",selectedField=>{this.setState({selectedField:selectedField})}),geometry_filter_form_defineProperty(this,"_onGeometryLabelChange",e=>{this.setState({geometryLabel:e.target.value})}),geometry_filter_form_defineProperty(this,"_onRelationChange",e=>{this.setState({relation:e.target.value})}),geometry_filter_form_defineProperty(this,"_onActionIdChange",value=>{this.setState({actionId:value})}),geometry_filter_form_defineProperty(this,"_onSubmit",()=>{this.props.onSubmit({actionId:this.state.actionId,geometryLabel:this.state.geometryLabel,indexPatternId:this.state.selectedField.indexPatternId,geoFieldName:this.state.selectedField.geoFieldName,relation:this.state.relation})})}_renderRelationInput(){if(!this.state.selectedField)return null;const options=(this.props.isFilterGeometryClosed&&this.state.selectedField.geoFieldType!==constants.ES_GEO_FIELD_TYPE.GEO_POINT?Object.values(constants.ES_SPATIAL_RELATIONS):Object.values(constants.ES_SPATIAL_RELATIONS).filter(relation=>relation!==constants.ES_SPATIAL_RELATIONS.WITHIN)).map(relation=>({value:relation,text:Object(i18n_getters.c)(relation)}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.geometryFilterForm.relationLabel",{defaultMessage:"Spatial relation"}),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{compressed:!0,options:options,value:this.state.relation,onChange:this._onRelationChange}))}render(){let error;return this.props.errorMsg&&(error=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormErrorText,null,this.props.errorMsg)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiForm,{className:this.props.className},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.geometryFilterForm.geometryLabelLabel",{defaultMessage:"Geometry label"}),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{compressed:!0,value:this.state.geometryLabel,onChange:this._onGeometryLabelChange})),external_kbnSharedDeps_React_default.a.createElement(MultiIndexGeoFieldSelect,{selectedField:this.state.selectedField,fields:this.props.geoFields,onChange:this._onGeoFieldChange}),this._renderRelationInput(),external_kbnSharedDeps_React_default.a.createElement(action_select_ActionSelect,{getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,value:this.state.actionId,onChange:this._onActionIdChange}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),error,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextAlign,{textAlign:"right"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{size:"s",fill:!0,onClick:this._onSubmit,isDisabled:!this.state.geometryLabel||!this.state.selectedField,isLoading:this.props.isLoading},this.props.buttonLabel)))}}geometry_filter_form_defineProperty(geometry_filter_form_GeometryFilterForm,"defaultProps",{isFilterGeometryClosed:!0});var external_kbnSharedDeps_RisonNode_=__webpack_require__(13),external_kbnSharedDeps_RisonNode_default=__webpack_require__.n(external_kbnSharedDeps_RisonNode_);function feature_geometry_filter_form_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class feature_geometry_filter_form_FeatureGeometryFilterForm extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),feature_geometry_filter_form_defineProperty(this,"state",{isLoading:!1,errorMsg:void 0}),feature_geometry_filter_form_defineProperty(this,"_loadPreIndexedShape",async()=>{let preIndexedShape;this.setState({isLoading:!0});try{preIndexedShape=await this.props.loadPreIndexedShape()}catch(err){}return this._isMounted&&this.setState({isLoading:!1}),preIndexedShape}),feature_geometry_filter_form_defineProperty(this,"_createFilter",async({geometryLabel:geometryLabel,indexPatternId:indexPatternId,geoFieldName:geoFieldName,relation:relation})=>{this.setState({errorMsg:void 0});const preIndexedShape=await this._loadPreIndexedShape();if(!this._isMounted)return;const filter=Object(elasticsearch_util.h)({preIndexedShape:preIndexedShape,geometry:this.props.geometry,geometryLabel:geometryLabel,indexPatternId:indexPatternId,geoFieldName:geoFieldName,relation:relation});window.location.href.length+external_kbnSharedDeps_RisonNode_default.a.encode(filter).length+100>core_public_.URL_MAX_LENGTH?this.setState({errorMsg:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.tooltip.geometryFilterForm.filterTooLargeMessage",{defaultMessage:"Cannot create filter. Filters are added to the URL, and this shape has too many vertices to fit in the URL."})}):(this.props.addFilters([filter],data_public_.ACTION_GLOBAL_APPLY_FILTER),this.props.onClose())})}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){return external_kbnSharedDeps_React_default.a.createElement(geometry_filter_form_GeometryFilterForm,{buttonLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.tooltip.geometryFilterForm.createFilterButtonLabel",{defaultMessage:"Create filter"}),geoFields:this.props.geoFields,getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,intitialGeometryLabel:this.props.geometry.type.toLowerCase(),onSubmit:this._createFilter,isFilterGeometryClosed:this.props.geometry.type!==constants.GEO_JSON_TYPE.LINE_STRING&&this.props.geometry.type!==constants.GEO_JSON_TYPE.MULTI_LINE_STRING,isLoading:this.state.isLoading,errorMsg:this.state.errorMsg})}}var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(8);function footer_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class footer_Footer extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),footer_defineProperty(this,"state",{filteredFeatures:this.props.features,pageNumber:0,selectedLayerId:"_ALL_LAYERS_",layerOptions:[]}),footer_defineProperty(this,"_loadUniqueLayers",async()=>{if(this._prevFeatures===this.props.features)return;this._prevFeatures=this.props.features;const countByLayerId=new Map;for(let i=0;i<this.props.features.length;i++){let count=countByLayerId.get(this.props.features[i].layerId);count||(count=0),count++,countByLayerId.set(this.props.features[i].layerId,count)}const layers=[];countByLayerId.forEach((count,layerId)=>{layers.push(this.props.findLayerById(layerId))});const layerNamePromises=layers.map(layer=>layer.getDisplayName()),layerNames=await Promise.all(layerNamePromises);this._isMounted&&this.setState({filteredFeatures:this.props.features,selectedLayerId:"_ALL_LAYERS_",layerOptions:layers.map((layer,index)=>{const displayName=layerNames[index],count=countByLayerId.get(layer.getId());return{value:layer.getId(),text:`(${count}) ${displayName}`}})},()=>this._onPageChange(0))}),footer_defineProperty(this,"_onPageChange",pageNumber=>{this.setState({pageNumber:pageNumber}),this.props.setCurrentFeature(this.state.filteredFeatures[pageNumber])}),footer_defineProperty(this,"_onLayerChange",e=>{const newLayerId=e.target.value;if(this.state.selectedLayerId===newLayerId)return;const filteredFeatures="_ALL_LAYERS_"===newLayerId?this.props.features:this.props.features.filter(feature=>feature.layerId===newLayerId);this.setState({filteredFeatures:filteredFeatures,selectedLayerId:newLayerId},()=>this._onPageChange(0))})}componentDidMount(){this._isMounted=!0,this._prevFeatures=null,this._loadUniqueLayers()}componentDidUpdate(){this._loadUniqueLayers()}componentWillUnmount(){this._isMounted=!1}render(){const{isLocked:isLocked}=this.props,{filteredFeatures:filteredFeatures,pageNumber:pageNumber,selectedLayerId:selectedLayerId,layerOptions:layerOptions}=this.state,isLayerSelectVisible=isLocked&&layerOptions.length>1,items=[];return isLocked&&filteredFeatures.length>1&&items.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,key:"pagination"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPagination,{pageCount:filteredFeatures.length,activePage:pageNumber,onPageClick:this._onPageChange,compressed:!0}))),!isLocked&&filteredFeatures.length>1&&items.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!isLayerSelectVisible,key:"pageNumber"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextColor,{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.tooltip.pageNumerText",defaultMessage:"{pageNumber} of {total}",values:{pageNumber:pageNumber+1,total:filteredFeatures.length}})))),isLayerSelectVisible&&items.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{key:"layerSelect"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{options:[{value:"_ALL_LAYERS_",text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.tooltip.allLayersLabel",{defaultMessage:"All layers"})},...layerOptions],onChange:this._onLayerChange,value:selectedLayerId,compressed:!0,fullWidth:!0,"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.tooltip.layerFilterLabel",{defaultMessage:"Filter results by layer"})})))),items.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHorizontalRule,{margin:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},items)):null}}function header_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class header_Header extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),header_defineProperty(this,"_isMounted",!1),header_defineProperty(this,"state",{layerIcon:null,layerName:null})}componentDidMount(){this._isMounted=!0,this._loadLayerState()}componentWillUnmount(){this._isMounted=!1}async _loadLayerState(){const layer=this.props.findLayerById(this.props.layerId);if(!layer)return;const layerName=await layer.getDisplayName(),customIconAndTooltipContent=layer.getCustomIconAndTooltipContent();this._isMounted&&this.setState({layerIcon:customIconAndTooltipContent.icon,layerName:layerName})}render(){const items=[];return this.state.layerIcon&&items.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,key:"layerIcon",className:"mapFeatureTooltip_layerIcon"},this.state.layerIcon)),this.state.layerName&&items.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!0,key:"layerName",className:"eui-textTruncate"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextColor,null,external_kbnSharedDeps_React_default.a.createElement("h4",{className:"eui-textTruncate",title:this.state.layerName},this.state.layerName)))),this.props.isLocked&&(0===items.length&&items.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{key:"spacer"})),items.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,key:"closeButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{onClick:this.props.onClose,iconType:"cross","aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.tooltip.closeAriaLabel",{defaultMessage:"Close tooltip"}),"data-test-subj":"mapTooltipCloseButton"})))),items.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},items),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHorizontalRule,{margin:"xs"})):null}}function features_tooltip_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const VIEWS_PROPERTIES_VIEW="PROPERTIES_VIEW",VIEWS_GEOMETRY_FILTER_VIEW="GEOMETRY_FILTER_VIEW",VIEWS_FILTER_ACTIONS_VIEW="FILTER_ACTIONS_VIEW";class features_tooltip_FeaturesTooltip extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),features_tooltip_defineProperty(this,"state",{}),features_tooltip_defineProperty(this,"_setCurrentFeature",feature=>{this.setState({currentFeature:feature})}),features_tooltip_defineProperty(this,"_showGeometryFilterView",()=>{this.setState({view:VIEWS_GEOMETRY_FILTER_VIEW})}),features_tooltip_defineProperty(this,"_showPropertiesView",()=>{this.setState({view:VIEWS_PROPERTIES_VIEW,filterView:null})}),features_tooltip_defineProperty(this,"_showFilterActionsView",filterView=>{this.setState({view:VIEWS_FILTER_ACTIONS_VIEW,filterView:filterView})}),features_tooltip_defineProperty(this,"_loadCurrentFeaturePreIndexedShape",()=>{if(this.state.currentFeature)return this.props.loadPreIndexedShape({layerId:this.state.currentFeature.layerId,featureId:this.state.currentFeature.id})})}static getDerivedStateFromProps(nextProps,prevState){return nextProps.features!==prevState.prevFeatures?{currentFeature:nextProps.features?nextProps.features[0]:null,view:VIEWS_PROPERTIES_VIEW,prevFeatures:nextProps.features}:null}_renderActions(geoFields){return this.props.isLocked&&0!==geoFields.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{className:"mapFeatureTooltip_actionLinks",onClick:this._showGeometryFilterView},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.tooltip.showGeometryFilterViewLinkLabel",defaultMessage:"Filter by geometry"})):null}_filterGeoFields(featureGeometry){return featureGeometry?featureGeometry.type===constants.GEO_JSON_TYPE.LINE_STRING||featureGeometry.type===constants.GEO_JSON_TYPE.MULTI_LINE_STRING?this.props.geoFields.filter(({geoFieldType:geoFieldType})=>geoFieldType===constants.ES_GEO_FIELD_TYPE.GEO_SHAPE):featureGeometry.type===constants.GEO_JSON_TYPE.POINT||featureGeometry.type===constants.GEO_JSON_TYPE.MULTI_POINT?[]:this.props.geoFields:[]}_renderBackButton(label){return external_kbnSharedDeps_React_default.a.createElement("button",{className:"euiContextMenuPanelTitle mapFeatureTooltip_backButton",type:"button",onClick:this._showPropertiesView},external_kbnSharedDeps_React_default.a.createElement("span",{className:"euiContextMenu__itemLayout"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"arrowLeft",size:"m",className:"euiContextMenu__icon"}),external_kbnSharedDeps_React_default.a.createElement("span",{className:"euiContextMenu__text"},label)))}render(){if(!this.state.currentFeature)return null;const currentFeatureGeometry=this.props.loadFeatureGeometry({layerId:this.state.currentFeature.layerId,featureId:this.state.currentFeature.id}),geoFields=this._filterGeoFields(currentFeatureGeometry);return this.state.view===VIEWS_GEOMETRY_FILTER_VIEW&&currentFeatureGeometry?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,this._renderBackButton(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.tooltip.showGeometryFilterViewLinkLabel",{defaultMessage:"Filter by geometry"})),external_kbnSharedDeps_React_default.a.createElement(feature_geometry_filter_form_FeatureGeometryFilterForm,{onClose:this.props.closeTooltip,showPropertiesView:this._showPropertiesView,geometry:currentFeatureGeometry,geoFields:geoFields,addFilters:this.props.addFilters,getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,loadPreIndexedShape:this._loadCurrentFeaturePreIndexedShape})):this.state.view===VIEWS_FILTER_ACTIONS_VIEW?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,this._renderBackButton(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.tooltip.showAddFilterActionsViewLabel",{defaultMessage:"Filter actions"})),this.state.filterView):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(header_Header,{key:this.state.currentFeature.layerId,layerId:this.state.currentFeature.layerId,findLayerById:this.props.findLayerById,isLocked:this.props.isLocked,onClose:this.props.closeTooltip}),external_kbnSharedDeps_React_default.a.createElement(feature_properties_FeatureProperties,{featureId:this.state.currentFeature.id,layerId:this.state.currentFeature.layerId,mbProperties:this.state.currentFeature.mbProperties,loadFeatureProperties:this.props.loadFeatureProperties,showFilterButtons:!!this.props.addFilters&&this.props.isLocked,onCloseTooltip:this.props.closeTooltip,addFilters:this.props.addFilters,getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,onSingleValueTrigger:this.props.onSingleValueTrigger,showFilterActions:this._showFilterActionsView}),this._renderActions(geoFields),external_kbnSharedDeps_React_default.a.createElement(footer_Footer,{features:this.props.features,isLocked:this.props.isLocked,findLayerById:this.props.findLayerById,setCurrentFeature:this._setCurrentFeature}))}}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function tooltip_popover_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const tooltip_popover_noop=()=>{};class tooltip_popover_TooltipPopover extends external_kbnSharedDeps_React_.Component{constructor(props){super(props),tooltip_popover_defineProperty(this,"state",{x:void 0,y:void 0,isVisible:!0}),tooltip_popover_defineProperty(this,"_updatePopoverPosition",()=>{const nextPoint=this.props.mbMap.project(this.props.location),lat=this.props.location[constants.LAT_INDEX],lon=this.props.location[constants.LON_INDEX],bounds=this.props.mbMap.getBounds();this.setState({x:nextPoint.x,y:nextPoint.y,isVisible:lat<bounds.getNorth()&&lat>bounds.getSouth()&&lon>bounds.getWest()&&lon<bounds.getEast()})}),tooltip_popover_defineProperty(this,"_loadFeatureGeometry",({layerId:layerId,featureId:featureId})=>{const tooltipLayer=this._findLayerById(layerId);if(!tooltipLayer||void 0===featureId)return null;const targetFeature=tooltipLayer.getFeatureById(featureId);return targetFeature?targetFeature.geometry:null}),tooltip_popover_defineProperty(this,"_loadFeatureProperties",async({layerId:layerId,featureId:featureId,mbProperties:mbProperties})=>{const tooltipLayer=this._findLayerById(layerId);if(!tooltipLayer)return[];let targetFeature;void 0!==featureId&&(targetFeature=tooltipLayer.getFeatureById(featureId));const properties=targetFeature?targetFeature.properties:mbProperties;return await tooltipLayer.getPropertiesForTooltip(properties)}),tooltip_popover_defineProperty(this,"_loadPreIndexedShape",async({layerId:layerId,featureId:featureId})=>{const tooltipLayer=this._findLayerById(layerId);if(!tooltipLayer||void 0===featureId)return null;const targetFeature=tooltipLayer.getFeatureById(featureId);return targetFeature?await tooltipLayer.getSource().getPreIndexedShape(targetFeature.properties):null}),tooltip_popover_defineProperty(this,"_findLayerById",layerId=>this.props.layerList.find(layer=>layer.getId()===layerId)),tooltip_popover_defineProperty(this,"_getLayerName",async layerId=>{const layer=this._findLayerById(layerId);return layer?layer.getDisplayName():null}),tooltip_popover_defineProperty(this,"_renderTooltipContent",()=>{const publicProps={addFilters:this.props.addFilters,getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,onSingleValueTrigger:this.props.onSingleValueTrigger,closeTooltip:this.props.closeTooltip,features:this.props.features,isLocked:this.props.isLocked,loadFeatureProperties:this._loadFeatureProperties,loadFeatureGeometry:this._loadFeatureGeometry,getLayerName:this._getLayerName};return this.props.renderTooltipContent?this.props.renderTooltipContent(publicProps):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs",style:{maxWidth:"425px"}},external_kbnSharedDeps_React_default.a.createElement(features_tooltip_FeaturesTooltip,_extends({},publicProps,{findLayerById:this._findLayerById,geoFields:this.props.geoFields,loadPreIndexedShape:this._loadPreIndexedShape})))}),this._popoverRef=external_kbnSharedDeps_React_default.a.createRef()}componentDidMount(){this._updatePopoverPosition(),this.props.mbMap.on("move",this._updatePopoverPosition)}componentDidUpdate(){this._popoverRef.current&&this._popoverRef.current.positionPopoverFluid()}componentWillUnmount(){this.props.mbMap.off("move",this._updatePopoverPosition)}render(){if(!this.state.isVisible)return null;const tooltipAnchor=external_kbnSharedDeps_React_default.a.createElement("div",{style:{height:"26px",width:"26px",background:"none"}}),offset=26*this.props.index;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{id:"mapTooltip",button:tooltipAnchor,anchorPosition:"upCenter",isOpen:!0,closePopover:tooltip_popover_noop,ref:this._popoverRef,style:{pointerEvents:"none",transform:`translate(${this.state.x-13-offset}px, ${this.state.y-13}px)`}},this._renderTooltipContent())}}var mb_filter_expressions=__webpack_require__(200);function tooltip_control_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function justifyAnchorLocation(mbLngLat,targetFeature){let popupAnchorLocation=[mbLngLat.lng,mbLngLat.lat];if("Point"===targetFeature.geometry.type){const coordinates=targetFeature.geometry.coordinates.slice();for(;Math.abs(mbLngLat.lng-coordinates[constants.LON_INDEX])>180;)coordinates[0]+=mbLngLat.lng>coordinates[constants.LON_INDEX]?360:-360;popupAnchorLocation=coordinates}return popupAnchorLocation}class tooltip_control_TooltipControl extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args),tooltip_control_defineProperty(this,"_onMouseout",()=>{this._updateHoverTooltipState.cancel(),this.props.hasLockedTooltips||this.props.closeOnHoverTooltip()}),tooltip_control_defineProperty(this,"_lockTooltip",e=>{if(this.props.isDrawingFilter)return;this._updateHoverTooltipState.cancel();const mbFeatures=this._getMbFeaturesUnderPointer(e.point);if(!mbFeatures.length)return;const targetMbFeataure=mbFeatures[0],popupAnchorLocation=justifyAnchorLocation(e.lngLat,targetMbFeataure),features=this._getTooltipFeatures(mbFeatures);this.props.openOnClickTooltip({features:features,location:popupAnchorLocation})}),tooltip_control_defineProperty(this,"_updateHoverTooltipState",external_kbnSharedDeps_Lodash_default.a.debounce(e=>{if(this.props.isDrawingFilter||this.props.hasLockedTooltips)return;const mbFeatures=this._getMbFeaturesUnderPointer(e.point);if(!mbFeatures.length)return void this.props.closeOnHoverTooltip();const targetMbFeature=mbFeatures[0];if(this.props.openTooltips[0]){const firstFeature=this.props.openTooltips[0].features[0];if(targetMbFeature.properties[constants.FEATURE_ID_PROPERTY_NAME]===firstFeature.id)return}const popupAnchorLocation=justifyAnchorLocation(e.lngLat,targetMbFeature),features=this._getTooltipFeatures(mbFeatures);this.props.openOnHoverTooltip({features:features,location:popupAnchorLocation})},100))}componentDidMount(){this.props.mbMap.on("mouseout",this._onMouseout),this.props.mbMap.on("mousemove",this._updateHoverTooltipState),this.props.mbMap.on("click",this._lockTooltip)}componentWillUnmount(){this.props.mbMap.off("mouseout",this._onMouseout),this.props.mbMap.off("mousemove",this._updateHoverTooltipState),this.props.mbMap.off("click",this._lockTooltip)}_getLayerByMbLayerId(mbLayerId){return this.props.layerList.find(layer=>layer.getMbLayerIds().indexOf(mbLayerId)>-1)}_getTooltipFeatures(mbFeatures){const uniqueFeatures=[];for(let i=0;i<mbFeatures.length;i++){const mbFeature=mbFeatures[i],layer=this._getLayerByMbLayerId(mbFeature.layer.id),featureId=mbFeature.properties[constants.FEATURE_ID_PROPERTY_NAME],layerId=layer.getId();let match=!1;for(let j=0;j<uniqueFeatures.length;j++){const uniqueFeature=uniqueFeatures[j];if(featureId===uniqueFeature.id&&layerId===uniqueFeature.layerId){match=!0;break}}if(!match){const mbProperties=mbFeature.properties?mbFeature.properties:{};uniqueFeatures.push({id:featureId,layerId:layerId,mbProperties:mbProperties})}}return uniqueFeatures}_getMbLayerIdsForTooltips(){return this.props.layerList.reduce((mbLayerIds,layer)=>layer.canShowTooltip()?mbLayerIds.concat(layer.getMbLayerIds()):mbLayerIds,[]).filter(mbLayerId=>!!this.props.mbMap.getLayer(mbLayerId))}_getMbFeaturesUnderPointer(mbLngLatPoint){if(!this.props.mbMap)return[];const mbLayerIds=this._getMbLayerIdsForTooltips(),mbBbox=[{x:mbLngLatPoint.x-2,y:mbLngLatPoint.y-2},{x:mbLngLatPoint.x+2,y:mbLngLatPoint.y+2}];return this.props.mbMap.queryRenderedFeatures(mbBbox,{layers:mbLayerIds,filter:mb_filter_expressions.a})}render(){return 0===this.props.openTooltips.length?null:this.props.openTooltips.map(({features:features,location:location,id:id,isLocked:isLocked},index)=>{const closeTooltip=isLocked?()=>{this.props.closeOnClickTooltip(id)}:this.props.closeOnHoverTooltip;return external_kbnSharedDeps_React_default.a.createElement(tooltip_popover_TooltipPopover,{key:id,mbMap:this.props.mbMap,layerList:this.props.layerList,addFilters:this.props.addFilters,getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,onSingleValueTrigger:this.props.onSingleValueTrigger,renderTooltipContent:this.props.renderTooltipContent,geoFields:this.props.geoFields,features:features,location:location,closeTooltip:closeTooltip,isLocked:isLocked,index:index})})}}const connectedTooltipControl=Object(lib.connect)((function(state={}){return{layerList:Object(map_selectors.k)(state),hasLockedTooltips:Object(map_selectors.h)(state),isDrawingFilter:Object(map_selectors.L)(state),openTooltips:Object(map_selectors.v)(state)}}),(function(dispatch){return{closeOnClickTooltip(tooltipId){dispatch(Object(public_actions.Z)(tooltipId))},openOnClickTooltip(tooltipState){dispatch(Object(public_actions.lb)(tooltipState))},closeOnHoverTooltip(){dispatch(Object(public_actions.ab)())},openOnHoverTooltip(tooltipState){dispatch(Object(public_actions.mb)(tooltipState))}}}))(tooltip_control_TooltipControl);var util=__webpack_require__(42),sort_layers=__webpack_require__(167),utils=__webpack_require__(216),kibanaUtils_public_=__webpack_require__(12);function tile_status_tracker_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class tile_status_tracker_TileStatusTracker{constructor({mbMap:mbMap,setAreTilesLoaded:setAreTilesLoaded,getCurrentLayerList:getCurrentLayerList}){tile_status_tracker_defineProperty(this,"_tileCache",void 0),tile_status_tracker_defineProperty(this,"_mbMap",void 0),tile_status_tracker_defineProperty(this,"_setAreTilesLoaded",void 0),tile_status_tracker_defineProperty(this,"_getCurrentLayerList",void 0),tile_status_tracker_defineProperty(this,"_onSourceDataLoading",e=>{if(e.sourceId&&e.sourceId!==constants.SPATIAL_FILTERS_LAYER_ID&&"source"===e.dataType&&e.tile&&("vector"===e.source.type||"raster"===e.source.type)){this._tileCache.find(tile=>tile.mbKey===e.tile.tileID.key&&tile.mbSourceId===e.sourceId)||(this._tileCache.push({mbKey:e.tile.tileID.key,mbSourceId:e.sourceId,mbTile:e.tile}),this._updateTileStatus())}}),tile_status_tracker_defineProperty(this,"_onError",e=>{e.sourceId&&e.sourceId!==constants.SPATIAL_FILTERS_LAYER_ID&&e.tile&&("vector"===e.source.type||"raster"===e.source.type)&&this._removeTileFromCache(e.sourceId,e.tile.tileID.key)}),tile_status_tracker_defineProperty(this,"_onSourceData",e=>{e.sourceId&&e.sourceId!==constants.SPATIAL_FILTERS_LAYER_ID&&"source"===e.dataType&&e.tile&&("vector"===e.source.type||"raster"===e.source.type)&&this._removeTileFromCache(e.sourceId,e.tile.tileID.key)}),tile_status_tracker_defineProperty(this,"_updateTileStatus",external_kbnSharedDeps_Lodash_default.a.debounce(()=>{this._tileCache=this._tileCache.filter(tile=>"boolean"!=typeof tile.mbTile.aborted||!tile.mbTile.aborted);const layerList=this._getCurrentLayerList();for(let i=0;i<layerList.length;i++){const layer=layerList[i];let atLeastOnePendingTile=!1;for(let j=0;j<this._tileCache.length;j++){const tile=this._tileCache[j];if(layer.ownsMbSourceId(tile.mbSourceId)){atLeastOnePendingTile=!0;break}}this._setAreTilesLoaded(layer.getId(),!atLeastOnePendingTile)}},100)),tile_status_tracker_defineProperty(this,"_removeTileFromCache",(mbSourceId,mbKey)=>{const trackedIndex=this._tileCache.findIndex(tile=>tile.mbKey===mbKey&&tile.mbSourceId===mbSourceId);trackedIndex>=0&&(this._tileCache.splice(trackedIndex,1),this._updateTileStatus())}),this._tileCache=[],this._setAreTilesLoaded=setAreTilesLoaded,this._getCurrentLayerList=getCurrentLayerList,this._mbMap=mbMap,this._mbMap.on("sourcedataloading",this._onSourceDataLoading),this._mbMap.on("error",this._onError),this._mbMap.on("sourcedata",this._onSourceData)}destroy(){this._mbMap.off("error",this._onError),this._mbMap.off("sourcedata",this._onSourceData),this._mbMap.off("sourcedataloading",this._onSourceDataLoading),this._tileCache.length=0}}var mapbox_gl_rtl_text_min=__webpack_require__(380),mapbox_gl_rtl_text_min_default=__webpack_require__.n(mapbox_gl_rtl_text_min),mapbox_gl_csp_worker=__webpack_require__(381),mapbox_gl_csp_worker_default=__webpack_require__.n(mapbox_gl_csp_worker);function mb_map_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}mapbox_gl_csp_default.a.workerUrl=mapbox_gl_csp_worker_default.a,mapbox_gl_csp_default.a.setRTLTextPlugin(mapbox_gl_rtl_text_min_default.a);class mb_map_MBMap extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),mb_map_defineProperty(this,"_checker",void 0),mb_map_defineProperty(this,"_isMounted",!1),mb_map_defineProperty(this,"_containerRef",null),mb_map_defineProperty(this,"_prevDisableInteractive",void 0),mb_map_defineProperty(this,"_navigationControl",new mapbox_gl_csp_default.a.NavigationControl({showCompass:!1})),mb_map_defineProperty(this,"_tileStatusTracker",void 0),mb_map_defineProperty(this,"state",{prevLayerList:void 0,hasSyncedLayerList:!1,mbMap:void 0}),mb_map_defineProperty(this,"_debouncedSync",external_kbnSharedDeps_Lodash_default.a.debounce(()=>{this._isMounted&&this.props.isMapReady&&this.state.mbMap&&(this.state.hasSyncedLayerList||this.setState({hasSyncedLayerList:!0},()=>{this._syncMbMapWithLayerList(),this._syncMbMapWithInspector()}),this.props.spatialFiltersLayer.syncLayerWithMB(this.state.mbMap),this._syncSettings())},256)),mb_map_defineProperty(this,"_syncMbMapWithMapState",()=>{const{isMapReady:isMapReady,goto:goto,clearGoto:clearGoto}=this.props;if(isMapReady&&goto&&this.state.mbMap)if(clearGoto(),goto.bounds){const lnLatBounds=new mapbox_gl_csp_default.a.LngLatBounds(new mapbox_gl_csp_default.a.LngLat(Object(elasticsearch_util.c)(goto.bounds.minLon),Object(elasticsearch_util.b)(goto.bounds.minLat)),new mapbox_gl_csp_default.a.LngLat(Object(elasticsearch_util.c)(goto.bounds.maxLon),Object(elasticsearch_util.b)(goto.bounds.maxLat)));this.state.mbMap.fitBounds(lnLatBounds,{maxZoom:17,padding:16})}else goto.center&&(this.state.mbMap.setZoom(goto.center.zoom),this.state.mbMap.setCenter({lng:goto.center.lon,lat:goto.center.lat}))}),mb_map_defineProperty(this,"_syncMbMapWithLayerList",()=>{this.state.mbMap&&(Object(utils.c)(this.state.mbMap,this.props.layerList,this.props.spatialFiltersLayer),this.props.layerList.forEach(layer=>layer.syncLayerWithMB(this.state.mbMap)),Object(sort_layers.b)(this.state.mbMap,this.props.spatialFiltersLayer,this.props.layerList))}),mb_map_defineProperty(this,"_syncMbMapWithInspector",()=>{if(!this.props.inspectorAdapters.map||!this.state.mbMap)return;const stats={center:this.state.mbMap.getCenter().toArray(),zoom:this.state.mbMap.getZoom()};this.props.inspectorAdapters.map.setMapState({stats:stats,style:this.state.mbMap.getStyle()})}),mb_map_defineProperty(this,"_setContainerRef",element=>{this._containerRef=element})}static getDerivedStateFromProps(nextProps,prevState){const nextLayerList=nextProps.layerList;return nextLayerList!==prevState.prevLayerList?{prevLayerList:nextLayerList,hasSyncedLayerList:!1}:null}componentDidMount(){this._initializeMap(),this._isMounted=!0}componentDidUpdate(){this.state.mbMap&&(this._syncMbMapWithMapState(),this._debouncedSync())}componentWillUnmount(){this._isMounted=!1,this._checker&&this._checker.destroy(),this._tileStatusTracker&&this._tileStatusTracker.destroy(),this.state.mbMap&&(this.state.mbMap.remove(),this.state.mbMap=void 0),this.props.onMapDestroyed()}_getMapState(){const zoom=this.state.mbMap.getZoom(),mbCenter=this.state.mbMap.getCenter(),mbBounds=this.state.mbMap.getBounds();return{zoom:external_kbnSharedDeps_Lodash_default.a.round(zoom,constants.ZOOM_PRECISION),center:{lon:external_kbnSharedDeps_Lodash_default.a.round(mbCenter.lng,constants.DECIMAL_DEGREES_PRECISION),lat:external_kbnSharedDeps_Lodash_default.a.round(mbCenter.lat,constants.DECIMAL_DEGREES_PRECISION)},extent:{minLon:external_kbnSharedDeps_Lodash_default.a.round(mbBounds.getWest(),constants.DECIMAL_DEGREES_PRECISION),minLat:external_kbnSharedDeps_Lodash_default.a.round(mbBounds.getSouth(),constants.DECIMAL_DEGREES_PRECISION),maxLon:external_kbnSharedDeps_Lodash_default.a.round(mbBounds.getEast(),constants.DECIMAL_DEGREES_PRECISION),maxLat:external_kbnSharedDeps_Lodash_default.a.round(mbBounds.getNorth(),constants.DECIMAL_DEGREES_PRECISION)}}}async _createMbMapInstance(initialView){return new Promise(resolve=>{const mbStyle={version:8,sources:{},layers:[],glyphs:Object(util.d)()},options={attributionControl:!1,container:this._containerRef,style:mbStyle,scrollZoom:this.props.scrollZoom,preserveDrawingBuffer:Object(kibana_services.A)(),maxZoom:this.props.settings.maxZoom,minZoom:this.props.settings.minZoom};initialView?(options.zoom=initialView.zoom,options.center={lng:initialView.lon,lat:initialView.lat}):options.bounds=[-170,-60,170,75];const mbMap=new mapbox_gl_csp_default.a.Map(options);mbMap.dragRotate.disable(),mbMap.touchZoomRotate.disableRotation(),this._tileStatusTracker=new tile_status_tracker_TileStatusTracker({mbMap:mbMap,getCurrentLayerList:()=>this.props.layerList,setAreTilesLoaded:this.props.setAreTilesLoaded});const tooManyFeaturesImage=new Image;let emptyImage;tooManyFeaturesImage.onload=()=>{mbMap.addImage(constants.KBN_TOO_MANY_FEATURES_IMAGE_ID,tooManyFeaturesImage)},tooManyFeaturesImage.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAA7DgAAOw4BzLahgwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARLSURBVHic7ZnPbxRVAMe/7735sWO3293ZlUItJsivCxEE0oTYRgu1FqTQoFSwKTYx8SAH/wHjj4vRozGGi56sMcW2UfqTEuOhppE0KJc2GIuKQFDY7qzdtrudX88D3YTUdFuQN8+k87ltZt7uZz958/bNLAGwBWsYKltANmEA2QKyCQPIFpBNGEC2gGzCALIFZBMGkC0gmzCAbAHZhAFkC8gmDCBbQDZhANkCslnzARQZH6oDpNs0D5UDSUIInePcOpPLfdfnODNBuwQWIAWwNOABwHZN0x8npE6hNLJ4DPWRyFSf40wE5VOEQPBjcR0g3YlE4ybGmtK+/1NzJtOZA/xSYwZMs3nG962T2ez3It2AANaA/kSidYuivOQBs5WM1fUnk6f0u+GXJUqIuUtVXx00zRbRfkIDfBqL7a1WlIYbjvNtTTr99jXXHVpH6dMjK0R4cXq6c9rzxjcx9sKX8XitSEdhAToMI7VP10/97fsTh7PZrgWAN1lW72KE2vOm2b5chDTgtWQyn93x/bEEIetEOQIC14CxVOr1CkKefH929t0v8vn0vcdGEoljGxXl4C3PGz2YyXy+AHARDqtByAxoUdWKBKV70r4/vvTLA0CjZfX+5nkDGxirKzUTgkBIgNaysh3gnF627R+XO+dQJvP1ddcdrmSsbtA020pF+CAW21qrqmUiXIUEqGRsIwD0FQq/lzqv0bJ6rrvucBVjzwyb5ivLRTiiaW+8VV7eIEBVTAANiIIQd9RxZlc6t9Gyem647vn1jD07ZJonl4sQASoevqmgABzwwHnJzc69PGdZ3X+47sgGxuqHTPPE0ggeVtg5/QeEBMhxPg1Aa1DV2GrHPG9ZXy1G2D+wNALn9jyQEeHKAJgP+033Kgrdqij7AFwZtu3bqx3XWShMHtV1o1pRGo4YxiNd+fyEB2DKdX/4aG5u0hbwcylkBryTy/3scT6zW9Nq7ndso2Wdvea6Q1WUHuiPx1/WAXLBcWZXun94UMRcAoD/p+ddTFK6u8MwUvc7vsmyem+67oVqVT0wkEgcF+FYRNhW+L25uX6f84XThtHxIBudE5bVY/t++jFVrU/dvVSFICzAqG3PX/S8rihj2/61qK1AOUB7ksl2jdLUL7Z9rvgcQQRCFsEi5wqFmw26XnhCUQ63GcZmCly95Lrzpca0G0byk3j8tEnpU1c975tmyxoU5QcE8EAEAM5WVOzfoarHAeC2749dcpzxMwsLv07Ztg0AOzVNf03Ttu/S9T2PMlbjc25fdpyutmx2TLRbIAEA4M1otKo1EjmaoHQn4ZwBgA/kAVAK6MXXdzxv/ONcrq/HcbJBeAUWoEizqsaORaPbKglZrxMSZZyrM76f/ovzWx/m85PFWREUgQf4v7Hm/xcIA8gWkE0YQLaAbMIAsgVkEwaQLSCbMIBsAdmEAWQLyCYMIFtANmEA2QKyCQPIFpDNmg/wD3OFdEybUvJjAAAAAElFTkSuQmCC",mbMap.on("styleimagemissing",e=>{emptyImage&&mbMap.addImage(e.id,emptyImage)}),mbMap.on("load",()=>{emptyImage=new Image,emptyImage.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",emptyImage.crossOrigin="anonymous",resolve(mbMap)})})}async _initializeMap(){const initialView=await async function(goto,settings){return settings.initialLocation===constants.INITIAL_LOCATION.FIXED_LOCATION?{lat:settings.fixedLocation.lat,lon:settings.fixedLocation.lon,zoom:settings.fixedLocation.zoom}:settings.initialLocation===constants.INITIAL_LOCATION.BROWSER_LOCATION?await new Promise((resolve,reject)=>{navigator.geolocation.getCurrentPosition(pos=>{resolve({lat:pos.coords.latitude,lon:pos.coords.longitude,zoom:settings.browserLocation.zoom})},()=>{console.warn("Unable to fetch browser location for initial map location"),resolve(null)})}):settings.initialLocation===constants.INITIAL_LOCATION.AUTO_FIT_TO_BOUNDS?null:goto&&goto.center?goto.center:null}(this.props.goto,this.props.settings);if(!this._isMounted)return;let mbMap;try{mbMap=await this._createMbMapInstance(initialView)}catch(error){return void this.props.setMapInitError(error.message)}this._isMounted&&this.setState({mbMap:mbMap},()=>{this._loadMakiSprites(mbMap),this._initResizerChecker(),this._registerMapEventListeners(mbMap),this.props.onMapReady(this._getMapState())})}_registerMapEventListeners(mbMap){if(mbMap.on("moveend",external_kbnSharedDeps_Lodash_default.a.debounce(()=>{this.props.extentChanged(this._getMapState())},100)),!this.props.settings.hideViewControl){const throttledSetMouseCoordinates=external_kbnSharedDeps_Lodash_default.a.throttle(e=>{this.props.setMouseCoordinates({lat:e.lngLat.lat,lon:e.lngLat.lng})},100);mbMap.on("mousemove",throttledSetMouseCoordinates),mbMap.on("mouseout",()=>{throttledSetMouseCoordinates.cancel(),this.props.clearMouseCoordinates()})}}_initResizerChecker(){this._checker=new kibanaUtils_public_.ResizeChecker(this._containerRef),this._checker.on("resize",()=>{this.state.mbMap&&this.state.mbMap.resize()})}async _loadMakiSprites(mbMap){const spritesUrl=Object(util.g)()?sprite_2_default.a:sprite_1_default.a,json=Object(util.g)()?maki.spritesheet[2]:maki.spritesheet[1],spritesData=await Object(utils.b)(spritesUrl);this._isMounted&&Object(utils.a)(json,spritesData,mbMap)}_syncSettings(){if(!this.state.mbMap)return;if(void 0===this._prevDisableInteractive||this._prevDisableInteractive!==this.props.settings.disableInteractive)if(this._prevDisableInteractive=this.props.settings.disableInteractive,this.props.settings.disableInteractive){this.state.mbMap.boxZoom.disable(),this.state.mbMap.doubleClickZoom.disable(),this.state.mbMap.dragPan.disable();try{this.state.mbMap.removeControl(this._navigationControl)}catch(error){}}else this.state.mbMap.boxZoom.enable(),this.state.mbMap.doubleClickZoom.enable(),this.state.mbMap.dragPan.enable(),this.state.mbMap.addControl(this._navigationControl,"top-left");let zoomRangeChanged=!1;this.props.settings.minZoom!==this.state.mbMap.getMinZoom()&&(this.state.mbMap.setMinZoom(this.props.settings.minZoom),zoomRangeChanged=!0),this.props.settings.maxZoom!==this.state.mbMap.getMaxZoom()&&(this.state.mbMap.setMaxZoom(this.props.settings.maxZoom),zoomRangeChanged=!0),zoomRangeChanged&&setTimeout(()=>{this.props.extentChanged(this._getMapState())},300)}render(){let drawControl,tooltipControl,scaleControl;return this.state.mbMap&&(drawControl=this.props.addFilters?external_kbnSharedDeps_React_default.a.createElement(connected,{mbMap:this.state.mbMap,addFilters:this.props.addFilters}):null,tooltipControl=this.props.settings.disableTooltipControl?null:external_kbnSharedDeps_React_default.a.createElement(connectedTooltipControl,{mbMap:this.state.mbMap,addFilters:this.props.addFilters,getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,onSingleValueTrigger:this.props.onSingleValueTrigger,geoFields:this.props.geoFields,renderTooltipContent:this.props.renderTooltipContent}),scaleControl=this.props.settings.showScaleControl?external_kbnSharedDeps_React_default.a.createElement(scale_control_ScaleControl,{mbMap:this.state.mbMap,isFullScreen:this.props.isFullScreen}):null),external_kbnSharedDeps_React_default.a.createElement("div",{id:"mapContainer",className:"mapContainer",ref:this._setContainerRef,"data-test-subj":"mapContainer"},drawControl,scaleControl,tooltipControl)}}const mb_map_connected=Object(lib.connect)((function(state){return{isMapReady:Object(map_selectors.r)(state),settings:Object(map_selectors.s)(state),layerList:Object(map_selectors.k)(state),spatialFiltersLayer:Object(map_selectors.F)(state),goto:Object(map_selectors.g)(state),inspectorAdapters:Object(non_serializable_instances.d)(state),scrollZoom:Object(map_selectors.z)(state),isFullScreen:Object(ui_selectors.b)(state)}}),(function(dispatch){return{extentChanged:mapExtentState=>{dispatch(Object(public_actions.ib)(mapExtentState))},onMapReady:mapExtentState=>{dispatch(Object(public_actions.W)()),dispatch(Object(public_actions.ib)(mapExtentState)),dispatch(Object(public_actions.jb)())},onMapDestroyed:()=>{dispatch(Object(public_actions.hb)())},setMouseCoordinates:({lat:lat,lon:lon})=>{dispatch(Object(public_actions.Db)({lat:lat,lon:lon}))},clearMouseCoordinates:()=>{dispatch(Object(public_actions.X)())},clearGoto:()=>{dispatch(Object(public_actions.W)())},setMapInitError(errorMessage){dispatch(Object(public_actions.Bb)(errorMessage))},setAreTilesLoaded(layerId,areTilesLoaded){dispatch(Object(public_actions.ub)(layerId,areTilesLoaded))}}}))(mb_map_MBMap);function toc_entry_button_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class toc_entry_button_TOCEntryButton extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),toc_entry_button_defineProperty(this,"_isMounted",!1),toc_entry_button_defineProperty(this,"state",{isFilteredByGlobalTime:!1})}componentDidMount(){this._isMounted=!0,this._loadIsFilteredByGlobalTime()}componentDidUpdate(){this._loadIsFilteredByGlobalTime()}componentWillUnmount(){this._isMounted=!1}async _loadIsFilteredByGlobalTime(){const isFilteredByGlobalTime=await this.props.layer.isFilteredByGlobalTime();this._isMounted&&isFilteredByGlobalTime!==this.state.isFilteredByGlobalTime&&this.setState({isFilteredByGlobalTime:isFilteredByGlobalTime})}getIconAndTooltipContent(){let icon,tooltipContent=null;const footnotes=[];if(this.props.layer.hasErrors())icon=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layer.loadWarningAriaLabel",{defaultMessage:"Load warning"}),size:"m",type:"alert",color:"warning"}),tooltipContent=this.props.layer.getErrors();else if(this.props.layer.isVisible())if(this.props.layer.isLayerLoading())icon=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"m"});else if(this.props.layer.showAtZoomLevel(this.props.zoom)){const customIconAndTooltipContent=this.props.layer.getCustomIconAndTooltipContent();customIconAndTooltipContent&&(icon=customIconAndTooltipContent.icon,customIconAndTooltipContent.areResultsTrimmed?footnotes.push({icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{color:"subdued",type:"partial",size:"s"}),message:customIconAndTooltipContent.tooltipContent}):tooltipContent=customIconAndTooltipContent.tooltipContent),this.props.isUsingSearch&&this.props.layer.getQueryableIndexPatternIds().length&&footnotes.push({icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{color:"subdued",type:"filter",size:"s"}),message:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layer.isUsingSearchMsg",{defaultMessage:"Results narrowed by search bar"})}),this.state.isFilteredByGlobalTime&&footnotes.push({icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{color:"subdued",type:"clock",size:"s"}),message:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layer.isUsingTimeFilter",{defaultMessage:"Results narrowed by time filter"})})}else{const minZoom=this.props.layer.getMinZoom(),maxZoom=this.props.layer.getMaxZoom();icon=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{size:"m",type:"expand"}),tooltipContent=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layer.zoomFeedbackTooltip",{defaultMessage:"Layer is visible between zoom levels {minZoom} and {maxZoom}.",values:{minZoom:minZoom,maxZoom:maxZoom}})}else icon=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{size:"m",type:"eyeClosed"}),tooltipContent=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layer.layerHiddenTooltip",{defaultMessage:"Layer is hidden."});return{icon:icon,tooltipContent:tooltipContent,footnotes:footnotes}}render(){const{icon:icon,tooltipContent:tooltipContent,footnotes:footnotes}=this.getIconAndTooltipContent(),footnoteIcons=footnotes.map((footnote,index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,{key:index},"",footnote.icon)),footnoteTooltipContent=footnotes.map((footnote,index)=>external_kbnSharedDeps_React_default.a.createElement("div",{key:index},footnote.icon," ",footnote.message));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{anchorClassName:"mapLayTocActions__tooltipAnchor",position:"top",title:this.props.displayName,content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,tooltipContent,footnoteTooltipContent)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{className:"mapTocEntry__layerName eui-textLeft",size:"xs",flush:"left",color:"text",onClick:this.props.onClick,"data-test-subj":"layerTocActionsPanelToggleButton"+this.props.escapedDisplayName},external_kbnSharedDeps_React_default.a.createElement("span",{className:"mapTocEntry__layerNameIcon"},icon),this.props.displayName," ",footnoteIcons))}}const toc_entry_button_connected=Object(lib.connect)((function(state,ownProps){return{isUsingSearch:Object(map_selectors.N)(state),zoom:Object(map_selectors.t)(state)}}))(toc_entry_button_TOCEntryButton);function getVisibilityToggleIcon(isVisible){return isVisible?"eyeClosed":"eye"}function getVisibilityToggleLabel(isVisible){return isVisible?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerTocActions.hideLayerTitle",{defaultMessage:"Hide layer"}):external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerTocActions.showLayerTitle",{defaultMessage:"Show layer"})}const EDIT_LAYER_LABEL=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerControl.layerTocActions.editButtonLabel",{defaultMessage:"Edit layer"}),FIT_TO_DATA_LABEL=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerTocActions.fitToDataTitle",{defaultMessage:"Fit to data"});function toc_entry_actions_popover_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class toc_entry_actions_popover_TOCEntryActionsPopover extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),toc_entry_actions_popover_defineProperty(this,"state",{isPopoverOpen:!1}),toc_entry_actions_popover_defineProperty(this,"_togglePopover",()=>{this.setState(prevState=>({isPopoverOpen:!prevState.isPopoverOpen}))}),toc_entry_actions_popover_defineProperty(this,"_closePopover",()=>{this.setState(()=>({isPopoverOpen:!1}))})}_cloneLayer(){this.props.cloneLayer(this.props.layer.getId())}_fitToBounds(){this.props.fitToBounds(this.props.layer.getId())}_removeLayer(){this.props.removeLayer(this.props.layer.getId())}_toggleVisible(){this.props.toggleVisible(this.props.layer.getId())}_getActionsPanel(){const actionItems=[{name:FIT_TO_DATA_LABEL,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"expand",size:"m"}),"data-test-subj":"fitToBoundsButton",toolTipContent:this.props.supportsFitToBounds?null:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerTocActions.noFitSupportTooltip",{defaultMessage:"Layer does not support fit to data"}),disabled:!this.props.supportsFitToBounds,onClick:()=>{this._closePopover(),this._fitToBounds()}},{name:getVisibilityToggleLabel(this.props.layer.isVisible()),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:getVisibilityToggleIcon(this.props.layer.isVisible()),size:"m"}),"data-test-subj":"layerVisibilityToggleButton",toolTipContent:null,onClick:()=>{this._closePopover(),this._toggleVisible()}}];return this.props.isReadOnly||(actionItems.push({disabled:this.props.isEditButtonDisabled,name:EDIT_LAYER_LABEL,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"pencil",size:"m"}),"data-test-subj":"editLayerButton",toolTipContent:null,onClick:()=>{this._closePopover(),this.props.editLayer()}}),actionItems.push({name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerTocActions.cloneLayerTitle",{defaultMessage:"Clone layer"}),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"copy",size:"m"}),toolTipContent:null,"data-test-subj":"cloneLayerButton",onClick:()=>{this._closePopover(),this._cloneLayer()}}),actionItems.push({name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerTocActions.removeLayerTitle",{defaultMessage:"Remove layer"}),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"trash",size:"m"}),toolTipContent:null,"data-test-subj":"removeLayerButton",onClick:()=>{this._closePopover(),this._removeLayer()}})),{id:0,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerTocActions.layerActionsTitle",{defaultMessage:"Layer actions"}),items:actionItems}}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{id:this.props.layer.getId(),className:"mapLayTocActions",button:external_kbnSharedDeps_React_default.a.createElement(toc_entry_button_connected,{layer:this.props.layer,displayName:this.props.displayName,escapedDisplayName:this.props.escapedDisplayName,onClick:this._togglePopover}),isOpen:this.state.isPopoverOpen,closePopover:this._closePopover,panelPaddingSize:"none",anchorPosition:"leftUp",anchorClassName:"mapLayTocActions__popoverAnchor"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiContextMenu,{initialPanelId:0,panels:[this._getActionsPanel()],"data-test-subj":"layerTocActionsPanel"+this.props.escapedDisplayName}))}}const toc_entry_actions_popover_connected=Object(lib.connect)((function(state){return{isReadOnly:Object(ui_selectors.d)(state)}}),(function(dispatch){return{cloneLayer:layerId=>{dispatch(Object(public_actions.Y)(layerId))},fitToBounds:layerId=>{dispatch(Object(public_actions.fb)(layerId))},removeLayer:layerId=>{dispatch(Object(public_actions.ob)(layerId))},toggleVisible:layerId=>{dispatch(Object(public_actions.Kb)(layerId))}}}))(toc_entry_actions_popover_TOCEntryActionsPopover);function view_extends(){return(view_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function view_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function escapeLayerName(name){return name?name.split(" ").join("_"):""}class view_TOCEntry extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args),view_defineProperty(this,"state",{displayName:null,hasLegendDetails:!1,shouldShowModal:!1,supportsFitToBounds:!1}),view_defineProperty(this,"_toggleLayerDetailsVisibility",()=>{this.props.isLegendDetailsOpen?this.props.hideTOCDetails(this.props.layer.getId()):this.props.showTOCDetails(this.props.layer.getId())}),view_defineProperty(this,"_openLayerPanelWithCheck",()=>{const{selectedLayer:selectedLayer,hasDirtyStateSelector:hasDirtyStateSelector}=this.props;selectedLayer&&selectedLayer.getId()===this.props.layer.getId()||(hasDirtyStateSelector?this.setState({shouldShowModal:!0}):this.props.openLayerPanel(this.props.layer.getId()))}),view_defineProperty(this,"_fitToBounds",()=>{this.props.fitToBounds(this.props.layer.getId())}),view_defineProperty(this,"_toggleVisible",()=>{this.props.toggleVisible(this.props.layer.getId())}),view_defineProperty(this,"_renderLegendDetails",()=>{if(!this.props.isLegendDetailsOpen||!this.state.hasLegendDetails)return null;const tocDetails=this.props.layer.renderLegendDetails();return tocDetails?external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapTocEntry__layerDetails","data-test-subj":"mapLayerTOCDetails"+escapeLayerName(this.state.displayName)},tocDetails):null})}componentDidMount(){this._isMounted=!0,this._updateDisplayName(),this._loadHasLegendDetails(),this._loadSupportsFitToBounds()}componentWillUnmount(){this._isMounted=!1}componentDidUpdate(){this._updateDisplayName(),this._loadHasLegendDetails()}async _loadSupportsFitToBounds(){const supportsFitToBounds=await this.props.layer.supportsFitToBounds();this._isMounted&&this.setState({supportsFitToBounds:supportsFitToBounds})}async _loadHasLegendDetails(){const hasLegendDetails=await this.props.layer.hasLegendDetails()&&this.props.layer.isVisible()&&this.props.layer.showAtZoomLevel(this.props.zoom);this._isMounted&&hasLegendDetails!==this.state.hasLegendDetails&&this.setState({hasLegendDetails:hasLegendDetails})}async _updateDisplayName(){const label=await this.props.layer.getDisplayName();this._isMounted&&label!==this.state.displayName&&this.setState({displayName:label})}_renderCancelModal(){if(!this.state.shouldShowModal)return null;const closeModal=()=>{this.setState({shouldShowModal:!1})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiConfirmModal,{title:"Discard changes",onCancel:closeModal,onConfirm:()=>{closeModal(),this.props.openLayerPanel(this.props.layer.getId())},cancelButtonText:"Do not proceed",confirmButtonText:"Proceed and discard changes",buttonColor:"danger",defaultFocusedButton:"cancel"},external_kbnSharedDeps_React_default.a.createElement("p",null,"There are unsaved changes to your layer."),external_kbnSharedDeps_React_default.a.createElement("p",null,"Are you sure you want to proceed?"))}_renderQuickActions(){const quickActions=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:getVisibilityToggleIcon(this.props.layer.isVisible()),title:getVisibilityToggleLabel(this.props.layer.isVisible()),"aria-label":getVisibilityToggleLabel(this.props.layer.isVisible()),onClick:this._toggleVisible})];return this.state.supportsFitToBounds&&quickActions.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"expand",title:FIT_TO_DATA_LABEL,"aria-label":FIT_TO_DATA_LABEL,onClick:this._fitToBounds})),this.props.isReadOnly||(quickActions.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{isDisabled:this.props.isEditButtonDisabled,iconType:"pencil","aria-label":EDIT_LAYER_LABEL,title:EDIT_LAYER_LABEL,onClick:this._openLayerPanelWithCheck})),quickActions.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,view_extends({iconType:"grab",title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerControl.tocEntry.grabButtonTitle",{defaultMessage:"Reorder layer"}),"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerControl.tocEntry.grabButtonAriaLabel",{defaultMessage:"Reorder layer"}),className:"mapTocEntry__grab"},this.props.dragHandleProps)))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapTocEntry__layerIcons"},quickActions)}_renderDetailsToggle(){if(!this.state.hasLegendDetails)return null;const{isLegendDetailsOpen:isLegendDetailsOpen}=this.props;return external_kbnSharedDeps_React_default.a.createElement("span",{className:"mapTocEntry__detailsToggle"},external_kbnSharedDeps_React_default.a.createElement("button",{className:"mapTocEntry__detailsToggleButton","aria-label":isLegendDetailsOpen?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerControl.tocEntry.hideDetailsButtonAriaLabel",{defaultMessage:"Hide layer details"}):external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerControl.tocEntry.showDetailsButtonAriaLabel",{defaultMessage:"Show layer details"}),title:isLegendDetailsOpen?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerControl.tocEntry.hideDetailsButtonTitle",{defaultMessage:"Hide layer details"}):external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerControl.tocEntry.showDetailsButtonTitle",{defaultMessage:"Show layer details"}),onClick:this._toggleLayerDetailsVisibility},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{className:"eui-alignBaseline",type:isLegendDetailsOpen?"arrowUp":"arrowDown",size:"s"})))}_renderLayerHeader(){const{layer:layer,zoom:zoom}=this.props;return external_kbnSharedDeps_React_default.a.createElement("div",{className:layer.isVisible()&&layer.showAtZoomLevel(zoom)&&!layer.hasErrors()?"mapTocEntry-visible":"mapTocEntry-notVisible"},external_kbnSharedDeps_React_default.a.createElement(toc_entry_actions_popover_connected,{layer:layer,displayName:this.state.displayName,escapedDisplayName:escapeLayerName(this.state.displayName),editLayer:this._openLayerPanelWithCheck,isEditButtonDisabled:this.props.isEditButtonDisabled,supportsFitToBounds:this.state.supportsFitToBounds}),this._renderQuickActions())}render(){const classes=classnames_default()("mapTocEntry",{"mapTocEntry-isDragging":this.props.isDragging,"mapTocEntry-isDraggingOver":this.props.isDraggingOver,"mapTocEntry-isSelected":this.props.layer.isPreviewLayer()||this.props.selectedLayer&&this.props.selectedLayer.getId()===this.props.layer.getId()});return external_kbnSharedDeps_React_default.a.createElement("div",{className:classes,id:this.props.layer.getId(),"data-layerid":this.props.layer.getId()},this._renderLayerHeader(),this._renderLegendDetails(),this._renderDetailsToggle(),this._renderCancelModal())}}var reducers_ui=__webpack_require__(54);const connectedTOCEntry=Object(lib.connect)((function(state={},ownProps){const flyoutDisplay=Object(ui_selectors.a)(state);return{isReadOnly:Object(ui_selectors.d)(state),zoom:Object(map_selectors.t)(state),selectedLayer:Object(map_selectors.C)(state),hasDirtyStateSelector:Object(map_selectors.I)(state),isLegendDetailsOpen:Object(ui_selectors.e)(state).includes(ownProps.layer.getId()),isEditButtonDisabled:flyoutDisplay!==reducers_ui.c.NONE&&flyoutDisplay!==reducers_ui.c.LAYER_PANEL}}),(function(dispatch){return{fitToBounds:layerId=>{dispatch(Object(public_actions.fb)(layerId))},openLayerPanel:async layerId=>{await dispatch(Object(public_actions.Ib)(layerId)),dispatch(Object(public_actions.Nb)(reducers_ui.c.LAYER_PANEL))},hideTOCDetails:layerId=>{dispatch(Object(public_actions.gb)(layerId))},showTOCDetails:layerId=>{dispatch(Object(public_actions.Jb)(layerId))},toggleVisible:layerId=>{dispatch(Object(public_actions.Kb)(layerId))}}}))(view_TOCEntry);function layer_toc_view_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class view_LayerTOC extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args),layer_toc_view_defineProperty(this,"_updateDebounced",external_kbnSharedDeps_Lodash_default.a.debounce(this.forceUpdate,100)),layer_toc_view_defineProperty(this,"_onDragEnd",({source:source,destination:destination})=>{if(!destination)return;const reverseIndex=index=>this.props.layerList.length-index-1,prevIndex=reverseIndex(source.index),newIndex=reverseIndex(destination.index),newOrder=[];for(let i=0;i<this.props.layerList.length;i++)newOrder.push(i);newOrder.splice(prevIndex,1),newOrder.splice(newIndex,0,prevIndex),this.props.updateLayerOrder(newOrder)})}componentWillUnmount(){this._updateDebounced.cancel()}shouldComponentUpdate(){return this._updateDebounced(),!1}_renderLayers(){const reverseLayerList=[...this.props.layerList].reverse();return this.props.isReadOnly?reverseLayerList.map(layer=>external_kbnSharedDeps_React_default.a.createElement(connectedTOCEntry,{key:layer.getId(),layer:layer})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDragDropContext,{onDragEnd:this._onDragEnd},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDroppable,{droppableId:"mapLayerTOC",spacing:"none"},(provided,snapshot)=>reverseLayerList.map((layer,idx)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDraggable,{spacing:"none",key:layer.getId(),index:idx,draggableId:layer.getId(),customDragHandle:!0,disableInteractiveElementBlocking:!0},(provided,state)=>external_kbnSharedDeps_React_default.a.createElement(connectedTOCEntry,{layer:layer,dragHandleProps:provided.dragHandleProps,isDragging:state.isDragging,isDraggingOver:snapshot.isDraggingOver})))))}render(){return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"mapLayerTOC"},this._renderLayers())}}const layer_toc_mapDispatchToProps={updateLayerOrder:newOrder=>Object(public_actions.Tb)(newOrder)};const connectedLayerTOC=Object(lib.connect)((function(state={}){return{isReadOnly:Object(ui_selectors.d)(state),layerList:Object(map_selectors.k)(state)}}),layer_toc_mapDispatchToProps,null,{forwardRef:!0})(view_LayerTOC);const connectedLayerControl=Object(lib.connect)((function(state={}){return{isReadOnly:Object(ui_selectors.d)(state),isLayerTOCOpen:Object(ui_selectors.c)(state),layerList:Object(map_selectors.k)(state),isFlyoutOpen:Object(ui_selectors.a)(state)!==reducers_ui.c.NONE}}),(function(dispatch){return{showAddLayerWizard:async()=>{await dispatch(Object(public_actions.Ib)(null)),dispatch(Object(public_actions.Nb)(reducers_ui.c.ADD_LAYER_WIZARD))},closeLayerTOC:()=>{dispatch(Object(public_actions.yb)(!1))},openLayerTOC:()=>{dispatch(Object(public_actions.yb)(!0))}}}))((function({isReadOnly:isReadOnly,isLayerTOCOpen:isLayerTOCOpen,showAddLayerWizard:showAddLayerWizard,closeLayerTOC:closeLayerTOC,openLayerTOC:openLayerTOC,layerList:layerList,isFlyoutOpen:isFlyoutOpen}){if(!isLayerTOCOpen){const hasErrors=layerList.some(layer=>layer.hasErrors()),isLoading=layerList.some(layer=>layer.isLayerLoading()&&layer.isVisible());return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{delay:"long",content:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerControl.openLayerTOCButtonAriaLabel",{defaultMessage:"Expand layers panel"}),position:"left"},function({hasErrors:hasErrors,isLoading:isLoading,onClick:onClick}){const expandLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerControl.openLayerTOCButtonAriaLabel",{defaultMessage:"Expand layers panel"});return isLoading?external_kbnSharedDeps_React_default.a.createElement("button",{className:"euiButtonIcon euiButtonIcon--text mapLayerControl__openLayerTOCButton",type:"button",onClick:onClick,"aria-label":expandLabel},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"m"})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{className:"mapLayerControl__openLayerTOCButton",color:"text",onClick:onClick,iconType:hasErrors?"alert":"menuLeft","aria-label":expandLabel})}({hasErrors:hasErrors,isLoading:isLoading,onClick:openLayerTOC}))}let addLayer;return isReadOnly||(addLayer=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{isDisabled:isFlyoutOpen,className:"mapLayerControl__addLayerButton",fill:!0,fullWidth:!0,onClick:showAddLayerWizard,"data-test-subj":"addLayerButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.layerControl.addLayerButtonLabel",defaultMessage:"Add layer"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,{className:"mapWidgetControl mapWidgetControl-hasShadow",paddingSize:"none",grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{className:"mapWidgetControl__headerFlexItem",grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center",responsive:!1,gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xxxs",className:"mapWidgetControl__header"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.layerControl.layersTitle",defaultMessage:"Layers"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{delay:"long",content:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerControl.closeLayerTOCButtonAriaLabel",{defaultMessage:"Collapse layers panel"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{className:"mapLayerControl__closeLayerTOCButton",onClick:closeLayerTOC,iconType:"menuRight",color:"text","aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerControl.closeLayerTOCButtonAriaLabel",{defaultMessage:"Collapse layers panel"}),"data-test-subj":"mapToggleLegendButton"}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{className:"mapLayerControl"},external_kbnSharedDeps_React_default.a.createElement(connectedLayerTOC,null))),addLayer)}));const connectedViewControl=Object(lib.connect)((function(state={}){return{mouseCoordinates:Object(map_selectors.u)(state),zoom:Object(map_selectors.t)(state)}}),null)((function({mouseCoordinates:mouseCoordinates,zoom:zoom}){let latLon;return mouseCoordinates&&(latLon=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.viewControl.latLabel",defaultMessage:"lat:"}))," ",external_kbnSharedDeps_Lodash_default.a.round(mouseCoordinates.lat,constants.DECIMAL_DEGREES_PRECISION),","," ",external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.viewControl.lonLabel",defaultMessage:"lon:"}))," ",external_kbnSharedDeps_Lodash_default.a.round(mouseCoordinates.lon,constants.DECIMAL_DEGREES_PRECISION),","," ")),external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapViewControl__coordinates"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("small",null,latLon,external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.viewControl.zoomLabel",defaultMessage:"zoom:"}))," ",zoom)))}));function attribution_control_view_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class view_AttributionControl extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args),attribution_control_view_defineProperty(this,"state",{uniqueAttributions:[]}),attribution_control_view_defineProperty(this,"_loadAttributions",async()=>{const attributionPromises=this.props.layerList.map(async layer=>{try{return await layer.getAttributions()}catch(error){return[]}}),attributions=await Promise.all(attributionPromises);if(!this._isMounted)return;const uniqueAttributions=[];for(let i=0;i<attributions.length;i++)for(let j=0;j<attributions[i].length;j++){const testAttr=attributions[i][j];uniqueAttributions.find(added=>added.url===testAttr.url&&added.label===testAttr.label)||uniqueAttributions.push(testAttr)}uniqueAttributions.reverse(),external_kbnSharedDeps_Lodash_default.a.isEqual(this.state.uniqueAttributions,uniqueAttributions)||this.setState({uniqueAttributions:uniqueAttributions})})}componentDidMount(){this._isMounted=!0,this._loadAttributions()}componentWillUnmount(){this._isMounted=!1}componentDidUpdate(){this._loadAttributions()}_renderAttribution({url:url,label:label}){return url?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{color:"text",href:url,target:"_blank"},label):label}_renderAttributions(){return this.state.uniqueAttributions.map((attribution,index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,{key:index},this._renderAttribution(attribution),index<this.state.uniqueAttributions.length-1&&", "))}render(){return 0===this.state.uniqueAttributions.length?null:external_kbnSharedDeps_React_default.a.createElement("div",{className:classnames_default()("mapAttributionControl",{mapAttributionControl__fullScreen:this.props.isFullScreen})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("small",null,external_kbnSharedDeps_React_default.a.createElement("strong",null,this._renderAttributions()))))}}const attribution_control_connectedViewControl=Object(lib.connect)((function(state={}){return{layerList:Object(map_selectors.k)(state),isFullScreen:Object(ui_selectors.b)(state)}}),(function(){return{}}))(view_AttributionControl);const connectedWidgetOverlay=Object(lib.connect)((function(state={}){return{settings:Object(map_selectors.s)(state)}}),null)((function({settings:settings}){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{className:"mapWidgetOverlay",responsive:!1,direction:"column",alignItems:"flexEnd",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{className:"mapWidgetOverlay__layerWrapper"},!settings.hideLayerControl&&external_kbnSharedDeps_React_default.a.createElement(connectedLayerControl,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},!settings.hideViewControl&&external_kbnSharedDeps_React_default.a.createElement(connectedViewControl,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(attribution_control_connectedViewControl,null)))}));function set_view_control_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class set_view_control_SetViewControl extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),set_view_control_defineProperty(this,"state",{isPopoverOpen:!1,lat:0,lon:0,zoom:0}),set_view_control_defineProperty(this,"_togglePopover",()=>{this.state.isPopoverOpen?this._closePopover():this.setState({lat:this.props.center.lat,lon:this.props.center.lon,zoom:this.props.zoom,isPopoverOpen:!0})}),set_view_control_defineProperty(this,"_closePopover",()=>{this.setState({isPopoverOpen:!1})}),set_view_control_defineProperty(this,"_onLatChange",evt=>{this._onChange("lat",evt)}),set_view_control_defineProperty(this,"_onLonChange",evt=>{this._onChange("lon",evt)}),set_view_control_defineProperty(this,"_onZoomChange",evt=>{this._onChange("zoom",evt)}),set_view_control_defineProperty(this,"_onChange",(name,evt)=>{const sanitizedValue=parseFloat(evt.target.value);this.setState({[name]:isNaN(sanitizedValue)?"":sanitizedValue})}),set_view_control_defineProperty(this,"_renderNumberFormRow",({value:value,min:min,max:max,onChange:onChange,label:label,dataTestSubj:dataTestSubj})=>{const isInvalid=""===value||value>max||value<min,error=isInvalid?`Must be between ${min} and ${max}`:null;return{isInvalid:isInvalid,component:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:label,isInvalid:isInvalid,error:error,display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldNumber,{compressed:!0,value:value,onChange:onChange,isInvalid:isInvalid,"data-test-subj":dataTestSubj}))}}),set_view_control_defineProperty(this,"_onSubmit",()=>{const{lat:lat,lon:lon,zoom:zoom}=this.state;this._closePopover(),this.props.onSubmit({lat:lat,lon:lon,zoom:zoom})})}_renderSetViewForm(){const{isInvalid:isLatInvalid,component:latFormRow}=this._renderNumberFormRow({value:this.state.lat,min:-90,max:90,onChange:this._onLatChange,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.setViewControl.latitudeLabel",{defaultMessage:"Latitude"}),dataTestSubj:"latitudeInput"}),{isInvalid:isLonInvalid,component:lonFormRow}=this._renderNumberFormRow({value:this.state.lon,min:-180,max:180,onChange:this._onLonChange,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.setViewControl.longitudeLabel",{defaultMessage:"Longitude"}),dataTestSubj:"longitudeInput"}),{isInvalid:isZoomInvalid,component:zoomFormRow}=this._renderNumberFormRow({value:this.state.zoom,min:this.props.settings.minZoom,max:this.props.settings.maxZoom,onChange:this._onZoomChange,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.setViewControl.zoomLabel",{defaultMessage:"Zoom"}),dataTestSubj:"zoomInput"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiForm,{"data-test-subj":"mapSetViewForm",style:{width:240}},latFormRow,lonFormRow,zoomFormRow,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextAlign,{textAlign:"right"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{size:"s",fill:!0,disabled:isLatInvalid||isLonInvalid||isZoomInvalid,onClick:this._onSubmit,"data-test-subj":"submitViewButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.setViewControl.submitButtonLabel",defaultMessage:"Go"}))))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{anchorPosition:"leftUp",panelPaddingSize:"s",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,{paddingSize:"none",className:"mapToolbarOverlay__button"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{size:"s",onClick:this._togglePopover,"data-test-subj":"toggleSetViewVisibilityButton",iconType:"crosshairs",color:"text","aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.setViewControl.goToButtonLabel",{defaultMessage:"Go to"}),title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.setViewControl.goToButtonLabel",{defaultMessage:"Go to"})})),isOpen:this.state.isPopoverOpen,closePopover:this._closePopover},this._renderSetViewForm())}}const connectedSetViewControl=Object(lib.connect)((function(state){return{settings:Object(map_selectors.s)(state),zoom:Object(map_selectors.t)(state),center:Object(map_selectors.o)(state)}}),(function(dispatch){return{onSubmit:({lat:lat,lon:lon,zoom:zoom})=>{dispatch(Object(public_actions.wb)({lat:lat,lon:lon,zoom:zoom}))}}}))(set_view_control_SetViewControl);function distance_filter_form_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class distance_filter_form_DistanceFilterForm extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),distance_filter_form_defineProperty(this,"state",{actionId:data_public_.ACTION_GLOBAL_APPLY_FILTER,selectedField:this.props.geoFields.length?this.props.geoFields[0]:void 0,filterLabel:""}),distance_filter_form_defineProperty(this,"_onGeoFieldChange",selectedField=>{this.setState({selectedField:selectedField})}),distance_filter_form_defineProperty(this,"_onFilterLabelChange",e=>{this.setState({filterLabel:e.target.value})}),distance_filter_form_defineProperty(this,"_onActionIdChange",value=>{this.setState({actionId:value})}),distance_filter_form_defineProperty(this,"_onSubmit",()=>{this.state.selectedField&&this.props.onSubmit({actionId:this.state.actionId,filterLabel:this.state.filterLabel,indexPatternId:this.state.selectedField.indexPatternId,geoFieldName:this.state.selectedField.geoFieldName})})}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiForm,{className:this.props.className},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.distanceFilterForm.filterLabelLabel",{defaultMessage:"Filter label"}),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{compressed:!0,value:this.state.filterLabel,onChange:this._onFilterLabelChange})),external_kbnSharedDeps_React_default.a.createElement(MultiIndexGeoFieldSelect,{selectedField:this.state.selectedField,fields:this.props.geoFields,onChange:this._onGeoFieldChange}),external_kbnSharedDeps_React_default.a.createElement(action_select_ActionSelect,{getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,value:this.state.actionId,onChange:this._onActionIdChange}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextAlign,{textAlign:"right"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{size:"s",fill:!0,onClick:this._onSubmit,isDisabled:!this.state.selectedField},this.props.buttonLabel)))}}function tools_control_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const DRAW_SHAPE_LABEL=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.toolbarOverlay.drawShapeLabel",{defaultMessage:"Draw shape to filter data"}),DRAW_BOUNDS_LABEL=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.toolbarOverlay.drawBoundsLabel",{defaultMessage:"Draw bounds to filter data"}),DRAW_DISTANCE_LABEL=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.toolbarOverlay.drawDistanceLabel",{defaultMessage:"Draw distance to filter data"}),DRAW_SHAPE_LABEL_SHORT=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.toolbarOverlay.drawShapeLabelShort",{defaultMessage:"Draw shape"}),DRAW_BOUNDS_LABEL_SHORT=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.toolbarOverlay.drawBoundsLabelShort",{defaultMessage:"Draw bounds"}),DRAW_DISTANCE_LABEL_SHORT=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.toolbarOverlay.drawDistanceLabelShort",{defaultMessage:"Draw distance"});class tools_control_ToolsControl extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),tools_control_defineProperty(this,"state",{isPopoverOpen:!1}),tools_control_defineProperty(this,"_togglePopover",()=>{this.setState(prevState=>({isPopoverOpen:!prevState.isPopoverOpen}))}),tools_control_defineProperty(this,"_closePopover",()=>{this.setState({isPopoverOpen:!1})}),tools_control_defineProperty(this,"_initiateShapeDraw",options=>{this.props.initiateDraw({drawType:constants.DRAW_TYPE.POLYGON,...options}),this._closePopover()}),tools_control_defineProperty(this,"_initiateBoundsDraw",options=>{this.props.initiateDraw({drawType:constants.DRAW_TYPE.BOUNDS,...options}),this._closePopover()}),tools_control_defineProperty(this,"_initiateDistanceDraw",options=>{this.props.initiateDraw({drawType:constants.DRAW_TYPE.DISTANCE,...options}),this._closePopover()})}_getDrawPanels(){const tools=[{name:DRAW_SHAPE_LABEL,panel:1},{name:DRAW_BOUNDS_LABEL,panel:2},{name:DRAW_DISTANCE_LABEL,panel:3}];return[{id:0,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.toolbarOverlay.tools.toolbarTitle",{defaultMessage:"Tools"}),items:tools},{id:1,title:DRAW_SHAPE_LABEL_SHORT,content:external_kbnSharedDeps_React_default.a.createElement(geometry_filter_form_GeometryFilterForm,{className:"mapDrawControl__geometryFilterForm",buttonLabel:DRAW_SHAPE_LABEL_SHORT,geoFields:this.props.geoFields,getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,intitialGeometryLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.toolbarOverlay.drawShape.initialGeometryLabel",{defaultMessage:"shape"}),onSubmit:this._initiateShapeDraw})},{id:2,title:DRAW_BOUNDS_LABEL_SHORT,content:external_kbnSharedDeps_React_default.a.createElement(geometry_filter_form_GeometryFilterForm,{className:"mapDrawControl__geometryFilterForm",buttonLabel:DRAW_BOUNDS_LABEL_SHORT,geoFields:this.props.geoFields,getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,intitialGeometryLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.toolbarOverlay.drawBounds.initialGeometryLabel",{defaultMessage:"bounds"}),onSubmit:this._initiateBoundsDraw})},{id:3,title:DRAW_DISTANCE_LABEL_SHORT,content:external_kbnSharedDeps_React_default.a.createElement(distance_filter_form_DistanceFilterForm,{className:"mapDrawControl__geometryFilterForm",buttonLabel:DRAW_DISTANCE_LABEL_SHORT,geoFields:this.props.geoFields,getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,onSubmit:this._initiateDistanceDraw})}]}_renderToolsButton(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,{paddingSize:"none",className:"mapToolbarOverlay__button"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{size:"s",color:"text",iconType:"wrench",onClick:this._togglePopover,"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.toolbarOverlay.toolsControlTitle",{defaultMessage:"Tools"}),title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.toolbarOverlay.toolsControlTitle",{defaultMessage:"Tools"})}))}render(){const toolsPopoverButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{id:"toolsControlPopover",button:this._renderToolsButton(),isOpen:this.state.isPopoverOpen,closePopover:this._closePopover,panelPaddingSize:"none",anchorPosition:"leftUp"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiContextMenu,{initialPanelId:0,panels:this._getDrawPanels()}));return this.props.isDrawingFilter?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,toolsPopoverButton),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{size:"s",fill:!0,onClick:this.props.cancelDraw},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.tooltip.toolsControl.cancelDrawButtonLabel",defaultMessage:"Cancel"})))):toolsPopoverButton}}const connectedToolsControl=Object(lib.connect)((function(state){return{isDrawingFilter:Object(map_selectors.L)(state)}}),(function(dispatch){return{initiateDraw:drawState=>{dispatch(Object(public_actions.Mb)(drawState))},cancelDraw:()=>{dispatch(Object(public_actions.Mb)(null))}}}))(tools_control_ToolsControl);function fit_to_data_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class fit_to_data_FitToData extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args),fit_to_data_defineProperty(this,"_isMounted",!1),fit_to_data_defineProperty(this,"state",{canFit:!1})}componentDidMount(){this._isMounted=!0,this._loadCanFit()}componentWillUnmount(){this._isMounted=!1}componentDidUpdate(){this._loadCanFit()}async _loadCanFit(){const promises=this.props.layerList.map(async layer=>await layer.isFittable()),canFit=(await Promise.all(promises)).some(isFittable=>isFittable);this._isMounted&&this.state.canFit!==canFit&&this.setState({canFit:canFit})}render(){return this.state.canFit?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,{paddingSize:"none",className:"mapToolbarOverlay__button"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{size:"s",onClick:this.props.fitToBounds,"data-test-subj":"fitToData",iconType:"expand",color:"text","aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.fitToData.fitButtonLabel",{defaultMessage:"Fit to data bounds"}),title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.fitToData.fitAriaLabel",{defaultMessage:"Fit to data bounds"})})):null}}const connectedFitToData=Object(lib.connect)((function(state){return{layerList:Object(map_selectors.k)(state)}}),(function(dispatch){return{fitToBounds:()=>{dispatch(Object(public_actions.eb)())}}}))(fit_to_data_FitToData);function ToolbarOverlay(props){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{className:"mapToolbarOverlay",responsive:!1,direction:"column",alignItems:"flexStart",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(connectedSetViewControl,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(connectedFitToData,null)),function(){const{addFilters:addFilters,geoFields:geoFields,getFilterActions:getFilterActions,getActionContext:getActionContext}=props;return addFilters&&geoFields.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(connectedToolsControl,{geoFields:geoFields,getFilterActions:getFilterActions,getActionContext:getActionContext})):null}())}function GlobalFilterCheckbox({applyGlobalQuery:applyGlobalQuery,label:label,setApplyGlobalQuery:setApplyGlobalQuery}){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{display:"columnCompressedSwitch"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:label,checked:applyGlobalQuery,onChange:event=>{setApplyGlobalQuery(event.target.checked)},"data-test-subj":"mapLayerPanelApplyGlobalQueryCheckbox",compressed:!0}))}function GlobalTimeCheckbox({applyGlobalTime:applyGlobalTime,label:label,setApplyGlobalTime:setApplyGlobalTime}){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{display:"columnCompressedSwitch"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:label,checked:applyGlobalTime,onChange:event=>{setApplyGlobalTime(event.target.checked)},"data-test-subj":"mapLayerPanelApplyGlobalTimeCheckbox",compressed:!0}))}function filter_editor_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class filter_editor_FilterEditor extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),filter_editor_defineProperty(this,"state",{isPopoverOpen:!1,indexPatterns:[],isSourceTimeAware:!1}),filter_editor_defineProperty(this,"_toggle",()=>{this.setState(prevState=>({isPopoverOpen:!prevState.isPopoverOpen}))}),filter_editor_defineProperty(this,"_close",()=>{this.setState({isPopoverOpen:!1})}),filter_editor_defineProperty(this,"_onQueryChange",({query:query})=>{this.props.setLayerQuery(this.props.layer.getId(),query),this._close()}),filter_editor_defineProperty(this,"_onApplyGlobalQueryChange",applyGlobalQuery=>{this.props.updateSourceProp(this.props.layer.getId(),"applyGlobalQuery",applyGlobalQuery)}),filter_editor_defineProperty(this,"_onApplyGlobalTimeChange",applyGlobalTime=>{this.props.updateSourceProp(this.props.layer.getId(),"applyGlobalTime",applyGlobalTime)})}componentDidMount(){this._isMounted=!0,this._loadIndexPatterns(),this._loadSourceTimeAware()}componentWillUnmount(){this._isMounted=!1}async _loadIndexPatterns(){const indexPatternIds=this.props.layer.getSource().getIndexPatternIds(),indexPatterns=[],getIndexPatternPromises=indexPatternIds.map(async indexPatternId=>{try{const indexPattern=await Object(kibana_services.p)().get(indexPatternId);indexPatterns.push(indexPattern)}catch(err){}});await Promise.all(getIndexPatternPromises),this._isMounted&&this.setState({indexPatterns:indexPatterns})}async _loadSourceTimeAware(){const isSourceTimeAware=await this.props.layer.getSource().isTimeAware();this._isMounted&&this.setState({isSourceTimeAware:isSourceTimeAware})}_renderQueryPopover(){const layerQuery=this.props.layer.getQuery(),{SearchBar:SearchBar}=Object(kibana_services.g)().ui;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{id:"layerQueryPopover",button:this._renderOpenButton(),isOpen:this.state.isPopoverOpen,closePopover:this._close,anchorPosition:"leftCenter",ownFocus:!0},external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapFilterEditor","data-test-subj":"mapFilterEditor"},external_kbnSharedDeps_React_default.a.createElement(SearchBar,{showFilterBar:!1,showDatePicker:!1,showQueryInput:!0,query:layerQuery||Object(kibana_services.g)().query.queryString.getDefaultQuery(),onQuerySubmit:this._onQueryChange,indexPatterns:this.state.indexPatterns,customSubmitButton:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{fill:!0,"data-test-subj":"mapFilterEditorSubmitButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.layerPanel.filterEditor.queryBarSubmitButtonLabel",defaultMessage:"Set filter"}))})))}_renderQuery(){const query=this.props.layer.getQuery();return query&&query.query?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCodeBlock,{paddingSize:"s"},query.query),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s",textAlign:"center"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextColor,{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.layerPanel.filterEditor.emptyState.description",defaultMessage:"Add a filter to narrow the layer data."}))))}_renderOpenButton(){const query=this.props.layer.getQuery(),openButtonLabel=query&&query.query?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.filterEditor.editFilterButtonLabel",{defaultMessage:"Edit filter"}):external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.filterEditor.addFilterButtonLabel",{defaultMessage:"Add filter"}),openButtonIcon=query&&query.query?"pencil":"plusInCircleFilled";return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"xs",onClick:this._toggle,"data-test-subj":"mapLayerPanelOpenFilterEditorButton",iconType:openButtonIcon},openButtonLabel)}render(){const globalTimeCheckbox=this.state.isSourceTimeAware?external_kbnSharedDeps_React_default.a.createElement(GlobalTimeCheckbox,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.filterEditor.applyGlobalTimeCheckboxLabel",{defaultMessage:"Apply global time to layer data"}),applyGlobalTime:this.props.layer.getSource().getApplyGlobalTime(),setApplyGlobalTime:this._onApplyGlobalTimeChange}):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.layerPanel.filterEditor.title",defaultMessage:"Filtering"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),this._renderQuery(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextAlign,{textAlign:"center"},this._renderQueryPopover()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(GlobalFilterCheckbox,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.filterEditor.applyGlobalQueryCheckboxLabel",{defaultMessage:"Apply global filter to layer data"}),applyGlobalQuery:this.props.layer.getSource().getApplyGlobalQuery(),setApplyGlobalQuery:this._onApplyGlobalQueryChange}),globalTimeCheckbox)}}const connectedFilterEditor=Object(lib.connect)((function(state={}){return{layer:Object(map_selectors.C)(state)}}),(function(dispatch){return{setLayerQuery:(layerId,query)=>{dispatch(Object(public_actions.Ab)(layerId,query))},updateSourceProp:(id,propName,value)=>dispatch(Object(public_actions.Wb)(id,propName,value))}}))(filter_editor_FilterEditor);var single_field_select=__webpack_require__(57),validated_number_input=__webpack_require__(204),index_pattern_util=__webpack_require__(44);function join_expression_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class join_expression_JoinExpression extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),join_expression_defineProperty(this,"state",{isPopoverOpen:!1}),join_expression_defineProperty(this,"_togglePopover",()=>{this.setState(prevState=>({isPopoverOpen:!prevState.isPopoverOpen}))}),join_expression_defineProperty(this,"_closePopover",()=>{this.setState({isPopoverOpen:!1})}),join_expression_defineProperty(this,"_onRightSourceChange",async indexPatternId=>{try{const indexPattern=await Object(kibana_services.p)().get(indexPatternId);this.props.onRightSourceChange({indexPatternId:indexPatternId,indexPatternTitle:indexPattern.title})}catch(err){}}),join_expression_defineProperty(this,"_onLeftFieldChange",selectedFields=>{this.props.onLeftFieldChange(external_kbnSharedDeps_Lodash_default.a.get(selectedFields,"[0].value.name",null))})}_renderLeftFieldSelect(){const{leftValue:leftValue,leftFields:leftFields}=this.props;if(!leftFields)return null;const options=leftFields.map(field=>({value:field,label:field.label}));let leftFieldOption;leftValue&&(leftFieldOption=options.find(option=>option.value.name===leftValue));const selectedOptions=leftFieldOption?[leftFieldOption]:[];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.joinExpression.leftFieldLabel",{defaultMessage:"Left field"}),helpText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.joinExpression.leftSourceLabelHelpText",{defaultMessage:"Left source field that contains the shared key."})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiComboBox,{placeholder:getSelectFieldPlaceholder(),singleSelection:!0,isClearable:!1,options:options,selectedOptions:selectedOptions,onChange:this._onLeftFieldChange}))}_renderRightSourceSelect(){if(!this.props.leftValue)return null;const IndexPatternSelect=Object(kibana_services.o)();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.joinExpression.rightSourceLabel",{defaultMessage:"Right source"})},external_kbnSharedDeps_React_default.a.createElement(IndexPatternSelect,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.joinExpression.selectIndexPatternPlaceholder",{defaultMessage:"Select index pattern"}),indexPatternId:this.props.rightSourceIndexPatternId,onChange:this._onRightSourceChange,isClearable:!1}))}_renderRightFieldSelect(){return this.props.rightFields&&this.props.leftValue?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.joinExpression.rightFieldLabel",{defaultMessage:"Right field"}),helpText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.joinExpression.rightSourceLabelHelpText",{defaultMessage:"Right source field that contains the shared key."})},external_kbnSharedDeps_React_default.a.createElement(single_field_select.a,{placeholder:getSelectFieldPlaceholder(),value:this.props.rightValue,onChange:this.props.onRightFieldChange,fields:Object(index_pattern_util.h)(this.props.rightFields),isClearable:!1})):null}_renderRightFieldSizeInput(){return this.props.rightValue&&this.props.leftValue?external_kbnSharedDeps_React_default.a.createElement(validated_number_input.a,{initialValue:void 0!==this.props.rightSize?this.props.rightSize:constants.DEFAULT_MAX_BUCKETS_LIMIT,min:1,max:constants.DEFAULT_MAX_BUCKETS_LIMIT,onChange:this.props.onRightSizeChange,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.joinExpression.rightSizeLabel",{defaultMessage:"Right size"}),helpText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.joinExpression.rightSizeHelpText",{defaultMessage:"Right field term limit."})}):null}_getExpressionValue(){const{leftSourceName:leftSourceName,leftValue:leftValue,rightSourceName:rightSourceName,rightValue:rightValue,rightSize:rightSize}=this.props;return leftSourceName&&leftValue&&rightSourceName&&rightValue?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.joinExpression.value",{defaultMessage:"{leftSourceName}:{leftValue} with {sizeFragment} {rightSourceName}:{rightValue}",values:{leftSourceName:leftSourceName,leftValue:leftValue,sizeFragment:void 0!==rightSize?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.joinExpression.sizeFragment",{defaultMessage:"top {rightSize} terms from",values:{rightSize:rightSize}}):"",rightSourceName:rightSourceName,rightValue:rightValue}}):external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.joinExpression.selectPlaceholder",{defaultMessage:"-- select --"})}render(){const{leftSourceName:leftSourceName}=this.props;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{id:"joinPopover",isOpen:this.state.isPopoverOpen,closePopover:this._closePopover,ownFocus:!0,initialFocus:"body",anchorPosition:"leftCenter",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiExpression,{onClick:this._togglePopover,description:"Join",uppercase:!1,value:this._getExpressionValue()})},external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:300}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopoverTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.layerPanel.joinExpression.joinPopoverTitle",defaultMessage:"Join"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormHelpText,{className:"mapJoinExpressionHelpText"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.layerPanel.joinExpression.helpText",defaultMessage:"Configure the shared key."})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.joinExpression.leftSourceLabel",{defaultMessage:"Left source"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiComboBox,{selectedOptions:[{value:leftSourceName,label:leftSourceName}],isDisabled:!0})),this._renderLeftFieldSelect(),this._renderRightSourceSelect(),this._renderRightFieldSelect(),this._renderRightFieldSizeInput()))}}function getSelectFieldPlaceholder(){return external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.joinExpression.selectFieldPlaceholder",{defaultMessage:"Select field"})}var metrics_editor=__webpack_require__(106);function metrics_expression_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class metrics_expression_MetricsExpression extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),metrics_expression_defineProperty(this,"state",{isPopoverOpen:!1}),metrics_expression_defineProperty(this,"_togglePopover",()=>{this.setState(prevState=>({isPopoverOpen:!prevState.isPopoverOpen}))}),metrics_expression_defineProperty(this,"_closePopover",()=>{this.setState({isPopoverOpen:!1})}),metrics_expression_defineProperty(this,"_renderMetricsEditor",()=>this.props.rightFields?external_kbnSharedDeps_React_default.a.createElement(metrics_editor.a,{fields:this.props.rightFields,metrics:this.props.metrics,onChange:this.props.onChange,allowMultipleMetrics:!0}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormErrorText,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.layerPanel.metricsExpression.joinMustBeSetErrorMessage",defaultMessage:"JOIN must be set"})))}render(){const metricExpressions=this.props.metrics.filter(({type:type,field:field})=>type===constants.AGG_TYPE.COUNT||!!field).map(({type:type,field:field})=>type===constants.AGG_TYPE.COUNT?"count":`${type} ${field}`),useMetricDescription=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.metricsExpression.useMetricsDescription",{defaultMessage:"{metricsLength, plural, one {and use metric} other {and use metrics}}",values:{metricsLength:metricExpressions.length}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{id:"metricsPopover",isOpen:this.state.isPopoverOpen,closePopover:this._closePopover,ownFocus:!0,initialFocus:"body",anchorPosition:"leftCenter",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiExpression,{onClick:this._togglePopover,description:useMetricDescription,uppercase:!1,value:metricExpressions.length>0?metricExpressions.join(", "):"count"})},external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:400}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopoverTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.layerPanel.metricsExpression.metricsPopoverTitle",defaultMessage:"Metrics"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormHelpText,{className:"mapJoinExpressionHelpText"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.layerPanel.metricsExpression.helpText",defaultMessage:"Configure the metrics for the right source. These values are added to the layer features."})),this._renderMetricsEditor()))}}function where_expression_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}metrics_expression_MetricsExpression.defaultProps={metrics:[{type:constants.AGG_TYPE.COUNT}]};class where_expression_WhereExpression extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),where_expression_defineProperty(this,"state",{isPopoverOpen:!1}),where_expression_defineProperty(this,"_togglePopover",()=>{this.setState(prevState=>({isPopoverOpen:!prevState.isPopoverOpen}))}),where_expression_defineProperty(this,"_closePopover",()=>{this.setState({isPopoverOpen:!1})}),where_expression_defineProperty(this,"_onQueryChange",({query:query})=>{this.props.onChange(query),this._closePopover()})}render(){const{SearchBar:SearchBar}=Object(kibana_services.g)().ui,{whereQuery:whereQuery,indexPattern:indexPattern}=this.props,expressionValue=whereQuery&&whereQuery.query?whereQuery.query:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.whereExpression.expressionValuePlaceholder",{defaultMessage:"-- add filter --"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{id:"whereClausePopover",isOpen:this.state.isPopoverOpen,closePopover:this._closePopover,ownFocus:!0,anchorPosition:"leftCenter",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiExpression,{onClick:this._togglePopover,description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.whereExpression.expressionDescription",{defaultMessage:"where"}),uppercase:!1,value:expressionValue,"data-test-subj":"mapJoinWhereExpressionButton"})},external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapFilterEditor","data-test-subj":"mapJoinWhereFilterEditor"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormHelpText,{className:"mapJoinExpressionHelpText"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.layerPanel.whereExpression.helpText",defaultMessage:"Use a query to narrow right source."})),external_kbnSharedDeps_React_default.a.createElement(SearchBar,{showFilterBar:!1,showDatePicker:!1,showQueryInput:!0,query:whereQuery||Object(kibana_services.g)().query.queryString.getDefaultQuery(),onQuerySubmit:this._onQueryChange,indexPatterns:[indexPattern],customSubmitButton:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{fill:!0,"data-test-subj":"mapWhereFilterEditorSubmitButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.layerPanel.whereExpression.queryBarSubmitButtonLabel",defaultMessage:"Set filter"}))})))}}function join_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class join_Join extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),join_defineProperty(this,"state",{rightFields:void 0,indexPattern:void 0,loadError:void 0}),join_defineProperty(this,"_onLeftFieldChange",leftField=>{this.props.onChange({leftField:leftField,right:this.props.join.right})}),join_defineProperty(this,"_onRightSourceChange",({indexPatternId:indexPatternId,indexPatternTitle:indexPatternTitle})=>{this.setState({rightFields:void 0,loadError:void 0}),this._loadRightFields(indexPatternId);const{term:term,...restOfRight}=this.props.join.right;this.props.onChange({leftField:this.props.join.leftField,right:{...restOfRight,indexPatternId:indexPatternId,indexPatternTitle:indexPatternTitle,type:constants.SOURCE_TYPES.ES_TERM_SOURCE}})}),join_defineProperty(this,"_onRightFieldChange",term=>{this.props.onChange({leftField:this.props.join.leftField,right:{...this.props.join.right,term:term}})}),join_defineProperty(this,"_onRightSizeChange",size=>{this.props.onChange({leftField:this.props.join.leftField,right:{...this.props.join.right,size:size}})}),join_defineProperty(this,"_onMetricsChange",metrics=>{this.props.onChange({leftField:this.props.join.leftField,right:{...this.props.join.right,metrics:metrics}})}),join_defineProperty(this,"_onWhereQueryChange",whereQuery=>{this.props.onChange({leftField:this.props.join.leftField,right:{...this.props.join.right,whereQuery:whereQuery}})}),join_defineProperty(this,"_onApplyGlobalQueryChange",applyGlobalQuery=>{this.props.onChange({leftField:this.props.join.leftField,right:{...this.props.join.right,applyGlobalQuery:applyGlobalQuery}})}),join_defineProperty(this,"_onApplyGlobalTimeChange",applyGlobalTime=>{this.props.onChange({leftField:this.props.join.leftField,right:{...this.props.join.right,applyGlobalTime:applyGlobalTime}})})}componentDidMount(){this._isMounted=!0,this._loadRightFields(external_kbnSharedDeps_Lodash_default.a.get(this.props.join,"right.indexPatternId"))}componentWillUnmount(){this._isMounted=!1}async _loadRightFields(indexPatternId){if(!indexPatternId)return;let indexPattern;try{indexPattern=await Object(kibana_services.p)().get(indexPatternId)}catch(err){return void(this._isMounted&&this.setState({loadError:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.join.noIndexPatternErrorMessage",{defaultMessage:"Unable to find Index pattern {indexPatternId}",values:{indexPatternId:indexPatternId}})}))}this._isMounted&&this.setState({rightFields:indexPattern.fields.filter(field=>!data_public_.indexPatterns.isNestedField(field)),indexPattern:indexPattern})}render(){const{join:join,onRemove:onRemove,leftFields:leftFields,leftSourceName:leftSourceName}=this.props,{rightFields:rightFields,indexPattern:indexPattern}=this.state,right=external_kbnSharedDeps_Lodash_default.a.get(join,"right",{}),rightSourceName=right.indexPatternTitle?right.indexPatternTitle:right.indexPatternId,isJoinConfigComplete=join.leftField&&right.indexPatternId&&right.term;let metricsExpression,globalFilterCheckbox,globalTimeCheckbox,whereExpression;return isJoinConfigComplete&&(metricsExpression=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(metrics_expression_MetricsExpression,{metrics:right.metrics,rightFields:rightFields,onChange:this._onMetricsChange})),globalFilterCheckbox=external_kbnSharedDeps_React_default.a.createElement(GlobalFilterCheckbox,{applyGlobalQuery:"undefined"===right.applyGlobalQuery||right.applyGlobalQuery,setApplyGlobalQuery:this._onApplyGlobalQueryChange,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.join.applyGlobalQueryCheckboxLabel",{defaultMessage:"Apply global filter to join"})}),this.state.indexPattern&&this.state.indexPattern.timeFieldName&&(globalTimeCheckbox=external_kbnSharedDeps_React_default.a.createElement(GlobalTimeCheckbox,{applyGlobalTime:void 0===right.applyGlobalTime||right.applyGlobalTime,setApplyGlobalTime:this._onApplyGlobalTimeChange,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.join.applyGlobalTimeCheckboxLabel",{defaultMessage:"Apply global time to join"})}))),indexPattern&&isJoinConfigComplete&&(whereExpression=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(where_expression_WhereExpression,{indexPattern:indexPattern,whereQuery:join.right.whereQuery,onChange:this._onWhereQueryChange}))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapJoinItem"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{className:"mapJoinItem__inner",responsive:!1,wrap:!0,gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(join_expression_JoinExpression,{leftSourceName:leftSourceName,leftValue:join.leftField,leftFields:leftFields,onLeftFieldChange:this._onLeftFieldChange,rightSourceIndexPatternId:right.indexPatternId,rightSourceName:rightSourceName,onRightSourceChange:this._onRightSourceChange,rightValue:right.term,rightSize:right.size,rightFields:rightFields,onRightFieldChange:this._onRightFieldChange,onRightSizeChange:this._onRightSizeChange})),metricsExpression,whereExpression),globalFilterCheckbox,globalTimeCheckbox,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{className:"mapJoinItem__delete",iconType:"trash",color:"danger","aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.join.deleteJoinAriaLabel",{defaultMessage:"Delete join"}),title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.join.deleteJoinTitle",{defaultMessage:"Delete join"}),onClick:onRemove}))}}const connectedJoinEditor=Object(lib.connect)((function(state){return{joins:Object(map_selectors.E)(state)}}),(function(dispatch){return{onChange:(layer,joins)=>{dispatch(Object(public_actions.zb)(layer,joins))}}}))((function({joins:joins,layer:layer,onChange:onChange,leftJoinFields:leftJoinFields,layerDisplayName:layerDisplayName}){const addJoin=()=>{onChange(layer,[...joins,{right:{id:v4_default()(),applyGlobalQuery:!0,applyGlobalTime:!0}}])};return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.joinEditor.termJoinTooltip",{defaultMessage:"Use term joins to augment this layer with properties for data driven styling."})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.layerPanel.joinEditor.termJoinsTitle",defaultMessage:"Term joins"})))),(()=>{const disabledReason=layer.getJoinsDisabledReason();return disabledReason?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{color:"warning"},disabledReason):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,joins.map((joinDescriptor,index)=>{const handleOnChange=updatedDescriptor=>{onChange(layer,[...joins.slice(0,index),updatedDescriptor,...joins.slice(index+1)])},handleOnRemove=()=>{onChange(layer,[...joins.slice(0,index),...joins.slice(index+1)])};if(joinDescriptor.right.type===constants.SOURCE_TYPES.TABLE_SOURCE)throw new Error("PEBKAC - Table sources cannot be edited in the UX and should only be used in MapEmbeddable");return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,{key:index},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(join_Join,{join:joinDescriptor,layer:layer,onChange:handleOnChange,onRemove:handleOnRemove,leftFields:leftJoinFields,leftSourceName:layerDisplayName}))}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextAlign,{textAlign:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:addJoin,size:"xs",iconType:"plusInCircleFilled","aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.joinEditor.addJoinAriaLabel",{defaultMessage:"Add join"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.layerPanel.joinEditor.addJoinButtonLabel",defaultMessage:"Add join"}))))})())}));const connectedFlyoutFooter=Object(lib.connect)((function(state={}){return{hasStateChanged:Object(map_selectors.I)(state)}}),dispatch=>({cancelLayerPanel:()=>{dispatch(Object(public_actions.Nb)(reducers_ui.c.NONE)),dispatch(Object(public_actions.Ib)(null))},saveLayerEdits:()=>{dispatch(Object(public_actions.Nb)(reducers_ui.c.NONE)),dispatch(Object(public_actions.rb)()),dispatch(Object(public_actions.Ib)(null))},removeLayer:()=>{dispatch(Object(public_actions.qb)())}}))(({cancelLayerPanel:cancelLayerPanel,saveLayerEdits:saveLayerEdits,removeLayer:removeLayer,hasStateChanged:hasStateChanged})=>{const removeBtn=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{color:"danger",onClick:removeLayer,flush:"right","data-test-subj":"mapRemoveLayerButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.layerPanel.footer.removeLayerButtonLabel",defaultMessage:"Remove layer"}))),cancelButtonLabel=hasStateChanged?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.layerPanel.footer.cancelButtonLabel",defaultMessage:"Cancel"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.layerPanel.footer.closeButtonLabel",defaultMessage:"Close"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:cancelLayerPanel,flush:"left","data-test-subj":"layerPanelCancelButton"},cancelButtonLabel)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null)),removeBtn,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{disabled:!hasStateChanged,iconType:"check",onClick:saveLayerEdits,fill:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.layerPanel.footer.saveAndCloseButtonLabel",defaultMessage:"Save & close"}))))});const connectedLayerErrors=Object(lib.connect)((function(state={}){return{layer:Object(map_selectors.C)(state)}}),null)((function({layer:layer}){return layer.hasErrors()?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{color:"warning",title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.settingsPanel.unableToLoadTitle",{defaultMessage:"Unable to load layer"})},external_kbnSharedDeps_React_default.a.createElement("p",{"data-test-subj":"layerErrorMessage"},layer.getErrors())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"})):null}));var validated_range=__webpack_require__(77);function AlphaSlider({alpha:alpha,onChange:onChange}){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.settingsPanel.layerTransparencyLabel",{defaultMessage:"Opacity"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(validated_range.a,{min:0,max:100,step:1,value:Math.round(100*alpha),onChange:newAlpha=>{onChange(newAlpha/100)},showInput:!0,showRange:!0,compressed:!0,append:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.settingsPanel.percentageLabel",{defaultMessage:"%",description:"Percentage"})}))}var kibanaReact_public_=__webpack_require__(24);const connectedLayerSettings=Object(lib.connect)(null,(function(dispatch){return{updateLabel:(id,label)=>dispatch(Object(public_actions.Qb)(id,label)),updateMinZoom:(id,minZoom)=>dispatch(Object(public_actions.Sb)(id,minZoom)),updateMaxZoom:(id,maxZoom)=>dispatch(Object(public_actions.Rb)(id,maxZoom)),updateAlpha:(id,alpha)=>dispatch(Object(public_actions.Pb)(id,alpha)),updateLabelsOnTop:(id,areLabelsOnTop)=>dispatch(Object(public_actions.Ob)(id,areLabelsOnTop))}}))((function(props){const minVisibilityZoom=props.layer.getMinSourceZoom(),maxVisibilityZoom=constants.MAX_ZOOM,layerId=props.layer.getId(),onLabelChange=event=>{const label=event.target.value;props.updateLabel(layerId,label)},onZoomChange=value=>{props.updateMinZoom(layerId,Math.max(minVisibilityZoom,parseInt(value[0],10))),props.updateMaxZoom(layerId,Math.min(maxVisibilityZoom,parseInt(value[1],10)))},onLabelsOnTopChange=event=>{props.updateLabelsOnTop(layerId,event.target.checked)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.layerPanel.layerSettingsTitle",defaultMessage:"Layer settings"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.settingsPanel.layerNameLabel",{defaultMessage:"Name"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:props.layer.getLabel(),onChange:onLabelChange,compressed:!0})),external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_.ValidatedDualRange,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.settingsPanel.visibleZoomLabel",{defaultMessage:"Visibility"}),formRowDisplay:"columnCompressed",min:minVisibilityZoom,max:maxVisibilityZoom,value:[props.layer.getMinZoom(),props.layer.getMaxZoom()],showInput:"inputWithPopover",showRange:!0,showLabels:!0,onChange:onZoomChange,allowEmptyRange:!1,compressed:!0,prepend:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.settingsPanel.visibleZoom",{defaultMessage:"Zoom levels"})}),external_kbnSharedDeps_React_default.a.createElement(AlphaSlider,{alpha:props.layer.getAlpha(),onChange:alpha=>{props.updateAlpha(layerId,alpha)}}),props.layer.supportsLabelsOnTop()?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{display:"columnCompressedSwitch"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.settingsPanel.labelsOnTop",{defaultMessage:"Show labels on top"}),checked:props.layer.areLabelsOnTop(),onChange:onLabelsOnTopChange,"data-test-subj":"mapLayerPanelApplyGlobalQueryCheckbox",compressed:!0})):null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}))}));const connectedStyleSettings=Object(lib.connect)((function(state={}){return{layer:Object(map_selectors.C)(state)}}),(function(dispatch){return{updateStyleDescriptor:styleDescriptor=>{dispatch(Object(public_actions.Ub)(styleDescriptor))}}}))((function({layer:layer,updateStyleDescriptor:updateStyleDescriptor}){const settingsEditor=layer.renderStyleEditor(updateStyleDescriptor);return settingsEditor?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,{className:"mapStyleSettings"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.layerPanel.styleSettingsTitle",defaultMessage:"Layer Style"}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),settingsEditor),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"})):null}));function layer_panel_view_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const localStorage=new kibanaUtils_public_.Storage(window.localStorage);class view_LayerPanel extends external_kbnSharedDeps_React_default.a.Component{constructor(..._args){super(..._args),layer_panel_view_defineProperty(this,"state",{displayName:"",immutableSourceProps:[],leftJoinFields:null}),layer_panel_view_defineProperty(this,"_loadDisplayName",async()=>{if(!this.props.selectedLayer)return;const displayName=await this.props.selectedLayer.getDisplayName();this._isMounted&&this.setState({displayName:displayName})}),layer_panel_view_defineProperty(this,"_loadImmutableSourceProperties",async()=>{if(!this.props.selectedLayer)return;const immutableSourceProps=await this.props.selectedLayer.getImmutableSourceProperties();this._isMounted&&this.setState({immutableSourceProps:immutableSourceProps})}),layer_panel_view_defineProperty(this,"_onSourceChange",(...args)=>{for(let i=0;i<args.length;i++){const{propName:propName,value:value,newLayerType:newLayerType}=args[i];this.props.updateSourceProp(this.props.selectedLayer.getId(),propName,value,newLayerType)}})}componentDidMount(){this._isMounted=!0,this._loadDisplayName(),this._loadImmutableSourceProperties(),this._loadLeftJoinFields()}componentWillUnmount(){this._isMounted=!1}async _loadLeftJoinFields(){if(!this.props.selectedLayer||!this.props.selectedLayer.showJoinEditor())return;let leftJoinFields;try{const leftFieldPromises=(await this.props.selectedLayer.getLeftJoinFields()).map(async field=>({name:field.getName(),label:await field.getLabel()}));leftJoinFields=await Promise.all(leftFieldPromises)}catch(error){leftJoinFields=[]}this._isMounted&&this.setState({leftJoinFields:leftJoinFields})}_renderFilterSection(){return this.props.selectedLayer.supportsElasticsearchFilters()?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(connectedFilterEditor,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"})):null}_renderJoinSection(){return this.props.selectedLayer.showJoinEditor()?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(connectedJoinEditor,{layer:this.props.selectedLayer,leftJoinFields:this.state.leftJoinFields,layerDisplayName:this.state.displayName})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"})):null}_renderSourceProperties(){return this.state.immutableSourceProps.map(({label:label,value:value,link:link})=>external_kbnSharedDeps_React_default.a.createElement("p",{key:label,className:"mapLayerPanel__sourceDetail"},external_kbnSharedDeps_React_default.a.createElement("strong",null,label)," ",link?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:link,target:"_blank"},value):external_kbnSharedDeps_React_default.a.createElement("span",null,value)))}render(){const{selectedLayer:selectedLayer}=this.props;return selectedLayer?external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_.KibanaContextProvider,{services:{appName:"maps",storage:localStorage,data:Object(kibana_services.g)(),...Object(kibana_services.c)()}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{direction:"column",gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutHeader,{hasBorder:!0,className:"mapLayerPanel__header"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{responsive:!1,alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:selectedLayer.getLayerTypeIconName()})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,this.state.displayName)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapLayerPanel__sourceDetails"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiAccordion,{id:"accordion1",buttonContent:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerPanel.sourceDetailsLabel",{defaultMessage:"Source details"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{color:"subdued",size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xs"}),this._renderSourceProperties())))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapLayerPanel__body"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapLayerPanel__bodyOverflow"},external_kbnSharedDeps_React_default.a.createElement(connectedLayerErrors,null),external_kbnSharedDeps_React_default.a.createElement(connectedLayerSettings,{layer:selectedLayer}),this.props.selectedLayer.renderSourceSettingsEditor({onChange:this._onSourceChange}),this._renderFilterSection(),this._renderJoinSection(),external_kbnSharedDeps_React_default.a.createElement(connectedStyleSettings,null))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutFooter,{className:"mapLayerPanel__footer"},external_kbnSharedDeps_React_default.a.createElement(connectedFlyoutFooter,null)))):null}}const connectedLayerPanel=Object(lib.connect)((function(state={}){const selectedLayer=Object(map_selectors.C)(state);return{key:selectedLayer?`${selectedLayer.getId()}${selectedLayer.showJoinEditor()}`:"",selectedLayer:selectedLayer}}),(function(dispatch){return{updateSourceProp:(id,propName,value,newLayerType)=>dispatch(Object(public_actions.Wb)(id,propName,value,newLayerType))}}))(view_LayerPanel),registry=[];function registerLayerWizard(layerWizard){registry.push({checkVisibility:async()=>!0,getIsDisabled:async()=>!1,...layerWizard})}__webpack_require__(382);function layer_wizard_select_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class layer_wizard_select_LayerWizardSelect extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),layer_wizard_select_defineProperty(this,"_isMounted",!1),layer_wizard_select_defineProperty(this,"state",{activeCategories:[],hasLoadedWizards:!1,layerWizards:[],selectedCategory:null})}componentDidMount(){this._isMounted=!0,this._loadLayerWizards()}componentWillUnmount(){this._isMounted=!1}async _loadLayerWizards(){const layerWizards=await async function(){const promises=registry.map(async layerWizard=>({...layerWizard,isVisible:await layerWizard.checkVisibility(),isDisabled:await layerWizard.getIsDisabled()}));return(await Promise.all(promises)).filter(({isVisible:isVisible})=>isVisible)}(),activeCategories=[];layerWizards.forEach(layerWizard=>{layerWizard.categories.forEach(category=>{activeCategories.includes(category)||activeCategories.push(category)})}),this._isMounted&&this.setState({activeCategories:activeCategories,layerWizards:layerWizards,hasLoadedWizards:!0})}_filterByCategory(category){this.setState({selectedCategory:category})}_renderCategoryFacets(){if(0===this.state.activeCategories.length)return null;const facets=this.state.activeCategories.map(category=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFacetButton,{key:category,isSelected:category===this.state.selectedCategory,onClick:()=>this._filterByCategory(category)},function(category){if(category===constants.LAYER_WIZARD_CATEGORY.ELASTICSEARCH)return external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerWizardSelect.elasticsearchCategoryLabel",{defaultMessage:"Elasticsearch"});if(category===constants.LAYER_WIZARD_CATEGORY.REFERENCE)return external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerWizardSelect.referenceCategoryLabel",{defaultMessage:"Reference"});if(category===constants.LAYER_WIZARD_CATEGORY.SOLUTIONS)return external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.layerWizardSelect.solutionsCategoryLabel",{defaultMessage:"Solutions"});throw new Error("Unexpected category: "+category)}(category)));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFacetGroup,{layout:"horizontal",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFacetButton,{key:"all",isSelected:!this.state.selectedCategory,onClick:()=>this._filterByCategory(null)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.layerWizardSelect.allCategories",defaultMessage:"All"})),facets)}render(){if(!this.state.hasLoadedWizards)return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCard,{title:"",description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingContent,{lines:2}),layout:"horizontal"}));const wizardCards=this.state.layerWizards.filter(layerWizard=>!this.state.selectedCategory||layerWizard.categories.includes(this.state.selectedCategory)).map(layerWizard=>{const icon=layerWizard.icon?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:layerWizard.icon,size:"l"}):void 0,card=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCard,{title:layerWizard.title,titleSize:"xs",icon:icon,onClick:()=>{this.props.onSelect(layerWizard)},description:layerWizard.description,isDisabled:layerWizard.isDisabled,"data-test-subj":external_kbnSharedDeps_Lodash_default.a.camelCase(layerWizard.title)});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{key:layerWizard.title},layerWizard.isDisabled&&layerWizard.disabledReason?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"top",anchorClassName:"mapMapLayerWizardSelect__tooltip",content:layerWizard.disabledReason},card):card)});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,this._renderCategoryFacets(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGrid,{columns:2,gutterSize:"m"},wizardCards))}}const flyout_body_connected=Object(lib.connect)((function(state){return{mapColors:Object(map_selectors.p)(state)}}),{})(props=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapLayerPanel__body","data-test-subj":"layerAddForm"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapLayerPanel__bodyOverflow"},function(){if(!props.layerWizard||!props.currentStepId)return external_kbnSharedDeps_React_default.a.createElement(layer_wizard_select_LayerWizardSelect,{onSelect:props.onWizardSelect});const renderWizardArgs={previewLayers:props.previewLayers,mapColors:props.mapColors,currentStepId:props.currentStepId,isOnFinalStep:props.isOnFinalStep,enableNextBtn:props.enableNextBtn,disableNextBtn:props.disableNextBtn,startStepLoading:props.startStepLoading,stopStepLoading:props.stopStepLoading,advanceToNextStep:props.advanceToNextStep},backButton=props.showBackButton?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"xs",flush:"left",onClick:props.onClear,iconType:"arrowLeft"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.addLayerPanel.changeDataSourceButtonLabel",defaultMessage:"Change layer"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"})):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,backButton,props.layerWizard.renderWizard(renderWizardArgs))}())));function add_layer_panel_view_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const ADD_LAYER_STEP_LABEL=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.addLayerPanel.addLayer",{defaultMessage:"Add layer"}),SELECT_WIZARD_LABEL=ADD_LAYER_STEP_LABEL,INITIAL_STATE={currentStepIndex:0,currentStep:null,layerSteps:null,layerWizard:null,isNextStepBtnEnabled:!1,isStepLoading:!1};class view_AddLayerPanel extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),add_layer_panel_view_defineProperty(this,"state",{...INITIAL_STATE}),add_layer_panel_view_defineProperty(this,"_previewLayers",layerDescriptors=>{this.props.addPreviewLayers(layerDescriptors)}),add_layer_panel_view_defineProperty(this,"_clearLayerWizard",()=>{this.setState(INITIAL_STATE),this.props.addPreviewLayers([])}),add_layer_panel_view_defineProperty(this,"_onWizardSelect",layerWizard=>{const layerSteps=[...layerWizard.prerequisiteSteps?layerWizard.prerequisiteSteps:[],{id:"ADD_LAYER_STEP_ID",label:ADD_LAYER_STEP_LABEL}];this.setState({...INITIAL_STATE,layerWizard:layerWizard,layerSteps:layerSteps,currentStep:layerSteps[0]})}),add_layer_panel_view_defineProperty(this,"_onNext",()=>{this.state.layerSteps&&(this.state.layerSteps.length-1===this.state.currentStepIndex?this.props.promotePreviewLayers():this.setState(prevState=>{const nextIndex=prevState.currentStepIndex+1;return{currentStepIndex:nextIndex,currentStep:prevState.layerSteps[nextIndex],isNextStepBtnEnabled:!1,isStepLoading:!1}}))}),add_layer_panel_view_defineProperty(this,"_enableNextBtn",()=>{this.setState({isNextStepBtnEnabled:!0})}),add_layer_panel_view_defineProperty(this,"_disableNextBtn",()=>{this.setState({isNextStepBtnEnabled:!1})}),add_layer_panel_view_defineProperty(this,"_startStepLoading",()=>{this.setState({isStepLoading:!0})}),add_layer_panel_view_defineProperty(this,"_stopStepLoading",()=>{this.setState({isStepLoading:!1})})}_renderNextButton(){if(!this.state.currentStep)return null;let isDisabled=!this.state.isNextStepBtnEnabled,isLoading=this.state.isStepLoading;return"ADD_LAYER_STEP_ID"===this.state.currentStep.id?(isDisabled=!this.props.hasPreviewLayers,isLoading=this.props.isLoadingPreviewLayers):(isDisabled=!this.state.isNextStepBtnEnabled,isLoading=this.state.isStepLoading),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{"data-test-subj":"importFileButton",disabled:isDisabled||isLoading,isLoading:isLoading,iconSide:"right",iconType:"sortRight",onClick:this._onNext,fill:!0},this.state.currentStep.label))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutHeader,{hasBorder:!0,className:"mapLayerPanel__header"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,this.state.currentStep?this.state.currentStep.label:SELECT_WIZARD_LABEL))),external_kbnSharedDeps_React_default.a.createElement(flyout_body_connected,{layerWizard:this.state.layerWizard,onClear:this._clearLayerWizard,onWizardSelect:this._onWizardSelect,previewLayers:this._previewLayers,showBackButton:!this.state.isStepLoading,currentStepId:this.state.currentStep?this.state.currentStep.id:null,isOnFinalStep:!!this.state.currentStep&&"ADD_LAYER_STEP_ID"===this.state.currentStep.id,enableNextBtn:this._enableNextBtn,disableNextBtn:this._disableNextBtn,startStepLoading:this._startStepLoading,stopStepLoading:this._stopStepLoading,advanceToNextStep:this._onNext}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutFooter,{className:"mapLayerPanel__footer"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween",responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:this.props.closeFlyout,flush:"left","data-test-subj":"layerAddCancelButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.addLayerPanel.footer.cancelButtonLabel",defaultMessage:"Cancel"}))),this._renderNextButton())))}}const add_layer_panel_connected=Object(lib.connect)((function(state){return{hasPreviewLayers:Object(map_selectors.K)(state),isLoadingPreviewLayers:Object(map_selectors.M)(state)}}),(function(dispatch){return{addPreviewLayers:layerDescriptors=>{dispatch(Object(public_actions.U)(layerDescriptors))},promotePreviewLayers:()=>{dispatch(Object(public_actions.vb)()),dispatch(Object(public_actions.Nb)(reducers_ui.c.LAYER_PANEL)),dispatch(Object(public_actions.nb)())},closeFlyout:()=>{dispatch(Object(public_actions.Nb)(reducers_ui.c.NONE)),dispatch(Object(public_actions.pb)())}}}),null,{forwardRef:!0})(view_AddLayerPanel),initialLocationOptions=[{id:constants.INITIAL_LOCATION.LAST_SAVED_LOCATION,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mapSettingsPanel.lastSavedLocationLabel",{defaultMessage:"Map location at save"})},{id:constants.INITIAL_LOCATION.AUTO_FIT_TO_BOUNDS,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mapSettingsPanel.autoFitToBoundsLocationLabel",{defaultMessage:"Auto fit map to data bounds"})},{id:constants.INITIAL_LOCATION.FIXED_LOCATION,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mapSettingsPanel.fixedLocationLabel",{defaultMessage:"Fixed location"})},{id:constants.INITIAL_LOCATION.BROWSER_LOCATION,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mapSettingsPanel.browserLocationLabel",{defaultMessage:"Browser location"})}];function NavigationPanel({center:center,settings:settings,updateMapSetting:updateMapSetting,zoom:zoom}){const onFixedLatChange=event=>{let value=parseFloat(event.target.value);isNaN(value)?value=0:value<-90?value=-90:value>90&&(value=90),updateMapSetting("fixedLocation",{...settings.fixedLocation,lat:value})},onFixedLonChange=event=>{let value=parseFloat(event.target.value);isNaN(value)?value=0:value<-180?value=-180:value>180&&(value=180),updateMapSetting("fixedLocation",{...settings.fixedLocation,lon:value})},onFixedZoomChange=value=>{updateMapSetting("fixedLocation",{...settings.fixedLocation,zoom:value})},onBrowserZoomChange=value=>{updateMapSetting("browserLocation",{zoom:value})},useCurrentView=()=>{updateMapSetting("fixedLocation",{lat:center.lat,lon:center.lon,zoom:Math.round(zoom)})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.mapSettingsPanel.navigationTitle",defaultMessage:"Navigation"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mapSettingsPanel.autoFitToDataBoundsLabel",{defaultMessage:"Auto fit map to data bounds"}),checked:settings.autoFitToDataBounds,onChange:event=>{updateMapSetting("autoFitToDataBounds",event.target.checked)},compressed:!0,"data-test-subj":"autoFitToDataBoundsSwitch"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_.ValidatedDualRange,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mapSettingsPanel.zoomRangeLabel",{defaultMessage:"Zoom range"}),formRowDisplay:"columnCompressed",min:constants.MIN_ZOOM,max:constants.MAX_ZOOM,value:[settings.minZoom,settings.maxZoom],showInput:"inputWithPopover",showRange:!0,showLabels:!0,onChange:value=>{const minZoom=Math.max(constants.MIN_ZOOM,parseInt(value[0],10)),maxZoom=Math.min(constants.MAX_ZOOM,parseInt(value[1],10));updateMapSetting("minZoom",minZoom),updateMapSetting("maxZoom",maxZoom),settings.fixedLocation.zoom<minZoom?onFixedZoomChange(minZoom):settings.fixedLocation.zoom>maxZoom&&onFixedZoomChange(maxZoom),settings.browserLocation.zoom<minZoom?onBrowserZoomChange(minZoom):settings.browserLocation.zoom>maxZoom&&onBrowserZoomChange(maxZoom)},allowEmptyRange:!1,compressed:!0}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.mapSettingsPanel.initialLocationLabel",{defaultMessage:"Initial map location"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiRadioGroup,{options:initialLocationOptions,idSelected:settings.initialLocation,onChange:optionId=>{updateMapSetting("initialLocation",optionId)}})),function(){if(settings.initialLocation===constants.INITIAL_LOCATION.LAST_SAVED_LOCATION||settings.initialLocation===constants.INITIAL_LOCATION.AUTO_FIT_TO_BOUNDS)return null;const zoomFormRow=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mapSettingsPanel.initialZoomLabel",{defaultMessage:"Initial zoom"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(validated_range.a,{min:settings.minZoom,max:settings.maxZoom,step:1,value:settings.initialLocation===constants.INITIAL_LOCATION.BROWSER_LOCATION?settings.browserLocation.zoom:settings.fixedLocation.zoom,onChange:settings.initialLocation===constants.INITIAL_LOCATION.BROWSER_LOCATION?onBrowserZoomChange:onFixedZoomChange,showInput:!0,showRange:!0,compressed:!0}));return settings.initialLocation===constants.INITIAL_LOCATION.BROWSER_LOCATION?zoomFormRow:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mapSettingsPanel.initialLatLabel",{defaultMessage:"Initial latitude"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldNumber,{value:settings.fixedLocation.lat,onChange:onFixedLatChange,compressed:!0})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mapSettingsPanel.initialLonLabel",{defaultMessage:"Initial longitude"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldNumber,{value:settings.fixedLocation.lon,onChange:onFixedLonChange,compressed:!0})),zoomFormRow,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:useCurrentView},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.mapSettingsPanel.useCurrentViewBtnLabel",defaultMessage:"Set to current view"})))))}())}var mb_validated_color_picker=__webpack_require__(100);function SpatialFiltersPanel({settings:settings,updateMapSetting:updateMapSetting}){const onAlphaChange=alpha=>{updateMapSetting("spatialFiltersAlpa",alpha)},onFillColorChange=color=>{updateMapSetting("spatialFiltersFillColor",color)},onLineColorChange=color=>{updateMapSetting("spatialFiltersLineColor",color)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.mapSettingsPanel.spatialFiltersTitle",defaultMessage:"Spatial filters"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mapSettingsPanel.showSpatialFiltersLabel",{defaultMessage:"Show spatial filters on map"}),checked:settings.showSpatialFilters,onChange:event=>{updateMapSetting("showSpatialFilters",event.target.checked)},compressed:!0})),settings.showSpatialFilters?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(AlphaSlider,{alpha:settings.spatialFiltersAlpa,onChange:onAlphaChange}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mapSettingsPanel.spatialFiltersFillColorLabel",{defaultMessage:"Fill color"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(mb_validated_color_picker.a,{color:settings.spatialFiltersFillColor,onChange:onFillColorChange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mapSettingsPanel.spatialFiltersLineColorLabel",{defaultMessage:"Border color"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(mb_validated_color_picker.a,{color:settings.spatialFiltersLineColor,onChange:onLineColorChange}))):null)}function DisplayPanel({settings:settings,updateMapSetting:updateMapSetting}){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.mapSettingsPanel.displayTitle",defaultMessage:"Display"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mapSettingsPanel.backgroundColorLabel",{defaultMessage:"Background color"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(mb_validated_color_picker.a,{color:settings.backgroundColor,onChange:color=>{updateMapSetting("backgroundColor",color)}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mapSettingsPanel.showScaleLabel",{defaultMessage:"Show scale"}),checked:settings.showScaleControl,onChange:event=>{updateMapSetting("showScaleControl",event.target.checked)},compressed:!0})))}const connectedMapSettingsPanel=Object(lib.connect)((function(state){return{center:Object(map_selectors.o)(state),hasMapSettingsChanges:Object(map_selectors.J)(state),settings:Object(map_selectors.s)(state),zoom:Object(map_selectors.t)(state)}}),(function(dispatch){return{cancelChanges:()=>{dispatch(Object(public_actions.tb)()),dispatch(Object(public_actions.Nb)(reducers_ui.c.NONE))},keepChanges:()=>{dispatch(Object(public_actions.Nb)(reducers_ui.c.NONE))},updateMapSetting:(settingKey,settingValue)=>{dispatch(Object(public_actions.Vb)(settingKey,settingValue))}}}))((function({cancelChanges:cancelChanges,center:center,hasMapSettingsChanges:hasMapSettingsChanges,keepChanges:keepChanges,settings:settings,updateMapSetting:updateMapSetting,zoom:zoom}){const closeBtnLabel=hasMapSettingsChanges?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mapSettingsPanel.cancelLabel",{defaultMessage:"Cancel"}):external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mapSettingsPanel.closeLabel",{defaultMessage:"Close"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{direction:"column",gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutHeader,{hasBorder:!0,className:"mapLayerPanel__header"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.mapSettingsPanel.title",defaultMessage:"Map settings"})))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapLayerPanel__body"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapLayerPanel__bodyOverflow"},external_kbnSharedDeps_React_default.a.createElement(DisplayPanel,{settings:settings,updateMapSetting:updateMapSetting}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(NavigationPanel,{center:center,settings:settings,updateMapSetting:updateMapSetting,zoom:zoom}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(SpatialFiltersPanel,{settings:settings,updateMapSetting:updateMapSetting}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutFooter,{className:"mapLayerPanel__footer"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:cancelChanges,flush:"left","data-test-subj":"layerPanelCancelButton"},closeBtnLabel)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{disabled:!hasMapSettingsChanges,iconType:"check",onClick:keepChanges,fill:!0,"data-test-subj":"mapSettingSubmitButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.mapSettingsPanel.keepChangesButtonLabel",defaultMessage:"Keep changes"}))))))}));var geojson_file_source=__webpack_require__(217),vector_layer=__webpack_require__(41),es_source=__webpack_require__(205);function add_tooltip_field_popover_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function sortByLabel(a,b){return a.label.localeCompare(b.label)}class add_tooltip_field_popover_AddTooltipFieldPopover extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),add_tooltip_field_popover_defineProperty(this,"state",{isPopoverOpen:!1,checkedFields:[]}),add_tooltip_field_popover_defineProperty(this,"_togglePopover",()=>{this.setState(prevState=>({isPopoverOpen:!prevState.isPopoverOpen}))}),add_tooltip_field_popover_defineProperty(this,"_closePopover",()=>{this.setState({isPopoverOpen:!1})}),add_tooltip_field_popover_defineProperty(this,"_onSelect",options=>{const checkedFields=options.filter(option=>"on"===option.checked).map(option=>option.value);this.setState({checkedFields:checkedFields,options:options})}),add_tooltip_field_popover_defineProperty(this,"_onAdd",()=>{this.props.onAdd(this.state.checkedFields),this.setState({checkedFields:[]}),this._closePopover()})}static getDerivedStateFromProps(nextProps,prevState){return nextProps.fields!==prevState.prevFields||nextProps.selectedFields!==prevState.prevSelectedFields?{options:(fields=nextProps.fields,selectedFields=nextProps.selectedFields,fields?fields.filter(field=>!selectedFields.find(selectedField=>field.name===selectedField.name)).map(field=>({value:field.name,prepend:"type"in field?external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_.FieldIcon,{className:"eui-alignMiddle",type:field.type,fill:"none"}):null,label:field.label})).sort(sortByLabel):[]),checkedFields:[],prevFields:nextProps.fields,prevSelectedFields:nextProps.selectedFields}:null;var fields,selectedFields}_renderAddButton(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:this._togglePopover,size:"xs",iconType:"plusInCircleFilled",isDisabled:!this.props.fields},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.tooltipSelector.togglePopoverLabel",defaultMessage:"Add"}))}_renderContent(){const addLabel=0===this.state.checkedFields.length?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.tooltipSelector.addLabelWithoutCount",{defaultMessage:"Add"}):external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.tooltipSelector.addLabelWithCount",{defaultMessage:"Add {count}",values:{count:this.state.checkedFields.length}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelectable,{searchable:!0,searchProps:{compressed:!0},options:this.state.options,onChange:this._onSelect},(list,search)=>external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:"300px"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopoverTitle,null,search),list)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopoverFooter,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextAlign,{textAlign:"right"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{fill:!0,isDisabled:0===this.state.checkedFields.length,onClick:this._onAdd,size:"s"},addLabel))))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{id:"addTooltipFieldPopover",anchorPosition:"leftCenter",button:this._renderAddButton(),isOpen:this.state.isPopoverOpen,closePopover:this._closePopover,panelPaddingSize:"none",ownFocus:!0},this._renderContent())}}function tooltip_selector_extends(){return(tooltip_selector_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function tooltip_selector_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}async function getFieldProps(field){return{label:await field.getLabel(),type:await field.getDataType(),name:field.getName()}}class tooltip_selector_TooltipSelector extends external_kbnSharedDeps_React_.Component{constructor(props){super(props),tooltip_selector_defineProperty(this,"_isMounted",void 0),tooltip_selector_defineProperty(this,"_previousFields",void 0),tooltip_selector_defineProperty(this,"_previousSelectedTooltips",void 0),tooltip_selector_defineProperty(this,"state",{fieldProps:[],selectedFieldProps:[]}),tooltip_selector_defineProperty(this,"_getPropertyLabel",propertyName=>{if(!this.state.fieldProps.length)return propertyName;const prop=this.state.fieldProps.find(field=>field.name===propertyName);return prop?prop.label:propertyName}),tooltip_selector_defineProperty(this,"_onAdd",properties=>{if(this.props.tooltipFields){const existingProperties=this._getTooltipFieldNames();this.props.onChange([...existingProperties,...properties])}else this.props.onChange([...properties])}),tooltip_selector_defineProperty(this,"_removeProperty",index=>{if(this.props.tooltipFields){const tooltipProperties=this._getTooltipFieldNames();tooltipProperties.splice(index,1),this.props.onChange(tooltipProperties)}else this.props.onChange([])}),tooltip_selector_defineProperty(this,"_onDragEnd",({source:source,destination:destination})=>{destination&&this.props.onChange(((list,startIndex,endIndex)=>{const result=Array.from(list),[removed]=result.splice(startIndex,1);return result.splice(endIndex,0,removed),result})(this._getTooltipFieldNames(),source.index,destination.index))}),this._isMounted=!1,this._previousFields=null,this._previousSelectedTooltips=null}componentDidMount(){this._isMounted=!0,this._loadFieldProps(),this._loadTooltipFieldProps()}componentWillUnmount(){this._isMounted=!1}componentDidUpdate(){this._loadTooltipFieldProps(),this._loadFieldProps()}async _loadTooltipFieldProps(){if(!this.props.tooltipFields||this.props.tooltipFields===this._previousSelectedTooltips)return;this._previousSelectedTooltips=this.props.tooltipFields;const promises=this.props.tooltipFields.map(getFieldProps),selectedFieldProps=await Promise.all(promises);this._isMounted&&this.setState({selectedFieldProps:selectedFieldProps})}async _loadFieldProps(){if(!this.props.fields||this.props.fields===this._previousFields)return;this._previousFields=this.props.fields;const promises=this.props.fields.map(getFieldProps),fieldProps=await Promise.all(promises);this._isMounted&&this.setState({fieldProps:fieldProps})}_getTooltipFieldNames(){return this.props.tooltipFields?this.props.tooltipFields.map(field=>field.getName()):[]}_renderProperties(){return this.state.selectedFieldProps.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDragDropContext,{onDragEnd:this._onDragEnd},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDroppable,{droppableId:"mapLayerTOC",spacing:"none"},(droppableProvided,snapshot)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,this.state.selectedFieldProps.map((field,idx)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDraggable,{spacing:"none",key:field.name,index:idx,draggableId:field.name,customDragHandle:!0,disableInteractiveElementBlocking:!0},(provided,state)=>external_kbnSharedDeps_React_default.a.createElement("div",{className:classnames_default()("mapTooltipSelector__propertyRow",{"mapTooltipSelector__propertyRow-isDragging":state.isDragging,"mapTooltipSelector__propertyRow-isDraggingOver":snapshot.isDraggingOver})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{className:"mapTooltipSelector__propertyContent",size:"s"},this._getPropertyLabel(field.name)),external_kbnSharedDeps_React_default.a.createElement("div",{className:"mapTooltipSelector__propertyIcons"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"trash",color:"danger",onClick:this._removeProperty.bind(null,idx),title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.tooltipSelector.trashButtonTitle",{defaultMessage:"Remove property"}),"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.tooltipSelector.trashButtonAriaLabel",{defaultMessage:"Remove property"})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,tooltip_selector_extends({className:"mapTooltipSelector__grab",iconType:"grab",color:"subdued",title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.tooltipSelector.grabButtonTitle",{defaultMessage:"Reorder property"}),"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.tooltipSelector.grabButtonAriaLabel",{defaultMessage:"Reorder property"})},provided.dragHandleProps))))))))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s",textAlign:"center"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextColor,{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.tooltipSelector.emptyState.description",defaultMessage:"Add a tooltip field to create filters from field values."}))))}render(){return external_kbnSharedDeps_React_default.a.createElement("div",null,this._renderProperties(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextAlign,{textAlign:"center"},external_kbnSharedDeps_React_default.a.createElement(add_tooltip_field_popover_AddTooltipFieldPopover,{onAdd:this._onAdd,fields:this.state.fieldProps,selectedFields:this.state.selectedFieldProps})))}}var es_doc_field=__webpack_require__(75);let toastDisplayed=!1;const load_index_settings_indexSettings=new Map;async function loadIndexSettings(indexPatternTitle){if(load_index_settings_indexSettings.has(indexPatternTitle))return load_index_settings_indexSettings.get(indexPatternTitle);const fetchPromise=async function(indexPatternTitle){const http=Object(kibana_services.n)(),toasts=Object(kibana_services.K)();try{return await http.fetch("/"+constants.INDEX_SETTINGS_API_PATH,{method:"GET",credentials:"same-origin",query:{indexPatternTitle:indexPatternTitle}})}catch(err){const warningMsg=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.indexSettings.fetchErrorMsg",{defaultMessage:"Unable to fetch index settings for index pattern '{indexPatternTitle}'.\n      Ensure you have '{viewIndexMetaRole}' role.",values:{indexPatternTitle:indexPatternTitle,viewIndexMetaRole:"view_index_metadata"}});return toastDisplayed||(toastDisplayed=!0,toasts.addWarning(warningMsg)),console.warn(warningMsg),{maxResultWindow:constants.DEFAULT_MAX_RESULT_WINDOW,maxInnerResultWindow:constants.DEFAULT_MAX_INNER_RESULT_WINDOW}}}(indexPatternTitle);return load_index_settings_indexSettings.set(indexPatternTitle,fetchPromise),fetchPromise}function scaling_form_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class scaling_form_ScalingForm extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),scaling_form_defineProperty(this,"state",{maxResultWindow:constants.DEFAULT_MAX_RESULT_WINDOW}),scaling_form_defineProperty(this,"_isMounted",!1),scaling_form_defineProperty(this,"_onScalingTypeChange",optionId=>{let layerType;layerType=optionId===constants.SCALING_TYPES.CLUSTERS?constants.LAYER_TYPE.BLENDED_VECTOR:optionId===constants.SCALING_TYPES.MVT?constants.LAYER_TYPE.TILED_VECTOR:constants.LAYER_TYPE.VECTOR,this.props.onChange({propName:"scalingType",value:optionId,newLayerType:layerType})}),scaling_form_defineProperty(this,"_onFilterByMapBoundsChange",event=>{this.props.onChange({propName:"filterByMapBounds",value:event.target.checked})})}componentDidMount(){this._isMounted=!0,this.loadIndexSettings()}componentWillUnmount(){this._isMounted=!1}async loadIndexSettings(){try{const indexPattern=await Object(kibana_services.p)().get(this.props.indexPatternId),{maxResultWindow:maxResultWindow}=await loadIndexSettings(indexPattern.title);this._isMounted&&this.setState({maxResultWindow:maxResultWindow})}catch(err){return}}_renderClusteringRadio(){const clusteringRadio=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiRadio,{id:constants.SCALING_TYPES.CLUSTERS,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.clusterScalingLabel",{defaultMessage:"Show clusters when results exceed {maxResultWindow}.",values:{maxResultWindow:this.state.maxResultWindow}}),checked:this.props.scalingType===constants.SCALING_TYPES.CLUSTERS,onChange:()=>this._onScalingTypeChange(constants.SCALING_TYPES.CLUSTERS),disabled:!this.props.supportsClustering});return this.props.clusteringDisabledReason?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"left",content:this.props.clusteringDisabledReason},clusteringRadio):clusteringRadio}_renderMVTRadio(){const labelText=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.useMVTVectorTiles",{defaultMessage:"Use vector tiles"}),mvtRadio=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiRadio,{id:constants.SCALING_TYPES.MVT,label:labelText,checked:this.props.scalingType===constants.SCALING_TYPES.MVT,onChange:()=>this._onScalingTypeChange(constants.SCALING_TYPES.MVT)}),enabledInfo=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBetaBadge,{label:"beta"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHorizontalRule,{margin:"xs"}),external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.mvtDescription",{defaultMessage:"Use vector tiles for faster display of large datasets."}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"left",content:enabledInfo},mvtRadio)}render(){let filterByBoundsSwitch;return this.props.scalingType===constants.SCALING_TYPES.LIMIT&&(filterByBoundsSwitch=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.extentFilterLabel",{defaultMessage:"Dynamically filter for data in the visible map area"}),checked:this.props.filterByMapBounds,onChange:this._onFilterByMapBoundsChange,compressed:!0}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.esSearch.scaleTitle",defaultMessage:"Scaling"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,null,external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiRadio,{id:constants.SCALING_TYPES.LIMIT,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.limitScalingLabel",{defaultMessage:"Limit results to {maxResultWindow}.",values:{maxResultWindow:this.state.maxResultWindow}}),checked:this.props.scalingType===constants.SCALING_TYPES.LIMIT,onChange:()=>this._onScalingTypeChange(constants.SCALING_TYPES.LIMIT)}),this._renderClusteringRadio(),this._renderMVTRadio())),filterByBoundsSwitch)}}function update_source_editor_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class update_source_editor_UpdateSourceEditor extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),update_source_editor_defineProperty(this,"state",{sourceFields:null,sortFields:null,supportsClustering:!1,mvtDisabledReason:null,clusteringDisabledReason:null}),update_source_editor_defineProperty(this,"_onTooltipPropertiesChange",propertyNames=>{this.props.onChange({propName:"tooltipProperties",value:propertyNames})}),update_source_editor_defineProperty(this,"_onSortFieldChange",sortField=>{this.props.onChange({propName:"sortField",value:sortField})}),update_source_editor_defineProperty(this,"_onSortOrderChange",e=>{this.props.onChange({propName:"sortOrder",value:e.target.value})})}componentDidMount(){this._isMounted=!0,this.loadFields()}componentWillUnmount(){this._isMounted=!1}async loadFields(){let indexPattern,geoField;try{indexPattern=await Object(kibana_services.p)().get(this.props.indexPatternId)}catch(err){return void(this._isMounted&&this.setState({loadError:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.loadErrorMessage",{defaultMessage:"Unable to find Index pattern {id}",values:{id:this.props.indexPatternId}})}))}try{geoField=await this.props.getGeoField()}catch(err){return void(this._isMounted&&this.setState({loadError:err.message}))}if(!this._isMounted)return;const sourceFields=Object(index_pattern_util.g)(indexPattern.fields).map(field=>new es_doc_field.a({fieldName:field.name,source:this.props.source,origin:constants.FIELD_ORIGIN.SOURCE}));this.setState({supportsClustering:Object(index_pattern_util.i)(geoField),clusteringDisabledReason:Object(index_pattern_util.d)(geoField),mvtDisabledReason:null,sourceFields:sourceFields,sortFields:indexPattern.fields.filter(field=>field.sortable&&!data_public_.indexPatterns.isNestedField(field))})}_renderTooltipsPanel(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.esSearch.tooltipsTitle",defaultMessage:"Tooltip fields"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(tooltip_selector_TooltipSelector,{tooltipFields:this.props.tooltipFields,onChange:this._onTooltipPropertiesChange,fields:this.state.sourceFields}))}_renderSortPanel(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.esSearch.sortTitle",defaultMessage:"Sorting"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.sortFieldLabel",{defaultMessage:"Field"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(single_field_select.a,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.sortFieldSelectPlaceholder",{defaultMessage:"Select sort field"}),value:this.props.sortField,onChange:this._onSortFieldChange,fields:this.state.sortFields,compressed:!0})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.sortOrderLabel",{defaultMessage:"Order"}),display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{disabled:!this.props.sortField,options:[{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.ascendingLabel",{defaultMessage:"ascending"}),value:data_public_.SortDirection.asc},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.descendingLabel",{defaultMessage:"descending"}),value:data_public_.SortDirection.desc}],value:this.props.sortOrder,onChange:this._onSortOrderChange,compressed:!0})))}_renderScalingPanel(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(scaling_form_ScalingForm,{filterByMapBounds:this.props.filterByMapBounds,indexPatternId:this.props.indexPatternId,onChange:this.props.onChange,scalingType:this.props.scalingType,supportsClustering:this.state.supportsClustering,clusteringDisabledReason:this.state.clusteringDisabledReason}))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,this._renderTooltipsPanel(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),this._renderSortPanel(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),this._renderScalingPanel(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}))}}var source_registry=__webpack_require__(45),common_=__webpack_require__(26),valid_string_config=__webpack_require__(84);function top_hits_form_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class top_hits_form_TopHitsForm extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),top_hits_form_defineProperty(this,"state",{maxInnerResultWindow:constants.DEFAULT_MAX_INNER_RESULT_WINDOW}),top_hits_form_defineProperty(this,"_isMounted",!1),top_hits_form_defineProperty(this,"_onTopHitsSplitFieldChange",topHitsSplitField=>{topHitsSplitField&&this.props.onChange({propName:"topHitsSplitField",value:topHitsSplitField})}),top_hits_form_defineProperty(this,"_onTopHitsSizeChange",size=>{this.props.onChange({propName:"topHitsSize",value:size})}),top_hits_form_defineProperty(this,"_onSortFieldChange",sortField=>{this.props.onChange({propName:"sortField",value:sortField})}),top_hits_form_defineProperty(this,"_onSortOrderChange",event=>{this.props.onChange({propName:"sortOrder",value:event.target.value})})}componentDidMount(){this._isMounted=!0,this.loadIndexSettings()}componentWillUnmount(){this._isMounted=!1}async loadIndexSettings(){try{const indexPattern=await Object(kibana_services.p)().get(this.props.indexPatternId),{maxInnerResultWindow:maxInnerResultWindow}=await loadIndexSettings(indexPattern.title);this._isMounted&&this.setState({maxInnerResultWindow:maxInnerResultWindow})}catch(err){return}}render(){let sizeSlider,sortField,sortOrder;return this.props.topHitsSplitField&&(sizeSlider=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.topHitsSizeLabel",{defaultMessage:"Documents per entity"}),display:this.props.isColumnCompressed?"columnCompressed":"row"},external_kbnSharedDeps_React_default.a.createElement(validated_range.a,{min:1,max:this.state.maxInnerResultWindow,step:1,value:this.props.topHitsSize,onChange:this._onTopHitsSizeChange,showLabels:!0,showInput:!0,showRange:!0,"data-test-subj":"layerPanelTopHitsSize",compressed:!0})),sortField=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esTopHitsSearch.sortFieldLabel",{defaultMessage:"Sort field"}),display:this.props.isColumnCompressed?"columnCompressed":"row"},external_kbnSharedDeps_React_default.a.createElement(single_field_select.a,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.sortFieldSelectPlaceholder",{defaultMessage:"Select sort field"}),value:this.props.sortField,onChange:this._onSortFieldChange,fields:this.props.sortFields,compressed:!0})),sortOrder=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esTopHitsSearch.sortOrderLabel",{defaultMessage:"Sort order"}),display:this.props.isColumnCompressed?"columnCompressed":"row"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{disabled:!this.props.sortField,options:[{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.ascendingLabel",{defaultMessage:"ascending"}),value:data_public_.SortDirection.asc},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.descendingLabel",{defaultMessage:"descending"}),value:data_public_.SortDirection.desc}],value:this.props.sortOrder,onChange:this._onSortOrderChange,compressed:!0}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.topHitsSplitFieldLabel",{defaultMessage:"Entity"}),display:this.props.isColumnCompressed?"columnCompressed":"row"},external_kbnSharedDeps_React_default.a.createElement(single_field_select.a,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.topHitsSplitFieldSelectPlaceholder",{defaultMessage:"Select entity field"}),value:this.props.topHitsSplitField,onChange:this._onTopHitsSplitFieldChange,fields:this.props.termFields,isClearable:!1,compressed:!0})),sizeSlider,sortField,sortOrder)}}function top_hits_update_source_editor_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class update_source_editor_TopHitsUpdateSourceEditor extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),top_hits_update_source_editor_defineProperty(this,"_isMounted",!1),top_hits_update_source_editor_defineProperty(this,"state",{sourceFields:[],termFields:[],sortFields:[]}),top_hits_update_source_editor_defineProperty(this,"_onTooltipPropertiesChange",propertyNames=>{this.props.onChange({propName:"tooltipProperties",value:propertyNames})}),top_hits_update_source_editor_defineProperty(this,"_onFilterByMapBoundsChange",event=>{this.props.onChange({propName:"filterByMapBounds",value:event.target.checked})})}componentDidMount(){this._isMounted=!0,this.loadFields()}componentWillUnmount(){this._isMounted=!1}async loadFields(){let indexPattern;try{indexPattern=await Object(kibana_services.p)().get(this.props.indexPatternId)}catch(err){return void(this._isMounted&&this.setState({loadError:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.loadErrorMessage",{defaultMessage:"Unable to find Index pattern {id}",values:{id:this.props.indexPatternId}})}))}if(!this._isMounted)return;const sourceFields=Object(index_pattern_util.g)(indexPattern.fields).map(field=>new es_doc_field.a({fieldName:field.name,source:this.props.source,origin:constants.FIELD_ORIGIN.SOURCE}));this.setState({sourceFields:sourceFields,termFields:Object(index_pattern_util.h)(indexPattern.fields),sortFields:Object(index_pattern_util.f)(indexPattern.fields)})}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.esSearch.tooltipsTitle",defaultMessage:"Tooltip fields"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(tooltip_selector_TooltipSelector,{tooltipFields:this.props.tooltipFields,onChange:this._onTooltipPropertiesChange,fields:this.state.sourceFields})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.source.topHitsPanelLabel",defaultMessage:"Top hits"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(top_hits_form_TopHitsForm,{indexPatternId:this.props.indexPatternId,isColumnCompressed:!0,onChange:this.props.onChange,sortField:this.props.sortField,sortFields:this.state.sortFields,sortOrder:this.props.sortOrder,termFields:this.state.termFields,topHitsSplitField:this.props.topHitsSplitField,topHitsSize:this.props.topHitsSize}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.extentFilterLabel",{defaultMessage:"Dynamically filter for data in the visible map area"}),checked:this.props.filterByMapBounds,onChange:this._onFilterByMapBoundsChange,compressed:!0}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}))}}function GeoFieldSelect(props){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.geofieldLabel",{defaultMessage:"Geospatial field"})},external_kbnSharedDeps_React_default.a.createElement(single_field_select.a,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.selectLabel",{defaultMessage:"Select geo field"}),value:props.value,onChange:props.onChange,fields:props.geoFields}))}function geo_index_pattern_select_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class geo_index_pattern_select_GeoIndexPatternSelect extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),geo_index_pattern_select_defineProperty(this,"_isMounted",!1),geo_index_pattern_select_defineProperty(this,"state",{doesIndexPatternHaveGeoField:!1,noIndexPatternsExist:!1}),geo_index_pattern_select_defineProperty(this,"_onIndexPatternSelect",async indexPatternId=>{if(!indexPatternId||0===indexPatternId.length)return;let indexPattern;try{indexPattern=await Object(kibana_services.p)().get(indexPatternId)}catch(err){return}this._isMounted&&indexPattern.id===indexPatternId&&(this.setState({doesIndexPatternHaveGeoField:indexPattern.fields.some(field=>{var _this$props;return null!==(_this$props=this.props)&&void 0!==_this$props&&_this$props.isGeoPointsOnly?constants.ES_GEO_FIELD_TYPE.GEO_POINT===field.type:constants.ES_GEO_FIELD_TYPES.includes(field.type)})}),this.props.onChange(indexPattern))}),geo_index_pattern_select_defineProperty(this,"_onNoIndexPatterns",()=>{this.setState({noIndexPatternsExist:!0})})}componentWillUnmount(){this._isMounted=!1}componentDidMount(){this._isMounted=!0}_renderNoIndexPatternWarning(){return this.state.noIndexPatternsExist?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.noIndexPattern.messageTitle",{defaultMessage:"Couldn't find any index patterns"}),color:"warning"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.noIndexPattern.doThisPrefixDescription",defaultMessage:"You'll need to "}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:Object(kibana_services.n)().basePath.prepend("/app/management/kibana/indexPatterns")},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.noIndexPattern.doThisLinkTextDescription",defaultMessage:"Create an index pattern."}))),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.noIndexPattern.hintDescription",defaultMessage:"Don't have any data? "}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:Object(kibana_services.n)().basePath.prepend("/app/home#/tutorial_directory/sampleData")},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.noIndexPattern.getStartedLinkText",defaultMessage:"Get started with some sample data sets."})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"})):null}render(){const IndexPatternSelect=Object(kibana_services.o)(),isIndexPatternInvalid=!!this.props.value&&!this.state.doesIndexPatternHaveGeoField,error=isIndexPatternInvalid?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.noGeoFieldInIndexPattern.message",{defaultMessage:"Index pattern does not contain any geospatial fields"}):"";return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,this._renderNoIndexPatternWarning(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.indexPatternSelectLabel",{defaultMessage:"Index pattern"}),isInvalid:isIndexPatternInvalid,error:error},external_kbnSharedDeps_React_default.a.createElement(IndexPatternSelect,{isInvalid:isIndexPatternInvalid,isDisabled:this.state.noIndexPatternsExist,indexPatternId:this.props.value?this.props.value:"",onChange:this._onIndexPatternSelect,placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.indexPatternSelectPlaceholder",{defaultMessage:"Select index pattern"}),onNoIndexPatterns:this._onNoIndexPatterns,isClearable:!1})))}}function create_source_editor_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class create_source_editor_CreateSourceEditor extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),create_source_editor_defineProperty(this,"state",{indexPattern:null,geoFields:[],geoFieldName:null,sortField:null,sortFields:[],sortOrder:common_.SortDirection.desc,termFields:[],topHitsSplitField:null,topHitsSize:1}),create_source_editor_defineProperty(this,"_onIndexPatternSelect",indexPattern=>{const geoFields=Object(index_pattern_util.b)(indexPattern.fields);this.setState({indexPattern:indexPattern,geoFields:geoFields,geoFieldName:geoFields.length?geoFields[0].name:null,sortField:indexPattern.timeFieldName?indexPattern.timeFieldName:null,sortFields:Object(index_pattern_util.f)(indexPattern.fields),termFields:Object(index_pattern_util.h)(indexPattern.fields),topHitsSplitField:null},this._previewLayer)}),create_source_editor_defineProperty(this,"_onGeoFieldSelect",geoFieldName=>{this.setState({geoFieldName:geoFieldName||null},this._previewLayer)}),create_source_editor_defineProperty(this,"_onTopHitsPropChange",({propName:propName,value:value})=>{this.setState({[propName]:value},this._previewLayer)}),create_source_editor_defineProperty(this,"_previewLayer",()=>{const{indexPattern:indexPattern,geoFieldName:geoFieldName,sortField:sortField,sortOrder:sortOrder,topHitsSplitField:topHitsSplitField,topHitsSize:topHitsSize}=this.state,tooltipProperties=[];topHitsSplitField&&tooltipProperties.push(topHitsSplitField),indexPattern&&indexPattern.timeFieldName&&tooltipProperties.push(indexPattern.timeFieldName);const sourceConfig=indexPattern&&geoFieldName&&sortField&&topHitsSplitField?{indexPatternId:indexPattern.id,geoField:geoFieldName,scalingType:constants.SCALING_TYPES.TOP_HITS,sortField:sortField,sortOrder:sortOrder,tooltipProperties:tooltipProperties,topHitsSplitField:topHitsSplitField,topHitsSize:topHitsSize}:null;this.props.onSourceConfigChange(sourceConfig)})}_renderGeoSelect(){return this.state.indexPattern?external_kbnSharedDeps_React_default.a.createElement(GeoFieldSelect,{value:this.state.geoFieldName?this.state.geoFieldName:"",onChange:this._onGeoFieldSelect,geoFields:this.state.geoFields}):null}_renderTopHitsPanel(){return this.state.indexPattern&&this.state.indexPattern.id&&this.state.geoFieldName?external_kbnSharedDeps_React_default.a.createElement(top_hits_form_TopHitsForm,{indexPatternId:this.state.indexPattern.id,isColumnCompressed:!1,onChange:this._onTopHitsPropChange,sortField:this.state.sortField?this.state.sortField:"",sortFields:this.state.sortFields,sortOrder:this.state.sortOrder,termFields:this.state.termFields,topHitsSplitField:this.state.topHitsSplitField,topHitsSize:this.state.topHitsSize}):null}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(geo_index_pattern_select_GeoIndexPatternSelect,{value:this.state.indexPattern&&this.state.indexPattern.id?this.state.indexPattern.id:"",onChange:this._onIndexPatternSelect}),this._renderGeoSelect(),this._renderTopHitsPanel())}}const esTopHitsLayerWizardConfig={categories:[constants.LAYER_WIZARD_CATEGORY.ELASTICSEARCH],description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.topHitsDescription",{defaultMessage:"Display the most relevant documents per entity, e.g. the most recent GPS hits per vehicle."}),icon:()=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25"},external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"24.939",cy:"12.409",r:"2.182",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"35.849",cy:"12.409",r:"2.182",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"45.561",cy:"12.409",r:"3.273",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"5.197",cy:"18.954",r:"2.182",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"13.485",cy:"12.409",r:"2.182",className:"mapLayersWizardIcon__highlight"})),renderWizard:({previewLayers:previewLayers,mapColors:mapColors})=>external_kbnSharedDeps_React_default.a.createElement(create_source_editor_CreateSourceEditor,{onSourceConfigChange:sourceConfig=>{if(!sourceConfig)return void previewLayers([]);const sourceDescriptor=es_search_source_ESSearchSource.createDescriptor(sourceConfig),layerDescriptor=vector_layer.a.createDescriptor({sourceDescriptor:sourceDescriptor},mapColors);previewLayers([layerDescriptor])}}),title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.topHitsTitle",{defaultMessage:"Top hits per entity"})};function getDocValueAndSourceFields(indexPattern,fieldNames,dateFormat){const docValueFields=[],sourceOnlyFields=[],scriptFields={};return fieldNames.forEach(fieldName=>{const field=Object(elasticsearch_util.l)(indexPattern,fieldName);if(field.scripted)scriptFields[field.name]={script:{source:field.script||"",lang:field.lang||""}};else if(field.readFromDocValues||field.runtimeField){const docValueField="date"===field.type?{field:fieldName,format:dateFormat}:fieldName;docValueFields.push(docValueField)}else sourceOnlyFields.push(fieldName)}),{docValueFields:docValueFields,sourceOnlyFields:sourceOnlyFields,scriptFields:scriptFields}}function es_search_source_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const sourceTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearchTitle",{defaultMessage:"Documents"});class es_search_source_ESSearchSource extends es_source.a{static createDescriptor(descriptor){const normalizedDescriptor=es_source.a.createDescriptor(descriptor);if(!Object(valid_string_config.a)(normalizedDescriptor.geoField))throw new Error("Cannot create an ESSearchSourceDescriptor without a geoField");return{...normalizedDescriptor,type:constants.SOURCE_TYPES.ES_SEARCH,geoField:normalizedDescriptor.geoField,filterByMapBounds:"boolean"!=typeof descriptor.filterByMapBounds||descriptor.filterByMapBounds,tooltipProperties:Array.isArray(descriptor.tooltipProperties)?descriptor.tooltipProperties:[],sortField:Object(valid_string_config.a)(descriptor.sortField)?descriptor.sortField:"",sortOrder:Object(valid_string_config.a)(descriptor.sortOrder)?descriptor.sortOrder:common_.SortDirection.desc,scalingType:Object(valid_string_config.a)(descriptor.scalingType)?descriptor.scalingType:constants.SCALING_TYPES.LIMIT,topHitsSplitField:Object(valid_string_config.a)(descriptor.topHitsSplitField)?descriptor.topHitsSplitField:"",topHitsSize:"number"==typeof descriptor.topHitsSize&&descriptor.topHitsSize>0?descriptor.topHitsSize:1}}constructor(descriptor,inspectorAdapters){const sourceDescriptor=es_search_source_ESSearchSource.createDescriptor(descriptor);super(sourceDescriptor,inspectorAdapters),es_search_source_defineProperty(this,"_descriptor",void 0),es_search_source_defineProperty(this,"_tooltipFields",void 0),this._descriptor=sourceDescriptor,this._tooltipFields=this._descriptor.tooltipProperties?this._descriptor.tooltipProperties.map(property=>this.createField({fieldName:property})):[]}createField({fieldName:fieldName}){return new es_doc_field.a({fieldName:fieldName,source:this,origin:constants.FIELD_ORIGIN.SOURCE,canReadFromGeoJson:this._descriptor.scalingType!==constants.SCALING_TYPES.MVT})}renderSourceSettingsEditor(sourceEditorArgs){if(this._isTopHits())return external_kbnSharedDeps_React_default.a.createElement(update_source_editor_TopHitsUpdateSourceEditor,{source:this,indexPatternId:this.getIndexPatternId(),onChange:sourceEditorArgs.onChange,tooltipFields:this._tooltipFields,sortField:this._descriptor.sortField,sortOrder:this._descriptor.sortOrder,filterByMapBounds:this.isFilterByMapBounds(),topHitsSplitField:this._descriptor.topHitsSplitField,topHitsSize:this._descriptor.topHitsSize});return external_kbnSharedDeps_React_default.a.createElement(update_source_editor_UpdateSourceEditor,{source:this,indexPatternId:this.getIndexPatternId(),getGeoField:()=>this._getGeoField(),onChange:sourceEditorArgs.onChange,tooltipFields:this._tooltipFields,sortField:this._descriptor.sortField,sortOrder:this._descriptor.sortOrder,scalingType:this._descriptor.scalingType,filterByMapBounds:this.isFilterByMapBounds()})}async getFields(){try{const indexPattern=await this.getIndexPattern();return indexPattern.fields.filter(field=>field.aggregatable).map(field=>this.createField({fieldName:field.name}))}catch(error){return[]}}getFieldNames(){return[this._descriptor.geoField]}async getImmutableProperties(){let indexPatternName=this.getIndexPatternId(),geoFieldType="";try{indexPatternName=(await this.getIndexPattern()).title;geoFieldType=(await this._getGeoField()).type}catch(error){}return[{label:Object(i18n_getters.b)(),value:sourceTitle},{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.indexPatternLabel",{defaultMessage:"Index pattern"}),value:indexPatternName},{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.geoFieldLabel",{defaultMessage:"Geospatial field"}),value:this._descriptor.geoField},{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.geoFieldTypeLabel",{defaultMessage:"Geospatial field type"}),value:geoFieldType}]}_buildEsSort(){const{sortField:sortField,sortOrder:sortOrder}=this._descriptor;if(!sortField)throw new Error("Cannot build sort");return[{[sortField]:{order:sortOrder}}]}async _getTopHits(layerName,searchFilters,registerCancelCallback){const{topHitsSplitField:topHitsSplitFieldName,topHitsSize:topHitsSize}=this._descriptor;if(!topHitsSplitFieldName)throw new Error("Cannot _getTopHits without topHitsSplitField");const indexPattern=await this.getIndexPattern(),{docValueFields:docValueFields,sourceOnlyFields:sourceOnlyFields,scriptFields:scriptFields}=getDocValueAndSourceFields(indexPattern,searchFilters.fieldNames,"epoch_millis"),topHits={size:topHitsSize,script_fields:scriptFields,docvalue_fields:docValueFields};this._hasSort()&&(topHits.sort=this._buildEsSort()),0===sourceOnlyFields.length?topHits._source=!1:topHits._source={includes:sourceOnlyFields};const topHitsSplitField=Object(elasticsearch_util.l)(indexPattern,topHitsSplitFieldName),termsAgg={size:constants.DEFAULT_MAX_BUCKETS_LIMIT,shard_size:constants.DEFAULT_MAX_BUCKETS_LIMIT},searchSource=await this.makeSearchSource(searchFilters,0);searchSource.setField("trackTotalHits",!1),searchSource.setField("aggs",{totalEntities:{cardinality:Object(elasticsearch_util.a)({precision_threshold:1},topHitsSplitField)},entitySplit:{terms:Object(elasticsearch_util.a)(termsAgg,topHitsSplitField),aggs:{entityHits:{top_hits:topHits}}}});const resp=await this._runEsQuery({requestId:this.getId(),requestName:layerName,searchSource:searchSource,registerCancelCallback:registerCancelCallback,requestDescription:"Elasticsearch document top hits request",searchSessionId:searchFilters.searchSessionId}),allHits=[],entityBuckets=external_kbnSharedDeps_Lodash_default.a.get(resp,"aggregations.entitySplit.buckets",[]),totalEntities=external_kbnSharedDeps_Lodash_default.a.get(resp,"aggregations.totalEntities.value",0),areEntitiesTrimmed=entityBuckets.length>=constants.DEFAULT_MAX_BUCKETS_LIMIT;let areTopHitsTrimmed=!1;return entityBuckets.forEach(entityBucket=>{const hits=external_kbnSharedDeps_Lodash_default.a.get(entityBucket,"entityHits.hits.hits",[]);allHits.push(...hits.reverse()),Object(elasticsearch_util.n)(entityBucket.entityHits.hits.total,hits.length)&&(areTopHitsTrimmed=!0)}),{hits:allHits,meta:{areResultsTrimmed:areEntitiesTrimmed||areTopHitsTrimmed,areEntitiesTrimmed:areEntitiesTrimmed,entityCount:entityBuckets.length,totalEntities:totalEntities}}}async _getSearchHits(layerName,searchFilters,maxResultWindow,registerCancelCallback){const indexPattern=await this.getIndexPattern(),{docValueFields:docValueFields,sourceOnlyFields:sourceOnlyFields}=getDocValueAndSourceFields(indexPattern,searchFilters.fieldNames,"epoch_millis"),initialSearchContext={docvalue_fields:docValueFields},searchSource=await this.makeSearchSource(searchFilters,maxResultWindow,initialSearchContext);searchSource.setField("trackTotalHits",maxResultWindow+1),searchSource.setField("fieldsFromSource",searchFilters.fieldNames),0===sourceOnlyFields.length?searchSource.setField("source",!1):searchSource.setField("source",sourceOnlyFields),this._hasSort()&&searchSource.setField("sort",this._buildEsSort());const resp=await this._runEsQuery({requestId:this.getId(),requestName:layerName,searchSource:searchSource,registerCancelCallback:registerCancelCallback,requestDescription:"Elasticsearch document request",searchSessionId:searchFilters.searchSessionId});return{hits:resp.hits.hits.reverse(),meta:{resultsCount:resp.hits.hits.length,areResultsTrimmed:Object(elasticsearch_util.n)(resp.hits.total,resp.hits.hits.length)}}}_isTopHits(){const{scalingType:scalingType,topHitsSplitField:topHitsSplitField}=this._descriptor;return!(scalingType!==constants.SCALING_TYPES.TOP_HITS||!topHitsSplitField)}_hasSort(){const{sortField:sortField,sortOrder:sortOrder}=this._descriptor;return!!sortField&&!!sortOrder}async getMaxResultWindow(){const indexPattern=await this.getIndexPattern();return(await loadIndexSettings(indexPattern.title)).maxResultWindow}async getGeoJsonWithMeta(layerName,searchFilters,registerCancelCallback,isRequestStillActive){const indexPattern=await this.getIndexPattern(),indexSettings=await loadIndexSettings(indexPattern.title),{hits:hits,meta:meta}=this._isTopHits()?await this._getTopHits(layerName,searchFilters,registerCancelCallback):await this._getSearchHits(layerName,searchFilters,indexSettings.maxResultWindow,registerCancelCallback),unusedMetaFields=indexPattern.metaFields.filter(metaField=>!["_id","_index"].includes(metaField)),flattenHit=hit=>{const properties=indexPattern.flattenHit(hit);return unusedMetaFields.forEach(metaField=>{delete properties[metaField]}),properties},epochMillisFields=searchFilters.fieldNames.filter(fieldName=>{const field=Object(elasticsearch_util.l)(indexPattern,fieldName);return field.readFromDocValues&&"date"===field.type});let featureCollection;try{const geoField=await this._getGeoField();featureCollection=Object(elasticsearch_util.m)(hits,flattenHit,geoField.name,geoField.type,epochMillisFields)}catch(error){throw new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.convertToGeoJsonErrorMsg",{defaultMessage:"Unable to convert search response to geoJson feature collection, error: {errorMsg}",values:{errorMsg:error.message}}))}return{data:featureCollection,meta:meta}}canFormatFeatureProperties(){return this._tooltipFields.length>0}async _loadTooltipProperties(docId,index,indexPattern){if(0===this._tooltipFields.length)return{};const{docValueFields:docValueFields}=getDocValueAndSourceFields(indexPattern,this._getTooltipPropertyNames(),"strict_date_optional_time"),initialSearchContext={docvalue_fields:docValueFields},searchService=Object(kibana_services.F)(),searchSource=await searchService.searchSource.create(initialSearchContext);searchSource.setField("trackTotalHits",!1),searchSource.setField("index",indexPattern),searchSource.setField("size",1);const query={language:"kuery",query:`_id:"${docId}" and _index:"${index}"`};searchSource.setField("query",query),searchSource.setField("fieldsFromSource",this._getTooltipPropertyNames());const resp=await searchSource.fetch({legacyHitsTotal:!1}),hit=external_kbnSharedDeps_Lodash_default.a.get(resp,"hits.hits[0]");if(!hit)throw new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.loadTooltipPropertiesErrorMsg",{defaultMessage:"Unable to find document, _id: {docId}",values:{docId:docId}}));const properties=indexPattern.flattenHit(hit);return indexPattern.metaFields.forEach(metaField=>{this._getTooltipPropertyNames().includes(metaField)||delete properties[metaField]}),properties}_getTooltipPropertyNames(){return this._tooltipFields.map(field=>field.getName())}async getTooltipProperties(properties){if(null===properties)throw new Error("properties cannot be null");const indexPattern=await this.getIndexPattern(),propertyValues=await this._loadTooltipProperties(properties._id,properties._index,indexPattern),tooltipProperties=this._tooltipFields.map(field=>{const value=propertyValues[field.getName()];return field.createTooltipProperty(value)});return Promise.all(tooltipProperties)}isFilterByMapBounds(){return this._descriptor.scalingType===constants.SCALING_TYPES.CLUSTERS||this._descriptor.scalingType!==constants.SCALING_TYPES.MVT&&!!this._descriptor.filterByMapBounds}async getLeftJoinFields(){const indexPattern=await this.getIndexPattern();return Object(index_pattern_util.g)(indexPattern.fields).map(field=>this.createField({fieldName:field.name}))}async getSupportedShapeTypes(){let geoFieldType;try{geoFieldType=(await this._getGeoField()).type}catch(error){}return geoFieldType===constants.ES_GEO_FIELD_TYPE.GEO_POINT?[constants.VECTOR_SHAPE_TYPE.POINT]:[constants.VECTOR_SHAPE_TYPE.POINT,constants.VECTOR_SHAPE_TYPE.LINE,constants.VECTOR_SHAPE_TYPE.POLYGON]}getSourceTooltipContent(sourceDataRequest){const meta=sourceDataRequest?sourceDataRequest.getMeta():null;if(!meta)return{tooltipContent:null,areResultsTrimmed:!1};if(this._isTopHits()){return{tooltipContent:`${meta.areEntitiesTrimmed?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.esSearch.topHitsResultsTrimmedMsg",{defaultMessage:"Results limited to first {entityCount} entities of ~{totalEntities}.",values:{entityCount:meta.entityCount,totalEntities:meta.totalEntities}}):external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.esSearch.topHitsEntitiesCountMsg",{defaultMessage:"Found {entityCount} entities.",values:{entityCount:meta.entityCount}})} ${external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.esSearch.topHitsSizeMsg",{defaultMessage:"Showing top {topHitsSize} documents per entity.",values:{topHitsSize:this._descriptor.topHitsSize}})}`,areResultsTrimmed:!!meta.areEntitiesTrimmed}}return meta.areResultsTrimmed?{tooltipContent:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.esSearch.resultsTrimmedMsg",{defaultMessage:"Results limited to first {count} documents.",values:{count:meta.resultsCount}}),areResultsTrimmed:!0}:{tooltipContent:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.esSearch.featureCountMsg",{defaultMessage:"Found {count} documents.",values:{count:meta.resultsCount}}),areResultsTrimmed:!1}}getSyncMeta(){return{filterByMapBounds:this._descriptor.filterByMapBounds,sortField:this._descriptor.sortField,sortOrder:this._descriptor.sortOrder,scalingType:this._descriptor.scalingType,topHitsSplitField:this._descriptor.topHitsSplitField,topHitsSize:this._descriptor.topHitsSize}}async getPreIndexedShape(properties){if(null===properties)return null;const geoField=await this._getGeoField();return{index:properties._index,id:properties._id,path:geoField.name}}getJoinsDisabledReason(){let reason;return reason=this._descriptor.scalingType===constants.SCALING_TYPES.CLUSTERS?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.joinsDisabledReason",{defaultMessage:"Joins are not supported when scaling by clusters"}):this._descriptor.scalingType===constants.SCALING_TYPES.MVT?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.joinsDisabledReasonMvt",{defaultMessage:"Joins are not supported when scaling by mvt vector tiles"}):null,reason}getLayerName(){return constants.MVT_SOURCE_LAYER_NAME}async getUrlTemplateWithMeta(searchFilters){const indexPattern=await this.getIndexPattern(),indexSettings=await loadIndexSettings(indexPattern.title),{docValueFields:docValueFields,sourceOnlyFields:sourceOnlyFields}=getDocValueAndSourceFields(indexPattern,searchFilters.fieldNames,"epoch_millis"),initialSearchContext={docvalue_fields:docValueFields},searchSource=await this.makeSearchSource(searchFilters,indexSettings.maxResultWindow,initialSearchContext);searchSource.setField("fieldsFromSource",searchFilters.fieldNames),0===sourceOnlyFields.length?searchSource.setField("source",!1):searchSource.setField("source",sourceOnlyFields),this._hasSort()&&searchSource.setField("sort",this._buildEsSort());const dsl=searchSource.getSearchRequestBody(),risonDsl=external_kbnSharedDeps_RisonNode_default.a.encode(dsl),mvtUrlServicePath=Object(kibana_services.n)().basePath.prepend(`/${constants.GIS_API_PATH}/${constants.MVT_GETTILE_API_PATH}/{z}/{x}/{y}.pbf`),geoField=await this._getGeoField(),urlTemplate=`${mvtUrlServicePath}?geometryFieldName=${this._descriptor.geoField}&index=${indexPattern.title}&requestBody=${risonDsl}&geoFieldType=${geoField.type}`;return{refreshTokenParamName:constants.MVT_TOKEN_PARAM_NAME,layerName:this.getLayerName(),minSourceZoom:this.getMinZoom(),maxSourceZoom:this.getMaxZoom(),urlTemplate:searchFilters.searchSessionId?urlTemplate+"&searchSessionId="+searchFilters.searchSessionId:urlTemplate}}}Object(source_registry.b)({ConstructorFunction:es_search_source_ESSearchSource,type:constants.SOURCE_TYPES.ES_SEARCH});var licensed_features=__webpack_require__(9);function createLayerDescriptor({indexPatternId:indexPatternId,geoFieldName:geoFieldName,geoFieldType:geoFieldType,query:query}){const scalingType=geoFieldType===constants.ES_GEO_FIELD_TYPE.GEO_POINT||geoFieldType===constants.ES_GEO_FIELD_TYPE.GEO_SHAPE&&Object(licensed_features.c)()?constants.SCALING_TYPES.CLUSTERS:constants.SCALING_TYPES.LIMIT,sourceDescriptor=es_search_source_ESSearchSource.createDescriptor({indexPatternId:indexPatternId,geoField:geoFieldName,scalingType:scalingType});return vector_layer.a.createDescriptor({sourceDescriptor:sourceDescriptor,query:query})}function es_search_source_create_source_editor_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function doesGeoFieldSupportGeoTileAgg(indexPattern,geoFieldName){return!!indexPattern&&Object(index_pattern_util.i)(indexPattern.fields.getByName(geoFieldName))}const RESET_INDEX_PATTERN_STATE={indexPattern:void 0,geoFields:void 0,geoFieldName:void 0,filterByMapBounds:!0,scalingType:constants.SCALING_TYPES.CLUSTERS};class es_search_source_create_source_editor_CreateSourceEditor extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),es_search_source_create_source_editor_defineProperty(this,"state",{...RESET_INDEX_PATTERN_STATE}),es_search_source_create_source_editor_defineProperty(this,"_onIndexPatternSelect",indexPattern=>{const geoFields=Object(index_pattern_util.b)(indexPattern.fields);this.setState({...RESET_INDEX_PATTERN_STATE,indexPattern:indexPattern,geoFields:geoFields},()=>{if(geoFields.length){const firstAggregatableGeoField=geoFields.find(geoField=>geoField.aggregatable),defaultGeoFieldName=firstAggregatableGeoField||geoFields[0];this._onGeoFieldSelect(defaultGeoFieldName.name)}})}),es_search_source_create_source_editor_defineProperty(this,"_onGeoFieldSelect",geoFieldName=>{const scalingType=this.state.scalingType!==constants.SCALING_TYPES.CLUSTERS||doesGeoFieldSupportGeoTileAgg(this.state.indexPattern,geoFieldName)?this.state.scalingType:constants.SCALING_TYPES.LIMIT;this.setState({geoFieldName:geoFieldName,scalingType:scalingType},this._previewLayer)}),es_search_source_create_source_editor_defineProperty(this,"_onScalingPropChange",({propName:propName,value:value})=>{this.setState({[propName]:value},this._previewLayer)}),es_search_source_create_source_editor_defineProperty(this,"_previewLayer",()=>{const{indexPattern:indexPattern,geoFieldName:geoFieldName,filterByMapBounds:filterByMapBounds,scalingType:scalingType}=this.state,sourceConfig=indexPattern&&geoFieldName?{indexPatternId:indexPattern.id,geoField:geoFieldName,filterByMapBounds:filterByMapBounds,scalingType:scalingType}:null;this.props.onSourceConfigChange(sourceConfig)})}_renderGeoSelect(){if(this.state.indexPattern)return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.geofieldLabel",{defaultMessage:"Geospatial field"})},external_kbnSharedDeps_React_default.a.createElement(single_field_select.a,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearch.selectLabel",{defaultMessage:"Select geo field"}),value:this.state.geoFieldName,onChange:this._onGeoFieldSelect,fields:this.state.geoFields}))}_renderScalingPanel(){return this.state.indexPattern&&this.state.geoFieldName?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(scaling_form_ScalingForm,{filterByMapBounds:this.state.filterByMapBounds,indexPatternId:this.state.indexPattern?this.state.indexPattern.id:"",onChange:this._onScalingPropChange,scalingType:this.state.scalingType,supportsClustering:doesGeoFieldSupportGeoTileAgg(this.state.indexPattern,this.state.geoFieldName),clusteringDisabledReason:this.state.indexPattern?Object(index_pattern_util.d)(this.state.indexPattern.fields.getByName(this.state.geoFieldName)):null})):null}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(geo_index_pattern_select_GeoIndexPatternSelect,{value:this.state.indexPattern?this.state.indexPattern.id:"",onChange:this._onIndexPatternSelect}),this._renderGeoSelect(),this._renderScalingPanel())}}var blended_vector_layer=__webpack_require__(201),tiled_vector_layer=__webpack_require__(144);function createDefaultLayerDescriptor(sourceConfig,mapColors){const sourceDescriptor=es_search_source_ESSearchSource.createDescriptor(sourceConfig);return sourceDescriptor.scalingType===constants.SCALING_TYPES.CLUSTERS?blended_vector_layer.a.createDescriptor({sourceDescriptor:sourceDescriptor},mapColors):sourceDescriptor.scalingType===constants.SCALING_TYPES.MVT?tiled_vector_layer.a.createDescriptor({sourceDescriptor:sourceDescriptor},mapColors):vector_layer.a.createDescriptor({sourceDescriptor:sourceDescriptor},mapColors)}const esDocumentsLayerWizardConfig={categories:[constants.LAYER_WIZARD_CATEGORY.ELASTICSEARCH],description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esSearchDescription",{defaultMessage:"Points, lines, and polygons from Elasticsearch"}),icon:()=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25",className:"mapLayersWizardIcon"},external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__background",d:"M30.501 14.511l1.602-12.954-1.388.236c-.744.254-1.768.38-2.703.45-.463.034-.899.055-1.258.07l-.093.005c-.311.014-.57.025-.72.042a1.895 1.895 0 00-.558.167 7.55 7.55 0 00-.47.238l-.057.031c-.356.19-.686.357-1.025.4l-1.307.338v5.864c0 .697.141 2.168 0 3.443l-.205 1.67h8.182zM20.607 3.249c-.657.038-1.248.281-2.06.398l-.703.103c-.583.087-1.16.172-1.692.238-.751.093-1.39.145-1.82.113-.593-.044-1.125.341-1.611.843-.453.467-.925 1.101-1.429 1.777l-.144.193c-1.132 1.517-2.452 3.218-4.22 4.102-.213.107-.346.312-.431.528a3.07 3.07 0 00-.173.78c-.064.586-.046 1.324.007 2.083.072 1.01.211 2.102.32 2.955.055.42.101.784.128 1.05.08.78-.128 1.77-.37 2.653-.088.319-.178.616-.258.882l-.086.285a9.67 9.67 0 00-.12.434 1.518 1.518 0 00-.053.334c0 .28.11.577.283.842a2.3 2.3 0 00.735.708l.067.04h.078c4.133-.069 10.221-.555 10.973-.639a.581.581 0 00.333-.17c.083-.08.158-.181.225-.293.134-.223.263-.524.387-.867.25-.69.495-1.6.721-2.519.161-.654.544-1.41.682-2.011l.784-2.796c.067-.379.199-1.13.272-1.704.147-1.149-.01-2.54.097-4 .107-1.458.172-2.917.147-4.052a10.13 10.13 0 00-.113-1.438 2.469 2.469 0 00-.131-.495c-.052-.128-.276-.357-.276-.357h-.55zM31.538 15.87s-1.17-.652-1.548-.643c-.758.02-1.298-.026-2.353 0H22.15l-2.864 8.915c.2.067 1.938.445 2.242.447.62.005 1.478-.08 2.393-.197.88-.112 1.824-.257 2.679-.389l.112-.017c.888-.136 1.664-.254 2.166-.304.348-.035.996-.025 1.858-.007l.128.002c.827.017 1.818.037 2.868.023 2.199-.028 4.695-.203 6.5-.887 1.42-.538 2.1-.87 2.513-1.339.414-.469.575-1.576.575-1.576s-2.906.867-4.807.784c-.927-.041-1.507.044-2.352-.341-1.428-.652-1.205-2.22-2.429-3.205-.771-.62-2.194-1.267-2.194-1.267z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__background",d:"M33.058 1.625S31.012 14.8 31.455 15.023c.787.393 2.012.664 3.137 1.67 1.23 1.1 1.172 2.5 2.318 3.239.835.538 6.525-.704 6.525-.704l.228-7.956s-.173-4.5-.89-5.215c-.715-.716-2.488-1.125-3-2.08-1.114-2.081-3.068-2.352-3.068-2.352h-3.647z"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"14.761",cy:"9.754",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"36.63",cy:"10.706",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"24.842",cy:"19.181",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"39.024",cy:"15.363",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"27.569",cy:"6.091",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"28.66",cy:"11",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"35.206",cy:"4.454",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"18.842",cy:"6.091",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"10.115",cy:"13.727",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"16.66",cy:"14.818",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"11.206",cy:"20.272",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"17.751",cy:"20.818",r:"1.091",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"30.842",cy:"20.818",r:"1.091",className:"mapLayersWizardIcon__highlight"})),renderWizard:({previewLayers:previewLayers,mapColors:mapColors})=>external_kbnSharedDeps_React_default.a.createElement(es_search_source_create_source_editor_CreateSourceEditor,{onSourceConfigChange:sourceConfig=>{previewLayers(sourceConfig?[createDefaultLayerDescriptor(sourceConfig,mapColors)]:[])}}),title:sourceTitle};function wizard_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}let UPLOAD_STEPS;var INDEXING_STAGE;!function(UPLOAD_STEPS){UPLOAD_STEPS.CONFIGURE_UPLOAD="CONFIGURE_UPLOAD",UPLOAD_STEPS.UPLOAD="UPLOAD",UPLOAD_STEPS.ADD_DOCUMENT_LAYER="ADD_DOCUMENT_LAYER"}(UPLOAD_STEPS||(UPLOAD_STEPS={})),function(INDEXING_STAGE){INDEXING_STAGE.READY="READY",INDEXING_STAGE.TRIGGERED="TRIGGERED",INDEXING_STAGE.SUCCESS="SUCCESS",INDEXING_STAGE.ERROR="ERROR"}(INDEXING_STAGE||(INDEXING_STAGE={}));class wizard_ClientFileCreateSourceEditor extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),wizard_defineProperty(this,"_isMounted",!1),wizard_defineProperty(this,"state",{indexingStage:null,fileUploadComponent:null}),wizard_defineProperty(this,"_addDocumentLayer",external_kbnSharedDeps_Lodash_default.a.once(results=>{const esSearchSourceConfig={indexPatternId:results.indexPatternId,geoField:results.geoFieldName,filterByMapBounds:results.docCount>constants.DEFAULT_MAX_RESULT_WINDOW,scalingType:results.geoFieldType===data_public_.ES_FIELD_TYPES.GEO_POINT?constants.SCALING_TYPES.CLUSTERS:constants.SCALING_TYPES.LIMIT};this.props.previewLayers([createDefaultLayerDescriptor(esSearchSourceConfig,this.props.mapColors)]),this.props.advanceToNextStep()})),wizard_defineProperty(this,"_onFileSelect",(geojsonFile,name,previewCoverage)=>{if(!this._isMounted)return;if(!geojsonFile)return void this.props.previewLayers([]);const areResultsTrimmed=previewCoverage<100,sourceDescriptor=geojson_file_source.a.createDescriptor({__featureCollection:geojsonFile,areResultsTrimmed:areResultsTrimmed,tooltipContent:areResultsTrimmed?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.fileUpload.trimmedResultsMsg",{defaultMessage:"Results limited to {numFeatures} features, {previewCoverage}% of file.",values:{numFeatures:geojsonFile.features.length,previewCoverage:previewCoverage}}):null,name:name}),layerDescriptor=vector_layer.a.createDescriptor({sourceDescriptor:sourceDescriptor},this.props.mapColors);this.props.previewLayers([layerDescriptor])}),wizard_defineProperty(this,"_onFileClear",()=>{this.props.previewLayers([])}),wizard_defineProperty(this,"_onUploadComplete",results=>{this._isMounted&&(this.setState({results:results}),this.setState({indexingStage:INDEXING_STAGE.SUCCESS}),this.props.advanceToNextStep(),this.props.enableNextBtn())}),wizard_defineProperty(this,"_onUploadError",()=>{this._isMounted&&(this.props.stopStepLoading(),this.props.disableNextBtn(),this.setState({indexingStage:INDEXING_STAGE.ERROR}))}),wizard_defineProperty(this,"_onIndexReady",indexReady=>{this._isMounted&&(this.setState({indexingStage:indexReady?INDEXING_STAGE.READY:null}),indexReady?this.props.enableNextBtn():this.props.disableNextBtn())})}componentDidMount(){this._isMounted=!0,this._loadFileUploadComponent()}componentWillUnmount(){this._isMounted=!1}componentDidUpdate(){if(this.props.currentStepId===UPLOAD_STEPS.UPLOAD&&this.state.indexingStage===INDEXING_STAGE.READY)return this.setState({indexingStage:INDEXING_STAGE.TRIGGERED}),void this.props.startStepLoading();this.props.isOnFinalStep&&this.state.indexingStage===INDEXING_STAGE.SUCCESS&&this.state.results&&this._addDocumentLayer(this.state.results)}async _loadFileUploadComponent(){const fileUploadComponent=await Object(kibana_services.m)().getFileUploadComponent();this._isMounted&&this.setState({fileUploadComponent:fileUploadComponent})}render(){if(!this.state.fileUploadComponent)return null;const FileUpload=this.state.fileUploadComponent;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(FileUpload,{isIndexingTriggered:this.state.indexingStage===INDEXING_STAGE.TRIGGERED,onFileSelect:this._onFileSelect,onFileClear:this._onFileClear,onIndexReady:this._onIndexReady,onUploadComplete:this._onUploadComplete,onUploadError:this._onUploadError}))}}const uploadLayerWizardConfig={categories:[],description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.fileUploadWizard.description",{defaultMessage:"Index GeoJSON data in Elasticsearch"}),disabledReason:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.fileUploadWizard.disabledDesc",{defaultMessage:'Unable to upload files, you are missing the Kibana privilege "Index Pattern Management".'}),getIsDisabled:async()=>!await Object(kibana_services.m)().hasImportPermission({checkCreateIndexPattern:!0,checkHasManagePipeline:!1}),icon:"importAction",prerequisiteSteps:[{id:UPLOAD_STEPS.CONFIGURE_UPLOAD,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.fileUploadWizard.configureUploadLabel",{defaultMessage:"Import file"})},{id:UPLOAD_STEPS.UPLOAD,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.fileUploadWizard.uploadLabel",{defaultMessage:"Importing file"})},{id:UPLOAD_STEPS.ADD_DOCUMENT_LAYER,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.fileUploadWizard.configureDocumentLayerLabel",{defaultMessage:"Add as document layer"})}],renderWizard:renderWizardArguments=>external_kbnSharedDeps_React_default.a.createElement(wizard_ClientFileCreateSourceEditor,renderWizardArguments),title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.fileUploadWizard.title",{defaultMessage:"Upload GeoJSON"})};var render_as_select=__webpack_require__(208);function es_geo_grid_source_create_source_editor_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function doesNotSupportGeoTileAgg(field){return!Object(index_pattern_util.i)(field)}class es_geo_grid_source_create_source_editor_CreateSourceEditor extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),es_geo_grid_source_create_source_editor_defineProperty(this,"state",{indexPattern:null,geoField:"",requestType:this.props.requestType}),es_geo_grid_source_create_source_editor_defineProperty(this,"onIndexPatternSelect",indexPattern=>{this.setState({indexPattern:indexPattern},()=>{const geoFieldsWithGeoTileAgg=Object(index_pattern_util.a)(indexPattern.fields);geoFieldsWithGeoTileAgg[0]&&this._onGeoFieldSelect(geoFieldsWithGeoTileAgg[0].name)})}),es_geo_grid_source_create_source_editor_defineProperty(this,"_onGeoFieldSelect",geoField=>{this.setState({geoField:geoField},this.previewLayer)}),es_geo_grid_source_create_source_editor_defineProperty(this,"_onRequestTypeSelect",newValue=>{this.setState({requestType:newValue},this.previewLayer)}),es_geo_grid_source_create_source_editor_defineProperty(this,"previewLayer",()=>{const{indexPattern:indexPattern,geoField:geoField,requestType:requestType}=this.state,sourceConfig=indexPattern&&geoField?{indexPatternId:indexPattern.id,geoField:geoField,requestType:requestType}:null;this.props.onSourceConfigChange(sourceConfig)})}_renderGeoSelect(){return this.state.indexPattern?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGeoGrid.geofieldLabel",{defaultMessage:"Geospatial field"})},external_kbnSharedDeps_React_default.a.createElement(single_field_select.a,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGeoGrid.geofieldPlaceholder",{defaultMessage:"Select geo field"}),value:this.state.geoField,onChange:this._onGeoFieldSelect,fields:this.state.indexPattern?Object(index_pattern_util.b)(this.state.indexPattern.fields):void 0,isFieldDisabled:doesNotSupportGeoTileAgg,getFieldDisabledReason:index_pattern_util.d})):null}_renderRenderAsSelect(){return this.state.indexPattern?external_kbnSharedDeps_React_default.a.createElement(render_as_select.a,{renderAs:this.state.requestType,onChange:this._onRequestTypeSelect}):null}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(geo_index_pattern_select_GeoIndexPatternSelect,{value:this.state.indexPattern?this.state.indexPattern.id:"",onChange:this.onIndexPatternSelect}),this._renderGeoSelect(),this._renderRenderAsSelect())}}var es_geo_grid_source=__webpack_require__(88),vector_style_defaults=__webpack_require__(47),vector_style=__webpack_require__(51),color_palettes=__webpack_require__(49);const clustersLayerWizardConfig={categories:[constants.LAYER_WIZARD_CATEGORY.ELASTICSEARCH],description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGridClustersDescription",{defaultMessage:"Geospatial data grouped in grids with metrics for each gridded cell"}),icon:()=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25",className:"mapLayersWizardIcon"},external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"17.867",cy:"5.032",r:"2.045",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"13.367",cy:"11.717",r:"2.045",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"14.594",cy:"19.901",r:"3.273",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"4.776",cy:"18.398",r:"2.662",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"6.619",cy:"5.649",r:"2.662",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M31.114 7.454h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#98A2B3",d:"M31.114 12.909h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#69707D",d:"M42.023 12.909h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#69707D",d:"M42.023 12.909h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#69707D",d:"M42.023 12.909h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#69707D",d:"M42.023 12.909h5.455v5.455h-5.455zm-5.454-5.455h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#69707D",d:"M36.569 7.454h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#69707D",d:"M36.569 7.454h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#69707D",d:"M36.569 7.454h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#98A2B3",d:"M42.023 7.454h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#98A2B3",d:"M36.569 1.999h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M36.569 12.909h5.455v5.455h-5.455z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#D3DAE6",d:"M36.569 18.363h5.455v5.455h-5.455z"})),renderWizard:({previewLayers:previewLayers})=>external_kbnSharedDeps_React_default.a.createElement(es_geo_grid_source_create_source_editor_CreateSourceEditor,{requestType:constants.RENDER_AS.POINT,onSourceConfigChange:sourceConfig=>{if(!sourceConfig)return void previewLayers([]);const defaultDynamicProperties=Object(vector_style_defaults.g)(),layerDescriptor=vector_layer.a.createDescriptor({sourceDescriptor:es_geo_grid_source.a.createDescriptor(sourceConfig),style:vector_style.a.createDescriptor({[constants.VECTOR_STYLES.FILL_COLOR]:{type:constants.STYLE_TYPE.DYNAMIC,options:{...defaultDynamicProperties[constants.VECTOR_STYLES.FILL_COLOR].options,field:{name:constants.COUNT_PROP_NAME,origin:constants.FIELD_ORIGIN.SOURCE},color:color_palettes.e[0].value,type:constants.COLOR_MAP_TYPE.ORDINAL}},[constants.VECTOR_STYLES.LINE_COLOR]:{type:constants.STYLE_TYPE.STATIC,options:{color:"#FFF"}},[constants.VECTOR_STYLES.LINE_WIDTH]:{type:constants.STYLE_TYPE.STATIC,options:{size:0}},[constants.VECTOR_STYLES.ICON_SIZE]:{type:constants.STYLE_TYPE.DYNAMIC,options:{...defaultDynamicProperties[constants.VECTOR_STYLES.ICON_SIZE].options,field:{name:constants.COUNT_PROP_NAME,origin:constants.FIELD_ORIGIN.SOURCE}}},[constants.VECTOR_STYLES.LABEL_TEXT]:{type:constants.STYLE_TYPE.DYNAMIC,options:{...defaultDynamicProperties[constants.VECTOR_STYLES.LABEL_TEXT].options,field:{name:constants.COUNT_PROP_NAME,origin:constants.FIELD_ORIGIN.SOURCE}}}})});previewLayers([layerDescriptor])}}),title:es_geo_grid_source.b};var heatmap_layer=__webpack_require__(105);const heatmapLayerWizardConfig={categories:[constants.LAYER_WIZARD_CATEGORY.ELASTICSEARCH],description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGridHeatmapDescription",{defaultMessage:"Geospatial data grouped in grids to show density"}),icon:()=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25",className:"mapLayersWizardIcon"},external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__background",fillRule:"evenodd",d:"M29.012 20.309a10.393 10.393 0 01-6.608 2.359c-1.134 0-2.225-.181-3.247-.515a8.322 8.322 0 11-6.005-14.747A10.433 10.433 0 0122.404 1.8c3.973 0 7.428 2.222 9.19 5.49a8.322 8.322 0 11-2.582 13.019z",clipRule:"evenodd",opacity:"0.8"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"35.741",cy:"14.778",r:"3.989",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",fillRule:"evenodd",d:"M20.021 16.957c-1.199-.773-2.221-.518-3.224.826-.896 1.2-2.587 1.272-3.963.482-1.332-.764-1.843-2.084-1.403-3.62.447-1.558 1.517-2.379 3.084-2.365 1.676.015 1.886-.16 2.496-1.863.8-2.235 2.274-3.8 4.704-4.07 2.266-.252 4.174.556 5.41 2.574 1.323 2.158 1.17 4.623-.348 6.462-1.65 1.998-3.962 2.574-6.756 1.574z",clipRule:"evenodd"})),renderWizard:({previewLayers:previewLayers})=>external_kbnSharedDeps_React_default.a.createElement(es_geo_grid_source_create_source_editor_CreateSourceEditor,{requestType:constants.RENDER_AS.HEATMAP,onSourceConfigChange:sourceConfig=>{if(!sourceConfig)return void previewLayers([]);const layerDescriptor=heatmap_layer.a.createDescriptor({sourceDescriptor:es_geo_grid_source.a.createDescriptor(sourceConfig)});previewLayers([layerDescriptor])}}),title:es_geo_grid_source.c};function GeoLineForm(props){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGeoLine.splitFieldLabel",{defaultMessage:"Entity"})},external_kbnSharedDeps_React_default.a.createElement(single_field_select.a,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGeoLine.splitFieldPlaceholder",{defaultMessage:"Select entity field"}),value:props.splitField,onChange:function(fieldName){void 0!==fieldName&&props.onSplitFieldChange(fieldName)},fields:Object(index_pattern_util.h)(props.indexPattern.fields),isClearable:!1})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGeoLine.sortFieldLabel",{defaultMessage:"Sort"})},external_kbnSharedDeps_React_default.a.createElement(single_field_select.a,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGeoLine.sortFieldPlaceholder",{defaultMessage:"Select sort field"}),value:props.sortField,onChange:function(fieldName){void 0!==fieldName&&props.onSortFieldChange(fieldName)},fields:props.indexPattern.fields.filter(field=>!(!!props.splitField&&field.name===props.splitField)&&field.sortable&&!data_public_.indexPatterns.isNestedField(field)&&["number","date"].includes(field.type)),isClearable:!1})))}function es_geo_line_source_create_source_editor_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class es_geo_line_source_create_source_editor_CreateSourceEditor extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),es_geo_line_source_create_source_editor_defineProperty(this,"state",{indexPattern:null,geoField:"",splitField:"",sortField:""}),es_geo_line_source_create_source_editor_defineProperty(this,"_onIndexPatternSelect",indexPattern=>{const pointFields=Object(index_pattern_util.c)(indexPattern.fields);this.setState({indexPattern:indexPattern,geoField:pointFields.length?pointFields[0].name:"",sortField:indexPattern.timeFieldName?indexPattern.timeFieldName:""},this.previewLayer)}),es_geo_line_source_create_source_editor_defineProperty(this,"_onGeoFieldSelect",geoField=>{void 0!==geoField&&this.setState({geoField:geoField},this.previewLayer)}),es_geo_line_source_create_source_editor_defineProperty(this,"_onSplitFieldSelect",newValue=>{this.setState({splitField:newValue},this.previewLayer)}),es_geo_line_source_create_source_editor_defineProperty(this,"_onSortFieldSelect",newValue=>{this.setState({sortField:newValue},this.previewLayer)}),es_geo_line_source_create_source_editor_defineProperty(this,"previewLayer",()=>{const{indexPattern:indexPattern,geoField:geoField,splitField:splitField,sortField:sortField}=this.state,sourceConfig=indexPattern&&indexPattern.id&&geoField&&splitField&&sortField?{indexPatternId:indexPattern.id,geoField:geoField,splitField:splitField,sortField:sortField}:null;this.props.onSourceConfigChange(sourceConfig)})}_renderGeoSelect(){return this.state.indexPattern?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGeoLine.geofieldLabel",{defaultMessage:"Geospatial field"})},external_kbnSharedDeps_React_default.a.createElement(single_field_select.a,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGeoLine.geofieldPlaceholder",{defaultMessage:"Select geo field"}),value:this.state.geoField,onChange:this._onGeoFieldSelect,fields:Object(index_pattern_util.c)(this.state.indexPattern.fields)})):null}_renderGeoLineForm(){return this.state.indexPattern&&this.state.geoField?external_kbnSharedDeps_React_default.a.createElement(GeoLineForm,{indexPattern:this.state.indexPattern,onSortFieldChange:this._onSortFieldSelect,onSplitFieldChange:this._onSplitFieldSelect,sortField:this.state.sortField,splitField:this.state.splitField}):null}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(geo_index_pattern_select_GeoIndexPatternSelect,{value:this.state.indexPattern&&this.state.indexPattern.id?this.state.indexPattern.id:"",onChange:this._onIndexPatternSelect,isGeoPointsOnly:!0}),this._renderGeoSelect(),this._renderGeoLineForm())}}var es_agg_source=__webpack_require__(87);const KEYS_TO_IGNORE=["key","path"];function es_geo_line_source_update_source_editor_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class es_geo_line_source_update_source_editor_UpdateSourceEditor extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),es_geo_line_source_update_source_editor_defineProperty(this,"_isMounted",!1),es_geo_line_source_update_source_editor_defineProperty(this,"state",{indexPattern:null,fields:[]}),es_geo_line_source_update_source_editor_defineProperty(this,"_onMetricsChange",metrics=>{this.props.onChange({propName:"metrics",value:metrics})}),es_geo_line_source_update_source_editor_defineProperty(this,"_onSplitFieldChange",fieldName=>{this.props.onChange({propName:"splitField",value:fieldName})}),es_geo_line_source_update_source_editor_defineProperty(this,"_onSortFieldChange",fieldName=>{this.props.onChange({propName:"sortField",value:fieldName})})}componentDidMount(){this._isMounted=!0,this._loadFields()}componentWillUnmount(){this._isMounted=!1}async _loadFields(){let indexPattern;try{indexPattern=await Object(kibana_services.p)().get(this.props.indexPatternId)}catch(err){return}this._isMounted&&this.setState({indexPattern:indexPattern,fields:indexPattern.fields.filter(field=>!data_public_.indexPatterns.isNestedField(field))})}render(){return this.state.indexPattern?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h6",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.source.esGeoLine.metricsLabel",defaultMessage:"Track metrics"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(metrics_editor.a,{allowMultipleMetrics:!0,fields:this.state.fields,metrics:this.props.metrics,onChange:this._onMetricsChange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h6",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.source.esGeoLine.trackSettingsLabel",defaultMessage:"Tracks"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(GeoLineForm,{indexPattern:this.state.indexPattern,onSortFieldChange:this._onSortFieldChange,onSplitFieldChange:this._onSplitFieldChange,sortField:this.props.sortField,splitField:this.props.splitField})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"})):null}}var tooltip_property=__webpack_require__(69);const geoLineTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGeoLineTitle",{defaultMessage:"Tracks"}),REQUIRES_GOLD_LICENSE_MSG=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGeoLineDisabledReason",{defaultMessage:"{title} requires a Gold license.",values:{title:geoLineTitle}});class es_geo_line_source_ESGeoLineSource extends es_agg_source.a{static createDescriptor(descriptor){const normalizedDescriptor=es_agg_source.a.createDescriptor(descriptor);if(!Object(valid_string_config.a)(normalizedDescriptor.geoField))throw new Error("Cannot create an ESGeoLineSource without a geoField");if(!Object(valid_string_config.a)(normalizedDescriptor.splitField))throw new Error("Cannot create an ESGeoLineSource without a splitField");if(!Object(valid_string_config.a)(normalizedDescriptor.sortField))throw new Error("Cannot create an ESGeoLineSource without a sortField");return{...normalizedDescriptor,type:constants.SOURCE_TYPES.ES_GEO_LINE,geoField:normalizedDescriptor.geoField,splitField:normalizedDescriptor.splitField,sortField:normalizedDescriptor.sortField}}constructor(descriptor,inspectorAdapters){const sourceDescriptor=es_geo_line_source_ESGeoLineSource.createDescriptor(descriptor);var obj,key,value;super(sourceDescriptor,inspectorAdapters,!0),value=void 0,(key="_descriptor")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this._descriptor=sourceDescriptor}renderSourceSettingsEditor({onChange:onChange}){return external_kbnSharedDeps_React_default.a.createElement(es_geo_line_source_update_source_editor_UpdateSourceEditor,{indexPatternId:this.getIndexPatternId(),onChange:onChange,metrics:this._descriptor.metrics,splitField:this._descriptor.splitField,sortField:this._descriptor.sortField})}getSyncMeta(){return{splitField:this._descriptor.splitField,sortField:this._descriptor.sortField}}async getImmutableProperties(){let indexPatternTitle=this.getIndexPatternId();try{indexPatternTitle=(await this.getIndexPattern()).title}catch(error){}return[{label:Object(i18n_getters.b)(),value:geoLineTitle},{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGeoLine.indexPatternLabel",{defaultMessage:"Index pattern"}),value:indexPatternTitle},{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGeoLine.geospatialFieldLabel",{defaultMessage:"Geospatial field"}),value:this._descriptor.geoField}]}_createSplitField(){return new es_doc_field.a({fieldName:this._descriptor.splitField,source:this,origin:constants.FIELD_ORIGIN.SOURCE,canReadFromGeoJson:!0})}getFieldNames(){return[...this.getMetricFields().map(esAggMetricField=>esAggMetricField.getName()),this._descriptor.splitField,this._descriptor.sortField]}async getFields(){return[...this.getMetricFields(),this._createSplitField()]}getFieldByName(name){return name===this._descriptor.splitField?this._createSplitField():this.getMetricFieldForName(name)}isGeoGridPrecisionAware(){return!1}showJoinEditor(){return!1}async getGeoJsonWithMeta(layerName,searchFilters,registerCancelCallback,isRequestStillActive){if(!Object(licensed_features.c)())throw new Error(REQUIRES_GOLD_LICENSE_MSG);const indexPattern=await this.getIndexPattern(),entitySearchSource=await this.makeSearchSource(searchFilters,0);entitySearchSource.setField("trackTotalHits",!1);const splitField=Object(elasticsearch_util.l)(indexPattern,this._descriptor.splitField),termsAgg={size:250};entitySearchSource.setField("aggs",{totalEntities:{cardinality:Object(elasticsearch_util.a)({precision_threshold:1},splitField)},entitySplit:{terms:Object(elasticsearch_util.a)(termsAgg,splitField)}});const entityResp=await this._runEsQuery({requestId:this.getId()+"_entities",requestName:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGeoLine.entityRequestName",{defaultMessage:"{layerName} entities",values:{layerName:layerName}}),searchSource:entitySearchSource,registerCancelCallback:registerCancelCallback,requestDescription:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGeoLine.entityRequestDescription",{defaultMessage:"Elasticsearch terms request to fetch entities within map buffer."}),searchSessionId:searchFilters.searchSessionId}),entityBuckets=external_kbnSharedDeps_Lodash_default.a.get(entityResp,"aggregations.entitySplit.buckets",[]),totalEntities=external_kbnSharedDeps_Lodash_default.a.get(entityResp,"aggregations.totalEntities.value",0),areEntitiesTrimmed=entityBuckets.length>=250;if(0===totalEntities)return{data:constants.EMPTY_FEATURE_COLLECTION,meta:{areResultsTrimmed:!1,areEntitiesTrimmed:!1,entityCount:0,numTrimmedTracks:0,totalEntities:0}};const entityFilters={};for(let i=0;i<entityBuckets.length;i++)entityFilters[entityBuckets[i].key]=data_public_.esFilters.buildPhraseFilter(splitField,entityBuckets[i].key,indexPattern).query;const tracksSearchFilters={...searchFilters};delete tracksSearchFilters.buffer;const tracksSearchSource=await this.makeSearchSource(tracksSearchFilters,0);tracksSearchSource.setField("trackTotalHits",!1),tracksSearchSource.setField("aggs",{tracks:{filters:{filters:entityFilters},aggs:{path:{geo_line:{point:{field:this._descriptor.geoField},sort:{field:this._descriptor.sortField}}},...this.getValueAggsDsl(indexPattern)}}});const tracksResp=await this._runEsQuery({requestId:this.getId()+"_tracks",requestName:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGeoLine.trackRequestName",{defaultMessage:"{layerName} tracks",values:{layerName:layerName}}),searchSource:tracksSearchSource,registerCancelCallback:registerCancelCallback,requestDescription:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGeoLine.trackRequestDescription",{defaultMessage:"Elasticsearch geo_line request to fetch tracks for entities. Tracks are not filtered by map buffer."}),searchSessionId:searchFilters.searchSessionId}),{featureCollection:featureCollection,numTrimmedTracks:numTrimmedTracks}=function(esResponse,entitySplitFieldName){const features=[];let numTrimmedTracks=0;const buckets=external_kbnSharedDeps_Lodash_default.a.get(esResponse,"aggregations.tracks.buckets",{}),entityKeys=Object.keys(buckets);for(let i=0;i<entityKeys.length;i++){const entityKey=entityKeys[i],bucket=buckets[entityKey],feature=bucket.path;feature.properties.complete||numTrimmedTracks++,feature.id=entityKey,feature.properties={[entitySplitFieldName]:entityKey,...feature.properties,...Object(elasticsearch_util.j)(bucket,KEYS_TO_IGNORE)},features.push(feature)}return{featureCollection:{type:"FeatureCollection",features:features},numTrimmedTracks:numTrimmedTracks}}(tracksResp,this._descriptor.splitField);return{data:featureCollection,meta:{areResultsTrimmed:areEntitiesTrimmed,areEntitiesTrimmed:areEntitiesTrimmed,entityCount:entityBuckets.length,numTrimmedTracks:numTrimmedTracks,totalEntities:totalEntities}}}getSourceTooltipContent(sourceDataRequest){const featureCollection=sourceDataRequest?sourceDataRequest.getData():null,meta=sourceDataRequest?sourceDataRequest.getMeta():null;if(!featureCollection||!meta)return{tooltipContent:null,areResultsTrimmed:!1};const entitiesFoundMsg=meta.areEntitiesTrimmed?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.esGeoLine.areEntitiesTrimmedMsg",{defaultMessage:"Results limited to first {entityCount} tracks of ~{totalEntities}.",values:{entityCount:meta.entityCount,totalEntities:meta.totalEntities}}):external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.esGeoLine.tracksCountMsg",{defaultMessage:"Found {entityCount} tracks.",values:{entityCount:meta.entityCount}}),tracksTrimmedMsg=meta.numTrimmedTracks>0?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.esGeoLine.tracksTrimmedMsg",{defaultMessage:"{numTrimmedTracks} of {entityCount} tracks are incomplete.",values:{entityCount:meta.entityCount,numTrimmedTracks:meta.numTrimmedTracks}}):void 0;return{tooltipContent:tracksTrimmedMsg?`${entitiesFoundMsg} ${tracksTrimmedMsg}`:entitiesFoundMsg,areResultsTrimmed:meta.areEntitiesTrimmed||meta.numTrimmedTracks>0}}isFilterByMapBounds(){return!0}canFormatFeatureProperties(){return!0}async getSupportedShapeTypes(){return[constants.VECTOR_SHAPE_TYPE.LINE]}async getTooltipProperties(properties){const tooltipProperties=await super.getTooltipProperties(properties);return tooltipProperties.push(new tooltip_property.a("isTrackComplete",external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGeoLine.isTrackCompleteLabel",{defaultMessage:"track is complete"}),properties.complete.toString())),tooltipProperties}async getLicensedFeatures(){return[licensed_features.a.GEO_LINE_AGG]}}Object(source_registry.b)({ConstructorFunction:es_geo_line_source_ESGeoLineSource,type:constants.SOURCE_TYPES.ES_GEO_LINE});const geoLineLayerWizardConfig={categories:[constants.LAYER_WIZARD_CATEGORY.ELASTICSEARCH],description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.esGeoLineDescription",{defaultMessage:"Create lines from points"}),disabledReason:REQUIRES_GOLD_LICENSE_MSG,icon:()=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25"},external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M12.733 12.136h32.283v.545H12.935L4.452 19.98l-.356-.413 8.637-7.43z"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"24.939",cy:"12.409",r:"2.182",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"35.849",cy:"12.409",r:"2.182",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"45.561",cy:"12.409",r:"3.273",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"5.197",cy:"18.954",r:"2.182",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"13.485",cy:"12.409",r:"2.182",className:"mapLayersWizardIcon__highlight"})),getIsDisabled:()=>!Object(licensed_features.c)(),renderWizard:({previewLayers:previewLayers})=>external_kbnSharedDeps_React_default.a.createElement(es_geo_line_source_create_source_editor_CreateSourceEditor,{onSourceConfigChange:sourceConfig=>{if(!sourceConfig)return void previewLayers([]);const layerDescriptor=vector_layer.a.createDescriptor({sourceDescriptor:es_geo_line_source_ESGeoLineSource.createDescriptor(sourceConfig),style:vector_style.a.createDescriptor({[constants.VECTOR_STYLES.LINE_WIDTH]:{type:constants.STYLE_TYPE.STATIC,options:{size:2}}})});layerDescriptor.alpha=1,previewLayers([layerDescriptor])}}),title:geoLineTitle};var _turf_bbox=__webpack_require__(91),bbox_default=__webpack_require__.n(_turf_bbox),helpers=__webpack_require__(46);function es_pew_pew_source_update_source_editor_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class es_pew_pew_source_update_source_editor_UpdateSourceEditor extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),es_pew_pew_source_update_source_editor_defineProperty(this,"state",{fields:null}),es_pew_pew_source_update_source_editor_defineProperty(this,"_onMetricsChange",metrics=>{this.props.onChange({propName:"metrics",value:metrics})})}componentDidMount(){this._isMounted=!0,this._loadFields()}componentWillUnmount(){this._isMounted=!1}async _loadFields(){let indexPattern;try{indexPattern=await Object(kibana_services.p)().get(this.props.indexPatternId)}catch(err){return void(this._isMounted&&this.setState({loadError:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.pewPew.noIndexPatternErrorMessage",{defaultMessage:"Unable to find Index pattern {id}",values:{id:this.props.indexPatternId}})}))}this._isMounted&&this.setState({fields:indexPattern.fields.filter(field=>!data_public_.indexPatterns.isNestedField(field))})}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h6",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.source.pewPew.metricsLabel",defaultMessage:"Metrics"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(metrics_editor.a,{allowMultipleMetrics:!0,fields:this.state.fields,metrics:this.props.metrics,onChange:this._onMetricsChange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}))}}const PEW_PEW_BUCKET_KEYS_TO_IGNORE=["key","sourceCentroid"];function parsePointFromKey(key){const split=key.split(","),lat=parseFloat(split[0]);return[parseFloat(split[1]),lat]}var data_request=__webpack_require__(61);const es_pew_pew_source_sourceTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.pewPewTitle",{defaultMessage:"Point to point"});class es_pew_pew_source_ESPewPewSource extends es_agg_source.a{static createDescriptor(descriptor){return{...es_agg_source.a.createDescriptor(descriptor),type:es_pew_pew_source_ESPewPewSource.type,indexPatternId:descriptor.indexPatternId,sourceGeoField:descriptor.sourceGeoField,destGeoField:descriptor.destGeoField}}renderSourceSettingsEditor({onChange:onChange}){return external_kbnSharedDeps_React_default.a.createElement(es_pew_pew_source_update_source_editor_UpdateSourceEditor,{indexPatternId:this.getIndexPatternId(),onChange:onChange,metrics:this._descriptor.metrics,applyGlobalQuery:this._descriptor.applyGlobalQuery})}isFilterByMapBounds(){return!0}showJoinEditor(){return!1}isGeoGridPrecisionAware(){return!0}async getSupportedShapeTypes(){return[constants.VECTOR_SHAPE_TYPE.LINE]}async getImmutableProperties(){let indexPatternTitle=this.getIndexPatternId();try{indexPatternTitle=(await this.getIndexPattern()).title}catch(error){}return[{label:Object(i18n_getters.b)(),value:es_pew_pew_source_sourceTitle},{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.pewPew.indexPatternLabel",{defaultMessage:"Index pattern"}),value:indexPatternTitle},{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.pewPew.sourceGeoFieldLabel",{defaultMessage:"Source"}),value:this._descriptor.sourceGeoField},{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.pewPew.destGeoFieldLabel",{defaultMessage:"Destination"}),value:this._descriptor.destGeoField}]}getGeoGridPrecision(zoom){const targetGeotileLevel=Math.ceil(zoom)+2;return Math.min(targetGeotileLevel,29)}async getGeoJsonWithMeta(layerName,searchFilters,registerCancelCallback){const indexPattern=await this.getIndexPattern(),searchSource=await this.makeSearchSource(searchFilters,0);searchSource.setField("trackTotalHits",!1),searchSource.setField("aggs",{destSplit:{terms:{script:{source:`doc['${this._descriptor.destGeoField}'].value.toString()`,lang:"painless"},order:{_count:"desc"},size:100},aggs:{sourceGrid:{geotile_grid:{field:this._descriptor.sourceGeoField,precision:searchFilters.geogridPrecision,size:500},aggs:{sourceCentroid:{geo_centroid:{field:this._descriptor.sourceGeoField}},...this.getValueAggsDsl(indexPattern)}}}}});const esResponse=await this._runEsQuery({requestId:this.getId(),requestName:layerName,searchSource:searchSource,registerCancelCallback:registerCancelCallback,requestDescription:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.pewPew.inspectorDescription",{defaultMessage:"Source-destination connections request"}),searchSessionId:searchFilters.searchSessionId}),{featureCollection:featureCollection}=function(esResponse){const lineFeatures=[],destBuckets=external_kbnSharedDeps_Lodash_default.a.get(esResponse,"aggregations.destSplit.buckets",[]);for(let i=0;i<destBuckets.length;i++){const destBucket=destBuckets[i],dest=parsePointFromKey(destBucket.key),sourceBuckets=external_kbnSharedDeps_Lodash_default.a.get(destBucket,"sourceGrid.buckets",[]);for(let j=0;j<sourceBuckets.length;j++){const sourceBucket=sourceBuckets[j],sourceCentroid=sourceBucket.sourceCentroid;lineFeatures.push({type:"Feature",geometry:{type:"LineString",coordinates:[[sourceCentroid.location.lon,sourceCentroid.location.lat],dest]},id:`${dest.join()},${sourceBucket.key}`,properties:Object(elasticsearch_util.j)(sourceBucket,PEW_PEW_BUCKET_KEYS_TO_IGNORE)})}}return{featureCollection:{type:"FeatureCollection",features:lineFeatures}}}(esResponse);return{data:featureCollection,meta:{areResultsTrimmed:!1}}}getGeoFieldName(){return this._descriptor.destGeoField}async getBoundsForFilters(boundsFilters,registerCancelCallback){const searchSource=await this.makeSearchSource(boundsFilters,0);searchSource.setField("trackTotalHits",!1),searchSource.setField("aggs",{destFitToBounds:{geo_bounds:{field:this._descriptor.destGeoField}},sourceFitToBounds:{geo_bounds:{field:this._descriptor.sourceGeoField}}});const corners=[];try{const abortController=new AbortController;registerCancelCallback(()=>abortController.abort());const esResp=await searchSource.fetch({abortSignal:abortController.signal,legacyHitsTotal:!1});esResp.aggregations.destFitToBounds.bounds&&(corners.push([esResp.aggregations.destFitToBounds.bounds.top_left.lon,esResp.aggregations.destFitToBounds.bounds.top_left.lat]),corners.push([esResp.aggregations.destFitToBounds.bounds.bottom_right.lon,esResp.aggregations.destFitToBounds.bounds.bottom_right.lat])),esResp.aggregations.sourceFitToBounds.bounds&&(corners.push([esResp.aggregations.sourceFitToBounds.bounds.top_left.lon,esResp.aggregations.sourceFitToBounds.bounds.top_left.lat]),corners.push([esResp.aggregations.sourceFitToBounds.bounds.bottom_right.lon,esResp.aggregations.sourceFitToBounds.bounds.bottom_right.lat]))}catch(error){if("AbortError"===error.name)throw new data_request.b;return null}return 0===corners.length?null:Object(elasticsearch_util.r)(bbox_default()(Object(helpers.multiPoint)(corners)))}canFormatFeatureProperties(){return!0}}var obj,key,value;function es_pew_pew_source_create_source_editor_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}obj=es_pew_pew_source_ESPewPewSource,key="type",value=constants.SOURCE_TYPES.ES_PEW_PEW,key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,Object(source_registry.b)({ConstructorFunction:es_pew_pew_source_ESPewPewSource,type:constants.SOURCE_TYPES.ES_PEW_PEW});class es_pew_pew_source_create_source_editor_CreateSourceEditor extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),es_pew_pew_source_create_source_editor_defineProperty(this,"state",{isLoadingIndexPattern:!1,indexPattern:void 0,indexPatternId:void 0,sourceGeoField:void 0,destGeoField:void 0,indexPatternHasMultipleGeoFields:!1}),es_pew_pew_source_create_source_editor_defineProperty(this,"onIndexPatternSelect",indexPatternId=>{this.setState({indexPatternId:indexPatternId},this.loadIndexPattern.bind(null,indexPatternId))}),es_pew_pew_source_create_source_editor_defineProperty(this,"loadIndexPattern",indexPatternId=>{this.setState({isLoadingIndexPattern:!0,indexPattern:void 0,sourceGeoField:void 0,destGeoField:void 0,indexPatternHasMultipleGeoFields:!1},this.debouncedLoad.bind(null,indexPatternId))}),es_pew_pew_source_create_source_editor_defineProperty(this,"debouncedLoad",external_kbnSharedDeps_Lodash_default.a.debounce(async indexPatternId=>{if(!indexPatternId||0===indexPatternId.length)return;let indexPattern;try{indexPattern=await Object(kibana_services.p)().get(indexPatternId)}catch(err){return}if(!this._isMounted)return;if(this.state.indexPatternId!==indexPatternId)return;const geoFields=Object(index_pattern_util.a)(indexPattern.fields);this.setState({isLoadingIndexPattern:!1,indexPattern:indexPattern,indexPatternHasMultipleGeoFields:geoFields.length>=2})},300)),es_pew_pew_source_create_source_editor_defineProperty(this,"_onSourceGeoSelect",sourceGeoField=>{this.setState({sourceGeoField:sourceGeoField},this.previewLayer)}),es_pew_pew_source_create_source_editor_defineProperty(this,"_onDestGeoSelect",destGeoField=>{this.setState({destGeoField:destGeoField},this.previewLayer)}),es_pew_pew_source_create_source_editor_defineProperty(this,"previewLayer",()=>{const{indexPatternId:indexPatternId,sourceGeoField:sourceGeoField,destGeoField:destGeoField}=this.state,sourceConfig=indexPatternId&&sourceGeoField&&destGeoField?{indexPatternId:indexPatternId,sourceGeoField:sourceGeoField,destGeoField:destGeoField}:null;this.props.onSourceConfigChange(sourceConfig)})}componentWillUnmount(){this._isMounted=!1}componentDidMount(){this._isMounted=!0}_renderGeoSelects(){if(!this.state.indexPattern||!this.state.indexPatternHasMultipleGeoFields)return null;const fields=this.state.indexPattern?Object(index_pattern_util.a)(this.state.indexPattern.fields):void 0;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.pewPew.sourceGeoFieldLabel",{defaultMessage:"Source"})},external_kbnSharedDeps_React_default.a.createElement(single_field_select.a,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.pewPew.sourceGeoFieldPlaceholder",{defaultMessage:"Select source geo field"}),value:this.state.sourceGeoField,onChange:this._onSourceGeoSelect,fields:fields})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.pewPew.destGeoFieldLabel",{defaultMessage:"Destination"})},external_kbnSharedDeps_React_default.a.createElement(single_field_select.a,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.pewPew.destGeoFieldPlaceholder",{defaultMessage:"Select destination geo field"}),value:this.state.destGeoField,onChange:this._onDestGeoSelect,fields:fields})))}_renderIndexPatternSelect(){const IndexPatternSelect=Object(kibana_services.o)();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.pewPew.indexPatternLabel",{defaultMessage:"Index pattern"})},external_kbnSharedDeps_React_default.a.createElement(IndexPatternSelect,{indexPatternId:this.state.indexPatternId,onChange:this.onIndexPatternSelect,placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.pewPew.indexPatternPlaceholder",{defaultMessage:"Select index pattern"}),fieldTypes:[constants.ES_GEO_FIELD_TYPE.GEO_POINT]}))}render(){let callout;return this.state.indexPattern&&!this.state.indexPatternHasMultipleGeoFields&&(callout=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{color:"warning"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.source.pewPew.noSourceAndDestDetails",defaultMessage:"Selected index pattern does not contain source and destination fields."})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,callout,this._renderIndexPatternSelect(),this._renderGeoSelects())}}const point2PointLayerWizardConfig={categories:[constants.LAYER_WIZARD_CATEGORY.ELASTICSEARCH],description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.pewPewDescription",{defaultMessage:"Aggregated data paths between the source and destination"}),icon:()=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25",className:"mapLayersWizardIcon"},external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"38.311",cy:"12.889",r:"1.636",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"10.85",cy:"15.12",r:"1.636",className:"mapLayersWizardIcon__highlight",transform:"rotate(-27.34 10.85 15.12)"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M10.746 14.918l12.499-3.892.162.521-12.499 3.892z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M10.746 14.918l12.499-3.892.162.521-12.499 3.892z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M10.746 14.918l12.499-3.892.162.521-12.499 3.892z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M10.746 14.918l12.499-3.892.162.521-12.499 3.892z"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"6.805",cy:"4.603",r:"1.636",className:"mapLayersWizardIcon__highlight",transform:"rotate(-23.178 6.805 4.603)"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M6.27 4.194l17.235 5.888-.176.516L6.094 4.71z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M6.27 4.194l17.235 5.888-.176.516L6.094 4.71z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M6.27 4.194l17.235 5.888-.176.516L6.094 4.71z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M6.27 4.194l17.235 5.888-.176.516L6.094 4.71z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M22.8 9.673l16.113 2.854-.095.538-16.113-2.855z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M22.8 9.673l16.113 2.854-.095.538-16.113-2.855z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M22.8 9.673l16.113 2.854-.095.538-16.113-2.855z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M22.8 9.673l16.113 2.854-.095.538-16.113-2.855z"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"19.542",cy:"22.262",r:"1.636",className:"mapLayersWizardIcon__highlight",transform:"rotate(8.84 19.542 22.262)"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M19.28 22.43l4.937-12.124.505.206-4.937 12.124z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M19.28 22.43l4.937-12.124.505.206-4.937 12.124z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M19.28 22.43l4.937-12.124.505.206-4.937 12.124z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M19.28 22.43l4.937-12.124.505.206-4.937 12.124z"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"42.691",cy:"3.795",r:"1.636",className:"mapLayersWizardIcon__highlight",transform:"rotate(-6.89 42.691 3.795)"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M42.715 3.993l-18.251 7.243-.202-.507 18.252-7.243z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M42.715 3.993l-18.251 7.243-.202-.507 18.252-7.243z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M42.715 3.993l-18.251 7.243-.202-.507 18.252-7.243z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M42.715 3.993l-18.251 7.243-.202-.507 18.252-7.243z"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"24.578",cy:"11.109",r:"2.727",className:"mapLayersWizardIcon__highlight"})),renderWizard:({previewLayers:previewLayers})=>external_kbnSharedDeps_React_default.a.createElement(es_pew_pew_source_create_source_editor_CreateSourceEditor,{onSourceConfigChange:sourceConfig=>{if(!sourceConfig)return void previewLayers([]);const defaultDynamicProperties=Object(vector_style_defaults.g)(),layerDescriptor=vector_layer.a.createDescriptor({sourceDescriptor:es_pew_pew_source_ESPewPewSource.createDescriptor(sourceConfig),style:vector_style.a.createDescriptor({[constants.VECTOR_STYLES.LINE_COLOR]:{type:constants.STYLE_TYPE.DYNAMIC,options:{...defaultDynamicProperties[constants.VECTOR_STYLES.LINE_COLOR].options,field:{name:constants.COUNT_PROP_NAME,origin:constants.FIELD_ORIGIN.SOURCE},color:color_palettes.e[0].value}},[constants.VECTOR_STYLES.LINE_WIDTH]:{type:constants.STYLE_TYPE.DYNAMIC,options:{...defaultDynamicProperties[constants.VECTOR_STYLES.LINE_WIDTH].options,field:{name:constants.COUNT_PROP_NAME,origin:constants.FIELD_ORIGIN.SOURCE}}}})});previewLayers([layerDescriptor])}}),title:es_pew_pew_source_sourceTitle};function getEmsUnavailableMessage(){const emsSettings=Object(kibana_services.i)();return emsSettings.isIncludeElasticMapsService()?emsSettings.isEMSUrlSet()?emsSettings.hasOnPremLicense()?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.ems.noOnPremConnectionDescription",{defaultMessage:"Cannot connect to {host}.",values:{host:emsSettings.getEMSRoot()}}):external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.ems.noOnPremLicenseDescription",{defaultMessage:"An enterprise license is required to connect to local Elastic Maps Server installations."}):external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.ems.noAccessDescription",{defaultMessage:"Kibana is unable to access Elastic Maps Service. Contact your system administrator."}):external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.ems.disabledDescription",{defaultMessage:'Access to Elastic Maps Service has been disabled. Ask your system administrator to set "map.includeElasticMapsService" in kibana.yml.'})}function ems_file_select_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class ems_file_select_EMSFileSelect extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),ems_file_select_defineProperty(this,"_isMounted",!1),ems_file_select_defineProperty(this,"state",{hasLoadedOptions:!1,emsFileOptions:[]}),ems_file_select_defineProperty(this,"_loadFileOptions",async()=>{const options=(await Object(util.b)()).map(fileLayer=>({value:fileLayer.getId(),label:fileLayer.getDisplayName()}));this._isMounted&&this.setState({hasLoadedOptions:!0,emsFileOptions:options})}),ems_file_select_defineProperty(this,"_onChange",selectedOptions=>{0!==selectedOptions.length&&this.props.onChange(selectedOptions[0].value)})}componentWillUnmount(){this._isMounted=!1}componentDidMount(){this._isMounted=!0,this._loadFileOptions()}_renderSelect(){if(!this.state.hasLoadedOptions)return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{isLoading:!0});const selectedOption=this.state.emsFileOptions.find(option=>option.value===this.props.value);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiComboBox,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.emsFileSelect.selectPlaceholder",{defaultMessage:"Select EMS layer"}),options:this.state.emsFileOptions,selectedOptions:selectedOption?[selectedOption]:[],onChange:this._onChange,isClearable:!1,singleSelection:!0,isDisabled:0===this.state.emsFileOptions.length,"data-test-subj":"emsVectorComboBox"})}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.emsFileSelect.selectLabel",{defaultMessage:"Layer"}),helpText:0===this.state.emsFileOptions.length?getEmsUnavailableMessage():null},this._renderSelect())}}function ems_file_source_create_source_editor_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class create_source_editor_EMSFileCreateSourceEditor extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),ems_file_source_create_source_editor_defineProperty(this,"state",{emsFileId:null}),ems_file_source_create_source_editor_defineProperty(this,"_onChange",emsFileId=>{this.setState({emsFileId:emsFileId}),this.props.onSourceConfigChange({id:emsFileId})})}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(ems_file_select_EMSFileSelect,{value:this.state.emsFileId,onChange:this._onChange}))}}var vector_source=__webpack_require__(89);function ems_file_source_update_source_editor_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class ems_file_source_update_source_editor_UpdateSourceEditor extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),ems_file_source_update_source_editor_defineProperty(this,"_isMounted",!1),ems_file_source_update_source_editor_defineProperty(this,"state",{fields:null}),ems_file_source_update_source_editor_defineProperty(this,"_onTooltipPropertiesSelect",selectedFieldNames=>{this.props.onChange({propName:"tooltipProperties",value:selectedFieldNames})})}componentDidMount(){this._isMounted=!0,this.loadFields()}componentWillUnmount(){this._isMounted=!1}async loadFields(){let fields=[];try{const targetEmsFile=(await Object(util.b)()).find(emsFile=>emsFile.getId()===this.props.layerId);targetEmsFile&&(fields=targetEmsFile.getFieldsInLanguage().map(field=>this.props.source.createField({fieldName:field.name})))}catch(e){}this._isMounted&&this.setState({fields:fields})}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.emsSource.tooltipsTitle",defaultMessage:"Tooltip fields"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(tooltip_selector_TooltipSelector,{tooltipFields:this.props.tooltipFields,onChange:this._onTooltipPropertiesSelect,fields:this.state.fields})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}))}}var fields_field=__webpack_require__(85);class ems_file_field_EMSFileField extends fields_field.a{constructor({fieldName:fieldName,source:source,origin:origin}){super({fieldName:fieldName,origin:origin}),function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(this,"_source",void 0),this._source=source}getSource(){return this._source}async getLabel(){return this._source.getEmsFieldLabel(this.getName())}}function ems_file_source_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function getErrorInfo(fileId){return external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.emsFile.unableToFindFileIdErrorMessage",{defaultMessage:"Unable to find EMS vector shapes for id: {id}. {info}",values:{id:fileId,info:getEmsUnavailableMessage()}})}function getSourceTitle(){return Object(kibana_services.i)().isEMSUrlSet()?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.emsOnPremFileTitle",{defaultMessage:"Elastic Maps Server Boundaries"}):external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.emsFileTitle",{defaultMessage:"EMS Boundaries"})}class ems_file_source_EMSFileSource extends vector_source.a{static createDescriptor({id:id,tooltipProperties:tooltipProperties=[]}){return{type:constants.SOURCE_TYPES.EMS_FILE,id:id,tooltipProperties:tooltipProperties}}constructor(descriptor,inspectorAdapters){super(ems_file_source_EMSFileSource.createDescriptor(descriptor),inspectorAdapters),ems_file_source_defineProperty(this,"_tooltipFields",void 0),ems_file_source_defineProperty(this,"_descriptor",void 0),this._descriptor=ems_file_source_EMSFileSource.createDescriptor(descriptor),this._tooltipFields=this._descriptor.tooltipProperties.map(propertyKey=>this.createField({fieldName:propertyKey}))}createField({fieldName:fieldName}){return new ems_file_field_EMSFileField({fieldName:fieldName,source:this,origin:constants.FIELD_ORIGIN.SOURCE})}renderSourceSettingsEditor({onChange:onChange}){return external_kbnSharedDeps_React_default.a.createElement(ems_file_source_update_source_editor_UpdateSourceEditor,{onChange:onChange,tooltipFields:this._tooltipFields,layerId:this._descriptor.id,source:this})}async getEMSFileLayer(){let emsFileLayers;try{emsFileLayers=await Object(util.b)()}catch(e){throw new Error(`${getErrorInfo(this._descriptor.id)} - ${e.message}`)}const emsFileLayer=emsFileLayers.find(fileLayer=>fileLayer.hasId(this._descriptor.id));if(emsFileLayer)return emsFileLayer;throw new Error(getErrorInfo(this._descriptor.id))}async getEmsFieldLabel(emsFieldName){const emsField=(await this.getEMSFileLayer()).getFieldsInLanguage().find(field=>field.name===emsFieldName);return emsField?emsField.description:emsFieldName}async getGeoJsonWithMeta(){const emsFileLayer=await this.getEMSFileLayer(),featureCollection=await Object(util.a)(emsFileLayer.getDefaultFormatUrl(),emsFileLayer.getDefaultFormatType(),"data"),emsIdField=emsFileLayer.getFields().find(field=>"id"===field.type);return featureCollection.features.forEach((feature,index)=>{feature.id=emsIdField?feature.properties[emsIdField.id]:index}),{data:featureCollection,meta:{}}}async getImmutableProperties(){let emsLink;try{emsLink=(await this.getEMSFileLayer()).getEMSHotLink()}catch(error){}const props=[{label:Object(i18n_getters.b)(),value:getSourceTitle()},{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.emsFile.layerLabel",{defaultMessage:"Layer"}),value:this._descriptor.id,link:emsLink}],emsSettings=Object(kibana_services.i)();return emsSettings.isEMSUrlSet()&&props.push({label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.emsFile.emsOnPremLabel",{defaultMessage:"Elastic Maps Server"}),value:emsSettings.getEMSRoot()}),props}async getDisplayName(){try{return(await this.getEMSFileLayer()).getDisplayName()}catch(error){return this._descriptor.id}}async getAttributions(){return(await this.getEMSFileLayer()).getAttributions()}async getLeftJoinFields(){return(await this.getEMSFileLayer()).getFieldsInLanguage().map(f=>this.createField({fieldName:f.name}))}canFormatFeatureProperties(){return this._tooltipFields.length>0}async getTooltipProperties(properties){const promises=this._tooltipFields.map(field=>{const value=properties[field.getName()];return field.createTooltipProperty(value)});return Promise.all(promises)}async getSupportedShapeTypes(){return[constants.VECTOR_SHAPE_TYPE.POLYGON]}async getLicensedFeatures(){return Object(kibana_services.i)().isEMSUrlSet()?[licensed_features.a.ON_PREM_EMS]:[]}}Object(source_registry.b)({ConstructorFunction:ems_file_source_EMSFileSource,type:constants.SOURCE_TYPES.EMS_FILE});const emsBoundariesLayerWizardConfig={categories:[constants.LAYER_WIZARD_CATEGORY.REFERENCE],checkVisibility:async()=>Object(kibana_services.i)().isIncludeElasticMapsService(),description:function(){const emsSettings=Object(kibana_services.i)();return external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.emsFileSourceDescription",{defaultMessage:"Administrative boundaries from {host}",values:{host:emsSettings.isEMSUrlSet()?emsSettings.getEMSRoot():"Elastic Maps Service"}})}(),disabledReason:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.emsFileDisabledReason",{defaultMessage:"Elastic Maps Server requires an Enterprise license"}),getIsDisabled:()=>{const emsSettings=Object(kibana_services.i)();return emsSettings.isEMSUrlSet()&&!emsSettings.hasOnPremLicense()},icon:()=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25",className:"mapLayersWizardIcon"},external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__backgroundDarker",d:"M30.766 14.01l1.602-12.954-1.389.237c-.744.253-1.768.38-2.702.45a43.28 43.28 0 01-1.259.07l-.092.004c-.312.014-.57.026-.72.042a1.895 1.895 0 00-.558.168c-.156.07-.316.156-.47.238l-.057.03c-.356.191-.687.358-1.025.4l-1.308.339v5.863c0 .698.142 2.17 0 3.443l-.204 1.67h8.182zM20.871 2.748c-.656.039-1.247.282-2.06.4l-.702.102c-.583.086-1.16.172-1.693.238-.75.093-1.389.145-1.82.113-.592-.044-1.124.341-1.61.843-.453.467-.926 1.1-1.429 1.777l-.144.193c-1.132 1.517-2.452 3.218-4.22 4.101-.214.108-.346.313-.432.528-.087.22-.14.489-.172.78-.064.587-.047 1.325.007 2.083.071 1.01.211 2.102.32 2.956.054.42.1.783.128 1.05.08.78-.128 1.769-.37 2.653-.088.319-.178.616-.258.882-.03.1-.06.195-.086.285a9.67 9.67 0 00-.12.434 1.518 1.518 0 00-.054.334c0 .279.11.577.283.842.175.268.426.52.735.708l.067.04.079-.001c4.133-.068 10.22-.554 10.972-.638a.582.582 0 00.334-.17c.083-.08.157-.182.224-.293.134-.223.264-.524.388-.867.249-.69.495-1.6.72-2.52.162-.654.545-1.41.683-2.01l.784-2.796c.066-.379.198-1.13.272-1.705.146-1.148-.01-2.54.097-3.999.107-1.458.171-2.917.146-4.052a10.13 10.13 0 00-.112-1.438 2.469 2.469 0 00-.131-.495c-.053-.128-.276-.358-.276-.358h-.55zm10.931 12.621s-1.169-.652-1.548-.642c-.757.019-1.298-.026-2.352 0h-5.489l-2.863 8.915c.2.066 1.938.444 2.242.447.62.005 1.478-.08 2.393-.197.88-.113 1.824-.258 2.678-.389l.113-.017a49.753 49.753 0 012.166-.305c.347-.034.996-.024 1.858-.007l.127.003c.827.017 1.819.037 2.869.023 2.198-.029 4.694-.204 6.5-.887 1.42-.538 2.099-.87 2.513-1.34.414-.468.575-1.576.575-1.576s-2.907.868-4.807.784c-.927-.04-1.508.045-2.352-.34-1.429-.652-1.206-2.221-2.43-3.205-.77-.62-2.193-1.267-2.193-1.267z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__backgroundDarker",d:"M33.322 1.125S31.277 14.3 31.72 14.522c.786.393 2.012.665 3.137 1.67 1.23 1.1 1.172 2.5 2.318 3.24.835.538 6.525-.704 6.525-.704l.228-7.956s-.174-4.5-.89-5.216c-.715-.716-2.488-1.125-3-2.08-1.115-2.08-3.068-2.351-3.068-2.351h-3.648z"})),renderWizard:({previewLayers:previewLayers,mapColors:mapColors})=>external_kbnSharedDeps_React_default.a.createElement(create_source_editor_EMSFileCreateSourceEditor,{onSourceConfigChange:sourceConfig=>{const sourceDescriptor=ems_file_source_EMSFileSource.createDescriptor(sourceConfig),layerDescriptor=vector_layer.a.createDescriptor({sourceDescriptor:sourceDescriptor},mapColors);previewLayers([layerDescriptor])}}),title:getSourceTitle()};var source=__webpack_require__(142);class tms_source_AbstractTMSSource extends source.a{async getUrlTemplate(){throw new Error("Should implement TMSSource#getUrlTemplate")}convertMarkdownLinkToObjectArr(markdown){return markdown.split("|").map(attribution=>{attribution=attribution.trim();const result=/\[(.*)\]\((.*)\)/.exec(attribution);return{label:result?result[1]:null,url:result?result[2]:null}})}}function tile_service_select_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class tile_service_select_TileServiceSelect extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),tile_service_select_defineProperty(this,"_isMounted",!1),tile_service_select_defineProperty(this,"state",{emsTmsOptions:[],hasLoaded:!1}),tile_service_select_defineProperty(this,"_loadTmsOptions",async()=>{const emsTMSServices=await Object(util.c)();if(!this._isMounted)return;const emsTmsOptions=emsTMSServices.map(tmsService=>({value:tmsService.getId(),text:tmsService.getDisplayName()?tmsService.getDisplayName():tmsService.getId()}));emsTmsOptions.unshift({value:"auto_select",text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.emsTile.autoLabel",{defaultMessage:"Autoselect based on Kibana theme"})}),this.setState({emsTmsOptions:emsTmsOptions,hasLoaded:!0})}),tile_service_select_defineProperty(this,"_onChange",e=>{const value=e.target.value,isAutoSelect="auto_select"===value;this.props.onTileSelect({id:isAutoSelect?null:value,isAutoSelect:isAutoSelect})})}componentWillUnmount(){this._isMounted=!1}componentDidMount(){this._isMounted=!0,this._loadTmsOptions()}render(){const helpText=0===this.state.emsTmsOptions.length?getEmsUnavailableMessage():null;let selectedId;return this.props.config&&(selectedId=this.props.config.isAutoSelect?"auto_select":this.props.config.id),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.emsTile.label",{defaultMessage:"Tile service"}),helpText:helpText,display:"columnCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{hasNoInitialSelection:!selectedId,value:selectedId,options:this.state.emsTmsOptions,onChange:this._onChange,isLoading:!this.state.hasLoaded,disabled:this.state.hasLoaded&&0===this.state.emsTmsOptions.length,compressed:!0}))}}function ems_tms_source_update_source_editor_UpdateSourceEditor({onChange:onChange,config:config}){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.source.emsTile.settingsTitle",defaultMessage:"Basemap"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(tile_service_select_TileServiceSelect,{onTileSelect:({id:id,isAutoSelect:isAutoSelect})=>{onChange({propName:"id",value:id}),onChange({propName:"isAutoSelect",value:isAutoSelect})},config:config})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}))}function ems_tms_source_getErrorInfo(emsTileLayerId){return external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.emsTile.unableToFindTileIdErrorMessage",{defaultMessage:"Unable to find EMS tile configuration for id: {id}. {info}",values:{id:emsTileLayerId,info:getEmsUnavailableMessage()}})}function ems_tms_source_getSourceTitle(){return Object(kibana_services.i)().isEMSUrlSet()?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.emsOnPremTileTitle",{defaultMessage:"Elastic Maps Server Basemaps"}):external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.emsTileTitle",{defaultMessage:"EMS Basemaps"})}class ems_tms_source_EMSTMSSource extends tms_source_AbstractTMSSource{static createDescriptor(descriptor){return{type:constants.SOURCE_TYPES.EMS_TMS,id:descriptor.id,isAutoSelect:void 0!==descriptor.isAutoSelect&&!!descriptor.isAutoSelect}}constructor(descriptor,inspectorAdapters){super(descriptor=ems_tms_source_EMSTMSSource.createDescriptor(descriptor),inspectorAdapters)}renderSourceSettingsEditor({onChange:onChange}){return external_kbnSharedDeps_React_default.a.createElement(ems_tms_source_update_source_editor_UpdateSourceEditor,{onChange:onChange,config:this._descriptor})}async getImmutableProperties(){const displayName=await this.getDisplayName(),autoSelectMsg=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.emsTile.isAutoSelectLabel",{defaultMessage:"autoselect based on Kibana theme"}),props=[{label:Object(i18n_getters.b)(),value:ems_tms_source_getSourceTitle()},{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.emsTile.serviceId",{defaultMessage:"Tile service"}),value:this._descriptor.isAutoSelect?`${displayName} - ${autoSelectMsg}`:displayName}],emsSettings=Object(kibana_services.i)();return emsSettings.isEMSUrlSet()&&props.push({label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.emsTile.emsOnPremLabel",{defaultMessage:"Elastic Maps Server"}),value:emsSettings.getEMSRoot()}),props}async _getEMSTMSService(){let emsTMSServices;const emsTileLayerId=this.getTileLayerId();try{emsTMSServices=await Object(util.c)()}catch(e){throw new Error(`${ems_tms_source_getErrorInfo(emsTileLayerId)} - ${e.message}`)}const tmsService=emsTMSServices.find(tmsService=>tmsService.getId()===emsTileLayerId);if(tmsService)return tmsService;throw new Error(ems_tms_source_getErrorInfo(emsTileLayerId))}async getDisplayName(){try{return(await this._getEMSTMSService()).getDisplayName()}catch(error){return this.getTileLayerId()}}async getAttributions(){const markdown=(await this._getEMSTMSService()).getMarkdownAttribution();return markdown?this.convertMarkdownLinkToObjectArr(markdown):[]}async getUrlTemplate(){const emsTMSService=await this._getEMSTMSService();return await emsTMSService.getUrlTemplate()}getSpriteNamespacePrefix(){return"ems/"+this.getTileLayerId()}async getVectorStyleSheetAndSpriteMeta(isRetina){const emsTMSService=await this._getEMSTMSService();return{vectorStyleSheet:await emsTMSService.getVectorStyleSheet(),spriteMeta:await emsTMSService.getSpriteSheetMeta(isRetina)}}getTileLayerId(){if(!this._descriptor.isAutoSelect)return this._descriptor.id;const emsTileLayerId=Object(kibana_services.k)();return Object(kibana_services.s)()?emsTileLayerId.dark:emsTileLayerId.bright}async getLicensedFeatures(){return Object(kibana_services.i)().isEMSUrlSet()?[licensed_features.a.ON_PREM_EMS]:[]}}Object(source_registry.b)({ConstructorFunction:ems_tms_source_EMSTMSSource,type:constants.SOURCE_TYPES.EMS_TMS});var vector_tile_layer=__webpack_require__(111);function ems_tms_source_create_source_editor_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class ems_tms_source_create_source_editor_CreateSourceEditor extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),ems_tms_source_create_source_editor_defineProperty(this,"state",{}),ems_tms_source_create_source_editor_defineProperty(this,"_onTileSelect",config=>{this.setState({config:config}),this.props.onTileSelect(config)})}componentDidMount(){this._onTileSelect({id:null,isAutoSelect:!0})}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(tile_service_select_TileServiceSelect,{onTileSelect:this._onTileSelect,config:this.state.config}))}}const WorldMapLayerIcon=()=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25",className:"mapLayersWizardIcon"},external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M13.175 15.71s-1.357 1.258.523 2.987c1.88 1.73-.379 3.912 1.096 5.712.782-.248-.418-.63 2.454-3.616 2.872-2.987 1.045-3.72-.574-4.454-1.619-.733-2.245-2.096-3.499-.629zm-2.506-2.987s.209-.68 1.305-.157c1.097.524 1.306-2.253 3.29-2.986 1.985-.734 2.037-1.625.783-2.306-1.253-.681-.888-1.205-2.088.472-1.202 1.676-2.007-1.516-.157-2.096.835-.262 1.044-1.468 0-1.834-1.045-.367-3.238.104-4.334-1.153C8.37 1.405 6.596.148 5.028 2.82c-1.566 2.672-.626 2.62 0 2.882.628.262 1.358-.42 2.09.943.73 1.363-.21 3.93.73 4.873.94.943-.068 2.841 3.604 3.302.418.052.835.157 1.044.366.21.21.992-.995-.679-1.362-1.67-.367-1.357-.786-1.148-1.1zm5.84-9.941c.495.332 1.462.157.992 1.258-.47 1.1-.627 2.882.313 3.51.94.63.836-1.938 2.559-1.938 1.723 0 2.872-6.13-.784-5.083-3.655 1.048-3.55 1.939-3.08 2.253zM44.716 1.3c.575-1.152-1.514-.89-2.715-.157-1.201.734-2.611.629-3.394.157-.784-.471-.418.734-1.619.891-1.201.157-2.559.262-2.298-.733.261-.996-1.096-.525-1.096-.525-1.15.367-1.985 1.677-1.724 2.83.261 1.153-1.514 1.834-3.133 1.153s-3.551.105-4.125 2.148c-.575 2.044-.992 2.463-1.723 3.197-.732.733.94 1.677 2.036-.053 1.097-1.729 1.828-.366 2.506.367.285.308.68 1.048.68 1.048s.115.258.317.618a2.081 2.081 0 00-.644-.103h-.258a2.028 2.028 0 00-1.518-.681h-2.297a2.04 2.04 0 00-2.037 2.043 2.04 2.04 0 002.037 2.044h1.712l.055.066c-.102.34-.272 1.214.457 1.701.919.615-.51.974.357 2.51.868 1.537 1.736 1.178 2.246.359.51-.82.306-1.025.97-1.537.664-.512.766-1.383.102-2.1-.29-.313-.287-.684-.193-1.003.163-.205.289-.442.366-.7l.031-.039-.02.003a2.106 2.106 0 00.07-.74c.27.209.56.355.857.389 1.32.147.948-1.129 1.836-1.121.51.233.796.626.984 1.435.366 1.572.575.262 1.62-.786 1.044-1.048 1.357-.173 2.819 1.153s.888-.524.731-1.467c-.157-.944 1.88-.01 1.306-2.146-.575-2.135 1.149-.422 1.514-2.098.366-1.677-1.201-1.94-.731-3.25.47-1.31 1.785-2.061 2.037-.209.275 2.031 2.287 1.773 1.817-.218-.47-1.991-.13-1.981.654-2.505.783-.525-1.166-.788-.592-1.94zM39.39 20.007c-1.134.27-.731 2.205.627 2.046 1.357-.16 2.245-.055 2.82 1.203.574 1.258 2.558-1.467 1.514-2.83-1.044-1.362-.835-1.467-1.358-2.358-.522-.89-2.507 1.677-3.603 1.94zm2.432-4.866h-.108a.792.792 0 010-1.583h.108a.792.792 0 110 1.583zm-4.302 3.486a.798.798 0 01-.56-.233.8.8 0 01-.231-.56.8.8 0 01.231-.56.8.8 0 01.56-.23.8.8 0 01.56.23.797.797 0 01.233.56.796.796 0 01-.792.793zm-7.133 3.593a.793.793 0 01-.56-1.35.793.793 0 011.12 0 .795.795 0 01.232.559.797.797 0 01-.792.792zm9.693-4.574a.797.797 0 01-.56-.231.794.794 0 01.56-1.352.793.793 0 010 1.583zm2.288-4.574a.792.792 0 01-.345-1.505c.597-.288.968-.88.968-1.544a.792.792 0 111.584 0 3.316 3.316 0 01-1.863 2.97.79.79 0 01-.344.08z"}));const emsBaseMapLayerWizardConfig={categories:[constants.LAYER_WIZARD_CATEGORY.REFERENCE],checkVisibility:async()=>Object(kibana_services.i)().isIncludeElasticMapsService(),description:function(){const emsSettings=Object(kibana_services.i)();return external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.emsTileSourceDescription",{defaultMessage:"Basemap service from {host}",values:{host:emsSettings.isEMSUrlSet()?emsSettings.getEMSRoot():"Elastic Maps Service"}})}(),disabledReason:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.emsTileDisabledReason",{defaultMessage:"Elastic Maps Server requires an Enterprise license"}),getIsDisabled:()=>{const emsSettings=Object(kibana_services.i)();return emsSettings.isEMSUrlSet()&&!emsSettings.hasOnPremLicense()},icon:WorldMapLayerIcon,renderWizard:({previewLayers:previewLayers})=>external_kbnSharedDeps_React_default.a.createElement(ems_tms_source_create_source_editor_CreateSourceEditor,{onTileSelect:sourceConfig=>{const layerDescriptor=vector_tile_layer.a.createDescriptor({sourceDescriptor:ems_tms_source_EMSTMSSource.createDescriptor(sourceConfig)});previewLayers([layerDescriptor])}}),title:ems_tms_source_getSourceTitle()};class kibana_region_field_KibanaRegionField extends fields_field.a{constructor({fieldName:fieldName,source:source,origin:origin}){super({fieldName:fieldName,origin:origin}),function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(this,"_source",void 0),this._source=source}getSource(){return this._source}async getLabel(){const field=(await this._source.getVectorFileMeta()).fields.find(f=>f.name===this.getName());return field?field.description:this.getName()}}const kibana_regionmap_source_sourceTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.kbnRegionMapTitle",{defaultMessage:"Configured GeoJSON"});class kibana_regionmap_source_KibanaRegionmapSource extends vector_source.a{static createDescriptor({name:name}){return{type:constants.SOURCE_TYPES.REGIONMAP_FILE,name:name}}constructor(descriptor,inspectorAdapters){super(descriptor,inspectorAdapters),function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(this,"_descriptor",void 0),this._descriptor=descriptor}createField({fieldName:fieldName}){return new kibana_region_field_KibanaRegionField({fieldName:fieldName,source:this,origin:constants.FIELD_ORIGIN.SOURCE})}async getImmutableProperties(){return[{label:Object(i18n_getters.b)(),value:kibana_regionmap_source_sourceTitle},{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.kbnRegionMap.vectorLayerLabel",{defaultMessage:"Vector layer"}),value:this._descriptor.name}]}async getVectorFileMeta(){const layerConfig=Object(util.e)().find(regionConfig=>regionConfig.name===this._descriptor.name);if(!layerConfig)throw new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.kbnRegionMap.noConfigErrorMessage",{defaultMessage:"Unable to find map.regionmap configuration for {name}",values:{name:this._descriptor.name}}));return layerConfig}async getGeoJsonWithMeta(){const vectorFileMeta=await this.getVectorFileMeta();return{data:await Object(util.a)(vectorFileMeta.url,vectorFileMeta.format.type,vectorFileMeta.meta.feature_collection_path),meta:{}}}async getLeftJoinFields(){return(await this.getVectorFileMeta()).fields.map(field=>this.createField({fieldName:field.name}))}async getDisplayName(){return this._descriptor.name}canFormatFeatureProperties(){return!0}}function kibana_regionmap_source_create_source_editor_CreateSourceEditor({onSourceConfigChange:onSourceConfigChange}){const regionmapOptions=Object(util.e)().map(({name:name,url:url})=>({value:url,text:name})),helpText=0===regionmapOptions.length?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.kbnRegionMap.noLayerAvailableHelptext",{defaultMessage:'No vector layers are available. Ask your system administrator to set "map.regionmap" in kibana.yml.'}):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.kbnRegionMap.vectorLayerLabel",{defaultMessage:"Vector layer"}),helpText:helpText},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{hasNoInitialSelection:!0,options:regionmapOptions,onChange:({target:target})=>{const selectedName=target.options[target.selectedIndex].text;onSourceConfigChange({name:selectedName})},disabled:0===regionmapOptions.length})))}Object(source_registry.b)({ConstructorFunction:kibana_regionmap_source_KibanaRegionmapSource,type:constants.SOURCE_TYPES.REGIONMAP_FILE});const kibanaRegionMapLayerWizardConfig={categories:[constants.LAYER_WIZARD_CATEGORY.REFERENCE],checkVisibility:async()=>Object(util.e)().length>0,description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.kbnRegionMapDescription",{defaultMessage:"Vector data from hosted GeoJSON configured in kibana.yml"}),icon:"logoKibana",renderWizard:({previewLayers:previewLayers,mapColors:mapColors})=>external_kbnSharedDeps_React_default.a.createElement(kibana_regionmap_source_create_source_editor_CreateSourceEditor,{onSourceConfigChange:sourceConfig=>{const sourceDescriptor=kibana_regionmap_source_KibanaRegionmapSource.createDescriptor(sourceConfig),layerDescriptor=vector_layer.a.createDescriptor({sourceDescriptor:sourceDescriptor},mapColors);previewLayers([layerDescriptor])}}),title:kibana_regionmap_source_sourceTitle};function kibana_tilemap_source_create_source_editor_CreateSourceEditor({onSourceConfigChange:onSourceConfigChange}){const tilemap=Object(util.f)();return Object(external_kbnSharedDeps_React_.useEffect)(()=>{tilemap.url&&onSourceConfigChange()},[]),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.kbnTMS.kbnTMS.urlLabel",{defaultMessage:"Tilemap url"}),helpText:tilemap.url?null:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.kbnTMS.noLayerAvailableHelptext",{defaultMessage:'No tilemap layer is available. Ask your system administrator to set "map.tilemap.url" in kibana.yml.'})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{readOnly:!0,value:tilemap.url?tilemap.url:""})))}const kibana_tilemap_source_sourceTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.kbnTMSTitle",{defaultMessage:"Configured Tile Map Service"});class kibana_tilemap_source_KibanaTilemapSource extends tms_source_AbstractTMSSource{static createDescriptor(){return{type:kibana_tilemap_source_KibanaTilemapSource.type}}async getImmutableProperties(){return[{label:Object(i18n_getters.b)(),value:kibana_tilemap_source_sourceTitle},{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.kbnTMS.urlLabel",{defaultMessage:"Tilemap url"}),value:await this.getUrlTemplate()}]}async getUrlTemplate(){const tilemap=Object(util.f)();if(!tilemap.url)throw new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.kbnTMS.noConfigErrorMessage",{defaultMessage:"Unable to find map.tilemap.url configuration in the kibana.yml"}));return tilemap.url}async getAttributions(){const tilemap=Object(util.f)(),markdown=external_kbnSharedDeps_Lodash_default.a.get(tilemap,"options.attribution","");return this.convertMarkdownLinkToObjectArr(markdown)}async getDisplayName(){try{return await this.getUrlTemplate()}catch(e){return""}}}!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(kibana_tilemap_source_KibanaTilemapSource,"type",constants.SOURCE_TYPES.KIBANA_TILEMAP),Object(source_registry.b)({ConstructorFunction:kibana_tilemap_source_KibanaTilemapSource,type:constants.SOURCE_TYPES.KIBANA_TILEMAP});var tile_layer=__webpack_require__(76);const kibanaBasemapLayerWizardConfig={categories:[constants.LAYER_WIZARD_CATEGORY.REFERENCE],checkVisibility:async()=>!!Object(util.f)().url,description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.kbnTMSDescription",{defaultMessage:"Tile map service configured in kibana.yml"}),icon:"logoKibana",renderWizard:({previewLayers:previewLayers})=>external_kbnSharedDeps_React_default.a.createElement(kibana_tilemap_source_create_source_editor_CreateSourceEditor,{onSourceConfigChange:()=>{const layerDescriptor=tile_layer.a.createDescriptor({sourceDescriptor:kibana_tilemap_source_KibanaTilemapSource.createDescriptor()});previewLayers([layerDescriptor])}}),title:kibana_tilemap_source_sourceTitle};function xyz_tms_source_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const xyz_tms_source_sourceTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.ems_xyzTitle",{defaultMessage:"Tile Map Service"});class xyz_tms_source_XYZTMSSource extends tms_source_AbstractTMSSource{static createDescriptor({urlTemplate:urlTemplate,attributionText:attributionText,attributionUrl:attributionUrl}){return{type:xyz_tms_source_XYZTMSSource.type,urlTemplate:urlTemplate,attributionText:attributionText,attributionUrl:attributionUrl}}constructor(sourceDescriptor){super(sourceDescriptor),xyz_tms_source_defineProperty(this,"_descriptor",void 0),this._descriptor=sourceDescriptor}async getImmutableProperties(){return[{label:Object(i18n_getters.b)(),value:xyz_tms_source_sourceTitle},{label:Object(i18n_getters.e)(),value:this._descriptor.urlTemplate}]}async getDisplayName(){return this._descriptor.urlTemplate}async getAttributions(){const{attributionText:attributionText,attributionUrl:attributionUrl}=this._descriptor;return!!attributionText&&!!attributionUrl?[{url:attributionUrl,label:attributionText}]:[]}async getUrlTemplate(){return this._descriptor.urlTemplate}}function xyz_tms_editor_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}xyz_tms_source_defineProperty(xyz_tms_source_XYZTMSSource,"type",constants.SOURCE_TYPES.EMS_XYZ),Object(source_registry.b)({ConstructorFunction:xyz_tms_source_XYZTMSSource,type:constants.SOURCE_TYPES.EMS_XYZ});class xyz_tms_editor_XYZTMSEditor extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),xyz_tms_editor_defineProperty(this,"state",{url:"",attributionText:"",attributionUrl:""}),xyz_tms_editor_defineProperty(this,"_previewLayer",external_kbnSharedDeps_Lodash_default.a.debounce(()=>{const{url:url,attributionText:attributionText,attributionUrl:attributionUrl}=this.state,sourceConfig=url.indexOf("{x}")>=0&&url.indexOf("{y}")>=0&&url.indexOf("{z}")>=0?{urlTemplate:url,attributionText:attributionText,attributionUrl:attributionUrl}:null;this.props.onSourceConfigChange(sourceConfig)},500)),xyz_tms_editor_defineProperty(this,"_onUrlChange",event=>{this.setState({url:event.target.value},this._previewLayer)}),xyz_tms_editor_defineProperty(this,"_onAttributionTextChange",event=>{this.setState({attributionText:event.target.value},this._previewLayer)}),xyz_tms_editor_defineProperty(this,"_onAttributionUrlChange",event=>{this.setState({attributionUrl:event.target.value},this._previewLayer)})}render(){const{attributionText:attributionText,attributionUrl:attributionUrl}=this.state;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:"Url"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{placeholder:"https://a.tile.openstreetmap.org/{z}/{x}/{y}.png",onChange:this._onUrlChange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.xyztmssource.attributionTextLabel",{defaultMessage:"Attribution text"}),isInvalid:""!==attributionUrl&&""===attributionText,error:[external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.xyztmssource.attributionText",{defaultMessage:"Attribution url must have accompanying text"})]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:attributionText,onChange:this._onAttributionTextChange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.xyztmssource.attributionLinkLabel",{defaultMessage:"Attribution link"}),isInvalid:""!==attributionText&&""===attributionUrl,error:[external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.xyztmssource.attributionLink",{defaultMessage:"Attribution text must have an accompanying link"})]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:attributionUrl,onChange:this._onAttributionUrlChange})))}}const tmsLayerWizardConfig={categories:[constants.LAYER_WIZARD_CATEGORY.REFERENCE],description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.ems_xyzDescription",{defaultMessage:"Raster image tile map service using {z}/{x}/{y} url pattern.",values:{z:"{z}",x:"{x}",y:"{y}"}}),icon:WorldMapLayerIcon,renderWizard:({previewLayers:previewLayers})=>external_kbnSharedDeps_React_default.a.createElement(xyz_tms_editor_XYZTMSEditor,{onSourceConfigChange:sourceConfig=>{if(!sourceConfig)return void previewLayers([]);const layerDescriptor=tile_layer.a.createDescriptor({sourceDescriptor:xyz_tms_source_XYZTMSSource.createDescriptor(sourceConfig)});previewLayers([layerDescriptor])}}),title:xyz_tms_source_sourceTitle};var parse_xml_string=__webpack_require__(196),browser=__webpack_require__(166),browser_default=__webpack_require__.n(browser),url_url=__webpack_require__(92);class wms_client_WmsClient{constructor({serviceUrl:serviceUrl}){this._serviceUrl=serviceUrl}async _fetch(url){return browser_default()(url)}_createUrl(defaultQueryParams){const serviceUrl=Object(url_url.parse)(this._serviceUrl,!0),queryParams={...serviceUrl.query,...defaultQueryParams};return Object(url_url.format)({protocol:serviceUrl.protocol,hostname:serviceUrl.hostname,port:serviceUrl.port,pathname:serviceUrl.pathname,query:queryParams})}getUrlTemplate(layers,styles){return this._createUrl({format:"image/png",service:"WMS",version:"1.1.1",request:"GetMap",srs:"EPSG:3857",transparent:"true",width:"256",height:"256",layers:layers,styles:styles})+"&bbox={bbox-epsg-3857}"}async _fetchCapabilities(){const getCapabilitiesUrl=Object(url_url.parse)(this._serviceUrl,!0),queryParams={...getCapabilitiesUrl.query,version:"1.1.1",request:"GetCapabilities",service:"WMS"},resp=await this._fetch(Object(url_url.format)({protocol:getCapabilitiesUrl.protocol,hostname:getCapabilitiesUrl.hostname,port:getCapabilitiesUrl.port,pathname:getCapabilitiesUrl.pathname,query:queryParams}));if(resp.status>=400)throw new Error("Unable to access "+this.state.serviceUrl);const body=await resp.text();return await Object(parse_xml_string.a)(body)}async getCapabilities(){const rawCapabilities=await this._fetchCapabilities(),{layers:layers,styles:styles}=function reduceLayers(path,layers){function createOption(optionPath,optionTitle,optionName){return{path:[...optionPath,optionTitle],value:optionName}}return layers.reduce((accumulatedCapabilities,layer)=>{if(layer.Layer){const hierarchicalCapabilities=reduceLayers([...path,layer.Title[0]],layer.Layer);return{layers:[...accumulatedCapabilities.layers,...hierarchicalCapabilities.layers],styles:[...accumulatedCapabilities.styles,...hierarchicalCapabilities.styles]}}const updatedStyles=[...accumulatedCapabilities.styles];return external_kbnSharedDeps_Lodash_default.a.has(layer,"Style[0]")&&updatedStyles.push(createOption(path,external_kbnSharedDeps_Lodash_default.a.get(layer,"Style[0].Title[0]"),external_kbnSharedDeps_Lodash_default.a.get(layer,"Style[0].Name[0]"))),{layers:[...accumulatedCapabilities.layers,createOption(path,layer.Title[0],layer.Name[0])],styles:updatedStyles}},{layers:[],styles:[]})}([],external_kbnSharedDeps_Lodash_default.a.get(rawCapabilities,"WMT_MS_Capabilities.Capability[0].Layer",[]));return{layers:groupCapabilities(layers),styles:groupCapabilities(styles)}}}function groupCapabilities(list){if(0===list.length)return[];let maxPathDepth=0;list.forEach(({path:path})=>{path.length>maxPathDepth&&(maxPathDepth=path.length)});let rootCommonPath=list[0].path;for(let listIndex=1;listIndex<list.length&&0!==rootCommonPath.length;listIndex++){const path=list[listIndex].path;for(let pathIndex=0;pathIndex<path.length&&pathIndex<rootCommonPath.length;pathIndex++)if(rootCommonPath[pathIndex]!==path[pathIndex]){rootCommonPath=rootCommonPath.slice(0,pathIndex);break}}const labelMap=new Map,options=list.map(({path:path,value:value})=>{const title=path[path.length-1],hierachyWithTitle=rootCommonPath.length===path.length?title:path.splice(rootCommonPath.length).join(" - "),label=title===value?hierachyWithTitle:`${hierachyWithTitle} (${value})`;let uniqueLabel;if(labelMap.has(label)){const nextCounter=labelMap.get(label)+1;labelMap.set(label,nextCounter),uniqueLabel=`${label}:${nextCounter}`}else labelMap.set(label,0),uniqueLabel=label;return{label:uniqueLabel,value:value}});return 0===rootCommonPath.length||rootCommonPath.length===maxPathDepth?options:[{label:rootCommonPath.join(" - "),options:options}]}function wms_create_source_editor_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const LAYERS_LABEL=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.wms.layersLabel",{defaultMessage:"Layers"}),STYLES_LABEL=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.wms.stylesLabel",{defaultMessage:"Styles"});class wms_create_source_editor_WMSCreateSourceEditor extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),wms_create_source_editor_defineProperty(this,"state",{serviceUrl:"",layers:"",styles:"",isLoadingCapabilities:!1,getCapabilitiesError:null,hasAttemptedToLoadCapabilities:!1,layerOptions:[],styleOptions:[],selectedLayerOptions:[],selectedStyleOptions:[],attributionText:"",attributionUrl:""}),wms_create_source_editor_defineProperty(this,"_previewIfPossible",external_kbnSharedDeps_Lodash_default.a.debounce(()=>{const{serviceUrl:serviceUrl,layers:layers,styles:styles,attributionText:attributionText,attributionUrl:attributionUrl}=this.state,sourceConfig=serviceUrl&&layers?{serviceUrl:serviceUrl,layers:layers,styles:styles,attributionText:attributionText,attributionUrl:attributionUrl}:null;this.props.onSourceConfigChange(sourceConfig)},2e3)),wms_create_source_editor_defineProperty(this,"_loadCapabilities",async()=>{if(!this.state.serviceUrl)return;this.setState({hasAttemptedToLoadCapabilities:!0,isLoadingCapabilities:!0,getCapabilitiesError:null});const wmsClient=new wms_client_WmsClient({serviceUrl:this.state.serviceUrl});let capabilities;try{capabilities=await wmsClient.getCapabilities()}catch(error){return void(this._isMounted&&this.setState({isLoadingCapabilities:!1,getCapabilitiesError:error.message}))}this._isMounted&&this.setState({isLoadingCapabilities:!1,layerOptions:capabilities.layers,styleOptions:capabilities.styles})}),wms_create_source_editor_defineProperty(this,"_handleServiceUrlChange",e=>{this.setState({serviceUrl:e.target.value,hasAttemptedToLoadCapabilities:!1,layerOptions:[],styleOptions:[],selectedLayerOptions:[],selectedStyleOptions:[],layers:"",styles:""},this._previewIfPossible)}),wms_create_source_editor_defineProperty(this,"_handleLayersChange",e=>{this.setState({layers:e.target.value},this._previewIfPossible)}),wms_create_source_editor_defineProperty(this,"_handleLayerOptionsChange",selectedOptions=>{this.setState({selectedLayerOptions:selectedOptions,layers:selectedOptions.map(selectedOption=>selectedOption.value).join(",")},this._previewIfPossible)}),wms_create_source_editor_defineProperty(this,"_handleStylesChange",e=>{this.setState({styles:e.target.value},this._previewIfPossible)}),wms_create_source_editor_defineProperty(this,"_handleStyleOptionsChange",selectedOptions=>{this.setState({selectedStyleOptions:selectedOptions,styles:selectedOptions.map(selectedOption=>selectedOption.value).join(",")},this._previewIfPossible)})}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}_handleWMSAttributionChange(attributionUpdate){const{attributionText:attributionText,attributionUrl:attributionUrl}=this.state;this.setState(attributionUpdate,()=>{attributionText&&attributionUrl&&this._previewIfPossible()})}_renderLayerAndStyleInputs(){return!this.state.hasAttemptedToLoadCapabilities||this.state.isLoadingCapabilities?null:this.state.getCapabilitiesError||0===this.state.layerOptions.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.wms.getCapabilitiesErrorCalloutTitle",{defaultMessage:"Unable to load service metadata"}),color:"warning"},external_kbnSharedDeps_React_default.a.createElement("p",null,this.state.getCapabilitiesError)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:LAYERS_LABEL,helpText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.wms.layersHelpText",{defaultMessage:"Use comma separated list of layer names"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{onChange:this._handleLayersChange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:STYLES_LABEL,helpText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.wms.stylesHelpText",{defaultMessage:"Use comma separated list of style names"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{onChange:this._handleStylesChange}))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:LAYERS_LABEL},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiComboBox,{options:this.state.layerOptions,selectedOptions:this.state.selectedLayerOptions,onChange:this._handleLayerOptionsChange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:STYLES_LABEL},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiComboBox,{options:this.state.styleOptions,selectedOptions:this.state.selectedStyleOptions,onChange:this._handleStyleOptionsChange})))}_renderGetCapabilitiesButton(){return!this.state.isLoadingCapabilities&&this.state.hasAttemptedToLoadCapabilities?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{onClick:this._loadCapabilities,isDisabled:!this.state.serviceUrl,isLoading:this.state.isLoadingCapabilities},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.source.wms.getCapabilitiesButtonText",defaultMessage:"Load capabilities"})))}_renderAttributionInputs(){if(!this.state.layers)return;const{attributionText:attributionText,attributionUrl:attributionUrl}=this.state;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:"Attribution text",isInvalid:""!==attributionUrl&&""===attributionText,error:[external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.wms.attributionText",{defaultMessage:"Attribution url must have accompanying text"})]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{onChange:({target:target})=>this._handleWMSAttributionChange({attributionText:target.value})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:"Attribution link",isInvalid:""!==attributionText&&""===attributionUrl,error:[external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.wms.attributionLink",{defaultMessage:"Attribution text must have an accompanying link"})]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{onChange:({target:target})=>this._handleWMSAttributionChange({attributionUrl:target.value})})))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.wms.urlLabel",{defaultMessage:"Url"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:this.state.serviceUrl,onChange:this._handleServiceUrlChange})),this._renderGetCapabilitiesButton(),this._renderLayerAndStyleInputs(),this._renderAttributionInputs())}}const wms_source_sourceTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.wmsTitle",{defaultMessage:"Web Map Service"});class wms_source_WMSSource extends tms_source_AbstractTMSSource{static createDescriptor({serviceUrl:serviceUrl,layers:layers,styles:styles,attributionText:attributionText,attributionUrl:attributionUrl}){return{type:wms_source_WMSSource.type,serviceUrl:serviceUrl,layers:layers,styles:styles,attributionText:attributionText,attributionUrl:attributionUrl}}async getImmutableProperties(){return[{label:Object(i18n_getters.b)(),value:wms_source_sourceTitle},{label:Object(i18n_getters.e)(),value:this._descriptor.serviceUrl},{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.wms.layersLabel",{defaultMessage:"Layers"}),value:this._descriptor.layers},{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.wms.stylesLabel",{defaultMessage:"Styles"}),value:this._descriptor.styles}]}async getDisplayName(){return this._descriptor.serviceUrl}getAttributions(){const{attributionText:attributionText,attributionUrl:attributionUrl}=this._descriptor;return!!attributionText&&!!attributionUrl?[{url:attributionUrl,label:attributionText}]:[]}getUrlTemplate(){return new wms_client_WmsClient({serviceUrl:this._descriptor.serviceUrl}).getUrlTemplate(this._descriptor.layers,this._descriptor.styles||"")}}!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(wms_source_WMSSource,"type",constants.SOURCE_TYPES.WMS),Object(source_registry.b)({ConstructorFunction:wms_source_WMSSource,type:constants.SOURCE_TYPES.WMS});const wmsLayerWizardConfig={categories:[constants.LAYER_WIZARD_CATEGORY.REFERENCE],description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.wmsDescription",{defaultMessage:"Maps from OGC Standard WMS"}),icon:()=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25",className:"mapLayersWizardIcon"},external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M30.766 14.01l1.602-12.954-1.389.237c-.744.253-1.768.38-2.702.45a43.28 43.28 0 01-1.259.07l-.092.004c-.312.014-.57.026-.72.042a1.895 1.895 0 00-.558.168c-.156.07-.316.156-.47.238l-.057.03c-.356.191-.687.358-1.025.4l-1.308.339v5.863c0 .698.142 2.17 0 3.443l-.204 1.67h8.182zM20.871 2.748c-.656.039-1.247.282-2.06.4l-.702.102c-.583.086-1.16.172-1.693.238-.75.093-1.389.145-1.82.113-.592-.044-1.124.341-1.61.843-.453.467-.926 1.1-1.429 1.777l-.144.193c-1.132 1.517-2.452 3.218-4.22 4.101-.214.108-.346.313-.432.528-.087.22-.14.489-.172.78-.064.587-.047 1.325.007 2.083.071 1.01.211 2.102.32 2.956.054.42.1.783.128 1.05.08.78-.128 1.769-.37 2.653-.088.319-.178.616-.258.882-.03.1-.06.195-.086.285a9.67 9.67 0 00-.12.434 1.518 1.518 0 00-.054.334c0 .279.11.577.283.842.175.268.426.52.735.708l.067.04.079-.001c4.133-.068 10.22-.554 10.972-.638a.582.582 0 00.334-.17c.083-.08.157-.182.224-.293.134-.223.264-.524.388-.867.249-.69.495-1.6.72-2.52.162-.654.545-1.41.683-2.01l.784-2.796c.066-.379.198-1.13.272-1.705.146-1.148-.01-2.54.097-3.999.107-1.458.171-2.917.146-4.052a10.13 10.13 0 00-.112-1.438 2.469 2.469 0 00-.131-.495c-.053-.128-.276-.358-.276-.358h-.55zm10.931 12.621s-1.169-.652-1.548-.642c-.757.019-1.298-.026-2.352 0h-5.489l-2.863 8.915c.2.066 1.938.444 2.242.447.62.005 1.478-.08 2.393-.197.88-.113 1.824-.258 2.678-.389l.113-.017a49.753 49.753 0 012.166-.305c.347-.034.996-.024 1.858-.007l.127.003c.827.017 1.819.037 2.869.023 2.198-.029 4.694-.204 6.5-.887 1.42-.538 2.099-.87 2.513-1.34.414-.468.575-1.576.575-1.576s-2.907.868-4.807.784c-.927-.04-1.508.045-2.352-.34-1.429-.652-1.206-2.221-2.43-3.205-.77-.62-2.193-1.267-2.193-1.267z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M33.322 1.125S31.277 14.3 31.72 14.522c.786.393 2.012.665 3.137 1.67 1.23 1.1 1.172 2.5 2.318 3.24.835.538 6.525-.704 6.525-.704l.228-7.956s-.174-4.5-.89-5.216c-.715-.716-2.488-1.125-3-2.08-1.115-2.08-3.068-2.351-3.068-2.351h-3.648z"})),renderWizard:({previewLayers:previewLayers})=>external_kbnSharedDeps_React_default.a.createElement(wms_create_source_editor_WMSCreateSourceEditor,{onSourceConfigChange:sourceConfig=>{if(!sourceConfig)return void previewLayers([]);const layerDescriptor=tile_layer.a.createDescriptor({sourceDescriptor:wms_source_WMSSource.createDescriptor(sourceConfig)});previewLayers([layerDescriptor])}}),title:wms_source_sourceTitle};function mvt_field_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class mvt_field_MVTField extends fields_field.a{constructor({fieldName:fieldName,type:type,source:source,origin:origin}){super({fieldName:fieldName,origin:origin}),mvt_field_defineProperty(this,"_source",void 0),mvt_field_defineProperty(this,"_type",void 0),this._source=source,this._type=type}getMVTFieldDescriptor(){return{type:this._type,name:this.getName()}}getSource(){return this._source}async getDataType(){if(this._type===constants.MVT_FIELD_TYPE.STRING)return"string";if(this._type===constants.MVT_FIELD_TYPE.NUMBER)return"number";throw new Error("Unrecognized MVT field-type "+this._type)}async getLabel(){return this.getName()}supportsAutoDomain(){return!1}canReadFromGeoJson(){return!1}}function mvt_field_config_editor_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const FIELD_TYPE_OPTIONS=[{value:constants.MVT_FIELD_TYPE.STRING,icon:"string",message:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mvtSource.stringFieldLabel",{defaultMessage:"string"})},{value:constants.MVT_FIELD_TYPE.NUMBER,icon:"number",message:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mvtSource.numberFieldLabel",{defaultMessage:"number"})}].map((function({value:value,icon:icon,message:message}){return{value:value,inputDisplay:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:null},external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_.FieldIcon,{type:icon,fill:"none"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,message))}}));class mvt_field_config_editor_MVTFieldConfigEditor extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),mvt_field_config_editor_defineProperty(this,"state",{currentFields:external_kbnSharedDeps_Lodash_default.a.cloneDeep(this.props.fields)}),mvt_field_config_editor_defineProperty(this,"_notifyChange",external_kbnSharedDeps_Lodash_default.a.debounce(()=>{this.state.currentFields.some(field=>""===field.name)||this.props.onChange(this.state.currentFields)})),mvt_field_config_editor_defineProperty(this,"_addField",()=>{const newFields=this.state.currentFields.slice();newFields.push({type:constants.MVT_FIELD_TYPE.STRING,name:""}),this._fieldChange(newFields)})}_fieldChange(newFields){this.setState({currentFields:newFields},this._notifyChange)}_removeField(index){const newFields=this.state.currentFields.slice();newFields.splice(index,1),this._fieldChange(newFields)}_renderFieldTypeDropDown(mvtFieldConfig,index){const onChange=type=>{const newFields=this.state.currentFields.slice();newFields[index]={type:type,name:newFields[index].name},this._fieldChange(newFields)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSuperSelect,{options:FIELD_TYPE_OPTIONS,valueOfSelected:mvtFieldConfig.type,onChange:value=>onChange(value),compressed:!0})}_renderFieldButtonDelete(index){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"trash",color:"danger",onClick:()=>{this._removeField(index)},title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mvtSource.trashButtonTitle",{defaultMessage:"Remove field"}),"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mvtSource.trashButtonAriaLabel",{defaultMessage:"Remove field"})})}_renderFieldNameInput(mvtFieldConfig,index){const emptyName=""===mvtFieldConfig.name,hasDupes=this.state.currentFields.filter(field=>field.name===mvtFieldConfig.name).length>1;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:mvtFieldConfig.name,onChange:e=>{const name=e.target.value,newFields=this.state.currentFields.slice();newFields[index]={name:name,type:newFields[index].type},this._fieldChange(newFields)},"aria-label":"Fieldname",placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mvtSource.fieldPlaceholderText",{defaultMessage:"Field name"}),isInvalid:emptyName||hasDupes,compressed:!0})}_renderFieldConfig(){return this.state.currentFields.map((mvtFieldConfig,index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{key:index,gutterSize:"xs",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,this._renderFieldNameInput(mvtFieldConfig,index)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,this._renderFieldTypeDropDown(mvtFieldConfig,index)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},this._renderFieldButtonDelete(index))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xs"})))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,this._renderFieldConfig(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceAround",alignItems:"center",gutterSize:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:this._addField,size:"xs",iconType:"plusInCircleFilled"},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mvtSource.addFieldLabel",{defaultMessage:"Add"})))))}}function mvt_single_layer_source_settings_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class mvt_single_layer_source_settings_MVTSingleLayerSourceSettings extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),mvt_single_layer_source_settings_defineProperty(this,"state",{currentLayerName:this.props.layerName,currentMinSourceZoom:this.props.minSourceZoom,currentMaxSourceZoom:this.props.maxSourceZoom,currentFields:external_kbnSharedDeps_Lodash_default.a.cloneDeep(this.props.fields)}),mvt_single_layer_source_settings_defineProperty(this,"_handleChange",external_kbnSharedDeps_Lodash_default.a.debounce(()=>{this.props.handleChange({layerName:this.state.currentLayerName,minSourceZoom:this.state.currentMinSourceZoom,maxSourceZoom:this.state.currentMaxSourceZoom,fields:this.state.currentFields})},200)),mvt_single_layer_source_settings_defineProperty(this,"_handleLayerNameInputChange",e=>{this.setState({currentLayerName:e.target.value},this._handleChange)}),mvt_single_layer_source_settings_defineProperty(this,"_handleFieldChange",fields=>{this.setState({currentFields:fields},this._handleChange)}),mvt_single_layer_source_settings_defineProperty(this,"_handleZoomRangeChange",e=>{this.setState({currentMinSourceZoom:parseInt(e[0],10),currentMaxSourceZoom:parseInt(e[1],10)},this._handleChange)})}render(){const preMessage=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.MVTSingleLayerVectorSourceEditor.fieldsPreHelpMessage",{defaultMessage:"Fields which are available in "}),message=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("b",null,this.state.currentLayerName),"."," "),postMessage=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.MVTSingleLayerVectorSourceEditor.fieldsPostHelpMessage",{defaultMessage:"These can be used for tooltips and dynamic styling."}),fieldEditor=this.props.showFields&&""!==this.state.currentLayerName?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{anchorClassName:"eui-alignMiddle",content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,preMessage,message,postMessage)},external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.MVTSingleLayerVectorSourceEditor.fieldsMessage",{defaultMessage:"Fields"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"questionInCircle",color:"subdued"})))},external_kbnSharedDeps_React_default.a.createElement(mvt_field_config_editor_MVTFieldConfigEditor,{fields:this.state.currentFields.slice(),onChange:this._handleFieldChange})):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{display:"columnCompressed",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.MVTSingleLayerVectorSourceEditor.layerNameMessage",{defaultMessage:"Source layer"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:this.state.currentLayerName,onChange:this._handleLayerNameInputChange,isInvalid:""===this.state.currentLayerName,compressed:!0})),external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_.ValidatedDualRange,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{anchorClassName:"eui-alignMiddle",content:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.MVTSingleLayerVectorSourceEditor.zoomRangeHelpMessage",{defaultMessage:"Zoom levels where the layer is present in the tiles. This does not correspond directly to visibility. Layer data from lower levels can always be displayed at higher zoom levels (but not vice versa)."})},external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.MVTSingleLayerVectorSourceEditor.zoomRangeTopMessage",{defaultMessage:"Available levels"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"questionInCircle",color:"subdued"}))),formRowDisplay:"columnCompressed",value:[this.state.currentMinSourceZoom,this.state.currentMaxSourceZoom],min:constants.MIN_ZOOM,max:constants.MAX_ZOOM,onChange:this._handleZoomRangeChange,allowEmptyRange:!1,showInput:"inputWithPopover",compressed:!0,showLabels:!0,prepend:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.MVTSingleLayerVectorSourceEditor.dataZoomRangeMessage",{defaultMessage:"Zoom"})}),fieldEditor)}}function mvt_single_layer_vector_source_update_source_editor_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class mvt_single_layer_vector_source_update_source_editor_UpdateSourceEditor extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),mvt_single_layer_vector_source_update_source_editor_defineProperty(this,"_onTooltipPropertiesSelect",propertyNames=>{this.props.onChange({propName:"tooltipProperties",value:propertyNames})}),mvt_single_layer_vector_source_update_source_editor_defineProperty(this,"_handleChange",settings=>{const changes=[];if(settings.layerName!==this.props.source.getLayerName()&&changes.push({propName:"layerName",value:settings.layerName}),settings.minSourceZoom!==this.props.source.getMinZoom()&&changes.push({propName:"minSourceZoom",value:settings.minSourceZoom}),settings.maxSourceZoom!==this.props.source.getMaxZoom()&&changes.push({propName:"maxSourceZoom",value:settings.maxSourceZoom}),!external_kbnSharedDeps_Lodash_default.a.isEqual(settings.fields,this._getFieldDescriptors())){changes.push({propName:"fields",value:settings.fields});const sanitizedTooltips=[];for(let i=0;i<this.props.tooltipFields.length;i++){const tooltipName=this.props.tooltipFields[i].getName();for(let j=0;j<settings.fields.length;j++)if(settings.fields[j].name===tooltipName){sanitizedTooltips.push(tooltipName);break}}external_kbnSharedDeps_Lodash_default.a.isEqual(sanitizedTooltips,this.props.tooltipFields)||changes.push({propName:"tooltipProperties",value:sanitizedTooltips})}this.props.onChange(...changes)})}_getFieldDescriptors(){return this.props.source.getMVTFields().map(field=>field.getMVTFieldDescriptor())}_renderSourceSettingsCard(){const fieldDescriptors=this._getFieldDescriptors();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.mvtSource.sourceSettings",defaultMessage:"Source settings"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(mvt_single_layer_source_settings_MVTSingleLayerSourceSettings,{handleChange:this._handleChange,layerName:this.props.source.getLayerName()||"",fields:fieldDescriptors,minSourceZoom:this.props.source.getMinZoom(),maxSourceZoom:this.props.source.getMaxZoom(),showFields:!0})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}))}_renderTooltipSelectionCard(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.mvtSource.tooltipsTitle",defaultMessage:"Tooltip fields"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(tooltip_selector_TooltipSelector,{tooltipFields:this.props.tooltipFields,onChange:this._onTooltipPropertiesSelect,fields:this.props.source.getMVTFields()})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,this._renderSourceSettingsCard(),this._renderTooltipSelectionCard())}}function mvt_single_layer_vector_source_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const mvt_single_layer_vector_source_sourceTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.MVTSingleLayerVectorSource.sourceTitle",{defaultMessage:"Vector tiles"});class mvt_single_layer_vector_source_MVTSingleLayerVectorSource extends source.a{static createDescriptor({urlTemplate:urlTemplate,layerName:layerName,minSourceZoom:minSourceZoom,maxSourceZoom:maxSourceZoom,fields:fields,tooltipProperties:tooltipProperties}){return{type:constants.SOURCE_TYPES.MVT_SINGLE_LAYER,id:v4_default()(),urlTemplate:urlTemplate||"",layerName:layerName||"",minSourceZoom:"number"==typeof minSourceZoom?Math.max(constants.MIN_ZOOM,minSourceZoom):constants.MIN_ZOOM,maxSourceZoom:"number"==typeof maxSourceZoom?Math.min(constants.MAX_ZOOM,maxSourceZoom):constants.MAX_ZOOM,fields:fields||[],tooltipProperties:tooltipProperties||[]}}constructor(sourceDescriptor,inspectorAdapters){super(sourceDescriptor,inspectorAdapters),mvt_single_layer_vector_source_defineProperty(this,"_descriptor",void 0),mvt_single_layer_vector_source_defineProperty(this,"_tooltipFields",void 0),this._descriptor=mvt_single_layer_vector_source_MVTSingleLayerVectorSource.createDescriptor(sourceDescriptor),this._tooltipFields=this._descriptor.tooltipProperties.map(fieldName=>this.getFieldByName(fieldName)).filter(f=>null!==f)}async supportsFitToBounds(){return!1}renderSourceSettingsEditor({onChange:onChange}){return external_kbnSharedDeps_React_default.a.createElement(mvt_single_layer_vector_source_update_source_editor_UpdateSourceEditor,{onChange:onChange,tooltipFields:this._tooltipFields,source:this})}getFieldNames(){return this._descriptor.fields.map(field=>field.name)}getMVTFields(){return this._descriptor.fields.map(field=>new mvt_field_MVTField({fieldName:field.name,type:field.type,source:this,origin:constants.FIELD_ORIGIN.SOURCE}))}getFieldByName(fieldName){try{return this.createField({fieldName:fieldName})}catch(e){return null}}createField({fieldName:fieldName}){const field=this._descriptor.fields.find(f=>f.name===fieldName);if(!field)throw new Error("Cannot create field for fieldName "+fieldName);return new mvt_field_MVTField({fieldName:field.name,type:field.type,source:this,origin:constants.FIELD_ORIGIN.SOURCE})}getGeoJsonWithMeta(){throw new Error("Does not implement getGeoJsonWithMeta")}async getFields(){return this.getMVTFields()}getLayerName(){return this._descriptor.layerName}async getImmutableProperties(){return[{label:Object(i18n_getters.b)(),value:mvt_single_layer_vector_source_sourceTitle},{label:Object(i18n_getters.e)(),value:this._descriptor.urlTemplate}]}async getDisplayName(){return this.getLayerName()}async getUrlTemplateWithMeta(){return{urlTemplate:this._descriptor.urlTemplate,layerName:this._descriptor.layerName,minSourceZoom:this._descriptor.minSourceZoom,maxSourceZoom:this._descriptor.maxSourceZoom}}async getSupportedShapeTypes(){return[constants.VECTOR_SHAPE_TYPE.POINT,constants.VECTOR_SHAPE_TYPE.LINE,constants.VECTOR_SHAPE_TYPE.POLYGON]}canFormatFeatureProperties(){return!!this._tooltipFields.length}getMinZoom(){return this._descriptor.minSourceZoom}getMaxZoom(){return this._descriptor.maxSourceZoom}async getBoundsForFilters(boundsFilters,registerCancelCallback){return null}getSyncMeta(){return null}isBoundsAware(){return!1}getSourceTooltipContent(){return{tooltipContent:null,areResultsTrimmed:!1}}async getLeftJoinFields(){return[]}async getTooltipProperties(properties,featureId){const tooltips=[];for(const key in properties)if(properties.hasOwnProperty(key))for(let i=0;i<this._tooltipFields.length;i++){if(this._tooltipFields[i].getName()===key){const tooltip=new tooltip_property.a(key,key,properties[key]);tooltips.push(tooltip);break}}return tooltips}}function mvt_single_layer_vector_source_editor_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object(source_registry.b)({ConstructorFunction:mvt_single_layer_vector_source_MVTSingleLayerVectorSource,type:constants.SOURCE_TYPES.MVT_SINGLE_LAYER});class mvt_single_layer_vector_source_editor_MVTSingleLayerVectorSourceEditor extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),mvt_single_layer_vector_source_editor_defineProperty(this,"state",{urlTemplate:"",layerName:"",minSourceZoom:constants.MIN_ZOOM,maxSourceZoom:constants.MAX_ZOOM,fields:[]}),mvt_single_layer_vector_source_editor_defineProperty(this,"_sourceConfigChange",external_kbnSharedDeps_Lodash_default.a.debounce(()=>{this.state.urlTemplate.indexOf("{x}")>=0&&this.state.urlTemplate.indexOf("{y}")>=0&&this.state.urlTemplate.indexOf("{z}")>=0&&this.state.layerName&&this.props.onSourceConfigChange({urlTemplate:this.state.urlTemplate,layerName:this.state.layerName,minSourceZoom:this.state.minSourceZoom,maxSourceZoom:this.state.maxSourceZoom,fields:this.state.fields})},200)),mvt_single_layer_vector_source_editor_defineProperty(this,"_handleUrlTemplateChange",e=>{const url=e.target.value;this.setState({urlTemplate:url},()=>this._sourceConfigChange())}),mvt_single_layer_vector_source_editor_defineProperty(this,"_handleChange",state=>{this.setState(state,()=>this._sourceConfigChange())})}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.MVTSingleLayerVectorSourceEditor.urlMessage",{defaultMessage:"Url"}),helpText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.MVTSingleLayerVectorSourceEditor.urlHelpMessage",{defaultMessage:"URL of the .mvt vector tile service. e.g. {url}",values:{url:"http://company.com/{z}/{x}/{y}.pbf"}})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:this.state.urlTemplate,onChange:this._handleUrlTemplateChange,compressed:!0})),external_kbnSharedDeps_React_default.a.createElement(mvt_single_layer_source_settings_MVTSingleLayerSourceSettings,{handleChange:this._handleChange,layerName:this.state.layerName,fields:this.state.fields,minSourceZoom:this.state.minSourceZoom,maxSourceZoom:this.state.maxSourceZoom,showFields:!1}))}}const mvtVectorSourceWizardConfig={categories:[constants.LAYER_WIZARD_CATEGORY.REFERENCE],description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.source.mvtVectorSourceWizard",{defaultMessage:"Data service implementing the Mapbox vector tile specification"}),icon:()=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25"},external_kbnSharedDeps_React_default.a.createElement("g",{clipPath:"url(#clip0)"},external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__background",d:"M33.547 14.847l2.439-19.72-2.114.36c-1.133.385-2.692.577-4.114.684-.706.052-1.368.083-1.916.108l-.14.006c-.475.02-.868.038-1.097.064a2.885 2.885 0 00-.85.255c-.237.106-.48.237-.714.362l-.088.047c-.541.29-1.045.543-1.56.608l-1.99.515v8.926c0 1.062.215 3.302 0 5.242l-.311 2.543h12.455zM18.485-2.298c-1 .058-1.9.429-3.135.607-.356.051-.714.104-1.07.157-.888.131-1.765.26-2.577.362-1.143.142-2.115.22-2.77.172C8.031-1.067 7.22-.48 6.48.283c-.69.711-1.408 1.676-2.174 2.704l-.22.295C2.363 5.591.354 8.18-2.337 9.526c-.326.163-.528.475-.658.803-.132.334-.214.743-.263 1.188-.097.893-.07 2.016.011 3.17.109 1.539.322 3.2.488 4.5.082.64.153 1.192.194 1.598.122 1.188-.195 2.693-.564 4.038-.134.486-.27.939-.392 1.343l-.13.434a14.78 14.78 0 00-.184.661c-.044.178-.081.36-.081.508 0 .425.168.879.43 1.282.267.408.65.793 1.12 1.078l.102.061.12-.002c6.291-.103 15.558-.843 16.703-.97a.886.886 0 00.507-.259 2.15 2.15 0 00.342-.447c.204-.34.401-.797.59-1.32.38-1.05.753-2.434 1.098-3.834.244-.997.828-2.148 1.037-3.062l1.194-4.256c.101-.576.302-1.721.414-2.595.223-1.748-.015-3.866.148-6.088.162-2.22.26-4.44.223-6.168-.019-.862-.072-1.615-.172-2.19a3.756 3.756 0 00-.199-.752c-.08-.196-.42-.545-.42-.545h-.837zm16.639 19.212s-1.78-.992-2.356-.978c-1.153.03-1.976-.038-3.58 0h-8.356l-4.36 13.571c.305.102 2.95.677 3.414.681.943.008 2.25-.12 3.643-.3 1.338-.17 2.776-.392 4.077-.591l.171-.027c1.352-.207 2.532-.387 3.297-.463.53-.053 1.517-.037 2.829-.011l.194.004c1.259.025 2.768.056 4.367.035 3.347-.043 7.146-.31 9.894-1.35 2.162-.82 3.196-1.325 3.826-2.039.63-.714.876-2.4.876-2.4s-4.425 1.321-7.318 1.194c-1.411-.062-2.295.067-3.58-.52-2.175-.991-1.835-3.38-3.698-4.877-1.174-.944-3.34-1.929-3.34-1.929z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__background",d:"M37.439-4.77s-3.114 20.058-2.44 20.395c1.197.598 3.063 1.012 4.775 2.543 1.872 1.673 1.784 3.805 3.53 4.93 1.27.82 9.932-1.07 9.932-1.07l.348-12.112s-.265-6.85-1.355-7.94C51.14.886 48.441.264 47.662-1.189c-1.697-3.169-4.67-3.581-4.67-3.581h-5.553z"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"9.487",cy:"7.606",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"42.779",cy:"9.055",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"24.834",cy:"21.957",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"46.423",cy:"16.145",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"28.986",cy:"2.029",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"30.646",cy:"9.502",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"40.61",cy:"-0.462",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"15.7",cy:"2.029",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"2.415",cy:"13.654",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"12.379",cy:"15.315",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"4.075",cy:"23.618",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"14.039",cy:"24.448",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("circle",{cx:"33.968",cy:"24.448",r:"1.661",className:"mapLayersWizardIcon__highlight"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M.834 23.863h48v.545h-48zm0-11.727h48v.545h-48zm0-11.727h48v.545h-48z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M.834.409h.545v24H.834zm15.818 0h.545v24h-.545zm16.091 0h.545v24h-.545zm15.545 0h.545v24h-.545z"})),external_kbnSharedDeps_React_default.a.createElement("defs",null,external_kbnSharedDeps_React_default.a.createElement("clipPath",{id:"clip0"},external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#fff",d:"M0 0h48v24H0z",transform:"translate(.834 .409)"})))),renderWizard:({previewLayers:previewLayers,mapColors:mapColors})=>external_kbnSharedDeps_React_default.a.createElement(mvt_single_layer_vector_source_editor_MVTSingleLayerVectorSourceEditor,{onSourceConfigChange:sourceConfig=>{const sourceDescriptor=mvt_single_layer_vector_source_MVTSingleLayerVectorSource.createDescriptor(sourceConfig),layerDescriptor=tiled_vector_layer.a.createDescriptor({sourceDescriptor:sourceDescriptor},mapColors);previewLayers([layerDescriptor])}}),title:mvt_single_layer_vector_source_sourceTitle};let OBSERVABILITY_LAYER_TYPE;!function(OBSERVABILITY_LAYER_TYPE){OBSERVABILITY_LAYER_TYPE.APM_RUM_PERFORMANCE="APM_RUM_PERFORMANCE",OBSERVABILITY_LAYER_TYPE.APM_RUM_TRAFFIC="APM_RUM_TRAFFIC"}(OBSERVABILITY_LAYER_TYPE||(OBSERVABILITY_LAYER_TYPE={}));const OBSERVABILITY_LAYER_OPTIONS=[{value:OBSERVABILITY_LAYER_TYPE.APM_RUM_PERFORMANCE,text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.observability.apmRumPerformanceLabel",{defaultMessage:"APM RUM Performance"})},{value:OBSERVABILITY_LAYER_TYPE.APM_RUM_TRAFFIC,text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.observability.apmRumTrafficLabel",{defaultMessage:"APM RUM Traffic"})}];function LayerSelect(props){const options=props.value?OBSERVABILITY_LAYER_OPTIONS:[{value:"",text:""},...OBSERVABILITY_LAYER_OPTIONS];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.observability.layerLabel",{defaultMessage:"Layer"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{options:options,value:props.value?props.value:"",onChange:function(event){props.onChange(event.target.value)}}))}let OBSERVABILITY_METRIC_TYPE;!function(OBSERVABILITY_METRIC_TYPE){OBSERVABILITY_METRIC_TYPE.TRANSACTION_DURATION="TRANSACTION_DURATION",OBSERVABILITY_METRIC_TYPE.COUNT="COUNT",OBSERVABILITY_METRIC_TYPE.UNIQUE_COUNT="UNIQUE_COUNT"}(OBSERVABILITY_METRIC_TYPE||(OBSERVABILITY_METRIC_TYPE={}));const APM_RUM_PERFORMANCE_METRIC_OPTIONS=[{value:OBSERVABILITY_METRIC_TYPE.TRANSACTION_DURATION,text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.observability.transactionDurationLabel",{defaultMessage:"Transaction duraction"})}],APM_RUM_TRAFFIC_METRIC_OPTIONS=[{value:OBSERVABILITY_METRIC_TYPE.COUNT,text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.observability.countLabel",{defaultMessage:"Count"})},{value:OBSERVABILITY_METRIC_TYPE.UNIQUE_COUNT,text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.observability.uniqueCountLabel",{defaultMessage:"Unique count"})}];function getMetricOptionsForLayer(layer){return layer===OBSERVABILITY_LAYER_TYPE.APM_RUM_PERFORMANCE?APM_RUM_PERFORMANCE_METRIC_OPTIONS:layer===OBSERVABILITY_LAYER_TYPE.APM_RUM_TRAFFIC?APM_RUM_TRAFFIC_METRIC_OPTIONS:[]}function MetricSelect(props){return props.layer&&props.value?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.observability.metricLabel",{defaultMessage:"Metric"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{options:getMetricOptionsForLayer(props.layer),value:props.value,onChange:function(event){props.onChange(event.target.value)}})):null}let DISPLAY;!function(DISPLAY){DISPLAY.CHOROPLETH="CHOROPLETH",DISPLAY.CLUSTERS="CLUSTERS",DISPLAY.GRIDS="GRIDS",DISPLAY.HEATMAP="HEATMAP"}(DISPLAY||(DISPLAY={}));const DISPLAY_OPTIONS=[{value:DISPLAY.CHOROPLETH,text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.observability.choroplethLabel",{defaultMessage:"World boundaries"})},{value:DISPLAY.CLUSTERS,text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.observability.clustersLabel",{defaultMessage:"Clusters"})},{value:DISPLAY.GRIDS,text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.observability.gridsLabel",{defaultMessage:"Grids"})},{value:DISPLAY.HEATMAP,text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.observability.heatMapLabel",{defaultMessage:"Heat map"})}];function DisplaySelect(props){return props.layer?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.observability.displayLabel",{defaultMessage:"Display"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{options:DISPLAY_OPTIONS,value:props.value,onChange:function(event){props.onChange(event.target.value)}})):null}var get_agg_key=__webpack_require__(67);const create_layer_descriptor_defaultDynamicProperties=Object(vector_style_defaults.g)();function createDynamicFillColorDescriptor(layer,field){return{type:constants.STYLE_TYPE.DYNAMIC,options:{...create_layer_descriptor_defaultDynamicProperties[constants.VECTOR_STYLES.FILL_COLOR].options,field:field,color:layer===OBSERVABILITY_LAYER_TYPE.APM_RUM_PERFORMANCE?"Green to Red":"Yellow to Red",type:constants.COLOR_MAP_TYPE.ORDINAL}}}function getGeoGridRequestType(display){return display===DISPLAY.HEATMAP?constants.RENDER_AS.HEATMAP:display===DISPLAY.GRIDS?constants.RENDER_AS.GRID:constants.RENDER_AS.POINT}function create_layer_descriptor_createLayerDescriptor({layer:layer,metric:metric,display:display}){if(!layer||!metric||!display)return null;const apmSourceQuery=function(layer){let query;return layer!==OBSERVABILITY_LAYER_TYPE.APM_RUM_PERFORMANCE&&layer!==OBSERVABILITY_LAYER_TYPE.APM_RUM_TRAFFIC||(query='processor.event:"transaction"'),query?{language:"kuery",query:query}:void 0}(layer),label=function(layer,metric){let layerName,metricName;return layer===OBSERVABILITY_LAYER_TYPE.APM_RUM_PERFORMANCE?layerName=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.observability.apmRumPerformanceLayerName",{defaultMessage:"Performance"}):layer===OBSERVABILITY_LAYER_TYPE.APM_RUM_TRAFFIC&&(layerName=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.observability.apmRumTrafficLayerName",{defaultMessage:"Traffic"})),metric===OBSERVABILITY_METRIC_TYPE.TRANSACTION_DURATION?metricName=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.observability.durationMetricName",{defaultMessage:"Duration"}):metric===OBSERVABILITY_METRIC_TYPE.COUNT?metricName=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.observability.countMetricName",{defaultMessage:"Total"}):metric===OBSERVABILITY_METRIC_TYPE.UNIQUE_COUNT&&(metricName=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.observability.uniqueCountMetricName",{defaultMessage:"Unique count"})),`[${layerName}] ${metricName}`}(layer,metric),metricsDescriptor=function(metric){return metric===OBSERVABILITY_METRIC_TYPE.TRANSACTION_DURATION?{type:constants.AGG_TYPE.AVG,field:"transaction.duration.us"}:metric===OBSERVABILITY_METRIC_TYPE.UNIQUE_COUNT?{type:constants.AGG_TYPE.UNIQUE_COUNT,field:"transaction.id"}:{type:constants.AGG_TYPE.COUNT}}(metric);if(display===DISPLAY.CHOROPLETH){const joinId=v4_default()(),joinKey=Object(get_agg_key.a)({aggType:metricsDescriptor.type,aggFieldName:"field"in metricsDescriptor?metricsDescriptor.field:"",rightSourceId:joinId});return vector_layer.a.createDescriptor({label:label,joins:[{leftField:"iso2",right:{type:constants.SOURCE_TYPES.ES_TERM_SOURCE,id:joinId,indexPatternId:"apm_static_index_pattern_id",indexPatternTitle:"apm-*",term:"client.geo.country_iso_code",metrics:[metricsDescriptor],whereQuery:apmSourceQuery,applyGlobalQuery:!0,applyGlobalTime:!0}}],sourceDescriptor:ems_file_source_EMSFileSource.createDescriptor({id:constants.emsWorldLayerId,tooltipProperties:["name","iso2"]}),style:vector_style.a.createDescriptor({[constants.VECTOR_STYLES.FILL_COLOR]:createDynamicFillColorDescriptor(layer,{name:joinKey,origin:constants.FIELD_ORIGIN.JOIN}),[constants.VECTOR_STYLES.LINE_COLOR]:{type:constants.STYLE_TYPE.STATIC,options:{color:"#3d3d3d"}}})})}const geoGridSourceDescriptor=es_geo_grid_source.a.createDescriptor({indexPatternId:"apm_static_index_pattern_id",geoField:"client.geo.location",metrics:[metricsDescriptor],requestType:getGeoGridRequestType(display),resolution:constants.GRID_RESOLUTION.MOST_FINE});if(display===DISPLAY.HEATMAP)return heatmap_layer.a.createDescriptor({label:label,query:apmSourceQuery,sourceDescriptor:geoGridSourceDescriptor});const metricStyleField={name:Object(get_agg_key.b)({aggType:metricsDescriptor.type,aggFieldName:"field"in metricsDescriptor?metricsDescriptor.field:void 0}),origin:constants.FIELD_ORIGIN.SOURCE},styleProperties={[constants.VECTOR_STYLES.FILL_COLOR]:createDynamicFillColorDescriptor(layer,metricStyleField),[constants.VECTOR_STYLES.ICON_SIZE]:{type:constants.STYLE_TYPE.DYNAMIC,options:{...create_layer_descriptor_defaultDynamicProperties[constants.VECTOR_STYLES.ICON_SIZE].options,field:metricStyleField}},[constants.VECTOR_STYLES.LINE_COLOR]:{type:constants.STYLE_TYPE.STATIC,options:{color:"#3d3d3d"}}};return vector_layer.a.createDescriptor({label:label,query:apmSourceQuery,sourceDescriptor:geoGridSourceDescriptor,style:vector_style.a.createDescriptor(styleProperties)})}function observability_layer_template_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class observability_layer_template_ObservabilityLayerTemplate extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),observability_layer_template_defineProperty(this,"state",{layer:null,metric:null,display:DISPLAY.CHOROPLETH}),observability_layer_template_defineProperty(this,"_onLayerChange",layer=>{const newState={layer:layer,metric:this.state.metric},metricOptions=getMetricOptionsForLayer(layer);metricOptions.find(option=>option.value===this.state.metric)||(metricOptions.length?newState.metric=metricOptions[0].value:newState.metric=null),this.setState(newState,this._previewLayer)}),observability_layer_template_defineProperty(this,"_onMetricChange",metric=>{this.setState({metric:metric},this._previewLayer)}),observability_layer_template_defineProperty(this,"_onDisplayChange",display=>{this.setState({display:display},this._previewLayer)})}_previewLayer(){const layerDescriptor=create_layer_descriptor_createLayerDescriptor({layer:this.state.layer,metric:this.state.metric,display:this.state.display});this.props.previewLayers(layerDescriptor?[layerDescriptor]:[])}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(LayerSelect,{value:this.state.layer,onChange:this._onLayerChange}),external_kbnSharedDeps_React_default.a.createElement(MetricSelect,{layer:this.state.layer,value:this.state.metric,onChange:this._onMetricChange}),external_kbnSharedDeps_React_default.a.createElement(DisplaySelect,{layer:this.state.layer,value:this.state.display,onChange:this._onDisplayChange}))}}const ObservabilityLayerWizardConfig={categories:[constants.LAYER_WIZARD_CATEGORY.ELASTICSEARCH,constants.LAYER_WIZARD_CATEGORY.SOLUTIONS],getIsDisabled:async()=>{try{return await Object(kibana_services.p)().get("apm_static_index_pattern_id"),!1}catch(e){return!0}},disabledReason:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.observability.disabledDesc",{defaultMessage:"Cannot find APM index pattern. To get started with Observably, go to Observability > Overview."}),description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.observability.desc",{defaultMessage:"APM layers"}),icon:"logoObservability",renderWizard:renderWizardArguments=>external_kbnSharedDeps_React_default.a.createElement(observability_layer_template_ObservabilityLayerTemplate,renderWizardArguments),title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.observability.title",{defaultMessage:"Observability"})};var minimatch=__webpack_require__(212),minimatch_default=__webpack_require__.n(minimatch);const create_layer_descriptors_defaultDynamicProperties=Object(vector_style_defaults.g)(),euiVisColorPalette=Object(external_kbnSharedDeps_ElasticEui_.euiPaletteColorBlind)();function isApmIndex(indexPatternTitle){return minimatch_default()(indexPatternTitle,"apm-*")}function getSourceField(indexPatternTitle){return isApmIndex(indexPatternTitle)?"client.geo.location":"source.geo.location"}function getDestinationField(indexPatternTitle){return isApmIndex(indexPatternTitle)?"server.geo.location":"destination.geo.location"}function createSourceLayerDescriptor(indexPatternId,indexPatternTitle){const sourceDescriptor=es_search_source_ESSearchSource.createDescriptor({indexPatternId:indexPatternId,geoField:getSourceField(indexPatternTitle),scalingType:constants.SCALING_TYPES.TOP_HITS,topHitsSplitField:isApmIndex(indexPatternTitle)?"client.ip":"source.ip",tooltipProperties:isApmIndex(indexPatternTitle)?["host.name","client.ip","client.domain","client.geo.country_iso_code","client.as.organization.name"]:["host.name","source.ip","source.domain","source.geo.country_iso_code","source.as.organization.name"]}),styleProperties={[constants.VECTOR_STYLES.FILL_COLOR]:{type:constants.STYLE_TYPE.STATIC,options:{color:euiVisColorPalette[1]}},[constants.VECTOR_STYLES.LINE_COLOR]:{type:constants.STYLE_TYPE.STATIC,options:{color:"#FFFFFF"}},[constants.VECTOR_STYLES.LINE_WIDTH]:{type:constants.STYLE_TYPE.STATIC,options:{size:2}},[constants.VECTOR_STYLES.SYMBOLIZE_AS]:{options:{value:constants.SYMBOLIZE_AS_TYPES.ICON}},[constants.VECTOR_STYLES.ICON]:{type:constants.STYLE_TYPE.STATIC,options:{value:"home"}},[constants.VECTOR_STYLES.ICON_SIZE]:{type:constants.STYLE_TYPE.STATIC,options:{size:8}}};return vector_layer.a.createDescriptor({label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.sescurity.sourceLayerLabel",{defaultMessage:"{indexPatternTitle} | Source Point",values:{indexPatternTitle:indexPatternTitle}}),sourceDescriptor:sourceDescriptor,style:vector_style.a.createDescriptor(styleProperties)})}function createDestinationLayerDescriptor(indexPatternId,indexPatternTitle){const sourceDescriptor=es_search_source_ESSearchSource.createDescriptor({indexPatternId:indexPatternId,geoField:getDestinationField(indexPatternTitle),scalingType:constants.SCALING_TYPES.TOP_HITS,topHitsSplitField:isApmIndex(indexPatternTitle)?"server.ip":"destination.ip",tooltipProperties:isApmIndex(indexPatternTitle)?["host.name","server.ip","server.domain","server.geo.country_iso_code","server.as.organization.name"]:["host.name","destination.ip","destination.domain","destination.geo.country_iso_code","destination.as.organization.name"]}),styleProperties={[constants.VECTOR_STYLES.FILL_COLOR]:{type:constants.STYLE_TYPE.STATIC,options:{color:euiVisColorPalette[2]}},[constants.VECTOR_STYLES.LINE_COLOR]:{type:constants.STYLE_TYPE.STATIC,options:{color:"#FFFFFF"}},[constants.VECTOR_STYLES.LINE_WIDTH]:{type:constants.STYLE_TYPE.STATIC,options:{size:2}},[constants.VECTOR_STYLES.SYMBOLIZE_AS]:{options:{value:constants.SYMBOLIZE_AS_TYPES.ICON}},[constants.VECTOR_STYLES.ICON]:{type:constants.STYLE_TYPE.STATIC,options:{value:"marker"}},[constants.VECTOR_STYLES.ICON_SIZE]:{type:constants.STYLE_TYPE.STATIC,options:{size:8}}};return vector_layer.a.createDescriptor({label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.sescurity.destinationLayerLabel",{defaultMessage:"{indexPatternTitle} | Destination point",values:{indexPatternTitle:indexPatternTitle}}),sourceDescriptor:sourceDescriptor,style:vector_style.a.createDescriptor(styleProperties)})}function createLineLayerDescriptor(indexPatternId,indexPatternTitle){const sourceDescriptor=es_pew_pew_source_ESPewPewSource.createDescriptor({indexPatternId:indexPatternId,sourceGeoField:getSourceField(indexPatternTitle),destGeoField:getDestinationField(indexPatternTitle),metrics:[{type:constants.AGG_TYPE.SUM,field:isApmIndex(indexPatternTitle)?"client.bytes":"source.bytes"},{type:constants.AGG_TYPE.SUM,field:isApmIndex(indexPatternTitle)?"server.bytes":"destination.bytes"}]}),styleProperties={[constants.VECTOR_STYLES.LINE_COLOR]:{type:constants.STYLE_TYPE.STATIC,options:{color:euiVisColorPalette[1]}},[constants.VECTOR_STYLES.LINE_WIDTH]:{type:constants.STYLE_TYPE.DYNAMIC,options:{...create_layer_descriptors_defaultDynamicProperties[constants.VECTOR_STYLES.LINE_WIDTH].options,field:{name:constants.COUNT_PROP_NAME,origin:constants.FIELD_ORIGIN.SOURCE},minSize:1,maxSize:8}}};return vector_layer.a.createDescriptor({label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.sescurity.lineLayerLabel",{defaultMessage:"{indexPatternTitle} | Line",values:{indexPatternTitle:indexPatternTitle}}),sourceDescriptor:sourceDescriptor,style:vector_style.a.createDescriptor(styleProperties)})}function createSecurityLayerDescriptors(indexPatternId,indexPatternTitle){return[createSourceLayerDescriptor(indexPatternId,indexPatternTitle),createDestinationLayerDescriptor(indexPatternId,indexPatternTitle),createLineLayerDescriptor(indexPatternId,indexPatternTitle)]}async function getSecurityIndexPatterns(){const uiSettings=Object(kibana_services.M)();let securityIndexPatternTitles;try{securityIndexPatternTitles=uiSettings.get("securitySolution:defaultIndex")}catch(error){return[]}return(await Object(kibana_services.p)().getCache()).filter(savedObject=>securityIndexPatternTitles.some(indexPatternTitle=>{var _savedObject$attribut;return minimatch_default()(indexPatternTitle,null==savedObject||null===(_savedObject$attribut=savedObject.attributes)||void 0===_savedObject$attribut?void 0:_savedObject$attribut.title)})).map(savedObject=>({id:savedObject.id,title:savedObject.attributes.title}))}function index_pattern_select_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class index_pattern_select_IndexPatternSelect extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),index_pattern_select_defineProperty(this,"_isMounted",!1),index_pattern_select_defineProperty(this,"state",{hasLoaded:!1,options:[]}),index_pattern_select_defineProperty(this,"_onChange",event=>{const targetOption=this.state.options.find(({value:value,text:text})=>event.target.value===value);""!==event.target.value&&targetOption?this.props.onChange({id:targetOption.value,title:targetOption.text}):this.props.onChange(null)})}componentWillUnmount(){this._isMounted=!1}componentDidMount(){this._isMounted=!0,this._loadOptions()}async _loadOptions(){const indexPatterns=await getSecurityIndexPatterns();this._isMounted&&this.setState({hasLoaded:!0,options:[{value:"",text:""},...indexPatterns.map(({id:id,title:title})=>({value:id,text:title}))]})}render(){return this.state.hasLoaded?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.security.indexPatternLabel",{defaultMessage:"Index pattern"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{options:this.state.options,value:this.props.value?this.props.value:"",onChange:this._onChange})):null}}function security_layer_template_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class security_layer_template_SecurityLayerTemplate extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),security_layer_template_defineProperty(this,"state",{indexPatternId:null,indexPatternTitle:null}),security_layer_template_defineProperty(this,"_onIndexPatternChange",indexPatternMeta=>{this.setState({indexPatternId:indexPatternMeta?indexPatternMeta.id:null,indexPatternTitle:indexPatternMeta?indexPatternMeta.title:null},this._previewLayer)})}_previewLayer(){this.state.indexPatternId&&this.state.indexPatternTitle?this.props.previewLayers(createSecurityLayerDescriptors(this.state.indexPatternId,this.state.indexPatternTitle)):this.props.previewLayers([])}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(index_pattern_select_IndexPatternSelect,{value:this.state.indexPatternId?this.state.indexPatternId:"",onChange:this._onIndexPatternChange}))}}const SecurityLayerWizardConfig={categories:[constants.LAYER_WIZARD_CATEGORY.ELASTICSEARCH,constants.LAYER_WIZARD_CATEGORY.SOLUTIONS],getIsDisabled:async()=>0===(await getSecurityIndexPatterns()).length,disabledReason:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.security.disabledDesc",{defaultMessage:"Cannot find security index pattern. To get started with Security, go to Security > Overview."}),description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.security.desc",{defaultMessage:"Security layers"}),icon:"logoSecurity",renderWizard:renderWizardArguments=>external_kbnSharedDeps_React_default.a.createElement(security_layer_template_SecurityLayerTemplate,renderWizardArguments),title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.security.title",{defaultMessage:"Security"})},create_choropleth_layer_descriptor_defaultDynamicProperties=Object(vector_style_defaults.g)();function createChoroplethLayerDescriptor({sourceDescriptor:sourceDescriptor,leftField:leftField,rightIndexPatternId:rightIndexPatternId,rightIndexPatternTitle:rightIndexPatternTitle,rightTermField:rightTermField}){const metricsDescriptor={type:constants.AGG_TYPE.COUNT},joinId=v4_default()(),joinKey=Object(get_agg_key.a)({aggType:metricsDescriptor.type,aggFieldName:"",rightSourceId:joinId});return vector_layer.a.createDescriptor({joins:[{leftField:leftField,right:{type:constants.SOURCE_TYPES.ES_TERM_SOURCE,id:joinId,indexPatternId:rightIndexPatternId,indexPatternTitle:rightIndexPatternTitle,term:rightTermField,metrics:[metricsDescriptor],applyGlobalQuery:!0,applyGlobalTime:!0}}],sourceDescriptor:sourceDescriptor,style:vector_style.a.createDescriptor({[constants.VECTOR_STYLES.FILL_COLOR]:{type:constants.STYLE_TYPE.DYNAMIC,options:{...create_choropleth_layer_descriptor_defaultDynamicProperties[constants.VECTOR_STYLES.FILL_COLOR].options,field:{name:joinKey,origin:constants.FIELD_ORIGIN.JOIN},color:"Yellow to Red",type:constants.COLOR_MAP_TYPE.ORDINAL}},[constants.VECTOR_STYLES.LINE_COLOR]:{type:constants.STYLE_TYPE.STATIC,options:{color:"#3d3d3d"}},[constants.VECTOR_STYLES.LABEL_TEXT]:{type:constants.STYLE_TYPE.DYNAMIC,options:{...create_choropleth_layer_descriptor_defaultDynamicProperties[constants.VECTOR_STYLES.LABEL_TEXT].options,field:{name:joinKey,origin:constants.FIELD_ORIGIN.JOIN}}}})})}function layer_template_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}let BOUNDARIES_SOURCE;!function(BOUNDARIES_SOURCE){BOUNDARIES_SOURCE.ELASTICSEARCH="ELASTICSEARCH",BOUNDARIES_SOURCE.EMS="EMS"}(BOUNDARIES_SOURCE||(BOUNDARIES_SOURCE={}));const BOUNDARIES_OPTIONS=[{id:BOUNDARIES_SOURCE.EMS,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.choropleth.boundaries.ems",{defaultMessage:"Administrative boundaries from Elastic Maps Service"})},{id:BOUNDARIES_SOURCE.ELASTICSEARCH,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.choropleth.boundaries.elasticsearch",{defaultMessage:"Points, lines, and polygons from Elasticsearch"})}];class layer_template_LayerTemplate extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),layer_template_defineProperty(this,"_isMounted",!1),layer_template_defineProperty(this,"state",{leftSource:BOUNDARIES_SOURCE.EMS,leftEmsFileId:null,leftEmsFields:[],leftIndexPattern:null,leftGeoFields:[],leftJoinFields:[],leftGeoField:null,leftEmsJoinField:null,leftElasticsearchJoinField:null,rightIndexPatternId:"",rightIndexPatternTitle:null,rightTermsFields:[],rightJoinField:null}),layer_template_defineProperty(this,"_loadRightFields",async indexPatternId=>{let indexPattern;this.setState({rightTermsFields:[],rightIndexPatternTitle:null});try{indexPattern=await Object(kibana_services.p)().get(indexPatternId)}catch(err){return}this._isMounted&&indexPatternId===this.state.rightIndexPatternId&&this.setState({rightTermsFields:Object(index_pattern_util.h)(indexPattern.fields),rightIndexPatternTitle:indexPattern.title})}),layer_template_defineProperty(this,"_loadEmsFileFields",async()=>{const emsFileLayer=(await Object(util.b)()).find(fileLayer=>fileLayer.getId()===this.state.leftEmsFileId);if(!this._isMounted||!emsFileLayer)return;const leftEmsFields=emsFileLayer.getFieldsInLanguage().filter(field=>"id"===field.type).map(field=>({value:field.name,label:field.description}));this.setState({leftEmsFields:leftEmsFields,leftEmsJoinField:leftEmsFields.length?leftEmsFields[0].value:null},this._previewLayer)}),layer_template_defineProperty(this,"_onLeftSourceChange",optionId=>{this.setState({leftSource:optionId,rightJoinField:null},this._previewLayer)}),layer_template_defineProperty(this,"_onLeftIndexPatternChange",indexPattern=>{this.setState({leftIndexPattern:indexPattern,leftGeoFields:Object(index_pattern_util.b)(indexPattern.fields),leftJoinFields:Object(index_pattern_util.g)(indexPattern.fields),leftGeoField:null,leftElasticsearchJoinField:null,rightJoinField:null},()=>{this.state.leftGeoFields.length&&this._onLeftGeoFieldSelect(this.state.leftGeoFields[0].name)})}),layer_template_defineProperty(this,"_onLeftGeoFieldSelect",geoField=>{geoField&&this.setState({leftGeoField:geoField},this._previewLayer)}),layer_template_defineProperty(this,"_onLeftJoinFieldSelect",joinField=>{joinField&&this.setState({leftElasticsearchJoinField:joinField},this._previewLayer)}),layer_template_defineProperty(this,"_onLeftEmsFileChange",emFileId=>{this.setState({leftEmsFileId:emFileId,leftEmsJoinField:null,rightJoinField:null},()=>{this._previewLayer(),this._loadEmsFileFields()})}),layer_template_defineProperty(this,"_onLeftEmsFieldChange",selectedOptions=>{0!==selectedOptions.length&&this.setState({leftEmsJoinField:selectedOptions[0].value},this._previewLayer)}),layer_template_defineProperty(this,"_onRightIndexPatternChange",indexPatternId=>{indexPatternId&&this.setState({rightIndexPatternId:indexPatternId,rightJoinField:null},()=>{this._previewLayer(),this._loadRightFields(indexPatternId)})}),layer_template_defineProperty(this,"_onRightJoinFieldSelect",joinField=>{joinField&&this.setState({rightJoinField:joinField},this._previewLayer)})}componentWillUnmount(){this._isMounted=!1}componentDidMount(){this._isMounted=!0}_isLeftConfigComplete(){return this.state.leftSource===BOUNDARIES_SOURCE.ELASTICSEARCH?!!this.state.leftIndexPattern&&!!this.state.leftGeoField&&!!this.state.leftElasticsearchJoinField:!!this.state.leftEmsFileId&&!!this.state.leftEmsJoinField}_isRightConfigComplete(){return!!this.state.rightIndexPatternId&&!!this.state.rightJoinField}_previewLayer(){if(!this._isLeftConfigComplete()||!this._isRightConfigComplete())return void this.props.previewLayers([]);const layerDescriptor=this.state.leftSource===BOUNDARIES_SOURCE.ELASTICSEARCH?function({leftIndexPatternId:leftIndexPatternId,leftGeoField:leftGeoField,leftJoinField:leftJoinField,rightIndexPatternId:rightIndexPatternId,rightIndexPatternTitle:rightIndexPatternTitle,rightTermField:rightTermField}){return createChoroplethLayerDescriptor({sourceDescriptor:es_search_source_ESSearchSource.createDescriptor({indexPatternId:leftIndexPatternId,geoField:leftGeoField,scalingType:constants.SCALING_TYPES.LIMIT,tooltipProperties:[leftJoinField],applyGlobalQuery:!1}),leftField:leftJoinField,rightIndexPatternId:rightIndexPatternId,rightIndexPatternTitle:rightIndexPatternTitle,rightTermField:rightTermField})}({leftIndexPatternId:this.state.leftIndexPattern.id,leftGeoField:this.state.leftGeoField,leftJoinField:this.state.leftElasticsearchJoinField,rightIndexPatternId:this.state.rightIndexPatternId,rightIndexPatternTitle:this.state.rightIndexPatternTitle,rightTermField:this.state.rightJoinField}):function({leftEmsFileId:leftEmsFileId,leftEmsField:leftEmsField,rightIndexPatternId:rightIndexPatternId,rightIndexPatternTitle:rightIndexPatternTitle,rightTermField:rightTermField}){return createChoroplethLayerDescriptor({sourceDescriptor:ems_file_source_EMSFileSource.createDescriptor({id:leftEmsFileId,tooltipProperties:[leftEmsField]}),leftField:leftEmsField,rightIndexPatternId:rightIndexPatternId,rightIndexPatternTitle:rightIndexPatternTitle,rightTermField:rightTermField})}({leftEmsFileId:this.state.leftEmsFileId,leftEmsField:this.state.leftEmsJoinField,rightIndexPatternId:this.state.rightIndexPatternId,rightIndexPatternTitle:this.state.rightIndexPatternTitle,rightTermField:this.state.rightJoinField});this.props.previewLayers([layerDescriptor])}_renderLeftSourceForm(){if(this.state.leftSource===BOUNDARIES_SOURCE.ELASTICSEARCH){let geoFieldSelect,joinFieldSelect;return this.state.leftGeoFields.length&&(geoFieldSelect=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.choropleth.geofieldLabel",{defaultMessage:"Geospatial field"})},external_kbnSharedDeps_React_default.a.createElement(single_field_select.a,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.choropleth.geofieldPlaceholder",{defaultMessage:"Select geo field"}),value:this.state.leftGeoField,onChange:this._onLeftGeoFieldSelect,fields:this.state.leftGeoFields,isClearable:!1}))),this.state.leftJoinFields.length&&(joinFieldSelect=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.choropleth.joinFieldLabel",{defaultMessage:"Join field"})},external_kbnSharedDeps_React_default.a.createElement(single_field_select.a,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.choropleth.joinFieldPlaceholder",{defaultMessage:"Select field"}),value:this.state.leftElasticsearchJoinField,onChange:this._onLeftJoinFieldSelect,fields:this.state.leftJoinFields,isClearable:!1}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(geo_index_pattern_select_GeoIndexPatternSelect,{value:this.state.leftIndexPattern?this.state.leftIndexPattern.id:"",onChange:this._onLeftIndexPatternChange}),geoFieldSelect,joinFieldSelect)}{let emsFieldSelect;if(this.state.leftEmsFields.length){let selectedOption;this.state.leftEmsJoinField&&(selectedOption=this.state.leftEmsFields.find(option=>this.state.leftEmsJoinField===option.value)),emsFieldSelect=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.choropleth.joinFieldLabel",{defaultMessage:"Join field"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiComboBox,{singleSelection:!0,isClearable:!1,options:this.state.leftEmsFields,selectedOptions:selectedOption?[selectedOption]:[],onChange:this._onLeftEmsFieldChange}))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(ems_file_select_EMSFileSelect,{value:this.state.leftEmsFileId,onChange:this._onLeftEmsFileChange}),emsFieldSelect)}}_renderLeftPanel(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.choropleth.boundariesLabel",defaultMessage:"Boundaries source"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiRadioGroup,{options:BOUNDARIES_OPTIONS,idSelected:this.state.leftSource,onChange:this._onLeftSourceChange})),this._renderLeftSourceForm())}_renderRightPanel(){if(!this._isLeftConfigComplete())return null;const IndexPatternSelect=Object(kibana_services.o)();let joinFieldSelect;return this.state.rightTermsFields.length&&(joinFieldSelect=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.choropleth.joinFieldLabel",{defaultMessage:"Join field"})},external_kbnSharedDeps_React_default.a.createElement(single_field_select.a,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.choropleth.joinFieldPlaceholder",{defaultMessage:"Select field"}),value:this.state.rightJoinField,onChange:this._onRightJoinFieldSelect,fields:this.state.rightTermsFields,isClearable:!1}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.maps.choropleth.statisticsLabel",defaultMessage:"Statistics source"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.choropleth.rightSourceLabel",{defaultMessage:"Index pattern"})},external_kbnSharedDeps_React_default.a.createElement(IndexPatternSelect,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.maps.choropleth.rightSourcePlaceholder",{defaultMessage:"Select index pattern"}),indexPatternId:this.state.rightIndexPatternId,onChange:this._onRightIndexPatternChange,isClearable:!1})),joinFieldSelect)}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,this._renderLeftPanel(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),this._renderRightPanel())}}const choroplethLayerWizardConfig={categories:[constants.LAYER_WIZARD_CATEGORY.ELASTICSEARCH],description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.choropleth.desc",{defaultMessage:"Shaded areas to compare statistics across boundaries"}),icon:()=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25",className:"mapLayersWizardIcon"},external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#98A2B3",d:"M32.206 15.364V1.588l-1.492.204c-.743.254-1.768.38-2.702.45a41.39 41.39 0 01-1.258.07l-.093.005c-.312.014-.57.025-.72.042a1.895 1.895 0 00-.558.167c-.156.07-.316.156-.47.238l-.057.031c-.356.19-.687.357-1.025.4l-2.262.474v5.864c0 .698-.677 2.578-.818 3.852l.34 1.807 11.114.17z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#69707D",d:"M22.36 3.558c-.178-.104-.416-.15-.664-.172a6.333 6.333 0 00-.885 0c-.657.04-1.452.144-2.264.261l-.703.103c-.583.087-1.16.172-1.692.238-.751.093-1.39.145-1.82.113-.593-.044-1.125.341-1.611.843-.453.467-.925 1.101-1.429 1.777l-.144.193c-1.132 1.517-2.452 3.218-4.22 4.102-.213.107-.346.312-.431.528a3.065 3.065 0 00-.173.78c-.064.586-.046 1.324.007 2.083.072 1.01.211 2.102.32 2.955.055.42.101.784.128 1.05.08.78-.128 1.77-.37 2.653-.088.319-.178.616-.258.882l-.086.285a9.67 9.67 0 00-.12.434 1.518 1.518 0 00-.053.334c0 .28.11.577.283.842a2.3 2.3 0 00.735.708l.067.04h.078c4.133-.069 11.445-.366 12.196-.45a.58.58 0 00.334-.17 1.41 1.41 0 00.224-.293c.134-.223.264-.524.388-.867.249-.69.495-1.6.72-2.52.162-.654.314-1.32.452-1.92l.16-.695c.088-.378.167-.707.235-.963.07-.267.123-.43.156-.494a1.57 1.57 0 00.1-.314c.03-.129.063-.291.096-.48.067-.38.14-.876.213-1.45.146-1.149.296-2.614.403-4.073.107-1.458.171-2.917.146-4.052a10.13 10.13 0 00-.112-1.438 2.469 2.469 0 00-.131-.495c-.053-.128-.135-.275-.276-.358z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fill:"#D3DAE6",d:"M31.435 15.227c-.218.006-1.066-.01-1.445 0-.758.02-1.298-.026-2.353 0H22.15l-2.864 8.915c.2.067 1.938.445 2.242.447.62.005 1.478-.08 2.393-.197.88-.112 1.824-.257 2.679-.389l.112-.017c.888-.136 1.664-.254 2.166-.304.348-.035.996-.025 1.858-.007l.128.002c.827.017 1.818.037 2.868.023 2.199-.028 4.695-.203 6.5-.887 1.42-.538 2.1-.87 2.513-1.339.414-.469.558-.468.643-1.44.086-.972.086-2.063.086-2.063l-8.131-2.744h-3.907z"}),external_kbnSharedDeps_React_default.a.createElement("path",{className:"mapLayersWizardIcon__highlight",d:"M32.206 1.588s-2.046 13.417-1.603 13.639c.787.393 2.66.63 3.785 1.636 1.23 1.1 1.171 2.5 2.318 3.239.834.538 6.73-.874 6.73-.874l.228-7.956s-.174-4.5-.89-5.216c-.716-.715-2.489-1.125-3-2.08-1.115-2.08-3.068-2.351-3.068-2.351l-4.5-.037z"})),renderWizard:renderWizardArguments=>external_kbnSharedDeps_React_default.a.createElement(layer_template_LayerTemplate,renderWizardArguments),title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.choropleth.title",{defaultMessage:"Choropleth"})};let registered=!1;__webpack_require__(213);function map_container_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class map_container_MapContainer extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),map_container_defineProperty(this,"_isMounted",!1),map_container_defineProperty(this,"_isInitalLoadRenderTimerStarted",!1),map_container_defineProperty(this,"_prevIndexPatternIds",[]),map_container_defineProperty(this,"_refreshTimerId",null),map_container_defineProperty(this,"_prevIsPaused",null),map_container_defineProperty(this,"_prevInterval",null),map_container_defineProperty(this,"state",{isInitialLoadRenderTimeoutComplete:!1,domId:v4_default()(),geoFields:[]}),map_container_defineProperty(this,"_onInitialLoadRenderComplete",()=>{const el=document.querySelector(`[data-dom-id="${this.state.domId}"]`);el&&el.dispatchEvent(new CustomEvent("renderComplete",{bubbles:!0}))}),map_container_defineProperty(this,"_loadGeoFields",async nextIndexPatternIds=>{if(external_kbnSharedDeps_Lodash_default.a.isEqual(nextIndexPatternIds,this._prevIndexPatternIds))return;this._prevIndexPatternIds=nextIndexPatternIds;const geoFields=[];(await Object(index_pattern_util.e)(nextIndexPatternIds)).forEach(indexPattern=>{indexPattern.fields.forEach(field=>{!indexPattern.id||data_public_.indexPatterns.isNestedField(field)||field.type!==constants.ES_GEO_FIELD_TYPE.GEO_POINT&&field.type!==constants.ES_GEO_FIELD_TYPE.GEO_SHAPE||geoFields.push({geoFieldName:field.name,geoFieldType:field.type,indexPatternTitle:indexPattern.title,indexPatternId:indexPattern.id})})}),this._isMounted&&this.setState({geoFields:geoFields})}),map_container_defineProperty(this,"_setRefreshTimer",()=>{const{isPaused:isPaused,interval:interval}=this.props.refreshConfig;this._prevIsPaused===isPaused&&this._prevInterval===interval||(this._prevIsPaused=isPaused,this._prevInterval=interval,this._clearRefreshTimer(),!isPaused&&interval>0&&(this._refreshTimerId=window.setInterval(()=>{this.props.triggerRefreshTimer()},interval)))}),map_container_defineProperty(this,"_clearRefreshTimer",()=>{this._refreshTimerId&&(window.clearInterval(this._refreshTimerId),this._refreshTimerId=null)}),map_container_defineProperty(this,"_startInitialLoadRenderTimer",()=>{window.setTimeout(()=>{this._isMounted&&(this.setState({isInitialLoadRenderTimeoutComplete:!0}),this._onInitialLoadRenderComplete())},5e3)})}componentDidMount(){this._isMounted=!0,this._setRefreshTimer(),registered||(registerLayerWizard(uploadLayerWizardConfig),registerLayerWizard(esDocumentsLayerWizardConfig),registerLayerWizard(choroplethLayerWizardConfig),registerLayerWizard(clustersLayerWizardConfig),registerLayerWizard(heatmapLayerWizardConfig),registerLayerWizard(esTopHitsLayerWizardConfig),registerLayerWizard(geoLineLayerWizardConfig),registerLayerWizard(point2PointLayerWizardConfig),registerLayerWizard(emsBoundariesLayerWizardConfig),registerLayerWizard(emsBaseMapLayerWizardConfig),registerLayerWizard(kibanaRegionMapLayerWizardConfig),registerLayerWizard(kibanaBasemapLayerWizardConfig),registerLayerWizard(tmsLayerWizardConfig),registerLayerWizard(wmsLayerWizardConfig),registerLayerWizard(mvtVectorSourceWizardConfig),registerLayerWizard(ObservabilityLayerWizardConfig),registerLayerWizard(SecurityLayerWizardConfig),registered=!0)}componentDidUpdate(){this._setRefreshTimer(),this.props.areLayersLoaded&&!this._isInitalLoadRenderTimerStarted&&(this._isInitalLoadRenderTimerStarted=!0,this._startInitialLoadRenderTimer()),this.props.addFilters&&this._loadGeoFields(this.props.indexPatternIds)}componentWillUnmount(){this._isMounted=!1,this._clearRefreshTimer(),this.props.cancelAllInFlightRequests()}render(){const{addFilters:addFilters,getFilterActions:getFilterActions,getActionContext:getActionContext,onSingleValueTrigger:onSingleValueTrigger,flyoutDisplay:flyoutDisplay,isFullScreen:isFullScreen,exitFullScreen:exitFullScreen,mapInitError:mapInitError,renderTooltipContent:renderTooltipContent}=this.props;if(mapInitError)return external_kbnSharedDeps_React_default.a.createElement("div",{"data-render-complete":!0,"data-shared-item":!0,"data-title":this.props.title,"data-description":this.props.description},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.map.initializeErrorTitle",{defaultMessage:"Unable to initialize map"}),color:"danger",iconType:"cross"},external_kbnSharedDeps_React_default.a.createElement("p",null,mapInitError)));let exitFullScreenButton,flyoutPanel=null;return flyoutDisplay===reducers_ui.c.ADD_LAYER_WIZARD?flyoutPanel=external_kbnSharedDeps_React_default.a.createElement(add_layer_panel_connected,null):flyoutDisplay===reducers_ui.c.LAYER_PANEL?flyoutPanel=external_kbnSharedDeps_React_default.a.createElement(connectedLayerPanel,null):flyoutDisplay===reducers_ui.c.MAP_SETTINGS_PANEL&&(flyoutPanel=external_kbnSharedDeps_React_default.a.createElement(connectedMapSettingsPanel,null)),isFullScreen&&(exitFullScreenButton=external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_.ExitFullScreenButton,{onExitFullScreenMode:exitFullScreen})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"none",responsive:!1,"data-dom-id":this.state.domId,"data-render-complete":this.state.isInitialLoadRenderTimeoutComplete,"data-shared-item":!0,"data-title":this.props.title,"data-description":this.props.description},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{className:"mapMapWrapper",style:{backgroundColor:this.props.settings.backgroundColor}},external_kbnSharedDeps_React_default.a.createElement(mb_map_connected,{addFilters:addFilters,getFilterActions:getFilterActions,getActionContext:getActionContext,onSingleValueTrigger:onSingleValueTrigger,geoFields:this.state.geoFields,renderTooltipContent:renderTooltipContent}),!this.props.settings.hideToolbarOverlay&&external_kbnSharedDeps_React_default.a.createElement(ToolbarOverlay,{addFilters:addFilters,geoFields:this.state.geoFields,getFilterActions:getFilterActions,getActionContext:getActionContext}),external_kbnSharedDeps_React_default.a.createElement(connectedWidgetOverlay,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{className:classnames_default()("mapMapLayerPanel",{"mapMapLayerPanel-isVisible":!!flyoutPanel}),grow:!1},flyoutPanel),exitFullScreenButton)}}const map_container_connected=Object(lib.connect)((function(state){return{areLayersLoaded:Object(map_selectors.a)(state),flyoutDisplay:Object(ui_selectors.a)(state),isFullScreen:Object(ui_selectors.b)(state),refreshConfig:Object(map_selectors.y)(state),mapInitError:Object(map_selectors.q)(state),indexPatternIds:Object(map_selectors.x)(state),settings:Object(map_selectors.s)(state)}}),(function(dispatch){return{triggerRefreshTimer:()=>dispatch(Object(public_actions.Lb)()),exitFullScreen:()=>{dispatch(Object(public_actions.db)()),Object(kibana_services.d)().setIsVisible(!0)},cancelAllInFlightRequests:()=>dispatch(Object(public_actions.V)())}}))(map_container_MapContainer);var redux=__webpack_require__(156),redux_thunk_lib=__webpack_require__(395),redux_thunk_lib_default=__webpack_require__.n(redux_thunk_lib),reducers_map=__webpack_require__(396);reducers_ui.b,reducers_map.DEFAULT_MAP_STATE;var savedObjects_public_=__webpack_require__(27),migrations_references=__webpack_require__(15);let mapAttributeService=null;function getMapAttributeService(){return mapAttributeService||(mapAttributeService=Object(kibana_services.j)().getAttributeService(constants.MAP_SAVED_OBJECT_TYPE,{saveMethod:async(attributes,savedObjectId)=>{const savedObjectClientReferences=attributes.references,savedObjectClientAttributes={...attributes};delete savedObjectClientAttributes.references;const{attributes:updatedAttributes,references:references}=Object(migrations_references.a)({attributes:savedObjectClientAttributes,references:savedObjectClientReferences});return{id:(await(savedObjectId?Object(kibana_services.D)().update(constants.MAP_SAVED_OBJECT_TYPE,savedObjectId,updatedAttributes,{references:references}):Object(kibana_services.D)().create(constants.MAP_SAVED_OBJECT_TYPE,updatedAttributes,{references:references}))).id}},unwrapMethod:async savedObjectId=>{const savedObject=await Object(kibana_services.D)().get(constants.MAP_SAVED_OBJECT_TYPE,savedObjectId);if(savedObject.error)throw savedObject.error;const{attributes:attributes}=Object(migrations_references.b)(savedObject);return{...attributes,references:savedObject.references}},checkForDuplicateTitle:props=>Object(savedObjects_public_.checkForDuplicateTitle)({title:props.newTitle,copyOnSave:!1,lastSavedTitle:"",getEsType:()=>constants.MAP_SAVED_OBJECT_TYPE,getDisplayName:i18n_getters.d},props.isTitleDuplicateConfirmed,props.onTitleDuplicate,{savedObjectsClient:Object(kibana_services.D)(),overlays:Object(kibana_services.f)()})}),mapAttributeService)}var external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(28);const maps_list_view_savedObjectsTagging=Object(kibana_services.E)(),maps_list_view_searchFilters=maps_list_view_savedObjectsTagging?[maps_list_view_savedObjectsTagging.ui.getSearchBarFilter({useName:!0})]:[],tableColumns=[{field:"title",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mapListing.titleFieldTitle",{defaultMessage:"Title"}),sortable:!0,render:(field,record)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:e=>{e.preventDefault(),goToSpecifiedPath(Object(constants.getEditPath)(record.id))},"data-test-subj":"mapListingTitleLink-"+record.title.split(" ").join("-")},field)},{field:"description",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mapListing.descriptionFieldTitle",{defaultMessage:"Description"}),dataType:"string",sortable:!0}];function navigateToNewMap(){Object(kibana_services.x)()(constants.APP_ID,{path:constants.MAP_PATH})}async function findMaps(searchQuery){let tagReferences,searchTerm=searchQuery;if(maps_list_view_savedObjectsTagging){const parsed=maps_list_view_savedObjectsTagging.ui.parseSearchQuery(searchQuery,{useName:!0});searchTerm=parsed.searchTerm,tagReferences=parsed.tagReferences}const resp=await Object(kibana_services.D)().find({type:constants.MAP_SAVED_OBJECT_TYPE,search:searchTerm?searchTerm+"*":void 0,perPage:Object(kibana_services.C)().settings.getListingLimit(),page:1,searchFields:["title^3","description"],defaultSearchOperator:"AND",fields:["description","title"],hasReference:tagReferences});return{total:resp.total,hits:resp.savedObjects.map(savedObject=>({id:savedObject.id,title:savedObject.attributes.title,description:savedObject.attributes.description,references:savedObject.references}))}}async function deleteMaps(items){const deletions=items.map(item=>Object(kibana_services.D)().delete(constants.MAP_SAVED_OBJECT_TYPE,item.id));await Promise.all(deletions)}function MapsListView(){const isReadOnly=!Object(kibana_services.w)().save;return Object(kibana_services.d)().docTitle.change(Object(i18n_getters.a)()),Object(kibana_services.d)().setBreadcrumbs([{text:Object(i18n_getters.a)()}]),external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_.TableListView,{headingId:"mapsListingPage",rowHeader:"title",createItem:isReadOnly?void 0:navigateToNewMap,findItems:findMaps,deleteItems:isReadOnly?void 0:deleteMaps,tableColumns:tableColumns,listingLimit:Object(kibana_services.C)().settings.getListingLimit(),initialFilter:"",initialPageSize:Object(kibana_services.C)().settings.getPerPage(),entityName:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mapListing.entityName",{defaultMessage:"map"}),entityNamePlural:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mapListing.entityNamePlural",{defaultMessage:"maps"}),tableListTitle:Object(i18n_getters.a)(),toastNotifications:Object(kibana_services.K)(),searchFilters:maps_list_view_searchFilters})}function load_list_and_render_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}maps_list_view_savedObjectsTagging&&tableColumns.push(maps_list_view_savedObjectsTagging.ui.getTableColumnDefinition());class load_list_and_render_LoadListAndRender extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args),load_list_and_render_defineProperty(this,"_isMounted",!1),load_list_and_render_defineProperty(this,"state",{mapsLoaded:!1,hasSavedMaps:null})}componentDidMount(){this._isMounted=!0,this.props.stateTransfer.clearEditorState(constants.APP_ID),this._loadMapsList()}componentWillUnmount(){this._isMounted=!1}async _loadMapsList(){try{const results=await Object(kibana_services.D)().find({type:constants.MAP_SAVED_OBJECT_TYPE,perPage:1,fields:["title"]});this._isMounted&&this.setState({mapsLoaded:!0,hasSavedMaps:!!results.savedObjects.length})}catch(err){this._isMounted&&(this.setState({mapsLoaded:!0,hasSavedMaps:!1}),Object(kibana_services.K)().addDanger({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.mapListing.errorAttemptingToLoadSavedMaps",{defaultMessage:"Unable to load maps"}),text:""+err}))}}render(){const{mapsLoaded:mapsLoaded,hasSavedMaps:hasSavedMaps}=this.state;return mapsLoaded?hasSavedMaps?external_kbnSharedDeps_React_default.a.createElement(MapsListView,null):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Redirect,{to:"/map"}):null}}let goToSpecifiedPath,kbnUrlStateStorage;async function renderApp({element:element,history:history,onAppLeave:onAppLeave,setHeaderActionMenu:setHeaderActionMenu}){goToSpecifiedPath=path=>history.push(path),kbnUrlStateStorage=Object(kibanaUtils_public_.createKbnUrlStateStorage)({useHash:!1,history:history,...Object(kibanaUtils_public_.withNotifyOnErrors)(Object(kibana_services.K)())});const stateTransfer=Object(kibana_services.j)().getStateTransfer();function renderMapApp(routeProps){const{embeddableId:embeddableId,originatingApp:originatingApp,valueInput:valueInput}=stateTransfer.getIncomingEditorState(constants.APP_ID)||{};let mapEmbeddableInput;return routeProps.match.params.savedMapId&&(mapEmbeddableInput={savedObjectId:routeProps.match.params.savedMapId}),valueInput&&(mapEmbeddableInput=valueInput),external_kbnSharedDeps_React_default.a.createElement(map_page_MapPage,{mapEmbeddableInput:mapEmbeddableInput,embeddableId:embeddableId,onAppLeave:onAppLeave,setHeaderActionMenu:setHeaderActionMenu,stateTransfer:stateTransfer,originatingApp:originatingApp})}!function(){Object(kibana_services.w)().save||Object(kibana_services.d)().setBadge({text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.badge.readOnly.tooltip",{defaultMessage:"Unable to save maps"}),iconType:"glasses"});const mapUrl=Object(kibana_services.h)().links.maps.guide;Object(kibana_services.d)().setHelpExtension({appName:"Maps",links:[{linkType:"documentation",href:""+mapUrl},{linkType:"github",title:"[Maps]",labels:["Team:Geo"]}]})}();const I18nContext=Object(kibana_services.e)().Context;return Object(external_kbnSharedDeps_ReactDom_.render)(external_kbnSharedDeps_React_default.a.createElement(I18nContext,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Router,{history:history},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Switch,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:"/map/:savedMapId",render:renderMapApp}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{exact:!0,path:"/map",render:renderMapApp}),"// Redirect other routes to list, or if hash-containing, their non-hash equivalents",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:"",render:({location:{pathname:pathname,hash:hash}})=>{if(hash){const newPath=hash.substr(1);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Redirect,{to:newPath})}return"/"===pathname||""===pathname?external_kbnSharedDeps_React_default.a.createElement(load_list_and_render_LoadListAndRender,{stateTransfer:stateTransfer}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Redirect,{to:"/"})}})))),element),()=>{Object(external_kbnSharedDeps_ReactDom_.unmountComponentAtNode)(element)}}var copy_persistent_state=__webpack_require__(72);const unsavedChangesWarning=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.breadCrumbs.unsavedChangesWarning",{defaultMessage:"Leave Maps with unsaved work?"}),unsavedChangesTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.breadCrumbs.unsavedChangesTitle",{defaultMessage:"Unsaved changes"});function createBasemapLayerDescriptor(){const tilemapSourceFromKibana=Object(util.f)();if(external_kbnSharedDeps_Lodash_default.a.get(tilemapSourceFromKibana,"url")){return tile_layer.a.createDescriptor({sourceDescriptor:kibana_tilemap_source_KibanaTilemapSource.createDescriptor()})}if(Object(kibana_services.i)().isEMSEnabled()){return vector_tile_layer.a.createDescriptor({sourceDescriptor:ems_tms_source_EMSTMSSource.createDescriptor({isAutoSelect:!0})})}return null}function saved_map_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class saved_map_SavedMap{constructor({defaultLayers:defaultLayers=[],mapEmbeddableInput:mapEmbeddableInput,embeddableId:embeddableId,onSaveCallback:onSaveCallback,originatingApp:originatingApp,stateTransfer:stateTransfer}){saved_map_defineProperty(this,"_attributes",null),saved_map_defineProperty(this,"_defaultLayers",void 0),saved_map_defineProperty(this,"_embeddableId",void 0),saved_map_defineProperty(this,"_initialLayerListConfig",[]),saved_map_defineProperty(this,"_mapEmbeddableInput",void 0),saved_map_defineProperty(this,"_onSaveCallback",void 0),saved_map_defineProperty(this,"_originatingApp",void 0),saved_map_defineProperty(this,"_stateTransfer",void 0),saved_map_defineProperty(this,"_store",void 0),saved_map_defineProperty(this,"_tags",[]),saved_map_defineProperty(this,"hasUnsavedChanges",()=>{if(!this._attributes)throw new Error("Invalid usage, must await whenReady before calling hasUnsavedChanges");const savedLayerList=this._attributes.layerListJSON?JSON.parse(this._attributes.layerListJSON):null,layerListConfigOnly=Object(map_selectors.l)(this._store.getState());return savedLayerList?!external_kbnSharedDeps_Lodash_default.a.isEqual(JSON.parse(JSON.stringify(layerListConfigOnly)),savedLayerList):!external_kbnSharedDeps_Lodash_default.a.isEqual(layerListConfigOnly,this._initialLayerListConfig)}),saved_map_defineProperty(this,"getAppNameFromId",appId=>this._getStateTransfer().getAppNameFromId(appId)),this._defaultLayers=defaultLayers,this._mapEmbeddableInput=mapEmbeddableInput,this._embeddableId=embeddableId,this._onSaveCallback=onSaveCallback,this._originatingApp=originatingApp,this._stateTransfer=stateTransfer,this._store=function(){const enhancers=[Object(redux.applyMiddleware)(redux_thunk_lib_default.a)],combinedReducers=Object(redux.combineReducers)({map:reducers_map.map,ui:reducers_ui.d,nonSerializableInstances:non_serializable_instances.e}),composeEnhancers=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||redux.compose;return Object(redux.createStore)(combinedReducers,{},composeEnhancers(...enhancers))}()}getStore(){return this._store}async whenReady(){var _this$_attributes,_this$_attributes2,_this$_attributes3,_this$_attributes4;if(await Object(licensed_features.h)(),this._mapEmbeddableInput){const doc=await getMapAttributeService().unwrapAttributes(this._mapEmbeddableInput),{references:references,...savedObjectAttributes}=doc;this._attributes=savedObjectAttributes;const savedObjectsTagging=Object(kibana_services.E)();savedObjectsTagging&&references&&references.length&&(this._tags=savedObjectsTagging.ui.getTagIdsFromReferences(references))}else this._attributes={title:"",description:""};if(this._mapEmbeddableInput&&void 0!==this._mapEmbeddableInput.mapSettings)this._store.dispatch(Object(public_actions.Cb)(this._mapEmbeddableInput.mapSettings));else if(null!==(_this$_attributes=this._attributes)&&void 0!==_this$_attributes&&_this$_attributes.mapStateJSON){const mapState=JSON.parse(this._attributes.mapStateJSON);mapState.settings&&this._store.dispatch(Object(public_actions.Cb)(mapState.settings))}let isLayerTOCOpen=reducers_ui.a;if(this._mapEmbeddableInput&&void 0!==this._mapEmbeddableInput.isLayerTOCOpen)isLayerTOCOpen=this._mapEmbeddableInput.isLayerTOCOpen;else if(null!==(_this$_attributes2=this._attributes)&&void 0!==_this$_attributes2&&_this$_attributes2.uiStateJSON){const uiState=JSON.parse(this._attributes.uiStateJSON);"isLayerTOCOpen"in uiState&&(isLayerTOCOpen=uiState.isLayerTOCOpen)}this._store.dispatch(Object(public_actions.yb)(isLayerTOCOpen));let openTOCDetails=[];if(this._mapEmbeddableInput&&void 0!==this._mapEmbeddableInput.openTOCDetails)openTOCDetails=this._mapEmbeddableInput.openTOCDetails;else if(null!==(_this$_attributes3=this._attributes)&&void 0!==_this$_attributes3&&_this$_attributes3.uiStateJSON){const uiState=JSON.parse(this._attributes.uiStateJSON);"openTOCDetails"in uiState&&(openTOCDetails=uiState.openTOCDetails)}if(this._store.dispatch(Object(public_actions.Eb)(openTOCDetails)),this._mapEmbeddableInput&&void 0!==this._mapEmbeddableInput.mapCenter)this._store.dispatch(Object(public_actions.wb)({lat:this._mapEmbeddableInput.mapCenter.lat,lon:this._mapEmbeddableInput.mapCenter.lon,zoom:this._mapEmbeddableInput.mapCenter.zoom}));else if(null!==(_this$_attributes4=this._attributes)&&void 0!==_this$_attributes4&&_this$_attributes4.mapStateJSON){const mapState=JSON.parse(this._attributes.mapStateJSON);this._store.dispatch(Object(public_actions.wb)({lat:mapState.center.lat,lon:mapState.center.lon,zoom:mapState.zoom}))}let layerList=[];if(this._attributes.layerListJSON)layerList=JSON.parse(this._attributes.layerListJSON);else{const basemapLayerDescriptor=createBasemapLayerDescriptor();basemapLayerDescriptor&&layerList.push(basemapLayerDescriptor),this._defaultLayers.length&&layerList.push(...this._defaultLayers)}this._store.dispatch(Object(public_actions.sb)(layerList)),this._mapEmbeddableInput&&void 0!==this._mapEmbeddableInput.hiddenLayers&&this._store.dispatch(Object(public_actions.xb)(this._mapEmbeddableInput.hiddenLayers)),this._initialLayerListConfig=Object(copy_persistent_state.b)(layerList)}_getStateTransfer(){if(!this._stateTransfer)throw new Error("stateTransfer not provided in constructor");return this._stateTransfer}_getPageTitle(){return this._mapEmbeddableInput?this.isByValue()?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.breadcrumbsEditByValue",{defaultMessage:"Edit map"}):this._attributes.title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.breadcrumbsCreate",{defaultMessage:"Create"})}setBreadcrumbs(){if(!this._attributes)throw new Error("Invalid usage, must await whenReady before calling hasUnsavedChanges");const breadcrumbs=function({pageTitle:pageTitle,isByValue:isByValue,getHasUnsavedChanges:getHasUnsavedChanges,originatingApp:originatingApp,getAppNameFromId:getAppNameFromId}){const breadcrumbs=[];return originatingApp&&getAppNameFromId&&breadcrumbs.push({onClick:()=>{Object(kibana_services.x)()(originatingApp)},text:getAppNameFromId(originatingApp)}),isByValue||breadcrumbs.push({text:Object(i18n_getters.a)(),onClick:async()=>{if(getHasUnsavedChanges()){await Object(kibana_services.f)().openConfirm(unsavedChangesWarning,{title:unsavedChangesTitle,"data-test-subj":"appLeaveConfirmModal"})&&goToSpecifiedPath("/")}else goToSpecifiedPath("/")}}),breadcrumbs.push({text:pageTitle}),breadcrumbs}({pageTitle:this._getPageTitle(),isByValue:this.isByValue(),getHasUnsavedChanges:this.hasUnsavedChanges,originatingApp:this._originatingApp,getAppNameFromId:this._getStateTransfer().getAppNameFromId});Object(kibana_services.d)().setBreadcrumbs(breadcrumbs)}getSavedObjectId(){return this._mapEmbeddableInput&&"savedObjectId"in this._mapEmbeddableInput?this._mapEmbeddableInput.savedObjectId:void 0}getOriginatingApp(){return this._originatingApp}getTags(){return this._tags}hasSaveAndReturnConfig(){const hasOriginatingApp=!!this._originatingApp,isNewMap=!this.getSavedObjectId();return(Object(kibana_services.r)()||!isNewMap)&&hasOriginatingApp}getTitle(){if(!this._attributes)throw new Error("Invalid usage, must await getTitle before calling getAttributes");return void 0!==this._attributes.title?this._attributes.title:""}getAttributes(){if(!this._attributes)throw new Error("Invalid usage, must await whenReady before calling getAttributes");return this._attributes}isByValue(){const hasSavedObjectId=!!this.getSavedObjectId();return Object(kibana_services.r)()&&!!this._originatingApp&&!hasSavedObjectId}async save({newDescription:newDescription,newTitle:newTitle,newCopyOnSave:newCopyOnSave,returnToOrigin:returnToOrigin,newTags:newTags,saveByReference:saveByReference,dashboardId:dashboardId}){if(!this._attributes)throw new Error("Invalid usage, must await whenReady before calling save");const prevTitle=this._attributes.title,prevDescription=this._attributes.description,prevTags=this._tags;let updatedMapEmbeddableInput;this._attributes.title=newTitle,this._attributes.description=newDescription,newTags&&(this._tags=newTags),this._syncAttributesWithStore();try{const savedObjectsTagging=Object(kibana_services.E)(),attributes=savedObjectsTagging&&newTags?{...this._attributes,references:savedObjectsTagging.ui.updateTagsReferences([],newTags)}:this._attributes;updatedMapEmbeddableInput=await getMapAttributeService().wrapAttributes(attributes,saveByReference,newCopyOnSave?void 0:this._mapEmbeddableInput)}catch(e){return this._attributes.title=prevTitle,this._attributes.description=prevDescription,void(this._tags=prevTags)}if(returnToOrigin)return this._originatingApp?void await this._getStateTransfer().navigateToWithEmbeddablePackage(this._originatingApp,{state:{embeddableId:newCopyOnSave?void 0:this._embeddableId,type:constants.MAP_SAVED_OBJECT_TYPE,input:updatedMapEmbeddableInput}}):void Object(kibana_services.K)().addDanger({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.topNav.saveErrorTitle",{defaultMessage:"Error saving '{title}'",values:{title:newTitle}}),text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.topNav.saveErrorText",{defaultMessage:"Unable to return to app without an originating app"})});dashboardId?await this._getStateTransfer().navigateToWithEmbeddablePackage("dashboards",{state:{type:constants.MAP_SAVED_OBJECT_TYPE,input:updatedMapEmbeddableInput},path:"new"===dashboardId?"#/create":"#/view/"+dashboardId}):(this._mapEmbeddableInput=updatedMapEmbeddableInput,this._originatingApp=void 0,this._getStateTransfer().clearEditorState(constants.APP_ID),Object(kibana_services.K)().addSuccess({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.topNav.saveSuccessMessage",{defaultMessage:"Saved '{title}'",values:{title:newTitle}})}),Object(kibana_services.d)().docTitle.change(newTitle),this.setBreadcrumbs(),goToSpecifiedPath(`/${constants.MAP_PATH}/${this.getSavedObjectId()}${window.location.hash}`),this._onSaveCallback&&this._onSaveCallback())}_syncAttributesWithStore(){const state=this._store.getState(),layerList=Object(map_selectors.m)(state),layerListConfigOnly=Object(copy_persistent_state.b)(layerList);this._attributes.layerListJSON=JSON.stringify(layerListConfigOnly),this._attributes.mapStateJSON=JSON.stringify({zoom:Object(map_selectors.t)(state),center:Object(map_selectors.o)(state),timeFilters:Object(map_selectors.G)(state),refreshConfig:Object(map_selectors.y)(state),query:external_kbnSharedDeps_Lodash_default.a.omit(Object(map_selectors.w)(state),"queryLastTriggeredAt"),filters:Object(map_selectors.f)(state),settings:Object(map_selectors.s)(state)}),this._attributes.uiStateJSON=JSON.stringify({isLayerTOCOpen:Object(ui_selectors.c)(state),openTOCDetails:Object(ui_selectors.e)(state)})}}function getInitialLayersFromUrlParam(){const locationSplit=window.location.href.split("?");if(locationSplit.length<=1)return[];const mapAppParams=new URLSearchParams(locationSplit[1]);if(!mapAppParams.has(constants.INITIAL_LAYERS_KEY))return[];try{let mapInitLayers=mapAppParams.get(constants.INITIAL_LAYERS_KEY);return"#"===mapInitLayers[mapInitLayers.length-1]&&(mapInitLayers=mapInitLayers.substr(0,mapInitLayers.length-1)),external_kbnSharedDeps_RisonNode_default.a.decode_array(mapInitLayers)}catch(e){return Object(kibana_services.K)().addWarning({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.initialLayers.unableToParseTitle",{defaultMessage:"Initial layers not added to map"}),text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.initialLayers.unableToParseMessage",{defaultMessage:"Unable to parse contents of 'initialLayers' parameter. Error: {errorMsg}",values:{errorMsg:e.message}})}),[]}}function getInitialTimeFilters({mapStateJSON:mapStateJSON,globalState:globalState}){if(mapStateJSON){const mapState=JSON.parse(mapStateJSON);if(mapState.timeFilters)return mapState.timeFilters}return{...Object(kibana_services.M)().get("timepicker:timeDefaults"),...globalState.time}}function getGlobalState(){return kbnUrlStateStorage.get("_g")}function updateGlobalState(newState,flushUrlState=!1){const globalState=getGlobalState();kbnUrlStateStorage.set("_g",{...globalState,...newState}),flushUrlState&&kbnUrlStateStorage.kbnUrlControls.flush(!0)}var external_kbnSharedDeps_Rxjs_=__webpack_require__(33);function app_state_manager_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class app_state_manager_AppStateManager{constructor(){app_state_manager_defineProperty(this,"_query",null),app_state_manager_defineProperty(this,"_savedQueryId",""),app_state_manager_defineProperty(this,"_filters",[]),app_state_manager_defineProperty(this,"_updated$",new external_kbnSharedDeps_Rxjs_.Subject)}setQueryAndFilters({query:query,savedQueryId:savedQueryId,filters:filters}){query&&this._query!==query&&(this._query=query),savedQueryId&&this._savedQueryId!==savedQueryId&&(this._savedQueryId=savedQueryId),filters&&this._filters!==filters&&(this._filters=filters),this._updated$.next()}getQuery(){return this._query}getFilters(){return this._filters}getAppState(){return{query:this._query,savedQueryId:this._savedQueryId,filters:this._filters}}}var external_kbnSharedDeps_RxjsOperators_=__webpack_require__(34);var presentationUtil_public_=__webpack_require__(35);function top_nav_config_extends(){return(top_nav_config_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const SavedObjectSaveModalDashboard=Object(presentationUtil_public_.withSuspense)(presentationUtil_public_.LazySavedObjectSaveModalDashboard);function map_app_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class map_app_MapApp extends external_kbnSharedDeps_React_default.a.Component{constructor(props){super(props),map_app_defineProperty(this,"_globalSyncUnsubscribe",null),map_app_defineProperty(this,"_globalSyncChangeMonitorSubscription",null),map_app_defineProperty(this,"_appSyncUnsubscribe",null),map_app_defineProperty(this,"_appStateManager",new app_state_manager_AppStateManager),map_app_defineProperty(this,"_prevIndexPatternIds",null),map_app_defineProperty(this,"_isMounted",!1),map_app_defineProperty(this,"_updateFromGlobalState",({changes:changes,state:globalState})=>{this.state.initialized&&changes&&globalState&&this._onQueryChange({time:globalState.time})}),map_app_defineProperty(this,"_onQueryChange",({filters:filters,query:query,time:time,forceRefresh:forceRefresh=!1})=>{const{filterManager:filterManager}=Object(kibana_services.g)().query;filters&&filterManager.setFilters(filters),this.props.dispatchSetQuery({forceRefresh:forceRefresh,filters:filterManager.getFilters(),query:query,timeFilters:time}),this._appStateManager.setQueryAndFilters({filters:filterManager.getAppFilters(),query:query});const updatedGlobalState={filters:filterManager.getGlobalFilters()};time&&(updatedGlobalState.time=time),updateGlobalState(updatedGlobalState,!this.state.initialized)}),map_app_defineProperty(this,"_onFiltersChange",filters=>{this._onQueryChange({filters:filters})}),map_app_defineProperty(this,"_updateStateFromSavedQuery",savedQuery=>{this.setState({savedQuery:{...savedQuery}}),this._appStateManager.setQueryAndFilters({savedQueryId:savedQuery.id});const{filterManager:filterManager}=Object(kibana_services.g)().query,allFilters=[...savedQuery.attributes.filters||[],...filterManager.getGlobalFilters()],refreshInterval=external_kbnSharedDeps_Lodash_default.a.get(savedQuery,"attributes.timefilter.refreshInterval");refreshInterval&&this._onRefreshConfigChange({isPaused:refreshInterval.pause,interval:refreshInterval.value}),this._onQueryChange({filters:allFilters,query:savedQuery.attributes.query,time:savedQuery.attributes.timefilter})}),map_app_defineProperty(this,"_addFilter",async newFilters=>{newFilters.forEach(filter=>{filter.$state={store:data_public_.esFilters.FilterStateStore.APP_STATE}}),this._onFiltersChange([...this.props.filters,...newFilters])}),this.state={indexPatterns:[],initialized:!1}}componentDidMount(){this._isMounted=!0,this._globalSyncUnsubscribe=function(){const{stop:stop}=Object(data_public_.syncQueryStateWithUrl)(Object(kibana_services.g)().query,kbnUrlStateStorage);return stop}(),this._appSyncUnsubscribe=function(appStateManager){const{query:query}=Object(kibana_services.g)();query.filterManager.setAppFilters([]);const stateContainer={get:()=>({query:appStateManager.getQuery(),filters:appStateManager.getFilters()}),set:state=>state&&appStateManager.setQueryAndFilters({query:state.query,filters:state.filters}),state$:appStateManager._updated$.pipe(Object(external_kbnSharedDeps_RxjsOperators_.map)(()=>({query:appStateManager.getQuery(),filters:appStateManager.getFilters()})))},stopSyncingQueryAppStateWithStateContainer=Object(data_public_.connectToQueryState)(query,stateContainer,{filters:data_public_.esFilters.FilterStateStore.APP_STATE,query:!0}),{start:startSyncingAppStateWithUrl,stop:stopSyncingAppStateWithUrl}=Object(kibanaUtils_public_.syncState)({storageKey:"_a",stateStorage:kbnUrlStateStorage,stateContainer:stateContainer}),initialAppState={...stateContainer.get(),...kbnUrlStateStorage.get("_a")};return stateContainer.set(initialAppState),kbnUrlStateStorage.set("_a",initialAppState),startSyncingAppStateWithUrl(),()=>{stopSyncingQueryAppStateWithStateContainer(),stopSyncingAppStateWithUrl()}}(this._appStateManager),this._globalSyncChangeMonitorSubscription=Object(kibana_services.g)().query.state$.subscribe(this._updateFromGlobalState),this._initMap(),this.props.onAppLeave(actions=>this.props.savedMap.hasUnsavedChanges()?actions.confirm(unsavedChangesWarning,unsavedChangesTitle):actions.default())}componentDidUpdate(){this._updateIndexPatterns()}componentWillUnmount(){this._isMounted=!1,this._globalSyncUnsubscribe&&this._globalSyncUnsubscribe(),this._appSyncUnsubscribe&&this._appSyncUnsubscribe(),this._globalSyncChangeMonitorSubscription&&this._globalSyncChangeMonitorSubscription.unsubscribe(),this.props.onAppLeave(actions=>actions.default())}async _updateIndexPatterns(){const{nextIndexPatternIds:nextIndexPatternIds}=this.props;if(external_kbnSharedDeps_Lodash_default.a.isEqual(nextIndexPatternIds,this._prevIndexPatternIds))return;this._prevIndexPatternIds=nextIndexPatternIds;const indexPatterns=await Object(index_pattern_util.e)(nextIndexPatternIds);this._isMounted&&this.setState({indexPatterns:indexPatterns})}_initMapAndLayerSettings(mapSavedObjectAttributes){const globalState=getGlobalState();let savedObjectFilters=[];if(mapSavedObjectAttributes.mapStateJSON){const mapState=JSON.parse(mapSavedObjectAttributes.mapStateJSON);mapState.filters&&(savedObjectFilters=mapState.filters)}const appFilters=this._appStateManager.getFilters()||[],query=function({mapStateJSON:mapStateJSON,appState:appState={}}){if(appState.query)return appState.query;if(mapStateJSON){const mapState=JSON.parse(mapStateJSON);if(mapState.query)return mapState.query}return Object(kibana_services.g)().query.queryString.getDefaultQuery()}({mapStateJSON:mapSavedObjectAttributes.mapStateJSON,appState:this._appStateManager.getAppState()});query&&Object(kibana_services.g)().query.queryString.setQuery(query),this._onQueryChange({filters:[...external_kbnSharedDeps_Lodash_default.a.get(globalState,"filters",[]),...appFilters,...savedObjectFilters],query:query,time:getInitialTimeFilters({mapStateJSON:mapSavedObjectAttributes.mapStateJSON,globalState:globalState})}),this._onRefreshConfigChange(function({mapStateJSON:mapStateJSON,globalState:globalState={}}){const uiSettings=Object(kibana_services.M)();if(mapStateJSON){const mapState=JSON.parse(mapStateJSON);if(mapState.refreshConfig)return mapState.refreshConfig}const refreshInterval={...uiSettings.get(data_public_.UI_SETTINGS.TIMEPICKER_REFRESH_INTERVAL_DEFAULTS),...globalState.refreshInterval};return{isPaused:refreshInterval.pause,interval:refreshInterval.value}}({mapStateJSON:mapSavedObjectAttributes.mapStateJSON,globalState:globalState}))}_onRefreshConfigChange(mapRefreshConfig){this.props.setRefreshConfig(mapRefreshConfig),updateGlobalState({refreshInterval:{pause:mapRefreshConfig.isPaused,value:mapRefreshConfig.interval}},!this.state.initialized)}async _initMap(){try{await this.props.savedMap.whenReady()}catch(err){return void(this._isMounted&&(Object(kibana_services.K)().addWarning({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.loadMap.errorAttemptingToLoadSavedMap",{defaultMessage:"Unable to load map"}),text:""+err.message}),goToSpecifiedPath("/")))}if(!this._isMounted)return;this.props.savedMap.setBreadcrumbs(),Object(kibana_services.d)().docTitle.change(this.props.savedMap.getTitle());const savedObjectId=this.props.savedMap.getSavedObjectId();savedObjectId&&Object(kibana_services.d)().recentlyAccessed.add(Object(constants.getExistingMapPath)(savedObjectId),this.props.savedMap.getTitle(),savedObjectId),this._initMapAndLayerSettings(this.props.savedMap.getAttributes()),this.setState({initialized:!0})}_renderTopNav(){if(this.props.isFullScreen)return null;const topNavConfig=function({savedMap:savedMap,isOpenSettingsDisabled:isOpenSettingsDisabled,isSaveDisabled:isSaveDisabled,enableFullScreen:enableFullScreen,openMapSettings:openMapSettings,inspectorAdapters:inspectorAdapters}){const topNavConfigs=[];if(topNavConfigs.push({id:"mapSettings",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.topNav.openSettingsButtonLabel",{defaultMessage:"Map settings"}),description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.topNav.openSettingsDescription",{defaultMessage:"Open map settings"}),testId:"openSettingsButton",disableButton:()=>isOpenSettingsDisabled,run(){openMapSettings()}},{id:"inspect",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.topNav.openInspectorButtonLabel",{defaultMessage:"inspect"}),description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.topNav.openInspectorDescription",{defaultMessage:"Open Inspector"}),testId:"openInspectorButton",run(){Object(kibana_services.q)().open(inspectorAdapters,{})}},{id:"full-screen",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.topNav.fullScreenButtonLabel",{defaultMessage:"full screen"}),description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.topNav.fullScreenDescription",{defaultMessage:"full screen"}),testId:"mapsFullScreenMode",run(){Object(kibana_services.d)().setIsVisible(!1),enableFullScreen()}}),Object(kibana_services.w)().save){const hasSaveAndReturnConfig=savedMap.hasSaveAndReturnConfig(),mapDescription=savedMap.getAttributes().description?savedMap.getAttributes().description:"",saveAndReturnButtonLabel=savedMap.isByValue()?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.topNav.saveToMapsButtonLabel",{defaultMessage:"Save to maps"}):external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.topNav.saveAsButtonLabel",{defaultMessage:"Save as"});topNavConfigs.push({id:"save",iconType:hasSaveAndReturnConfig?void 0:"save",label:hasSaveAndReturnConfig?saveAndReturnButtonLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.topNav.saveMapButtonLabel",{defaultMessage:"save"}),description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.topNav.saveMapDescription",{defaultMessage:"Save map"}),emphasize:!hasSaveAndReturnConfig,testId:"mapSaveButton",disableButton:()=>isSaveDisabled,tooltip(){if(isSaveDisabled)return external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.topNav.saveMapDisabledButtonTooltip",{defaultMessage:"Confirm or Cancel your layer changes before saving"})},run:()=>{let selectedTags=savedMap.getTags();const savedObjectsTagging=Object(kibana_services.E)(),tagSelector=savedObjectsTagging?external_kbnSharedDeps_React_default.a.createElement(savedObjectsTagging.ui.components.SavedObjectSaveModalTagSelector,{initialSelection:selectedTags,onTagsSelected:function(newTags){selectedTags=newTags}}):void 0,saveModalProps={onSave:async props=>{try{await Object(savedObjects_public_.checkForDuplicateTitle)({id:props.newCopyOnSave?void 0:savedMap.getSavedObjectId(),title:props.newTitle,copyOnSave:props.newCopyOnSave,lastSavedTitle:savedMap.getSavedObjectId()?savedMap.getTitle():"",getEsType:()=>constants.MAP_SAVED_OBJECT_TYPE,getDisplayName:i18n_getters.d},props.isTitleDuplicateConfirmed,props.onTitleDuplicate,{savedObjectsClient:Object(kibana_services.D)(),overlays:Object(kibana_services.f)()})}catch(e){return{}}return await savedMap.save({...props,newTags:selectedTags,saveByReference:Boolean(props.addToLibrary)}),{id:"id"}},onClose:()=>{},documentInfo:{description:mapDescription,id:savedMap.getSavedObjectId(),title:savedMap.getTitle()},objectType:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.topNav.saveModalType",{defaultMessage:"map"})},PresentationUtilContext=Object(kibana_services.z)();let saveModal;saveModal=savedMap.getOriginatingApp()||!Object(kibana_services.r)()?external_kbnSharedDeps_React_default.a.createElement(savedObjects_public_.SavedObjectSaveModalOrigin,top_nav_config_extends({},saveModalProps,{originatingApp:savedMap.getOriginatingApp(),getAppNameFromId:savedMap.getAppNameFromId,options:tagSelector})):external_kbnSharedDeps_React_default.a.createElement(SavedObjectSaveModalDashboard,top_nav_config_extends({},saveModalProps,{canSaveByReference:!0,tagOptions:tagSelector})),Object(savedObjects_public_.showSaveModal)(saveModal,Object(kibana_services.e)().Context,PresentationUtilContext)}}),hasSaveAndReturnConfig&&topNavConfigs.push({id:"saveAndReturn",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.maps.topNav.saveAndReturnButtonLabel",{defaultMessage:"Save and return"}),emphasize:!0,iconType:"checkInCircleFilled",run:()=>{savedMap.save({newTitle:savedMap.getTitle(),newDescription:mapDescription,newCopyOnSave:!1,isTitleDuplicateConfirmed:!1,returnToOrigin:!0,onTitleDuplicate:()=>{},saveByReference:!savedMap.isByValue()})},testId:"mapSaveAndReturnButton"})}return topNavConfigs}({savedMap:this.props.savedMap,isOpenSettingsDisabled:this.props.isOpenSettingsDisabled,isSaveDisabled:this.props.isSaveDisabled,enableFullScreen:this.props.enableFullScreen,openMapSettings:this.props.openMapSettings,inspectorAdapters:this.props.inspectorAdapters}),{TopNavMenu:TopNavMenu}=Object(kibana_services.y)().ui;return external_kbnSharedDeps_React_default.a.createElement(TopNavMenu,{setMenuMountPoint:this.props.setHeaderActionMenu,appName:"maps",config:topNavConfig,indexPatterns:this.state.indexPatterns,filters:this.props.filters,query:this.props.query,onQuerySubmit:({dateRange:dateRange,query:query})=>{this._onQueryChange({query:query,time:dateRange,forceRefresh:!0})},onFiltersUpdated:this._onFiltersChange,dateRangeFrom:this.props.timeFilters.from,dateRangeTo:this.props.timeFilters.to,isRefreshPaused:this.props.refreshConfig.isPaused,refreshInterval:this.props.refreshConfig.interval,onRefreshChange:({isPaused:isPaused,refreshInterval:refreshInterval})=>{this._onRefreshConfigChange({isPaused:isPaused,interval:refreshInterval})},showSearchBar:!0,showFilterBar:!0,showDatePicker:!0,showSaveQuery:!!Object(kibana_services.w)().saveQuery,savedQuery:this.state.savedQuery,onSaved:this._updateStateFromSavedQuery,onSavedQueryUpdated:this._updateStateFromSavedQuery,onClearSavedQuery:()=>{const{filterManager:filterManager,queryString:queryString}=Object(kibana_services.g)().query;this.setState({savedQuery:void 0}),this._appStateManager.setQueryAndFilters({savedQueryId:""}),this._onQueryChange({filters:filterManager.getGlobalFilters(),query:queryString.getDefaultQuery()})}})}render(){return this.state.initialized?external_kbnSharedDeps_React_default.a.createElement("div",{id:"maps-plugin",className:this.props.isFullScreen?"mapFullScreen":""},this._renderTopNav(),external_kbnSharedDeps_React_default.a.createElement("h1",{className:"euiScreenReaderOnly"},"screenTitle placeholder"),external_kbnSharedDeps_React_default.a.createElement("div",{id:"react-maps-root"},external_kbnSharedDeps_React_default.a.createElement(map_container_connected,{addFilters:this._addFilter,title:this.props.savedMap.getAttributes().title,description:this.props.savedMap.getAttributes().description}))):null}}const connectedComponent=Object(lib.connect)((function(state){return{isFullScreen:Object(ui_selectors.b)(state),isOpenSettingsDisabled:Object(ui_selectors.a)(state)!==reducers_ui.c.NONE,isSaveDisabled:Object(map_selectors.I)(state),inspectorAdapters:Object(non_serializable_instances.d)(state),nextIndexPatternIds:Object(map_selectors.x)(state),flyoutDisplay:Object(ui_selectors.a)(state),refreshConfig:Object(map_selectors.y)(state),filters:Object(map_selectors.f)(state),query:Object(map_selectors.w)(state),timeFilters:Object(map_selectors.G)(state)}}),(function(dispatch){return{dispatchSetQuery:({forceRefresh:forceRefresh,filters:filters,query:query,timeFilters:timeFilters})=>{dispatch(Object(public_actions.Fb)({filters:filters,query:query,timeFilters:timeFilters,forceRefresh:forceRefresh}))},setRefreshConfig:refreshConfig=>dispatch(Object(public_actions.Hb)(refreshConfig)),enableFullScreen:()=>dispatch(Object(public_actions.cb)()),openMapSettings:()=>dispatch(Object(public_actions.kb)())}}))(map_app_MapApp);function map_page_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class map_page_MapPage extends external_kbnSharedDeps_React_.Component{constructor(props){super(props),map_page_defineProperty(this,"_isMounted",!1),map_page_defineProperty(this,"updateSaveCounter",()=>{this._isMounted&&this.setState(prevState=>({saveCounter:prevState.saveCounter+1}))}),this.state={savedMap:new saved_map_SavedMap({defaultLayers:getInitialLayersFromUrlParam(),mapEmbeddableInput:props.mapEmbeddableInput,embeddableId:props.embeddableId,originatingApp:props.originatingApp,stateTransfer:props.stateTransfer,onSaveCallback:this.updateSaveCounter}),saveCounter:0}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){return external_kbnSharedDeps_React_default.a.createElement(lib.Provider,{store:this.state.savedMap.getStore()},external_kbnSharedDeps_React_default.a.createElement(connectedComponent,{savedMap:this.state.savedMap,onAppLeave:this.props.onAppLeave,setHeaderActionMenu:this.props.setHeaderActionMenu,saveCounter:this.state.saveCounter}))}}var embeddable_types=__webpack_require__(148);function map_embeddable_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function getIsRestore(searchSessionId){if(!searchSessionId)return!1;const searchSessionOptions=Object(kibana_services.F)().session.getSearchOptions(searchSessionId);return!!searchSessionOptions&&searchSessionOptions.isRestore}class map_embeddable_MapEmbeddable extends public_.Embeddable{constructor(config,initialInput,parent){super(initialInput,{editApp:constants.APP_ID,editable:config.editable,indexPatterns:[]},parent),map_embeddable_defineProperty(this,"type",constants.MAP_SAVED_OBJECT_TYPE),map_embeddable_defineProperty(this,"_isActive",void 0),map_embeddable_defineProperty(this,"_savedMap",void 0),map_embeddable_defineProperty(this,"_renderTooltipContent",void 0),map_embeddable_defineProperty(this,"_subscription",void 0),map_embeddable_defineProperty(this,"_prevIsRestore",!1),map_embeddable_defineProperty(this,"_prevTimeRange",void 0),map_embeddable_defineProperty(this,"_prevQuery",void 0),map_embeddable_defineProperty(this,"_prevRefreshConfig",void 0),map_embeddable_defineProperty(this,"_prevFilters",void 0),map_embeddable_defineProperty(this,"_prevSyncColors",void 0),map_embeddable_defineProperty(this,"_prevSearchSessionId",void 0),map_embeddable_defineProperty(this,"_domNode",void 0),map_embeddable_defineProperty(this,"_unsubscribeFromStore",void 0),map_embeddable_defineProperty(this,"_isInitialized",!1),map_embeddable_defineProperty(this,"setRenderTooltipContent",renderTooltipContent=>{this._renderTooltipContent=renderTooltipContent}),map_embeddable_defineProperty(this,"setEventHandlers",eventHandlers=>{this._savedMap.getStore().dispatch(Object(non_serializable_instances.h)(eventHandlers))}),map_embeddable_defineProperty(this,"onSingleValueTrigger",(actionId,key,value)=>{const action=Object(kibana_services.L)().getAction(actionId);if(!action)throw new Error("Unable to apply action, could not locate action");const executeContext={...this.getActionContext(),data:{data:toValueClickDataFormat(key,value)}};action.execute(executeContext)}),map_embeddable_defineProperty(this,"addFilters",async(filters,actionId=data_public_.ACTION_GLOBAL_APPLY_FILTER)=>{const executeContext={...this.getActionContext(),filters:filters},action=Object(kibana_services.L)().getAction(actionId);if(!action)throw new Error("Unable to apply filter, could not locate action");action.execute(executeContext)}),map_embeddable_defineProperty(this,"getFilterActions",async()=>[...await Object(kibana_services.L)().getTriggerCompatibleActions(data_public_.APPLY_FILTER_TRIGGER,{embeddable:this,filters:[]}),...(await Object(kibana_services.L)().getTriggerCompatibleActions(public_.VALUE_CLICK_TRIGGER,{embeddable:this,data:{data:toValueClickDataFormat("anyfield","anyvalue")}})).filter(isUrlDrilldown)]),map_embeddable_defineProperty(this,"getActionContext",()=>{const trigger=Object(kibana_services.L)().getTrigger(data_public_.APPLY_FILTER_TRIGGER);if(!trigger)throw new Error("Unable to get context, could not locate trigger");return{embeddable:this,trigger:trigger}}),this._isActive=!0,this._savedMap=new saved_map_SavedMap({mapEmbeddableInput:initialInput}),this._initializeSaveMap(),this._subscription=this.getUpdated$().subscribe(()=>this.onUpdate())}async _initializeSaveMap(){try{await this._savedMap.whenReady()}catch(e){return void this.onFatalError(e)}this._initializeStore();try{await this._initializeOutput()}catch(e){return void this.onFatalError(e)}this._isInitialized=!0,this._domNode&&this.render(this._domNode)}_initializeStore(){this._dispatchSetChartsPaletteServiceGetColor(this.input.syncColors);const store=this._savedMap.getStore();store.dispatch(Object(public_actions.Gb)(!0)),store.dispatch(Object(public_actions.bb)()),this._dispatchSetQuery({forceRefresh:!1}),this.input.refreshConfig&&this._dispatchSetRefreshConfig(this.input.refreshConfig),this._unsubscribeFromStore=this._savedMap.getStore().subscribe(()=>{this._handleStoreChanges()})}async _initializeOutput(){var _this$_savedMap$getAt;const savedMapTitle=null!==(_this$_savedMap$getAt=this._savedMap.getAttributes())&&void 0!==_this$_savedMap$getAt&&_this$_savedMap$getAt.title?this._savedMap.getAttributes().title:"",input=this.getInput(),title=input.hidePanelTitles?"":input.title||savedMapTitle,savedObjectId=input.savedObjectId;this.updateOutput({...this.getOutput(),defaultTitle:savedMapTitle,title:title,editPath:`/${constants.MAP_PATH}/${savedObjectId}`,editUrl:Object(kibana_services.n)().basePath.prepend(Object(constants.getExistingMapPath)(savedObjectId)),indexPatterns:await this._getIndexPatterns()})}inputIsRefType(input){return getMapAttributeService().inputIsRefType(input)}async getInputAsRefType(){const input=getMapAttributeService().getExplicitInputFromEmbeddable(this);return getMapAttributeService().getInputAsRefType(input,{showSaveModal:!0,saveModalTitle:this.getTitle()})}async getInputAsValueType(){const input=getMapAttributeService().getExplicitInputFromEmbeddable(this);return getMapAttributeService().getInputAsValueType(input)}getDescription(){return this._isInitialized?this._savedMap.getAttributes().description:""}supportedTriggers(){return[data_public_.APPLY_FILTER_TRIGGER,public_.VALUE_CLICK_TRIGGER]}getInspectorAdapters(){return Object(non_serializable_instances.d)(this._savedMap.getStore().getState())}onUpdate(){external_kbnSharedDeps_Lodash_default.a.isEqual(this.input.timeRange,this._prevTimeRange)&&external_kbnSharedDeps_Lodash_default.a.isEqual(this.input.query,this._prevQuery)&&data_public_.esFilters.onlyDisabledFiltersChanged(this.input.filters,this._prevFilters)&&this.input.searchSessionId===this._prevSearchSessionId||this._dispatchSetQuery({forceRefresh:!1}),this.input.refreshConfig&&!external_kbnSharedDeps_Lodash_default.a.isEqual(this.input.refreshConfig,this._prevRefreshConfig)&&this._dispatchSetRefreshConfig(this.input.refreshConfig),this.input.syncColors!==this._prevSyncColors&&this._dispatchSetChartsPaletteServiceGetColor(this.input.syncColors);const isRestore=getIsRestore(this.input.searchSessionId);isRestore!==this._prevIsRestore&&(this._prevIsRestore=isRestore,this._savedMap.getStore().dispatch(Object(public_actions.Cb)({disableInteractive:isRestore,hideToolbarOverlay:isRestore})))}_dispatchSetQuery({forceRefresh:forceRefresh}){this._prevTimeRange=this.input.timeRange,this._prevQuery=this.input.query,this._prevFilters=this.input.filters,this._prevSearchSessionId=this.input.searchSessionId;const enabledFilters=this.input.filters?this.input.filters.filter(filter=>!filter.meta.disabled):[];this._savedMap.getStore().dispatch(Object(public_actions.Fb)({filters:enabledFilters,query:this.input.query,timeFilters:this.input.timeRange,forceRefresh:forceRefresh,searchSessionId:this.input.searchSessionId,searchSessionMapBuffer:getIsRestore(this.input.searchSessionId)?this.input.mapBuffer:void 0}))}_dispatchSetRefreshConfig(refreshConfig){this._prevRefreshConfig=refreshConfig,this._savedMap.getStore().dispatch(Object(public_actions.Hb)({isPaused:refreshConfig.pause,interval:refreshConfig.value}))}async _dispatchSetChartsPaletteServiceGetColor(syncColors){this._prevSyncColors=syncColors;const chartsPaletteServiceGetColor=syncColors?await Object(kibana_services.b)():null;syncColors===this._prevSyncColors&&this._savedMap.getStore().dispatch(Object(non_serializable_instances.g)(chartsPaletteServiceGetColor))}render(domNode){if(this._domNode=domNode,!this._isInitialized)return;const I18nContext=Object(kibana_services.e)().Context;Object(external_kbnSharedDeps_ReactDom_.render)(external_kbnSharedDeps_React_default.a.createElement(lib.Provider,{store:this._savedMap.getStore()},external_kbnSharedDeps_React_default.a.createElement(I18nContext,null,external_kbnSharedDeps_React_default.a.createElement(map_container_connected,{onSingleValueTrigger:this.onSingleValueTrigger,addFilters:this.input.hideFilterActions?null:this.addFilters,getFilterActions:this.getFilterActions,getActionContext:this.getActionContext,renderTooltipContent:this._renderTooltipContent,title:this.getTitle(),description:this.getDescription()}))),this._domNode)}setLayerList(layerList){this._savedMap.getStore().dispatch(Object(public_actions.sb)(layerList)),this._getIndexPatterns().then(indexPatterns=>{this.updateOutput({...this.getOutput(),indexPatterns:indexPatterns})})}async _getIndexPatterns(){const queryableIndexPatternIds=Object(map_selectors.x)(this._savedMap.getStore().getState());return await Object(index_pattern_util.e)(queryableIndexPatternIds)}destroy(){super.destroy(),this._isActive=!1,this._unsubscribeFromStore&&this._unsubscribeFromStore(),this._domNode&&Object(external_kbnSharedDeps_ReactDom_.unmountComponentAtNode)(this._domNode),this._subscription&&this._subscription.unsubscribe()}reload(){this._dispatchSetQuery({forceRefresh:!0})}_handleStoreChanges(){if(!this._isActive)return;const center=Object(map_selectors.o)(this._savedMap.getStore().getState()),zoom=Object(map_selectors.t)(this._savedMap.getStore().getState()),mapCenter=this.input.mapCenter||void 0;mapCenter&&mapCenter.lat===center.lat&&mapCenter.lon===center.lon&&mapCenter.zoom===zoom||this.updateInput({mapCenter:{lat:center.lat,lon:center.lon,zoom:zoom},mapBuffer:Object(map_selectors.n)(this._savedMap.getStore().getState())});const isLayerTOCOpen=Object(ui_selectors.c)(this._savedMap.getStore().getState());this.input.isLayerTOCOpen!==isLayerTOCOpen&&this.updateInput({isLayerTOCOpen:isLayerTOCOpen});const openTOCDetails=Object(ui_selectors.e)(this._savedMap.getStore().getState());external_kbnSharedDeps_Lodash_default.a.isEqual(this.input.openTOCDetails,openTOCDetails)||this.updateInput({openTOCDetails:openTOCDetails});const hiddenLayerIds=Object(map_selectors.i)(this._savedMap.getStore().getState());external_kbnSharedDeps_Lodash_default.a.isEqual(this.input.hiddenLayers,hiddenLayerIds)||this.updateInput({hiddenLayers:hiddenLayerIds})}}var is_metric_countable=__webpack_require__(143);const create_tile_map_layer_descriptor_defaultDynamicProperties=Object(vector_style_defaults.g)();function isHeatmap(mapType){return"heatmap"===mapType.toLowerCase()}function create_tile_map_layer_descriptor_getGeoGridRequestType(mapType){return isHeatmap(mapType)?constants.RENDER_AS.HEATMAP:"shaded geohash grid"===mapType.toLowerCase()?constants.RENDER_AS.GRID:constants.RENDER_AS.POINT}function createTileMapLayerDescriptor({label:label,mapType:mapType,colorSchema:colorSchema,indexPatternId:indexPatternId,geoFieldName:geoFieldName,metricAgg:metricAgg,metricFieldName:metricFieldName}){if(!indexPatternId||!geoFieldName)return null;const metricsDescriptor=function(mapType,metricAgg,metricFieldName){const aggTypeKey=Object.keys(constants.AGG_TYPE).find(key=>constants.AGG_TYPE[key]===metricAgg),aggType=aggTypeKey?constants.AGG_TYPE[aggTypeKey]:void 0;return!aggType||aggType===constants.AGG_TYPE.COUNT||!metricFieldName||isHeatmap(mapType)&&!Object(is_metric_countable.a)(aggType)?{type:constants.AGG_TYPE.COUNT}:aggType===constants.AGG_TYPE.PERCENTILE?{type:aggType,field:metricFieldName,percentile:constants.DEFAULT_PERCENTILE}:{type:aggType,field:metricFieldName}}(mapType,metricAgg,metricFieldName),geoGridSourceDescriptor=es_geo_grid_source.a.createDescriptor({indexPatternId:indexPatternId,geoField:geoFieldName,metrics:[metricsDescriptor],requestType:create_tile_map_layer_descriptor_getGeoGridRequestType(mapType),resolution:constants.GRID_RESOLUTION.MOST_FINE});if(isHeatmap(mapType))return heatmap_layer.a.createDescriptor({label:label,sourceDescriptor:geoGridSourceDescriptor});const metricStyleField={name:Object(get_agg_key.b)({aggType:metricsDescriptor.type,aggFieldName:"field"in metricsDescriptor?metricsDescriptor.field:""}),origin:constants.FIELD_ORIGIN.SOURCE},colorPallette=color_palettes.e.find(pallette=>pallette.value.toLowerCase()===colorSchema.toLowerCase()),styleProperties={[constants.VECTOR_STYLES.FILL_COLOR]:{type:constants.STYLE_TYPE.DYNAMIC,options:{...create_tile_map_layer_descriptor_defaultDynamicProperties[constants.VECTOR_STYLES.FILL_COLOR].options,field:metricStyleField,color:colorPallette?colorPallette.value:"Yellow to Red",type:constants.COLOR_MAP_TYPE.ORDINAL,fieldMetaOptions:{...create_tile_map_layer_descriptor_defaultDynamicProperties[constants.VECTOR_STYLES.FILL_COLOR].options.fieldMetaOptions,isEnabled:!1}}},[constants.VECTOR_STYLES.LINE_COLOR]:{type:constants.STYLE_TYPE.STATIC,options:{color:"#3d3d3d"}}};return"scaled circle markers"===mapType.toLowerCase()&&(styleProperties[constants.VECTOR_STYLES.ICON_SIZE]={type:constants.STYLE_TYPE.DYNAMIC,options:{...create_tile_map_layer_descriptor_defaultDynamicProperties[constants.VECTOR_STYLES.ICON_SIZE].options,maxSize:18,field:metricStyleField,fieldMetaOptions:{...create_tile_map_layer_descriptor_defaultDynamicProperties[constants.VECTOR_STYLES.ICON_SIZE].options.fieldMetaOptions,isEnabled:!1}}}),vector_layer.a.createDescriptor({label:label,sourceDescriptor:geoGridSourceDescriptor,style:vector_style.a.createDescriptor(styleProperties)})}const create_region_map_layer_descriptor_defaultDynamicProperties=Object(vector_style_defaults.g)();function createRegionMapLayerDescriptor({label:label,emsLayerId:emsLayerId,leftFieldName:leftFieldName,termsFieldName:termsFieldName,termsSize:termsSize,colorSchema:colorSchema,indexPatternId:indexPatternId,indexPatternTitle:indexPatternTitle,metricAgg:metricAgg,metricFieldName:metricFieldName}){if(!(indexPatternId&&emsLayerId&&leftFieldName&&termsFieldName))return null;const metricsDescriptor=function(metricAgg,metricFieldName){const aggTypeKey=Object.keys(constants.AGG_TYPE).find(key=>constants.AGG_TYPE[key]===metricAgg),aggType=aggTypeKey?constants.AGG_TYPE[aggTypeKey]:void 0;return aggType&&aggType!==constants.AGG_TYPE.COUNT&&metricFieldName?aggType===constants.AGG_TYPE.PERCENTILE?{type:aggType,field:metricFieldName,percentile:50}:{type:aggType,field:metricFieldName}:{type:constants.AGG_TYPE.COUNT}}(metricAgg,metricFieldName),joinId=v4_default()(),joinKey=Object(get_agg_key.a)({aggType:metricsDescriptor.type,aggFieldName:"field"in metricsDescriptor?metricsDescriptor.field:"",rightSourceId:joinId}),colorPallette=color_palettes.e.find(pallette=>pallette.value.toLowerCase()===colorSchema.toLowerCase()),termSourceDescriptor={type:constants.SOURCE_TYPES.ES_TERM_SOURCE,id:joinId,indexPatternId:indexPatternId,indexPatternTitle:indexPatternTitle||indexPatternId,term:termsFieldName,metrics:[metricsDescriptor],applyGlobalQuery:!0,applyGlobalTime:!0};return void 0!==termsSize&&(termSourceDescriptor.size=termsSize),vector_layer.a.createDescriptor({label:label,joins:[{leftField:leftFieldName,right:termSourceDescriptor}],sourceDescriptor:ems_file_source_EMSFileSource.createDescriptor({id:emsLayerId,tooltipProperties:["name",leftFieldName]}),style:vector_style.a.createDescriptor({[constants.VECTOR_STYLES.FILL_COLOR]:{type:constants.STYLE_TYPE.DYNAMIC,options:{...create_region_map_layer_descriptor_defaultDynamicProperties[constants.VECTOR_STYLES.FILL_COLOR].options,field:{name:joinKey,origin:constants.FIELD_ORIGIN.JOIN},color:colorPallette?colorPallette.value:"Yellow to Red",type:constants.COLOR_MAP_TYPE.ORDINAL,fieldMetaOptions:{...create_region_map_layer_descriptor_defaultDynamicProperties[constants.VECTOR_STYLES.FILL_COLOR].options.fieldMetaOptions,isEnabled:!1}}}})})}var common=__webpack_require__(397);const wellKnownColumnNames=[{regex:/(geo\.){0,}country_iso_code$/i,emsConfig:{layerId:common.emsWorldLayerId,field:"iso2"}},{regex:/(geo\.){0,}region_iso_code$/i,emsConfig:{layerId:common.emsRegionLayerId,field:"region_iso_code"}},{regex:/^country/i,emsConfig:{layerId:common.emsWorldLayerId,field:"name"}}],wellKnownColumnFormats=[{regex:/(^\d{5}$)/i,emsConfig:{layerId:common.emsUsaZipLayerId,field:"zip"}}];async function suggestEMSTermJoinConfig(sampleValuesConfig){const matches=[];var columnName,values;sampleValuesConfig.sampleValuesColumnName&&matches.push(...(columnName=sampleValuesConfig.sampleValuesColumnName,wellKnownColumnNames.filter(wellknown=>columnName.match(wellknown.regex)).map(m=>m.emsConfig))),sampleValuesConfig.sampleValues&&sampleValuesConfig.sampleValues.length&&(sampleValuesConfig.emsLayerIds&&sampleValuesConfig.emsLayerIds.length?matches.push(...await async function(emsLayerIds,values){const matches=[];for(const emsLayerId of emsLayerIds){const layerIdMathes=await getMatchesForEMSLayer(emsLayerId,values);matches.push(...layerIdMathes)}return matches}(sampleValuesConfig.emsLayerIds,sampleValuesConfig.sampleValues)):matches.push(...(values=sampleValuesConfig.sampleValues,wellKnownColumnFormats.filter(wellknown=>{for(let i=0;i<values.length;i++)if(!values[i].toString().match(wellknown.regex))return!1;return!0}).map(m=>m.emsConfig))));const uniqMatches=matches.reduce((accum,match)=>{const found=accum.find(m=>m.config.layerId===match.layerId&&m.config.field===match.layerId);return found?found.count+=1:accum.push({config:match,count:1}),accum},[]);return uniqMatches.sort((a,b)=>b.count-a.count),uniqMatches.length?uniqMatches[0].config:null}function existsInEMS(emsJson,emsFieldId,sampleValue){for(let i=0;i<emsJson.features.length;i++){if(emsJson.features[i].properties[emsFieldId].toString().toString()===sampleValue)return!0}return!1}function matchesEmsField(emsJson,emsFieldId,sampleValues){for(let j=0;j<sampleValues.length;j++){if(!existsInEMS(emsJson,emsFieldId,sampleValues[j].toString()))return!1}return!0}async function getMatchesForEMSLayer(emsLayerId,sampleValues){const emsFileLayer=(await Object(util.b)()).find(fl=>fl.hasId(emsLayerId));if(!emsFileLayer)return[];const emsFields=emsFileLayer.getFields(),url=emsFileLayer.getDefaultFormatUrl();try{const emsJson=await Object(util.a)(url,emsFileLayer.getDefaultFormatType(),"data"),matches=[];for(let f=0;f<emsFields.length;f++)matchesEmsField(emsJson,emsFields[f].id,sampleValues)&&matches.push({layerId:emsLayerId,field:emsFields[f].id});return matches}catch(e){return[]}}}])]);