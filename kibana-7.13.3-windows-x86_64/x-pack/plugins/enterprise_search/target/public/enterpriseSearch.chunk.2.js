/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.enterpriseSearch_bundle_jsonpfunction=window.enterpriseSearch_bundle_jsonpfunction||[]).push([[2],{21:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return FlashMessages})),__webpack_require__.d(__webpack_exports__,"b",(function(){return FlashMessagesLogic})),__webpack_require__.d(__webpack_exports__,"f",(function(){return mountFlashMessagesLogic})),__webpack_require__.d(__webpack_exports__,"d",(function(){return flashAPIErrors})),__webpack_require__.d(__webpack_exports__,"j",(function(){return setSuccessMessage})),__webpack_require__.d(__webpack_exports__,"g",(function(){return setErrorMessage})),__webpack_require__.d(__webpack_exports__,"i",(function(){return setQueuedSuccessMessage})),__webpack_require__.d(__webpack_exports__,"h",(function(){return setQueuedErrorMessage})),__webpack_require__.d(__webpack_exports__,"e",(function(){return flashErrorToast})),__webpack_require__.d(__webpack_exports__,"c",(function(){return clearFlashMessages}));var external_kbnSharedDeps_React_=__webpack_require__(8),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),index_cjs=__webpack_require__(16),external_kbnSharedDeps_ElasticEui_=__webpack_require__(9);const FLASH_MESSAGE_TYPES={success:{color:"success",iconType:"check"},info:{color:"primary",iconType:"iInCircle"},warning:{color:"warning",iconType:"alert"},error:{color:"danger",iconType:"alert"}};var kibana=__webpack_require__(26);const convertToArray=messages=>Array.isArray(messages)?messages:[messages],FlashMessagesLogic=Object(index_cjs.kea)({path:["enterprise_search","flash_messages_logic"],actions:{setFlashMessages:messages=>({messages:convertToArray(messages)}),clearFlashMessages:()=>null,setQueuedMessages:messages=>({messages:convertToArray(messages)}),clearQueuedMessages:()=>null,addToastMessage:newToast=>({newToast:newToast}),dismissToastMessage:removedToast=>({removedToast:removedToast}),clearToastMessages:()=>null,setHistoryListener:historyListener=>({historyListener:historyListener})},reducers:{messages:[[],{setFlashMessages:(_,{messages:messages})=>messages,clearFlashMessages:()=>[]}],queuedMessages:[[],{setQueuedMessages:(_,{messages:messages})=>messages,clearQueuedMessages:()=>[]}],toastMessages:[[],{addToastMessage:(toasts,{newToast:newToast})=>[...toasts,newToast],dismissToastMessage:(toasts,{removedToast:removedToast})=>toasts.filter(({id:id})=>id!==removedToast.id),clearToastMessages:()=>[]}],historyListener:[null,{setHistoryListener:(_,{historyListener:historyListener})=>historyListener}]},events:({values:values,actions:actions})=>({afterMount:()=>{const unlisten=kibana.a.values.history.listen(()=>{actions.clearFlashMessages(),actions.setFlashMessages(values.queuedMessages),actions.clearQueuedMessages()});actions.setHistoryListener(unlisten)},beforeUnmount:()=>{const{historyListener:removeHistoryListener}=values;removeHistoryListener&&removeHistoryListener()}})}),mountFlashMessagesLogic=()=>FlashMessagesLogic.mount(),FlashMessages=({children:children})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(Callouts,null,children),external_kbnSharedDeps_React_default.a.createElement(Toasts,null)),Callouts=({children:children})=>{const{messages:messages}=Object(index_cjs.useValues)(FlashMessagesLogic);return external_kbnSharedDeps_React_default.a.createElement("div",{"aria-live":"polite",role:"region","data-test-subj":"FlashMessages"},messages.map(({type:type,message:message,description:description},index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,{key:index},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{color:FLASH_MESSAGE_TYPES[type].color,iconType:FLASH_MESSAGE_TYPES[type].iconType,title:message},description),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null))),children)},Toasts=()=>{const{toastMessages:toastMessages}=Object(index_cjs.useValues)(FlashMessagesLogic),{dismissToastMessage:dismissToastMessage}=Object(index_cjs.useActions)(FlashMessagesLogic);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiGlobalToastList,{toasts:toastMessages,dismissToast:dismissToastMessage,toastLifeTimeMs:5e3})};__webpack_require__(75);const flashAPIErrors=(error,{isQueued:isQueued}={})=>{var _error$body,_error$body$attribute,_error$body2,_error$body3;const errorFlashMessages=Array.isArray(null==error||null===(_error$body=error.body)||void 0===_error$body||null===(_error$body$attribute=_error$body.attributes)||void 0===_error$body$attribute?void 0:_error$body$attribute.errors)?error.body.attributes.errors.map(message=>({type:"error",message:message})):[{type:"error",message:(null==error||null===(_error$body2=error.body)||void 0===_error$body2?void 0:_error$body2.message)||"An unexpected error occurred"}];if(isQueued?FlashMessagesLogic.actions.setQueuedMessages(errorFlashMessages):FlashMessagesLogic.actions.setFlashMessages(errorFlashMessages),null==error||null===(_error$body3=error.body)||void 0===_error$body3||!_error$body3.message)throw error},setSuccessMessage=message=>{FlashMessagesLogic.actions.setFlashMessages({type:"success",message:message})},setErrorMessage=message=>{FlashMessagesLogic.actions.setFlashMessages({type:"error",message:message})},setQueuedSuccessMessage=message=>{FlashMessagesLogic.actions.setQueuedMessages({type:"success",message:message})},setQueuedErrorMessage=message=>{FlashMessagesLogic.actions.setQueuedMessages({type:"error",message:message})},clearFlashMessages=()=>{FlashMessagesLogic.actions.clearFlashMessages()},flashErrorToast=(message,toastOptions={})=>{FlashMessagesLogic.actions.addToastMessage({...FLASH_MESSAGE_TYPES.error,...toastOptions,title:message,id:(null==toastOptions?void 0:toastOptions.id)||"errorToast-"+Date.now()})}},37:function(module,__webpack_exports__,__webpack_require__){"use strict";var _external_url__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(44);__webpack_require__.d(__webpack_exports__,"a",(function(){return _external_url__WEBPACK_IMPORTED_MODULE_0__.a})),__webpack_require__.d(__webpack_exports__,"c",(function(){return _external_url__WEBPACK_IMPORTED_MODULE_0__.c})),__webpack_require__.d(__webpack_exports__,"b",(function(){return _external_url__WEBPACK_IMPORTED_MODULE_0__.b})),__webpack_require__.d(__webpack_exports__,"d",(function(){return _external_url__WEBPACK_IMPORTED_MODULE_0__.d}))},43:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return LicensingLogic})),__webpack_require__.d(__webpack_exports__,"b",(function(){return mountLicensingLogic}));var index_cjs=__webpack_require__(16);const LicensingLogic=Object(index_cjs.kea)({path:["enterprise_search","licensing_logic"],actions:{setLicense:license=>license,setLicenseSubscription:licenseSubscription=>licenseSubscription},reducers:{license:[null,{setLicense:(_,license)=>license}],licenseSubscription:[null,{setLicenseSubscription:(_,licenseSubscription)=>licenseSubscription}]},selectors:{hasPlatinumLicense:[selectors=>[selectors.license],license=>(null==license?void 0:license.isActive)&&["platinum","enterprise","trial"].includes(null==license?void 0:license.type)],hasGoldLicense:[selectors=>[selectors.license],license=>(null==license?void 0:license.isActive)&&["gold","platinum","enterprise","trial"].includes(null==license?void 0:license.type)]},events:({props:props,actions:actions,values:values})=>({afterMount:()=>{const licenseSubscription=props.license$.subscribe(async license=>{actions.setLicense(license)});actions.setLicenseSubscription(licenseSubscription)},beforeUnmount:()=>{values.licenseSubscription&&values.licenseSubscription.unsubscribe()}})}),mountLicensingLogic=props=>{LicensingLogic(props);return LicensingLogic.mount()}},44:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return externalUrl})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getEnterpriseSearchUrl})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getAppSearchUrl})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getWorkplaceSearchUrl}));const externalUrl={_enterpriseSearchUrl:"",get enterpriseSearchUrl(){return this._enterpriseSearchUrl},set enterpriseSearchUrl(value){this._enterpriseSearchUrl||(this._enterpriseSearchUrl=value)}},getEnterpriseSearchUrl=(path="")=>externalUrl.enterpriseSearchUrl+path,getAppSearchUrl=(path="")=>getEnterpriseSearchUrl("/as"+path),getWorkplaceSearchUrl=(path="")=>getEnterpriseSearchUrl("/ws"+path)},75:function(module,exports){},894:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"renderApp",(function(){return renderApp})),__webpack_require__.d(__webpack_exports__,"renderHeaderActions",(function(){return renderHeaderActions}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(14),react_dom__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__),react_redux__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(143),react_router_dom__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(11),kea__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(16),_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10),_shared_enterprise_search_url__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(37),_shared_flash_messages__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(21),_shared_http__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(22),_shared_kibana__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(26),_shared_licensing__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(43);const renderApp=(App,{params:params,core:core,plugins:plugins},{config:config,data:data})=>{const{publicUrl:publicUrl,errorConnecting:errorConnecting,...initialData}=data;_shared_enterprise_search_url__WEBPACK_IMPORTED_MODULE_6__.a.enterpriseSearchUrl=publicUrl||config.host||"",Object(kea__WEBPACK_IMPORTED_MODULE_4__.resetContext)({createStore:!0});const store=Object(kea__WEBPACK_IMPORTED_MODULE_4__.getContext)().store,unmountKibanaLogic=Object(_shared_kibana__WEBPACK_IMPORTED_MODULE_9__.b)({config:config,charts:plugins.charts,cloud:plugins.cloud||{},history:params.history,navigateToUrl:core.application.navigateToUrl,setBreadcrumbs:core.chrome.setBreadcrumbs,setChromeIsVisible:core.chrome.setIsVisible,setDocTitle:core.chrome.docTitle.change,renderHeaderActions:HeaderActions=>params.setHeaderActionMenu(el=>renderHeaderActions(HeaderActions,store,el))}),unmountLicensingLogic=Object(_shared_licensing__WEBPACK_IMPORTED_MODULE_10__.b)({license$:plugins.licensing.license$}),unmountHttpLogic=Object(_shared_http__WEBPACK_IMPORTED_MODULE_8__.b)({http:core.http,errorConnecting:errorConnecting,readOnlyMode:initialData.readOnlyMode}),unmountFlashMessagesLogic=Object(_shared_flash_messages__WEBPACK_IMPORTED_MODULE_7__.f)();return react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.render(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_5__.I18nProvider,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_redux__WEBPACK_IMPORTED_MODULE_2__.Provider,{store:store},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_3__.Router,{history:params.history},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(App,initialData)))),params.element),()=>{react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.unmountComponentAtNode(params.element),unmountKibanaLogic(),unmountLicensingLogic(),unmountHttpLogic(),unmountFlashMessagesLogic()}},renderHeaderActions=(HeaderActions,store,kibanaHeaderEl)=>(react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.render(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_redux__WEBPACK_IMPORTED_MODULE_2__.Provider,{store:store},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(HeaderActions,null)),kibanaHeaderEl),()=>react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.unmountComponentAtNode(kibanaHeaderEl))}}]);