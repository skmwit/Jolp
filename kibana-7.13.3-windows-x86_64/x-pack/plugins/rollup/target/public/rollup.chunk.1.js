/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.rollup_bundle_jsonpfunction=window.rollup_bundle_jsonpfunction||[]).push([[1],Array(27).concat([function(module,exports){module.exports=function(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(27);exports.__esModule=!0,exports.default=exports.ReactReduxContext=void 0;var ReactReduxContext=_interopRequireDefault(__webpack_require__(3)).default.createContext(null);exports.ReactReduxContext=ReactReduxContext;var _default=ReactReduxContext;exports.default=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(27);exports.__esModule=!0;var _Provider=_interopRequireDefault(__webpack_require__(47));exports.Provider=_Provider.default;var _connectAdvanced=_interopRequireDefault(__webpack_require__(38));exports.connectAdvanced=_connectAdvanced.default;var _Context=__webpack_require__(28);exports.ReactReduxContext=_Context.ReactReduxContext;var _connect=_interopRequireDefault(__webpack_require__(54));exports.connect=_connect.default;var _useDispatch=__webpack_require__(65);exports.useDispatch=_useDispatch.useDispatch,exports.createDispatchHook=_useDispatch.createDispatchHook;var _useSelector=__webpack_require__(66);exports.useSelector=_useSelector.useSelector,exports.createSelectorHook=_useSelector.createSelectorHook;var _useStore=__webpack_require__(45);exports.useStore=_useStore.useStore,exports.createStoreHook=_useStore.createStoreHook;var _batch=__webpack_require__(37),_reactBatchedUpdates=__webpack_require__(67);exports.batch=_reactBatchedUpdates.unstable_batchedUpdates;var _shallowEqual=_interopRequireDefault(__webpack_require__(41));exports.shallowEqual=_shallowEqual.default,(0,_batch.setBatch)(_reactBatchedUpdates.unstable_batchedUpdates)},function(module,exports,__webpack_require__){"use strict";var memo,isOldIE=function(){return void 0===memo&&(memo=Boolean(window&&document&&document.all&&!window.atob)),memo},getTarget=function(){var memo={};return function(target){if(void 0===memo[target]){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}}(),stylesInDom=[];function getIndexByIdentifier(identifier){for(var result=-1,i=0;i<stylesInDom.length;i++)if(stylesInDom[i].identifier===identifier){result=i;break}return result}function modulesToDom(list,options){for(var idCountMap={},identifiers=[],i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],count=idCountMap[id]||0,identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier),obj={css:item[1],media:item[2],sourceMap:item[3]};-1!==index?(stylesInDom[index].references++,stylesInDom[index].updater(obj)):stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1}),identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style"),attributes=options.attributes||{};if(void 0===attributes.nonce){var nonce=__webpack_require__.nc;nonce&&(attributes.nonce=nonce)}if(Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])})),"function"==typeof options.insert)options.insert(style);else{var target=getTarget(options.insert||"head");if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");target.appendChild(style)}return style}var textStore,replaceText=(textStore=[],function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")});function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}function applyToTag(style,options,obj){var css=obj.css,media=obj.media,sourceMap=obj.sourceMap;if(media?style.setAttribute("media",media):style.removeAttribute("media"),sourceMap&&btoa&&(css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")),style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}var singleton=null,singletonCounter=0;function addStyle(obj,options){var style,update,remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else style=insertStyleElement(options),update=applyToTag.bind(null,style,options),remove=function(){!function(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style)}(style)};return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}module.exports=function(list,options){(options=options||{}).singleton||"boolean"==typeof options.singleton||(options.singleton=isOldIE());var lastIdentifiers=modulesToDom(list=list||[],options);return function(newList){if(newList=newList||[],"[object Array]"===Object.prototype.toString.call(newList)){for(var i=0;i<lastIdentifiers.length;i++){var index=getIndexByIdentifier(lastIdentifiers[i]);stylesInDom[index].references--}for(var newLastIdentifiers=modulesToDom(newList,options),_i=0;_i<lastIdentifiers.length;_i++){var _index=getIndexByIdentifier(lastIdentifiers[_i]);0===stylesInDom[_index].references&&(stylesInDom[_index].updater(),stylesInDom.splice(_index,1))}lastIdentifiers=newLastIdentifiers}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];return list.toString=function(){return this.map((function(item){var content=function(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=(sourceMap=cssMapping,base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64),"/*# ".concat(data," */")),sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}var sourceMap,base64,data;return[content].join("\n")}(item,useSourceMap);return item[2]?"@media ".concat(item[2]," {").concat(content,"}"):content})).join("")},list.i=function(modules,mediaQuery,dedupe){"string"==typeof modules&&(modules=[[null,modules,""]]);var alreadyImportedModules={};if(dedupe)for(var i=0;i<this.length;i++){var id=this[i][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);dedupe&&alreadyImportedModules[item[0]]||(mediaQuery&&(item[2]?item[2]="".concat(mediaQuery," and ").concat(item[2]):item[2]=mediaQuery),list.push(item))}},list}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;var _batch=__webpack_require__(37),nullListeners={notify:function(){}};var Subscription=function(){function Subscription(store,parentSub){this.store=store,this.parentSub=parentSub,this.unsubscribe=null,this.listeners=nullListeners,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var _proto=Subscription.prototype;return _proto.addNestedSub=function(listener){return this.trySubscribe(),this.listeners.subscribe(listener)},_proto.notifyNestedSubs=function(){this.listeners.notify()},_proto.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},_proto.isSubscribed=function(){return Boolean(this.unsubscribe)},_proto.trySubscribe=function(){var batch,first,last;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=(batch=(0,_batch.getBatch)(),first=null,last=null,{clear:function(){first=null,last=null},notify:function(){batch((function(){for(var listener=first;listener;)listener.callback(),listener=listener.next}))},get:function(){for(var listeners=[],listener=first;listener;)listeners.push(listener),listener=listener.next;return listeners},subscribe:function(callback){var isSubscribed=!0,listener=last={callback:callback,next:null,prev:last};return listener.prev?listener.prev.next=listener:first=listener,function(){isSubscribed&&null!==first&&(isSubscribed=!1,listener.next?listener.next.prev=listener.prev:last=listener.prev,listener.prev?listener.prev.next=listener.next:first=listener.next)}}}))},_proto.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=nullListeners)},Subscription}();exports.default=Subscription},function(module,exports){function _extends(){return module.exports=_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}module.exports=_extends},function(module,exports){module.exports=function(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ex,$$observable=(ex=__webpack_require__(56))&&"object"==typeof ex&&"default"in ex?ex.default:ex,randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject(obj){if("object"!=typeof obj||null===obj)return!1;for(var proto=obj;null!==Object.getPrototypeOf(proto);)proto=Object.getPrototypeOf(proto);return Object.getPrototypeOf(obj)===proto}function getUndefinedStateErrorMessage(key,action){var actionType=action&&action.type;return"Given "+(actionType&&'action "'+String(actionType)+'"'||"an action")+', reducer "'+key+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function bindActionCreator(actionCreator,dispatch){return function(){return dispatch(actionCreator.apply(this,arguments))}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);return Object.getOwnPropertySymbols&&keys.push.apply(keys,Object.getOwnPropertySymbols(object)),enumerableOnly&&(keys=keys.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function compose(){for(var _len=arguments.length,funcs=new Array(_len),_key=0;_key<_len;_key++)funcs[_key]=arguments[_key];return 0===funcs.length?function(arg){return arg}:1===funcs.length?funcs[0]:funcs.reduce((function(a,b){return function(){return a(b.apply(void 0,arguments))}}))}exports.__DO_NOT_USE__ActionTypes=ActionTypes,exports.applyMiddleware=function(){for(var _len=arguments.length,middlewares=new Array(_len),_key=0;_key<_len;_key++)middlewares[_key]=arguments[_key];return function(createStore){return function(){var store=createStore.apply(void 0,arguments),_dispatch=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},middlewareAPI={getState:store.getState,dispatch:function(){return _dispatch.apply(void 0,arguments)}},chain=middlewares.map((function(middleware){return middleware(middlewareAPI)}));return _objectSpread2({},store,{dispatch:_dispatch=compose.apply(void 0,chain)(store.dispatch)})}}},exports.bindActionCreators=function(actionCreators,dispatch){if("function"==typeof actionCreators)return bindActionCreator(actionCreators,dispatch);if("object"!=typeof actionCreators||null===actionCreators)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===actionCreators?"null":typeof actionCreators)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var boundActionCreators={};for(var key in actionCreators){var actionCreator=actionCreators[key];"function"==typeof actionCreator&&(boundActionCreators[key]=bindActionCreator(actionCreator,dispatch))}return boundActionCreators},exports.combineReducers=function(reducers){for(var reducerKeys=Object.keys(reducers),finalReducers={},i=0;i<reducerKeys.length;i++){var key=reducerKeys[i];0,"function"==typeof reducers[key]&&(finalReducers[key]=reducers[key])}var shapeAssertionError,finalReducerKeys=Object.keys(finalReducers);try{!function(reducers){Object.keys(reducers).forEach((function(key){var reducer=reducers[key];if(void 0===reducer(void 0,{type:ActionTypes.INIT}))throw new Error('Reducer "'+key+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===reducer(void 0,{type:ActionTypes.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+key+"\" returned undefined when probed with a random type. Don't try to handle "+ActionTypes.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(finalReducers)}catch(e){shapeAssertionError=e}return function(state,action){if(void 0===state&&(state={}),shapeAssertionError)throw shapeAssertionError;for(var hasChanged=!1,nextState={},_i=0;_i<finalReducerKeys.length;_i++){var _key=finalReducerKeys[_i],reducer=finalReducers[_key],previousStateForKey=state[_key],nextStateForKey=reducer(previousStateForKey,action);if(void 0===nextStateForKey){var errorMessage=getUndefinedStateErrorMessage(_key,action);throw new Error(errorMessage)}nextState[_key]=nextStateForKey,hasChanged=hasChanged||nextStateForKey!==previousStateForKey}return(hasChanged=hasChanged||finalReducerKeys.length!==Object.keys(state).length)?nextState:state}},exports.compose=compose,exports.createStore=function createStore(reducer,preloadedState,enhancer){var _ref2;if("function"==typeof preloadedState&&"function"==typeof enhancer||"function"==typeof enhancer&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof preloadedState&&void 0===enhancer&&(enhancer=preloadedState,preloadedState=void 0),void 0!==enhancer){if("function"!=typeof enhancer)throw new Error("Expected the enhancer to be a function.");return enhancer(createStore)(reducer,preloadedState)}if("function"!=typeof reducer)throw new Error("Expected the reducer to be a function.");var currentReducer=reducer,currentState=preloadedState,currentListeners=[],nextListeners=currentListeners,isDispatching=!1;function ensureCanMutateNextListeners(){nextListeners===currentListeners&&(nextListeners=currentListeners.slice())}function getState(){if(isDispatching)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return currentState}function subscribe(listener){if("function"!=typeof listener)throw new Error("Expected the listener to be a function.");if(isDispatching)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var isSubscribed=!0;return ensureCanMutateNextListeners(),nextListeners.push(listener),function(){if(isSubscribed){if(isDispatching)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");isSubscribed=!1,ensureCanMutateNextListeners();var index=nextListeners.indexOf(listener);nextListeners.splice(index,1),currentListeners=null}}}function dispatch(action){if(!isPlainObject(action))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===action.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(isDispatching)throw new Error("Reducers may not dispatch actions.");try{isDispatching=!0,currentState=currentReducer(currentState,action)}finally{isDispatching=!1}for(var listeners=currentListeners=nextListeners,i=0;i<listeners.length;i++){(0,listeners[i])()}return action}function replaceReducer(nextReducer){if("function"!=typeof nextReducer)throw new Error("Expected the nextReducer to be a function.");currentReducer=nextReducer,dispatch({type:ActionTypes.REPLACE})}function observable(){var _ref,outerSubscribe=subscribe;return(_ref={subscribe:function(observer){if("object"!=typeof observer||null===observer)throw new TypeError("Expected the observer to be an object.");function observeState(){observer.next&&observer.next(getState())}return observeState(),{unsubscribe:outerSubscribe(observeState)}}})[$$observable]=function(){return this},_ref}return dispatch({type:ActionTypes.INIT}),(_ref2={dispatch:dispatch,subscribe:subscribe,getState:getState,replaceReducer:replaceReducer})[$$observable]=observable,_ref2}},function(module,exports,__webpack_require__){var _typeof=__webpack_require__(48);function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}module.exports=function(obj){if(obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.getBatch=exports.setBatch=void 0;var batch=function(callback){callback()};exports.setBatch=function(newBatch){return batch=newBatch};exports.getBatch=function(){return batch}},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(36),_interopRequireDefault=__webpack_require__(27);exports.__esModule=!0,exports.default=function(selectorFactory,_ref){void 0===_ref&&(_ref={});var _ref2=_ref,_ref2$getDisplayName=_ref2.getDisplayName,getDisplayName=void 0===_ref2$getDisplayName?function(name){return"ConnectAdvanced("+name+")"}:_ref2$getDisplayName,_ref2$methodName=_ref2.methodName,methodName=void 0===_ref2$methodName?"connectAdvanced":_ref2$methodName,_ref2$renderCountProp=_ref2.renderCountProp,renderCountProp=void 0===_ref2$renderCountProp?void 0:_ref2$renderCountProp,_ref2$shouldHandleSta=_ref2.shouldHandleStateChanges,shouldHandleStateChanges=void 0===_ref2$shouldHandleSta||_ref2$shouldHandleSta,_ref2$storeKey=_ref2.storeKey,storeKey=void 0===_ref2$storeKey?"store":_ref2$storeKey,_ref2$forwardRef=(_ref2.withRef,_ref2.forwardRef),forwardRef=void 0!==_ref2$forwardRef&&_ref2$forwardRef,_ref2$context=_ref2.context,context=void 0===_ref2$context?_Context.ReactReduxContext:_ref2$context,connectOptions=(0,_objectWithoutPropertiesLoose2.default)(_ref2,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]);0;var Context=context;return function(WrappedComponent){var wrappedComponentName=WrappedComponent.displayName||WrappedComponent.name||"Component",displayName=getDisplayName(wrappedComponentName),selectorFactoryOptions=(0,_extends2.default)({},connectOptions,{getDisplayName:getDisplayName,methodName:methodName,renderCountProp:renderCountProp,shouldHandleStateChanges:shouldHandleStateChanges,storeKey:storeKey,displayName:displayName,wrappedComponentName:wrappedComponentName,WrappedComponent:WrappedComponent}),pure=connectOptions.pure;var usePureOnlyMemo=pure?_react.useMemo:function(callback){return callback()};function ConnectFunction(props){var _useMemo=(0,_react.useMemo)((function(){var forwardedRef=props.forwardedRef,wrapperProps=(0,_objectWithoutPropertiesLoose2.default)(props,["forwardedRef"]);return[props.context,forwardedRef,wrapperProps]}),[props]),propsContext=_useMemo[0],forwardedRef=_useMemo[1],wrapperProps=_useMemo[2],ContextToUse=(0,_react.useMemo)((function(){return propsContext&&propsContext.Consumer&&(0,_reactIs.isContextConsumer)(_react.default.createElement(propsContext.Consumer,null))?propsContext:Context}),[propsContext,Context]),contextValue=(0,_react.useContext)(ContextToUse),didStoreComeFromProps=Boolean(props.store)&&Boolean(props.store.getState)&&Boolean(props.store.dispatch);Boolean(contextValue)&&Boolean(contextValue.store);var store=didStoreComeFromProps?props.store:contextValue.store,childPropsSelector=(0,_react.useMemo)((function(){return function(store){return selectorFactory(store.dispatch,selectorFactoryOptions)}(store)}),[store]),_useMemo2=(0,_react.useMemo)((function(){if(!shouldHandleStateChanges)return NO_SUBSCRIPTION_ARRAY;var subscription=new _Subscription.default(store,didStoreComeFromProps?null:contextValue.subscription),notifyNestedSubs=subscription.notifyNestedSubs.bind(subscription);return[subscription,notifyNestedSubs]}),[store,didStoreComeFromProps,contextValue]),subscription=_useMemo2[0],notifyNestedSubs=_useMemo2[1],overriddenContextValue=(0,_react.useMemo)((function(){return didStoreComeFromProps?contextValue:(0,_extends2.default)({},contextValue,{subscription:subscription})}),[didStoreComeFromProps,contextValue,subscription]),_useReducer=(0,_react.useReducer)(storeStateUpdatesReducer,EMPTY_ARRAY,initStateUpdates),previousStateUpdateResult=_useReducer[0][0],forceComponentUpdateDispatch=_useReducer[1];if(previousStateUpdateResult&&previousStateUpdateResult.error)throw previousStateUpdateResult.error;var lastChildProps=(0,_react.useRef)(),lastWrapperProps=(0,_react.useRef)(wrapperProps),childPropsFromStoreUpdate=(0,_react.useRef)(),renderIsScheduled=(0,_react.useRef)(!1),actualChildProps=usePureOnlyMemo((function(){return childPropsFromStoreUpdate.current&&wrapperProps===lastWrapperProps.current?childPropsFromStoreUpdate.current:childPropsSelector(store.getState(),wrapperProps)}),[store,previousStateUpdateResult,wrapperProps]);useIsomorphicLayoutEffectWithArgs(captureWrapperProps,[lastWrapperProps,lastChildProps,renderIsScheduled,wrapperProps,actualChildProps,childPropsFromStoreUpdate,notifyNestedSubs]),useIsomorphicLayoutEffectWithArgs(subscribeUpdates,[shouldHandleStateChanges,store,subscription,childPropsSelector,lastWrapperProps,lastChildProps,renderIsScheduled,childPropsFromStoreUpdate,notifyNestedSubs,forceComponentUpdateDispatch],[store,subscription,childPropsSelector]);var renderedWrappedComponent=(0,_react.useMemo)((function(){return _react.default.createElement(WrappedComponent,(0,_extends2.default)({},actualChildProps,{ref:forwardedRef}))}),[forwardedRef,WrappedComponent,actualChildProps]);return(0,_react.useMemo)((function(){return shouldHandleStateChanges?_react.default.createElement(ContextToUse.Provider,{value:overriddenContextValue},renderedWrappedComponent):renderedWrappedComponent}),[ContextToUse,renderedWrappedComponent,overriddenContextValue])}var Connect=pure?_react.default.memo(ConnectFunction):ConnectFunction;if(Connect.WrappedComponent=WrappedComponent,Connect.displayName=displayName,forwardRef){var forwarded=_react.default.forwardRef((function(props,ref){return _react.default.createElement(Connect,(0,_extends2.default)({},props,{forwardedRef:ref}))}));return forwarded.displayName=displayName,forwarded.WrappedComponent=WrappedComponent,(0,_hoistNonReactStatics.default)(forwarded,WrappedComponent)}return(0,_hoistNonReactStatics.default)(Connect,WrappedComponent)}};var _extends2=_interopRequireDefault(__webpack_require__(33)),_objectWithoutPropertiesLoose2=_interopRequireDefault(__webpack_require__(34)),_hoistNonReactStatics=_interopRequireDefault(__webpack_require__(52)),_react=_interopRequireWildcard(__webpack_require__(3)),_reactIs=__webpack_require__(39),_Subscription=_interopRequireDefault(__webpack_require__(32)),_useIsomorphicLayoutEffect=__webpack_require__(40),_Context=__webpack_require__(28),EMPTY_ARRAY=[],NO_SUBSCRIPTION_ARRAY=[null,null];function storeStateUpdatesReducer(state,action){var updateCount=state[1];return[action.payload,updateCount+1]}function useIsomorphicLayoutEffectWithArgs(effectFunc,effectArgs,dependencies){(0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)((function(){return effectFunc.apply(void 0,effectArgs)}),dependencies)}function captureWrapperProps(lastWrapperProps,lastChildProps,renderIsScheduled,wrapperProps,actualChildProps,childPropsFromStoreUpdate,notifyNestedSubs){lastWrapperProps.current=wrapperProps,lastChildProps.current=actualChildProps,renderIsScheduled.current=!1,childPropsFromStoreUpdate.current&&(childPropsFromStoreUpdate.current=null,notifyNestedSubs())}function subscribeUpdates(shouldHandleStateChanges,store,subscription,childPropsSelector,lastWrapperProps,lastChildProps,renderIsScheduled,childPropsFromStoreUpdate,notifyNestedSubs,forceComponentUpdateDispatch){if(shouldHandleStateChanges){var didUnsubscribe=!1,lastThrownError=null,checkForUpdates=function(){if(!didUnsubscribe){var newChildProps,error,latestStoreState=store.getState();try{newChildProps=childPropsSelector(latestStoreState,lastWrapperProps.current)}catch(e){error=e,lastThrownError=e}error||(lastThrownError=null),newChildProps===lastChildProps.current?renderIsScheduled.current||notifyNestedSubs():(lastChildProps.current=newChildProps,childPropsFromStoreUpdate.current=newChildProps,renderIsScheduled.current=!0,forceComponentUpdateDispatch({type:"STORE_UPDATED",payload:{error:error}}))}};subscription.onStateChange=checkForUpdates,subscription.trySubscribe(),checkForUpdates();return function(){if(didUnsubscribe=!0,subscription.tryUnsubscribe(),subscription.onStateChange=null,lastThrownError)throw lastThrownError}}}var initStateUpdates=function(){return[null,0]}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(53)},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.useIsomorphicLayoutEffect=void 0;var _react=__webpack_require__(3),useIsomorphicLayoutEffect="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?_react.useLayoutEffect:_react.useEffect;exports.useIsomorphicLayoutEffect=useIsomorphicLayoutEffect},function(module,exports,__webpack_require__){"use strict";function is(x,y){return x===y?0!==x||0!==y||1/x==1/y:x!=x&&y!=y}exports.__esModule=!0,exports.default=function(objA,objB){if(is(objA,objB))return!0;if("object"!=typeof objA||null===objA||"object"!=typeof objB||null===objB)return!1;var keysA=Object.keys(objA),keysB=Object.keys(objB);if(keysA.length!==keysB.length)return!1;for(var i=0;i<keysA.length;i++)if(!Object.prototype.hasOwnProperty.call(objB,keysA[i])||!is(objA[keysA[i]],objB[keysA[i]]))return!1;return!0}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(27);exports.__esModule=!0,exports.wrapMapToPropsConstant=function(getConstant){return function(dispatch,options){var constant=getConstant(dispatch,options);function constantSelector(){return constant}return constantSelector.dependsOnOwnProps=!1,constantSelector}},exports.getDependsOnOwnProps=getDependsOnOwnProps,exports.wrapMapToPropsFunc=function(mapToProps,methodName){return function(dispatch,_ref){_ref.displayName;var proxy=function(stateOrDispatch,ownProps){return proxy.dependsOnOwnProps?proxy.mapToProps(stateOrDispatch,ownProps):proxy.mapToProps(stateOrDispatch)};return proxy.dependsOnOwnProps=!0,proxy.mapToProps=function(stateOrDispatch,ownProps){proxy.mapToProps=mapToProps,proxy.dependsOnOwnProps=getDependsOnOwnProps(mapToProps);var props=proxy(stateOrDispatch,ownProps);return"function"==typeof props&&(proxy.mapToProps=props,proxy.dependsOnOwnProps=getDependsOnOwnProps(props),props=proxy(stateOrDispatch,ownProps)),props},proxy}};_interopRequireDefault(__webpack_require__(43));function getDependsOnOwnProps(mapToProps){return null!==mapToProps.dependsOnOwnProps&&void 0!==mapToProps.dependsOnOwnProps?Boolean(mapToProps.dependsOnOwnProps):1!==mapToProps.length}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(27);exports.__esModule=!0,exports.default=function(value,displayName,methodName){(0,_isPlainObject.default)(value)||(0,_warning.default)(methodName+"() in "+displayName+" must return a plain object. Instead received "+value+".")};var _isPlainObject=_interopRequireDefault(__webpack_require__(60)),_warning=_interopRequireDefault(__webpack_require__(44))},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=function(message){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(message);try{throw new Error(message)}catch(e){}}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.createStoreHook=createStoreHook,exports.useStore=void 0;var _react=__webpack_require__(3),_Context=__webpack_require__(28),_useReduxContext2=__webpack_require__(46);function createStoreHook(context){void 0===context&&(context=_Context.ReactReduxContext);var useReduxContext=context===_Context.ReactReduxContext?_useReduxContext2.useReduxContext:function(){return(0,_react.useContext)(context)};return function(){return useReduxContext().store}}var useStore=createStoreHook();exports.useStore=useStore},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.useReduxContext=function(){0;return(0,_react.useContext)(_Context.ReactReduxContext)};var _react=__webpack_require__(3),_Context=__webpack_require__(28)},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(27),_interopRequireWildcard=__webpack_require__(36);exports.__esModule=!0,exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(3)),_Context=(_interopRequireDefault(__webpack_require__(49)),__webpack_require__(28)),_Subscription=_interopRequireDefault(__webpack_require__(32));var _default=function(_ref){var store=_ref.store,context=_ref.context,children=_ref.children,contextValue=(0,_react.useMemo)((function(){var subscription=new _Subscription.default(store);return subscription.onStateChange=subscription.notifyNestedSubs,{store:store,subscription:subscription}}),[store]),previousState=(0,_react.useMemo)((function(){return store.getState()}),[store]);(0,_react.useEffect)((function(){var subscription=contextValue.subscription;return subscription.trySubscribe(),previousState!==store.getState()&&subscription.notifyNestedSubs(),function(){subscription.tryUnsubscribe(),subscription.onStateChange=null}}),[contextValue,previousState]);var Context=context||_Context.ReactReduxContext;return _react.default.createElement(Context.Provider,{value:contextValue},children)};exports.default=_default},function(module,exports){function _typeof(obj){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?module.exports=_typeof=function(obj){return typeof obj}:module.exports=_typeof=function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}module.exports=_typeof},function(module,exports,__webpack_require__){module.exports=__webpack_require__(50)()},function(module,exports,__webpack_require__){"use strict";var ReactPropTypesSecret=__webpack_require__(51);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret!==ReactPropTypesSecret){var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw err.name="Invariant Violation",err}}function getShim(){return shim}shim.isRequired=shim;var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return ReactPropTypes.PropTypes=ReactPropTypes,ReactPropTypes}},function(module,exports,__webpack_require__){"use strict";module.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(module,exports,__webpack_require__){"use strict";var reactIs=__webpack_require__(39),REACT_STATICS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KNOWN_STATICS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};function getStatics(component){return reactIs.isMemo(component)?MEMO_STATICS:TYPE_STATICS[component.$$typeof]||REACT_STATICS}TYPE_STATICS[reactIs.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;var defineProperty=Object.defineProperty,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf=Object.getPrototypeOf,objectPrototype=Object.prototype;module.exports=function hoistNonReactStatics(targetComponent,sourceComponent,blacklist){if("string"!=typeof sourceComponent){if(objectPrototype){var inheritedComponent=getPrototypeOf(sourceComponent);inheritedComponent&&inheritedComponent!==objectPrototype&&hoistNonReactStatics(targetComponent,inheritedComponent,blacklist)}var keys=getOwnPropertyNames(sourceComponent);getOwnPropertySymbols&&(keys=keys.concat(getOwnPropertySymbols(sourceComponent)));for(var targetStatics=getStatics(targetComponent),sourceStatics=getStatics(sourceComponent),i=0;i<keys.length;++i){var key=keys[i];if(!(KNOWN_STATICS[key]||blacklist&&blacklist[key]||sourceStatics&&sourceStatics[key]||targetStatics&&targetStatics[key])){var descriptor=getOwnPropertyDescriptor(sourceComponent,key);try{defineProperty(targetComponent,key,descriptor)}catch(e){}}}}return targetComponent}},function(module,exports,__webpack_require__){"use strict";
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b="function"==typeof Symbol&&Symbol.for,c=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,k=b?Symbol.for("react.context"):60110,l=b?Symbol.for("react.async_mode"):60111,m=b?Symbol.for("react.concurrent_mode"):60111,n=b?Symbol.for("react.forward_ref"):60112,p=b?Symbol.for("react.suspense"):60113,q=b?Symbol.for("react.suspense_list"):60120,r=b?Symbol.for("react.memo"):60115,t=b?Symbol.for("react.lazy"):60116,v=b?Symbol.for("react.block"):60121,w=b?Symbol.for("react.fundamental"):60117,x=b?Symbol.for("react.responder"):60118,y=b?Symbol.for("react.scope"):60119;function z(a){if("object"==typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l,exports.ConcurrentMode=m,exports.ContextConsumer=k,exports.ContextProvider=h,exports.Element=c,exports.ForwardRef=n,exports.Fragment=e,exports.Lazy=t,exports.Memo=r,exports.Portal=d,exports.Profiler=g,exports.StrictMode=f,exports.Suspense=p,exports.isAsyncMode=function(a){return A(a)||z(a)===l},exports.isConcurrentMode=A,exports.isContextConsumer=function(a){return z(a)===k},exports.isContextProvider=function(a){return z(a)===h},exports.isElement=function(a){return"object"==typeof a&&null!==a&&a.$$typeof===c},exports.isForwardRef=function(a){return z(a)===n},exports.isFragment=function(a){return z(a)===e},exports.isLazy=function(a){return z(a)===t},exports.isMemo=function(a){return z(a)===r},exports.isPortal=function(a){return z(a)===d},exports.isProfiler=function(a){return z(a)===g},exports.isStrictMode=function(a){return z(a)===f},exports.isSuspense=function(a){return z(a)===p},exports.isValidElementType=function(a){return"string"==typeof a||"function"==typeof a||a===e||a===m||a===g||a===f||a===p||a===q||"object"==typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)},exports.typeOf=z},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(27);exports.__esModule=!0,exports.createConnect=createConnect,exports.default=void 0;var _extends2=_interopRequireDefault(__webpack_require__(33)),_objectWithoutPropertiesLoose2=_interopRequireDefault(__webpack_require__(34)),_connectAdvanced=_interopRequireDefault(__webpack_require__(38)),_shallowEqual=_interopRequireDefault(__webpack_require__(41)),_mapDispatchToProps=_interopRequireDefault(__webpack_require__(55)),_mapStateToProps=_interopRequireDefault(__webpack_require__(61)),_mergeProps=_interopRequireDefault(__webpack_require__(62)),_selectorFactory=_interopRequireDefault(__webpack_require__(63));function match(arg,factories,name){for(var i=factories.length-1;i>=0;i--){var result=factories[i](arg);if(result)return result}return function(dispatch,options){throw new Error("Invalid value of type "+typeof arg+" for "+name+" argument when connecting component "+options.wrappedComponentName+".")}}function strictEqual(a,b){return a===b}function createConnect(_temp){var _ref=void 0===_temp?{}:_temp,_ref$connectHOC=_ref.connectHOC,connectHOC=void 0===_ref$connectHOC?_connectAdvanced.default:_ref$connectHOC,_ref$mapStateToPropsF=_ref.mapStateToPropsFactories,mapStateToPropsFactories=void 0===_ref$mapStateToPropsF?_mapStateToProps.default:_ref$mapStateToPropsF,_ref$mapDispatchToPro=_ref.mapDispatchToPropsFactories,mapDispatchToPropsFactories=void 0===_ref$mapDispatchToPro?_mapDispatchToProps.default:_ref$mapDispatchToPro,_ref$mergePropsFactor=_ref.mergePropsFactories,mergePropsFactories=void 0===_ref$mergePropsFactor?_mergeProps.default:_ref$mergePropsFactor,_ref$selectorFactory=_ref.selectorFactory,selectorFactory=void 0===_ref$selectorFactory?_selectorFactory.default:_ref$selectorFactory;return function(mapStateToProps,mapDispatchToProps,mergeProps,_ref2){void 0===_ref2&&(_ref2={});var _ref3=_ref2,_ref3$pure=_ref3.pure,pure=void 0===_ref3$pure||_ref3$pure,_ref3$areStatesEqual=_ref3.areStatesEqual,areStatesEqual=void 0===_ref3$areStatesEqual?strictEqual:_ref3$areStatesEqual,_ref3$areOwnPropsEqua=_ref3.areOwnPropsEqual,areOwnPropsEqual=void 0===_ref3$areOwnPropsEqua?_shallowEqual.default:_ref3$areOwnPropsEqua,_ref3$areStatePropsEq=_ref3.areStatePropsEqual,areStatePropsEqual=void 0===_ref3$areStatePropsEq?_shallowEqual.default:_ref3$areStatePropsEq,_ref3$areMergedPropsE=_ref3.areMergedPropsEqual,areMergedPropsEqual=void 0===_ref3$areMergedPropsE?_shallowEqual.default:_ref3$areMergedPropsE,extraOptions=(0,_objectWithoutPropertiesLoose2.default)(_ref3,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),initMapStateToProps=match(mapStateToProps,mapStateToPropsFactories,"mapStateToProps"),initMapDispatchToProps=match(mapDispatchToProps,mapDispatchToPropsFactories,"mapDispatchToProps"),initMergeProps=match(mergeProps,mergePropsFactories,"mergeProps");return connectHOC(selectorFactory,(0,_extends2.default)({methodName:"connect",getDisplayName:function(name){return"Connect("+name+")"},shouldHandleStateChanges:Boolean(mapStateToProps),initMapStateToProps:initMapStateToProps,initMapDispatchToProps:initMapDispatchToProps,initMergeProps:initMergeProps,pure:pure,areStatesEqual:areStatesEqual,areOwnPropsEqual:areOwnPropsEqual,areStatePropsEqual:areStatePropsEqual,areMergedPropsEqual:areMergedPropsEqual},extraOptions))}}var _default=createConnect();exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.whenMapDispatchToPropsIsFunction=whenMapDispatchToPropsIsFunction,exports.whenMapDispatchToPropsIsMissing=whenMapDispatchToPropsIsMissing,exports.whenMapDispatchToPropsIsObject=whenMapDispatchToPropsIsObject,exports.default=void 0;var _redux=__webpack_require__(35),_wrapMapToProps=__webpack_require__(42);function whenMapDispatchToPropsIsFunction(mapDispatchToProps){return"function"==typeof mapDispatchToProps?(0,_wrapMapToProps.wrapMapToPropsFunc)(mapDispatchToProps,"mapDispatchToProps"):void 0}function whenMapDispatchToPropsIsMissing(mapDispatchToProps){return mapDispatchToProps?void 0:(0,_wrapMapToProps.wrapMapToPropsConstant)((function(dispatch){return{dispatch:dispatch}}))}function whenMapDispatchToPropsIsObject(mapDispatchToProps){return mapDispatchToProps&&"object"==typeof mapDispatchToProps?(0,_wrapMapToProps.wrapMapToPropsConstant)((function(dispatch){return(0,_redux.bindActionCreators)(mapDispatchToProps,dispatch)})):void 0}var _default=[whenMapDispatchToPropsIsFunction,whenMapDispatchToPropsIsMissing,whenMapDispatchToPropsIsObject];exports.default=_default},function(module,exports,__webpack_require__){"use strict";(function(global,module){Object.defineProperty(exports,"__esModule",{value:!0});var obj,root,_ponyfill=__webpack_require__(59),_ponyfill2=(obj=_ponyfill)&&obj.__esModule?obj:{default:obj};root="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:module;var result=(0,_ponyfill2.default)(root);exports.default=result}).call(this,__webpack_require__(57),__webpack_require__(58)(module))},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(root){var result,_Symbol=root.Symbol;"function"==typeof _Symbol?_Symbol.observable?result=_Symbol.observable:(result=_Symbol("observable"),_Symbol.observable=result):result="@@observable";return result}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=function(obj){if("object"!=typeof obj||null===obj)return!1;var proto=Object.getPrototypeOf(obj);if(null===proto)return!0;var baseProto=proto;for(;null!==Object.getPrototypeOf(baseProto);)baseProto=Object.getPrototypeOf(baseProto);return proto===baseProto}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.whenMapStateToPropsIsFunction=whenMapStateToPropsIsFunction,exports.whenMapStateToPropsIsMissing=whenMapStateToPropsIsMissing,exports.default=void 0;var _wrapMapToProps=__webpack_require__(42);function whenMapStateToPropsIsFunction(mapStateToProps){return"function"==typeof mapStateToProps?(0,_wrapMapToProps.wrapMapToPropsFunc)(mapStateToProps,"mapStateToProps"):void 0}function whenMapStateToPropsIsMissing(mapStateToProps){return mapStateToProps?void 0:(0,_wrapMapToProps.wrapMapToPropsConstant)((function(){return{}}))}var _default=[whenMapStateToPropsIsFunction,whenMapStateToPropsIsMissing];exports.default=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(27);exports.__esModule=!0,exports.defaultMergeProps=defaultMergeProps,exports.wrapMergePropsFunc=wrapMergePropsFunc,exports.whenMergePropsIsFunction=whenMergePropsIsFunction,exports.whenMergePropsIsOmitted=whenMergePropsIsOmitted,exports.default=void 0;var _extends2=_interopRequireDefault(__webpack_require__(33));_interopRequireDefault(__webpack_require__(43));function defaultMergeProps(stateProps,dispatchProps,ownProps){return(0,_extends2.default)({},ownProps,{},stateProps,{},dispatchProps)}function wrapMergePropsFunc(mergeProps){return function(dispatch,_ref){_ref.displayName;var mergedProps,pure=_ref.pure,areMergedPropsEqual=_ref.areMergedPropsEqual,hasRunOnce=!1;return function(stateProps,dispatchProps,ownProps){var nextMergedProps=mergeProps(stateProps,dispatchProps,ownProps);return hasRunOnce?pure&&areMergedPropsEqual(nextMergedProps,mergedProps)||(mergedProps=nextMergedProps):(hasRunOnce=!0,mergedProps=nextMergedProps),mergedProps}}}function whenMergePropsIsFunction(mergeProps){return"function"==typeof mergeProps?wrapMergePropsFunc(mergeProps):void 0}function whenMergePropsIsOmitted(mergeProps){return mergeProps?void 0:function(){return defaultMergeProps}}var _default=[whenMergePropsIsFunction,whenMergePropsIsOmitted];exports.default=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(27);exports.__esModule=!0,exports.impureFinalPropsSelectorFactory=impureFinalPropsSelectorFactory,exports.pureFinalPropsSelectorFactory=pureFinalPropsSelectorFactory,exports.default=function(dispatch,_ref2){var initMapStateToProps=_ref2.initMapStateToProps,initMapDispatchToProps=_ref2.initMapDispatchToProps,initMergeProps=_ref2.initMergeProps,options=(0,_objectWithoutPropertiesLoose2.default)(_ref2,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),mapStateToProps=initMapStateToProps(dispatch,options),mapDispatchToProps=initMapDispatchToProps(dispatch,options),mergeProps=initMergeProps(dispatch,options);0;return(options.pure?pureFinalPropsSelectorFactory:impureFinalPropsSelectorFactory)(mapStateToProps,mapDispatchToProps,mergeProps,dispatch,options)};var _objectWithoutPropertiesLoose2=_interopRequireDefault(__webpack_require__(34));_interopRequireDefault(__webpack_require__(64));function impureFinalPropsSelectorFactory(mapStateToProps,mapDispatchToProps,mergeProps,dispatch){return function(state,ownProps){return mergeProps(mapStateToProps(state,ownProps),mapDispatchToProps(dispatch,ownProps),ownProps)}}function pureFinalPropsSelectorFactory(mapStateToProps,mapDispatchToProps,mergeProps,dispatch,_ref){var state,ownProps,stateProps,dispatchProps,mergedProps,areStatesEqual=_ref.areStatesEqual,areOwnPropsEqual=_ref.areOwnPropsEqual,areStatePropsEqual=_ref.areStatePropsEqual,hasRunAtLeastOnce=!1;function handleSubsequentCalls(nextState,nextOwnProps){var nextStateProps,statePropsChanged,propsChanged=!areOwnPropsEqual(nextOwnProps,ownProps),stateChanged=!areStatesEqual(nextState,state);return state=nextState,ownProps=nextOwnProps,propsChanged&&stateChanged?(stateProps=mapStateToProps(state,ownProps),mapDispatchToProps.dependsOnOwnProps&&(dispatchProps=mapDispatchToProps(dispatch,ownProps)),mergedProps=mergeProps(stateProps,dispatchProps,ownProps)):propsChanged?(mapStateToProps.dependsOnOwnProps&&(stateProps=mapStateToProps(state,ownProps)),mapDispatchToProps.dependsOnOwnProps&&(dispatchProps=mapDispatchToProps(dispatch,ownProps)),mergedProps=mergeProps(stateProps,dispatchProps,ownProps)):stateChanged?(nextStateProps=mapStateToProps(state,ownProps),statePropsChanged=!areStatePropsEqual(nextStateProps,stateProps),stateProps=nextStateProps,statePropsChanged&&(mergedProps=mergeProps(stateProps,dispatchProps,ownProps)),mergedProps):mergedProps}return function(nextState,nextOwnProps){return hasRunAtLeastOnce?handleSubsequentCalls(nextState,nextOwnProps):(stateProps=mapStateToProps(state=nextState,ownProps=nextOwnProps),dispatchProps=mapDispatchToProps(dispatch,ownProps),mergedProps=mergeProps(stateProps,dispatchProps,ownProps),hasRunAtLeastOnce=!0,mergedProps)}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(27);exports.__esModule=!0,exports.default=function(mapStateToProps,mapDispatchToProps,mergeProps,displayName){verify(mapStateToProps,"mapStateToProps",displayName),verify(mapDispatchToProps,"mapDispatchToProps",displayName),verify(mergeProps,"mergeProps",displayName)};var _warning=_interopRequireDefault(__webpack_require__(44));function verify(selector,methodName,displayName){if(!selector)throw new Error("Unexpected value for "+methodName+" in "+displayName+".");"mapStateToProps"!==methodName&&"mapDispatchToProps"!==methodName||Object.prototype.hasOwnProperty.call(selector,"dependsOnOwnProps")||(0,_warning.default)("The selector for "+methodName+" of "+displayName+" did not specify a value for dependsOnOwnProps.")}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.createDispatchHook=createDispatchHook,exports.useDispatch=void 0;var _Context=__webpack_require__(28),_useStore=__webpack_require__(45);function createDispatchHook(context){void 0===context&&(context=_Context.ReactReduxContext);var useStore=context===_Context.ReactReduxContext?_useStore.useStore:(0,_useStore.createStoreHook)(context);return function(){return useStore().dispatch}}var useDispatch=createDispatchHook();exports.useDispatch=useDispatch},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(27);exports.__esModule=!0,exports.createSelectorHook=createSelectorHook,exports.useSelector=void 0;var _react=__webpack_require__(3),_useReduxContext2=__webpack_require__(46),_Subscription=_interopRequireDefault(__webpack_require__(32)),_useIsomorphicLayoutEffect=__webpack_require__(40),_Context=__webpack_require__(28),refEquality=function(a,b){return a===b};function createSelectorHook(context){void 0===context&&(context=_Context.ReactReduxContext);var useReduxContext=context===_Context.ReactReduxContext?_useReduxContext2.useReduxContext:function(){return(0,_react.useContext)(context)};return function(selector,equalityFn){void 0===equalityFn&&(equalityFn=refEquality);var _useReduxContext=useReduxContext();return function(selector,equalityFn,store,contextSub){var selectedState,forceRender=(0,_react.useReducer)((function(s){return s+1}),0)[1],subscription=(0,_react.useMemo)((function(){return new _Subscription.default(store,contextSub)}),[store,contextSub]),latestSubscriptionCallbackError=(0,_react.useRef)(),latestSelector=(0,_react.useRef)(),latestSelectedState=(0,_react.useRef)();try{selectedState=selector!==latestSelector.current||latestSubscriptionCallbackError.current?selector(store.getState()):latestSelectedState.current}catch(err){throw latestSubscriptionCallbackError.current&&(err.message+="\nThe error may be correlated with this previous error:\n"+latestSubscriptionCallbackError.current.stack+"\n\n"),err}return(0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)((function(){latestSelector.current=selector,latestSelectedState.current=selectedState,latestSubscriptionCallbackError.current=void 0})),(0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)((function(){function checkForUpdates(){try{var newSelectedState=latestSelector.current(store.getState());if(equalityFn(newSelectedState,latestSelectedState.current))return;latestSelectedState.current=newSelectedState}catch(err){latestSubscriptionCallbackError.current=err}forceRender({})}return subscription.onStateChange=checkForUpdates,subscription.trySubscribe(),checkForUpdates(),function(){return subscription.tryUnsubscribe()}}),[store,subscription]),selectedState}(selector,equalityFn,_useReduxContext.store,_useReduxContext.subscription)}}var useSelector=createSelectorHook();exports.useSelector=useSelector},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.unstable_batchedUpdates=void 0;var _reactDom=__webpack_require__(24);exports.unstable_batchedUpdates=_reactDom.unstable_batchedUpdates},function(module,exports,__webpack_require__){"use strict";function createThunkMiddleware(extraArgument){return function(_ref){var dispatch=_ref.dispatch,getState=_ref.getState;return function(next){return function(action){return"function"==typeof action?action(dispatch,getState,extraArgument):next(action)}}}}exports.__esModule=!0;var thunk=createThunkMiddleware();thunk.withExtraArgument=createThunkMiddleware,exports.default=thunk},function(module,exports,__webpack_require__){"use strict";function defaultEqualityCheck(a,b){return a===b}function areArgumentsShallowlyEqual(equalityCheck,prev,next){if(null===prev||null===next||prev.length!==next.length)return!1;for(var length=prev.length,i=0;i<length;i++)if(!equalityCheck(prev[i],next[i]))return!1;return!0}function defaultMemoize(func){var equalityCheck=arguments.length>1&&void 0!==arguments[1]?arguments[1]:defaultEqualityCheck,lastArgs=null,lastResult=null;return function(){return areArgumentsShallowlyEqual(equalityCheck,lastArgs,arguments)||(lastResult=func.apply(null,arguments)),lastArgs=arguments,lastResult}}function getDependencies(funcs){var dependencies=Array.isArray(funcs[0])?funcs[0]:funcs;if(!dependencies.every((function(dep){return"function"==typeof dep}))){var dependencyTypes=dependencies.map((function(dep){return typeof dep})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+dependencyTypes+"]")}return dependencies}function createSelectorCreator(memoize){for(var _len=arguments.length,memoizeOptions=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)memoizeOptions[_key-1]=arguments[_key];return function(){for(var _len2=arguments.length,funcs=Array(_len2),_key2=0;_key2<_len2;_key2++)funcs[_key2]=arguments[_key2];var recomputations=0,resultFunc=funcs.pop(),dependencies=getDependencies(funcs),memoizedResultFunc=memoize.apply(void 0,[function(){return recomputations++,resultFunc.apply(null,arguments)}].concat(memoizeOptions)),selector=memoize((function(){for(var params=[],length=dependencies.length,i=0;i<length;i++)params.push(dependencies[i].apply(null,arguments));return memoizedResultFunc.apply(null,params)}));return selector.resultFunc=resultFunc,selector.dependencies=dependencies,selector.recomputations=function(){return recomputations},selector.resetRecomputations=function(){return recomputations=0},selector}}exports.__esModule=!0,exports.defaultMemoize=defaultMemoize,exports.createSelectorCreator=createSelectorCreator,exports.createStructuredSelector=function(selectors){var selectorCreator=arguments.length>1&&void 0!==arguments[1]?arguments[1]:createSelector;if("object"!=typeof selectors)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof selectors);var objectKeys=Object.keys(selectors);return selectorCreator(objectKeys.map((function(key){return selectors[key]})),(function(){for(var _len3=arguments.length,values=Array(_len3),_key3=0;_key3<_len3;_key3++)values[_key3]=arguments[_key3];return values.reduce((function(composition,value,index){return composition[objectKeys[index]]=value,composition}),{})}))};var createSelector=exports.createSelector=createSelectorCreator(defaultMemoize)},function(module,exports,__webpack_require__){"undefined"!=typeof self&&self,module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(2),i=function(){function e(t,n){this.expression=t,this.options=n,this.expressionParts=new Array(5),e.locales[n.locale]?this.i18n=e.locales[n.locale]:(console.warn("Locale '"+n.locale+"' could not be found; falling back to 'en'."),this.i18n=e.locales.en),void 0===n.use24HourTimeFormat&&(n.use24HourTimeFormat=this.i18n.use24HourTimeFormatByDefault())}return e.toString=function(t,n){var r=void 0===n?{}:n,o=r.throwExceptionOnParseError,i=void 0===o||o,s=r.verbose,a=void 0!==s&&s,u=r.dayOfWeekStartIndexZero,c=void 0===u||u,f=r.use24HourTimeFormat,p=r.locale;return new e(t,{throwExceptionOnParseError:i,verbose:a,dayOfWeekStartIndexZero:c,use24HourTimeFormat:f,locale:void 0===p?"en":p}).getFullDescription()},e.initialize=function(t){e.specialCharacters=["/","-",",","*"],t.load(e.locales)},e.prototype.getFullDescription=function(){var e="";try{var t=new o.CronParser(this.expression,this.options.dayOfWeekStartIndexZero);this.expressionParts=t.parse();var n=this.getTimeOfDayDescription(),r=this.getDayOfMonthDescription(),i=this.getMonthDescription();e+=n+r+this.getDayOfWeekDescription()+i+this.getYearDescription(),e=(e=this.transformVerbosity(e,this.options.verbose)).charAt(0).toLocaleUpperCase()+e.substr(1)}catch(t){if(this.options.throwExceptionOnParseError)throw""+t;e=this.i18n.anErrorOccuredWhenGeneratingTheExpressionD()}return e},e.prototype.getTimeOfDayDescription=function(){var t=this.expressionParts[0],n=this.expressionParts[1],o=this.expressionParts[2],i="";if(r.StringUtilities.containsAny(n,e.specialCharacters)||r.StringUtilities.containsAny(o,e.specialCharacters)||r.StringUtilities.containsAny(t,e.specialCharacters))if(t||!(n.indexOf("-")>-1)||n.indexOf(",")>-1||r.StringUtilities.containsAny(o,e.specialCharacters))if(!t&&o.indexOf(",")>-1&&-1==o.indexOf("-")&&-1==o.indexOf("/")&&!r.StringUtilities.containsAny(n,e.specialCharacters)){var s=o.split(",");i+=this.i18n.at();for(var a=0;a<s.length;a++)i+=" ",i+=this.formatTime(s[a],n,""),a<s.length-2&&(i+=","),a==s.length-2&&(i+=this.i18n.spaceAnd())}else{var u=this.getSecondsDescription(),c=this.getMinutesDescription(),f=this.getHoursDescription();(i+=u).length>0&&(i+=", "),(i+=c).length>0&&(i+=", "),i+=f}else{var p=n.split("-");i+=r.StringUtilities.format(this.i18n.everyMinuteBetweenX0AndX1(),this.formatTime(o,p[0],""),this.formatTime(o,p[1],""))}else i+=this.i18n.atSpace()+this.formatTime(o,n,t);return i},e.prototype.getSecondsDescription=function(){var e=this;return this.getSegmentDescription(this.expressionParts[0],this.i18n.everySecond(),(function(e){return e}),(function(t){return r.StringUtilities.format(e.i18n.everyX0Seconds(),t)}),(function(t){return e.i18n.secondsX0ThroughX1PastTheMinute()}),(function(t){return"0"==t?"":parseInt(t)<20?e.i18n.atX0SecondsPastTheMinute():e.i18n.atX0SecondsPastTheMinuteGt20()||e.i18n.atX0SecondsPastTheMinute()}))},e.prototype.getMinutesDescription=function(){var e=this;return this.getSegmentDescription(this.expressionParts[1],this.i18n.everyMinute(),(function(e){return e}),(function(t){return r.StringUtilities.format(e.i18n.everyX0Minutes(),t)}),(function(t){return e.i18n.minutesX0ThroughX1PastTheHour()}),(function(t){try{return"0"==t?"":parseInt(t)<20?e.i18n.atX0MinutesPastTheHour():e.i18n.atX0MinutesPastTheHourGt20()||e.i18n.atX0MinutesPastTheHour()}catch(t){return e.i18n.atX0MinutesPastTheHour()}}))},e.prototype.getHoursDescription=function(){var e=this,t=this.expressionParts[2];return this.getSegmentDescription(t,this.i18n.everyHour(),(function(t){return e.formatTime(t,"0","")}),(function(t){return r.StringUtilities.format(e.i18n.everyX0Hours(),t)}),(function(t){return e.i18n.betweenX0AndX1()}),(function(t){return e.i18n.atX0()}))},e.prototype.getDayOfWeekDescription=function(){var e=this,t=this.i18n.daysOfTheWeek();return"*"==this.expressionParts[5]?"":this.getSegmentDescription(this.expressionParts[5],this.i18n.commaEveryDay(),(function(e){var n=e;return e.indexOf("#")>-1?n=e.substr(0,e.indexOf("#")):e.indexOf("L")>-1&&(n=n.replace("L","")),t[parseInt(n)]}),(function(t){return r.StringUtilities.format(e.i18n.commaEveryX0DaysOfTheWeek(),t)}),(function(t){return e.i18n.commaX0ThroughX1()}),(function(t){var n=null;if(t.indexOf("#")>-1){var r=null;switch(t.substring(t.indexOf("#")+1)){case"1":r=e.i18n.first();break;case"2":r=e.i18n.second();break;case"3":r=e.i18n.third();break;case"4":r=e.i18n.fourth();break;case"5":r=e.i18n.fifth()}n=e.i18n.commaOnThe()+r+e.i18n.spaceX0OfTheMonth()}else n=t.indexOf("L")>-1?e.i18n.commaOnTheLastX0OfTheMonth():"*"!=e.expressionParts[3]?e.i18n.commaAndOnX0():e.i18n.commaOnlyOnX0();return n}))},e.prototype.getMonthDescription=function(){var e=this,t=this.i18n.monthsOfTheYear();return this.getSegmentDescription(this.expressionParts[4],"",(function(e){return t[parseInt(e)-1]}),(function(t){return r.StringUtilities.format(e.i18n.commaEveryX0Months(),t)}),(function(t){return e.i18n.commaMonthX0ThroughMonthX1()||e.i18n.commaX0ThroughX1()}),(function(t){return e.i18n.commaOnlyInX0()}))},e.prototype.getDayOfMonthDescription=function(){var e=this,t=null,n=this.expressionParts[3];switch(n){case"L":t=this.i18n.commaOnTheLastDayOfTheMonth();break;case"WL":case"LW":t=this.i18n.commaOnTheLastWeekdayOfTheMonth();break;default:var o=n.match(/(\d{1,2}W)|(W\d{1,2})/);if(o){var i=parseInt(o[0].replace("W","")),s=1==i?this.i18n.firstWeekday():r.StringUtilities.format(this.i18n.weekdayNearestDayX0(),i.toString());t=r.StringUtilities.format(this.i18n.commaOnTheX0OfTheMonth(),s);break}var a=n.match(/L-(\d{1,2})/);if(a){var u=a[1];t=r.StringUtilities.format(this.i18n.commaDaysBeforeTheLastDayOfTheMonth(),u);break}t=this.getSegmentDescription(n,this.i18n.commaEveryDay(),(function(t){return"L"==t?e.i18n.lastDay():t}),(function(t){return"1"==t?e.i18n.commaEveryDay():e.i18n.commaEveryX0Days()}),(function(t){return e.i18n.commaBetweenDayX0AndX1OfTheMonth()}),(function(t){return e.i18n.commaOnDayX0OfTheMonth()}))}return t},e.prototype.getYearDescription=function(){var e=this;return this.getSegmentDescription(this.expressionParts[6],"",(function(e){return/^\d+$/.test(e)?new Date(parseInt(e),1).getFullYear().toString():e}),(function(t){return r.StringUtilities.format(e.i18n.commaEveryX0Years(),t)}),(function(t){return e.i18n.commaYearX0ThroughYearX1()||e.i18n.commaX0ThroughX1()}),(function(t){return e.i18n.commaOnlyInX0()}))},e.prototype.getSegmentDescription=function(e,t,n,o,i,s){var a=this,u=null;if(e)if("*"===e)u=t;else if(r.StringUtilities.containsAny(e,["/","-",","]))if(e.indexOf("/")>-1){var c=e.split("/");if(u=r.StringUtilities.format(o(c[1]),n(c[1])),c[0].indexOf("-")>-1)0!=(y=this.generateBetweenSegmentDescription(c[0],i,n)).indexOf(", ")&&(u+=", "),u+=y;else if(!r.StringUtilities.containsAny(c[0],["*",","])){var f=r.StringUtilities.format(s(c[0]),n(c[0]));f=f.replace(", ",""),u+=r.StringUtilities.format(this.i18n.commaStartingX0(),f)}}else if(e.indexOf(",")>-1){c=e.split(",");for(var p="",h=0;h<c.length;h++){var y;h>0&&c.length>2&&(p+=",",h<c.length-1&&(p+=" ")),h>0&&c.length>1&&(h==c.length-1||2==c.length)&&(p+=this.i18n.spaceAnd()+" "),c[h].indexOf("-")>-1?p+=y=(y=this.generateBetweenSegmentDescription(c[h],(function(e){return a.i18n.commaX0ThroughX1()}),n)).replace(", ",""):p+=n(c[h])}u=r.StringUtilities.format(s(e),p)}else e.indexOf("-")>-1&&(u=this.generateBetweenSegmentDescription(e,i,n));else u=r.StringUtilities.format(s(e),n(e));else u="";return u},e.prototype.generateBetweenSegmentDescription=function(e,t,n){var o="",i=e.split("-"),s=n(i[0]),a=n(i[1]);a=a.replace(":00",":59");var u=t(e);return o+r.StringUtilities.format(u,s,a)},e.prototype.formatTime=function(e,t,n){var r=parseInt(e),o="";this.options.use24HourTimeFormat||(o=r>=12?" PM":" AM",r>12&&(r-=12),0===r&&(r=12));var i=t,s="";return n&&(s=":"+("00"+n).substring(n.length)),("00"+r.toString()).substring(r.toString().length)+":"+("00"+i.toString()).substring(i.toString().length)+s+o},e.prototype.transformVerbosity=function(e,t){return t||(e=(e=(e=e.replace(new RegExp(this.i18n.commaEveryMinute(),"g"),"")).replace(new RegExp(this.i18n.commaEveryHour(),"g"),"")).replace(new RegExp(this.i18n.commaEveryDay(),"g"),"")),e},e.locales={},e}();t.ExpressionDescriptor=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.replace(/%s/g,(function(){return t.shift()}))},e.containsAny=function(e,t){return t.some((function(t){return e.indexOf(t)>-1}))},e}();t.StringUtilities=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){void 0===t&&(t=!0),this.expression=e,this.dayOfWeekStartIndexZero=t}return e.prototype.parse=function(){var e=this.extractParts(this.expression);return this.normalize(e),this.validate(e),e},e.prototype.extractParts=function(e){if(!this.expression)throw new Error("Expression is empty");var t=e.trim().split(" ");if(t.length<5)throw new Error("Expression has only "+t.length+" part"+(1==t.length?"":"s")+". At least 5 parts are required.");if(5==t.length)t.unshift(""),t.push("");else if(6==t.length)/\d{4}$/.test(t[5])?t.unshift(""):t.push("");else if(t.length>7)throw new Error("Expression has "+t.length+" parts; too many!");return t},e.prototype.normalize=function(e){var t=this;if(e[3]=e[3].replace("?","*"),e[5]=e[5].replace("?","*"),0==e[0].indexOf("0/")&&(e[0]=e[0].replace("0/","*/")),0==e[1].indexOf("0/")&&(e[1]=e[1].replace("0/","*/")),0==e[2].indexOf("0/")&&(e[2]=e[2].replace("0/","*/")),0==e[3].indexOf("1/")&&(e[3]=e[3].replace("1/","*/")),0==e[4].indexOf("1/")&&(e[4]=e[4].replace("1/","*/")),0==e[5].indexOf("1/")&&(e[5]=e[5].replace("1/","*/")),0==e[6].indexOf("1/")&&(e[6]=e[6].replace("1/","*/")),e[5]=e[5].replace(/(^\d)|([^#/\s]\d)/g,(function(e){var n=e.replace(/\D/,""),r=n;return t.dayOfWeekStartIndexZero?"7"==n&&(r="0"):r=(parseInt(n)-1).toString(),e.replace(n,r)})),"L"==e[5]&&(e[5]="6"),"?"==e[3]&&(e[3]="*"),e[3].indexOf("W")>-1&&(e[3].indexOf(",")>-1||e[3].indexOf("-")>-1))throw new Error("The 'W' character can be specified only when the day-of-month is a single day, not a range or list of days.");var n={SUN:0,MON:1,TUE:2,WED:3,THU:4,FRI:5,SAT:6};for(var r in n)e[5]=e[5].replace(new RegExp(r,"gi"),n[r].toString());var o={JAN:1,FEB:2,MAR:3,APR:4,MAY:5,JUN:6,JUL:7,AUG:8,SEP:9,OCT:10,NOV:11,DEC:12};for(var i in o)e[4]=e[4].replace(new RegExp(i,"gi"),o[i].toString());"0"==e[0]&&(e[0]="");for(var s=0;s<e.length;s++)if("*/1"==e[s]&&(e[s]="*"),e[s].indexOf("/")>-1&&!/^\*|\-|\,/.test(e[s])){var a=null;switch(s){case 4:a="12";break;case 5:a="6";break;case 6:a="9999";break;default:a=null}if(null!=a){var u=e[s].split("/");e[s]=u[0]+"-"+a+"/"+u[1]}}},e.prototype.validate=function(e){this.assertNoInvalidCharacters("DOW",e[5]),this.assertNoInvalidCharacters("DOM",e[3])},e.prototype.assertNoInvalidCharacters=function(e,t){var n=t.match(/[A-KM-VX-Z]+/gi);if(n&&n.length)throw new Error(e+" part contains invalid values: '"+n.toString()+"'")},e}();t.CronParser=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.atX0SecondsPastTheMinuteGt20=function(){return null},e.prototype.atX0MinutesPastTheHourGt20=function(){return null},e.prototype.commaMonthX0ThroughMonthX1=function(){return null},e.prototype.commaYearX0ThroughYearX1=function(){return null},e.prototype.use24HourTimeFormatByDefault=function(){return!1},e.prototype.anErrorOccuredWhenGeneratingTheExpressionD=function(){return"An error occured when generating the expression description.  Check the cron expression syntax."},e.prototype.everyMinute=function(){return"every minute"},e.prototype.everyHour=function(){return"every hour"},e.prototype.atSpace=function(){return"At "},e.prototype.everyMinuteBetweenX0AndX1=function(){return"Every minute between %s and %s"},e.prototype.at=function(){return"At"},e.prototype.spaceAnd=function(){return" and"},e.prototype.everySecond=function(){return"every second"},e.prototype.everyX0Seconds=function(){return"every %s seconds"},e.prototype.secondsX0ThroughX1PastTheMinute=function(){return"seconds %s through %s past the minute"},e.prototype.atX0SecondsPastTheMinute=function(){return"at %s seconds past the minute"},e.prototype.everyX0Minutes=function(){return"every %s minutes"},e.prototype.minutesX0ThroughX1PastTheHour=function(){return"minutes %s through %s past the hour"},e.prototype.atX0MinutesPastTheHour=function(){return"at %s minutes past the hour"},e.prototype.everyX0Hours=function(){return"every %s hours"},e.prototype.betweenX0AndX1=function(){return"between %s and %s"},e.prototype.atX0=function(){return"at %s"},e.prototype.commaEveryDay=function(){return", every day"},e.prototype.commaEveryX0DaysOfTheWeek=function(){return", every %s days of the week"},e.prototype.commaX0ThroughX1=function(){return", %s through %s"},e.prototype.first=function(){return"first"},e.prototype.second=function(){return"second"},e.prototype.third=function(){return"third"},e.prototype.fourth=function(){return"fourth"},e.prototype.fifth=function(){return"fifth"},e.prototype.commaOnThe=function(){return", on the "},e.prototype.spaceX0OfTheMonth=function(){return" %s of the month"},e.prototype.lastDay=function(){return"the last day"},e.prototype.commaOnTheLastX0OfTheMonth=function(){return", on the last %s of the month"},e.prototype.commaOnlyOnX0=function(){return", only on %s"},e.prototype.commaAndOnX0=function(){return", and on %s"},e.prototype.commaEveryX0Months=function(){return", every %s months"},e.prototype.commaOnlyInX0=function(){return", only in %s"},e.prototype.commaOnTheLastDayOfTheMonth=function(){return", on the last day of the month"},e.prototype.commaOnTheLastWeekdayOfTheMonth=function(){return", on the last weekday of the month"},e.prototype.commaDaysBeforeTheLastDayOfTheMonth=function(){return", %s days before the last day of the month"},e.prototype.firstWeekday=function(){return"first weekday"},e.prototype.weekdayNearestDayX0=function(){return"weekday nearest day %s"},e.prototype.commaOnTheX0OfTheMonth=function(){return", on the %s of the month"},e.prototype.commaEveryX0Days=function(){return", every %s days"},e.prototype.commaBetweenDayX0AndX1OfTheMonth=function(){return", between day %s and %s of the month"},e.prototype.commaOnDayX0OfTheMonth=function(){return", on day %s of the month"},e.prototype.commaEveryMinute=function(){return", every minute"},e.prototype.commaEveryHour=function(){return", every hour"},e.prototype.commaEveryX0Years=function(){return", every %s years"},e.prototype.commaStartingX0=function(){return", starting %s"},e.prototype.daysOfTheWeek=function(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},e.prototype.monthsOfTheYear=function(){return["January","February","March","April","May","June","July","August","September","October","November","December"]},e}();t.en=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(5);r.ExpressionDescriptor.initialize(new o.enLocaleLoader),t.default=r.ExpressionDescriptor;var i=r.ExpressionDescriptor.toString;t.toString=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(){function e(){}return e.prototype.load=function(e){e.en=new r.en},e}();t.enLocaleLoader=o}])},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(72);case"v7light":return __webpack_require__(74);case"v8dark":return __webpack_require__(76);case"v8light":return __webpack_require__(78)}},function(module,exports,__webpack_require__){var api=__webpack_require__(30),content=__webpack_require__(73);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(31)(!1)).push([module.i,".rollupJobWizardStepActions{align-items:flex-end}.rollupJobsListPanel{flex-grow:1 !important}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(30),content=__webpack_require__(75);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(31)(!1)).push([module.i,".rollupJobWizardStepActions{align-items:flex-end}.rollupJobsListPanel{flex-grow:1 !important}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(30),content=__webpack_require__(77);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(31)(!1)).push([module.i,".rollupJobWizardStepActions{align-items:flex-end}.rollupJobsListPanel{flex-grow:1 !important}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(30),content=__webpack_require__(79);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(31)(!1)).push([module.i,".rollupJobWizardStepActions{align-items:flex-end}.rollupJobsListPanel{flex-grow:1 !important}\n",""]),module.exports=exports},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"renderApp",(function(){return renderApp}));var external_kbnSharedDeps_React_=__webpack_require__(3),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_ReactDom_=__webpack_require__(24),lib=__webpack_require__(29),public_=__webpack_require__(23),redux=__webpack_require__(35),redux_thunk_lib=__webpack_require__(68),redux_thunk_lib_default=__webpack_require__.n(redux_thunk_lib);const jobs_initialState={isLoading:!1,byId:{},allIds:[]};function mapJobsToIds(jobs){const jobsById={};return jobs.forEach(job=>{jobsById[job.id]=job}),jobsById}function getJobsIds(jobs){return jobs.map(job=>job.id)}const table_state_initialState={filter:"",pageSize:20,currentPage:0,sortField:"job.id",isSortAscending:!0};const detail_panel_initialState={isOpen:!1,panelType:void 0,jobId:void 0};const clone_job_initialState={job:void 0};const create_job_initialState={isSaving:!1,error:void 0};const update_job_initialState={isUpdating:!1,error:void 0};const rollupJobs=Object(redux.combineReducers)({jobs:function(state=jobs_initialState,action){const{type:type,payload:payload}=action;switch(type){case"LOAD_JOBS_START":return{...state,isLoading:!0};case"LOAD_JOBS_SUCCESS":return{byId:mapJobsToIds(payload.jobs),allIds:getJobsIds(payload.jobs),isLoading:!1};case"REFRESH_JOBS_SUCCESS":return{byId:mapJobsToIds(payload.jobs),allIds:getJobsIds(payload.jobs)};case"LOAD_JOBS_FAILURE":return{...state,isLoading:!1,jobLoadError:payload.error};case"CREATE_JOB_SUCCESS":const{job:job}=payload;return{byId:{...state.byId,[job.id]:job},allIds:state.allIds.concat(job.id)};default:return state}},cloneJob:function(state=clone_job_initialState,action){const{type:type,payload:payload}=action;return"CLONE_JOB_START"===type?{job:payload}:"CLONE_JOB_CLEAR"===type?{...clone_job_initialState}:state},tableState:function(state=table_state_initialState,action){const{type:type,payload:payload}=action;switch(type){case"FILTER_CHANGED":const{filter:filter}=payload;return{...state,filter:filter,currentPage:0};case"SORT_CHANGED":const{sortField:sortField,isSortAscending:isSortAscending}=payload;return{...state,sortField:sortField,isSortAscending:isSortAscending};case"PAGE_CHANGED":const{pageNumber:pageNumber}=payload;return{...state,currentPage:pageNumber};case"PAGE_SIZE_CHANGED":const{pageSize:pageSize}=payload;return{...state,pageSize:pageSize};default:return state}},detailPanel:function(state=detail_panel_initialState,action){const{type:type,payload:payload}=action;switch(type){case"OPEN_DETAIL_PANEL":const{panelType:panelType,jobId:jobId}=payload;return{panelType:panelType||state.panelType,jobId:jobId,isOpen:!0};case"CLOSE_DETAIL_PANEL":return{panelType:void 0,jobId:void 0,isOpen:!1};default:return state}},createJob:function(state=create_job_initialState,action){const{type:type,payload:payload}=action;switch(type){case"CREATE_JOB_START":return{isSaving:!0,error:void 0};case"CREATE_JOB_SUCCESS":return{...state,isSaving:!1};case"CREATE_JOB_FAILURE":return{...state,error:payload.error,isSaving:!1};case"CLEAR_CREATE_JOB_ERRORS":return{...state,error:void 0};default:return state}},updateJob:function(state=update_job_initialState,action){const{type:type}=action;switch(type){case"UPDATE_JOB_START":return{isUpdating:!0};case"UPDATE_JOB_SUCCESS":case"UPDATE_JOB_FAILURE":return{isUpdating:!1};default:return state}}});var crud_app_services=__webpack_require__(6);const middleware_clone_job_cloneJob=()=>next=>action=>{const{type:type}=action;return"CLONE_JOB_START"===type&&(Object(crud_app_services.t)()||Object(crud_app_services.q)().history.push({pathname:"/create"})),next(action)},detail_panel_detailPanel=()=>next=>action=>{const{type:type}=action;switch(type){case"CLOSE_DETAIL_PANEL":if(!Object(crud_app_services.t)()){const{history:history}=Object(crud_app_services.q)();history.replace({search:""})}}return next(action)};const rollupJobsStore=function(initialState={}){const enhancers=[Object(redux.applyMiddleware)(redux_thunk_lib_default.a,detail_panel_detailPanel,middleware_clone_job_cloneJob)];return window.__REDUX_DEVTOOLS_EXTENSION__&&enhancers.push(window.__REDUX_DEVTOOLS_EXTENSION__()),Object(redux.createStore)(rollupJobs,initialState,Object(redux.compose)(...enhancers))}();var external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(25),common=__webpack_require__(2),kibana_services=__webpack_require__(1),external_kbnSharedDeps_ElasticEui_=__webpack_require__(8),reselect_lib=__webpack_require__(69);const getJobs=state=>state.jobs.byId,getJobsList=state=>state.jobs.allIds,getTableState=state=>state.tableState,getDetailPanelType=state=>state.detailPanel.panelType,isDetailPanelOpen=state=>state.detailPanel.isOpen,getDetailPanelJob=state=>((state,id)=>getJobs(state)[id])(state,state.detailPanel.jobId),getDetailPanelJobId=state=>state.detailPanel.jobId,selectors_isLoading=state=>state.jobs.isLoading,selectors_jobLoadError=state=>state.jobs.jobLoadError,selectors_isSaving=state=>state.createJob.isSaving,getCreateJobError=state=>state.createJob.error,selectors_isUpdating=state=>state.updateJob.isUpdating,getCloneJobConfig=state=>state.cloneJob.job,getFilteredJobs=Object(reselect_lib.createSelector)(getJobs,getTableState,(jobs,tableState)=>{const jobArray=Object.keys(jobs).map(jobName=>jobs[jobName]);return Object(crud_app_services.h)(["id","indexPattern","rollupIndex"],tableState.filter,jobArray)}),getTotalItems=Object(reselect_lib.createSelector)(getFilteredJobs,filteredJobs=>Object.keys(filteredJobs).length),getPager=Object(reselect_lib.createSelector)(getTableState,getTotalItems,({currentPage:currentPage,pageSize:pageSize},totalItems)=>new external_kbnSharedDeps_ElasticEui_.Pager(totalItems,pageSize,currentPage)),getPageOfJobs=Object(reselect_lib.createSelector)(getFilteredJobs,getTableState,getPager,(filteredJobs,tableState,pager)=>{const sortedIndexes=Object(crud_app_services.E)(filteredJobs,tableState.sortField,tableState.isSortAscending),{firstItemIndex:firstItemIndex,lastItemIndex:lastItemIndex}=pager;return sortedIndexes.slice(firstItemIndex,lastItemIndex+1)}),getFilter=(Object(reselect_lib.createSelector)(getPager,pager=>pager.hasNextPage),Object(reselect_lib.createSelector)(getPager,pager=>pager.hasPreviousPage),Object(reselect_lib.createSelector)(getPager,pager=>pager.currentPage),Object(reselect_lib.createSelector)(getTableState,({filter:filter})=>filter)),selectors_isSortAscending=Object(reselect_lib.createSelector)(getTableState,({isSortAscending:isSortAscending})=>isSortAscending),getSortField=Object(reselect_lib.createSelector)(getTableState,({sortField:sortField})=>sortField);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);const refreshJobs=options=>async dispatch=>{let jobs;try{jobs=await Object(crud_app_services.v)(options)}catch(error){return Object(crud_app_services.D)(error,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.refreshAction.errorTitle",{defaultMessage:"Error refreshing rollup jobs"}))}dispatch({type:"REFRESH_JOBS_SUCCESS",payload:{jobs:Object(crud_app_services.g)(jobs)}})},change_job_status_startJobs=jobIds=>async dispatch=>{dispatch({type:"UPDATE_JOB_START"});try{await Object(crud_app_services.d)(Object(crud_app_services.F)(jobIds))}catch(error){return dispatch({type:"UPDATE_JOB_FAILURE"}),Object(crud_app_services.C)(error,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.startJobsAction.errorTitle",{defaultMessage:"Error starting rollup jobs"}))}dispatch({type:"UPDATE_JOB_SUCCESS"}),dispatch(refreshJobs())},actions_clone_job_cloneJob=jobToClone=>dispatch=>{dispatch({type:"CLONE_JOB_START",payload:jobToClone})};var esUiShared_public_=__webpack_require__(22);const detail_panel_openDetailPanel=({panelType:panelType,jobId:jobId})=>dispatch=>{const{history:history}=Object(crud_app_services.q)(),search=history.location.search,{job:deepLinkedJobId}=Object(esUiShared_public_.extractQueryParams)(search);deepLinkedJobId!==jobId&&history.replace({search:"?job="+jobId}),dispatch({type:"OPEN_DETAIL_PANEL",payload:{panelType:panelType,jobId:jobId}})};var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(20);const FieldList=({columns:columns,fields:fields,onRemoveField:onRemoveField,addButton:addButton,emptyMessage:emptyMessage,dataTestSubj:dataTestSubj})=>{let message,extendedColumns;fields.length||(message=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{title:emptyMessage,titleSize:"xs"})),extendedColumns=onRemoveField?columns.concat({name:"Remove",width:"80px",actions:[{name:"Remove",isPrimary:!0,description:"Remove this field",icon:"trash",type:"icon",color:"danger",onClick:field=>onRemoveField(field)}]}):columns;const search={toolsRight:addButton||void 0,box:{incremental:!0,placeholder:"Search"}};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiInMemoryTable,{items:fields,itemId:"name",columns:extendedColumns,search:search,pagination:{initialPageSize:200,pageSizeOptions:[20,100,200]},sorting:!0,message:message,"data-test-subj":dataTestSubj})};class confirm_delete_modal_ConfirmDeleteModal extends external_kbnSharedDeps_React_.Component{renderJobs(){const{jobs:jobs}=this.props,jobItems=jobs.map(({id:id,status:status})=>{const startedMessage=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobActionMenu.deleteJob.confirmModal.startedMessage",{defaultMessage:"started"}),statusText="started"===status?` (${startedMessage})`:null;return external_kbnSharedDeps_React_default.a.createElement("li",{key:id},id,statusText)});return external_kbnSharedDeps_React_default.a.createElement("ul",null,jobItems)}render(){const{isSingleSelection:isSingleSelection,jobs:jobs,onCancel:onCancel,onConfirm:onConfirm}=this.props;let title,content;if(isSingleSelection){const{id:id,status:status}=jobs[0];title=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobActionMenu.deleteJob.confirmModal.deleteSingleJobTitle",{defaultMessage:"Delete rollup job '{id}'?",values:{id:id}}),"started"===status&&(content=external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobActionMenu.deleteJob.confirmModal.deleteSingleJobDescription",defaultMessage:"This job has been started."})))}else title=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobActionMenu.deleteJob.confirmModal.multipleDeletionTitle",{defaultMessage:"Delete {count} rollup jobs?",values:{count:jobs.length}}),content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobActionMenu.deleteJob.confirmModal.multipleDeletionDescription",defaultMessage:"You are about to delete {isSingleSelection, plural, one {this job} other {these jobs}}",values:{isSingleSelection:isSingleSelection?1:0}})),this.renderJobs());return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiConfirmModal,{title:title,onCancel:onCancel,onConfirm:onConfirm,cancelButtonText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobActionMenu.deleteJob.confirmModal.cancelButtonText",{defaultMessage:"Cancel"}),buttonColor:"danger",confirmButtonText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobActionMenu.deleteJob.confirmModal.confirmButtonText",{defaultMessage:"Delete"})},content)}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class job_action_menu_JobActionMenuUi extends external_kbnSharedDeps_React_.Component{constructor(props){super(props),_defineProperty(this,"onButtonClick",()=>{this.setState(prevState=>({isPopoverOpen:!prevState.isPopoverOpen}))}),_defineProperty(this,"closePopover",()=>{this.setState({isPopoverOpen:!1})}),_defineProperty(this,"closeDeleteConfirmationModal",()=>{this.setState({showDeleteConfirmation:!1})}),_defineProperty(this,"openDeleteConfirmationModal",()=>{this.setState({showDeleteConfirmation:!0})}),_defineProperty(this,"confirmDeleteModal",()=>{const{showDeleteConfirmation:showDeleteConfirmation}=this.state;if(!showDeleteConfirmation)return null;const{deleteJobs:deleteJobs,jobs:jobs}=this.props,isSingleSelection=this.isSingleSelection();return external_kbnSharedDeps_React_default.a.createElement(confirm_delete_modal_ConfirmDeleteModal,{isSingleSelection:isSingleSelection,jobs:jobs,onConfirm:()=>{this.closePopover(),deleteJobs()},onCancel:this.closeDeleteConfirmationModal})}),_defineProperty(this,"isSingleSelection",()=>1===this.props.jobs.length),this.state={isPopoverOpen:!1,showDeleteConfirmation:!1}}panels(){const{startJobs:startJobs,stopJobs:stopJobs,cloneJob:cloneJob}=this.props,isSingleSelection=this.isSingleSelection()?1:0,items=[];this.canStartJobs()&&items.push({name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobActionMenu.startJobLabel",{defaultMessage:"Start {isSingleSelection, plural, one {job} other {jobs}}",values:{isSingleSelection:isSingleSelection}}),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"play"}),onClick:()=>{this.closePopover(),startJobs()}}),this.canStopJobs()&&items.push({name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobActionMenu.stopJobLabel",{defaultMessage:"Stop {isSingleSelection, plural, one {job} other {jobs}}",values:{isSingleSelection:isSingleSelection}}),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"stop"}),onClick:()=>{this.closePopover(),stopJobs()}}),this.canCloneJob()&&items.push({name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobActionMenu.cloneJobLabel",{defaultMessage:"Clone job"}),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{"data-test-subj":"jobCloneActionContextMenu",type:"copy"}),onClick:()=>{this.closePopover();const{jobs:jobs}=this.props;cloneJob(jobs[0])}}),this.canDeleteJobs()&&items.push({name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobActionMenu.deleteJobLabel",{defaultMessage:"Delete {isSingleSelection, plural, one {job} other {jobs}}",values:{isSingleSelection:isSingleSelection}}),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"trash"}),onClick:()=>{this.closePopover(),this.openDeleteConfirmationModal()}});const panelTree={id:0,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobActionMenu.panelTitle",{defaultMessage:"Job options"}),items:items};return Object(crud_app_services.i)(panelTree)}canStartJobs(){const{jobs:jobs}=this.props;return jobs.some(job=>"stopped"===job.status)}canStopJobs(){const{jobs:jobs}=this.props;return jobs.some(job=>"started"===job.status)}canCloneJob(){const{jobs:jobs}=this.props;return Boolean(jobs&&1===jobs.length)}canDeleteJobs(){const{jobs:jobs}=this.props;return-1===jobs.findIndex(job=>"started"===job.status)}render(){const{isUpdating:isUpdating}=this.props;if(isUpdating)return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"flexStart",gutterSize:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"l"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobActionMenu.updatingText",defaultMessage:"Updating"}))));const jobCount=this.props.jobs.length,{iconSide:iconSide,anchorPosition:anchorPosition,iconType:iconType,label:label=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobActionMenu.buttonLabel",{defaultMessage:"Manage {jobCount, plural, one {job} other {jobs}}",values:{jobCount:jobCount}})}=this.props,panels=this.panels(),actionsAriaLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobActionMenu.jobActionMenuButtonAriaLabel",{defaultMessage:"Job options"}),button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{"data-test-subj":"jobActionMenuButton",iconSide:iconSide,"aria-label":actionsAriaLabel,onClick:this.onButtonClick,iconType:iconType,fill:!0},label);return external_kbnSharedDeps_React_default.a.createElement("div",null,this.confirmDeleteModal(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:anchorPosition,repositionOnScroll:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiContextMenu,{"data-test-subj":"jobActionContextMenu",initialPanelId:0,panels:panels})))}}_defineProperty(job_action_menu_JobActionMenuUi,"defaultProps",{iconSide:"right",anchorPosition:"rightUp",iconType:"arrowDown",jobs:[]});const JobActionMenu=job_action_menu_JobActionMenuUi,job_action_menu_container_JobActionMenu=Object(lib.connect)(state=>({isUpdating:selectors_isUpdating(state)}),(dispatch,{jobs:jobs})=>{const jobIds=jobs.map(job=>job.id);return{startJobs:()=>{dispatch(change_job_status_startJobs(jobIds))},stopJobs:()=>{dispatch((jobIds=>async dispatch=>{dispatch({type:"UPDATE_JOB_START"});try{await Object(crud_app_services.d)(Object(crud_app_services.G)(jobIds))}catch(error){return dispatch({type:"UPDATE_JOB_FAILURE"}),Object(crud_app_services.C)(error,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.stopJobsAction.errorTitle",{defaultMessage:"Error stopping rollup jobs"}))}dispatch({type:"UPDATE_JOB_SUCCESS"}),dispatch(refreshJobs())})(jobIds))},deleteJobs:()=>{dispatch((jobIds=>async(dispatch,getState)=>{dispatch({type:"UPDATE_JOB_START"});try{await Object(crud_app_services.d)(Object(crud_app_services.e)(jobIds))}catch(error){return dispatch({type:"UPDATE_JOB_FAILURE"}),Object(crud_app_services.C)(error,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.deleteAction.errorTitle",{defaultMessage:"Error deleting rollup jobs"}))}1===jobIds.length?Object(kibana_services.b)().toasts.addSuccess(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.deleteAction.successSingleNotificationTitle",{defaultMessage:"Rollup job '{jobId}' was deleted",values:{jobId:jobIds[0]}})):Object(kibana_services.b)().toasts.addSuccess(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.deleteAction.successMultipleNotificationTitle",{defaultMessage:"{count} rollup jobs were deleted",values:{count:jobIds.length}}));const detailPanelJob=getDetailPanelJob(getState());detailPanelJob&&jobIds.includes(detailPanelJob.id)&&dispatch(dispatch=>{dispatch({type:"CLOSE_DETAIL_PANEL"})}),dispatch({type:"UPDATE_JOB_SUCCESS"}),dispatch(refreshJobs())})(jobIds))},cloneJob:jobConfig=>{dispatch(actions_clone_job_cloneJob(jobConfig))}}})(JobActionMenu),statusToHealthMap={stopped:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHealth,{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobStatus.stoppedLabel",defaultMessage:"Stopped"})),stopping:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHealth,{color:"warning"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobStatus.stoppingLabel",defaultMessage:"Stopping"})),started:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHealth,{color:"success"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobStatus.startedLabel",defaultMessage:"Started"})),indexing:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHealth,{color:"warning"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobStatus.indexingLabel",defaultMessage:"Indexing"})),abort:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHealth,{color:"danger"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobStatus.abortingLabel",defaultMessage:"Aborting"}))},statusUnknown=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHealth,{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobStatus.unknownLabel",defaultMessage:"Unknown"})),JobStatus=({status:status})=>statusToHealthMap[status]||statusUnknown;class tab_summary_TabSummary extends external_kbnSharedDeps_React_.Component{renderStats(){const{stats:stats}=this.props;if(!stats)return null;const{documentsProcessed:documentsProcessed,pagesProcessed:pagesProcessed,rollupsIndexed:rollupsIndexed,triggerCount:triggerCount,status:status}=stats;return external_kbnSharedDeps_React_default.a.createElement("section",{"aria-labelledby":"rollupJobDetailStatsTitle","data-test-subj":"rollupJobDetailSummaryStatsSection"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",{id:"rollupJobDetailStatsTitle","data-test-subj":"rollupJobDetailStatsTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.sectionStatsTitle",defaultMessage:"Stats"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(JobStatus,{status:status}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemDocumentsProcessedLabel","data-test-subj":"rollupJobDetailStatsDocumentsProcessedTitle",defaultMessage:"Documents processed"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{"data-test-subj":"rollupJobDetailStatsDocumentsProcessedDescription"},documentsProcessed),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemRollupsIndexedLabel","data-test-subj":"rollupJobDetailStatsRollupsIndexedTitle",defaultMessage:"Rollups indexed"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{"data-test-subj":"rollupJobDetailStatsRollupsIndexedDescription"},rollupsIndexed))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemPagesProcessedLabel","data-test-subj":"rollupJobDetailStatsPagesProcessedTitle",defaultMessage:"Pages processed"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{"data-test-subj":"rollupJobDetailStatsPagesProcessedDescription"},pagesProcessed),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemTriggerCountLabel","data-test-subj":"rollupJobDetailStatsTriggerCountTitle",defaultMessage:"Trigger count"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{"data-test-subj":"rollupJobDetailStatsTriggerCountDescription"},triggerCount)))))}render(){const{job:job}=this.props,{indexPattern:indexPattern,rollupIndex:rollupIndex,rollupCron:rollupCron,rollupDelay:rollupDelay,dateHistogramInterval:dateHistogramInterval,dateHistogramTimeZone:dateHistogramTimeZone,dateHistogramField:dateHistogramField}=job;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("section",{"aria-labelledby":"rollupJobDetailLogisticsTitle","data-test-subj":"rollupJobDetailSummaryLogisticsSection"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",{id:"rollupJobDetailLogisticsTitle","data-test-subj":"rollupJobDetailLogisticsTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.sectionLogisticsLabel",defaultMessage:"Logistics"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemIndexPatternLabel","data-test-subj":"rollupJobDetailLogisticsIndexPatternTitle",defaultMessage:"Index pattern"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"rollupJobDetailLogisticsIndexPatternDescription"},indexPattern),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemCronLabel","data-test-subj":"rollupJobDetailLogisticsCronTitle",defaultMessage:"Cron"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIconTip,{content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemCronTip",defaultMessage:"The frequency with which data is rolled up"})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{"data-test-subj":"rollupJobDetailLogisticsCronDescription"},rollupCron))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemRollupIndexLabel","data-test-subj":"rollupJobDetailLogisticsRollupIndexTitle",defaultMessage:"Rollup index"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"rollupJobDetailLogisticsRollupIndexDescription"},rollupIndex),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemDelayLabel","data-test-subj":"rollupJobDetailLogisticsDelayTitle",defaultMessage:"Delay"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{"data-test-subj":"rollupJobDetailLogisticsDelayDescription"},rollupDelay||external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemDelay.none",defaultMessage:"None"}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"})),external_kbnSharedDeps_React_default.a.createElement("section",{"aria-labelledby":"rollupJobDetailDateHistogramTitle","data-test-subj":"rollupJobDetailSummaryDateHistogramSection"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",{id:"rollupJobDetailDateHistogramTitle","data-test-subj":"rollupJobDetailDateHistogramTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.sectionDateHistogramLabel",defaultMessage:"Date histogram"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemTimeFieldLabel","data-test-subj":"rollupJobDetailDateHistogramTimeFieldTitle",defaultMessage:"Time field"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"rollupJobDetailDateHistogramTimeFieldDescription"},dateHistogramField),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemIntervalLabel","data-test-subj":"rollupJobDetailDateHistogramIntervalTitle",defaultMessage:"Interval"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIconTip,{content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemIntervalTip",defaultMessage:"The time bucket interval into which data is rolled up"})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{"data-test-subj":"rollupJobDetailDateHistogramIntervalDescription"},dateHistogramInterval))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemTimezoneLabel","data-test-subj":"rollupJobDetailDateHistogramTimezoneTitle",defaultMessage:"Timezone"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{"data-test-subj":"rollupJobDetailDateHistogramTimezoneDescription"},dateHistogramTimeZone))))),this.renderStats())}}const tab_terms_columns=[{field:"name",name:"Field",sortable:!0}],TabTerms=({terms:terms})=>external_kbnSharedDeps_React_default.a.createElement(FieldList,{columns:tab_terms_columns,fields:terms,dataTestSubj:"detailPanelTermsTabTable"}),tab_histogram_columns=[{field:"name",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobDetails.tabHistogram.nameColumnLabel",{defaultMessage:"Field"}),sortable:!0}],TabHistogram=({histogram:histogram,histogramInterval:histogramInterval})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabHistogram.intervalLabel",defaultMessage:"Histogram interval"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,histogramInterval)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(FieldList,{columns:tab_histogram_columns,fields:histogram,dataTestSubj:"detailPanelHistogramTabTable"})),tab_metrics_columns=[{field:"name",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobDetails.tabMetrics.nameColumnLabel",{defaultMessage:"Field"}),sortable:!0},{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobDetails.tabMetrics.typesColumnLabel",{defaultMessage:"Types"}),render:({types:types})=>types.sort().join(", ")}],TabMetrics=({metrics:metrics})=>external_kbnSharedDeps_React_default.a.createElement(FieldList,{columns:tab_metrics_columns,fields:metrics,dataTestSubj:"detailPanelMetricsTabTable"}),TabJson=({json:json})=>{const jsonString=JSON.stringify(json,null,2);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCodeEditor,{mode:"json",theme:"textmate",isReadOnly:!0,setOptions:{maxLines:1/0,useWorker:!1},value:jsonString,editorProps:{$blockScrolling:1/0}})},TabRequest=({json:json,endpoint:endpoint})=>{const request=`${endpoint}\n${JSON.stringify(json,null,2)}`;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabRequest.descriptionText",defaultMessage:"This Elasticsearch request will create this rollup job."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCodeBlock,{language:"json",isCopyable:!0},request))},tabToHumanizedMap={JOB_DETAILS_TAB_SUMMARY:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.jobDetails.tabSummaryLabel",defaultMessage:"Summary"}),JOB_DETAILS_TAB_TERMS:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.jobDetails.tabTermsLabel",defaultMessage:"Terms"}),JOB_DETAILS_TAB_HISTOGRAM:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.jobDetails.tabHistogramLabel",defaultMessage:"Histogram"}),JOB_DETAILS_TAB_METRICS:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.jobDetails.tabMetricsLabel",defaultMessage:"Metrics"}),JOB_DETAILS_TAB_JSON:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.jobDetails.tabJsonLabel",defaultMessage:"JSON"}),JOB_DETAILS_TAB_REQUEST:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.jobDetails.tabRequestLabel",defaultMessage:"Request"})},JobDetails=({tab:tab,job:job,stats:stats,json:json,endpoint:endpoint})=>{const{metrics:metrics,terms:terms,histogram:histogram,histogramInterval:histogramInterval}=job;return{JOB_DETAILS_TAB_SUMMARY:external_kbnSharedDeps_React_default.a.createElement(tab_summary_TabSummary,{job:job,stats:stats}),JOB_DETAILS_TAB_TERMS:external_kbnSharedDeps_React_default.a.createElement(TabTerms,{terms:terms}),JOB_DETAILS_TAB_HISTOGRAM:external_kbnSharedDeps_React_default.a.createElement(TabHistogram,{histogram:histogram,histogramInterval:histogramInterval}),JOB_DETAILS_TAB_METRICS:external_kbnSharedDeps_React_default.a.createElement(TabMetrics,{metrics:metrics}),JOB_DETAILS_TAB_JSON:external_kbnSharedDeps_React_default.a.createElement(TabJson,{json:json}),JOB_DETAILS_TAB_REQUEST:external_kbnSharedDeps_React_default.a.createElement(TabRequest,{json:json,endpoint:endpoint})}[tab]};function job_table_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const COLUMNS=[{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobTable.headers.nameHeader",{defaultMessage:"ID"}),fieldName:"id",isSortable:!0},{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobTable.headers.statusHeader",{defaultMessage:"Status"}),fieldName:"status",isSortable:!0,render:({status:status,rollupCron:rollupCron})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{placement:"top",content:"Cron: "+rollupCron},external_kbnSharedDeps_React_default.a.createElement(JobStatus,{status:status}))},{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobTable.headers.indexPatternHeader",{defaultMessage:"Index pattern"}),truncateText:!0,fieldName:"indexPattern",isSortable:!0},{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobTable.headers.rollupIndexHeader",{defaultMessage:"Rollup index"}),truncateText:!0,fieldName:"rollupIndex",isSortable:!0},{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobTable.headers.delayHeader",{defaultMessage:"Delay"}),fieldName:"rollupDelay",isSortable:!0,render:({rollupDelay:rollupDelay})=>rollupDelay||"None"},{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobTable.headers.intervalHeader",{defaultMessage:"Interval"}),fieldName:"dateHistogramInterval",isSortable:!0},{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobTable.headers.groupsHeader",{defaultMessage:"Groups"}),fieldName:"groups",isSortable:!1,truncateText:!0,render:job=>["histogram","terms"].reduce((text,field)=>job[field].length?text?`${text}, ${field}`:field.replace(/^\w/,char=>char.toUpperCase()):text,"")},{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobTable.headers.metricsHeader",{defaultMessage:"Metrics"}),fieldName:"metrics",isSortable:!1,truncateText:!0,render:job=>{const{metrics:metrics}=job;return metrics.length?metrics.map(metric=>metric.name).join(", "):""}}];class job_table_JobTable extends external_kbnSharedDeps_React_.Component{static getDerivedStateFromProps(props,state){const{idToSelectedJobMap:idToSelectedJobMap}=state,jobIds=props.jobs.map(job=>job.id),missingJobIds=Object.keys(idToSelectedJobMap).filter(selectedJobId=>!jobIds.includes(selectedJobId));if(missingJobIds.length){const newMap={...idToSelectedJobMap};return missingJobIds.forEach(missingJobId=>delete newMap[missingJobId]),{idToSelectedJobMap:newMap}}return null}constructor(props){super(props),job_table_defineProperty(this,"toggleAll",()=>{if(this.areAllItemsSelected())return this.setState({idToSelectedJobMap:{}});const{jobs:jobs}=this.props,idToSelectedJobMap={};jobs.forEach(({id:id})=>{idToSelectedJobMap[id]=!0}),this.setState({idToSelectedJobMap:idToSelectedJobMap})}),job_table_defineProperty(this,"toggleItem",id=>{this.setState(({idToSelectedJobMap:idToSelectedJobMap})=>{const newMap={...idToSelectedJobMap};return newMap[id]?delete newMap[id]:newMap[id]=!0,{idToSelectedJobMap:newMap}})}),job_table_defineProperty(this,"resetSelection",()=>{this.setState({idToSelectedJobMap:{}})}),job_table_defineProperty(this,"deselectItems",itemIds=>{this.setState(({idToSelectedJobMap:idToSelectedJobMap})=>{const newMap={...idToSelectedJobMap};return itemIds.forEach(id=>delete newMap[id]),{idToSelectedJobMap:newMap}})}),job_table_defineProperty(this,"areAllItemsSelected",()=>{const{jobs:jobs}=this.props;return-1===jobs.findIndex(job=>!this.isItemSelected(job.id))}),job_table_defineProperty(this,"isItemSelected",id=>!!this.state.idToSelectedJobMap[id]),job_table_defineProperty(this,"onSort",column=>{const{sortField:sortField,isSortAscending:isSortAscending,sortChanged:sortChanged}=this.props;sortChanged(column,sortField!==column||!isSortAscending)}),this.state={idToSelectedJobMap:{}}}getSelectedJobs(){const{jobs:jobs}=this.props,{idToSelectedJobMap:idToSelectedJobMap}=this.state;return Object.keys(idToSelectedJobMap).map(jobId=>jobs.find(job=>job.id===jobId))}buildHeader(){const{sortField:sortField,isSortAscending:isSortAscending}=this.props;return COLUMNS.map(({name:name,fieldName:fieldName,isSortable:isSortable})=>{const isSorted=sortField===fieldName;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTableHeaderCell,{key:name,onSort:isSortable?()=>this.onSort(fieldName):void 0,isSorted:isSorted,isSortAscending:isSortAscending,"data-test-subj":"jobTableHeaderCell-"+fieldName},name)})}buildRowCells(job){const{openDetailPanel:openDetailPanel}=this.props;return COLUMNS.map(({name:name,fieldName:fieldName,render:render,truncateText:truncateText})=>{const value=render?render(job):job[fieldName];let content;return content="id"===fieldName?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:()=>{Object(kibana_services.f)(crud_app_services.a.CLICK,common.p),openDetailPanel(encodeURIComponent(job.id))}},value):external_kbnSharedDeps_React_default.a.createElement("span",null,value),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTableRowCell,{key:`${job.id}-${name}`,"data-test-subj":"jobTableCell-"+fieldName,truncateText:truncateText},truncateText?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{anchorClassName:"eui-textTruncate",content:value},content):content)})}buildRows(){const{jobs:jobs}=this.props;return jobs.map(job=>{const{id:id}=job;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTableRow,{key:id+"-row","data-test-subj":"jobTableRow"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTableRowCellCheckbox,{key:"checkbox-"+id},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCheckbox,{type:"inList",id:"checkboxSelectIndex-"+id,checked:this.isItemSelected(id),onChange:()=>{this.toggleItem(id)},"data-test-subj":"indexTableRowCheckbox-"+id,"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobTable.selectRow",{defaultMessage:"Select this row {id}",values:{id:id}})})),this.buildRowCells(job))})}renderPager(){const{pager:pager,pageChanged:pageChanged,pageSizeChanged:pageSizeChanged}=this.props;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTablePagination,{activePage:pager.getCurrentPageIndex(),itemsPerPage:pager.itemsPerPage,itemsPerPageOptions:[20,50,100],pageCount:pager.getTotalPages(),onChangeItemsPerPage:pageSizeChanged,onChangePage:pageChanged})}render(){const{filterChanged:filterChanged,filter:filter,jobs:jobs,closeDetailPanel:closeDetailPanel}=this.props,{idToSelectedJobMap:idToSelectedJobMap}=this.state,atLeastOneItemSelected=Object.keys(idToSelectedJobMap).length>0;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"l",alignItems:"center"},atLeastOneItemSelected?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(job_action_menu_container_JobActionMenu,{jobs:this.getSelectedJobs(),closeDetailPanel:closeDetailPanel,resetSelection:this.resetSelection,deselectJobs:this.deselectItems})):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldSearch,{fullWidth:!0,value:filter,onChange:event=>{filterChanged(event.target.value)},"data-test-subj":"jobTableFilterInput",placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobTable.searchInputPlaceholder",{defaultMessage:"Search"}),"aria-label":"Search jobs"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),jobs.length>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTable,{"data-test-subj":"rollupJobsListTable"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTableHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTableHeaderCellCheckbox,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCheckbox,{id:"selectAllJobsCheckbox",checked:this.areAllItemsSelected(),onChange:this.toggleAll,type:"inList","aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobTable.selectAllRows",{defaultMessage:"Select all rows"})})),this.buildHeader()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTableBody,null,this.buildRows())):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobTable.noJobsMatchSearchMessage",defaultMessage:"No rollup jobs match your search"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),jobs.length>0?this.renderPager():null)}}job_table_defineProperty(job_table_JobTable,"defaultProps",{jobs:[]});const job_table_container_JobTable=Object(lib.connect)(state=>({jobs:getPageOfJobs(state),pager:getPager(state),filter:getFilter(state),sortField:getSortField(state),isSortAscending:selectors_isSortAscending(state)}),dispatch=>({closeDetailPanel:()=>{dispatch(dispatch=>{dispatch({type:"CLOSE_DETAIL_PANEL"})})},filterChanged:filter=>{dispatch((({filter:filter})=>dispatch=>{dispatch({type:"FILTER_CHANGED",payload:{filter:filter}})})({filter:filter}))},pageChanged:pageNumber=>{dispatch((({pageNumber:pageNumber})=>dispatch=>{dispatch({type:"PAGE_CHANGED",payload:{pageNumber:pageNumber}})})({pageNumber:pageNumber}))},pageSizeChanged:pageSize=>{dispatch((({pageSize:pageSize})=>dispatch=>{dispatch({type:"PAGE_SIZE_CHANGED",payload:{pageSize:pageSize}})})({pageSize:pageSize}))},sortChanged:(sortField,isSortAscending)=>{dispatch((({sortField:sortField,isSortAscending:isSortAscending})=>dispatch=>{dispatch({type:"SORT_CHANGED",payload:{sortField:sortField,isSortAscending:isSortAscending}})})({sortField:sortField,isSortAscending:isSortAscending}))},openDetailPanel:jobId=>{dispatch(detail_panel_openDetailPanel({jobId:jobId}))}}))(job_table_JobTable);const JOB_DETAILS_TABS=["JOB_DETAILS_TAB_SUMMARY","JOB_DETAILS_TAB_TERMS","JOB_DETAILS_TAB_HISTOGRAM","JOB_DETAILS_TAB_METRICS","JOB_DETAILS_TAB_JSON"],tabToUiMetricMap={JOB_DETAILS_TAB_SUMMARY:common.g,JOB_DETAILS_TAB_TERMS:common.h,JOB_DETAILS_TAB_HISTOGRAM:common.d,JOB_DETAILS_TAB_METRICS:common.f,JOB_DETAILS_TAB_JSON:common.e};class detail_panel_DetailPanel extends external_kbnSharedDeps_React_.Component{constructor(props){super(props)}renderTabs(){const{panelType:panelType,job:job,openDetailPanel:openDetailPanel}=this.props;if(!job)return;const{id:id,terms:terms,histogram:histogram,metrics:metrics}=job,renderedTabs=[];return JOB_DETAILS_TABS.map((tab,index)=>{if("JOB_DETAILS_TAB_TERMS"===tab&&!terms.length)return;if("JOB_DETAILS_TAB_HISTOGRAM"===tab&&!histogram.length)return;if("JOB_DETAILS_TAB_METRICS"===tab&&!metrics.length)return;const isSelected=tab===panelType;renderedTabs.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTab,{onClick:()=>{Object(kibana_services.f)(crud_app_services.a.CLICK,tabToUiMetricMap[tab]),openDetailPanel({panelType:tab,jobId:id})},isSelected:isSelected,"data-test-subj":"detailPanelTab"+(isSelected?"Selected":""),key:index},tabToHumanizedMap[tab]))}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTabs,null,renderedTabs))}renderJob(){const{panelType:panelType,job:job}=this.props,{status:status,documentsProcessed:documentsProcessed,pagesProcessed:pagesProcessed,rollupsIndexed:rollupsIndexed,triggerCount:triggerCount,json:json}=job,stats={status:status,documentsProcessed:documentsProcessed,pagesProcessed:pagesProcessed,rollupsIndexed:rollupsIndexed,triggerCount:triggerCount};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutBody,{"data-test-subj":"rollupJobDetailTabContent"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiErrorBoundary,null,external_kbnSharedDeps_React_default.a.createElement(JobDetails,{tab:panelType,job:job,stats:stats,json:json}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutFooter,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(job_action_menu_container_JobActionMenu,{iconSide:"left",jobs:[job],anchorPosition:"upRight",detailPanel:!0,iconType:"arrowUp",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.detailPanel.jobActionMenu.buttonLabel",{defaultMessage:"Manage"})})))))}render(){const{isOpen:isOpen,isLoading:isLoading,closeDetailPanel:closeDetailPanel,job:job,jobId:jobId}=this.props;if(!isOpen)return null;let content;return content=isLoading?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutBody,{"data-test-subj":"rollupJobDetailLoading"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"flexStart",alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"m"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextColor,{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.detailPanel.loadingLabel",defaultMessage:"Loading rollup job..."})))))):job?this.renderJob():external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutBody,{"data-test-subj":"rollupJobDetailJobNotFound"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"flexStart",alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{size:"m",type:"alert",color:"danger"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextColor,{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.detailPanel.notFoundLabel",defaultMessage:"Rollup job not found"})))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyout,{"data-test-subj":"rollupJobDetailFlyout",onClose:closeDetailPanel,"aria-labelledby":"rollupJobDetailsFlyoutTitle",size:"m",maxWidth:550},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"m",id:"rollupJobDetailsFlyoutTitle","data-test-subj":"rollupJobDetailsFlyoutTitle"},external_kbnSharedDeps_React_default.a.createElement("h2",null,jobId)),this.renderTabs()),content)}}var obj,key,value;obj=detail_panel_DetailPanel,key="defaultProps",value={panelType:JOB_DETAILS_TABS[0]},key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;const detail_panel_container_DetailPanel=Object(lib.connect)(state=>({isOpen:isDetailPanelOpen(state),isLoading:selectors_isLoading(state),job:getDetailPanelJob(state),jobId:getDetailPanelJobId(state),panelType:getDetailPanelType(state)}),dispatch=>({closeDetailPanel:()=>{dispatch(dispatch=>{dispatch({type:"CLOSE_DETAIL_PANEL"})})},openDetailPanel:({panelType:panelType,jobId:jobId})=>{dispatch(detail_panel_openDetailPanel({panelType:panelType,jobId:jobId}))}}))(detail_panel_DetailPanel);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}class job_list_JobListUi extends external_kbnSharedDeps_React_.Component{static getDerivedStateFromProps(props){const{openDetailPanel:openDetailPanel,history:{location:{search:search}}}=props,{job:jobId}=Object(esUiShared_public_.extractQueryParams)(search);return null!=jobId&&openDetailPanel(jobId),null}constructor(props){super(props),props.loadJobs(),props.kibana.services.setBreadcrumbs([crud_app_services.u]),this.state={}}componentDidMount(){this.interval=setInterval(()=>this.props.refreshJobs({asSystemRequest:!0}),3e4)}componentWillUnmount(){clearInterval(this.interval),this.props.closeDetailPanel()}getHeaderSection(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContentHeaderSection,{"data-test-subj":"jobListPageHeader"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobListTitle",defaultMessage:"Rollup Jobs"}))))}renderNoPermission(){const title=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobList.noPermissionTitle",{defaultMessage:"Permission error"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,this.getHeaderSection(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{"data-test-subj":"jobListNoPermission",title:title,color:"warning",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobList.noPermissionText",defaultMessage:"You do not have permission to view or add rollup jobs."})))}renderError(error){const{statusCode:statusCode,error:errorString}=error.body,title=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.jobList.loadingErrorTitle",{defaultMessage:"Error loading rollup jobs"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,this.getHeaderSection(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{"data-test-subj":"jobListError",title:title,color:"danger",iconType:"alert"},statusCode," ",errorString))}renderEmpty(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{"data-test-subj":"jobListEmptyPrompt",iconType:"indexRollupApp",title:external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobList.emptyPromptTitle",defaultMessage:"Create your first rollup job"})),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobList.emptyPromptDescription",defaultMessage:"Rollup jobs summarize and store historical data in a smaller index for future analysis."}))),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,_extends({"data-test-subj":"createRollupJobButton"},Object(crud_app_services.r)("/create"),{fill:!0,iconType:"plusInCircle"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobList.emptyPrompt.createButtonLabel",defaultMessage:"Create rollup job"}))})}renderLoading(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"flexStart",alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"m"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,"data-test-subj":"jobListLoading"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextColor,{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobList.loadingTitle",defaultMessage:"Loading rollup jobs..."})))))}renderList(){const{isLoading:isLoading}=this.props;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContentHeader,null,this.getHeaderSection(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContentHeaderSection,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,_extends({fill:!0},Object(crud_app_services.r)("/create")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.jobList.createButtonLabel",defaultMessage:"Create rollup job"})))),isLoading?this.renderLoading():external_kbnSharedDeps_React_default.a.createElement(job_table_container_JobTable,null),external_kbnSharedDeps_React_default.a.createElement(detail_panel_container_DetailPanel,null))}render(){const{isLoading:isLoading,hasJobs:hasJobs,jobLoadError:jobLoadError}=this.props;let content;return content=jobLoadError?403===jobLoadError.status?this.renderNoPermission():this.renderError(jobLoadError):isLoading||hasJobs?this.renderList():this.renderEmpty(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContent,{horizontalPosition:"center",className:"rollupJobsListPanel"},content)}}const JobList=Object(public_.withKibana)(job_list_JobListUi),job_list_container_JobList=Object(lib.connect)(state=>({hasJobs:Boolean(getJobsList(state).length),isLoading:selectors_isLoading(state),jobLoadError:selectors_jobLoadError(state)}),dispatch=>({loadJobs:()=>{dispatch(async dispatch=>{let jobs;dispatch({type:"LOAD_JOBS_START"});try{jobs=await Object(crud_app_services.v)()}catch(error){return dispatch({type:"LOAD_JOBS_FAILURE",payload:{error:error}}),Object(crud_app_services.C)(error,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.loadAction.errorTitle",{defaultMessage:"Error loading rollup jobs"}))}dispatch({type:"LOAD_JOBS_SUCCESS",payload:{jobs:Object(crud_app_services.g)(jobs)}})})},refreshJobs:options=>{dispatch(refreshJobs(options))},openDetailPanel:jobId=>{dispatch(detail_panel_openDetailPanel({jobId:jobId}))},closeDetailPanel:()=>{dispatch(dispatch=>{dispatch({type:"CLOSE_DETAIL_PANEL"})})},cloneJob:jobConfig=>{dispatch(actions_clone_job_cloneJob(jobConfig))}}))(JobList);var external_kbnSharedDeps_Lodash_=__webpack_require__(4);const Navigation=({isSaving:isSaving,hasNextStep:hasNextStep,hasPreviousStep:hasPreviousStep,goToNextStep:goToNextStep,goToPreviousStep:goToPreviousStep,save:save,canGoToNextStep:canGoToNextStep,onClickToggleStart:onClickToggleStart,startJobAfterCreation:startJobAfterCreation})=>{if(isSaving)return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"flexStart",gutterSize:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"l"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.navigation.savingText",defaultMessage:"Saving"}))));const previousStepButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{iconType:"arrowLeft",onClick:goToPreviousStep,"data-test-subj":"rollupJobBackButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.backButton.label",defaultMessage:"Back"}))),nextStepButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{iconType:"arrowRight",iconSide:"right",onClick:goToNextStep,disabled:!canGoToNextStep,fill:!0,"data-test-subj":"rollupJobNextButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.nextButton.label",defaultMessage:"Next"}))),saveButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{color:"secondary",iconType:"check",onClick:save,fill:!0,"data-test-subj":"rollupJobSaveButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.saveButton.label",defaultMessage:"Save"}))),startAfterCreateCheckbox=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,style:{alignSelf:"center"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCheckbox,{id:"rollupJobToggleJobStartAfterCreation","data-test-subj":"rollupJobToggleJobStartAfterCreation",checked:startJobAfterCreation,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.startJobLabel",defaultMessage:"Start job now"}),onChange:onClickToggleStart}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"flexStart",gutterSize:"m"},hasPreviousStep&&previousStepButton,hasNextStep&&nextStepButton,!hasNextStep&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,saveButton,startAfterCreateCheckbox))};var data_public_=__webpack_require__(21);function field_chooser_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class field_chooser_FieldChooser extends external_kbnSharedDeps_React_.Component{constructor(props){super(props),field_chooser_defineProperty(this,"onSearch",e=>{this.setState({searchValue:e.target.value})}),field_chooser_defineProperty(this,"onButtonClick",()=>{this.setState(state=>({isOpen:!state.isOpen}))}),field_chooser_defineProperty(this,"close",()=>{this.setState({isOpen:!1})}),this.state={isOpen:!1,searchValue:""}}render(){const{buttonLabel:buttonLabel,columns:columns,fields:fields,selectedFields:selectedFields,prompt:prompt,onSelectField:onSelectField,dataTestSubj:dataTestSubj}=this.props,{isOpen:isOpen,searchValue:searchValue}=this.state,getRowProps=item=>({onClick:()=>{onSelectField(item)}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{onClick:this.onButtonClick,"data-test-subj":"rollupJobShowFieldChooserButton"},buttonLabel),isOpen?(()=>{const selectedFieldNames=selectedFields.map(({name:name})=>name),unselectedFields=fields.filter(({name:name})=>!selectedFieldNames.includes(name)),searchedItems=searchValue?unselectedFields.filter(item=>{const normalizedSearchValue=searchValue.trim().toLowerCase();return item.name.toLowerCase().includes(normalizedSearchValue)||item.type.toLowerCase().includes(normalizedSearchValue)}):unselectedFields;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyout,{onClose:this.close,"aria-labelledby":"fieldChooserFlyoutTitle",size:"m",maxWidth:400,"data-test-subj":dataTestSubj},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"m",id:"fieldChooserFlyoutTitle","data-test-subj":"rollupJobCreateFlyoutTitle"},external_kbnSharedDeps_React_default.a.createElement("h2",null,buttonLabel)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldSearch,{placeholder:prompt,value:searchValue,onChange:this.onSearch,"aria-label":prompt,fullWidth:!0})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBasicTable,{items:searchedItems,columns:columns,rowProps:getRowProps,responsive:!1,"data-test-subj":dataTestSubj+"-table"})))})():null)}}function StepError({title:title=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepErrorTitle",defaultMessage:"Fix errors before continuing."})}){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:title,color:"danger",iconType:"cross","data-test-subj":"rollupJobCreateStepError"}))}function step_logistics_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}field_chooser_defineProperty(field_chooser_FieldChooser,"defaultProps",{prompt:"Search",dataTestSubj:"rollupJobFieldChooser"});const indexPatternIllegalCharacters=data_public_.indexPatterns.ILLEGAL_CHARACTERS_VISIBLE.join(" "),indexIllegalCharacters=esUiShared_public_.indices.INDEX_ILLEGAL_CHARACTERS_VISIBLE.join(" ");class step_logistics_StepLogistics extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),step_logistics_defineProperty(this,"state",{cronFocus:!1}),step_logistics_defineProperty(this,"showAdvancedCron",()=>{this.setState({cronFocus:!0});const{onFieldsChange:onFieldsChange}=this.props;onFieldsChange({isAdvancedCronVisible:!0})}),step_logistics_defineProperty(this,"hideAdvancedCron",()=>{this.setState({cronFocus:!0});const{onFieldsChange:onFieldsChange,fields:fields}=this.props,{simpleRollupCron:simpleRollupCron}=fields;onFieldsChange({isAdvancedCronVisible:!1,rollupCron:simpleRollupCron})}),step_logistics_defineProperty(this,"renderErrors",()=>{const{areStepErrorsVisible:areStepErrorsVisible,hasErrors:hasErrors}=this.props;return areStepErrorsVisible&&hasErrors?external_kbnSharedDeps_React_default.a.createElement(StepError,null):null})}renderIndexPatternHelpText(){const{isValidatingIndexPattern:isValidatingIndexPattern,hasMatchingIndices:hasMatchingIndices}=this.props;if(!isValidatingIndexPattern&&hasMatchingIndices)return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextColor,{color:"secondary","data-test-subj":"fieldIndexPatternSuccessMessage"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldIndexPattern.helpHasMatchesLabel",defaultMessage:"Success! Index pattern has matching indices."})));let indexPatternValidationStatus;return indexPatternValidationStatus=isValidatingIndexPattern?external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldIndexPattern.helpSearchingLabel",defaultMessage:"Looking for matching indices..."})):external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldIndexPattern.helpMustMatchLabel",defaultMessage:"Index pattern must match at least one index that is not a rollup."})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,indexPatternValidationStatus,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldIndexPattern.helpAllowLabel",defaultMessage:"Use a wildcard ({asterisk}) to match multiple indices.",values:{asterisk:external_kbnSharedDeps_React_default.a.createElement("strong",null,"*")}})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldIndexPattern.helpDisallowLabel",defaultMessage:"Spaces and the characters {characterList} are not allowed.",values:{characterList:external_kbnSharedDeps_React_default.a.createElement("strong",null,indexPatternIllegalCharacters)}})))}renderCronEditor(){const{fields:fields,onFieldsChange:onFieldsChange,areStepErrorsVisible:areStepErrorsVisible,fieldErrors:fieldErrors}=this.props,{rollupCron:rollupCron,cronFrequency:cronFrequency,isAdvancedCronVisible:isAdvancedCronVisible,fieldToPreferredValueMap:fieldToPreferredValueMap}=fields,{rollupCron:errorRollupCron}=fieldErrors;return isAdvancedCronVisible?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldCronLabel",defaultMessage:"Cron expression"}),error:errorRollupCron,isInvalid:Boolean(areStepErrorsVisible&&errorRollupCron),helpText:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:Object(crud_app_services.k)(),target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldCron.helpReferenceLinkLabel",defaultMessage:"Learn more about cron expressions"}))),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{autoFocus:this.state.cronFocus,value:rollupCron,onChange:e=>onFieldsChange({rollupCron:e.target.value}),isInvalid:Boolean(areStepErrorsVisible&&errorRollupCron),fullWidth:!0,"data-test-subj":"rollupAdvancedCron"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:this.hideAdvancedCron},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionSchedule.buttonBasicLabel",defaultMessage:"Create basic interval"})))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(esUiShared_public_.CronEditor,{autoFocus:this.state.cronFocus,fieldToPreferredValueMap:fieldToPreferredValueMap,cronExpression:rollupCron,frequency:cronFrequency,onChange:({cronExpression:cronExpression,frequency:frequency,fieldToPreferredValueMap:fieldToPreferredValueMap})=>onFieldsChange({rollupCron:cronExpression,simpleRollupCron:cronExpression,cronFrequency:frequency,fieldToPreferredValueMap:fieldToPreferredValueMap})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:this.showAdvancedCron,"data-test-subj":"rollupShowAdvancedCronLink"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionSchedule.buttonAdvancedLabel",defaultMessage:"Create cron expression"}))))}render(){const{fields:fields,onFieldsChange:onFieldsChange,areStepErrorsVisible:areStepErrorsVisible,fieldErrors:fieldErrors,isValidatingIndexPattern:isValidatingIndexPattern,indexPatternAsyncErrors:indexPatternAsyncErrors}=this.props,{id:id,indexPattern:indexPattern,rollupIndex:rollupIndex,rollupPageSize:rollupPageSize,rollupDelay:rollupDelay}=fields,{id:errorId,indexPattern:errorIndexPattern,rollupIndex:errorRollupIndex,rollupPageSize:errorRollupPageSize,rollupDelay:errorRollupDelay}=fieldErrors;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{"data-test-subj":"rollupJobCreateLogisticsTitle"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogisticsTitle",defaultMessage:"Logistics"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.logisticsDescription",defaultMessage:"Define how to run the rollup job and when to index the documents."})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"s",flush:"right",href:Object(crud_app_services.o)(),target:"_blank",iconType:"help","data-test-subj":"rollupJobCreateLogisticsDocsButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.readDocsButtonLabel",defaultMessage:"Logistics docs"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiForm,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionIdTitle",defaultMessage:"Name"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionIdDescription",defaultMessage:"This name will be used as a unique identifier for this rollup job."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldIdLabel",defaultMessage:"Name"}),error:errorId,isInvalid:Boolean(areStepErrorsVisible&&errorId),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{isInvalid:Boolean(areStepErrorsVisible&&errorId),value:id,onChange:e=>onFieldsChange({id:e.target.value}),fullWidth:!0,"data-test-subj":"rollupJobName"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionDataFlowTitle",defaultMessage:"Data flow"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionDataFlowDescription",defaultMessage:"Which indices do you want to roll up and where do you want to store the data?"}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldIndexPatternLabel",defaultMessage:"Index pattern"}),error:isValidatingIndexPattern?void 0:errorIndexPattern||indexPatternAsyncErrors,isInvalid:Boolean(areStepErrorsVisible&&errorIndexPattern)||Boolean(indexPatternAsyncErrors),helpText:this.renderIndexPatternHelpText(),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:indexPattern,onChange:e=>onFieldsChange({indexPattern:e.target.value}),isInvalid:Boolean(areStepErrorsVisible&&errorIndexPattern)||Boolean(indexPatternAsyncErrors),isLoading:isValidatingIndexPattern,fullWidth:!0,"data-test-subj":"rollupIndexPattern"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldRollupIndexLabel",defaultMessage:"Rollup index name"}),error:errorRollupIndex,isInvalid:Boolean(areStepErrorsVisible&&errorRollupIndex),helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldRollupIndex.helpDisallowLabel",defaultMessage:"Spaces, commas, and the characters {characterList} are not allowed.",values:{characterList:external_kbnSharedDeps_React_default.a.createElement("strong",null,indexIllegalCharacters)}}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:rollupIndex,onChange:e=>onFieldsChange({rollupIndex:e.target.value}),isInvalid:Boolean(areStepErrorsVisible&&errorRollupIndex),fullWidth:!0,"data-test-subj":"rollupIndexName"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionScheduleTitle",defaultMessage:"Schedule"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionScheduleDescription",defaultMessage:"How often do you want to roll up the data?"}),fullWidth:!0},this.renderCronEditor()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionPageSizeTitle",defaultMessage:"How many documents do you want to roll up at a time?"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionPageSizeDescription",defaultMessage:"A larger page size will roll up data quicker, but requires more memory."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldPageSizeLabel",defaultMessage:"Page size"}),error:errorRollupPageSize,isInvalid:Boolean(areStepErrorsVisible&&errorRollupPageSize),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldNumber,{value:rollupPageSize?Number(rollupPageSize):"",onChange:e=>onFieldsChange({rollupPageSize:e.target.value}),isInvalid:Boolean(areStepErrorsVisible&&errorRollupPageSize),fullWidth:!0,min:0,"data-test-subj":"rollupPageSize"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionDelayTitle",defaultMessage:"How long should the rollup job wait before rolling up new data?"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionDelayDescription",defaultMessage:"A latency buffer will delay rolling up data. This will yield a higher-fidelity rollup by allowing for variable ingest latency. By default, the rollup job attempts to roll up all data that is available."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.fieldDelayLabel",defaultMessage:"Latency buffer (optional)"}),error:errorRollupDelay,isInvalid:Boolean(areStepErrorsVisible&&errorRollupDelay),helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.fieldDelay.helpExampleLabel",defaultMessage:"Example values: 30s, 20m, 24h, 2d, 1w, 1M"}))),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:rollupDelay||"",onChange:e=>onFieldsChange({rollupDelay:e.target.value}),isInvalid:Boolean(areStepErrorsVisible&&errorRollupDelay),fullWidth:!0,"data-test-subj":"rollupDelay"})))),this.renderErrors())}}var external_kbnSharedDeps_MomentTimezone_=__webpack_require__(26),external_kbnSharedDeps_MomentTimezone_default=__webpack_require__.n(external_kbnSharedDeps_MomentTimezone_);const{parseEsInterval:parseEsInterval}=data_public_.search.aggs,timeZoneOptions=external_kbnSharedDeps_MomentTimezone_default.a.tz.names().map(name=>({value:name,text:name}));class step_date_histogram_StepDateHistogram extends external_kbnSharedDeps_React_.Component{static getDerivedStateFromProps(props){const{dateFields:dateFields}=props;return{dateHistogramFieldOptions:dateFields.map(dateField=>({value:dateField,text:dateField}))}}constructor(props){super(props),function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(this,"renderErrors",()=>{const{areStepErrorsVisible:areStepErrorsVisible,hasErrors:hasErrors}=this.props;return areStepErrorsVisible&&hasErrors?external_kbnSharedDeps_React_default.a.createElement(StepError,null):null}),this.state={dateHistogramFieldOptions:[]}}renderIntervalHelpText(){const{fields:fields}=this.props,{dateHistogramInterval:dateHistogramInterval}=fields;let preferFixedWarning;try{const{value:value,unit:unit}=parseEsInterval(dateHistogramInterval);if(1===value)switch(unit){case"d":preferFixedWarning=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextColor,{color:"warning"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.fieldInterval.preferFixedWarningDayLabel",defaultMessage:"Consider using 24h instead of 1d. This allows for more flexible queries."})));break;case"h":preferFixedWarning=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextColor,{color:"warning"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.fieldInterval.preferFixedWarningHourLabel",defaultMessage:"Consider using 60m instead of 1h. This allows for more flexible queries."})))}switch(unit){case"y":preferFixedWarning=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextColor,{color:"warning"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.fieldInterval.preferFixedWarningYearLabel",defaultMessage:"Consider using the d unit instead of y. This allows for more flexible queries."})));break;case"M":preferFixedWarning=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextColor,{color:"warning"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.fieldInterval.preferFixedWarningMonthLabel",defaultMessage:"Consider using the d unit instead of M. This allows for more flexible queries."})));break;case"w":preferFixedWarning=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextColor,{color:"warning"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.fieldInterval.preferFixedWarningWeekLabel",defaultMessage:"Consider using the d unit instead of w. This allows for more flexible queries."})))}}catch(error){}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,preferFixedWarning,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.fieldInterval.helpExampleLabel",defaultMessage:"Example sizes: 1000ms, 30s, 20m, 24h, 2d, 1w, 1M, 1y"})))}render(){const{fields:fields,onFieldsChange:onFieldsChange,areStepErrorsVisible:areStepErrorsVisible,fieldErrors:fieldErrors}=this.props,{dateHistogramInterval:dateHistogramInterval,dateHistogramField:dateHistogramField,dateHistogramTimeZone:dateHistogramTimeZone}=fields,{dateHistogramInterval:errorDateHistogramInterval,dateHistogramField:errorDateHistogramField,dateHistogramTimeZone:errorDateHistogramTimeZone}=fieldErrors,{dateHistogramFieldOptions:dateHistogramFieldOptions}=this.state;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{"data-test-subj":"rollupJobCreateDateHistogramTitle"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogramTitle",defaultMessage:"Date histogram"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"s",flush:"right",href:Object(crud_app_services.m)(),target:"_blank",iconType:"help","data-test-subj":"rollupJobCreateDateHistogramDocsButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.readDocsButtonLabel",defaultMessage:"Date histogram docs"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiForm,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement("div",null),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogramDescription",defaultMessage:"Define how {link} will operate on your rollup data.",values:{link:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:Object(crud_app_services.l)(),target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogramDescription.aggregationsLinkLabel",defaultMessage:"date histogram aggregations"}))}})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.sectionDataSourceDescription",defaultMessage:"Note that smaller time buckets take up proportionally more space."}))),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.fieldDateFieldLabel",defaultMessage:"Date field"}),error:errorDateHistogramField,isInvalid:Boolean(areStepErrorsVisible&&errorDateHistogramField),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{isInvalid:Boolean(areStepErrorsVisible&&errorDateHistogramField),options:dateHistogramFieldOptions,value:dateHistogramField,onChange:e=>onFieldsChange({dateHistogramField:e.target.value}),fullWidth:!0,"data-test-subj":"rollupJobCreateDateFieldSelect"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.fieldIntervalLabel",defaultMessage:"Time bucket size"}),error:errorDateHistogramInterval,isInvalid:Boolean(areStepErrorsVisible&&errorDateHistogramInterval),helpText:this.renderIntervalHelpText(),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:dateHistogramInterval||"",onChange:e=>onFieldsChange({dateHistogramInterval:e.target.value}),isInvalid:Boolean(areStepErrorsVisible&&errorDateHistogramInterval),fullWidth:!0,"data-test-subj":"rollupJobInterval"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.fieldTimeZoneLabel",defaultMessage:"Time zone"}),error:errorDateHistogramTimeZone||"",isInvalid:Boolean(areStepErrorsVisible&&errorDateHistogramTimeZone),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{options:timeZoneOptions,value:dateHistogramTimeZone,onChange:e=>onFieldsChange({dateHistogramTimeZone:e.target.value}),fullWidth:!0,"data-test-subj":"rollupJobCreateTimeZoneSelect"})))),this.renderErrors())}}function step_terms_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class step_terms_StepTerms extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),step_terms_defineProperty(this,"onSelectField",field=>{const{fields:{terms:terms},onFieldsChange:onFieldsChange}=this.props;onFieldsChange({terms:terms.concat(field)})}),step_terms_defineProperty(this,"onRemoveField",field=>{const{fields:{terms:terms},onFieldsChange:onFieldsChange}=this.props;onFieldsChange({terms:terms.filter(term=>term!==field)})})}render(){const{fields:fields,termsFields:termsFields}=this.props,{terms:terms}=fields,columns=[{field:"name",name:"Field",sortable:!0},{field:"type",name:"Type",truncateText:!0,sortable:!0,width:"180px"}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{"data-test-subj":"rollupJobCreateTermsTitle"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepTermsTitle",defaultMessage:"Terms (optional)"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepTermsDescription",defaultMessage:"Select the fields you want to bucket using terms aggregations. This can be costly for high-cardinality fields such as IP addresses, if the time bucket is sparse."})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,className:"rollupJobWizardStepActions"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"s",flush:"right",href:Object(crud_app_services.s)(),target:"_blank",iconType:"help","data-test-subj":"rollupJobCreateTermsDocsButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepTerms.readDocsButtonLabel",defaultMessage:"Terms docs"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(FieldList,{columns:columns,fields:terms,onRemoveField:this.onRemoveField,emptyMessage:external_kbnSharedDeps_React_default.a.createElement("p",null,"No terms fields added"),addButton:external_kbnSharedDeps_React_default.a.createElement(field_chooser_FieldChooser,{buttonLabel:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepTerms.fieldsChooserLabel",defaultMessage:"Add terms fields"}),columns:columns,fields:termsFields,selectedFields:terms,onSelectField:this.onSelectField,dataTestSubj:"rollupJobTermsFieldChooser"}),dataTestSubj:"rollupJobTermsFieldList"}))}}function step_histogram_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class step_histogram_StepHistogram extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),step_histogram_defineProperty(this,"onSelectField",field=>{const{fields:{histogram:histogram},onFieldsChange:onFieldsChange}=this.props;onFieldsChange({histogram:histogram.concat(field)})}),step_histogram_defineProperty(this,"onRemoveField",field=>{const{fields:{histogram:histogram},onFieldsChange:onFieldsChange}=this.props;onFieldsChange({histogram:histogram.filter(histogramField=>histogramField!==field)})}),step_histogram_defineProperty(this,"renderErrors",()=>{const{areStepErrorsVisible:areStepErrorsVisible,hasErrors:hasErrors}=this.props;return areStepErrorsVisible&&hasErrors?external_kbnSharedDeps_React_default.a.createElement(StepError,null):null})}render(){const{fields:fields,histogramFields:histogramFields}=this.props,{histogram:histogram}=fields,columns=[{field:"name",name:"Field",sortable:!0}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{"data-test-subj":"rollupJobCreateHistogramTitle"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepHistogramTitle",defaultMessage:"Histogram (optional)"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepHistogram.histogramDescription",defaultMessage:"Select the fields you want to bucket using numeric intervals."})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,className:"rollupJobWizardStepActions"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"s",flush:"right",href:Object(crud_app_services.n)(),target:"_blank",iconType:"help","data-test-subj":"rollupJobCreateHistogramDocsButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepHistogram.readDocsButtonLabel",defaultMessage:"Histogram docs"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(FieldList,{columns:columns,fields:histogram,onRemoveField:this.onRemoveField,emptyMessage:external_kbnSharedDeps_React_default.a.createElement("p",null,"No histogram fields added"),addButton:external_kbnSharedDeps_React_default.a.createElement(field_chooser_FieldChooser,{buttonLabel:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepHistogram.fieldsChooserLabel",defaultMessage:"Add histogram fields"}),columns:columns,fields:histogramFields,selectedFields:histogram,onSelectField:this.onSelectField,dataTestSubj:"rollupJobHistogramFieldChooser"}),dataTestSubj:"rollupJobHistogramFieldList"}),this.renderInterval(),this.renderErrors())}renderInterval(){const{fields:fields,onFieldsChange:onFieldsChange,areStepErrorsVisible:areStepErrorsVisible,fieldErrors:fieldErrors}=this.props,{histogram:histogram,histogramInterval:histogramInterval}=fields,{histogramInterval:errorHistogramInterval}=fieldErrors;return histogram.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xl"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepHistogram.sectionHistogramIntervalTitle",defaultMessage:"Histogram interval"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepHistogram.sectionHistogramIntervalDescription",defaultMessage:"This is the interval of histogram buckets to be generated when rolling up, e.g. 5 will create buckets that are five units wide (0-5, 5-10, etc). Note that only one interval can be specified in the histogram group, meaning that all fields being grouped via the histogram must share the same interval."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepHistogram.fieldHistogramIntervalLabel",defaultMessage:"Interval"}),error:errorHistogramInterval,isInvalid:Boolean(areStepErrorsVisible&&errorHistogramInterval),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldNumber,{value:histogramInterval||0===histogramInterval?Number(histogramInterval):"",onChange:e=>onFieldsChange({histogramInterval:e.target.value}),isInvalid:Boolean(areStepErrorsVisible&&errorHistogramInterval),fullWidth:!0,"data-test-subj":"rollupJobCreateHistogramInterval"})))):null}}const METRICS_CONFIG=[{type:"avg",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.create.stepMetrics.checkboxAverageLabel",{defaultMessage:"Average"})},{type:"max",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.create.stepMetrics.checkboxMaxLabel",{defaultMessage:"Maximum"})},{type:"min",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.create.stepMetrics.checkboxMinLabel",{defaultMessage:"Minimum"})},{type:"sum",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.create.stepMetrics.checkboxSumLabel",{defaultMessage:"Sum"})},{type:"value_count",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.create.stepMetrics.checkboxValueCountLabel",{defaultMessage:"Value count"})}];function step_metrics_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const whiteListedMetricByFieldType={numeric:{avg:!0,max:!0,min:!0,sum:!0,value_count:!0},date:{max:!0,min:!0,value_count:!0}},checkWhiteListedMetricByFieldType=(fieldType,metricType)=>!!Object(external_kbnSharedDeps_Lodash_.get)(whiteListedMetricByFieldType,[fieldType,metricType]),metricTypesConfig=METRICS_CONFIG.map(config=>{const fieldTypes={};for(const[fieldType,metrics]of Object.entries(whiteListedMetricByFieldType))fieldTypes[fieldType]=!!metrics[config.type];return{...config,fieldTypes:fieldTypes}});class step_metrics_StepMetrics extends external_kbnSharedDeps_React_.Component{constructor(props){super(props),step_metrics_defineProperty(this,"openMetricsPopover",()=>{this.setState({metricsPopoverOpen:!0})}),step_metrics_defineProperty(this,"closeMetricsPopover",()=>{this.setState({metricsPopoverOpen:!1})}),step_metrics_defineProperty(this,"onSelectField",field=>{const{fields:{metrics:metrics},onFieldsChange:onFieldsChange}=this.props;onFieldsChange({metrics:metrics.concat({...field,types:[]})})}),step_metrics_defineProperty(this,"onRemoveField",field=>{const{fields:{metrics:metrics},onFieldsChange:onFieldsChange}=this.props;onFieldsChange({metrics:metrics.filter(({name:name})=>name!==field.name)})}),step_metrics_defineProperty(this,"setMetric",(fieldName,metricType,isSelected)=>{const{fields:{metrics:metrics}}=this.props,newMetrics=[...metrics],newMetric=newMetrics.find(({name:name})=>name===fieldName);return isSelected?-1===newMetric.types.indexOf(metricType)&&newMetric.types.push(metricType):newMetric.types.splice(newMetric.types.indexOf(metricType),1),newMetrics}),step_metrics_defineProperty(this,"renderErrors",()=>{const{areStepErrorsVisible:areStepErrorsVisible,fieldErrors:fieldErrors}=this.props,{metrics:errorMetrics}=fieldErrors;return areStepErrorsVisible&&errorMetrics?external_kbnSharedDeps_React_default.a.createElement(StepError,{title:errorMetrics}):null}),this.state={metricsPopoverOpen:!1,listColumns:[],selectedMetricsMap:[]}}renderMetricsSelectAllCheckboxes(){const{fields:{metrics:metrics},onFieldsChange:onFieldsChange}=this.props;let disabledCheckboxesCount=0;const checkboxElements=[{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.create.stepMetrics.allCheckbox",{defaultMessage:"All"}),type:"all"}].concat(metricTypesConfig).map(({label:label,type:metricType,fieldTypes:fieldTypes},idx)=>{const isAllMetricTypes="all"===metricType,applicableMetrics=isAllMetricTypes?metrics:metrics.filter(({type:type})=>fieldTypes[type]);let checkedCount=0,isChecked=!1,isDisabled=!1;return isAllMetricTypes?(applicableMetrics.forEach(({types:types,type:type})=>{Object.keys(whiteListedMetricByFieldType[type]).every(metricName=>types.some(type=>type===metricName))&&++checkedCount}),isDisabled=0===metrics.length):(applicableMetrics.forEach(({types:types})=>{types.some(type=>type===metricType)&&++checkedCount}),isDisabled=!metrics.some(({type:fieldType})=>checkWhiteListedMetricByFieldType(fieldType,metricType))),isChecked=checkedCount===applicableMetrics.length,isDisabled&&++disabledCheckboxesCount,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCheckbox,{id:idx+"-select-all-checkbox","data-test-subj":"rollupJobMetricsSelectAllCheckbox-"+metricType,disabled:isDisabled,label:label,checked:!isDisabled&&isChecked,onChange:()=>{if(isAllMetricTypes){const newMetrics=metricTypesConfig.reduce((acc,{type:type})=>this.setMetrics(type,!isChecked),null);onFieldsChange({metrics:newMetrics})}else onFieldsChange({metrics:this.setMetrics(metricType,!isChecked)})}})});return{checkboxElements:checkboxElements,allCheckboxesDisabled:checkboxElements.length===disabledCheckboxesCount}}getMetricsSelectAllMenu(){const{checkboxElements:checkboxElements,allCheckboxesDisabled:allCheckboxesDisabled}=this.renderMetricsSelectAllCheckboxes();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{ownFocus:!0,isOpen:this.state.metricsPopoverOpen,closePopover:this.closeMetricsPopover,button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{disabled:allCheckboxesDisabled,onClick:this.openMetricsPopover,"data-test-subj":"rollupJobSelectAllMetricsPopoverButton"},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.create.stepMetrics.selectAllPopoverButtonLabel",{defaultMessage:"Select metrics"}))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"flexStart",direction:"column"},checkboxElements.map((item,idx)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{key:idx},item)))))}renderRowSelectAll({fieldName:fieldName,fieldType:fieldType,types:types}){const{onFieldsChange:onFieldsChange}=this.props,hasSelectedItems=Boolean(types.length),maxItemsToBeSelected=Object.keys(whiteListedMetricByFieldType[fieldType]).length,allSelected=maxItemsToBeSelected===types.length,label=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.create.stepMetrics.selectAllRowLabel",{defaultMessage:"All"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCheckbox,{id:fieldName+"-selectAll-checkbox","data-test-subj":"rollupJobMetricsCheckbox-selectAll",label:label,checked:allSelected,onChange:()=>{const isSelected=!hasSelectedItems||types.length!==maxItemsToBeSelected,newMetrics=metricTypesConfig.filter(config=>config.fieldTypes[fieldType]).reduce((acc,{type:typeConfig})=>this.setMetric(fieldName,typeConfig,isSelected),null);onFieldsChange({metric:newMetrics})}})}getListColumns(){return step_metrics_StepMetrics.chooserColumns.concat({type:"metrics",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.create.stepMetrics.metricsColumnHeader",{defaultMessage:"Metrics"}),render:({name:fieldName,type:fieldType,types:types})=>{const{onFieldsChange:onFieldsChange}=this.props,checkboxes=metricTypesConfig.map(({type:type,label:label})=>{if(!checkWhiteListedMetricByFieldType(fieldType,type))return;const isSelected=types.includes(type);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,key:`${fieldName}-${type}-checkbox`},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCheckbox,{id:`${fieldName}-${type}-checkbox`,"data-test-subj":"rollupJobMetricsCheckbox-"+type,label:label,checked:isSelected,onChange:()=>onFieldsChange({metrics:this.setMetric(fieldName,type,!isSelected)})}))}).filter(checkbox=>void 0!==checkbox);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{wrap:!0,gutterSize:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,key:fieldName+"-selectAll-checkbox"},this.renderRowSelectAll({fieldName:fieldName,fieldType:fieldType,types:types})),checkboxes)}})}setMetrics(metricType,isSelected){const{fields:{metrics:fields}}=this.props;return fields.filter(field=>checkWhiteListedMetricByFieldType(field.type,metricType)).reduce((acc,metric)=>this.setMetric(metric.name,metricType,isSelected),[])}render(){const{fields:fields,metricsFields:metricsFields}=this.props,{metrics:metrics}=fields;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{"data-test-subj":"rollupJobCreateMetricsTitle"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepMetricsTitle",defaultMessage:"Metrics (optional)"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepMetricsDescription",defaultMessage:"Select the metrics to collect while rolling up data. By default, only doc_counts are collected for each group."})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,className:"rollupJobWizardStepActions"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"s",flush:"right",href:Object(crud_app_services.p)(),target:"_blank",iconType:"help","data-test-subj":"rollupJobCreateMetricsDocsButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepMetrics.readDocsButtonLabel",defaultMessage:"Metrics docs"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(FieldList,{columns:this.getListColumns(),fields:metrics,onRemoveField:this.onRemoveField,emptyMessage:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.create.stepMetrics.emptyListLabel",{defaultMessage:"No metrics fields added"})),addButton:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceEvenly",alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(field_chooser_FieldChooser,{key:"stepMetricsFieldChooser",buttonLabel:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepMetrics.fieldsChooserLabel",defaultMessage:"Add metrics fields"}),columns:step_metrics_StepMetrics.chooserColumns,fields:metricsFields,selectedFields:metrics,onSelectField:this.onSelectField,dataTestSubj:"rollupJobMetricsFieldChooser"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,this.getMetricsSelectAllMenu())),dataTestSubj:"rollupJobMetricsFieldList"}),this.renderErrors())}}step_metrics_defineProperty(step_metrics_StepMetrics,"chooserColumns",[{field:"name",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.create.stepMetrics.fieldColumnLabel",{defaultMessage:"Field"}),sortable:!0,width:"240px"},{field:"type",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.create.stepMetrics.typeColumnLabel",{defaultMessage:"Type"}),truncateText:!0,sortable:!0,width:"100px"}]);const step_review_JOB_DETAILS_TABS=["JOB_DETAILS_TAB_SUMMARY","JOB_DETAILS_TAB_TERMS","JOB_DETAILS_TAB_HISTOGRAM","JOB_DETAILS_TAB_METRICS","JOB_DETAILS_TAB_REQUEST"];class step_review_StepReview extends external_kbnSharedDeps_React_.Component{constructor(props){super(props),function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(this,"selectTab",tab=>{this.setState({selectedTab:tab})}),this.state={selectedTab:step_review_JOB_DETAILS_TABS[0]}}renderTabs(){const{selectedTab:selectedTab}=this.state,{job:job}=this.props,renderedTabs=[];return step_review_JOB_DETAILS_TABS.forEach((tab,index)=>{if("JOB_DETAILS_TAB_TERMS"===tab&&!job.terms.length)return;if("JOB_DETAILS_TAB_HISTOGRAM"===tab&&!job.histogram.length)return;if("JOB_DETAILS_TAB_METRICS"===tab&&!job.metrics.length)return;const isSelected=tab===selectedTab;renderedTabs.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTab,{onClick:()=>this.selectTab(tab),isSelected:isSelected,"data-test-subj":"stepReviewTab",key:index},tabToHumanizedMap[tab]))}),1===!renderedTabs.length?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTabs,null,renderedTabs),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}))}render(){const{job:job}=this.props,{selectedTab:selectedTab}=this.state,json=Object(crud_app_services.y)(job),endpoint="PUT _rollup/job/"+job.id;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{"data-test-subj":"rollupJobCreateReviewTitle"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.stepReviewTitle",defaultMessage:"Review details for '{jobId}'",values:{jobId:job.id}}))),this.renderTabs(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiErrorBoundary,null,external_kbnSharedDeps_React_default.a.createElement(JobDetails,{job:job,json:json,endpoint:endpoint,tab:selectedTab})))}}function validateId(id,clonedId){return clonedId&&id===clonedId?[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.idSameAsCloned",defaultMessage:'Name cannot be the same as cloned name: "{clonedId}".',values:{clonedId:clonedId}})]:id&&id.trim()?void 0:[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.idMissing",defaultMessage:"Name is required."})]}function validateIndexPattern(indexPattern,rollupIndex){if(!indexPattern||!indexPattern.trim())return[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.indexPatternMissing",defaultMessage:"Index pattern is required."})];if(indexPattern===rollupIndex)return[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.indexPatternSameAsRollupIndex",defaultMessage:"Index pattern cannot have the same as the rollup index."})];const illegalCharacters=data_public_.indexPatterns.ILLEGAL_CHARACTERS_VISIBLE.reduce((chars,char)=>(indexPattern.includes(char)&&chars.push(char),chars),[]);return illegalCharacters.length?[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.indexPatternIllegalCharacters",defaultMessage:"Remove the characters {characterList} from your index pattern.",values:{characterList:external_kbnSharedDeps_React_default.a.createElement("strong",null,illegalCharacters.join(" "))}})]:indexPattern.includes(" ")?[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.indexPatternSpaces",defaultMessage:"Remove the spaces from your index pattern."})]:void 0}function validateRollupIndex(rollupIndex,indexPattern){if(!rollupIndex||!rollupIndex.trim())return[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupIndexMissing",defaultMessage:"Rollup index is required."})];if(rollupIndex===indexPattern)return[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupIndexSameAsIndexPattern",defaultMessage:"Rollup index cannot have the same as the index pattern."})];const illegalCharacters=esUiShared_public_.indices.findIllegalCharactersInIndexName(rollupIndex);return illegalCharacters.length?[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupIndexIllegalCharacters",defaultMessage:"Remove the characters {characterList} from your rollup index name.",values:{characterList:external_kbnSharedDeps_React_default.a.createElement("strong",null,illegalCharacters.join(" "))}})]:rollupIndex.includes(",")?[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupIndexCommas",defaultMessage:"Remove the commas from your rollup index name."})]:rollupIndex.includes(" ")?[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupIndexSpaces",defaultMessage:"Remove the spaces from your rollup index name."})]:"."===rollupIndex[0]?[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupIndexBeginningPeriod",defaultMessage:"Index names cannot begin with periods."})]:void 0}var cronstrue=__webpack_require__(70),cronstrue_default=__webpack_require__.n(cronstrue);function validateRollupCron(rollupCron){if(!rollupCron||!rollupCron.trim())return[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupCronMissing",defaultMessage:"Cron pattern or basic interval is required."})];try{cronstrue_default.a.toString(rollupCron)}catch(error){const prefix="Error: ",prefixIndex=error.indexOf(prefix);return error.substring(prefixIndex+prefix.length)}}function validateRollupPageSize(rollupPageSize){return rollupPageSize&&rollupPageSize.toString().trim()?rollupPageSize<=0?[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupPageSizeGreaterThanZero",defaultMessage:"Page size must be greater than zero."})]:void 0:[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupPageSizeMissing",defaultMessage:"Page size is required."})]}const{InvalidEsIntervalFormatError:InvalidEsIntervalFormatError,InvalidEsCalendarIntervalError:InvalidEsCalendarIntervalError,parseEsInterval:validate_rollup_delay_parseEsInterval}=data_public_.search.aggs;function validateRollupDelay(rollupDelay){if(rollupDelay&&rollupDelay.trim())try{validate_rollup_delay_parseEsInterval(rollupDelay)}catch(error){if(error instanceof InvalidEsIntervalFormatError)return[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupDelayInvalidFormat",defaultMessage:"Invalid delay format."})];if(error instanceof InvalidEsCalendarIntervalError){const{unit:unit}=error;return[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupDelayInvalidCalendarInterval",defaultMessage:"The '{unit}' unit only allows values of 1. Try {suggestion}.",values:{unit:unit,suggestion:external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupDelayInvalidCalendarIntervalSuggestion",defaultMessage:"1{unit}",values:{unit:unit}}))}})]}throw error}}function validateDateHistogramField(dateHistogramField){if(!dateHistogramField||!dateHistogramField.trim())return[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.dateHistogramFieldMissing",defaultMessage:"Date field is required."})]}const{InvalidEsIntervalFormatError:validate_date_histogram_interval_InvalidEsIntervalFormatError,InvalidEsCalendarIntervalError:validate_date_histogram_interval_InvalidEsCalendarIntervalError,parseEsInterval:validate_date_histogram_interval_parseEsInterval}=data_public_.search.aggs;function validateDateHistogramInterval(dateHistogramInterval){if(!dateHistogramInterval||!dateHistogramInterval.trim())return[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.dateHistogramIntervalMissing",defaultMessage:"Interval is required."})];try{validate_date_histogram_interval_parseEsInterval(dateHistogramInterval)}catch(error){if(error instanceof validate_date_histogram_interval_InvalidEsIntervalFormatError)return[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.dateHistogramIntervalInvalidFormat",defaultMessage:"Invalid interval format."})];if(error instanceof validate_date_histogram_interval_InvalidEsCalendarIntervalError){const{unit:unit}=error;return[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.dateHistogramIntervalInvalidCalendarInterval",defaultMessage:"The '{unit}' unit only allows values of 1. Try {suggestion}.",values:{unit:unit,suggestion:external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.dateHistogramIntervalInvalidCalendarIntervalSuggestion",defaultMessage:"1{unit}",values:{unit:unit}}))}})]}throw error}}function validateHistogramInterval(histogram,histogramInterval){if(histogram.length)return histogramInterval<=0?[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.histogramIntervalZero",defaultMessage:"Interval must be greater than zero."})]:Math.round(histogramInterval)!==Number(histogramInterval)?[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.histogramIntervalWholeNumber",defaultMessage:"Interval must be a whole number."})]:histogramInterval?void 0:[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.histogramIntervalMissing",defaultMessage:"An interval is required to roll up these histogram fields."})]}function validateMetrics(metrics){const missingTypes=metrics.reduce((accumMissingTypes,{name:name,types:types})=>(types.length||accumMissingTypes.push(name),accumMissingTypes),[]);if(missingTypes.length){const allMissingTypes=missingTypes.join(", ");return[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.metricsTypesMissing",key:"xpack.rollupJobs.create.errors.metricsTypesMissing",defaultMessage:"Select metrics types for these fields or remove them: {allMissingTypes}.",values:{allMissingTypes:allMissingTypes}})]}}const STEP_LOGISTICS="STEP_LOGISTICS",STEP_DATE_HISTOGRAM="STEP_DATE_HISTOGRAM",STEP_TERMS="STEP_TERMS",STEP_HISTOGRAM="STEP_HISTOGRAM",STEP_METRICS="STEP_METRICS",STEP_REVIEW="STEP_REVIEW",stepIds=[STEP_LOGISTICS,STEP_DATE_HISTOGRAM,STEP_TERMS,STEP_HISTOGRAM,STEP_METRICS,STEP_REVIEW],stepIdToStepConfigMap={[STEP_LOGISTICS]:{getDefaultFields:(overrides={})=>{const isAdvancedCronVisible=!!overrides.rollupCron,rollupPageSize=Object(external_kbnSharedDeps_Lodash_.get)(overrides,["json","config","page_size"],1e3),clonedRollupId=overrides.id||void 0,id=overrides.id?overrides.id+"-copy":"",defaults={indexPattern:"",rollupIndex:"",rollupCron:"0 0 0 ? * 7",simpleRollupCron:"0 0 0 ? * 7",rollupPageSize:rollupPageSize,rollupDelay:"1d",cronFrequency:"WEEK",fieldToPreferredValueMap:{}};return{...defaults,...Object(external_kbnSharedDeps_Lodash_.pick)(overrides,Object.keys(defaults)),id:id,isAdvancedCronVisible:isAdvancedCronVisible,rollupPageSize:rollupPageSize,clonedRollupId:clonedRollupId}},fieldsValidator:fields=>{const{id:id,indexPattern:indexPattern,rollupIndex:rollupIndex,rollupCron:rollupCron,rollupPageSize:rollupPageSize,rollupDelay:rollupDelay,clonedRollupId:clonedRollupId}=fields;return{id:validateId(id,clonedRollupId),indexPattern:validateIndexPattern(indexPattern,rollupIndex),rollupIndex:validateRollupIndex(rollupIndex,indexPattern),rollupCron:validateRollupCron(rollupCron),rollupPageSize:validateRollupPageSize(rollupPageSize),rollupDelay:validateRollupDelay(rollupDelay)}}},[STEP_DATE_HISTOGRAM]:{getDefaultFields:(overrides={})=>{const defaults={dateHistogramField:null,dateHistogramInterval:null,dateHistogramTimeZone:"UTC"};return{...defaults,...Object(external_kbnSharedDeps_Lodash_.pick)(overrides,Object.keys(defaults))}},fieldsValidator:fields=>{const{dateHistogramField:dateHistogramField,dateHistogramInterval:dateHistogramInterval}=fields;return{dateHistogramField:validateDateHistogramField(dateHistogramField),dateHistogramInterval:validateDateHistogramInterval(dateHistogramInterval)}}},[STEP_TERMS]:{getDefaultFields:(overrides={})=>({terms:[],...Object(external_kbnSharedDeps_Lodash_.pick)(overrides,["terms"])})},[STEP_HISTOGRAM]:{getDefaultFields:overrides=>({histogram:[],histogramInterval:void 0,...Object(external_kbnSharedDeps_Lodash_.pick)(overrides,["histogram","histogramInterval"])}),fieldsValidator:fields=>{const{histogram:histogram,histogramInterval:histogramInterval}=fields;return{histogramInterval:validateHistogramInterval(histogram,histogramInterval)}}},[STEP_METRICS]:{getDefaultFields:(overrides={})=>({metrics:[],...Object(external_kbnSharedDeps_Lodash_.pick)(overrides,["metrics"])}),fieldsValidator:fields=>{const{metrics:metrics}=fields;return{metrics:validateMetrics(metrics)}}},[STEP_REVIEW]:{getDefaultFields:()=>({})}};function steps_config_hasErrors(fieldErrors){return Object.values(fieldErrors).some(error=>void 0!==error)}function job_create_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const stepIdToTitleMap={[STEP_LOGISTICS]:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.create.steps.stepLogisticsTitle",{defaultMessage:"Logistics"}),[STEP_DATE_HISTOGRAM]:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.create.steps.stepDateHistogramTitle",{defaultMessage:"Date histogram"}),[STEP_TERMS]:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.create.steps.stepTermsTitle",{defaultMessage:"Terms"}),[STEP_HISTOGRAM]:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.create.steps.stepHistogramTitle",{defaultMessage:"Histogram"}),[STEP_METRICS]:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.create.steps.stepMetricsTitle",{defaultMessage:"Metrics"}),[STEP_REVIEW]:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.create.steps.stepReviewTitle",{defaultMessage:"Review and save"})};class job_create_JobCreateUi extends external_kbnSharedDeps_React_.Component{constructor(props){super(props),job_create_defineProperty(this,"requestIndexPatternValidation",Object(external_kbnSharedDeps_Lodash_.debounce)((resetDefaults=!0)=>{const indexPattern=this.getIndexPattern(),lastIndexPatternValidationTime=this.lastIndexPatternValidationTime=Date.now();Object(crud_app_services.H)(indexPattern).then(response=>{if(!this._isMounted)return;if(lastIndexPatternValidationTime!==this.lastIndexPatternValidationTime)return;const{doesMatchIndices:doesIndexPatternMatchIndices,doesMatchRollupIndices:doesIndexPatternMatchRollupIndices,dateFields:indexPatternDateFields,numericFields:numericFields,keywordFields:keywordFields}=response;let indexPatternAsyncErrors;doesIndexPatternMatchRollupIndices?indexPatternAsyncErrors=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.indexPatternMatchesRollupIndices",defaultMessage:"Index pattern must not match rollup indices."})]:doesIndexPatternMatchIndices?indexPatternDateFields.length||(indexPatternAsyncErrors=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.indexPatternNoTimeFields",defaultMessage:"Index pattern must match indices that contain time fields."})]):indexPatternAsyncErrors=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.indexPatternNoMatchingIndices",defaultMessage:"Index pattern doesn't match any indices."})];const numericType=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.create.numericTypeField",{defaultMessage:"numeric"}),keywordType=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.create.keywordTypeField",{defaultMessage:"keyword"}),dateType=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.create.dateTypeField",{defaultMessage:"date"}),formattedNumericFields=Object(crud_app_services.j)(numericFields,numericType),formattedKeywordFields=Object(crud_app_services.j)(keywordFields,keywordType),formattedDateFields=Object(crud_app_services.j)(indexPatternDateFields,dateType),{jobToClone:jobToClone,stepsFields:stepsFields}=this.state,{[STEP_METRICS]:{metrics:metrics}}=stepsFields;if(jobToClone&&metrics&&metrics.length&&!Object(external_kbnSharedDeps_Lodash_.first)(metrics).type){const typeMaps=[{fields:formattedNumericFields,type:numericType},{fields:formattedKeywordFields,type:keywordType},{fields:formattedDateFields,type:dateType}],retypedMetrics=Object(crud_app_services.x)({metrics:metrics,typeMaps:typeMaps});this.onFieldsChange({metrics:retypedMetrics},STEP_METRICS)}function sortFields(a,b){const nameA=a.name.toUpperCase(),nameB=b.name.toUpperCase();return nameA<nameB?-1:nameA>nameB?1:0}const indexPatternTermsFields=[...formattedNumericFields,...formattedKeywordFields].sort(sortFields),indexPatternHistogramFields=[...formattedNumericFields].sort(sortFields),indexPatternMetricsFields=[...formattedNumericFields,...formattedDateFields].sort(sortFields);indexPatternDateFields.sort(),resetDefaults&&this.onFieldsChange({dateHistogramField:indexPatternDateFields.length?indexPatternDateFields[0]:void 0},STEP_DATE_HISTOGRAM),this.setState({indexPatternAsyncErrors:indexPatternAsyncErrors,indexPatternDateFields:indexPatternDateFields,indexPatternTermsFields:indexPatternTermsFields,indexPatternHistogramFields:indexPatternHistogramFields,indexPatternMetricsFields:indexPatternMetricsFields,isValidatingIndexPattern:!1})}).catch(error=>{if(this._isMounted&&lastIndexPatternValidationTime===this.lastIndexPatternValidationTime)if(error&&error.body){const{error:errorString,statusCode:statusCode}=error.body,indexPatternAsyncErrors=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.create.errors.indexPatternValidationError",defaultMessage:"There was a problem validating this index pattern: {statusCode} {error}",values:{error:errorString,statusCode:statusCode}})];this.setState({indexPatternAsyncErrors:indexPatternAsyncErrors,indexPatternDateFields:[],indexPatternTermsFields:[],indexPatternHistogramFields:[],indexPatternMetricsFields:[],isValidatingIndexPattern:!1})}else Object(kibana_services.a)().add(error,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.create.errors.indexPatternValidationFatalErrorTitle",{defaultMessage:"Rollup Job Wizard index pattern validation"}))})},300)),job_create_defineProperty(this,"goToNextStep",()=>{this.goToStep(this.state.nextStepId)}),job_create_defineProperty(this,"goToPreviousStep",()=>{this.goToStep(this.state.previousStepId)}),job_create_defineProperty(this,"onFieldsChange",(fields,currentStepId=this.state.currentStepId)=>{const{stepsFields:stepsFields}=this.state,prevFields=stepsFields[currentStepId],newStepsFields={...function(fields,stepsFields){const{indexPattern:indexPattern}=fields,affectedStepsFields=Object(external_kbnSharedDeps_Lodash_.cloneDeep)(stepsFields);return indexPattern&&(affectedStepsFields[STEP_DATE_HISTOGRAM].dateHistogramField=void 0,affectedStepsFields[STEP_TERMS].terms=[],affectedStepsFields[STEP_HISTOGRAM].histogram=[],affectedStepsFields[STEP_METRICS].metrics=[]),affectedStepsFields}(fields,stepsFields),[currentStepId]:{...prevFields,...fields}};this.setState({stepsFields:newStepsFields,stepsFieldErrors:this.getStepsFieldsErrors(newStepsFields)})}),job_create_defineProperty(this,"save",()=>{const{createJob:createJob}=this.props;createJob(this.getAllFields())}),job_create_defineProperty(this,"onToggleStartAfterCreate",eve=>{this.setState({startJobAfterCreation:eve.target.checked})}),props.kibana.services.setBreadcrumbs([crud_app_services.u,crud_app_services.b]);const{jobToClone:stepDefaultOverrides}=props,_stepsFields=Object(external_kbnSharedDeps_Lodash_.mapValues)(stepIdToStepConfigMap,step=>Object(external_kbnSharedDeps_Lodash_.cloneDeep)(step.getDefaultFields(stepDefaultOverrides)));this.state={jobToClone:stepDefaultOverrides||null,checkpointStepId:stepIds[0],currentStepId:stepIds[0],nextStepId:stepIds[1],previousStepId:void 0,stepsFieldErrors:this.getStepsFieldsErrors(_stepsFields),areStepErrorsVisible:!!stepDefaultOverrides,stepsFields:_stepsFields,isValidatingIndexPattern:!1,indexPatternAsyncErrors:void 0,indexPatternDateFields:[],indexPatternTermsFields:[],indexPatternHistogramFields:[],indexPatternMetricsFields:[],startJobAfterCreation:!1},this.lastIndexPatternValidationTime=0}componentDidMount(){this._isMounted=!0;const{clearCloneJob:clearCloneJob,jobToClone:jobToClone}=this.props;jobToClone&&(clearCloneJob(),this.requestIndexPatternValidation(!1))}componentDidUpdate(prevProps,prevState){const indexPattern=this.getIndexPattern();if(indexPattern!==this.getIndexPattern(prevState)){if(!indexPattern||!indexPattern.trim())return void this.setState({indexPatternAsyncErrors:void 0,indexPatternDateFields:[],isValidatingIndexPattern:!1});this.setState({isValidatingIndexPattern:!0}),this.requestIndexPatternValidation()}}componentWillUnmount(){this._isMounted=!1,this.props.clearCreateJobErrors()}getSteps(){const{currentStepId:currentStepId,checkpointStepId:checkpointStepId}=this.state,indexOfCurrentStep=stepIds.indexOf(currentStepId);return stepIds.map((stepId,index)=>({title:stepIdToTitleMap[stepId],isComplete:index<indexOfCurrentStep,isSelected:index===indexOfCurrentStep,onClick:()=>this.goToStep(stepId),disabled:!this.canGoToStep(stepId)||stepIds.indexOf(stepId)>stepIds.indexOf(checkpointStepId),"data-test-subj":index===indexOfCurrentStep?`createRollupStep${index+1}--active`:"createRollupStep"+(index+1)}))}goToStep(stepId){if(!this.canGoToStep(stepId))return void this.setState({areStepErrorsVisible:!0});const currentStepIndex=stepIds.indexOf(stepId);this.setState({currentStepId:stepId,nextStepId:stepIds[currentStepIndex+1],previousStepId:stepIds[currentStepIndex-1],areStepErrorsVisible:!1,isSaving:!1}),stepIds.indexOf(stepId)>stepIds.indexOf(this.state.checkpointStepId)&&this.setState({checkpointStepId:stepId})}canGoToStep(stepId){const indexOfStep=stepIds.indexOf(stepId);return stepIds.slice(0,indexOfStep).every(prerequisiteStepId=>!this.hasStepErrors(prerequisiteStepId))}hasStepErrors(stepId){const{indexPatternAsyncErrors:indexPatternAsyncErrors,stepsFieldErrors:stepsFieldErrors}=this.state;if(stepId===STEP_LOGISTICS&&Boolean(indexPatternAsyncErrors))return!0;const stepFieldErrors=stepsFieldErrors[stepId];return Object.values(stepFieldErrors).some(error=>null!=error)}getStepsFieldsErrors(newStepsFields){return Object.keys(newStepsFields).reduce((stepsFieldErrors,stepId)=>{const stepFields=newStepsFields[stepId],fieldsValidator=stepIdToStepConfigMap[stepId].fieldsValidator;return stepsFieldErrors[stepId]="function"==typeof fieldsValidator?fieldsValidator(stepFields):{},stepsFieldErrors},{})}getAllFields(){const{stepsFields:{[STEP_LOGISTICS]:{id:id,indexPattern:indexPattern,rollupIndex:rollupIndex,rollupCron:rollupCron,rollupDelay:rollupDelay,rollupPageSize:rollupPageSize},[STEP_DATE_HISTOGRAM]:{dateHistogramInterval:dateHistogramInterval,dateHistogramTimeZone:dateHistogramTimeZone,dateHistogramField:dateHistogramField},[STEP_TERMS]:{terms:terms},[STEP_HISTOGRAM]:{histogram:histogram,histogramInterval:histogramInterval},[STEP_METRICS]:{metrics:metrics},[STEP_REVIEW]:{}},startJobAfterCreation:startJobAfterCreation}=this.state;return{id:id,indexPattern:indexPattern,rollupIndex:rollupIndex,rollupCron:rollupCron,rollupPageSize:rollupPageSize,rollupDelay:rollupDelay,dateHistogramInterval:dateHistogramInterval,dateHistogramTimeZone:dateHistogramTimeZone,dateHistogramField:dateHistogramField,terms:terms,histogram:histogram,histogramInterval:histogramInterval,metrics:metrics,startJobAfterCreation:startJobAfterCreation}}getIndexPattern(state=this.state){return state.stepsFields[STEP_LOGISTICS].indexPattern}render(){const{isSaving:isSaving,saveError:saveError}=this.props;let savingFeedback,saveErrorFeedback;if(isSaving&&(savingFeedback=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiOverlayMask,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingKibana,{size:"xl"}))),saveError){const{message:message,cause:cause}=saveError;let errorBody;cause&&(errorBody=1===cause.length?external_kbnSharedDeps_React_default.a.createElement("p",null,cause[0]):external_kbnSharedDeps_React_default.a.createElement("ul",null,cause.map(causeValue=>external_kbnSharedDeps_React_default.a.createElement("li",{key:causeValue},causeValue)))),saveErrorFeedback=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:message,icon:"cross",color:"danger"},errorBody),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContent,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContentHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.rollupJobs.createTitle",defaultMessage:"Create rollup job"})))),saveErrorFeedback,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiStepsHorizontal,{steps:this.getSteps()}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),this.renderCurrentStep(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),this.renderNavigation()),savingFeedback)}renderCurrentStep(){const{currentStepId:currentStepId,stepsFields:stepsFields,stepsFieldErrors:stepsFieldErrors,areStepErrorsVisible:areStepErrorsVisible,isValidatingIndexPattern:isValidatingIndexPattern,indexPatternDateFields:indexPatternDateFields,indexPatternAsyncErrors:indexPatternAsyncErrors,indexPatternTermsFields:indexPatternTermsFields,indexPatternHistogramFields:indexPatternHistogramFields,indexPatternMetricsFields:indexPatternMetricsFields}=this.state,currentStepFields=stepsFields[currentStepId],currentStepFieldErrors=stepsFieldErrors[currentStepId];switch(currentStepId){case STEP_LOGISTICS:return external_kbnSharedDeps_React_default.a.createElement(step_logistics_StepLogistics,{fields:currentStepFields,onFieldsChange:this.onFieldsChange,fieldErrors:currentStepFieldErrors,hasErrors:steps_config_hasErrors(currentStepFieldErrors),areStepErrorsVisible:areStepErrorsVisible,isValidatingIndexPattern:isValidatingIndexPattern,indexPatternAsyncErrors:indexPatternAsyncErrors,hasMatchingIndices:Boolean(indexPatternDateFields.length)});case STEP_DATE_HISTOGRAM:return external_kbnSharedDeps_React_default.a.createElement(step_date_histogram_StepDateHistogram,{indexPattern:this.getIndexPattern(),fields:currentStepFields,onFieldsChange:this.onFieldsChange,fieldErrors:currentStepFieldErrors,hasErrors:steps_config_hasErrors(currentStepFieldErrors),areStepErrorsVisible:areStepErrorsVisible,dateFields:indexPatternDateFields});case STEP_TERMS:return external_kbnSharedDeps_React_default.a.createElement(step_terms_StepTerms,{fields:currentStepFields,onFieldsChange:this.onFieldsChange,termsFields:indexPatternTermsFields});case STEP_HISTOGRAM:return external_kbnSharedDeps_React_default.a.createElement(step_histogram_StepHistogram,{fields:currentStepFields,onFieldsChange:this.onFieldsChange,fieldErrors:currentStepFieldErrors,hasErrors:steps_config_hasErrors(currentStepFieldErrors),areStepErrorsVisible:areStepErrorsVisible,histogramFields:indexPatternHistogramFields});case STEP_METRICS:return external_kbnSharedDeps_React_default.a.createElement(step_metrics_StepMetrics,{fields:currentStepFields,onFieldsChange:this.onFieldsChange,fieldErrors:currentStepFieldErrors,areStepErrorsVisible:areStepErrorsVisible,metricsFields:indexPatternMetricsFields});case STEP_REVIEW:return external_kbnSharedDeps_React_default.a.createElement(step_review_StepReview,{job:this.getAllFields()});default:return null}}renderNavigation(){const{isValidatingIndexPattern:isValidatingIndexPattern,nextStepId:nextStepId,previousStepId:previousStepId,areStepErrorsVisible:areStepErrorsVisible,startJobAfterCreation:startJobAfterCreation}=this.state,{isSaving:isSaving}=this.props,hasNextStep=null!=nextStepId,canGoToNextStep=!isValidatingIndexPattern&&hasNextStep&&(!areStepErrorsVisible||this.canGoToStep(nextStepId));return external_kbnSharedDeps_React_default.a.createElement(Navigation,{isSaving:isSaving,hasNextStep:hasNextStep,hasPreviousStep:null!=previousStepId,goToNextStep:this.goToNextStep,goToPreviousStep:this.goToPreviousStep,canGoToNextStep:canGoToNextStep,save:this.save,onClickToggleStart:this.onToggleStartAfterCreate,startJobAfterCreation:startJobAfterCreation})}}const JobCreate=Object(public_.withKibana)(job_create_JobCreateUi),job_create_container_JobCreate=Object(lib.connect)(state=>({isSaving:selectors_isSaving(state),saveError:getCreateJobError(state),jobToClone:getCloneJobConfig(state)}),dispatch=>({createJob:jobConfig=>{dispatch((jobConfig=>async dispatch=>{let newJob;dispatch({type:"CREATE_JOB_START"});try{[newJob]=await Promise.all([Object(crud_app_services.c)(Object(crud_app_services.y)(jobConfig)),new Promise(resolve=>setTimeout(resolve,500))])}catch(error){if(error){const{body:body}=error,statusCode=error.statusCode||body&&body.statusCode;if(body)return dispatch(409===statusCode?{type:"CREATE_JOB_FAILURE",payload:{error:{message:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.createAction.jobIdAlreadyExistsErrorMessage",{defaultMessage:"A job with ID '{jobConfigId}' already exists.",values:{jobConfigId:jobConfig.id}})}}}:{type:"CREATE_JOB_FAILURE",payload:{error:{message:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.createAction.failedDefaultErrorMessage",{defaultMessage:"Request failed with a {statusCode} error. {message}",values:{statusCode:statusCode,message:body.message}}),cause:body.cause}}})}return Object(kibana_services.a)().add(error,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.rollupJobs.createAction.errorTitle",{defaultMessage:"Error creating rollup job"}))}dispatch({type:"CREATE_JOB_SUCCESS",payload:{job:Object(crud_app_services.f)(newJob)}}),jobConfig.startJobAfterCreation&&dispatch(change_job_status_startJobs([jobConfig.id])),Object(crud_app_services.q)().history.push({pathname:"/job_list",search:"?job="+encodeURIComponent(jobConfig.id)})})(jobConfig))},clearCreateJobErrors:()=>{dispatch(dispatch=>{dispatch({type:"CLEAR_CREATE_JOB_ERRORS"})})},clearCloneJob:()=>{dispatch(dispatch=>{dispatch({type:"CLONE_JOB_CLEAR"})})}}))(JobCreate);class app_ShareRouterComponent extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),this.registerRouter()}registerRouter(){const{history:history}=this.props;Object(crud_app_services.w)({history:history})}render(){return this.props.children}}const ShareRouter=Object(external_kbnSharedDeps_ReactRouterDom_.withRouter)(app_ShareRouterComponent);class app_App extends external_kbnSharedDeps_React_.Component{componentDidMount(){Object(kibana_services.f)(crud_app_services.a.LOADED,common.b)}componentWillUnmount(){Object(crud_app_services.B)(!0)}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Router,{history:this.props.history},external_kbnSharedDeps_React_default.a.createElement(ShareRouter,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Switch,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Redirect,{exact:!0,from:"/",to:"/job_list"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{exact:!0,path:"/job_list",component:job_list_container_JobList}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{exact:!0,path:"/create",component:job_create_container_JobCreate}))))}}__webpack_require__(71);const renderApp=async(core,{history:history,element:element,setBreadcrumbs:setBreadcrumbs})=>{const[coreStart]=await core.getStartServices(),I18nContext=coreStart.i18n.Context,services={history:history,setBreadcrumbs:setBreadcrumbs};return Object(external_kbnSharedDeps_ReactDom_.render)(external_kbnSharedDeps_React_default.a.createElement(I18nContext,null,external_kbnSharedDeps_React_default.a.createElement(public_.KibanaContextProvider,{services:services},external_kbnSharedDeps_React_default.a.createElement(lib.Provider,{store:rollupJobsStore},external_kbnSharedDeps_React_default.a.createElement(app_App,{history:history})))),element),()=>{Object(external_kbnSharedDeps_ReactDom_.unmountComponentAtNode)(element)}}}])]);