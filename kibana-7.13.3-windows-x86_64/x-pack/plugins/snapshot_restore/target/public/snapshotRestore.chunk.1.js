/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.snapshotRestore_bundle_jsonpfunction=window.snapshotRestore_bundle_jsonpfunction||[]).push([[1],{31:function(module,exports,__webpack_require__){(function(process){const debug="object"==typeof process&&Object({IS_KIBANA_DISTRIBUTABLE:"true"})&&Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG)?(...args)=>console.error("SEMVER",...args):()=>{};module.exports=debug}).call(this,__webpack_require__(38))},32:function(module,exports){const MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;module.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER,MAX_SAFE_COMPONENT_LENGTH:16}},33:function(module,exports){ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],(function(acequire,exports,module){"use strict";exports.isDark=!1,exports.cssClass="ace-tm",exports.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',acequire("../lib/dom").importCssString(exports.cssText,exports.cssClass)}))},34:function(module,exports,__webpack_require__){"use strict";const strictUriEncode=__webpack_require__(41),decodeComponent=__webpack_require__(42),splitOnFirst=__webpack_require__(43);function validateArrayFormatSeparator(value){if("string"!=typeof value||1!==value.length)throw new TypeError("arrayFormatSeparator must be single character string")}function encode(value,options){return options.encode?options.strict?strictUriEncode(value):encodeURIComponent(value):value}function decode(value,options){return options.decode?decodeComponent(value):value}function removeHash(input){const hashStart=input.indexOf("#");return-1!==hashStart&&(input=input.slice(0,hashStart)),input}function extract(input){const queryStart=(input=removeHash(input)).indexOf("?");return-1===queryStart?"":input.slice(queryStart+1)}function parseValue(value,options){return options.parseNumbers&&!Number.isNaN(Number(value))&&"string"==typeof value&&""!==value.trim()?value=Number(value):!options.parseBooleans||null===value||"true"!==value.toLowerCase()&&"false"!==value.toLowerCase()||(value="true"===value.toLowerCase()),value}function parse(input,options){validateArrayFormatSeparator((options=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},options)).arrayFormatSeparator);const formatter=function(options){let result;switch(options.arrayFormat){case"index":return(key,value,accumulator)=>{result=/\[(\d*)\]$/.exec(key),key=key.replace(/\[\d*\]$/,""),result?(void 0===accumulator[key]&&(accumulator[key]={}),accumulator[key][result[1]]=value):accumulator[key]=value};case"bracket":return(key,value,accumulator)=>{result=/(\[\])$/.exec(key),key=key.replace(/\[\]$/,""),result?void 0!==accumulator[key]?accumulator[key]=[].concat(accumulator[key],value):accumulator[key]=[value]:accumulator[key]=value};case"comma":case"separator":return(key,value,accumulator)=>{const newValue="string"==typeof value&&value.split("").indexOf(options.arrayFormatSeparator)>-1?value.split(options.arrayFormatSeparator).map(item=>decode(item,options)):null===value?value:decode(value,options);accumulator[key]=newValue};default:return(key,value,accumulator)=>{void 0!==accumulator[key]?accumulator[key]=[].concat(accumulator[key],value):accumulator[key]=value}}}(options),ret=Object.create(null);if("string"!=typeof input)return ret;if(!(input=input.trim().replace(/^[?#&]/,"")))return ret;for(const param of input.split("&")){let[key,value]=splitOnFirst(options.decode?param.replace(/\+/g," "):param,"=");value=void 0===value?null:["comma","separator"].includes(options.arrayFormat)?value:decode(value,options),formatter(decode(key,options),value,ret)}for(const key of Object.keys(ret)){const value=ret[key];if("object"==typeof value&&null!==value)for(const k of Object.keys(value))value[k]=parseValue(value[k],options);else ret[key]=parseValue(value,options)}return!1===options.sort?ret:(!0===options.sort?Object.keys(ret).sort():Object.keys(ret).sort(options.sort)).reduce((result,key)=>{const value=ret[key];return Boolean(value)&&"object"==typeof value&&!Array.isArray(value)?result[key]=function keysSorter(input){return Array.isArray(input)?input.sort():"object"==typeof input?keysSorter(Object.keys(input)).sort((a,b)=>Number(a)-Number(b)).map(key=>input[key]):input}(value):result[key]=value,result},Object.create(null))}exports.extract=extract,exports.parse=parse,exports.stringify=(object,options)=>{if(!object)return"";validateArrayFormatSeparator((options=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},options)).arrayFormatSeparator);const shouldFilter=key=>options.skipNull&&null==object[key]||options.skipEmptyString&&""===object[key],formatter=function(options){switch(options.arrayFormat){case"index":return key=>(result,value)=>{const index=result.length;return void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,[encode(key,options),"[",index,"]"].join("")]:[...result,[encode(key,options),"[",encode(index,options),"]=",encode(value,options)].join("")]};case"bracket":return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,[encode(key,options),"[]"].join("")]:[...result,[encode(key,options),"[]=",encode(value,options)].join("")];case"comma":case"separator":return key=>(result,value)=>null==value||0===value.length?result:0===result.length?[[encode(key,options),"=",encode(value,options)].join("")]:[[result,encode(value,options)].join(options.arrayFormatSeparator)];default:return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,encode(key,options)]:[...result,[encode(key,options),"=",encode(value,options)].join("")]}}(options),objectCopy={};for(const key of Object.keys(object))shouldFilter(key)||(objectCopy[key]=object[key]);const keys=Object.keys(objectCopy);return!1!==options.sort&&keys.sort(options.sort),keys.map(key=>{const value=object[key];return void 0===value?"":null===value?encode(key,options):Array.isArray(value)?value.reduce(formatter(key),[]).join("&"):encode(key,options)+"="+encode(value,options)}).filter(x=>x.length>0).join("&")},exports.parseUrl=(input,options)=>{options=Object.assign({decode:!0},options);const[url,hash]=splitOnFirst(input,"#");return Object.assign({url:url.split("?")[0]||"",query:parse(extract(input),options)},options&&options.parseFragmentIdentifier&&hash?{fragmentIdentifier:decode(hash,options)}:{})},exports.stringifyUrl=(input,options)=>{options=Object.assign({encode:!0,strict:!0},options);const url=removeHash(input.url).split("?")[0]||"",queryFromUrl=exports.extract(input.url),parsedQueryFromUrl=exports.parse(queryFromUrl,{sort:!1}),query=Object.assign(parsedQueryFromUrl,input.query);let queryString=exports.stringify(query,options);queryString&&(queryString="?"+queryString);let hash=function(url){let hash="";const hashStart=url.indexOf("#");return-1!==hashStart&&(hash=url.slice(hashStart)),hash}(input.url);return input.fragmentIdentifier&&(hash="#"+encode(input.fragmentIdentifier,options)),`${url}${queryString}${hash}`}},35:function(module,exports,__webpack_require__){const compare=__webpack_require__(36);module.exports=(a,b,loose)=>compare(a,b,loose)>0},36:function(module,exports,__webpack_require__){const SemVer=__webpack_require__(37);module.exports=(a,b,loose)=>new SemVer(a,loose).compare(new SemVer(b,loose))},37:function(module,exports,__webpack_require__){const debug=__webpack_require__(31),{MAX_LENGTH:MAX_LENGTH,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER}=__webpack_require__(32),{re:re,t:t}=__webpack_require__(39),{compareIdentifiers:compareIdentifiers}=__webpack_require__(40);class SemVer{constructor(version,options){if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),version instanceof SemVer){if(version.loose===!!options.loose&&version.includePrerelease===!!options.includePrerelease)return version;version=version.version}else if("string"!=typeof version)throw new TypeError("Invalid Version: "+version);if(version.length>MAX_LENGTH)throw new TypeError(`version is longer than ${MAX_LENGTH} characters`);debug("SemVer",version,options),this.options=options,this.loose=!!options.loose,this.includePrerelease=!!options.includePrerelease;const m=version.trim().match(options.loose?re[t.LOOSE]:re[t.FULL]);if(!m)throw new TypeError("Invalid Version: "+version);if(this.raw=version,this.major=+m[1],this.minor=+m[2],this.patch=+m[3],this.major>MAX_SAFE_INTEGER||this.major<0)throw new TypeError("Invalid major version");if(this.minor>MAX_SAFE_INTEGER||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>MAX_SAFE_INTEGER||this.patch<0)throw new TypeError("Invalid patch version");m[4]?this.prerelease=m[4].split(".").map(id=>{if(/^[0-9]+$/.test(id)){const num=+id;if(num>=0&&num<MAX_SAFE_INTEGER)return num}return id}):this.prerelease=[],this.build=m[5]?m[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version}toString(){return this.version}compare(other){if(debug("SemVer.compare",this.version,this.options,other),!(other instanceof SemVer)){if("string"==typeof other&&other===this.version)return 0;other=new SemVer(other,this.options)}return other.version===this.version?0:this.compareMain(other)||this.comparePre(other)}compareMain(other){return other instanceof SemVer||(other=new SemVer(other,this.options)),compareIdentifiers(this.major,other.major)||compareIdentifiers(this.minor,other.minor)||compareIdentifiers(this.patch,other.patch)}comparePre(other){if(other instanceof SemVer||(other=new SemVer(other,this.options)),this.prerelease.length&&!other.prerelease.length)return-1;if(!this.prerelease.length&&other.prerelease.length)return 1;if(!this.prerelease.length&&!other.prerelease.length)return 0;let i=0;do{const a=this.prerelease[i],b=other.prerelease[i];if(debug("prerelease compare",i,a,b),void 0===a&&void 0===b)return 0;if(void 0===b)return 1;if(void 0===a)return-1;if(a!==b)return compareIdentifiers(a,b)}while(++i)}compareBuild(other){other instanceof SemVer||(other=new SemVer(other,this.options));let i=0;do{const a=this.build[i],b=other.build[i];if(debug("prerelease compare",i,a,b),void 0===a&&void 0===b)return 0;if(void 0===b)return 1;if(void 0===a)return-1;if(a!==b)return compareIdentifiers(a,b)}while(++i)}inc(release,identifier){switch(release){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",identifier);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",identifier);break;case"prepatch":this.prerelease.length=0,this.inc("patch",identifier),this.inc("pre",identifier);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",identifier),this.inc("pre",identifier);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let i=this.prerelease.length;for(;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);-1===i&&this.prerelease.push(0)}identifier&&(this.prerelease[0]===identifier?isNaN(this.prerelease[1])&&(this.prerelease=[identifier,0]):this.prerelease=[identifier,0]);break;default:throw new Error("invalid increment argument: "+release)}return this.format(),this.raw=this.version,this}}module.exports=SemVer},38:function(module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},39:function(module,exports,__webpack_require__){const{MAX_SAFE_COMPONENT_LENGTH:MAX_SAFE_COMPONENT_LENGTH}=__webpack_require__(32),debug=__webpack_require__(31),re=(exports=module.exports={}).re=[],src=exports.src=[],t=exports.t={};let R=0;const createToken=(name,value,isGlobal)=>{const index=R++;debug(index,value),t[name]=index,src[index]=value,re[index]=new RegExp(value,isGlobal?"g":void 0)};createToken("NUMERICIDENTIFIER","0|[1-9]\\d*"),createToken("NUMERICIDENTIFIERLOOSE","[0-9]+"),createToken("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),createToken("MAINVERSION",`(${src[t.NUMERICIDENTIFIER]})\\.(${src[t.NUMERICIDENTIFIER]})\\.(${src[t.NUMERICIDENTIFIER]})`),createToken("MAINVERSIONLOOSE",`(${src[t.NUMERICIDENTIFIERLOOSE]})\\.(${src[t.NUMERICIDENTIFIERLOOSE]})\\.(${src[t.NUMERICIDENTIFIERLOOSE]})`),createToken("PRERELEASEIDENTIFIER",`(?:${src[t.NUMERICIDENTIFIER]}|${src[t.NONNUMERICIDENTIFIER]})`),createToken("PRERELEASEIDENTIFIERLOOSE",`(?:${src[t.NUMERICIDENTIFIERLOOSE]}|${src[t.NONNUMERICIDENTIFIER]})`),createToken("PRERELEASE",`(?:-(${src[t.PRERELEASEIDENTIFIER]}(?:\\.${src[t.PRERELEASEIDENTIFIER]})*))`),createToken("PRERELEASELOOSE",`(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`),createToken("BUILDIDENTIFIER","[0-9A-Za-z-]+"),createToken("BUILD",`(?:\\+(${src[t.BUILDIDENTIFIER]}(?:\\.${src[t.BUILDIDENTIFIER]})*))`),createToken("FULLPLAIN",`v?${src[t.MAINVERSION]}${src[t.PRERELEASE]}?${src[t.BUILD]}?`),createToken("FULL",`^${src[t.FULLPLAIN]}$`),createToken("LOOSEPLAIN",`[v=\\s]*${src[t.MAINVERSIONLOOSE]}${src[t.PRERELEASELOOSE]}?${src[t.BUILD]}?`),createToken("LOOSE",`^${src[t.LOOSEPLAIN]}$`),createToken("GTLT","((?:<|>)?=?)"),createToken("XRANGEIDENTIFIERLOOSE",src[t.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*"),createToken("XRANGEIDENTIFIER",src[t.NUMERICIDENTIFIER]+"|x|X|\\*"),createToken("XRANGEPLAIN",`[v=\\s]*(${src[t.XRANGEIDENTIFIER]})(?:\\.(${src[t.XRANGEIDENTIFIER]})(?:\\.(${src[t.XRANGEIDENTIFIER]})(?:${src[t.PRERELEASE]})?${src[t.BUILD]}?)?)?`),createToken("XRANGEPLAINLOOSE",`[v=\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})(?:\\.(${src[t.XRANGEIDENTIFIERLOOSE]})(?:\\.(${src[t.XRANGEIDENTIFIERLOOSE]})(?:${src[t.PRERELEASELOOSE]})?${src[t.BUILD]}?)?)?`),createToken("XRANGE",`^${src[t.GTLT]}\\s*${src[t.XRANGEPLAIN]}$`),createToken("XRANGELOOSE",`^${src[t.GTLT]}\\s*${src[t.XRANGEPLAINLOOSE]}$`),createToken("COERCE",`(^|[^\\d])(\\d{1,${MAX_SAFE_COMPONENT_LENGTH}})(?:\\.(\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?(?:\\.(\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?(?:$|[^\\d])`),createToken("COERCERTL",src[t.COERCE],!0),createToken("LONETILDE","(?:~>?)"),createToken("TILDETRIM",`(\\s*)${src[t.LONETILDE]}\\s+`,!0),exports.tildeTrimReplace="$1~",createToken("TILDE",`^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`),createToken("TILDELOOSE",`^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`),createToken("LONECARET","(?:\\^)"),createToken("CARETTRIM",`(\\s*)${src[t.LONECARET]}\\s+`,!0),exports.caretTrimReplace="$1^",createToken("CARET",`^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`),createToken("CARETLOOSE",`^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`),createToken("COMPARATORLOOSE",`^${src[t.GTLT]}\\s*(${src[t.LOOSEPLAIN]})$|^$`),createToken("COMPARATOR",`^${src[t.GTLT]}\\s*(${src[t.FULLPLAIN]})$|^$`),createToken("COMPARATORTRIM",`(\\s*)${src[t.GTLT]}\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`,!0),exports.comparatorTrimReplace="$1$2$3",createToken("HYPHENRANGE",`^\\s*(${src[t.XRANGEPLAIN]})\\s+-\\s+(${src[t.XRANGEPLAIN]})\\s*$`),createToken("HYPHENRANGELOOSE",`^\\s*(${src[t.XRANGEPLAINLOOSE]})\\s+-\\s+(${src[t.XRANGEPLAINLOOSE]})\\s*$`),createToken("STAR","(<|>)?=?\\s*\\*"),createToken("GTE0","^\\s*>=\\s*0.0.0\\s*$"),createToken("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},40:function(module,exports){const numeric=/^[0-9]+$/,compareIdentifiers=(a,b)=>{const anum=numeric.test(a),bnum=numeric.test(b);return anum&&bnum&&(a=+a,b=+b),a===b?0:anum&&!bnum?-1:bnum&&!anum?1:a<b?-1:1};module.exports={compareIdentifiers:compareIdentifiers,rcompareIdentifiers:(a,b)=>compareIdentifiers(b,a)}},41:function(module,exports,__webpack_require__){"use strict";module.exports=str=>encodeURIComponent(str).replace(/[!'()*]/g,x=>"%"+x.charCodeAt(0).toString(16).toUpperCase())},42:function(module,exports,__webpack_require__){"use strict";var singleMatcher=new RegExp("%[a-f0-9]{2}","gi"),multiMatcher=new RegExp("(%[a-f0-9]{2})+","gi");function decodeComponents(components,split){try{return decodeURIComponent(components.join(""))}catch(err){}if(1===components.length)return components;split=split||1;var left=components.slice(0,split),right=components.slice(split);return Array.prototype.concat.call([],decodeComponents(left),decodeComponents(right))}function decode(input){try{return decodeURIComponent(input)}catch(err){for(var tokens=input.match(singleMatcher),i=1;i<tokens.length;i++)tokens=(input=decodeComponents(tokens,i).join("")).match(singleMatcher);return input}}module.exports=function(encodedURI){if("string"!=typeof encodedURI)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof encodedURI+"`");try{return encodedURI=encodedURI.replace(/\+/g," "),decodeURIComponent(encodedURI)}catch(err){return function(input){for(var replaceMap={"%FE%FF":"��","%FF%FE":"��"},match=multiMatcher.exec(input);match;){try{replaceMap[match[0]]=decodeURIComponent(match[0])}catch(err){var result=decode(match[0]);result!==match[0]&&(replaceMap[match[0]]=result)}match=multiMatcher.exec(input)}replaceMap["%C2"]="�";for(var entries=Object.keys(replaceMap),i=0;i<entries.length;i++){var key=entries[i];input=input.replace(new RegExp(key,"g"),replaceMap[key])}return input}(encodedURI)}}},43:function(module,exports,__webpack_require__){"use strict";module.exports=(string,separator)=>{if("string"!=typeof string||"string"!=typeof separator)throw new TypeError("Expected the arguments to be of type `string`");if(""===separator)return[string];const separatorIndex=string.indexOf(separator);return-1===separatorIndex?[string]:[string.slice(0,separatorIndex),string.slice(separatorIndex+separator.length)]}},44:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"mountManagementSection",(function(){return mountManagementSection}));var external_kbnSharedDeps_KbnI18n_=__webpack_require__(4),services_http=__webpack_require__(3),services_text=__webpack_require__(8);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const breadcrumbService=new class{constructor(){_defineProperty(this,"breadcrumbs",{management:[],home:[],snapshots:[],repositories:[],policies:[],restore_status:[],repositoryAdd:[],repositoryEdit:[],restoreSnapshot:[],policyAdd:[],policyEdit:[]}),_defineProperty(this,"setBreadcrumbsHandler",void 0)}setup(setBreadcrumbsHandler){this.setBreadcrumbsHandler=setBreadcrumbsHandler,this.breadcrumbs.home=[{text:services_text.a.breadcrumbs.home,href:"/"}],this.breadcrumbs.snapshots=[...this.breadcrumbs.home,{text:services_text.a.breadcrumbs.snapshots,href:linkToSnapshots()}],this.breadcrumbs.repositories=[...this.breadcrumbs.home,{text:services_text.a.breadcrumbs.repositories,href:linkToRepositories()}],this.breadcrumbs.policies=[...this.breadcrumbs.home,{text:services_text.a.breadcrumbs.policies,href:linkToPolicies()}],this.breadcrumbs.restore_status=[...this.breadcrumbs.home,{text:services_text.a.breadcrumbs.restore_status,href:"/restore_status"}],this.breadcrumbs.repositoryAdd=[...this.breadcrumbs.repositories,{text:services_text.a.breadcrumbs.repositoryAdd}],this.breadcrumbs.repositoryEdit=[...this.breadcrumbs.repositories,{text:services_text.a.breadcrumbs.repositoryEdit}],this.breadcrumbs.restoreSnapshot=[...this.breadcrumbs.snapshots,{text:services_text.a.breadcrumbs.restoreSnapshot}],this.breadcrumbs.policyAdd=[...this.breadcrumbs.policies,{text:services_text.a.breadcrumbs.policyAdd}],this.breadcrumbs.policyEdit=[...this.breadcrumbs.policies,{text:services_text.a.breadcrumbs.policyEdit}]}setBreadcrumbs(type){if(!this.setBreadcrumbsHandler)throw new Error("BreadcrumbService#setup() must be called first!");const newBreadcrumbs=this.breadcrumbs[type]?[...this.breadcrumbs[type]]:[...this.breadcrumbs.home],lastBreadcrumb=newBreadcrumbs.pop();newBreadcrumbs.push({...lastBreadcrumb,href:void 0}),this.setBreadcrumbsHandler(newBreadcrumbs)}};const docTitleService=new class{constructor(){var obj,key,value;value=()=>{},(key="changeDocTitleHandler")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}setup(_changeDocTitleHandler){this.changeDocTitleHandler=_changeDocTitleHandler}setTitle(page){page&&"home"!==page?services_text.a.breadcrumbs[page]&&this.changeDocTitleHandler(`${services_text.a.breadcrumbs[page]} - ${services_text.a.breadcrumbs.home}`):this.changeDocTitleHandler(""+services_text.a.breadcrumbs.home)}};function linkToRepositories(){return"/repositories"}function linkToRepository(repositoryName){return encodeURI("/repositories/"+encodeURIComponent(repositoryName))}function linkToEditRepository(repositoryName){return encodeURI("/edit_repository/"+encodeURIComponent(repositoryName))}function linkToAddRepository(redirect){return encodeURI("/add_repository"+(redirect?"?redirect="+encodeURIComponent(redirect):""))}function linkToSnapshots(repositoryName,policyName){return repositoryName?encodeURI("/snapshots?repository="+encodeURIComponent(repositoryName)):policyName?encodeURI("/snapshots?policy="+encodeURIComponent(policyName)):"/snapshots"}function linkToSnapshot(repositoryName,snapshotName){return encodeURI(`/snapshots/${encodeURIComponent(repositoryName)}/${encodeURIComponent(snapshotName)}`)}function linkToRestoreSnapshot(repositoryName,snapshotName){return encodeURI(`/restore/${encodeURIComponent(repositoryName)}/${encodeURIComponent(snapshotName)}`)}function linkToPolicies(){return"/policies"}function linkToPolicy(policyName){return encodeURI("/policies/"+encodeURIComponent(policyName))}function linkToEditPolicy(policyName){return encodeURI("/edit_policy/"+encodeURIComponent(policyName))}var external_kbnSharedDeps_React_=__webpack_require__(23),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_ReactDom_=__webpack_require__(29),external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(27),external_kbnSharedDeps_ElasticEui_=__webpack_require__(24),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(25),constants=__webpack_require__(0),shared_imports=__webpack_require__(7);const AppContext=Object(external_kbnSharedDeps_React_.createContext)(void 0),AppContextProvider=({children:children,value:value})=>external_kbnSharedDeps_React_default.a.createElement(AppContext.Provider,{value:value},children),useAppContext=(AppContext.Consumer,()=>{const ctx=Object(external_kbnSharedDeps_React_.useContext)(AppContext);if(!ctx)throw new Error('"useAppContext" can only be called inside of AppContext.Provider!');return ctx}),useServices=()=>useAppContext().services,useCore=()=>useAppContext().core,useConfig=()=>useAppContext().config,useToastNotifications=()=>{const{notifications:{toasts:toastNotifications}}=useCore();return toastNotifications},DataPlaceholder=({data:data,children:children})=>{const{i18n:i18n}=useServices();return null!=data?children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,i18n.translate("xpack.snapshotRestore.dataPlaceholderLabel",{defaultMessage:"-"}))},FormattedDateTime=({epochMs:epochMs,type:type})=>{const date=new Date(epochMs),formattedDate=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedDate,{value:date,year:"numeric",month:"short",day:"2-digit"}),formattedTime=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedTime,{value:date,timeZoneName:"short"});return type?"date"===type?formattedDate:formattedTime:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,formattedDate," ",formattedTime)},RepositoryDeleteProvider=({children:children})=>{const{i18n:i18n}=useServices(),toastNotifications=useToastNotifications(),[repositoryNames,setRepositoryNames]=Object(external_kbnSharedDeps_React_.useState)([]),[isModalOpen,setIsModalOpen]=Object(external_kbnSharedDeps_React_.useState)(!1),onSuccessCallback=Object(external_kbnSharedDeps_React_.useRef)(null),closeModal=()=>{setIsModalOpen(!1),setRepositoryNames([])},deleteRepository=()=>{const repositoriesToDelete=[...repositoryNames];Object(services_http.e)(repositoriesToDelete).then(({data:data,error:error})=>{const{itemsDeleted:itemsDeleted,errors:errors}=data||{itemsDeleted:void 0,errors:void 0};if(itemsDeleted&&itemsDeleted.length){const successMessage=itemsDeleted.length>1?i18n.translate("xpack.snapshotRestore.deleteRepository.successMultipleNotificationTitle",{defaultMessage:"Removed {count} repositories",values:{count:itemsDeleted.length}}):i18n.translate("xpack.snapshotRestore.deleteRepository.successSingleNotificationTitle",{defaultMessage:"Removed repository '{name}'",values:{name:itemsDeleted[0]}});toastNotifications.addSuccess(successMessage),onSuccessCallback.current&&onSuccessCallback.current([...itemsDeleted])}if(error||errors&&errors.length){const errorMessage=errors&&errors.length>1||error&&repositoriesToDelete.length>1?i18n.translate("xpack.snapshotRestore.deleteRepository.errorMultipleNotificationTitle",{defaultMessage:"Error removing {count} repositories",values:{count:errors&&errors.length||repositoriesToDelete.length}}):i18n.translate("xpack.snapshotRestore.deleteRepository.errorSingleNotificationTitle",{defaultMessage:"Error removing repository '{name}'",values:{name:errors&&errors[0].name||repositoriesToDelete[0]}});toastNotifications.addDanger(errorMessage)}}),closeModal()};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,children((names,onSuccess=(()=>{}))=>{if(!names||!names.length)throw new Error("No repository names specified for deletion");setIsModalOpen(!0),setRepositoryNames(names),onSuccessCallback.current=onSuccess}),(()=>{if(!isModalOpen)return null;const isSingle=1===repositoryNames.length;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiConfirmModal,{title:isSingle?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.deleteRepository.confirmModal.deleteSingleTitle",defaultMessage:"Remove repository '{name}'?",values:{name:repositoryNames[0]}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.deleteRepository.confirmModal.deleteMultipleTitle",defaultMessage:"Remove {count} repositories?",values:{count:repositoryNames.length}}),onCancel:closeModal,onConfirm:deleteRepository,cancelButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.deleteRepository.confirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:isSingle?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.deleteRepository.confirmModal.confirmSingleButtonLabel",defaultMessage:"Remove repository"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.deleteRepository.confirmModal.confirmMultipleButtonLabel",defaultMessage:"Remove repositories"}),buttonColor:"danger","data-test-subj":"deleteRepositoryConfirmation"},isSingle?external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.deleteRepository.confirmModal.deleteSingleDescription",defaultMessage:"The snapshots in this repository will still exist, but Elasticsearch won’t have access to them. Adjust policies that use this repository to prevent scheduled snapshots from failing."})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.deleteRepository.confirmModal.deleteMultipleListDescription",defaultMessage:"You are about to remove these repositories:"})),external_kbnSharedDeps_React_default.a.createElement("ul",null,repositoryNames.map(name=>external_kbnSharedDeps_React_default.a.createElement("li",{key:name},name))),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.deleteRepository.confirmModal.deleteMultipleDescription",defaultMessage:"The snapshots in these repositories will still exist, but Elasticsearch won't have access to them. Adjust policies that use these repositories to prevent scheduled snapshots from failing."}))))})())},flatten=(source,path=[])=>source instanceof Object?Object.keys(source).reduce((result,key)=>({...result,...flatten(source[key],[...path,key])}),{}):{[path.join(".")]:source};function serializeRestoreSettings(restoreSettings){const{indices:indices,renamePattern:renamePattern,renameReplacement:renameReplacement,includeGlobalState:includeGlobalState,partial:partial,indexSettings:indexSettings,ignoreIndexSettings:ignoreIndexSettings,ignoreUnavailable:ignoreUnavailable,includeAliases:includeAliases}=restoreSettings;let parsedIndexSettings;if(indexSettings)try{parsedIndexSettings=JSON.parse(indexSettings)}catch(e){}return(settings=>Object.entries(settings).reduce((sts,[key,value])=>(void 0!==value&&(sts[key]=value),sts),{}))({indices:indices,rename_pattern:renamePattern,rename_replacement:renameReplacement,include_global_state:includeGlobalState,partial:partial,index_settings:parsedIndexSettings,ignore_index_settings:ignoreIndexSettings,ignore_unavailable:ignoreUnavailable,include_aliases:includeAliases})}var external_kbnSharedDeps_Lodash_=__webpack_require__(28);const csvToArray=indices=>indices&&Array.isArray(indices)?indices:"string"==typeof indices?indices.split(","):void 0;function serializeSnapshotRetention(snapshotRetention){const{expireAfterValue:expireAfterValue,expireAfterUnit:expireAfterUnit,minCount:minCount,maxCount:maxCount}=snapshotRetention,snapshotRetentionEs={expire_after:expireAfterValue&&expireAfterUnit?(timeValue=expireAfterValue,timeUnit=expireAfterUnit,`${timeValue}${timeUnit}`):void 0,min_count:minCount||void 0,max_count:maxCount||void 0};var timeValue,timeUnit;const flattenedSnapshotRetentionEs=Object.entries(snapshotRetentionEs).reduce((retention,[key,value])=>(void 0!==value&&(retention[key]=value),retention),{});return Object.entries(flattenedSnapshotRetentionEs).length?flattenedSnapshotRetentionEs:void 0}const serializePolicy=policy=>{const{snapshotName:name,schedule:schedule,repository:repository,config:config,retention:retention}=policy,policyEs={name:name,schedule:schedule,repository:repository};if(config&&(policyEs.config=function(snapshotConfig){const{indices:indices,ignoreUnavailable:ignoreUnavailable,includeGlobalState:includeGlobalState,partial:partial,metadata:metadata}=snapshotConfig,snapshotConfigEs={indices:csvToArray(indices),ignore_unavailable:ignoreUnavailable,include_global_state:includeGlobalState,partial:partial,metadata:metadata};return Object.entries(snapshotConfigEs).reduce((config,[key,value])=>(void 0!==value&&(config[key]=value),config),{})}(config)),retention){serializeSnapshotRetention(retention)&&(policyEs.retention=serializeSnapshotRetention(retention))}return policyEs},INVALID_NAME_CHARS=['"',"*","\\","<","|",",",">","/","?","#"],isStringEmpty=str=>!str||!Boolean(str.trim()),validateRepository=(repository,validateSettings=!0)=>{const{name:name,type:type,settings:settings}=repository,{i18n:i18n}=services_text.a,validation={isValid:!0,errors:{}};if(validateSettings){const settingsValidation=validateRepositorySettings(type,settings);Object.keys(settingsValidation).length&&(validation.errors.settings=settingsValidation)}isStringEmpty(name)&&(validation.errors.name=[i18n.translate("xpack.snapshotRestore.repositoryValidation.nameRequired",{defaultMessage:"Repository name is required."})]),name.includes(" ")&&(validation.errors.name=[i18n.translate("xpack.snapshotRestore.repositoryValidation.nameValidation.errorSpace",{defaultMessage:"Spaces are not allowed in the name."})]);const nameCharValidation=((string,char)=>{const chars=Array.isArray(char)?char:[char],total=chars.length;let containsChar=!1,charFound=null;for(let i=0;i<total;i++)if(string.includes(chars[i])){containsChar=!0,charFound=chars[i];break}return{containsChar:containsChar,charFound:charFound}})(name,INVALID_NAME_CHARS);return nameCharValidation.containsChar&&(validation.errors.name=[i18n.translate("xpack.snapshotRestore.repositoryValidation.nameValidation.invalidCharacter",{defaultMessage:'Character "{char}" is not allowed in the name.',values:{char:nameCharValidation.charFound}})]),(isStringEmpty(type)||type===constants.f.source&&isStringEmpty(settings.delegateType))&&(validation.errors.type=[i18n.translate("xpack.snapshotRestore.repositoryValidation.delegateTypeRequired",{defaultMessage:"Type is required."})]),Object.keys(validation.errors).length&&(validation.isValid=!1),validation},validateRepositorySettings=(type,settings)=>{switch(type){case constants.f.fs:return validateFSRepositorySettings(settings);case constants.f.url:return validateReadonlyRepositorySettings(settings);case constants.f.source:return validateRepositorySettings(settings.delegateType,settings);case constants.f.s3:return validateS3RepositorySettings(settings);case constants.f.gcs:return validateGCSRepositorySettings(settings);case constants.f.hdfs:return validateHDFSRepositorySettings(settings);default:return{}}},validateFSRepositorySettings=settings=>{const i18n=services_text.a.i18n,validation={},{location:location}=settings;return isStringEmpty(location)&&(validation.location=[i18n.translate("xpack.snapshotRestore.repositoryValidation.locationRequired",{defaultMessage:"Location is required."})]),validation},validateReadonlyRepositorySettings=settings=>{const i18n=services_text.a.i18n,validation={},{url:url}=settings;return isStringEmpty(url)&&(validation.url=[i18n.translate("xpack.snapshotRestore.repositoryValidation.urlRequired",{defaultMessage:"URL is required."})]),validation},validateS3RepositorySettings=settings=>{const i18n=services_text.a.i18n,validation={},{bucket:bucket}=settings;return isStringEmpty(bucket)&&(validation.bucket=[i18n.translate("xpack.snapshotRestore.repositoryValidation.bucketRequired",{defaultMessage:"Bucket is required."})]),validation},validateGCSRepositorySettings=settings=>{const i18n=services_text.a.i18n,validation={},{bucket:bucket}=settings;return isStringEmpty(bucket)&&(validation.bucket=[i18n.translate("xpack.snapshotRestore.repositoryValidation.bucketRequired",{defaultMessage:"Bucket is required."})]),validation},validateHDFSRepositorySettings=settings=>{const i18n=services_text.a.i18n,validation={},{uri:uri,path:path}=settings;return isStringEmpty(uri)&&(validation.uri=[i18n.translate("xpack.snapshotRestore.repositoryValidation.uriRequired",{defaultMessage:"URI is required."})]),isStringEmpty(path)&&(validation.path=[i18n.translate("xpack.snapshotRestore.repositoryValidation.pathRequired",{defaultMessage:"Path is required."})]),validation};var application_constants=__webpack_require__(1);const validate_restore_isStringEmpty=str=>!str||!Boolean(str.trim()),validate_policy_isStringEmpty=str=>!str||!Boolean(str.trim()),getRepositoryTypeDocUrl=(docLinks,type)=>{switch(type){case constants.f.fs:return docLinks.links.snapshotRestore.registerSharedFileSystem;case constants.f.url:return""+docLinks.links.snapshotRestore.registerUrl;case constants.f.source:return""+docLinks.links.snapshotRestore.registerSourceOnly;case constants.f.s3:return""+docLinks.links.plugins.s3Repo;case constants.f.hdfs:return""+docLinks.links.plugins.hdfsRepo;case constants.f.azure:return""+docLinks.links.plugins.azureRepo;case constants.f.gcs:return""+docLinks.links.plugins.gcsRepo;default:return""+docLinks.links.snapshotRestore.guide}},RepositoryFormStepOne=({repository:repository,onNext:onNext,updateRepository:updateRepository,validation:validation})=>{const{error:repositoryTypesError,isLoading:repositoryTypesLoading,data:repositoryTypes=[]}=Object(services_http.t)(),{docLinks:docLinks}=useCore(),hasValidationErrors=!validation.isValid,pluginDocLink=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:docLinks.links.plugins.snapshotRestoreRepos,target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.fields.typePluginsDocLinkText",defaultMessage:"Learn more about plugins."})),renderTypeCard=(type,index)=>{const isSelectedType=(repository.type===constants.f.source?repository.settings.delegateType:repository.type)===type,displayName=services_text.a.getRepositoryTypeName(type);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{key:index},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCard,{title:displayName,icon:external_kbnSharedDeps_React_default.a.createElement(RepositoryTypeLogo,{type:type,size:"l"}),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null),footer:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{href:getRepositoryTypeDocUrl(docLinks,type),target:"_blank",size:"xs",iconType:"iInCircle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.fields.typeDocsLinkText",defaultMessage:"Learn more"})),selectable:{onClick:()=>{return newType=type,void(repository.type===constants.f.source?updateRepository({settings:{delegateType:newType}}):updateRepository({type:newType,settings:{}}));var newType},isSelected:isSelectedType},"data-test-subj":type+"RepositoryType"}))};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.fields.nameDescriptionTitle",defaultMessage:"Repository name"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.fields.nameDescription",defaultMessage:"A unique name for the repository."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.fields.nameLabel",defaultMessage:"Name"}),isInvalid:Boolean(hasValidationErrors&&validation.errors.name),error:validation.errors.name,fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:repository.name,fullWidth:!0,onChange:e=>{updateRepository({name:e.target.value})},"data-test-subj":"nameInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.fields.typeDescriptionTitle",defaultMessage:"Repository type"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{id:"repositoryTypeDescription",size:"s",color:"subdued"},repositoryTypes.includes(constants.f.fs)&&repositoryTypes.includes(constants.f.url)?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.fields.defaultTypeDescription",defaultMessage:"Elasticsearch supports file system and read-only URL repositories. Additional types require plugins. {docLink}",values:{docLink:pluginDocLink}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.fields.cloudTypeDescription",defaultMessage:"Elasticsearch provides core plugins for custom repositories. {docLink}",values:{docLink:pluginDocLink}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,describedByIds:["repositoryTypeDescription"],fullWidth:!0,isInvalid:Boolean(hasValidationErrors&&validation.errors.type),error:validation.errors.type},repositoryTypesError?external_kbnSharedDeps_React_default.a.createElement(shared_imports.d,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.loadingRepositoryTypesErrorMessage",defaultMessage:"Error loading repository types"}),error:repositoryTypesError}):repositoryTypesLoading?external_kbnSharedDeps_React_default.a.createElement(SectionLoading,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.loadingRepositoryTypesDescription",defaultMessage:"Loading repository types…"})):repositoryTypes.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGrid,{columns:4},repositoryTypes.map((type,index)=>renderTypeCard(type,index))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.noRepositoryTypesErrorTitle",defaultMessage:"No repository types available"}),color:"warning","data-test-subj":"noRepositoryTypesError"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.noRepositoryTypesErrorMessage",defaultMessage:"You can install plugins to enable different repository types. {docLink}",values:{docLink:pluginDocLink}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.fields.sourceOnlyDescriptionTitle",defaultMessage:"Source-only snapshots"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.fields.sourceOnlyDescription",defaultMessage:"Creates source-only snapshots that take up to 50% less space. {docLink}",values:{docLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:getRepositoryTypeDocUrl(docLinks,constants.f.source),target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.fields.sourceOnlyDocLinkText",defaultMessage:"Learn more about source-only repositories."}))}})),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.fields.sourceOnlyLabel",defaultMessage:"Source-only snapshots"}),checked:repository.type===constants.f.source,onChange:e=>{if(e.target.checked)updateRepository({type:constants.f.source,settings:{...repository.settings,delegateType:repository.type}});else{const{settings:{delegateType:delegateType,...rest}}=repository;updateRepository({type:delegateType||null,settings:rest})}},"data-test-subj":"sourceOnlyToggle"}))),hasValidationErrors?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.validationErrorTitle",defaultMessage:"Fix errors before continuing."}),color:"danger","data-test-subj":"repositoryFormError"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"})):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{color:"primary",onClick:onNext,fill:!0,iconType:"arrowRight",iconSide:"right","data-test-subj":"nextButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.nextButtonLabel",defaultMessage:"Next"})))},AzureSettings=({repository:repository,updateRepositorySettings:updateRepositorySettings,settingErrors:settingErrors})=>{const{settings:{client:client,container:container,basePath:basePath,compress:compress,chunkSize:chunkSize,readonly:readonly,locationMode:locationMode,maxRestoreBytesPerSec:maxRestoreBytesPerSec,maxSnapshotBytesPerSec:maxSnapshotBytesPerSec}}=repository,hasErrors=Boolean(Object.keys(settingErrors).length),locationModeOptions=["primary_only","secondary_only"].map(option=>({value:option,text:option}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.clientTitle",defaultMessage:"Client"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.clientDescription",defaultMessage:"The name of the Azure client."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.clientLabel",defaultMessage:"Client"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.client),error:settingErrors.client},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:client||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({client:e.target.value})},"data-test-subj":"clientInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.containerTitle",defaultMessage:"Container"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.containerDescription",defaultMessage:"The name of the Azure container to use for snapshots."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.containerLabel",defaultMessage:"Container"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.container),error:settingErrors.container},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:container||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({container:e.target.value})},"data-test-subj":"containerInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.basePathTitle",defaultMessage:"Base path"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.basePathDescription",defaultMessage:"The container path to the repository data."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.basePathLabel",defaultMessage:"Base path"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.basePath),error:settingErrors.basePath},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:basePath||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({basePath:e.target.value})},"data-test-subj":"basePathInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.compressTitle",defaultMessage:"Snapshot compression"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.compressDescription",defaultMessage:"Compresses the index mapping and setting files for snapshots. Data files are not compressed."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.compress),error:settingErrors.compress},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.compressLabel",defaultMessage:"Compress snapshots"}),checked:!(!1===compress),onChange:e=>{updateRepositorySettings({compress:e.target.checked})},"data-test-subj":"compressToggle"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.chunkSizeTitle",defaultMessage:"Chunk size"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.chunkSizeDescription",defaultMessage:"Breaks files into smaller units when taking snapshots."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.chunkSizeLabel",defaultMessage:"Chunk size"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.chunkSize),error:settingErrors.chunkSize,helpText:services_text.a.getSizeNotationHelpText()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:chunkSize||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({chunkSize:e.target.value})},"data-test-subj":"chunkSizeInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.maxSnapshotBytesTitle",defaultMessage:"Max snapshot bytes per second"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.maxSnapshotBytesDescription",defaultMessage:"The rate for creating snapshots for each node."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.maxSnapshotBytesLabel",defaultMessage:"Max snapshot bytes per second"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.maxSnapshotBytesPerSec),error:settingErrors.maxSnapshotBytesPerSec,helpText:services_text.a.getSizeNotationHelpText()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:maxSnapshotBytesPerSec||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({maxSnapshotBytesPerSec:e.target.value})},"data-test-subj":"maxSnapshotBytesInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.maxRestoreBytesTitle",defaultMessage:"Max restore bytes per second"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.maxRestoreBytesDescription",defaultMessage:"The snapshot restore rate for each node."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.maxRestoreBytesLabel",defaultMessage:"Max restore bytes per second"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.maxRestoreBytesPerSec),error:settingErrors.maxRestoreBytesPerSec,helpText:services_text.a.getSizeNotationHelpText()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:maxRestoreBytesPerSec||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({maxRestoreBytesPerSec:e.target.value})},"data-test-subj":"maxRestoreBytesInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.locationModeTitle",defaultMessage:"Location mode"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.locationModeDescription",defaultMessage:"The primary or secondary location. If secondary, read-only is true."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.locationModeLabel",defaultMessage:"Location mode"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.locationMode),error:settingErrors.locationMode},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{options:locationModeOptions,value:locationMode||locationModeOptions[0].value,onChange:e=>{updateRepositorySettings({locationMode:e.target.value,readonly:e.target.value===locationModeOptions[1].value||readonly})},fullWidth:!0,"data-test-subj":"locationModeSelect"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.readonlyTitle",defaultMessage:"Read-only"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.readonlyDescription",defaultMessage:"Only one cluster should have write access to this repository. All other clusters should be read-only."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.readonly),error:settingErrors.readonly},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{disabled:locationMode===locationModeOptions[1].value,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeAzure.readonlyLabel",defaultMessage:"Read-only repository"}),checked:!!readonly,onChange:e=>{updateRepositorySettings({readonly:locationMode===locationModeOptions[1].value||e.target.checked})},"data-test-subj":"readOnlyToggle"}))))},FSSettings=({repository:repository,updateRepositorySettings:updateRepositorySettings,settingErrors:settingErrors})=>{const{settings:{location:location,compress:compress,chunkSize:chunkSize,maxRestoreBytesPerSec:maxRestoreBytesPerSec,maxSnapshotBytesPerSec:maxSnapshotBytesPerSec,readonly:readonly}}=repository,hasErrors=Boolean(Object.keys(settingErrors).length);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeFS.locationTitle",defaultMessage:"File system location"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryFor.typeFS.locationDescription",defaultMessage:"The location must be registered in the {settingKey} setting on all master and data nodes.",values:{settingKey:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,"path.repo")}})),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeFS.locationLabel",defaultMessage:"Location (required)"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.location),error:settingErrors.location},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:location||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({location:e.target.value})},"data-test-subj":"locationInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeFS.compressTitle",defaultMessage:"Snapshot compression"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeFS.compressDescription",defaultMessage:"Compresses the index mapping and setting files for snapshots. Data files are not compressed."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.compress),error:settingErrors.compress},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeFS.compressLabel",defaultMessage:"Compress snapshots"}),checked:!!compress,onChange:e=>{updateRepositorySettings({compress:e.target.checked})},"data-test-subj":"compressToggle"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeFS.chunkSizeTitle",defaultMessage:"Chunk size"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeFS.chunkSizeDescription",defaultMessage:"Breaks files into smaller units when taking snapshots."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeFS.chunkSizeLabel",defaultMessage:"Chunk size"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.chunkSize),error:settingErrors.chunkSize,helpText:services_text.a.getSizeNotationHelpText()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:chunkSize||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({chunkSize:e.target.value})},"data-test-subj":"chunkSizeInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeFS.maxSnapshotBytesTitle",defaultMessage:"Max snapshot bytes per second"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeFS.maxSnapshotBytesDescription",defaultMessage:"The rate for creating snapshots for each node."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeFS.maxSnapshotBytesLabel",defaultMessage:"Max snapshot bytes per second"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.maxSnapshotBytesPerSec),error:settingErrors.maxSnapshotBytesPerSec,helpText:services_text.a.getSizeNotationHelpText()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:maxSnapshotBytesPerSec||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({maxSnapshotBytesPerSec:e.target.value})},"data-test-subj":"maxSnapshotBytesInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeFS.maxRestoreBytesTitle",defaultMessage:"Max restore bytes per second"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeFS.maxRestoreBytesDescription",defaultMessage:"The snapshot restore rate for each node."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeFS.maxRestoreBytesLabel",defaultMessage:"Max restore bytes per second"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.maxRestoreBytesPerSec),error:settingErrors.maxRestoreBytesPerSec,helpText:services_text.a.getSizeNotationHelpText()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:maxRestoreBytesPerSec||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({maxRestoreBytesPerSec:e.target.value})},"data-test-subj":"maxRestoreBytesInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeFS.readonlyTitle",defaultMessage:"Read-only"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeFS.readonlyDescription",defaultMessage:"Only one cluster should have write access to this repository. All other clusters should be read-only."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.readonly),error:settingErrors.readonly},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeFS.readonlyLabel",defaultMessage:"Read-only repository"}),checked:!!readonly,onChange:e=>{updateRepositorySettings({readonly:e.target.checked})},"data-test-subj":"readOnlyToggle"}))))},GCSSettings=({repository:repository,updateRepositorySettings:updateRepositorySettings,settingErrors:settingErrors})=>{const{settings:{bucket:bucket,client:client,basePath:basePath,compress:compress,chunkSize:chunkSize,maxRestoreBytesPerSec:maxRestoreBytesPerSec,maxSnapshotBytesPerSec:maxSnapshotBytesPerSec,readonly:readonly}}=repository,hasErrors=Boolean(Object.keys(settingErrors).length);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.clientTitle",defaultMessage:"Client"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.clientDescription",defaultMessage:"The name of the Google Cloud Storage client."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.clientLabel",defaultMessage:"Client"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.client),error:settingErrors.client},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:client||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({client:e.target.value})},"data-test-subj":"clientInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.bucketTitle",defaultMessage:"Bucket"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.bucketDescription",defaultMessage:"The name of the Google Cloud Storage bucket to use for snapshots."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.bucketLabel",defaultMessage:"Bucket (required)"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.bucket),error:settingErrors.bucket},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:bucket||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({bucket:e.target.value})},"data-test-subj":"bucketInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.basePathTitle",defaultMessage:"Base path"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.basePathDescription",defaultMessage:"The bucket path to the repository data."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.basePathLabel",defaultMessage:"Base path"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.basePath),error:settingErrors.basePath},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:basePath||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({basePath:e.target.value})},"data-test-subj":"basePathInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.compressTitle",defaultMessage:"Compress snapshots"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.compressDescription",defaultMessage:"Compresses the index mapping and setting files for snapshots. Data files are not compressed."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.compress),error:settingErrors.compress},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.compressLabel",defaultMessage:"Compress snapshots"}),checked:!(!1===compress),onChange:e=>{updateRepositorySettings({compress:e.target.checked})},"data-test-subj":"compressToggle"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.chunkSizeTitle",defaultMessage:"Chunk size"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.chunkSizeDescription",defaultMessage:"Breaks files into smaller units when taking snapshots."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.chunkSizeLabel",defaultMessage:"Chunk size"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.chunkSize),error:settingErrors.chunkSize,helpText:services_text.a.getSizeNotationHelpText()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:chunkSize||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({chunkSize:e.target.value})},"data-test-subj":"chunkSizeInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.maxSnapshotBytesTitle",defaultMessage:"Max snapshot bytes per second"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.maxSnapshotBytesDescription",defaultMessage:"The rate for creating snapshots for each node."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.maxSnapshotBytesLabel",defaultMessage:"Max snapshot bytes per second"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.maxSnapshotBytesPerSec),error:settingErrors.maxSnapshotBytesPerSec,helpText:services_text.a.getSizeNotationHelpText()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:maxSnapshotBytesPerSec||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({maxSnapshotBytesPerSec:e.target.value})},"data-test-subj":"maxSnapshotBytesInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.maxRestoreBytesTitle",defaultMessage:"Max restore bytes per second"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.maxRestoreBytesDescription",defaultMessage:"The snapshot restore rate for each node."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.maxRestoreBytesLabel",defaultMessage:"Max restore bytes per second"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.maxRestoreBytesPerSec),error:settingErrors.maxRestoreBytesPerSec,helpText:services_text.a.getSizeNotationHelpText()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:maxRestoreBytesPerSec||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({maxRestoreBytesPerSec:e.target.value})},"data-test-subj":"maxRestoreBytesInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.readonlyTitle",defaultMessage:"Read-only"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.readonlyDescription",defaultMessage:"Only one cluster should have write access to this repository. All other clusters should be read-only."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.readonly),error:settingErrors.readonly},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeGCS.readonlyLabel",defaultMessage:"Read-only repository"}),checked:!!readonly,onChange:e=>{updateRepositorySettings({readonly:e.target.checked})},"data-test-subj":"readOnlyToggle"}))))},HDFSSettings=({repository:repository,updateRepositorySettings:updateRepositorySettings,settingErrors:settingErrors})=>{const{name:name,settings:{delegateType:delegateType,uri:uri,path:path,loadDefaults:loadDefaults,compress:compress,chunkSize:chunkSize,maxRestoreBytesPerSec:maxRestoreBytesPerSec,maxSnapshotBytesPerSec:maxSnapshotBytesPerSec,readonly:readonly,"security.principal":securityPrincipal,...rest}}=repository,hasErrors=Boolean(Object.keys(settingErrors).length),[additionalConf,setAdditionalConf]=Object(external_kbnSharedDeps_React_.useState)(JSON.stringify(rest,null,2)),[isConfInvalid,setIsConfInvalid]=Object(external_kbnSharedDeps_React_.useState)(!1);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.uriTitle",defaultMessage:"URI"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.uriDescription",defaultMessage:"The URI address for HDFS."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.uriLabel",defaultMessage:"URI (required)"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.uri),error:settingErrors.uri},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{prepend:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s",id:"hdfsRepositoryUriProtocolDescription"},"hdfs://"),defaultValue:uri?uri.split("hdfs://")[1]:"",fullWidth:!0,onChange:e=>{updateRepositorySettings({uri:e.target.value?"hdfs://"+e.target.value:""})},"aria-describedby":"hdfsRepositoryUriProtocolDescription","data-test-subj":"uriInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.pathTitle",defaultMessage:"Path"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.pathDescription",defaultMessage:"The file path where data is stored."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.pathLabel",defaultMessage:"Path (required)"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.path),error:settingErrors.path},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:path||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({path:e.target.value})},"data-test-subj":"pathInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.loadDefaultsTitle",defaultMessage:"Load defaults"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.loadDefaultsDescription",defaultMessage:"Loads the default Hadoop configuration."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.loadDefaults),error:settingErrors.loadDefaults},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.loadDefaultsLabel",defaultMessage:"Load defaults"}),checked:!(!1===loadDefaults),onChange:e=>{updateRepositorySettings({loadDefaults:e.target.checked})},"data-test-subj":"loadDefaultsToggle"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.compressTitle",defaultMessage:"Snapshot compression"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.compressDescription",defaultMessage:"Compresses the index mapping and setting files for snapshots. Data files are not compressed."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.compress),error:settingErrors.compress},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.compressLabel",defaultMessage:"Compress snapshots"}),checked:!(!1===compress),onChange:e=>{updateRepositorySettings({compress:e.target.checked})},"data-test-subj":"compressToggle"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.chunkSizeTitle",defaultMessage:"Chunk size"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.chunkSizeDescription",defaultMessage:"Breaks files into smaller units when taking snapshots."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.chunkSizeLabel",defaultMessage:"Chunk size"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.chunkSize),error:settingErrors.chunkSize,helpText:services_text.a.getSizeNotationHelpText()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:chunkSize||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({chunkSize:e.target.value})},"data-test-subj":"chunkSizeInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.securityPrincipalTitle",defaultMessage:"Security principal"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.securityPrincipalDescription",defaultMessage:"The Kerberos principal to use when connecting to a secured HDFS cluster."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.securityPrincipalLabel",defaultMessage:"Security principal"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.securityPrincipal),error:settingErrors.securityPrincipal},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:securityPrincipal||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({"security.principal":e.target.value})},"data-test-subj":"securityPrincipalInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.configurationTitle",defaultMessage:"Configuration"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.configurationDescription",defaultMessage:"Additional JSON format configuration parameters to add to the Hadoop configuration. Only client-oriented properties from the Hadoop core and HDFS files are recognized."})),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.configurationLabel",defaultMessage:"Configuration"}),fullWidth:!0,isInvalid:isConfInvalid,error:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.configurationFormatError",defaultMessage:"Invalid JSON format"}),helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.configurationKeyDescription",defaultMessage:"Keys should be in the format {confKeyFormat}.",values:{confKeyFormat:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,"conf.<key>")}})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCodeEditor,{mode:"json",theme:"textmate",width:"100%",value:additionalConf,setOptions:{showLineNumbers:!1,tabSize:2,maxLines:1/0},editorProps:{$blockScrolling:1/0},showGutter:!1,minLines:6,"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.snapshotRestore.repositoryForm.typeHDFS.configurationAriaLabel",{defaultMessage:"Additional configuration for HDFS repository '{name}'",values:{name:name}}),onChange:value=>{setAdditionalConf(value);try{const parsedConf=JSON.parse(value);setIsConfInvalid(!1),updateRepositorySettings({delegateType:delegateType,uri:uri,path:path,loadDefaults:loadDefaults,compress:compress,chunkSize:chunkSize,"security.principal":securityPrincipal,...parsedConf},!0)}catch(e){setIsConfInvalid(!0)}},"data-test-subj":"codeEditor"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.maxSnapshotBytesTitle",defaultMessage:"Max snapshot bytes per second"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.maxSnapshotBytesDescription",defaultMessage:"The rate for creating snapshots for each node."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.maxSnapshotBytesLabel",defaultMessage:"Max snapshot bytes per second"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.maxSnapshotBytesPerSec),error:settingErrors.maxSnapshotBytesPerSec,helpText:services_text.a.getSizeNotationHelpText()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:maxSnapshotBytesPerSec||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({maxSnapshotBytesPerSec:e.target.value})},"data-test-subj":"maxSnapshotBytesInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.maxRestoreBytesTitle",defaultMessage:"Max restore bytes per second"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.maxRestoreBytesDescription",defaultMessage:"The snapshot restore rate for each node."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.maxRestoreBytesLabel",defaultMessage:"Max restore bytes per second"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.maxRestoreBytesPerSec),error:settingErrors.maxRestoreBytesPerSec,helpText:services_text.a.getSizeNotationHelpText()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:maxRestoreBytesPerSec||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({maxRestoreBytesPerSec:e.target.value})},"data-test-subj":"maxRestoreBytesInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.readonlyTitle",defaultMessage:"Read-only"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.readonlyDescription",defaultMessage:"Only one cluster should have write access to this repository. All other clusters should be read-only."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.readonly),error:settingErrors.readonly},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeHDFS.readonlyLabel",defaultMessage:"Read-only repository"}),checked:!!readonly,onChange:e=>{updateRepositorySettings({readonly:e.target.checked})},"data-test-subj":"readOnlyToggle"}))))},ReadonlySettings=({repository:repository,updateRepositorySettings:updateRepositorySettings,settingErrors:settingErrors})=>{const{settings:{url:url}}=repository,hasErrors=Boolean(Object.keys(settingErrors).length);const[selectedScheme,selectScheme]=Object(external_kbnSharedDeps_React_.useState)(url?url.split("://")[0]:"http");return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeReadonly.urlTitle",defaultMessage:"URL"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeReadonly.urlDescription",defaultMessage:"The location of the snapshots."})),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeReadonly.urlSchemeLabel",defaultMessage:"Scheme"}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{options:[{value:"http",text:"http://"},{value:"https",text:"https://"},{value:"ftp",text:"ftp://"},{value:"file",text:"file://"}],value:selectedScheme,onChange:e=>selectScheme(e.target.value),"aria-controls":"readonlyRepositoryUrlHelp","data-test-subj":"schemeSelect"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeReadonly.urlLabel",defaultMessage:"Path (required)"}),fullWidth:!0,describedByIds:["readonlyRepositoryUrlHelp"],isInvalid:Boolean(hasErrors&&settingErrors.url),error:settingErrors.url},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:url?url.split("://")[1]:"",fullWidth:!0,onChange:e=>{updateRepositorySettings({url:`${selectedScheme}://${e.target.value}`})},"data-test-subj":"urlInput"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormHelpText,{id:"readonlyRepositoryUrlHelp","aria-live":"polite"},function(scheme){switch(scheme){case"http":case"https":case"ftp":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeReadonly.urlAllowedDescription",defaultMessage:"This URL must be registered in the {settingKey} setting.",values:{settingKey:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,"repositories.url.allowed_urls")}});case"file":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeReadonly.urlFilePathDescription",defaultMessage:"This file location must be registered in the {settingKey} setting.",values:{settingKey:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,"path.repo")}});default:return null}}(selectedScheme)))))},S3Settings=({repository:repository,updateRepositorySettings:updateRepositorySettings,settingErrors:settingErrors})=>{const{settings:{bucket:bucket,client:client,basePath:basePath,compress:compress,chunkSize:chunkSize,serverSideEncryption:serverSideEncryption,bufferSize:bufferSize,cannedAcl:cannedAcl,storageClass:storageClass,maxRestoreBytesPerSec:maxRestoreBytesPerSec,maxSnapshotBytesPerSec:maxSnapshotBytesPerSec,readonly:readonly}}=repository,cannedAclOptions=["private","public-read","public-read-write","authenticated-read","log-delivery-write","bucket-owner-read","bucket-owner-full-control"].map(option=>({value:option,text:option})),hasErrors=Boolean(Object.keys(settingErrors).length),storageClassOptions=["standard","reduced_redundancy","standard_ia"].map(option=>({value:option,text:option}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.clientTitle",defaultMessage:"Client"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.clientDescription",defaultMessage:"The name of the AWS S3 client."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.clientLabel",defaultMessage:"Client"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.client),error:settingErrors.client},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:client||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({client:e.target.value})},"data-test-subj":"clientInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.bucketTitle",defaultMessage:"Bucket"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.bucketDescription",defaultMessage:"The name of the AWS S3 bucket to use for snapshots."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.bucketLabel",defaultMessage:"Bucket (required)"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.bucket),error:settingErrors.bucket},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:bucket||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({bucket:e.target.value})},"data-test-subj":"bucketInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.basePathTitle",defaultMessage:"Base path"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.basePathDescription",defaultMessage:"The bucket path to the repository data."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.basePathLabel",defaultMessage:"Base path"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.basePath),error:settingErrors.basePath},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:basePath||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({basePath:e.target.value})},"data-test-subj":"basePathInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.compressTitle",defaultMessage:"Snapshot compression"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.compressDescription",defaultMessage:"Compresses the index mapping and setting files for snapshots. Data files are not compressed."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.compress),error:settingErrors.compress},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.compressLabel",defaultMessage:"Compress snapshots"}),checked:!(!1===compress),onChange:e=>{updateRepositorySettings({compress:e.target.checked})},"data-test-subj":"compressToggle"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.chunkSizeTitle",defaultMessage:"Chunk size"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.chunkSizeDescription",defaultMessage:"Breaks files into smaller units when taking snapshots."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.chunkSizeLabel",defaultMessage:"Chunk size"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.chunkSize),error:settingErrors.chunkSize,helpText:services_text.a.getSizeNotationHelpText()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:chunkSize||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({chunkSize:e.target.value})},"data-test-subj":"chunkSizeInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.serverSideEncryptionTitle",defaultMessage:"Server-side encryption"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.serverSideEncryptionDescription",defaultMessage:"Encrypts files on the server using AES256 algorithm."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.serverSideEncryption),error:settingErrors.serverSideEncryption},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.serverSideEncryptionLabel",defaultMessage:"Server-side encryption"}),checked:!!serverSideEncryption,onChange:e=>{updateRepositorySettings({serverSideEncryption:e.target.checked})},"data-test-subj":"serverSideEncryptionToggle"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.bufferSizeTitle",defaultMessage:"Buffer size"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.bufferSizeDescription",defaultMessage:"Beyond this minimum threshold, the S3 repository will use the AWS Multipart Upload API to split the chunk into several parts and upload each in its own request."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.bufferSizeLabel",defaultMessage:"Buffer size"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.bufferSize),error:settingErrors.bufferSize,helpText:services_text.a.getSizeNotationHelpText()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:bufferSize||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({bufferSize:e.target.value})},"data-test-subj":"bufferSizeInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.cannedAclTitle",defaultMessage:"Canned ACL"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.cannedAclDescription",defaultMessage:"The canned ACL to add to new S3 buckets and objects."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.cannedAclLabel",defaultMessage:"Canned ACL"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.cannedAcl),error:settingErrors.cannedAcl},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{options:cannedAclOptions,value:cannedAcl||cannedAclOptions[0].value,onChange:e=>{updateRepositorySettings({cannedAcl:e.target.value})},fullWidth:!0,"data-test-subj":"cannedAclSelect"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.storageClassTitle",defaultMessage:"Storage class"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.storageClassDescription",defaultMessage:"The storage class for new objects in the S3 repository."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.storageClassLabel",defaultMessage:"Storage class"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.storageClass),error:settingErrors.storageClass},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{options:storageClassOptions,value:storageClass||storageClassOptions[0].value,onChange:e=>{updateRepositorySettings({storageClass:e.target.value})},fullWidth:!0,"data-test-subj":"storageClassSelect"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.maxSnapshotBytesTitle",defaultMessage:"Max snapshot bytes per second"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.maxSnapshotBytesDescription",defaultMessage:"The rate for creating snapshots for each node."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.maxSnapshotBytesLabel",defaultMessage:"Max snapshot bytes per second"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.maxSnapshotBytesPerSec),error:settingErrors.maxSnapshotBytesPerSec,helpText:services_text.a.getSizeNotationHelpText()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:maxSnapshotBytesPerSec||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({maxSnapshotBytesPerSec:e.target.value})},"data-test-subj":"maxSnapshotBytesInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.maxRestoreBytesTitle",defaultMessage:"Max restore bytes per second"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.maxRestoreBytesDescription",defaultMessage:"The snapshot restore rate for each node."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.maxRestoreBytesLabel",defaultMessage:"Max restore bytes per second"}),fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.maxRestoreBytesPerSec),error:settingErrors.maxRestoreBytesPerSec,helpText:services_text.a.getSizeNotationHelpText()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:maxRestoreBytesPerSec||"",fullWidth:!0,onChange:e=>{updateRepositorySettings({maxRestoreBytesPerSec:e.target.value})},"data-test-subj":"maxRestoreBytesInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.readonlyTitle",defaultMessage:"Read-only"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.readonlyDescription",defaultMessage:"Only one cluster should have write access to this repository. All other clusters should be read-only."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0,isInvalid:Boolean(hasErrors&&settingErrors.readonly),error:settingErrors.readonly},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.typeS3.readonlyLabel",defaultMessage:"Read-only repository"}),checked:!!readonly,onChange:e=>{updateRepositorySettings({readonly:e.target.checked})},"data-test-subj":"readOnlyToggle"}))))},TypeSettings=({repository:repository,updateRepository:updateRepository,settingErrors:settingErrors})=>{const{i18n:i18n}=useServices(),{type:type,settings:settings}=repository,updateRepositorySettings=(updatedSettings,replaceSettings)=>{updateRepository(replaceSettings?{settings:updatedSettings}:{settings:{...settings,...updatedSettings}})},typeSettingsMap={[constants.f.fs]:FSSettings,[constants.f.url]:ReadonlySettings,[constants.f.azure]:AzureSettings,[constants.f.gcs]:GCSSettings,[constants.f.hdfs]:HDFSSettings,[constants.f.s3]:S3Settings},renderTypeSettings=repositoryType=>{if(!repositoryType)return null;const RepositorySettings=typeSettingsMap[repositoryType];return RepositorySettings?external_kbnSharedDeps_React_default.a.createElement(RepositorySettings,{repository:repository,updateRepositorySettings:updateRepositorySettings,settingErrors:settingErrors}):external_kbnSharedDeps_React_default.a.createElement(shared_imports.d,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.errorUnknownRepositoryTypesTitle",defaultMessage:"Unknown repository type"}),error:{error:i18n.translate("xpack.snapshotRestore.repositoryForm.errorUnknownRepositoryTypesMessage",{defaultMessage:"The repository type '{type}' is not supported.",values:{type:repositoryType}})}})};return type===constants.f.source?renderTypeSettings(settings.delegateType):renderTypeSettings(type)},RepositoryFormStepTwo=({repository:repository,isManagedRepository:isManagedRepository,isEditing:isEditing,isSaving:isSaving,onSave:onSave,updateRepository:updateRepository,validation:validation,saveError:saveError,onBack:onBack})=>{const{docLinks:docLinks}=useCore(),hasValidationErrors=!validation.isValid,{name:name,type:type,settings:{delegateType:delegateType}}=repository,typeForDocs=type===constants.f.source?delegateType:type;return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"stepTwo"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.fields.settingsTitle",defaultMessage:"{repositoryName} settings",values:{repositoryName:`'${name}'`}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"s",flush:"right",href:getRepositoryTypeDocUrl(docLinks,typeForDocs),target:"_blank",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.repositoryTypeDocLink",defaultMessage:"{repositoryType} repository docs",values:{repositoryType:services_text.a.getRepositoryTypeName(typeForDocs)}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(TypeSettings,{repository:repository,updateRepository:updateRepository,settingErrors:hasValidationErrors&&validation.errors.settings?validation.errors.settings:{}})),hasValidationErrors?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.validationErrorTitle",defaultMessage:"Fix errors before continuing."}),color:"danger",iconType:"cross","data-test-subj":"repositoryFormError"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"})):null,saveError?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,saveError,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"})):null,(()=>{const saveLabel=isEditing?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.saveButtonLabel",defaultMessage:"Save"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.registerButtonLabel",defaultMessage:"Register"}),savingLabel=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.savingButtonLabel",defaultMessage:"Saving…"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},isEditing?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{color:"primary",iconType:"arrowLeft",onClick:onBack,"data-test-subj":"backButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryForm.backButtonLabel",defaultMessage:"Back"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{color:isManagedRepository?"warning":"secondary",iconType:"check",onClick:onSave,fill:!isManagedRepository,"data-test-subj":"submitButton",isLoading:isSaving},isSaving?savingLabel:saveLabel)))})())},RepositoryForm=({repository:originalRepository,isManagedRepository:isManagedRepository,isEditing:isEditing,isSaving:isSaving,saveError:saveError,clearSaveError:clearSaveError,onSave:onSave})=>{const[currentStep,setCurrentStep]=Object(external_kbnSharedDeps_React_.useState)(isEditing?2:1),[repository,setRepository]=Object(external_kbnSharedDeps_React_.useState)({...originalRepository,settings:{...originalRepository.settings}}),[validation,setValidation]=Object(external_kbnSharedDeps_React_.useState)({isValid:!0,errors:{}}),updateRepository=updatedFields=>{const newRepository={...repository,...updatedFields};setRepository(newRepository)},saveRepository=()=>{const newValidation=validateRepository(repository,!0),{isValid:isValid}=newValidation;setValidation(newValidation),isValid&&onSave(repository)},hasValidationErrors=!validation.isValid,validationErrors=Object.entries(flatten(validation.errors)).reduce((acc,[key,value])=>[...acc,value],[]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiForm,{isInvalid:hasValidationErrors,error:validationErrors,"data-test-subj":"repositoryForm"},1!==currentStep||isEditing?external_kbnSharedDeps_React_default.a.createElement(RepositoryFormStepTwo,{repository:repository,isManagedRepository:isManagedRepository,isEditing:isEditing,isSaving:isSaving,onSave:saveRepository,updateRepository:updateRepository,validation:validation,saveError:saveError,onBack:()=>{isEditing||(setValidation({isValid:!0,errors:{}}),setCurrentStep(1),clearSaveError())}}):external_kbnSharedDeps_React_default.a.createElement(RepositoryFormStepOne,{repository:repository,onNext:()=>(()=>{const newValidation=validateRepository(repository,!1),{isValid:isValid}=newValidation;setValidation(newValidation),isValid&&setCurrentStep(2)})(),updateRepository:updateRepository,validation:validation}))};RepositoryForm.defaultProps={isEditing:!1,isSaving:!1};const RepositoryVerificationBadge=({verificationResults:verificationResults})=>verificationResults?verificationResults.valid?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHealth,{color:"success"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryVerification.verificationSuccessfulValue",defaultMessage:"Connected"})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHealth,{color:"warning"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryVerification.verificationErrorValue",defaultMessage:"Not connected"})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHealth,{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryVerification.verificationUnknownValue",defaultMessage:"Unknown"}));function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const RepositoryTypeLogo=({type:type,...rest})=>{const typeLogoMap={[constants.f.fs]:"storage",[constants.f.url]:"eye",[constants.f.azure]:"logoAzure",[constants.f.gcs]:"logoGCP",[constants.f.hdfs]:"logoApache",[constants.f.s3]:"logoAWS"};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,_extends({type:typeLogoMap[type]||"folderOpen"},rest))},SectionLoading=({inline:inline,children:children,...rest})=>inline?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"flexStart",alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"m"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,rest,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextColor,{color:"subdued"},children)))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"xl"}),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{color:"subdued"},children),"data-test-subj":"sectionLoading"}),SnapshotDeleteProvider=({children:children})=>{const{i18n:i18n}=useServices(),toastNotifications=useToastNotifications(),[snapshotIds,setSnapshotIds]=Object(external_kbnSharedDeps_React_.useState)([]),[isModalOpen,setIsModalOpen]=Object(external_kbnSharedDeps_React_.useState)(!1),[isDeleting,setIsDeleting]=Object(external_kbnSharedDeps_React_.useState)(!1),onSuccessCallback=Object(external_kbnSharedDeps_React_.useRef)(null),closeModal=()=>{setIsModalOpen(!1),setSnapshotIds([])},deleteSnapshot=()=>{const snapshotsToDelete=[...snapshotIds];setIsDeleting(!0),Object(services_http.f)(snapshotsToDelete).then(({data:data,error:error})=>{const{itemsDeleted:itemsDeleted,errors:errors}=data||{itemsDeleted:void 0,errors:void 0};if(closeModal(),setIsDeleting(!1),itemsDeleted&&itemsDeleted.length){const successMessage=itemsDeleted.length>1?i18n.translate("xpack.snapshotRestore.deleteSnapshot.successMultipleNotificationTitle",{defaultMessage:"Deleted {count} snapshots",values:{count:itemsDeleted.length}}):i18n.translate("xpack.snapshotRestore.deleteSnapshot.successSingleNotificationTitle",{defaultMessage:"Deleted snapshot '{name}'",values:{name:itemsDeleted[0].snapshot}});toastNotifications.addSuccess(successMessage),onSuccessCallback.current&&onSuccessCallback.current([...itemsDeleted])}if(error||errors&&errors.length){const errorMessage=errors&&errors.length>1||error&&snapshotsToDelete.length>1?i18n.translate("xpack.snapshotRestore.deleteSnapshot.errorMultipleNotificationTitle",{defaultMessage:"Error deleting {count} snapshots",values:{count:errors&&errors.length||snapshotsToDelete.length}}):i18n.translate("xpack.snapshotRestore.deleteSnapshot.errorSingleNotificationTitle",{defaultMessage:"Error deleting snapshot '{name}'",values:{name:errors&&errors[0].id.snapshot||snapshotsToDelete[0].snapshot}});toastNotifications.addDanger(errorMessage)}})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,children((ids,onSuccess=(()=>{}))=>{if(!ids||!ids.length)throw new Error("No snapshot IDs specified for deletion");setIsModalOpen(!0),setSnapshotIds(ids),onSuccessCallback.current=onSuccess}),(()=>{if(!isModalOpen)return null;const isSingle=1===snapshotIds.length;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiConfirmModal,{title:isSingle?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.deleteSnapshot.confirmModal.deleteSingleTitle",defaultMessage:"Delete snapshot '{name}'?",values:{name:snapshotIds[0].snapshot}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.deleteSnapshot.confirmModal.deleteMultipleTitle",defaultMessage:"Delete {count} snapshots?",values:{count:snapshotIds.length}}),onCancel:closeModal,onConfirm:deleteSnapshot,cancelButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.deleteSnapshot.confirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.deleteSnapshot.confirmModal.confirmButtonLabel",defaultMessage:"Delete {count, plural, one {snapshot} other {snapshots}}",values:{count:snapshotIds.length}}),confirmButtonDisabled:isDeleting,buttonColor:"danger","data-test-subj":"srdeleteSnapshotConfirmationModal"},isSingle?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.deleteSnapshot.confirmModal.deleteMultipleListDescription",defaultMessage:"You are about to delete these snapshots:"})),external_kbnSharedDeps_React_default.a.createElement("ul",null,snapshotIds.map(({snapshot:snapshot,repository:repository})=>external_kbnSharedDeps_React_default.a.createElement("li",{key:`${repository}/${snapshot}`},snapshot)))),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.deleteSnapshot.confirmModal.deleteMultipleDescription",defaultMessage:"Restore operations associated with {count, plural, one {this snapshot} other {these snapshots}} will stop.",values:{count:snapshotIds.length}})),!isSingle&&isDeleting?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{color:"warning",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.deleteSnapshot.confirmModal.deletingCalloutTitle",defaultMessage:"Deleting snapshots"}))))},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.deleteSnapshot.confirmModal.deletingCalloutDescription",defaultMessage:"This may take a few minutes."})))):null)})())};var gt=__webpack_require__(35),gt_default=__webpack_require__.n(gt);const orderDataStreamsAndIndices=({dataStreams:dataStreams,indices:indices})=>dataStreams.concat(indices),DataStreamBadge=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBadge,{"data-test-subj":"dataStreamBadge",color:"primary"},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.snapshotRestore.policyForm.setSettings.dataStreamBadgeContent",{defaultMessage:"Data stream"})),i18nTexts_callout={title:count=>external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.snapshotRestore.restoreForm.dataStreamsWarningCallOut.title",{defaultMessage:"This snapshot contains {count, plural, one {a data stream} other {data streams}}",values:{count:count}}),body:docLink=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.dataStreamsWarningCallOut.body",defaultMessage:"Each data stream requires a matching index template. Please ensure any restored data streams have a matching index template. You can restore index templates by restoring the global cluster state. However, this may overwrite existing templates, cluster settings, ingest pipelines, and lifecycle policies. {learnMoreLink} about restoring snapshots that contain data streams.",values:{learnMoreLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{target:"_blank",href:docLink},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.snapshotRestore.restoreForm.dataStreamsWarningCallOut.body.learnMoreLink",{defaultMessage:"Learn more"}))}})},DataStreamsGlobalStateCallOut=({dataStreamsCount:dataStreamsCount})=>{const{docLinks:docLinks}=useCore();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{"data-test-subj":"dataStreamWarningCallOut",title:i18nTexts_callout.title(dataStreamsCount),iconType:"alert",color:"warning"},i18nTexts_callout.body(docLinks.links.snapshotRestore.createSnapshot))},DataStreamsAndIndicesListHelpText=({onSelectionChange:onSelectionChange,selectedIndicesAndDataStreams:selectedIndicesAndDataStreams,indices:indices,dataStreams:dataStreams})=>{if(0===selectedIndicesAndDataStreams.length)return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.noDataStreamsOrIndicesHelpText",defaultMessage:"Nothing will be restored. {selectAllLink}",values:{selectAllLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:()=>{onSelectionChange("all")}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.selectAllIndicesLink",defaultMessage:"Select all"}))}});const indicesCount=selectedIndicesAndDataStreams.reduce((acc,v)=>indices.includes(v)?acc+1:acc,0),dataStreamsCount=selectedIndicesAndDataStreams.reduce((acc,v)=>dataStreams.includes(v)?acc+1:acc,0);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.selectDataStreamsAndIndicesHelpText",defaultMessage:"{indicesCount} {indicesCount, plural, one {index} other {indices}} and {dataStreamsCount} {dataStreamsCount, plural, one {data stream} other {data streams}} will be restored. {deselectAllLink}",values:{dataStreamsCount:dataStreamsCount,indicesCount:indicesCount,deselectAllLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{"data-test-subj":"deselectIndicesLink",onClick:()=>{onSelectionChange("none")}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.deselectAllIndicesLink",defaultMessage:"Deselect all"}))}})},SystemIndicesOverwrittenCallOut=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{"data-test-subj":"systemIndicesInfoCallOut",title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.snapshotRestore.restoreForm.stepLogistics.systemIndicesCallOut.title",{defaultMessage:"When this snapshot is restored, system indices will be overwritten with data from the snapshot."}),iconType:"pin",size:"s","aria-live":"polite","aria-atomic":"true"}),RestoreSnapshotStepLogistics=({snapshotDetails:snapshotDetails,restoreSettings:restoreSettings,updateRestoreSettings:updateRestoreSettings,errors:errors})=>{var _csvToArray;const{i18n:i18n}=useServices(),{docLinks:docLinks}=useCore(),{indices:unfilteredSnapshotIndices,dataStreams:snapshotDataStreams=[],includeGlobalState:snapshotIncludeGlobalState,version:version}=snapshotDetails,snapshotIndices=unfilteredSnapshotIndices.filter(index=>!index.startsWith(".ds")),snapshotIndicesAndDataStreams=snapshotIndices.concat(snapshotDataStreams),comboBoxOptions=orderDataStreamsAndIndices({dataStreams:snapshotDataStreams.map(dataStream=>({label:dataStream,value:{isDataStream:!0,name:dataStream}})),indices:snapshotIndices.map(index=>({label:index,value:{isDataStream:!1,name:index}}))}),{indices:restoreIndices,renamePattern:renamePattern,renameReplacement:renameReplacement,partial:partial,includeGlobalState:includeGlobalState,includeAliases:includeAliases}=restoreSettings,[isAllIndicesAndDataStreams,setIsAllIndicesAndDataStreams]=Object(external_kbnSharedDeps_React_.useState)(!Boolean(restoreIndices)),[indicesAndDataStreamsOptions,setIndicesAndDataStreamsOptions]=Object(external_kbnSharedDeps_React_.useState)(()=>orderDataStreamsAndIndices({dataStreams:snapshotDataStreams.map(dataStream=>({label:dataStream,append:external_kbnSharedDeps_React_default.a.createElement(DataStreamBadge,null),checked:isAllIndicesAndDataStreams||"string"==typeof restoreIndices||Array.isArray(restoreIndices)&&restoreIndices.includes(dataStream)?"on":void 0})),indices:snapshotIndices.map(index=>({label:index,checked:isAllIndicesAndDataStreams||"string"==typeof restoreIndices||Array.isArray(restoreIndices)&&restoreIndices.includes(index)?"on":void 0}))})),[selectIndicesMode,setSelectIndicesMode]=Object(external_kbnSharedDeps_React_.useState)("string"==typeof restoreIndices||snapshotIndicesAndDataStreams.length>100?"custom":"list"),[restoreIndexPatterns,setRestoreIndexPatterns]=Object(external_kbnSharedDeps_React_.useState)("string"==typeof restoreIndices?restoreIndices.split(","):[]),[isRenamingIndices,setIsRenamingIndices]=Object(external_kbnSharedDeps_React_.useState)(Boolean(renamePattern||renameReplacement)),[cachedRestoreSettings,setCachedRestoreSettings]=Object(external_kbnSharedDeps_React_.useState)({indices:[...snapshotIndicesAndDataStreams],renamePattern:"",renameReplacement:""});return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"snapshotRestoreStepLogistics",className:"snapshotRestore__restoreForm__stepLogistics"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,null,external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogisticsTitle",defaultMessage:"Restore details"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"s",flush:"right",href:docLinks.links.snapshotRestore.restoreSnapshot,target:"_blank",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.docsButtonLabel",defaultMessage:"Snapshot and Restore docs"})))),snapshotDataStreams.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(DataStreamsGlobalStateCallOut,{dataStreamsCount:snapshotDataStreams.length})):void 0,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.dataStreamsAndIndicesTitle",defaultMessage:"Data streams and indices"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.dataStreamsAndIndicesDescription",defaultMessage:"Creates new data streams and indices if they don’t exist. Opens existing indices, including backing indices for a data stream, if they are closed and have the same number of shards as the snapshot index."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.allDataStreamsAndIndicesLabel",defaultMessage:"All data streams and indices, including system indices"}),checked:isAllIndicesAndDataStreams,onChange:e=>{const isChecked=e.target.checked;setIsAllIndicesAndDataStreams(isChecked),updateRestoreSettings(isChecked?{indices:void 0}:{indices:"custom"===selectIndicesMode?restoreIndexPatterns.join(","):[...cachedRestoreSettings.indices||[]]})}}),isAllIndicesAndDataStreams?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{className:"snapshotRestore__restoreForm__stepLogistics__indicesFieldWrapper",label:"list"===selectIndicesMode?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.selectDataStreamsAndIndicesLabel",defaultMessage:"Select data streams and indices"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:()=>{setSelectIndicesMode("custom"),updateRestoreSettings({indices:restoreIndexPatterns.join(",")})}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.indicesToggleCustomLink",defaultMessage:"Use index patterns"})))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.indicesPatternLabel",defaultMessage:"Index patterns"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:()=>{setSelectIndicesMode("list"),updateRestoreSettings({indices:cachedRestoreSettings.indices})}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.dataStreamsAndIndicesToggleListLink",defaultMessage:"Select data streams and indices"})))),helpText:"list"===selectIndicesMode?external_kbnSharedDeps_React_default.a.createElement(DataStreamsAndIndicesListHelpText,{onSelectionChange:selection=>{"all"===selection?(indicesAndDataStreamsOptions.forEach(option=>{option.checked="on"}),updateRestoreSettings({indices:[...snapshotIndicesAndDataStreams]}),setCachedRestoreSettings({...cachedRestoreSettings,indices:[...snapshotIndicesAndDataStreams]})):(indicesAndDataStreamsOptions.forEach(option=>{option.checked=void 0}),updateRestoreSettings({indices:[]}),setCachedRestoreSettings({...cachedRestoreSettings,indices:[]}))},selectedIndicesAndDataStreams:null!==(_csvToArray=csvToArray(restoreIndices))&&void 0!==_csvToArray?_csvToArray:[],indices:snapshotIndices,dataStreams:snapshotDataStreams}):null,isInvalid:Boolean(errors.indices),error:errors.indices},"list"===selectIndicesMode?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelectable,{allowExclusions:!1,options:indicesAndDataStreamsOptions,onChange:options=>{const newSelectedIndices=[];options.forEach(({label:label,checked:checked})=>{"on"===checked&&newSelectedIndices.push(label)}),setIndicesAndDataStreamsOptions(options),updateRestoreSettings({indices:[...newSelectedIndices]}),setCachedRestoreSettings({...cachedRestoreSettings,indices:[...newSelectedIndices]})},searchable:!0,height:300},(list,search)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,{paddingSize:"s",hasShadow:!1},search,list)):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiComboBox,{options:comboBoxOptions,renderOption:({value:value})=>null!=value&&value.isDataStream?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{responsive:!1,justifyContent:"spaceBetween",alignItems:"center",gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,value.name),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(DataStreamBadge,null))):null==value?void 0:value.name,placeholder:i18n.translate("xpack.snapshotRestore.restoreForm.stepLogistics.indicesPatternPlaceholder",{defaultMessage:"Enter index patterns, i.e. logstash-*"}),selectedOptions:restoreIndexPatterns.map(pattern=>({label:pattern})),onCreateOption:pattern=>{if(!pattern.trim().length)return;const newPatterns=[...restoreIndexPatterns,pattern];setRestoreIndexPatterns(newPatterns),updateRestoreSettings({indices:newPatterns.join(",")})},onChange:patterns=>{const newPatterns=patterns.map(({label:label})=>label);setRestoreIndexPatterns(newPatterns),updateRestoreSettings({indices:newPatterns.join(",")})}})))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.renameDataStreamsAndIndicesTitle",defaultMessage:"Rename data streams and indices"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.renameDataStreamsAndIndicesDescription",defaultMessage:"Renames data streams and indices on restore. Ensure that a matching index template exists for renamed data streams."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.renameDataStreamsAndIndicesLabel",defaultMessage:"Rename data streams and indices"}),checked:isRenamingIndices,onChange:e=>{const isChecked=e.target.checked;setIsRenamingIndices(isChecked),updateRestoreSettings(isChecked?{renamePattern:cachedRestoreSettings.renamePattern,renameReplacement:cachedRestoreSettings.renameReplacement}:{renamePattern:void 0,renameReplacement:void 0})}}),isRenamingIndices?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.renamePatternLabel",defaultMessage:"Capture pattern"}),helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.renamePatternHelpText",defaultMessage:"Use regular expressions"}),isInvalid:Boolean(errors.renamePattern),error:errors.renamePattern},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:renamePattern,placeholder:"data_(.+)",onChange:e=>{setCachedRestoreSettings({...cachedRestoreSettings,renamePattern:e.target.value}),updateRestoreSettings({renamePattern:e.target.value})}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.renameReplacementLabel",defaultMessage:"Replacement pattern"}),isInvalid:Boolean(errors.renameReplacement),error:errors.renameReplacement},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:renameReplacement,placeholder:"restored_data_$1",onChange:e=>{setCachedRestoreSettings({...cachedRestoreSettings,renameReplacement:e.target.value}),updateRestoreSettings({renameReplacement:e.target.value})}}))))):null))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.partialTitle",defaultMessage:"Partial restore"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.partialDescription",defaultMessage:"Allows restore of indices that don’t have snapshots of all shards."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.partialLabel",defaultMessage:"Partial restore"}),checked:void 0!==partial&&partial,onChange:e=>updateRestoreSettings({partial:e.target.checked})}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.includeGlobalStateTitle",defaultMessage:"Restore global state"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.includeGlobalStateDescription",defaultMessage:"Restores templates that don’t currently exist in the cluster and overrides templates with the same name. Also restores persistent settings and all system indices. {learnMoreLink}",values:{learnMoreLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{target:"_blank",href:docLinks.links.snapshotRestore.restoreSnapshotApi},i18n.translate("xpack.snapshotRestore.restoreForm.stepLogistics.includeGlobalStateDocLink",{defaultMessage:"Learn more."}))}}),includeGlobalState&&gt_default()(version,"7.12.0")&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(SystemIndicesOverwrittenCallOut,null))),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0,helpText:snapshotIncludeGlobalState?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.includeGlobalStateDisabledDescription",defaultMessage:"Not available for this snapshot."})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.includeGlobalStateLabel",defaultMessage:"Restore global state"}),checked:void 0!==includeGlobalState&&includeGlobalState,onChange:e=>updateRestoreSettings({includeGlobalState:e.target.checked}),disabled:!snapshotIncludeGlobalState,"data-test-subj":"includeGlobalStateSwitch"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.includeAliasesTitle",defaultMessage:"Restore aliases"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.includeAliasesDescription",defaultMessage:"Restores index aliases along with their associated indices."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepLogistics.includeAliasesLabel",defaultMessage:"Restore aliases"}),checked:void 0===includeAliases||includeAliases,onChange:e=>updateRestoreSettings({includeAliases:e.target.checked}),"data-test-subj":"includeAliasesSwitch"}))))},RestoreSnapshotStepSettings=({restoreSettings:restoreSettings,updateRestoreSettings:updateRestoreSettings,snapshotDetails:snapshotDetails,errors:errors})=>{const{i18n:i18n}=useServices(),{docLinks:docLinks}=useCore(),{indexSettings:indexSettings,ignoreIndexSettings:ignoreIndexSettings}=restoreSettings,{dataStreams:dataStreams}=snapshotDetails,[isUsingIndexSettings,setIsUsingIndexSettings]=Object(external_kbnSharedDeps_React_.useState)(Boolean(indexSettings)),[isUsingIgnoreIndexSettings,setIsUsingIgnoreIndexSettings]=Object(external_kbnSharedDeps_React_.useState)(Boolean(ignoreIndexSettings)),[cachedRestoreSettings,setCachedRestoreSettings]=Object(external_kbnSharedDeps_React_.useState)({indexSettings:indexSettings||"{}",ignoreIndexSettings:ignoreIndexSettings?[...ignoreIndexSettings]:[]}),[ignoreIndexSettingsOptions,setIgnoreIndexSettingsOptions]=Object(external_kbnSharedDeps_React_.useState)([...new Set((ignoreIndexSettings||[]).concat([...application_constants.g].sort()))].map(setting=>({label:setting}))),indexSettingsDocLink=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:docLinks.links.elasticsearch.indexModules,target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepSettings.indexSettingsDocLinkText",defaultMessage:"Learn more."}));return external_kbnSharedDeps_React_default.a.createElement("div",{className:"snapshotRestore__restoreForm__stepSettings"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,null,external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepSettingsTitle",defaultMessage:"Index settings"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"s",flush:"right",href:docLinks.links.snapshotRestore.changeIndexSettings,target:"_blank",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepSettings.docsButtonLabel",defaultMessage:"Index settings docs"})))),null!=dataStreams&&dataStreams.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{iconType:"help",title:i18n.translate("xpack.snapshotRestore.restoreForm.stepSettings.dataStreamsCallout.title",{defaultMessage:"Backing indices"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepSettings.dataStreamsCallout.description",defaultMessage:"These settings also apply to the backing indices of data streams."}))):void 0,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepSettings.indexSettingsTitle",defaultMessage:"Modify index settings"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepSettings.indexSettingsDescription",defaultMessage:"Overrides index settings during restore. {docLink}",values:{docLink:indexSettingsDocLink}}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{"data-test-subj":"modifyIndexSettingsSwitch",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepSettings.indexSettingsLabel",defaultMessage:"Modify index settings"}),checked:isUsingIndexSettings,onChange:e=>{e.target.checked?(setIsUsingIndexSettings(!0),updateRestoreSettings({indexSettings:cachedRestoreSettings.indexSettings})):(setIsUsingIndexSettings(!1),updateRestoreSettings({indexSettings:void 0}))}}),isUsingIndexSettings?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepSettings.indexSettingsEditorLabel",defaultMessage:"Index settings"}),fullWidth:!0,isInvalid:Boolean(errors.indexSettings),error:errors.indexSettings,helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepSettings.indexSettingsEditorDescription",defaultMessage:"Use JSON format: {format}",values:{format:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,'{ "index.number_of_replicas": 0 }')}})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCodeEditor,{mode:"json",theme:"textmate",width:"100%",value:indexSettings,setOptions:{showLineNumbers:!1,tabSize:2,maxLines:1/0},editorProps:{$blockScrolling:1/0},showGutter:!1,minLines:6,maxLines:15,"aria-label":i18n.translate("xpack.snapshotRestore.restoreForm.stepSettings.indexSettingsAriaLabel",{defaultMessage:"Index settings to modify"}),onChange:value=>{updateRestoreSettings({indexSettings:value}),setCachedRestoreSettings({...cachedRestoreSettings,indexSettings:value})}}))):null))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepSettings.ignoreIndexSettingsTitle",defaultMessage:"Reset index settings"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepSettings.ignoreIndexSettingsDescription",defaultMessage:"Resets selected settings to default during restore. {docLink}",values:{docLink:indexSettingsDocLink}}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepSettings.ignoreIndexSettingsLabel",defaultMessage:"Reset index settings"}),checked:isUsingIgnoreIndexSettings,onChange:e=>{e.target.checked?(setIsUsingIgnoreIndexSettings(!0),updateRestoreSettings({ignoreIndexSettings:[...cachedRestoreSettings.ignoreIndexSettings||[]]})):(setIsUsingIgnoreIndexSettings(!1),updateRestoreSettings({ignoreIndexSettings:void 0}))}}),isUsingIgnoreIndexSettings?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepSettings.selectIgnoreIndexSettingsLabel",defaultMessage:"Select settings"}),isInvalid:Boolean(errors.ignoreIndexSettings),error:errors.ignoreIndexSettings},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiComboBox,{placeholder:i18n.translate("xpack.snapshotRestore.restoreForm.stepSettings.ignoreIndexSettingsPlaceholder",{defaultMessage:"Select or type index settings"}),options:ignoreIndexSettingsOptions,selectedOptions:ignoreIndexSettings?ignoreIndexSettingsOptions.filter(({label:label})=>ignoreIndexSettings.includes(label)):[],onChange:selectedOptions=>{const newIgnoreIndexSettings=selectedOptions.map(({label:label})=>label);updateRestoreSettings({ignoreIndexSettings:newIgnoreIndexSettings}),setCachedRestoreSettings({...cachedRestoreSettings,ignoreIndexSettings:newIgnoreIndexSettings})},onCreateOption:(newIndexSetting,flattenedOptions)=>{const normalizedSettingName=newIndexSetting.trim().toLowerCase();if(!normalizedSettingName)return;!Boolean(flattenedOptions.find(({label:label})=>label===normalizedSettingName))&&setIgnoreIndexSettingsOptions([{label:normalizedSettingName},...ignoreIndexSettingsOptions]),updateRestoreSettings({ignoreIndexSettings:[...ignoreIndexSettings||[],normalizedSettingName]}),setCachedRestoreSettings({...cachedRestoreSettings,ignoreIndexSettings:[...ignoreIndexSettings||[],normalizedSettingName]})},isClearable:!0}))):null))))},useCollapsibleList=({items:items})=>{var _csvToArray;const[isShowingFullList,setIsShowingFullList]=Object(external_kbnSharedDeps_React_.useState)(!1),itemsArray=null!==(_csvToArray=csvToArray(items))&&void 0!==_csvToArray?_csvToArray:[];return{items:void 0===items?"all":itemsArray.slice(0,isShowingFullList?1/0:10),hiddenItemsCount:itemsArray.length>10?itemsArray.length-10:0,setIsShowingFullList:setIsShowingFullList,isShowingFullList:isShowingFullList}},CollapsibleIndicesList=({indices:indices})=>{const{hiddenItemsCount:hiddenItemsCount,isShowingFullList:isShowingFullList,items:items,setIsShowingFullList:setIsShowingFullList}=useCollapsibleList({items:indices});return"all"===items?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.indicesList.allIndicesValue",defaultMessage:"All indices"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("ul",null,items.map(index=>external_kbnSharedDeps_React_default.a.createElement("li",{key:index},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("span",null,index)))))),hiddenItemsCount?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:()=>setIsShowingFullList(!isShowingFullList)},isShowingFullList?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.indicesList.indicesCollapseAllLink",defaultMessage:"Hide {count, plural, one {# index} other {# indices}}",values:{count:hiddenItemsCount}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.indicesList.indicesExpandAllLink",defaultMessage:"Show {count, plural, one {# index} other {# indices}}",values:{count:hiddenItemsCount}})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:isShowingFullList?"arrowUp":"arrowDown"}))):null)},RestoreSnapshotStepReview=({restoreSettings:restoreSettings,updateCurrentStep:updateCurrentStep})=>{const{i18n:i18n}=useServices(),{indices:restoreIndices,renamePattern:renamePattern,renameReplacement:renameReplacement,partial:partial,includeGlobalState:includeGlobalState,ignoreIndexSettings:ignoreIndexSettings}=restoreSettings,serializedRestoreSettings=serializeRestoreSettings(restoreSettings),{index_settings:serializedIndexSettings}=serializedRestoreSettings;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,null,external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepReviewTitle",defaultMessage:"Review restore details"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTabbedContent,{tabs:[{id:"summary",name:i18n.translate("xpack.snapshotRestore.restoreForm.stepReview.summaryTabTitle",{defaultMessage:"Summary"}),content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepReview.summaryTab.sectionLogisticsTitle",defaultMessage:"Logistics"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepReview.summaryTab.editStepTooltip",defaultMessage:"Edit"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:()=>updateCurrentStep(1)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"pencil"}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepReview.summaryTab.dataStreamsAndIndicesLabel",defaultMessage:"Data streams and indices"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,external_kbnSharedDeps_React_default.a.createElement(CollapsibleIndicesList,{indices:restoreIndices}))))),renamePattern||renameReplacement?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepReview.summaryTab.sectionRenameTitle",defaultMessage:"Rename indices"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,renamePattern?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepReview.summaryTab.renamePatternLabel",defaultMessage:"Capture pattern"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,renamePattern))):null,renameReplacement?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepReview.summaryTab.renameReplacementLabel",defaultMessage:"Replacement pattern"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,renameReplacement))):null)):null,void 0!==partial||void 0!==includeGlobalState?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,void 0!==partial?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepReview.summaryTab.partialLabel",defaultMessage:"Partial restore"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,partial?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepReview.summaryTab.partialTrueValue",defaultMessage:"Yes"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepReview.summaryTab.partialFalseValue",defaultMessage:"No"})))):null,void 0!==includeGlobalState?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepReview.summaryTab.includeGlobalStateLabel",defaultMessage:"Restore global state"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,includeGlobalState?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepReview.summaryTab.includeGlobalStateTrueValue",defaultMessage:"Yes"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepReview.summaryTab.includeGlobalStateFalseValue",defaultMessage:"No"})))):null):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepReview.summaryTab.sectionSettingsTitle",defaultMessage:"Index settings"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepReview.summaryTab.editStepTooltip",defaultMessage:"Edit"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:()=>updateCurrentStep(2)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"pencil"}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),serializedIndexSettings||ignoreIndexSettings?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,serializedIndexSettings?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{style:{maxWidth:"50%"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepReview.summaryTab.indexSettingsLabel",defaultMessage:"Modify"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGrid,{columns:2,gutterSize:"none"},Object.entries(serializedIndexSettings).map(([setting,value])=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,{key:setting},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("strong",null,setting))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("span",null," ",value))))))))):null,ignoreIndexSettings?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepReview.summaryTab.ignoreIndexSettingsLabel",defaultMessage:"Reset"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("ul",null,ignoreIndexSettings.map(setting=>external_kbnSharedDeps_React_default.a.createElement("li",{key:setting},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("span",null,setting))))))))):null):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.stepReview.summaryTab.noSettingsValue",defaultMessage:"No index setting modifications"}))},{id:"json",name:i18n.translate("xpack.snapshotRestore.restoreForm.stepReview.jsonTabTitle",{defaultMessage:"JSON"}),content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCodeEditor,{mode:"json",theme:"textmate",isReadOnly:!0,setOptions:{maxLines:1/0},value:JSON.stringify(serializedRestoreSettings,null,2),editorProps:{$blockScrolling:1/0},"aria-label":i18n.translate("xpack.snapshotRestore.restoreForm.stepReview.jsonTab.jsonAriaLabel",{defaultMessage:"Restore settings to be executed"})}))}]}))},RestoreSnapshotNavigation=({currentStep:currentStep,maxCompletedStep:maxCompletedStep,updateCurrentStep:updateCurrentStep})=>{const{i18n:i18n}=useServices(),steps=[{title:i18n.translate("xpack.snapshotRestore.restoreForm.navigation.stepLogisticsName",{defaultMessage:"Logistics"}),isComplete:maxCompletedStep>=1,isSelected:1===currentStep,onClick:()=>updateCurrentStep(1)},{title:i18n.translate("xpack.snapshotRestore.restoreForm.navigation.stepSettingsName",{defaultMessage:"Index settings"}),isComplete:maxCompletedStep>=2,isSelected:2===currentStep,disabled:maxCompletedStep<1,onClick:()=>updateCurrentStep(2)},{title:i18n.translate("xpack.snapshotRestore.restoreForm.navigation.stepReviewName",{defaultMessage:"Review"}),isComplete:maxCompletedStep>=2,isSelected:3===currentStep,disabled:maxCompletedStep<2,onClick:()=>updateCurrentStep(3)}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiStepsHorizontal,{steps:steps})},RestoreSnapshotForm=({snapshotDetails:snapshotDetails,isSaving:isSaving,saveError:saveError,clearSaveError:clearSaveError,onSave:onSave})=>{const[currentStep,setCurrentStep]=Object(external_kbnSharedDeps_React_.useState)(1),[maxCompletedStep,setMaxCompletedStep]=Object(external_kbnSharedDeps_React_.useState)(0),CurrentStepForm={1:RestoreSnapshotStepLogistics,2:RestoreSnapshotStepSettings,3:RestoreSnapshotStepReview}[currentStep],[restoreSettings,setRestoreSettings]=Object(external_kbnSharedDeps_React_.useState)({}),[validation,setValidation]=Object(external_kbnSharedDeps_React_.useState)({isValid:!0,errors:{}}),updateCurrentStep=step=>{maxCompletedStep<step-1||(setCurrentStep(step),setMaxCompletedStep(step-1),clearSaveError())};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(RestoreSnapshotNavigation,{currentStep:currentStep,maxCompletedStep:maxCompletedStep,updateCurrentStep:updateCurrentStep}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiForm,{"data-test-subj":"restoreSnapshotsForm"},external_kbnSharedDeps_React_default.a.createElement(CurrentStepForm,{snapshotDetails:snapshotDetails,restoreSettings:restoreSettings,updateRestoreSettings:updatedSettings=>{const newRestoreSettings={...restoreSettings,...updatedSettings},newValidation=(restoreSettings=>{const i18n=services_text.a.i18n,{indices:indices,renamePattern:renamePattern,renameReplacement:renameReplacement,indexSettings:indexSettings,ignoreIndexSettings:ignoreIndexSettings}=restoreSettings,validation={isValid:!0,errors:{indices:[],renamePattern:[],renameReplacement:[],indexSettings:[],ignoreIndexSettings:[]}};if("string"==typeof indices&&0===indices.trim().length&&validation.errors.indices.push(i18n.translate("xpack.snapshotRestore.restoreValidation.indexPatternRequiredError",{defaultMessage:"At least one index pattern is required."})),Array.isArray(indices)&&0===indices.length&&validation.errors.indices.push(i18n.translate("xpack.snapshotRestore.restoreValidation.indicesRequiredError",{defaultMessage:"You must select at least one data stream or index."})),void 0!==renamePattern&&validate_restore_isStringEmpty(renamePattern)&&validation.errors.renamePattern.push(i18n.translate("xpack.snapshotRestore.restoreValidation.renamePatternRequiredError",{defaultMessage:"Capture pattern is required."})),void 0!==renameReplacement&&validate_restore_isStringEmpty(renameReplacement)&&validation.errors.renameReplacement.push(i18n.translate("xpack.snapshotRestore.restoreValidation.renameReplacementRequiredError",{defaultMessage:"Replacement pattern is required."})),"string"==typeof indexSettings)try{const parsedIndexSettings=JSON.parse(indexSettings),modifiedSettings=Object.keys(parsedIndexSettings),modifiedSettingsCount=modifiedSettings.length,unmodifiableSettings=modifiedSettingsCount>0?modifiedSettings.filter(setting=>application_constants.L.includes(setting)):null;0===modifiedSettingsCount&&validation.errors.indexSettings.push(i18n.translate("xpack.snapshotRestore.restoreValidation.indexSettingsRequiredError",{defaultMessage:"At least one setting is required."})),unmodifiableSettings&&unmodifiableSettings.length>0&&validation.errors.indexSettings.push(i18n.translate("xpack.snapshotRestore.restoreValidation.indexSettingsNotModifiableError",{defaultMessage:"You can’t modify: {settings}",values:{settings:unmodifiableSettings.map((setting,index)=>0===index?setting+" ":setting)}}))}catch(e){validation.errors.indexSettings.push(i18n.translate("xpack.snapshotRestore.restoreValidation.indexSettingsInvalidError",{defaultMessage:"Invalid JSON format"}))}if(Array.isArray(ignoreIndexSettings)){const ignoredSettingsCount=ignoreIndexSettings.length,unremovableSettings=ignoredSettingsCount>0?ignoreIndexSettings.filter(setting=>application_constants.M.includes(setting)):null;0===ignoredSettingsCount&&validation.errors.ignoreIndexSettings.push(i18n.translate("xpack.snapshotRestore.restoreValidation.ignoreIndexSettingsRequiredError",{defaultMessage:"At least one setting is required."})),unremovableSettings&&unremovableSettings.length>0&&validation.errors.ignoreIndexSettings.push(i18n.translate("xpack.snapshotRestore.restoreValidation.indexSettingsNotRemovableError",{defaultMessage:"You can’t reset: {settings}",values:{settings:unremovableSettings.map((setting,index)=>0===index?setting+" ":setting)}}))}return validation.errors=Object.entries(validation.errors).filter(([key,value])=>value.length>0).reduce((errs,[key,value])=>(errs[key]=value,errs),{}),Object.keys(validation.errors).length>0&&(validation.isValid=!1),validation})(newRestoreSettings);setRestoreSettings(newRestoreSettings),setValidation(newValidation)},errors:validation.errors,updateCurrentStep:updateCurrentStep}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xl"}),saveError?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,saveError,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"})):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,currentStep>1?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{iconType:"arrowLeft",onClick:()=>(()=>{const previousStep=currentStep-1;setCurrentStep(previousStep),setMaxCompletedStep(previousStep-1),clearSaveError()})(),disabled:!validation.isValid,"data-test-subj":"backButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.backButtonLabel",defaultMessage:"Back"}))):null,currentStep<3?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{fill:!0,iconType:"arrowRight",onClick:()=>(()=>{if(!validation.isValid)return;const nextStep=currentStep+1;setMaxCompletedStep(Math.max(currentStep,maxCompletedStep)),setCurrentStep(nextStep)})(),disabled:!validation.isValid,"data-test-subj":"nextButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.nextButtonLabel",defaultMessage:"Next"}))):null,3===currentStep?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{fill:!0,color:"secondary",iconType:"check",onClick:()=>{validation.isValid&&onSave(restoreSettings)},isLoading:isSaving,"data-test-subj":"restoreButton"},isSaving?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.savingButtonLabel",defaultMessage:"Restoring…"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreForm.submitButtonLabel",defaultMessage:"Restore snapshot"}))):null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}))},PolicyExecuteProvider=({children:children})=>{const{i18n:i18n}=useServices(),toastNotifications=useToastNotifications(),[policyName,setPolicyName]=Object(external_kbnSharedDeps_React_.useState)(""),[isModalOpen,setIsModalOpen]=Object(external_kbnSharedDeps_React_.useState)(!1),onSuccessCallback=Object(external_kbnSharedDeps_React_.useRef)(null),closeModal=()=>{setIsModalOpen(!1),setPolicyName("")},executePolicy=()=>{Object(services_http.i)(policyName).then(({data:data,error:error})=>{const{snapshotName:snapshotName}=data||{snapshotName:void 0};if(snapshotName){const successMessage=i18n.translate("xpack.snapshotRestore.executePolicy.successNotificationTitle",{defaultMessage:"Policy '{name}' is running",values:{name:policyName}});toastNotifications.addSuccess(successMessage),onSuccessCallback.current&&onSuccessCallback.current()}if(error){const errorMessage=i18n.translate("xpack.snapshotRestore.executePolicy.errorNotificationTitle",{defaultMessage:"Error running policy '{name}'",values:{name:policyName}});toastNotifications.addDanger(errorMessage)}}),closeModal()};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,children((name,onSuccess=(()=>{}))=>{if(!name||!name.length)throw new Error("No policy name specified for execution");setIsModalOpen(!0),setPolicyName(name),onSuccessCallback.current=onSuccess}),isModalOpen?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiConfirmModal,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.executePolicy.confirmModal.executePolicyTitle",defaultMessage:"Run '{name}' now?",values:{name:policyName}}),onCancel:closeModal,onConfirm:executePolicy,cancelButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.executePolicy.confirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.executePolicy.confirmModal.confirmButtonLabel",defaultMessage:"Run policy"}),"data-test-subj":"srExecutePolicyConfirmationModal"}):null)},PolicyDeleteProvider=({children:children})=>{const{i18n:i18n}=useServices(),toastNotifications=useToastNotifications(),[policyNames,setPolicyNames]=Object(external_kbnSharedDeps_React_.useState)([]),[isModalOpen,setIsModalOpen]=Object(external_kbnSharedDeps_React_.useState)(!1),onSuccessCallback=Object(external_kbnSharedDeps_React_.useRef)(null),closeModal=()=>{setIsModalOpen(!1),setPolicyNames([])},deletePolicy=()=>{const policiesToDelete=[...policyNames];Object(services_http.d)(policiesToDelete).then(({data:data,error:error})=>{const{itemsDeleted:itemsDeleted,errors:errors}=data||{itemsDeleted:void 0,errors:void 0};if(itemsDeleted&&itemsDeleted.length){const successMessage=itemsDeleted.length>1?i18n.translate("xpack.snapshotRestore.deletePolicy.successMultipleNotificationTitle",{defaultMessage:"Deleted {count} policies",values:{count:itemsDeleted.length}}):i18n.translate("xpack.snapshotRestore.deletePolicy.successSingleNotificationTitle",{defaultMessage:"Deleted policy '{name}'",values:{name:itemsDeleted[0]}});toastNotifications.addSuccess(successMessage),onSuccessCallback.current&&onSuccessCallback.current([...itemsDeleted])}if(error||errors&&errors.length){const errorMessage=errors&&errors.length>1||error&&policiesToDelete.length>1?i18n.translate("xpack.snapshotRestore.deletePolicy.errorMultipleNotificationTitle",{defaultMessage:"Error deleting {count} policies",values:{count:errors&&errors.length||policiesToDelete.length}}):i18n.translate("xpack.snapshotRestore.deletePolicy.errorSingleNotificationTitle",{defaultMessage:"Error deleting policy '{name}'",values:{name:errors&&errors[0].name||policiesToDelete[0]}});toastNotifications.addDanger(errorMessage)}}),closeModal()};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,children((names,onSuccess=(()=>{}))=>{if(!names||!names.length)throw new Error("No policy names specified for deletion");setIsModalOpen(!0),setPolicyNames(names),onSuccessCallback.current=onSuccess}),(()=>{if(!isModalOpen)return null;const isSingle=1===policyNames.length;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiConfirmModal,{title:isSingle?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.deletePolicy.confirmModal.deleteSingleTitle",defaultMessage:"Delete policy '{name}'?",values:{name:policyNames[0]}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.deletePolicy.confirmModal.deleteMultipleTitle",defaultMessage:"Delete {count} policies?",values:{count:policyNames.length}}),onCancel:closeModal,onConfirm:deletePolicy,cancelButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.deletePolicy.confirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.deletePolicy.confirmModal.confirmButtonLabel",defaultMessage:"Delete {count, plural, one {policy} other {policies}}",values:{count:policyNames.length}}),buttonColor:"danger","data-test-subj":"srdeletePolicyConfirmationModal"},isSingle?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.deletePolicy.confirmModal.deleteMultipleListDescription",defaultMessage:"You are about to delete these policies:"})),external_kbnSharedDeps_React_default.a.createElement("ul",null,policyNames.map(name=>external_kbnSharedDeps_React_default.a.createElement("li",{key:name},name)))))})())},CollapsibleDataStreamsList=({dataStreams:dataStreams})=>{const{isShowingFullList:isShowingFullList,setIsShowingFullList:setIsShowingFullList,items:items,hiddenItemsCount:hiddenItemsCount}=useCollapsibleList({items:dataStreams});return"all"===items?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.dataStreamsList.allDataStreamsValue",defaultMessage:"All data streams"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("ul",null,items.map(dataStream=>external_kbnSharedDeps_React_default.a.createElement("li",{key:dataStream},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("span",null,dataStream)))))),hiddenItemsCount?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:()=>setIsShowingFullList(!isShowingFullList)},isShowingFullList?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.dataStreamsList.dataStreamsCollapseAllLink",defaultMessage:"Hide {count, plural, one {# data stream} other {# data streams}}",values:{count:hiddenItemsCount}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.dataStreamsList.dataStreamsExpandAllLink",defaultMessage:"Show {count, plural, one {# data stream} other {# data streams}}",values:{count:hiddenItemsCount}})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:isShowingFullList?"arrowUp":"arrowDown"}))):null)},RetentionSettingsUpdateModalProvider=({children:children})=>{const{i18n:i18n}=useServices(),{docLinks:docLinks}=useCore(),toastNotifications=useToastNotifications(),[retentionSchedule,setRetentionSchedule]=Object(external_kbnSharedDeps_React_.useState)(application_constants.e),[isModalOpen,setIsModalOpen]=Object(external_kbnSharedDeps_React_.useState)(!1),[isEditing,setIsEditing]=Object(external_kbnSharedDeps_React_.useState)(!1),[isSaving,setIsSaving]=Object(external_kbnSharedDeps_React_.useState)(!1),[saveError,setSaveError]=Object(external_kbnSharedDeps_React_.useState)(null),[isAdvancedCronVisible,setIsAdvancedCronVisible]=Object(external_kbnSharedDeps_React_.useState)(!1),onSuccessCallback=Object(external_kbnSharedDeps_React_.useRef)(null),[simpleCron,setSimpleCron]=Object(external_kbnSharedDeps_React_.useState)({expression:application_constants.e,frequency:application_constants.d}),[fieldToPreferredValueMap,setFieldToPreferredValueMap]=Object(external_kbnSharedDeps_React_.useState)({}),[isInvalid,setIsInvalid]=Object(external_kbnSharedDeps_React_.useState)(!1),closeModal=()=>{setIsModalOpen(!1)},updateRetentionSetting=async()=>{if(!retentionSchedule)return void setIsInvalid(!0);setIsSaving(!0),setSaveError(null);const{error:error}=await Object(services_http.n)(retentionSchedule);setIsSaving(!1),error?setSaveError(error):(closeModal(),toastNotifications.addSuccess(i18n.translate("xpack.snapshotRestore.policyForm.stepRetention.policyUpdateRetentionSuccessMessage",{defaultMessage:"Retention schedule updated"})),onSuccessCallback.current&&onSuccessCallback.current())};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,children((originalRetentionSchedule,onSuccess=(()=>{}))=>{setIsModalOpen(!0),setIsAdvancedCronVisible(Boolean(originalRetentionSchedule&&originalRetentionSchedule!==application_constants.e)),originalRetentionSchedule&&(setIsEditing(!0),setRetentionSchedule(originalRetentionSchedule)),onSuccessCallback.current=onSuccess}),isModalOpen?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModal,{onClose:closeModal},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeaderTitle,null,isEditing?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepRetention.policyUpdateRetentionEditTitle",defaultMessage:"Edit retention schedule"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepRetention.policyUpdateRetentionAddTitle",defaultMessage:"Add retention schedule"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalBody,null,saveError&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepRetention.policyUpdateRetentionErrorTitle",defaultMessage:"Error saving retention schedule"}),color:"danger",iconType:"alert"},saveError.data&&saveError.data.message?external_kbnSharedDeps_React_default.a.createElement("p",null,saveError.data.message):null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"})),isAdvancedCronVisible?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepRetention.policyUpdateRetentionScheduleLabel",defaultMessage:"Retention schedule"}),isInvalid:isInvalid,error:i18n.translate("xpack.snapshotRestore.policyForm.stepRetention.policyUpdateRetentionScheduleFieldErrorMessage",{defaultMessage:"Retention schedule is required."}),helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepRetention.policyUpdateRetentionHelpText",defaultMessage:"Use cron expression. {docLink}",values:{docLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:docLinks.links.watcher.cronSchedule,target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepRetention.policyUpdateRetentionHelpTextDocLinkText",defaultMessage:"Learn more."}))}}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:retentionSchedule,fullWidth:!0,onChange:e=>setRetentionSchedule(e.target.value)})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:()=>{setIsAdvancedCronVisible(!1),setRetentionSchedule(simpleCron.expression)},"data-test-subj":"showBasicCronLink"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepRetention.policyUpdateRetentionBasicLabel",defaultMessage:"Create basic interval"})))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(shared_imports.b,{fieldToPreferredValueMap:fieldToPreferredValueMap,cronExpression:simpleCron.expression,frequency:simpleCron.frequency,onChange:({cronExpression:expression,frequency:frequency,fieldToPreferredValueMap:newFieldToPreferredValueMap})=>{setSimpleCron({expression:expression,frequency:frequency}),setFieldToPreferredValueMap(newFieldToPreferredValueMap),setRetentionSchedule(expression)}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:()=>{setIsAdvancedCronVisible(!0)},"data-test-subj":"showAdvancedCronLink"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepRetention.policyUpdateRetentionAdvancedLabel",defaultMessage:"Create cron expression"}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalFooter,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:closeModal},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepRetention.policyUpdateRetentionCancelButtonLabel",defaultMessage:"Cancel"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{onClick:updateRetentionSetting,fill:!0,isLoading:isSaving},isEditing?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepRetention.policyUpdateRetentionEditButtonLabel",defaultMessage:"Save changes"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepRetention.policyUpdateRetentionSaveButtonLabel",defaultMessage:"Schedule"})))):null)},RetentionExecuteModalProvider=({children:children})=>{const{i18n:i18n}=useServices(),toastNotifications=useToastNotifications(),[isModalOpen,setIsModalOpen]=Object(external_kbnSharedDeps_React_.useState)(!1),closeModal=()=>{setIsModalOpen(!1)},executeRetention=()=>{Object(services_http.k)().then(({error:error})=>{if(error){const errorMessage=i18n.translate("xpack.snapshotRestore.executeRetention.errorMessage",{defaultMessage:"Error running retention"});toastNotifications.addDanger(errorMessage)}else{const successMessage=i18n.translate("xpack.snapshotRestore.executeRetention.successMessage",{defaultMessage:"Retention is running"});toastNotifications.addSuccess(successMessage)}}),closeModal()};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,children(()=>{setIsModalOpen(!0)}),isModalOpen?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiConfirmModal,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.executeRetention.confirmModal.executeRetentionTitle",defaultMessage:"Run snapshot retention now?"}),onCancel:closeModal,onConfirm:executeRetention,cancelButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.executeRetention.confirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.executeRetention.confirmModal.confirmButtonLabel",defaultMessage:"Run retention"}),"data-test-subj":"executeRetentionModal"}):null)};var public_=__webpack_require__(26);function step_logistics_extends(){return(step_logistics_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const PolicyStepLogistics=({policy:policy,updatePolicy:updatePolicy,isEditing:isEditing,currentUrl:currentUrl,errors:errors})=>{const{error:errorLoadingRepositories,isLoading:isLoadingRepositories,data:{repositories:repositories}={repositories:[]},resendRequest:reloadRepositories}=Object(services_http.r)(),{i18n:i18n,history:history}=useServices(),{docLinks:docLinks}=useCore(),[showRepositoryNotFoundWarning,setShowRepositoryNotFoundWarning]=Object(external_kbnSharedDeps_React_.useState)(!1),[touched,setTouched]=Object(external_kbnSharedDeps_React_.useState)({name:!1,snapshotName:!1,repository:!1,schedule:!1}),[simpleCron,setSimpleCron]=Object(external_kbnSharedDeps_React_.useState)({expression:application_constants.c,frequency:application_constants.b}),[isAdvancedCronVisible,setIsAdvancedCronVisible]=Object(external_kbnSharedDeps_React_.useState)(Boolean(policy.schedule&&policy.schedule!==application_constants.c)),[fieldToPreferredValueMap,setFieldToPreferredValueMap]=Object(external_kbnSharedDeps_React_.useState)({}),renderRepositorySelect=()=>{if(isLoadingRepositories)return external_kbnSharedDeps_React_default.a.createElement(SectionLoading,{inline:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.loadingRepositoriesDescription",defaultMessage:"Loading repositories…"}));if(errorLoadingRepositories)return external_kbnSharedDeps_React_default.a.createElement(shared_imports.d,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.loadingRepositoriesErrorMessage",defaultMessage:"Error loading repositories"}),error:errorLoadingRepositories,actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{onClick:()=>reloadRepositories(),color:"danger",iconType:"refresh","data-test-subj":"reloadRepositoriesButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.reloadRepositoriesButtonLabel",defaultMessage:"Reload repositories"}))});if(0===repositories.length)return external_kbnSharedDeps_React_default.a.createElement(shared_imports.d,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.noRepositoriesErrorTitle",defaultMessage:"You don't have any repositories"}),error:{error:i18n.translate("xpack.snapshotRestore.policyForm.noRepositoriesErrorMessage",{defaultMessage:"You must register a repository to store your snapshots."})},actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,step_logistics_extends({},Object(public_.reactRouterNavigate)(history,linkToAddRepository(currentUrl)),{color:"danger",iconType:"plusInCircle","data-test-subj":"addRepositoryButton"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.addRepositoryButtonLabel",defaultMessage:"Register a repository"}))});policy.repository||updatePolicy({repository:repositories[0].name});const doesRepositoryExist=!!policy.repository&&repositories.some(r=>r.name===policy.repository);return doesRepositoryExist||errors.repository||updatePolicy(policy,{repositoryDoesNotExist:!0}),showRepositoryNotFoundWarning!==!doesRepositoryExist&&setShowRepositoryNotFoundWarning(!doesRepositoryExist),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{options:repositories.map(({name:name})=>({value:name,text:name})),hasNoInitialSelection:!doesRepositoryExist,value:doesRepositoryExist?policy.repository:"",onBlur:()=>setTouched({...touched,repository:!0}),onChange:e=>{updatePolicy({repository:e.target.value})},fullWidth:!0,"data-test-subj":"repositorySelect"})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,null,external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepLogisticsTitle",defaultMessage:"Logistics"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"s",flush:"right",href:docLinks.links.apis.putSnapshotLifecyclePolicy,target:"_blank",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepLogistics.docsButtonLabel",defaultMessage:"Logistics docs"})))),showRepositoryNotFoundWarning&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{"data-test-subj":"repositoryNotFoundWarning",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepLogistics.selectRepository.policyRepositoryNotFoundTitle",defaultMessage:"Repository not found"}),color:"danger",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepLogistics.selectRepository.policyRepositoryNotFoundDescription",defaultMessage:"Repository {repo} does not exist. Please select an existing repository.",values:{repo:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,policy.repository)}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepLogistics.nameDescriptionTitle",defaultMessage:"Policy name"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepLogistics.nameDescription",defaultMessage:"A unique identifier for this policy."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepLogistics.nameLabel",defaultMessage:"Name"}),isInvalid:touched.name&&Boolean(errors.name),error:errors.name,fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:policy.name,fullWidth:!0,onBlur:()=>setTouched({...touched,name:!0}),onChange:e=>{updatePolicy({name:e.target.value})},placeholder:i18n.translate("xpack.snapshotRestore.policyForm.stepLogistics.namePlaceholder",{defaultMessage:"daily-snapshots",description:"Example SLM policy name. Similar to index names, do not use spaces in translation."}),"data-test-subj":"nameInput",disabled:isEditing}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepLogistics.snapshotNameDescriptionTitle",defaultMessage:"Snapshot name"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepLogistics.snapshotNameDescription",defaultMessage:"The name for the snapshots. A unique identifier is automatically added to each name."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepLogistics.policySnapshotNameLabel",defaultMessage:"Snapshot name"}),isInvalid:touched.snapshotName&&Boolean(errors.snapshotName),error:errors.snapshotName,helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepLogistics.policySnapshotNameHelpText",defaultMessage:"Supports date math expressions. {docLink}",values:{docLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:docLinks.links.date.dateMathIndexNames,target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepLogistics.policySnapshotNameHelpTextDocLink",defaultMessage:"Learn more."}))}}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:policy.snapshotName,fullWidth:!0,onChange:e=>{updatePolicy({snapshotName:e.target.value})},onBlur:()=>setTouched({...touched,snapshotName:!0}),placeholder:i18n.translate("xpack.snapshotRestore.policyForm.stepLogistics.policySnapshotNamePlaceholder",{defaultMessage:"<daily-snap-\\{now/d\\}>",description:"Example date math snapshot name. Keeping the same syntax is important: <SOME-TRANSLATION-{now/d}>"}),"data-test-subj":"snapshotNameInput"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepLogistics.repositoryDescriptionTitle",defaultMessage:"Repository"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepLogistics.repositoryDescription",defaultMessage:"The repository where you want to store the snapshots."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepLogistics.policyRepositoryLabel",defaultMessage:"Repository"}),isInvalid:touched.repository&&Boolean(errors.repository),error:errors.repository,fullWidth:!0},renderRepositorySelect())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepLogistics.scheduleDescriptionTitle",defaultMessage:"Schedule"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepLogistics.scheduleDescription",defaultMessage:"The frequency at which to take the snapshots."}),fullWidth:!0},isAdvancedCronVisible?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepLogistics.policyScheduleLabel",defaultMessage:"Schedule"}),isInvalid:touched.schedule&&Boolean(errors.schedule),error:errors.schedule,helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepLogistics.policyScheduleHelpText",defaultMessage:"Use cron expression. {docLink}",values:{docLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:docLinks.links.apis.cronExpressions,target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepLogistics.policyScheduleHelpTextDocLink",defaultMessage:"Learn more."}))}}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{defaultValue:policy.schedule,fullWidth:!0,onChange:e=>{updatePolicy({schedule:e.target.value})},onBlur:()=>setTouched({...touched,schedule:!0}),placeholder:application_constants.c,"data-test-subj":"advancedCronInput"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:()=>{setIsAdvancedCronVisible(!1),updatePolicy({schedule:simpleCron.expression})},"data-test-subj":"showBasicCronLink"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepLogistics.policyScheduleButtonBasicLabel",defaultMessage:"Create basic interval"})))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(shared_imports.b,{frequencyBlockList:["MINUTE"],fieldToPreferredValueMap:fieldToPreferredValueMap,cronExpression:simpleCron.expression,frequency:simpleCron.frequency,onChange:({cronExpression:expression,frequency:frequency,fieldToPreferredValueMap:newFieldToPreferredValueMap})=>{setSimpleCron({expression:expression,frequency:frequency}),setFieldToPreferredValueMap(newFieldToPreferredValueMap),updatePolicy({schedule:expression})}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:()=>{setIsAdvancedCronVisible(!0)},"data-test-subj":"showAdvancedCronLink"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepLogistics.policyScheduleButtonAdvancedLabel",defaultMessage:"Create cron expression"}))))))},mapSelectionToIndicesOptions=({allSelected:allSelected,selection:selection,dataStreams:dataStreams,indices:indices})=>orderDataStreamsAndIndices({dataStreams:dataStreams.map(dataStream=>({label:dataStream,append:external_kbnSharedDeps_React_default.a.createElement(DataStreamBadge,null),checked:allSelected||selection.includes(dataStream)?"on":void 0})),indices:indices.map(index=>({label:index,checked:allSelected||selection.includes(index)?"on":void 0}))}),data_streams_and_indices_list_help_text_DataStreamsAndIndicesListHelpText=({onSelectionChange:onSelectionChange,selectedIndicesAndDataStreams:selectedIndicesAndDataStreams,indices:indices,dataStreams:dataStreams})=>{if(0===selectedIndicesAndDataStreams.length)return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepSettings.noDataStreamsOrIndicesHelpText",defaultMessage:"Nothing will be backed up. {selectAllLink}",values:{selectAllLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:()=>{onSelectionChange("all")}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepSettings.selectAllIndicesLink",defaultMessage:"Select all"}))}});const indicesCount=selectedIndicesAndDataStreams.reduce((acc,v)=>indices.includes(v)?acc+1:acc,0),dataStreamsCount=selectedIndicesAndDataStreams.reduce((acc,v)=>dataStreams.includes(v)?acc+1:acc,0);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepSettings.selectDataStreamsIndicesHelpText",defaultMessage:"{indicesCount} {indicesCount, plural, one {index} other {indices}} and {dataStreamsCount} {dataStreamsCount, plural, one {data stream} other {data streams}} will be backed up. {deselectAllLink}",values:{dataStreamsCount:dataStreamsCount,indicesCount:indicesCount,deselectAllLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{"data-test-subj":"deselectIndicesLink",onClick:()=>{onSelectionChange("none")}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepSettings.deselectAllIndicesLink",defaultMessage:"Deselect all"}))}})},IndicesAndDataStreamsField=({isManagedPolicy:isManagedPolicy,dataStreams:dataStreams,indices:indices,policy:policy,onUpdate:_onUpdate,errors:errors})=>{const{i18n:i18n}=useServices(),{config:config={}}=policy,indicesAndDataStreams=indices.concat(dataStreams),[isAllIndices,setIsAllIndices]=Object(external_kbnSharedDeps_React_.useState)(null==config.indices||Array.isArray(config.indices)&&0===config.indices.length),onUpdate=data=>{_onUpdate(data,{validateIndicesCount:!isAllIndices})},[indicesAndDataStreamsSelection,setIndicesAndDataStreamsSelection]=Object(external_kbnSharedDeps_React_.useState)(()=>Array.isArray(config.indices)&&!isAllIndices?indicesAndDataStreams.filter(i=>config.indices.includes(i)):[...indicesAndDataStreams]),[indicesAndDataStreamsOptions,setIndicesAndDataStreamsOptions]=Object(external_kbnSharedDeps_React_.useState)(()=>mapSelectionToIndicesOptions({selection:indicesAndDataStreamsSelection,dataStreams:dataStreams,indices:indices,allSelected:isAllIndices||"string"==typeof config.indices})),[selectIndicesMode,setSelectIndicesMode]=Object(external_kbnSharedDeps_React_.useState)(()=>(({configuredIndices:configuredIndices,indices:indices,dataStreams:dataStreams})=>{const indicesAndDataStreams=indices.concat(dataStreams);return"string"==typeof configuredIndices||indicesAndDataStreams.length>100||Array.isArray(configuredIndices)&&!configuredIndices.every(c=>indicesAndDataStreams.some(i=>i===c))?"custom":"list"})({configuredIndices:config.indices,dataStreams:dataStreams,indices:indices})),[indexPatterns,setIndexPatterns]=Object(external_kbnSharedDeps_React_.useState)(()=>"string"==typeof config.indices?config.indices.split(","):Array.isArray(config.indices)&&config.indices?config.indices:[]),indicesSwitch=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepSettings.allDataStreamsAndIndicesLabel",defaultMessage:"All data streams and indices, including system indices"}),checked:isAllIndices,disabled:isManagedPolicy,"data-test-subj":"allIndicesToggle",onChange:e=>{const isChecked=e.target.checked;setIsAllIndices(isChecked),isChecked?(setIndicesAndDataStreamsSelection(indicesAndDataStreams),setIndicesAndDataStreamsOptions(mapSelectionToIndicesOptions({allSelected:isAllIndices||"string"==typeof config.indices,dataStreams:dataStreams,indices:indices,selection:indicesAndDataStreamsSelection})),onUpdate({indices:void 0})):_onUpdate({indices:"custom"===selectIndicesMode?indexPatterns.join(","):[...indicesAndDataStreamsSelection||[]]},{validateIndicesCount:!0})}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepSettings.dataStreamsAndIndicesTitle",defaultMessage:"Data streams and indices"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepSettings.dataStreamsAndIndicesDescription",defaultMessage:"To back up indices and data streams, manually select them or define index patterns to dynamically match them."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,isManagedPolicy?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"left",content:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepSettings.indicesTooltip",defaultMessage:"Cloud-managed policies require all indices."}))},indicesSwitch):indicesSwitch,isAllIndices?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{className:"snapshotRestore__policyForm__stepSettings__indicesFieldWrapper",label:"list"===selectIndicesMode?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepSettings.selectIndicesLabel",defaultMessage:"Select indices and data streams"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:()=>{setSelectIndicesMode("custom"),onUpdate({indices:indexPatterns.join(",")})}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepSettings.indicesToggleCustomLink",defaultMessage:"Use index patterns"})))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepSettings.indicesPatternLabel",defaultMessage:"Index patterns"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{"data-test-subj":"selectIndicesLink",onClick:()=>{setSelectIndicesMode("list"),onUpdate({indices:indicesAndDataStreamsSelection})}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepSettings.dataStreamsAndIndicesToggleListLink",defaultMessage:"Select data streams and indices"})))),helpText:"list"===selectIndicesMode?external_kbnSharedDeps_React_default.a.createElement(data_streams_and_indices_list_help_text_DataStreamsAndIndicesListHelpText,{onSelectionChange:selection=>{"all"===selection?(indicesAndDataStreamsOptions.forEach(option=>{option.checked="on"}),onUpdate({indices:[...indicesAndDataStreams]}),setIndicesAndDataStreamsSelection([...indicesAndDataStreams])):(indicesAndDataStreamsOptions.forEach(option=>{option.checked=void 0}),onUpdate({indices:[]}),setIndicesAndDataStreamsSelection([]))},selectedIndicesAndDataStreams:indicesAndDataStreamsSelection,indices:indices,dataStreams:dataStreams}):null,isInvalid:Boolean(errors.indices),error:errors.indices},"list"===selectIndicesMode?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelectable,{allowExclusions:!1,"data-test-subj":"indicesAndDataStreamsList",options:indicesAndDataStreamsOptions,onChange:options=>{const newSelectedIndices=[];options.forEach(({label:label,checked:checked})=>{"on"===checked&&newSelectedIndices.push(label)}),setIndicesAndDataStreamsOptions(options),onUpdate({indices:newSelectedIndices}),setIndicesAndDataStreamsSelection(newSelectedIndices)},searchable:!0,height:300},(list,search)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,{paddingSize:"s",hasShadow:!1},search,list)):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiComboBox,{options:orderDataStreamsAndIndices({indices:indices.map(index=>({label:index,value:{isDataStream:!1}})),dataStreams:dataStreams.map(dataStream=>({label:dataStream,value:{isDataStream:!0}}))}),renderOption:({label:label,value:value})=>null!=value&&value.isDataStream?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{responsive:!1,justifyContent:"spaceBetween",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},label),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(DataStreamBadge,null))):label,placeholder:i18n.translate("xpack.snapshotRestore.policyForm.stepSettings.indicesPatternPlaceholder",{defaultMessage:"Enter index patterns, i.e. logstash-*"}),selectedOptions:indexPatterns.map(pattern=>({label:pattern})),onCreateOption:pattern=>{if(!pattern.trim().length)return;const newPatterns=[...indexPatterns,pattern];setIndexPatterns(newPatterns),onUpdate({indices:newPatterns.join(",")})},onChange:patterns=>{const newPatterns=patterns.map(({label:label})=>label);setIndexPatterns(newPatterns),onUpdate({indices:newPatterns.join(",")})}}))))))},PolicyStepSettings=({policy:policy,indices:indices,dataStreams:dataStreams,updatePolicy:updatePolicy,errors:errors})=>{const{docLinks:docLinks}=useCore(),{config:config={},isManagedPolicy:isManagedPolicy}=policy,updatePolicyConfig=(updatedFields,validationHelperData={})=>{const newConfig={...config,...updatedFields};updatePolicy({config:newConfig},validationHelperData)};return external_kbnSharedDeps_React_default.a.createElement("div",{className:"snapshotRestore__policyForm__stepSettings"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,null,external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepSettingsTitle",defaultMessage:"Snapshot settings"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"s",flush:"right",href:docLinks.links.snapshotRestore.createSnapshot,target:"_blank",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepSettings.docsButtonLabel",defaultMessage:"Snapshot settings docs"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(IndicesAndDataStreamsField,{isManagedPolicy:isManagedPolicy,errors:errors,dataStreams:dataStreams,indices:indices,policy:policy,onUpdate:updatePolicyConfig}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepSettings.ignoreUnavailableDescriptionTitle",defaultMessage:"Ignore unavailable indices"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepSettings.ignoreUnavailableDescription",defaultMessage:"Ignores indices that are unavailable when taking the snapshot. Otherwise, the entire snapshot will fail."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{"data-test-subj":"ignoreUnavailableIndicesToggle",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepSettings.ignoreUnavailableLabel",defaultMessage:"Ignore unavailable indices"}),checked:Boolean(config.ignoreUnavailable),onChange:e=>{updatePolicyConfig({ignoreUnavailable:e.target.checked})}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepSettings.partialDescriptionTitle",defaultMessage:"Allow partial indices"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepSettings.partialDescription",defaultMessage:"Allows snapshots of indices with primary shards that are unavailable. Otherwise, the entire snapshot will fail."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{"data-test-subj":"partialIndicesToggle",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepSettings.partialIndicesToggleSwitch",defaultMessage:"Allow partial indices"}),checked:Boolean(config.partial),onChange:e=>{updatePolicyConfig({partial:e.target.checked})}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepSettings.includeGlobalStateDescriptionTitle",defaultMessage:"Include global state"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepSettings.includeGlobalStateDescription",defaultMessage:"Stores the global cluster state and system indices as part of the snapshot."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{"data-test-subj":"globalStateToggle",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepSettings.policyIncludeGlobalStateLabel",defaultMessage:"Include global state"}),checked:void 0===config.includeGlobalState||config.includeGlobalState,onChange:e=>{updatePolicyConfig({includeGlobalState:e.target.checked})}}))))},getExpirationTimeOptions=(unitSize="0")=>Object.entries(constants.g).map(([_key,value])=>({text:services_text.a.getTimeUnitLabel(value,unitSize),value:value})),PolicyStepRetention=({policy:policy,updatePolicy:updatePolicy,errors:errors})=>{const{retention:retention={}}=policy,{docLinks:docLinks}=useCore(),updatePolicyRetention=(updatedFields,validationHelperData={})=>{const newRetention={...retention,...updatedFields};updatePolicy({retention:newRetention},validationHelperData)},[touched,setTouched]=Object(external_kbnSharedDeps_React_.useState)({expireAfterValue:!1,minCount:!1,maxCount:!1});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,null,external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepRetentionTitle",defaultMessage:"Snapshot retention (optional)"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"s",flush:"right",href:docLinks.links.apis.putSnapshotLifecyclePolicy,target:"_blank",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepRetention.docsButtonLabel",defaultMessage:"Snapshot retention docs"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepRetention.expirationTitle",defaultMessage:"Expiration"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepRetention.expirationDescription",defaultMessage:"The time to wait before deleting snapshots."}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepRetention.expireAfterLabel",defaultMessage:"Delete after"}),isInvalid:touched.expireAfterValue&&Boolean(errors.expireAfterValue),error:errors.expireAfterValue,fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldNumber,{value:retention.expireAfterValue||"",onBlur:()=>setTouched({...touched,expireAfterValue:!0}),onChange:e=>{const value=e.target.value;updatePolicyRetention({expireAfterValue:""!==value?Number(value):value})},"data-test-subj":"expireAfterValueInput",min:0})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{value:retention.expireAfterUnit,options:getExpirationTimeOptions(retention.expireAfterValue?retention.expireAfterValue.toString():void 0),onChange:e=>{updatePolicyRetention({expireAfterUnit:e.target.value})},"data-test-subj":"expireAfterUnitSelect"}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepRetention.countTitle",defaultMessage:"Snapshots to retain"}))),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepRetention.countDescription",defaultMessage:"The minimum and maximum number of snapshots to store in your cluster. It should not exceed {maxNumber}.",values:{maxNumber:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,"200")}}),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepRetention.minCountLabel",defaultMessage:"Mininum count"}),isInvalid:touched.minCount&&Boolean(errors.minCount),error:errors.minCount,fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldNumber,{fullWidth:!0,value:retention.minCount||"",onBlur:()=>setTouched({...touched,minCount:!0}),onChange:e=>{const value=e.target.value;updatePolicyRetention({minCount:""!==value?Number(value):value})},"data-test-subj":"minCountInput",min:0}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepRetention.maxCountLabel",defaultMessage:"Maximum count"}),isInvalid:touched.maxCount&&Boolean(errors.maxCount),error:errors.maxCount,fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldNumber,{fullWidth:!0,value:retention.maxCount||"",onBlur:()=>setTouched({...touched,maxCount:!0}),onChange:e=>{const value=e.target.value;updatePolicyRetention({maxCount:""!==value?Number(value):value})},"data-test-subj":"maxCountInput",min:0}))))))},PolicyStepReview=({policy:policy,updateCurrentStep:updateCurrentStep})=>{const{i18n:i18n}=useServices(),{name:name,snapshotName:snapshotName,schedule:schedule,repository:repository,config:config,retention:retention}=policy,{indices:indices,includeGlobalState:includeGlobalState,ignoreUnavailable:ignoreUnavailable,partial:partial}=config||{indices:void 0,includeGlobalState:void 0,ignoreUnavailable:void 0,partial:void 0},serializedPolicy=serializePolicy(policy),{retention:serializedRetention}=serializedPolicy,EditStepTooltip=({step:step})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepReview.summaryTab.editStepTooltip",defaultMessage:"Edit"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:()=>updateCurrentStep(step)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"pencil","aria-label":i18n.translate("xpack.snapshotRestore.policyForm.stepReview.editIconAriaLabel",{defaultMessage:"Edit step"})})));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,null,external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepReviewTitle",defaultMessage:"Review policy"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTabbedContent,{tabs:[{id:"summary",name:i18n.translate("xpack.snapshotRestore.policyForm.stepReview.summaryTabTitle",{defaultMessage:"Summary"}),content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepReview.summaryTab.sectionLogisticsTitle",defaultMessage:"Logistics"})," ",external_kbnSharedDeps_React_default.a.createElement(EditStepTooltip,{step:1}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepReview.summaryTab.nameLabel",defaultMessage:"Policy name"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,name))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepReview.summaryTab.snapshotNameLabel",defaultMessage:"Snapshot name"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,snapshotName)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepReview.summaryTab.repositoryLabel",defaultMessage:"Repository"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,repository))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepReview.summaryTab.scheduleLabel",defaultMessage:"Schedule"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,schedule)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepReview.summaryTab.sectionSettingsTitle",defaultMessage:"Snapshot settings"})," ",external_kbnSharedDeps_React_default.a.createElement(EditStepTooltip,{step:2}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepReview.summaryTab.dataStreamsAndIndicesLabel",defaultMessage:"Data streams and indices"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,external_kbnSharedDeps_React_default.a.createElement(CollapsibleIndicesList,{indices:indices})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepReview.summaryTab.ignoreUnavailableLabel",defaultMessage:"Ignore unavailable indices"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,ignoreUnavailable?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepReview.summaryTab.ignoreUnavailableTrueLabel",defaultMessage:"Yes"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepReview.summaryTab.ignoreUnavailableFalseLabel",defaultMessage:"No"}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepReview.summaryTab.partialIndicesLabel",defaultMessage:"Allow partial indices"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,partial?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepReview.summaryTab.partialTrueLabel",defaultMessage:"Yes"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepReview.summaryTab.partialFalseLabel",defaultMessage:"No"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepReview.summaryTab.includeGlobalStateLabel",defaultMessage:"Include global state"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,!1===includeGlobalState?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepReview.summaryTab.includeGlobalStateFalseLabel",defaultMessage:"No"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepReview.summaryTab.includeGlobalStateTrueLabel",defaultMessage:"Yes"}))))),serializedRetention?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepReview.retentionTab.sectionRetentionTitle",defaultMessage:"Snapshot retention"})," ",external_kbnSharedDeps_React_default.a.createElement(EditStepTooltip,{step:3}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},retention.expireAfterValue&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepReview.retentionTab.expireAfterLabel",defaultMessage:"Delete after"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,retention.expireAfterValue,retention.expireAfterUnit)),retention.minCount&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepReview.retentionTab.minCountLabel",defaultMessage:"Min count"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,retention.minCount)),retention.maxCount&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.stepReview.retentionTab.maxCountLabel",defaultMessage:"Max count"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,retention.maxCount)))):null)},{id:"json",name:i18n.translate("xpack.snapshotRestore.policyForm.stepReview.requestTabTitle",{defaultMessage:"Request"}),content:(()=>{const endpoint="PUT _slm/policy/"+name,json=JSON.stringify(serializedPolicy,null,2);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCodeBlock,{language:"json",isCopyable:!0},`${endpoint}\n${json}`))})()}]}))},PolicyNavigation=({currentStep:currentStep,maxCompletedStep:maxCompletedStep,updateCurrentStep:updateCurrentStep,isFormValid:isFormValid})=>{const{i18n:i18n}=useServices(),steps=[{title:i18n.translate("xpack.snapshotRestore.policyForm.navigation.stepLogisticsName",{defaultMessage:"Logistics"}),isComplete:maxCompletedStep>=1,isSelected:1===currentStep,disabled:!isFormValid&&1!==currentStep,onClick:()=>updateCurrentStep(1)},{title:i18n.translate("xpack.snapshotRestore.policyForm.navigation.stepSettingsName",{defaultMessage:"Snapshot settings"}),isComplete:maxCompletedStep>=2,isSelected:2===currentStep,disabled:maxCompletedStep<1||!isFormValid&&2!==currentStep,onClick:()=>updateCurrentStep(2)},{title:i18n.translate("xpack.snapshotRestore.policyForm.navigation.stepRetentionName",{defaultMessage:"Snapshot retention"}),isComplete:maxCompletedStep>=3,isSelected:3===currentStep,disabled:maxCompletedStep<2||!isFormValid&&3!==currentStep,onClick:()=>updateCurrentStep(3)},{title:i18n.translate("xpack.snapshotRestore.policyForm.navigation.stepReviewName",{defaultMessage:"Review"}),isComplete:maxCompletedStep>=3,isSelected:4===currentStep,disabled:maxCompletedStep<3||!isFormValid&&4!==currentStep,onClick:()=>updateCurrentStep(4)}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiStepsHorizontal,{steps:steps})},PolicyForm=({policy:originalPolicy,dataStreams:dataStreams,indices:indices,currentUrl:currentUrl,isEditing:isEditing,isSaving:isSaving,saveError:saveError,clearSaveError:clearSaveError,onCancel:onCancel,onSave:onSave})=>{var _originalPolicy$reten,_originalPolicy$reten2;const[currentStep,setCurrentStep]=Object(external_kbnSharedDeps_React_.useState)(1),[maxCompletedStep,setMaxCompletedStep]=Object(external_kbnSharedDeps_React_.useState)(0),stepMap={1:PolicyStepLogistics,2:PolicyStepSettings,3:PolicyStepRetention,4:PolicyStepReview},CurrentStepForm=stepMap[currentStep],[policy,setPolicy]=Object(external_kbnSharedDeps_React_.useState)({...originalPolicy,config:{...originalPolicy.config||{}},retention:{...originalPolicy.retention,expireAfterUnit:null!==(_originalPolicy$reten=null===(_originalPolicy$reten2=originalPolicy.retention)||void 0===_originalPolicy$reten2?void 0:_originalPolicy$reten2.expireAfterUnit)&&void 0!==_originalPolicy$reten?_originalPolicy$reten:constants.g.DAY}}),isEditingManagedPolicy=Boolean(isEditing&&policy.isManagedPolicy),[validation,setValidation]=Object(external_kbnSharedDeps_React_.useState)({isValid:!0,errors:{}}),updateCurrentStep=step=>{maxCompletedStep<step-1||(setCurrentStep(step),setMaxCompletedStep(step-1),clearSaveError())},lastStep=Object.keys(stepMap).length;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(PolicyNavigation,{currentStep:currentStep,maxCompletedStep:maxCompletedStep,updateCurrentStep:updateCurrentStep,isFormValid:validation.isValid}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiForm,null,external_kbnSharedDeps_React_default.a.createElement(CurrentStepForm,{policy:policy,indices:indices,dataStreams:dataStreams,updatePolicy:(updatedFields,validationHelperData={})=>{const newPolicy={...policy,...updatedFields},newValidation=((policy,validationHelperData)=>{const i18n=services_text.a.i18n,{name:name,snapshotName:snapshotName,schedule:schedule,repository:repository,config:config,retention:retention}=policy,{validateIndicesCount:validateIndicesCount,repositoryDoesNotExist:repositoryDoesNotExist}=validationHelperData,validation={isValid:!0,errors:{name:[],snapshotName:[],schedule:[],repository:[],dataStreams:[],indices:[],expireAfterValue:[],minCount:[],maxCount:[]}};return validate_policy_isStringEmpty(name)&&validation.errors.name.push(i18n.translate("xpack.snapshotRestore.policyValidation.nameRequiredErroMessage",{defaultMessage:"Policy name is required."})),validate_policy_isStringEmpty(snapshotName)&&validation.errors.snapshotName.push(i18n.translate("xpack.snapshotRestore.policyValidation.snapshotNameRequiredErrorMessage",{defaultMessage:"Snapshot name is required."})),(str=>{const strExcludeDate=str.substring(0,str.search("{"))+str.substring(str.search("}>")+1,str.length);return strExcludeDate!==strExcludeDate.toLowerCase()})(snapshotName)&&validation.errors.snapshotName.push(i18n.translate("xpack.snapshotRestore.policyValidation.snapshotNameLowerCaseErrorMessage",{defaultMessage:"Snapshot name needs to be lowercase."})),validate_policy_isStringEmpty(schedule)&&validation.errors.schedule.push(i18n.translate("xpack.snapshotRestore.policyValidation.scheduleRequiredErrorMessage",{defaultMessage:"Schedule is required."})),(validate_policy_isStringEmpty(repository)||repositoryDoesNotExist)&&validation.errors.repository.push(i18n.translate("xpack.snapshotRestore.policyValidation.repositoryRequiredErrorMessage",{defaultMessage:"Repository is required."})),validateIndicesCount&&config&&"string"==typeof config.indices&&0===config.indices.trim().length&&validation.errors.indices.push(i18n.translate("xpack.snapshotRestore.policyValidation.indexPatternRequiredErrorMessage",{defaultMessage:"At least one index pattern is required."})),validateIndicesCount&&config&&Array.isArray(config.indices)&&0===config.indices.length&&validation.errors.indices.push(i18n.translate("xpack.snapshotRestore.policyValidation.indicesRequiredErrorMessage",{defaultMessage:"You must select at least one data stream or index."})),retention&&retention.minCount&&retention.maxCount&&retention.minCount>retention.maxCount&&validation.errors.minCount.push(i18n.translate("xpack.snapshotRestore.policyValidation.invalidMinCountErrorMessage",{defaultMessage:"Minimum count cannot be greater than maximum count."})),retention&&retention.expireAfterValue&&retention.expireAfterValue<0&&validation.errors.expireAfterValue.push(i18n.translate("xpack.snapshotRestore.policyValidation.invalidNegativeDeleteAfterErrorMessage",{defaultMessage:"Delete after cannot be negative."})),retention&&retention.minCount&&retention.minCount<0&&validation.errors.minCount.push(i18n.translate("xpack.snapshotRestore.policyValidation.invalidNegativeMinCountErrorMessage",{defaultMessage:"Minimum count cannot be negative."})),retention&&retention.maxCount&&retention.maxCount<0&&validation.errors.maxCount.push(i18n.translate("xpack.snapshotRestore.policyValidation.invalidNegativeMaxCountErrorMessage",{defaultMessage:"Maximum count cannot be negative."})),validation.errors=Object.entries(validation.errors).filter(([key,value])=>value.length>0).reduce((errs,[key,value])=>(errs[key]=value,errs),{}),Object.keys(validation.errors).length>0&&(validation.isValid=!1),validation})(newPolicy,validationHelperData);setPolicy(newPolicy),setValidation(newValidation)},isEditing:isEditing,currentUrl:currentUrl,errors:validation.errors,updateCurrentStep:updateCurrentStep}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),saveError?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,saveError,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"})):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,currentStep>1?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{iconType:"arrowLeft",onClick:()=>(()=>{const previousStep=currentStep-1;setCurrentStep(previousStep),setMaxCompletedStep(previousStep-1),clearSaveError()})(),disabled:!validation.isValid},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.backButtonLabel",defaultMessage:"Back"}))):null,currentStep<lastStep?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{fill:!0,iconType:"arrowRight",onClick:()=>(()=>{if(!validation.isValid)return;const nextStep=currentStep+1;setMaxCompletedStep(Math.max(currentStep,maxCompletedStep)),setCurrentStep(nextStep)})(),iconSide:"right",disabled:!validation.isValid,"data-test-subj":"nextButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.nextButtonLabel",defaultMessage:"Next"}))):null,currentStep===lastStep?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{fill:!isEditingManagedPolicy,color:isEditingManagedPolicy?"warning":"secondary",iconType:"check",onClick:()=>{validation.isValid&&onSave(policy)},isLoading:isSaving,"data-test-subj":"submitButton"},isSaving?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.savingButtonLabel",defaultMessage:"Saving…"}):isEditing?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.saveButtonLabel",defaultMessage:"Save policy"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.createButtonLabel",defaultMessage:"Create policy"}))):null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:()=>onCancel()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyForm.cancelButtonLabel",defaultMessage:"Cancel"}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}))},attemptToURIDecode=value=>{let result;try{result=decodeURI(value),result=decodeURIComponent(result)}catch(e1){try{result=decodeURIComponent(value)}catch(e2){result=value}}return result},useDecodedParams=()=>{const params=Object(external_kbnSharedDeps_ReactRouterDom_.useParams)(),decodedParams={};for(const[key,value]of Object.entries(params))value&&(decodedParams[key]=attemptToURIDecode(value));return decodedParams};__webpack_require__(33);const AzureDetails=({repository:repository})=>{const{settings:{client:client,container:container,basePath:basePath,compress:compress,chunkSize:chunkSize,readonly:readonly,locationMode:locationMode,maxRestoreBytesPerSec:maxRestoreBytesPerSec,maxSnapshotBytesPerSec:maxSnapshotBytesPerSec}}=repository,listItems=[];return void 0!==client&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeAzure.clientLabel",defaultMessage:"Client"}),description:client}),void 0!==container&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeAzure.containerLabel",defaultMessage:"Container"}),description:container}),void 0!==basePath&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeAzure.basePathLabel",defaultMessage:"Base path"}),description:basePath}),void 0!==compress&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeAzure.compressLabel",defaultMessage:"Snapshot compression"}),description:String(compress)}),void 0!==chunkSize&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeAzure.chunkSizeLabel",defaultMessage:"Chunk size"}),description:String(chunkSize)}),void 0!==maxSnapshotBytesPerSec&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeAzure.maxSnapshotBytesLabel",defaultMessage:"Max snapshot bytes per second"}),description:maxSnapshotBytesPerSec}),void 0!==maxRestoreBytesPerSec&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeAzure.maxRestoreBytesLabel",defaultMessage:"Max restore bytes per second"}),description:maxRestoreBytesPerSec}),void 0!==readonly&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeAzure.readonlyLabel",defaultMessage:"Read-only"}),description:String(readonly)}),void 0!==locationMode&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeAzure.locationModeLabel",defaultMessage:"Location mode"}),description:locationMode}),listItems.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.settingsTitle",defaultMessage:"Settings"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse",listItems:listItems})):null},DefaultDetails=({repository:{name:name,settings:settings}})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.settingsTitle",defaultMessage:"Settings"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCodeEditor,{mode:"json",theme:"textmate",width:"100%",isReadOnly:!0,value:JSON.stringify(settings,null,2),setOptions:{showLineNumbers:!1,tabSize:2,maxLines:1/0},editorProps:{$blockScrolling:1/0},showGutter:!1,minLines:6,"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.snapshotRestore.repositoryDetails.genericSettingsDescription",{defaultMessage:"Readonly settings for repository '{name}'",values:{name:name}})})),FSDetails=({repository:repository})=>{const{settings:{location:location,compress:compress,chunkSize:chunkSize,maxRestoreBytesPerSec:maxRestoreBytesPerSec,maxSnapshotBytesPerSec:maxSnapshotBytesPerSec,readonly:readonly}}=repository,listItems=[{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeFS.locationLabel",defaultMessage:"Location"}),description:location}];return void 0!==compress&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeFS.compressLabel",defaultMessage:"Snapshot compression"}),description:String(compress)}),void 0!==chunkSize&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeFS.chunkSizeLabel",defaultMessage:"Chunk size"}),description:String(chunkSize)}),void 0!==maxSnapshotBytesPerSec&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeFS.maxSnapshotBytesLabel",defaultMessage:"Max snapshot bytes per second"}),description:maxSnapshotBytesPerSec}),void 0!==maxRestoreBytesPerSec&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeFS.maxRestoreBytesLabel",defaultMessage:"Max restore bytes per second"}),description:maxRestoreBytesPerSec}),void 0!==readonly&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeFS.readonlyLabel",defaultMessage:"Read-only"}),description:String(readonly)}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.settingsTitle",defaultMessage:"Settings"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse",listItems:listItems}))},GCSDetails=({repository:repository})=>{const{settings:{bucket:bucket,client:client,basePath:basePath,compress:compress,chunkSize:chunkSize,readonly:readonly,maxRestoreBytesPerSec:maxRestoreBytesPerSec,maxSnapshotBytesPerSec:maxSnapshotBytesPerSec}}=repository,listItems=[{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeGCS.bucketLabel",defaultMessage:"Bucket"}),description:bucket||""}];return void 0!==client&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeGCS.clientLabel",defaultMessage:"Client"}),description:client}),void 0!==basePath&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeGCS.basePathLabel",defaultMessage:"Base path"}),description:basePath}),void 0!==compress&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeGCS.compressLabel",defaultMessage:"Snapshot compression"}),description:String(compress)}),void 0!==chunkSize&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeGCS.chunkSizeLabel",defaultMessage:"Chunk size"}),description:String(chunkSize)}),void 0!==maxSnapshotBytesPerSec&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeGCS.maxSnapshotBytesLabel",defaultMessage:"Max snapshot bytes per second"}),description:maxSnapshotBytesPerSec}),void 0!==maxRestoreBytesPerSec&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeGCS.maxRestoreBytesLabel",defaultMessage:"Max restore bytes per second"}),description:maxRestoreBytesPerSec}),void 0!==readonly&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeGCS.readonlyLabel",defaultMessage:"Read-only"}),description:String(readonly)}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.settingsTitle",defaultMessage:"Settings"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse",listItems:listItems}))},HDFSDetails=({repository:repository})=>{const{settings:settings}=repository,{uri:uri,path:path,loadDefaults:loadDefaults,compress:compress,chunkSize:chunkSize,readonly:readonly,maxSnapshotBytesPerSec:maxSnapshotBytesPerSec,maxRestoreBytesPerSec:maxRestoreBytesPerSec,"security.principal":securityPrincipal,...rest}=settings,listItems=[{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeHDFS.uriLabel",defaultMessage:"URI"}),description:uri||""},{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeHDFS.pathLabel",defaultMessage:"Path"}),description:path||""}];return void 0!==loadDefaults&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeHDFS.loadDefaultsLabel",defaultMessage:"Load defaults"}),description:String(loadDefaults)}),void 0!==compress&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeHDFS.compressLabel",defaultMessage:"Snapshot compression"}),description:String(compress)}),void 0!==chunkSize&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeHDFS.chunkSizeLabel",defaultMessage:"Chunk size"}),description:String(chunkSize)}),void 0!==maxSnapshotBytesPerSec&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeHDFS.maxSnapshotBytesLabel",defaultMessage:"Max snapshot bytes per second"}),description:maxSnapshotBytesPerSec}),void 0!==maxRestoreBytesPerSec&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeHDFS.maxRestoreBytesLabel",defaultMessage:"Max restore bytes per second"}),description:maxRestoreBytesPerSec}),void 0!==readonly&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeHDFS.readonlyLabel",defaultMessage:"Read-only"}),description:String(readonly)}),void 0!==securityPrincipal&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeHDFS.securityPrincipalLabel",defaultMessage:"Security principal"}),description:securityPrincipal}),Object.keys(rest).forEach(key=>{listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,key),description:String(settings[key])})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.settingsTitle",defaultMessage:"Settings"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse",listItems:listItems}))},ReadonlyDetails=({repository:repository})=>{const{settings:{url:url}}=repository,listItems=[{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeReadonly.urlLabel",defaultMessage:"URL"}),description:url}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.settingsTitle",defaultMessage:"Settings"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse",listItems:listItems}))},S3Details=({repository:repository})=>{const{settings:{bucket:bucket,client:client,basePath:basePath,compress:compress,chunkSize:chunkSize,serverSideEncryption:serverSideEncryption,bufferSize:bufferSize,cannedAcl:cannedAcl,storageClass:storageClass,readonly:readonly,maxRestoreBytesPerSec:maxRestoreBytesPerSec,maxSnapshotBytesPerSec:maxSnapshotBytesPerSec}}=repository,listItems=[{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeS3.bucketLabel",defaultMessage:"Bucket"}),description:bucket||""}];return void 0!==client&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeS3.clientLabel",defaultMessage:"Client"}),description:client}),void 0!==basePath&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeS3.basePathLabel",defaultMessage:"Base path"}),description:basePath}),void 0!==compress&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeS3.compressLabel",defaultMessage:"Snapshot compression"}),description:String(compress)}),void 0!==chunkSize&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeS3.chunkSizeLabel",defaultMessage:"Chunk size"}),description:String(chunkSize)}),void 0!==serverSideEncryption&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeS3.serverSideEncryptionLabel",defaultMessage:"Server-side encryption"}),description:String(serverSideEncryption)}),void 0!==bufferSize&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeS3.bufferSizeLabel",defaultMessage:"Buffer size"}),description:bufferSize}),void 0!==cannedAcl&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeS3.cannedAclLabel",defaultMessage:"Canned ACL"}),description:cannedAcl}),void 0!==storageClass&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeS3.storageClassLabel",defaultMessage:"Storage class"}),description:storageClass}),void 0!==maxSnapshotBytesPerSec&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeS3.maxSnapshotBytesLabel",defaultMessage:"Max snapshot bytes per second"}),description:maxSnapshotBytesPerSec}),void 0!==maxRestoreBytesPerSec&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeS3.maxRestoreBytesLabel",defaultMessage:"Max restore bytes per second"}),description:maxRestoreBytesPerSec}),void 0!==readonly&&listItems.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeS3.readonlyLabel",defaultMessage:"Read-only"}),description:String(readonly)}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.settingsTitle",defaultMessage:"Settings"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse",listItems:listItems}))},TypeDetails=({repository:repository})=>{const{type:type,settings:settings}=repository;switch(type){case constants.f.fs:return external_kbnSharedDeps_React_default.a.createElement(FSDetails,{repository:repository});case constants.f.url:return external_kbnSharedDeps_React_default.a.createElement(ReadonlyDetails,{repository:repository});case constants.f.source:const{delegateType:delegateType}=settings,delegatedRepository={...repository,type:delegateType};return external_kbnSharedDeps_React_default.a.createElement(TypeDetails,{repository:delegatedRepository});case constants.f.azure:return external_kbnSharedDeps_React_default.a.createElement(AzureDetails,{repository:repository});case constants.f.gcs:return external_kbnSharedDeps_React_default.a.createElement(GCSDetails,{repository:repository});case constants.f.hdfs:return external_kbnSharedDeps_React_default.a.createElement(HDFSDetails,{repository:repository});case constants.f.s3:return external_kbnSharedDeps_React_default.a.createElement(S3Details,{repository:repository});default:return external_kbnSharedDeps_React_default.a.createElement(DefaultDetails,{repository:repository})}};function repository_details_extends(){return(repository_details_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const RepositoryDetails=({repositoryName:repositoryName,onClose:onClose,onRepositoryDeleted:onRepositoryDeleted})=>{const{i18n:i18n,history:history}=useServices(),{docLinks:docLinks}=useCore(),{error:error,data:repositoryDetails}=Object(services_http.s)(repositoryName),[verification,setVerification]=Object(external_kbnSharedDeps_React_.useState)(void 0),[cleanup,setCleanup]=Object(external_kbnSharedDeps_React_.useState)(void 0),[isLoadingVerification,setIsLoadingVerification]=Object(external_kbnSharedDeps_React_.useState)(!1),[isLoadingCleanup,setIsLoadingCleanup]=Object(external_kbnSharedDeps_React_.useState)(!1),verifyRepository=async()=>{setIsLoadingVerification(!0);const{data:data}=await Object(services_http.y)(repositoryName);setVerification(data.verification),setIsLoadingVerification(!1)},cleanupRepository=async()=>{setIsLoadingCleanup(!0);const{data:data}=await Object(services_http.c)(repositoryName);setCleanup(data.cleanup),setIsLoadingCleanup(!1)};Object(external_kbnSharedDeps_React_.useEffect)(()=>{setVerification(void 0),setIsLoadingVerification(!1),setCleanup(void 0),setIsLoadingCleanup(!1)},[repositoryName]);const renderLoading=()=>external_kbnSharedDeps_React_default.a.createElement(SectionLoading,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.loadingRepositoryDescription",defaultMessage:"Loading repository…"})),renderError=()=>{const errorObject=404===error.status?{data:{error:i18n.translate("xpack.snapshotRestore.repositoryDetails.repositoryNotFoundErrorMessage",{defaultMessage:"The repository '{name}' does not exist.",values:{name:repositoryName}})}}:error;return external_kbnSharedDeps_React_default.a.createElement(shared_imports.d,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.loadingRepositoryErrorTitle",defaultMessage:"Error loading repository"}),error:errorObject})},renderRepository=()=>{const{repository:repository,isManagedRepository:isManagedRepository}=repositoryDetails;if(!repository)return null;const{type:type}=repository;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,isManagedRepository?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{size:"s",color:"warning",iconType:"iInCircle",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.managedRepositoryWarningTitle",defaultMessage:"This is a managed repository used by other systems. Any changes you make might affect how these systems operate."})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"})):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexStart"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.typeTitle",defaultMessage:"Repository type"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement("span",{"data-test-subj":"repositoryType"},type===constants.f.source?services_text.a.getRepositoryTypeName(type,repository.settings.delegateType):services_text.a.getRepositoryTypeName(type))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"s",flush:"right",href:getRepositoryTypeDocUrl(docLinks,type),target:"_blank",iconType:"help","data-test-subj":"documentationLink"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.repositoryTypeDocLink",defaultMessage:"Repository docs"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.snapshotsTitle",defaultMessage:"Snapshots"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement("span",{"data-test-subj":"snapshotCount"},(()=>{const{snapshots:snapshots}=repositoryDetails;return Number.isInteger(snapshots.count)?0===snapshots.count?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.zeroSnapshotsDescription",defaultMessage:"Repository has no snapshots"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,Object(public_.reactRouterNavigate)(history,linkToSnapshots(repositoryName)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.snapshotsDescription",defaultMessage:"{count} {count, plural, one {snapshot} other {snapshots}} found",values:{count:snapshots.count}})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.noSnapshotInformationDescription",defaultMessage:"No snapshot information"})})()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(TypeDetails,{repository:repository}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHorizontalRule,null),renderVerification(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHorizontalRule,null),renderCleanup())},renderVerification=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.verificationTitle",defaultMessage:"Verification status"}))),verification?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(RepositoryVerificationBadge,{verificationResults:verification}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.verificationDetailsTitle",defaultMessage:"Details"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),verification?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCodeBlock,{language:"json","data-test-subj":"verificationCodeBlock"},JSON.stringify(verification.valid?verification.response:verification.error,null,2)):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{onClick:verifyRepository,color:"primary",isLoading:isLoadingVerification},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.verifyButtonLabel",defaultMessage:"Verify repository"}))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{onClick:verifyRepository,color:"primary",isLoading:isLoadingVerification,"data-test-subj":"verifyRepositoryButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.verifyButtonLabel",defaultMessage:"Verify repository"})))),renderCleanup=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.cleanupTitle",defaultMessage:"Repository cleanup"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.cleanupRepositoryMessage",defaultMessage:"You can clean up a repository to delete any unreferenced data from a snapshot. This may provide storage space savings. Note: If you regularly delete snapshots, this functionality will likely not be as beneficial and should be used less frequently."}))),cleanup?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),cleanup.cleaned?external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.cleanupDetailsTitle",defaultMessage:"Details"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCodeBlock,{language:"json","data-test-subj":"cleanupCodeBlock"},JSON.stringify(cleanup.response,null,2))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{color:"danger",iconType:"alert",title:i18n.translate("xpack.snapshotRestore.repositoryDetails.cleanupErrorTitle",{defaultMessage:"Sorry, there was an error cleaning the repository."})},external_kbnSharedDeps_React_default.a.createElement("p",null,cleanup.error?JSON.stringify(cleanup.error):i18n.translate("xpack.snapshotRestore.repositoryDetails.cleanupUnknownError",{defaultMessage:"503: Unknown error"})))):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{onClick:cleanupRepository,color:"primary",isLoading:isLoadingCleanup,"data-test-subj":"cleanupRepositoryButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.cleanupButtonLabel",defaultMessage:"Clean up repository"})));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyout,{onClose:onClose,"data-test-subj":"repositoryDetail","aria-labelledby":"srRepositoryDetailsFlyoutTitle",size:"m",maxWidth:550},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",{id:"srRepositoryDetailsFlyoutTitle","data-test-subj":"title"},repositoryName))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutBody,{"data-test-subj":"content"},repositoryDetails?renderRepository():error?renderError():renderLoading()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutFooter,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{iconType:"cross",flush:"left",onClick:onClose,"data-test-subj":"srRepositoryDetailsFlyoutCloseButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.closeButtonLabel",defaultMessage:"Close"}))),repositoryDetails?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(RepositoryDeleteProvider,null,deleteRepositoryPrompt=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{color:"danger","data-test-subj":"srRepositoryDetailsDeleteActionButton",onClick:()=>deleteRepositoryPrompt([repositoryName],onRepositoryDeleted),isDisabled:repositoryDetails.isManagedRepository,title:repositoryDetails.isManagedRepository?i18n.translate("xpack.snapshotRestore.repositoryDetails.removeManagedRepositoryButtonTitle",{defaultMessage:"You cannot delete a managed repository."}):void 0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.removeButtonLabel",defaultMessage:"Remove"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,repository_details_extends({},Object(public_.reactRouterNavigate)(history,linkToEditRepository(repositoryName)),{fill:!0,color:"primary"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryDetails.editButtonLabel",defaultMessage:"Edit"}))))):null)))};function repository_table_extends(){return(repository_table_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const RepositoryTable=({repositories:repositories,managedRepository:managedRepository,reload:reload,openRepositoryDetailsUrl:openRepositoryDetailsUrl,onRepositoryDeleted:onRepositoryDeleted})=>{const{i18n:i18n,uiMetricService:uiMetricService,history:history}=useServices(),[selectedItems,setSelectedItems]=Object(external_kbnSharedDeps_React_.useState)([]),columns=[{field:"name",name:i18n.translate("xpack.snapshotRestore.repositoryList.table.nameColumnTitle",{defaultMessage:"Name"}),truncateText:!0,sortable:!0,render:name=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,repository_table_extends({},Object(public_.reactRouterNavigate)(history,openRepositoryDetailsUrl(name),()=>uiMetricService.trackUiMetric(application_constants.y)),{"data-test-subj":"repositoryLink"}),name),"  ",managedRepository===name?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIconTip,{content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryList.table.managedRepositoryBadgeLabel",defaultMessage:"This is a managed repository"}),position:"right"}):null)},{field:"type",name:i18n.translate("xpack.snapshotRestore.repositoryList.table.typeColumnTitle",{defaultMessage:"Type"}),truncateText:!0,sortable:!0,render:(type,repository)=>type===constants.f.source?services_text.a.getRepositoryTypeName(type,repository.settings.delegateType):services_text.a.getRepositoryTypeName(type)},{field:"actions",name:i18n.translate("xpack.snapshotRestore.repositoryList.table.actionsColumnTitle",{defaultMessage:"Actions"}),actions:[{render:({name:name})=>{const label=i18n.translate("xpack.snapshotRestore.repositoryList.table.actionEditTooltip",{defaultMessage:"Edit"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:label},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,repository_table_extends({"aria-label":i18n.translate("xpack.snapshotRestore.repositoryList.table.actionEditAriaLabel",{defaultMessage:"Edit repository `{name}`",values:{name:name}}),iconType:"pencil",color:"primary"},Object(public_.reactRouterNavigate)(history,linkToEditRepository(name)),{"data-test-subj":"editRepositoryButton"})))}},{render:({name:name})=>external_kbnSharedDeps_React_default.a.createElement(RepositoryDeleteProvider,null,deleteRepositoryPrompt=>{const label=name!==managedRepository?i18n.translate("xpack.snapshotRestore.repositoryList.table.actionRemoveTooltip",{defaultMessage:"Remove"}):i18n.translate("xpack.snapshotRestore.repositoryList.table.deleteManagedRepositoryTooltip",{defaultMessage:"You cannot delete a managed repository."});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:label},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{"aria-label":i18n.translate("xpack.snapshotRestore.repositoryList.table.actionRemoveAriaLabel",{defaultMessage:"Remove repository `{name}`",values:{name:name}}),iconType:"trash",color:"danger","data-test-subj":"deleteRepositoryButton",onClick:()=>deleteRepositoryPrompt([name],onRepositoryDeleted),isDisabled:Boolean(name===managedRepository)}))})}],width:"100px"}],selection={onSelectionChange:newSelectedItems=>setSelectedItems(newSelectedItems),selectable:({name:name})=>Boolean(name!==managedRepository),selectableMessage:selectable=>selectable?"":i18n.translate("xpack.snapshotRestore.repositoryList.table.deleteManagedRepositoryTooltip",{defaultMessage:"You cannot delete a managed repository."})},search={toolsLeft:selectedItems.length?external_kbnSharedDeps_React_default.a.createElement(RepositoryDeleteProvider,null,deleteRepositoryPrompt=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{onClick:()=>deleteRepositoryPrompt(selectedItems.map(repository=>repository.name),onRepositoryDeleted),color:"danger","data-test-subj":"srRepositoryListBulkDeleteActionButton"},1===selectedItems.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryList.table.deleteSingleRepositoryButton",defaultMessage:"Remove repository"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryList.table.deleteMultipleRepositoriesButton",defaultMessage:"Remove repositories"}))):void 0,toolsRight:[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{key:"reloadButton",color:"secondary",iconType:"refresh",onClick:reload,"data-test-subj":"reloadButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryList.table.reloadRepositoriesButton",defaultMessage:"Reload"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,repository_table_extends({key:"registerRepo"},Object(public_.reactRouterNavigate)(history,linkToAddRepository(name)),{fill:!0,iconType:"plusInCircle","data-test-subj":"registerRepositoryButton"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryList.addRepositoryButtonLabel",defaultMessage:"Register repository"}))],box:{incremental:!0,schema:!0},filters:[{type:"field_value_selection",field:"type",name:i18n.translate("xpack.snapshotRestore.repositoryList.table.typeFilterLabel",{defaultMessage:"Type"}),multiSelect:!1,options:Object.keys(repositories.reduce((typeMap,repository)=>(typeMap[repository.type]=!0,typeMap),{})).map(type=>({value:type,view:services_text.a.getRepositoryTypeName(type)}))}]};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiInMemoryTable,{items:repositories,itemId:"name",columns:columns,search:search,sorting:{sort:{field:"name",direction:"asc"}},selection:selection,pagination:{initialPageSize:20,pageSizeOptions:[10,20,50]},isSelectable:!0,rowProps:()=>({"data-test-subj":"row"}),cellProps:(item,field)=>({"data-test-subj":field.name+"_cell"}),"data-test-subj":"repositoryTable"})};function repository_list_extends(){return(repository_list_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const RepositoryList=({history:history})=>{const{repositoryName:repositoryName}=useDecodedParams(),{error:error,isLoading:isLoading,data:{repositories:repositories,managedRepository:managedRepository}={repositories:void 0,managedRepository:{name:void 0}},resendRequest:reload}=Object(services_http.r)(),{uiMetricService:uiMetricService}=useServices(),openRepositoryDetailsUrl=newRepositoryName=>linkToRepository(newRepositoryName),closeRepositoryDetails=()=>{history.push(application_constants.a+"/repositories")},onRepositoryDeleted=repositoriesDeleted=>{repositoryName&&repositoriesDeleted.includes(repositoryName)&&closeRepositoryDetails(),repositoriesDeleted.length&&reload()};let content;return Object(external_kbnSharedDeps_React_.useEffect)(()=>{uiMetricService.trackUiMetric(application_constants.x)},[uiMetricService]),content=isLoading?external_kbnSharedDeps_React_default.a.createElement(SectionLoading,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryList.loadingRepositoriesDescription",defaultMessage:"Loading repositories…"})):error?external_kbnSharedDeps_React_default.a.createElement(shared_imports.d,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryList.LoadingRepositoriesErrorMessage",defaultMessage:"Error loading repositories"}),error:error}):repositories&&0===repositories.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"managementApp",title:external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryList.emptyPromptTitle",defaultMessage:"Register your first repository"})),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryList.emptyPromptDescription",defaultMessage:"Create a place where your snapshots will live."}))),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,repository_list_extends({},Object(public_.reactRouterNavigate)(history,linkToAddRepository()),{fill:!0,iconType:"plusInCircle","data-test-subj":"registerRepositoryButton"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.addRepositoryButtonLabel",defaultMessage:"Register a repository"})),"data-test-subj":"emptyPrompt"}):external_kbnSharedDeps_React_default.a.createElement(RepositoryTable,{repositories:repositories||[],managedRepository:null==managedRepository?void 0:managedRepository.name,reload:reload,openRepositoryDetailsUrl:openRepositoryDetailsUrl,onRepositoryDeleted:onRepositoryDeleted}),external_kbnSharedDeps_React_default.a.createElement("section",{"data-test-subj":"repositoryList"},repositoryName?external_kbnSharedDeps_React_default.a.createElement(RepositoryDetails,{repositoryName:repositoryName,onClose:closeRepositoryDetails,onRepositoryDeleted:onRepositoryDeleted}):null,content)};var query_string=__webpack_require__(34);const SnapshotState=({state:state})=>{const{i18n:i18n}=useServices(),stateMap={[application_constants.h.IN_PROGRESS]:{icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"m"}),label:i18n.translate("xpack.snapshotRestore.snapshotState.inProgressLabel",{defaultMessage:"Taking snapshot…"})},[application_constants.h.SUCCESS]:{icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{color:"success",type:"check"}),label:i18n.translate("xpack.snapshotRestore.snapshotState.completeLabel",{defaultMessage:"Snapshot complete"})},[application_constants.h.FAILED]:{icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{color:"danger",type:"cross"}),label:i18n.translate("xpack.snapshotRestore.snapshotState.failedLabel",{defaultMessage:"Snapshot failed"})},[application_constants.h.PARTIAL]:{icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{color:"warning",type:"alert"}),label:i18n.translate("xpack.snapshotRestore.snapshotState.partialLabel",{defaultMessage:"Partial failure"}),tip:i18n.translate("xpack.snapshotRestore.snapshotState.partialTipDescription",{defaultMessage:"Global cluster state was stored, but at least one shard wasn't stored successfully. See the 'Failed indices' tab."})},[application_constants.h.INCOMPATIBLE]:{icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{color:"warning",type:"alert"}),label:i18n.translate("xpack.snapshotRestore.snapshotState.incompatibleLabel",{defaultMessage:"Incompatible version"}),tip:i18n.translate("xpack.snapshotRestore.snapshotState.incompatibleTipDescription",{defaultMessage:"Snapshot was created with a version of Elasticsearch incompatible with the cluster's version."})}};if(!stateMap[state])return state;const{icon:icon,label:label,tip:tip}=stateMap[state],iconTip=tip&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIconTip,{content:tip}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"xs",alignItems:"center",responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},icon),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement("div",null,label,iconTip)))},TabSummary=({snapshotDetails:snapshotDetails})=>{const{versionId:versionId,version:version,includeGlobalState:includeGlobalState,dataStreams:dataStreams,indices:indices,state:state,startTimeInMillis:startTimeInMillis,endTimeInMillis:endTimeInMillis,durationInMillis:durationInMillis,uuid:uuid,policyName:policyName}=snapshotDetails,{history:history}=useServices();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"version"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.itemVersionLabel",defaultMessage:"Version / Version ID"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},version," / ",versionId)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"uuid"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.itemUuidLabel",defaultMessage:"UUID"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},uuid))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"state"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.itemStateLabel",defaultMessage:"State"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},external_kbnSharedDeps_React_default.a.createElement(SnapshotState,{state:state}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"includeGlobalState"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.itemIncludeGlobalStateLabel",defaultMessage:"Includes global state"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},includeGlobalState?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.itemIncludeGlobalStateYesLabel",defaultMessage:"Yes"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.itemIncludeGlobalStateNoLabel",defaultMessage:"No"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"indices"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.itemIndicesLabel",defaultMessage:"Indices ({indicesCount})",values:{indicesCount:indices.length}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},external_kbnSharedDeps_React_default.a.createElement(CollapsibleIndicesList,{indices:indices})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"dataStreams"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.itemDataStreamsLabel",defaultMessage:"Data streams ({dataStreamsCount})",values:{dataStreamsCount:dataStreams.length}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},external_kbnSharedDeps_React_default.a.createElement(CollapsibleDataStreamsList,{dataStreams:dataStreams})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"startTime"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.itemStartTimeLabel",defaultMessage:"Start time"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},external_kbnSharedDeps_React_default.a.createElement(DataPlaceholder,{data:startTimeInMillis},external_kbnSharedDeps_React_default.a.createElement(FormattedDateTime,{epochMs:startTimeInMillis})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"endTime"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.itemEndTimeLabel",defaultMessage:"End time"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},state===application_constants.h.IN_PROGRESS?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"m"}):external_kbnSharedDeps_React_default.a.createElement(DataPlaceholder,{data:endTimeInMillis},external_kbnSharedDeps_React_default.a.createElement(FormattedDateTime,{epochMs:endTimeInMillis}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"duration"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.itemDurationLabel",defaultMessage:"Duration"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},state===application_constants.h.IN_PROGRESS?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"m"}):external_kbnSharedDeps_React_default.a.createElement(DataPlaceholder,{data:durationInMillis},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.itemDurationValueLabel","data-test-subj":"srSnapshotDetailsDurationValue",defaultMessage:"{seconds} {seconds, plural, one {second} other {seconds}}",values:{seconds:Math.ceil(durationInMillis/1e3)}})))),policyName?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"policy"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.createdByLabel",defaultMessage:"Created by"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,Object(public_.reactRouterNavigate)(history,linkToPolicy(policyName)),policyName))):null))},TabFailures=({indexFailures:indexFailures,snapshotState:snapshotState})=>indexFailures.length?indexFailures.map((indexObject,count)=>{const{index:index,failures:failures}=indexObject;return external_kbnSharedDeps_React_default.a.createElement("div",{key:index,"data-test-subj":"indexFailure"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs","data-test-subj":"index"},external_kbnSharedDeps_React_default.a.createElement("h3",null,index)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),failures.map((failure,failuresCount)=>{const{status:status,reason:reason,shard_id:shardId}=failure;return external_kbnSharedDeps_React_default.a.createElement("div",{key:`${shardId}${reason}`,"data-test-subj":"failure"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs","data-test-subj":"shard"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.failureShardTitle",defaultMessage:"Shard {shardId}",values:{shardId:shardId}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCodeBlock,{paddingSize:"s","data-test-subj":"reason",language:"text"},`${status}: ${reason}`),failuresCount<failures.length-1?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}):void 0)}),count<indexFailures.length-1?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}):void 0)}):snapshotState===application_constants.h.IN_PROGRESS?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.snapshotIsBeingCreatedMessage",defaultMessage:"Snapshot is being created."}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.noIndexFailuresMessage",defaultMessage:"All indices were stored successfully."});function snapshot_details_extends(){return(snapshot_details_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const panelTypeToUiMetricMap={summary:application_constants.I,failures:application_constants.H},SnapshotDetails=({repositoryName:repositoryName,snapshotId:snapshotId,onClose:onClose,onSnapshotDeleted:onSnapshotDeleted})=>{const{i18n:i18n,uiMetricService:uiMetricService,history:history}=useServices(),{error:error,data:snapshotDetails}=Object(services_http.w)(repositoryName,snapshotId),[activeTab,setActiveTab]=Object(external_kbnSharedDeps_React_.useState)("summary");let tabs,content;if(Object(external_kbnSharedDeps_React_.useEffect)(()=>{setActiveTab("summary")},[repositoryName,snapshotId]),snapshotDetails){const{indexFailures:indexFailures,state:snapshotState}=snapshotDetails,tabOptions=[{id:"summary",name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.summaryTabTitle",defaultMessage:"Summary"})},{id:"failures",name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.failuresTabTitle",defaultMessage:"Failed indices ({failuresCount})",values:{failuresCount:indexFailures.length}})}];tabs=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTabs,null,tabOptions.map(tab=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTab,{onClick:()=>{uiMetricService.trackUiMetric(panelTypeToUiMetricMap[tab.id]),setActiveTab(tab.id)},isSelected:tab.id===activeTab,key:tab.id,"data-test-subj":"tab"},tab.name)))),"summary"===activeTab?content=external_kbnSharedDeps_React_default.a.createElement(TabSummary,{snapshotDetails:snapshotDetails}):"failures"===activeTab&&(content=external_kbnSharedDeps_React_default.a.createElement(TabFailures,{snapshotState:snapshotState,indexFailures:indexFailures}))}else if(error){const errorObject=404===error.status?{data:{error:i18n.translate("xpack.snapshotRestore.snapshotDetails.errorSnapshotNotFound",{defaultMessage:"Either the snapshot '{snapshotId}' doesn't exist in the repository '{repositoryName}' or the repository doesn't exist.",values:{snapshotId:snapshotId,repositoryName:repositoryName}})}}:error;content=external_kbnSharedDeps_React_default.a.createElement(shared_imports.d,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.errorLoadingRepositoryTitle",defaultMessage:"Error loading repository"}),error:errorObject})}else content=external_kbnSharedDeps_React_default.a.createElement(SectionLoading,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.loadingSnapshotDescription",defaultMessage:"Loading snapshot…"}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyout,{onClose:onClose,"data-test-subj":"snapshotDetail","aria-labelledby":"srSnapshotDetailsFlyoutTitle",size:"m",maxWidth:550},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("h2",{id:"srSnapshotDetailsFlyoutTitle","data-test-subj":"detailTitle"},snapshotId),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement("small",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,snapshot_details_extends({},Object(public_.reactRouterNavigate)(history,linkToRepository(repositoryName)),{"data-test-subj":"repositoryLink"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.repositoryTitle",defaultMessage:"'{repositoryName}' repository",values:{repositoryName:repositoryName}}))))),tabs),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutBody,{"data-test-subj":"content"},content),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutFooter,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{iconType:"cross",flush:"left",onClick:onClose,"data-test-subj":"closeButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.closeButtonLabel",defaultMessage:"Close"}))),snapshotDetails?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(SnapshotDeleteProvider,null,deleteSnapshotPrompt=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{color:"danger","data-test-subj":"srSnapshotDetailsDeleteActionButton",onClick:()=>deleteSnapshotPrompt([{repository:repositoryName,snapshot:snapshotId}],onSnapshotDeleted),isDisabled:snapshotDetails.managedRepository&&snapshotDetails.isLastSuccessfulSnapshot,title:snapshotDetails.managedRepository&&snapshotDetails.isLastSuccessfulSnapshot?i18n.translate("xpack.snapshotRestore.snapshotDetails.deleteManagedRepositorySnapshotButtonTitle",{defaultMessage:"You cannot delete the last successful snapshot stored in a managed repository."}):void 0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.deleteButtonLabel",defaultMessage:"Delete"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,snapshot_details_extends({},Object(public_.reactRouterNavigate)(history,linkToRestoreSnapshot(repositoryName,snapshotId)),{fill:!0,color:"primary",isDisabled:snapshotDetails.state!==application_constants.h.SUCCESS&&snapshotDetails.state!==application_constants.h.PARTIAL}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotDetails.restoreButtonLabel",defaultMessage:"Restore"}))))):null)))};function snapshot_table_extends(){return(snapshot_table_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const SnapshotTable=({snapshots:snapshots,repositories:repositories,reload:reload,openSnapshotDetailsUrl:openSnapshotDetailsUrl,onSnapshotDeleted:onSnapshotDeleted,repositoryFilter:repositoryFilter,policyFilter:policyFilter})=>{const{i18n:i18n,uiMetricService:uiMetricService,history:history}=useServices(),[selectedItems,setSelectedItems]=Object(external_kbnSharedDeps_React_.useState)([]),lastSuccessfulManagedSnapshot=(snapshots=>snapshots.filter(({state:state,repository:repository,managedRepository:managedRepository})=>repository===managedRepository&&"SUCCESS"===state).sort((a,b)=>+new Date(b.endTime)-+new Date(a.endTime))[0])(snapshots),columns=[{field:"snapshot",name:i18n.translate("xpack.snapshotRestore.snapshotList.table.snapshotColumnTitle",{defaultMessage:"Snapshot"}),truncateText:!0,sortable:!0,render:(snapshotId,snapshot)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,snapshot_table_extends({},Object(public_.reactRouterNavigate)(history,openSnapshotDetailsUrl(snapshot.repository,snapshotId),()=>uiMetricService.trackUiMetric(application_constants.K)),{"data-test-subj":"snapshotLink"}),snapshotId)},{field:"repository",name:i18n.translate("xpack.snapshotRestore.snapshotList.table.repositoryColumnTitle",{defaultMessage:"Repository"}),truncateText:!0,sortable:!0,render:repositoryName=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,snapshot_table_extends({},Object(public_.reactRouterNavigate)(history,linkToRepository(repositoryName)),{"data-test-subj":"repositoryLink"}),repositoryName)},{field:"indices",name:i18n.translate("xpack.snapshotRestore.snapshotList.table.indicesColumnTitle",{defaultMessage:"Indices"}),truncateText:!0,sortable:!0,width:"100px",render:indices=>indices.length},{field:"shards.total",name:i18n.translate("xpack.snapshotRestore.snapshotList.table.shardsColumnTitle",{defaultMessage:"Shards"}),truncateText:!0,sortable:!0,width:"100px",render:totalShards=>totalShards},{field:"shards.failed",name:i18n.translate("xpack.snapshotRestore.snapshotList.table.failedShardsColumnTitle",{defaultMessage:"Failed shards"}),truncateText:!0,sortable:!0,width:"100px",render:failedShards=>failedShards},{field:"startTimeInMillis",name:i18n.translate("xpack.snapshotRestore.snapshotList.table.startTimeColumnTitle",{defaultMessage:"Date created"}),truncateText:!0,sortable:!0,render:startTimeInMillis=>external_kbnSharedDeps_React_default.a.createElement(DataPlaceholder,{data:startTimeInMillis},external_kbnSharedDeps_React_default.a.createElement(FormattedDateTime,{epochMs:startTimeInMillis}))},{field:"durationInMillis",name:i18n.translate("xpack.snapshotRestore.snapshotList.table.durationColumnTitle",{defaultMessage:"Duration"}),truncateText:!0,sortable:!0,width:"100px",render:(durationInMillis,{state:state})=>state===application_constants.h.IN_PROGRESS?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"m"}):external_kbnSharedDeps_React_default.a.createElement(DataPlaceholder,{data:durationInMillis},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotList.table.durationColumnValueLabel",defaultMessage:"{seconds}s",values:{seconds:Math.ceil(durationInMillis/1e3)}}))},{name:i18n.translate("xpack.snapshotRestore.snapshotList.table.actionsColumnTitle",{defaultMessage:"Actions"}),actions:[{render:({snapshot:snapshot,repository:repository,state:state})=>{const canRestore=state===application_constants.h.SUCCESS||state===application_constants.h.PARTIAL,label=canRestore?i18n.translate("xpack.snapshotRestore.snapshotList.table.actionRestoreTooltip",{defaultMessage:"Restore"}):state===application_constants.h.IN_PROGRESS?i18n.translate("xpack.snapshotRestore.snapshotList.table.actionRestoreDisabledInProgressTooltip",{defaultMessage:"Can't restore in-progress snapshot"}):i18n.translate("xpack.snapshotRestore.snapshotList.table.actionRestoreDisabledInvalidTooltip",{defaultMessage:"Can't restore invalid snapshot"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:label},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,snapshot_table_extends({"aria-label":i18n.translate("xpack.snapshotRestore.snapshotList.table.actionRestoreAriaLabel",{defaultMessage:"Store snapshot `{name}`",values:{name:snapshot}}),iconType:"importAction",color:"primary","data-test-subj":"srsnapshotListRestoreActionButton"},Object(public_.reactRouterNavigate)(history,linkToRestoreSnapshot(repository,snapshot)),{isDisabled:!canRestore})))}},{render:({snapshot:snapshot,repository:repository})=>external_kbnSharedDeps_React_default.a.createElement(SnapshotDeleteProvider,null,deleteSnapshotPrompt=>{const isDeleteDisabled=!!Boolean(lastSuccessfulManagedSnapshot)&&snapshot===lastSuccessfulManagedSnapshot.snapshot,label=isDeleteDisabled?i18n.translate("xpack.snapshotRestore.snapshotList.table.deleteManagedRepositorySnapshotTooltip",{defaultMessage:"You must store the last successful snapshot in a managed repository."}):i18n.translate("xpack.snapshotRestore.snapshotList.table.actionDeleteTooltip",{defaultMessage:"Delete"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:label},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{"aria-label":i18n.translate("xpack.snapshotRestore.snapshotList.table.actionDeleteAriaLabel",{defaultMessage:"Delete snapshot '{name}'",values:{name:snapshot}}),iconType:"trash",color:"danger","data-test-subj":"srsnapshotListDeleteActionButton",onClick:()=>deleteSnapshotPrompt([{snapshot:snapshot,repository:repository}],onSnapshotDeleted),isDisabled:isDeleteDisabled}))})}],width:"100px"}],searchSchema={fields:{repository:{type:"string"},policyName:{type:"string"}}},selection={onSelectionChange:newSelectedItems=>setSelectedItems(newSelectedItems),selectable:({snapshot:snapshot})=>!Boolean(lastSuccessfulManagedSnapshot)||snapshot!==lastSuccessfulManagedSnapshot.snapshot,selectableMessage:selectable=>selectable?"":i18n.translate("xpack.snapshotRestore.snapshotList.table.deleteManagedRepositorySnapshotDescription",{defaultMessage:"You must retain the last successful snapshot in a managed repository."})},search={toolsLeft:selectedItems.length?external_kbnSharedDeps_React_default.a.createElement(SnapshotDeleteProvider,null,deleteSnapshotPrompt=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{onClick:()=>deleteSnapshotPrompt(selectedItems.map(({snapshot:snapshot,repository:repository})=>({snapshot:snapshot,repository:repository})),onSnapshotDeleted),color:"danger","data-test-subj":"srSnapshotListBulkDeleteActionButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotList.table.deleteSnapshotButton",defaultMessage:"Delete {count, plural, one {snapshot} other {snapshots}}",values:{count:selectedItems.length}}))):void 0,toolsRight:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{color:"secondary",iconType:"refresh",onClick:reload,"data-test-subj":"reloadButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotList.table.reloadSnapshotsButton",defaultMessage:"Reload"})),box:{incremental:!0,schema:searchSchema},filters:[{type:"field_value_selection",field:"repository",name:i18n.translate("xpack.snapshotRestore.snapshotList.table.repositoryFilterLabel",{defaultMessage:"Repository"}),multiSelect:!1,options:repositories.map(repository=>({value:repository,view:repository}))}],defaultQuery:policyFilter?external_kbnSharedDeps_ElasticEui_.Query.parse(`policyName="${policyFilter}"`,{schema:{...searchSchema,strict:!0}}):repositoryFilter?external_kbnSharedDeps_ElasticEui_.Query.parse(`repository="${repositoryFilter}"`,{schema:{...searchSchema,strict:!0}}):""};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiInMemoryTable,{items:snapshots,itemId:"uuid",columns:columns,search:search,sorting:{sort:{field:"startTimeInMillis",direction:"desc"}},isSelectable:!0,selection:selection,pagination:{initialPageSize:20,pageSizeOptions:[10,20,50]},rowProps:()=>({"data-test-subj":"row"}),cellProps:()=>({"data-test-subj":"cell"}),"data-test-subj":"snapshotTable"})};function snapshot_list_extends(){return(snapshot_list_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const SnapshotList=({location:{search:search},history:history})=>{const{repositoryName:repositoryName,snapshotId:snapshotId}=useDecodedParams(),{error:error,isLoading:isLoading,data:{snapshots:snapshots=[],repositories:repositories=[],policies:policies=[],errors:errors={}},resendRequest:reload}=Object(services_http.x)(),{uiMetricService:uiMetricService}=useServices(),{docLinks:docLinks}=useCore(),openSnapshotDetailsUrl=(repositoryNameToOpen,snapshotIdToOpen)=>linkToSnapshot(repositoryNameToOpen,snapshotIdToOpen),closeSnapshotDetails=()=>{history.push(application_constants.a+"/snapshots")},onSnapshotDeleted=snapshotsDeleted=>{repositoryName&&snapshotId&&snapshotsDeleted.find(({snapshot:snapshot,repository:repository})=>snapshot===snapshotId&&repository===repositoryName)&&closeSnapshotDetails(),snapshotsDeleted.length&&reload()},[filteredRepository,setFilteredRepository]=Object(external_kbnSharedDeps_React_.useState)(void 0),[filteredPolicy,setFilteredPolicy]=Object(external_kbnSharedDeps_React_.useState)(void 0);let content;if(Object(external_kbnSharedDeps_React_.useEffect)(()=>{if(search){const parsedParams=Object(query_string.parse)(search.replace(/^\?/,""),{sort:!1}),{repository:repository,policy:policy}=parsedParams;policy&&policy!==filteredPolicy?(setFilteredPolicy(String(policy)),history.replace(application_constants.a+"/snapshots")):repository&&repository!==filteredRepository&&(setFilteredRepository(String(repository)),history.replace(application_constants.a+"/snapshots"))}},[filteredPolicy,filteredRepository,history,search]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{uiMetricService.trackUiMetric(application_constants.J)},[uiMetricService]),isLoading)content=external_kbnSharedDeps_React_default.a.createElement(SectionLoading,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotList.loadingSnapshotsDescription",defaultMessage:"Loading snapshots…"}));else if(error)content=external_kbnSharedDeps_React_default.a.createElement(shared_imports.d,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotList.loadingSnapshotsErrorMessage",defaultMessage:"Error loading snapshots"}),error:error});else if(Object.keys(errors).length&&0===repositories.length)content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"managementApp",title:external_kbnSharedDeps_React_default.a.createElement("h1",{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotList.emptyPrompt.errorRepositoriesTitle",defaultMessage:"Some repositories contain errors"})),body:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotList.emptyPrompt.repositoryWarningDescription",defaultMessage:"Go to {repositoryLink} to fix the errors.",values:{repositoryLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,Object(public_.reactRouterNavigate)(history,"/repositories"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryWarningLinkText",defaultMessage:"Repositories"}))}}))});else if(0===repositories.length)content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"managementApp",title:external_kbnSharedDeps_React_default.a.createElement("h1",{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotList.emptyPrompt.noRepositoriesTitle",defaultMessage:"Start by registering a repository"})),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotList.emptyPrompt.noRepositoriesDescription",defaultMessage:"You need a place where your snapshots will live."})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,snapshot_list_extends({},Object(public_.reactRouterNavigate)(history,linkToAddRepository()),{fill:!0,iconType:"plusInCircle","data-test-subj":"registerRepositoryButton"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotList.emptyPrompt.noRepositoriesAddButtonLabel",defaultMessage:"Register a repository"})))),"data-test-subj":"emptyPrompt"});else if(0===snapshots.length)content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"managementApp",title:external_kbnSharedDeps_React_default.a.createElement("h1",{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotList.emptyPrompt.noSnapshotsTitle",defaultMessage:"You don't have any snapshots yet"})),body:external_kbnSharedDeps_React_default.a.createElement(shared_imports.e,{privileges:constants.d.map(name=>"cluster."+name)},({hasPrivileges:hasPrivileges})=>hasPrivileges?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotList.emptyPrompt.usePolicyDescription",defaultMessage:"Run a Snapshot Lifecycle Policy to create a snapshot. Snapshots can also be created by using {docLink}.",values:{docLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:docLinks.links.snapshotRestore.createSnapshot,target:"_blank","data-test-subj":"documentationLink"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.emptyPrompt.usePolicyDocLinkText",defaultMessage:"the Elasticsearch API"}))}})),external_kbnSharedDeps_React_default.a.createElement("p",null,0===policies.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,snapshot_list_extends({},Object(public_.reactRouterNavigate)(history,"/add_policy"),{fill:!0,iconType:"plusInCircle","data-test-subj":"addPolicyButton"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotList.emptyPrompt.addPolicyText",defaultMessage:"Create a policy"})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,snapshot_list_extends({},Object(public_.reactRouterNavigate)(history,"/policies"),{fill:!0,iconType:"list","data-test-subj":"goToPoliciesButton"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotList.emptyPrompt.goToPoliciesText",defaultMessage:"View policies"})))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.snapshotList.emptyPrompt.noSnapshotsDescription",defaultMessage:"Create a snapshot using the Elasticsearch API."})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:docLinks.links.snapshotRestore.createSnapshot,target:"_blank","data-test-subj":"documentationLink"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.emptyPrompt.noSnapshotsDocLinkText",defaultMessage:"Learn how to create a snapshot"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"link"}))))),"data-test-subj":"emptyPrompt"});else{const repositoryErrorsWarning=Object.keys(errors).length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryWarningTitle",defaultMessage:"Some repositories contain errors"}),color:"warning",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryWarningDescription",defaultMessage:"Snapshots might load slowly. Go to {repositoryLink} to fix the errors.",values:{repositoryLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,Object(public_.reactRouterNavigate)(history,"/repositories"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.repositoryWarningLinkText",defaultMessage:"Repositories"}))}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null)):null;content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,repositoryErrorsWarning,external_kbnSharedDeps_React_default.a.createElement(SnapshotTable,{snapshots:snapshots,repositories:repositories,reload:reload,openSnapshotDetailsUrl:openSnapshotDetailsUrl,onSnapshotDeleted:onSnapshotDeleted,repositoryFilter:filteredRepository,policyFilter:filteredPolicy}))}return external_kbnSharedDeps_React_default.a.createElement("section",{"data-test-subj":"snapshotList"},repositoryName&&snapshotId?external_kbnSharedDeps_React_default.a.createElement(SnapshotDetails,{repositoryName:repositoryName,snapshotId:snapshotId,onClose:closeSnapshotDetails,onSnapshotDeleted:onSnapshotDeleted}):null,content)};var external_kbnSharedDeps_ElasticEuiLibServices_=__webpack_require__(30);const ShardsTable=({shards:shards})=>{const{i18n:i18n}=useServices(),Progress=({total:total,restored:restored,percent:percent})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"top",content:i18n.translate("xpack.snapshotRestore.restoreList.shardTable.progressTooltipLabel",{defaultMessage:"{restored} of {total} restored",values:{restored:restored,total:total}})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs",textAlign:"center",style:{width:"100%"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiProgress,{value:0===total?1:restored,max:0===total?1:total,size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xs"}),percent)),columns=[{field:"id",name:i18n.translate("xpack.snapshotRestore.restoreList.shardTable.indexColumnTitle",{defaultMessage:"ID"}),width:"40px",render:(id,shard)=>shard.primary?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},id),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"right",content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreList.shardTable.primaryTooltipLabel",defaultMessage:"Primary"})},external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreList.shardTable.primaryAbbreviationText",defaultMessage:"P",description:"Used as an abbreviation for 'Primary', as in 'Primary shard'"}))))):id},{field:"stage",name:i18n.translate("xpack.snapshotRestore.restoreList.shardTable.stageColumnTitle",{defaultMessage:"Stage"})},{field:"startTimeInMillis",name:i18n.translate("xpack.snapshotRestore.restoreList.shardTable.startTimeColumnTitle",{defaultMessage:"Start time"}),render:startTimeInMillis=>startTimeInMillis?external_kbnSharedDeps_React_default.a.createElement(FormattedDateTime,{epochMs:startTimeInMillis}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"m"})},{field:"stopTimeInMillis",name:i18n.translate("xpack.snapshotRestore.restoreList.shardTable.endTimeColumnTitle",{defaultMessage:"End time"}),render:stopTimeInMillis=>stopTimeInMillis?external_kbnSharedDeps_React_default.a.createElement(FormattedDateTime,{epochMs:stopTimeInMillis}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"m"})},{field:"totalTimeInMillis",name:i18n.translate("xpack.snapshotRestore.restoreList.shardTable.durationColumnTitle",{defaultMessage:"Duration"}),render:totalTimeInMillis=>totalTimeInMillis?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreList.shardTable.durationValue",defaultMessage:"{seconds} {seconds, plural, one {second} other {seconds}}",values:{seconds:Math.ceil(totalTimeInMillis/1e3)}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"m"})},{field:"repository",name:i18n.translate("xpack.snapshotRestore.restoreList.shardTable.repositoryColumnTitle",{defaultMessage:"Repository"})},{field:"snapshot",name:i18n.translate("xpack.snapshotRestore.restoreList.shardTable.snapshotColumnTitle",{defaultMessage:"Snapshot"})},{field:"version",name:i18n.translate("xpack.snapshotRestore.restoreList.shardTable.versionColumnTitle",{defaultMessage:"Version"})},{field:"targetHost",name:i18n.translate("xpack.snapshotRestore.restoreList.shardTable.targetHostColumnTitle",{defaultMessage:"Target host"})},{field:"targetNode",name:i18n.translate("xpack.snapshotRestore.restoreList.shardTable.targetNodeColumnTitle",{defaultMessage:"Target node"})},{field:"bytesTotal",name:i18n.translate("xpack.snapshotRestore.restoreList.shardTable.bytesColumnTitle",{defaultMessage:"Bytes"}),render:(bytesTotal,{bytesRecovered:bytesRecovered,bytesPercent:bytesPercent})=>external_kbnSharedDeps_React_default.a.createElement(Progress,{total:bytesTotal,restored:bytesRecovered,percent:bytesPercent})},{field:"filesTotal",name:i18n.translate("xpack.snapshotRestore.restoreList.shardTable.filesColumnTitle",{defaultMessage:"Files"}),render:(filesTotal,{filesRecovered:filesRecovered,filesPercent:filesPercent})=>external_kbnSharedDeps_React_default.a.createElement(Progress,{total:filesTotal,restored:filesRecovered,percent:filesPercent})}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBasicTable,{className:"snapshotRestore__shardsTable",compressed:!0,items:shards,columns:columns})},RestoreTable=external_kbnSharedDeps_React_default.a.memo(({restores:restores})=>{const{i18n:i18n,uiMetricService:uiMetricService}=useServices(),[tableState,setTableState]=Object(external_kbnSharedDeps_React_.useState)({page:{},sort:{}}),[expandedIndices,setExpandedIndices]=Object(external_kbnSharedDeps_React_.useState)({}),getPagination=()=>{const{index:pageIndex,size:pageSize}=tableState.page;return{pageIndex:null!=pageIndex?pageIndex:0,pageSize:null!=pageSize?pageSize:20,totalItemCount:restores.length,pageSizeOptions:[10,20,50]}},getSorting=()=>{const{field:sortField,direction:sortDirection}=tableState.sort;return{sort:{field:null!=sortField?sortField:"isComplete",direction:null!=sortDirection?sortDirection:"asc"}}},toggleIndexRestoreDetails=restore=>{const{index:index}=restore,isExpanded=!Boolean(itemIdToExpandedRowMap[index]);!0===isExpanded&&uiMetricService.trackUiMetric(application_constants.B),setExpandedIndices({...itemIdToExpandedRowMap,[index]:isExpanded})},itemIdToExpandedRowMap=Object(external_kbnSharedDeps_React_.useMemo)(()=>restores.reduce((acc,restore)=>{const{index:index,shards:shards}=restore;return expandedIndices[index]&&(acc[index]=external_kbnSharedDeps_React_default.a.createElement(ShardsTable,{shards:shards})),acc},{}),[expandedIndices,restores]),columns=[{field:"index",name:i18n.translate("xpack.snapshotRestore.restoreList.table.indexColumnTitle",{defaultMessage:"Index"}),truncateText:!0,sortable:!0},{field:"isComplete",name:i18n.translate("xpack.snapshotRestore.restoreList.table.statusColumnTitle",{defaultMessage:"Status"}),truncateText:!0,sortable:!0,render:isComplete=>isComplete?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHealth,{color:"success"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreList.table.statusColumn.completeLabel",defaultMessage:"Complete"})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHealth,{color:"warning"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreList.table.statusColumn.inProgressLabel",defaultMessage:"In progress"}))},{field:"latestActivityTimeInMillis",name:i18n.translate("xpack.snapshotRestore.restoreList.table.lastActivityTitle",{defaultMessage:"Last activity"}),truncateText:!0,render:(latestActivityTimeInMillis,{isComplete:isComplete})=>isComplete?external_kbnSharedDeps_React_default.a.createElement(FormattedDateTime,{epochMs:latestActivityTimeInMillis}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreList.table.lastActivityColumn.nowLabel",defaultMessage:"now"})},{field:"shards",name:i18n.translate("xpack.snapshotRestore.restoreList.table.shardsCompletedTitle",{defaultMessage:"Shards completed"}),truncateText:!0,render:shards=>shards.filter(shard=>Boolean(shard.stopTimeInMillis)).length},{field:"shards",name:i18n.translate("xpack.snapshotRestore.restoreList.table.shardsInProgressTitle",{defaultMessage:"Shards in progress"}),truncateText:!0,render:shards=>shards.filter(shard=>!Boolean(shard.stopTimeInMillis)).length},{align:external_kbnSharedDeps_ElasticEuiLibServices_.RIGHT_ALIGNMENT,width:"40px",isExpander:!0,render:item=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{onClick:()=>toggleIndexRestoreDetails(item),"aria-label":itemIdToExpandedRowMap[item.index]?"Collapse":"Expand",iconType:itemIdToExpandedRowMap[item.index]?"arrowUp":"arrowDown"})}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBasicTable,{items:(()=>{const newRestoresList=[...restores],{sort:{field:field,direction:direction}}=getSorting(),{pageIndex:pageIndex,pageSize:pageSize}=getPagination();return Object(external_kbnSharedDeps_Lodash_.orderBy)(newRestoresList,[field],[direction]).slice(pageIndex*pageSize,(pageIndex+1)*pageSize)})(),itemId:"index",itemIdToExpandedRowMap:itemIdToExpandedRowMap,isExpandable:!0,columns:columns,sorting:getSorting(),pagination:getPagination(),onChange:({page:page={},sort:sort={}})=>{setTableState({page:page,sort:sort})},rowProps:restore=>({"data-test-subj":"row",onClick:()=>toggleIndexRestoreDetails(restore)}),cellProps:()=>({"data-test-subj":"cell"}),"data-test-subj":"restoresTable"})}),INTERVAL_OPTIONS=[1e4,3e4,6e4,3e5],RestoreList=()=>{const[isIntervalMenuOpen,setIsIntervalMenuOpen]=Object(external_kbnSharedDeps_React_.useState)(!1),[currentInterval,setCurrentInterval]=Object(external_kbnSharedDeps_React_.useState)(INTERVAL_OPTIONS[1]),{error:error,isLoading:isLoading,data:restores=[],isInitialRequest:isInitialRequest,resendRequest:resendRequest}=Object(services_http.u)(currentInterval),{uiMetricService:uiMetricService,history:history}=useServices();let content;return Object(external_kbnSharedDeps_React_.useEffect)(()=>{uiMetricService.trackUiMetric(application_constants.C)},[uiMetricService]),isInitialRequest?isLoading?content=external_kbnSharedDeps_React_default.a.createElement(SectionLoading,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreList.loadingRestoresDescription",defaultMessage:"Loading restores…"})):error&&(content=external_kbnSharedDeps_React_default.a.createElement(shared_imports.d,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreList.loadingRestoresErrorMessage",defaultMessage:"Error loading restores"}),error:error})):content=restores&&0===restores.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"managementApp",title:external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreList.emptyPromptTitle",defaultMessage:"No restored snapshots"})),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreList.emptyPromptDescription",defaultMessage:"Go to {snapshotsLink} to start a restore.",values:{snapshotsLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,Object(public_.reactRouterNavigate)(history,linkToSnapshots()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreList.emptyPromptDescriptionLink",defaultMessage:"Snapshots"}))}}))),"data-test-subj":"emptyPrompt"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",justifyContent:"flexStart",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{id:"srRestoreListIntervalMenu",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"xs",iconType:"arrowDown",iconSide:"right",onClick:()=>setIsIntervalMenuOpen(!isIntervalMenuOpen)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreList.intervalMenuButtonText",defaultMessage:"Refresh data every {interval}",values:{interval:currentInterval>=6e4?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreList.intervalMenu.minutesIntervalValue",defaultMessage:"{minutes} {minutes, plural, one {minute} other {minutes}}",values:{minutes:Math.ceil(currentInterval/6e4)}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreList.intervalMenu.secondsIntervalValue",defaultMessage:"{seconds} {seconds, plural, one {second} other {seconds}}",values:{seconds:Math.ceil(currentInterval/1e3)}})}})),isOpen:isIntervalMenuOpen,closePopover:()=>setIsIntervalMenuOpen(!1),panelPaddingSize:"none",anchorPosition:"downLeft"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiContextMenuPanel,{items:INTERVAL_OPTIONS.map(interval=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiContextMenuItem,{key:interval,icon:"empty",onClick:()=>{resendRequest(),setCurrentInterval(interval),setIsIntervalMenuOpen(!1)}},interval>=6e4?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreList.intervalMenu.minutesIntervalValue",defaultMessage:"{minutes} {minutes, plural, one {minute} other {minutes}}",values:{minutes:Math.ceil(interval/6e4)}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreList.intervalMenu.secondsIntervalValue",defaultMessage:"{seconds} {seconds, plural, one {second} other {seconds}}",values:{seconds:Math.ceil(interval/1e3)}})))}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},isLoading?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"m"}):null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(RestoreTable,{restores:restores})),external_kbnSharedDeps_React_default.a.createElement(shared_imports.e,{privileges:constants.c.map(name=>"index."+name)},({hasPrivileges:hasPrivileges,privilegesMissing:privilegesMissing})=>hasPrivileges?external_kbnSharedDeps_React_default.a.createElement("section",{"data-test-subj":"restoreList"},content):external_kbnSharedDeps_React_default.a.createElement(shared_imports.c,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreList.deniedPrivilegeTitle",defaultMessage:"You're missing index privileges"}),message:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreList.deniedPrivilegeDescription",defaultMessage:"To view snapshot restore status, you must have {privilegesCount, plural, one {this index privilege} other {these index privileges}} for one or more indices: {missingPrivileges}.",values:{missingPrivileges:privilegesMissing.index.join(", "),privilegesCount:privilegesMissing.index.length}})}))},tab_summary_TabSummary=({policy:policy})=>{const{i18n:i18n,history:history}=useServices(),{version:version,name:name,modifiedDateMillis:modifiedDateMillis,snapshotName:snapshotName,repository:repository,schedule:schedule,nextExecutionMillis:nextExecutionMillis,config:config,stats:stats,retention:retention,isManagedPolicy:isManagedPolicy}=policy,{includeGlobalState:includeGlobalState,ignoreUnavailable:ignoreUnavailable,indices:indices,partial:partial}=config||{includeGlobalState:void 0,ignoreUnavailable:void 0,indices:void 0,partial:void 0};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,isManagedPolicy?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{size:"s",color:"warning",iconType:"iInCircle",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.managedPolicyWarningTitle",defaultMessage:"This is a managed policy used by other systems. Any changes you make might affect how these systems operate."})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"})):null,stats&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiStat,{title:stats.snapshotsTaken,description:i18n.translate("xpack.snapshotRestore.policyDetails.snapshotsTakenStat",{defaultMessage:"Snapshots"}),titleSize:"s"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiStat,{title:stats.snapshotsFailed,description:i18n.translate("xpack.snapshotRestore.policyDetails.snapshotsFailedStat",{defaultMessage:"Failures"}),titleSize:"s"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiStat,{title:stats.snapshotsDeleted,description:i18n.translate("xpack.snapshotRestore.policyDetails.snapshotsDeletedStat",{defaultMessage:"Deleted"}),titleSize:"s"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiStat,{title:stats.snapshotDeletionFailures,description:i18n.translate("xpack.snapshotRestore.policyDetails.snapshotDeletionFailuresStat",{defaultMessage:"Deletion failures"}),titleSize:"s"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.generalTitle",defaultMessage:"General"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"version"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.versionLabel",defaultMessage:"Version"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},version)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"modified"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.modifiedDateLabel",defaultMessage:"Last modified"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},external_kbnSharedDeps_React_default.a.createElement(FormattedDateTime,{epochMs:modifiedDateMillis})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"name"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.snapshotNameLabel",defaultMessage:"Snapshot name"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,Object(public_.reactRouterNavigate)(history,linkToSnapshots(void 0,name)),snapshotName))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"repository"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.repositoryLabel",defaultMessage:"Repository"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,Object(public_.reactRouterNavigate)(history,linkToRepository(repository)),repository)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"schedule"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.scheduleLabel",defaultMessage:"Schedule"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},schedule)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"execution"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.nextExecutionLabel",defaultMessage:"Next snapshot"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},external_kbnSharedDeps_React_default.a.createElement(FormattedDateTime,{epochMs:nextExecutionMillis})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"indices"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.dataStreamsAndIndicesLabel",defaultMessage:"Data streams and indices"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},external_kbnSharedDeps_React_default.a.createElement(CollapsibleIndicesList,{indices:indices}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"includeGlobalState"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.ignoreUnavailableLabel",defaultMessage:"Ignore unavailable indices"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},ignoreUnavailable?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.ignoreUnavailableTrueLabel",defaultMessage:"Yes"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.ignoreUnavailableFalseLabel",defaultMessage:"No"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"partial"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.partialLabel",defaultMessage:"Allow partial shards"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},partial?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.partialTrueLabel",defaultMessage:"Yes"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.partialFalseLabel",defaultMessage:"No"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"includeGlobalState"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.includeGlobalStateLabel",defaultMessage:"Include global state"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},!1===includeGlobalState?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.includeGlobalStateFalseLabel",defaultMessage:"No"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.includeGlobalStateTrueLabel",defaultMessage:"Yes"}))))),retention&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHorizontalRule,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.retentionTitle",defaultMessage:"Retention"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},retention.expireAfterValue&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.expireAfterLabel",defaultMessage:"Delete after"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,retention.expireAfterValue,retention.expireAfterUnit)),retention.minCount&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.minCountLabel",defaultMessage:"Min count"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,retention.minCount)),retention.maxCount&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.maxCountLabel",defaultMessage:"Max count"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,retention.maxCount)))))},TabHistory=({policy:policy})=>{const{lastSuccess:lastSuccess,lastFailure:lastFailure,nextExecutionMillis:nextExecutionMillis,name:name,repository:repository}=policy,{history:history}=useServices();return lastSuccess||lastFailure?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,(()=>{if(!lastSuccess)return null;const{time:time,snapshotName:snapshotName}=lastSuccess;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.lastSuccessTitle",defaultMessage:"Last successful snapshot"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"successDate"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.lastSuccess.dateLabel",defaultMessage:"Date"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},external_kbnSharedDeps_React_default.a.createElement(FormattedDateTime,{epochMs:time}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"successSnapshot"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.lastSuccess.snapshotNameLabel",defaultMessage:"Snapshot name"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,Object(public_.reactRouterNavigate)(history,linkToSnapshot(repository,snapshotName)),snapshotName))))))})(),lastSuccess&&lastFailure?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHorizontalRule,null):null,(()=>{if(!lastFailure)return null;const{time:time,snapshotName:snapshotName,details:details}=lastFailure;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.lastFailureTitle",defaultMessage:"Last snapshot failure"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"failureDate"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.lastFailure.dateLabel",defaultMessage:"Date"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},external_kbnSharedDeps_React_default.a.createElement(FormattedDateTime,{epochMs:time}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"failureSnapshot"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.lastFailure.snapshotNameLabel",defaultMessage:"Snapshot name"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},snapshotName))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{"data-test-subj":"failureDetails"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{"data-test-subj":"title"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.lastFailure.detailsLabel",defaultMessage:"Details"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"value"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCodeEditor,{mode:"json",theme:"textmate",width:"100%",isReadOnly:!0,value:JSON.stringify(details,null,2),setOptions:{showLineNumbers:!1,tabSize:2},editorProps:{$blockScrolling:1/0},minLines:6,maxLines:12,wrapEnabled:!0,showGutter:!1,"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.snapshotRestore.policyDetails.lastFailure.detailsAriaLabel",{defaultMessage:"Last failure details for policy '{name}'",values:{name:name}})}))))))})()):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.noHistoryMessage",defaultMessage:"This policy will run on {date} at {time}.",values:{date:external_kbnSharedDeps_React_default.a.createElement(FormattedDateTime,{epochMs:nextExecutionMillis,type:"date"}),time:external_kbnSharedDeps_React_default.a.createElement(FormattedDateTime,{epochMs:nextExecutionMillis,type:"time"})}})))};function policy_details_extends(){return(policy_details_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const tabToUiMetricMap={summary:application_constants.n,success:application_constants.m},PolicyDetails=({policyName:policyName,onClose:onClose,onPolicyDeleted:onPolicyDeleted,onPolicyExecuted:onPolicyExecuted})=>{const{i18n:i18n,uiMetricService:uiMetricService,history:history}=useServices(),{error:error,data:policyDetails,resendRequest:reload}=Object(services_http.q)(policyName),[activeTab,setActiveTab]=Object(external_kbnSharedDeps_React_.useState)("summary"),[isPopoverOpen,setIsPopoverOpen]=Object(external_kbnSharedDeps_React_.useState)(!1);Object(external_kbnSharedDeps_React_.useEffect)(()=>{setActiveTab("summary")},[policyName]);const tabOptions=[{id:"summary",name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.summaryTabTitle",defaultMessage:"Summary"})},{id:"success",name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.historyTabTitle",defaultMessage:"History"})}],renderLoading=()=>external_kbnSharedDeps_React_default.a.createElement(SectionLoading,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.loadingPolicyDescription",defaultMessage:"Loading policy…"})),renderError=()=>{const errorObject=404===error.status?{data:{error:i18n.translate("xpack.snapshotRestore.policyDetails.policyNotFoundErrorMessage",{defaultMessage:"The policy '{name}' does not exist.",values:{name:policyName}})}}:error;return external_kbnSharedDeps_React_default.a.createElement(shared_imports.d,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.loadingPolicyErrorTitle",defaultMessage:"Error loading policy"}),error:errorObject})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyout,{onClose:onClose,"data-test-subj":"policyDetail","aria-labelledby":"srPolicyDetailsFlyoutTitle",size:"m",maxWidth:550},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",{id:"srPolicyDetailsFlyoutTitle","data-test-subj":"title"},policyName," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"refresh",color:"subdued","aria-label":i18n.translate("xpack.snapshotRestore.policyDetails.reloadButtonAriaLabel",{defaultMessage:"Reload"}),onClick:()=>reload()}))),policyDetails&&policyDetails.policy&&policyDetails.policy.inProgress?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(SectionLoading,{inline:!0,size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,policy_details_extends({},Object(public_.reactRouterNavigate)(history,linkToSnapshot(policyDetails.policy.repository,policyDetails.policy.inProgress.snapshotName)),{"data-test-subj":"inProgressSnapshotLink"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.inProgressSnapshotLinkText",defaultMessage:"'{snapshotName}' in progress",values:{snapshotName:policyDetails.policy.inProgress.snapshotName}})))):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTabs,null,tabOptions.map(tab=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTab,{onClick:()=>{uiMetricService.trackUiMetric(tabToUiMetricMap[tab.id]),setActiveTab(tab.id)},isSelected:tab.id===activeTab,key:tab.id,"data-test-subj":"tab"},tab.name)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutBody,{"data-test-subj":"content"},(()=>{if(policyDetails){const{policy:policy}=policyDetails;switch(activeTab){case"success":return external_kbnSharedDeps_React_default.a.createElement(TabHistory,{policy:policy});default:return external_kbnSharedDeps_React_default.a.createElement(tab_summary_TabSummary,{policy:policy})}}return error?renderError():renderLoading()})()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutFooter,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{iconType:"cross",flush:"left",onClick:onClose,"data-test-subj":"srPolicyDetailsFlyoutCloseButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.closeButtonLabel",defaultMessage:"Close"}))),policyDetails?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(PolicyExecuteProvider,null,executePolicyPrompt=>external_kbnSharedDeps_React_default.a.createElement(PolicyDeleteProvider,null,deletePolicyPrompt=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{id:"policyActionMenu",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{"data-test-subj":"policyActionMenuButton",iconSide:"right",onClick:()=>setIsPopoverOpen(!isPopoverOpen),iconType:"arrowDown",fill:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyDetails.manageButtonLabel",defaultMessage:"Manage policy"})),isOpen:isPopoverOpen,closePopover:()=>setIsPopoverOpen(!1),panelPaddingSize:"none",anchorPosition:"rightUp",repositionOnScroll:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiContextMenu,{"data-test-subj":"policyActionContextMenu",initialPanelId:0,panels:[{id:0,title:i18n.translate("xpack.snapshotRestore.policyDetails.managePanelTitle",{defaultMessage:"Policy options"}),items:[{name:i18n.translate("xpack.snapshotRestore.policyDetails.executeButtonLabel",{defaultMessage:"Run now"}),icon:"play",onClick:()=>{executePolicyPrompt(policyName,()=>setTimeout(()=>{onPolicyExecuted(),reload()},2e3))},disabled:Boolean(policyDetails.policy.inProgress)},{name:i18n.translate("xpack.snapshotRestore.policyDetails.editButtonLabel",{defaultMessage:"Edit"}),icon:"pencil",...Object(public_.reactRouterNavigate)(history,linkToEditPolicy(policyName))},{name:i18n.translate("xpack.snapshotRestore.policyDetails.deleteButtonLabel",{defaultMessage:"Delete"}),icon:"trash",disabled:policyDetails.policy.isManagedPolicy,onClick:()=>deletePolicyPrompt([policyName],onPolicyDeleted)}]}]}))))):null)))};function policy_table_extends(){return(policy_table_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const PolicyTable=({policies:policies,reload:reload,openPolicyDetailsUrl:openPolicyDetailsUrl,onPolicyDeleted:onPolicyDeleted,onPolicyExecuted:onPolicyExecuted})=>{const{i18n:i18n,uiMetricService:uiMetricService,history:history}=useServices(),[selectedItems,setSelectedItems]=Object(external_kbnSharedDeps_React_.useState)([]),columns=[{field:"name",name:i18n.translate("xpack.snapshotRestore.policyList.table.policyNameColumnTitle",{defaultMessage:"Policy"}),truncateText:!0,sortable:!0,render:(name,{inProgress:inProgress,isManagedPolicy:isManagedPolicy})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,policy_table_extends({},Object(public_.reactRouterNavigate)(history,openPolicyDetailsUrl(name),()=>uiMetricService.trackUiMetric(application_constants.q)),{"data-test-subj":"policyLink"}),name)," "),isManagedPolicy?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIconTip,{content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyList.table.managedPolicyBadgeLabel",defaultMessage:"This is a managed policy"}),position:"right"})):null,inProgress?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:i18n.translate("xpack.snapshotRestore.policyList.table.inProgressTooltip",{defaultMessage:"Snapshot in progress"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"m"}))):null)},{field:"snapshotName",name:i18n.translate("xpack.snapshotRestore.policyList.table.snapshotNameColumnTitle",{defaultMessage:"Snapshot name"}),sortable:!0,render:(snapshotName,{lastFailure:lastFailure,lastSuccess:lastSuccess})=>lastSuccess&&lastFailure&&lastFailure.time>lastSuccess.time?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"top",content:i18n.translate("xpack.snapshotRestore.policyList.table.lastSnapshotFailedTooltip",{defaultMessage:"Last snapshot failed"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"alert",color:"danger"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},snapshotName))):snapshotName},{field:"repository",name:i18n.translate("xpack.snapshotRestore.policyList.table.repositoryColumnTitle",{defaultMessage:"Repository"}),truncateText:!0,sortable:!0},{field:"schedule",name:i18n.translate("xpack.snapshotRestore.policyList.table.scheduleColumnTitle",{defaultMessage:"Schedule"}),truncateText:!0,sortable:!0},{field:"retention",name:i18n.translate("xpack.snapshotRestore.policyList.table.retentionColumnTitle",{defaultMessage:"Retention"}),render:retention=>retention?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"check","aria-label":i18n.translate("xpack.snapshotRestore.policyList.table.retentionColumnAriaLabel",{defaultMessage:"Retention configured"})}):null},{field:"nextExecutionMillis",name:i18n.translate("xpack.snapshotRestore.policyList.table.nextExecutionColumnTitle",{defaultMessage:"Next snapshot"}),truncateText:!0,sortable:!0,render:nextExecutionMillis=>external_kbnSharedDeps_React_default.a.createElement(FormattedDateTime,{epochMs:nextExecutionMillis})},{name:i18n.translate("xpack.snapshotRestore.policyList.table.actionsColumnTitle",{defaultMessage:"Actions"}),actions:[{render:({name:name,inProgress:inProgress,isManagedPolicy:isManagedPolicy})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(PolicyExecuteProvider,null,executePolicyPrompt=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:Boolean(inProgress)?i18n.translate("xpack.snapshotRestore.policyList.table.actionExecuteDisabledTooltip",{defaultMessage:"Policy is running"}):i18n.translate("xpack.snapshotRestore.policyList.table.actionExecuteTooltip",{defaultMessage:"Run now"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{"aria-label":i18n.translate("xpack.snapshotRestore.policyList.table.actionExecuteAriaLabel",{defaultMessage:"Run '{name}' immediately",values:{name:name}}),iconType:"play",color:"primary","data-test-subj":"executePolicyButton",onClick:()=>executePolicyPrompt(name,onPolicyExecuted),disabled:Boolean(inProgress)})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:i18n.translate("xpack.snapshotRestore.policyList.table.actionEditTooltip",{defaultMessage:"Edit"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,policy_table_extends({"aria-label":i18n.translate("xpack.snapshotRestore.policyList.table.actionEditAriaLabel",{defaultMessage:"Edit policy '{name}'",values:{name:name}}),iconType:"pencil",color:"primary"},Object(public_.reactRouterNavigate)(history,linkToEditPolicy(name)),{"data-test-subj":"editPolicyButton"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(PolicyDeleteProvider,null,deletePolicyPrompt=>{const label=isManagedPolicy?i18n.translate("xpack.snapshotRestore.policyList.table.deleteManagedPolicyTableActionTooltip",{defaultMessage:"You cannot delete a managed policy."}):i18n.translate("xpack.snapshotRestore.policyList.table.actionDeleteTooltip",{defaultMessage:"Delete"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:label},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{"aria-label":i18n.translate("xpack.snapshotRestore.policyList.table.actionDeleteAriaLabel",{defaultMessage:"Delete policy '{name}'",values:{name:name}}),iconType:"trash",color:"danger","data-test-subj":"deletePolicyButton",onClick:()=>deletePolicyPrompt([name],onPolicyDeleted),isDisabled:isManagedPolicy}))})))}],width:"100px"}],selection={onSelectionChange:newSelectedItems=>setSelectedItems(newSelectedItems),selectable:({isManagedPolicy:isManagedPolicy})=>!isManagedPolicy,selectableMessage:selectable=>selectable?"":i18n.translate("xpack.snapshotRestore.policyList.table.deleteManagedPolicySelectTooltip",{defaultMessage:"You cannot delete a managed policy."})},search={toolsLeft:selectedItems.length?external_kbnSharedDeps_React_default.a.createElement(PolicyDeleteProvider,null,deletePolicyPrompt=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{onClick:()=>deletePolicyPrompt(selectedItems.map(({name:name})=>name),onPolicyDeleted),color:"danger","data-test-subj":"srPolicyListBulkDeleteActionButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyList.table.deletePolicyButton",defaultMessage:"Delete {count, plural, one {policy} other {policies}}",values:{count:selectedItems.length}}))):void 0,toolsRight:[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{key:"reloadPolicies",color:"secondary",iconType:"refresh",onClick:reload,"data-test-subj":"reloadButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyList.table.reloadPoliciesButton",defaultMessage:"Reload"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,policy_table_extends({key:"createNewPolicy"},Object(public_.reactRouterNavigate)(history,"/add_policy"),{fill:!0,iconType:"plusInCircle","data-test-subj":"createPolicyButton"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyList.table.addPolicyButton",defaultMessage:"Create policy"}))],box:{incremental:!0,schema:!0},filters:[{type:"field_value_selection",field:"repository",name:i18n.translate("xpack.snapshotRestore.policyList.table.repositoryFilterLabel",{defaultMessage:"Repository"}),multiSelect:!1,options:Object.keys(policies.reduce((repositoriesMap,policy)=>(repositoriesMap[policy.repository]=!0,repositoriesMap),{})).map(repository=>({value:repository,view:repository}))}]};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiInMemoryTable,{className:"snapshotRestore__policyTable",items:policies,itemId:"name",columns:columns,search:search,sorting:{sort:{field:"name",direction:"asc"}},selection:selection,pagination:{initialPageSize:20,pageSizeOptions:[10,20,50]},isSelectable:!0,rowProps:()=>({"data-test-subj":"row"}),cellProps:()=>({"data-test-subj":"cell"}),"data-test-subj":"policyTable"})},PolicyRetentionSchedule=({retentionSettings:retentionSettings,onRetentionScheduleUpdated:onRetentionScheduleUpdated,isLoading:isLoading,error:error})=>{const{i18n:i18n}=useServices(),[isPopoverOpen,setIsPopoverOpen]=Object(external_kbnSharedDeps_React_.useState)(!1);return isLoading?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingContent,{lines:1})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null)):error?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyRetentionSchedulePanel.errorFetchingRetentionScheduleTitle",defaultMessage:"Error fetching retention schedule"}),color:"danger",iconType:"alert"},error.data&&error.data.message?external_kbnSharedDeps_React_default.a.createElement("p",null,error.data.message):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{iconType:"refresh",color:"danger",onClick:onRetentionScheduleUpdated},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyRetentionSchedulePanel.errorFetchingRetentionScheduleReloadButtonLabel",defaultMessage:"Reload"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null)):retentionSettings&&retentionSettings.retentionSchedule?(cronSchedule=retentionSettings.retentionSchedule,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyRetentionSchedulePanel.retentionScheduleDescription",defaultMessage:"The cron schedule for retaining snapshots is: {cronSchedule}.",values:{cronSchedule:external_kbnSharedDeps_React_default.a.createElement("strong",null,cronSchedule)}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(RetentionExecuteModalProvider,null,executeRetentionPrompt=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"top",content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyRetentionSchedulePanel.retentionScheduleExecuteLinkTooltip",defaultMessage:"Run retention now"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"play",onClick:()=>executeRetentionPrompt(),"aria-label":i18n.translate("xpack.snapshotRestore.policyRetentionSchedulePanel.retentionScheduleExecuteLinkAriaLabel",{defaultMessage:"Run retention now"})})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(RetentionSettingsUpdateModalProvider,null,updateRetentionPrompt=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"top",content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyRetentionSchedulePanel.retentionScheduleEditLinkTooltip",defaultMessage:"Edit retention schedule"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"pencil",onClick:()=>updateRetentionPrompt(cronSchedule,onRetentionScheduleUpdated),"aria-label":i18n.translate("xpack.snapshotRestore.policyRetentionSchedulePanel.retentionScheduleEditLinkAriaLabel",{defaultMessage:"Edit retention schedule"})})))))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyRetentionSchedulePanel.noScheduleConfiguredWarningTitle",defaultMessage:"Retention not scheduled"}),color:"warning",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyRetentionSchedulePanel.noScheduleConfiguredWarningDescription",defaultMessage:"One or more policies have a retention period, but no retention is scheduled."})),external_kbnSharedDeps_React_default.a.createElement(RetentionExecuteModalProvider,null,executeRetentionPrompt=>external_kbnSharedDeps_React_default.a.createElement(RetentionSettingsUpdateModalProvider,null,updateRetentionSettingsPrompt=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{id:"retentionActionMenu",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{"data-test-subj":"retentionActionMenuButton",iconSide:"right",color:"warning",onClick:()=>setIsPopoverOpen(!isPopoverOpen),iconType:"arrowDown"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyRetentionSchedulePanel.manageRetentionButtonLabel",defaultMessage:"Manage retention"})),isOpen:isPopoverOpen,closePopover:()=>setIsPopoverOpen(!1),panelPaddingSize:"none",anchorPosition:"rightUp",repositionOnScroll:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiContextMenu,{"data-test-subj":"retentionActionContextMenu",initialPanelId:0,panels:[{id:0,title:i18n.translate("xpack.snapshotRestore.policyRetentionSchedulePanel.managePanelTitle",{defaultMessage:"Retention options"}),items:[{name:i18n.translate("xpack.snapshotRestore.policyRetentionSchedulePanel.executeButtonLabel",{defaultMessage:"Run now"}),icon:"play",onClick:()=>executeRetentionPrompt()},{name:i18n.translate("xpack.snapshotRestore.policyRetentionSchedulePanel.addButtonLabel",{defaultMessage:"Schedule"}),icon:"plusInCircle",onClick:()=>updateRetentionSettingsPrompt(void 0,onRetentionScheduleUpdated)}]}]}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null));var cronSchedule};function policy_list_extends(){return(policy_list_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const PolicyList=({history:history})=>{const{policyName:policyName}=useDecodedParams(),{error:error,isLoading:isLoading,data:{policies:policies}={policies:void 0},resendRequest:reload}=Object(services_http.p)(),{uiMetricService:uiMetricService}=useServices(),{isLoading:isLoadingRetentionSettings,error:retentionSettingsError,data:retentionSettings,resendRequest:reloadRetentionSettings}=Object(services_http.v)(),openPolicyDetailsUrl=newPolicyName=>linkToPolicy(newPolicyName),closePolicyDetails=()=>{history.push(application_constants.a+"/policies")},onPolicyDeleted=policiesDeleted=>{policyName&&policiesDeleted.includes(policyName)&&closePolicyDetails(),policiesDeleted.length&&reload()},onPolicyExecuted=()=>{reload()};let content;if(Object(external_kbnSharedDeps_React_.useEffect)(()=>{uiMetricService.trackUiMetric(application_constants.p)},[uiMetricService]),isLoading)content=external_kbnSharedDeps_React_default.a.createElement(SectionLoading,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyList.loadingPoliciesDescription",defaultMessage:"Loading policies…"}));else if(error)content=external_kbnSharedDeps_React_default.a.createElement(shared_imports.d,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyList.LoadingPoliciesErrorMessage",defaultMessage:"Error loading policies"}),error:error});else if(policies&&0===policies.length)content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"managementApp",title:external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyList.emptyPromptTitle",defaultMessage:"Create your first snapshot policy"})),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyList.emptyPromptDescription",defaultMessage:"A policy automates the creation and deletion of snapshots."}))),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,policy_list_extends({},Object(public_.reactRouterNavigate)(history,"/add_policy"),{fill:!0,iconType:"plusInCircle","data-test-subj":"createPolicyButton"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.createPolicyButton",defaultMessage:"Create a policy"})),"data-test-subj":"emptyPrompt"});else{const policySchedules=policies.map(policy=>policy.schedule),hasDuplicateSchedules=policySchedules.length>new Set(policySchedules).size,hasRetention=Boolean(policies.find(policy=>policy.retention));content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,hasDuplicateSchedules?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyScheduleWarningTitle",defaultMessage:"Two or more policies have the same schedule"}),color:"warning",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyScheduleWarningDescription",defaultMessage:"Only one snapshot can be taken at a time. To avoid snapshot failures, edit or delete the policies."})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null)):null,hasRetention?external_kbnSharedDeps_React_default.a.createElement(PolicyRetentionSchedule,{retentionSettings:retentionSettings,onRetentionScheduleUpdated:reloadRetentionSettings,isLoading:isLoadingRetentionSettings,error:retentionSettingsError}):null,external_kbnSharedDeps_React_default.a.createElement(PolicyTable,{policies:policies||[],reload:reload,openPolicyDetailsUrl:openPolicyDetailsUrl,onPolicyDeleted:onPolicyDeleted,onPolicyExecuted:onPolicyExecuted}))}return external_kbnSharedDeps_React_default.a.createElement(shared_imports.e,{privileges:constants.d.map(name=>"cluster."+name)},({hasPrivileges:hasPrivileges,privilegesMissing:privilegesMissing})=>hasPrivileges?external_kbnSharedDeps_React_default.a.createElement("section",{"data-test-subj":"policyList"},policyName?external_kbnSharedDeps_React_default.a.createElement(PolicyDetails,{policyName:policyName,onClose:closePolicyDetails,onPolicyDeleted:onPolicyDeleted,onPolicyExecuted:onPolicyExecuted}):null,content):external_kbnSharedDeps_React_default.a.createElement(shared_imports.c,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyList.deniedPrivilegeTitle",defaultMessage:"You're missing cluster privileges"}),message:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.policyList.deniedPrivilegeDescription",defaultMessage:"To manage Snapshot Lifecycle Policies, you must have {privilegesCount, plural, one {this cluster privilege} other {these cluster privileges}}: {missingPrivileges}.",values:{missingPrivileges:privilegesMissing.cluster.join(", "),privilegesCount:privilegesMissing.cluster.length}})}))},SnapshotRestoreHome=({match:{params:{section:section}},history:history})=>{const{slm_ui:slmUi}=useConfig(),{docLinks:docLinks}=useCore(),tabs=[{id:"snapshots",name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.home.snapshotsTabTitle",defaultMessage:"Snapshots"})},{id:"repositories",name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.home.repositoriesTabTitle",defaultMessage:"Repositories"})},{id:"restore_status",name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.home.restoreTabTitle",defaultMessage:"Restore Status"})}];slmUi.enabled&&tabs.splice(2,0,{id:"policies",name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.home.policiesTabTitle",defaultMessage:"Policies"})});return Object(external_kbnSharedDeps_React_.useEffect)(()=>{breadcrumbService.setBreadcrumbs(section||"home"),docTitleService.setTitle(section||"home")},[section]),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContent,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"l"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!0},external_kbnSharedDeps_React_default.a.createElement("h1",{"data-test-subj":"appTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.home.snapshotRestoreTitle",defaultMessage:"Snapshot and Restore"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{href:docLinks.links.snapshotRestore.guide,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.home.snapshotRestoreDocsLinkText",defaultMessage:"Snapshot and Restore docs"}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.home.snapshotRestoreDescription",defaultMessage:"Use repositories to store and recover backups of your Elasticsearch indices and clusters."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTabs,null,tabs.map(tab=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTab,{onClick:()=>{return newSection=tab.id,void history.push(encodeURI(`${application_constants.a}/${encodeURIComponent(newSection)}`));var newSection},isSelected:tab.id===section,key:tab.id,"data-test-subj":tab.id.toLowerCase()+"_tab"},tab.name))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Switch,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{exact:!0,path:application_constants.a+"/repositories/:repositoryName*",component:RepositoryList}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{exact:!0,path:application_constants.a+"/snapshots",component:SnapshotList}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{exact:!0,path:application_constants.a+"/snapshots/:repositoryName*/:snapshotId",component:SnapshotList}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{exact:!0,path:application_constants.a+"/restore_status",component:RestoreList}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{exact:!0,path:application_constants.a+"/policies/:policyName*",component:PolicyList}))))},RepositoryAdd=({history:history,location:{search:search}})=>{const[isSaving,setIsSaving]=Object(external_kbnSharedDeps_React_.useState)(!1),[saveError,setSaveError]=Object(external_kbnSharedDeps_React_.useState)(null);Object(external_kbnSharedDeps_React_.useEffect)(()=>{breadcrumbService.setBreadcrumbs("repositoryAdd"),docTitleService.setTitle("repositoryAdd")},[]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContent,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",{"data-test-subj":"pageTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.addRepositoryTitle",defaultMessage:"Register repository"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(RepositoryForm,{repository:{name:"",type:null,settings:{}},isSaving:isSaving,saveError:saveError?external_kbnSharedDeps_React_default.a.createElement(shared_imports.d,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.addRepository.savingRepositoryErrorTitle",defaultMessage:"Cannot register new repository"}),error:saveError,"data-test-subj":"saveRepositoryApiError"}):null,clearSaveError:()=>{setSaveError(null)},onSave:async newRepository=>{setIsSaving(!0),setSaveError(null);const{name:name}=newRepository,{error:error}=await Object(services_http.b)(newRepository);if(setIsSaving(!1),error)setSaveError(error);else{const{redirect:redirect}=Object(query_string.parse)(search.replace(/^\?/,""),{sort:!1});history.push(redirect||encodeURI(`${application_constants.a}/${encodeURIComponent("repositories")}/${encodeURIComponent(name)}`))}}})))},RepositoryEdit=({history:history})=>{const{i18n:i18n}=useServices(),{name:name}=useDecodedParams();Object(external_kbnSharedDeps_React_.useEffect)(()=>{breadcrumbService.setBreadcrumbs("repositoryEdit"),docTitleService.setTitle("repositoryEdit")},[]);const[repository,setRepository]=Object(external_kbnSharedDeps_React_.useState)({name:"",type:null,settings:{}}),{error:repositoryError,isLoading:loadingRepository,data:repositoryData}=Object(services_http.s)(name);Object(external_kbnSharedDeps_React_.useEffect)(()=>{repositoryData&&repositoryData.repository&&setRepository(repositoryData.repository)},[repositoryData]);const[isSaving,setIsSaving]=Object(external_kbnSharedDeps_React_.useState)(!1),[saveError,setSaveError]=Object(external_kbnSharedDeps_React_.useState)(null),onSave=async editedRepository=>{setIsSaving(!0),setSaveError(null);const{error:error}=await Object(services_http.h)(editedRepository);setIsSaving(!1),error?setSaveError(error):history.push(encodeURI(`${application_constants.a}/${encodeURIComponent("repositories")}/${encodeURIComponent(name)}`))},clearSaveError=()=>{setSaveError(null)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContent,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.editRepositoryTitle",defaultMessage:"Edit repository"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),(()=>{if(loadingRepository)return external_kbnSharedDeps_React_default.a.createElement(SectionLoading,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.editRepository.loadingRepositoryDescription",defaultMessage:"Loading repository details…"}));if(repositoryError)return(()=>{const errorObject=404===repositoryError.status?{data:{error:i18n.translate("xpack.snapshotRestore.editRepository.repositoryNotFoundErrorMessage",{defaultMessage:"The repository '{name}' does not exist.",values:{name:name}})}}:repositoryError;return external_kbnSharedDeps_React_default.a.createElement(shared_imports.d,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.editRepository.loadingRepositoryErrorTitle",defaultMessage:"Error loading repository details"}),error:errorObject})})();const{isManagedRepository:isManagedRepository}=repositoryData;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,isManagedRepository?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{size:"m",color:"warning",iconType:"iInCircle",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.editRepository.managedRepositoryWarningTitle",defaultMessage:"This is a managed repository. Changing this repository might affect other systems that use it. Proceed with caution."})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"})):null,external_kbnSharedDeps_React_default.a.createElement(RepositoryForm,{repository:repository,isManagedRepository:isManagedRepository,isEditing:!0,isSaving:isSaving,saveError:saveError?external_kbnSharedDeps_React_default.a.createElement(shared_imports.d,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.editRepository.savingRepositoryErrorTitle",defaultMessage:"Cannot save repository"}),error:saveError}):null,clearSaveError:clearSaveError,onSave:onSave}))})()))},RestoreSnapshot=({history:history})=>{const{i18n:i18n}=useServices(),{repositoryName:repositoryName,snapshotId:snapshotId}=useDecodedParams();Object(external_kbnSharedDeps_React_.useEffect)(()=>{breadcrumbService.setBreadcrumbs("restoreSnapshot"),docTitleService.setTitle("restoreSnapshot")},[]);const[snapshotDetails,setSnapshotDetails]=Object(external_kbnSharedDeps_React_.useState)({}),{error:snapshotError,isLoading:loadingSnapshot,data:snapshotData}=Object(services_http.w)(repositoryName,snapshotId);Object(external_kbnSharedDeps_React_.useEffect)(()=>{snapshotData&&setSnapshotDetails(snapshotData)},[snapshotData]);const[isSaving,setIsSaving]=Object(external_kbnSharedDeps_React_.useState)(!1),[saveError,setSaveError]=Object(external_kbnSharedDeps_React_.useState)(null),onSave=async restoreSettings=>{setIsSaving(!0),setSaveError(null);const{error:error}=await Object(services_http.j)(repositoryName,snapshotId,restoreSettings);error?(setIsSaving(!1),setSaveError(error)):setTimeout(()=>{setIsSaving(!1),history.push(application_constants.a+"/restore_status")},5e3)},clearSaveError=()=>{setSaveError(null)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContent,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreSnapshotTitle",defaultMessage:"Restore '{snapshot}'",values:{snapshot:snapshotId}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),loadingSnapshot?external_kbnSharedDeps_React_default.a.createElement(SectionLoading,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreSnapshot.loadingSnapshotDescription",defaultMessage:"Loading snapshot details…"})):snapshotError?(()=>{const errorObject=404===snapshotError.status?{data:{error:i18n.translate("xpack.snapshotRestore.restoreSnapshot.snapshotNotFoundErrorMessage",{defaultMessage:"The snapshot '{snapshot}' does not exist in repository '{repository}'.",values:{snapshot:snapshotId,repository:repositoryName}})}}:snapshotError;return external_kbnSharedDeps_React_default.a.createElement(shared_imports.d,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreSnapshot.loadingSnapshotErrorTitle",defaultMessage:"Error loading snapshot details"}),error:errorObject})})():external_kbnSharedDeps_React_default.a.createElement(RestoreSnapshotForm,{snapshotDetails:snapshotDetails,isSaving:isSaving,saveError:saveError?external_kbnSharedDeps_React_default.a.createElement(shared_imports.d,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.restoreSnapshot.executeRestoreErrorTitle",defaultMessage:"Unable to restore snapshot"}),error:saveError}):null,clearSaveError:clearSaveError,onSave:onSave})))},PolicyAdd=({history:history,location:{pathname:pathname}})=>{const[isSaving,setIsSaving]=Object(external_kbnSharedDeps_React_.useState)(!1),[saveError,setSaveError]=Object(external_kbnSharedDeps_React_.useState)(null),{error:errorLoadingIndices,isLoading:isLoadingIndices,data:data}=Object(services_http.o)(),{indices:indices,dataStreams:dataStreams}=null!=data?data:{indices:[],dataStreams:[]};Object(external_kbnSharedDeps_React_.useEffect)(()=>{breadcrumbService.setBreadcrumbs("policyAdd"),docTitleService.setTitle("policyAdd")},[]);const emptyPolicy={name:"",snapshotName:"",schedule:application_constants.c,repository:"",config:{},retention:{expireAfterValue:"",expireAfterUnit:constants.g.DAY,maxCount:"",minCount:""},isManagedPolicy:!1};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContent,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",{"data-test-subj":"pageTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.addPolicyTitle",defaultMessage:"Create policy"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),isLoadingIndices?external_kbnSharedDeps_React_default.a.createElement(SectionLoading,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.addPolicy.loadingIndicesDescription",defaultMessage:"Loading available indices…"})):errorLoadingIndices?external_kbnSharedDeps_React_default.a.createElement(shared_imports.d,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.addPolicy.LoadingIndicesErrorMessage",defaultMessage:"Error loading available indices"}),error:errorLoadingIndices}):external_kbnSharedDeps_React_default.a.createElement(PolicyForm,{policy:emptyPolicy,indices:indices,dataStreams:dataStreams,currentUrl:pathname,isSaving:isSaving,saveError:saveError?external_kbnSharedDeps_React_default.a.createElement(shared_imports.d,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.addPolicy.savingPolicyErrorTitle",defaultMessage:"Cannot create new policy"}),error:saveError,"data-test-subj":"savePolicyApiError"}):null,clearSaveError:()=>{setSaveError(null)},onSave:async newPolicy=>{setIsSaving(!0),setSaveError(null);const{name:name}=newPolicy,{error:error}=await Object(services_http.a)(newPolicy);setIsSaving(!1),error?setSaveError(error):history.push(encodeURI(`${application_constants.a}/policies/${encodeURIComponent(name)}`))},onCancel:()=>{history.push(application_constants.a+"/policies")}})))},PolicyEdit=({history:history,location:{pathname:pathname}})=>{const{name:name}=useDecodedParams(),{i18n:i18n}=useServices();Object(external_kbnSharedDeps_React_.useEffect)(()=>{breadcrumbService.setBreadcrumbs("policyEdit"),docTitleService.setTitle("policyEdit")},[]);const[policy,setPolicy]=Object(external_kbnSharedDeps_React_.useState)({name:"",snapshotName:"",schedule:"",repository:"",config:{},retention:{expireAfterValue:"",expireAfterUnit:constants.g.DAY,maxCount:"",minCount:""},isManagedPolicy:!1}),{error:errorLoadingIndices,isLoading:isLoadingIndices,data:indicesData}=Object(services_http.o)(),{error:errorLoadingPolicy,isLoading:isLoadingPolicy,data:policyData}=Object(services_http.q)(name);Object(external_kbnSharedDeps_React_.useEffect)(()=>{if(null!=policyData&&policyData.policy){const{policy:policyToEdit}=policyData,policyFormData={name:policyToEdit.name,snapshotName:policyToEdit.snapshotName,schedule:policyToEdit.schedule,repository:policyToEdit.repository,config:policyToEdit.config,retention:policyToEdit.retention,isManagedPolicy:policyToEdit.isManagedPolicy};setPolicy(policyFormData)}},[policyData]);const[isSaving,setIsSaving]=Object(external_kbnSharedDeps_React_.useState)(!1),[saveError,setSaveError]=Object(external_kbnSharedDeps_React_.useState)(null),onSave=async editedPolicy=>{setIsSaving(!0),setSaveError(null);const{error:error}=await Object(services_http.g)(editedPolicy);setIsSaving(!1),error?setSaveError(error):history.push(encodeURI(`${application_constants.a}/policies/${encodeURIComponent(name)}`))},onCancel=()=>{history.push(encodeURI(`${application_constants.a}/policies/${encodeURIComponent(name)}`))},clearSaveError=()=>{setSaveError(null)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContent,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",{"data-test-subj":"pageTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.editPolicyTitle",defaultMessage:"Edit policy"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),isLoadingPolicy||isLoadingIndices?errorLoadingPolicy?external_kbnSharedDeps_React_default.a.createElement(SectionLoading,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.editPolicy.loadingPolicyDescription",defaultMessage:"Loading policy details…"})):external_kbnSharedDeps_React_default.a.createElement(SectionLoading,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.editPolicy.loadingIndicesDescription",defaultMessage:"Loading available indices…"})):errorLoadingPolicy||errorLoadingIndices?(()=>{if(errorLoadingPolicy){const errorObject=404===errorLoadingPolicy.status?{data:{error:i18n.translate("xpack.snapshotRestore.editPolicy.policyNotFoundErrorMessage",{defaultMessage:"The policy '{name}' does not exist.",values:{name:name}})}}:errorLoadingPolicy;return external_kbnSharedDeps_React_default.a.createElement(shared_imports.d,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.editPolicy.loadingPolicyErrorTitle",defaultMessage:"Error loading policy details"}),error:errorObject})}if(errorLoadingIndices)return external_kbnSharedDeps_React_default.a.createElement(shared_imports.d,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.editPolicy.LoadingIndicesErrorMessage",defaultMessage:"Error loading available indices"}),error:errorLoadingIndices})})():external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,policy.isManagedPolicy?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{size:"m",color:"warning",iconType:"iInCircle",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.editPolicy.managedPolicyWarningTitle",defaultMessage:"This is a managed policy. Changing this policy might affect other systems that use it. Proceed with caution."})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"})):null,external_kbnSharedDeps_React_default.a.createElement(PolicyForm,{policy:policy,dataStreams:indicesData.dataStreams,indices:indicesData.indices,currentUrl:pathname,isEditing:!0,isSaving:isSaving,saveError:saveError?external_kbnSharedDeps_React_default.a.createElement(shared_imports.d,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.editPolicy.savingPolicyErrorTitle",defaultMessage:"Cannot save policy"}),error:saveError}):null,clearSaveError:clearSaveError,onSave:onSave,onCancel:onCancel}))))},App=()=>{const{slm_ui:slmUi}=useConfig(),{apiError:apiError}=Object(shared_imports.g)(),sections=["repositories","snapshots","restore_status"];slmUi.enabled&&sections.push("policies");const sectionsRegex=sections.join("|");return apiError?external_kbnSharedDeps_React_default.a.createElement(shared_imports.d,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.app.checkingPrivilegesErrorMessage",defaultMessage:"Error fetching user privileges from the server."}),error:apiError}):external_kbnSharedDeps_React_default.a.createElement(shared_imports.e,{privileges:constants.b.map(name=>"cluster."+name)},({isLoading:isLoading,hasPrivileges:hasPrivileges,privilegesMissing:privilegesMissing})=>isLoading?external_kbnSharedDeps_React_default.a.createElement(SectionLoading,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.app.checkingPrivilegesDescription",defaultMessage:"Checking privileges…"})):hasPrivileges?external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"snapshotRestoreApp"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Switch,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{exact:!0,path:"/add_repository",component:RepositoryAdd}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{exact:!0,path:"/edit_repository/:name*",component:RepositoryEdit}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{exact:!0,path:`/:section(${sectionsRegex})/:repositoryName?/:snapshotId*`,component:SnapshotRestoreHome}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Redirect,{exact:!0,from:"/restore/:repositoryName",to:"/snapshots"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{exact:!0,path:"/restore/:repositoryName/:snapshotId*",component:RestoreSnapshot}),slmUi.enabled&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{exact:!0,path:"/add_policy",component:PolicyAdd}),slmUi.enabled&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{exact:!0,path:"/edit_policy/:name*",component:PolicyEdit}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Redirect,{from:"/",to:"/"+application_constants.f}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Redirect,{from:"",to:"/"+application_constants.f}))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContent,null,external_kbnSharedDeps_React_default.a.createElement(shared_imports.c,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.app.deniedPrivilegeTitle",defaultMessage:"You're missing cluster privileges"}),message:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.snapshotRestore.app.deniedPrivilegeDescription",defaultMessage:"To use Snapshot and Restore, you must have {privilegesCount, plural, one {this cluster privilege} other {these cluster privileges}}: {missingPrivileges}.",values:{missingPrivileges:privilegesMissing.cluster.join(", "),privilegesCount:privilegesMissing.cluster.length}})})))},AppProviders=({appDependencies:appDependencies,children:children})=>{const{core:core}=appDependencies,{i18n:{Context:I18nContext},http:http}=core;return external_kbnSharedDeps_React_default.a.createElement(shared_imports.a,{httpClient:http,privilegesEndpoint:constants.a+"privileges"},external_kbnSharedDeps_React_default.a.createElement(I18nContext,null,external_kbnSharedDeps_React_default.a.createElement(AppContextProvider,{value:appDependencies},children)))},AppWithRouter=({history:history})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Router,{history:history},external_kbnSharedDeps_React_default.a.createElement(App,null));async function mountManagementSection(coreSetup,services,config,params){const{element:element,setBreadcrumbs:setBreadcrumbs,history:history}=params,[core]=await coreSetup.getStartServices(),{chrome:{docTitle:docTitle}}=core;docTitleService.setup(docTitle.change),breadcrumbService.setup(setBreadcrumbs);const appDependencies={core:core,config:config,services:{httpService:services_http.l,uiMetricService:services.uiMetricService,i18n:external_kbnSharedDeps_KbnI18n_.i18n,history:history}},unmountAppCallback=(elem=element,dependencies=appDependencies,Object(external_kbnSharedDeps_ReactDom_.render)(external_kbnSharedDeps_React_default.a.createElement(AppProviders,{appDependencies:dependencies},external_kbnSharedDeps_React_default.a.createElement(AppWithRouter,{history:dependencies.services.history})),elem),()=>{Object(external_kbnSharedDeps_ReactDom_.unmountComponentAtNode)(elem)});var elem,dependencies;return()=>{docTitle.reset(),unmountAppCallback()}}}}]);