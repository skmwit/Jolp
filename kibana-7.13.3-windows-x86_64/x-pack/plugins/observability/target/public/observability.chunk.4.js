/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observability_bundle_jsonpfunction=window.observability_bundle_jsonpfunction||[]).push([[4],{48:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return HeaderMenuPortal}));var extendStatics,external_kbnSharedDeps_React_=__webpack_require__(0),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_ReactDom_=__webpack_require__(43),__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),web_InPortal=function(_super){function InPortal(props){var _this=_super.call(this,props)||this;return _this.addPropsChannel=function(){Object.assign(_this.props.node,{setPortalProps:function(props){_this.setState({nodeProps:props})}})},_this.state={nodeProps:_this.props.node.getInitialPortalProps()},_this}return __extends(InPortal,_super),InPortal.prototype.componentDidMount=function(){this.addPropsChannel()},InPortal.prototype.componentDidUpdate=function(){this.addPropsChannel()},InPortal.prototype.render=function(){var _this=this,_a=this.props,children=_a.children,node=_a.node;return external_kbnSharedDeps_ReactDom_.createPortal(external_kbnSharedDeps_React_.Children.map(children,(function(child){return external_kbnSharedDeps_React_.isValidElement(child)?external_kbnSharedDeps_React_.cloneElement(child,_this.state.nodeProps):child})),node)},InPortal}(external_kbnSharedDeps_React_.PureComponent),web_OutPortal=function(_super){function OutPortal(props){var _this=_super.call(this,props)||this;return _this.placeholderNode=external_kbnSharedDeps_React_.createRef(),_this.passPropsThroughPortal(),_this}return __extends(OutPortal,_super),OutPortal.prototype.passPropsThroughPortal=function(){var propsForTarget=Object.assign({},this.props,{node:void 0});this.props.node.setPortalProps(propsForTarget)},OutPortal.prototype.componentDidMount=function(){var node=this.props.node,placeholder=this.placeholderNode.current,parent=placeholder.parentNode;node.mount(parent,placeholder),this.passPropsThroughPortal()},OutPortal.prototype.componentDidUpdate=function(){var node=this.props.node,placeholder=this.placeholderNode.current,parent=placeholder.parentNode;node.mount(parent,placeholder),this.passPropsThroughPortal()},OutPortal.prototype.componentWillUnmount=function(){this.props.node.unmount(this.placeholderNode.current)},OutPortal.prototype.render=function(){return external_kbnSharedDeps_React_.createElement("div",{ref:this.placeholderNode})},OutPortal}(external_kbnSharedDeps_React_.PureComponent),public_=__webpack_require__(12);function HeaderMenuPortal({children:children,setHeaderActionMenu:setHeaderActionMenu}){const portalNode=Object(external_kbnSharedDeps_React_.useMemo)(()=>function(){var parent,lastPlaceholder,initialProps={},portalNode=Object.assign(document.createElement("div"),{setPortalProps:function(props){initialProps=props},getInitialPortalProps:function(){return initialProps},mount:function(newParent,newPlaceholder){newPlaceholder!==lastPlaceholder&&(portalNode.unmount(),newParent.replaceChild(portalNode,newPlaceholder),parent=newParent,lastPlaceholder=newPlaceholder)},unmount:function(expectedPlaceholder){expectedPlaceholder&&expectedPlaceholder!==lastPlaceholder||parent&&lastPlaceholder&&(parent.replaceChild(lastPlaceholder,portalNode),parent=void 0,lastPlaceholder=void 0)}});return portalNode}(),[]);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{let unmount=()=>{};return setHeaderActionMenu(element=>{const mount=Object(public_.toMountPoint)(external_kbnSharedDeps_React_default.a.createElement(web_OutPortal,{node:portalNode}));return unmount=mount(element),unmount}),()=>{portalNode.unmount(),unmount()}},[portalNode,setHeaderActionMenu]),external_kbnSharedDeps_React_default.a.createElement(web_InPortal,{node:portalNode},children)}}}]);