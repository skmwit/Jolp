/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.uptime_bundle_jsonpfunction=window.uptime_bundle_jsonpfunction||[]).push([[12],{436:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return MonitorStatusAlert}));var external_kbnSharedDeps_React_=__webpack_require__(1),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),lib=__webpack_require__(32),state=__webpack_require__(101),public_=__webpack_require__(15),kibana_service=__webpack_require__(53),Either=__webpack_require__(70),selectors=__webpack_require__(37),alert_monitor_status=__webpack_require__(132),actions=__webpack_require__(35),runtime_types=__webpack_require__(45),hooks=__webpack_require__(34),use_index_pattern=__webpack_require__(96),observability_public_=__webpack_require__(16),api=__webpack_require__(51);const AlertMonitorStatus=({enabled:enabled,numTimes:numTimes,setAlertParams:setAlertParams,timerange:timerange,alertParams:alertParams})=>{const dispatch=Object(lib.useDispatch)();Object(external_kbnSharedDeps_React_.useEffect)(()=>{var _alertParams$filters$,_alertParams$filters,_alertParams$filters$2,_alertParams$filters2,_alertParams$filters$3,_alertParams$filters3,_alertParams$filters$4,_alertParams$filters4;dispatch(Object(actions.d)({dateRangeStart:"now-24h",dateRangeEnd:"now",locations:null!==(_alertParams$filters$=null===(_alertParams$filters=alertParams.filters)||void 0===_alertParams$filters?void 0:_alertParams$filters["observer.geo.name"])&&void 0!==_alertParams$filters$?_alertParams$filters$:[],ports:null!==(_alertParams$filters$2=null===(_alertParams$filters2=alertParams.filters)||void 0===_alertParams$filters2?void 0:_alertParams$filters2["url.port"])&&void 0!==_alertParams$filters$2?_alertParams$filters$2:[],tags:null!==(_alertParams$filters$3=null===(_alertParams$filters3=alertParams.filters)||void 0===_alertParams$filters3?void 0:_alertParams$filters3.tags)&&void 0!==_alertParams$filters$3?_alertParams$filters$3:[],schemes:null!==(_alertParams$filters$4=null===(_alertParams$filters4=alertParams.filters)||void 0===_alertParams$filters4?void 0:_alertParams$filters4["monitor.type"])&&void 0!==_alertParams$filters$4?_alertParams$filters$4:[]}))},[alertParams,dispatch]);const overviewFilters=Object(lib.useSelector)(selectors.v);Object(external_kbnSharedDeps_React_.useEffect)(()=>{alertParams.search&&dispatch(Object(actions.F)(alertParams.search))},[alertParams,dispatch]);const{count:count,loading:loading}=(({query:query,filters:filters})=>{const parsedFilters=void 0===filters||"string"==typeof filters?"":JSON.stringify(Array.from(Object.entries(filters))),{index_pattern:indexPattern}=Object(use_index_pattern.a)(),[esKuery,error]=Object(hooks.e)(indexPattern,query,parsedFilters),{data:data,loading:loading}=Object(observability_public_.useFetcher)(()=>Object(api.k)({dateRangeStart:"now-24h",dateRangeEnd:"now",filters:error?void 0:esKuery}),[esKuery,query]);return{count:data||{total:0,up:0,down:0},loading:loading}})({query:alertParams.search,filters:alertParams.filters}),isOldAlert=external_kbnSharedDeps_React_default.a.useMemo(()=>Object.entries(alertParams).length>0&&!Object(Either.isRight)(runtime_types.AtomicStatusCheckParamsType.decode(alertParams))&&!Object(Either.isRight)(runtime_types.GetMonitorAvailabilityParamsType.decode(alertParams)),[alertParams]),selectedFilters=Object(lib.useSelector)(selectors.E);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{var _selectedFilters$port,_selectedFilters$loca,_selectedFilters$sche,_selectedFilters$tags;alertParams.filters||null===selectedFilters||setAlertParams("filters",{"url.port":null!==(_selectedFilters$port=null==selectedFilters?void 0:selectedFilters.ports)&&void 0!==_selectedFilters$port?_selectedFilters$port:[],"observer.geo.name":null!==(_selectedFilters$loca=null==selectedFilters?void 0:selectedFilters.locations)&&void 0!==_selectedFilters$loca?_selectedFilters$loca:[],"monitor.type":null!==(_selectedFilters$sche=null==selectedFilters?void 0:selectedFilters.schemes)&&void 0!==_selectedFilters$sche?_selectedFilters$sche:[],tags:null!==(_selectedFilters$tags=null==selectedFilters?void 0:selectedFilters.tags)&&void 0!==_selectedFilters$tags?_selectedFilters$tags:[]})},[alertParams,setAlertParams,selectedFilters]),external_kbnSharedDeps_React_default.a.createElement(alert_monitor_status.a,{alertParams:alertParams,enabled:enabled,hasFilters:!(null==overviewFilters||!overviewFilters.filters),isOldAlert:isOldAlert,numTimes:numTimes,setAlertParams:setAlertParams,snapshotCount:count.total,snapshotLoading:loading,timerange:timerange})};function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function MonitorStatusAlert({core:core,plugins:plugins,params:params}){return kibana_service.a.core=core,external_kbnSharedDeps_React_default.a.createElement(lib.Provider,{store:state.a},external_kbnSharedDeps_React_default.a.createElement(public_.KibanaContextProvider,{services:{...core,...plugins}},external_kbnSharedDeps_React_default.a.createElement(AlertMonitorStatus,_extends({},params,{autocomplete:plugins.data.autocomplete}))))}}}]);