/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.canvas_bundle_jsonpfunction=window.canvas_bundle_jsonpfunction||[]).push([[4],Array(173).concat([function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(180);exports.__esModule=!0;var _Provider=_interopRequireDefault(__webpack_require__(245));exports.Provider=_Provider.default;var _connectAdvanced=_interopRequireDefault(__webpack_require__(211));exports.connectAdvanced=_connectAdvanced.default;var _Context=__webpack_require__(182);exports.ReactReduxContext=_Context.ReactReduxContext;var _connect=_interopRequireDefault(__webpack_require__(247));exports.connect=_connect.default;var _useDispatch=__webpack_require__(254);exports.useDispatch=_useDispatch.useDispatch,exports.createDispatchHook=_useDispatch.createDispatchHook;var _useSelector=__webpack_require__(255);exports.useSelector=_useSelector.useSelector,exports.createSelectorHook=_useSelector.createSelectorHook;var _useStore=__webpack_require__(217);exports.useStore=_useStore.useStore,exports.createStoreHook=_useStore.createStoreHook;var _batch=__webpack_require__(210),_reactBatchedUpdates=__webpack_require__(256);exports.batch=_reactBatchedUpdates.unstable_batchedUpdates;var _shallowEqual=_interopRequireDefault(__webpack_require__(213));exports.shallowEqual=_shallowEqual.default,(0,_batch.setBatch)(_reactBatchedUpdates.unstable_batchedUpdates)},function(module,exports,__webpack_require__){"use strict";var memo,isOldIE=function(){return void 0===memo&&(memo=Boolean(window&&document&&document.all&&!window.atob)),memo},getTarget=function(){var memo={};return function(target){if(void 0===memo[target]){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}}(),stylesInDom=[];function getIndexByIdentifier(identifier){for(var result=-1,i=0;i<stylesInDom.length;i++)if(stylesInDom[i].identifier===identifier){result=i;break}return result}function modulesToDom(list,options){for(var idCountMap={},identifiers=[],i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],count=idCountMap[id]||0,identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier),obj={css:item[1],media:item[2],sourceMap:item[3]};-1!==index?(stylesInDom[index].references++,stylesInDom[index].updater(obj)):stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1}),identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style"),attributes=options.attributes||{};if(void 0===attributes.nonce){var nonce=__webpack_require__.nc;nonce&&(attributes.nonce=nonce)}if(Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])})),"function"==typeof options.insert)options.insert(style);else{var target=getTarget(options.insert||"head");if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");target.appendChild(style)}return style}var textStore,replaceText=(textStore=[],function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")});function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}function applyToTag(style,options,obj){var css=obj.css,media=obj.media,sourceMap=obj.sourceMap;if(media?style.setAttribute("media",media):style.removeAttribute("media"),sourceMap&&btoa&&(css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")),style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}var singleton=null,singletonCounter=0;function addStyle(obj,options){var style,update,remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else style=insertStyleElement(options),update=applyToTag.bind(null,style,options),remove=function(){!function(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style)}(style)};return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}module.exports=function(list,options){(options=options||{}).singleton||"boolean"==typeof options.singleton||(options.singleton=isOldIE());var lastIdentifiers=modulesToDom(list=list||[],options);return function(newList){if(newList=newList||[],"[object Array]"===Object.prototype.toString.call(newList)){for(var i=0;i<lastIdentifiers.length;i++){var index=getIndexByIdentifier(lastIdentifiers[i]);stylesInDom[index].references--}for(var newLastIdentifiers=modulesToDom(newList,options),_i=0;_i<lastIdentifiers.length;_i++){var _index=getIndexByIdentifier(lastIdentifiers[_i]);0===stylesInDom[_index].references&&(stylesInDom[_index].updater(),stylesInDom.splice(_index,1))}lastIdentifiers=newLastIdentifiers}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];return list.toString=function(){return this.map((function(item){var content=function(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=(sourceMap=cssMapping,base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64),"/*# ".concat(data," */")),sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}var sourceMap,base64,data;return[content].join("\n")}(item,useSourceMap);return item[2]?"@media ".concat(item[2]," {").concat(content,"}"):content})).join("")},list.i=function(modules,mediaQuery,dedupe){"string"==typeof modules&&(modules=[[null,modules,""]]);var alreadyImportedModules={};if(dedupe)for(var i=0;i<this.length;i++){var id=this[i][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);dedupe&&alreadyImportedModules[item[0]]||(mediaQuery&&(item[2]?item[2]="".concat(mediaQuery," and ").concat(item[2]):item[2]=mediaQuery),list.push(item))}},list}},,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"h",(function(){return useServices})),__webpack_require__.d(__webpack_exports__,"g",(function(){return useNotifyService})),__webpack_require__.d(__webpack_exports__,"i",(function(){return withServices})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ServicesProvider})),__webpack_require__.d(__webpack_exports__,"e",(function(){return services})),__webpack_require__.d(__webpack_exports__,"f",(function(){return startServices})),__webpack_require__.d(__webpack_exports__,"c",(function(){return notifyService})),__webpack_require__.d(__webpack_exports__,"d",(function(){return platformService})),__webpack_require__.d(__webpack_exports__,"b",(function(){return expressionsService}));var external_kbnSharedDeps_Lodash_=__webpack_require__(4),public_=__webpack_require__(164);const getToast=(err,opts={})=>{const errData=Object(external_kbnSharedDeps_Lodash_.get)(err,"response")||err,errMsg=Object(public_.formatMsg)(errData),{title:title,...rest}=opts;let text;return title&&(text=errMsg),{...rest,title:title||errMsg,text:text}};var constants=__webpack_require__(7),storage=__webpack_require__(48);var common_=__webpack_require__(13);var presentationUtil_public_=__webpack_require__(165);var external_kbnSharedDeps_React_=__webpack_require__(3),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);const defaultContextValue={embeddables:{},expressions:{},notify:{},platform:{},navLink:{}},context=Object(external_kbnSharedDeps_React_.createContext)(defaultContextValue),useServices=()=>Object(external_kbnSharedDeps_React_.useContext)(context),useNotifyService=()=>useServices().notify,withServices=type=>props=>Object(external_kbnSharedDeps_React_.createElement)(type,{...props,services:useServices()}),ServicesProvider=({providers:providers={},children:children})=>{const specifiedProviders={...services,...providers},value={embeddables:specifiedProviders.embeddables.getService(),expressions:specifiedProviders.expressions.getService(),notify:specifiedProviders.notify.getService(),platform:specifiedProviders.platform.getService(),navLink:specifiedProviders.navLink.getService(),labs:specifiedProviders.labs.getService()};return external_kbnSharedDeps_React_default.a.createElement(context.Provider,{value:value},children)};function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class CanvasServiceProvider{constructor(factory){_defineProperty(this,"factory",void 0),_defineProperty(this,"service",void 0),this.factory=factory}setService(service){this.service=service}async start(coreSetup,coreStart,canvasSetupPlugins,canvasStartPlugins,appUpdater){this.service=await this.factory(coreSetup,coreStart,canvasSetupPlugins,canvasStartPlugins,appUpdater)}getService(){if(!this.service)throw new Error("Service not ready");return this.service}stop(){this.service=void 0}}const services={embeddables:new CanvasServiceProvider(async(_coreSetup,_coreStart,_setupPlugins,startPlugins)=>({getEmbeddableFactories:startPlugins.embeddable.getEmbeddableFactories})),expressions:new CanvasServiceProvider(async(coreSetup,coreStart,setupPlugins,startPlugins)=>{const{expressions:expressions,bfetch:bfetch}=setupPlugins;let cached=null;return await(async()=>(cached||(cached=(async()=>{const serverFunctionList=await coreSetup.http.get(constants.c),batchedFunction=bfetch.batchedFunction({url:constants.c}),{serialize:serialize}=Object(common_.serializeProvider)(expressions.getTypes());Object.keys(serverFunctionList).forEach(functionName=>{if(expressions.getFunction(functionName))return;expressions.registerFunction(()=>({...serverFunctionList[functionName],fn:(input,args)=>batchedFunction({functionName:functionName,args:args,context:serialize(input)})}))})})()),cached))(),setupPlugins.expressions.fork()}),notify:new CanvasServiceProvider((setup,start)=>{const toasts=start.notifications.toasts;return{error(err,opts){toasts.addDanger(getToast(err,opts))},warning(err,opts){toasts.addWarning(getToast(err,opts))},info(err,opts){toasts.add(getToast(err,opts))},success(err,opts){toasts.addSuccess(getToast(err,opts))}}}),platform:new CanvasServiceProvider((_coreSetup,coreStart)=>({getBasePath:coreStart.http.basePath.get,getBasePathInterface:()=>coreStart.http.basePath,getElasticWebsiteUrl:()=>coreStart.docLinks.ELASTIC_WEBSITE_URL,getDocLinkVersion:()=>coreStart.docLinks.DOC_LINK_VERSION,getHasWriteAccess:()=>coreStart.application.capabilities.canvas.save,getUISetting:coreStart.uiSettings.get.bind(coreStart.uiSettings),setBreadcrumbs:coreStart.chrome.setBreadcrumbs,setRecentlyAccessed:coreStart.chrome.recentlyAccessed.add,setFullscreen:coreStart.chrome.setIsVisible,getSavedObjects:()=>coreStart.savedObjects,getSavedObjectsClient:()=>coreStart.savedObjects.client,getUISettings:()=>coreStart.uiSettings})),navLink:new CanvasServiceProvider((coreSetup,_coreStart,_setupPlugins,_startPlugins,appUpdater)=>({updatePath:path=>{appUpdater.next(()=>({defaultPath:"#"+path})),Object(storage.b)().set(`${constants.z}:${coreSetup.http.basePath.get()}`,path)}})),labs:new CanvasServiceProvider(async(_coreSetup,_coreStart,_setupPlugins,startPlugins)=>({projectIDs:presentationUtil_public_.projectIDs,...startPlugins.presentationUtil.labsService}))},startServices=async(coreSetup,coreStart,canvasSetupPlugins,canvasStartPlugins,appUpdater)=>{const startPromises=Object.values(services).map(provider=>provider.start(coreSetup,coreStart,canvasSetupPlugins,canvasStartPlugins,appUpdater));await Promise.all(startPromises)},{embeddables:embeddableService,notify:notifyService,platform:platformService,navLink:navLinkService,expressions:expressionsService}=services},,function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _combineActions=_interopRequireDefault(__webpack_require__(257));exports.combineActions=_combineActions.default;var _createAction=_interopRequireDefault(__webpack_require__(202));exports.createAction=_createAction.default;var _createActions=_interopRequireDefault(__webpack_require__(260));exports.createActions=_createActions.default;var _createCurriedAction=_interopRequireDefault(__webpack_require__(269));exports.createCurriedAction=_createCurriedAction.default;var _handleAction=_interopRequireDefault(__webpack_require__(226));exports.handleAction=_handleAction.default;var _handleActions=_interopRequireDefault(__webpack_require__(272));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.handleActions=_handleActions.default},function(module,exports){module.exports=function(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getState})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getValue})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getError}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4);function getState(resolvedArg){return Object(lodash__WEBPACK_IMPORTED_MODULE_0__.get)(resolvedArg,"state",null)}function getValue(resolvedArg){return Object(lodash__WEBPACK_IMPORTED_MODULE_0__.get)(resolvedArg,"value",null)}function getError(resolvedArg){return"error"!==getState(resolvedArg)?null:Object(lodash__WEBPACK_IMPORTED_MODULE_0__.get)(resolvedArg,"error",null)}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(180);exports.__esModule=!0,exports.default=exports.ReactReduxContext=void 0;var ReactReduxContext=_interopRequireDefault(__webpack_require__(3)).default.createContext(null);exports.ReactReduxContext=ReactReduxContext;var _default=ReactReduxContext;exports.default=_default},function(module,exports,__webpack_require__){"use strict";module.exports=function(condition,format,a,b,c,d,e,f){if(!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var args=[a,b,c,d,e,f],argIndex=0;(error=new Error(format.replace(/%s/g,(function(){return args[argIndex++]})))).name="Invariant Violation"}throw error.framesToPop=1,error}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createStatefulPropHoc}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);function createStatefulPropHoc(fieldname,updater="updateValue"){return Comp=>{class WrappedControlledInput extends react__WEBPACK_IMPORTED_MODULE_0___default.a.PureComponent{constructor(props){var obj,key,value;super(props),value=ev=>{ev.target?this.setState({value:ev.target.value}):this.setState({value:ev})},(key="handleChange")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this.state={value:props[fieldname]}}UNSAFE_componentWillReceiveProps(nextProps){this.setState({value:nextProps[fieldname]})}render(){const passedProps={...this.props,[fieldname]:this.state.value,[updater]:this.handleChange};return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Comp,passedProps)}}return WrappedControlledInput.displayName=`statefulProp(${(Comp=>Comp.displayName||Comp.name||"UnnamedComponent")(Comp)})`,WrappedControlledInput}}},function(module,exports,__webpack_require__){"use strict";module.exports={ShortcutManager:__webpack_require__(327),Shortcuts:__webpack_require__(332)}},,function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.ACTION_TYPE_DELIMITER=exports.DEFAULT_NAMESPACE=void 0;exports.DEFAULT_NAMESPACE="/";exports.ACTION_TYPE_DELIMITER="||"},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;exports.default=function(value){if("object"!=typeof value||null===value)return!1;for(var proto=value;null!==Object.getPrototypeOf(proto);)proto=Object.getPrototypeOf(proto);return Object.getPrototypeOf(value)===proto}},,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getFields})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getIndices})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getDefaultIndex}));var _common_lib_constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),_common_lib_fetch__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(43),_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_services__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(177);const{esService:strings}=_i18n__WEBPACK_IMPORTED_MODULE_2__.g,getSavedObjectsClient=function(){return _services__WEBPACK_IMPORTED_MODULE_3__.d.getService().getSavedObjectsClient()},getFields=(index="_all")=>_common_lib_fetch__WEBPACK_IMPORTED_MODULE_1__.b.get(`${_services__WEBPACK_IMPORTED_MODULE_3__.d.getService().getBasePath()+_common_lib_constants__WEBPACK_IMPORTED_MODULE_0__.a}/es_fields?index=${index}`).then(({data:mapping})=>Object.keys(mapping).filter(field=>!field.startsWith("_")).sort()).catch(err=>_services__WEBPACK_IMPORTED_MODULE_3__.c.getService().error(err,{title:strings.getFieldsFetchErrorMessage(index)})),getIndices=()=>getSavedObjectsClient().find({type:"index-pattern",fields:["title"],searchFields:["title"],perPage:1e3}).then(resp=>resp.savedObjects.map(savedObject=>savedObject.attributes.title)).catch(err=>_services__WEBPACK_IMPORTED_MODULE_3__.c.getService().error(err,{title:strings.getIndicesFetchErrorMessage()})),getDefaultIndex=()=>{const defaultIndexId=_services__WEBPACK_IMPORTED_MODULE_3__.d.getService().getUISettings().get("defaultIndex");return defaultIndexId?getSavedObjectsClient().get("index-pattern",defaultIndexId).then(defaultIndex=>defaultIndex.attributes.title).catch(err=>_services__WEBPACK_IMPORTED_MODULE_3__.c.getService().error(err,{title:strings.getDefaultIndexFetchErrorMessage()})):Promise.resolve("")}},function(module,exports){function _extends(){return module.exports=_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}module.exports=_extends},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ex,$$observable=(ex=__webpack_require__(116))&&"object"==typeof ex&&"default"in ex?ex.default:ex,randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject(obj){if("object"!=typeof obj||null===obj)return!1;for(var proto=obj;null!==Object.getPrototypeOf(proto);)proto=Object.getPrototypeOf(proto);return Object.getPrototypeOf(obj)===proto}function getUndefinedStateErrorMessage(key,action){var actionType=action&&action.type;return"Given "+(actionType&&'action "'+String(actionType)+'"'||"an action")+', reducer "'+key+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function bindActionCreator(actionCreator,dispatch){return function(){return dispatch(actionCreator.apply(this,arguments))}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);return Object.getOwnPropertySymbols&&keys.push.apply(keys,Object.getOwnPropertySymbols(object)),enumerableOnly&&(keys=keys.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function compose(){for(var _len=arguments.length,funcs=new Array(_len),_key=0;_key<_len;_key++)funcs[_key]=arguments[_key];return 0===funcs.length?function(arg){return arg}:1===funcs.length?funcs[0]:funcs.reduce((function(a,b){return function(){return a(b.apply(void 0,arguments))}}))}exports.__DO_NOT_USE__ActionTypes=ActionTypes,exports.applyMiddleware=function(){for(var _len=arguments.length,middlewares=new Array(_len),_key=0;_key<_len;_key++)middlewares[_key]=arguments[_key];return function(createStore){return function(){var store=createStore.apply(void 0,arguments),_dispatch=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},middlewareAPI={getState:store.getState,dispatch:function(){return _dispatch.apply(void 0,arguments)}},chain=middlewares.map((function(middleware){return middleware(middlewareAPI)}));return _objectSpread2({},store,{dispatch:_dispatch=compose.apply(void 0,chain)(store.dispatch)})}}},exports.bindActionCreators=function(actionCreators,dispatch){if("function"==typeof actionCreators)return bindActionCreator(actionCreators,dispatch);if("object"!=typeof actionCreators||null===actionCreators)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===actionCreators?"null":typeof actionCreators)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var boundActionCreators={};for(var key in actionCreators){var actionCreator=actionCreators[key];"function"==typeof actionCreator&&(boundActionCreators[key]=bindActionCreator(actionCreator,dispatch))}return boundActionCreators},exports.combineReducers=function(reducers){for(var reducerKeys=Object.keys(reducers),finalReducers={},i=0;i<reducerKeys.length;i++){var key=reducerKeys[i];0,"function"==typeof reducers[key]&&(finalReducers[key]=reducers[key])}var shapeAssertionError,finalReducerKeys=Object.keys(finalReducers);try{!function(reducers){Object.keys(reducers).forEach((function(key){var reducer=reducers[key];if(void 0===reducer(void 0,{type:ActionTypes.INIT}))throw new Error('Reducer "'+key+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===reducer(void 0,{type:ActionTypes.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+key+"\" returned undefined when probed with a random type. Don't try to handle "+ActionTypes.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(finalReducers)}catch(e){shapeAssertionError=e}return function(state,action){if(void 0===state&&(state={}),shapeAssertionError)throw shapeAssertionError;for(var hasChanged=!1,nextState={},_i=0;_i<finalReducerKeys.length;_i++){var _key=finalReducerKeys[_i],reducer=finalReducers[_key],previousStateForKey=state[_key],nextStateForKey=reducer(previousStateForKey,action);if(void 0===nextStateForKey){var errorMessage=getUndefinedStateErrorMessage(_key,action);throw new Error(errorMessage)}nextState[_key]=nextStateForKey,hasChanged=hasChanged||nextStateForKey!==previousStateForKey}return(hasChanged=hasChanged||finalReducerKeys.length!==Object.keys(state).length)?nextState:state}},exports.compose=compose,exports.createStore=function createStore(reducer,preloadedState,enhancer){var _ref2;if("function"==typeof preloadedState&&"function"==typeof enhancer||"function"==typeof enhancer&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof preloadedState&&void 0===enhancer&&(enhancer=preloadedState,preloadedState=void 0),void 0!==enhancer){if("function"!=typeof enhancer)throw new Error("Expected the enhancer to be a function.");return enhancer(createStore)(reducer,preloadedState)}if("function"!=typeof reducer)throw new Error("Expected the reducer to be a function.");var currentReducer=reducer,currentState=preloadedState,currentListeners=[],nextListeners=currentListeners,isDispatching=!1;function ensureCanMutateNextListeners(){nextListeners===currentListeners&&(nextListeners=currentListeners.slice())}function getState(){if(isDispatching)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return currentState}function subscribe(listener){if("function"!=typeof listener)throw new Error("Expected the listener to be a function.");if(isDispatching)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var isSubscribed=!0;return ensureCanMutateNextListeners(),nextListeners.push(listener),function(){if(isSubscribed){if(isDispatching)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");isSubscribed=!1,ensureCanMutateNextListeners();var index=nextListeners.indexOf(listener);nextListeners.splice(index,1),currentListeners=null}}}function dispatch(action){if(!isPlainObject(action))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===action.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(isDispatching)throw new Error("Reducers may not dispatch actions.");try{isDispatching=!0,currentState=currentReducer(currentState,action)}finally{isDispatching=!1}for(var listeners=currentListeners=nextListeners,i=0;i<listeners.length;i++){(0,listeners[i])()}return action}function replaceReducer(nextReducer){if("function"!=typeof nextReducer)throw new Error("Expected the nextReducer to be a function.");currentReducer=nextReducer,dispatch({type:ActionTypes.REPLACE})}function observable(){var _ref,outerSubscribe=subscribe;return(_ref={subscribe:function(observer){if("object"!=typeof observer||null===observer)throw new TypeError("Expected the observer to be an object.");function observeState(){observer.next&&observer.next(getState())}return observeState(),{unsubscribe:outerSubscribe(observeState)}}})[$$observable]=function(){return this},_ref}return dispatch({type:ActionTypes.INIT}),(_ref2={dispatch:dispatch,subscribe:subscribe,getState:getState,replaceReducer:replaceReducer})[$$observable]=observable,_ref2}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;exports.default=function(value){return"function"==typeof value}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;exports.default=function(value){return"undefined"!=typeof Map&&value instanceof Map}},,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Loading}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_elastic_eui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8),_common_lib_hex_to_rgb__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(52);const Loading=({animated:animated=!1,text:text="",backgroundColor:backgroundColor="#000000"})=>{if(animated)return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"canvasLoading"},text&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",null,text," "),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiLoadingSpinner,{size:"m"}));const rgb=Object(_common_lib_hex_to_rgb__WEBPACK_IMPORTED_MODULE_2__.a)(backgroundColor);let color="text";return rgb&&Object(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.isColorDark)(rgb[0],rgb[1],rgb[2])&&(color="ghost"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"canvasLoading"},text&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",null,text," "),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiIcon,{color:color,type:"clock"}))};Loading.defaultProps={animated:!1,backgroundColor:"#000000",text:""}},function(module,exports,__webpack_require__){var factory;factory=function(__WEBPACK_EXTERNAL_MODULE_2__){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(2),_react2=_interopRequireDefault(_react),_reactLibAdler2=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Style=function(_Component){function Style(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Style);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Style.__proto__||Object.getPrototypeOf(Style)).call(this,props));return _this.getStyleString=function(){if(_this.props.children instanceof Array){var styleString=_this.props.children.filter((function(child){return!(0,_react.isValidElement)(child)&&"string"==typeof child}));if(styleString.length>1)throw new Error("Multiple style objects as direct descedents of a Style component are not supported ("+styleString.length+" style objects detected): \n\n"+styleString[0]);return styleString[0]}return"string"!=typeof _this.props.children||(0,_react.isValidElement)(_this.props.children)?null:_this.props.children},_this.getRootElement=function(){if(_this.props.children instanceof Array){var rootElement=_this.props.children.filter((function(child){return(0,_react.isValidElement)(child)}));return rootElement[0]}return(0,_react.isValidElement)(_this.props.children)?_this.props.children:null},_this.getRootSelectors=function(rootElement){var rootSelectors=[];return rootElement.props.id&&rootSelectors.push("#"+rootElement.props.id),rootElement.props.className&&rootElement.props.className.trim().split(/\s+/g).forEach((function(className){return rootSelectors.push(className)})),rootSelectors.length||"function"==typeof rootElement.type||rootSelectors.push(rootElement.type),rootSelectors},_this.processCSSText=function(styleString,scopeClassName,rootSelectors){return styleString.replace(/\s*\/\/(?![^(]*\)).*|\s*\/\*.*\*\//g,"").replace(/\s\s+/g," ").split("}").map((function(fragment){var isDeclarationBodyPattern=/.*:.*;/g,isLastItemDeclarationBodyPattern=/.*:.*(;|$|\s+)/g,isAtRulePattern=/\s*@/g,isKeyframeOffsetPattern=/\s*(([0-9][0-9]?|100)\s*%)|\s*(to|from)\s*$/g;return fragment.split("{").map((function(statement,i,arr){if(!statement.trim().length)return"";var isDeclarationBodyItemWithOptionalSemicolon=arr.length-1===i&&statement.match(isLastItemDeclarationBodyPattern);if(statement.match(isDeclarationBodyPattern)||isDeclarationBodyItemWithOptionalSemicolon)return _this.escapeTextContentForBrowser(statement);var selector=statement;return scopeClassName&&!/:target/gi.test(selector)?selector.match(isAtRulePattern)||selector.match(isKeyframeOffsetPattern)?selector:_this.scopeSelector(scopeClassName,selector,rootSelectors):selector})).join("{\n")})).join("}\n")},_this.escaper=function(match){return{">":"&gt;","<":"&lt;"}[match]},_this.escapeTextContentForBrowser=function(text){return(""+text).replace(/[><]/g,_this.escaper)},_this.scopeSelector=function(scopeClassName,selector,rootSelectors){for(var scopedSelector=[],selectors=selector.split(/,(?![^(|[]*\)|\])/g),i=0;i<selectors.length;i++){var containsSelector=void 0,unionSelector=void 0;if(rootSelectors.length&&rootSelectors.some((function(rootSelector){return selector.match(rootSelector)}))){unionSelector=selectors[i];var escapedRootSelectors=rootSelectors.map((function(rootSelector){return rootSelector.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}));unionSelector=unionSelector.replace(new RegExp("("+escapedRootSelectors.join("|")+")"),"$1"+scopeClassName),containsSelector=scopeClassName+" "+selectors[i],scopedSelector.push(unionSelector,containsSelector)}else containsSelector=scopeClassName+" "+selectors[i],scopedSelector.push(containsSelector)}return scopedSelector.join(", ")},_this.getScopeClassName=function(styleString,rootElement){var hash=styleString;return rootElement&&(_this.pepper="",_this.traverseObjectToGeneratePepper(rootElement),hash+=_this.pepper),"s"+(0,_reactLibAdler2.default)(hash)},_this.traverseObjectToGeneratePepper=function(obj){var depth=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(depth>32||_this.pepper.length>1e4))for(var prop in obj){var isPropReactInternal=/^[_$]|type|ref|^value$/.test(prop);obj[prop]&&"object"===_typeof(obj[prop])&&!isPropReactInternal?_this.traverseObjectToGeneratePepper(obj[prop],depth+1):obj[prop]&&!isPropReactInternal&&"function"!=typeof obj[prop]&&(_this.pepper+=obj[prop])}},_this.isVoidElement=function(type){return["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].some((function(voidType){return type===voidType}))},_this.addCSSTextToHead=function(cssText){if(cssText.length){var cssTextHash=(0,_reactLibAdler2.default)(cssText);window._reactiveStyle.cssTextHashesAddedToHead.some((function(hash){return hash===cssTextHash}))||(window._reactiveStyle.el.innerHTML+=cssText,window._reactiveStyle.cssTextHashesAddedToHead.push(cssTextHash))}},_this.createStyleElement=function(cssText,scopeClassName){return _react2.default.createElement("style",{type:"text/css",key:scopeClassName,ref:function(c){return _this._style=c},dangerouslySetInnerHTML:{__html:cssText||""}})},_this.getNewChildrenForCloneElement=function(cssText,rootElement,scopeClassName){return[_this.createStyleElement(cssText,scopeClassName)].concat(rootElement.props.children)},_this.scopeClassNameCache={},_this.scopedCSSTextCache={},_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Style,_Component),_createClass(Style,[{key:"render",value:function(){if(!this.props.children)return this.createStyleElement();var styleString=this.getStyleString(),rootElement=this.getRootElement();if(!styleString&&rootElement)return rootElement.props.children;if(styleString&&!rootElement)return this.createStyleElement(this.processCSSText(styleString),this.getScopeClassName(styleString,rootElement));var rootElementClassNames=rootElement.props.className?rootElement.props.className+" ":"",scopeClassName=void 0,scopedCSSText=void 0,scopeClassNameAddress=rootElementClassNames+(rootElement.props.id?rootElement.props.id:"")+styleString;return this.scopeClassNameCache[scopeClassNameAddress]?(scopeClassName=this.scopeClassNameCache[scopeClassNameAddress],scopedCSSText=this.scopedCSSTextCache[scopeClassName]):(scopeClassName=this.getScopeClassName(styleString,rootElement),scopedCSSText=this.processCSSText(styleString,"."+scopeClassName,this.getRootSelectors(rootElement)),this.scopeClassNameCache[scopeClassNameAddress]=scopeClassName,this.scopedCSSTextCache[scopeClassName]=scopedCSSText),(0,_react.cloneElement)(rootElement,_extends({},rootElement.props,{className:""+rootElementClassNames+scopeClassName}),this.getNewChildrenForCloneElement(scopedCSSText,rootElement,scopeClassName))}}]),Style}(_react.Component);Style.it=function(cssText,rootElement){return _react2.default.createElement(Style,null,cssText,rootElement)},exports.default=Style},function(module,exports){"use strict";module.exports=function(data){for(var a=1,b=0,i=0,l=data.length,m=-4&l;i<m;){for(var n=Math.min(i+4096,m);i<n;i+=4)b+=(a+=data.charCodeAt(i))+(a+=data.charCodeAt(i+1))+(a+=data.charCodeAt(i+2))+(a+=data.charCodeAt(i+3));a%=65521,b%=65521}for(;i<l;i++)b+=a+=data.charCodeAt(i);return(a%=65521)|(b%=65521)<<16}},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE_2__}])},module.exports=factory(__webpack_require__(3))},,,function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;var _batch=__webpack_require__(210),nullListeners={notify:function(){}};var Subscription=function(){function Subscription(store,parentSub){this.store=store,this.parentSub=parentSub,this.unsubscribe=null,this.listeners=nullListeners,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var _proto=Subscription.prototype;return _proto.addNestedSub=function(listener){return this.trySubscribe(),this.listeners.subscribe(listener)},_proto.notifyNestedSubs=function(){this.listeners.notify()},_proto.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},_proto.isSubscribed=function(){return Boolean(this.unsubscribe)},_proto.trySubscribe=function(){var batch,first,last;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=(batch=(0,_batch.getBatch)(),first=null,last=null,{clear:function(){first=null,last=null},notify:function(){batch((function(){for(var listener=first;listener;)listener.callback(),listener=listener.next}))},get:function(){for(var listeners=[],listener=first;listener;)listeners.push(listener),listener=listener.next;return listeners},subscribe:function(callback){var isSubscribed=!0,listener=last={callback:callback,next:null,prev:last};return listener.prev?listener.prev.next=listener:first=listener,function(){isSubscribed&&null!==first&&(isSubscribed=!1,listener.next?listener.next.prev=listener.prev:last=listener.prev,listener.prev?listener.prev.next=listener.next:first=listener.next)}}}))},_proto.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=nullListeners)},Subscription}();exports.default=Subscription},function(module,exports){module.exports=function(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=function(type,payloadCreator,metaCreator){void 0===payloadCreator&&(payloadCreator=_identity.default);(0,_invariant.default)((0,_isFunction.default)(payloadCreator)||(0,_isNull.default)(payloadCreator),"Expected payloadCreator to be a function, undefined or null");var finalPayloadCreator=(0,_isNull.default)(payloadCreator)||payloadCreator===_identity.default?_identity.default:function(head){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return head instanceof Error?head:payloadCreator.apply(void 0,[head].concat(args))},hasMeta=(0,_isFunction.default)(metaCreator),typeString=type.toString(),actionCreator=function(){var payload=finalPayloadCreator.apply(void 0,arguments),action={type:type};return payload instanceof Error&&(action.error=!0),void 0!==payload&&(action.payload=payload),hasMeta&&(action.meta=metaCreator.apply(void 0,arguments)),action};return actionCreator.toString=function(){return typeString},actionCreator};var _invariant=_interopRequireDefault(__webpack_require__(183)),_isFunction=_interopRequireDefault(__webpack_require__(193)),_identity=_interopRequireDefault(__webpack_require__(203)),_isNull=_interopRequireDefault(__webpack_require__(259));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;exports.default=function(value){return value}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=function(object){if((0,_isMap.default)(object))return Array.from(object.keys());if("undefined"!=typeof Reflect&&"function"==typeof Reflect.ownKeys)return Reflect.ownKeys(object);var keys=Object.getOwnPropertyNames(object);"function"==typeof Object.getOwnPropertySymbols&&(keys=keys.concat(Object.getOwnPropertySymbols(object)));return keys};var obj,_isMap=(obj=__webpack_require__(194))&&obj.__esModule?obj:{default:obj}},function(module,exports,__webpack_require__){"use strict";module.exports=function(key){return"shift"===key||"ctrl"===key||"alt"===key||"meta"===key}},function(module,exports,__webpack_require__){"use strict";var isArray=Array.isArray,keyList=Object.keys,hasProp=Object.prototype.hasOwnProperty,hasElementType="undefined"!=typeof Element;module.exports=function(a,b){try{return function equal(a,b){if(a===b)return!0;if(a&&b&&"object"==typeof a&&"object"==typeof b){var i,length,key,arrA=isArray(a),arrB=isArray(b);if(arrA&&arrB){if((length=a.length)!=b.length)return!1;for(i=length;0!=i--;)if(!equal(a[i],b[i]))return!1;return!0}if(arrA!=arrB)return!1;var dateA=a instanceof Date,dateB=b instanceof Date;if(dateA!=dateB)return!1;if(dateA&&dateB)return a.getTime()==b.getTime();var regexpA=a instanceof RegExp,regexpB=b instanceof RegExp;if(regexpA!=regexpB)return!1;if(regexpA&&regexpB)return a.toString()==b.toString();var keys=keyList(a);if((length=keys.length)!==keyList(b).length)return!1;for(i=length;0!=i--;)if(!hasProp.call(b,keys[i]))return!1;if(hasElementType&&a instanceof Element&&b instanceof Element)return a===b;for(i=length;0!=i--;)if(!("_owner"===(key=keys[i])&&a.$$typeof||equal(a[key],b[key])))return!1;return!0}return a!=a&&b!=b}(a,b)}catch(error){if(error.message&&error.message.match(/stack|recursion/i)||-2146828260===error.number)return console.warn("Warning: react-fast-compare does not handle circular references.",error.name,error.message),!1;throw error}}},,,function(module,exports,__webpack_require__){var _typeof=__webpack_require__(246);function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}module.exports=function(obj){if(obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.getBatch=exports.setBatch=void 0;var batch=function(callback){callback()};exports.setBatch=function(newBatch){return batch=newBatch};exports.getBatch=function(){return batch}},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(209),_interopRequireDefault=__webpack_require__(180);exports.__esModule=!0,exports.default=function(selectorFactory,_ref){void 0===_ref&&(_ref={});var _ref2=_ref,_ref2$getDisplayName=_ref2.getDisplayName,getDisplayName=void 0===_ref2$getDisplayName?function(name){return"ConnectAdvanced("+name+")"}:_ref2$getDisplayName,_ref2$methodName=_ref2.methodName,methodName=void 0===_ref2$methodName?"connectAdvanced":_ref2$methodName,_ref2$renderCountProp=_ref2.renderCountProp,renderCountProp=void 0===_ref2$renderCountProp?void 0:_ref2$renderCountProp,_ref2$shouldHandleSta=_ref2.shouldHandleStateChanges,shouldHandleStateChanges=void 0===_ref2$shouldHandleSta||_ref2$shouldHandleSta,_ref2$storeKey=_ref2.storeKey,storeKey=void 0===_ref2$storeKey?"store":_ref2$storeKey,_ref2$forwardRef=(_ref2.withRef,_ref2.forwardRef),forwardRef=void 0!==_ref2$forwardRef&&_ref2$forwardRef,_ref2$context=_ref2.context,context=void 0===_ref2$context?_Context.ReactReduxContext:_ref2$context,connectOptions=(0,_objectWithoutPropertiesLoose2.default)(_ref2,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]);0;var Context=context;return function(WrappedComponent){var wrappedComponentName=WrappedComponent.displayName||WrappedComponent.name||"Component",displayName=getDisplayName(wrappedComponentName),selectorFactoryOptions=(0,_extends2.default)({},connectOptions,{getDisplayName:getDisplayName,methodName:methodName,renderCountProp:renderCountProp,shouldHandleStateChanges:shouldHandleStateChanges,storeKey:storeKey,displayName:displayName,wrappedComponentName:wrappedComponentName,WrappedComponent:WrappedComponent}),pure=connectOptions.pure;var usePureOnlyMemo=pure?_react.useMemo:function(callback){return callback()};function ConnectFunction(props){var _useMemo=(0,_react.useMemo)((function(){var forwardedRef=props.forwardedRef,wrapperProps=(0,_objectWithoutPropertiesLoose2.default)(props,["forwardedRef"]);return[props.context,forwardedRef,wrapperProps]}),[props]),propsContext=_useMemo[0],forwardedRef=_useMemo[1],wrapperProps=_useMemo[2],ContextToUse=(0,_react.useMemo)((function(){return propsContext&&propsContext.Consumer&&(0,_reactIs.isContextConsumer)(_react.default.createElement(propsContext.Consumer,null))?propsContext:Context}),[propsContext,Context]),contextValue=(0,_react.useContext)(ContextToUse),didStoreComeFromProps=Boolean(props.store)&&Boolean(props.store.getState)&&Boolean(props.store.dispatch);Boolean(contextValue)&&Boolean(contextValue.store);var store=didStoreComeFromProps?props.store:contextValue.store,childPropsSelector=(0,_react.useMemo)((function(){return function(store){return selectorFactory(store.dispatch,selectorFactoryOptions)}(store)}),[store]),_useMemo2=(0,_react.useMemo)((function(){if(!shouldHandleStateChanges)return NO_SUBSCRIPTION_ARRAY;var subscription=new _Subscription.default(store,didStoreComeFromProps?null:contextValue.subscription),notifyNestedSubs=subscription.notifyNestedSubs.bind(subscription);return[subscription,notifyNestedSubs]}),[store,didStoreComeFromProps,contextValue]),subscription=_useMemo2[0],notifyNestedSubs=_useMemo2[1],overriddenContextValue=(0,_react.useMemo)((function(){return didStoreComeFromProps?contextValue:(0,_extends2.default)({},contextValue,{subscription:subscription})}),[didStoreComeFromProps,contextValue,subscription]),_useReducer=(0,_react.useReducer)(storeStateUpdatesReducer,EMPTY_ARRAY,initStateUpdates),previousStateUpdateResult=_useReducer[0][0],forceComponentUpdateDispatch=_useReducer[1];if(previousStateUpdateResult&&previousStateUpdateResult.error)throw previousStateUpdateResult.error;var lastChildProps=(0,_react.useRef)(),lastWrapperProps=(0,_react.useRef)(wrapperProps),childPropsFromStoreUpdate=(0,_react.useRef)(),renderIsScheduled=(0,_react.useRef)(!1),actualChildProps=usePureOnlyMemo((function(){return childPropsFromStoreUpdate.current&&wrapperProps===lastWrapperProps.current?childPropsFromStoreUpdate.current:childPropsSelector(store.getState(),wrapperProps)}),[store,previousStateUpdateResult,wrapperProps]);useIsomorphicLayoutEffectWithArgs(captureWrapperProps,[lastWrapperProps,lastChildProps,renderIsScheduled,wrapperProps,actualChildProps,childPropsFromStoreUpdate,notifyNestedSubs]),useIsomorphicLayoutEffectWithArgs(subscribeUpdates,[shouldHandleStateChanges,store,subscription,childPropsSelector,lastWrapperProps,lastChildProps,renderIsScheduled,childPropsFromStoreUpdate,notifyNestedSubs,forceComponentUpdateDispatch],[store,subscription,childPropsSelector]);var renderedWrappedComponent=(0,_react.useMemo)((function(){return _react.default.createElement(WrappedComponent,(0,_extends2.default)({},actualChildProps,{ref:forwardedRef}))}),[forwardedRef,WrappedComponent,actualChildProps]);return(0,_react.useMemo)((function(){return shouldHandleStateChanges?_react.default.createElement(ContextToUse.Provider,{value:overriddenContextValue},renderedWrappedComponent):renderedWrappedComponent}),[ContextToUse,renderedWrappedComponent,overriddenContextValue])}var Connect=pure?_react.default.memo(ConnectFunction):ConnectFunction;if(Connect.WrappedComponent=WrappedComponent,Connect.displayName=displayName,forwardRef){var forwarded=_react.default.forwardRef((function(props,ref){return _react.default.createElement(Connect,(0,_extends2.default)({},props,{forwardedRef:ref}))}));return forwarded.displayName=displayName,forwarded.WrappedComponent=WrappedComponent,(0,_hoistNonReactStatics.default)(forwarded,WrappedComponent)}return(0,_hoistNonReactStatics.default)(Connect,WrappedComponent)}};var _extends2=_interopRequireDefault(__webpack_require__(191)),_objectWithoutPropertiesLoose2=_interopRequireDefault(__webpack_require__(201)),_hoistNonReactStatics=_interopRequireDefault(__webpack_require__(118)),_react=_interopRequireWildcard(__webpack_require__(3)),_reactIs=__webpack_require__(119),_Subscription=_interopRequireDefault(__webpack_require__(200)),_useIsomorphicLayoutEffect=__webpack_require__(212),_Context=__webpack_require__(182),EMPTY_ARRAY=[],NO_SUBSCRIPTION_ARRAY=[null,null];function storeStateUpdatesReducer(state,action){var updateCount=state[1];return[action.payload,updateCount+1]}function useIsomorphicLayoutEffectWithArgs(effectFunc,effectArgs,dependencies){(0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)((function(){return effectFunc.apply(void 0,effectArgs)}),dependencies)}function captureWrapperProps(lastWrapperProps,lastChildProps,renderIsScheduled,wrapperProps,actualChildProps,childPropsFromStoreUpdate,notifyNestedSubs){lastWrapperProps.current=wrapperProps,lastChildProps.current=actualChildProps,renderIsScheduled.current=!1,childPropsFromStoreUpdate.current&&(childPropsFromStoreUpdate.current=null,notifyNestedSubs())}function subscribeUpdates(shouldHandleStateChanges,store,subscription,childPropsSelector,lastWrapperProps,lastChildProps,renderIsScheduled,childPropsFromStoreUpdate,notifyNestedSubs,forceComponentUpdateDispatch){if(shouldHandleStateChanges){var didUnsubscribe=!1,lastThrownError=null,checkForUpdates=function(){if(!didUnsubscribe){var newChildProps,error,latestStoreState=store.getState();try{newChildProps=childPropsSelector(latestStoreState,lastWrapperProps.current)}catch(e){error=e,lastThrownError=e}error||(lastThrownError=null),newChildProps===lastChildProps.current?renderIsScheduled.current||notifyNestedSubs():(lastChildProps.current=newChildProps,childPropsFromStoreUpdate.current=newChildProps,renderIsScheduled.current=!0,forceComponentUpdateDispatch({type:"STORE_UPDATED",payload:{error:error}}))}};subscription.onStateChange=checkForUpdates,subscription.trySubscribe(),checkForUpdates();return function(){if(didUnsubscribe=!0,subscription.tryUnsubscribe(),subscription.onStateChange=null,lastThrownError)throw lastThrownError}}}var initStateUpdates=function(){return[null,0]}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.useIsomorphicLayoutEffect=void 0;var _react=__webpack_require__(3),useIsomorphicLayoutEffect="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?_react.useLayoutEffect:_react.useEffect;exports.useIsomorphicLayoutEffect=useIsomorphicLayoutEffect},function(module,exports,__webpack_require__){"use strict";function is(x,y){return x===y?0!==x||0!==y||1/x==1/y:x!=x&&y!=y}exports.__esModule=!0,exports.default=function(objA,objB){if(is(objA,objB))return!0;if("object"!=typeof objA||null===objA||"object"!=typeof objB||null===objB)return!1;var keysA=Object.keys(objA),keysB=Object.keys(objB);if(keysA.length!==keysB.length)return!1;for(var i=0;i<keysA.length;i++)if(!Object.prototype.hasOwnProperty.call(objB,keysA[i])||!is(objA[keysA[i]],objB[keysA[i]]))return!1;return!0}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(180);exports.__esModule=!0,exports.wrapMapToPropsConstant=function(getConstant){return function(dispatch,options){var constant=getConstant(dispatch,options);function constantSelector(){return constant}return constantSelector.dependsOnOwnProps=!1,constantSelector}},exports.getDependsOnOwnProps=getDependsOnOwnProps,exports.wrapMapToPropsFunc=function(mapToProps,methodName){return function(dispatch,_ref){_ref.displayName;var proxy=function(stateOrDispatch,ownProps){return proxy.dependsOnOwnProps?proxy.mapToProps(stateOrDispatch,ownProps):proxy.mapToProps(stateOrDispatch)};return proxy.dependsOnOwnProps=!0,proxy.mapToProps=function(stateOrDispatch,ownProps){proxy.mapToProps=mapToProps,proxy.dependsOnOwnProps=getDependsOnOwnProps(mapToProps);var props=proxy(stateOrDispatch,ownProps);return"function"==typeof props&&(proxy.mapToProps=props,proxy.dependsOnOwnProps=getDependsOnOwnProps(props),props=proxy(stateOrDispatch,ownProps)),props},proxy}};_interopRequireDefault(__webpack_require__(215));function getDependsOnOwnProps(mapToProps){return null!==mapToProps.dependsOnOwnProps&&void 0!==mapToProps.dependsOnOwnProps?Boolean(mapToProps.dependsOnOwnProps):1!==mapToProps.length}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(180);exports.__esModule=!0,exports.default=function(value,displayName,methodName){(0,_isPlainObject.default)(value)||(0,_warning.default)(methodName+"() in "+displayName+" must return a plain object. Instead received "+value+".")};var _isPlainObject=_interopRequireDefault(__webpack_require__(249)),_warning=_interopRequireDefault(__webpack_require__(216))},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=function(message){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(message);try{throw new Error(message)}catch(e){}}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.createStoreHook=createStoreHook,exports.useStore=void 0;var _react=__webpack_require__(3),_Context=__webpack_require__(182),_useReduxContext2=__webpack_require__(218);function createStoreHook(context){void 0===context&&(context=_Context.ReactReduxContext);var useReduxContext=context===_Context.ReactReduxContext?_useReduxContext2.useReduxContext:function(){return(0,_react.useContext)(context)};return function(){return useReduxContext().store}}var useStore=createStoreHook();exports.useStore=useStore},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.useReduxContext=function(){0;return(0,_react.useContext)(_Context.ReactReduxContext)};var _react=__webpack_require__(3),_Context=__webpack_require__(182)},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;exports.default=function(value){return 0===value.length}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;exports.default=function(value){return value.toString()}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;exports.default=function(value){return"string"==typeof value}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;exports.default=function(value){return null==value}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;var obj,_toCamelCase=(obj=__webpack_require__(263))&&obj.__esModule?obj:{default:obj};exports.default=function(type){return-1===type.indexOf("/")?(0,_toCamelCase.default)(type):type.split("/").map(_toCamelCase.default).join("/")}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;var _constants=__webpack_require__(187),_ownKeys=_interopRequireDefault(__webpack_require__(204)),_get=_interopRequireDefault(__webpack_require__(225));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(predicate){return function flatten(map,_temp,partialFlatMap,partialFlatActionType){var _ref=void 0===_temp?{}:_temp,_ref$namespace=_ref.namespace,namespace=void 0===_ref$namespace?_constants.DEFAULT_NAMESPACE:_ref$namespace,prefix=_ref.prefix;return void 0===partialFlatMap&&(partialFlatMap={}),void 0===partialFlatActionType&&(partialFlatActionType=""),(0,_ownKeys.default)(map).forEach((function(type){var nextNamespace=function(type){return partialFlatActionType||!prefix||prefix&&new RegExp("^"+prefix+namespace).test(type)?type:""+prefix+namespace+type}(function(type){var _ref2;if(!partialFlatActionType)return type;var types=type.toString().split(_constants.ACTION_TYPE_DELIMITER),partials=partialFlatActionType.split(_constants.ACTION_TYPE_DELIMITER);return(_ref2=[]).concat.apply(_ref2,partials.map((function(p){return types.map((function(t){return""+p+namespace+t}))}))).join(_constants.ACTION_TYPE_DELIMITER)}(type)),mapValue=(0,_get.default)(type,map);predicate(mapValue)?flatten(mapValue,{namespace:namespace,prefix:prefix},partialFlatMap,nextNamespace):partialFlatMap[nextNamespace]=mapValue})),partialFlatMap}}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=function(key,x){return(0,_isMap.default)(x)?x.get(key):x[key]};var obj,_isMap=(obj=__webpack_require__(194))&&obj.__esModule?obj:{default:obj}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=function(type,reducer,defaultState){void 0===reducer&&(reducer=_identity.default);var types=(0,_toString.default)(type).split(_constants.ACTION_TYPE_DELIMITER);(0,_invariant.default)(!(0,_isUndefined.default)(defaultState),"defaultState for reducer handling "+types.join(", ")+" should be defined"),(0,_invariant.default)((0,_isFunction.default)(reducer)||(0,_isPlainObject.default)(reducer),"Expected reducer to be a function or object with next and throw reducers");var _ref=(0,_isFunction.default)(reducer)?[reducer,reducer]:[reducer.next,reducer.throw].map((function(aReducer){return(0,_isNil.default)(aReducer)?_identity.default:aReducer})),nextReducer=_ref[0],throwReducer=_ref[1];return function(state,action){void 0===state&&(state=defaultState);var actionType=action.type;return actionType&&-1!==types.indexOf((0,_toString.default)(actionType))?(!0===action.error?throwReducer:nextReducer)(state,action):state}};var _invariant=_interopRequireDefault(__webpack_require__(183)),_isFunction=_interopRequireDefault(__webpack_require__(193)),_isPlainObject=_interopRequireDefault(__webpack_require__(188)),_identity=_interopRequireDefault(__webpack_require__(203)),_isNil=_interopRequireDefault(__webpack_require__(222)),_isUndefined=_interopRequireDefault(__webpack_require__(271)),_toString=_interopRequireDefault(__webpack_require__(220)),_constants=__webpack_require__(187);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__,saveAs=saveAs||function(view){"use strict";if(!(void 0===view||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var doc=view.document,get_URL=function(){return view.URL||view.webkitURL||view},save_link=doc.createElementNS("http://www.w3.org/1999/xhtml","a"),can_use_save_link="download"in save_link,is_safari=/constructor/i.test(view.HTMLElement)||view.safari,is_chrome_ios=/CriOS\/[\d]+/.test(navigator.userAgent),throw_outside=function(ex){(view.setImmediate||view.setTimeout)((function(){throw ex}),0)},revoke=function(file){setTimeout((function(){"string"==typeof file?get_URL().revokeObjectURL(file):file.remove()}),4e4)},auto_bom=function(blob){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)?new Blob([String.fromCharCode(65279),blob],{type:blob.type}):blob},FileSaver=function(blob,name,no_auto_bom){no_auto_bom||(blob=auto_bom(blob));var object_url,filesaver=this,force="application/octet-stream"===blob.type,dispatch_all=function(){!function(filesaver,event_types,event){for(var i=(event_types=[].concat(event_types)).length;i--;){var listener=filesaver["on"+event_types[i]];if("function"==typeof listener)try{listener.call(filesaver,event||filesaver)}catch(ex){throw_outside(ex)}}}(filesaver,"writestart progress write writeend".split(" "))};if(filesaver.readyState=filesaver.INIT,can_use_save_link)return object_url=get_URL().createObjectURL(blob),void setTimeout((function(){var node,event;save_link.href=object_url,save_link.download=name,node=save_link,event=new MouseEvent("click"),node.dispatchEvent(event),dispatch_all(),revoke(object_url),filesaver.readyState=filesaver.DONE}));!function(){if((is_chrome_ios||force&&is_safari)&&view.FileReader){var reader=new FileReader;return reader.onloadend=function(){var url=is_chrome_ios?reader.result:reader.result.replace(/^data:[^;]*;/,"data:attachment/file;");view.open(url,"_blank")||(view.location.href=url),url=void 0,filesaver.readyState=filesaver.DONE,dispatch_all()},reader.readAsDataURL(blob),void(filesaver.readyState=filesaver.INIT)}(object_url||(object_url=get_URL().createObjectURL(blob)),force)?view.location.href=object_url:view.open(object_url,"_blank")||(view.location.href=object_url);filesaver.readyState=filesaver.DONE,dispatch_all(),revoke(object_url)}()},FS_proto=FileSaver.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(blob,name,no_auto_bom){return name=name||blob.name||"download",no_auto_bom||(blob=auto_bom(blob)),navigator.msSaveOrOpenBlob(blob,name)}:(FS_proto.abort=function(){},FS_proto.readyState=FS_proto.INIT=0,FS_proto.WRITING=1,FS_proto.DONE=2,FS_proto.error=FS_proto.onwritestart=FS_proto.onprogress=FS_proto.onwrite=FS_proto.onabort=FS_proto.onerror=FS_proto.onwriteend=null,function(blob,name,no_auto_bom){return new FileSaver(blob,name||blob.name||"download",no_auto_bom)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */module.exports?module.exports.saveAs=saveAs:null!==__webpack_require__(278)&&null!==__webpack_require__(228)&&(void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return saveAs}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(module,exports){(function(__webpack_amd_options__){module.exports=__webpack_amd_options__}).call(this,{})},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(283)},function(module,exports,__webpack_require__){"use strict";module.exports=function(condition,message){if(!condition)throw new Error("Invariant failed")}},function(module,exports,__webpack_require__){"use strict";var deselectCurrent=__webpack_require__(293);module.exports=function(text,options){var debug,message,reselectPrevious,range,selection,mark,success=!1;options||(options={}),debug=options.debug||!1;try{if(reselectPrevious=deselectCurrent(),range=document.createRange(),selection=document.getSelection(),(mark=document.createElement("span")).textContent=text,mark.style.all="unset",mark.style.position="fixed",mark.style.top=0,mark.style.clip="rect(0, 0, 0, 0)",mark.style.whiteSpace="pre",mark.style.webkitUserSelect="text",mark.style.MozUserSelect="text",mark.style.msUserSelect="text",mark.style.userSelect="text",mark.addEventListener("copy",(function(e){e.stopPropagation(),options.format&&(e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData(options.format,text))})),document.body.appendChild(mark),range.selectNodeContents(mark),selection.addRange(range),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");success=!0}catch(err){debug&&console.error("unable to copy using execCommand: ",err),debug&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(options.format||"text",text),success=!0}catch(err){debug&&console.error("unable to copy using clipboardData: ",err),debug&&console.error("falling back to prompt"),message=function(message){var copyKey=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return message.replace(/#{\s*key\s*}/g,copyKey)}("message"in options?options.message:"Copy to clipboard: #{key}, Enter"),window.prompt(message,text)}}finally{selection&&("function"==typeof selection.removeRange?selection.removeRange(range):selection.removeAllRanges()),mark&&document.body.removeChild(mark),reselectPrevious()}return success}},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(303);case"v7light":return __webpack_require__(305);case"v8dark":return __webpack_require__(307);case"v8light":return __webpack_require__(309)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_platform=__webpack_require__(330),_platform2=(obj=_platform)&&obj.__esModule?obj:{default:obj};exports.default={getPlatformName:function(){var os=_platform2.default.os.family||"";return os=os.toLowerCase().replace(/ /g,""),os=/\bwin/.test(os)?"windows":/darwin|osx/.test(os)?"osx":/linux|freebsd|sunos|ubuntu|debian|fedora|redhat|suse/.test(os)?"linux":"other"},getCharacter:function(event){return null==event.which?String.fromCharCode(event.keyCode):0!==event.which&&0!==event.charCode?String.fromCharCode(event.which):null}},module.exports=exports.default},function(module,exports){function on(element,event,callback,capture){return!element.addEventListener&&(event="on"+event),(element.addEventListener||element.attachEvent).call(element,event,callback,capture),callback}module.exports=on,module.exports.on=on,module.exports.off=function(element,event,callback,capture){return!element.removeEventListener&&(event="on"+event),(element.removeEventListener||element.detachEvent).call(element,event,callback,capture),callback}},function(module,exports,__webpack_require__){"use strict";module.exports=function(e){var SPECIAL_KEYS_MAP,SPECIAL_CHARACTERS_MAP;if(SPECIAL_KEYS_MAP=__webpack_require__(236),SPECIAL_CHARACTERS_MAP=__webpack_require__(344),"keypress"===e.type){var character=String.fromCharCode(e.which);return e.shiftKey||(character=character.toLowerCase()),character}return void 0!==SPECIAL_KEYS_MAP[e.which]?SPECIAL_KEYS_MAP[e.which]:void 0!==SPECIAL_CHARACTERS_MAP[e.which]?SPECIAL_CHARACTERS_MAP[e.which]:String.fromCharCode(e.which).toLowerCase()}},function(module,exports,__webpack_require__){"use strict";module.exports={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",173:"minus",187:"plus",189:"minus",224:"meta"};for(var i=1;i<20;++i)module.exports[111+i]="f"+i;for(i=0;i<=9;++i)module.exports[i+96]=i},,,,,,,,,function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(180),_interopRequireWildcard=__webpack_require__(209);exports.__esModule=!0,exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(3)),_Context=(_interopRequireDefault(__webpack_require__(176)),__webpack_require__(182)),_Subscription=_interopRequireDefault(__webpack_require__(200));var _default=function(_ref){var store=_ref.store,context=_ref.context,children=_ref.children,contextValue=(0,_react.useMemo)((function(){var subscription=new _Subscription.default(store);return subscription.onStateChange=subscription.notifyNestedSubs,{store:store,subscription:subscription}}),[store]),previousState=(0,_react.useMemo)((function(){return store.getState()}),[store]);(0,_react.useEffect)((function(){var subscription=contextValue.subscription;return subscription.trySubscribe(),previousState!==store.getState()&&subscription.notifyNestedSubs(),function(){subscription.tryUnsubscribe(),subscription.onStateChange=null}}),[contextValue,previousState]);var Context=context||_Context.ReactReduxContext;return _react.default.createElement(Context.Provider,{value:contextValue},children)};exports.default=_default},function(module,exports){function _typeof(obj){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?module.exports=_typeof=function(obj){return typeof obj}:module.exports=_typeof=function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}module.exports=_typeof},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(180);exports.__esModule=!0,exports.createConnect=createConnect,exports.default=void 0;var _extends2=_interopRequireDefault(__webpack_require__(191)),_objectWithoutPropertiesLoose2=_interopRequireDefault(__webpack_require__(201)),_connectAdvanced=_interopRequireDefault(__webpack_require__(211)),_shallowEqual=_interopRequireDefault(__webpack_require__(213)),_mapDispatchToProps=_interopRequireDefault(__webpack_require__(248)),_mapStateToProps=_interopRequireDefault(__webpack_require__(250)),_mergeProps=_interopRequireDefault(__webpack_require__(251)),_selectorFactory=_interopRequireDefault(__webpack_require__(252));function match(arg,factories,name){for(var i=factories.length-1;i>=0;i--){var result=factories[i](arg);if(result)return result}return function(dispatch,options){throw new Error("Invalid value of type "+typeof arg+" for "+name+" argument when connecting component "+options.wrappedComponentName+".")}}function strictEqual(a,b){return a===b}function createConnect(_temp){var _ref=void 0===_temp?{}:_temp,_ref$connectHOC=_ref.connectHOC,connectHOC=void 0===_ref$connectHOC?_connectAdvanced.default:_ref$connectHOC,_ref$mapStateToPropsF=_ref.mapStateToPropsFactories,mapStateToPropsFactories=void 0===_ref$mapStateToPropsF?_mapStateToProps.default:_ref$mapStateToPropsF,_ref$mapDispatchToPro=_ref.mapDispatchToPropsFactories,mapDispatchToPropsFactories=void 0===_ref$mapDispatchToPro?_mapDispatchToProps.default:_ref$mapDispatchToPro,_ref$mergePropsFactor=_ref.mergePropsFactories,mergePropsFactories=void 0===_ref$mergePropsFactor?_mergeProps.default:_ref$mergePropsFactor,_ref$selectorFactory=_ref.selectorFactory,selectorFactory=void 0===_ref$selectorFactory?_selectorFactory.default:_ref$selectorFactory;return function(mapStateToProps,mapDispatchToProps,mergeProps,_ref2){void 0===_ref2&&(_ref2={});var _ref3=_ref2,_ref3$pure=_ref3.pure,pure=void 0===_ref3$pure||_ref3$pure,_ref3$areStatesEqual=_ref3.areStatesEqual,areStatesEqual=void 0===_ref3$areStatesEqual?strictEqual:_ref3$areStatesEqual,_ref3$areOwnPropsEqua=_ref3.areOwnPropsEqual,areOwnPropsEqual=void 0===_ref3$areOwnPropsEqua?_shallowEqual.default:_ref3$areOwnPropsEqua,_ref3$areStatePropsEq=_ref3.areStatePropsEqual,areStatePropsEqual=void 0===_ref3$areStatePropsEq?_shallowEqual.default:_ref3$areStatePropsEq,_ref3$areMergedPropsE=_ref3.areMergedPropsEqual,areMergedPropsEqual=void 0===_ref3$areMergedPropsE?_shallowEqual.default:_ref3$areMergedPropsE,extraOptions=(0,_objectWithoutPropertiesLoose2.default)(_ref3,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),initMapStateToProps=match(mapStateToProps,mapStateToPropsFactories,"mapStateToProps"),initMapDispatchToProps=match(mapDispatchToProps,mapDispatchToPropsFactories,"mapDispatchToProps"),initMergeProps=match(mergeProps,mergePropsFactories,"mergeProps");return connectHOC(selectorFactory,(0,_extends2.default)({methodName:"connect",getDisplayName:function(name){return"Connect("+name+")"},shouldHandleStateChanges:Boolean(mapStateToProps),initMapStateToProps:initMapStateToProps,initMapDispatchToProps:initMapDispatchToProps,initMergeProps:initMergeProps,pure:pure,areStatesEqual:areStatesEqual,areOwnPropsEqual:areOwnPropsEqual,areStatePropsEqual:areStatePropsEqual,areMergedPropsEqual:areMergedPropsEqual},extraOptions))}}var _default=createConnect();exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.whenMapDispatchToPropsIsFunction=whenMapDispatchToPropsIsFunction,exports.whenMapDispatchToPropsIsMissing=whenMapDispatchToPropsIsMissing,exports.whenMapDispatchToPropsIsObject=whenMapDispatchToPropsIsObject,exports.default=void 0;var _redux=__webpack_require__(192),_wrapMapToProps=__webpack_require__(214);function whenMapDispatchToPropsIsFunction(mapDispatchToProps){return"function"==typeof mapDispatchToProps?(0,_wrapMapToProps.wrapMapToPropsFunc)(mapDispatchToProps,"mapDispatchToProps"):void 0}function whenMapDispatchToPropsIsMissing(mapDispatchToProps){return mapDispatchToProps?void 0:(0,_wrapMapToProps.wrapMapToPropsConstant)((function(dispatch){return{dispatch:dispatch}}))}function whenMapDispatchToPropsIsObject(mapDispatchToProps){return mapDispatchToProps&&"object"==typeof mapDispatchToProps?(0,_wrapMapToProps.wrapMapToPropsConstant)((function(dispatch){return(0,_redux.bindActionCreators)(mapDispatchToProps,dispatch)})):void 0}var _default=[whenMapDispatchToPropsIsFunction,whenMapDispatchToPropsIsMissing,whenMapDispatchToPropsIsObject];exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=function(obj){if("object"!=typeof obj||null===obj)return!1;var proto=Object.getPrototypeOf(obj);if(null===proto)return!0;var baseProto=proto;for(;null!==Object.getPrototypeOf(baseProto);)baseProto=Object.getPrototypeOf(baseProto);return proto===baseProto}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.whenMapStateToPropsIsFunction=whenMapStateToPropsIsFunction,exports.whenMapStateToPropsIsMissing=whenMapStateToPropsIsMissing,exports.default=void 0;var _wrapMapToProps=__webpack_require__(214);function whenMapStateToPropsIsFunction(mapStateToProps){return"function"==typeof mapStateToProps?(0,_wrapMapToProps.wrapMapToPropsFunc)(mapStateToProps,"mapStateToProps"):void 0}function whenMapStateToPropsIsMissing(mapStateToProps){return mapStateToProps?void 0:(0,_wrapMapToProps.wrapMapToPropsConstant)((function(){return{}}))}var _default=[whenMapStateToPropsIsFunction,whenMapStateToPropsIsMissing];exports.default=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(180);exports.__esModule=!0,exports.defaultMergeProps=defaultMergeProps,exports.wrapMergePropsFunc=wrapMergePropsFunc,exports.whenMergePropsIsFunction=whenMergePropsIsFunction,exports.whenMergePropsIsOmitted=whenMergePropsIsOmitted,exports.default=void 0;var _extends2=_interopRequireDefault(__webpack_require__(191));_interopRequireDefault(__webpack_require__(215));function defaultMergeProps(stateProps,dispatchProps,ownProps){return(0,_extends2.default)({},ownProps,{},stateProps,{},dispatchProps)}function wrapMergePropsFunc(mergeProps){return function(dispatch,_ref){_ref.displayName;var mergedProps,pure=_ref.pure,areMergedPropsEqual=_ref.areMergedPropsEqual,hasRunOnce=!1;return function(stateProps,dispatchProps,ownProps){var nextMergedProps=mergeProps(stateProps,dispatchProps,ownProps);return hasRunOnce?pure&&areMergedPropsEqual(nextMergedProps,mergedProps)||(mergedProps=nextMergedProps):(hasRunOnce=!0,mergedProps=nextMergedProps),mergedProps}}}function whenMergePropsIsFunction(mergeProps){return"function"==typeof mergeProps?wrapMergePropsFunc(mergeProps):void 0}function whenMergePropsIsOmitted(mergeProps){return mergeProps?void 0:function(){return defaultMergeProps}}var _default=[whenMergePropsIsFunction,whenMergePropsIsOmitted];exports.default=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(180);exports.__esModule=!0,exports.impureFinalPropsSelectorFactory=impureFinalPropsSelectorFactory,exports.pureFinalPropsSelectorFactory=pureFinalPropsSelectorFactory,exports.default=function(dispatch,_ref2){var initMapStateToProps=_ref2.initMapStateToProps,initMapDispatchToProps=_ref2.initMapDispatchToProps,initMergeProps=_ref2.initMergeProps,options=(0,_objectWithoutPropertiesLoose2.default)(_ref2,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),mapStateToProps=initMapStateToProps(dispatch,options),mapDispatchToProps=initMapDispatchToProps(dispatch,options),mergeProps=initMergeProps(dispatch,options);0;return(options.pure?pureFinalPropsSelectorFactory:impureFinalPropsSelectorFactory)(mapStateToProps,mapDispatchToProps,mergeProps,dispatch,options)};var _objectWithoutPropertiesLoose2=_interopRequireDefault(__webpack_require__(201));_interopRequireDefault(__webpack_require__(253));function impureFinalPropsSelectorFactory(mapStateToProps,mapDispatchToProps,mergeProps,dispatch){return function(state,ownProps){return mergeProps(mapStateToProps(state,ownProps),mapDispatchToProps(dispatch,ownProps),ownProps)}}function pureFinalPropsSelectorFactory(mapStateToProps,mapDispatchToProps,mergeProps,dispatch,_ref){var state,ownProps,stateProps,dispatchProps,mergedProps,areStatesEqual=_ref.areStatesEqual,areOwnPropsEqual=_ref.areOwnPropsEqual,areStatePropsEqual=_ref.areStatePropsEqual,hasRunAtLeastOnce=!1;function handleSubsequentCalls(nextState,nextOwnProps){var nextStateProps,statePropsChanged,propsChanged=!areOwnPropsEqual(nextOwnProps,ownProps),stateChanged=!areStatesEqual(nextState,state);return state=nextState,ownProps=nextOwnProps,propsChanged&&stateChanged?(stateProps=mapStateToProps(state,ownProps),mapDispatchToProps.dependsOnOwnProps&&(dispatchProps=mapDispatchToProps(dispatch,ownProps)),mergedProps=mergeProps(stateProps,dispatchProps,ownProps)):propsChanged?(mapStateToProps.dependsOnOwnProps&&(stateProps=mapStateToProps(state,ownProps)),mapDispatchToProps.dependsOnOwnProps&&(dispatchProps=mapDispatchToProps(dispatch,ownProps)),mergedProps=mergeProps(stateProps,dispatchProps,ownProps)):stateChanged?(nextStateProps=mapStateToProps(state,ownProps),statePropsChanged=!areStatePropsEqual(nextStateProps,stateProps),stateProps=nextStateProps,statePropsChanged&&(mergedProps=mergeProps(stateProps,dispatchProps,ownProps)),mergedProps):mergedProps}return function(nextState,nextOwnProps){return hasRunAtLeastOnce?handleSubsequentCalls(nextState,nextOwnProps):(stateProps=mapStateToProps(state=nextState,ownProps=nextOwnProps),dispatchProps=mapDispatchToProps(dispatch,ownProps),mergedProps=mergeProps(stateProps,dispatchProps,ownProps),hasRunAtLeastOnce=!0,mergedProps)}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(180);exports.__esModule=!0,exports.default=function(mapStateToProps,mapDispatchToProps,mergeProps,displayName){verify(mapStateToProps,"mapStateToProps",displayName),verify(mapDispatchToProps,"mapDispatchToProps",displayName),verify(mergeProps,"mergeProps",displayName)};var _warning=_interopRequireDefault(__webpack_require__(216));function verify(selector,methodName,displayName){if(!selector)throw new Error("Unexpected value for "+methodName+" in "+displayName+".");"mapStateToProps"!==methodName&&"mapDispatchToProps"!==methodName||Object.prototype.hasOwnProperty.call(selector,"dependsOnOwnProps")||(0,_warning.default)("The selector for "+methodName+" of "+displayName+" did not specify a value for dependsOnOwnProps.")}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.createDispatchHook=createDispatchHook,exports.useDispatch=void 0;var _Context=__webpack_require__(182),_useStore=__webpack_require__(217);function createDispatchHook(context){void 0===context&&(context=_Context.ReactReduxContext);var useStore=context===_Context.ReactReduxContext?_useStore.useStore:(0,_useStore.createStoreHook)(context);return function(){return useStore().dispatch}}var useDispatch=createDispatchHook();exports.useDispatch=useDispatch},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(180);exports.__esModule=!0,exports.createSelectorHook=createSelectorHook,exports.useSelector=void 0;var _react=__webpack_require__(3),_useReduxContext2=__webpack_require__(218),_Subscription=_interopRequireDefault(__webpack_require__(200)),_useIsomorphicLayoutEffect=__webpack_require__(212),_Context=__webpack_require__(182),refEquality=function(a,b){return a===b};function createSelectorHook(context){void 0===context&&(context=_Context.ReactReduxContext);var useReduxContext=context===_Context.ReactReduxContext?_useReduxContext2.useReduxContext:function(){return(0,_react.useContext)(context)};return function(selector,equalityFn){void 0===equalityFn&&(equalityFn=refEquality);var _useReduxContext=useReduxContext();return function(selector,equalityFn,store,contextSub){var selectedState,forceRender=(0,_react.useReducer)((function(s){return s+1}),0)[1],subscription=(0,_react.useMemo)((function(){return new _Subscription.default(store,contextSub)}),[store,contextSub]),latestSubscriptionCallbackError=(0,_react.useRef)(),latestSelector=(0,_react.useRef)(),latestSelectedState=(0,_react.useRef)();try{selectedState=selector!==latestSelector.current||latestSubscriptionCallbackError.current?selector(store.getState()):latestSelectedState.current}catch(err){throw latestSubscriptionCallbackError.current&&(err.message+="\nThe error may be correlated with this previous error:\n"+latestSubscriptionCallbackError.current.stack+"\n\n"),err}return(0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)((function(){latestSelector.current=selector,latestSelectedState.current=selectedState,latestSubscriptionCallbackError.current=void 0})),(0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)((function(){function checkForUpdates(){try{var newSelectedState=latestSelector.current(store.getState());if(equalityFn(newSelectedState,latestSelectedState.current))return;latestSelectedState.current=newSelectedState}catch(err){latestSubscriptionCallbackError.current=err}forceRender({})}return subscription.onStateChange=checkForUpdates,subscription.trySubscribe(),checkForUpdates(),function(){return subscription.tryUnsubscribe()}}),[store,subscription]),selectedState}(selector,equalityFn,_useReduxContext.store,_useReduxContext.subscription)}}var useSelector=createSelectorHook();exports.useSelector=useSelector},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.unstable_batchedUpdates=void 0;var _reactDom=__webpack_require__(5);exports.unstable_batchedUpdates=_reactDom.unstable_batchedUpdates},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=function(){for(var _len=arguments.length,actionsTypes=new Array(_len),_key=0;_key<_len;_key++)actionsTypes[_key]=arguments[_key];(0,_invariant.default)(isValidActionTypes(actionsTypes),"Expected action types to be strings, symbols, or action creators");var combinedActionType=actionsTypes.map(_toString.default).join(_constants.ACTION_TYPE_DELIMITER);return{toString:function(){return combinedActionType}}};var _invariant=_interopRequireDefault(__webpack_require__(183)),_isFunction=_interopRequireDefault(__webpack_require__(193)),_isSymbol=_interopRequireDefault(__webpack_require__(258)),_isEmpty=_interopRequireDefault(__webpack_require__(219)),_toString=_interopRequireDefault(__webpack_require__(220)),_isString=_interopRequireDefault(__webpack_require__(221)),_constants=__webpack_require__(187);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function isValidActionType(type){return(0,_isString.default)(type)||(0,_isFunction.default)(type)||(0,_isSymbol.default)(type)}function isValidActionTypes(types){return!(0,_isEmpty.default)(types)&&types.every(isValidActionType)}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;exports.default=function(value){return"symbol"==typeof value||"object"==typeof value&&"[object Symbol]"===Object.prototype.toString.call(value)}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;exports.default=function(value){return null===value}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=function(actionMap){for(var _len=arguments.length,identityActions=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)identityActions[_key-1]=arguments[_key];var options=(0,_isPlainObject.default)((0,_getLastElement.default)(identityActions))?identityActions.pop():{};if((0,_invariant.default)(identityActions.every(_isString.default)&&((0,_isString.default)(actionMap)||(0,_isPlainObject.default)(actionMap)),"Expected optional object followed by string action types"),(0,_isString.default)(actionMap))return actionCreatorsFromIdentityActions([actionMap].concat(identityActions),options);return _objectSpread({},actionCreatorsFromActionMap(actionMap,options),actionCreatorsFromIdentityActions(identityActions,options))};var _invariant=_interopRequireDefault(__webpack_require__(183)),_isPlainObject=_interopRequireDefault(__webpack_require__(188)),_isFunction=_interopRequireDefault(__webpack_require__(193)),_identity=_interopRequireDefault(__webpack_require__(203)),_isArray=_interopRequireDefault(__webpack_require__(261)),_isString=_interopRequireDefault(__webpack_require__(221)),_isNil=_interopRequireDefault(__webpack_require__(222)),_getLastElement=_interopRequireDefault(__webpack_require__(262)),_camelCase=_interopRequireDefault(__webpack_require__(223)),_arrayToObject=_interopRequireDefault(__webpack_require__(266)),_flattenActionMap=_interopRequireDefault(__webpack_require__(267)),_unflattenActionCreators=_interopRequireDefault(__webpack_require__(268)),_createAction=_interopRequireDefault(__webpack_require__(202)),_constants=__webpack_require__(187);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter((function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable})))),ownKeys.forEach((function(key){_defineProperty(target,key,source[key])}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function actionCreatorsFromActionMap(actionMap,options){var flatActionCreators=actionMapToActionCreators((0,_flattenActionMap.default)(actionMap,options));return(0,_unflattenActionCreators.default)(flatActionCreators,options)}function actionMapToActionCreators(actionMap,_temp){var _ref=void 0===_temp?{}:_temp,prefix=_ref.prefix,_ref$namespace=_ref.namespace,namespace=void 0===_ref$namespace?_constants.DEFAULT_NAMESPACE:_ref$namespace;return(0,_arrayToObject.default)(Object.keys(actionMap),(function(partialActionCreators,type){var _objectSpread2,actionMapValue=actionMap[type];(0,_invariant.default)(function(actionMapValue){if((0,_isFunction.default)(actionMapValue)||(0,_isNil.default)(actionMapValue))return!0;if((0,_isArray.default)(actionMapValue)){var _actionMapValue$=actionMapValue[0],payload=void 0===_actionMapValue$?_identity.default:_actionMapValue$,meta=actionMapValue[1];return(0,_isFunction.default)(payload)&&(0,_isFunction.default)(meta)}return!1}(actionMapValue),"Expected function, undefined, null, or array with payload and meta functions for "+type);var prefixedType=prefix?""+prefix+namespace+type:type,actionCreator=(0,_isArray.default)(actionMapValue)?_createAction.default.apply(void 0,[prefixedType].concat(actionMapValue)):(0,_createAction.default)(prefixedType,actionMapValue);return _objectSpread({},partialActionCreators,((_objectSpread2={})[type]=actionCreator,_objectSpread2))}))}function actionCreatorsFromIdentityActions(identityActions,options){var actionCreators=actionMapToActionCreators((0,_arrayToObject.default)(identityActions,(function(partialActionMap,type){var _objectSpread3;return _objectSpread({},partialActionMap,((_objectSpread3={})[type]=_identity.default,_objectSpread3))})),options);return(0,_arrayToObject.default)(Object.keys(actionCreators),(function(partialActionCreators,type){var _objectSpread4;return _objectSpread({},partialActionCreators,((_objectSpread4={})[(0,_camelCase.default)(type)]=actionCreators[type],_objectSpread4))}))}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;exports.default=function(value){return Array.isArray(value)}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;exports.default=function(array){return array[array.length-1]}},function(module,exports,__webpack_require__){var space=__webpack_require__(264);module.exports=function(string){return space(string).replace(/\s(\w)/g,(function(matches,letter){return letter.toUpperCase()}))}},function(module,exports,__webpack_require__){var clean=__webpack_require__(265);module.exports=function(string){return clean(string).replace(/[\W_]+(.|$)/g,(function(matches,match){return match?" "+match:""})).trim()}},function(module,exports){module.exports=function(string){return hasSpace.test(string)?string.toLowerCase():hasSeparator.test(string)?(function(string){return string.replace(separatorSplitter,(function(m,next){return next?" "+next:""}))}(string)||string).toLowerCase():hasCamel.test(string)?function(string){return string.replace(camelSplitter,(function(m,previous,uppers){return previous+" "+uppers.toLowerCase().split("").join(" ")}))}(string).toLowerCase():string.toLowerCase()};var hasSpace=/\s/,hasSeparator=/(_|-|\.|:)/,hasCamel=/([a-z][A-Z]|[A-Z][a-z])/;var separatorSplitter=/[\W_]+(.|$)/g;var camelSplitter=/(.)([A-Z]+)/g},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;exports.default=function(array,callback){return array.reduce((function(partialObject,element){return callback(partialObject,element)}),{})}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;var _isPlainObject=_interopRequireDefault(__webpack_require__(188));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=(0,_interopRequireDefault(__webpack_require__(224)).default)(_isPlainObject.default);exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=function(flatActionCreators,_temp){var _ref=void 0===_temp?{}:_temp,_ref$namespace=_ref.namespace,namespace=void 0===_ref$namespace?_constants.DEFAULT_NAMESPACE:_ref$namespace,prefix=_ref.prefix;var nestedActionCreators={};return Object.getOwnPropertyNames(flatActionCreators).forEach((function(type){var unprefixedType=prefix?type.replace(""+prefix+namespace,""):type;return function unflatten(flatActionType,partialNestedActionCreators,partialFlatActionTypePath){var nextNamespace=(0,_camelCase.default)(partialFlatActionTypePath.shift());(0,_isEmpty.default)(partialFlatActionTypePath)?partialNestedActionCreators[nextNamespace]=flatActionCreators[flatActionType]:(partialNestedActionCreators[nextNamespace]||(partialNestedActionCreators[nextNamespace]={}),unflatten(flatActionType,partialNestedActionCreators[nextNamespace],partialFlatActionTypePath))}(type,nestedActionCreators,unprefixedType.split(namespace))})),nestedActionCreators};var _constants=__webpack_require__(187),_isEmpty=_interopRequireDefault(__webpack_require__(219)),_camelCase=_interopRequireDefault(__webpack_require__(223));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;var _justCurryIt=_interopRequireDefault(__webpack_require__(270)),_createAction=_interopRequireDefault(__webpack_require__(202));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(type,payloadCreator){return(0,_justCurryIt.default)((0,_createAction.default)(type,payloadCreator),payloadCreator.length)}},function(module,exports){module.exports=function(fn,arity){return function curried(){null==arity&&(arity=fn.length);var args=[].slice.call(arguments);return args.length>=arity?fn.apply(this,args):function(){return curried.apply(this,args.concat([].slice.call(arguments)))}}}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;exports.default=function(value){return void 0===value}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=function(handlers,defaultState,options){void 0===options&&(options={});(0,_invariant.default)((0,_isPlainObject.default)(handlers)||(0,_isMap.default)(handlers),"Expected handlers to be a plain object.");var flattenedReducerMap=(0,_flattenReducerMap.default)(handlers,options),reducers=(0,_ownKeys.default)(flattenedReducerMap).map((function(type){return(0,_handleAction.default)(type,(0,_get.default)(type,flattenedReducerMap),defaultState)})),reducer=_reduceReducers.default.apply(void 0,reducers.concat([defaultState]));return function(state,action){return void 0===state&&(state=defaultState),reducer(state,action)}};var _reduceReducers=_interopRequireDefault(__webpack_require__(273)),_invariant=_interopRequireDefault(__webpack_require__(183)),_isPlainObject=_interopRequireDefault(__webpack_require__(188)),_isMap=_interopRequireDefault(__webpack_require__(194)),_ownKeys=_interopRequireDefault(__webpack_require__(204)),_flattenReducerMap=_interopRequireDefault(__webpack_require__(274)),_handleAction=_interopRequireDefault(__webpack_require__(226)),_get=_interopRequireDefault(__webpack_require__(225));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var initialState="function"!=typeof args[args.length-1]&&args.pop(),reducers=args;if(void 0===initialState)throw new TypeError("The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.");return function(prevState,value){for(var _len2=arguments.length,args=Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++)args[_key2-2]=arguments[_key2];var prevStateIsUndefined=void 0===prevState,valueIsUndefined=void 0===value;return prevStateIsUndefined&&valueIsUndefined&&initialState?initialState:reducers.reduce((function(newState,reducer){return reducer.apply(void 0,[newState,value].concat(args))}),prevStateIsUndefined&&!valueIsUndefined&&initialState?initialState:prevState)}},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;var _isPlainObject=_interopRequireDefault(__webpack_require__(188)),_isMap=_interopRequireDefault(__webpack_require__(194)),_hasGeneratorInterface=_interopRequireDefault(__webpack_require__(275));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=(0,_interopRequireDefault(__webpack_require__(224)).default)((function(node){return((0,_isPlainObject.default)(node)||(0,_isMap.default)(node))&&!(0,_hasGeneratorInterface.default)(node)}));exports.default=_default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=function(handler){var keys=(0,_ownKeys.default)(handler),hasOnlyInterfaceNames=keys.every((function(ownKey){return"next"===ownKey||"throw"===ownKey}));return keys.length&&keys.length<=2&&hasOnlyInterfaceNames};var obj,_ownKeys=(obj=__webpack_require__(204))&&obj.__esModule?obj:{default:obj}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _create_thunk=__webpack_require__(277);Object.defineProperty(exports,"createThunk",{enumerable:!0,get:function(){return _create_thunk.createThunk}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createThunk=function(type,fn){var actionCreator=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return function(dispatch,getState){return fn.apply(void 0,[{dispatch:dispatch,getState:getState,type:type}].concat(args))}};return actionCreator.toString=function(){return type.toString()},actionCreator}},function(module,exports){module.exports=function(){throw new Error("define cannot be used indirect")}},function(module,exports,__webpack_require__){
/*!
 * @scant/router v0.1.1
 * (c) 2018-present Joe Fleming (https://github.com/w33ble)
 * Released under the MIT License.
 */
module.exports=function(r){"use strict";r=r&&r.hasOwnProperty("default")?r.default:r;var e=function(r,e){return"object"===r?"object"==typeof e&&null!=e&&!Array.isArray(e):"array"===r?Array.isArray(e):"null"===r?null===e:"unset"===r?null==e:typeof e===r},n=function(r){return/^\//.test(r)},t=function(){},i=function(r,e){if(void 0===e&&(e=""),!n(r))return!1;var t=""+e.replace(/\/$/,"")+r;return t.length>1?t.replace(/\/$/,""):t},o=function(r){var e=r.match(/^(\/[^?#\s]*)(\?[^#\s]*)?(#[^\s]*)?$/);if(!e)throw new Error("Failed to extract pathname: "+r);return{url:e[0],pathname:e[1],search:e[2],hash:e[3]}},u=function(r){return{path:r.path,name:r.name,meta:r.meta}};return function(s,c){if(void 0===c&&(c={}),!e("array",s))throw new Error("An array of route objects is required");var f=c.useHash?"#":c.useHashBang?"#!":"",h=n(c.basepath)?i(c.basepath):"",p={configs:[],parsers:[],names:[]};function m(r){return p.parsers.reduce((function(e,n,t){if(!1!==e)return e;var a=n.match(r);return a?Object.assign({},p.configs[t],{params:a,index:t}):e}),!1)}return s.forEach((function(n){(function n(o,u){if(void 0===u&&(u=""),!function(r){if(!e("object",r))return!1;var n,a=e("unset",r.action)||e("function",r.action),i=e("unset",r.children)||e("array",r.children),o=e("unset",r.meta)||e("object",r.meta);return n=r,Object.prototype.hasOwnProperty.call(n,"path")&&a&&i&&o}(o))throw new Error("Route definition is invalid: "+JSON.stringify(o));var s=i(o.path,u);if(!1===s)throw new Error("Route's path is invalid: "+o.path);return e("array",o.children)?o.children.reduce((function(r,e){return r.concat(n(e,s))}),[]):[{name:o.name,path:s,meta:o.meta||{},action:o.action||t,parser:new r(s,{segmentNameCharset:"a-zA-Z0-9_-",segmentValueCharset:"a-zA-Z0-9-_~ %."})}]})(n).forEach((function(r){var e=r.parser,n=function(r,e){var n={};for(var t in r)e.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t]);return n}(r,["parser"]);if(null!=n.name&&p.names.includes(n.name))throw new Error("Route with name '"+n.name+"' already defined, names must be unique");p.parsers.push(e),p.configs.push(n),p.names.push(n.name)}))})),{match:function(r){var e=m(o(r).pathname);return!1!==e&&u(e)},parse:function(r){return new Promise(function(e,n){var t,a,i;return t=o(r),!1===(a=m(t.pathname))?n(new Error("No matching route found: "+r)):(Object.keys(a.params).forEach((function(r){var e=parseFloat(a.params[r]);Number.isNaN(e)||(a.params[r]=e)})),i={location:t,params:a.params,match:u(a),router:this},Promise.resolve(a.action(i)).then(function(r){try{return e(i)}catch(r){return n(r)}}.bind(this),n))}.bind(this))},create:function(r,e){if(void 0===e&&(e={}),null==r)return!1;if(n(r))return""+f+h+r;if(!p.names.includes(r))return!1;var t=p.configs.findIndex((function(e){return e.name===r}));try{var a=p.parsers[t].stringify(e);return""+f+h+a}catch(r){throw r.message="Route can not be created, "+r.message,r}}}}}(__webpack_require__(280))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,root,factory,slice=[].slice;root=this,factory=function(){var P,UrlPattern,astNodeContainsSegmentsForProvidedParams,astNodeToNames,astNodeToRegexString,baseAstNodeToRegexString,concatMap,defaultOptions,escapeForRegex,getParam,keysAndValuesToObject,newParser,regexGroupCount,stringConcatMap,stringify;return escapeForRegex=function(string){return string.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},concatMap=function(array,f){var i,length,results;for(results=[],i=-1,length=array.length;++i<length;)results=results.concat(f(array[i]));return results},stringConcatMap=function(array,f){var i,length,result;for(result="",i=-1,length=array.length;++i<length;)result+=f(array[i]);return result},regexGroupCount=function(regex){return new RegExp(regex.toString()+"|").exec("").length-1},keysAndValuesToObject=function(keys,values){var i,key,length,object,value;for(object={},i=-1,length=keys.length;++i<length;)key=keys[i],null!=(value=values[i])&&(null!=object[key]?(Array.isArray(object[key])||(object[key]=[object[key]]),object[key].push(value)):object[key]=value);return object},(P={}).Result=function(value,rest){this.value=value,this.rest=rest},P.Tagged=function(tag,value){this.tag=tag,this.value=value},P.tag=function(tag,parser){return function(input){var result,tagged;if(null!=(result=parser(input)))return tagged=new P.Tagged(tag,result.value),new P.Result(tagged,result.rest)}},P.regex=function(regex){return function(input){var matches,result;if(null!=(matches=regex.exec(input)))return result=matches[0],new P.Result(result,input.slice(result.length))}},P.sequence=function(){var parsers;return parsers=1<=arguments.length?slice.call(arguments,0):[],function(input){var i,length,rest,result,values;for(i=-1,length=parsers.length,values=[],rest=input;++i<length;){if(null==(result=(0,parsers[i])(rest)))return;values.push(result.value),rest=result.rest}return new P.Result(values,rest)}},P.pick=function(){var indexes,parsers;return indexes=arguments[0],parsers=2<=arguments.length?slice.call(arguments,1):[],function(input){var array,result;if(null!=(result=P.sequence.apply(P,parsers)(input)))return array=result.value,result.value=array[indexes],result}},P.string=function(string){var length;return length=string.length,function(input){if(input.slice(0,length)===string)return new P.Result(string,input.slice(length))}},P.lazy=function(fn){var cached;return cached=null,function(input){return null==cached&&(cached=fn()),cached(input)}},P.baseMany=function(parser,end,stringResult,atLeastOneResultRequired,input){var parserResult,rest,results;for(rest=input,results=stringResult?"":[];(null==end||null==end(rest))&&null!=(parserResult=parser(rest));)stringResult?results+=parserResult.value:results.push(parserResult.value),rest=parserResult.rest;if(!atLeastOneResultRequired||0!==results.length)return new P.Result(results,rest)},P.many1=function(parser){return function(input){return P.baseMany(parser,null,!1,!0,input)}},P.concatMany1Till=function(parser,end){return function(input){return P.baseMany(parser,end,!0,!0,input)}},P.firstChoice=function(){var parsers;return parsers=1<=arguments.length?slice.call(arguments,0):[],function(input){var i,length,result;for(i=-1,length=parsers.length;++i<length;)if(null!=(result=(0,parsers[i])(input)))return result}},newParser=function(options){var U;return(U={}).wildcard=P.tag("wildcard",P.string(options.wildcardChar)),U.optional=P.tag("optional",P.pick(1,P.string(options.optionalSegmentStartChar),P.lazy((function(){return U.pattern})),P.string(options.optionalSegmentEndChar))),U.name=P.regex(new RegExp("^["+options.segmentNameCharset+"]+")),U.named=P.tag("named",P.pick(1,P.string(options.segmentNameStartChar),P.lazy((function(){return U.name})))),U.escapedChar=P.pick(1,P.string(options.escapeChar),P.regex(/^./)),U.static=P.tag("static",P.concatMany1Till(P.firstChoice(P.lazy((function(){return U.escapedChar})),P.regex(/^./)),P.firstChoice(P.string(options.segmentNameStartChar),P.string(options.optionalSegmentStartChar),P.string(options.optionalSegmentEndChar),U.wildcard))),U.token=P.lazy((function(){return P.firstChoice(U.wildcard,U.optional,U.named,U.static)})),U.pattern=P.many1(P.lazy((function(){return U.token}))),U},defaultOptions={escapeChar:"\\",segmentNameStartChar:":",segmentValueCharset:"a-zA-Z0-9-_~ %",segmentNameCharset:"a-zA-Z0-9",optionalSegmentStartChar:"(",optionalSegmentEndChar:")",wildcardChar:"*"},baseAstNodeToRegexString=function(astNode,segmentValueCharset){if(Array.isArray(astNode))return stringConcatMap(astNode,(function(node){return baseAstNodeToRegexString(node,segmentValueCharset)}));switch(astNode.tag){case"wildcard":return"(.*?)";case"named":return"(["+segmentValueCharset+"]+)";case"static":return escapeForRegex(astNode.value);case"optional":return"(?:"+baseAstNodeToRegexString(astNode.value,segmentValueCharset)+")?"}},astNodeToRegexString=function(astNode,segmentValueCharset){return null==segmentValueCharset&&(segmentValueCharset=defaultOptions.segmentValueCharset),"^"+baseAstNodeToRegexString(astNode,segmentValueCharset)+"$"},astNodeToNames=function(astNode){if(Array.isArray(astNode))return concatMap(astNode,astNodeToNames);switch(astNode.tag){case"wildcard":return["_"];case"named":return[astNode.value];case"static":return[];case"optional":return astNodeToNames(astNode.value)}},getParam=function(params,key,nextIndexes,sideEffects){var index,result,value;if(null==sideEffects&&(sideEffects=!1),null!=(value=params[key])){if(!((index=nextIndexes[key]||0)>(Array.isArray(value)?value.length-1:0)))return result=Array.isArray(value)?value[index]:value,sideEffects&&(nextIndexes[key]=index+1),result;if(sideEffects)throw new Error("too few values provided for key `"+key+"`")}else if(sideEffects)throw new Error("no values provided for key `"+key+"`")},astNodeContainsSegmentsForProvidedParams=function(astNode,params,nextIndexes){var i,length;if(Array.isArray(astNode)){for(i=-1,length=astNode.length;++i<length;)if(astNodeContainsSegmentsForProvidedParams(astNode[i],params,nextIndexes))return!0;return!1}switch(astNode.tag){case"wildcard":return null!=getParam(params,"_",nextIndexes,!1);case"named":return null!=getParam(params,astNode.value,nextIndexes,!1);case"static":return!1;case"optional":return astNodeContainsSegmentsForProvidedParams(astNode.value,params,nextIndexes)}},stringify=function(astNode,params,nextIndexes){if(Array.isArray(astNode))return stringConcatMap(astNode,(function(node){return stringify(node,params,nextIndexes)}));switch(astNode.tag){case"wildcard":return getParam(params,"_",nextIndexes,!0);case"named":return getParam(params,astNode.value,nextIndexes,!0);case"static":return astNode.value;case"optional":return astNodeContainsSegmentsForProvidedParams(astNode.value,params,nextIndexes)?stringify(astNode.value,params,nextIndexes):""}},(UrlPattern=function(arg1,arg2){var groupCount,options,parsed;if(arg1 instanceof UrlPattern)return this.isRegex=arg1.isRegex,this.regex=arg1.regex,this.ast=arg1.ast,void(this.names=arg1.names);if(this.isRegex=arg1 instanceof RegExp,"string"!=typeof arg1&&!this.isRegex)throw new TypeError("argument must be a regex or a string");if(this.isRegex){if(this.regex=arg1,null!=arg2){if(!Array.isArray(arg2))throw new Error("if first argument is a regex the second argument may be an array of group names but you provided something else");if(groupCount=regexGroupCount(this.regex),arg2.length!==groupCount)throw new Error("regex contains "+groupCount+" groups but array of group names contains "+arg2.length);this.names=arg2}}else{if(""===arg1)throw new Error("argument must not be the empty string");if(arg1.replace(/\s+/g,"")!==arg1)throw new Error("argument must not contain whitespace");if(options={escapeChar:(null!=arg2?arg2.escapeChar:void 0)||defaultOptions.escapeChar,segmentNameStartChar:(null!=arg2?arg2.segmentNameStartChar:void 0)||defaultOptions.segmentNameStartChar,segmentNameCharset:(null!=arg2?arg2.segmentNameCharset:void 0)||defaultOptions.segmentNameCharset,segmentValueCharset:(null!=arg2?arg2.segmentValueCharset:void 0)||defaultOptions.segmentValueCharset,optionalSegmentStartChar:(null!=arg2?arg2.optionalSegmentStartChar:void 0)||defaultOptions.optionalSegmentStartChar,optionalSegmentEndChar:(null!=arg2?arg2.optionalSegmentEndChar:void 0)||defaultOptions.optionalSegmentEndChar,wildcardChar:(null!=arg2?arg2.wildcardChar:void 0)||defaultOptions.wildcardChar},null==(parsed=newParser(options).pattern(arg1)))throw new Error("couldn't parse pattern");if(""!==parsed.rest)throw new Error("could only partially parse pattern");this.ast=parsed.value,this.regex=new RegExp(astNodeToRegexString(this.ast,options.segmentValueCharset)),this.names=astNodeToNames(this.ast)}}).prototype.match=function(url){var groups,match;return null==(match=this.regex.exec(url))?null:(groups=match.slice(1),this.names?keysAndValuesToObject(this.names,groups):groups)},UrlPattern.prototype.stringify=function(params){if(null==params&&(params={}),this.isRegex)throw new Error("can't stringify patterns generated from a regex");if(params!==Object(params))throw new Error("argument must be an object or undefined");return stringify(this.ast,params,{})},UrlPattern.escapeForRegex=escapeForRegex,UrlPattern.concatMap=concatMap,UrlPattern.stringConcatMap=stringConcatMap,UrlPattern.regexGroupCount=regexGroupCount,UrlPattern.keysAndValuesToObject=keysAndValuesToObject,UrlPattern.P=P,UrlPattern.newParser=newParser,UrlPattern.defaultOptions=defaultOptions,UrlPattern.astNodeToRegexString=astNodeToRegexString,UrlPattern.astNodeToNames=astNodeToNames,UrlPattern.getParam=getParam,UrlPattern.astNodeContainsSegmentsForProvidedParams=astNodeContainsSegmentsForProvidedParams,UrlPattern.stringify=stringify,UrlPattern},null!=__webpack_require__(228)?(__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=factory)?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)):null!==exports?module.exports=factory():root.UrlPattern=factory()},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__,LZString=function(){var f=String.fromCharCode,keyStrBase64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",keyStrUriSafe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",baseReverseDic={};function getBaseValue(alphabet,character){if(!baseReverseDic[alphabet]){baseReverseDic[alphabet]={};for(var i=0;i<alphabet.length;i++)baseReverseDic[alphabet][alphabet.charAt(i)]=i}return baseReverseDic[alphabet][character]}var LZString={compressToBase64:function(input){if(null==input)return"";var res=LZString._compress(input,6,(function(a){return keyStrBase64.charAt(a)}));switch(res.length%4){default:case 0:return res;case 1:return res+"===";case 2:return res+"==";case 3:return res+"="}},decompressFromBase64:function(input){return null==input?"":""==input?null:LZString._decompress(input.length,32,(function(index){return getBaseValue(keyStrBase64,input.charAt(index))}))},compressToUTF16:function(input){return null==input?"":LZString._compress(input,15,(function(a){return f(a+32)}))+" "},decompressFromUTF16:function(compressed){return null==compressed?"":""==compressed?null:LZString._decompress(compressed.length,16384,(function(index){return compressed.charCodeAt(index)-32}))},compressToUint8Array:function(uncompressed){for(var compressed=LZString.compress(uncompressed),buf=new Uint8Array(2*compressed.length),i=0,TotalLen=compressed.length;i<TotalLen;i++){var current_value=compressed.charCodeAt(i);buf[2*i]=current_value>>>8,buf[2*i+1]=current_value%256}return buf},decompressFromUint8Array:function(compressed){if(null==compressed)return LZString.decompress(compressed);for(var buf=new Array(compressed.length/2),i=0,TotalLen=buf.length;i<TotalLen;i++)buf[i]=256*compressed[2*i]+compressed[2*i+1];var result=[];return buf.forEach((function(c){result.push(f(c))})),LZString.decompress(result.join(""))},compressToEncodedURIComponent:function(input){return null==input?"":LZString._compress(input,6,(function(a){return keyStrUriSafe.charAt(a)}))},decompressFromEncodedURIComponent:function(input){return null==input?"":""==input?null:(input=input.replace(/ /g,"+"),LZString._decompress(input.length,32,(function(index){return getBaseValue(keyStrUriSafe,input.charAt(index))})))},compress:function(uncompressed){return LZString._compress(uncompressed,16,(function(a){return f(a)}))},_compress:function(uncompressed,bitsPerChar,getCharFromInt){if(null==uncompressed)return"";var i,value,ii,context_dictionary={},context_dictionaryToCreate={},context_c="",context_wc="",context_w="",context_enlargeIn=2,context_dictSize=3,context_numBits=2,context_data=[],context_data_val=0,context_data_position=0;for(ii=0;ii<uncompressed.length;ii+=1)if(context_c=uncompressed.charAt(ii),Object.prototype.hasOwnProperty.call(context_dictionary,context_c)||(context_dictionary[context_c]=context_dictSize++,context_dictionaryToCreate[context_c]=!0),context_wc=context_w+context_c,Object.prototype.hasOwnProperty.call(context_dictionary,context_wc))context_w=context_wc;else{if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(context_w.charCodeAt(0)<256){for(i=0;i<context_numBits;i++)context_data_val<<=1,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++;for(value=context_w.charCodeAt(0),i=0;i<8;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1}else{for(value=1,i=0;i<context_numBits;i++)context_data_val=context_data_val<<1|value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value=0;for(value=context_w.charCodeAt(0),i=0;i<16;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1}0==--context_enlargeIn&&(context_enlargeIn=Math.pow(2,context_numBits),context_numBits++),delete context_dictionaryToCreate[context_w]}else for(value=context_dictionary[context_w],i=0;i<context_numBits;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1;0==--context_enlargeIn&&(context_enlargeIn=Math.pow(2,context_numBits),context_numBits++),context_dictionary[context_wc]=context_dictSize++,context_w=String(context_c)}if(""!==context_w){if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(context_w.charCodeAt(0)<256){for(i=0;i<context_numBits;i++)context_data_val<<=1,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++;for(value=context_w.charCodeAt(0),i=0;i<8;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1}else{for(value=1,i=0;i<context_numBits;i++)context_data_val=context_data_val<<1|value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value=0;for(value=context_w.charCodeAt(0),i=0;i<16;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1}0==--context_enlargeIn&&(context_enlargeIn=Math.pow(2,context_numBits),context_numBits++),delete context_dictionaryToCreate[context_w]}else for(value=context_dictionary[context_w],i=0;i<context_numBits;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1;0==--context_enlargeIn&&(context_enlargeIn=Math.pow(2,context_numBits),context_numBits++)}for(value=2,i=0;i<context_numBits;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1;for(;;){if(context_data_val<<=1,context_data_position==bitsPerChar-1){context_data.push(getCharFromInt(context_data_val));break}context_data_position++}return context_data.join("")},decompress:function(compressed){return null==compressed?"":""==compressed?null:LZString._decompress(compressed.length,32768,(function(index){return compressed.charCodeAt(index)}))},_decompress:function(length,resetValue,getNextValue){var i,w,bits,resb,maxpower,power,c,dictionary=[],enlargeIn=4,dictSize=4,numBits=3,entry="",result=[],data={val:getNextValue(0),position:resetValue,index:1};for(i=0;i<3;i+=1)dictionary[i]=i;for(bits=0,maxpower=Math.pow(2,2),power=1;power!=maxpower;)resb=data.val&data.position,data.position>>=1,0==data.position&&(data.position=resetValue,data.val=getNextValue(data.index++)),bits|=(resb>0?1:0)*power,power<<=1;switch(bits){case 0:for(bits=0,maxpower=Math.pow(2,8),power=1;power!=maxpower;)resb=data.val&data.position,data.position>>=1,0==data.position&&(data.position=resetValue,data.val=getNextValue(data.index++)),bits|=(resb>0?1:0)*power,power<<=1;c=f(bits);break;case 1:for(bits=0,maxpower=Math.pow(2,16),power=1;power!=maxpower;)resb=data.val&data.position,data.position>>=1,0==data.position&&(data.position=resetValue,data.val=getNextValue(data.index++)),bits|=(resb>0?1:0)*power,power<<=1;c=f(bits);break;case 2:return""}for(dictionary[3]=c,w=c,result.push(c);;){if(data.index>length)return"";for(bits=0,maxpower=Math.pow(2,numBits),power=1;power!=maxpower;)resb=data.val&data.position,data.position>>=1,0==data.position&&(data.position=resetValue,data.val=getNextValue(data.index++)),bits|=(resb>0?1:0)*power,power<<=1;switch(c=bits){case 0:for(bits=0,maxpower=Math.pow(2,8),power=1;power!=maxpower;)resb=data.val&data.position,data.position>>=1,0==data.position&&(data.position=resetValue,data.val=getNextValue(data.index++)),bits|=(resb>0?1:0)*power,power<<=1;dictionary[dictSize++]=f(bits),c=dictSize-1,enlargeIn--;break;case 1:for(bits=0,maxpower=Math.pow(2,16),power=1;power!=maxpower;)resb=data.val&data.position,data.position>>=1,0==data.position&&(data.position=resetValue,data.val=getNextValue(data.index++)),bits|=(resb>0?1:0)*power,power<<=1;dictionary[dictSize++]=f(bits),c=dictSize-1,enlargeIn--;break;case 2:return result.join("")}if(0==enlargeIn&&(enlargeIn=Math.pow(2,numBits),numBits++),dictionary[c])entry=dictionary[c];else{if(c!==dictSize)return null;entry=w+w.charAt(0)}result.push(entry),dictionary[dictSize++]=w+entry.charAt(0),w=entry,0==--enlargeIn&&(enlargeIn=Math.pow(2,numBits),numBits++)}}};return LZString}();void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return LZString}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){module.exports=function(history){"use strict";function warning(condition,message){condition||console.warn(message)}function invariant(condition,message){if(!condition)throw new Error("Invariant failed: ".concat(message||""))}function createTransitionManager(){var prompt=null,listeners=[];return{setPrompt:function(nextPrompt){return warning(null==prompt,"A history supports only one prompt at a time"),prompt=nextPrompt,function(){prompt===nextPrompt&&(prompt=null)}},confirmTransitionTo:function(location,action,getUserConfirmation,callback){if(null!=prompt){var result="function"==typeof prompt?prompt(location,action):prompt;"string"==typeof result?"function"==typeof getUserConfirmation?getUserConfirmation(result,callback):(warning(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),callback(!0)):callback(!1!==result)}else callback(!0)},appendListener:function(fn){var isActive=!0;function listener(){isActive&&fn.apply(void 0,arguments)}return listeners.push(listener),function(){isActive=!1,listeners=listeners.filter((function(item){return item!==listener}))}},notifyListeners:function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];listeners.forEach((function(listener){return listener.apply(void 0,args)}))}}}var canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement);function getConfirmation(message,callback){callback(window.confirm(message))}function supportsHistory(){var ua=window.navigator.userAgent;return(-1===ua.indexOf("Android 2.")&&-1===ua.indexOf("Android 4.0")||-1===ua.indexOf("Mobile Safari")||-1!==ua.indexOf("Chrome")||-1!==ua.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}function supportsGoWithoutReloadUsingHash(){return-1===window.navigator.userAgent.indexOf("Firefox")}function addLeadingSlash(path){return"/"===path.charAt(0)?path:"/".concat(path)}function stripLeadingSlash(path){return"/"===path.charAt(0)?path.substr(1):path}function hasBasename(path,prefix){return 0===path.toLowerCase().indexOf(prefix.toLowerCase())&&-1!=="/?#".indexOf(path.charAt(prefix.length))}function stripBasename(path,prefix){return hasBasename(path,prefix)?path.substr(prefix.length):path}function stripTrailingSlash(path){return"/"===path.charAt(path.length-1)?path.slice(0,-1):path}function createPath(location){var pathname=location.pathname,search=location.search,hash=location.hash,path=pathname||"/";return search&&"?"!==search&&(path+="?"===search.charAt(0)?search:"?".concat(search)),hash&&"#"!==hash&&(path+="#"===hash.charAt(0)?hash:"#".concat(hash)),path}var getHistoryState=function(){try{return window.history.state||{}}catch(e){return{}}},HashPathCoders={hashbang:{encodePath:function(path){return"!"===path.charAt(0)?path:"!/".concat(stripLeadingSlash(path))},decodePath:function(path){return"!"===path.charAt(0)?path.substr(1):path}},noslash:{encodePath:stripLeadingSlash,decodePath:addLeadingSlash},slash:{encodePath:addLeadingSlash,decodePath:addLeadingSlash}},getHashPath=function(){var href=window.location.href,hashIndex=href.indexOf("#");return-1===hashIndex?"":href.substring(hashIndex+1)},pushHashPath=function(path){window.location.hash=path},replaceHashPath=function(path){var hashIndex=window.location.href.indexOf("#");window.location.replace("".concat(window.location.href.slice(0,hashIndex>=0?hashIndex:0),"#").concat(path))};return function(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};invariant(canUseDOM,"Hash history needs a DOM");var globalHistory=window.history,canGoWithoutReload=supportsGoWithoutReloadUsingHash(),canUseHistory=supportsHistory(),_props$getUserConfirm=props.getUserConfirmation,getUserConfirmation=void 0===_props$getUserConfirm?getConfirmation:_props$getUserConfirm,_props$hashType=props.hashType,hashType=void 0===_props$hashType?"slash":_props$hashType,_props$keyLength=props.keyLength,keyLength=void 0===_props$keyLength?6:_props$keyLength,basename=props.basename?stripTrailingSlash(addLeadingSlash(props.basename)):"",_HashPathCoders$hashT=HashPathCoders[hashType],encodePath=_HashPathCoders$hashT.encodePath,decodePath=_HashPathCoders$hashT.decodePath,getDOMLocation=function(){var _getHistoryState=getHistoryState(),key=_getHistoryState.key,state=_getHistoryState.state,path=decodePath(getHashPath());return warning(!basename||hasBasename(path,basename),"".concat('You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "').concat(path,'" to begin with "').concat(basename,'".')),basename&&(path=stripBasename(path,basename)),history.createLocation(path,state,key)},createKey=function(){return Math.random().toString(36).substr(2,keyLength)},transitionManager=createTransitionManager(),setState=function(nextState){Object.assign(history$$1,nextState),history$$1.length=globalHistory.length,transitionManager.notifyListeners(history$$1.location,history$$1.action)},forceNextPop=!1,ignorePath=null,handleHashChange=function(){var path=getHashPath(),encodedPath=encodePath(path);if(path!==encodedPath)replaceHashPath(encodedPath);else{var location=getDOMLocation(),prevLocation=history$$1.location;if(!forceNextPop&&history.locationsAreEqual(prevLocation,location))return;if(ignorePath===createPath(location))return;ignorePath=null,handlePop(location)}},handlePop=function(location){forceNextPop?(forceNextPop=!1,setState()):transitionManager.confirmTransitionTo(location,"POP",getUserConfirmation,(function(ok){ok?setState({action:"POP",location:location}):revertPop(location)}))},revertPop=function(fromLocation){var toLocation=history$$1.location,toIndex=allPaths.lastIndexOf(createPath(toLocation));-1===toIndex&&(toIndex=0);var fromIndex=allPaths.lastIndexOf(createPath(fromLocation));-1===fromIndex&&(fromIndex=0);var delta=toIndex-fromIndex;delta&&(forceNextPop=!0,go(delta))},path=getHashPath(),encodedPath=encodePath(path);path!==encodedPath&&replaceHashPath(encodedPath);var initialLocation=getDOMLocation(),allPaths=[createPath(initialLocation)],createHref=function(location){return"#".concat(encodePath(basename+createPath(location)))},push=function(path,state){var location=history.createLocation(path,state,createKey(),history$$1.location);transitionManager.confirmTransitionTo(location,"PUSH",getUserConfirmation,(function(ok){if(ok){var path=createPath(location),encodedPath=encodePath(basename+path);if(canUseHistory){var key=location.key,_state=location.state,href=createHref(location);globalHistory.pushState({key:key,state:_state},null,href)}else ignorePath=path,getHashPath()!==encodedPath?(warning(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),setState()):warning(void 0===state,"Browser history cannot push state in browsers that do not support HTML5 history, state is ignored"),pushHashPath(encodedPath);var prevIndex=allPaths.lastIndexOf(createPath(history$$1.location)),nextPaths=allPaths.slice(0,-1===prevIndex?0:prevIndex+1);nextPaths.push(path),allPaths=nextPaths,setState({action:"PUSH",location:location})}}))},replace=function(path,state){var location=history.createLocation(path,state,createKey(),history$$1.location);transitionManager.confirmTransitionTo(location,"REPLACE",getUserConfirmation,(function(ok){if(ok){var path=createPath(location),encodedPath=encodePath(basename+path);if(canUseHistory){var key=location.key,_state2=location.state,href=createHref(location);globalHistory.replaceState({key:key,state:_state2},null,href)}else warning(void 0===state,"Browser history cannot push state in browsers that do not support HTML5 history, state is ignored"),getHashPath()!==encodedPath&&(ignorePath=path,replaceHashPath(encodedPath));var prevIndex=allPaths.indexOf(createPath(history$$1.location));-1!==prevIndex&&(allPaths[prevIndex]=path),setState({action:"REPLACE",location:location})}}))},go=function(n){warning(canGoWithoutReload,"Hash history go(n) causes a full page reload in this browser"),globalHistory.go(n)},goBack=function(){return go(-1)},goForward=function(){return go(1)},listenerCount=0,checkDOMListeners=function(delta){var eventType=canUseHistory?"popstate":"hashchange";1===(listenerCount+=delta)&&1===delta?window.addEventListener(eventType,handleHashChange):0===listenerCount&&window.removeEventListener(eventType,handleHashChange)},isBlocked=!1,block=function(){var prompt=arguments.length>0&&void 0!==arguments[0]&&arguments[0],unblock=transitionManager.setPrompt(prompt);return isBlocked||(checkDOMListeners(1),isBlocked=!0),function(){return isBlocked&&(isBlocked=!1,checkDOMListeners(-1)),unblock()}},listen=function(listener){var unlisten=transitionManager.appendListener(listener);return checkDOMListeners(1),function(){checkDOMListeners(-1),unlisten()}},history$$1={length:globalHistory.length,action:"POP",location:initialLocation,createHref:createHref,push:push,replace:replace,go:go,goBack:goBack,goForward:goForward,block:block,listen:listen};return history$$1}}(__webpack_require__(229))},function(module,exports,__webpack_require__){"use strict";function _interopDefault(n){return n&&"object"==typeof n&&"default"in n?n.default:n}Object.defineProperty(exports,"__esModule",{value:!0});var resolvePathname=_interopDefault(__webpack_require__(284)),valueEqual=_interopDefault(__webpack_require__(285));__webpack_require__(286);var invariant=_interopDefault(__webpack_require__(230));function _extends(){return(_extends=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n}).apply(this,arguments)}function addLeadingSlash(n){return"/"===n.charAt(0)?n:"/"+n}function stripLeadingSlash(n){return"/"===n.charAt(0)?n.substr(1):n}function stripBasename(n,t){return function(n,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(n)}(n,t)?n.substr(t.length):n}function stripTrailingSlash(n){return"/"===n.charAt(n.length-1)?n.slice(0,-1):n}function parsePath(n){var t=n||"/",e="",a="",o=t.indexOf("#");-1!==o&&(a=t.substr(o),t=t.substr(0,o));var r=t.indexOf("?");return-1!==r&&(e=t.substr(r),t=t.substr(0,r)),{pathname:t,search:"?"===e?"":e,hash:"#"===a?"":a}}function createPath(n){var t=n.pathname,e=n.search,a=n.hash,o=t||"/";return e&&"?"!==e&&(o+="?"===e.charAt(0)?e:"?"+e),a&&"#"!==a&&(o+="#"===a.charAt(0)?a:"#"+a),o}function createLocation(n,t,e,a){var o;"string"==typeof n?(o=parsePath(n)).state=t:(void 0===(o=_extends({},n)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(n){throw n instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):n}return e&&(o.key=e),a?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=resolvePathname(o.pathname,a.pathname)):o.pathname=a.pathname:o.pathname||(o.pathname="/"),o}function locationsAreEqual(n,t){return n.pathname===t.pathname&&n.search===t.search&&n.hash===t.hash&&n.key===t.key&&valueEqual(n.state,t.state)}function createTransitionManager(){var r=null,a=[];return{setPrompt:function(n){return r=n,function(){r===n&&(r=null)}},confirmTransitionTo:function(n,t,e,a){if(null!=r){var o="function"==typeof r?r(n,t):r;"string"==typeof o?"function"==typeof e?e(o,a):a(!0):a(!1!==o)}else a(!0)},appendListener:function(n){var t=!0;function e(){t&&n.apply(void 0,arguments)}return a.push(e),function(){t=!1,a=a.filter((function(n){return n!==e}))}},notifyListeners:function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];a.forEach((function(n){return n.apply(void 0,t)}))}}}var canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement);function getConfirmation(n,t){t(window.confirm(n))}function getHistoryState(){try{return window.history.state||{}}catch(n){return{}}}var HashPathCoders={hashbang:{encodePath:function(n){return"!"===n.charAt(0)?n:"!/"+stripLeadingSlash(n)},decodePath:function(n){return"!"===n.charAt(0)?n.substr(1):n}},noslash:{encodePath:stripLeadingSlash,decodePath:addLeadingSlash},slash:{encodePath:addLeadingSlash,decodePath:addLeadingSlash}};function getHashPath(){var n=window.location.href,t=n.indexOf("#");return-1===t?"":n.substring(t+1)}function replaceHashPath(n){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,0<=t?t:0)+"#"+n)}function clamp(n,t,e){return Math.min(Math.max(n,t),e)}exports.createBrowserHistory=function(n){void 0===n&&(n={}),canUseDOM||invariant(!1);var c=window.history,s=function(){var n=window.navigator.userAgent;return(-1===n.indexOf("Android 2.")&&-1===n.indexOf("Android 4.0")||-1===n.indexOf("Mobile Safari")||-1!==n.indexOf("Chrome")||-1!==n.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),t=!(-1===window.navigator.userAgent.indexOf("Trident")),e=n,a=e.forceRefresh,h=void 0!==a&&a,o=e.getUserConfirmation,u=void 0===o?getConfirmation:o,r=e.keyLength,i=void 0===r?6:r,f=n.basename?stripTrailingSlash(addLeadingSlash(n.basename)):"";function l(n){var t=n||{},e=t.key,a=t.state,o=window.location,r=o.pathname+o.search+o.hash;return f&&(r=stripBasename(r,f)),createLocation(r,a,e)}function d(){return Math.random().toString(36).substr(2,i)}var v=createTransitionManager();function p(n){_extends(T,n),T.length=c.length,v.notifyListeners(T.location,T.action)}function g(n){(function(n){void 0===n.state&&navigator.userAgent.indexOf("CriOS")})(n)||w(l(n.state))}function P(){w(l(getHistoryState()))}var m=!1;function w(t){m?(m=!1,p()):v.confirmTransitionTo(t,"POP",u,(function(n){n?p({action:"POP",location:t}):function(n){var t=T.location,e=H.indexOf(t.key);-1===e&&(e=0);var a=H.indexOf(n.key);-1===a&&(a=0);var o=e-a;o&&(m=!0,L(o))}(t)}))}var y=l(getHistoryState()),H=[y.key];function x(n){return f+createPath(n)}function L(n){c.go(n)}var O=0;function E(n){1===(O+=n)&&1===n?(window.addEventListener("popstate",g),t&&window.addEventListener("hashchange",P)):0===O&&(window.removeEventListener("popstate",g),t&&window.removeEventListener("hashchange",P))}var S=!1,T={length:c.length,action:"POP",location:y,createHref:x,push:function(n,t){var i=createLocation(n,t,d(),T.location);v.confirmTransitionTo(i,"PUSH",u,(function(n){if(n){var t=x(i),e=i.key,a=i.state;if(s)if(c.pushState({key:e,state:a},null,t),h)window.location.href=t;else{var o=H.indexOf(T.location.key),r=H.slice(0,-1===o?0:o+1);r.push(i.key),H=r,p({action:"PUSH",location:i})}else window.location.href=t}}))},replace:function(n,t){var r="REPLACE",i=createLocation(n,t,d(),T.location);v.confirmTransitionTo(i,r,u,(function(n){if(n){var t=x(i),e=i.key,a=i.state;if(s)if(c.replaceState({key:e,state:a},null,t),h)window.location.replace(t);else{var o=H.indexOf(T.location.key);-1!==o&&(H[o]=i.key),p({action:r,location:i})}else window.location.replace(t)}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(n){void 0===n&&(n=!1);var t=v.setPrompt(n);return S||(E(1),S=!0),function(){return S&&(S=!1,E(-1)),t()}},listen:function(n){var t=v.appendListener(n);return E(1),function(){E(-1),t()}}};return T},exports.createHashHistory=function(n){void 0===n&&(n={}),canUseDOM||invariant(!1);var t=window.history,e=(window.navigator.userAgent.indexOf("Firefox"),n),a=e.getUserConfirmation,i=void 0===a?getConfirmation:a,o=e.hashType,r=void 0===o?"slash":o,c=n.basename?stripTrailingSlash(addLeadingSlash(n.basename)):"",s=HashPathCoders[r],h=s.encodePath,u=s.decodePath;function f(){var n=u(getHashPath());return c&&(n=stripBasename(n,c)),createLocation(n)}var l=createTransitionManager();function d(n){_extends(E,n),E.length=t.length,l.notifyListeners(E.location,E.action)}var v=!1,p=null;function g(){var n=getHashPath(),t=h(n);if(n!==t)replaceHashPath(t);else{var e=f(),a=E.location;if(!v&&locationsAreEqual(a,e))return;if(p===createPath(e))return;p=null,function(t){v?(v=!1,d()):l.confirmTransitionTo(t,"POP",i,(function(n){n?d({action:"POP",location:t}):function(n){var t=E.location,e=y.lastIndexOf(createPath(t));-1===e&&(e=0);var a=y.lastIndexOf(createPath(n));-1===a&&(a=0);var o=e-a;o&&(v=!0,H(o))}(t)}))}(e)}}var P=getHashPath(),m=h(P);P!==m&&replaceHashPath(m);var w=f(),y=[createPath(w)];function H(n){t.go(n)}var x=0;function L(n){1===(x+=n)&&1===n?window.addEventListener("hashchange",g):0===x&&window.removeEventListener("hashchange",g)}var O=!1,E={length:t.length,action:"POP",location:w,createHref:function(n){return"#"+h(c+createPath(n))},push:function(n,t){var r=createLocation(n,void 0,void 0,E.location);l.confirmTransitionTo(r,"PUSH",i,(function(n){if(n){var t=createPath(r),e=h(c+t);if(getHashPath()!==e){p=t,function(n){window.location.hash=n}(e);var a=y.lastIndexOf(createPath(E.location)),o=y.slice(0,-1===a?0:a+1);o.push(t),y=o,d({action:"PUSH",location:r})}else d()}}))},replace:function(n,t){var o="REPLACE",r=createLocation(n,void 0,void 0,E.location);l.confirmTransitionTo(r,o,i,(function(n){if(n){var t=createPath(r),e=h(c+t);getHashPath()!==e&&(p=t,replaceHashPath(e));var a=y.indexOf(createPath(E.location));-1!==a&&(y[a]=t),d({action:o,location:r})}}))},go:H,goBack:function(){H(-1)},goForward:function(){H(1)},block:function(n){void 0===n&&(n=!1);var t=l.setPrompt(n);return O||(L(1),O=!0),function(){return O&&(O=!1,L(-1)),t()}},listen:function(n){var t=l.appendListener(n);return L(1),function(){L(-1),t()}}};return E},exports.createMemoryHistory=function(n){void 0===n&&(n={});var t=n,o=t.getUserConfirmation,e=t.initialEntries,a=void 0===e?["/"]:e,r=t.initialIndex,i=void 0===r?0:r,c=t.keyLength,s=void 0===c?6:c,h=createTransitionManager();function u(n){_extends(g,n),g.length=g.entries.length,h.notifyListeners(g.location,g.action)}function f(){return Math.random().toString(36).substr(2,s)}var l=clamp(i,0,a.length-1),d=a.map((function(n){return createLocation(n,void 0,"string"==typeof n?f():n.key||f())})),v=createPath;function p(n){var t=clamp(g.index+n,0,g.entries.length-1),e=g.entries[t];h.confirmTransitionTo(e,"POP",o,(function(n){n?u({action:"POP",location:e,index:t}):u()}))}var g={length:d.length,action:"POP",location:d[l],index:l,entries:d,createHref:v,push:function(n,t){var a=createLocation(n,t,f(),g.location);h.confirmTransitionTo(a,"PUSH",o,(function(n){if(n){var t=g.index+1,e=g.entries.slice(0);e.length>t?e.splice(t,e.length-t,a):e.push(a),u({action:"PUSH",location:a,index:t,entries:e})}}))},replace:function(n,t){var e="REPLACE",a=createLocation(n,t,f(),g.location);h.confirmTransitionTo(a,e,o,(function(n){n&&(g.entries[g.index]=a,u({action:e,location:a}))}))},go:p,goBack:function(){p(-1)},goForward:function(){p(1)},canGo:function(n){var t=g.index+n;return 0<=t&&t<g.entries.length},block:function(n){return void 0===n&&(n=!1),h.setPrompt(n)},listen:function(n){return h.appendListener(n)}};return g},exports.createLocation=createLocation,exports.locationsAreEqual=locationsAreEqual,exports.parsePath=parsePath,exports.createPath=createPath},function(module,exports,__webpack_require__){"use strict";function isAbsolute(pathname){return"/"===pathname.charAt(0)}function spliceOne(list,index){for(var i=index,k=i+1,n=list.length;k<n;i+=1,k+=1)list[i]=list[k];list.pop()}exports.__esModule=!0,exports.default=function(to){var from=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",toParts=to&&to.split("/")||[],fromParts=from&&from.split("/")||[],isToAbs=to&&isAbsolute(to),isFromAbs=from&&isAbsolute(from),mustEndAbs=isToAbs||isFromAbs;if(to&&isAbsolute(to)?fromParts=toParts:toParts.length&&(fromParts.pop(),fromParts=fromParts.concat(toParts)),!fromParts.length)return"/";var hasTrailingSlash=void 0;if(fromParts.length){var last=fromParts[fromParts.length-1];hasTrailingSlash="."===last||".."===last||""===last}else hasTrailingSlash=!1;for(var up=0,i=fromParts.length;i>=0;i--){var part=fromParts[i];"."===part?spliceOne(fromParts,i):".."===part?(spliceOne(fromParts,i),up++):up&&(spliceOne(fromParts,i),up--)}if(!mustEndAbs)for(;up--;up)fromParts.unshift("..");!mustEndAbs||""===fromParts[0]||fromParts[0]&&isAbsolute(fromParts[0])||fromParts.unshift("");var result=fromParts.join("/");return hasTrailingSlash&&"/"!==result.substr(-1)&&(result+="/"),result},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.default=function valueEqual(a,b){if(a===b)return!0;if(null==a||null==b)return!1;if(Array.isArray(a))return Array.isArray(b)&&a.length===b.length&&a.every((function(item,index){return valueEqual(item,b[index])}));var aType=void 0===a?"undefined":_typeof(a);if(aType!==(void 0===b?"undefined":_typeof(b)))return!1;if("object"===aType){var aValue=a.valueOf(),bValue=b.valueOf();if(aValue!==a||bValue!==b)return valueEqual(aValue,bValue);var aKeys=Object.keys(a),bKeys=Object.keys(b);return aKeys.length===bKeys.length&&aKeys.every((function(key){return valueEqual(a[key],b[key])}))}return!1},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";module.exports=function(condition,message){}},function(module,exports,__webpack_require__){"use strict";const strictUriEncode=__webpack_require__(288),decodeComponent=__webpack_require__(289),splitOnFirst=__webpack_require__(290);function validateArrayFormatSeparator(value){if("string"!=typeof value||1!==value.length)throw new TypeError("arrayFormatSeparator must be single character string")}function encode(value,options){return options.encode?options.strict?strictUriEncode(value):encodeURIComponent(value):value}function decode(value,options){return options.decode?decodeComponent(value):value}function removeHash(input){const hashStart=input.indexOf("#");return-1!==hashStart&&(input=input.slice(0,hashStart)),input}function extract(input){const queryStart=(input=removeHash(input)).indexOf("?");return-1===queryStart?"":input.slice(queryStart+1)}function parseValue(value,options){return options.parseNumbers&&!Number.isNaN(Number(value))&&"string"==typeof value&&""!==value.trim()?value=Number(value):!options.parseBooleans||null===value||"true"!==value.toLowerCase()&&"false"!==value.toLowerCase()||(value="true"===value.toLowerCase()),value}function parse(input,options){validateArrayFormatSeparator((options=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},options)).arrayFormatSeparator);const formatter=function(options){let result;switch(options.arrayFormat){case"index":return(key,value,accumulator)=>{result=/\[(\d*)\]$/.exec(key),key=key.replace(/\[\d*\]$/,""),result?(void 0===accumulator[key]&&(accumulator[key]={}),accumulator[key][result[1]]=value):accumulator[key]=value};case"bracket":return(key,value,accumulator)=>{result=/(\[\])$/.exec(key),key=key.replace(/\[\]$/,""),result?void 0!==accumulator[key]?accumulator[key]=[].concat(accumulator[key],value):accumulator[key]=[value]:accumulator[key]=value};case"comma":case"separator":return(key,value,accumulator)=>{const newValue="string"==typeof value&&value.split("").indexOf(options.arrayFormatSeparator)>-1?value.split(options.arrayFormatSeparator).map(item=>decode(item,options)):null===value?value:decode(value,options);accumulator[key]=newValue};default:return(key,value,accumulator)=>{void 0!==accumulator[key]?accumulator[key]=[].concat(accumulator[key],value):accumulator[key]=value}}}(options),ret=Object.create(null);if("string"!=typeof input)return ret;if(!(input=input.trim().replace(/^[?#&]/,"")))return ret;for(const param of input.split("&")){let[key,value]=splitOnFirst(options.decode?param.replace(/\+/g," "):param,"=");value=void 0===value?null:["comma","separator"].includes(options.arrayFormat)?value:decode(value,options),formatter(decode(key,options),value,ret)}for(const key of Object.keys(ret)){const value=ret[key];if("object"==typeof value&&null!==value)for(const k of Object.keys(value))value[k]=parseValue(value[k],options);else ret[key]=parseValue(value,options)}return!1===options.sort?ret:(!0===options.sort?Object.keys(ret).sort():Object.keys(ret).sort(options.sort)).reduce((result,key)=>{const value=ret[key];return Boolean(value)&&"object"==typeof value&&!Array.isArray(value)?result[key]=function keysSorter(input){return Array.isArray(input)?input.sort():"object"==typeof input?keysSorter(Object.keys(input)).sort((a,b)=>Number(a)-Number(b)).map(key=>input[key]):input}(value):result[key]=value,result},Object.create(null))}exports.extract=extract,exports.parse=parse,exports.stringify=(object,options)=>{if(!object)return"";validateArrayFormatSeparator((options=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},options)).arrayFormatSeparator);const shouldFilter=key=>options.skipNull&&null==object[key]||options.skipEmptyString&&""===object[key],formatter=function(options){switch(options.arrayFormat){case"index":return key=>(result,value)=>{const index=result.length;return void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,[encode(key,options),"[",index,"]"].join("")]:[...result,[encode(key,options),"[",encode(index,options),"]=",encode(value,options)].join("")]};case"bracket":return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,[encode(key,options),"[]"].join("")]:[...result,[encode(key,options),"[]=",encode(value,options)].join("")];case"comma":case"separator":return key=>(result,value)=>null==value||0===value.length?result:0===result.length?[[encode(key,options),"=",encode(value,options)].join("")]:[[result,encode(value,options)].join(options.arrayFormatSeparator)];default:return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,encode(key,options)]:[...result,[encode(key,options),"=",encode(value,options)].join("")]}}(options),objectCopy={};for(const key of Object.keys(object))shouldFilter(key)||(objectCopy[key]=object[key]);const keys=Object.keys(objectCopy);return!1!==options.sort&&keys.sort(options.sort),keys.map(key=>{const value=object[key];return void 0===value?"":null===value?encode(key,options):Array.isArray(value)?value.reduce(formatter(key),[]).join("&"):encode(key,options)+"="+encode(value,options)}).filter(x=>x.length>0).join("&")},exports.parseUrl=(input,options)=>{options=Object.assign({decode:!0},options);const[url,hash]=splitOnFirst(input,"#");return Object.assign({url:url.split("?")[0]||"",query:parse(extract(input),options)},options&&options.parseFragmentIdentifier&&hash?{fragmentIdentifier:decode(hash,options)}:{})},exports.stringifyUrl=(input,options)=>{options=Object.assign({encode:!0,strict:!0},options);const url=removeHash(input.url).split("?")[0]||"",queryFromUrl=exports.extract(input.url),parsedQueryFromUrl=exports.parse(queryFromUrl,{sort:!1}),query=Object.assign(parsedQueryFromUrl,input.query);let queryString=exports.stringify(query,options);queryString&&(queryString="?"+queryString);let hash=function(url){let hash="";const hashStart=url.indexOf("#");return-1!==hashStart&&(hash=url.slice(hashStart)),hash}(input.url);return input.fragmentIdentifier&&(hash="#"+encode(input.fragmentIdentifier,options)),`${url}${queryString}${hash}`}},function(module,exports,__webpack_require__){"use strict";module.exports=str=>encodeURIComponent(str).replace(/[!'()*]/g,x=>"%"+x.charCodeAt(0).toString(16).toUpperCase())},function(module,exports,__webpack_require__){"use strict";var singleMatcher=new RegExp("%[a-f0-9]{2}","gi"),multiMatcher=new RegExp("(%[a-f0-9]{2})+","gi");function decodeComponents(components,split){try{return decodeURIComponent(components.join(""))}catch(err){}if(1===components.length)return components;split=split||1;var left=components.slice(0,split),right=components.slice(split);return Array.prototype.concat.call([],decodeComponents(left),decodeComponents(right))}function decode(input){try{return decodeURIComponent(input)}catch(err){for(var tokens=input.match(singleMatcher),i=1;i<tokens.length;i++)tokens=(input=decodeComponents(tokens,i).join("")).match(singleMatcher);return input}}module.exports=function(encodedURI){if("string"!=typeof encodedURI)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof encodedURI+"`");try{return encodedURI=encodedURI.replace(/\+/g," "),decodeURIComponent(encodedURI)}catch(err){return function(input){for(var replaceMap={"%FE%FF":"��","%FF%FE":"��"},match=multiMatcher.exec(input);match;){try{replaceMap[match[0]]=decodeURIComponent(match[0])}catch(err){var result=decode(match[0]);result!==match[0]&&(replaceMap[match[0]]=result)}match=multiMatcher.exec(input)}replaceMap["%C2"]="�";for(var entries=Object.keys(replaceMap),i=0;i<entries.length;i++){var key=entries[i];input=input.replace(new RegExp(key,"g"),replaceMap[key])}return input}(encodedURI)}}},function(module,exports,__webpack_require__){"use strict";module.exports=(string,separator)=>{if("string"!=typeof string||"string"!=typeof separator)throw new TypeError("Expected the arguments to be of type `string`");if(""===separator)return[string];const separatorIndex=string.indexOf(separator);return-1===separatorIndex?[string]:[string.slice(0,separatorIndex),string.slice(separatorIndex+separator.length)]}},function(module,exports,__webpack_require__){var e,t;module.exports=(e=__webpack_require__(3),t=__webpack_require__(176),function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=r(n(1)),v=r(n(2)),h=n(3),y=r(n(5)),m=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.renderChildren=function(e,t,n,o){return"function"==typeof e?e(s({},r.state,{isDragActive:t,isDragAccept:n,isDragReject:o})):e},r.composeHandlers=r.composeHandlers.bind(r),r.onClick=r.onClick.bind(r),r.onDocumentDrop=r.onDocumentDrop.bind(r),r.onDragEnter=r.onDragEnter.bind(r),r.onDragLeave=r.onDragLeave.bind(r),r.onDragOver=r.onDragOver.bind(r),r.onDragStart=r.onDragStart.bind(r),r.onDrop=r.onDrop.bind(r),r.onFileDialogCancel=r.onFileDialogCancel.bind(r),r.onInputElementClick=r.onInputElementClick.bind(r),r.setRef=r.setRef.bind(r),r.setRefs=r.setRefs.bind(r),r.isFileDialogActive=!1,r.state={draggedFiles:[],acceptedFiles:[],rejectedFiles:[]},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props.preventDropOnDocument;this.dragTargets=[],e&&(document.addEventListener("dragover",h.onDocumentDragOver,!1),document.addEventListener("drop",this.onDocumentDrop,!1)),this.fileInputEl.addEventListener("click",this.onInputElementClick,!1),window.addEventListener("focus",this.onFileDialogCancel,!1)}},{key:"componentWillUnmount",value:function(){this.props.preventDropOnDocument&&(document.removeEventListener("dragover",h.onDocumentDragOver),document.removeEventListener("drop",this.onDocumentDrop)),null!=this.fileInputEl&&this.fileInputEl.removeEventListener("click",this.onInputElementClick,!1),window.removeEventListener("focus",this.onFileDialogCancel,!1)}},{key:"composeHandlers",value:function(e){return this.props.disabled?null:e}},{key:"onDocumentDrop",value:function(e){this.node&&this.node.contains(e.target)||(e.preventDefault(),this.dragTargets=[])}},{key:"onDragStart",value:function(e){this.props.onDragStart&&this.props.onDragStart.call(this,e)}},{key:"onDragEnter",value:function(e){var t=this;e.preventDefault(),-1===this.dragTargets.indexOf(e.target)&&this.dragTargets.push(e.target),Promise.resolve(this.props.getDataTransferItems(e)).then((function(e){t.setState({isDragActive:!0,draggedFiles:e})})),this.props.onDragEnter&&this.props.onDragEnter.call(this,e)}},{key:"onDragOver",value:function(e){e.preventDefault(),e.stopPropagation();try{e.dataTransfer.dropEffect=this.isFileDialogActive?"none":"copy"}catch(e){}return this.props.onDragOver&&this.props.onDragOver.call(this,e),!1}},{key:"onDragLeave",value:function(e){var t=this;e.preventDefault(),this.dragTargets=this.dragTargets.filter((function(n){return n!==e.target&&t.node.contains(n)})),this.dragTargets.length>0||(this.setState({isDragActive:!1,draggedFiles:[]}),this.props.onDragLeave&&this.props.onDragLeave.call(this,e))}},{key:"onDrop",value:function(e){var t=this,n=this.props,r=n.onDrop,o=n.onDropAccepted,a=n.onDropRejected,u=n.multiple,c=n.disablePreview,s=n.accept,l=n.getDataTransferItems;e.preventDefault(),this.dragTargets=[],this.isFileDialogActive=!1,this.draggedFiles=null,this.setState({isDragActive:!1,draggedFiles:[]}),Promise.resolve(l(e)).then((function(n){var l=[],f=[];n.forEach((function(e){if(!c)try{e.preview=window.URL.createObjectURL(e)}catch(e){}(0,h.fileAccepted)(e,s)&&(0,h.fileMatchSize)(e,t.props.maxSize,t.props.minSize)?l.push(e):f.push(e)})),u||f.push.apply(f,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(l.splice(1))),r&&r.call(t,l,f,e),f.length>0&&a&&a.call(t,f,e),l.length>0&&o&&o.call(t,l,e)}))}},{key:"onClick",value:function(e){var t=this.props,n=t.onClick;t.disableClick||(e.stopPropagation(),n&&n.call(this,e),(0,h.isIeOrEdge)()?setTimeout(this.open.bind(this),0):this.open())}},{key:"onInputElementClick",value:function(e){e.stopPropagation(),this.props.inputProps&&this.props.inputProps.onClick&&this.props.inputProps.onClick()}},{key:"onFileDialogCancel",value:function(){var e=this,t=this.props.onFileDialogCancel;this.isFileDialogActive&&setTimeout((function(){null!=e.fileInputEl&&(e.fileInputEl.files.length||(e.isFileDialogActive=!1)),"function"==typeof t&&t()}),300)}},{key:"setRef",value:function(e){this.node=e}},{key:"setRefs",value:function(e){this.fileInputEl=e}},{key:"open",value:function(){this.isFileDialogActive=!0,this.fileInputEl.value=null,this.fileInputEl.click()}},{key:"render",value:function(){var e=this.props,t=e.accept,n=e.acceptClassName,r=e.activeClassName,i=e.children,a=e.disabled,u=e.disabledClassName,c=e.inputProps,l=e.multiple,f=e.name,d=e.rejectClassName,v=o(e,["accept","acceptClassName","activeClassName","children","disabled","disabledClassName","inputProps","multiple","name","rejectClassName"]),g=v.acceptStyle,m=v.activeStyle,b=v.className,D=void 0===b?"":b,x=v.disabledStyle,O=v.rejectStyle,S=v.style,C=o(v,["acceptStyle","activeStyle","className","disabledStyle","rejectStyle","style"]),j=this.state,E=j.isDragActive,w=j.draggedFiles,_=w.length,k=l||_<=1,P=_>0&&(0,h.allFilesAccepted)(w,this.props.accept),A=_>0&&(!P||!k),F=!(D||S||m||g||O||x);E&&r&&(D+=" "+r),P&&n&&(D+=" "+n),A&&d&&(D+=" "+d),a&&u&&(D+=" "+u),F&&(S=y.default.default,m=y.default.active,g=y.default.active,O=y.default.rejected,x=y.default.disabled);var T=s({position:"relative"},S);m&&E&&(T=s({},T,m)),g&&P&&(T=s({},T,g)),O&&A&&(T=s({},T,O)),x&&a&&(T=s({},T,x));var I={accept:t,disabled:a,type:"file",style:s({position:"absolute",top:0,right:0,bottom:0,left:0,opacity:1e-5,pointerEvents:"none"},c.style),multiple:h.supportMultiple&&l,ref:this.setRefs,onChange:this.onDrop,autoComplete:"off"};f&&f.length&&(I.name=f);var M=(C.acceptedFiles,C.preventDropOnDocument,C.disablePreview,C.disableClick,C.onDropAccepted,C.onDropRejected,C.onFileDialogCancel,C.maxSize,C.minSize,C.getDataTransferItems,o(C,["acceptedFiles","preventDropOnDocument","disablePreview","disableClick","onDropAccepted","onDropRejected","onFileDialogCancel","maxSize","minSize","getDataTransferItems"]));return p.default.createElement("div",s({className:D,style:T},M,{onClick:this.composeHandlers(this.onClick),onDragStart:this.composeHandlers(this.onDragStart),onDragEnter:this.composeHandlers(this.onDragEnter),onDragOver:this.composeHandlers(this.onDragOver),onDragLeave:this.composeHandlers(this.onDragLeave),onDrop:this.composeHandlers(this.onDrop),ref:this.setRef,"aria-disabled":a}),this.renderChildren(i,E,P,A),p.default.createElement("input",s({},c,I)))}}]),t}(p.default.Component);t.default=m,m.propTypes={accept:v.default.oneOfType([v.default.string,v.default.arrayOf(v.default.string)]),children:v.default.oneOfType([v.default.node,v.default.func]),disableClick:v.default.bool,disabled:v.default.bool,disablePreview:v.default.bool,preventDropOnDocument:v.default.bool,inputProps:v.default.object,multiple:v.default.bool,name:v.default.string,maxSize:v.default.number,minSize:v.default.number,className:v.default.string,activeClassName:v.default.string,acceptClassName:v.default.string,rejectClassName:v.default.string,disabledClassName:v.default.string,style:v.default.object,activeStyle:v.default.object,acceptStyle:v.default.object,rejectStyle:v.default.object,disabledStyle:v.default.object,getDataTransferItems:v.default.func,onClick:v.default.func,onDrop:v.default.func,onDropAccepted:v.default.func,onDropRejected:v.default.func,onDragStart:v.default.func,onDragEnter:v.default.func,onDragOver:v.default.func,onDragLeave:v.default.func,onFileDialogCancel:v.default.func},m.defaultProps={preventDropOnDocument:!0,disabled:!1,disablePreview:!1,disableClick:!1,inputProps:{},multiple:!0,maxSize:1/0,minSize:0,getDataTransferItems:h.getDataTransferItems},e.exports=t.default},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";function o(e,t){return"application/x-moz-file"===e.type||(0,p.default)(e,t)}function c(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}function s(e){return-1!==e.indexOf("Edge/")}Object.defineProperty(t,"__esModule",{value:!0}),t.supportMultiple=void 0,t.getDataTransferItems=function(e){var t=[];if(e.dataTransfer){var n=e.dataTransfer;n.files&&n.files.length?t=n.files:n.items&&n.items.length&&(t=n.items)}else e.target&&e.target.files&&(t=e.target.files);return Array.prototype.slice.call(t)},t.fileAccepted=o,t.fileMatchSize=function(e,t,n){return e.size<=t&&e.size>=n},t.allFilesAccepted=function(e,t){return e.every((function(e){return o(e,t)}))},t.onDocumentDragOver=function(e){e.preventDefault()},t.isIeOrEdge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return c(e)||s(e)};var p=function(e){return e&&e.__esModule?e:{default:e}}(n(4));t.supportMultiple="undefined"==typeof document||!document||!document.createElement||"multiple"in document.createElement("input")},function(e,t){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=13)}([function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n=e.exports={version:"2.5.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports=!n(4)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(32)("wks"),o=n(9),i=n(0).Symbol,a="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=r},function(e,t,n){var r=n(0),o=n(2),i=n(8),a=n(22),u=n(10),c=function(e,t,n){var s,l,f,p,d=e&c.F,v=e&c.G,h=e&c.S,g=e&c.P,y=e&c.B,m=v?r:h?r[t]||(r[t]={}):(r[t]||{}).prototype,b=v?o:o[t]||(o[t]={}),D=b.prototype||(b.prototype={});for(s in v&&(n=t),n)f=((l=!d&&m&&void 0!==m[s])?m:n)[s],p=y&&l?u(f,r):g&&"function"==typeof f?u(Function.call,f):f,m&&a(m,s,f,e&c.U),b[s]!=f&&i(b,s,p),g&&D[s]!=f&&(D[s]=f)};r.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,n){var r=n(16),o=n(21);e.exports=n(3)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(24);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(28),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",o=e.type||"",i=o.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim();return"."===t.charAt(0)?r.toLowerCase().endsWith(t.toLowerCase()):t.endsWith("/*")?i===t.replace(/\/.*$/,""):o===t}))}return!0},n(14),n(34)},function(e,t,n){n(15),e.exports=n(2).Array.some},function(e,t,n){"use strict";var r=n(7),o=n(25)(3);r(r.P+r.F*!n(33)([].some,!0),"Array",{some:function(e){return o(this,e,arguments[1])}})},function(e,t,n){var r=n(17),o=n(18),i=n(20),a=Object.defineProperty;t.f=n(3)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(1);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(3)&&!n(4)((function(){return 7!=Object.defineProperty(n(19)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(1),o=n(0).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(1);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(0),o=n(8),i=n(23),a=n(9)("src"),u=Function.toString,c=(""+u).split("toString");n(2).inspectSource=function(e){return u.call(e)},(e.exports=function(e,t,n,u){var s="function"==typeof n;s&&(i(n,"name")||o(n,"name",t)),e[t]!==n&&(s&&(i(n,a)||o(n,a,e[t]?""+e[t]:c.join(String(t)))),e===r?e[t]=n:u?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||u.call(this)}))},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(10),o=n(26),i=n(27),a=n(12),u=n(29);e.exports=function(e,t){var n=1==e,c=2==e,s=3==e,l=4==e,f=6==e,p=5==e||f,d=t||u;return function(t,u,v){for(var h,g,y=i(t),m=o(y),b=r(u,v,3),D=a(m.length),x=0,O=n?d(t,D):c?d(t,0):void 0;D>x;x++)if((p||x in m)&&(g=b(h=m[x],x,y),e))if(n)O[x]=g;else if(g)switch(e){case 3:return!0;case 5:return h;case 6:return x;case 2:O.push(h)}else if(l)return!1;return f?-1:s||l?l:O}}},function(e,t,n){var r=n(5);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(11);e.exports=function(e){return Object(r(e))}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(30);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(1),o=n(31),i=n(6)("species");e.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(5);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(0),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t,n){"use strict";var r=n(4);e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,n){n(35),e.exports=n(2).String.endsWith},function(e,t,n){"use strict";var r=n(7),o=n(12),i=n(36),a="".endsWith;r(r.P+r.F*n(38)("endsWith"),"String",{endsWith:function(e){var t=i(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=o(t.length),u=void 0===n?r:Math.min(o(n),r),c=String(e);return a?a.call(t,c,u):t.slice(u-c.length,u)===c}})},function(e,t,n){var r=n(37),o=n(11);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(e))}},function(e,t,n){var r=n(1),o=n(5),i=n(6)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},function(e,t,n){var r=n(6)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}}])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={rejected:{borderStyle:"solid",borderColor:"#c66",backgroundColor:"#eee"},disabled:{opacity:.5},active:{borderStyle:"solid",borderColor:"#6c6",backgroundColor:"#eee"},default:{width:200,height:200,borderWidth:2,borderColor:"#666",borderStyle:"dashed",borderRadius:5}},e.exports=t.default}]))},,function(module,exports){module.exports=function(){var selection=document.getSelection();if(!selection.rangeCount)return function(){};for(var active=document.activeElement,ranges=[],i=0;i<selection.rangeCount;i++)ranges.push(selection.getRangeAt(i));switch(active.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":active.blur();break;default:active=null}return selection.removeAllRanges(),function(){"Caret"===selection.type&&selection.removeAllRanges(),selection.rangeCount||ranges.forEach((function(range){selection.addRange(range)})),active&&active.focus()}}},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(295);case"v7light":return __webpack_require__(297);case"v8dark":return __webpack_require__(299);case"v8light":return __webpack_require__(301)}},function(module,exports,__webpack_require__){var api=__webpack_require__(174),content=__webpack_require__(296);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(175)(!1)).push([module.i,".canvasEditVar__typeOption{display:flex;align-items:center}.canvasEditVar__typeOption .canvasEditVar__tokenIcon{margin-right:15px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(174),content=__webpack_require__(298);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(175)(!1)).push([module.i,".canvasEditVar__typeOption{display:flex;align-items:center}.canvasEditVar__typeOption .canvasEditVar__tokenIcon{margin-right:15px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(174),content=__webpack_require__(300);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(175)(!1)).push([module.i,".canvasEditVar__typeOption{display:flex;align-items:center}.canvasEditVar__typeOption .canvasEditVar__tokenIcon{margin-right:15px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(174),content=__webpack_require__(302);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(175)(!1)).push([module.i,".canvasEditVar__typeOption{display:flex;align-items:center}.canvasEditVar__typeOption .canvasEditVar__tokenIcon{margin-right:15px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(174),content=__webpack_require__(304);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(175)(!1)).push([module.i,".canvasVarHeader__triggerWrapper{display:flex;align-items:center}.canvasVarHeader__button{font-size:16px;font-size:1rem;line-height:1.5;text-align:left;width:100%;flex-grow:1;display:flex;align-items:center}.canvasVarHeader__iconWrapper{width:16px;height:16px;border-radius:4px;margin-right:8px;margin-left:4px;flex-shrink:0}.canvasVarHeader__anchor{display:inline-block}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(174),content=__webpack_require__(306);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(175)(!1)).push([module.i,".canvasVarHeader__triggerWrapper{display:flex;align-items:center}.canvasVarHeader__button{font-size:16px;font-size:1rem;line-height:1.5;text-align:left;width:100%;flex-grow:1;display:flex;align-items:center}.canvasVarHeader__iconWrapper{width:16px;height:16px;border-radius:4px;margin-right:8px;margin-left:4px;flex-shrink:0}.canvasVarHeader__anchor{display:inline-block}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(174),content=__webpack_require__(308);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(175)(!1)).push([module.i,".canvasVarHeader__triggerWrapper{display:flex;align-items:center}.canvasVarHeader__button{font-size:14px;font-size:1rem;line-height:1.71429rem;text-align:left;width:100%;flex-grow:1;display:flex;align-items:center}.canvasVarHeader__iconWrapper{width:16px;height:16px;border-radius:6px;margin-right:8px;margin-left:4px;flex-shrink:0}.canvasVarHeader__anchor{display:inline-block}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(174),content=__webpack_require__(310);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(175)(!1)).push([module.i,".canvasVarHeader__triggerWrapper{display:flex;align-items:center}.canvasVarHeader__button{font-size:14px;font-size:1rem;line-height:1.71429rem;text-align:left;width:100%;flex-grow:1;display:flex;align-items:center}.canvasVarHeader__iconWrapper{width:16px;height:16px;border-radius:6px;margin-right:8px;margin-left:4px;flex-shrink:0}.canvasVarHeader__anchor{display:inline-block}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(312);case"v7light":return __webpack_require__(314);case"v8dark":return __webpack_require__(316);case"v8light":return __webpack_require__(318)}},function(module,exports,__webpack_require__){var api=__webpack_require__(174),content=__webpack_require__(313);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(175)(!1)).push([module.i,".canvasVarConfig__container{width:100%;position:relative}.canvasVarConfig__container.canvasVarConfig-isEditMode .canvasVarConfig__innerContainer{transform:translateX(-50%)}.canvasVarConfig__list table{background-color:transparent}.canvasVarConfig__list thead tr th,.canvasVarConfig__list thead tr td{border-bottom:none;border-top:none}.canvasVarConfig__list tbody tr td{border-top:none;border-bottom:none}.canvasVarConfig__list tbody tr:hover{background-color:transparent}.canvasVarConfig__list tbody tr:last-child td{border-bottom:none}.canvasVarConfig__innerContainer{width:calc(200% + 48px);position:relative;display:flex;flex-direction:row;align-content:stretch}.canvasVarConfig__innerContainer .canvasVarConfig__editView{margin-left:0}.canvasVarConfig__innerContainer .canvasVarConfig__listView{margin-right:0}.canvasVarConfig__editView{width:50%;height:100%;flex-shrink:0}.canvasVarConfig__listView{width:50%;flex-shrink:0}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(174),content=__webpack_require__(315);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(175)(!1)).push([module.i,".canvasVarConfig__container{width:100%;position:relative}.canvasVarConfig__container.canvasVarConfig-isEditMode .canvasVarConfig__innerContainer{transform:translateX(-50%)}.canvasVarConfig__list table{background-color:transparent}.canvasVarConfig__list thead tr th,.canvasVarConfig__list thead tr td{border-bottom:none;border-top:none}.canvasVarConfig__list tbody tr td{border-top:none;border-bottom:none}.canvasVarConfig__list tbody tr:hover{background-color:transparent}.canvasVarConfig__list tbody tr:last-child td{border-bottom:none}.canvasVarConfig__innerContainer{width:calc(200% + 48px);position:relative;display:flex;flex-direction:row;align-content:stretch}.canvasVarConfig__innerContainer .canvasVarConfig__editView{margin-left:0}.canvasVarConfig__innerContainer .canvasVarConfig__listView{margin-right:0}.canvasVarConfig__editView{width:50%;height:100%;flex-shrink:0}.canvasVarConfig__listView{width:50%;flex-shrink:0}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(174),content=__webpack_require__(317);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(175)(!1)).push([module.i,".canvasVarConfig__container{width:100%;position:relative}.canvasVarConfig__container.canvasVarConfig-isEditMode .canvasVarConfig__innerContainer{transform:translateX(-50%)}.canvasVarConfig__list table{background-color:transparent}.canvasVarConfig__list thead tr th,.canvasVarConfig__list thead tr td{border-bottom:none;border-top:none}.canvasVarConfig__list tbody tr td{border-top:none;border-bottom:none}.canvasVarConfig__list tbody tr:hover{background-color:transparent}.canvasVarConfig__list tbody tr:last-child td{border-bottom:none}.canvasVarConfig__innerContainer{width:calc(200% + 48px);position:relative;display:flex;flex-direction:row;align-content:stretch}.canvasVarConfig__innerContainer .canvasVarConfig__editView{margin-left:0}.canvasVarConfig__innerContainer .canvasVarConfig__listView{margin-right:0}.canvasVarConfig__editView{width:50%;height:100%;flex-shrink:0}.canvasVarConfig__listView{width:50%;flex-shrink:0}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(174),content=__webpack_require__(319);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(175)(!1)).push([module.i,".canvasVarConfig__container{width:100%;position:relative}.canvasVarConfig__container.canvasVarConfig-isEditMode .canvasVarConfig__innerContainer{transform:translateX(-50%)}.canvasVarConfig__list table{background-color:transparent}.canvasVarConfig__list thead tr th,.canvasVarConfig__list thead tr td{border-bottom:none;border-top:none}.canvasVarConfig__list tbody tr td{border-top:none;border-bottom:none}.canvasVarConfig__list tbody tr:hover{background-color:transparent}.canvasVarConfig__list tbody tr:last-child td{border-bottom:none}.canvasVarConfig__innerContainer{width:calc(200% + 48px);position:relative;display:flex;flex-direction:row;align-content:stretch}.canvasVarConfig__innerContainer .canvasVarConfig__editView{margin-left:0}.canvasVarConfig__innerContainer .canvasVarConfig__listView{margin-right:0}.canvasVarConfig__editView{width:50%;height:100%;flex-shrink:0}.canvasVarConfig__listView{width:50%;flex-shrink:0}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){"use strict";function _interopDefault(ex){return ex&&"object"==typeof ex&&"default"in ex?ex.default:ex}Object.defineProperty(exports,"__esModule",{value:!0});var React=__webpack_require__(3),React__default=_interopDefault(React),_inheritsLoose=_interopDefault(__webpack_require__(321)),_extends=_interopDefault(__webpack_require__(191)),redux=__webpack_require__(322),reactRedux=__webpack_require__(173),useMemoOne=__webpack_require__(323),cssBoxModel=__webpack_require__(324),memoizeOne=_interopDefault(__webpack_require__(325)),rafSchd=_interopDefault(__webpack_require__(326)),ReactDOM=_interopDefault(__webpack_require__(5));function log(type,message){}log.bind(null,"warn"),log.bind(null,"error");function noop(){}function bindEvents(el,bindings,sharedOptions){var unbindings=bindings.map((function(binding){var options=function(shared,fromBinding){return _extends({},shared,{},fromBinding)}(sharedOptions,binding.options);return el.addEventListener(binding.eventName,binding.fn,options),function(){el.removeEventListener(binding.eventName,binding.fn,options)}}));return function(){unbindings.forEach((function(unbind){unbind()}))}}function RbdInvariant(message){this.message=message}function invariant(condition,message){if(!condition)throw new RbdInvariant("Invariant failed")}RbdInvariant.prototype.toString=function(){return this.message};var ErrorBoundary=function(_React$Component){function ErrorBoundary(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_React$Component.call.apply(_React$Component,[this].concat(args))||this).callbacks=null,_this.unbind=noop,_this.onWindowError=function(event){var callbacks=_this.getCallbacks();callbacks.isDragging()&&callbacks.tryAbort(),event.error instanceof RbdInvariant&&event.preventDefault()},_this.getCallbacks=function(){if(!_this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return _this.callbacks},_this.setCallbacks=function(callbacks){_this.callbacks=callbacks},_this}_inheritsLoose(ErrorBoundary,_React$Component);var _proto=ErrorBoundary.prototype;return _proto.componentDidMount=function(){this.unbind=bindEvents(window,[{eventName:"error",fn:this.onWindowError}])},_proto.componentWillUnmount=function(){this.unbind()},_proto.componentDidCatch=function(err){if(!(err instanceof RbdInvariant))throw err;this.setState({})},_proto.render=function(){return this.props.children(this.setCallbacks)},ErrorBoundary}(React__default.Component),position=function(index){return index+1},withLocation=function(source,destination){var isInHomeList=source.droppableId===destination.droppableId,startPosition=position(source.index),endPosition=position(destination.index);return isInHomeList?"\n      You have moved the item from position "+startPosition+"\n      to position "+endPosition+"\n    ":"\n    You have moved the item from position "+startPosition+"\n    in list "+source.droppableId+"\n    to list "+destination.droppableId+"\n    in position "+endPosition+"\n  "},withCombine=function(id,source,combine){return source.droppableId===combine.droppableId?"\n      The item "+id+"\n      has been combined with "+combine.draggableId:"\n      The item "+id+"\n      in list "+source.droppableId+"\n      has been combined with "+combine.draggableId+"\n      in list "+combine.droppableId+"\n    "},returnedToStart=function(source){return"\n  The item has returned to its starting position\n  of "+position(source.index)+"\n"},preset_dragHandleUsageInstructions="\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",preset_onDragStart=function(start){return"\n  You have lifted an item in position "+position(start.source.index)+"\n"},preset_onDragUpdate=function(update){var location=update.destination;if(location)return withLocation(update.source,location);var combine=update.combine;return combine?withCombine(update.draggableId,update.source,combine):"You are over an area that cannot be dropped on"},preset_onDragEnd=function(result){if("CANCEL"===result.reason)return"\n      Movement cancelled.\n      "+returnedToStart(result.source)+"\n    ";var location=result.destination,combine=result.combine;return location?"\n      You have dropped the item.\n      "+withLocation(result.source,location)+"\n    ":combine?"\n      You have dropped the item.\n      "+withCombine(result.draggableId,result.source,combine)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+returnedToStart(result.source)+"\n  "},origin={x:0,y:0},add=function(point1,point2){return{x:point1.x+point2.x,y:point1.y+point2.y}},subtract=function(point1,point2){return{x:point1.x-point2.x,y:point1.y-point2.y}},isEqual=function(point1,point2){return point1.x===point2.x&&point1.y===point2.y},negate=function(point){return{x:0!==point.x?-point.x:0,y:0!==point.y?-point.y:0}},patch=function(line,value,otherValue){var _ref;return void 0===otherValue&&(otherValue=0),(_ref={})[line]=value,_ref["x"===line?"y":"x"]=otherValue,_ref},distance=function(point1,point2){return Math.sqrt(Math.pow(point2.x-point1.x,2)+Math.pow(point2.y-point1.y,2))},closest=function(target,points){return Math.min.apply(Math,points.map((function(point){return distance(target,point)})))},apply=function(fn){return function(point){return{x:fn(point.x),y:fn(point.y)}}},offsetByPosition=function(spacing,point){return{top:spacing.top+point.y,left:spacing.left+point.x,bottom:spacing.bottom+point.y,right:spacing.right+point.x}},getCorners=function(spacing){return[{x:spacing.left,y:spacing.top},{x:spacing.right,y:spacing.top},{x:spacing.left,y:spacing.bottom},{x:spacing.right,y:spacing.bottom}]},clip=function(target,frame){return frame&&frame.shouldClipSubject?function(frame,subject){var result=cssBoxModel.getRect({top:Math.max(subject.top,frame.top),right:Math.min(subject.right,frame.right),bottom:Math.min(subject.bottom,frame.bottom),left:Math.max(subject.left,frame.left)});return result.width<=0||result.height<=0?null:result}(frame.pageMarginBox,target):cssBoxModel.getRect(target)},getSubject=function(_ref){var page=_ref.page,withPlaceholder=_ref.withPlaceholder,axis=_ref.axis,frame=_ref.frame,increased=function(target,axis,withPlaceholder){var _extends2;return withPlaceholder&&withPlaceholder.increasedBy?_extends({},target,((_extends2={})[axis.end]=target[axis.end]+withPlaceholder.increasedBy[axis.line],_extends2)):target}(function(target,frame){return frame?offsetByPosition(target,frame.scroll.diff.displacement):target}(page.marginBox,frame),axis,withPlaceholder);return{page:page,withPlaceholder:withPlaceholder,active:clip(increased,frame)}},scrollDroppable=function(droppable,newScroll){droppable.frame||invariant(!1);var scrollable=droppable.frame,scrollDiff=subtract(newScroll,scrollable.scroll.initial),scrollDisplacement=negate(scrollDiff),frame=_extends({},scrollable,{scroll:{initial:scrollable.scroll.initial,current:newScroll,diff:{value:scrollDiff,displacement:scrollDisplacement},max:scrollable.scroll.max}}),subject=getSubject({page:droppable.subject.page,withPlaceholder:droppable.subject.withPlaceholder,axis:droppable.axis,frame:frame});return _extends({},droppable,{frame:frame,subject:subject})};function values(map){return Object.values?Object.values(map):Object.keys(map).map((function(key){return map[key]}))}function findIndex(list,predicate){if(list.findIndex)return list.findIndex(predicate);for(var i=0;i<list.length;i++)if(predicate(list[i]))return i;return-1}function find(list,predicate){if(list.find)return list.find(predicate);var index=findIndex(list,predicate);return-1!==index?list[index]:void 0}function toArray(list){return Array.prototype.slice.call(list)}var toDroppableMap=memoizeOne((function(droppables){return droppables.reduce((function(previous,current){return previous[current.descriptor.id]=current,previous}),{})})),toDraggableMap=memoizeOne((function(draggables){return draggables.reduce((function(previous,current){return previous[current.descriptor.id]=current,previous}),{})})),toDroppableList=memoizeOne((function(droppables){return values(droppables)})),toDraggableList=memoizeOne((function(draggables){return values(draggables)})),getDraggablesInsideDroppable=memoizeOne((function(droppableId,draggables){return toDraggableList(draggables).filter((function(draggable){return droppableId===draggable.descriptor.droppableId})).sort((function(a,b){return a.descriptor.index-b.descriptor.index}))}));function tryGetDestination(impact){return impact.at&&"REORDER"===impact.at.type?impact.at.destination:null}function tryGetCombine(impact){return impact.at&&"COMBINE"===impact.at.type?impact.at.combine:null}var removeDraggableFromList=memoizeOne((function(remove,list){return list.filter((function(item){return item.descriptor.id!==remove.descriptor.id}))})),isHomeOf=function(draggable,destination){return draggable.descriptor.droppableId===destination.descriptor.id},noDisplacedBy={point:origin,value:0},emptyGroups={invisible:{},visible:{},all:[]},noImpact={displaced:emptyGroups,displacedBy:noDisplacedBy,at:null},isWithin=function(lowerBound,upperBound){return function(value){return lowerBound<=value&&value<=upperBound}},isPartiallyVisibleThroughFrame=function(frame){var isWithinVertical=isWithin(frame.top,frame.bottom),isWithinHorizontal=isWithin(frame.left,frame.right);return function(subject){if(isWithinVertical(subject.top)&&isWithinVertical(subject.bottom)&&isWithinHorizontal(subject.left)&&isWithinHorizontal(subject.right))return!0;var isPartiallyVisibleVertically=isWithinVertical(subject.top)||isWithinVertical(subject.bottom),isPartiallyVisibleHorizontally=isWithinHorizontal(subject.left)||isWithinHorizontal(subject.right);if(isPartiallyVisibleVertically&&isPartiallyVisibleHorizontally)return!0;var isBiggerVertically=subject.top<frame.top&&subject.bottom>frame.bottom,isBiggerHorizontally=subject.left<frame.left&&subject.right>frame.right;return!(!isBiggerVertically||!isBiggerHorizontally)||(isBiggerVertically&&isPartiallyVisibleHorizontally||isBiggerHorizontally&&isPartiallyVisibleVertically)}},isTotallyVisibleThroughFrame=function(frame){var isWithinVertical=isWithin(frame.top,frame.bottom),isWithinHorizontal=isWithin(frame.left,frame.right);return function(subject){return isWithinVertical(subject.top)&&isWithinVertical(subject.bottom)&&isWithinHorizontal(subject.left)&&isWithinHorizontal(subject.right)}},vertical={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},horizontal={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},isVisible=function(_ref){var toBeDisplaced=_ref.target,destination=_ref.destination,viewport=_ref.viewport,withDroppableDisplacement=_ref.withDroppableDisplacement,isVisibleThroughFrameFn=_ref.isVisibleThroughFrameFn,displacedTarget=withDroppableDisplacement?function(target,destination){var displacement=destination.frame?destination.frame.scroll.diff.displacement:origin;return offsetByPosition(target,displacement)}(toBeDisplaced,destination):toBeDisplaced;return function(target,destination,isVisibleThroughFrameFn){return!!destination.subject.active&&isVisibleThroughFrameFn(destination.subject.active)(target)}(displacedTarget,destination,isVisibleThroughFrameFn)&&function(target,viewport,isVisibleThroughFrameFn){return isVisibleThroughFrameFn(viewport)(target)}(displacedTarget,viewport,isVisibleThroughFrameFn)},isPartiallyVisible=function(args){return isVisible(_extends({},args,{isVisibleThroughFrameFn:isPartiallyVisibleThroughFrame}))},isTotallyVisible=function(args){return isVisible(_extends({},args,{isVisibleThroughFrameFn:isTotallyVisibleThroughFrame}))};function getDisplacementGroups(_ref){var afterDragging=_ref.afterDragging,destination=_ref.destination,displacedBy=_ref.displacedBy,viewport=_ref.viewport,forceShouldAnimate=_ref.forceShouldAnimate,last=_ref.last;return afterDragging.reduce((function(groups,draggable){var target=function(draggable,displacedBy){var marginBox=draggable.page.marginBox,expandBy={top:displacedBy.point.y,right:0,bottom:0,left:displacedBy.point.x};return cssBoxModel.getRect(cssBoxModel.expand(marginBox,expandBy))}(draggable,displacedBy),id=draggable.descriptor.id;if(groups.all.push(id),!isPartiallyVisible({target:target,destination:destination,viewport:viewport,withDroppableDisplacement:!0}))return groups.invisible[draggable.descriptor.id]=!0,groups;var displacement={draggableId:id,shouldAnimate:function(id,last,forceShouldAnimate){if("boolean"==typeof forceShouldAnimate)return forceShouldAnimate;if(!last)return!0;var invisible=last.invisible,visible=last.visible;if(invisible[id])return!1;var previous=visible[id];return!previous||previous.shouldAnimate}(id,last,forceShouldAnimate)};return groups.visible[id]=displacement,groups}),{all:[],visible:{},invisible:{}})}function goAtEnd(_ref){var insideDestination=_ref.insideDestination,inHomeList=_ref.inHomeList,displacedBy=_ref.displacedBy,destination=_ref.destination,newIndex=function(draggables,options){if(!draggables.length)return 0;var indexOfLastItem=draggables[draggables.length-1].descriptor.index;return options.inHomeList?indexOfLastItem:indexOfLastItem+1}(insideDestination,{inHomeList:inHomeList});return{displaced:emptyGroups,displacedBy:displacedBy,at:{type:"REORDER",destination:{droppableId:destination.descriptor.id,index:newIndex}}}}function calculateReorderImpact(_ref2){var draggable=_ref2.draggable,insideDestination=_ref2.insideDestination,destination=_ref2.destination,viewport=_ref2.viewport,displacedBy=_ref2.displacedBy,last=_ref2.last,index=_ref2.index,forceShouldAnimate=_ref2.forceShouldAnimate,inHomeList=isHomeOf(draggable,destination);if(null==index)return goAtEnd({insideDestination:insideDestination,inHomeList:inHomeList,displacedBy:displacedBy,destination:destination});var match=find(insideDestination,(function(item){return item.descriptor.index===index}));if(!match)return goAtEnd({insideDestination:insideDestination,inHomeList:inHomeList,displacedBy:displacedBy,destination:destination});var withoutDragging=removeDraggableFromList(draggable,insideDestination),sliceFrom=insideDestination.indexOf(match);return{displaced:getDisplacementGroups({afterDragging:withoutDragging.slice(sliceFrom),destination:destination,displacedBy:displacedBy,last:last,viewport:viewport.frame,forceShouldAnimate:forceShouldAnimate}),displacedBy:displacedBy,at:{type:"REORDER",destination:{droppableId:destination.descriptor.id,index:index}}}}function didStartAfterCritical(draggableId,afterCritical){return Boolean(afterCritical.effected[draggableId])}var moveToNextIndex=function(_ref){var isMovingForward=_ref.isMovingForward,isInHomeList=_ref.isInHomeList,draggable=_ref.draggable,draggables=_ref.draggables,destination=_ref.destination,insideDestination=_ref.insideDestination,previousImpact=_ref.previousImpact,viewport=_ref.viewport,afterCritical=_ref.afterCritical,wasAt=previousImpact.at;if(wasAt||invariant(!1),"REORDER"===wasAt.type){var _newIndex=function(_ref){var isMovingForward=_ref.isMovingForward,isInHomeList=_ref.isInHomeList,insideDestination=_ref.insideDestination,location=_ref.location;if(!insideDestination.length)return null;var currentIndex=location.index,proposedIndex=isMovingForward?currentIndex+1:currentIndex-1,firstIndex=insideDestination[0].descriptor.index,lastIndex=insideDestination[insideDestination.length-1].descriptor.index;return proposedIndex<firstIndex||proposedIndex>(isInHomeList?lastIndex:lastIndex+1)?null:proposedIndex}({isMovingForward:isMovingForward,isInHomeList:isInHomeList,location:wasAt.destination,insideDestination:insideDestination});return null==_newIndex?null:calculateReorderImpact({draggable:draggable,insideDestination:insideDestination,destination:destination,viewport:viewport,last:previousImpact.displaced,displacedBy:previousImpact.displacedBy,index:_newIndex})}var newIndex=function(_ref){var isMovingForward=_ref.isMovingForward,destination=_ref.destination,draggables=_ref.draggables,combine=_ref.combine,afterCritical=_ref.afterCritical;if(!destination.isCombineEnabled)return null;var combineId=combine.draggableId,combineWithIndex=draggables[combineId].descriptor.index;return didStartAfterCritical(combineId,afterCritical)?isMovingForward?combineWithIndex:combineWithIndex-1:isMovingForward?combineWithIndex+1:combineWithIndex}({isMovingForward:isMovingForward,destination:destination,displaced:previousImpact.displaced,draggables:draggables,combine:wasAt.combine,afterCritical:afterCritical});return null==newIndex?null:calculateReorderImpact({draggable:draggable,insideDestination:insideDestination,destination:destination,viewport:viewport,last:previousImpact.displaced,displacedBy:previousImpact.displacedBy,index:newIndex})},whenCombining=function(_ref){var afterCritical=_ref.afterCritical,impact=_ref.impact,draggables=_ref.draggables,combine=tryGetCombine(impact);combine||invariant(!1);var combineWith=combine.draggableId,center=draggables[combineWith].page.borderBox.center,displaceBy=function(_ref){var displaced=_ref.displaced,afterCritical=_ref.afterCritical,combineWith=_ref.combineWith,displacedBy=_ref.displacedBy,isDisplaced=Boolean(displaced.visible[combineWith]||displaced.invisible[combineWith]);return didStartAfterCritical(combineWith,afterCritical)?isDisplaced?origin:negate(displacedBy.point):isDisplaced?displacedBy.point:origin}({displaced:impact.displaced,afterCritical:afterCritical,combineWith:combineWith,displacedBy:impact.displacedBy});return add(center,displaceBy)},distanceFromStartToBorderBoxCenter=function(axis,box){return box.margin[axis.start]+box.borderBox[axis.size]/2},getCrossAxisBorderBoxCenter=function(axis,target,isMoving){return target[axis.crossAxisStart]+isMoving.margin[axis.crossAxisStart]+isMoving.borderBox[axis.crossAxisSize]/2},goAfter=function(_ref){var axis=_ref.axis,moveRelativeTo=_ref.moveRelativeTo,isMoving=_ref.isMoving;return patch(axis.line,moveRelativeTo.marginBox[axis.end]+distanceFromStartToBorderBoxCenter(axis,isMoving),getCrossAxisBorderBoxCenter(axis,moveRelativeTo.marginBox,isMoving))},goBefore=function(_ref2){var axis=_ref2.axis,moveRelativeTo=_ref2.moveRelativeTo,isMoving=_ref2.isMoving;return patch(axis.line,moveRelativeTo.marginBox[axis.start]-function(axis,box){return box.margin[axis.end]+box.borderBox[axis.size]/2}(axis,isMoving),getCrossAxisBorderBoxCenter(axis,moveRelativeTo.marginBox,isMoving))},whenReordering=function(_ref){var impact=_ref.impact,draggable=_ref.draggable,draggables=_ref.draggables,droppable=_ref.droppable,afterCritical=_ref.afterCritical,insideDestination=getDraggablesInsideDroppable(droppable.descriptor.id,draggables),draggablePage=draggable.page,axis=droppable.axis;if(!insideDestination.length)return function(_ref3){var axis=_ref3.axis,moveInto=_ref3.moveInto,isMoving=_ref3.isMoving;return patch(axis.line,moveInto.contentBox[axis.start]+distanceFromStartToBorderBoxCenter(axis,isMoving),getCrossAxisBorderBoxCenter(axis,moveInto.contentBox,isMoving))}({axis:axis,moveInto:droppable.page,isMoving:draggablePage});var displaced=impact.displaced,displacedBy=impact.displacedBy,closestAfter=displaced.all[0];if(closestAfter){var closest=draggables[closestAfter];if(didStartAfterCritical(closestAfter,afterCritical))return goBefore({axis:axis,moveRelativeTo:closest.page,isMoving:draggablePage});var withDisplacement=cssBoxModel.offset(closest.page,displacedBy.point);return goBefore({axis:axis,moveRelativeTo:withDisplacement,isMoving:draggablePage})}var last=insideDestination[insideDestination.length-1];if(last.descriptor.id===draggable.descriptor.id)return draggablePage.borderBox.center;if(didStartAfterCritical(last.descriptor.id,afterCritical)){var page=cssBoxModel.offset(last.page,negate(afterCritical.displacedBy.point));return goAfter({axis:axis,moveRelativeTo:page,isMoving:draggablePage})}return goAfter({axis:axis,moveRelativeTo:last.page,isMoving:draggablePage})},withDroppableDisplacement=function(droppable,point){var frame=droppable.frame;return frame?add(point,frame.scroll.diff.displacement):point},getPageBorderBoxCenterFromImpact=function(args){var withoutDisplacement=function(_ref){var impact=_ref.impact,draggable=_ref.draggable,droppable=_ref.droppable,draggables=_ref.draggables,afterCritical=_ref.afterCritical,original=draggable.page.borderBox.center,at=impact.at;return droppable&&at?"REORDER"===at.type?whenReordering({impact:impact,draggable:draggable,draggables:draggables,droppable:droppable,afterCritical:afterCritical}):whenCombining({impact:impact,draggables:draggables,afterCritical:afterCritical}):original}(args),droppable=args.droppable;return droppable?withDroppableDisplacement(droppable,withoutDisplacement):withoutDisplacement},scrollViewport=function(viewport,newScroll){var diff=subtract(newScroll,viewport.scroll.initial),displacement=negate(diff);return{frame:cssBoxModel.getRect({top:newScroll.y,bottom:newScroll.y+viewport.frame.height,left:newScroll.x,right:newScroll.x+viewport.frame.width}),scroll:{initial:viewport.scroll.initial,max:viewport.scroll.max,current:newScroll,diff:{value:diff,displacement:displacement}}}};function getDraggables(ids,draggables){return ids.map((function(id){return draggables[id]}))}var getClientFromPageBorderBoxCenter=function(_ref){var pageBorderBoxCenter=_ref.pageBorderBoxCenter,draggable=_ref.draggable,withoutPageScrollChange=function(viewport,point){return add(viewport.scroll.diff.displacement,point)}(_ref.viewport,pageBorderBoxCenter),offset=subtract(withoutPageScrollChange,draggable.page.borderBox.center);return add(draggable.client.borderBox.center,offset)},isTotallyVisibleInNewLocation=function(_ref){var draggable=_ref.draggable,destination=_ref.destination,newPageBorderBoxCenter=_ref.newPageBorderBoxCenter,viewport=_ref.viewport,withDroppableDisplacement=_ref.withDroppableDisplacement,_ref$onlyOnMainAxis=_ref.onlyOnMainAxis,onlyOnMainAxis=void 0!==_ref$onlyOnMainAxis&&_ref$onlyOnMainAxis,changeNeeded=subtract(newPageBorderBoxCenter,draggable.page.borderBox.center),args={target:offsetByPosition(draggable.page.borderBox,changeNeeded),destination:destination,withDroppableDisplacement:withDroppableDisplacement,viewport:viewport};return onlyOnMainAxis?function(args){return isVisible(_extends({},args,{isVisibleThroughFrameFn:(axis=args.destination.axis,function(frame){var isWithinVertical=isWithin(frame.top,frame.bottom),isWithinHorizontal=isWithin(frame.left,frame.right);return function(subject){return axis===vertical?isWithinVertical(subject.top)&&isWithinVertical(subject.bottom):isWithinHorizontal(subject.left)&&isWithinHorizontal(subject.right)}})}));var axis}(args):isTotallyVisible(args)},moveToNextPlace=function(_ref){var isMovingForward=_ref.isMovingForward,draggable=_ref.draggable,destination=_ref.destination,draggables=_ref.draggables,previousImpact=_ref.previousImpact,viewport=_ref.viewport,previousPageBorderBoxCenter=_ref.previousPageBorderBoxCenter,previousClientSelection=_ref.previousClientSelection,afterCritical=_ref.afterCritical;if(!destination.isEnabled)return null;var insideDestination=getDraggablesInsideDroppable(destination.descriptor.id,draggables),isInHomeList=isHomeOf(draggable,destination),impact=function(_ref){var isMovingForward=_ref.isMovingForward,draggable=_ref.draggable,destination=_ref.destination,insideDestination=_ref.insideDestination,previousImpact=_ref.previousImpact;if(!destination.isCombineEnabled)return null;if(!tryGetDestination(previousImpact))return null;function getImpact(target){var at={type:"COMBINE",combine:{draggableId:target,droppableId:destination.descriptor.id}};return _extends({},previousImpact,{at:at})}var all=previousImpact.displaced.all,closestId=all.length?all[0]:null;if(isMovingForward)return closestId?getImpact(closestId):null;var withoutDraggable=removeDraggableFromList(draggable,insideDestination);if(!closestId)return withoutDraggable.length?getImpact(withoutDraggable[withoutDraggable.length-1].descriptor.id):null;var indexOfClosest=findIndex(withoutDraggable,(function(d){return d.descriptor.id===closestId}));-1===indexOfClosest&&invariant(!1);var proposedIndex=indexOfClosest-1;return proposedIndex<0?null:getImpact(withoutDraggable[proposedIndex].descriptor.id)}({isMovingForward:isMovingForward,draggable:draggable,destination:destination,insideDestination:insideDestination,previousImpact:previousImpact})||moveToNextIndex({isMovingForward:isMovingForward,isInHomeList:isInHomeList,draggable:draggable,draggables:draggables,destination:destination,insideDestination:insideDestination,previousImpact:previousImpact,viewport:viewport,afterCritical:afterCritical});if(!impact)return null;var pageBorderBoxCenter=getPageBorderBoxCenterFromImpact({impact:impact,draggable:draggable,droppable:destination,draggables:draggables,afterCritical:afterCritical});if(isTotallyVisibleInNewLocation({draggable:draggable,destination:destination,newPageBorderBoxCenter:pageBorderBoxCenter,viewport:viewport.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:getClientFromPageBorderBoxCenter({pageBorderBoxCenter:pageBorderBoxCenter,draggable:draggable,viewport:viewport}),impact:impact,scrollJumpRequest:null};var distance=subtract(pageBorderBoxCenter,previousPageBorderBoxCenter);return{clientSelection:previousClientSelection,impact:function(_ref){var impact=_ref.impact,viewport=_ref.viewport,destination=_ref.destination,draggables=_ref.draggables,maxScrollChange=_ref.maxScrollChange,scrolledViewport=scrollViewport(viewport,add(viewport.scroll.current,maxScrollChange)),scrolledDroppable=destination.frame?scrollDroppable(destination,add(destination.frame.scroll.current,maxScrollChange)):destination,last=impact.displaced,withViewportScroll=getDisplacementGroups({afterDragging:getDraggables(last.all,draggables),destination:destination,displacedBy:impact.displacedBy,viewport:scrolledViewport.frame,last:last,forceShouldAnimate:!1}),withDroppableScroll=getDisplacementGroups({afterDragging:getDraggables(last.all,draggables),destination:scrolledDroppable,displacedBy:impact.displacedBy,viewport:viewport.frame,last:last,forceShouldAnimate:!1}),invisible={},visible={},groups=[last,withViewportScroll,withDroppableScroll];return last.all.forEach((function(id){var displacement=function(id,groups){for(var i=0;i<groups.length;i++){var displacement=groups[i].visible[id];if(displacement)return displacement}return null}(id,groups);displacement?visible[id]=displacement:invisible[id]=!0})),_extends({},impact,{displaced:{all:last.all,invisible:invisible,visible:visible}})}({impact:impact,viewport:viewport,destination:destination,draggables:draggables,maxScrollChange:distance}),scrollJumpRequest:distance}},getKnownActive=function(droppable){var rect=droppable.subject.active;return rect||invariant(!1),rect},getCurrentPageBorderBoxCenter=function(draggable,afterCritical){var original=draggable.page.borderBox.center;return didStartAfterCritical(draggable.descriptor.id,afterCritical)?subtract(original,afterCritical.displacedBy.point):original},getCurrentPageBorderBox=function(draggable,afterCritical){var original=draggable.page.borderBox;return didStartAfterCritical(draggable.descriptor.id,afterCritical)?offsetByPosition(original,negate(afterCritical.displacedBy.point)):original},getDisplacedBy=memoizeOne((function(axis,displaceBy){var displacement=displaceBy[axis.line];return{value:displacement,point:patch(axis.line,displacement)}})),withMaxScroll=function(frame,max){return _extends({},frame,{scroll:_extends({},frame.scroll,{max:max})})},addPlaceholder=function(droppable,draggable,draggables){var frame=droppable.frame;isHomeOf(draggable,droppable)&&invariant(!1),droppable.subject.withPlaceholder&&invariant(!1);var placeholderSize=getDisplacedBy(droppable.axis,draggable.displaceBy).point,requiredGrowth=function(droppable,placeholderSize,draggables){var axis=droppable.axis;if("virtual"===droppable.descriptor.mode)return patch(axis.line,placeholderSize[axis.line]);var availableSpace=droppable.subject.page.contentBox[axis.size],needsToGrowBy=getDraggablesInsideDroppable(droppable.descriptor.id,draggables).reduce((function(sum,dimension){return sum+dimension.client.marginBox[axis.size]}),0)+placeholderSize[axis.line]-availableSpace;return needsToGrowBy<=0?null:patch(axis.line,needsToGrowBy)}(droppable,placeholderSize,draggables),added={placeholderSize:placeholderSize,increasedBy:requiredGrowth,oldFrameMaxScroll:droppable.frame?droppable.frame.scroll.max:null};if(!frame){var _subject=getSubject({page:droppable.subject.page,withPlaceholder:added,axis:droppable.axis,frame:droppable.frame});return _extends({},droppable,{subject:_subject})}var maxScroll=requiredGrowth?add(frame.scroll.max,requiredGrowth):frame.scroll.max,newFrame=withMaxScroll(frame,maxScroll),subject=getSubject({page:droppable.subject.page,withPlaceholder:added,axis:droppable.axis,frame:newFrame});return _extends({},droppable,{subject:subject,frame:newFrame})},moveCrossAxis=function(_ref){var isMovingForward=_ref.isMovingForward,previousPageBorderBoxCenter=_ref.previousPageBorderBoxCenter,draggable=_ref.draggable,isOver=_ref.isOver,draggables=_ref.draggables,droppables=_ref.droppables,viewport=_ref.viewport,afterCritical=_ref.afterCritical,destination=function(_ref){var isMovingForward=_ref.isMovingForward,pageBorderBoxCenter=_ref.pageBorderBoxCenter,source=_ref.source,droppables=_ref.droppables,viewport=_ref.viewport,active=source.subject.active;if(!active)return null;var axis=source.axis,isBetweenSourceClipped=isWithin(active[axis.start],active[axis.end]),candidates=toDroppableList(droppables).filter((function(droppable){return droppable!==source})).filter((function(droppable){return droppable.isEnabled})).filter((function(droppable){return Boolean(droppable.subject.active)})).filter((function(droppable){return isPartiallyVisibleThroughFrame(viewport.frame)(getKnownActive(droppable))})).filter((function(droppable){var activeOfTarget=getKnownActive(droppable);return isMovingForward?active[axis.crossAxisEnd]<activeOfTarget[axis.crossAxisEnd]:activeOfTarget[axis.crossAxisStart]<active[axis.crossAxisStart]})).filter((function(droppable){var activeOfTarget=getKnownActive(droppable),isBetweenDestinationClipped=isWithin(activeOfTarget[axis.start],activeOfTarget[axis.end]);return isBetweenSourceClipped(activeOfTarget[axis.start])||isBetweenSourceClipped(activeOfTarget[axis.end])||isBetweenDestinationClipped(active[axis.start])||isBetweenDestinationClipped(active[axis.end])})).sort((function(a,b){var first=getKnownActive(a)[axis.crossAxisStart],second=getKnownActive(b)[axis.crossAxisStart];return isMovingForward?first-second:second-first})).filter((function(droppable,index,array){return getKnownActive(droppable)[axis.crossAxisStart]===getKnownActive(array[0])[axis.crossAxisStart]}));if(!candidates.length)return null;if(1===candidates.length)return candidates[0];var contains=candidates.filter((function(droppable){return isWithin(getKnownActive(droppable)[axis.start],getKnownActive(droppable)[axis.end])(pageBorderBoxCenter[axis.line])}));return 1===contains.length?contains[0]:contains.length>1?contains.sort((function(a,b){return getKnownActive(a)[axis.start]-getKnownActive(b)[axis.start]}))[0]:candidates.sort((function(a,b){var first=closest(pageBorderBoxCenter,getCorners(getKnownActive(a))),second=closest(pageBorderBoxCenter,getCorners(getKnownActive(b)));return first!==second?first-second:getKnownActive(a)[axis.start]-getKnownActive(b)[axis.start]}))[0]}({isMovingForward:isMovingForward,pageBorderBoxCenter:previousPageBorderBoxCenter,source:isOver,droppables:droppables,viewport:viewport});if(!destination)return null;var insideDestination=getDraggablesInsideDroppable(destination.descriptor.id,draggables),impact=function(_ref){var previousPageBorderBoxCenter=_ref.previousPageBorderBoxCenter,moveRelativeTo=_ref.moveRelativeTo,insideDestination=_ref.insideDestination,draggable=_ref.draggable,draggables=_ref.draggables,destination=_ref.destination,viewport=_ref.viewport,afterCritical=_ref.afterCritical;if(!moveRelativeTo){if(insideDestination.length)return null;var proposed={displaced:emptyGroups,displacedBy:noDisplacedBy,at:{type:"REORDER",destination:{droppableId:destination.descriptor.id,index:0}}},proposedPageBorderBoxCenter=getPageBorderBoxCenterFromImpact({impact:proposed,draggable:draggable,droppable:destination,draggables:draggables,afterCritical:afterCritical}),withPlaceholder=isHomeOf(draggable,destination)?destination:addPlaceholder(destination,draggable,draggables);return isTotallyVisibleInNewLocation({draggable:draggable,destination:withPlaceholder,newPageBorderBoxCenter:proposedPageBorderBoxCenter,viewport:viewport.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?proposed:null}var relativeTo,isGoingBeforeTarget=Boolean(previousPageBorderBoxCenter[destination.axis.line]<=moveRelativeTo.page.borderBox.center[destination.axis.line]),proposedIndex=(relativeTo=moveRelativeTo.descriptor.index,moveRelativeTo.descriptor.id===draggable.descriptor.id||isGoingBeforeTarget?relativeTo:relativeTo+1),displacedBy=getDisplacedBy(destination.axis,draggable.displaceBy);return calculateReorderImpact({draggable:draggable,insideDestination:insideDestination,destination:destination,viewport:viewport,displacedBy:displacedBy,last:emptyGroups,index:proposedIndex})}({previousPageBorderBoxCenter:previousPageBorderBoxCenter,destination:destination,draggable:draggable,draggables:draggables,moveRelativeTo:function(_ref){var pageBorderBoxCenter=_ref.pageBorderBoxCenter,viewport=_ref.viewport,destination=_ref.destination,insideDestination=_ref.insideDestination,afterCritical=_ref.afterCritical;return insideDestination.filter((function(draggable){return isTotallyVisible({target:getCurrentPageBorderBox(draggable,afterCritical),destination:destination,viewport:viewport.frame,withDroppableDisplacement:!0})})).sort((function(a,b){var distanceToA=distance(pageBorderBoxCenter,withDroppableDisplacement(destination,getCurrentPageBorderBoxCenter(a,afterCritical))),distanceToB=distance(pageBorderBoxCenter,withDroppableDisplacement(destination,getCurrentPageBorderBoxCenter(b,afterCritical)));return distanceToA<distanceToB?-1:distanceToB<distanceToA?1:a.descriptor.index-b.descriptor.index}))[0]||null}({pageBorderBoxCenter:previousPageBorderBoxCenter,viewport:viewport,destination:destination,insideDestination:insideDestination,afterCritical:afterCritical}),insideDestination:insideDestination,viewport:viewport,afterCritical:afterCritical});if(!impact)return null;var pageBorderBoxCenter=getPageBorderBoxCenterFromImpact({impact:impact,draggable:draggable,droppable:destination,draggables:draggables,afterCritical:afterCritical});return{clientSelection:getClientFromPageBorderBoxCenter({pageBorderBoxCenter:pageBorderBoxCenter,draggable:draggable,viewport:viewport}),impact:impact,scrollJumpRequest:null}},whatIsDraggedOver=function(impact){var at=impact.at;return at?"REORDER"===at.type?at.destination.droppableId:at.combine.droppableId:null},moveInDirection=function(_ref){var state=_ref.state,type=_ref.type,isActuallyOver=function(impact,droppables){var id=whatIsDraggedOver(impact);return id?droppables[id]:null}(state.impact,state.dimensions.droppables),isMainAxisMovementAllowed=Boolean(isActuallyOver),home=state.dimensions.droppables[state.critical.droppable.id],isOver=isActuallyOver||home,direction=isOver.axis.direction,isMovingOnMainAxis="vertical"===direction&&("MOVE_UP"===type||"MOVE_DOWN"===type)||"horizontal"===direction&&("MOVE_LEFT"===type||"MOVE_RIGHT"===type);if(isMovingOnMainAxis&&!isMainAxisMovementAllowed)return null;var isMovingForward="MOVE_DOWN"===type||"MOVE_RIGHT"===type,draggable=state.dimensions.draggables[state.critical.draggable.id],previousPageBorderBoxCenter=state.current.page.borderBoxCenter,_state$dimensions=state.dimensions,draggables=_state$dimensions.draggables,droppables=_state$dimensions.droppables;return isMovingOnMainAxis?moveToNextPlace({isMovingForward:isMovingForward,previousPageBorderBoxCenter:previousPageBorderBoxCenter,draggable:draggable,destination:isOver,draggables:draggables,viewport:state.viewport,previousClientSelection:state.current.client.selection,previousImpact:state.impact,afterCritical:state.afterCritical}):moveCrossAxis({isMovingForward:isMovingForward,previousPageBorderBoxCenter:previousPageBorderBoxCenter,draggable:draggable,isOver:isOver,draggables:draggables,droppables:droppables,viewport:state.viewport,afterCritical:state.afterCritical})};function isMovementAllowed(state){return"DRAGGING"===state.phase||"COLLECTING"===state.phase}function isPositionInFrame(frame){var isWithinVertical=isWithin(frame.top,frame.bottom),isWithinHorizontal=isWithin(frame.left,frame.right);return function(point){return isWithinVertical(point.y)&&isWithinHorizontal(point.x)}}function getDroppableOver$1(_ref2){var pageBorderBox=_ref2.pageBorderBox,draggable=_ref2.draggable,droppables=_ref2.droppables,candidates=toDroppableList(droppables).filter((function(item){if(!item.isEnabled)return!1;var first,second,active=item.subject.active;if(!active)return!1;if(second=active,!((first=pageBorderBox).left<second.right&&first.right>second.left&&first.top<second.bottom&&first.bottom>second.top))return!1;if(isPositionInFrame(active)(pageBorderBox.center))return!0;var axis=item.axis,childCenter=active.center[axis.crossAxisLine],crossAxisStart=pageBorderBox[axis.crossAxisStart],crossAxisEnd=pageBorderBox[axis.crossAxisEnd],isContained=isWithin(active[axis.crossAxisStart],active[axis.crossAxisEnd]),isStartContained=isContained(crossAxisStart),isEndContained=isContained(crossAxisEnd);return!isStartContained&&!isEndContained||(isStartContained?crossAxisStart<childCenter:crossAxisEnd>childCenter)}));return candidates.length?1===candidates.length?candidates[0].descriptor.id:function(_ref){var pageBorderBox=_ref.pageBorderBox,draggable=_ref.draggable,candidates=_ref.candidates,startCenter=draggable.page.borderBox.center,sorted=candidates.map((function(candidate){var axis=candidate.axis,target=patch(candidate.axis.line,pageBorderBox.center[axis.line],candidate.page.borderBox.center[axis.crossAxisLine]);return{id:candidate.descriptor.id,distance:distance(startCenter,target)}})).sort((function(a,b){return b.distance-a.distance}));return sorted[0]?sorted[0].id:null}({pageBorderBox:pageBorderBox,draggable:draggable,candidates:candidates}):null}var offsetRectByPosition=function(rect,point){return cssBoxModel.getRect(offsetByPosition(rect,point))};function getIsDisplaced(_ref){var displaced=_ref.displaced,id=_ref.id;return Boolean(displaced.visible[id]||displaced.invisible[id])}var getDragImpact=function(_ref){var pageOffset=_ref.pageOffset,draggable=_ref.draggable,draggables=_ref.draggables,droppables=_ref.droppables,previousImpact=_ref.previousImpact,viewport=_ref.viewport,afterCritical=_ref.afterCritical,pageBorderBox=offsetRectByPosition(draggable.page.borderBox,pageOffset),destinationId=getDroppableOver$1({pageBorderBox:pageBorderBox,draggable:draggable,droppables:droppables});if(!destinationId)return noImpact;var destination=droppables[destinationId],insideDestination=getDraggablesInsideDroppable(destination.descriptor.id,draggables),pageBorderBoxWithDroppableScroll=function(droppable,area){var frame=droppable.frame;return frame?offsetRectByPosition(area,frame.scroll.diff.value):area}(destination,pageBorderBox);return function(_ref){var draggable=_ref.draggable,targetRect=_ref.pageBorderBoxWithDroppableScroll,previousImpact=_ref.previousImpact,destination=_ref.destination,insideDestination=_ref.insideDestination,afterCritical=_ref.afterCritical;if(!destination.isCombineEnabled)return null;var axis=destination.axis,displacedBy=getDisplacedBy(destination.axis,draggable.displaceBy),displacement=displacedBy.value,targetStart=targetRect[axis.start],targetEnd=targetRect[axis.end],combineWith=find(removeDraggableFromList(draggable,insideDestination),(function(child){var id=child.descriptor.id,childRect=child.page.borderBox,threshold=childRect[axis.size]/4,didStartAfterCritical$1=didStartAfterCritical(id,afterCritical),isDisplaced=getIsDisplaced({displaced:previousImpact.displaced,id:id});return didStartAfterCritical$1?isDisplaced?targetEnd>childRect[axis.start]+threshold&&targetEnd<childRect[axis.end]-threshold:targetStart>childRect[axis.start]-displacement+threshold&&targetStart<childRect[axis.end]-displacement-threshold:isDisplaced?targetEnd>childRect[axis.start]+displacement+threshold&&targetEnd<childRect[axis.end]+displacement-threshold:targetStart>childRect[axis.start]+threshold&&targetStart<childRect[axis.end]-threshold}));return combineWith?{displacedBy:displacedBy,displaced:previousImpact.displaced,at:{type:"COMBINE",combine:{draggableId:combineWith.descriptor.id,droppableId:destination.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:pageBorderBoxWithDroppableScroll,draggable:draggable,previousImpact:previousImpact,destination:destination,insideDestination:insideDestination,afterCritical:afterCritical})||function(_ref2){var targetRect=_ref2.pageBorderBoxWithDroppableScroll,draggable=_ref2.draggable,destination=_ref2.destination,insideDestination=_ref2.insideDestination,last=_ref2.last,viewport=_ref2.viewport,afterCritical=_ref2.afterCritical,axis=destination.axis,displacedBy=getDisplacedBy(destination.axis,draggable.displaceBy),displacement=displacedBy.value,targetStart=targetRect[axis.start],targetEnd=targetRect[axis.end],newIndex=function(_ref){var draggable=_ref.draggable,closest=_ref.closest,inHomeList=_ref.inHomeList;return closest?inHomeList&&closest.descriptor.index>draggable.descriptor.index?closest.descriptor.index-1:closest.descriptor.index:null}({draggable:draggable,closest:find(removeDraggableFromList(draggable,insideDestination),(function(child){var id=child.descriptor.id,childCenter=child.page.borderBox.center[axis.line],didStartAfterCritical$1=didStartAfterCritical(id,afterCritical),isDisplaced=getIsDisplaced({displaced:last,id:id});return didStartAfterCritical$1?isDisplaced?targetEnd<=childCenter:targetStart<childCenter-displacement:isDisplaced?targetEnd<=childCenter+displacement:targetStart<childCenter})),inHomeList:isHomeOf(draggable,destination)});return calculateReorderImpact({draggable:draggable,insideDestination:insideDestination,destination:destination,viewport:viewport,last:last,displacedBy:displacedBy,index:newIndex})}({pageBorderBoxWithDroppableScroll:pageBorderBoxWithDroppableScroll,draggable:draggable,destination:destination,insideDestination:insideDestination,last:previousImpact.displaced,viewport:viewport,afterCritical:afterCritical})},patchDroppableMap=function(droppables,updated){var _extends2;return _extends({},droppables,((_extends2={})[updated.descriptor.id]=updated,_extends2))},clearUnusedPlaceholder=function(_ref){var previousImpact=_ref.previousImpact,impact=_ref.impact,droppables=_ref.droppables,last=whatIsDraggedOver(previousImpact),now=whatIsDraggedOver(impact);if(!last)return droppables;if(last===now)return droppables;var lastDroppable=droppables[last];if(!lastDroppable.subject.withPlaceholder)return droppables;var updated=function(droppable){var added=droppable.subject.withPlaceholder;added||invariant(!1);var frame=droppable.frame;if(!frame){var _subject2=getSubject({page:droppable.subject.page,axis:droppable.axis,frame:null,withPlaceholder:null});return _extends({},droppable,{subject:_subject2})}var oldMaxScroll=added.oldFrameMaxScroll;oldMaxScroll||invariant(!1);var newFrame=withMaxScroll(frame,oldMaxScroll),subject=getSubject({page:droppable.subject.page,axis:droppable.axis,frame:newFrame,withPlaceholder:null});return _extends({},droppable,{subject:subject,frame:newFrame})}(lastDroppable);return patchDroppableMap(droppables,updated)},update=function(_ref){var state=_ref.state,forcedClientSelection=_ref.clientSelection,forcedDimensions=_ref.dimensions,forcedViewport=_ref.viewport,forcedImpact=_ref.impact,scrollJumpRequest=_ref.scrollJumpRequest,viewport=forcedViewport||state.viewport,dimensions=forcedDimensions||state.dimensions,clientSelection=forcedClientSelection||state.current.client.selection,offset=subtract(clientSelection,state.initial.client.selection),client={offset:offset,selection:clientSelection,borderBoxCenter:add(state.initial.client.borderBoxCenter,offset)},page={selection:add(client.selection,viewport.scroll.current),borderBoxCenter:add(client.borderBoxCenter,viewport.scroll.current),offset:add(client.offset,viewport.scroll.diff.value)},current={client:client,page:page};if("COLLECTING"===state.phase)return _extends({phase:"COLLECTING"},state,{dimensions:dimensions,viewport:viewport,current:current});var draggable=dimensions.draggables[state.critical.draggable.id],newImpact=forcedImpact||getDragImpact({pageOffset:page.offset,draggable:draggable,draggables:dimensions.draggables,droppables:dimensions.droppables,previousImpact:state.impact,viewport:viewport,afterCritical:state.afterCritical}),withUpdatedPlaceholders=function(_ref2){var draggable=_ref2.draggable,draggables=_ref2.draggables,droppables=_ref2.droppables,previousImpact=_ref2.previousImpact,impact=_ref2.impact,cleaned=clearUnusedPlaceholder({previousImpact:previousImpact,impact:impact,droppables:droppables}),isOver=whatIsDraggedOver(impact);if(!isOver)return cleaned;var droppable=droppables[isOver];if(isHomeOf(draggable,droppable))return cleaned;if(droppable.subject.withPlaceholder)return cleaned;var patched=addPlaceholder(droppable,draggable,draggables);return patchDroppableMap(cleaned,patched)}({draggable:draggable,impact:newImpact,previousImpact:state.impact,draggables:dimensions.draggables,droppables:dimensions.droppables});return _extends({},state,{current:current,dimensions:{draggables:dimensions.draggables,droppables:withUpdatedPlaceholders},impact:newImpact,viewport:viewport,scrollJumpRequest:scrollJumpRequest||null,forceShouldAnimate:!scrollJumpRequest&&null})};var recompute=function(_ref){var impact=_ref.impact,viewport=_ref.viewport,draggables=_ref.draggables,destination=_ref.destination,forceShouldAnimate=_ref.forceShouldAnimate,last=impact.displaced,displaced=getDisplacementGroups({afterDragging:function(ids,draggables){return ids.map((function(id){return draggables[id]}))}(last.all,draggables),destination:destination,displacedBy:impact.displacedBy,viewport:viewport.frame,forceShouldAnimate:forceShouldAnimate,last:last});return _extends({},impact,{displaced:displaced})},getClientBorderBoxCenter=function(_ref){var impact=_ref.impact,draggable=_ref.draggable,droppable=_ref.droppable,draggables=_ref.draggables,viewport=_ref.viewport,afterCritical=_ref.afterCritical,pageBorderBoxCenter=getPageBorderBoxCenterFromImpact({impact:impact,draggable:draggable,draggables:draggables,droppable:droppable,afterCritical:afterCritical});return getClientFromPageBorderBoxCenter({pageBorderBoxCenter:pageBorderBoxCenter,draggable:draggable,viewport:viewport})},refreshSnap=function(_ref){var state=_ref.state,forcedDimensions=_ref.dimensions,forcedViewport=_ref.viewport;"SNAP"!==state.movementMode&&invariant(!1);var needsVisibilityCheck=state.impact,viewport=forcedViewport||state.viewport,dimensions=forcedDimensions||state.dimensions,draggables=dimensions.draggables,droppables=dimensions.droppables,draggable=draggables[state.critical.draggable.id],isOver=whatIsDraggedOver(needsVisibilityCheck);isOver||invariant(!1);var destination=droppables[isOver],impact=recompute({impact:needsVisibilityCheck,viewport:viewport,destination:destination,draggables:draggables}),clientSelection=getClientBorderBoxCenter({impact:impact,draggable:draggable,droppable:destination,draggables:draggables,viewport:viewport,afterCritical:state.afterCritical});return update({impact:impact,clientSelection:clientSelection,state:state,dimensions:dimensions,viewport:viewport})},getLiftEffect=function(_ref){var draggable=_ref.draggable,home=_ref.home,draggables=_ref.draggables,viewport=_ref.viewport,displacedBy=getDisplacedBy(home.axis,draggable.displaceBy),insideHome=getDraggablesInsideDroppable(home.descriptor.id,draggables),rawIndex=insideHome.indexOf(draggable);-1===rawIndex&&invariant(!1);var descriptor,afterDragging=insideHome.slice(rawIndex+1),effected=afterDragging.reduce((function(previous,item){return previous[item.descriptor.id]=!0,previous}),{}),afterCritical={inVirtualList:"virtual"===home.descriptor.mode,displacedBy:displacedBy,effected:effected};return{impact:{displaced:getDisplacementGroups({afterDragging:afterDragging,destination:home,displacedBy:displacedBy,last:null,viewport:viewport.frame,forceShouldAnimate:!1}),displacedBy:displacedBy,at:{type:"REORDER",destination:(descriptor=draggable.descriptor,{index:descriptor.index,droppableId:descriptor.droppableId})}},afterCritical:afterCritical}},start=function(key){0},finish=function(key){0},adjustAdditionsForScrollChanges=function(_ref){var additions=_ref.additions,updatedDroppables=_ref.updatedDroppables,viewport=_ref.viewport,windowScrollChange=viewport.scroll.diff.value;return additions.map((function(draggable){var droppableId=draggable.descriptor.droppableId,droppableScrollChange=function(droppable){var frame=droppable.frame;return frame||invariant(!1),frame}(updatedDroppables[droppableId]).scroll.diff.value;return function(_ref){var draggable=_ref.draggable,offset=_ref.offset,initialWindowScroll=_ref.initialWindowScroll,client=cssBoxModel.offset(draggable.client,offset),page=cssBoxModel.withScroll(client,initialWindowScroll);return _extends({},draggable,{placeholder:_extends({},draggable.placeholder,{client:client}),client:client,page:page})}({draggable:draggable,offset:add(windowScrollChange,droppableScrollChange),initialWindowScroll:viewport.scroll.initial})}))},isSnapping=function(state){return"SNAP"===state.movementMode},postDroppableChange=function(state,updated,isEnabledChanging){var dimensions=function(dimensions,updated){return{draggables:dimensions.draggables,droppables:patchDroppableMap(dimensions.droppables,updated)}}(state.dimensions,updated);return!isSnapping(state)||isEnabledChanging?update({state:state,dimensions:dimensions}):refreshSnap({state:state,dimensions:dimensions})};function removeScrollJumpRequest(state){return state.isDragging&&"SNAP"===state.movementMode?_extends({phase:"DRAGGING"},state,{scrollJumpRequest:null}):state}var idle={phase:"IDLE",completed:null,shouldFlush:!1},reducer=function(state,action){if(void 0===state&&(state=idle),"FLUSH"===action.type)return _extends({},idle,{shouldFlush:!0});if("INITIAL_PUBLISH"===action.type){"IDLE"!==state.phase&&invariant(!1);var _action$payload=action.payload,critical=_action$payload.critical,clientSelection=_action$payload.clientSelection,viewport=_action$payload.viewport,dimensions=_action$payload.dimensions,movementMode=_action$payload.movementMode,draggable=dimensions.draggables[critical.draggable.id],home=dimensions.droppables[critical.droppable.id],client={selection:clientSelection,borderBoxCenter:draggable.client.borderBox.center,offset:origin},initial={client:client,page:{selection:add(client.selection,viewport.scroll.initial),borderBoxCenter:add(client.selection,viewport.scroll.initial),offset:add(client.selection,viewport.scroll.diff.value)}},isWindowScrollAllowed=toDroppableList(dimensions.droppables).every((function(item){return!item.isFixedOnPage})),_getLiftEffect=getLiftEffect({draggable:draggable,home:home,draggables:dimensions.draggables,viewport:viewport}),impact=_getLiftEffect.impact;return{phase:"DRAGGING",isDragging:!0,critical:critical,movementMode:movementMode,dimensions:dimensions,initial:initial,current:initial,isWindowScrollAllowed:isWindowScrollAllowed,impact:impact,afterCritical:_getLiftEffect.afterCritical,onLiftImpact:impact,viewport:viewport,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===action.type)return"COLLECTING"===state.phase||"DROP_PENDING"===state.phase?state:("DRAGGING"!==state.phase&&invariant(!1),_extends({phase:"COLLECTING"},state,{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===action.type)return"COLLECTING"!==state.phase&&"DROP_PENDING"!==state.phase&&invariant(!1),function(_ref){var state=_ref.state,published=_ref.published;start();var withScrollChange=published.modified.map((function(update){var existing=state.dimensions.droppables[update.droppableId];return scrollDroppable(existing,update.scroll)})),droppables=_extends({},state.dimensions.droppables,{},toDroppableMap(withScrollChange)),updatedAdditions=toDraggableMap(adjustAdditionsForScrollChanges({additions:published.additions,updatedDroppables:droppables,viewport:state.viewport})),draggables=_extends({},state.dimensions.draggables,{},updatedAdditions);published.removals.forEach((function(id){delete draggables[id]}));var dimensions={droppables:droppables,draggables:draggables},wasOverId=whatIsDraggedOver(state.impact),wasOver=wasOverId?dimensions.droppables[wasOverId]:null,draggable=dimensions.draggables[state.critical.draggable.id],home=dimensions.droppables[state.critical.droppable.id],_getLiftEffect=getLiftEffect({draggable:draggable,home:home,draggables:draggables,viewport:state.viewport}),onLiftImpact=_getLiftEffect.impact,afterCritical=_getLiftEffect.afterCritical,previousImpact=wasOver&&wasOver.isCombineEnabled?state.impact:onLiftImpact,impact=getDragImpact({pageOffset:state.current.page.offset,draggable:dimensions.draggables[state.critical.draggable.id],draggables:dimensions.draggables,droppables:dimensions.droppables,previousImpact:previousImpact,viewport:state.viewport,afterCritical:afterCritical});finish();var draggingState=_extends({phase:"DRAGGING"},state,{phase:"DRAGGING",impact:impact,onLiftImpact:onLiftImpact,dimensions:dimensions,afterCritical:afterCritical,forceShouldAnimate:!1});return"COLLECTING"===state.phase?draggingState:_extends({phase:"DROP_PENDING"},draggingState,{phase:"DROP_PENDING",reason:state.reason,isWaiting:!1})}({state:state,published:action.payload});if("MOVE"===action.type){if("DROP_PENDING"===state.phase)return state;isMovementAllowed(state)||invariant(!1);var _clientSelection=action.payload.client;return isEqual(_clientSelection,state.current.client.selection)?state:update({state:state,clientSelection:_clientSelection,impact:isSnapping(state)?state.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===action.type){if("DROP_PENDING"===state.phase)return removeScrollJumpRequest(state);if("COLLECTING"===state.phase)return removeScrollJumpRequest(state);isMovementAllowed(state)||invariant(!1);var _action$payload2=action.payload,id=_action$payload2.id,newScroll=_action$payload2.newScroll,target=state.dimensions.droppables[id];if(!target)return state;var scrolled=scrollDroppable(target,newScroll);return postDroppableChange(state,scrolled,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===action.type){if("DROP_PENDING"===state.phase)return state;isMovementAllowed(state)||invariant(!1);var _action$payload3=action.payload,_id=_action$payload3.id,isEnabled=_action$payload3.isEnabled,_target=state.dimensions.droppables[_id];_target||invariant(!1),_target.isEnabled===isEnabled&&invariant(!1);var updated=_extends({},_target,{isEnabled:isEnabled});return postDroppableChange(state,updated,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===action.type){if("DROP_PENDING"===state.phase)return state;isMovementAllowed(state)||invariant(!1);var _action$payload4=action.payload,_id2=_action$payload4.id,isCombineEnabled=_action$payload4.isCombineEnabled,_target2=state.dimensions.droppables[_id2];_target2||invariant(!1),_target2.isCombineEnabled===isCombineEnabled&&invariant(!1);var _updated=_extends({},_target2,{isCombineEnabled:isCombineEnabled});return postDroppableChange(state,_updated,!0)}if("MOVE_BY_WINDOW_SCROLL"===action.type){if("DROP_PENDING"===state.phase||"DROP_ANIMATING"===state.phase)return state;isMovementAllowed(state)||invariant(!1),state.isWindowScrollAllowed||invariant(!1);var _newScroll=action.payload.newScroll;if(isEqual(state.viewport.scroll.current,_newScroll))return removeScrollJumpRequest(state);var _viewport=scrollViewport(state.viewport,_newScroll);return isSnapping(state)?refreshSnap({state:state,viewport:_viewport}):update({state:state,viewport:_viewport})}if("UPDATE_VIEWPORT_MAX_SCROLL"===action.type){if(!isMovementAllowed(state))return state;var maxScroll=action.payload.maxScroll;if(isEqual(maxScroll,state.viewport.scroll.max))return state;var withMaxScroll=_extends({},state.viewport,{scroll:_extends({},state.viewport.scroll,{max:maxScroll})});return _extends({phase:"DRAGGING"},state,{viewport:withMaxScroll})}if("MOVE_UP"===action.type||"MOVE_DOWN"===action.type||"MOVE_LEFT"===action.type||"MOVE_RIGHT"===action.type){if("COLLECTING"===state.phase||"DROP_PENDING"===state.phase)return state;"DRAGGING"!==state.phase&&invariant(!1);var _result2=moveInDirection({state:state,type:action.type});return _result2?update({state:state,impact:_result2.impact,clientSelection:_result2.clientSelection,scrollJumpRequest:_result2.scrollJumpRequest}):state}if("DROP_PENDING"===action.type){var reason=action.payload.reason;return"COLLECTING"!==state.phase&&invariant(!1),_extends({phase:"DROP_PENDING"},state,{phase:"DROP_PENDING",isWaiting:!0,reason:reason})}if("DROP_ANIMATE"===action.type){var _action$payload5=action.payload,completed=_action$payload5.completed,dropDuration=_action$payload5.dropDuration,newHomeClientOffset=_action$payload5.newHomeClientOffset;return"DRAGGING"!==state.phase&&"DROP_PENDING"!==state.phase&&invariant(!1),{phase:"DROP_ANIMATING",completed:completed,dropDuration:dropDuration,newHomeClientOffset:newHomeClientOffset,dimensions:state.dimensions}}return"DROP_COMPLETE"===action.type?{phase:"IDLE",completed:action.payload.completed,shouldFlush:!1}:state},publishWhileDragging=function(args){return{type:"PUBLISH_WHILE_DRAGGING",payload:args}},collectionStarting=function(){return{type:"COLLECTION_STARTING",payload:null}},updateDroppableScroll=function(args){return{type:"UPDATE_DROPPABLE_SCROLL",payload:args}},updateDroppableIsEnabled=function(args){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:args}},updateDroppableIsCombineEnabled=function(args){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:args}},move=function(args){return{type:"MOVE",payload:args}},moveUp=function(){return{type:"MOVE_UP",payload:null}},moveDown=function(){return{type:"MOVE_DOWN",payload:null}},moveRight=function(){return{type:"MOVE_RIGHT",payload:null}},moveLeft=function(){return{type:"MOVE_LEFT",payload:null}},completeDrop=function(args){return{type:"DROP_COMPLETE",payload:args}},drop=function(args){return{type:"DROP",payload:args}},dropAnimationFinished=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}};var curves_drop="cubic-bezier(.2,1,.1,1)",combine_opacity={drop:0,combining:.7},combine_scale={drop:.75},outOfTheWayTiming=.2+"s "+"cubic-bezier(0.2, 0, 0, 1)",transitions={fluid:"opacity "+outOfTheWayTiming,snap:"transform "+outOfTheWayTiming+", opacity "+outOfTheWayTiming,drop:function(duration){var timing=duration+"s "+curves_drop;return"transform "+timing+", opacity "+timing},outOfTheWay:"transform "+outOfTheWayTiming,placeholder:"height "+outOfTheWayTiming+", width "+outOfTheWayTiming+", margin "+outOfTheWayTiming},moveTo=function(offset){return isEqual(offset,origin)?null:"translate("+offset.x+"px, "+offset.y+"px)"},transforms_moveTo=moveTo,transforms_drop=function(offset,isCombining){var translate=moveTo(offset);return translate?isCombining?translate+" scale("+combine_scale.drop+")":translate:null},minDropTime=.33,maxDropTime=.55,dropTimeRange=maxDropTime-minDropTime,drop$1=function(_ref){var getState=_ref.getState,dispatch=_ref.dispatch;return function(next){return function(action){if("DROP"===action.type){var state=getState(),reason=action.payload.reason;if("COLLECTING"!==state.phase){if("IDLE"!==state.phase){"DROP_PENDING"===state.phase&&state.isWaiting&&invariant(!1),"DRAGGING"!==state.phase&&"DROP_PENDING"!==state.phase&&invariant(!1);var critical=state.critical,dimensions=state.dimensions,draggable=dimensions.draggables[state.critical.draggable.id],_getDropImpact=function(_ref){var draggables=_ref.draggables,reason=_ref.reason,lastImpact=_ref.lastImpact,home=_ref.home,viewport=_ref.viewport,onLiftImpact=_ref.onLiftImpact;return lastImpact.at&&"DROP"===reason?"REORDER"===lastImpact.at.type?{impact:lastImpact,didDropInsideDroppable:!0}:{impact:_extends({},lastImpact,{displaced:emptyGroups}),didDropInsideDroppable:!0}:{impact:recompute({draggables:draggables,impact:onLiftImpact,destination:home,viewport:viewport,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:reason,lastImpact:state.impact,afterCritical:state.afterCritical,onLiftImpact:state.onLiftImpact,home:state.dimensions.droppables[state.critical.droppable.id],viewport:state.viewport,draggables:state.dimensions.draggables}),impact=_getDropImpact.impact,didDropInsideDroppable=_getDropImpact.didDropInsideDroppable,destination=didDropInsideDroppable?tryGetDestination(impact):null,combine=didDropInsideDroppable?tryGetCombine(impact):null,source={index:critical.draggable.index,droppableId:critical.droppable.id},result={draggableId:draggable.descriptor.id,type:draggable.descriptor.type,source:source,reason:reason,mode:state.movementMode,destination:destination,combine:combine},newHomeClientOffset=function(_ref){var impact=_ref.impact,draggable=_ref.draggable,dimensions=_ref.dimensions,viewport=_ref.viewport,afterCritical=_ref.afterCritical,draggables=dimensions.draggables,droppables=dimensions.droppables,droppableId=whatIsDraggedOver(impact),destination=droppableId?droppables[droppableId]:null,home=droppables[draggable.descriptor.droppableId],newClientCenter=getClientBorderBoxCenter({impact:impact,draggable:draggable,draggables:draggables,afterCritical:afterCritical,droppable:destination||home,viewport:viewport});return subtract(newClientCenter,draggable.client.borderBox.center)}({impact:impact,draggable:draggable,dimensions:dimensions,viewport:state.viewport,afterCritical:state.afterCritical}),completed={critical:state.critical,afterCritical:state.afterCritical,result:result,impact:impact};if(!isEqual(state.current.client.offset,newHomeClientOffset)||Boolean(result.combine)){var dropDuration=function(_ref){var current=_ref.current,destination=_ref.destination,reason=_ref.reason,distance$1=distance(current,destination);if(distance$1<=0)return minDropTime;if(distance$1>=1500)return maxDropTime;var duration=minDropTime+dropTimeRange*(distance$1/1500);return Number(("CANCEL"===reason?.6*duration:duration).toFixed(2))}({current:state.current.client.offset,destination:newHomeClientOffset,reason:reason});dispatch(function(args){return{type:"DROP_ANIMATE",payload:args}}({newHomeClientOffset:newHomeClientOffset,dropDuration:dropDuration,completed:completed}))}else dispatch(completeDrop({completed:completed}))}}else dispatch(function(args){return{type:"DROP_PENDING",payload:args}}({reason:reason}))}else next(action)}}},getWindowScroll=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function getScrollListener(_ref){var onWindowScroll=_ref.onWindowScroll;var scheduled=rafSchd((function(){onWindowScroll(getWindowScroll())})),binding=function(update){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(event){event.target!==window&&event.target!==window.document||update()}}}(scheduled),unbind=noop;function isActive(){return unbind!==noop}return{start:function(){isActive()&&invariant(!1),unbind=bindEvents(window,[binding])},stop:function(){isActive()||invariant(!1),scheduled.cancel(),unbind(),unbind=noop},isActive:isActive}}var scrollListener=function(store){var listener=getScrollListener({onWindowScroll:function(newScroll){store.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:newScroll}})}});return function(next){return function(action){listener.isActive()||"INITIAL_PUBLISH"!==action.type||listener.start(),listener.isActive()&&function(action){return"DROP_COMPLETE"===action.type||"DROP_ANIMATE"===action.type||"FLUSH"===action.type}(action)&&listener.stop(),next(action)}}},getAsyncMarshal=function(){var entries=[];return{add:function(fn){var timerId=setTimeout((function(){return function(timerId){var index=findIndex(entries,(function(item){return item.timerId===timerId}));-1===index&&invariant(!1),entries.splice(index,1)[0].callback()}(timerId)})),entry={timerId:timerId,callback:fn};entries.push(entry)},flush:function(){if(entries.length){var shallow=[].concat(entries);entries.length=0,shallow.forEach((function(entry){clearTimeout(entry.timerId),entry.callback()}))}}}},withTimings=function(key,fn){start(),fn(),finish()},getDragStart=function(critical,mode){return{draggableId:critical.draggable.id,type:critical.droppable.type,source:{droppableId:critical.droppable.id,index:critical.draggable.index},mode:mode}},execute=function(responder,data,announce,getDefaultMessage){if(responder){var willExpire=function(announce){var wasCalled=!1,isExpired=!1,timeoutId=setTimeout((function(){isExpired=!0})),result=function(message){wasCalled||isExpired||(wasCalled=!0,announce(message),clearTimeout(timeoutId))};return result.wasCalled=function(){return wasCalled},result}(announce);responder(data,{announce:willExpire}),willExpire.wasCalled()||announce(getDefaultMessage(data))}else announce(getDefaultMessage(data))},responders=function(getResponders,announce){var publisher=function(getResponders,announce){var asyncMarshal=getAsyncMarshal(),dragging=null,drop=function(result){dragging||invariant(!1),dragging=null,withTimings(0,(function(){return execute(getResponders().onDragEnd,result,announce,preset_onDragEnd)}))};return{beforeCapture:function(draggableId,mode){dragging&&invariant(!1),withTimings(0,(function(){var fn=getResponders().onBeforeCapture;fn&&fn({draggableId:draggableId,mode:mode})}))},beforeStart:function(critical,mode){dragging&&invariant(!1),withTimings(0,(function(){var fn=getResponders().onBeforeDragStart;fn&&fn(getDragStart(critical,mode))}))},start:function(critical,mode){dragging&&invariant(!1);var data=getDragStart(critical,mode);dragging={mode:mode,lastCritical:critical,lastLocation:data.source,lastCombine:null},asyncMarshal.add((function(){withTimings(0,(function(){return execute(getResponders().onDragStart,data,announce,preset_onDragStart)}))}))},update:function(critical,impact){var location=tryGetDestination(impact),combine=tryGetCombine(impact);dragging||invariant(!1);var hasCriticalChanged=!function(first,second){if(first===second)return!0;var isDraggableEqual=first.draggable.id===second.draggable.id&&first.draggable.droppableId===second.draggable.droppableId&&first.draggable.type===second.draggable.type&&first.draggable.index===second.draggable.index,isDroppableEqual=first.droppable.id===second.droppable.id&&first.droppable.type===second.droppable.type;return isDraggableEqual&&isDroppableEqual}(critical,dragging.lastCritical);hasCriticalChanged&&(dragging.lastCritical=critical);var first,second,hasLocationChanged=(first=dragging.lastLocation,second=location,!(null==first&&null==second||null!=first&&null!=second&&first.droppableId===second.droppableId&&first.index===second.index));hasLocationChanged&&(dragging.lastLocation=location);var hasGroupingChanged=!function(first,second){return null==first&&null==second||null!=first&&null!=second&&(first.draggableId===second.draggableId&&first.droppableId===second.droppableId)}(dragging.lastCombine,combine);if(hasGroupingChanged&&(dragging.lastCombine=combine),hasCriticalChanged||hasLocationChanged||hasGroupingChanged){var data=_extends({},getDragStart(critical,dragging.mode),{combine:combine,destination:location});asyncMarshal.add((function(){withTimings(0,(function(){return execute(getResponders().onDragUpdate,data,announce,preset_onDragUpdate)}))}))}},flush:function(){dragging||invariant(!1),asyncMarshal.flush()},drop:drop,abort:function(){if(dragging){var result=_extends({},getDragStart(dragging.lastCritical,dragging.mode),{combine:null,destination:null,reason:"CANCEL"});drop(result)}}}}(getResponders,announce);return function(store){return function(next){return function(action){if("BEFORE_INITIAL_CAPTURE"!==action.type){if("INITIAL_PUBLISH"===action.type){var critical=action.payload.critical;return publisher.beforeStart(critical,action.payload.movementMode),next(action),void publisher.start(critical,action.payload.movementMode)}if("DROP_COMPLETE"===action.type){var result=action.payload.completed.result;return publisher.flush(),next(action),void publisher.drop(result)}if(next(action),"FLUSH"!==action.type){var state=store.getState();"DRAGGING"===state.phase&&publisher.update(state.critical,state.impact)}else publisher.abort()}else publisher.beforeCapture(action.payload.draggableId,action.payload.movementMode)}}}},dropAnimationFinish=function(store){return function(next){return function(action){if("DROP_ANIMATION_FINISHED"===action.type){var state=store.getState();"DROP_ANIMATING"!==state.phase&&invariant(!1),store.dispatch(completeDrop({completed:state.completed}))}else next(action)}}},dropAnimationFlushOnScroll=function(store){var unbind=null,frameId=null;return function(next){return function(action){if("FLUSH"!==action.type&&"DROP_COMPLETE"!==action.type&&"DROP_ANIMATION_FINISHED"!==action.type||(frameId&&(cancelAnimationFrame(frameId),frameId=null),unbind&&(unbind(),unbind=null)),next(action),"DROP_ANIMATE"===action.type){var binding={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===store.getState().phase&&store.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};frameId=requestAnimationFrame((function(){frameId=null,unbind=bindEvents(window,[binding])}))}}}},pendingDrop=function(store){return function(next){return function(action){if(next(action),"PUBLISH_WHILE_DRAGGING"===action.type){var postActionState=store.getState();"DROP_PENDING"===postActionState.phase&&(postActionState.isWaiting||store.dispatch(drop({reason:postActionState.reason})))}}}},composeEnhancers=redux.compose,createStore=function(_ref){var marshal,dimensionMarshal=_ref.dimensionMarshal,focusMarshal=_ref.focusMarshal,styleMarshal=_ref.styleMarshal,getResponders=_ref.getResponders,announce=_ref.announce,autoScroller=_ref.autoScroller;return redux.createStore(reducer,composeEnhancers(redux.applyMiddleware((marshal=styleMarshal,function(){return function(next){return function(action){"INITIAL_PUBLISH"===action.type&&marshal.dragging(),"DROP_ANIMATE"===action.type&&marshal.dropping(action.payload.completed.result.reason),"FLUSH"!==action.type&&"DROP_COMPLETE"!==action.type||marshal.resting(),next(action)}}}),function(marshal){return function(){return function(next){return function(action){"DROP_COMPLETE"!==action.type&&"FLUSH"!==action.type&&"DROP_ANIMATE"!==action.type||marshal.stopPublishing(),next(action)}}}}(dimensionMarshal),function(marshal){return function(_ref){var getState=_ref.getState,dispatch=_ref.dispatch;return function(next){return function(action){if("LIFT"===action.type){var _action$payload=action.payload,id=_action$payload.id,clientSelection=_action$payload.clientSelection,movementMode=_action$payload.movementMode,initial=getState();"DROP_ANIMATING"===initial.phase&&dispatch(completeDrop({completed:initial.completed})),"IDLE"!==getState().phase&&invariant(!1),dispatch({type:"FLUSH",payload:null}),dispatch({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:id,movementMode:movementMode}});var request={draggableId:id,scrollOptions:{shouldPublishImmediately:"SNAP"===movementMode}},_marshal$startPublish=marshal.startPublishing(request),critical=_marshal$startPublish.critical,dimensions=_marshal$startPublish.dimensions,viewport=_marshal$startPublish.viewport;dispatch(function(args){return{type:"INITIAL_PUBLISH",payload:args}}({critical:critical,dimensions:dimensions,clientSelection:clientSelection,movementMode:movementMode,viewport:viewport}))}else next(action)}}}}(dimensionMarshal),drop$1,dropAnimationFinish,dropAnimationFlushOnScroll,pendingDrop,function(autoScroller){return function(store){return function(next){return function(action){if(function(action){return"DROP_COMPLETE"===action.type||"DROP_ANIMATE"===action.type||"FLUSH"===action.type}(action))return autoScroller.stop(),void next(action);if("INITIAL_PUBLISH"===action.type){next(action);var state=store.getState();return"DRAGGING"!==state.phase&&invariant(!1),void autoScroller.start(state)}next(action),autoScroller.scroll(store.getState())}}}}(autoScroller),scrollListener,function(marshal){var isWatching=!1;return function(){return function(next){return function(action){if("INITIAL_PUBLISH"===action.type)return isWatching=!0,marshal.tryRecordFocus(action.payload.critical.draggable.id),next(action),void marshal.tryRestoreFocusRecorded();if(next(action),isWatching){if("FLUSH"===action.type)return isWatching=!1,void marshal.tryRestoreFocusRecorded();if("DROP_COMPLETE"===action.type){isWatching=!1;var result=action.payload.completed.result;result.combine&&marshal.tryShiftRecord(result.draggableId,result.combine.draggableId),marshal.tryRestoreFocusRecorded()}}}}}}(focusMarshal),responders(getResponders,announce))))};var getMaxScroll=function(_ref){var scrollHeight=_ref.scrollHeight,scrollWidth=_ref.scrollWidth,height=_ref.height,width=_ref.width,maxScroll=subtract({x:scrollWidth,y:scrollHeight},{x:width,y:height});return{x:Math.max(0,maxScroll.x),y:Math.max(0,maxScroll.y)}},getDocumentElement=function(){var doc=document.documentElement;return doc||invariant(!1),doc},getMaxWindowScroll=function(){var doc=getDocumentElement();return getMaxScroll({scrollHeight:doc.scrollHeight,scrollWidth:doc.scrollWidth,width:doc.clientWidth,height:doc.clientHeight})},getInitialPublish=function(_ref){var critical=_ref.critical,scrollOptions=_ref.scrollOptions,registry=_ref.registry;start();var viewport=function(){var scroll=getWindowScroll(),maxScroll=getMaxWindowScroll(),top=scroll.y,left=scroll.x,doc=getDocumentElement(),right=left+doc.clientWidth,bottom=top+doc.clientHeight;return{frame:cssBoxModel.getRect({top:top,left:left,right:right,bottom:bottom}),scroll:{initial:scroll,current:scroll,max:maxScroll,diff:{value:origin,displacement:origin}}}}(),windowScroll=viewport.scroll.current,home=critical.droppable,droppables=registry.droppable.getAllByType(home.type).map((function(entry){return entry.callbacks.getDimensionAndWatchScroll(windowScroll,scrollOptions)})),draggables=registry.draggable.getAllByType(critical.draggable.type).map((function(entry){return entry.getDimension(windowScroll)})),dimensions={draggables:toDraggableMap(draggables),droppables:toDroppableMap(droppables)};return finish(),{dimensions:dimensions,critical:critical,viewport:viewport}};function shouldPublishUpdate(registry,dragging,entry){return entry.descriptor.id!==dragging.id&&(entry.descriptor.type===dragging.type&&"virtual"===registry.droppable.getById(entry.descriptor.droppableId).descriptor.mode)}var getRemainder,base,createDimensionMarshal=function(registry,callbacks){var collection=null,publisher=function(_ref){var registry=_ref.registry,callbacks=_ref.callbacks,staging={additions:{},removals:{},modified:{}},frameId=null,collect=function(){frameId||(callbacks.collectionStarting(),frameId=requestAnimationFrame((function(){frameId=null,start();var _staging=staging,additions=_staging.additions,removals=_staging.removals,modified=_staging.modified,added=Object.keys(additions).map((function(id){return registry.draggable.getById(id).getDimension(origin)})).sort((function(a,b){return a.descriptor.index-b.descriptor.index})),updated=Object.keys(modified).map((function(id){return{droppableId:id,scroll:registry.droppable.getById(id).callbacks.getScrollWhileDragging()}})),result={additions:added,removals:Object.keys(removals),modified:updated};staging={additions:{},removals:{},modified:{}},finish(),callbacks.publish(result)})))};return{add:function(entry){var id=entry.descriptor.id;staging.additions[id]=entry,staging.modified[entry.descriptor.droppableId]=!0,staging.removals[id]&&delete staging.removals[id],collect()},remove:function(entry){var descriptor=entry.descriptor;staging.removals[descriptor.id]=!0,staging.modified[descriptor.droppableId]=!0,staging.additions[descriptor.id]&&delete staging.additions[descriptor.id],collect()},stop:function(){frameId&&(cancelAnimationFrame(frameId),frameId=null,staging={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:callbacks.publishWhileDragging,collectionStarting:callbacks.collectionStarting},registry:registry}),subscriber=function(event){collection||invariant(!1);var dragging=collection.critical.draggable;"ADDITION"===event.type&&shouldPublishUpdate(registry,dragging,event.value)&&publisher.add(event.value),"REMOVAL"===event.type&&shouldPublishUpdate(registry,dragging,event.value)&&publisher.remove(event.value)};return{updateDroppableIsEnabled:function(id,isEnabled){registry.droppable.exists(id)||invariant(!1),collection&&callbacks.updateDroppableIsEnabled({id:id,isEnabled:isEnabled})},updateDroppableIsCombineEnabled:function(id,isCombineEnabled){collection&&(registry.droppable.exists(id)||invariant(!1),callbacks.updateDroppableIsCombineEnabled({id:id,isCombineEnabled:isCombineEnabled}))},scrollDroppable:function(id,change){collection&&registry.droppable.getById(id).callbacks.scroll(change)},updateDroppableScroll:function(id,newScroll){collection&&(registry.droppable.exists(id)||invariant(!1),callbacks.updateDroppableScroll({id:id,newScroll:newScroll}))},startPublishing:function(request){collection&&invariant(!1);var entry=registry.draggable.getById(request.draggableId),home=registry.droppable.getById(entry.descriptor.droppableId),critical={draggable:entry.descriptor,droppable:home.descriptor},unsubscribe=registry.subscribe(subscriber);return collection={critical:critical,unsubscribe:unsubscribe},getInitialPublish({critical:critical,registry:registry,scrollOptions:request.scrollOptions})},stopPublishing:function(){if(collection){publisher.stop();var home=collection.critical.droppable;registry.droppable.getAllByType(home.type).forEach((function(entry){return entry.callbacks.dragStopped()})),collection.unsubscribe(),collection=null}}}},canStartDrag=function(state,id){return"IDLE"===state.phase||"DROP_ANIMATING"===state.phase&&(state.completed.result.draggableId!==id&&"DROP"===state.completed.result.reason)},scrollWindow=function(change){window.scrollBy(change.x,change.y)},getScrollableDroppables=memoizeOne((function(droppables){return toDroppableList(droppables).filter((function(droppable){return!!droppable.isEnabled&&!!droppable.frame}))})),getBestScrollableDroppable=function(_ref){var center=_ref.center,destination=_ref.destination,droppables=_ref.droppables;if(destination){var _dimension=droppables[destination];return _dimension.frame?_dimension:null}return function(target,droppables){return find(getScrollableDroppables(droppables),(function(droppable){return droppable.frame||invariant(!1),isPositionInFrame(droppable.frame.pageMarginBox)(target)}))}(center,droppables)},config_startFromPercentage=.25,config_maxScrollAtPercentage=.05,config_maxPixelScroll=28,config_ease=function(percentage){return Math.pow(percentage,2)},config_durationDampening={stopDampeningAt:1200,accelerateAt:360},getPercentage=function(_ref){var startOfRange=_ref.startOfRange,endOfRange=_ref.endOfRange,current=_ref.current,range=endOfRange-startOfRange;return 0===range?0:(current-startOfRange)/range},accelerateAt=config_durationDampening.accelerateAt,stopAt=config_durationDampening.stopDampeningAt,getValue=function(_ref){var distanceToEdge=_ref.distanceToEdge,thresholds=_ref.thresholds,dragStartTime=_ref.dragStartTime,shouldUseTimeDampening=_ref.shouldUseTimeDampening,scroll=function(distanceToEdge,thresholds){if(distanceToEdge>thresholds.startScrollingFrom)return 0;if(distanceToEdge<=thresholds.maxScrollValueAt)return config_maxPixelScroll;if(distanceToEdge===thresholds.startScrollingFrom)return 1;var percentageFromMaxScrollValueAt=getPercentage({startOfRange:thresholds.maxScrollValueAt,endOfRange:thresholds.startScrollingFrom,current:distanceToEdge}),scroll=config_maxPixelScroll*config_ease(1-percentageFromMaxScrollValueAt);return Math.ceil(scroll)}(distanceToEdge,thresholds);return 0===scroll?0:shouldUseTimeDampening?Math.max(function(proposedScroll,dragStartTime){var startOfRange=dragStartTime,endOfRange=stopAt,runTime=Date.now()-startOfRange;if(runTime>=stopAt)return proposedScroll;if(runTime<accelerateAt)return 1;var betweenAccelerateAtAndStopAtPercentage=getPercentage({startOfRange:accelerateAt,endOfRange:endOfRange,current:runTime}),scroll=proposedScroll*config_ease(betweenAccelerateAtAndStopAtPercentage);return Math.ceil(scroll)}(scroll,dragStartTime),1):scroll},getScrollOnAxis=function(_ref){var container=_ref.container,distanceToEdges=_ref.distanceToEdges,dragStartTime=_ref.dragStartTime,axis=_ref.axis,shouldUseTimeDampening=_ref.shouldUseTimeDampening,thresholds=function(container,axis){return{startScrollingFrom:container[axis.size]*config_startFromPercentage,maxScrollValueAt:container[axis.size]*config_maxScrollAtPercentage}}(container,axis);return distanceToEdges[axis.end]<distanceToEdges[axis.start]?getValue({distanceToEdge:distanceToEdges[axis.end],thresholds:thresholds,dragStartTime:dragStartTime,shouldUseTimeDampening:shouldUseTimeDampening}):-1*getValue({distanceToEdge:distanceToEdges[axis.start],thresholds:thresholds,dragStartTime:dragStartTime,shouldUseTimeDampening:shouldUseTimeDampening})},clean$2=apply((function(value){return 0===value?0:value})),getScroll=function(_ref){var dragStartTime=_ref.dragStartTime,container=_ref.container,subject=_ref.subject,center=_ref.center,shouldUseTimeDampening=_ref.shouldUseTimeDampening,distanceToEdges={top:center.y-container.top,right:container.right-center.x,bottom:container.bottom-center.y,left:center.x-container.left},y=getScrollOnAxis({container:container,distanceToEdges:distanceToEdges,dragStartTime:dragStartTime,axis:vertical,shouldUseTimeDampening:shouldUseTimeDampening}),x=getScrollOnAxis({container:container,distanceToEdges:distanceToEdges,dragStartTime:dragStartTime,axis:horizontal,shouldUseTimeDampening:shouldUseTimeDampening}),required=clean$2({x:x,y:y});if(isEqual(required,origin))return null;var limited=function(_ref){var container=_ref.container,subject=_ref.subject,proposedScroll=_ref.proposedScroll,isTooBigVertically=subject.height>container.height,isTooBigHorizontally=subject.width>container.width;return isTooBigHorizontally||isTooBigVertically?isTooBigHorizontally&&isTooBigVertically?null:{x:isTooBigHorizontally?0:proposedScroll.x,y:isTooBigVertically?0:proposedScroll.y}:proposedScroll}({container:container,subject:subject,proposedScroll:required});return limited?isEqual(limited,origin)?null:limited:null},smallestSigned=apply((function(value){return 0===value?0:value>0?1:-1})),getOverlap=(getRemainder=function(target,max){return target<0?target:target>max?target-max:0},function(_ref){var current=_ref.current,max=_ref.max,change=_ref.change,targetScroll=add(current,change),overlap={x:getRemainder(targetScroll.x,max.x),y:getRemainder(targetScroll.y,max.y)};return isEqual(overlap,origin)?null:overlap}),canPartiallyScroll=function(_ref2){var rawMax=_ref2.max,current=_ref2.current,change=_ref2.change,max={x:Math.max(current.x,rawMax.x),y:Math.max(current.y,rawMax.y)},smallestChange=smallestSigned(change),overlap=getOverlap({max:max,current:current,change:smallestChange});return!overlap||(0!==smallestChange.x&&0===overlap.x||0!==smallestChange.y&&0===overlap.y)},canScrollWindow=function(viewport,change){return canPartiallyScroll({current:viewport.scroll.current,max:viewport.scroll.max,change:change})},canScrollDroppable=function(droppable,change){var frame=droppable.frame;return!!frame&&canPartiallyScroll({current:frame.scroll.current,max:frame.scroll.max,change:change})},scroll$1=function(_ref){var state=_ref.state,dragStartTime=_ref.dragStartTime,shouldUseTimeDampening=_ref.shouldUseTimeDampening,scrollWindow=_ref.scrollWindow,scrollDroppable=_ref.scrollDroppable,center=state.current.page.borderBoxCenter,subject=state.dimensions.draggables[state.critical.draggable.id].page.marginBox;if(state.isWindowScrollAllowed){var _change=function(_ref){var viewport=_ref.viewport,subject=_ref.subject,center=_ref.center,dragStartTime=_ref.dragStartTime,shouldUseTimeDampening=_ref.shouldUseTimeDampening,scroll=getScroll({dragStartTime:dragStartTime,container:viewport.frame,subject:subject,center:center,shouldUseTimeDampening:shouldUseTimeDampening});return scroll&&canScrollWindow(viewport,scroll)?scroll:null}({dragStartTime:dragStartTime,viewport:state.viewport,subject:subject,center:center,shouldUseTimeDampening:shouldUseTimeDampening});if(_change)return void scrollWindow(_change)}var droppable=getBestScrollableDroppable({center:center,destination:whatIsDraggedOver(state.impact),droppables:state.dimensions.droppables});if(droppable){var change=function(_ref){var droppable=_ref.droppable,subject=_ref.subject,center=_ref.center,dragStartTime=_ref.dragStartTime,shouldUseTimeDampening=_ref.shouldUseTimeDampening,frame=droppable.frame;if(!frame)return null;var scroll=getScroll({dragStartTime:dragStartTime,container:frame.pageMarginBox,subject:subject,center:center,shouldUseTimeDampening:shouldUseTimeDampening});return scroll&&canScrollDroppable(droppable,scroll)?scroll:null}({dragStartTime:dragStartTime,droppable:droppable,subject:subject,center:center,shouldUseTimeDampening:shouldUseTimeDampening});change&&scrollDroppable(droppable.descriptor.id,change)}},createJumpScroller=function(_ref){var move=_ref.move,scrollDroppable=_ref.scrollDroppable,scrollWindow=_ref.scrollWindow,scrollDroppableAsMuchAsItCan=function(droppable,change){if(!canScrollDroppable(droppable,change))return change;var overlap=function(droppable,change){var frame=droppable.frame;return frame&&canScrollDroppable(droppable,change)?getOverlap({current:frame.scroll.current,max:frame.scroll.max,change:change}):null}(droppable,change);if(!overlap)return scrollDroppable(droppable.descriptor.id,change),null;var whatTheDroppableCanScroll=subtract(change,overlap);return scrollDroppable(droppable.descriptor.id,whatTheDroppableCanScroll),subtract(change,whatTheDroppableCanScroll)},scrollWindowAsMuchAsItCan=function(isWindowScrollAllowed,viewport,change){if(!isWindowScrollAllowed)return change;if(!canScrollWindow(viewport,change))return change;var overlap=function(viewport,change){if(!canScrollWindow(viewport,change))return null;var max=viewport.scroll.max,current=viewport.scroll.current;return getOverlap({current:current,max:max,change:change})}(viewport,change);if(!overlap)return scrollWindow(change),null;var whatTheWindowCanScroll=subtract(change,overlap);return scrollWindow(whatTheWindowCanScroll),subtract(change,whatTheWindowCanScroll)};return function(state){var request=state.scrollJumpRequest;if(request){var destination=whatIsDraggedOver(state.impact);destination||invariant(!1);var droppableRemainder=scrollDroppableAsMuchAsItCan(state.dimensions.droppables[destination],request);if(droppableRemainder){var viewport=state.viewport,windowRemainder=scrollWindowAsMuchAsItCan(state.isWindowScrollAllowed,viewport,droppableRemainder);windowRemainder&&function(state,offset){var client=add(state.current.client.selection,offset);move({client:client})}(state,windowRemainder)}}}},createAutoScroller=function(_ref){var scrollDroppable=_ref.scrollDroppable,scrollWindow=_ref.scrollWindow,move=_ref.move,fluidScroller=function(_ref){var scrollWindow=_ref.scrollWindow,scrollDroppable=_ref.scrollDroppable,scheduleWindowScroll=rafSchd(scrollWindow),scheduleDroppableScroll=rafSchd(scrollDroppable),dragging=null,tryScroll=function(state){dragging||invariant(!1);var _dragging=dragging,shouldUseTimeDampening=_dragging.shouldUseTimeDampening,dragStartTime=_dragging.dragStartTime;scroll$1({state:state,scrollWindow:scheduleWindowScroll,scrollDroppable:scheduleDroppableScroll,dragStartTime:dragStartTime,shouldUseTimeDampening:shouldUseTimeDampening})};return{start:function(state){start(),dragging&&invariant(!1);var dragStartTime=Date.now(),wasScrollNeeded=!1,fakeScrollCallback=function(){wasScrollNeeded=!0};scroll$1({state:state,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:fakeScrollCallback,scrollDroppable:fakeScrollCallback}),dragging={dragStartTime:dragStartTime,shouldUseTimeDampening:wasScrollNeeded},finish(),wasScrollNeeded&&tryScroll(state)},stop:function(){dragging&&(scheduleWindowScroll.cancel(),scheduleDroppableScroll.cancel(),dragging=null)},scroll:tryScroll}}({scrollWindow:scrollWindow,scrollDroppable:scrollDroppable}),jumpScroll=createJumpScroller({move:move,scrollWindow:scrollWindow,scrollDroppable:scrollDroppable});return{scroll:function(state){"DRAGGING"===state.phase&&("FLUID"!==state.movementMode?state.scrollJumpRequest&&jumpScroll(state):fluidScroller.scroll(state))},start:fluidScroller.start,stop:fluidScroller.stop}},dragHandle={base:base="data-rbd-drag-handle",draggableId:base+"-draggable-id",contextId:base+"-context-id"},draggable=function(){var base="data-rbd-draggable";return{base:base,contextId:base+"-context-id",id:base+"-id"}}(),droppable=function(){var base="data-rbd-droppable";return{base:base,contextId:base+"-context-id",id:base+"-id"}}(),scrollContainer={contextId:"data-rbd-scroll-container-context-id"},getStyles=function(rules,property){return rules.map((function(rule){var value=rule.styles[property];return value?rule.selector+" { "+value+" }":""})).join(" ")},useIsomorphicLayoutEffect="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?React.useLayoutEffect:React.useEffect,getHead=function(){var head=document.querySelector("head");return head||invariant(!1),head},createStyleEl=function(nonce){var el=document.createElement("style");return nonce&&el.setAttribute("nonce",nonce),el.type="text/css",el};function useStyleMarshal(contextId,nonce){var styles=useMemoOne.useMemo((function(){return function(contextId){var context,grabCursor,transition,getSelector=(context=contextId,function(attribute){return"["+attribute+'="'+context+'"]'}),dragHandle$1=(grabCursor="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ",{selector:getSelector(dragHandle.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:grabCursor,dragging:"pointer-events: none;",dropAnimating:grabCursor}}),rules=[(transition="\n      transition: "+transitions.outOfTheWay+";\n    ",{selector:getSelector(draggable.contextId),styles:{dragging:transition,dropAnimating:transition,userCancel:transition}}),dragHandle$1,{selector:getSelector(droppable.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:getStyles(rules,"always"),resting:getStyles(rules,"resting"),dragging:getStyles(rules,"dragging"),dropAnimating:getStyles(rules,"dropAnimating"),userCancel:getStyles(rules,"userCancel")}}(contextId)}),[contextId]),alwaysRef=React.useRef(null),dynamicRef=React.useRef(null),setDynamicStyle=useMemoOne.useCallback(memoizeOne((function(proposed){var el=dynamicRef.current;el||invariant(!1),el.textContent=proposed})),[]),setAlwaysStyle=useMemoOne.useCallback((function(proposed){var el=alwaysRef.current;el||invariant(!1),el.textContent=proposed}),[]);useIsomorphicLayoutEffect((function(){(alwaysRef.current||dynamicRef.current)&&invariant(!1);var always=createStyleEl(nonce),dynamic=createStyleEl(nonce);return alwaysRef.current=always,dynamicRef.current=dynamic,always.setAttribute("data-rbd-always",contextId),dynamic.setAttribute("data-rbd-dynamic",contextId),getHead().appendChild(always),getHead().appendChild(dynamic),setAlwaysStyle(styles.always),setDynamicStyle(styles.resting),function(){var remove=function(ref){var current=ref.current;current||invariant(!1),getHead().removeChild(current),ref.current=null};remove(alwaysRef),remove(dynamicRef)}}),[nonce,setAlwaysStyle,setDynamicStyle,styles.always,styles.resting,contextId]);var dragging=useMemoOne.useCallback((function(){return setDynamicStyle(styles.dragging)}),[setDynamicStyle,styles.dragging]),dropping=useMemoOne.useCallback((function(reason){setDynamicStyle("DROP"!==reason?styles.userCancel:styles.dropAnimating)}),[setDynamicStyle,styles.dropAnimating,styles.userCancel]),resting=useMemoOne.useCallback((function(){dynamicRef.current&&setDynamicStyle(styles.resting)}),[setDynamicStyle,styles.resting]);return useMemoOne.useMemo((function(){return{dragging:dragging,dropping:dropping,resting:resting}}),[dragging,dropping,resting])}var getWindowFromEl=function(el){return el&&el.ownerDocument?el.ownerDocument.defaultView:window};function isHtmlElement(el){return el instanceof getWindowFromEl(el).HTMLElement}function findDragHandle(contextId,draggableId){var selector="["+dragHandle.contextId+'="'+contextId+'"]',possible=toArray(document.querySelectorAll(selector));if(!possible.length)return null;var handle=find(possible,(function(el){return el.getAttribute(dragHandle.draggableId)===draggableId}));return handle&&isHtmlElement(handle)?handle:null}function createRegistry(){var entries={draggables:{},droppables:{}},subscribers=[];function notify(event){subscribers.length&&subscribers.forEach((function(cb){return cb(event)}))}function findDraggableById(id){return entries.draggables[id]||null}function findDroppableById(id){return entries.droppables[id]||null}return{draggable:{register:function(entry){entries.draggables[entry.descriptor.id]=entry,notify({type:"ADDITION",value:entry})},update:function(entry,last){var current=entries.draggables[last.descriptor.id];current&&current.uniqueId===entry.uniqueId&&(delete entries.draggables[last.descriptor.id],entries.draggables[entry.descriptor.id]=entry)},unregister:function(entry){var draggableId=entry.descriptor.id,current=findDraggableById(draggableId);current&&entry.uniqueId===current.uniqueId&&(delete entries.draggables[draggableId],notify({type:"REMOVAL",value:entry}))},getById:function(id){var entry=findDraggableById(id);return entry||invariant(!1),entry},findById:findDraggableById,exists:function(id){return Boolean(findDraggableById(id))},getAllByType:function(type){return values(entries.draggables).filter((function(entry){return entry.descriptor.type===type}))}},droppable:{register:function(entry){entries.droppables[entry.descriptor.id]=entry},unregister:function(entry){var current=findDroppableById(entry.descriptor.id);current&&entry.uniqueId===current.uniqueId&&delete entries.droppables[entry.descriptor.id]},getById:function(id){var entry=findDroppableById(id);return entry||invariant(!1),entry},findById:findDroppableById,exists:function(id){return Boolean(findDroppableById(id))},getAllByType:function(type){return values(entries.droppables).filter((function(entry){return entry.descriptor.type===type}))}},subscribe:function(cb){return subscribers.push(cb),function(){var index=subscribers.indexOf(cb);-1!==index&&subscribers.splice(index,1)}},clean:function(){entries.draggables={},entries.droppables={},subscribers.length=0}}}var StoreContext=React__default.createContext(null),getBodyElement=function(){var body=document.body;return body||invariant(!1),body},visuallyHidden={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var count=0,defaults={separator:"::"};function useUniqueId(prefix,options){return void 0===options&&(options=defaults),useMemoOne.useMemo((function(){return""+prefix+options.separator+count++}),[options.separator,prefix])}var AppContext=React__default.createContext(null);function useDev(useHook){0}function useDevSetupWarning(fn,inputs){useDev()}function useStartupValidation(){useDevSetupWarning()}function usePrevious(current){var ref=React.useRef(current);return React.useEffect((function(){ref.current=current})),ref}var _preventedKeys,preventedKeys=((_preventedKeys={})[13]=!0,_preventedKeys[9]=!0,_preventedKeys),preventStandardKeyEvents=function(event){preventedKeys[event.keyCode]&&event.preventDefault()},supportedEventName=function(){var base="visibilitychange";return"undefined"==typeof document?base:find([base,"ms"+base,"webkit"+base,"moz"+base,"o"+base],(function(eventName){return"on"+eventName in document}))||base}();var _scrollJumpKeys,idle$1={type:"IDLE"};function getCaptureBindings(_ref){var cancel=_ref.cancel,completed=_ref.completed,getPhase=_ref.getPhase,setPhase=_ref.setPhase;return[{eventName:"mousemove",fn:function(event){var button=event.button,clientX=event.clientX,clientY=event.clientY;if(0===button){var point={x:clientX,y:clientY},phase=getPhase();if("DRAGGING"===phase.type)return event.preventDefault(),void phase.actions.move(point);"PENDING"!==phase.type&&invariant(!1);var pending=phase.point;if(original=pending,current=point,Math.abs(current.x-original.x)>=5||Math.abs(current.y-original.y)>=5){var original,current;event.preventDefault();var actions=phase.actions.fluidLift(point);setPhase({type:"DRAGGING",actions:actions})}}}},{eventName:"mouseup",fn:function(event){var phase=getPhase();"DRAGGING"===phase.type?(event.preventDefault(),phase.actions.drop({shouldBlockNextClick:!0}),completed()):cancel()}},{eventName:"mousedown",fn:function(event){"DRAGGING"===getPhase().type&&event.preventDefault(),cancel()}},{eventName:"keydown",fn:function(event){if("PENDING"!==getPhase().type)return 27===event.keyCode?(event.preventDefault(),void cancel()):void preventStandardKeyEvents(event);cancel()}},{eventName:"resize",fn:cancel},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===getPhase().type&&cancel()}},{eventName:"webkitmouseforcedown",fn:function(event){var phase=getPhase();"IDLE"===phase.type&&invariant(!1),phase.actions.shouldRespectForcePress()?cancel():event.preventDefault()}},{eventName:supportedEventName,fn:cancel}]}function noop$1(){}var scrollJumpKeys=((_scrollJumpKeys={})[34]=!0,_scrollJumpKeys[33]=!0,_scrollJumpKeys[36]=!0,_scrollJumpKeys[35]=!0,_scrollJumpKeys);function getDraggingBindings(actions,stop){function cancel(){stop(),actions.cancel()}return[{eventName:"keydown",fn:function(event){return 27===event.keyCode?(event.preventDefault(),void cancel()):32===event.keyCode?(event.preventDefault(),stop(),void actions.drop()):40===event.keyCode?(event.preventDefault(),void actions.moveDown()):38===event.keyCode?(event.preventDefault(),void actions.moveUp()):39===event.keyCode?(event.preventDefault(),void actions.moveRight()):37===event.keyCode?(event.preventDefault(),void actions.moveLeft()):void(scrollJumpKeys[event.keyCode]?event.preventDefault():preventStandardKeyEvents(event))}},{eventName:"mousedown",fn:cancel},{eventName:"mouseup",fn:cancel},{eventName:"click",fn:cancel},{eventName:"touchstart",fn:cancel},{eventName:"resize",fn:cancel},{eventName:"wheel",fn:cancel,options:{passive:!0}},{eventName:supportedEventName,fn:cancel}]}var idle$2={type:"IDLE"};var interactiveTagNames={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function isEventInInteractiveElement(draggable,event){var target=event.target;return!!isHtmlElement(target)&&function isAnInteractiveElement(parent,current){if(null==current)return!1;if(Boolean(interactiveTagNames[current.tagName.toLowerCase()]))return!0;var attribute=current.getAttribute("contenteditable");return"true"===attribute||""===attribute||current!==parent&&isAnInteractiveElement(parent,current.parentElement)}(draggable,target)}var getBorderBoxCenterPosition=function(el){return cssBoxModel.getRect(el.getBoundingClientRect()).center};var supportedMatchesName="undefined"==typeof document?"matches":find(["matches","msMatchesSelector","webkitMatchesSelector"],(function(name){return name in Element.prototype}))||"matches";function closest$1(el,selector){return el.closest?el.closest(selector):function closestPonyfill(el,selector){return null==el?null:el[supportedMatchesName](selector)?el:closestPonyfill(el.parentElement,selector)}(el,selector)}function findClosestDragHandleFromEvent(contextId,event){var el,target=event.target;if(!((el=target)instanceof getWindowFromEl(el).Element))return null;var handle=closest$1(target,function(contextId){return"["+dragHandle.contextId+'="'+contextId+'"]'}(contextId));return handle&&isHtmlElement(handle)?handle:null}function preventDefault(event){event.preventDefault()}function _isActive(_ref){var expected=_ref.expected,phase=_ref.phase,isLockActive=_ref.isLockActive;_ref.shouldWarn;return!!isLockActive()&&expected===phase}function canStart(_ref2){var lockAPI=_ref2.lockAPI,store=_ref2.store,registry=_ref2.registry,draggableId=_ref2.draggableId;if(lockAPI.isClaimed())return!1;var entry=registry.draggable.findById(draggableId);return!!entry&&(!!entry.options.isEnabled&&!!canStartDrag(store.getState(),draggableId))}function tryStart(_ref3){var lockAPI=_ref3.lockAPI,contextId=_ref3.contextId,store=_ref3.store,registry=_ref3.registry,draggableId=_ref3.draggableId,forceSensorStop=_ref3.forceSensorStop,sourceEvent=_ref3.sourceEvent;if(!canStart({lockAPI:lockAPI,store:store,registry:registry,draggableId:draggableId}))return null;var entry=registry.draggable.getById(draggableId),el=function(contextId,draggableId){var selector="["+draggable.contextId+'="'+contextId+'"]',draggable$1=find(toArray(document.querySelectorAll(selector)),(function(el){return el.getAttribute(draggable.id)===draggableId}));return draggable$1&&isHtmlElement(draggable$1)?draggable$1:null}(contextId,entry.descriptor.id);if(!el)return null;if(sourceEvent&&!entry.options.canDragInteractiveElements&&isEventInInteractiveElement(el,sourceEvent))return null;var lock=lockAPI.claim(forceSensorStop||noop),phase="PRE_DRAG";function getShouldRespectForcePress(){return entry.options.shouldRespectForcePress}function isLockActive(){return lockAPI.isActive(lock)}var tryDispatchWhenDragging=function(expected,getAction){_isActive({expected:expected,phase:phase,isLockActive:isLockActive,shouldWarn:!0})&&store.dispatch(getAction())}.bind(null,"DRAGGING");function lift$1(args){function completed(){lockAPI.release(),phase="COMPLETED"}function finish(reason,options){if(void 0===options&&(options={shouldBlockNextClick:!1}),args.cleanup(),options.shouldBlockNextClick){var unbind=bindEvents(window,[{eventName:"click",fn:preventDefault,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(unbind)}completed(),store.dispatch(drop({reason:reason}))}return"PRE_DRAG"!==phase&&(completed(),"PRE_DRAG"!==phase&&invariant(!1)),store.dispatch(function(args){return{type:"LIFT",payload:args}}(args.liftActionArgs)),phase="DRAGGING",_extends({isActive:function(){return _isActive({expected:"DRAGGING",phase:phase,isLockActive:isLockActive,shouldWarn:!1})},shouldRespectForcePress:getShouldRespectForcePress,drop:function(options){return finish("DROP",options)},cancel:function(options){return finish("CANCEL",options)}},args.actions)}return{isActive:function(){return _isActive({expected:"PRE_DRAG",phase:phase,isLockActive:isLockActive,shouldWarn:!1})},shouldRespectForcePress:getShouldRespectForcePress,fluidLift:function(clientSelection){var move$1=rafSchd((function(client){tryDispatchWhenDragging((function(){return move({client:client})}))})),api=lift$1({liftActionArgs:{id:draggableId,clientSelection:clientSelection,movementMode:"FLUID"},cleanup:function(){return move$1.cancel()},actions:{move:move$1}});return _extends({},api,{move:move$1})},snapLift:function(){var actions={moveUp:function(){return tryDispatchWhenDragging(moveUp)},moveRight:function(){return tryDispatchWhenDragging(moveRight)},moveDown:function(){return tryDispatchWhenDragging(moveDown)},moveLeft:function(){return tryDispatchWhenDragging(moveLeft)}};return lift$1({liftActionArgs:{id:draggableId,clientSelection:getBorderBoxCenterPosition(el),movementMode:"SNAP"},cleanup:noop,actions:actions})},abort:function(){_isActive({expected:"PRE_DRAG",phase:phase,isLockActive:isLockActive,shouldWarn:!0})&&lockAPI.release()}}}var defaultSensors=[function(api){var phaseRef=React.useRef(idle$1),unbindEventsRef=React.useRef(noop),startCaptureBinding=useMemoOne.useMemo((function(){return{eventName:"mousedown",fn:function(event){if(!event.defaultPrevented&&0===event.button&&!(event.ctrlKey||event.metaKey||event.shiftKey||event.altKey)){var draggableId=api.findClosestDraggableId(event);if(draggableId){var actions=api.tryGetLock(draggableId,stop,{sourceEvent:event});if(actions){event.preventDefault();var point={x:event.clientX,y:event.clientY};unbindEventsRef.current(),startPendingDrag(actions,point)}}}}}}),[api]),preventForcePressBinding=useMemoOne.useMemo((function(){return{eventName:"webkitmouseforcewillbegin",fn:function(event){if(!event.defaultPrevented){var id=api.findClosestDraggableId(event);if(id){var options=api.findOptionsForDraggable(id);options&&(options.shouldRespectForcePress||api.canGetLock(id)&&event.preventDefault())}}}}}),[api]),listenForCapture=useMemoOne.useCallback((function(){unbindEventsRef.current=bindEvents(window,[preventForcePressBinding,startCaptureBinding],{passive:!1,capture:!0})}),[preventForcePressBinding,startCaptureBinding]),stop=useMemoOne.useCallback((function(){"IDLE"!==phaseRef.current.type&&(phaseRef.current=idle$1,unbindEventsRef.current(),listenForCapture())}),[listenForCapture]),cancel=useMemoOne.useCallback((function(){var phase=phaseRef.current;stop(),"DRAGGING"===phase.type&&phase.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===phase.type&&phase.actions.abort()}),[stop]),bindCapturingEvents=useMemoOne.useCallback((function(){var bindings=getCaptureBindings({cancel:cancel,completed:stop,getPhase:function(){return phaseRef.current},setPhase:function(phase){phaseRef.current=phase}});unbindEventsRef.current=bindEvents(window,bindings,{capture:!0,passive:!1})}),[cancel,stop]),startPendingDrag=useMemoOne.useCallback((function(actions,point){"IDLE"!==phaseRef.current.type&&invariant(!1),phaseRef.current={type:"PENDING",point:point,actions:actions},bindCapturingEvents()}),[bindCapturingEvents]);useIsomorphicLayoutEffect((function(){return listenForCapture(),function(){unbindEventsRef.current()}}),[listenForCapture])},function(api){var unbindEventsRef=React.useRef(noop$1),startCaptureBinding=useMemoOne.useMemo((function(){return{eventName:"keydown",fn:function(event){if(!event.defaultPrevented&&32===event.keyCode){var draggableId=api.findClosestDraggableId(event);if(draggableId){var preDrag=api.tryGetLock(draggableId,stop,{sourceEvent:event});if(preDrag){event.preventDefault();var isCapturing=!0,actions=preDrag.snapLift();unbindEventsRef.current(),unbindEventsRef.current=bindEvents(window,getDraggingBindings(actions,stop),{capture:!0,passive:!1})}}}function stop(){isCapturing||invariant(!1),isCapturing=!1,unbindEventsRef.current(),listenForCapture()}}}}),[api]),listenForCapture=useMemoOne.useCallback((function(){unbindEventsRef.current=bindEvents(window,[startCaptureBinding],{passive:!1,capture:!0})}),[startCaptureBinding]);useIsomorphicLayoutEffect((function(){return listenForCapture(),function(){unbindEventsRef.current()}}),[listenForCapture])},function(api){var phaseRef=React.useRef(idle$2),unbindEventsRef=React.useRef(noop),getPhase=useMemoOne.useCallback((function(){return phaseRef.current}),[]),setPhase=useMemoOne.useCallback((function(phase){phaseRef.current=phase}),[]),startCaptureBinding=useMemoOne.useMemo((function(){return{eventName:"touchstart",fn:function(event){if(!event.defaultPrevented){var draggableId=api.findClosestDraggableId(event);if(draggableId){var actions=api.tryGetLock(draggableId,stop,{sourceEvent:event});if(actions){var touch=event.touches[0],point={x:touch.clientX,y:touch.clientY};unbindEventsRef.current(),startPendingDrag(actions,point)}}}}}}),[api]),listenForCapture=useMemoOne.useCallback((function(){unbindEventsRef.current=bindEvents(window,[startCaptureBinding],{capture:!0,passive:!1})}),[startCaptureBinding]),stop=useMemoOne.useCallback((function(){var current=phaseRef.current;"IDLE"!==current.type&&("PENDING"===current.type&&clearTimeout(current.longPressTimerId),setPhase(idle$2),unbindEventsRef.current(),listenForCapture())}),[listenForCapture,setPhase]),cancel=useMemoOne.useCallback((function(){var phase=phaseRef.current;stop(),"DRAGGING"===phase.type&&phase.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===phase.type&&phase.actions.abort()}),[stop]),bindCapturingEvents=useMemoOne.useCallback((function(){var options={capture:!0,passive:!1},args={cancel:cancel,completed:stop,getPhase:getPhase},unbindTarget=bindEvents(window,function(_ref2){var cancel=_ref2.cancel,completed=_ref2.completed,getPhase=_ref2.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(event){var phase=getPhase();if("DRAGGING"===phase.type){phase.hasMoved=!0;var _event$touches$=event.touches[0],point={x:_event$touches$.clientX,y:_event$touches$.clientY};event.preventDefault(),phase.actions.move(point)}else cancel()}},{eventName:"touchend",fn:function(event){var phase=getPhase();"DRAGGING"===phase.type?(event.preventDefault(),phase.actions.drop({shouldBlockNextClick:!0}),completed()):cancel()}},{eventName:"touchcancel",fn:function(event){"DRAGGING"===getPhase().type?(event.preventDefault(),cancel()):cancel()}},{eventName:"touchforcechange",fn:function(event){var phase=getPhase();"IDLE"===phase.type&&invariant(!1);var touch=event.touches[0];if(touch&&touch.force>=.15){var shouldRespect=phase.actions.shouldRespectForcePress();if("PENDING"!==phase.type)return shouldRespect?phase.hasMoved?void event.preventDefault():void cancel():void event.preventDefault();shouldRespect&&cancel()}}},{eventName:supportedEventName,fn:cancel}]}(args),options),unbindWindow=bindEvents(window,function(_ref){var cancel=_ref.cancel,getPhase=_ref.getPhase;return[{eventName:"orientationchange",fn:cancel},{eventName:"resize",fn:cancel},{eventName:"contextmenu",fn:function(event){event.preventDefault()}},{eventName:"keydown",fn:function(event){"DRAGGING"===getPhase().type?(27===event.keyCode&&event.preventDefault(),cancel()):cancel()}},{eventName:supportedEventName,fn:cancel}]}(args),options);unbindEventsRef.current=function(){unbindTarget(),unbindWindow()}}),[cancel,getPhase,stop]),startDragging=useMemoOne.useCallback((function(){var phase=getPhase();"PENDING"!==phase.type&&invariant(!1);var actions=phase.actions.fluidLift(phase.point);setPhase({type:"DRAGGING",actions:actions,hasMoved:!1})}),[getPhase,setPhase]),startPendingDrag=useMemoOne.useCallback((function(actions,point){"IDLE"!==getPhase().type&&invariant(!1);var longPressTimerId=setTimeout(startDragging,120);setPhase({type:"PENDING",point:point,actions:actions,longPressTimerId:longPressTimerId}),bindCapturingEvents()}),[bindCapturingEvents,getPhase,setPhase,startDragging]);useIsomorphicLayoutEffect((function(){return listenForCapture(),function(){unbindEventsRef.current();var phase=getPhase();"PENDING"===phase.type&&(clearTimeout(phase.longPressTimerId),setPhase(idle$2))}}),[getPhase,listenForCapture,setPhase]),useIsomorphicLayoutEffect((function(){return bindEvents(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])}),[])}];function useSensorMarshal(_ref4){var contextId=_ref4.contextId,store=_ref4.store,registry=_ref4.registry,customSensors=_ref4.customSensors,enableDefaultSensors=_ref4.enableDefaultSensors,useSensors=[].concat(enableDefaultSensors?defaultSensors:[],customSensors||[]),lockAPI=React.useState((function(){return function(){var lock=null;function release(){lock||invariant(!1),lock=null}return{isClaimed:function(){return Boolean(lock)},isActive:function(value){return value===lock},claim:function(abandon){lock&&invariant(!1);var newLock={abandon:abandon};return lock=newLock,newLock},release:release,tryAbandon:function(){lock&&(lock.abandon(),release())}}}()}))[0],tryAbandonLock=useMemoOne.useCallback((function(previous,current){previous.isDragging&&!current.isDragging&&lockAPI.tryAbandon()}),[lockAPI]);useIsomorphicLayoutEffect((function(){var previous=store.getState();return store.subscribe((function(){var current=store.getState();tryAbandonLock(previous,current),previous=current}))}),[lockAPI,store,tryAbandonLock]),useIsomorphicLayoutEffect((function(){return lockAPI.tryAbandon}),[lockAPI.tryAbandon]);var canGetLock=useMemoOne.useCallback((function(draggableId){return canStart({lockAPI:lockAPI,registry:registry,store:store,draggableId:draggableId})}),[lockAPI,registry,store]),tryGetLock=useMemoOne.useCallback((function(draggableId,forceStop,options){return tryStart({lockAPI:lockAPI,registry:registry,contextId:contextId,store:store,draggableId:draggableId,forceSensorStop:forceStop,sourceEvent:options&&options.sourceEvent?options.sourceEvent:null})}),[contextId,lockAPI,registry,store]),findClosestDraggableId=useMemoOne.useCallback((function(event){return function(contextId,event){var handle=findClosestDragHandleFromEvent(contextId,event);return handle?handle.getAttribute(dragHandle.draggableId):null}(contextId,event)}),[contextId]),findOptionsForDraggable=useMemoOne.useCallback((function(id){var entry=registry.draggable.findById(id);return entry?entry.options:null}),[registry.draggable]),tryReleaseLock=useMemoOne.useCallback((function(){lockAPI.isClaimed()&&(lockAPI.tryAbandon(),"IDLE"!==store.getState().phase&&store.dispatch({type:"FLUSH",payload:null}))}),[lockAPI,store]),isLockClaimed=useMemoOne.useCallback(lockAPI.isClaimed,[lockAPI]),api=useMemoOne.useMemo((function(){return{canGetLock:canGetLock,tryGetLock:tryGetLock,findClosestDraggableId:findClosestDraggableId,findOptionsForDraggable:findOptionsForDraggable,tryReleaseLock:tryReleaseLock,isLockClaimed:isLockClaimed}}),[canGetLock,tryGetLock,findClosestDraggableId,findOptionsForDraggable,tryReleaseLock,isLockClaimed]);useDev();for(var i=0;i<useSensors.length;i++)useSensors[i](api)}function getStore(lazyRef){return lazyRef.current||invariant(!1),lazyRef.current}function App(props){var contextId=props.contextId,setCallbacks=props.setCallbacks,sensors=props.sensors,nonce=props.nonce,dragHandleUsageInstructions=props.dragHandleUsageInstructions,lazyStoreRef=React.useRef(null);useStartupValidation();var lastPropsRef=usePrevious(props),getResponders=useMemoOne.useCallback((function(){return function(props){return{onBeforeCapture:props.onBeforeCapture,onBeforeDragStart:props.onBeforeDragStart,onDragStart:props.onDragStart,onDragEnd:props.onDragEnd,onDragUpdate:props.onDragUpdate}}(lastPropsRef.current)}),[lastPropsRef]),announce=function(contextId){var id=useMemoOne.useMemo((function(){return function(contextId){return"rbd-announcement-"+contextId}(contextId)}),[contextId]),ref=React.useRef(null);return React.useEffect((function(){var el=document.createElement("div");return ref.current=el,el.id=id,el.setAttribute("aria-live","assertive"),el.setAttribute("aria-atomic","true"),_extends(el.style,visuallyHidden),getBodyElement().appendChild(el),function(){setTimeout((function(){var body=getBodyElement();body.contains(el)&&body.removeChild(el),el===ref.current&&(ref.current=null)}))}}),[id]),useMemoOne.useCallback((function(message){var el=ref.current;el&&(el.textContent=message)}),[])}(contextId),dragHandleUsageInstructionsId=function(_ref2){var contextId=_ref2.contextId,text=_ref2.text,uniqueId=useUniqueId("hidden-text",{separator:"-"}),id=useMemoOne.useMemo((function(){return"rbd-hidden-text-"+(_ref={contextId:contextId,uniqueId:uniqueId}).contextId+"-"+_ref.uniqueId;var _ref}),[uniqueId,contextId]);return React.useEffect((function(){var el=document.createElement("div");return el.id=id,el.textContent=text,el.style.display="none",getBodyElement().appendChild(el),function(){var body=getBodyElement();body.contains(el)&&body.removeChild(el)}}),[id,text]),id}({contextId:contextId,text:dragHandleUsageInstructions}),styleMarshal=useStyleMarshal(contextId,nonce),lazyDispatch=useMemoOne.useCallback((function(action){getStore(lazyStoreRef).dispatch(action)}),[]),marshalCallbacks=useMemoOne.useMemo((function(){return redux.bindActionCreators({publishWhileDragging:publishWhileDragging,updateDroppableScroll:updateDroppableScroll,updateDroppableIsEnabled:updateDroppableIsEnabled,updateDroppableIsCombineEnabled:updateDroppableIsCombineEnabled,collectionStarting:collectionStarting},lazyDispatch)}),[lazyDispatch]),registry=function(){var registry=useMemoOne.useMemo(createRegistry,[]);return React.useEffect((function(){return function(){requestAnimationFrame(registry.clean)}}),[registry]),registry}(),dimensionMarshal=useMemoOne.useMemo((function(){return createDimensionMarshal(registry,marshalCallbacks)}),[registry,marshalCallbacks]),autoScroller=useMemoOne.useMemo((function(){return createAutoScroller(_extends({scrollWindow:scrollWindow,scrollDroppable:dimensionMarshal.scrollDroppable},redux.bindActionCreators({move:move},lazyDispatch)))}),[dimensionMarshal.scrollDroppable,lazyDispatch]),focusMarshal=function(contextId){var entriesRef=React.useRef({}),recordRef=React.useRef(null),restoreFocusFrameRef=React.useRef(null),isMountedRef=React.useRef(!1),register=useMemoOne.useCallback((function(id,focus){var entry={id:id,focus:focus};return entriesRef.current[id]=entry,function(){var entries=entriesRef.current;entries[id]!==entry&&delete entries[id]}}),[]),tryGiveFocus=useMemoOne.useCallback((function(tryGiveFocusTo){var handle=findDragHandle(contextId,tryGiveFocusTo);handle&&handle!==document.activeElement&&handle.focus()}),[contextId]),tryShiftRecord=useMemoOne.useCallback((function(previous,redirectTo){recordRef.current===previous&&(recordRef.current=redirectTo)}),[]),tryRestoreFocusRecorded=useMemoOne.useCallback((function(){restoreFocusFrameRef.current||isMountedRef.current&&(restoreFocusFrameRef.current=requestAnimationFrame((function(){restoreFocusFrameRef.current=null;var record=recordRef.current;record&&tryGiveFocus(record)})))}),[tryGiveFocus]),tryRecordFocus=useMemoOne.useCallback((function(id){recordRef.current=null;var focused=document.activeElement;focused&&focused.getAttribute(dragHandle.draggableId)===id&&(recordRef.current=id)}),[]);return useIsomorphicLayoutEffect((function(){return isMountedRef.current=!0,function(){isMountedRef.current=!1;var frameId=restoreFocusFrameRef.current;frameId&&cancelAnimationFrame(frameId)}}),[]),useMemoOne.useMemo((function(){return{register:register,tryRecordFocus:tryRecordFocus,tryRestoreFocusRecorded:tryRestoreFocusRecorded,tryShiftRecord:tryShiftRecord}}),[register,tryRecordFocus,tryRestoreFocusRecorded,tryShiftRecord])}(contextId),store=useMemoOne.useMemo((function(){return createStore({announce:announce,autoScroller:autoScroller,dimensionMarshal:dimensionMarshal,focusMarshal:focusMarshal,getResponders:getResponders,styleMarshal:styleMarshal})}),[announce,autoScroller,dimensionMarshal,focusMarshal,getResponders,styleMarshal]);lazyStoreRef.current=store;var tryResetStore=useMemoOne.useCallback((function(){var current=getStore(lazyStoreRef);"IDLE"!==current.getState().phase&&current.dispatch({type:"FLUSH",payload:null})}),[]),isDragging=useMemoOne.useCallback((function(){var state=getStore(lazyStoreRef).getState();return state.isDragging||"DROP_ANIMATING"===state.phase}),[]);setCallbacks(useMemoOne.useMemo((function(){return{isDragging:isDragging,tryAbort:tryResetStore}}),[isDragging,tryResetStore]));var getCanLift=useMemoOne.useCallback((function(id){return canStartDrag(getStore(lazyStoreRef).getState(),id)}),[]),getIsMovementAllowed=useMemoOne.useCallback((function(){return isMovementAllowed(getStore(lazyStoreRef).getState())}),[]),appContext=useMemoOne.useMemo((function(){return{marshal:dimensionMarshal,focus:focusMarshal,contextId:contextId,canLift:getCanLift,isMovementAllowed:getIsMovementAllowed,dragHandleUsageInstructionsId:dragHandleUsageInstructionsId,registry:registry}}),[contextId,dimensionMarshal,dragHandleUsageInstructionsId,focusMarshal,getCanLift,getIsMovementAllowed,registry]);return useSensorMarshal({contextId:contextId,store:store,registry:registry,customSensors:sensors,enableDefaultSensors:!1!==props.enableDefaultSensors}),React.useEffect((function(){return tryResetStore}),[tryResetStore]),React__default.createElement(AppContext.Provider,{value:appContext},React__default.createElement(reactRedux.Provider,{context:StoreContext,store:store},props.children))}var count$1=0;var isEqual$1=function(base){return function(value){return base===value}},isScroll=isEqual$1("scroll"),isAuto=isEqual$1("auto"),isEither=(isEqual$1("visible"),function(overflow,fn){return fn(overflow.overflowX)||fn(overflow.overflowY)}),isElementScrollable=function(el){var style=window.getComputedStyle(el),overflow={overflowX:style.overflowX,overflowY:style.overflowY};return isEither(overflow,isScroll)||isEither(overflow,isAuto)},getClosestScrollable=function getClosestScrollable(el){return null==el||el===document.body||el===document.documentElement?null:isElementScrollable(el)?el:getClosestScrollable(el.parentElement)},getScroll$1=function(el){return{x:el.scrollLeft,y:el.scrollTop}},getEnv=function(start){return{closestScrollable:getClosestScrollable(start),isFixedOnPage:function getIsFixed(el){return!!el&&("fixed"===window.getComputedStyle(el).position||getIsFixed(el.parentElement))}(start)}},getDimension=function(_ref){var ref=_ref.ref,descriptor=_ref.descriptor,env=_ref.env,windowScroll=_ref.windowScroll,direction=_ref.direction,isDropDisabled=_ref.isDropDisabled,isCombineEnabled=_ref.isCombineEnabled,shouldClipSubject=_ref.shouldClipSubject,closestScrollable=env.closestScrollable,client=function(targetRef,closestScrollable){var base=cssBoxModel.getBox(targetRef);if(!closestScrollable)return base;if(targetRef!==closestScrollable)return base;var top=base.paddingBox.top-closestScrollable.scrollTop,left=base.paddingBox.left-closestScrollable.scrollLeft,bottom=top+closestScrollable.scrollHeight,paddingBox={top:top,right:left+closestScrollable.scrollWidth,bottom:bottom,left:left},borderBox=cssBoxModel.expand(paddingBox,base.border);return cssBoxModel.createBox({borderBox:borderBox,margin:base.margin,border:base.border,padding:base.padding})}(ref,closestScrollable),page=cssBoxModel.withScroll(client,windowScroll),closest=function(){if(!closestScrollable)return null;var frameClient=cssBoxModel.getBox(closestScrollable),scrollSize={scrollHeight:closestScrollable.scrollHeight,scrollWidth:closestScrollable.scrollWidth};return{client:frameClient,page:cssBoxModel.withScroll(frameClient,windowScroll),scroll:getScroll$1(closestScrollable),scrollSize:scrollSize,shouldClipSubject:shouldClipSubject}}();return function(_ref){var descriptor=_ref.descriptor,isEnabled=_ref.isEnabled,isCombineEnabled=_ref.isCombineEnabled,isFixedOnPage=_ref.isFixedOnPage,direction=_ref.direction,client=_ref.client,page=_ref.page,closest=_ref.closest,frame=function(){if(!closest)return null;var scrollSize=closest.scrollSize,frameClient=closest.client,maxScroll=getMaxScroll({scrollHeight:scrollSize.scrollHeight,scrollWidth:scrollSize.scrollWidth,height:frameClient.paddingBox.height,width:frameClient.paddingBox.width});return{pageMarginBox:closest.page.marginBox,frameClient:frameClient,scrollSize:scrollSize,shouldClipSubject:closest.shouldClipSubject,scroll:{initial:closest.scroll,current:closest.scroll,max:maxScroll,diff:{value:origin,displacement:origin}}}}(),axis="vertical"===direction?vertical:horizontal;return{descriptor:descriptor,isCombineEnabled:isCombineEnabled,isFixedOnPage:isFixedOnPage,axis:axis,isEnabled:isEnabled,client:client,page:page,frame:frame,subject:getSubject({page:page,withPlaceholder:null,axis:axis,frame:frame})}}({descriptor:descriptor,isEnabled:!isDropDisabled,isCombineEnabled:isCombineEnabled,isFixedOnPage:env.isFixedOnPage,direction:direction,client:client,page:page,closest:closest})},immediate={passive:!1},delayed={passive:!0},getListenerOptions=function(options){return options.shouldPublishImmediately?immediate:delayed};function useRequiredContext(Context){var result=React.useContext(Context);return result||invariant(!1),result}var getClosestScrollableFromDrag=function(dragging){return dragging&&dragging.env.closestScrollable||null};function noop$2(){}var empty={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},getStyle=function(_ref2){var isAnimatingOpenOnMount=_ref2.isAnimatingOpenOnMount,placeholder=_ref2.placeholder,animate=_ref2.animate,size=function(_ref){var isAnimatingOpenOnMount=_ref.isAnimatingOpenOnMount,placeholder=_ref.placeholder,animate=_ref.animate;return isAnimatingOpenOnMount||"close"===animate?empty:{height:placeholder.client.borderBox.height,width:placeholder.client.borderBox.width,margin:placeholder.client.margin}}({isAnimatingOpenOnMount:isAnimatingOpenOnMount,placeholder:placeholder,animate:animate});return{display:placeholder.display,boxSizing:"border-box",width:size.width,height:size.height,marginTop:size.margin.top,marginRight:size.margin.right,marginBottom:size.margin.bottom,marginLeft:size.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==animate?transitions.placeholder:null}};var Placeholder$1=React__default.memo((function(props){var animateOpenTimerRef=React.useRef(null),tryClearAnimateOpenTimer=useMemoOne.useCallback((function(){animateOpenTimerRef.current&&(clearTimeout(animateOpenTimerRef.current),animateOpenTimerRef.current=null)}),[]),animate=props.animate,onTransitionEnd=props.onTransitionEnd,onClose=props.onClose,contextId=props.contextId,_useState=React.useState("open"===props.animate),isAnimatingOpenOnMount=_useState[0],setIsAnimatingOpenOnMount=_useState[1];React.useEffect((function(){return isAnimatingOpenOnMount?"open"!==animate?(tryClearAnimateOpenTimer(),setIsAnimatingOpenOnMount(!1),noop$2):animateOpenTimerRef.current?noop$2:(animateOpenTimerRef.current=setTimeout((function(){animateOpenTimerRef.current=null,setIsAnimatingOpenOnMount(!1)})),tryClearAnimateOpenTimer):noop$2}),[animate,isAnimatingOpenOnMount,tryClearAnimateOpenTimer]);var onSizeChangeEnd=useMemoOne.useCallback((function(event){"height"===event.propertyName&&(onTransitionEnd(),"close"===animate&&onClose())}),[animate,onClose,onTransitionEnd]),style=getStyle({isAnimatingOpenOnMount:isAnimatingOpenOnMount,animate:props.animate,placeholder:props.placeholder});return React__default.createElement(props.placeholder.tagName,{style:style,"data-rbd-placeholder-context-id":contextId,onTransitionEnd:onSizeChangeEnd,ref:props.innerRef})})),DroppableContext=React__default.createContext(null);var AnimateInOut=function(_React$PureComponent){function AnimateInOut(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_React$PureComponent.call.apply(_React$PureComponent,[this].concat(args))||this).state={isVisible:Boolean(_this.props.on),data:_this.props.on,animate:_this.props.shouldAnimate&&_this.props.on?"open":"none"},_this.onClose=function(){"close"===_this.state.animate&&_this.setState({isVisible:!1})},_this}return _inheritsLoose(AnimateInOut,_React$PureComponent),AnimateInOut.getDerivedStateFromProps=function(props,state){return props.shouldAnimate?props.on?{isVisible:!0,data:props.on,animate:"open"}:state.isVisible?{isVisible:!0,data:state.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(props.on),data:props.on,animate:"none"}},AnimateInOut.prototype.render=function(){if(!this.state.isVisible)return null;var provided={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(provided)},AnimateInOut}(React__default.PureComponent),zIndexOptions_dragging=5e3,zIndexOptions_dropAnimating=4500,getDraggingTransition=function(shouldAnimateDragMovement,dropping){return dropping?transitions.drop(dropping.duration):shouldAnimateDragMovement?transitions.snap:transitions.fluid},getDraggingOpacity=function(isCombining,isDropAnimating){return isCombining?isDropAnimating?combine_opacity.drop:combine_opacity.combining:null};function getStyle$1(mapped){return"DRAGGING"===mapped.type?(box=(dragging=mapped).dimension.client,offset=dragging.offset,combineWith=dragging.combineWith,dropping=dragging.dropping,isCombining=Boolean(combineWith),shouldAnimate=function(dragging){return null!=dragging.forceShouldAnimate?dragging.forceShouldAnimate:"SNAP"===dragging.mode}(dragging),isDropAnimating=Boolean(dropping),transform=isDropAnimating?transforms_drop(offset,isCombining):transforms_moveTo(offset),{position:"fixed",top:box.marginBox.top,left:box.marginBox.left,boxSizing:"border-box",width:box.borderBox.width,height:box.borderBox.height,transition:getDraggingTransition(shouldAnimate,dropping),transform:transform,opacity:getDraggingOpacity(isCombining,isDropAnimating),zIndex:isDropAnimating?zIndexOptions_dropAnimating:zIndexOptions_dragging,pointerEvents:"none"}):{transform:transforms_moveTo((secondary=mapped).offset),transition:secondary.shouldAnimateDisplacement?null:"none"};var secondary,dragging,box,offset,combineWith,dropping,isCombining,shouldAnimate,isDropAnimating,transform}function useDraggablePublisher(args){var uniqueId=useUniqueId("draggable"),descriptor=args.descriptor,registry=args.registry,getDraggableRef=args.getDraggableRef,canDragInteractiveElements=args.canDragInteractiveElements,shouldRespectForcePress=args.shouldRespectForcePress,isEnabled=args.isEnabled,options=useMemoOne.useMemo((function(){return{canDragInteractiveElements:canDragInteractiveElements,shouldRespectForcePress:shouldRespectForcePress,isEnabled:isEnabled}}),[canDragInteractiveElements,isEnabled,shouldRespectForcePress]),getDimension=useMemoOne.useCallback((function(windowScroll){var el=getDraggableRef();return el||invariant(!1),function(descriptor,el,windowScroll){void 0===windowScroll&&(windowScroll=origin);var computedStyles=window.getComputedStyle(el),borderBox=el.getBoundingClientRect(),client=cssBoxModel.calculateBox(borderBox,computedStyles),page=cssBoxModel.withScroll(client,windowScroll);return{descriptor:descriptor,placeholder:{client:client,tagName:el.tagName.toLowerCase(),display:computedStyles.display},displaceBy:{x:client.marginBox.width,y:client.marginBox.height},client:client,page:page}}(descriptor,el,windowScroll)}),[descriptor,getDraggableRef]),entry=useMemoOne.useMemo((function(){return{uniqueId:uniqueId,descriptor:descriptor,options:options,getDimension:getDimension}}),[descriptor,getDimension,options,uniqueId]),publishedRef=React.useRef(entry),isFirstPublishRef=React.useRef(!0);useIsomorphicLayoutEffect((function(){return registry.draggable.register(publishedRef.current),function(){return registry.draggable.unregister(publishedRef.current)}}),[registry.draggable]),useIsomorphicLayoutEffect((function(){if(isFirstPublishRef.current)isFirstPublishRef.current=!1;else{var last=publishedRef.current;publishedRef.current=entry,registry.draggable.update(entry,last)}}),[entry,registry.draggable])}function useValidation$1(props,contextId,getRef){useDevSetupWarning()}function preventHtml5Dnd(event){event.preventDefault()}var isStrictEqual=function(a,b){return a===b},whatIsDraggedOverFromResult=function(result){var combine=result.combine,destination=result.destination;return destination?destination.droppableId:combine?combine.droppableId:null};function getSecondarySnapshot(combineTargetFor){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:combineTargetFor,combineWith:null}}var atRest={mapped:{type:"SECONDARY",offset:origin,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:getSecondarySnapshot(null)}};var mapDispatchToProps={dropAnimationFinished:dropAnimationFinished},ConnectedDraggable=reactRedux.connect((function(){var memoizedOffset,getMemoizedSnapshot,getMemoizedProps,draggingSelector=(memoizedOffset=memoizeOne((function(x,y){return{x:x,y:y}})),getMemoizedSnapshot=memoizeOne((function(mode,isClone,draggingOver,combineWith,dropping){return{isDragging:!0,isClone:isClone,isDropAnimating:Boolean(dropping),dropAnimation:dropping,mode:mode,draggingOver:draggingOver,combineWith:combineWith,combineTargetFor:null}})),getMemoizedProps=memoizeOne((function(offset,mode,dimension,isClone,draggingOver,combineWith,forceShouldAnimate){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:draggingOver,combineWith:combineWith,mode:mode,offset:offset,dimension:dimension,forceShouldAnimate:forceShouldAnimate,snapshot:getMemoizedSnapshot(mode,isClone,draggingOver,combineWith,null)}}})),function(state,ownProps){if(state.isDragging){if(state.critical.draggable.id!==ownProps.draggableId)return null;var offset=state.current.client.offset,dimension=state.dimensions.draggables[ownProps.draggableId],draggingOver=whatIsDraggedOver(state.impact),combineWith=(impact=state.impact).at&&"COMBINE"===impact.at.type?impact.at.combine.draggableId:null,forceShouldAnimate=state.forceShouldAnimate;return getMemoizedProps(memoizedOffset(offset.x,offset.y),state.movementMode,dimension,ownProps.isClone,draggingOver,combineWith,forceShouldAnimate)}var impact;if("DROP_ANIMATING"===state.phase){var completed=state.completed;if(completed.result.draggableId!==ownProps.draggableId)return null;var isClone=ownProps.isClone,_dimension=state.dimensions.draggables[ownProps.draggableId],result=completed.result,mode=result.mode,_draggingOver=whatIsDraggedOverFromResult(result),_combineWith=function(result){return result.combine?result.combine.draggableId:null}(result),dropping={duration:state.dropDuration,curve:curves_drop,moveTo:state.newHomeClientOffset,opacity:_combineWith?combine_opacity.drop:null,scale:_combineWith?combine_scale.drop:null};return{mapped:{type:"DRAGGING",offset:state.newHomeClientOffset,dimension:_dimension,dropping:dropping,draggingOver:_draggingOver,combineWith:_combineWith,mode:mode,forceShouldAnimate:null,snapshot:getMemoizedSnapshot(mode,isClone,_draggingOver,_combineWith,dropping)}}}return null}),secondarySelector=function(){var memoizedOffset=memoizeOne((function(x,y){return{x:x,y:y}})),getMemoizedSnapshot=memoizeOne(getSecondarySnapshot),getMemoizedProps=memoizeOne((function(offset,combineTargetFor,shouldAnimateDisplacement){return void 0===combineTargetFor&&(combineTargetFor=null),{mapped:{type:"SECONDARY",offset:offset,combineTargetFor:combineTargetFor,shouldAnimateDisplacement:shouldAnimateDisplacement,snapshot:getMemoizedSnapshot(combineTargetFor)}}})),getFallback=function(combineTargetFor){return combineTargetFor?getMemoizedProps(origin,combineTargetFor,!0):null},getProps=function(ownId,draggingId,impact,afterCritical){var visualDisplacement=impact.displaced.visible[ownId],isAfterCriticalInVirtualList=Boolean(afterCritical.inVirtualList&&afterCritical.effected[ownId]),combine=tryGetCombine(impact),combineTargetFor=combine&&combine.draggableId===ownId?draggingId:null;if(!visualDisplacement){if(!isAfterCriticalInVirtualList)return getFallback(combineTargetFor);if(impact.displaced.invisible[ownId])return null;var change=negate(afterCritical.displacedBy.point),_offset=memoizedOffset(change.x,change.y);return getMemoizedProps(_offset,combineTargetFor,!0)}if(isAfterCriticalInVirtualList)return getFallback(combineTargetFor);var displaceBy=impact.displacedBy.point,offset=memoizedOffset(displaceBy.x,displaceBy.y);return getMemoizedProps(offset,combineTargetFor,visualDisplacement.shouldAnimate)};return function(state,ownProps){if(state.isDragging)return state.critical.draggable.id===ownProps.draggableId?null:getProps(ownProps.draggableId,state.critical.draggable.id,state.impact,state.afterCritical);if("DROP_ANIMATING"===state.phase){var completed=state.completed;return completed.result.draggableId===ownProps.draggableId?null:getProps(ownProps.draggableId,completed.result.draggableId,completed.impact,completed.afterCritical)}return null}}();return function(state,ownProps){return draggingSelector(state,ownProps)||secondarySelector(state,ownProps)||atRest}}),mapDispatchToProps,null,{context:StoreContext,pure:!0,areStatePropsEqual:isStrictEqual})((function(props){var ref=React.useRef(null),setRef=useMemoOne.useCallback((function(el){ref.current=el}),[]),getRef=useMemoOne.useCallback((function(){return ref.current}),[]),_useRequiredContext=useRequiredContext(AppContext),contextId=_useRequiredContext.contextId,dragHandleUsageInstructionsId=_useRequiredContext.dragHandleUsageInstructionsId,registry=_useRequiredContext.registry,_useRequiredContext2=useRequiredContext(DroppableContext),type=_useRequiredContext2.type,droppableId=_useRequiredContext2.droppableId,descriptor=useMemoOne.useMemo((function(){return{id:props.draggableId,index:props.index,type:type,droppableId:droppableId}}),[props.draggableId,props.index,type,droppableId]),children=props.children,draggableId=props.draggableId,isEnabled=props.isEnabled,shouldRespectForcePress=props.shouldRespectForcePress,canDragInteractiveElements=props.canDragInteractiveElements,isClone=props.isClone,mapped=props.mapped,dropAnimationFinishedAction=props.dropAnimationFinished;useValidation$1(),useDev(),isClone||useDraggablePublisher(useMemoOne.useMemo((function(){return{descriptor:descriptor,registry:registry,getDraggableRef:getRef,canDragInteractiveElements:canDragInteractiveElements,shouldRespectForcePress:shouldRespectForcePress,isEnabled:isEnabled}}),[descriptor,registry,getRef,canDragInteractiveElements,shouldRespectForcePress,isEnabled]));var dragHandleProps=useMemoOne.useMemo((function(){return isEnabled?{tabIndex:0,role:"button","aria-describedby":dragHandleUsageInstructionsId,"data-rbd-drag-handle-draggable-id":draggableId,"data-rbd-drag-handle-context-id":contextId,draggable:!1,onDragStart:preventHtml5Dnd}:null}),[contextId,dragHandleUsageInstructionsId,draggableId,isEnabled]),onMoveEnd=useMemoOne.useCallback((function(event){"DRAGGING"===mapped.type&&mapped.dropping&&"transform"===event.propertyName&&dropAnimationFinishedAction()}),[dropAnimationFinishedAction,mapped]),provided=useMemoOne.useMemo((function(){var style=getStyle$1(mapped),onTransitionEnd="DRAGGING"===mapped.type&&mapped.dropping?onMoveEnd:null;return{innerRef:setRef,draggableProps:{"data-rbd-draggable-context-id":contextId,"data-rbd-draggable-id":draggableId,style:style,onTransitionEnd:onTransitionEnd},dragHandleProps:dragHandleProps}}),[contextId,dragHandleProps,draggableId,mapped,onMoveEnd,setRef]),rubric=useMemoOne.useMemo((function(){return{draggableId:descriptor.id,type:descriptor.type,source:{index:descriptor.index,droppableId:descriptor.droppableId}}}),[descriptor.droppableId,descriptor.id,descriptor.index,descriptor.type]);return children(provided,mapped.snapshot,rubric)}));function PrivateDraggable(props){return useRequiredContext(DroppableContext).isUsingCloneFor!==props.draggableId||props.isClone?React__default.createElement(ConnectedDraggable,props):null}var isMatchingType=function(type,critical){return type===critical.droppable.type},getDraggable=function(critical,dimensions){return dimensions.draggables[critical.draggable.id]},mapDispatchToProps$1={updateViewportMaxScroll:function(args){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:args}}};var defaultProps={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||invariant(!1),document.body}},ConnectedDroppable=reactRedux.connect((function(){var idleWithAnimation={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},idleWithoutAnimation=_extends({},idleWithAnimation,{shouldAnimatePlaceholder:!1}),getDraggableRubric=memoizeOne((function(descriptor){return{draggableId:descriptor.id,type:descriptor.type,source:{index:descriptor.index,droppableId:descriptor.droppableId}}})),getMapProps=memoizeOne((function(id,isEnabled,isDraggingOverForConsumer,isDraggingOverForImpact,dragging,renderClone){var draggableId=dragging.descriptor.id;if(dragging.descriptor.droppableId===id){var useClone=renderClone?{render:renderClone,dragging:getDraggableRubric(dragging.descriptor)}:null,_snapshot={isDraggingOver:isDraggingOverForConsumer,draggingOverWith:isDraggingOverForConsumer?draggableId:null,draggingFromThisWith:draggableId,isUsingPlaceholder:!0};return{placeholder:dragging.placeholder,shouldAnimatePlaceholder:!1,snapshot:_snapshot,useClone:useClone}}if(!isEnabled)return idleWithoutAnimation;if(!isDraggingOverForImpact)return idleWithAnimation;var snapshot={isDraggingOver:isDraggingOverForConsumer,draggingOverWith:draggableId,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:dragging.placeholder,shouldAnimatePlaceholder:!0,snapshot:snapshot,useClone:null}}));return function(state,ownProps){var id=ownProps.droppableId,type=ownProps.type,isEnabled=!ownProps.isDropDisabled,renderClone=ownProps.renderClone;if(state.isDragging){var critical=state.critical;if(!isMatchingType(type,critical))return idleWithoutAnimation;var dragging=getDraggable(critical,state.dimensions),isDraggingOver=whatIsDraggedOver(state.impact)===id;return getMapProps(id,isEnabled,isDraggingOver,isDraggingOver,dragging,renderClone)}if("DROP_ANIMATING"===state.phase){var completed=state.completed;if(!isMatchingType(type,completed.critical))return idleWithoutAnimation;var _dragging=getDraggable(completed.critical,state.dimensions);return getMapProps(id,isEnabled,whatIsDraggedOverFromResult(completed.result)===id,whatIsDraggedOver(completed.impact)===id,_dragging,renderClone)}if("IDLE"===state.phase&&state.completed&&!state.shouldFlush){var _completed=state.completed;if(!isMatchingType(type,_completed.critical))return idleWithoutAnimation;var wasOver=whatIsDraggedOver(_completed.impact)===id,wasCombining=Boolean(_completed.impact.at&&"COMBINE"===_completed.impact.at.type),isHome=_completed.critical.droppable.id===id;return wasOver?wasCombining?idleWithAnimation:idleWithoutAnimation:isHome?idleWithAnimation:idleWithoutAnimation}return idleWithoutAnimation}}),mapDispatchToProps$1,null,{context:StoreContext,pure:!0,areStatePropsEqual:isStrictEqual})((function(props){var appContext=React.useContext(AppContext);appContext||invariant(!1);var contextId=appContext.contextId,isMovementAllowed=appContext.isMovementAllowed,droppableRef=React.useRef(null),placeholderRef=React.useRef(null),children=props.children,droppableId=props.droppableId,type=props.type,mode=props.mode,direction=props.direction,ignoreContainerClipping=props.ignoreContainerClipping,isDropDisabled=props.isDropDisabled,isCombineEnabled=props.isCombineEnabled,snapshot=props.snapshot,useClone=props.useClone,updateViewportMaxScroll=props.updateViewportMaxScroll,getContainerForClone=props.getContainerForClone,getDroppableRef=useMemoOne.useCallback((function(){return droppableRef.current}),[]),setDroppableRef=useMemoOne.useCallback((function(value){droppableRef.current=value}),[]),setPlaceholderRef=(useMemoOne.useCallback((function(){return placeholderRef.current}),[]),useMemoOne.useCallback((function(value){placeholderRef.current=value}),[]));useDevSetupWarning();var onPlaceholderTransitionEnd=useMemoOne.useCallback((function(){isMovementAllowed()&&updateViewportMaxScroll({maxScroll:getMaxWindowScroll()})}),[isMovementAllowed,updateViewportMaxScroll]);!function(args){var whileDraggingRef=React.useRef(null),appContext=useRequiredContext(AppContext),uniqueId=useUniqueId("droppable"),registry=appContext.registry,marshal=appContext.marshal,previousRef=usePrevious(args),descriptor=useMemoOne.useMemo((function(){return{id:args.droppableId,type:args.type,mode:args.mode}}),[args.droppableId,args.mode,args.type]),publishedDescriptorRef=React.useRef(descriptor),memoizedUpdateScroll=useMemoOne.useMemo((function(){return memoizeOne((function(x,y){whileDraggingRef.current||invariant(!1);var scroll={x:x,y:y};marshal.updateDroppableScroll(descriptor.id,scroll)}))}),[descriptor.id,marshal]),getClosestScroll=useMemoOne.useCallback((function(){var dragging=whileDraggingRef.current;return dragging&&dragging.env.closestScrollable?getScroll$1(dragging.env.closestScrollable):origin}),[]),updateScroll=useMemoOne.useCallback((function(){var scroll=getClosestScroll();memoizedUpdateScroll(scroll.x,scroll.y)}),[getClosestScroll,memoizedUpdateScroll]),scheduleScrollUpdate=useMemoOne.useMemo((function(){return rafSchd(updateScroll)}),[updateScroll]),onClosestScroll=useMemoOne.useCallback((function(){var dragging=whileDraggingRef.current,closest=getClosestScrollableFromDrag(dragging);dragging&&closest||invariant(!1),dragging.scrollOptions.shouldPublishImmediately?updateScroll():scheduleScrollUpdate()}),[scheduleScrollUpdate,updateScroll]),getDimensionAndWatchScroll=useMemoOne.useCallback((function(windowScroll,options){whileDraggingRef.current&&invariant(!1);var previous=previousRef.current,ref=previous.getDroppableRef();ref||invariant(!1);var env=getEnv(ref),dragging={ref:ref,descriptor:descriptor,env:env,scrollOptions:options};whileDraggingRef.current=dragging;var dimension=getDimension({ref:ref,descriptor:descriptor,env:env,windowScroll:windowScroll,direction:previous.direction,isDropDisabled:previous.isDropDisabled,isCombineEnabled:previous.isCombineEnabled,shouldClipSubject:!previous.ignoreContainerClipping}),scrollable=env.closestScrollable;return scrollable&&(scrollable.setAttribute(scrollContainer.contextId,appContext.contextId),scrollable.addEventListener("scroll",onClosestScroll,getListenerOptions(dragging.scrollOptions))),dimension}),[appContext.contextId,descriptor,onClosestScroll,previousRef]),getScrollWhileDragging=useMemoOne.useCallback((function(){var dragging=whileDraggingRef.current,closest=getClosestScrollableFromDrag(dragging);return dragging&&closest||invariant(!1),getScroll$1(closest)}),[]),dragStopped=useMemoOne.useCallback((function(){var dragging=whileDraggingRef.current;dragging||invariant(!1);var closest=getClosestScrollableFromDrag(dragging);whileDraggingRef.current=null,closest&&(scheduleScrollUpdate.cancel(),closest.removeAttribute(scrollContainer.contextId),closest.removeEventListener("scroll",onClosestScroll,getListenerOptions(dragging.scrollOptions)))}),[onClosestScroll,scheduleScrollUpdate]),scroll=useMemoOne.useCallback((function(change){var dragging=whileDraggingRef.current;dragging||invariant(!1);var closest=getClosestScrollableFromDrag(dragging);closest||invariant(!1),closest.scrollTop+=change.y,closest.scrollLeft+=change.x}),[]),callbacks=useMemoOne.useMemo((function(){return{getDimensionAndWatchScroll:getDimensionAndWatchScroll,getScrollWhileDragging:getScrollWhileDragging,dragStopped:dragStopped,scroll:scroll}}),[dragStopped,getDimensionAndWatchScroll,getScrollWhileDragging,scroll]),entry=useMemoOne.useMemo((function(){return{uniqueId:uniqueId,descriptor:descriptor,callbacks:callbacks}}),[callbacks,descriptor,uniqueId]);useIsomorphicLayoutEffect((function(){return publishedDescriptorRef.current=entry.descriptor,registry.droppable.register(entry),function(){whileDraggingRef.current&&dragStopped(),registry.droppable.unregister(entry)}}),[callbacks,descriptor,dragStopped,entry,marshal,registry.droppable]),useIsomorphicLayoutEffect((function(){whileDraggingRef.current&&marshal.updateDroppableIsEnabled(publishedDescriptorRef.current.id,!args.isDropDisabled)}),[args.isDropDisabled,marshal]),useIsomorphicLayoutEffect((function(){whileDraggingRef.current&&marshal.updateDroppableIsCombineEnabled(publishedDescriptorRef.current.id,args.isCombineEnabled)}),[args.isCombineEnabled,marshal])}({droppableId:droppableId,type:type,mode:mode,direction:direction,isDropDisabled:isDropDisabled,isCombineEnabled:isCombineEnabled,ignoreContainerClipping:ignoreContainerClipping,getDroppableRef:getDroppableRef});var placeholder=React__default.createElement(AnimateInOut,{on:props.placeholder,shouldAnimate:props.shouldAnimatePlaceholder},(function(_ref){var onClose=_ref.onClose,data=_ref.data,animate=_ref.animate;return React__default.createElement(Placeholder$1,{placeholder:data,onClose:onClose,innerRef:setPlaceholderRef,animate:animate,contextId:contextId,onTransitionEnd:onPlaceholderTransitionEnd})})),provided=useMemoOne.useMemo((function(){return{innerRef:setDroppableRef,placeholder:placeholder,droppableProps:{"data-rbd-droppable-id":droppableId,"data-rbd-droppable-context-id":contextId}}}),[contextId,droppableId,placeholder,setDroppableRef]),isUsingCloneFor=useClone?useClone.dragging.draggableId:null,droppableContext=useMemoOne.useMemo((function(){return{droppableId:droppableId,type:type,isUsingCloneFor:isUsingCloneFor}}),[droppableId,isUsingCloneFor,type]);return React__default.createElement(DroppableContext.Provider,{value:droppableContext},children(provided,snapshot),function(){if(!useClone)return null;var dragging=useClone.dragging,render=useClone.render,node=React__default.createElement(PrivateDraggable,{draggableId:dragging.draggableId,index:dragging.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(function(draggableProvided,draggableSnapshot){return render(draggableProvided,draggableSnapshot,dragging)}));return ReactDOM.createPortal(node,getContainerForClone())}())}));ConnectedDroppable.defaultProps=defaultProps,exports.DragDropContext=function(props){var contextId=useMemoOne.useMemo((function(){return""+count$1++}),[]),dragHandleUsageInstructions=props.dragHandleUsageInstructions||preset_dragHandleUsageInstructions;return React__default.createElement(ErrorBoundary,null,(function(setCallbacks){return React__default.createElement(App,{nonce:props.nonce,contextId:contextId,setCallbacks:setCallbacks,dragHandleUsageInstructions:dragHandleUsageInstructions,enableDefaultSensors:props.enableDefaultSensors,sensors:props.sensors,onBeforeCapture:props.onBeforeCapture,onBeforeDragStart:props.onBeforeDragStart,onDragStart:props.onDragStart,onDragUpdate:props.onDragUpdate,onDragEnd:props.onDragEnd},props.children)}))},exports.Draggable=function(props){var isEnabled="boolean"!=typeof props.isDragDisabled||!props.isDragDisabled,canDragInteractiveElements=Boolean(props.disableInteractiveElementBlocking),shouldRespectForcePress=Boolean(props.shouldRespectForcePress);return React__default.createElement(PrivateDraggable,_extends({},props,{isClone:!1,isEnabled:isEnabled,canDragInteractiveElements:canDragInteractiveElements,shouldRespectForcePress:shouldRespectForcePress}))},exports.Droppable=ConnectedDroppable,exports.resetServerContext=function(){count$1=0,count=0}},function(module,exports){module.exports=function(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,subClass.__proto__=superClass}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ex,$$observable=(ex=__webpack_require__(116))&&"object"==typeof ex&&"default"in ex?ex.default:ex,randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject(obj){if("object"!=typeof obj||null===obj)return!1;for(var proto=obj;null!==Object.getPrototypeOf(proto);)proto=Object.getPrototypeOf(proto);return Object.getPrototypeOf(obj)===proto}function getUndefinedStateErrorMessage(key,action){var actionType=action&&action.type;return"Given "+(actionType&&'action "'+String(actionType)+'"'||"an action")+', reducer "'+key+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function bindActionCreator(actionCreator,dispatch){return function(){return dispatch(actionCreator.apply(this,arguments))}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);return Object.getOwnPropertySymbols&&keys.push.apply(keys,Object.getOwnPropertySymbols(object)),enumerableOnly&&(keys=keys.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function compose(){for(var _len=arguments.length,funcs=new Array(_len),_key=0;_key<_len;_key++)funcs[_key]=arguments[_key];return 0===funcs.length?function(arg){return arg}:1===funcs.length?funcs[0]:funcs.reduce((function(a,b){return function(){return a(b.apply(void 0,arguments))}}))}exports.__DO_NOT_USE__ActionTypes=ActionTypes,exports.applyMiddleware=function(){for(var _len=arguments.length,middlewares=new Array(_len),_key=0;_key<_len;_key++)middlewares[_key]=arguments[_key];return function(createStore){return function(){var store=createStore.apply(void 0,arguments),_dispatch=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},middlewareAPI={getState:store.getState,dispatch:function(){return _dispatch.apply(void 0,arguments)}},chain=middlewares.map((function(middleware){return middleware(middlewareAPI)}));return _objectSpread2({},store,{dispatch:_dispatch=compose.apply(void 0,chain)(store.dispatch)})}}},exports.bindActionCreators=function(actionCreators,dispatch){if("function"==typeof actionCreators)return bindActionCreator(actionCreators,dispatch);if("object"!=typeof actionCreators||null===actionCreators)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===actionCreators?"null":typeof actionCreators)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var boundActionCreators={};for(var key in actionCreators){var actionCreator=actionCreators[key];"function"==typeof actionCreator&&(boundActionCreators[key]=bindActionCreator(actionCreator,dispatch))}return boundActionCreators},exports.combineReducers=function(reducers){for(var reducerKeys=Object.keys(reducers),finalReducers={},i=0;i<reducerKeys.length;i++){var key=reducerKeys[i];0,"function"==typeof reducers[key]&&(finalReducers[key]=reducers[key])}var shapeAssertionError,finalReducerKeys=Object.keys(finalReducers);try{!function(reducers){Object.keys(reducers).forEach((function(key){var reducer=reducers[key];if(void 0===reducer(void 0,{type:ActionTypes.INIT}))throw new Error('Reducer "'+key+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===reducer(void 0,{type:ActionTypes.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+key+"\" returned undefined when probed with a random type. Don't try to handle "+ActionTypes.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(finalReducers)}catch(e){shapeAssertionError=e}return function(state,action){if(void 0===state&&(state={}),shapeAssertionError)throw shapeAssertionError;for(var hasChanged=!1,nextState={},_i=0;_i<finalReducerKeys.length;_i++){var _key=finalReducerKeys[_i],reducer=finalReducers[_key],previousStateForKey=state[_key],nextStateForKey=reducer(previousStateForKey,action);if(void 0===nextStateForKey){var errorMessage=getUndefinedStateErrorMessage(_key,action);throw new Error(errorMessage)}nextState[_key]=nextStateForKey,hasChanged=hasChanged||nextStateForKey!==previousStateForKey}return hasChanged?nextState:state}},exports.compose=compose,exports.createStore=function createStore(reducer,preloadedState,enhancer){var _ref2;if("function"==typeof preloadedState&&"function"==typeof enhancer||"function"==typeof enhancer&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof preloadedState&&void 0===enhancer&&(enhancer=preloadedState,preloadedState=void 0),void 0!==enhancer){if("function"!=typeof enhancer)throw new Error("Expected the enhancer to be a function.");return enhancer(createStore)(reducer,preloadedState)}if("function"!=typeof reducer)throw new Error("Expected the reducer to be a function.");var currentReducer=reducer,currentState=preloadedState,currentListeners=[],nextListeners=currentListeners,isDispatching=!1;function ensureCanMutateNextListeners(){nextListeners===currentListeners&&(nextListeners=currentListeners.slice())}function getState(){if(isDispatching)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return currentState}function subscribe(listener){if("function"!=typeof listener)throw new Error("Expected the listener to be a function.");if(isDispatching)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var isSubscribed=!0;return ensureCanMutateNextListeners(),nextListeners.push(listener),function(){if(isSubscribed){if(isDispatching)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");isSubscribed=!1,ensureCanMutateNextListeners();var index=nextListeners.indexOf(listener);nextListeners.splice(index,1)}}}function dispatch(action){if(!isPlainObject(action))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===action.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(isDispatching)throw new Error("Reducers may not dispatch actions.");try{isDispatching=!0,currentState=currentReducer(currentState,action)}finally{isDispatching=!1}for(var listeners=currentListeners=nextListeners,i=0;i<listeners.length;i++){(0,listeners[i])()}return action}function replaceReducer(nextReducer){if("function"!=typeof nextReducer)throw new Error("Expected the nextReducer to be a function.");currentReducer=nextReducer,dispatch({type:ActionTypes.REPLACE})}function observable(){var _ref,outerSubscribe=subscribe;return(_ref={subscribe:function(observer){if("object"!=typeof observer||null===observer)throw new TypeError("Expected the observer to be an object.");function observeState(){observer.next&&observer.next(getState())}return observeState(),{unsubscribe:outerSubscribe(observeState)}}})[$$observable]=function(){return this},_ref}return dispatch({type:ActionTypes.INIT}),(_ref2={dispatch:dispatch,subscribe:subscribe,getState:getState,replaceReducer:replaceReducer})[$$observable]=observable,_ref2}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var react=__webpack_require__(3);function useMemoOne(getResult,inputs){var initial=react.useState((function(){return{inputs:inputs,result:getResult()}}))[0],committed=react.useRef(initial),cache=Boolean(inputs&&committed.current.inputs&&function(newInputs,lastInputs){if(newInputs.length!==lastInputs.length)return!1;for(var i=0;i<newInputs.length;i++)if(newInputs[i]!==lastInputs[i])return!1;return!0}(inputs,committed.current.inputs))?committed.current:{inputs:inputs,result:getResult()};return react.useEffect((function(){committed.current=cache}),[cache]),cache.result}function useCallbackOne(callback,inputs){return useMemoOne((function(){return callback}),inputs)}var useMemo=useMemoOne,useCallback=useCallbackOne;exports.useCallback=useCallback,exports.useCallbackOne=useCallbackOne,exports.useMemo=useMemo,exports.useMemoOne=useMemoOne},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ex,invariant=(ex=__webpack_require__(230))&&"object"==typeof ex&&"default"in ex?ex.default:ex,getRect=function(_ref){var top=_ref.top,right=_ref.right,bottom=_ref.bottom,left=_ref.left;return{top:top,right:right,bottom:bottom,left:left,width:right-left,height:bottom-top,x:left,y:top,center:{x:(right+left)/2,y:(bottom+top)/2}}},expand=function(target,expandBy){return{top:target.top-expandBy.top,left:target.left-expandBy.left,bottom:target.bottom+expandBy.bottom,right:target.right+expandBy.right}},shrink=function(target,shrinkBy){return{top:target.top+shrinkBy.top,left:target.left+shrinkBy.left,bottom:target.bottom-shrinkBy.bottom,right:target.right-shrinkBy.right}},noSpacing={top:0,right:0,bottom:0,left:0},createBox=function(_ref2){var borderBox=_ref2.borderBox,_ref2$margin=_ref2.margin,margin=void 0===_ref2$margin?noSpacing:_ref2$margin,_ref2$border=_ref2.border,border=void 0===_ref2$border?noSpacing:_ref2$border,_ref2$padding=_ref2.padding,padding=void 0===_ref2$padding?noSpacing:_ref2$padding,marginBox=getRect(expand(borderBox,margin)),paddingBox=getRect(shrink(borderBox,border)),contentBox=getRect(shrink(paddingBox,padding));return{marginBox:marginBox,borderBox:getRect(borderBox),paddingBox:paddingBox,contentBox:contentBox,margin:margin,border:border,padding:padding}},parse=function(raw){var value=raw.slice(0,-2);if("px"!==raw.slice(-2))return 0;var result=Number(value);return isNaN(result)&&invariant(!1),result},offset=function(original,change){var target,shiftBy,borderBox=original.borderBox,border=original.border,margin=original.margin,padding=original.padding,shifted=(shiftBy=change,{top:(target=borderBox).top+shiftBy.y,left:target.left+shiftBy.x,bottom:target.bottom+shiftBy.y,right:target.right+shiftBy.x});return createBox({borderBox:shifted,border:border,margin:margin,padding:padding})},calculateBox=function(borderBox,styles){var margin={top:parse(styles.marginTop),right:parse(styles.marginRight),bottom:parse(styles.marginBottom),left:parse(styles.marginLeft)},padding={top:parse(styles.paddingTop),right:parse(styles.paddingRight),bottom:parse(styles.paddingBottom),left:parse(styles.paddingLeft)},border={top:parse(styles.borderTopWidth),right:parse(styles.borderRightWidth),bottom:parse(styles.borderBottomWidth),left:parse(styles.borderLeftWidth)};return createBox({borderBox:borderBox,margin:margin,padding:padding,border:border})};exports.calculateBox=calculateBox,exports.createBox=createBox,exports.expand=expand,exports.getBox=function(el){var borderBox=el.getBoundingClientRect(),styles=window.getComputedStyle(el);return calculateBox(borderBox,styles)},exports.getRect=getRect,exports.offset=offset,exports.shrink=shrink,exports.withScroll=function(original,scroll){return void 0===scroll&&(scroll={x:window.pageXOffset,y:window.pageYOffset}),offset(original,scroll)}},function(module,exports,__webpack_require__){"use strict";function areInputsEqual(newInputs,lastInputs){if(newInputs.length!==lastInputs.length)return!1;for(var i=0;i<newInputs.length;i++)if(newInputs[i]!==lastInputs[i])return!1;return!0}module.exports=function(resultFn,isEqual){var lastThis;void 0===isEqual&&(isEqual=areInputsEqual);var lastResult,lastArgs=[],calledOnce=!1;return function(){for(var newArgs=[],_i=0;_i<arguments.length;_i++)newArgs[_i]=arguments[_i];return calledOnce&&lastThis===this&&isEqual(newArgs,lastArgs)||(lastResult=resultFn.apply(this,newArgs),calledOnce=!0,lastThis=this,lastArgs=newArgs),lastResult}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(fn){var lastArgs=[],frameId=null,wrapperFn=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];lastArgs=args,frameId||(frameId=requestAnimationFrame((function(){frameId=null,fn.apply(void 0,lastArgs)})))};return wrapperFn.cancel=function(){frameId&&(cancelAnimationFrame(frameId),frameId=null)},wrapperFn}},function(module,exports,__webpack_require__){"use strict";(function(process){Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_justReduceObject2=_interopRequireDefault(__webpack_require__(328)),_invariant2=_interopRequireDefault(__webpack_require__(183)),_events=__webpack_require__(329),_helpers2=_interopRequireDefault(__webpack_require__(233)),_utils=__webpack_require__(331);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}var ShortcutManager=function(_EventEmitter){function ShortcutManager(){var keymap=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,ShortcutManager);var _this=_possibleConstructorReturn(this,(ShortcutManager.__proto__||Object.getPrototypeOf(ShortcutManager)).call(this));return _this._platformName=_helpers2.default.getPlatformName(),_this._parseShortcutDescriptor=function(item){return(0,_utils.isPlainObject)(item)?item[_this._platformName]:item},_this._keymap=keymap,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ShortcutManager,_EventEmitter),_createClass(ShortcutManager,[{key:"addUpdateListener",value:function(callback){(0,_invariant2.default)(callback,"addUpdateListener: callback argument is not defined or falsy"),this.on(ShortcutManager.CHANGE_EVENT,callback)}},{key:"removeUpdateListener",value:function(callback){this.removeListener(ShortcutManager.CHANGE_EVENT,callback)}},{key:"setKeymap",value:function(keymap){(0,_invariant2.default)(keymap,"setKeymap: keymap argument is not defined or falsy."),this._keymap=keymap,this.emit(ShortcutManager.CHANGE_EVENT)}},{key:"extendKeymap",value:function(keymap){(0,_invariant2.default)(keymap,"extendKeymap: keymap argument is not defined or falsy."),this._keymap=Object.assign({},this._keymap,keymap),this.emit(ShortcutManager.CHANGE_EVENT)}},{key:"getAllShortcuts",value:function(){return this._keymap}},{key:"getAllShortcutsForPlatform",value:function(platformName){return function _transformShortcuts(shortcuts){return(0,_justReduceObject2.default)(shortcuts,(function(result,keyName,keyValue){if((0,_utils.isPlainObject)(keyValue)){if(!keyValue[platformName])return result[keyName]=_transformShortcuts(keyValue),result;keyValue=keyValue[platformName]}return result[keyName]=keyValue,result}),{})}(this._keymap)}},{key:"getAllShortcutsForCurrentPlatform",value:function(){return this.getAllShortcutsForPlatform(this._platformName)}},{key:"getShortcuts",value:function(componentName){(0,_invariant2.default)(componentName,"getShortcuts: name argument is not defined or falsy.");var cursor=this._keymap[componentName];if(cursor)return(0,_utils.compact)((0,_utils.flatten)((0,_utils.map)(cursor,this._parseShortcutDescriptor)))}},{key:"_parseShortcutKeyName",value:function(obj,keyName){var _this2=this;return(0,_utils.findKey)(obj,(function(item){if((0,_utils.isPlainObject)(item)&&(item=item[_this2._platformName]),(0,_utils.isArray)(item)){var index=item.indexOf(keyName);index>=0&&(item=item[index])}return item===keyName}))}},{key:"findShortcutName",value:function(keyName,componentName){(0,_invariant2.default)(keyName,"findShortcutName: keyName argument is not defined or falsy."),(0,_invariant2.default)(componentName,"findShortcutName: componentName argument is not defined or falsy.");var cursor=this._keymap[componentName];return this._parseShortcutKeyName(cursor,keyName)}}]),ShortcutManager}(_events.EventEmitter);ShortcutManager.CHANGE_EVENT="shortcuts:update",exports.default=ShortcutManager,module.exports=exports.default}).call(this,__webpack_require__(117))},function(module,exports){module.exports=function(obj,predicate){var args=[callback],hasInitialValue=2 in arguments;function callback(previousValue,currentKey,currentIndex,array){return hasInitialValue||(previousValue=obj[array[0]],hasInitialValue=!0),predicate(previousValue,currentKey,obj[currentKey],currentIndex,array)}return hasInitialValue&&args.push(arguments[2]),Array.prototype.reduce.apply(Object.keys(obj),args)}},function(module,exports,__webpack_require__){"use strict";var ReflectOwnKeys,R="object"==typeof Reflect?Reflect:null,ReflectApply=R&&"function"==typeof R.apply?R.apply:function(target,receiver,args){return Function.prototype.apply.call(target,receiver,args)};ReflectOwnKeys=R&&"function"==typeof R.ownKeys?R.ownKeys:Object.getOwnPropertySymbols?function(target){return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))}:function(target){return Object.getOwnPropertyNames(target)};var NumberIsNaN=Number.isNaN||function(value){return value!=value};function EventEmitter(){EventEmitter.init.call(this)}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function $getMaxListeners(that){return void 0===that._maxListeners?EventEmitter.defaultMaxListeners:that._maxListeners}function _addListener(target,type,listener,prepend){var m,events,existing,warning;if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener);if(void 0===(events=target._events)?(events=target._events=Object.create(null),target._eventsCount=0):(void 0!==events.newListener&&(target.emit("newListener",type,listener.listener?listener.listener:listener),events=target._events),existing=events[type]),void 0===existing)existing=events[type]=listener,++target._eventsCount;else if("function"==typeof existing?existing=events[type]=prepend?[listener,existing]:[existing,listener]:prepend?existing.unshift(listener):existing.push(listener),(m=$getMaxListeners(target))>0&&existing.length>m&&!existing.warned){existing.warned=!0;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+" "+String(type)+" listeners added. Use emitter.setMaxListeners() to increase limit");w.name="MaxListenersExceededWarning",w.emitter=target,w.type=type,w.count=existing.length,warning=w,console&&console.warn&&console.warn(warning)}return target}function onceWrapper(){for(var args=[],i=0;i<arguments.length;i++)args.push(arguments[i]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,ReflectApply(this.listener,this.target,args))}function _onceWrap(target,type,listener){var state={fired:!1,wrapFn:void 0,target:target,type:type,listener:listener},wrapped=onceWrapper.bind(state);return wrapped.listener=listener,state.wrapFn=wrapped,wrapped}function _listeners(target,type,unwrap){var events=target._events;if(void 0===events)return[];var evlistener=events[type];return void 0===evlistener?[]:"function"==typeof evlistener?unwrap?[evlistener.listener||evlistener]:[evlistener]:unwrap?function(arr){for(var ret=new Array(arr.length),i=0;i<ret.length;++i)ret[i]=arr[i].listener||arr[i];return ret}(evlistener):arrayClone(evlistener,evlistener.length)}function listenerCount(type){var events=this._events;if(void 0!==events){var evlistener=events[type];if("function"==typeof evlistener)return 1;if(void 0!==evlistener)return evlistener.length}return 0}function arrayClone(arr,n){for(var copy=new Array(n),i=0;i<n;++i)copy[i]=arr[i];return copy}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(arg){if("number"!=typeof arg||arg<0||NumberIsNaN(arg))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+arg+".");defaultMaxListeners=arg}}),EventEmitter.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function(n){if("number"!=typeof n||n<0||NumberIsNaN(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this},EventEmitter.prototype.getMaxListeners=function(){return $getMaxListeners(this)},EventEmitter.prototype.emit=function(type){for(var args=[],i=1;i<arguments.length;i++)args.push(arguments[i]);var doError="error"===type,events=this._events;if(void 0!==events)doError=doError&&void 0===events.error;else if(!doError)return!1;if(doError){var er;if(args.length>0&&(er=args[0]),er instanceof Error)throw er;var err=new Error("Unhandled error."+(er?" ("+er.message+")":""));throw err.context=er,err}var handler=events[type];if(void 0===handler)return!1;if("function"==typeof handler)ReflectApply(handler,this,args);else{var len=handler.length,listeners=arrayClone(handler,len);for(i=0;i<len;++i)ReflectApply(listeners[i],this,args)}return!0},EventEmitter.prototype.addListener=function(type,listener){return _addListener(this,type,listener,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(type,listener){return _addListener(this,type,listener,!0)},EventEmitter.prototype.once=function(type,listener){if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener);return this.on(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.prependOnceListener=function(type,listener){if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener);return this.prependListener(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.removeListener=function(type,listener){var list,events,position,i,originalListener;if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener);if(void 0===(events=this._events))return this;if(void 0===(list=events[type]))return this;if(list===listener||list.listener===listener)0==--this._eventsCount?this._events=Object.create(null):(delete events[type],events.removeListener&&this.emit("removeListener",type,list.listener||listener));else if("function"!=typeof list){for(position=-1,i=list.length-1;i>=0;i--)if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener,position=i;break}if(position<0)return this;0===position?list.shift():function(list,index){for(;index+1<list.length;index++)list[index]=list[index+1];list.pop()}(list,position),1===list.length&&(events[type]=list[0]),void 0!==events.removeListener&&this.emit("removeListener",type,originalListener||listener)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function(type){var listeners,events,i;if(void 0===(events=this._events))return this;if(void 0===events.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==events[type]&&(0==--this._eventsCount?this._events=Object.create(null):delete events[type]),this;if(0===arguments.length){var key,keys=Object.keys(events);for(i=0;i<keys.length;++i)"removeListener"!==(key=keys[i])&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(listeners=events[type]))this.removeListener(type,listeners);else if(void 0!==listeners)for(i=listeners.length-1;i>=0;i--)this.removeListener(type,listeners[i]);return this},EventEmitter.prototype.listeners=function(type){return _listeners(this,type,!0)},EventEmitter.prototype.rawListeners=function(type){return _listeners(this,type,!1)},EventEmitter.listenerCount=function(emitter,type){return"function"==typeof emitter.listenerCount?emitter.listenerCount(type):listenerCount.call(emitter,type)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]}},function(module,exports,__webpack_require__){(function(module,global){var __WEBPACK_AMD_DEFINE_RESULT__;
/*!
 * Platform.js <https://mths.be/platform>
 * Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>
 * Copyright 2011-2013 John-David Dalton <http://allyoucanleet.com/>
 * Available under MIT license <https://mths.be/mit>
 */(function(){"use strict";var objectTypes={function:!0,object:!0},root=objectTypes[typeof window]&&window||this,freeExports=objectTypes[typeof exports]&&exports,freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module,freeGlobal=freeExports&&freeModule&&"object"==typeof global&&global;!freeGlobal||freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal&&freeGlobal.self!==freeGlobal||(root=freeGlobal);var maxSafeInteger=Math.pow(2,53)-1,reOpera=/\bOpera/,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,toString=objectProto.toString;function capitalize(string){return(string=String(string)).charAt(0).toUpperCase()+string.slice(1)}function format(string){return string=trim(string),/^(?:webOS|i(?:OS|P))/.test(string)?string:capitalize(string)}function forOwn(object,callback){for(var key in object)hasOwnProperty.call(object,key)&&callback(object[key],key,object)}function getClassOf(value){return null==value?capitalize(value):toString.call(value).slice(8,-1)}function qualify(string){return String(string).replace(/([ -])(?!$)/g,"$1?")}function reduce(array,callback){var accumulator=null;return function(object,callback){var index=-1,length=object?object.length:0;if("number"==typeof length&&length>-1&&length<=maxSafeInteger)for(;++index<length;)callback(object[index],index,object);else forOwn(object,callback)}(array,(function(value,index){accumulator=callback(accumulator,value,index,array)})),accumulator}function trim(string){return String(string).replace(/^ +| +$/g,"")}var platform=function parse(ua){var context=root,isCustomContext=ua&&"object"==typeof ua&&"String"!=getClassOf(ua);isCustomContext&&(context=ua,ua=null);var nav=context.navigator||{},userAgent=nav.userAgent||"";ua||(ua=userAgent);var data,isSpecialCasedOS,object,property,type,likeChrome=isCustomContext?!!nav.likeChrome:/\bChrome\b/.test(ua)&&!/internal|\n/i.test(toString.toString()),airRuntimeClass=isCustomContext?"Object":"ScriptBridgingProxyObject",enviroClass=isCustomContext?"Object":"Environment",javaClass=isCustomContext&&context.java?"JavaPackage":getClassOf(context.java),phantomClass=isCustomContext?"Object":"RuntimeObject",java=/\bJava/.test(javaClass)&&context.java,rhino=java&&getClassOf(context.environment)==enviroClass,alpha=java?"a":"α",beta=java?"b":"β",doc=context.document||{},opera=context.operamini||context.opera,operaClass=reOpera.test(operaClass=isCustomContext&&opera?opera["[[Class]]"]:getClassOf(opera))?operaClass:opera=null,arch=ua,description=[],prerelease=null,useFeatures=ua==userAgent,version=useFeatures&&opera&&"function"==typeof opera.version&&opera.version(),layout=reduce([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(result,guess){return result||RegExp("\\b"+(guess.pattern||qualify(guess))+"\\b","i").exec(ua)&&(guess.label||guess)})),name=function(guesses){return reduce(guesses,(function(result,guess){return result||RegExp("\\b"+(guess.pattern||qualify(guess))+"\\b","i").exec(ua)&&(guess.label||guess)}))}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),product=getProduct([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),manufacturer=function(guesses){return reduce(guesses,(function(result,value,key){return result||(value[product]||value[/^[a-z]+(?: +[a-z]+\b)*/i.exec(product)]||RegExp("\\b"+qualify(key)+"(?:\\b|\\w*\\d)","i").exec(ua))&&key}))}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),os=function(guesses){return reduce(guesses,(function(result,guess){var pattern=guess.pattern||qualify(guess);return!result&&(result=RegExp("\\b"+pattern+"(?:/[\\d.]+|[ \\w.]*)","i").exec(ua))&&(result=function(os,pattern,label){var data={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return pattern&&label&&/^Win/i.test(os)&&!/^Windows Phone /i.test(os)&&(data=data[/[\d.]+$/.exec(os)])&&(os="Windows "+data),os=String(os),pattern&&label&&(os=os.replace(RegExp(pattern,"i"),label)),os=format(os.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(result,pattern,guess.label||guess)),result}))}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function getProduct(guesses){return reduce(guesses,(function(result,guess){var pattern=guess.pattern||qualify(guess);return!result&&(result=RegExp("\\b"+pattern+" *\\d+[.\\w_]*","i").exec(ua)||RegExp("\\b"+pattern+" *\\w+-[\\w]*","i").exec(ua)||RegExp("\\b"+pattern+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(ua))&&((result=String(guess.label&&!RegExp(pattern,"i").test(guess.label)?guess.label:result).split("/"))[1]&&!/[\d.]+/.test(result[0])&&(result[0]+=" "+result[1]),guess=guess.label||guess,result=format(result[0].replace(RegExp(pattern,"i"),guess).replace(RegExp("; *(?:"+guess+"[_-])?","i")," ").replace(RegExp("("+guess+")[-_.]?(\\w)","i"),"$1 $2"))),result}))}if(layout&&(layout=[layout]),manufacturer&&!product&&(product=getProduct([manufacturer])),(data=/\bGoogle TV\b/.exec(product))&&(product=data[0]),/\bSimulator\b/i.test(ua)&&(product=(product?product+" ":"")+"Simulator"),"Opera Mini"==name&&/\bOPiOS\b/.test(ua)&&description.push("running in Turbo/Uncompressed mode"),"IE"==name&&/\blike iPhone OS\b/.test(ua)?(manufacturer=(data=parse(ua.replace(/like iPhone OS/,""))).manufacturer,product=data.product):/^iP/.test(product)?(name||(name="Safari"),os="iOS"+((data=/ OS ([\d_]+)/i.exec(ua))?" "+data[1].replace(/_/g,"."):"")):"Konqueror"!=name||/buntu/i.test(os)?manufacturer&&"Google"!=manufacturer&&(/Chrome/.test(name)&&!/\bMobile Safari\b/i.test(ua)||/\bVita\b/.test(product))||/\bAndroid\b/.test(os)&&/^Chrome/.test(name)&&/\bVersion\//i.test(ua)?(name="Android Browser",os=/\bAndroid\b/.test(os)?os:"Android"):"Silk"==name?(/\bMobi/i.test(ua)||(os="Android",description.unshift("desktop mode")),/Accelerated *= *true/i.test(ua)&&description.unshift("accelerated")):"PaleMoon"==name&&(data=/\bFirefox\/([\d.]+)\b/.exec(ua))?description.push("identifying as Firefox "+data[1]):"Firefox"==name&&(data=/\b(Mobile|Tablet|TV)\b/i.exec(ua))?(os||(os="Firefox OS"),product||(product=data[1])):!name||(data=!/\bMinefield\b/i.test(ua)&&/\b(?:Firefox|Safari)\b/.exec(name))?(name&&!product&&/[\/,]|^[^(]+?\)/.test(ua.slice(ua.indexOf(data+"/")+8))&&(name=null),(data=product||manufacturer||os)&&(product||manufacturer||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(os))&&(name=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(os)?os:data)+" Browser")):"Electron"==name&&(data=(/\bChrome\/([\d.]+)\b/.exec(ua)||0)[1])&&description.push("Chromium "+data):os="Kubuntu",version||(version=reduce(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",qualify(name),"(?:Firefox|Minefield|NetFront)"],(function(result,pattern){return result||(RegExp(pattern+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(ua)||0)[1]||null}))),(data=("iCab"==layout&&parseFloat(version)>3?"WebKit":/\bOpera\b/.test(name)&&(/\bOPR\b/.test(ua)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(ua)&&!/^(?:Trident|EdgeHTML)$/.test(layout)&&"WebKit"||!layout&&/\bMSIE\b/i.test(ua)&&("Mac OS"==os?"Tasman":"Trident")||"WebKit"==layout&&/\bPlayStation\b(?! Vita\b)/i.test(name)&&"NetFront")&&(layout=[data]),"IE"==name&&(data=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(ua)||0)[1])?(name+=" Mobile",os="Windows Phone "+(/\+$/.test(data)?data:data+".x"),description.unshift("desktop mode")):/\bWPDesktop\b/i.test(ua)?(name="IE Mobile",os="Windows Phone 8.x",description.unshift("desktop mode"),version||(version=(/\brv:([\d.]+)/.exec(ua)||0)[1])):"IE"!=name&&"Trident"==layout&&(data=/\brv:([\d.]+)/.exec(ua))&&(name&&description.push("identifying as "+name+(version?" "+version:"")),name="IE",version=data[1]),useFeatures){if(property="global",type=null!=(object=context)?typeof object[property]:"number",/^(?:boolean|number|string|undefined)$/.test(type)||"object"==type&&!object[property])getClassOf(data=context.runtime)==airRuntimeClass?(name="Adobe AIR",os=data.flash.system.Capabilities.os):getClassOf(data=context.phantom)==phantomClass?(name="PhantomJS",version=(data=data.version||null)&&data.major+"."+data.minor+"."+data.patch):"number"==typeof doc.documentMode&&(data=/\bTrident\/(\d+)/i.exec(ua))?(version=[version,doc.documentMode],(data=+data[1]+4)!=version[1]&&(description.push("IE "+version[1]+" mode"),layout&&(layout[1]=""),version[1]=data),version="IE"==name?String(version[1].toFixed(1)):version[0]):"number"==typeof doc.documentMode&&/^(?:Chrome|Firefox)\b/.test(name)&&(description.push("masking as "+name+" "+version),name="IE",version="11.0",layout=["Trident"],os="Windows");else if(java&&(arch=(data=java.lang.System).getProperty("os.arch"),os=os||data.getProperty("os.name")+" "+data.getProperty("os.version")),rhino){try{version=context.require("ringo/engine").version.join("."),name="RingoJS"}catch(e){(data=context.system)&&data.global.system==context.system&&(name="Narwhal",os||(os=data[0].os||null))}name||(name="Rhino")}else"object"==typeof context.process&&!context.process.browser&&(data=context.process)&&("object"==typeof data.versions&&("string"==typeof data.versions.electron?(description.push("Node "+data.versions.node),name="Electron",version=data.versions.electron):"string"==typeof data.versions.nw&&(description.push("Chromium "+version,"Node "+data.versions.node),name="NW.js",version=data.versions.nw)),name||(name="Node.js",arch=data.arch,os=data.platform,version=(version=/[\d.]+/.exec(data.version))?version[0]:null));os=os&&format(os)}if(version&&(data=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(version)||/(?:alpha|beta)(?: ?\d)?/i.exec(ua+";"+(useFeatures&&nav.appMinorVersion))||/\bMinefield\b/i.test(ua)&&"a")&&(prerelease=/b/i.test(data)?"beta":"alpha",version=version.replace(RegExp(data+"\\+?$"),"")+("beta"==prerelease?beta:alpha)+(/\d+\+?/.exec(data)||"")),"Fennec"==name||"Firefox"==name&&/\b(?:Android|Firefox OS)\b/.test(os))name="Firefox Mobile";else if("Maxthon"==name&&version)version=version.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(product))"Xbox 360"==product&&(os=null),"Xbox 360"==product&&/\bIEMobile\b/.test(ua)&&description.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(name)&&(!name||product||/Browser|Mobi/.test(name))||"Windows CE"!=os&&!/Mobi/i.test(ua))if("IE"==name&&useFeatures)try{null===context.external&&description.unshift("platform preview")}catch(e){description.unshift("embedded")}else(/\bBlackBerry\b/.test(product)||/\bBB10\b/.test(ua))&&(data=(RegExp(product.replace(/ +/g," *")+"/([.\\d]+)","i").exec(ua)||0)[1]||version)?(os=((data=[data,/BB10/.test(ua)])[1]?(product=null,manufacturer="BlackBerry"):"Device Software")+" "+data[0],version=null):this!=forOwn&&"Wii"!=product&&(useFeatures&&opera||/Opera/.test(name)&&/\b(?:MSIE|Firefox)\b/i.test(ua)||"Firefox"==name&&/\bOS X (?:\d+\.){2,}/.test(os)||"IE"==name&&(os&&!/^Win/.test(os)&&version>5.5||/\bWindows XP\b/.test(os)&&version>8||8==version&&!/\bTrident\b/.test(ua)))&&!reOpera.test(data=parse.call(forOwn,ua.replace(reOpera,"")+";"))&&data.name&&(data="ing as "+data.name+((data=data.version)?" "+data:""),reOpera.test(name)?(/\bIE\b/.test(data)&&"Mac OS"==os&&(os=null),data="identify"+data):(data="mask"+data,name=operaClass?format(operaClass.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(data)&&(os=null),useFeatures||(version=null)),layout=["Presto"],description.push(data));else name+=" Mobile";(data=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(ua)||0)[1])&&(data=[parseFloat(data.replace(/\.(\d)$/,".0$1")),data],"Safari"==name&&"+"==data[1].slice(-1)?(name="WebKit Nightly",prerelease="alpha",version=data[1].slice(0,-1)):version!=data[1]&&version!=(data[2]=(/\bSafari\/([\d.]+\+?)/i.exec(ua)||0)[1])||(version=null),data[1]=(/\bChrome\/([\d.]+)/i.exec(ua)||0)[1],537.36==data[0]&&537.36==data[2]&&parseFloat(data[1])>=28&&"WebKit"==layout&&(layout=["Blink"]),useFeatures&&(likeChrome||data[1])?(layout&&(layout[1]="like Chrome"),data=data[1]||((data=data[0])<530?1:data<532?2:data<532.05?3:data<533?4:data<534.03?5:data<534.07?6:data<534.1?7:data<534.13?8:data<534.16?9:data<534.24?10:data<534.3?11:data<535.01?12:data<535.02?"13+":data<535.07?15:data<535.11?16:data<535.19?17:data<536.05?18:data<536.1?19:data<537.01?20:data<537.11?"21+":data<537.13?23:data<537.18?24:data<537.24?25:data<537.36?26:"Blink"!=layout?"27":"28")):(layout&&(layout[1]="like Safari"),data=(data=data[0])<400?1:data<500?2:data<526?3:data<533?4:data<534?"4+":data<535?5:data<537?6:data<538?7:data<601?8:"8"),layout&&(layout[1]+=" "+(data+="number"==typeof data?".x":/[.+]/.test(data)?"":"+")),"Safari"==name&&(!version||parseInt(version)>45)&&(version=data)),"Opera"==name&&(data=/\bzbov|zvav$/.exec(os))?(name+=" ",description.unshift("desktop mode"),"zvav"==data?(name+="Mini",version=null):name+="Mobile",os=os.replace(RegExp(" *"+data+"$"),"")):"Safari"==name&&/\bChrome\b/.exec(layout&&layout[1])&&(description.unshift("desktop mode"),name="Chrome Mobile",version=null,/\bOS X\b/.test(os)?(manufacturer="Apple",os="iOS 4.3+"):os=null),version&&0==version.indexOf(data=/[\d.]+$/.exec(os))&&ua.indexOf("/"+data+"-")>-1&&(os=trim(os.replace(data,""))),layout&&!/\b(?:Avant|Nook)\b/.test(name)&&(/Browser|Lunascape|Maxthon/.test(name)||"Safari"!=name&&/^iOS/.test(os)&&/\bSafari\b/.test(layout[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(name)&&layout[1])&&(data=layout[layout.length-1])&&description.push(data),description.length&&(description=["("+description.join("; ")+")"]),manufacturer&&product&&product.indexOf(manufacturer)<0&&description.push("on "+manufacturer),product&&description.push((/^on /.test(description[description.length-1])?"":"on ")+product),os&&(data=/ ([\d.+]+)$/.exec(os),isSpecialCasedOS=data&&"/"==os.charAt(os.length-data[0].length-1),os={architecture:32,family:data&&!isSpecialCasedOS?os.replace(data[0],""):os,version:data?data[1]:null,toString:function(){var version=this.version;return this.family+(version&&!isSpecialCasedOS?" "+version:"")+(64==this.architecture?" 64-bit":"")}}),(data=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(arch))&&!/\bi686\b/i.test(arch)?(os&&(os.architecture=64,os.family=os.family.replace(RegExp(" *"+data),"")),name&&(/\bWOW64\b/i.test(ua)||useFeatures&&/\w(?:86|32)$/.test(nav.cpuClass||nav.platform)&&!/\bWin64; x64\b/i.test(ua))&&description.unshift("32-bit")):os&&/^OS X/.test(os.family)&&"Chrome"==name&&parseFloat(version)>=39&&(os.architecture=64),ua||(ua=null);var platform={};return platform.description=ua,platform.layout=layout&&layout[0],platform.manufacturer=manufacturer,platform.name=name,platform.prerelease=prerelease,platform.product=product,platform.ua=ua,platform.version=name&&version,platform.os=os||{architecture:null,family:null,version:null,toString:function(){return"null"}},platform.parse=parse,platform.toString=function(){return this.description||""},platform.version&&description.unshift(version),platform.name&&description.unshift(name),os&&name&&(os!=String(os).split(" ")[0]||os!=name.split(" ")[0]&&!product)&&description.push(product?"("+os+")":"on "+os),description.length&&(platform.description=description.join(" ")),platform}();root.platform=platform,void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return platform}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}).call(this)}).call(this,__webpack_require__(49)(module),__webpack_require__(55))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},isArray=exports.isArray=function(arr){return Array.isArray(arr)},isPlainObject=exports.isPlainObject=function(obj){if(!("object"===(void 0===obj?"undefined":_typeof(obj))&&null!==obj&&!isArray(obj))||obj.toString&&"[object Object]"!==obj.toString())return!1;var proto=Object.getPrototypeOf(obj);if(null===proto)return!0;var Ctor=Object.prototype.hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&Function.prototype.toString.call(Ctor)===Function.prototype.toString.call(Object)};exports.findKey=function(obj,fn){if(isPlainObject(obj)||isArray(obj))return Object.keys(obj).find((function(key){return fn(obj[key])}))},exports.compact=function(arr){return arr.filter(Boolean)},exports.flatten=function(arr){if(!isArray(arr))throw new Error("flatten expects an array");return function flattenOnce(arr){var recurse=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return arr.reduce((function(acc,val){return isArray(val)&&recurse?acc.concat(flattenOnce(val,!1)):(acc.push(val),acc)}),[])}(arr)},exports.map=function(itr,fn){if(isArray(itr))return itr.map(fn);for(var results=[],keys=Object.keys(itr),len=keys.length,i=0;i<len;i+=1){var key=keys[i];results.push(fn(itr[key],key))}return results}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(333)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react2=_interopRequireDefault(__webpack_require__(3)),_invariant2=_interopRequireDefault(__webpack_require__(183)),_combokeys2=_interopRequireDefault(__webpack_require__(334)),_propTypes2=_interopRequireDefault(__webpack_require__(176)),_helpers2=_interopRequireDefault(__webpack_require__(233));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}var _class=function(_React$Component){function _class(){var _ref,_temp,_this;_classCallCheck(this,_class);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=_class.__proto__||Object.getPrototypeOf(_class)).call.apply(_ref,[this].concat(args))),_this._combokeys=null,_this._lastEvent=null,_this._bindShortcuts=function(shortcutsArr){var element=_this._getElementToBind();element.setAttribute("tabindex",_this.props.tabIndex),_this._combokeys=new _combokeys2.default(element,{storeInstancesGlobally:!1}),_this._decorateCombokeys(),_this._combokeys.bind(shortcutsArr,_this._handleShortcuts,_this.props.eventType),_this.props.global&&element.addEventListener("shortcuts:global",_this._customGlobalHandler)},_this._customGlobalHandler=function(e){var _e$detail=e.detail,character=_e$detail.character,modifiers=_e$detail.modifiers,event=_e$detail.event,targetNode=null;_this.props.targetNodeSelector&&(targetNode=document.querySelector(_this.props.targetNodeSelector)),e.target!==_this._domNode&&e.target!==targetNode&&_this._combokeys.handleKey(character,modifiers,event,!0)},_this._decorateCombokeys=function(){var element=_this._getElementToBind(),originalHandleKey=_this._combokeys.handleKey.bind(_this._combokeys);_this._combokeys.stopCallback=function(event,domElement,combo){var isInputLikeElement="INPUT"===domElement.tagName||"SELECT"===domElement.tagName||"TEXTAREA"===domElement.tagName||domElement.contentEditable&&"true"===domElement.contentEditable,isReturnString=void 0;return isReturnString=event.key?1===event.key.length:Boolean(_helpers2.default.getCharacter(event)),!(!isInputLikeElement||!isReturnString||_this.props.alwaysFireHandler)},_this._combokeys.handleKey=function(character,modifiers,event,isGlobalHandler){if(!_this._lastEvent||event.timeStamp!==_this._lastEvent.timeStamp||event.type!==_this._lastEvent.type){_this._lastEvent=event;var isolateOwner=!1;if(_this.props.isolate&&!event.__isolateShortcuts&&(event.__isolateShortcuts=!0,isolateOwner=!0),isGlobalHandler||element.dispatchEvent(new CustomEvent("shortcuts:global",{detail:{character:character,modifiers:modifiers,event:event},bubbles:!0,cancelable:!0})),!event.__isolateShortcuts)return _this.props.preventDefault&&event.preventDefault(),_this.props.stopPropagation&&!isGlobalHandler&&event.stopPropagation(),void originalHandleKey(character,modifiers,event);(_this.props.global||isolateOwner)&&originalHandleKey(character,modifiers,event)}}},_this._getElementToBind=function(){var element=null;return _this.props.targetNodeSelector?(element=document.querySelector(_this.props.targetNodeSelector),(0,_invariant2.default)(element,"Node selector '"+_this.props.targetNodeSelector+"'  was not found.")):element=_this._domNode,element},_this._unbindShortcuts=function(){_this._combokeys&&(_this._combokeys.detach(),_this._combokeys.reset())},_this._onUpdate=function(){var shortcutsArr=_this.props.name&&_this.context.shortcuts.getShortcuts(_this.props.name);_this._unbindShortcuts(),_this._bindShortcuts(shortcutsArr||[])},_this._handleShortcuts=function(event,keyName){if(_this.props.name){var shortcutName=_this.context.shortcuts.findShortcutName(keyName,_this.props.name);_this.props.handler&&_this.props.handler(shortcutName,event)}},_possibleConstructorReturn(_this,_temp)}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(_class,_React$Component),_createClass(_class,[{key:"componentDidMount",value:function(){this._onUpdate(),this.props.name&&this.context.shortcuts.addUpdateListener(this._onUpdate)}},{key:"componentWillUnmount",value:function(){(this._unbindShortcuts(),this.props.name&&this.context.shortcuts.removeUpdateListener(this._onUpdate),this.props.global)&&this._getElementToBind().removeEventListener("shortcuts:global",this._customGlobalHandler)}},{key:"render",value:function(){var _this2=this;return _react2.default.createElement("div",{ref:function(node){_this2._domNode=node},tabIndex:this.props.tabIndex,className:this.props.className},this.props.children)}}]),_class}(_react2.default.Component);_class.displayName="Shortcuts",_class.contextTypes={shortcuts:_propTypes2.default.object.isRequired},_class.propTypes={children:_propTypes2.default.node,handler:_propTypes2.default.func,name:_propTypes2.default.string,tabIndex:_propTypes2.default.number,className:_propTypes2.default.string,eventType:_propTypes2.default.string,stopPropagation:_propTypes2.default.bool,preventDefault:_propTypes2.default.bool,targetNodeSelector:_propTypes2.default.string,global:_propTypes2.default.bool,isolate:_propTypes2.default.bool,alwaysFireHandler:_propTypes2.default.bool},_class.defaultProps={tabIndex:-1,className:null,eventType:null,stopPropagation:!0,preventDefault:!1,targetNodeSelector:null,global:!1,isolate:!1,alwaysFireHandler:!1},exports.default=_class,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";module.exports=function(element,options){var Combokeys=this.constructor;return this.options=Object.assign({storeInstancesGlobally:!0},options||{}),this.callbacks={},this.directMap={},this.sequenceLevels={},this.resetTimer=null,this.ignoreNextKeyup=!1,this.ignoreNextKeypress=!1,this.nextExpectedAction=!1,this.element=element,this.addEvents(),this.options.storeInstancesGlobally&&Combokeys.instances.push(this),this},module.exports.prototype.bind=__webpack_require__(335),module.exports.prototype.bindMultiple=__webpack_require__(336),module.exports.prototype.unbind=__webpack_require__(337),module.exports.prototype.trigger=__webpack_require__(338),module.exports.prototype.reset=__webpack_require__(339),module.exports.prototype.stopCallback=__webpack_require__(340),module.exports.prototype.handleKey=__webpack_require__(341),module.exports.prototype.addEvents=__webpack_require__(342),module.exports.prototype.bindSingle=__webpack_require__(346),module.exports.prototype.getKeyInfo=__webpack_require__(347),module.exports.prototype.pickBestAction=__webpack_require__(351),module.exports.prototype.getReverseMap=__webpack_require__(352),module.exports.prototype.getMatches=__webpack_require__(353),module.exports.prototype.resetSequences=__webpack_require__(355),module.exports.prototype.fireCallback=__webpack_require__(356),module.exports.prototype.bindSequence=__webpack_require__(359),module.exports.prototype.resetSequenceTimer=__webpack_require__(360),module.exports.prototype.detach=__webpack_require__(361),module.exports.instances=[],module.exports.reset=__webpack_require__(362),module.exports.REVERSE_MAP=null},function(module,exports,__webpack_require__){"use strict";module.exports=function(keys,callback,action){return keys=keys instanceof Array?keys:[keys],this.bindMultiple(keys,callback,action),this}},function(module,exports,__webpack_require__){"use strict";module.exports=function(combinations,callback,action){for(var j=0;j<combinations.length;++j)this.bindSingle(combinations[j],callback,action)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(keys,action){return this.bind(keys,(function(){}),action)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(keys,action){return this.directMap[keys+":"+action]&&this.directMap[keys+":"+action]({},keys),this}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){return this.callbacks={},this.directMap={},this}},function(module,exports,__webpack_require__){"use strict";module.exports=function(e,element){if((" "+element.className+" ").indexOf(" combokeys ")>-1)return!1;var tagName=element.tagName.toLowerCase();return"input"===tagName||"select"===tagName||"textarea"===tagName||element.isContentEditable}},function(module,exports,__webpack_require__){"use strict";module.exports=function(character,modifiers,e){var callbacks,j,isModifier,ignoreThisKeypress,doNotReset={},maxLevel=0,processedSequenceCallback=!1;for(callbacks=this.getMatches(character,modifiers,e),j=0;j<callbacks.length;++j)callbacks[j].seq&&(maxLevel=Math.max(maxLevel,callbacks[j].level));for(j=0;j<callbacks.length;++j)if(callbacks[j].seq){if(callbacks[j].level!==maxLevel)continue;processedSequenceCallback=!0,doNotReset[callbacks[j].seq]=1,this.fireCallback(callbacks[j].callback,e,callbacks[j].combo,callbacks[j].seq)}else processedSequenceCallback||this.fireCallback(callbacks[j].callback,e,callbacks[j].combo);ignoreThisKeypress="keypress"===e.type&&this.ignoreNextKeypress,isModifier=__webpack_require__(205),e.type!==this.nextExpectedAction||isModifier(character)||ignoreThisKeypress||this.resetSequences(doNotReset),this.ignoreNextKeypress=processedSequenceCallback&&"keydown"===e.type}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var on=__webpack_require__(234),element=this.element;this.eventHandler=__webpack_require__(343).bind(this),on(element,"keypress",this.eventHandler),on(element,"keydown",this.eventHandler),on(element,"keyup",this.eventHandler)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(e){var eventModifiers;"number"!=typeof e.which&&(e.which=e.keyCode);var character=__webpack_require__(235)(e);void 0!==character&&("keyup"!==e.type||this.ignoreNextKeyup!==character?(eventModifiers=__webpack_require__(345),this.handleKey(character,eventModifiers(e),e)):this.ignoreNextKeyup=!1)}},function(module,exports,__webpack_require__){"use strict";module.exports={106:"*",107:"plus",109:"minus",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}},function(module,exports,__webpack_require__){"use strict";module.exports=function(e){var modifiers=[];return e.shiftKey&&modifiers.push("shift"),e.altKey&&modifiers.push("alt"),e.ctrlKey&&modifiers.push("ctrl"),e.metaKey&&modifiers.push("meta"),modifiers}},function(module,exports,__webpack_require__){"use strict";module.exports=function(combination,callback,action,sequenceName,level){this.directMap[combination+":"+action]=callback;var info,sequence=(combination=combination.replace(/\s+/g," ")).split(" ");sequence.length>1?this.bindSequence(combination,sequence,callback,action):(info=this.getKeyInfo(combination,action),this.callbacks[info.key]=this.callbacks[info.key]||[],this.getMatches(info.key,info.modifiers,{type:info.action},sequenceName,combination,level),this.callbacks[info.key][sequenceName?"unshift":"push"]({callback:callback,modifiers:info.modifiers,action:info.action,seq:sequenceName,level:level,combo:combination}))}},function(module,exports,__webpack_require__){"use strict";module.exports=function(combination,action){var keys,key,j,SPECIAL_ALIASES,SHIFT_MAP,isModifier,modifiers=[];for(keys=__webpack_require__(348)(combination),SPECIAL_ALIASES=__webpack_require__(349),SHIFT_MAP=__webpack_require__(350),isModifier=__webpack_require__(205),j=0;j<keys.length;++j)SPECIAL_ALIASES[key=keys[j]]&&(key=SPECIAL_ALIASES[key]),action&&"keypress"!==action&&SHIFT_MAP[key]&&(key=SHIFT_MAP[key],modifiers.push("shift")),isModifier(key)&&modifiers.push(key);return{key:key,modifiers:modifiers,action:action=this.pickBestAction(key,modifiers,action)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(combination){return"+"===combination?["+"]:combination.split("+")}},function(module,exports,__webpack_require__){"use strict";module.exports={option:"alt",command:"meta",return:"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"}},function(module,exports,__webpack_require__){"use strict";module.exports={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"}},function(module,exports,__webpack_require__){"use strict";module.exports=function(key,modifiers,action){return action||(action=this.getReverseMap()[key]?"keydown":"keypress"),"keypress"===action&&modifiers.length&&(action="keydown"),action}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var SPECIAL_KEYS_MAP,constructor=this.constructor;if(!constructor.REVERSE_MAP)for(var key in constructor.REVERSE_MAP={},SPECIAL_KEYS_MAP=__webpack_require__(236))key>95&&key<112||SPECIAL_KEYS_MAP.hasOwnProperty(key)&&(constructor.REVERSE_MAP[SPECIAL_KEYS_MAP[key]]=key);return constructor.REVERSE_MAP}},function(module,exports,__webpack_require__){"use strict";module.exports=function(character,modifiers,e,sequenceName,combination,level){var j,callback,isModifier,modifiersMatch,matches=[],action=e.type;"keypress"!==action||e.code&&"Arrow"===e.code.slice(0,5)||(this.callbacks["any-character"]||[]).forEach((function(callback){matches.push(callback)}));if(!this.callbacks[character])return matches;for(isModifier=__webpack_require__(205),"keyup"===action&&isModifier(character)&&(modifiers=[character]),j=0;j<this.callbacks[character].length;++j)if(callback=this.callbacks[character][j],(sequenceName||!callback.seq||this.sequenceLevels[callback.seq]===callback.level)&&action===callback.action&&(modifiersMatch=__webpack_require__(354),"keypress"===action&&!e.metaKey&&!e.ctrlKey||modifiersMatch(modifiers,callback.modifiers))){var deleteCombo=!sequenceName&&callback.combo===combination,deleteSequence=sequenceName&&callback.seq===sequenceName&&callback.level===level;(deleteCombo||deleteSequence)&&this.callbacks[character].splice(j,1),matches.push(callback)}return matches}},function(module,exports,__webpack_require__){"use strict";module.exports=function(modifiers1,modifiers2){return modifiers1.sort().join(",")===modifiers2.sort().join(",")}},function(module,exports,__webpack_require__){"use strict";module.exports=function(doNotReset){doNotReset=doNotReset||{};var key,activeSequences=!1;for(key in this.sequenceLevels)doNotReset[key]?activeSequences=!0:this.sequenceLevels[key]=0;activeSequences||(this.nextExpectedAction=!1)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(callback,e,combo,sequence){this.stopCallback(e,e.target||e.srcElement,combo,sequence)||!1===callback(e,combo)&&(__webpack_require__(357)(e),__webpack_require__(358)(e))}},function(module,exports,__webpack_require__){"use strict";module.exports=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}},function(module,exports,__webpack_require__){"use strict";module.exports=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}},function(module,exports,__webpack_require__){"use strict";module.exports=function(combo,keys,callback,action){var self=this;function increaseSequence(nextAction){return function(){self.nextExpectedAction=nextAction,++self.sequenceLevels[combo],self.resetSequenceTimer()}}function callbackAndReset(e){var characterFromEvent;self.fireCallback(callback,e,combo),"keyup"!==action&&(characterFromEvent=__webpack_require__(235),self.ignoreNextKeyup=characterFromEvent(e)),setTimeout((function(){self.resetSequences()}),10)}self.sequenceLevels[combo]=0;for(var j=0;j<keys.length;++j){var wrappedCallback=j+1===keys.length?callbackAndReset:increaseSequence(action||self.getKeyInfo(keys[j+1]).action);self.bindSingle(keys[j],wrappedCallback,action,combo,j)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var self=this;clearTimeout(self.resetTimer),self.resetTimer=setTimeout((function(){self.resetSequences()}),1e3)}},function(module,exports,__webpack_require__){var off=__webpack_require__(234).off;module.exports=function(){var element=this.element;off(element,"keypress",this.eventHandler),off(element,"keydown",this.eventHandler),off(element,"keyup",this.eventHandler)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){this.instances.forEach((function(combokeys){combokeys.reset()}))}},function(module,exports,__webpack_require__){"use strict";function createThunkMiddleware(extraArgument){return function(_ref){var dispatch=_ref.dispatch,getState=_ref.getState;return function(next){return function(action){return"function"==typeof action?action(dispatch,getState,extraArgument):next(action)}}}}exports.__esModule=!0;var thunk=createThunkMiddleware();thunk.withExtraArgument=createThunkMiddleware,exports.default=thunk},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var initialState="function"!=typeof args[0]&&args.shift(),reducers=args;if(void 0===initialState)throw new TypeError("The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.");return function(prevState,value){for(var _len2=arguments.length,args=Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++)args[_key2-2]=arguments[_key2];var prevStateIsUndefined=void 0===prevState,valueIsUndefined=void 0===value;return prevStateIsUndefined&&valueIsUndefined&&initialState?initialState:reducers.reduce((function(newState,reducer,index){if(void 0===reducer)throw new TypeError("An undefined reducer was passed in at index "+index);return reducer.apply(void 0,[newState,value].concat(args))}),prevStateIsUndefined&&!valueIsUndefined&&initialState?initialState:prevState)}},module.exports=exports.default},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(366);case"v7light":return __webpack_require__(368);case"v8dark":return __webpack_require__(370);case"v8light":return __webpack_require__(372)}},function(module,exports,__webpack_require__){var api=__webpack_require__(174),content=__webpack_require__(367);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(175)(!1)).push([module.i,'.canvasContainerWrapper .euiAccordion__childWrapper{overflow-x:hidden}.canvasContainerWrapper .clickable{cursor:pointer}.canvasContainerWrapper .canvasPalettePicker__swatchesPopover{display:block}.canvasContainerWrapper .canvasPalettePicker__swatchesPopover .canvasPalettePicker__swatchesPopoverAnchor{display:block}.canvasContainerWrapper .euiImageFullScreen{min-width:100px}@media only screen and (min-width: 768px) and (max-width: 991px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}@media only screen and (min-width: 992px) and (max-width: 1199px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}@media only screen and (min-width: 1200px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}.canvas.canvasContainerWrapper{display:flex;flex-grow:1}.canvas.canvasContainer{display:flex;flex-grow:1;background-color:#141519}.canvasContainer--loading{position:fixed;top:50%;left:50%;transform:translateY(-50%);text-align:center}.canvasCheckered{background-color:#fff;background-image:linear-gradient(45deg, #343741 25%, transparent 25%),linear-gradient(-45deg, #343741 25%, transparent 25%),linear-gradient(45deg, transparent 75%, #343741 75%),linear-gradient(-45deg, transparent 75%, #343741 75%);background-size:8px 8px;position:relative}.canvasTextArea__code{scrollbar-width:thin;font-size:14px;font-family:"Roboto Mono",Consolas,Menlo,Courier,monospace;width:100%;max-width:100%}.canvasTextArea__code::-webkit-scrollbar{width:16px;height:16px}.canvasTextArea__code::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasTextArea__code::-webkit-scrollbar-corner,.canvasTextArea__code::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasContextMenu--topBorder{border-top:1px solid #343741}#canvas-app{overflow-y:hidden}#canvas-app .window-error{position:absolute;bottom:10px;right:10px;background-color:#F66;color:#fff;display:block;z-index:2000;padding:10px;max-width:500px}#canvas-app .window-error a{color:#fff;font-weight:bold}.canvasHomeApp{width:100%}.canvasHomeApp .canvasHomeApp__content{width:100%}.canvasHomeApp .canvasHomeApp__modalHeader{padding-right:24px}.canvasHomeApp .canvasHomeApp__modalHeader,.canvasHomeApp .canvasHomeApp__modalBody{width:auto}@media only screen and (max-width: 574px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}.canvasLayout{display:flex;background:#141519;flex-grow:1;overflow:hidden}.canvasLayout__rows{display:flex;flex-direction:column;flex-grow:1;max-height:100vh;max-width:100%}.canvasLayout__cols{display:flex;align-items:stretch;flex-grow:1}.canvasLayout__stage{flex-grow:1;flex-basis:auto;display:flex;flex-direction:column}.canvasLayout__stageHeader{flex-grow:0;flex-basis:auto;padding:1px 16px 0;font-size:14px;border-bottom:1px solid #343741;background:#25262E;-webkit-user-select:none;user-select:none}.canvasLayout__stageHeaderInner{height:48px}.canvasLayout__stageContent{flex-grow:1;flex-basis:auto;position:relative}.canvasLayout__stageContentOverflow{scrollbar-width:thin;position:absolute;top:0;left:0;right:0;bottom:0;overflow:auto;display:flex;align-items:center}.canvasLayout__stageContentOverflow::-webkit-scrollbar{width:16px;height:16px}.canvasLayout__stageContentOverflow::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasLayout__stageContentOverflow::-webkit-scrollbar-corner,.canvasLayout__stageContentOverflow::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasLayout__sidebar{flex-grow:0;flex-basis:auto;width:350px;background:#25262E;display:flex;position:relative;border-left:1px solid #343741}.canvasLayout__sidebar .euiPanel{margin-bottom:8px}.canvasLayout__footer{flex-grow:0;flex-basis:auto;width:100%;background-color:#141519;z-index:4000;font-size:14px}.canvasExport .canvasPage{position:relative;overflow:hidden;box-shadow:none}.canvasArg__add{padding:12px;text-align:left;width:100%}.canvasArg__add:not(:last-child){border-bottom:1px solid #343741}.canvasArg__add:hover{background-color:#25262E}.canvasArg__add:hover label{color:#D4DAE5}.canvasArg__addArg{margin-right:-8px}.canvasArg__addPopover{width:250px}.canvasArg{margin-top:8px}.canvasArg__remove{min-width:16px;padding:4px 0}.canvasArg__form{position:relative}.canvasArg__tooltip{margin-left:-32px}.canvasSidebar__accordion .canvasArg__form{position:static}.canvasArg__switch{padding-top:calc(8px * .75)}.canvasAssetManager .canvasAssetManager__modalHeader{flex-wrap:wrap}@media only screen and (max-width: 574px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{width:100%;padding-bottom:16px}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{width:100%;padding-bottom:16px}}.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:0;min-width:40%;align-items:center}@media only screen and (max-width: 574px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}.canvasAssetManager .canvasAssetManager__meterLabel{margin:0}.canvasAssetManager .canvasAssetManager__fileUploadWrapper{justify-content:flex-end;padding-right:16px}.canvasAssetManager .canvasAssetManager__modalFooter{justify-content:space-between}.canvasAssetManager .canvasAssetManager__emptyPanel{max-width:400px;margin:32px auto 0}.canvasAsset{text-align:center;overflow:hidden}.canvasAsset .canvasAsset__thumb{margin:-8px;margin-bottom:0;font-size:0;height:164px}.canvasAsset .canvasAsset__img{display:flex;align-items:center;justify-content:center;height:100%}.canvasAsset .canvasAsset__img img{width:auto;max-width:100%;max-height:164px}.canvasAssetPicker{scrollbar-width:thin;max-height:120px;overflow-x:hidden;overflow-y:auto}.canvasAssetPicker::-webkit-scrollbar{width:16px;height:16px}.canvasAssetPicker::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasAssetPicker::-webkit-scrollbar-corner,.canvasAssetPicker::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasAssetPicker .canvasAssetPicker__link{position:relative;width:100%;height:100%;text-align:center}.canvasAssetPicker .canvasAssetPicker__link:hover{outline:solid 4px rgba(27,169,245,0.1)}.canvasAssetPicker .canvasAssetPicker__selected{position:absolute;top:4px;right:4px}.canvasAssetPicker .euiImage{width:40px;height:40px}.autocomplete{position:relative}.autocompletePopup{position:absolute;top:-262px;height:260px;width:100%}.autocompleteItems{border-right:1px solid #343741}.autocompleteItems,.autocompleteReference{scrollbar-width:thin;height:258px;overflow:auto}.autocompleteItems::-webkit-scrollbar,.autocompleteReference::-webkit-scrollbar{width:16px;height:16px}.autocompleteItems::-webkit-scrollbar-thumb,.autocompleteReference::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.autocompleteItems::-webkit-scrollbar-corner,.autocompleteItems::-webkit-scrollbar-track,.autocompleteReference::-webkit-scrollbar-corner,.autocompleteReference::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.autocompleteReference{padding:8px 12px;background-color:#1e1e25}.autocompleteItem{padding:8px 12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-family:"Roboto Mono",Consolas,Menlo,Courier,monospace;font-weight:400}.autocompleteItem--isActive{color:#1BA9F5;background-color:#08334a}.autocompleteType{padding:8px}.autocompleteTable .euiTable{background-color:transparent}.autocompleteDescList .euiDescriptionList__description{margin-right:8px}.canvasClipboard{cursor:pointer}.canvasColorDot{display:inline-block;position:relative;height:32px;width:32px}.canvasColorDot .canvasColorDot__background{position:absolute;height:32px;width:32px;border-radius:4px;top:0;left:0}.canvasColorDot .canvasColorDot__foreground{position:absolute;border:1px solid #343741;height:32px;width:32px;border-radius:4px;top:0;left:0;display:flex;align-items:center;justify-content:center}.canvasColorPalette .canvasColorPalette__dot{display:inline-block;margin:0 4px 4px 0}.canvasColorPickerPopover__popover{width:256px}.canvasCustomElementForm{min-width:400px}.canvasCustomElementForm__preview{max-width:210px;min-height:210px}.canvasCustomElementForm__thumbnail{padding-bottom:0}.canvasCustomElementForm__thumbnailHelp{color:#98A2B3}.canvasDataSource{background-color:#1D1E24;color:#DFE5EF;border-radius:1px solid #343741;margin:8px;padding:0 8px}.canvasDataSource__section,.canvasDataSource__list{padding:12px 12px 0}.canvasDataSource__sectionFooter{padding:0 12px}.canvasDataSource__triggerButton{color:#DFE5EF;font-size:16px;font-size:1rem;line-height:1.5rem;font-weight:600;letter-spacing:-.02em;line-height:40px}.canvasDataSource__triggerButtonIcon{margin-right:8px}.canvasDataSource__card .euiCard__content{padding-top:0 !important}.canvasDataSource__card+.canvasDataSource__card{margin-top:8px}.canvasDataSource__card--isCurrent{border-color:#7DE2D1}.canvasDatasourcePreview{max-width:1000px;max-height:60vh;height:100%}.canvasDatasourcePreview .canvasDatasourcePreview__panel{height:calc(100% - 16px * 3)}.canvasDataTable{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between}.canvasDataTable .canvasDataTable__tableWrapper{scrollbar-width:thin;width:100%;height:100%;overflow:auto}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar{width:16px;height:16px}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner,.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner{background:transparent}.canvasDataTable .canvasDataTable__footer{width:100%;display:flex;justify-content:space-around;padding:8px;border-top:1px solid #343741}.canvasDataTable .canvasDataTable__table{min-width:100%}.canvasDataTable .canvasDataTable__th,.canvasDataTable .canvasDataTable__td{padding:8px 4px;border-bottom:1px solid #343741}.canvasDataTable .canvasDataTable__th{white-space:nowrap;font-weight:bold}.canvasDebug.euiCodeBlock{padding:0;width:100%;height:100%}.canvasDebug.euiCodeBlock .canvasDebug__content{scrollbar-width:thin;width:100%;height:100%;overflow:auto;padding:16px}.canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar{width:16px;height:16px}.canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-corner,.canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.dom-preview{pointer-events:none}.dom-preview .canvasLayoutAnnotation{display:none}.canvasElementCard__wrapper{position:relative}.canvasElementCard__wrapper:hover .canvasElementCard__controls,.canvasElementCard__wrapper:focus .canvasElementCard__controls{visibility:visible;opacity:1}.canvasElementCard__wrapper .canvasElementCard__controls{position:absolute;right:8px;top:8px;visibility:hidden;opacity:0;transition:opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);transition-delay:250ms;background:rgba(255,255,255,0.5);border-radius:4px}.canvasElementCard .euiCard__top{text-align:center;width:calc(100% + 16px * 2);height:85px;margin:calc(-1 * 16px) calc(-1 * 16px) 0}.canvasElementCard .euiCard__image{max-height:100%;max-width:100%;width:auto;left:0;top:0}.canvasElementCard.canvasElementCard--hasIcon .euiCard__top{min-width:210px;padding-top:16px}.canvasElement{height:100%;width:100%;overflow:hidden}.canvasElement__content{height:100%;width:100%}.canvasExpressionInput .euiFormErrorText{padding-left:16px}.canvasExpression--compactSize{max-height:480px}.canvasExpressionInput__editor{height:256px;padding-top:16px;flex-grow:1}.canvasExpression--fullSize{display:flex;flex-direction:column;position:fixed;top:0;bottom:0;left:0;right:0;z-index:5999}.canvasExpression--fullSize .canvasExpressionInput{flex-grow:1;display:flex;flex-direction:column}.canvasExpression--fullSize .canvasExpressionInput__inner{flex-grow:1;display:flex}.canvasExpression--fullSize .canvasTextArea__code{flex-grow:1;padding-right:40px}.canvasExpression__settings{padding:12px 16px;border-top:1px solid #343741;background-color:#1D1E24}body.canvas-isFullscreen.euiBody--headerIsFixed{padding-top:0}body.canvas-isFullscreen .headerWrapper ~ .app-wrapper{min-height:100vh}body.canvas-isFullscreen.euiBody--collapsibleNavIsDocked{padding-left:0 !important}body.canvas-isFullscreen .kbnLoadingIndicator{display:none}body.canvas-isFullscreen #globalBannerList{display:none}body.canvas-isFullscreen .canvasLayout{background:#000}body.canvas-isFullscreen .canvasLayout__stageHeader,body.canvas-isFullscreen .canvasLayout__sidebar,body.canvas-isFullscreen .canvasLayout__footer,body.canvas-isFullscreen .canvasGrid{display:none}body.canvas-isFullscreen .canvasLayout__stageContentOverflow{display:block;overflow:visible;position:static;top:auto;left:auto;right:auto;bottom:auto}body.canvas-isFullscreen .canvasLayout__stageContentOverflow .canvasWorkpad__buffer{padding:0;margin:0}body.canvas-isFullscreen .canvasLayout__rows{max-width:none}body.canvas-isFullscreen .canvasLayout__rows,body.canvas-isFullscreen .canvasLayout__cols{align-items:center;justify-content:center}body.canvas-isFullscreen .canvasCheckered{display:flex;background:none}body.canvas-isFullscreen .canvasPage{box-shadow:none;overflow:hidden}.canvasFunctionForm>.canvasLoading{text-align:center;font-size:20px}.canvasAlignmentGuide{transform-origin:center center;transform-style:preserve-3d}.canvasBorderConnection{position:absolute;top:0;width:100%;height:100%;pointer-events:none;border-top:1px dashed #343741;border-left:1px dashed #343741}.canvasBorderResizeHandle{box-shadow:0 2px 2px -1px rgba(0,0,0,0.3);transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:8px;width:8px;margin-left:-4px;margin-top:-4px;background-color:#1D1E24;border:1px solid #98A2B3}.canvasDragBoxAnnotation{position:absolute;background:none;transform-origin:center center;transform-style:preserve-3d;outline:dashed 1px #98A2B3;pointer-events:none}.canvasHoverAnnotation{position:absolute;background:none;transform-origin:center center;transform-style:preserve-3d;outline:solid 1px #54B399;pointer-events:none}.canvasRotationHandle{transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:24px;width:0;margin-left:-1px;margin-top:-12px;border-top:1px dashed #343741;border-left:1px dashed #343741}.canvasRotationHandle__handle{transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:9px;width:9px;margin-left:-5px;margin-top:-6px;border-radius:50%;background-color:#535966}.tooltipAnnotation{box-shadow:0 12px 24px 0 rgba(0,0,0,0.1),0 6px 12px 0 rgba(0,0,0,0.1),0 4px 4px 0 rgba(0,0,0,0.1),0 2px 2px 0 rgba(0,0,0,0.1);border-radius:4px;background-color:#000;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.75rem;line-height:1.5;padding:8px;position:absolute;transform-origin:center center;transform-style:preserve-3d;outline:none;pointer-events:none}.canvasLoading{display:flex;color:#343741;align-items:center}.canvasPageManager .canvasPageManager__pages{position:relative}.canvasPageManager .canvasPageManager__pages,.canvasPageManager .canvasPageManager__addPage{height:144px}.canvasPageManager .canvasPageManager--trayPop>div{animation:trayPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);opacity:0;animation-fill-mode:forwards}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(1n){animation-delay:.05s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(2n){animation-delay:.1s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(3n){animation-delay:.15s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(4n){animation-delay:.2s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(5n){animation-delay:.25s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(6n){animation-delay:.3s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(7n){animation-delay:.35s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(8n){animation-delay:.4s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(9n){animation-delay:.45s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(10n){animation-delay:.5s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(11n){animation-delay:.55s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(12n){animation-delay:.6s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(13n){animation-delay:.65s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(14n){animation-delay:.7s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(15n){animation-delay:.75s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(16n){animation-delay:.8s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(17n){animation-delay:.85s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(18n){animation-delay:.9s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(19n){animation-delay:.95s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(20n){animation-delay:1s}.canvasPageManager .canvasPageManager__pageList{scrollbar-width:thin;display:flex;overflow-x:auto;overflow-y:hidden;position:absolute;left:0;right:0;top:0;bottom:0}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar{width:16px;height:16px}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-corner,.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasPageManager .canvasPageManager__addPage{width:56px;background:#7DE2D1;color:#fff;opacity:0;animation:buttonPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);animation-fill-mode:forwards}.canvasPageManager .canvasPageManager__addPageTip{display:block;height:100%}.canvasPageManager .canvasPageManager__page{padding:16px 16px 16px 8px}.canvasPageManager .canvasPageManager__page:focus,.canvasPageManager .canvasPageManager__page-isActive{background-color:rgba(0,0,0,0.5);outline:none;text-decoration:none}.canvasPageManager .canvasPageManager__page-isActive:focus .canvasPageManager__pagePreview{outline-color:#54B399}.canvasPageManager .canvasPageManager__page:hover,.canvasPageManager .canvasPageManager__page:focus{text-decoration:none}.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__pagePreview,.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__pagePreview{box-shadow:0 6px 12px -1px rgba(0,0,0,0.2),0 4px 4px -1px rgba(0,0,0,0.2),0 2px 2px 0 rgba(0,0,0,0.2)}.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__controls,.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__controls{visibility:visible;opacity:1}.canvasPageManager .canvasPageManager__page-isActive .canvasPageManager__pagePreview{box-shadow:0 6px 12px -1px rgba(0,0,0,0.2),0 4px 4px -1px rgba(0,0,0,0.2),0 2px 2px 0 rgba(0,0,0,0.2);outline:2px solid #343741;outline-color:#98A2B3}.canvasPageManager .canvasPageManager__pageNumber{color:#98A2B3}.canvasPageManager .canvasPageManager__pagePreview{box-shadow:0 2px 2px -1px rgba(0,0,0,0.3),0 1px 5px -2px rgba(0,0,0,0.3);position:relative;overflow:hidden;color:#DFE5EF}.canvasPageManager .canvasPageManager__pagePreview .canvasPositionable{position:absolute}.canvasPageManager .canvasPageManager__controls{position:absolute;right:8px;top:8px;visibility:hidden;opacity:0;transition:opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);transition-delay:250ms;background:rgba(255,255,255,0.5);border-radius:4px}@keyframes buttonPop{0%{opacity:0;transform:translateX(100%)}1%{opacity:0;transform:translateX(100%)}100%{opacity:1;transform:translateY(0)}}@keyframes trayPop{0%{opacity:0;transform:translateY(100%)}1%{opacity:0;transform:translateY(100%)}100%{opacity:1;transform:translateY(0)}}.canvasPositionable{transform-origin:center center;transform-style:preserve-3d}.canvasShapePreview{width:40px;height:40px}.canvasShapePreview svg{width:100%;height:100%}.canvasShapePicker{width:192px}.canvasSidebar{scrollbar-width:thin;width:100%;max-height:100vh;overflow-y:auto;overflow-x:hidden;position:absolute;top:0;bottom:0}.canvasSidebar::-webkit-scrollbar{width:16px;height:16px}.canvasSidebar::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasSidebar::-webkit-scrollbar-corner,.canvasSidebar::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasSidebar__pop{animation:sidebarPop 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.canvasSidebarFlyout{width:350px;min-width:350px}.canvasSidebar__elementButtons{background:#1a1a20;margin-bottom:8px}.canvasSidebar__panel{border-bottom:1px solid #343741;padding:8px 12px}.canvasSidebar__panel--isEmpty{border-bottom:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion{margin-bottom:-8px}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion:after{content:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion.euiAccordion-isOpen:after{display:none}.canvasSidebar__panel-noMinWidth .euiButton{min-width:0}.canvasSidebar__expandable+.canvasSidebar__expandable{margin-top:0}.canvasSidebar__expandable+.canvasSidebar__expandable .canvasSidebar__accordion:before{display:none}.canvasSidebar__accordion{padding:12px;margin:0 -12px;background:#25262E;position:relative}.canvasSidebar__accordion.euiAccordion-isOpen{background:transparent}.canvasSidebar__accordion:before,.canvasSidebar__accordion:after{content:\'\';height:1px;position:absolute;left:0;width:100%;background:#343741}.canvasSidebar__accordion:before{top:0}.canvasSidebar__accordion:after{bottom:0}.canvasSidebar__accordionContent{padding-top:16px;padding-left:28px}@keyframes sidebarPop{0%{opacity:0}1%{opacity:0}100%{opacity:1}}.canvasLayout__sidebarHeader{padding:calc(12px + 2px) 8px}.canvasLayout__sidebarHeaderWorkpad{padding:calc(8px * .75) 0}.canvasToolbar{position:relative}.canvasTray__toggle{position:absolute;top:-20px;left:50%;background-color:#16171c;margin:0;border-radius:4px 4px 0 0}.canvasTray__toggle>.euiFlexItem{margin:0}.canvasTray__toggle button{padding:4px 12px;box-shadow:0 -2px 1px rgba(255,255,255,0.1)}.canvasToolbar__controls{padding:12px;height:100%}.canvasToolbar__container{width:100%;height:64px;background-color:#1a1a20;position:relative;z-index:200}.canvasTray{box-shadow:0 0 12px -1px rgba(0,0,0,0.2),0 0 4px -1px rgba(0,0,0,0.2),0 0 2px 0 rgba(0,0,0,0.2);flex-direction:column}.canvasTray__panel{background-color:#16171c;border-radius:0}.canvasWorkpad{position:relative}.canvasWorkpad__buffer{padding:16px;margin:auto}.canvasGrid{position:absolute;-webkit-user-select:none;user-select:none;pointer-events:none;background-image:linear-gradient(to right, #535966 1px, transparent 1px),linear-gradient(to bottom, #535966 1px, transparent 1px);background-size:50px 50px;top:0}.canvasElementMenu__popoverButton{margin-right:8px}.canvasShareMenu__panelContent{padding:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre{scrollbar-width:thin;overflow-x:auto;white-space:pre}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar{width:16px;height:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-corner,.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasViewMenu__kioskSettings,.canvasViewMenu__refreshSettings{padding:16px}.canvasWorkpad__upload--compressed.euiFilePicker--compressed.euiFilePicker .euiFilePicker__prompt{height:40px;padding:12px;padding-left:40px}.canvasWorkpad__upload--compressed.euiFilePicker--compressed.euiFilePicker .euiFilePicker__icon{top:12px}@media only screen and (max-width: 574px){.canvasWorkpad__upload--compressed .euiFilePicker__wrap{max-width:none}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasWorkpad__upload--compressed .euiFilePicker__wrap{max-width:none}}.canvasWorkpad__dropzone{border:2px dashed transparent}.canvasWorkpad__dropzone--active{background-color:#25262E;border-color:#343741}.canvasWorkpad__dropzoneTable .euiTable{background-color:transparent}.canvasWorkpad__dropzoneTable--tags .euiTableCellContent{flex-wrap:wrap}.canvasWorkpad__dropzoneTable--tags .euiHealth{width:100%}.canvasPage{box-shadow:0 0 12px -1px rgba(0,0,0,0.2),0 0 4px -1px rgba(0,0,0,0.2),0 0 2px 0 rgba(0,0,0,0.2);z-index:initial;position:absolute;top:0;transform-style:preserve-3d !important;background-color:#1D1E24}.canvasInteractivePage{-webkit-user-select:none;user-select:none}.canvasLayout__stage .canvasStaticPage.isInactive{visibility:hidden;opacity:0}.canvasAdvancedFilter{width:100%;font-size:inherit}.canvasAdvancedFilter .canvasAdvancedFilter__input{background-color:#1D1E24;width:100%;padding:4px 16px;border:1px solid #343741;border-radius:4px;font-size:inherit;line-height:19px;font-family:monospace}.canvasAdvancedFilter .canvasAdvancedFilter__input:focus{box-shadow:none}.canvasAdvancedFilter .canvasAdvancedFilter__button{width:100%;padding:4px 8px;border:1px solid #343741;border-radius:4px;background-color:#1D1E24;font-size:inherit}.canvasAdvancedFilter .canvasAdvancedFilter__button:hover{background-color:#25262E}.canvasDropdownFilter{width:100%;font-size:inherit;position:relative}.canvasDropdownFilter .canvasDropdownFilter__select{background-color:#1D1E24;width:100%;padding:4px 16px;border:1px solid #343741;border-radius:4px;-webkit-appearance:none;appearance:none;font-size:inherit}.canvasDropdownFilter .canvasDropdownFilter__select:after{display:none}.canvasDropdownFilter .canvasDropdownFilter__select:focus{box-shadow:none}.canvasDropdownFilter .canvasDropdownFilter__icon{position:absolute;right:8px;top:8px;pointer-events:none}.canvasEmbeddable .embPanel{border:none;background:none}.canvasEmbeddable .embPanel .embPanel__title{margin-bottom:4px}.canvasEmbeddable .embPanel .embPanel__optionsMenuButton{border-radius:4px}.canvas-isFullscreen .canvasEmbeddable .embPanel .embPanel__optionsMenuButton{opacity:0}.canvas-isFullscreen .canvasEmbeddable .embPanel:focus .embPanel__optionsMenuButton,.canvas-isFullscreen .canvasEmbeddable .embPanel:hover .embPanel__optionsMenuButton{opacity:1}.canvasEmbeddable .euiTable{background:none}.legendLabel{color:#DFE5EF}.legendColorBox>div>div{border-radius:16px}.revealImage{height:100%;width:100%;display:flex;align-items:center;justify-content:center;pointer-events:none}.revealImage .revealImageAligner{background-size:contain;background-repeat:no-repeat}.revealImage .revealImage__image{-webkit-user-select:none;user-select:none}.canvasTimeFilter .euiSuperDatePicker__flexWrapper{width:100%}.canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall{margin:0}.canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall>.euiFlexItem{margin:0}.canvasArgImage .canvasArgImage--preview{max-height:100px;overflow:hidden;border:1px solid #343741}\n',""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(174),content=__webpack_require__(369);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(175)(!1)).push([module.i,'.canvasContainerWrapper .euiAccordion__childWrapper{overflow-x:hidden}.canvasContainerWrapper .clickable{cursor:pointer}.canvasContainerWrapper .canvasPalettePicker__swatchesPopover{display:block}.canvasContainerWrapper .canvasPalettePicker__swatchesPopover .canvasPalettePicker__swatchesPopoverAnchor{display:block}.canvasContainerWrapper .euiImageFullScreen{min-width:100px}@media only screen and (min-width: 768px) and (max-width: 991px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}@media only screen and (min-width: 992px) and (max-width: 1199px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}@media only screen and (min-width: 1200px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}.canvas.canvasContainerWrapper{display:flex;flex-grow:1}.canvas.canvasContainer{display:flex;flex-grow:1;background-color:#fafbfd}.canvasContainer--loading{position:fixed;top:50%;left:50%;transform:translateY(-50%);text-align:center}.canvasCheckered{background-color:#fff;background-image:linear-gradient(45deg, #D3DAE6 25%, transparent 25%),linear-gradient(-45deg, #D3DAE6 25%, transparent 25%),linear-gradient(45deg, transparent 75%, #D3DAE6 75%),linear-gradient(-45deg, transparent 75%, #D3DAE6 75%);background-size:8px 8px;position:relative}.canvasTextArea__code{scrollbar-width:thin;font-size:14px;font-family:"Roboto Mono",Consolas,Menlo,Courier,monospace;width:100%;max-width:100%}.canvasTextArea__code::-webkit-scrollbar{width:16px;height:16px}.canvasTextArea__code::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasTextArea__code::-webkit-scrollbar-corner,.canvasTextArea__code::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasContextMenu--topBorder{border-top:1px solid #D3DAE6}#canvas-app{overflow-y:hidden}#canvas-app .window-error{position:absolute;bottom:10px;right:10px;background-color:#BD271E;color:#fff;display:block;z-index:2000;padding:10px;max-width:500px}#canvas-app .window-error a{color:#fff;font-weight:bold}.canvasHomeApp{width:100%}.canvasHomeApp .canvasHomeApp__content{width:100%}.canvasHomeApp .canvasHomeApp__modalHeader{padding-right:24px}.canvasHomeApp .canvasHomeApp__modalHeader,.canvasHomeApp .canvasHomeApp__modalBody{width:auto}@media only screen and (max-width: 574px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}.canvasLayout{display:flex;background:#fafbfd;flex-grow:1;overflow:hidden}.canvasLayout__rows{display:flex;flex-direction:column;flex-grow:1;max-height:100vh;max-width:100%}.canvasLayout__cols{display:flex;align-items:stretch;flex-grow:1}.canvasLayout__stage{flex-grow:1;flex-basis:auto;display:flex;flex-direction:column}.canvasLayout__stageHeader{flex-grow:0;flex-basis:auto;padding:1px 16px 0;font-size:14px;border-bottom:1px solid #D3DAE6;background:#F5F7FA;-webkit-user-select:none;user-select:none}.canvasLayout__stageHeaderInner{height:48px}.canvasLayout__stageContent{flex-grow:1;flex-basis:auto;position:relative}.canvasLayout__stageContentOverflow{scrollbar-width:thin;position:absolute;top:0;left:0;right:0;bottom:0;overflow:auto;display:flex;align-items:center}.canvasLayout__stageContentOverflow::-webkit-scrollbar{width:16px;height:16px}.canvasLayout__stageContentOverflow::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasLayout__stageContentOverflow::-webkit-scrollbar-corner,.canvasLayout__stageContentOverflow::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasLayout__sidebar{flex-grow:0;flex-basis:auto;width:350px;background:#F5F7FA;display:flex;position:relative;border-left:1px solid #D3DAE6}.canvasLayout__sidebar .euiPanel{margin-bottom:8px}.canvasLayout__footer{flex-grow:0;flex-basis:auto;width:100%;background-color:#fafbfd;z-index:4000;font-size:14px}.canvasExport .canvasPage{position:relative;overflow:hidden;box-shadow:none}.canvasArg__add{padding:12px;text-align:left;width:100%}.canvasArg__add:not(:last-child){border-bottom:1px solid #D3DAE6}.canvasArg__add:hover{background-color:#F5F7FA}.canvasArg__add:hover label{color:#343741}.canvasArg__addArg{margin-right:-8px}.canvasArg__addPopover{width:250px}.canvasArg{margin-top:8px}.canvasArg__remove{min-width:16px;padding:4px 0}.canvasArg__form{position:relative}.canvasArg__tooltip{margin-left:-32px}.canvasSidebar__accordion .canvasArg__form{position:static}.canvasArg__switch{padding-top:calc(8px * .75)}.canvasAssetManager .canvasAssetManager__modalHeader{flex-wrap:wrap}@media only screen and (max-width: 574px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{width:100%;padding-bottom:16px}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{width:100%;padding-bottom:16px}}.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:0;min-width:40%;align-items:center}@media only screen and (max-width: 574px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}.canvasAssetManager .canvasAssetManager__meterLabel{margin:0}.canvasAssetManager .canvasAssetManager__fileUploadWrapper{justify-content:flex-end;padding-right:16px}.canvasAssetManager .canvasAssetManager__modalFooter{justify-content:space-between}.canvasAssetManager .canvasAssetManager__emptyPanel{max-width:400px;margin:32px auto 0}.canvasAsset{text-align:center;overflow:hidden}.canvasAsset .canvasAsset__thumb{margin:-8px;margin-bottom:0;font-size:0;height:164px}.canvasAsset .canvasAsset__img{display:flex;align-items:center;justify-content:center;height:100%}.canvasAsset .canvasAsset__img img{width:auto;max-width:100%;max-height:164px}.canvasAssetPicker{scrollbar-width:thin;max-height:120px;overflow-x:hidden;overflow-y:auto}.canvasAssetPicker::-webkit-scrollbar{width:16px;height:16px}.canvasAssetPicker::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasAssetPicker::-webkit-scrollbar-corner,.canvasAssetPicker::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasAssetPicker .canvasAssetPicker__link{position:relative;width:100%;height:100%;text-align:center}.canvasAssetPicker .canvasAssetPicker__link:hover{outline:solid 4px rgba(0,107,180,0.1)}.canvasAssetPicker .canvasAssetPicker__selected{position:absolute;top:4px;right:4px}.canvasAssetPicker .euiImage{width:40px;height:40px}.autocomplete{position:relative}.autocompletePopup{position:absolute;top:-262px;height:260px;width:100%}.autocompleteItems{border-right:1px solid #D3DAE6}.autocompleteItems,.autocompleteReference{scrollbar-width:thin;height:258px;overflow:auto}.autocompleteItems::-webkit-scrollbar,.autocompleteReference::-webkit-scrollbar{width:16px;height:16px}.autocompleteItems::-webkit-scrollbar-thumb,.autocompleteReference::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.autocompleteItems::-webkit-scrollbar-corner,.autocompleteItems::-webkit-scrollbar-track,.autocompleteReference::-webkit-scrollbar-corner,.autocompleteReference::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.autocompleteReference{padding:8px 12px;background-color:#fcfcfd}.autocompleteItem{padding:8px 12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-family:"Roboto Mono",Consolas,Menlo,Courier,monospace;font-weight:400}.autocompleteItem--isActive{color:#006BB4;background-color:#e6f0f8}.autocompleteType{padding:8px}.autocompleteTable .euiTable{background-color:transparent}.autocompleteDescList .euiDescriptionList__description{margin-right:8px}.canvasClipboard{cursor:pointer}.canvasColorDot{display:inline-block;position:relative;height:32px;width:32px}.canvasColorDot .canvasColorDot__background{position:absolute;height:32px;width:32px;border-radius:4px;top:0;left:0}.canvasColorDot .canvasColorDot__foreground{position:absolute;border:1px solid #D3DAE6;height:32px;width:32px;border-radius:4px;top:0;left:0;display:flex;align-items:center;justify-content:center}.canvasColorPalette .canvasColorPalette__dot{display:inline-block;margin:0 4px 4px 0}.canvasColorPickerPopover__popover{width:256px}.canvasCustomElementForm{min-width:400px}.canvasCustomElementForm__preview{max-width:210px;min-height:210px}.canvasCustomElementForm__thumbnail{padding-bottom:0}.canvasCustomElementForm__thumbnailHelp{color:#69707D}.canvasDataSource{background-color:#fff;color:#343741;border-radius:1px solid #D3DAE6;margin:8px;padding:0 8px}.canvasDataSource__section,.canvasDataSource__list{padding:12px 12px 0}.canvasDataSource__sectionFooter{padding:0 12px}.canvasDataSource__triggerButton{color:#1a1c21;font-size:16px;font-size:1rem;line-height:1.5rem;font-weight:600;letter-spacing:-.02em;line-height:40px}.canvasDataSource__triggerButtonIcon{margin-right:8px}.canvasDataSource__card .euiCard__content{padding-top:0 !important}.canvasDataSource__card+.canvasDataSource__card{margin-top:8px}.canvasDataSource__card--isCurrent{border-color:#017D73}.canvasDatasourcePreview{max-width:1000px;max-height:60vh;height:100%}.canvasDatasourcePreview .canvasDatasourcePreview__panel{height:calc(100% - 16px * 3)}.canvasDataTable{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between}.canvasDataTable .canvasDataTable__tableWrapper{scrollbar-width:thin;width:100%;height:100%;overflow:auto}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar{width:16px;height:16px}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner,.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner{background:transparent}.canvasDataTable .canvasDataTable__footer{width:100%;display:flex;justify-content:space-around;padding:8px;border-top:1px solid #D3DAE6}.canvasDataTable .canvasDataTable__table{min-width:100%}.canvasDataTable .canvasDataTable__th,.canvasDataTable .canvasDataTable__td{padding:8px 4px;border-bottom:1px solid #D3DAE6}.canvasDataTable .canvasDataTable__th{white-space:nowrap;font-weight:bold}.canvasDebug.euiCodeBlock{padding:0;width:100%;height:100%}.canvasDebug.euiCodeBlock .canvasDebug__content{scrollbar-width:thin;width:100%;height:100%;overflow:auto;padding:16px}.canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar{width:16px;height:16px}.canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-corner,.canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.dom-preview{pointer-events:none}.dom-preview .canvasLayoutAnnotation{display:none}.canvasElementCard__wrapper{position:relative}.canvasElementCard__wrapper:hover .canvasElementCard__controls,.canvasElementCard__wrapper:focus .canvasElementCard__controls{visibility:visible;opacity:1}.canvasElementCard__wrapper .canvasElementCard__controls{position:absolute;right:8px;top:8px;visibility:hidden;opacity:0;transition:opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);transition-delay:250ms;background:rgba(255,255,255,0.5);border-radius:4px}.canvasElementCard .euiCard__top{text-align:center;width:calc(100% + 16px * 2);height:85px;margin:calc(-1 * 16px) calc(-1 * 16px) 0}.canvasElementCard .euiCard__image{max-height:100%;max-width:100%;width:auto;left:0;top:0}.canvasElementCard.canvasElementCard--hasIcon .euiCard__top{min-width:210px;padding-top:16px}.canvasElement{height:100%;width:100%;overflow:hidden}.canvasElement__content{height:100%;width:100%}.canvasExpressionInput .euiFormErrorText{padding-left:16px}.canvasExpression--compactSize{max-height:480px}.canvasExpressionInput__editor{height:256px;padding-top:16px;flex-grow:1}.canvasExpression--fullSize{display:flex;flex-direction:column;position:fixed;top:0;bottom:0;left:0;right:0;z-index:5999}.canvasExpression--fullSize .canvasExpressionInput{flex-grow:1;display:flex;flex-direction:column}.canvasExpression--fullSize .canvasExpressionInput__inner{flex-grow:1;display:flex}.canvasExpression--fullSize .canvasTextArea__code{flex-grow:1;padding-right:40px}.canvasExpression__settings{padding:12px 16px;border-top:1px solid #D3DAE6;background-color:#fff}body.canvas-isFullscreen.euiBody--headerIsFixed{padding-top:0}body.canvas-isFullscreen .headerWrapper ~ .app-wrapper{min-height:100vh}body.canvas-isFullscreen.euiBody--collapsibleNavIsDocked{padding-left:0 !important}body.canvas-isFullscreen .kbnLoadingIndicator{display:none}body.canvas-isFullscreen #globalBannerList{display:none}body.canvas-isFullscreen .canvasLayout{background:#000}body.canvas-isFullscreen .canvasLayout__stageHeader,body.canvas-isFullscreen .canvasLayout__sidebar,body.canvas-isFullscreen .canvasLayout__footer,body.canvas-isFullscreen .canvasGrid{display:none}body.canvas-isFullscreen .canvasLayout__stageContentOverflow{display:block;overflow:visible;position:static;top:auto;left:auto;right:auto;bottom:auto}body.canvas-isFullscreen .canvasLayout__stageContentOverflow .canvasWorkpad__buffer{padding:0;margin:0}body.canvas-isFullscreen .canvasLayout__rows{max-width:none}body.canvas-isFullscreen .canvasLayout__rows,body.canvas-isFullscreen .canvasLayout__cols{align-items:center;justify-content:center}body.canvas-isFullscreen .canvasCheckered{display:flex;background:none}body.canvas-isFullscreen .canvasPage{box-shadow:none;overflow:hidden}.canvasFunctionForm>.canvasLoading{text-align:center;font-size:20px}.canvasAlignmentGuide{transform-origin:center center;transform-style:preserve-3d}.canvasBorderConnection{position:absolute;top:0;width:100%;height:100%;pointer-events:none;border-top:1px dashed #D3DAE6;border-left:1px dashed #D3DAE6}.canvasBorderResizeHandle{box-shadow:0 2px 2px -1px rgba(152,162,179,0.3);transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:8px;width:8px;margin-left:-4px;margin-top:-4px;background-color:#fff;border:1px solid #69707D}.canvasDragBoxAnnotation{position:absolute;background:none;transform-origin:center center;transform-style:preserve-3d;outline:dashed 1px #69707D;pointer-events:none}.canvasHoverAnnotation{position:absolute;background:none;transform-origin:center center;transform-style:preserve-3d;outline:solid 1px #54B399;pointer-events:none}.canvasRotationHandle{transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:24px;width:0;margin-left:-1px;margin-top:-12px;border-top:1px dashed #D3DAE6;border-left:1px dashed #D3DAE6}.canvasRotationHandle__handle{transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:9px;width:9px;margin-left:-5px;margin-top:-6px;border-radius:50%;background-color:#98A2B3}.tooltipAnnotation{box-shadow:0 12px 24px 0 rgba(0,0,0,0.1),0 6px 12px 0 rgba(0,0,0,0.1),0 4px 4px 0 rgba(0,0,0,0.1),0 2px 2px 0 rgba(0,0,0,0.1);border-radius:4px;background-color:#404040;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.75rem;line-height:1.5;padding:8px;position:absolute;transform-origin:center center;transform-style:preserve-3d;outline:none;pointer-events:none}.canvasLoading{display:flex;color:#D3DAE6;align-items:center}.canvasPageManager .canvasPageManager__pages{position:relative}.canvasPageManager .canvasPageManager__pages,.canvasPageManager .canvasPageManager__addPage{height:144px}.canvasPageManager .canvasPageManager--trayPop>div{animation:trayPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);opacity:0;animation-fill-mode:forwards}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(1n){animation-delay:.05s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(2n){animation-delay:.1s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(3n){animation-delay:.15s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(4n){animation-delay:.2s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(5n){animation-delay:.25s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(6n){animation-delay:.3s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(7n){animation-delay:.35s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(8n){animation-delay:.4s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(9n){animation-delay:.45s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(10n){animation-delay:.5s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(11n){animation-delay:.55s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(12n){animation-delay:.6s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(13n){animation-delay:.65s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(14n){animation-delay:.7s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(15n){animation-delay:.75s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(16n){animation-delay:.8s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(17n){animation-delay:.85s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(18n){animation-delay:.9s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(19n){animation-delay:.95s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(20n){animation-delay:1s}.canvasPageManager .canvasPageManager__pageList{scrollbar-width:thin;display:flex;overflow-x:auto;overflow-y:hidden;position:absolute;left:0;right:0;top:0;bottom:0}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar{width:16px;height:16px}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-corner,.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasPageManager .canvasPageManager__addPage{width:56px;background:#017D73;color:#fff;opacity:0;animation:buttonPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);animation-fill-mode:forwards}.canvasPageManager .canvasPageManager__addPageTip{display:block;height:100%}.canvasPageManager .canvasPageManager__page{padding:16px 16px 16px 8px}.canvasPageManager .canvasPageManager__page:focus,.canvasPageManager .canvasPageManager__page-isActive{background-color:rgba(143,165,199,0.5);outline:none;text-decoration:none}.canvasPageManager .canvasPageManager__page-isActive:focus .canvasPageManager__pagePreview{outline-color:#54B399}.canvasPageManager .canvasPageManager__page:hover,.canvasPageManager .canvasPageManager__page:focus{text-decoration:none}.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__pagePreview,.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__pagePreview{box-shadow:0 6px 12px -1px rgba(152,162,179,0.2),0 4px 4px -1px rgba(152,162,179,0.2),0 2px 2px 0 rgba(152,162,179,0.2)}.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__controls,.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__controls{visibility:visible;opacity:1}.canvasPageManager .canvasPageManager__page-isActive .canvasPageManager__pagePreview{box-shadow:0 6px 12px -1px rgba(152,162,179,0.2),0 4px 4px -1px rgba(152,162,179,0.2),0 2px 2px 0 rgba(152,162,179,0.2);outline:2px solid #D3DAE6;outline-color:#69707D}.canvasPageManager .canvasPageManager__pageNumber{color:#69707D}.canvasPageManager .canvasPageManager__pagePreview{box-shadow:0 2px 2px -1px rgba(152,162,179,0.3),0 1px 5px -2px rgba(152,162,179,0.3);position:relative;overflow:hidden;color:#343741}.canvasPageManager .canvasPageManager__pagePreview .canvasPositionable{position:absolute}.canvasPageManager .canvasPageManager__controls{position:absolute;right:8px;top:8px;visibility:hidden;opacity:0;transition:opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);transition-delay:250ms;background:rgba(255,255,255,0.5);border-radius:4px}@keyframes buttonPop{0%{opacity:0;transform:translateX(100%)}1%{opacity:0;transform:translateX(100%)}100%{opacity:1;transform:translateY(0)}}@keyframes trayPop{0%{opacity:0;transform:translateY(100%)}1%{opacity:0;transform:translateY(100%)}100%{opacity:1;transform:translateY(0)}}.canvasPositionable{transform-origin:center center;transform-style:preserve-3d}.canvasShapePreview{width:40px;height:40px}.canvasShapePreview svg{width:100%;height:100%}.canvasShapePicker{width:192px}.canvasSidebar{scrollbar-width:thin;width:100%;max-height:100vh;overflow-y:auto;overflow-x:hidden;position:absolute;top:0;bottom:0}.canvasSidebar::-webkit-scrollbar{width:16px;height:16px}.canvasSidebar::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasSidebar::-webkit-scrollbar-corner,.canvasSidebar::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasSidebar__pop{animation:sidebarPop 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.canvasSidebarFlyout{width:350px;min-width:350px}.canvasSidebar__elementButtons{background:#e4e9f2;margin-bottom:8px}.canvasSidebar__panel{border-bottom:1px solid #D3DAE6;padding:8px 12px}.canvasSidebar__panel--isEmpty{border-bottom:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion{margin-bottom:-8px}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion:after{content:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion.euiAccordion-isOpen:after{display:none}.canvasSidebar__panel-noMinWidth .euiButton{min-width:0}.canvasSidebar__expandable+.canvasSidebar__expandable{margin-top:0}.canvasSidebar__expandable+.canvasSidebar__expandable .canvasSidebar__accordion:before{display:none}.canvasSidebar__accordion{padding:12px;margin:0 -12px;background:#F5F7FA;position:relative}.canvasSidebar__accordion.euiAccordion-isOpen{background:transparent}.canvasSidebar__accordion:before,.canvasSidebar__accordion:after{content:\'\';height:1px;position:absolute;left:0;width:100%;background:#D3DAE6}.canvasSidebar__accordion:before{top:0}.canvasSidebar__accordion:after{bottom:0}.canvasSidebar__accordionContent{padding-top:16px;padding-left:28px}@keyframes sidebarPop{0%{opacity:0}1%{opacity:0}100%{opacity:1}}.canvasLayout__sidebarHeader{padding:calc(12px + 2px) 8px}.canvasLayout__sidebarHeaderWorkpad{padding:calc(8px * .75) 0}.canvasToolbar{position:relative}.canvasTray__toggle{position:absolute;top:-20px;left:50%;background-color:#fbfcfd;margin:0;border-radius:4px 4px 0 0}.canvasTray__toggle>.euiFlexItem{margin:0}.canvasTray__toggle button{padding:4px 12px;box-shadow:0 -2px 1px rgba(0,0,0,0.1)}.canvasToolbar__controls{padding:12px;height:100%}.canvasToolbar__container{width:100%;height:64px;background-color:#e4e9f2;position:relative;z-index:200}.canvasTray{box-shadow:0 0 12px -1px rgba(152,162,179,0.2),0 0 4px -1px rgba(152,162,179,0.2),0 0 2px 0 rgba(152,162,179,0.2);flex-direction:column}.canvasTray__panel{background-color:#fbfcfd;border-radius:0}.canvasWorkpad{position:relative}.canvasWorkpad__buffer{padding:16px;margin:auto}.canvasGrid{position:absolute;-webkit-user-select:none;user-select:none;pointer-events:none;background-image:linear-gradient(to right, #98A2B3 1px, transparent 1px),linear-gradient(to bottom, #98A2B3 1px, transparent 1px);background-size:50px 50px;top:0}.canvasElementMenu__popoverButton{margin-right:8px}.canvasShareMenu__panelContent{padding:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre{scrollbar-width:thin;overflow-x:auto;white-space:pre}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar{width:16px;height:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-corner,.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasViewMenu__kioskSettings,.canvasViewMenu__refreshSettings{padding:16px}.canvasWorkpad__upload--compressed.euiFilePicker--compressed.euiFilePicker .euiFilePicker__prompt{height:40px;padding:12px;padding-left:40px}.canvasWorkpad__upload--compressed.euiFilePicker--compressed.euiFilePicker .euiFilePicker__icon{top:12px}@media only screen and (max-width: 574px){.canvasWorkpad__upload--compressed .euiFilePicker__wrap{max-width:none}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasWorkpad__upload--compressed .euiFilePicker__wrap{max-width:none}}.canvasWorkpad__dropzone{border:2px dashed transparent}.canvasWorkpad__dropzone--active{background-color:#F5F7FA;border-color:#D3DAE6}.canvasWorkpad__dropzoneTable .euiTable{background-color:transparent}.canvasWorkpad__dropzoneTable--tags .euiTableCellContent{flex-wrap:wrap}.canvasWorkpad__dropzoneTable--tags .euiHealth{width:100%}.canvasPage{box-shadow:0 0 12px -1px rgba(152,162,179,0.2),0 0 4px -1px rgba(152,162,179,0.2),0 0 2px 0 rgba(152,162,179,0.2);z-index:initial;position:absolute;top:0;transform-style:preserve-3d !important;background-color:#fff}.canvasInteractivePage{-webkit-user-select:none;user-select:none}.canvasLayout__stage .canvasStaticPage.isInactive{visibility:hidden;opacity:0}.canvasAdvancedFilter{width:100%;font-size:inherit}.canvasAdvancedFilter .canvasAdvancedFilter__input{background-color:#fff;width:100%;padding:4px 16px;border:1px solid #D3DAE6;border-radius:4px;font-size:inherit;line-height:19px;font-family:monospace}.canvasAdvancedFilter .canvasAdvancedFilter__input:focus{box-shadow:none}.canvasAdvancedFilter .canvasAdvancedFilter__button{width:100%;padding:4px 8px;border:1px solid #D3DAE6;border-radius:4px;background-color:#fff;font-size:inherit}.canvasAdvancedFilter .canvasAdvancedFilter__button:hover{background-color:#F5F7FA}.canvasDropdownFilter{width:100%;font-size:inherit;position:relative}.canvasDropdownFilter .canvasDropdownFilter__select{background-color:#fff;width:100%;padding:4px 16px;border:1px solid #D3DAE6;border-radius:4px;-webkit-appearance:none;appearance:none;font-size:inherit}.canvasDropdownFilter .canvasDropdownFilter__select:after{display:none}.canvasDropdownFilter .canvasDropdownFilter__select:focus{box-shadow:none}.canvasDropdownFilter .canvasDropdownFilter__icon{position:absolute;right:8px;top:8px;pointer-events:none}.canvasEmbeddable .embPanel{border:none;background:none}.canvasEmbeddable .embPanel .embPanel__title{margin-bottom:4px}.canvasEmbeddable .embPanel .embPanel__optionsMenuButton{border-radius:4px}.canvas-isFullscreen .canvasEmbeddable .embPanel .embPanel__optionsMenuButton{opacity:0}.canvas-isFullscreen .canvasEmbeddable .embPanel:focus .embPanel__optionsMenuButton,.canvas-isFullscreen .canvasEmbeddable .embPanel:hover .embPanel__optionsMenuButton{opacity:1}.canvasEmbeddable .euiTable{background:none}.legendLabel{color:#343741}.legendColorBox>div>div{border-radius:16px}.revealImage{height:100%;width:100%;display:flex;align-items:center;justify-content:center;pointer-events:none}.revealImage .revealImageAligner{background-size:contain;background-repeat:no-repeat}.revealImage .revealImage__image{-webkit-user-select:none;user-select:none}.canvasTimeFilter .euiSuperDatePicker__flexWrapper{width:100%}.canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall{margin:0}.canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall>.euiFlexItem{margin:0}.canvasArgImage .canvasArgImage--preview{max-height:100px;overflow:hidden;border:1px solid #D3DAE6}\n',""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(174),content=__webpack_require__(371);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(175)(!1)).push([module.i,'.canvasContainerWrapper .euiAccordion__childWrapper{overflow-x:hidden}.canvasContainerWrapper .clickable{cursor:pointer}.canvasContainerWrapper .canvasPalettePicker__swatchesPopover{display:block}.canvasContainerWrapper .canvasPalettePicker__swatchesPopover .canvasPalettePicker__swatchesPopoverAnchor{display:block}.canvasContainerWrapper .euiImageFullScreen{min-width:100px}@media only screen and (min-width: 768px) and (max-width: 991px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}@media only screen and (min-width: 992px) and (max-width: 1199px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}@media only screen and (min-width: 1200px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}.canvas.canvasContainerWrapper{display:flex;flex-grow:1}.canvas.canvasContainer{display:flex;flex-grow:1;background-color:#141519}.canvasContainer--loading{position:fixed;top:50%;left:50%;transform:translateY(-50%);text-align:center}.canvasCheckered{background-color:#fff;background-image:linear-gradient(45deg, #343741 25%, transparent 25%),linear-gradient(-45deg, #343741 25%, transparent 25%),linear-gradient(45deg, transparent 75%, #343741 75%),linear-gradient(-45deg, transparent 75%, #343741 75%);background-size:8px 8px;position:relative}.canvasTextArea__code{scrollbar-width:thin;font-size:14px;font-family:"Roboto Mono",Consolas,Menlo,Courier,monospace;width:100%;max-width:100%}.canvasTextArea__code::-webkit-scrollbar{width:16px;height:16px}.canvasTextArea__code::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasTextArea__code::-webkit-scrollbar-corner,.canvasTextArea__code::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasContextMenu--topBorder{border-top:1px solid #343741}#canvas-app{overflow-y:hidden}#canvas-app .window-error{position:absolute;bottom:10px;right:10px;background-color:#F86B63;color:#fff;display:block;z-index:2000;padding:10px;max-width:500px}#canvas-app .window-error a{color:#fff;font-weight:bold}.canvasHomeApp{width:100%}.canvasHomeApp .canvasHomeApp__content{width:100%}.canvasHomeApp .canvasHomeApp__modalHeader{padding-right:24px}.canvasHomeApp .canvasHomeApp__modalHeader,.canvasHomeApp .canvasHomeApp__modalBody{width:auto}@media only screen and (max-width: 574px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}.canvasLayout{display:flex;background:#141519;flex-grow:1;overflow:hidden}.canvasLayout__rows{display:flex;flex-direction:column;flex-grow:1;max-height:100vh;max-width:100%}.canvasLayout__cols{display:flex;align-items:stretch;flex-grow:1}.canvasLayout__stage{flex-grow:1;flex-basis:auto;display:flex;flex-direction:column}.canvasLayout__stageHeader{flex-grow:0;flex-basis:auto;padding:1px 16px 0;font-size:14px;border-bottom:1px solid #343741;background:#25262E;-webkit-user-select:none;user-select:none}.canvasLayout__stageHeaderInner{height:48px}.canvasLayout__stageContent{flex-grow:1;flex-basis:auto;position:relative}.canvasLayout__stageContentOverflow{scrollbar-width:thin;position:absolute;top:0;left:0;right:0;bottom:0;overflow:auto;display:flex;align-items:center}.canvasLayout__stageContentOverflow::-webkit-scrollbar{width:16px;height:16px}.canvasLayout__stageContentOverflow::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasLayout__stageContentOverflow::-webkit-scrollbar-corner,.canvasLayout__stageContentOverflow::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasLayout__sidebar{flex-grow:0;flex-basis:auto;width:350px;background:#25262E;display:flex;position:relative;border-left:1px solid #343741}.canvasLayout__sidebar .euiPanel{margin-bottom:8px}.canvasLayout__footer{flex-grow:0;flex-basis:auto;width:100%;background-color:#141519;z-index:4000;font-size:14px}.canvasExport .canvasPage{position:relative;overflow:hidden;box-shadow:none}.canvasArg__add{padding:12px;text-align:left;width:100%}.canvasArg__add:not(:last-child){border-bottom:1px solid #343741}.canvasArg__add:hover{background-color:#25262E}.canvasArg__add:hover label{color:#D4DAE5}.canvasArg__addArg{margin-right:-8px}.canvasArg__addPopover{width:250px}.canvasArg{margin-top:8px}.canvasArg__remove{min-width:16px;padding:4px 0}.canvasArg__form{position:relative}.canvasArg__tooltip{margin-left:-32px}.canvasSidebar__accordion .canvasArg__form{position:static}.canvasArg__switch{padding-top:calc(8px * .75)}.canvasAssetManager .canvasAssetManager__modalHeader{flex-wrap:wrap}@media only screen and (max-width: 574px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{width:100%;padding-bottom:16px}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{width:100%;padding-bottom:16px}}.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:0;min-width:40%;align-items:center}@media only screen and (max-width: 574px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}.canvasAssetManager .canvasAssetManager__meterLabel{margin:0}.canvasAssetManager .canvasAssetManager__fileUploadWrapper{justify-content:flex-end;padding-right:16px}.canvasAssetManager .canvasAssetManager__modalFooter{justify-content:space-between}.canvasAssetManager .canvasAssetManager__emptyPanel{max-width:400px;margin:32px auto 0}.canvasAsset{text-align:center;overflow:hidden}.canvasAsset .canvasAsset__thumb{margin:-8px;margin-bottom:0;font-size:0;height:164px}.canvasAsset .canvasAsset__img{display:flex;align-items:center;justify-content:center;height:100%}.canvasAsset .canvasAsset__img img{width:auto;max-width:100%;max-height:164px}.canvasAssetPicker{scrollbar-width:thin;max-height:120px;overflow-x:hidden;overflow-y:auto}.canvasAssetPicker::-webkit-scrollbar{width:16px;height:16px}.canvasAssetPicker::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasAssetPicker::-webkit-scrollbar-corner,.canvasAssetPicker::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasAssetPicker .canvasAssetPicker__link{position:relative;width:100%;height:100%;text-align:center}.canvasAssetPicker .canvasAssetPicker__link:hover{outline:solid 4px rgba(54,162,239,0.1)}.canvasAssetPicker .canvasAssetPicker__selected{position:absolute;top:4px;right:4px}.canvasAssetPicker .euiImage{width:40px;height:40px}.autocomplete{position:relative}.autocompletePopup{position:absolute;top:-262px;height:260px;width:100%}.autocompleteItems{border-right:1px solid #343741}.autocompleteItems,.autocompleteReference{scrollbar-width:thin;height:258px;overflow:auto}.autocompleteItems::-webkit-scrollbar,.autocompleteReference::-webkit-scrollbar{width:16px;height:16px}.autocompleteItems::-webkit-scrollbar-thumb,.autocompleteReference::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.autocompleteItems::-webkit-scrollbar-corner,.autocompleteItems::-webkit-scrollbar-track,.autocompleteReference::-webkit-scrollbar-corner,.autocompleteReference::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.autocompleteReference{padding:8px 12px;background-color:#1e1e25}.autocompleteItem{padding:8px 12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-family:"Roboto Mono",Consolas,Menlo,Courier,monospace;font-weight:400}.autocompleteItem--isActive{color:#36A2EF;background-color:rgba(54,162,239,0.3)}.autocompleteType{padding:8px}.autocompleteTable .euiTable{background-color:transparent}.autocompleteDescList .euiDescriptionList__description{margin-right:8px}.canvasClipboard{cursor:pointer}.canvasColorDot{display:inline-block;position:relative;height:32px;width:32px}.canvasColorDot .canvasColorDot__background{position:absolute;height:32px;width:32px;border-radius:6px;top:0;left:0}.canvasColorDot .canvasColorDot__foreground{position:absolute;border:1px solid #343741;height:32px;width:32px;border-radius:6px;top:0;left:0;display:flex;align-items:center;justify-content:center}.canvasColorPalette .canvasColorPalette__dot{display:inline-block;margin:0 4px 4px 0}.canvasColorPickerPopover__popover{width:256px}.canvasCustomElementForm{min-width:400px}.canvasCustomElementForm__preview{max-width:210px;min-height:210px}.canvasCustomElementForm__thumbnail{padding-bottom:0}.canvasCustomElementForm__thumbnailHelp{color:#98A2B3}.canvasDataSource{background-color:#1D1E24;color:#DFE5EF;border-radius:1px solid #343741;margin:8px;padding:0 8px}.canvasDataSource__section,.canvasDataSource__list{padding:12px 12px 0}.canvasDataSource__sectionFooter{padding:0 12px}.canvasDataSource__triggerButton{color:#DFE5EF;font-size:16px;font-size:1.14286rem;line-height:1.71429rem;font-weight:700;line-height:40px}.canvasDataSource__triggerButtonIcon{margin-right:8px}.canvasDataSource__card .euiCard__content{padding-top:0 !important}.canvasDataSource__card+.canvasDataSource__card{margin-top:8px}.canvasDataSource__card--isCurrent{border-color:#7DDED8}.canvasDatasourcePreview{max-width:1000px;max-height:60vh;height:100%}.canvasDatasourcePreview .canvasDatasourcePreview__panel{height:calc(100% - 16px * 3)}.canvasDataTable{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between}.canvasDataTable .canvasDataTable__tableWrapper{scrollbar-width:thin;width:100%;height:100%;overflow:auto}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar{width:16px;height:16px}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner,.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner{background:transparent}.canvasDataTable .canvasDataTable__footer{width:100%;display:flex;justify-content:space-around;padding:8px;border-top:1px solid #343741}.canvasDataTable .canvasDataTable__table{min-width:100%}.canvasDataTable .canvasDataTable__th,.canvasDataTable .canvasDataTable__td{padding:8px 4px;border-bottom:1px solid #343741}.canvasDataTable .canvasDataTable__th{white-space:nowrap;font-weight:bold}.canvasDebug.euiCodeBlock{padding:0;width:100%;height:100%}.canvasDebug.euiCodeBlock .canvasDebug__content{scrollbar-width:thin;width:100%;height:100%;overflow:auto;padding:16px}.canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar{width:16px;height:16px}.canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-corner,.canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.dom-preview{pointer-events:none}.dom-preview .canvasLayoutAnnotation{display:none}.canvasElementCard__wrapper{position:relative}.canvasElementCard__wrapper:hover .canvasElementCard__controls,.canvasElementCard__wrapper:focus .canvasElementCard__controls{visibility:visible;opacity:1}.canvasElementCard__wrapper .canvasElementCard__controls{position:absolute;right:8px;top:8px;visibility:hidden;opacity:0;transition:opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);transition-delay:250ms;background:rgba(255,255,255,0.5);border-radius:6px}.canvasElementCard .euiCard__top{text-align:center;width:calc(100% + 16px * 2);height:85px;margin:calc(-1 * 16px) calc(-1 * 16px) 0}.canvasElementCard .euiCard__image{max-height:100%;max-width:100%;width:auto;left:0;top:0}.canvasElementCard.canvasElementCard--hasIcon .euiCard__top{min-width:210px;padding-top:16px}.canvasElement{height:100%;width:100%;overflow:hidden}.canvasElement__content{height:100%;width:100%}.canvasExpressionInput .euiFormErrorText{padding-left:16px}.canvasExpression--compactSize{max-height:480px}.canvasExpressionInput__editor{height:256px;padding-top:16px;flex-grow:1}.canvasExpression--fullSize{display:flex;flex-direction:column;position:fixed;top:0;bottom:0;left:0;right:0;z-index:5999}.canvasExpression--fullSize .canvasExpressionInput{flex-grow:1;display:flex;flex-direction:column}.canvasExpression--fullSize .canvasExpressionInput__inner{flex-grow:1;display:flex}.canvasExpression--fullSize .canvasTextArea__code{flex-grow:1;padding-right:40px}.canvasExpression__settings{padding:12px 16px;border-top:1px solid #343741;background-color:#1D1E24}body.canvas-isFullscreen.euiBody--headerIsFixed{padding-top:0}body.canvas-isFullscreen .headerWrapper ~ .app-wrapper{min-height:100vh}body.canvas-isFullscreen.euiBody--collapsibleNavIsDocked{padding-left:0 !important}body.canvas-isFullscreen .kbnLoadingIndicator{display:none}body.canvas-isFullscreen #globalBannerList{display:none}body.canvas-isFullscreen .canvasLayout{background:#000}body.canvas-isFullscreen .canvasLayout__stageHeader,body.canvas-isFullscreen .canvasLayout__sidebar,body.canvas-isFullscreen .canvasLayout__footer,body.canvas-isFullscreen .canvasGrid{display:none}body.canvas-isFullscreen .canvasLayout__stageContentOverflow{display:block;overflow:visible;position:static;top:auto;left:auto;right:auto;bottom:auto}body.canvas-isFullscreen .canvasLayout__stageContentOverflow .canvasWorkpad__buffer{padding:0;margin:0}body.canvas-isFullscreen .canvasLayout__rows{max-width:none}body.canvas-isFullscreen .canvasLayout__rows,body.canvas-isFullscreen .canvasLayout__cols{align-items:center;justify-content:center}body.canvas-isFullscreen .canvasCheckered{display:flex;background:none}body.canvas-isFullscreen .canvasPage{box-shadow:none;overflow:hidden}.canvasFunctionForm>.canvasLoading{text-align:center;font-size:20px}.canvasAlignmentGuide{transform-origin:center center;transform-style:preserve-3d}.canvasBorderConnection{position:absolute;top:0;width:100%;height:100%;pointer-events:none;border-top:1px dashed #343741;border-left:1px dashed #343741}.canvasBorderResizeHandle{box-shadow:0 0.8px 0.8px rgba(0,0,0,0.1),0 2.3px 2px rgba(0,0,0,0.075);transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:8px;width:8px;margin-left:-4px;margin-top:-4px;background-color:#1D1E24;border:1px solid #98A2B3}.canvasDragBoxAnnotation{position:absolute;background:none;transform-origin:center center;transform-style:preserve-3d;outline:dashed 1px #98A2B3;pointer-events:none}.canvasHoverAnnotation{position:absolute;background:none;transform-origin:center center;transform-style:preserve-3d;outline:solid 1px #54B399;pointer-events:none}.canvasRotationHandle{transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:24px;width:0;margin-left:-1px;margin-top:-12px;border-top:1px dashed #343741;border-left:1px dashed #343741}.canvasRotationHandle__handle{transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:9px;width:9px;margin-left:-5px;margin-top:-6px;border-radius:50%;background-color:#535966}.tooltipAnnotation{box-shadow:0 1px 5px rgba(0,0,0,0.25),0 3.6px 13px rgba(0,0,0,0.175),0 8.4px 23px rgba(0,0,0,0.15),0 23px 35px rgba(0,0,0,0.125);border-radius:6px;background-color:#000;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.85714rem;line-height:1.14286rem;padding:8px;position:absolute;transform-origin:center center;transform-style:preserve-3d;outline:none;pointer-events:none}.canvasLoading{display:flex;color:#343741;align-items:center}.canvasPageManager .canvasPageManager__pages{position:relative}.canvasPageManager .canvasPageManager__pages,.canvasPageManager .canvasPageManager__addPage{height:144px}.canvasPageManager .canvasPageManager--trayPop>div{animation:trayPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);opacity:0;animation-fill-mode:forwards}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(1n){animation-delay:.05s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(2n){animation-delay:.1s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(3n){animation-delay:.15s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(4n){animation-delay:.2s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(5n){animation-delay:.25s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(6n){animation-delay:.3s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(7n){animation-delay:.35s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(8n){animation-delay:.4s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(9n){animation-delay:.45s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(10n){animation-delay:.5s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(11n){animation-delay:.55s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(12n){animation-delay:.6s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(13n){animation-delay:.65s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(14n){animation-delay:.7s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(15n){animation-delay:.75s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(16n){animation-delay:.8s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(17n){animation-delay:.85s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(18n){animation-delay:.9s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(19n){animation-delay:.95s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(20n){animation-delay:1s}.canvasPageManager .canvasPageManager__pageList{scrollbar-width:thin;display:flex;overflow-x:auto;overflow-y:hidden;position:absolute;left:0;right:0;top:0;bottom:0}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar{width:16px;height:16px}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-corner,.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasPageManager .canvasPageManager__addPage{width:56px;background:#7DDED8;color:#fff;opacity:0;animation:buttonPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);animation-fill-mode:forwards}.canvasPageManager .canvasPageManager__addPageTip{display:block;height:100%}.canvasPageManager .canvasPageManager__page{padding:16px 16px 16px 8px}.canvasPageManager .canvasPageManager__page:focus,.canvasPageManager .canvasPageManager__page-isActive{background-color:rgba(0,0,0,0.5);outline:none;text-decoration:none}.canvasPageManager .canvasPageManager__page-isActive:focus .canvasPageManager__pagePreview{outline-color:#54B399}.canvasPageManager .canvasPageManager__page:hover,.canvasPageManager .canvasPageManager__page:focus{text-decoration:none}.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__pagePreview,.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__pagePreview{box-shadow:0 0.9px 4px -1px rgba(0,0,0,0.2),0 2.6px 8px -1px rgba(0,0,0,0.15),0 5.7px 12px -1px rgba(0,0,0,0.125),0 15px 15px -1px rgba(0,0,0,0.1)}.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__controls,.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__controls{visibility:visible;opacity:1}.canvasPageManager .canvasPageManager__page-isActive .canvasPageManager__pagePreview{box-shadow:0 0.9px 4px -1px rgba(0,0,0,0.2),0 2.6px 8px -1px rgba(0,0,0,0.15),0 5.7px 12px -1px rgba(0,0,0,0.125),0 15px 15px -1px rgba(0,0,0,0.1);outline:2px solid #343741;outline-color:#98A2B3}.canvasPageManager .canvasPageManager__pageNumber{color:#98A2B3}.canvasPageManager .canvasPageManager__pagePreview{box-shadow:0 0.7px 1.4px rgba(0,0,0,0.175),0 1.9px 4px rgba(0,0,0,0.125),0 4.5px 10px rgba(0,0,0,0.125);position:relative;overflow:hidden;color:#DFE5EF}.canvasPageManager .canvasPageManager__pagePreview .canvasPositionable{position:absolute}.canvasPageManager .canvasPageManager__controls{position:absolute;right:8px;top:8px;visibility:hidden;opacity:0;transition:opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);transition-delay:250ms;background:rgba(255,255,255,0.5);border-radius:6px}@keyframes buttonPop{0%{opacity:0;transform:translateX(100%)}1%{opacity:0;transform:translateX(100%)}100%{opacity:1;transform:translateY(0)}}@keyframes trayPop{0%{opacity:0;transform:translateY(100%)}1%{opacity:0;transform:translateY(100%)}100%{opacity:1;transform:translateY(0)}}.canvasPositionable{transform-origin:center center;transform-style:preserve-3d}.canvasShapePreview{width:40px;height:40px}.canvasShapePreview svg{width:100%;height:100%}.canvasShapePicker{width:192px}.canvasSidebar{scrollbar-width:thin;width:100%;max-height:100vh;overflow-y:auto;overflow-x:hidden;position:absolute;top:0;bottom:0}.canvasSidebar::-webkit-scrollbar{width:16px;height:16px}.canvasSidebar::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasSidebar::-webkit-scrollbar-corner,.canvasSidebar::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasSidebar__pop{animation:sidebarPop 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.canvasSidebarFlyout{width:350px;min-width:350px}.canvasSidebar__elementButtons{background:#1a1a20;margin-bottom:8px}.canvasSidebar__panel{border-bottom:1px solid #343741;padding:8px 12px}.canvasSidebar__panel--isEmpty{border-bottom:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion{margin-bottom:-8px}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion:after{content:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion.euiAccordion-isOpen:after{display:none}.canvasSidebar__panel-noMinWidth .euiButton{min-width:0}.canvasSidebar__expandable+.canvasSidebar__expandable{margin-top:0}.canvasSidebar__expandable+.canvasSidebar__expandable .canvasSidebar__accordion:before{display:none}.canvasSidebar__accordion{padding:12px;margin:0 -12px;background:#25262E;position:relative}.canvasSidebar__accordion.euiAccordion-isOpen{background:transparent}.canvasSidebar__accordion:before,.canvasSidebar__accordion:after{content:\'\';height:1px;position:absolute;left:0;width:100%;background:#343741}.canvasSidebar__accordion:before{top:0}.canvasSidebar__accordion:after{bottom:0}.canvasSidebar__accordionContent{padding-top:16px;padding-left:28px}@keyframes sidebarPop{0%{opacity:0}1%{opacity:0}100%{opacity:1}}.canvasLayout__sidebarHeader{padding:calc(12px + 2px) 8px}.canvasLayout__sidebarHeaderWorkpad{padding:calc(8px * .75) 0}.canvasToolbar{position:relative}.canvasTray__toggle{position:absolute;top:-20px;left:50%;background-color:#16171c;margin:0;border-radius:6px 6px 0 0}.canvasTray__toggle>.euiFlexItem{margin:0}.canvasTray__toggle button{padding:4px 12px;box-shadow:0 -2px 1px rgba(255,255,255,0.1)}.canvasToolbar__controls{padding:12px;height:100%}.canvasToolbar__container{width:100%;height:64px;background-color:#1a1a20;position:relative;z-index:200}.canvasTray{box-shadow:0 0 0.8px rgba(0,0,0,0.15),0 0 2px rgba(0,0,0,0.1),0 0 5px rgba(0,0,0,0.1),0 0 17px rgba(0,0,0,0.075);flex-direction:column}.canvasTray__panel{background-color:#16171c;border-radius:0}.canvasWorkpad{position:relative}.canvasWorkpad__buffer{padding:16px;margin:auto}.canvasGrid{position:absolute;-webkit-user-select:none;user-select:none;pointer-events:none;background-image:linear-gradient(to right, #535966 1px, transparent 1px),linear-gradient(to bottom, #535966 1px, transparent 1px);background-size:50px 50px;top:0}.canvasElementMenu__popoverButton{margin-right:8px}.canvasShareMenu__panelContent{padding:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre{scrollbar-width:thin;overflow-x:auto;white-space:pre}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar{width:16px;height:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-corner,.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasViewMenu__kioskSettings,.canvasViewMenu__refreshSettings{padding:16px}.canvasWorkpad__upload--compressed.euiFilePicker--compressed.euiFilePicker .euiFilePicker__prompt{height:40px;padding:12px;padding-left:40px}.canvasWorkpad__upload--compressed.euiFilePicker--compressed.euiFilePicker .euiFilePicker__icon{top:12px}@media only screen and (max-width: 574px){.canvasWorkpad__upload--compressed .euiFilePicker__wrap{max-width:none}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasWorkpad__upload--compressed .euiFilePicker__wrap{max-width:none}}.canvasWorkpad__dropzone{border:2px dashed transparent}.canvasWorkpad__dropzone--active{background-color:#25262E;border-color:#343741}.canvasWorkpad__dropzoneTable .euiTable{background-color:transparent}.canvasWorkpad__dropzoneTable--tags .euiTableCellContent{flex-wrap:wrap}.canvasWorkpad__dropzoneTable--tags .euiHealth{width:100%}.canvasPage{box-shadow:0 0 0.8px rgba(0,0,0,0.15),0 0 2px rgba(0,0,0,0.1),0 0 5px rgba(0,0,0,0.1),0 0 17px rgba(0,0,0,0.075);z-index:initial;position:absolute;top:0;transform-style:preserve-3d !important;background-color:#1D1E24}.canvasInteractivePage{-webkit-user-select:none;user-select:none}.canvasLayout__stage .canvasStaticPage.isInactive{visibility:hidden;opacity:0}.canvasAdvancedFilter{width:100%;font-size:inherit}.canvasAdvancedFilter .canvasAdvancedFilter__input{background-color:#1D1E24;width:100%;padding:4px 16px;border:1px solid #343741;border-radius:6px;font-size:inherit;line-height:19px;font-family:monospace}.canvasAdvancedFilter .canvasAdvancedFilter__input:focus{box-shadow:none}.canvasAdvancedFilter .canvasAdvancedFilter__button{width:100%;padding:4px 8px;border:1px solid #343741;border-radius:6px;background-color:#1D1E24;font-size:inherit}.canvasAdvancedFilter .canvasAdvancedFilter__button:hover{background-color:#25262E}.canvasDropdownFilter{width:100%;font-size:inherit;position:relative}.canvasDropdownFilter .canvasDropdownFilter__select{background-color:#1D1E24;width:100%;padding:4px 16px;border:1px solid #343741;border-radius:6px;-webkit-appearance:none;appearance:none;font-size:inherit}.canvasDropdownFilter .canvasDropdownFilter__select:after{display:none}.canvasDropdownFilter .canvasDropdownFilter__select:focus{box-shadow:none}.canvasDropdownFilter .canvasDropdownFilter__icon{position:absolute;right:8px;top:8px;pointer-events:none}.canvasEmbeddable .embPanel{border:none;background:none}.canvasEmbeddable .embPanel .embPanel__title{margin-bottom:4px}.canvasEmbeddable .embPanel .embPanel__optionsMenuButton{border-radius:6px}.canvas-isFullscreen .canvasEmbeddable .embPanel .embPanel__optionsMenuButton{opacity:0}.canvas-isFullscreen .canvasEmbeddable .embPanel:focus .embPanel__optionsMenuButton,.canvas-isFullscreen .canvasEmbeddable .embPanel:hover .embPanel__optionsMenuButton{opacity:1}.canvasEmbeddable .euiTable{background:none}.legendLabel{color:#DFE5EF}.legendColorBox>div>div{border-radius:16px}.revealImage{height:100%;width:100%;display:flex;align-items:center;justify-content:center;pointer-events:none}.revealImage .revealImageAligner{background-size:contain;background-repeat:no-repeat}.revealImage .revealImage__image{-webkit-user-select:none;user-select:none}.canvasTimeFilter .euiSuperDatePicker__flexWrapper{width:100%}.canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall{margin:0}.canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall>.euiFlexItem{margin:0}.canvasArgImage .canvasArgImage--preview{max-height:100px;overflow:hidden;border:1px solid #343741}\n',""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(174),content=__webpack_require__(373);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(175)(!1)).push([module.i,'.canvasContainerWrapper .euiAccordion__childWrapper{overflow-x:hidden}.canvasContainerWrapper .clickable{cursor:pointer}.canvasContainerWrapper .canvasPalettePicker__swatchesPopover{display:block}.canvasContainerWrapper .canvasPalettePicker__swatchesPopover .canvasPalettePicker__swatchesPopoverAnchor{display:block}.canvasContainerWrapper .euiImageFullScreen{min-width:100px}@media only screen and (min-width: 768px) and (max-width: 991px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}@media only screen and (min-width: 992px) and (max-width: 1199px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}@media only screen and (min-width: 1200px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}.canvas.canvasContainerWrapper{display:flex;flex-grow:1}.canvas.canvasContainer{display:flex;flex-grow:1;background-color:#fafbfd}.canvasContainer--loading{position:fixed;top:50%;left:50%;transform:translateY(-50%);text-align:center}.canvasCheckered{background-color:#fff;background-image:linear-gradient(45deg, #D3DAE6 25%, transparent 25%),linear-gradient(-45deg, #D3DAE6 25%, transparent 25%),linear-gradient(45deg, transparent 75%, #D3DAE6 75%),linear-gradient(-45deg, transparent 75%, #D3DAE6 75%);background-size:8px 8px;position:relative}.canvasTextArea__code{scrollbar-width:thin;font-size:14px;font-family:"Roboto Mono",Consolas,Menlo,Courier,monospace;width:100%;max-width:100%}.canvasTextArea__code::-webkit-scrollbar{width:16px;height:16px}.canvasTextArea__code::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasTextArea__code::-webkit-scrollbar-corner,.canvasTextArea__code::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasContextMenu--topBorder{border-top:1px solid #D3DAE6}#canvas-app{overflow-y:hidden}#canvas-app .window-error{position:absolute;bottom:10px;right:10px;background-color:#BD271E;color:#fff;display:block;z-index:2000;padding:10px;max-width:500px}#canvas-app .window-error a{color:#fff;font-weight:bold}.canvasHomeApp{width:100%}.canvasHomeApp .canvasHomeApp__content{width:100%}.canvasHomeApp .canvasHomeApp__modalHeader{padding-right:24px}.canvasHomeApp .canvasHomeApp__modalHeader,.canvasHomeApp .canvasHomeApp__modalBody{width:auto}@media only screen and (max-width: 574px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}.canvasLayout{display:flex;background:#fafbfd;flex-grow:1;overflow:hidden}.canvasLayout__rows{display:flex;flex-direction:column;flex-grow:1;max-height:100vh;max-width:100%}.canvasLayout__cols{display:flex;align-items:stretch;flex-grow:1}.canvasLayout__stage{flex-grow:1;flex-basis:auto;display:flex;flex-direction:column}.canvasLayout__stageHeader{flex-grow:0;flex-basis:auto;padding:1px 16px 0;font-size:14px;border-bottom:1px solid #D3DAE6;background:#F5F7FA;-webkit-user-select:none;user-select:none}.canvasLayout__stageHeaderInner{height:48px}.canvasLayout__stageContent{flex-grow:1;flex-basis:auto;position:relative}.canvasLayout__stageContentOverflow{scrollbar-width:thin;position:absolute;top:0;left:0;right:0;bottom:0;overflow:auto;display:flex;align-items:center}.canvasLayout__stageContentOverflow::-webkit-scrollbar{width:16px;height:16px}.canvasLayout__stageContentOverflow::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasLayout__stageContentOverflow::-webkit-scrollbar-corner,.canvasLayout__stageContentOverflow::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasLayout__sidebar{flex-grow:0;flex-basis:auto;width:350px;background:#F5F7FA;display:flex;position:relative;border-left:1px solid #D3DAE6}.canvasLayout__sidebar .euiPanel{margin-bottom:8px}.canvasLayout__footer{flex-grow:0;flex-basis:auto;width:100%;background-color:#fafbfd;z-index:4000;font-size:14px}.canvasExport .canvasPage{position:relative;overflow:hidden;box-shadow:none}.canvasArg__add{padding:12px;text-align:left;width:100%}.canvasArg__add:not(:last-child){border-bottom:1px solid #D3DAE6}.canvasArg__add:hover{background-color:#F5F7FA}.canvasArg__add:hover label{color:#343741}.canvasArg__addArg{margin-right:-8px}.canvasArg__addPopover{width:250px}.canvasArg{margin-top:8px}.canvasArg__remove{min-width:16px;padding:4px 0}.canvasArg__form{position:relative}.canvasArg__tooltip{margin-left:-32px}.canvasSidebar__accordion .canvasArg__form{position:static}.canvasArg__switch{padding-top:calc(8px * .75)}.canvasAssetManager .canvasAssetManager__modalHeader{flex-wrap:wrap}@media only screen and (max-width: 574px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{width:100%;padding-bottom:16px}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{width:100%;padding-bottom:16px}}.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:0;min-width:40%;align-items:center}@media only screen and (max-width: 574px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}.canvasAssetManager .canvasAssetManager__meterLabel{margin:0}.canvasAssetManager .canvasAssetManager__fileUploadWrapper{justify-content:flex-end;padding-right:16px}.canvasAssetManager .canvasAssetManager__modalFooter{justify-content:space-between}.canvasAssetManager .canvasAssetManager__emptyPanel{max-width:400px;margin:32px auto 0}.canvasAsset{text-align:center;overflow:hidden}.canvasAsset .canvasAsset__thumb{margin:-8px;margin-bottom:0;font-size:0;height:164px}.canvasAsset .canvasAsset__img{display:flex;align-items:center;justify-content:center;height:100%}.canvasAsset .canvasAsset__img img{width:auto;max-width:100%;max-height:164px}.canvasAssetPicker{scrollbar-width:thin;max-height:120px;overflow-x:hidden;overflow-y:auto}.canvasAssetPicker::-webkit-scrollbar{width:16px;height:16px}.canvasAssetPicker::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasAssetPicker::-webkit-scrollbar-corner,.canvasAssetPicker::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasAssetPicker .canvasAssetPicker__link{position:relative;width:100%;height:100%;text-align:center}.canvasAssetPicker .canvasAssetPicker__link:hover{outline:solid 4px rgba(0,119,204,0.1)}.canvasAssetPicker .canvasAssetPicker__selected{position:absolute;top:4px;right:4px}.canvasAssetPicker .euiImage{width:40px;height:40px}.autocomplete{position:relative}.autocompletePopup{position:absolute;top:-262px;height:260px;width:100%}.autocompleteItems{border-right:1px solid #D3DAE6}.autocompleteItems,.autocompleteReference{scrollbar-width:thin;height:258px;overflow:auto}.autocompleteItems::-webkit-scrollbar,.autocompleteReference::-webkit-scrollbar{width:16px;height:16px}.autocompleteItems::-webkit-scrollbar-thumb,.autocompleteReference::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.autocompleteItems::-webkit-scrollbar-corner,.autocompleteItems::-webkit-scrollbar-track,.autocompleteReference::-webkit-scrollbar-corner,.autocompleteReference::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.autocompleteReference{padding:8px 12px;background-color:#fcfcfd}.autocompleteItem{padding:8px 12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-family:"Roboto Mono",Consolas,Menlo,Courier,monospace;font-weight:400}.autocompleteItem--isActive{color:#07C;background-color:rgba(0,119,204,0.1)}.autocompleteType{padding:8px}.autocompleteTable .euiTable{background-color:transparent}.autocompleteDescList .euiDescriptionList__description{margin-right:8px}.canvasClipboard{cursor:pointer}.canvasColorDot{display:inline-block;position:relative;height:32px;width:32px}.canvasColorDot .canvasColorDot__background{position:absolute;height:32px;width:32px;border-radius:6px;top:0;left:0}.canvasColorDot .canvasColorDot__foreground{position:absolute;border:1px solid #D3DAE6;height:32px;width:32px;border-radius:6px;top:0;left:0;display:flex;align-items:center;justify-content:center}.canvasColorPalette .canvasColorPalette__dot{display:inline-block;margin:0 4px 4px 0}.canvasColorPickerPopover__popover{width:256px}.canvasCustomElementForm{min-width:400px}.canvasCustomElementForm__preview{max-width:210px;min-height:210px}.canvasCustomElementForm__thumbnail{padding-bottom:0}.canvasCustomElementForm__thumbnailHelp{color:#69707D}.canvasDataSource{background-color:#fff;color:#343741;border-radius:1px solid #D3DAE6;margin:8px;padding:0 8px}.canvasDataSource__section,.canvasDataSource__list{padding:12px 12px 0}.canvasDataSource__sectionFooter{padding:0 12px}.canvasDataSource__triggerButton{color:#1a1c21;font-size:16px;font-size:1.14286rem;line-height:1.71429rem;font-weight:700;line-height:40px}.canvasDataSource__triggerButtonIcon{margin-right:8px}.canvasDataSource__card .euiCard__content{padding-top:0 !important}.canvasDataSource__card+.canvasDataSource__card{margin-top:8px}.canvasDataSource__card--isCurrent{border-color:#00BFB3}.canvasDatasourcePreview{max-width:1000px;max-height:60vh;height:100%}.canvasDatasourcePreview .canvasDatasourcePreview__panel{height:calc(100% - 16px * 3)}.canvasDataTable{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between}.canvasDataTable .canvasDataTable__tableWrapper{scrollbar-width:thin;width:100%;height:100%;overflow:auto}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar{width:16px;height:16px}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner,.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner{background:transparent}.canvasDataTable .canvasDataTable__footer{width:100%;display:flex;justify-content:space-around;padding:8px;border-top:1px solid #D3DAE6}.canvasDataTable .canvasDataTable__table{min-width:100%}.canvasDataTable .canvasDataTable__th,.canvasDataTable .canvasDataTable__td{padding:8px 4px;border-bottom:1px solid #D3DAE6}.canvasDataTable .canvasDataTable__th{white-space:nowrap;font-weight:bold}.canvasDebug.euiCodeBlock{padding:0;width:100%;height:100%}.canvasDebug.euiCodeBlock .canvasDebug__content{scrollbar-width:thin;width:100%;height:100%;overflow:auto;padding:16px}.canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar{width:16px;height:16px}.canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-corner,.canvasDebug.euiCodeBlock .canvasDebug__content::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.dom-preview{pointer-events:none}.dom-preview .canvasLayoutAnnotation{display:none}.canvasElementCard__wrapper{position:relative}.canvasElementCard__wrapper:hover .canvasElementCard__controls,.canvasElementCard__wrapper:focus .canvasElementCard__controls{visibility:visible;opacity:1}.canvasElementCard__wrapper .canvasElementCard__controls{position:absolute;right:8px;top:8px;visibility:hidden;opacity:0;transition:opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);transition-delay:250ms;background:rgba(255,255,255,0.5);border-radius:6px}.canvasElementCard .euiCard__top{text-align:center;width:calc(100% + 16px * 2);height:85px;margin:calc(-1 * 16px) calc(-1 * 16px) 0}.canvasElementCard .euiCard__image{max-height:100%;max-width:100%;width:auto;left:0;top:0}.canvasElementCard.canvasElementCard--hasIcon .euiCard__top{min-width:210px;padding-top:16px}.canvasElement{height:100%;width:100%;overflow:hidden}.canvasElement__content{height:100%;width:100%}.canvasExpressionInput .euiFormErrorText{padding-left:16px}.canvasExpression--compactSize{max-height:480px}.canvasExpressionInput__editor{height:256px;padding-top:16px;flex-grow:1}.canvasExpression--fullSize{display:flex;flex-direction:column;position:fixed;top:0;bottom:0;left:0;right:0;z-index:5999}.canvasExpression--fullSize .canvasExpressionInput{flex-grow:1;display:flex;flex-direction:column}.canvasExpression--fullSize .canvasExpressionInput__inner{flex-grow:1;display:flex}.canvasExpression--fullSize .canvasTextArea__code{flex-grow:1;padding-right:40px}.canvasExpression__settings{padding:12px 16px;border-top:1px solid #D3DAE6;background-color:#fff}body.canvas-isFullscreen.euiBody--headerIsFixed{padding-top:0}body.canvas-isFullscreen .headerWrapper ~ .app-wrapper{min-height:100vh}body.canvas-isFullscreen.euiBody--collapsibleNavIsDocked{padding-left:0 !important}body.canvas-isFullscreen .kbnLoadingIndicator{display:none}body.canvas-isFullscreen #globalBannerList{display:none}body.canvas-isFullscreen .canvasLayout{background:#000}body.canvas-isFullscreen .canvasLayout__stageHeader,body.canvas-isFullscreen .canvasLayout__sidebar,body.canvas-isFullscreen .canvasLayout__footer,body.canvas-isFullscreen .canvasGrid{display:none}body.canvas-isFullscreen .canvasLayout__stageContentOverflow{display:block;overflow:visible;position:static;top:auto;left:auto;right:auto;bottom:auto}body.canvas-isFullscreen .canvasLayout__stageContentOverflow .canvasWorkpad__buffer{padding:0;margin:0}body.canvas-isFullscreen .canvasLayout__rows{max-width:none}body.canvas-isFullscreen .canvasLayout__rows,body.canvas-isFullscreen .canvasLayout__cols{align-items:center;justify-content:center}body.canvas-isFullscreen .canvasCheckered{display:flex;background:none}body.canvas-isFullscreen .canvasPage{box-shadow:none;overflow:hidden}.canvasFunctionForm>.canvasLoading{text-align:center;font-size:20px}.canvasAlignmentGuide{transform-origin:center center;transform-style:preserve-3d}.canvasBorderConnection{position:absolute;top:0;width:100%;height:100%;pointer-events:none;border-top:1px dashed #D3DAE6;border-left:1px dashed #D3DAE6}.canvasBorderResizeHandle{box-shadow:0 0.8px 0.8px rgba(0,0,0,0.04),0 2.3px 2px rgba(0,0,0,0.03);transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:8px;width:8px;margin-left:-4px;margin-top:-4px;background-color:#fff;border:1px solid #69707D}.canvasDragBoxAnnotation{position:absolute;background:none;transform-origin:center center;transform-style:preserve-3d;outline:dashed 1px #69707D;pointer-events:none}.canvasHoverAnnotation{position:absolute;background:none;transform-origin:center center;transform-style:preserve-3d;outline:solid 1px #54B399;pointer-events:none}.canvasRotationHandle{transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:24px;width:0;margin-left:-1px;margin-top:-12px;border-top:1px dashed #D3DAE6;border-left:1px dashed #D3DAE6}.canvasRotationHandle__handle{transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:9px;width:9px;margin-left:-5px;margin-top:-6px;border-radius:50%;background-color:#98A2B3}.tooltipAnnotation{box-shadow:0 1px 5px rgba(0,0,0,0.1),0 3.6px 13px rgba(0,0,0,0.07),0 8.4px 23px rgba(0,0,0,0.06),0 23px 35px rgba(0,0,0,0.05);border-radius:6px;background-color:#404040;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.85714rem;line-height:1.14286rem;padding:8px;position:absolute;transform-origin:center center;transform-style:preserve-3d;outline:none;pointer-events:none}.canvasLoading{display:flex;color:#D3DAE6;align-items:center}.canvasPageManager .canvasPageManager__pages{position:relative}.canvasPageManager .canvasPageManager__pages,.canvasPageManager .canvasPageManager__addPage{height:144px}.canvasPageManager .canvasPageManager--trayPop>div{animation:trayPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);opacity:0;animation-fill-mode:forwards}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(1n){animation-delay:.05s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(2n){animation-delay:.1s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(3n){animation-delay:.15s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(4n){animation-delay:.2s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(5n){animation-delay:.25s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(6n){animation-delay:.3s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(7n){animation-delay:.35s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(8n){animation-delay:.4s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(9n){animation-delay:.45s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(10n){animation-delay:.5s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(11n){animation-delay:.55s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(12n){animation-delay:.6s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(13n){animation-delay:.65s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(14n){animation-delay:.7s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(15n){animation-delay:.75s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(16n){animation-delay:.8s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(17n){animation-delay:.85s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(18n){animation-delay:.9s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(19n){animation-delay:.95s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(20n){animation-delay:1s}.canvasPageManager .canvasPageManager__pageList{scrollbar-width:thin;display:flex;overflow-x:auto;overflow-y:hidden;position:absolute;left:0;right:0;top:0;bottom:0}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar{width:16px;height:16px}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-corner,.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasPageManager .canvasPageManager__addPage{width:56px;background:#00BFB3;color:#fff;opacity:0;animation:buttonPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);animation-fill-mode:forwards}.canvasPageManager .canvasPageManager__addPageTip{display:block;height:100%}.canvasPageManager .canvasPageManager__page{padding:16px 16px 16px 8px}.canvasPageManager .canvasPageManager__page:focus,.canvasPageManager .canvasPageManager__page-isActive{background-color:rgba(143,165,199,0.5);outline:none;text-decoration:none}.canvasPageManager .canvasPageManager__page-isActive:focus .canvasPageManager__pagePreview{outline-color:#54B399}.canvasPageManager .canvasPageManager__page:hover,.canvasPageManager .canvasPageManager__page:focus{text-decoration:none}.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__pagePreview,.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__pagePreview{box-shadow:0 0.9px 4px -1px rgba(0,0,0,0.08),0 2.6px 8px -1px rgba(0,0,0,0.06),0 5.7px 12px -1px rgba(0,0,0,0.05),0 15px 15px -1px rgba(0,0,0,0.04)}.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__controls,.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__controls{visibility:visible;opacity:1}.canvasPageManager .canvasPageManager__page-isActive .canvasPageManager__pagePreview{box-shadow:0 0.9px 4px -1px rgba(0,0,0,0.08),0 2.6px 8px -1px rgba(0,0,0,0.06),0 5.7px 12px -1px rgba(0,0,0,0.05),0 15px 15px -1px rgba(0,0,0,0.04);outline:2px solid #D3DAE6;outline-color:#69707D}.canvasPageManager .canvasPageManager__pageNumber{color:#69707D}.canvasPageManager .canvasPageManager__pagePreview{box-shadow:0 0.7px 1.4px rgba(0,0,0,0.07),0 1.9px 4px rgba(0,0,0,0.05),0 4.5px 10px rgba(0,0,0,0.05);position:relative;overflow:hidden;color:#343741}.canvasPageManager .canvasPageManager__pagePreview .canvasPositionable{position:absolute}.canvasPageManager .canvasPageManager__controls{position:absolute;right:8px;top:8px;visibility:hidden;opacity:0;transition:opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);transition-delay:250ms;background:rgba(255,255,255,0.5);border-radius:6px}@keyframes buttonPop{0%{opacity:0;transform:translateX(100%)}1%{opacity:0;transform:translateX(100%)}100%{opacity:1;transform:translateY(0)}}@keyframes trayPop{0%{opacity:0;transform:translateY(100%)}1%{opacity:0;transform:translateY(100%)}100%{opacity:1;transform:translateY(0)}}.canvasPositionable{transform-origin:center center;transform-style:preserve-3d}.canvasShapePreview{width:40px;height:40px}.canvasShapePreview svg{width:100%;height:100%}.canvasShapePicker{width:192px}.canvasSidebar{scrollbar-width:thin;width:100%;max-height:100vh;overflow-y:auto;overflow-x:hidden;position:absolute;top:0;bottom:0}.canvasSidebar::-webkit-scrollbar{width:16px;height:16px}.canvasSidebar::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasSidebar::-webkit-scrollbar-corner,.canvasSidebar::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasSidebar__pop{animation:sidebarPop 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.canvasSidebarFlyout{width:350px;min-width:350px}.canvasSidebar__elementButtons{background:#e4e9f2;margin-bottom:8px}.canvasSidebar__panel{border-bottom:1px solid #D3DAE6;padding:8px 12px}.canvasSidebar__panel--isEmpty{border-bottom:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion{margin-bottom:-8px}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion:after{content:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion.euiAccordion-isOpen:after{display:none}.canvasSidebar__panel-noMinWidth .euiButton{min-width:0}.canvasSidebar__expandable+.canvasSidebar__expandable{margin-top:0}.canvasSidebar__expandable+.canvasSidebar__expandable .canvasSidebar__accordion:before{display:none}.canvasSidebar__accordion{padding:12px;margin:0 -12px;background:#F5F7FA;position:relative}.canvasSidebar__accordion.euiAccordion-isOpen{background:transparent}.canvasSidebar__accordion:before,.canvasSidebar__accordion:after{content:\'\';height:1px;position:absolute;left:0;width:100%;background:#D3DAE6}.canvasSidebar__accordion:before{top:0}.canvasSidebar__accordion:after{bottom:0}.canvasSidebar__accordionContent{padding-top:16px;padding-left:28px}@keyframes sidebarPop{0%{opacity:0}1%{opacity:0}100%{opacity:1}}.canvasLayout__sidebarHeader{padding:calc(12px + 2px) 8px}.canvasLayout__sidebarHeaderWorkpad{padding:calc(8px * .75) 0}.canvasToolbar{position:relative}.canvasTray__toggle{position:absolute;top:-20px;left:50%;background-color:#fbfcfd;margin:0;border-radius:6px 6px 0 0}.canvasTray__toggle>.euiFlexItem{margin:0}.canvasTray__toggle button{padding:4px 12px;box-shadow:0 -2px 1px rgba(0,0,0,0.1)}.canvasToolbar__controls{padding:12px;height:100%}.canvasToolbar__container{width:100%;height:64px;background-color:#e4e9f2;position:relative;z-index:200}.canvasTray{box-shadow:0 0 0.8px rgba(0,0,0,0.06),0 0 2px rgba(0,0,0,0.04),0 0 5px rgba(0,0,0,0.04),0 0 17px rgba(0,0,0,0.03);flex-direction:column}.canvasTray__panel{background-color:#fbfcfd;border-radius:0}.canvasWorkpad{position:relative}.canvasWorkpad__buffer{padding:16px;margin:auto}.canvasGrid{position:absolute;-webkit-user-select:none;user-select:none;pointer-events:none;background-image:linear-gradient(to right, #98A2B3 1px, transparent 1px),linear-gradient(to bottom, #98A2B3 1px, transparent 1px);background-size:50px 50px;top:0}.canvasElementMenu__popoverButton{margin-right:8px}.canvasShareMenu__panelContent{padding:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre{scrollbar-width:thin;overflow-x:auto;white-space:pre}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar{width:16px;height:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-corner,.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasViewMenu__kioskSettings,.canvasViewMenu__refreshSettings{padding:16px}.canvasWorkpad__upload--compressed.euiFilePicker--compressed.euiFilePicker .euiFilePicker__prompt{height:40px;padding:12px;padding-left:40px}.canvasWorkpad__upload--compressed.euiFilePicker--compressed.euiFilePicker .euiFilePicker__icon{top:12px}@media only screen and (max-width: 574px){.canvasWorkpad__upload--compressed .euiFilePicker__wrap{max-width:none}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasWorkpad__upload--compressed .euiFilePicker__wrap{max-width:none}}.canvasWorkpad__dropzone{border:2px dashed transparent}.canvasWorkpad__dropzone--active{background-color:#F5F7FA;border-color:#D3DAE6}.canvasWorkpad__dropzoneTable .euiTable{background-color:transparent}.canvasWorkpad__dropzoneTable--tags .euiTableCellContent{flex-wrap:wrap}.canvasWorkpad__dropzoneTable--tags .euiHealth{width:100%}.canvasPage{box-shadow:0 0 0.8px rgba(0,0,0,0.06),0 0 2px rgba(0,0,0,0.04),0 0 5px rgba(0,0,0,0.04),0 0 17px rgba(0,0,0,0.03);z-index:initial;position:absolute;top:0;transform-style:preserve-3d !important;background-color:#fff}.canvasInteractivePage{-webkit-user-select:none;user-select:none}.canvasLayout__stage .canvasStaticPage.isInactive{visibility:hidden;opacity:0}.canvasAdvancedFilter{width:100%;font-size:inherit}.canvasAdvancedFilter .canvasAdvancedFilter__input{background-color:#fff;width:100%;padding:4px 16px;border:1px solid #D3DAE6;border-radius:6px;font-size:inherit;line-height:19px;font-family:monospace}.canvasAdvancedFilter .canvasAdvancedFilter__input:focus{box-shadow:none}.canvasAdvancedFilter .canvasAdvancedFilter__button{width:100%;padding:4px 8px;border:1px solid #D3DAE6;border-radius:6px;background-color:#fff;font-size:inherit}.canvasAdvancedFilter .canvasAdvancedFilter__button:hover{background-color:#F5F7FA}.canvasDropdownFilter{width:100%;font-size:inherit;position:relative}.canvasDropdownFilter .canvasDropdownFilter__select{background-color:#fff;width:100%;padding:4px 16px;border:1px solid #D3DAE6;border-radius:6px;-webkit-appearance:none;appearance:none;font-size:inherit}.canvasDropdownFilter .canvasDropdownFilter__select:after{display:none}.canvasDropdownFilter .canvasDropdownFilter__select:focus{box-shadow:none}.canvasDropdownFilter .canvasDropdownFilter__icon{position:absolute;right:8px;top:8px;pointer-events:none}.canvasEmbeddable .embPanel{border:none;background:none}.canvasEmbeddable .embPanel .embPanel__title{margin-bottom:4px}.canvasEmbeddable .embPanel .embPanel__optionsMenuButton{border-radius:6px}.canvas-isFullscreen .canvasEmbeddable .embPanel .embPanel__optionsMenuButton{opacity:0}.canvas-isFullscreen .canvasEmbeddable .embPanel:focus .embPanel__optionsMenuButton,.canvas-isFullscreen .canvasEmbeddable .embPanel:hover .embPanel__optionsMenuButton{opacity:1}.canvasEmbeddable .euiTable{background:none}.legendLabel{color:#343741}.legendColorBox>div>div{border-radius:16px}.revealImage{height:100%;width:100%;display:flex;align-items:center;justify-content:center;pointer-events:none}.revealImage .revealImageAligner{background-size:contain;background-repeat:no-repeat}.revealImage .revealImage__image{-webkit-user-select:none;user-select:none}.canvasTimeFilter .euiSuperDatePicker__flexWrapper{width:100%}.canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall{margin:0}.canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall>.euiFlexItem{margin:0}.canvasArgImage .canvasArgImage--preview{max-height:100px;overflow:hidden;border:1px solid #D3DAE6}\n',""]),module.exports=exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"renderApp",(function(){return renderApp})),__webpack_require__.d(__webpack_exports__,"initializeCanvas",(function(){return initializeCanvas})),__webpack_require__.d(__webpack_exports__,"teardownCanvas",(function(){return teardownCanvas}));var transient_namespaceObject={};__webpack_require__.r(transient_namespaceObject),__webpack_require__.d(transient_namespaceObject,"setFullscreen",(function(){return setFullscreen})),__webpack_require__.d(transient_namespaceObject,"selectToplevelNodes",(function(){return transient_selectToplevelNodes})),__webpack_require__.d(transient_namespaceObject,"setFirstLoad",(function(){return setFirstLoad})),__webpack_require__.d(transient_namespaceObject,"setElementStats",(function(){return setElementStats})),__webpack_require__.d(transient_namespaceObject,"setZoomScale",(function(){return transient_setZoomScale}));var actions_resolved_args_namespaceObject={};__webpack_require__.r(actions_resolved_args_namespaceObject),__webpack_require__.d(actions_resolved_args_namespaceObject,"setLoadingActionType",(function(){return setLoadingActionType})),__webpack_require__.d(actions_resolved_args_namespaceObject,"setValueActionType",(function(){return setValueActionType})),__webpack_require__.d(actions_resolved_args_namespaceObject,"inFlightActiveActionType",(function(){return inFlightActiveActionType})),__webpack_require__.d(actions_resolved_args_namespaceObject,"inFlightCompleteActionType",(function(){return inFlightCompleteActionType})),__webpack_require__.d(actions_resolved_args_namespaceObject,"setLoading",(function(){return setLoading})),__webpack_require__.d(actions_resolved_args_namespaceObject,"setValue",(function(){return resolved_args_setValue})),__webpack_require__.d(actions_resolved_args_namespaceObject,"setValues",(function(){return setValues})),__webpack_require__.d(actions_resolved_args_namespaceObject,"clearValue",(function(){return clearValue})),__webpack_require__.d(actions_resolved_args_namespaceObject,"clearValues",(function(){return clearValues})),__webpack_require__.d(actions_resolved_args_namespaceObject,"inFlightActive",(function(){return resolved_args_inFlightActive})),__webpack_require__.d(actions_resolved_args_namespaceObject,"inFlightComplete",(function(){return inFlightComplete}));var external_kbnSharedDeps_React_=__webpack_require__(3),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_ReactDom_=__webpack_require__(5),external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(162),external_kbnSharedDeps_KbnI18n_=__webpack_require__(0),lib=__webpack_require__(173),external_kbnSharedDeps_Lodash_=__webpack_require__(4),Recompose=__webpack_require__(20);function app_canUserWrite(state){return Object(external_kbnSharedDeps_Lodash_.get)(state,"transient.canUserWrite",!0)}function getFullscreen(state){return Object(external_kbnSharedDeps_Lodash_.get)(state,"transient.fullscreen",!1)}function getZoomScale(state){return Object(external_kbnSharedDeps_Lodash_.get)(state,"transient.zoomScale",1)}function getServerFunctions(state){return state.app.serverFunctions}function getAppReady(state){return state.app.ready}function getBasePath(state){return state.app.basePath}function isAppReady(state){return!0===getAppReady(state)}var redux_actions_lib=__webpack_require__(179);const appReady=Object(redux_actions_lib.createAction)("appReady"),appError=Object(redux_actions_lib.createAction)("appError"),appUnload=Object(redux_actions_lib.createAction)("appUnload");var public_services=__webpack_require__(177),prop_types=__webpack_require__(176),prop_types_default=__webpack_require__.n(prop_types);const getWorkpadBreadcrumb=({name:name="Workpad",id:id}={})=>{const output={text:name};return null!=id&&(output.href="#/workpad/"+id),output},setBreadcrumb=paths=>{public_services.d.getService().setBreadcrumbs(Array.isArray(paths)?paths:[paths])};const createThunk=__webpack_require__(276).createThunk;var common=__webpack_require__(9);function prepend(path,value){return Object(external_kbnSharedDeps_Lodash_.toPath)(value).concat(Object(external_kbnSharedDeps_Lodash_.toPath)(path))}function append(path,value){return Object(external_kbnSharedDeps_Lodash_.toPath)(path).concat(Object(external_kbnSharedDeps_Lodash_.toPath)(value))}function getAssets(state){return Object(external_kbnSharedDeps_Lodash_.get)(state,"assets",{})}function getAssetIds(state){return Object.keys(getAssets(state))}const workpadRoot="persistent.workpad",appendAst=element=>({...element,ast:Object(common.safeElementFromExpression)(element.expression)});function getWorkpad(state){return Object(external_kbnSharedDeps_Lodash_.get)(state,workpadRoot)}function getFullWorkpadPersisted(state){return{...getWorkpad(state),assets:getAssets(state)}}function getWorkpadVariablesAsObject(state){const variables=function(state){const workpad=getWorkpad(state);return Object(external_kbnSharedDeps_Lodash_.get)(workpad,"variables",[])}(state);return 0===variables.length?{}:variables.reduce((vars,v)=>({...vars,[v.name]:v.value}),{})}function getWorkpadInfo(state){return{...getWorkpad(state),pages:void 0}}function workpad_isWriteable(state){return Object(external_kbnSharedDeps_Lodash_.get)(state,append(workpadRoot,"isWriteable"),!0)}function getSelectedPageIndex(state){return Object(external_kbnSharedDeps_Lodash_.get)(state,append(workpadRoot,"page"))}function getSelectedPage(state){const pageIndex=getSelectedPageIndex(state),pages=getPages(state);return Object(external_kbnSharedDeps_Lodash_.get)(pages,`[${pageIndex}].id`)}function getPages(state){return Object(external_kbnSharedDeps_Lodash_.get)(state,append(workpadRoot,"pages"),[])}function getPageById(state,id){return getPages(state).find(page=>page.id===id)}function getWorkpadName(state){return Object(external_kbnSharedDeps_Lodash_.get)(state,append(workpadRoot,"name"))}function getWorkpadHeight(state){return Object(external_kbnSharedDeps_Lodash_.get)(state,append(workpadRoot,"height"))}function getWorkpadWidth(state){return Object(external_kbnSharedDeps_Lodash_.get)(state,append(workpadRoot,"width"))}function getWorkpadBoundingBox(state){return getPages(state).reduce((boundingBox,page)=>(page.elements.forEach(({position:position})=>{const{left:left,top:top,width:width,height:height}=position,right=left+width,bottom=top+height;left<boundingBox.left&&(boundingBox.left=left),top<boundingBox.top&&(boundingBox.top=top),right>boundingBox.right&&(boundingBox.right=right),bottom>boundingBox.bottom&&(boundingBox.bottom=bottom)}),boundingBox),{left:0,right:getWorkpadWidth(state),top:0,bottom:getWorkpadHeight(state)})}function getWorkpadColors(state){return Object(external_kbnSharedDeps_Lodash_.get)(state,append(workpadRoot,"colors"))}function getAllElements(state){return getPages(state).reduce((elements,page)=>elements.concat(page.elements),[])}function getElementCounts(state){const resolvedArgs=state.transient.resolvedArgs,results={ready:0,pending:0,error:0};return Object.values(resolvedArgs).filter(maybeResolvedArg=>void 0!==maybeResolvedArg).forEach(resolvedArg=>{const{expressionRenderable:expressionRenderable}=resolvedArg;if(!expressionRenderable)return void results.pending++;const{value:value,state:readyState}=expressionRenderable;value&&"error"===value.as?results.error++:"ready"===readyState?results.ready++:results.pending++}),results}function getElementStats(state){return Object(external_kbnSharedDeps_Lodash_.get)(state,"transient.elementStats")}function buildGroupValues(args,onValue){return Object.keys(args).reduce((values,argName)=>"_"!==argName&&"group"!==argName?values:args[argName].reduce((acc,argValue)=>acc.concat(onValue(argValue,argName,args)||[]),values),[])}function getGlobalFilterGroups(state){return getAllElements(state).reduce((acc,el)=>{if(null!=el.filter&&el.filter.length){const filterAst=Object(common.fromExpression)(el.filter),filterGroup=Object(external_kbnSharedDeps_Lodash_.get)(filterAst,"chain[0].arguments.filterGroup[0]");filterGroup&&""!==filterGroup&&!acc.includes(String(filterGroup))&&acc.push(String(filterGroup))}if(null!=el.expression&&el.expression.length){(function extractFilterGroups(ast){if("expression"!==ast.type)throw new Error("AST must be an expression");return ast.chain.reduce((groups,item)=>{const{function:fn,arguments:args}=item;return"filters"===fn?groups.concat(buildGroupValues(args,argValue=>{if(null!==argValue&&"object"!=typeof argValue)return argValue})):groups.concat(buildGroupValues(args,argValue=>{if(null!==argValue&&"object"==typeof argValue&&"expression"===argValue.type)return extractFilterGroups(argValue)}))},[])})(Object(common.fromExpression)(el.expression)).forEach(group=>{acc.includes(String(group))||acc.push(String(group))})}return acc},[]).sort()}function getSelectedToplevelNodes(state){return Object(external_kbnSharedDeps_Lodash_.get)(state,"transient.selectedToplevelNodes",[])}function getSelectedElementId(state){const toplevelNodes=getSelectedToplevelNodes(state);return 1===toplevelNodes.length?toplevelNodes[0]:null}function getSelectedElement(state){return getElementById(state,getSelectedElementId(state))}const augment=type=>n=>({...n,position:{...n.position,type:type},..."group"===type&&{expression:'shape fill="rgba(255,255,255,0)" | render'}});function getNodesForPage(page,withAst){const elements=(page=>{const elements=Object(external_kbnSharedDeps_Lodash_.get)(page,"elements").map(augment("element")),groups=Object(external_kbnSharedDeps_Lodash_.get)(page,"groups",[]).map(augment("group"));return elements.concat(groups)})(page);return elements?withAst?elements.map(appendAst):elements.map(el=>Object(external_kbnSharedDeps_Lodash_.omit)(el,["ast"])):[]}function getNodes(state,pageId,withAst=!0){const id=pageId||getSelectedPage(state);if(!id)return[];const page=getPageById(state,id);return page?getNodesForPage(page,withAst):[]}function getElementById(state,id,pageId){const element=function(state,pageId,withAst=!0){const id=pageId||getSelectedPage(state);if(!id)return[];const page=getPageById(state,id),elements=Object(external_kbnSharedDeps_Lodash_.get)(page,"elements");return elements?withAst?elements.map(elem=>appendAst(elem)):elements.map(el=>Object(external_kbnSharedDeps_Lodash_.omit)(el,["ast"])):[]}(state,pageId,!0).find(el=>el.id===id);if(element)return appendAst(element)}function getNodeById(state,id,pageId){const group=getNodes(state,pageId,!0).find(el=>el.id===id);if(group)return appendAst(group)}function getResolvedArgs(state,elementId,path){if(!elementId)return;const args=Object(external_kbnSharedDeps_Lodash_.get)(state,["transient","resolvedArgs",elementId]);return path?Object(external_kbnSharedDeps_Lodash_.get)(args,path):args}function getContextForIndex(state,index){return function(state,path){const elementId=getSelectedElementId(state);if(elementId)return getResolvedArgs(state,elementId,path)}(state,["expressionContext",index-1])}function getRefreshInterval(state){return Object(external_kbnSharedDeps_Lodash_.get)(state,"transient.refresh.interval",0)}function getAutoplay(state){return Object(external_kbnSharedDeps_Lodash_.get)(state,"transient.autoplay")}function getRenderedWorkpad(state){const currentPages=getPages(state),args=state.transient.resolvedArgs,renderedPages=currentPages.map(page=>{const{elements:elements,...rest}=page;return{...rest,elements:elements.map(element=>{const{id:id,position:position}=element,arg=args[id];if(!arg)return null;const{expressionRenderable:expressionRenderable}=arg;return{id:id,position:position,expressionRenderable:expressionRenderable}})}}),workpad=getWorkpad(state),{pages:pages,variables:variables,...rest}=workpad;return{pages:renderedPages,...rest}}var object_path_immutable=__webpack_require__(42),object_path_immutable_default=__webpack_require__.n(object_path_immutable),resolved_arg=__webpack_require__(181);function getArgs(state){return Object(external_kbnSharedDeps_Lodash_.get)(state,["transient","resolvedArgs"])}function getArg(state,path){return Object(external_kbnSharedDeps_Lodash_.get)(state,prepend(path,["transient","resolvedArgs"]))}function getInFlight(state){return Object(external_kbnSharedDeps_Lodash_.get)(state,["transient","inFlight"],!1)}var get_id=__webpack_require__(41),constants=__webpack_require__(7);const getDefaultPage=()=>({id:Object(get_id.a)("page"),style:{background:"#FFF"},transition:{},elements:[],groups:[]}),getDefaultWorkpad=()=>{const page=getDefaultPage();return{name:"My Canvas Workpad",id:Object(get_id.a)("workpad"),width:1080,height:720,css:constants.q,page:0,pages:[page],colors:["#37988d","#c19628","#b83c6f","#3f9939","#1785b0","#ca5f35","#45bdb0","#f2bc33","#e74b8b","#4fbf48","#1ea6dc","#fd7643","#72cec3","#f5cc5d","#ec77a8","#7acf74","#4cbce4","#fd986f","#a1ded7","#f8dd91","#f2a4c5","#a6dfa2","#86d2ed","#fdba9f","#000000","#444444","#777777","#BBBBBB","#FFFFFF","rgba(255,255,255,0)"],variables:[],isWriteable:!0}};var i18n=__webpack_require__(2);async function interpretAst(ast,variables){const context={variables:variables};return await public_services.b.getService().execute(ast,null,context).getData()}async function runInterpreter(ast,input,variables,options={}){const context={variables:variables};try{const renderable=await public_services.b.getService().execute(ast,input,context).getData();if("render"===Object(common.getType)(renderable))return renderable;if(options.castToRender)return runInterpreter(Object(common.fromExpression)("render"),renderable,variables,{castToRender:!1});throw new Error(`Ack! I don't know how to render a '${Object(common.getType)(renderable)}'`)}catch(err){throw public_services.c.getService().error(err),err}}const flatten=arrays=>[].concat(...arrays),identity=d=>d,mean=(a,b)=>(a+b)/2,not=fun=>(...args)=>!fun(...args),arrayToMap=a=>Object.assign({},...a.map(d=>({[d]:!0}))),setFullscreen=Object(redux_actions_lib.createAction)("setFullscreen"),transient_selectToplevelNodes=Object(redux_actions_lib.createAction)("selectToplevelNodes"),setFirstLoad=Object(redux_actions_lib.createAction)("setFirstLoad"),setElementStats=Object(redux_actions_lib.createAction)("setElementStats"),transient_setZoomScale=Object(redux_actions_lib.createAction)("setZoomScale"),setLoadingActionType="setResolvedLoading",setValueActionType="setResolvedValue",inFlightActiveActionType="inFlightActive",inFlightCompleteActionType="inFlightComplete",setLoading=Object(redux_actions_lib.createAction)(setLoadingActionType),resolved_args_setValue=Object(redux_actions_lib.createAction)(setValueActionType),setValues=Object(redux_actions_lib.createAction)("setResolvedValues"),clearValue=Object(redux_actions_lib.createAction)("clearResolvedValue"),clearValues=Object(redux_actions_lib.createAction)("clearResolvedValues"),resolved_args_inFlightActive=Object(redux_actions_lib.createAction)(inFlightActiveActionType,()=>{}),inFlightComplete=Object(redux_actions_lib.createAction)(inFlightCompleteActionType,()=>{}),{actionsElements:elements_strings}=i18n.g,{set:set,del:del}=object_path_immutable_default.a;function getSiblingContext(state,elementId,checkIndex){const prevContextValue=function(state,path){return resolved_arg.c(getArg(state,path))}(state,[elementId,"expressionContext",checkIndex]);if(null!=prevContextValue)return{index:checkIndex,context:prevContextValue};const prevContextIndex=checkIndex-1;return prevContextIndex<0?{}:getSiblingContext(state,elementId,prevContextIndex)}function getBareElement(el,includeId=!1){const props=["position","expression","filter"];return includeId?Object(external_kbnSharedDeps_Lodash_.pick)(el,props.concat("id")):Object(external_kbnSharedDeps_Lodash_.cloneDeep)(Object(external_kbnSharedDeps_Lodash_.pick)(el,props))}const elements_elementLayer=Object(redux_actions_lib.createAction)("elementLayer"),elements_setMultiplePositions=Object(redux_actions_lib.createAction)("setMultiplePosition",repositionedElements=>({repositionedElements:repositionedElements})),flushContext=Object(redux_actions_lib.createAction)("flushContext"),flushContextAfterIndex=Object(redux_actions_lib.createAction)("flushContextAfterIndex"),fetchContext=createThunk("fetchContext",({dispatch:dispatch,getState:getState},index,element,fullRefresh=!1)=>{const chain=Object(external_kbnSharedDeps_Lodash_.get)(element,"ast.chain"),invalidIndex=!chain||index>=chain.length;if(!element||!chain||invalidIndex)throw new Error(elements_strings.getInvalidArgIndexErrorMessage(index));const contextIndex=index-1,contextPath=[element.id,"expressionContext",contextIndex];dispatch(setLoading({path:contextPath}));const{index:prevContextIndex,context:prevContextValue}=!0!==fullRefresh?getSiblingContext(getState(),element.id,contextIndex-1):{},astChain=element.ast.chain.filter((exp,i)=>null!=prevContextValue?i>prevContextIndex&&i<index:i<index),variables=getWorkpadVariablesAsObject(getState());return interpretAst({...element.ast,chain:astChain},variables).then(value=>{dispatch(resolved_args_setValue({path:contextPath,value:value}))})}),fetchRenderableWithContext=createThunk("fetchRenderableWithContext",({dispatch:dispatch,getState:getState},element,ast,context)=>{const argumentPath=[element.id,"expressionRenderable"];dispatch(setLoading({path:argumentPath}));const getAction=renderable=>resolved_args_setValue({path:argumentPath,value:renderable});return runInterpreter(ast,context,getWorkpadVariablesAsObject(getState()),{castToRender:!0}).then(renderable=>{dispatch(getAction(renderable))}).catch(err=>{public_services.e.notify.getService().error(err),dispatch(getAction(err))})}),fetchRenderable=createThunk("fetchRenderable",({dispatch:dispatch},element)=>{const ast=element.ast||Object(common.safeElementFromExpression)(element.expression);dispatch(fetchRenderableWithContext(element,ast,null))}),fetchAllRenderables=createThunk("fetchAllRenderables",({dispatch:dispatch,getState:getState},{onlyActivePage:onlyActivePage=!1}={})=>{const workpadPages=getPages(getState()),currentPage=workpadPages[getSelectedPageIndex(getState())],otherPages=Object(external_kbnSharedDeps_Lodash_.without)(workpadPages,currentPage);function fetchElementsOnPages(pages){const elements=[];pages.forEach(page=>{page.elements.forEach(element=>{elements.push(element)})});const renderablePromises=elements.map(element=>{const ast=element.ast||Object(common.safeElementFromExpression)(element.expression),argumentPath=[element.id,"expressionRenderable"];return runInterpreter(ast,null,getWorkpadVariablesAsObject(getState()),{castToRender:!0}).then(renderable=>({path:argumentPath,value:renderable})).catch(err=>(public_services.e.notify.getService().error(err),{path:argumentPath,value:err}))});return Promise.all(renderablePromises).then(renderables=>{dispatch(setValues(renderables))})}dispatch(resolved_args_inFlightActive()),onlyActivePage?fetchElementsOnPages([currentPage]).then(()=>dispatch(inFlightComplete())):fetchElementsOnPages([currentPage]).then(()=>otherPages.reduce((chain,page)=>chain.then(()=>fetchElementsOnPages([page])),Promise.resolve())).then(()=>dispatch(inFlightComplete()))}),elements_insertNodes=createThunk("insertNodes",({dispatch:dispatch,type:type},elements,pageId)=>{const _insertNodes=Object(redux_actions_lib.createAction)(type),newElements=elements.map(external_kbnSharedDeps_Lodash_.cloneDeep);newElements.forEach(newElement=>{newElement.position.top=newElement.position.top+10,newElement.position.left=newElement.position.left+10}),dispatch(_insertNodes({pageId:pageId,elements:newElements})),elements.some(element=>element.filter)?dispatch(fetchAllRenderables()):newElements.forEach(newElement=>dispatch(fetchRenderable(newElement)))}),removeElements=createThunk("removeElements",({dispatch:dispatch,getState:getState},rootElementIds,pageId)=>{const state=getState(),allElements=getNodes(state,pageId),allRoots=rootElementIds.map(id=>allElements.find(e=>id===e.id)).filter(d=>d),elementIds=((pk,fk,elements,inputRoots)=>{const getSubgraphs=roots=>{const children=flatten(roots.map(r=>elements.filter(e=>fk(e)===pk(r))));return children.length?[...roots,...getSubgraphs(children,elements)]:roots};return getSubgraphs(inputRoots)})(e=>e.id,e=>e.position.parent,allElements,allRoots).map(e=>e.id),shouldRefresh=elementIds.some(elementId=>{const element=getNodeById(state,elementId,pageId);return element.filter&&element.filter.length>0});dispatch(Object(redux_actions_lib.createAction)("removeElements",(elementIds,pageId)=>({elementIds:elementIds,pageId:pageId}))(elementIds,pageId)),shouldRefresh&&dispatch(fetchAllRenderables())}),setFilter=createThunk("setFilter",({dispatch:dispatch},filter,elementId,doRender=!0)=>{dispatch(Object(redux_actions_lib.createAction)("setFilter")({filter:filter,elementId:elementId})),!0===doRender&&dispatch(fetchAllRenderables())}),elements_setExpression=createThunk("setExpression",(function({dispatch:dispatch,getState:getState},expression,elementId,pageId,doRender=!0){const _setExpression=Object(redux_actions_lib.createAction)("setExpression");dispatch(_setExpression({expression:expression,elementId:elementId,pageId:pageId}));const updatedElement=getNodeById(getState(),elementId,pageId);if(updatedElement.filter&&!["dropdownControl","timefilterControl","exactly"].some(filter=>updatedElement.expression.includes(filter))){dispatch(setFilter("",elementId,pageId,doRender))}else!0===doRender&&dispatch(fetchRenderable(updatedElement))}));const setAst=createThunk("setAst",({dispatch:dispatch},ast,element,pageId,doRender=!0)=>{try{const expression=Object(common.toExpression)(ast);dispatch(elements_setExpression(expression,element.id,pageId,doRender))}catch(err){public_services.e.notify.getService().error(err),dispatch(elements_setExpression(element.expression,element.id,pageId,doRender))}}),setAstAtIndex=createThunk("setAstAtIndex",({dispatch:dispatch,getState:getState},index,ast,element,pageId)=>{dispatch(flushContextAfterIndex({elementId:element.id,index:index}));const newElement=set(element,"ast.chain."+index,ast),newAst=Object(external_kbnSharedDeps_Lodash_.get)(newElement,"ast"),{index:contextIndex,context:contextValue}=getSiblingContext(getState(),element.id,index-1);if(contextValue){dispatch(setAst(newAst,element,pageId,!1));const partialAst={...newAst,chain:newAst.chain.filter((exp,i)=>contextValue?i>contextIndex:i>=index)};return dispatch(fetchRenderableWithContext(newElement,partialAst,contextValue))}dispatch(setAst(newAst,element,pageId))}),setArgumentAtIndex=createThunk("setArgumentAtIndex",({dispatch:dispatch},args)=>{const{index:index,argName:argName,value:value,valueIndex:valueIndex,element:element,pageId:pageId}=args;let selector=`ast.chain.${index}.arguments.${argName}`;null!=valueIndex&&(selector+="."+valueIndex);const newElement=set(element,selector,value),newAst=Object(external_kbnSharedDeps_Lodash_.get)(newElement,["ast","chain",index]);dispatch(setAstAtIndex(index,newAst,element,pageId))}),addArgumentValueAtIndex=createThunk("addArgumentValueAtIndex",({dispatch:dispatch},args)=>{const{index:index,argName:argName,value:value,element:element}=args,newValue=Object(external_kbnSharedDeps_Lodash_.get)(element,["ast","chain",index,"arguments",argName],[]).concat(value);dispatch(setArgumentAtIndex({...args,value:newValue}))}),deleteArgumentAtIndex=createThunk("deleteArgumentAtIndex",({dispatch:dispatch},args)=>{const{index:index,element:element,pageId:pageId,argName:argName,argIndex:argIndex}=args,curVal=Object(external_kbnSharedDeps_Lodash_.get)(element,["ast","chain",index,"arguments",argName]),newElement=null!=argIndex&&curVal.length>1?del(element,`ast.chain.${index}.arguments.${argName}.${argIndex}`):del(element,`ast.chain.${index}.arguments.${argName}`);dispatch(setAstAtIndex(index,Object(external_kbnSharedDeps_Lodash_.get)(newElement,["ast","chain",index]),element,pageId))}),elements_addElement=createThunk("addElement",({dispatch:dispatch},pageId,element)=>{const newElement={id:Object(get_id.a)("element"),position:{top:20,left:20,height:300,width:500,angle:0,type:"element"},expression:'\n      demodata\n      | pointseries y="median(cost)" x=time color="project"\n      | plot defaultStyle={seriesStyle points=5}\n    ',filter:null,...getBareElement(element,!0)};element.width&&(newElement.position.width=element.width),element.height&&(newElement.position.height=element.height);dispatch(Object(redux_actions_lib.createAction)("addElement")({pageId:pageId,element:newElement})),element.filter?dispatch(fetchAllRenderables()):dispatch(fetchRenderable(newElement)),dispatch(transient_selectToplevelNodes([newElement.id]))}),sizeWorkpad=Object(redux_actions_lib.createAction)("sizeWorkpad"),workpad_setName=Object(redux_actions_lib.createAction)("setName"),setWriteable=Object(redux_actions_lib.createAction)("setWriteable"),setColors=Object(redux_actions_lib.createAction)("setColors"),workpad_setRefreshInterval=Object(redux_actions_lib.createAction)("setRefreshInterval"),workpad_setWorkpadCSS=Object(redux_actions_lib.createAction)("setWorkpadCSS"),workpad_setWorkpadVariables=Object(redux_actions_lib.createAction)("setWorkpadVariables"),workpad_enableAutoplay=Object(redux_actions_lib.createAction)("enableAutoplay"),workpad_setAutoplayInterval=Object(redux_actions_lib.createAction)("setAutoplayInterval"),resetWorkpad=Object(redux_actions_lib.createAction)("resetWorkpad"),workpad_initializeWorkpad=createThunk("initializeWorkpad",({dispatch:dispatch})=>{dispatch(fetchAllRenderables())}),addColor=createThunk("addColor",({dispatch:dispatch,getState:getState},color)=>{const colors=getWorkpadColors(getState()).slice(0);Object(external_kbnSharedDeps_Lodash_.includes)(colors,color)||colors.push(color),dispatch(setColors(colors))}),removeColor=createThunk("removeColor",({dispatch:dispatch,getState:getState},color)=>{dispatch(setColors(Object(external_kbnSharedDeps_Lodash_.without)(getWorkpadColors(getState()),color)))}),updateWorkpadVariables=createThunk("updateWorkpadVariables",({dispatch:dispatch},vars)=>{dispatch(workpad_setWorkpadVariables(vars)),dispatch(fetchAllRenderables())}),setWorkpad=createThunk("setWorkpad",({dispatch:dispatch,type:type},workpad,{loadPages:loadPages=!0}={})=>{dispatch(Object(redux_actions_lib.createAction)(type)(workpad)),loadPages&&dispatch(workpad_initializeWorkpad())});var external_kbnSharedDeps_ElasticEui_=__webpack_require__(8),external_kbnSharedDeps_Moment_=__webpack_require__(11),external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_),fetch=__webpack_require__(43);const validKeys=["@created","@timestamp","assets","colors","css","variables","height","id","isWriteable","name","page","pages","width"],sanitizeWorkpad=function(workpad){const workpadKeys=Object.keys(workpad);for(const key of workpadKeys)validKeys.includes(key)||delete workpad[key];return workpad},getApiPath=function(){return`${public_services.d.getService().getBasePath()}${constants.g}`};function create(workpad){return fetch.b.post(getApiPath(),{...sanitizeWorkpad({...workpad}),assets:workpad.assets||{},variables:workpad.variables||[]})}function get(workpadId){return fetch.b.get(`${getApiPath()}/${workpadId}`).then(({data:workpad})=>({css:constants.q,variables:[],...workpad}))}function workpad_service_updateWorkpad(id,workpad){return fetch.b.put(`${public_services.d.getService().getBasePath()}${constants.i}/${id}`,sanitizeWorkpad({...workpad}))}function updateAssets(id,workpadAssets){return fetch.b.put(`${public_services.d.getService().getBasePath()}${constants.h}/${id}`,workpadAssets)}var FileSaver=__webpack_require__(227),FileSaver_default=__webpack_require__.n(FileSaver);const{downloadWorkpad:download_workpad_strings}=i18n.g,downloadWorkpad=async workpadId=>{try{const workpad=await get(workpadId),jsonBlob=new Blob([JSON.stringify(workpad)],{type:"application/json"});FileSaver_default.a.saveAs(jsonBlob,`canvas-workpad-${workpad.name}-${workpad.id}.json`)}catch(err){public_services.c.getService().error(err,{title:download_workpad_strings.getDownloadFailureErrorMessage()})}};function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const ConfirmModal=props=>{const{isOpen:isOpen,title:title,message:message,onConfirm:onConfirm,onCancel:onCancel,confirmButtonText:confirmButtonText,cancelButtonText:cancelButtonText,className:className,...rest}=props;return isOpen?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiConfirmModal,_extends({},rest,{className:"canvasConfirmModal "+(className||""),title:title,onCancel:onCancel,onConfirm:onConfirm,confirmButtonText:confirmButtonText,cancelButtonText:cancelButtonText,defaultFocusedButton:"confirm",buttonColor:"danger","data-test-subj":"canvasConfirmModal"}),message):null};ConfirmModal.defaultProps={title:"Confirm",confirmButtonText:"Confirm",cancelButtonText:"Cancel"};const confirm_modal_ConfirmModal=ConfirmModal;var router_min=__webpack_require__(279),router_min_default=__webpack_require__.n(router_min),get_window=__webpack_require__(44),lz_string=__webpack_require__(281),lz_string_default=__webpack_require__.n(lz_string),node_modules_history=__webpack_require__(229),createHashStateHistory=__webpack_require__(282),createHashStateHistory_default=__webpack_require__.n(createHashStateHistory);const instances=new WeakMap,createHistory=(win=Object(get_window.a)())=>{const wrappedInstance=function(history){const historyState={onChange:[],prevLocation:{},changeUnlisten:null},locationFormat=(location,action,parser)=>({pathname:location.pathname,hash:location.hash,search:location.search,state:parser(location.state),action:action.toLowerCase()}),wrappedHistory={undo(){history.goBack()},redo(){history.goForward()},go(idx){history.go(idx)},parse(payload){try{const stateJSON=lz_string_default.a.decompress(payload);return JSON.parse(stateJSON)}catch(e){return null}},encode(state){try{const stateJSON=JSON.stringify(state);return lz_string_default.a.compress(stateJSON)}catch(e){throw new Error("Could not encode state: ",e.message)}},getLocation(){const location=history.location;return{...location,state:this.parse(location.state)}},getPath(path){return null!=path?Object(node_modules_history.createPath)(Object(node_modules_history.parsePath)(path)):Object(node_modules_history.createPath)(this.getLocation())},getFullPath(path){return null!=path?history.createHref(Object(node_modules_history.parsePath)(path)):history.createHref(this.getLocation())},push(state,path){history.push(path||this.getPath(),this.encode(state))},replace(state,path){history.replace(path||this.getPath(),this.encode(state))},onChange(fn){if(null==fn)return;const pushedIndex=historyState.onChange.push(fn)-1;return(()=>{let called=!1;return()=>{called||(historyState.onChange.splice(pushedIndex,1),called=!0)}})()},resetOnChange(){historyState.onChange.splice(0)},get historyInstance(){return history}};return historyState.prevLocation=wrappedHistory.getLocation(),historyState.changeUnlisten=history.listen((location,action)=>{const{prevLocation:prevLocation}=historyState,locationObj=locationFormat(location,action,wrappedHistory.parse),prevLocationObj=locationFormat(prevLocation,action,wrappedHistory.parse);historyState.onChange.forEach(fn=>fn.call(null,locationObj,prevLocationObj)),historyState.prevLocation=wrappedHistory.getLocation()}),wrappedHistory}((win=>void 0!==win&&win.history?createHashStateHistory_default()():Object(node_modules_history.createMemoryHistory)())(win));return instances.set(win,wrappedInstance),wrappedInstance},historyProvider=(win=Object(get_window.a)())=>{const instance=instances.get(win);return instance||createHistory(win)};var query_string=__webpack_require__(287);const getInitialState=path=>{const{getHasWriteAccess:getHasWriteAccess}=public_services.d.getService(),state={app:{},assets:{},transient:{canUserWrite:getHasWriteAccess(),zoomScale:1,elementStats:{total:0,ready:0,pending:0,error:0},fullscreen:!1,selectedToplevelNodes:[],resolvedArgs:{},refresh:{interval:0},autoplay:{enabled:!1,interval:1e4}},persistent:{schemaVersion:2,workpad:getDefaultWorkpad()}};return path?Object(external_kbnSharedDeps_Lodash_.get)(state,path):state};var TIME_UNIT;!function(TIME_UNIT){TIME_UNIT.SECONDS="s",TIME_UNIT.MINUTES="m",TIME_UNIT.HOURS="h",TIME_UNIT.DAYS="d"}(TIME_UNIT||(TIME_UNIT={}));const multipliers={[TIME_UNIT.SECONDS]:1e3,[TIME_UNIT.MINUTES]:6e4,[TIME_UNIT.HOURS]:36e5,[TIME_UNIT.DAYS]:864e5};const isValidTimeInterval=(val="")=>!!String(val).match(/^([0-9]{1,})([hmsd])$/),getTimeInterval=(val="")=>{if(!isNaN(Number(val)))return;const match=String(val).match(/^([0-9]{1,})([hmsd])$/);if(!match)return;const interval=parseInt(match[1],10),unit=match[2],multiplier=function(unit){return void 0!==unit}(unit)?multipliers[unit]:null;return interval&&multiplier?interval*multiplier:void 0},createTimeInterval=seconds=>seconds<multipliers[TIME_UNIT.MINUTES]?seconds/multipliers[TIME_UNIT.SECONDS]+TIME_UNIT.SECONDS:seconds<multipliers[TIME_UNIT.HOURS]?seconds/multipliers[TIME_UNIT.MINUTES]+TIME_UNIT.MINUTES:seconds<multipliers[TIME_UNIT.DAYS]?seconds/multipliers[TIME_UNIT.HOURS]+TIME_UNIT.HOURS:seconds/multipliers[TIME_UNIT.DAYS]+TIME_UNIT.DAYS;var types=__webpack_require__(6);function getDefaultAppState(){const transientState=getInitialState("transient"),state={};return transientState.fullscreen&&(state[types.AppStateKeys.FULLSCREEN]=!0),transientState.refresh.interval>0&&(state[types.AppStateKeys.REFRESH_INTERVAL]=createTimeInterval(transientState.refresh.interval)),transientState.autoplay.enabled&&(state[types.AppStateKeys.AUTOPLAY_INTERVAL]=createTimeInterval(transientState.autoplay.interval)),state}function getCurrentAppState(){const history=historyProvider(Object(get_window.a)()),{search:search}=history.getLocation();return assignAppState({},search?Object(query_string.parse)(search.replace(/^\?/,""),{sort:!1}):{})}function getAppState(key){const appState={...getDefaultAppState(),...getCurrentAppState()};return key?Object(external_kbnSharedDeps_Lodash_.get)(appState,key):appState}function assignAppState(obj,appState){const fullscreen=appState[types.AppStateKeys.FULLSCREEN],refreshKey=appState[types.AppStateKeys.REFRESH_INTERVAL],autoplayKey=appState[types.AppStateKeys.AUTOPLAY_INTERVAL];fullscreen?obj[types.AppStateKeys.FULLSCREEN]=!0:delete obj[types.AppStateKeys.FULLSCREEN];const refresh=Array.isArray(refreshKey)?refreshKey[0]:refreshKey;refresh&&isValidTimeInterval(refresh)?obj[types.AppStateKeys.REFRESH_INTERVAL]=refresh:delete obj[types.AppStateKeys.REFRESH_INTERVAL];const autoplay=Array.isArray(autoplayKey)?autoplayKey[0]:autoplayKey;return autoplay&&isValidTimeInterval(autoplay)?obj[types.AppStateKeys.AUTOPLAY_INTERVAL]=autoplay:delete obj[types.AppStateKeys.AUTOPLAY_INTERVAL],obj}function app_state_setAutoplayInterval(payload){const appState=getAppState(),appValue=appState[types.AppStateKeys.AUTOPLAY_INTERVAL];payload!==appValue&&(!payload&&appValue?(delete appState[types.AppStateKeys.AUTOPLAY_INTERVAL],routerProvider().updateAppState(appState)):payload&&(appState[types.AppStateKeys.AUTOPLAY_INTERVAL]=payload,routerProvider().updateAppState(appState)))}var url_url=__webpack_require__(76);let router_provider_router;function routerProvider(routes){if(router_provider_router)return router_provider_router;const baseRouter=router_min_default()(routes),history=historyProvider(Object(get_window.a)()),componentListeners=[],isPath=str=>"string"==typeof str&&"/"===str.substr(0,1),appendAppState=(path,appState=getCurrentAppState())=>function(url,urlModifier){const parsed=Object(url_url.parse)(url,!0),meaningfulParts={auth:parsed.auth,hash:parsed.hash,hostname:parsed.hostname,pathname:parsed.pathname,port:parsed.port,protocol:parsed.protocol,query:parsed.query||{},slashes:parsed.slashes},modifiedParts=urlModifier(meaningfulParts)||meaningfulParts;return Object(url_url.format)({auth:modifiedParts.auth,hash:modifiedParts.hash,hostname:modifiedParts.hostname,pathname:modifiedParts.pathname,port:modifiedParts.port,protocol:modifiedParts.protocol,query:modifiedParts.query,slashes:modifiedParts.slashes})}(path,parts=>{parts.query=assignAppState(parts.query,appState)}),updateLocation=(name,params,state,replace=!1)=>{const currentState=((name,params,state)=>isPath(name)?params||history.getLocation().state:state||history.getLocation().state)(name,params,state),method=replace?"replace":"push";if(isPath(name))return history[method](currentState,appendAppState(name));history[method](currentState,appendAppState(baseRouter.create(name,params)))};return router_provider_router={...baseRouter,execute(path=history.getPath()){return this.parse(path)},getPath:()=>history.getPath(),getFullPath:()=>history.getFullPath(),navigateTo(name,params,state){updateLocation(name,params,state)},redirectTo(name,params,state){updateLocation(name,params,state,!0)},updateAppState(appState,replace=!0){const method=replace?"replace":"push",newPath=appendAppState(this.getPath(),appState),currentState=history.getLocation().state;history[method](currentState,newPath)},onPathChange(fn){const execOnMatch=location=>{const{pathname:pathname}=location,match=this.match(pathname);match?fn({...match,location:location}):console.error("No route found for path: ",pathname)},unlisten=history.onChange((locationObj,prevLocationObj)=>{locationObj.pathname===prevLocationObj.pathname&&locationObj.search===prevLocationObj.search||execOnMatch(locationObj)});return componentListeners.push(unlisten),execOnMatch(history.getLocation()),unlisten},stop:()=>{for(const listener of componentListeners)listener()}},router_provider_router}const CanvasLoading=({msg:msg})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasContainer--loading"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingChart,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{color:"default",size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,msg))));function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}CanvasLoading.defaultProps={msg:"Loading..."};class router_Router extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){super(...args),_defineProperty(this,"state",{router:{},activeComponent:CanvasLoading})}getChildContext(){const{router:router}=this.state;return{router:router}}UNSAFE_componentWillMount(){const{routes:routes,onRouteChange:onRouteChange,onLoad:onLoad,onError:onError}=this.props,router=routerProvider(routes);let firstLoad=!0;router.onPathChange(route=>{const{pathname:pathname}=route.location,{component:component}=route.meta;if(!component)return void 0;firstLoad&&(firstLoad=!1,router.execute().then(()=>onLoad()).catch(err=>onError(err)));const appState=getAppState();appState.__fullscreen&&this.props.setFullscreen(appState.__fullscreen),appState.__refreshInterval&&this.props.setRefreshInterval(getTimeInterval(appState.__refreshInterval)),appState.__autoplayInterval&&(this.props.enableAutoplay(!0),this.props.setAutoplayInterval(getTimeInterval(appState.__autoplayInterval))),onRouteChange&&onRouteChange(pathname),this.setState({activeComponent:component})}),this.setState({router:router})}render(){return this.props.showLoading?external_kbnSharedDeps_React_default.a.createElement(CanvasLoading,{msg:this.props.loadingMessage}):external_kbnSharedDeps_React_default.a.createElement(RouterContext.Provider,{value:this.state.router},external_kbnSharedDeps_React_default.a.createElement(this.state.activeComponent,null))}}_defineProperty(router_Router,"childContextTypes",{router:prop_types_default.a.object.isRequired});const RouterContext=external_kbnSharedDeps_React_default.a.createContext(void 0),mapDispatchToProps={enableAutoplay:workpad_enableAutoplay,setAutoplayInterval:workpad_setAutoplayInterval,setFullscreen:setFullscreen,setRefreshInterval:workpad_setRefreshInterval},components_router_Router=Object(lib.connect)(state=>({refreshInterval:state.transient.refresh.interval,autoplayInterval:state.transient.autoplay.interval,autoplay:state.transient.autoplay.enabled,fullscreen:state.transient.fullScreen}),mapDispatchToProps,(stateProps,dispatchProps,ownProps)=>({...ownProps,...dispatchProps,setRefreshInterval:interval=>{interval!==stateProps.refreshInterval&&dispatchProps.setRefreshInterval(interval)},setAutoplayInterval:interval=>{interval!==stateProps.autoplayInterval&&dispatchProps.setRefreshInterval(interval)},enableAutoplay:autoplay=>{autoplay!==stateProps.autoplay&&dispatchProps.enableAutoplay(autoplay)},setFullscreen:fullscreen=>{fullscreen!==stateProps.fullscreen&&dispatchProps.setFullscreen(fullscreen)}}))(router_Router);function link_extends(){return(link_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const{Link:link_strings}=i18n.e,Link=({onClick:onClick,target:target,name:name,params:params,children:children,...linkArgs})=>{const router=Object(external_kbnSharedDeps_React_.useContext)(RouterContext);if(router){const navigateTo=ev=>{onClick&&onClick(ev),ev.defaultPrevented||0!==ev.button||target||(ev=>!!(ev.metaKey||ev.altKey||ev.ctrlKey||ev.shiftKey))(ev)||(ev.preventDefault(),router.navigateTo(name,params))};try{return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,link_extends({},linkArgs,{target:target,onClick:navigateTo}),children)}catch(e){return external_kbnSharedDeps_React_default.a.createElement("div",null,link_strings.getErrorMessage(e.message))}}return external_kbnSharedDeps_React_default.a.createElement("div",null,link_strings.getErrorMessage("Router Undefined"))};Link.contextTypes={router:prop_types_default.a.object};var paginate=__webpack_require__(60);const{WorkpadFileUpload:upload_workpad_errors}=i18n.g,uploadWorkpad=(file,onUpload,notify)=>{if(!file)return;if("application/json"!==Object(external_kbnSharedDeps_Lodash_.get)(file,"type"))return notify.warning(upload_workpad_errors.getAcceptJSONOnlyErrorMessage(),{title:file.name?upload_workpad_errors.getFileUploadFailureWithFileNameErrorMessage(file.name):upload_workpad_errors.getFileUploadFailureWithoutFileNameErrorMessage()});const reader=new FileReader;reader.onload=()=>{try{const workpad=JSON.parse(reader.result);if(workpad.id=Object(get_id.a)("workpad"),!Array.isArray(workpad.pages)||0===workpad.pages.length||!workpad.assets)throw new Error(upload_workpad_errors.getMissingPropertiesErrorMessage());onUpload(workpad)}catch(e){notify.error(e,{title:file.name?upload_workpad_errors.getFileUploadFailureWithFileNameErrorMessage(file.name):upload_workpad_errors.getFileUploadFailureWithoutFileNameErrorMessage()})}},reader.readAsText(file)};var dist=__webpack_require__(291),dist_default=__webpack_require__.n(dist);const{WorkpadFileUpload:workpad_dropzone_errors}=i18n.g,workpad_dropzone_WorkpadDropzone=Object(Recompose.compose)(Object(Recompose.withHandlers)(({notify:notify})=>({onDropAccepted:({onUpload:onUpload})=>([file])=>uploadWorkpad(file,onUpload),onDropRejected:()=>([file])=>{notify.warning(workpad_dropzone_errors.getAcceptJSONOnlyErrorMessage(),{title:file.name?workpad_dropzone_errors.getFileUploadFailureWithFileNameErrorMessage(file.name):workpad_dropzone_errors.getFileUploadFailureWithoutFileNameErrorMessage()})}})))(({onDropAccepted:onDropAccepted,onDropRejected:onDropRejected,disabled:disabled,children:children})=>external_kbnSharedDeps_React_default.a.createElement(dist_default.a,{accept:"application/json",onDropAccepted:onDropAccepted,onDropRejected:onDropRejected,disableClick:!0,disabled:disabled,className:"canvasWorkpad__dropzone",activeClassName:"canvasWorkpad__dropzone--active"},children));function workpad_create_extends(){return(workpad_create_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}workpad_dropzone_WorkpadDropzone.propTypes={onUpload:prop_types_default.a.func.isRequired};const{WorkpadCreate:workpad_create_strings}=i18n.e,WorkpadCreate=({createPending:createPending,onCreate:onCreate,...rest})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,workpad_create_extends({},rest,{iconType:"plusInCircle",fill:!0,onClick:onCreate,isLoading:createPending,"data-test-subj":"create-workpad-button"}),workpad_create_strings.getWorkpadCreateButtonLabel());function workpad_search_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const{WorkpadSearch:workpad_search_strings}=i18n.e;class workpad_search_WorkpadSearch extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){super(...args),workpad_search_defineProperty(this,"state",{searchText:this.props.initialText||""}),workpad_search_defineProperty(this,"triggerChange",Object(external_kbnSharedDeps_Lodash_.debounce)(this.props.onChange,150)),workpad_search_defineProperty(this,"setSearchText",ev=>{const text=ev.target.value;this.setState({searchText:text}),this.triggerChange(text)})}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldSearch,{placeholder:workpad_search_strings.getWorkpadSearchPlaceholder(),value:this.state.searchText,onChange:this.setSearchText,fullWidth:!0,incremental:!0})}}function workpad_loader_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const{WorkpadLoader:workpad_loader_strings}=i18n.e;class workpad_loader_WorkpadLoader extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){super(...args),workpad_loader_defineProperty(this,"state",{createPending:!1,deletingWorkpad:!1,sortField:"@timestamp",sortDirection:"desc",selectedWorkpads:[],pageSize:10}),workpad_loader_defineProperty(this,"createWorkpad",async()=>{this.setState({createPending:!0}),await this.props.createWorkpad(),this._isMounted&&this.setState({createPending:!1})}),workpad_loader_defineProperty(this,"onUpload",async workpad=>{this.setState({createPending:!0}),await this.props.createWorkpad(workpad),this._isMounted&&this.setState({createPending:!1})}),workpad_loader_defineProperty(this,"cloneWorkpad",async workpad=>{this.setState({createPending:!0}),await this.props.cloneWorkpad(workpad.id),this._isMounted&&this.setState({createPending:!1})}),workpad_loader_defineProperty(this,"openRemoveConfirm",()=>this.setState({deletingWorkpad:!0})),workpad_loader_defineProperty(this,"closeRemoveConfirm",()=>this.setState({deletingWorkpad:!1})),workpad_loader_defineProperty(this,"removeWorkpads",()=>{const{selectedWorkpads:selectedWorkpads}=this.state;this.props.removeWorkpads(selectedWorkpads.map(({id:id})=>id)).then(remainingIds=>{const remainingWorkpads=remainingIds.length>0?selectedWorkpads.filter(({id:id})=>remainingIds.includes(id)):[];this._isMounted&&this.setState({deletingWorkpad:!1,selectedWorkpads:remainingWorkpads})})}),workpad_loader_defineProperty(this,"downloadWorkpads",()=>{this.state.selectedWorkpads.forEach(({id:id})=>this.props.downloadWorkpad(id))}),workpad_loader_defineProperty(this,"onSelectionChange",selectedWorkpads=>{this.setState({selectedWorkpads:selectedWorkpads})}),workpad_loader_defineProperty(this,"onTableChange",({sort:sort={}})=>{const{field:sortField,direction:sortDirection}=sort;this.setState({sortField:sortField,sortDirection:sortDirection})}),workpad_loader_defineProperty(this,"renderWorkpadTable",({rows:rows,pageNumber:pageNumber,totalPages:totalPages,setPage:setPage})=>{const{sortField:sortField,sortDirection:sortDirection}=this.state,{canUserWrite:canUserWrite,createPending:createPending,workpadId:loadedWorkpad}=this.props,actions=[{render:workpad=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:workpad_loader_strings.getExportToolTip()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"exportAction",onClick:()=>this.props.downloadWorkpad(workpad.id),"aria-label":workpad_loader_strings.getExportToolTip()}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:canUserWrite?workpad_loader_strings.getCloneToolTip():workpad_loader_strings.getNoPermissionToCloneToolTip()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"copy",onClick:()=>this.cloneWorkpad(workpad),"aria-label":workpad_loader_strings.getCloneToolTip(),disabled:!canUserWrite}))))}],columns=[{field:"name",name:workpad_loader_strings.getTableNameColumnTitle(),sortable:!0,dataType:"string",render:(name,workpad)=>{const workpadName=((name,workpad,loadedWorkpad)=>{const workpadName=name.length?name:external_kbnSharedDeps_React_default.a.createElement("em",null,workpad.id);return workpad.id===loadedWorkpad?external_kbnSharedDeps_React_default.a.createElement("strong",null,workpadName):workpadName})(name,workpad,loadedWorkpad);return external_kbnSharedDeps_React_default.a.createElement(Link,{"data-test-subj":"canvasWorkpadLoaderWorkpad",name:"loadWorkpad",params:{id:workpad.id},"aria-label":workpad_loader_strings.getLoadWorkpadArialLabel()},workpadName)}},{field:"@created",name:workpad_loader_strings.getTableCreatedColumnTitle(),sortable:!0,dataType:"date",width:"20%",render:date=>this.props.formatDate(date)},{field:"@timestamp",name:workpad_loader_strings.getTableUpdatedColumnTitle(),sortable:!0,dataType:"date",width:"20%",render:date=>this.props.formatDate(date)},{name:workpad_loader_strings.getTableActionsColumnTitle(),actions:actions,width:"100px"}],sorting={sort:{field:sortField,direction:sortDirection}},selection={itemId:"id",onSelectionChange:this.onSelectionChange},emptyTable=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"importAction",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,workpad_loader_strings.getEmptyPromptTitle()),titleSize:"s",body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,workpad_loader_strings.getEmptyPromptGettingStartedDescription()),external_kbnSharedDeps_React_default.a.createElement("p",null,workpad_loader_strings.getEmptyPromptNewUserDescription()," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:"home#/tutorial_directory/sampleData"},workpad_loader_strings.getSampleDataLinkLabel()),"."))});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(workpad_dropzone_WorkpadDropzone,{onUpload:this.onUpload,disabled:createPending||!canUserWrite,notify:this.props.notify},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBasicTable,{items:rows,itemId:"id",columns:columns,sorting:sorting,noItemsMessage:emptyTable,onChange:this.onTableChange,isSelectable:!0,selection:selection,className:"canvasWorkpad__dropzoneTable","data-test-subj":"canvasWorkpadLoaderTable"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),rows.length>0&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"none",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPagination,{activePage:pageNumber,onPageClick:setPage,pageCount:totalPages})))))})}async componentDidMount(){this.props.findWorkpads(),this._isMounted=!0}UNSAFE_componentWillReceiveProps(newProps){const{workpadId:workpadId,onClose:onClose}=this.props;workpadId!==newProps.workpadId&&onClose()}componentWillUnmount(){this._isMounted=!1}render(){const{deletingWorkpad:deletingWorkpad,createPending:createPending,selectedWorkpads:selectedWorkpads,sortField:sortField,sortDirection:sortDirection}=this.state,{canUserWrite:canUserWrite}=this.props,isLoading=null==this.props.workpads;let createButton=external_kbnSharedDeps_React_default.a.createElement(WorkpadCreate,{createPending:createPending,onCreate:this.createWorkpad,disabled:!canUserWrite}),deleteButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{color:"danger",iconType:"trash",onClick:this.openRemoveConfirm,disabled:!canUserWrite,"aria-label":workpad_loader_strings.getDeleteButtonAriaLabel(selectedWorkpads.length),"data-test-subj":"deleteWorkpadButton"},workpad_loader_strings.getDeleteButtonLabel(selectedWorkpads.length));const downloadButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{color:"secondary",onClick:this.downloadWorkpads,iconType:"exportAction","aria-label":workpad_loader_strings.getExportButtonAriaLabel(selectedWorkpads.length)},workpad_loader_strings.getExportButtonLabel(selectedWorkpads.length));let uploadButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFilePicker,{display:"default",compressed:!0,className:"canvasWorkpad__upload--compressed","aria-label":workpad_loader_strings.getFilePickerPlaceholder(),initialPromptText:workpad_loader_strings.getFilePickerPlaceholder(),onChange:([file])=>uploadWorkpad(file,this.onUpload,this.props.notify),accept:"application/json",disabled:createPending||!canUserWrite});canUserWrite||(createButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:workpad_loader_strings.getNoPermissionToCreateToolTip()},createButton),deleteButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:workpad_loader_strings.getNoPermissionToDeleteToolTip()},deleteButton),uploadButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:workpad_loader_strings.getNoPermissionToUploadToolTip()},uploadButton));const modalTitle=1===selectedWorkpads.length?workpad_loader_strings.getDeleteSingleWorkpadModalTitle(selectedWorkpads[0].name):workpad_loader_strings.getDeleteMultipleWorkpadModalTitle(selectedWorkpads.length),confirmModal=external_kbnSharedDeps_React_default.a.createElement(confirm_modal_ConfirmModal,{isOpen:deletingWorkpad,title:modalTitle,message:workpad_loader_strings.getDeleteModalDescription(),confirmButtonText:workpad_loader_strings.getDeleteModalConfirmButtonLabel(),onConfirm:this.removeWorkpads,onCancel:this.closeRemoveConfirm});let sortedWorkpads=[];if(!createPending&&!isLoading){const{workpads:workpads}=this.props.workpads;sortedWorkpads=Object(external_kbnSharedDeps_Lodash_.orderBy)(workpads,[sortField,"@timestamp"],[sortDirection,"desc"])}return external_kbnSharedDeps_React_default.a.createElement(paginate.a,{rows:sortedWorkpads},pagination=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:2},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s"},selectedWorkpads.length>0&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},downloadButton),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},deleteButton)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:1},external_kbnSharedDeps_React_default.a.createElement(workpad_search_WorkpadSearch,{onChange:text=>{pagination.setPage(0),this.props.findWorkpads(text)}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:2},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s",justifyContent:"flexEnd",wrap:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},uploadButton),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},createButton)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),createPending&&external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:"100%"}},workpad_loader_strings.getCreateWorkpadLoadingDescription()),!createPending&&isLoading&&external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:"100%"}},workpad_loader_strings.getFetchLoadingDescription()),!createPending&&!isLoading&&this.renderWorkpadTable(pagination),confirmModal))}}const{WorkpadLoader:components_workpad_loader_strings}=i18n.e,{WorkpadLoader:workpad_loader_errors}=i18n.g,components_workpad_loader_WorkpadLoader=Object(Recompose.compose)(Object(Recompose.getContext)({router:prop_types_default.a.object}),Object(lib.connect)(state=>({workpadId:getWorkpad(state).id,canUserWrite:app_canUserWrite(state)})),Object(Recompose.withState)("workpads","setWorkpads",null),public_services.i,Object(Recompose.withProps)(({services:services})=>({notify:services.notify})),Object(Recompose.withHandlers)(({services:services})=>({createWorkpad:props=>async workpad=>{if(null==workpad)props.router.navigateTo("createWorkpad");else try{await create(workpad),props.router.navigateTo("loadWorkpad",{id:workpad.id,page:1})}catch(err){services.notify.error(err,{title:workpad_loader_errors.getUploadFailureErrorMessage()})}},findWorkpads:({setWorkpads:setWorkpads})=>async text=>{try{const workpads=await function(searchTerm){const validSearchTerm="string"==typeof searchTerm&&searchTerm.length>0;return fetch.b.get(`${getApiPath()}/find?name=${validSearchTerm?searchTerm:""}&perPage=10000`).then(({data:workpads})=>workpads)}(text);setWorkpads(workpads)}catch(err){services.notify.error(err,{title:workpad_loader_errors.getFindFailureErrorMessage()})}},downloadWorkpad:()=>workpadId=>downloadWorkpad(workpadId),cloneWorkpad:props=>async workpadId=>{try{const workpad=await get(workpadId);workpad.name=components_workpad_loader_strings.getClonedWorkpadName(workpad.name),workpad.id=Object(get_id.a)("workpad"),await create(workpad),props.router.navigateTo("loadWorkpad",{id:workpad.id,page:1})}catch(err){services.notify.error(err,{title:workpad_loader_errors.getCloneFailureErrorMessage()})}},removeWorkpads:props=>async workpadIds=>{const{setWorkpads:setWorkpads,workpads:workpads,workpadId:loadedWorkpad}=props,removeWorkpads=workpadIds.map(id=>function(id){return fetch.b.delete(`${getApiPath()}/${id}`)}(id).then(()=>({id:id,err:null})).catch(err=>({id:id,err:err})));return Promise.all(removeWorkpads).then(results=>{let redirectHome=!1;const[passes,errored]=results.reduce(([passes,errors],result)=>(result.id!==loadedWorkpad||result.err||(redirectHome=!0),result.err?errors.push(result.id):passes.push(result.id),[passes,errors]),[[],[]]),remainingWorkpads=workpads.workpads.filter(({id:id})=>!passes.includes(id)),workpadState={total:remainingWorkpads.length,workpads:remainingWorkpads};return errored.length>0&&services.notify.error(workpad_loader_errors.getDeleteFailureErrorMessage()),setWorkpads(workpadState),redirectHome&&props.router.navigateTo("home"),errored.map(({id:id})=>id)})}})),Object(Recompose.withProps)(props=>({formatDate:date=>{const dateFormat=props.services.platform.getUISetting("dateFormat");return date&&external_kbnSharedDeps_Moment_default()(date).format(dateFormat)}})))(workpad_loader_WorkpadLoader);var components=__webpack_require__(40);function tag_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class Tag{constructor(config){tag_defineProperty(this,"name",void 0),tag_defineProperty(this,"color",void 0),this.name=config.name,this.color=config.color}}class tags_registry_TagRegistry extends common.Registry{wrapper(obj){return new Tag(obj)}}const tagsRegistry=new tags_registry_TagRegistry;function tag_extends(){return(tag_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const tag_Tag=({name:name,color:color="#666666",type:type="health",...rest})=>{switch(type){case"health":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHealth,tag_extends({color:color},rest),name);case"badge":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBadge,tag_extends({color:color},rest),name)}},tag_list_TagList=Object(Recompose.compose)(Object(Recompose.withProps)(()=>({getTag:tag=>tagsRegistry.get(tag)||{name:tag,color:void 0}})))(({tags:tags=[],tagType:tagType="health",getTag:getTag})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,tags.length?tags.map(tag=>{const{color:color,name:name}=getTag(tag),id=Object(get_id.a)("tag");return external_kbnSharedDeps_React_default.a.createElement(tag_Tag,{key:id,color:color,name:name,type:tagType})}):null)),{WorkpadTemplates:get_tags_filter_strings}=i18n.e,getTagsFilter=type=>{const uniqueTags=Object(external_kbnSharedDeps_Lodash_.sortBy)(Object.values(tagsRegistry.toJS()),"name");return{type:"field_value_selection",field:"tag",name:get_tags_filter_strings.getTableTagsColumnTitle(),multiSelect:!0,options:uniqueTags.map(({name:name,color:color})=>({value:name,name:name,view:external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(tag_Tag,{key:Object(get_id.a)("tag"),color:color,name:name,type:type}))}))}};function workpad_templates_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const{WorkpadTemplates:workpad_templates_strings}=i18n.e;class workpad_templates_WorkpadTemplates extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){super(...args),workpad_templates_defineProperty(this,"state",{sortField:"name",sortDirection:external_kbnSharedDeps_ElasticEui_.SortDirection.ASC,pageSize:10,searchTerm:"",filterTags:[]}),workpad_templates_defineProperty(this,"tagType","health"),workpad_templates_defineProperty(this,"onTableChange",tableChange=>{if(tableChange.sort){const{field:sortField,direction:sortDirection}=tableChange.sort;this.setState({sortField:sortField,sortDirection:sortDirection})}}),workpad_templates_defineProperty(this,"onSearch",({queryText:queryText=""})=>this.setState((queryText=>{const filterTags=[],searchTerms=[];return queryText.split(" ").forEach(part=>{if(part.indexOf(":")>=0){const[key,value]=part.split(":");if("tag"===key)return void filterTags.push(value)}searchTerms.push(part)}),{searchTerm:searchTerms.join(" "),filterTags:filterTags}})(queryText))),workpad_templates_defineProperty(this,"cloneTemplate",template=>this.props.onCreateFromTemplate(template).then(()=>this.props.onClose())),workpad_templates_defineProperty(this,"renderWorkpadTable",({rows:rows,pageNumber:pageNumber,totalPages:totalPages,setPage:setPage})=>{const{sortField:sortField,sortDirection:sortDirection}=this.state,columns=[{field:"name",name:workpad_templates_strings.getTableNameColumnTitle(),sortable:!0,width:"30%",dataType:"string",render:(name,template)=>{const templateName=name.length?name:"Unnamed Template";return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:()=>this.cloneTemplate(template),"aria-label":workpad_templates_strings.getCloneTemplateLinkAriaLabel(templateName),type:"button"},templateName)}},{field:"help",name:workpad_templates_strings.getTableDescriptionColumnTitle(),sortable:!1,dataType:"string",width:"30%"},{field:"tags",name:workpad_templates_strings.getTableTagsColumnTitle(),sortable:!1,dataType:"string",width:"30%",render:tags=>external_kbnSharedDeps_React_default.a.createElement(tag_list_TagList,{tags:tags,tagType:this.tagType})}],sorting={sort:{field:sortField,direction:sortDirection}};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBasicTable,{compressed:!0,items:rows,itemId:"id",columns:columns,sorting:sorting,onChange:this.onTableChange,className:"canvasWorkpad__dropzoneTable canvasWorkpad__dropzoneTable--tags","data-test-subj":"canvasTemplatesTable"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),rows.length>0&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"none",justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPagination,{activePage:pageNumber,onPageClick:setPage,pageCount:totalPages}))))}),workpad_templates_defineProperty(this,"renderSearch",()=>{const{searchTerm:searchTerm}=this.state,filters=[getTagsFilter(this.tagType)];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSearchBar,{defaultQuery:searchTerm,box:{placeholder:workpad_templates_strings.getTemplateSearchPlaceholder(),incremental:!0},filters:filters,onChange:this.onSearch})})}render(){const{templates:templates}=this.props,{sortField:sortField,sortDirection:sortDirection,searchTerm:searchTerm,filterTags:filterTags}=this.state,filteredTemplates=Object(external_kbnSharedDeps_Lodash_.orderBy)(templates,[sortField,"name"],[sortDirection,"asc"]).filter(({name:name="",help:help="",tags:tags=[]})=>{const tagMatch=!filterTags.length||filterTags.every(filterTag=>tags.indexOf(filterTag)>-1),lowercaseSearch=searchTerm.toLowerCase(),textMatch=!lowercaseSearch||(name.toLowerCase().indexOf(lowercaseSearch)>-1||help.toLowerCase().indexOf(lowercaseSearch)>-1);return tagMatch&&textMatch});return external_kbnSharedDeps_React_default.a.createElement(paginate.a,{rows:filteredTemplates},pagination=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,this.renderSearch(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),this.renderWorkpadTable(pagination)))}}async function list(){return(await fetch.b.get(`${public_services.d.getService().getBasePath()}${constants.f}`)).data.templates}const applyTemplateStrings=templates=>{const templateStrings={Dark:{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.canvas.templates.darkName",{defaultMessage:"Dark"}),help:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.canvas.templates.darkHelp",{defaultMessage:"Dark color themed presentation deck"})},Light:{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.canvas.templates.lightName",{defaultMessage:"Light"}),help:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.canvas.templates.lightHelp",{defaultMessage:"Light color themed presentation deck"})},Status:{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.canvas.templates.statusName",{defaultMessage:"Status"}),help:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.canvas.templates.statusHelp",{defaultMessage:"Document-style report with live charts"})},Summary:{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.canvas.templates.summaryDisplayName",{defaultMessage:"Summary"}),help:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.canvas.templates.summaryHelp",{defaultMessage:"Infographic-style report with live charts"})},Pitch:{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.canvas.templates.pitchName",{defaultMessage:"Pitch"}),help:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.canvas.templates.pitchHelp",{defaultMessage:"Branded presentation with large photos"})}};return templates.map(template=>{const{name:templateName}=template,strings=templateStrings[templateName];if(strings){const{name:name,help:help}=strings;help&&(template.help=help),name&&(template.name=name)}return template.tags&&(template.tags=template.tags.map(tag=>i18n.o[tag]?i18n.o[tag]():tag)),template})},Creating=({name:name})=>external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"l"})," ",components.a.WorkpadTemplates.getCreatingTemplateLabel(name)),components_workpad_templates_WorkpadTemplates=({onClose:onClose})=>{const router=Object(external_kbnSharedDeps_React_.useContext)(RouterContext),[templates,setTemplates]=Object(external_kbnSharedDeps_React_.useState)(void 0),[creatingFromTemplateName,setCreatingFromTemplateName]=Object(external_kbnSharedDeps_React_.useState)(void 0),{error:error}=Object(public_services.g)();Object(external_kbnSharedDeps_React_.useEffect)(()=>{templates||(async()=>{const fetchedTemplates=await list();setTemplates(applyTemplateStrings(fetchedTemplates))})()},[templates]);let templateProp={};templates&&(templateProp=templates.reduce((reduction,template)=>(reduction[template.name]=template,reduction),{}));return creatingFromTemplateName?external_kbnSharedDeps_React_default.a.createElement(Creating,{name:creatingFromTemplateName}):external_kbnSharedDeps_React_default.a.createElement(workpad_templates_WorkpadTemplates,{onClose:onClose,templates:templateProp,onCreateFromTemplate:async template=>{setCreatingFromTemplateName(template.name);try{const result=await async function(templateId){return fetch.b.post(getApiPath(),{templateId:templateId})}(template.id);router&&router.navigateTo("loadWorkpad",{id:result.data.id,page:1})}catch(e){setCreatingFromTemplateName(void 0),error(e,{title:"Couldn't create workpad from template"})}}})},{WorkpadManager:workpad_manager_strings}=i18n.e,WorkpadManager=({onClose:onClose})=>{const tabs=[{id:"workpadLoader",name:workpad_manager_strings.getMyWorkpadsTabLabel(),content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(components_workpad_loader_WorkpadLoader,{onClose:onClose}))},{id:"workpadTemplates",name:workpad_manager_strings.getWorkpadTemplatesTabLabel(),"data-test-subj":"workpadTemplates",content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(components_workpad_templates_WorkpadTemplates,{onClose:onClose}))}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeader,{className:"canvasHomeApp__modalHeader"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeaderTitle,null,external_kbnSharedDeps_React_default.a.createElement("h1",null,workpad_manager_strings.getModalTitle()))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalBody,{className:"canvasHomeApp__modalBody"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTabbedContent,{tabs:tabs,initialSelectedTab:tabs[0]})))},setDocTitle=title=>document.title=title+" - Kibana",home_app_HomeApp=Object(lib.connect)(null,dispatch=>({onLoad(){dispatch(resetWorkpad())}}))(({onLoad:onLoad=(()=>{})})=>(onLoad(),setDocTitle("Canvas"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPage,{className:"canvasHomeApp",restrictWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContent,{className:"canvasHomeApp__content",panelPaddingSize:"none",horizontalPosition:"center"},external_kbnSharedDeps_React_default.a.createElement(WorkpadManager,{onClose:()=>{}})))))),routes_routes=[{name:"home",path:"/",action:()=>()=>{setBreadcrumb([{text:"Canvas",href:"#/"}])},meta:{component:home_app_HomeApp}}],createAsset=Object(redux_actions_lib.createAction)("createAsset",(type,value,id)=>({type:type,value:value,id:id})),setAssetValue=Object(redux_actions_lib.createAction)("setAssetContent",(id,value)=>({id:id,value:value})),removeAsset=Object(redux_actions_lib.createAction)("removeAsset"),setAssets=Object(redux_actions_lib.createAction)("setAssets"),resetAssets=Object(redux_actions_lib.createAction)("resetAssets"),addPage=Object(redux_actions_lib.createAction)("addPage"),duplicatePage=Object(redux_actions_lib.createAction)("duplicatePage"),movePage=Object(redux_actions_lib.createAction)("movePage",(id,position)=>({id:id,position:position})),removePage=Object(redux_actions_lib.createAction)("removePage"),stylePage=Object(redux_actions_lib.createAction)("stylePage",(pageId,style)=>({pageId:pageId,style:style})),pages_setPage=Object(redux_actions_lib.createAction)("setPage"),setPageTransition=Object(redux_actions_lib.createAction)("setPageTransition",(pageId,transition)=>({pageId:pageId,transition:transition}));var storage=__webpack_require__(48);const setClipboardData=data=>{Object(storage.a)().set(constants.w,JSON.stringify(data))},getClipboardData=()=>Object(storage.a)().get(constants.w),cloneSubgraphs=nodes=>{const idMap=arrayToMap(nodes.map(n=>n.id));return Object.keys(idMap).forEach(key=>idMap[key]=Object(get_id.a)(key.split("-")[0])),nodes.map(element=>({...element,id:idMap[element.id],position:{...element.position,parent:element.position.parent?idMap[element.position.parent]:null}}))},custom_element_service_getApiPath=function(){return`${public_services.d.getService().getBasePath()}${constants.b}`},extractId=node=>node.id,basicHandlerCreators={cloneNodes:({insertNodes:insertNodes,pageId:pageId,selectToplevelNodes:selectToplevelNodes,selectedNodes:selectedNodes})=>()=>{const clonedNodes=selectedNodes&&cloneSubgraphs(selectedNodes);clonedNodes&&(insertNodes(clonedNodes,pageId),selectToplevelNodes(clonedNodes))},deleteNodes:({pageId:pageId,removeNodes:removeNodes,selectedNodes:selectedNodes})=>()=>{selectedNodes.length&&removeNodes(selectedNodes.map(extractId),pageId)},createCustomElement:({selectedNodes:selectedNodes})=>(name="",description="",image="")=>{if(selectedNodes.length){const content=JSON.stringify({selectedNodes:selectedNodes}),customElement={id:Object(get_id.a)("custom-element"),name:Object(external_kbnSharedDeps_Lodash_.camelCase)(name),displayName:name,help:description,image:image,content:content};(customElement=>fetch.b.post(custom_element_service_getApiPath(),customElement))(customElement).then(()=>public_services.c.getService().success(`Custom element '${customElement.displayName||customElement.id}' was saved`,{"data-test-subj":"canvasCustomElementCreate-success"})).catch(error=>public_services.c.getService().warning(error,{title:`Custom element '${customElement.displayName||customElement.id}' was not saved`}))}}},alignmentDistributionHandlerCreators=Object.assign({},...["alignLeft","alignCenter","alignRight","alignTop","alignMiddle","alignBottom","distributeHorizontally","distributeVertically"].map(event=>({[event]:({commit:commit})=>()=>{commit("actionEvent",{event:event})}}))),groupHandlerCreators={groupNodes:({commit:commit})=>()=>{commit("actionEvent",{event:"group"})},ungroupNodes:({commit:commit})=>()=>{commit("actionEvent",{event:"ungroup"})}},clipboardHandlerCreators={cutNodes:({pageId:pageId,removeNodes:removeNodes,selectedNodes:selectedNodes})=>()=>{selectedNodes.length&&(setClipboardData({selectedNodes:selectedNodes}),removeNodes(selectedNodes.map(extractId),pageId),public_services.c.getService().success("Cut element to clipboard"))},copyNodes:({selectedNodes:selectedNodes})=>()=>{selectedNodes.length&&(setClipboardData({selectedNodes:selectedNodes}),public_services.c.getService().success("Copied element to clipboard"))},pasteNodes:({insertNodes:insertNodes,pageId:pageId,selectToplevelNodes:selectToplevelNodes})=>()=>{const{selectedNodes:selectedNodes=[]}=JSON.parse(getClipboardData())||{},clonedNodes=selectedNodes&&cloneSubgraphs(selectedNodes);clonedNodes&&(insertNodes(clonedNodes,pageId),selectToplevelNodes(clonedNodes))}},layerHandlerCreators={bringToFront:({elementLayer:elementLayer,pageId:pageId,selectedNodes:selectedNodes})=>()=>{1===selectedNodes.length&&elementLayer(pageId,selectedNodes[0].id,1/0)},bringForward:({elementLayer:elementLayer,pageId:pageId,selectedNodes:selectedNodes})=>()=>{1===selectedNodes.length&&elementLayer(pageId,selectedNodes[0].id,1)},sendBackward:({elementLayer:elementLayer,pageId:pageId,selectedNodes:selectedNodes})=>()=>{1===selectedNodes.length&&elementLayer(pageId,selectedNodes[0].id,-1)},sendToBack:({elementLayer:elementLayer,pageId:pageId,selectedNodes:selectedNodes})=>()=>{1===selectedNodes.length&&elementLayer(pageId,selectedNodes[0].id,-1/0)}},positionHandlerCreators={shiftUp:({selectedNodes:selectedNodes,setMultiplePositions:setMultiplePositions})=>()=>{setMultiplePositions(selectedNodes.map(element=>(element.position.top-=constants.s,element)))},shiftDown:({selectedNodes:selectedNodes,setMultiplePositions:setMultiplePositions})=>()=>{setMultiplePositions(selectedNodes.map(element=>(element.position.top+=constants.s,element)))},shiftLeft:({selectedNodes:selectedNodes,setMultiplePositions:setMultiplePositions})=>()=>{setMultiplePositions(selectedNodes.map(element=>(element.position.left-=constants.s,element)))},shiftRight:({selectedNodes:selectedNodes,setMultiplePositions:setMultiplePositions})=>()=>{setMultiplePositions(selectedNodes.map(element=>(element.position.left+=constants.s,element)))},nudgeUp:({selectedNodes:selectedNodes,setMultiplePositions:setMultiplePositions})=>()=>{setMultiplePositions(selectedNodes.map(element=>(element.position.top-=constants.r,element)))},nudgeDown:({selectedNodes:selectedNodes,setMultiplePositions:setMultiplePositions})=>()=>{setMultiplePositions(selectedNodes.map(element=>(element.position.top+=constants.r,element)))},nudgeLeft:({selectedNodes:selectedNodes,setMultiplePositions:setMultiplePositions})=>()=>{setMultiplePositions(selectedNodes.map(element=>(element.position.left-=constants.r,element)))},nudgeRight:({selectedNodes:selectedNodes,setMultiplePositions:setMultiplePositions})=>()=>{setMultiplePositions(selectedNodes.map(element=>(element.position.left+=constants.r,element)))}},NANMATRIX=[NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN],ORIGIN=[0,0,0,1],RIGHT=[1,0,0,1],UP=[0,1,0,1],TOP_LEFT=[-1,1,0,1],TOP_RIGHT=[1,1,0,1],BOTTOM_LEFT=[-1,-1,0,1],BOTTOM_RIGHT=[1,-1,0,1],translate=(x,y,z)=>[1,0,0,0,0,1,0,0,0,0,1,0,x,y,z,1],matrix_scale=(x,y,z)=>[x,0,0,0,0,y,0,0,0,0,z,0,0,0,0,1],rotateZ=a=>{const sinA=Math.sin(a),cosA=Math.cos(a);return[cosA,-sinA,0,0,sinA,cosA,0,0,0,0,1,0,0,0,0,1]},multiply=(first,...rest)=>rest.reduce((prev,next)=>(([a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p],[A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P])=>[a*A+e*B+i*C+m*D,b*A+f*B+j*C+n*D,c*A+g*B+k*C+o*D,d*A+h*B+l*C+p*D,a*E+e*F+i*G+m*H,b*E+f*F+j*G+n*H,c*E+g*F+k*G+o*H,d*E+h*F+l*G+p*H,a*I+e*J+i*K+m*L,b*I+f*J+j*K+n*L,c*I+g*J+k*K+o*L,d*I+h*J+l*K+p*L,a*M+e*N+i*O+m*P,b*M+f*N+j*O+n*P,c*M+g*N+k*O+o*P,d*M+h*N+l*O+p*P])(prev,next),first),mvMultiply=([a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p],[A,B,C,D])=>[a*A+e*B+i*C+m*D,b*A+f*B+j*C+n*D,c*A+g*B+k*C+o*D,d*A+h*B+l*C+p*D],normalize=([A,B,C,D])=>1===D?[A,B,C,D]:[A/D,B/D,C/D,1],invert=([a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p])=>{const inv=[f*k*p-f*l*o-j*g*p+j*h*o+n*g*l-n*h*k,-b*k*p+b*l*o+j*c*p-j*d*o-n*c*l+n*d*k,b*g*p-b*h*o-f*c*p+f*d*o+n*c*h-n*d*g,-b*g*l+b*h*k+f*c*l-f*d*k-j*c*h+j*d*g,-e*k*p+e*l*o+i*g*p-i*h*o-m*g*l+m*h*k,a*k*p-a*l*o-i*c*p+i*d*o+m*c*l-m*d*k,-a*g*p+a*h*o+e*c*p-e*d*o-m*c*h+m*d*g,a*g*l-a*h*k-e*c*l+e*d*k+i*c*h-i*d*g,e*j*p-e*l*n-i*f*p+i*h*n+m*f*l-m*h*j,-a*j*p+a*l*n+i*b*p-i*d*n-m*b*l+m*d*j,a*f*p-a*h*n-e*b*p+e*d*n+m*b*h-m*d*f,-a*f*l+a*h*j+e*b*l-e*d*j-i*b*h+i*d*f,-e*j*o+e*k*n+i*f*o-i*g*n-m*f*k+m*g*j,a*j*o-a*k*n-i*b*o+i*c*n+m*b*k-m*c*j,-a*f*o+a*g*n+e*b*o-e*c*n-m*b*g+m*c*f,a*f*k-a*g*j-e*b*k+e*c*j+i*b*g-i*c*f],det=a*inv[0]+b*inv[4]+c*inv[8]+d*inv[12];if(0===det)return NANMATRIX;{const recDet=1/det;for(let index=0;index<16;index++)inv[index]*=recDet;return inv}},translateComponent=a=>[1,0,0,0,0,1,0,0,0,0,1,0,a[12],a[13],a[14],1],compositeComponent=([a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p])=>[a,b,c,d,e,f,g,h,i,j,k,l,0,0,0,p],reduceTransforms=transforms=>1===transforms.length?transforms[0]:transforms.slice(1).reduce((prev,next)=>multiply(prev,next),transforms[0]),clamp=(low,high,value)=>Math.min(high,Math.max(low,value)),matrixToAngle=transformMatrix=>{const z0=Math.acos(clamp(-1,1,transformMatrix[0]));return Math.asin(clamp(-1,1,transformMatrix[1]))>0?z0:-z0},UNITMATRIX=[1,0,0,0,1,0,0,0,1],matrix2d_translate=(x,y)=>[1,0,0,0,1,0,x,y,1],matrix2d_multiply=(first,...rest)=>rest.reduce((prev,next)=>(([a,b,c,d,e,f,g,h,i],[A,B,C,D,E,F,G,H,I])=>[a*A+d*B+g*C,b*A+e*B+h*C,c*A+f*B+i*C,a*D+d*E+g*F,b*D+e*E+h*F,c*D+f*E+i*F,a*G+d*H+g*I,b*G+e*H+h*I,c*G+f*H+i*I])(prev,next),first),matrix2d_componentProduct=([a,b,c],[A,B,C])=>[a*A,b*B,c*C],insideAABB=({x:x,y:y,a:a,b:b})=>(transformMatrix,aa,bb)=>((transformMatrix,a,b)=>[TOP_LEFT,TOP_RIGHT,BOTTOM_RIGHT,BOTTOM_LEFT].map(corner=>mvMultiply(transformMatrix,(([a,b,c,d],[A,B,C,D])=>[a*A,b*B,c*C,d*D])(corner,[a,b,0,1]))))(transformMatrix,aa,bb).every(([xx,yy])=>x-a<=xx&&xx<=x+a&&y-b<=yy&&yy<=y+b),rectangleAtPoint=({transformMatrix:transformMatrix,a:a,b:b},x,y)=>{const{inverseProjection:inverseProjection,planeVector:planeVector}=((transformMatrix,x,y)=>{const centerPoint=normalize(mvMultiply(transformMatrix,ORIGIN)),rightPoint=normalize(mvMultiply(transformMatrix,RIGHT)),upPoint=normalize(mvMultiply(transformMatrix,UP)),x0=rightPoint[0]-centerPoint[0],y0=rightPoint[1]-centerPoint[1],x1=upPoint[0]-centerPoint[0],y1=upPoint[1]-centerPoint[1],rightSlope=y1?rightPoint[2]-centerPoint[2]:0,upSlope=y1?upPoint[2]-centerPoint[2]:0,inverseProjection=invert(transformMatrix),A1=1/(x0-y0/y1*x1),A2=-A1*x1/y1,A0=-A1*centerPoint[0]-A2*centerPoint[1],invY1=-1/y1,z0=centerPoint[2]+rightSlope*A0+upSlope*invY1*(centerPoint[1]+A0*y0),zx=A1*(rightSlope+upSlope*y0*invY1),zy=-upSlope*invY1+A2*(rightSlope+upSlope*y0*invY1);return{inverseProjection:inverseProjection,planeVector:0===y1?[x,y,centerPoint[2],1]:[zx,zy,z0]}})(transformMatrix,x,y),z=(([a,b,c],[A,B,C])=>a*A+b*B+c*C)(planeVector,[x,y,1]),intersection=normalize(mvMultiply(inverseProjection,[x,y,z,1])),[sx,sy]=intersection;return{z:z,intersection:intersection,inside:Math.abs(sx)<=a&&Math.abs(sy)<=b}},shapesAt=(shapes,{x:x,y:y})=>((shapes,x,y)=>shapes.map((shape,index)=>({...rectangleAtPoint(shape,x,y),shape:shape,index:index})))(shapes,x,y).filter(shape=>shape.inside).sort((shape1,shape2)=>shape2.z-shape1.z||shape2.index-shape1.index).map(shape=>shape.shape),landmarkPoint=(a,b,transformMatrix,k,l)=>((transformMatrix,a,b)=>normalize(mvMultiply(transformMatrix,[a,b,0,1])))(transformMatrix,k*a,l*b),layout_functions_idMap={},resizeVertexTuples=[[-1,-1,315],[1,-1,45],[1,1,135],[-1,1,225],[0,-1,0],[1,0,90],[0,1,180],[-1,0,270]],connectorVertices=[[[-1,-1],[0,-1]],[[0,-1],[1,-1]],[[1,-1],[1,0]],[[1,0],[1,1]],[[1,1],[0,1]],[[0,1],[-1,1]],[[-1,1],[-1,0]],[[-1,0],[-1,-1]]],cornerVertices=[[-1,-1],[1,-1],[-1,1],[1,1]],resizeMultiplierHorizontal={left:-1,center:0,right:1},resizeMultiplierVertical={top:-1,center:0,bottom:1},xNames={"-1":"left",0:"center",1:"right"},yNames={"-1":"top",0:"center",1:"bottom"},bidirectionalCursors={0:"ns-resize",45:"nesw-resize",90:"ew-resize",135:"nwse-resize",180:"ns-resize",225:"nesw-resize",270:"ew-resize",315:"nwse-resize"},extend=([[xMin,yMin],[xMax,yMax]],[x0,y0],[x1,y1])=>[[Math.min(xMin,x0,x1),Math.min(yMin,y0,y1)],[Math.max(xMax,x0,x1),Math.max(yMax,y0,y1)]],shapeAABB=(shape,prevOuter)=>cornerVertices.reduce((prevInner,xyVertex)=>{const cornerPoint=normalize(mvMultiply(shape.transformMatrix,[shape.a*xyVertex[0],shape.b*xyVertex[1],0,1]));return extend(prevInner,cornerPoint,cornerPoint)},prevOuter),initialTransformTuple={deltaX:0,deltaY:0,transform:null,cumulativeTransform:null},contentShape=allShapes=>shape=>"annotation"===shape.type?contentShape(allShapes)(allShapes.find(s=>s.id===shape.parent)):shape,primaryShape=shape=>"annotation"===shape.type?shape.parent:shape.id,minimumSize=(min,{a:a,b:b,baseAB:baseAB},vector)=>[Math.max(baseAB?min-baseAB[0]:min-a,vector[0]),Math.max(baseAB?min-baseAB[1]:min-b,vector[1])],centeredResizeManipulation=config=>({gesture:gesture,shape:shape,directShape:directShape})=>{const transform=gesture.cumulativeTransform;if(!shape||!directShape)return{transforms:[],shapes:[]};const vector=mvMultiply(multiply(invert(compositeComponent(shape.localTransformMatrix)),transform),ORIGIN),orientationMask=[resizeMultiplierHorizontal[directShape.horizontalPosition],resizeMultiplierVertical[directShape.verticalPosition],0],orientedVector=matrix2d_componentProduct(vector,orientationMask),cappedOrientedVector=minimumSize(config.minimumElementSize,shape,orientedVector);return{cumulativeTransforms:[],cumulativeSizes:[gesture.sizes||matrix2d_translate(...cappedOrientedVector)],shapes:[shape.id]}},asymmetricResizeManipulation=config=>({gesture:gesture,shape:shape,directShape:directShape})=>{const transform=gesture.cumulativeTransform;if(!shape||!directShape)return{transforms:[],shapes:[]};const composite=compositeComponent(shape.localTransformMatrix),inv=invert(composite),vector=mvMultiply(multiply(inv,transform),ORIGIN),orientationMask=[resizeMultiplierHorizontal[directShape.horizontalPosition]/2,resizeMultiplierVertical[directShape.verticalPosition]/2,0],orientedVector=matrix2d_componentProduct(vector,orientationMask),cappedOrientedVector=minimumSize(config.minimumElementSize,shape,orientedVector),antiRotatedVector=mvMultiply(multiply(composite,matrix_scale(resizeMultiplierHorizontal[directShape.horizontalPosition],resizeMultiplierVertical[directShape.verticalPosition],1),translate(cappedOrientedVector[0],cappedOrientedVector[1],0)),ORIGIN),sizeMatrix=gesture.sizes||matrix2d_translate(...cappedOrientedVector);return{cumulativeTransforms:[translate(antiRotatedVector[0],antiRotatedVector[1],0)],cumulativeSizes:[sizeMatrix],shapes:[shape.id]}},directShapeTranslateManipulation=(cumulativeTransforms,directShapes)=>[{cumulativeTransforms:cumulativeTransforms,shapes:directShapes.map(shape=>"annotation"!==shape.type&&shape.id).filter(identity)}],rotationAnnotationManipulation=(config,directTransforms,directShapes,allShapes,cursorPosition,alterSnapGesture)=>{const shapes=directShapes.map(shape=>"annotation"===shape.type&&shape.subtype===config.rotationHandleName&&shape.parent).map(id=>id&&allShapes.find(shape=>shape.id===id));return flatten(shapes.map((shape,i)=>directTransforms.map(transform=>({transform:transform,shape:shape,directShape:directShapes[i],cursorPosition:cursorPosition,alterSnapGesture:alterSnapGesture})))).map((config=>({shape:shape,directShape:directShape,cursorPosition:{x:x,y:y},alterSnapGesture:alterSnapGesture})=>{if(!shape||!directShape)return{transforms:[],shapes:[]};const center=shape.transformMatrix,centerPosition=mvMultiply(center,ORIGIN),vector=mvMultiply(multiply(center,directShape.localTransformMatrix),ORIGIN),oldAngle=Math.atan2(centerPosition[1]-vector[1],centerPosition[0]-vector[0]),newAngle=Math.atan2(centerPosition[1]-y,centerPosition[0]-x),closest45deg=Math.round(newAngle/(Math.PI/12))*Math.PI/12,radius=Math.sqrt(Math.pow(centerPosition[0]-x,2)+Math.pow(centerPosition[1]-y,2)),closest45degPosition=[Math.cos(closest45deg)*radius,Math.sin(closest45deg)*radius],pixelDifference=Math.sqrt(Math.pow(closest45degPosition[0]-(centerPosition[0]-x),2)+Math.pow(closest45degPosition[1]-(centerPosition[1]-y),2)),relaxed=-1!==alterSnapGesture.indexOf("relax"),newSnappedAngle=pixelDifference<config.rotateSnapInPixels&&!relaxed?closest45deg:newAngle;return{transforms:[rotateZ(oldAngle-newSnappedAngle)],shapes:[shape.id]}})(config))},resizeAnnotationManipulation=(config,transformGestures,directShapes,allShapes,manipulator)=>{const shapes=directShapes.map(shape=>"annotation"===shape.type&&shape.subtype===config.resizeHandleName&&shape.parent).map(id=>id&&allShapes.find(shape=>shape.id===id));return flatten(shapes.map((shape,i)=>transformGestures.map(gesture=>({gesture:gesture,shape:shape,directShape:directShapes[i]})))).map(manipulator)},fromScreen=currentTransform=>transform=>{if(0!==transform[12]||0!==transform[13]){const composite=compositeComponent(currentTransform),inverse=invert(composite);return translateComponent(multiply(inverse,transform))}return transform},horizontalToIndex=horizontal=>horizontal?0:1,anchorAABB=(aabb,anchorDirection,horizontal)=>{const dimension=horizontalToIndex(horizontal);if(0===anchorDirection)return(aabb[0][dimension]+aabb[1][dimension])/2;return aabb[(anchorDirection+1)/2][dimension]},getUpstreams=(shapes,shape)=>shape.parent?getUpstreams(shapes,shapes.find(s=>s.id===shape.parent)).concat([shape]):[shape],snappedA=shape=>shape.a+(shape.snapResizeVector?shape.snapResizeVector[0]:0),snappedB=shape=>shape.b+(shape.snapResizeVector?shape.snapResizeVector[1]:0),cascadeUnsnappedTransforms=(shapes,shape)=>{if(!shape.parent)return shape.localTransformMatrix;const upstreamTransforms=getUpstreams(shapes,shape).map(s=>s.localTransformMatrix);return reduceTransforms(upstreamTransforms)},cascadeTransforms=(shapes,shape)=>{const cascade=s=>s.snapDeltaMatrix?multiply(s.localTransformMatrix,s.snapDeltaMatrix):s.localTransformMatrix;if(!shape.parent)return cascade(shape);const upstreamTransforms=getUpstreams(shapes,shape).map(cascade);return reduceTransforms(upstreamTransforms)},isHorizontal=constraint=>"horizontal"===constraint.dimension,isVertical=constraint=>"vertical"===constraint.dimension,closestConstraint=(prev={distance:1/0},next)=>next.distance<prev.distance?{constraint:next,distance:next.distance}:prev,directionalConstraint=(constraints,filterFun)=>{const closest=constraints.filter(filterFun).reduce(closestConstraint,void 0);return closest&&closest.constraint},rotationAnnotation=(config,shapes,selectedShapes,shape,i)=>{const foundShape=shapes.find(s=>shape.id===s.id);if(!foundShape)return!1;if("annotation"===foundShape.type)return rotationAnnotation(config,shapes,selectedShapes,shapes.find(s=>foundShape.parent===s.id),i);const b=snappedB(foundShape),centerTop=translate(0,-b,0),pixelOffset=translate(0,-config.rotateAnnotationOffset,config.atopZ),transform=multiply(centerTop,pixelOffset);return{id:config.rotationHandleName+"_"+i,type:"annotation",subtype:config.rotationHandleName,interactive:!0,parent:foundShape.id,localTransformMatrix:transform,a:config.rotationHandleSize,b:config.rotationHandleSize}},magic=(config,shape,shapes)=>{const epsilon=config.rotationEpsilon,integralOf=2*Math.PI;function recurse(s){return shapes.filter((properShape=s,shape=>shape.parent===properShape.id)).every(resizableChild);var properShape}function resizableChild(s){return(s=>{const ratio=matrixToAngle(s.localTransformMatrix)/integralOf;return Math.abs(Math.round(ratio)-ratio)<epsilon})(s)&&recurse(s)}return recurse(shape)};function resizeAnnotation(config,shapes,selectedShapes,shape){const foundShape=shapes.find(s=>shape.id===s.id),properShape=foundShape&&(foundShape.subtype===config.resizeHandleName?shapes.find(s=>shape.parent===s.id):foundShape);if(!foundShape)return[];if(foundShape.subtype===config.resizeHandleName){return foundShape.interactive?resizeAnnotationsFunction(config,{shapes:shapes,selectedShapes:[shapes.find(s=>shape.parent===s.id)]}):[]}if("annotation"===foundShape.type)return resizeAnnotation(config,shapes,selectedShapes,shapes.find(s=>foundShape.parent===s.id));const a=snappedA(properShape),b=snappedB(properShape);return[...("group"!==properShape.type||config.groupResize&&magic(config,properShape,shapes.filter(s=>"annotation"!==s.type))?resizeVertexTuples:[]).map(((config,parent,a,b)=>([x,y,cursorAngle])=>{const markerPlace=translate(x*a,y*b,config.resizeAnnotationOffsetZ),pixelOffset=translate(-x*config.resizeAnnotationOffset,-y*config.resizeAnnotationOffset,config.atopZ+10),transform=multiply(markerPlace,pixelOffset),xName=xNames[x],yName=yNames[y];return{id:[config.resizeHandleName,xName,yName,parent].join("_"),type:"annotation",subtype:config.resizeHandleName,horizontalPosition:xName,verticalPosition:yName,cursorAngle:cursorAngle,interactive:!0,parent:parent.id,localTransformMatrix:transform,backgroundColor:"rgb(0,255,0,1)",a:config.resizeAnnotationSize,b:config.resizeAnnotationSize}})(config,shape,a,b)),...connectorVertices.map(((config,parent,a,b)=>([[x0,y0],[x1,y1]])=>{const x=a*mean(x0,x1),y=b*mean(y0,y1),transform=translate(x,y,config.atopZ-10),horizontal=y0===y1,length=horizontal?a*Math.abs(x1-x0):b*Math.abs(y1-y0),sectionHalfLength=Math.max(0,length/2-config.resizeAnnotationConnectorOffset);return{id:[config.resizeConnectorName,xNames[x0],yNames[y0],xNames[x1],yNames[y1],parent].join("_"),type:"annotation",subtype:config.resizeConnectorName,interactive:!0,parent:parent.id,localTransformMatrix:transform,backgroundColor:config.devColor,a:horizontal?sectionHalfLength:.5,b:horizontal?.5:sectionHalfLength}})(config,shape,a,b))]}function resizeAnnotationsFunction(config,{shapes:shapes,selectedShapes:selectedShapes}){return flatten(selectedShapes.map(shape=>resizeAnnotation(config,shapes,selectedShapes,shape)).filter(identity))}const crystallizeConstraint=shape=>{const result={...shape};return shape.snapDeltaMatrix&&(result.localTransformMatrix=multiply(shape.localTransformMatrix,shape.snapDeltaMatrix),result.snapDeltaMatrix=null),shape.snapResizeVector&&(result.a=snappedA(shape),result.b=snappedB(shape),result.snapResizeVector=null),result},dissolveGroups=(groupsToDissolve,shapes,selectedShapes)=>({shapes:shapes.filter(s=>!groupsToDissolve.find(g=>s.id===g.id)).map(shape=>{const preexistingGroupParent=groupsToDissolve.find(groupShape=>groupShape.id===shape.parent);return preexistingGroupParent?{...shape,parent:null,localTransformMatrix:multiply(shapes.find(s=>s.id===preexistingGroupParent.id).localTransformMatrix,shape.localTransformMatrix)}:shape}),selectedShapes:selectedShapes.filter(s=>!groupsToDissolve.find(g=>g.id===s.id))}),asYetUngroupedShapes=(preexistingAdHocGroups,selectedShapes)=>{return selectedShapes.filter((shapes=preexistingAdHocGroups,shape=>!shapes.some(g=>shape.parent===g.id)));var shapes},axisAlignedBoundingBoxShape=(config,shapesToBox)=>{const axisAlignedBoundingBox=shapesToBox.reduce((prevOuter,shape)=>extend(prevOuter,...shapeAABB(shape,prevOuter)),[[1/0,1/0],[-1/0,-1/0]]);const{a:a,b:b,localTransformMatrix:localTransformMatrix,rigTransform:rigTransform}=(([[xMin,yMin],[xMax,yMax]])=>{const a=(xMax-xMin)/2,b=(yMax-yMin)/2,xTranslate=xMin+a,yTranslate=yMin+b;return{a:a,b:b,localTransformMatrix:translate(xTranslate,yTranslate,0),rigTransform:translate(-xTranslate,-yTranslate,-0)}})(axisAlignedBoundingBox);return{id:((name,extension)=>{const key=name+"|"+extension;return layout_functions_idMap[key]||(layout_functions_idMap[key]=Object(get_id.a)(name))})(config.groupName,shapesToBox.map(s=>s.id).join("|")),type:config.groupName,subtype:config.adHocGroupName,a:a,b:b,localTransformMatrix:localTransformMatrix,rigTransform:rigTransform,parent:null}},resetChild=s=>{s.childBaseAB&&(s.childBaseAB=null,s.baseLocalTransformMatrix=null)},childScaler=({a:a,b:b},baseAB)=>{const groupScaleX=Math.max(a/baseAB[0],1e-6),groupScaleY=Math.max(b/baseAB[1],1e-6);return matrix_scale(groupScaleX,groupScaleY,1)},resizeChild=groupScale=>s=>{const childBaseAB=s.childBaseAB||[s.a,s.b],impliedScale=matrix_scale(...childBaseAB,1),inverseImpliedScale=invert(impliedScale),baseLocalTransformMatrix=s.baseLocalTransformMatrix||s.localTransformMatrix,normalizedBaseLocalTransformMatrix=multiply(baseLocalTransformMatrix,impliedScale),T=multiply(groupScale,normalizedBaseLocalTransformMatrix),backScaler=groupScale.map(d=>Math.abs(d)),inverseBackScaler=invert(backScaler),abTuple=mvMultiply(multiply(backScaler,impliedScale),[1,1,1,1]);s.localTransformMatrix=multiply(T,multiply(inverseImpliedScale,inverseBackScaler)),s.a=abTuple[0],s.b=abTuple[1],s.childBaseAB=childBaseAB,s.baseLocalTransformMatrix=baseLocalTransformMatrix},resizeGroup=(shapes,rootElement)=>{const idMap={};for(const shape of shapes)idMap[shape.id]=shape;const depths={},ancestorsLength=shape=>shape.parent?ancestorsLength(idMap[shape.parent])+1:0;for(const shape of shapes)depths[shape.id]=ancestorsLength(shape);const resizedParents={[rootElement.id]:rootElement},sortedShapes=shapes.slice().sort((a,b)=>depths[a.id]-depths[b.id]);for(const shape of sortedShapes){const parent=resizedParents[shape.parent];parent&&(resizedParents[shape.id]=shape,s=parent,Boolean(s.childBaseAB||s.baseAB)?resizeChild(childScaler(parent,parent.childBaseAB||parent.baseAB))(shape):resetChild(shape))}var s;return sortedShapes},preserveCurrentGroups=(shapes,selectedShapes)=>({shapes:shapes,selectedShapes:selectedShapes}),singleSelect=(prev,config,hoveredShapes,metaHeld,uid,_,boxHighlightedShapes)=>{const depthIndex=!config.depthSelect||!metaHeld||hoveredShapes.length&&"annotation"===hoveredShapes[0].type?0:(prev.depthIndex+(prev.down?0:1))%hoveredShapes.length;return{shapes:hoveredShapes.length?[hoveredShapes[depthIndex]]:[],uid:uid,depthIndex:hoveredShapes.length?depthIndex:0,down:!0,boxHighlightedShapes:boxHighlightedShapes}},multiSelect=(prev,config,hoveredShapes,metaHeld,uid,selectedShapeObjects,boxHighlightedShapes)=>{var keyFun,set1,set2;return{shapes:hoveredShapes.length>0?(keyFun=shape=>shape.id,set1=selectedShapeObjects,set2=hoveredShapes.slice(0,1),set1.filter(s1=>!set2.find(s2=>keyFun(s2)===keyFun(s1))).concat(set2.filter(s2=>!set1.find(s1=>keyFun(s1)===keyFun(s2))))):[],uid:uid,depthIndex:0,down:!1,boxHighlightedShapes:boxHighlightedShapes}},borderAnnotation=(subtype,lift)=>shape=>({...shape,id:subtype+"_"+shape.id,type:"annotation",subtype:subtype,interactive:!1,localTransformMatrix:multiply(shape.localTransformMatrix,translate(0,0,lift)),parent:shape.parent}),alignments={alignLeft:{type:"alignLeftAction",horizontal:!0,controlledAnchor:-1,controllingAnchor:-1},alignCenter:{type:"alignCenterAction",horizontal:!0,controlledAnchor:0,controllingAnchor:0},alignRight:{type:"alignRightAction",horizontal:!0,controlledAnchor:1,controllingAnchor:1},alignTop:{type:"alignTopAction",horizontal:!1,controlledAnchor:-1,controllingAnchor:-1},alignMiddle:{type:"alignMiddleAction",horizontal:!1,controlledAnchor:0,controllingAnchor:0},alignBottom:{type:"alignBottomAction",horizontal:!1,controlledAnchor:1,controllingAnchor:1}},distributions={distributeHorizontally:{type:"distributeHorizontallyAction",horizontal:!0},distributeVertically:{type:"distributeVerticallyAction",horizontal:!1}},isGroupId=id=>id.startsWith("group"),headerData=id=>isGroupId(id)?{id:id,type:"group",subtype:"persistentGroup"}:{id:id,type:"rectangleElement",subtype:""},transformData=({top:top,left:left,width:width,height:height,angle:angle},z)=>multiply(translate(left+width/2,top+height/2,z),rotateZ(-angle/180*Math.PI)),elementToShape=({id:id,position:position},z)=>({...headerData(id),parent:position&&position.parent||null,transformMatrix:transformData(position,z),a:position.width/2,b:position.height/2}),shapeToElement=shape=>({left:shape.transformMatrix[12]-shape.a,top:shape.transformMatrix[13]-shape.b,width:2*shape.a,height:2*shape.b,angle:Math.round(180*matrixToAngle(shape.transformMatrix)/Math.PI),parent:shape.parent||null,type:"group"===shape.type?"group":"element"}),dedupe=(d,i,a)=>a.findIndex(s=>s.id===d.id)===i,shapesForNodes=nodes=>{const rawShapes=nodes.map(elementToShape).filter((d,i,a)=>!isGroupId(d.id)||a.find(s=>s.parent===d.id)).filter(dedupe);(groups=>{const idMap=arrayToMap(groups.map(g=>g.id));groups.forEach(g=>{g.parent&&!idMap[g.parent]&&(g.parent=null)})})(rawShapes);const getLocalMatrix=(shapes=rawShapes,shape=>shape.parent?multiply(invert(shapes.find(s=>s.id===shape.parent).transformMatrix),shape.transformMatrix):shape.transformMatrix);var shapes;return rawShapes.map(s=>({...s,localTransformMatrix:getLocalMatrix(s)}))},updateGlobalPositionsInRedux=(setMultiplePositions,scene,unsortedElements)=>{const repositionings=((setMultiplePositions,{shapes:shapes,gestureEnd:gestureEnd},unsortedElements)=>{const ascending=(a,b)=>a.id<b.id?-1:1,relevant=s=>"annotation"!==s.type&&"adHocGroup"!==s.subtype,elements=unsortedElements.filter(relevant).sort(ascending);return shapes.filter(relevant).sort(ascending).map((shape,i)=>{const element=elements[i],elemPos=element&&element.position;if(elemPos&&gestureEnd){const oldProps={left:elemPos.left,top:elemPos.top,width:elemPos.width,height:elemPos.height,angle:Math.round(elemPos.angle),type:elemPos.type,parent:elemPos.parent||null},newProps=shapeToElement(shape);return 1/newProps.angle==-1/0&&(newProps.angle=0),Object(Recompose.shallowEqual)(oldProps,newProps)?null:{position:newProps,elementId:shape.id}}}).filter(identity)})(0,scene,unsortedElements);repositionings.length&&setMultiplePositions(repositionings)},globalStateUpdater=(dispatch,globalState)=>state=>{const nextScene=state.currentScene,page=getSelectedPage(globalState),elements=getNodes(globalState,page),shapes=nextScene.shapes,persistableGroups=shapes.filter(s=>"persistentGroup"===s.subtype).filter(dedupe),persistedGroups=elements.filter(e=>isGroupId(e.id)).filter(dedupe);persistableGroups.forEach(g=>{if(!persistedGroups.find(p=>{if(!p.id)throw new Error("Element has no id");return p.id===g.id})){const partialElement={id:g.id,filter:void 0,expression:'shape fill="rgba(255,255,255,0)" | render',position:{...shapeToElement(g)}};dispatch(elements_addElement(page,partialElement))}});const elementsToRemove=persistedGroups.filter(p=>!persistableGroups.find(g=>p.id===g.id)||!elements.find(e=>e.position.parent===p.id));updateGlobalPositionsInRedux(positions=>dispatch(elements_setMultiplePositions(positions.map(p=>({...p,pageId:page})))),nextScene,elements),elementsToRemove.length&&dispatch(removeElements(elementsToRemove.map(e=>e.id),page));const selectedPrimaryShapes=nextScene.selectedPrimaryShapes;Object(Recompose.shallowEqual)(selectedPrimaryShapes,globalState.transient.selectedToplevelNodes)||dispatch(transient_selectToplevelNodes(flatten(selectedPrimaryShapes.map(n=>n.startsWith("group")&&"adHocGroup"===(shapes.find(s=>s.id===n)||{}).subtype?shapes.filter(s=>"annotation"!==s.type&&s.parent===n).map(s=>s.id):[n]))))},crawlTree=shapes=>shapeId=>{const rec=shapeId=>[shapeId,...flatten(shapes.filter(s=>s.position.parent===shapeId).map(s=>rec(s.id)))];return rec(shapeId)},getClientPlatform=()=>{const platform=navigator.platform.toLowerCase();return platform.indexOf("mac")>=0?"osx":platform.indexOf("win")>=0?"windows":platform.indexOf("linux")>=0?"linux":"other"};var i18n_shortcuts=__webpack_require__(46);const shortcutHelp=i18n_shortcuts.a.getShortcutHelp(),namespaceDisplayNames=i18n_shortcuts.a.getNamespaceDisplayNames(),getShortcuts=(shortcuts,{modifiers:modifiers=[],help:help})=>{Array.isArray(shortcuts)||(shortcuts=[shortcuts]),Array.isArray(modifiers)||(modifiers=[modifiers]);let macShortcuts=[...shortcuts];return modifiers.includes("shift")&&(macShortcuts=macShortcuts.map(shortcut=>"shift+"+shortcut),shortcuts=shortcuts.map(shortcut=>"shift+"+shortcut)),(modifiers.includes("alt")||modifiers.includes("option"))&&(macShortcuts=macShortcuts.map(shortcut=>"option+"+shortcut),shortcuts=shortcuts.map(shortcut=>"alt+"+shortcut)),(modifiers.includes("ctrl")||modifiers.includes("command"))&&(macShortcuts=macShortcuts.map(shortcut=>"command+"+shortcut),shortcuts=shortcuts.map(shortcut=>"ctrl+"+shortcut)),{osx:macShortcuts,windows:shortcuts,linux:shortcuts,other:shortcuts,help:help}},refreshShortcut=getShortcuts("r",{modifiers:"alt",help:shortcutHelp.REFRESH}),previousPageShortcut=getShortcuts("[",{modifiers:"alt",help:shortcutHelp.PREV}),nextPageShortcut=getShortcuts("]",{modifiers:"alt",help:shortcutHelp.NEXT}),fullscreenShortcut=getShortcuts(["f","p"],{modifiers:"alt",help:shortcutHelp.FULLSCREEN}),keymap={ELEMENT:{displayName:namespaceDisplayNames.ELEMENT,CUT:getShortcuts("x",{modifiers:"ctrl",help:shortcutHelp.CUT}),COPY:getShortcuts("c",{modifiers:"ctrl",help:shortcutHelp.COPY}),PASTE:getShortcuts("v",{modifiers:"ctrl",help:shortcutHelp.PASTE}),CLONE:getShortcuts("d",{modifiers:"ctrl",help:shortcutHelp.CLONE}),DELETE:getShortcuts(["del","backspace"],{help:shortcutHelp.DELETE}),BRING_FORWARD:getShortcuts("up",{modifiers:"ctrl",help:shortcutHelp.BRING_TO_FRONT}),BRING_TO_FRONT:getShortcuts("up",{modifiers:["ctrl","shift"],help:shortcutHelp.BRING_FORWARD}),SEND_BACKWARD:getShortcuts("down",{modifiers:"ctrl",help:shortcutHelp.SEND_BACKWARD}),SEND_TO_BACK:getShortcuts("down",{modifiers:["ctrl","shift"],help:shortcutHelp.SEND_TO_BACK}),GROUP:getShortcuts("g",{help:shortcutHelp.GROUP}),UNGROUP:getShortcuts("u",{help:shortcutHelp.UNGROUP}),SHIFT_UP:getShortcuts("up",{help:shortcutHelp.SHIFT_UP}),SHIFT_DOWN:getShortcuts("down",{help:shortcutHelp.SHIFT_DOWN}),SHIFT_LEFT:getShortcuts("left",{help:shortcutHelp.SHIFT_LEFT}),SHIFT_RIGHT:getShortcuts("right",{help:shortcutHelp.SHIFT_RIGHT}),NUDGE_UP:getShortcuts("up",{modifiers:["shift"],help:shortcutHelp.NUDGE_UP}),NUDGE_DOWN:getShortcuts("down",{modifiers:["shift"],help:shortcutHelp.NUDGE_DOWN}),NUDGE_LEFT:getShortcuts("left",{modifiers:["shift"],help:shortcutHelp.NUDGE_LEFT}),NUDGE_RIGHT:getShortcuts("right",{modifiers:["shift"],help:shortcutHelp.NUDGE_RIGHT})},EXPRESSION:{displayName:namespaceDisplayNames.EXPRESSION,RUN:getShortcuts("enter",{modifiers:"ctrl",help:shortcutHelp.RUN})},EDITOR:{displayName:namespaceDisplayNames.EDITOR,MULTISELECT:getShortcuts("click",{modifiers:"shift",help:shortcutHelp.MULTISELECT}),RESIZE_FROM_CENTER:getShortcuts("drag",{modifiers:"alt",help:shortcutHelp.RESIZE_FROM_CENTER}),IGNORE_SNAP:getShortcuts("drag",{modifiers:"ctrl",help:shortcutHelp.IGNORE_SNAP}),SELECT_BEHIND:getShortcuts("click",{modifiers:"ctrl",help:shortcutHelp.SELECT_BEHIND}),UNDO:getShortcuts("z",{modifiers:"ctrl",help:shortcutHelp.UNDO}),REDO:getShortcuts("z",{modifiers:["ctrl","shift"],help:shortcutHelp.REDO}),PREV:previousPageShortcut,NEXT:nextPageShortcut,EDITING:getShortcuts("e",{modifiers:"alt",help:shortcutHelp.EDITING}),GRID:getShortcuts("g",{modifiers:"alt",help:shortcutHelp.GRID}),REFRESH:refreshShortcut,ZOOM_IN:getShortcuts("plus",{modifiers:["ctrl","alt"],help:shortcutHelp.ZOOM_IN}),ZOOM_OUT:getShortcuts("minus",{modifiers:["ctrl","alt"],help:shortcutHelp.ZOOM_OUT}),ZOOM_RESET:getShortcuts("[",{modifiers:["ctrl","alt"],help:shortcutHelp.ZOOM_RESET}),FULLSCREEN:fullscreenShortcut},PRESENTATION:{displayName:namespaceDisplayNames.PRESENTATION,FULLSCREEN:fullscreenShortcut,FULLSCREEN_EXIT:getShortcuts("esc",{help:shortcutHelp.FULLSCREEN_EXIT}),PREV:Object(external_kbnSharedDeps_Lodash_.mapValues)(previousPageShortcut,(osShortcuts,key)=>"help"===key?osShortcuts:osShortcuts.concat(["backspace","left"])),NEXT:Object(external_kbnSharedDeps_Lodash_.mapValues)(nextPageShortcut,(osShortcuts,key)=>"help"===key?osShortcuts:osShortcuts.concat(["space","right"])),REFRESH:refreshShortcut,PAGE_CYCLE_TOGGLE:getShortcuts("p",{help:shortcutHelp.PAGE_CYCLE_TOGGLE})}},getPrettyShortcut=shortcut=>{if(!shortcut)return"";let result=shortcut.toUpperCase();return result=result.replace(/command/i,"⌘"),result=result.replace(/option/i,"⌥"),result=result.replace(/left/i,"←"),result=result.replace(/right/i,"→"),result=result.replace(/up/i,"↑"),result=result.replace(/down/i,"↓"),result=result.replace(/plus/i,"+"),result=result.replace(/minus/i,"-"),result},os=getClientPlatform(),tool_tip_shortcut_ToolTipShortcut=Object(Recompose.compose)(Object(Recompose.mapProps)(({namespace:namespace,action:action})=>{const shortcutMap=keymap[namespace][action];if("string"==typeof shortcutMap)return{shortcut:""};const shortcuts=shortcutMap[os]||[];return{shortcut:getPrettyShortcut(shortcuts[0])}}))(({shortcut:shortcut})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs",textAlign:"center",color:"ghost"},shortcut.replace(/\+/g," + "))),{SidebarHeader:sidebar_header_strings}=components.a,sidebar_header_shortcutHelp=i18n_shortcuts.a.getShortcutHelp(),SidebarHeader=({title:title,showLayerControls:showLayerControls,bringToFront:bringToFront,bringForward:bringForward,sendBackward:sendBackward,sendToBack:sendToBack})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{className:"canvasLayout__sidebarHeader",gutterSize:"none",alignItems:"center",justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,title))),showLayerControls?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"bottom",content:external_kbnSharedDeps_React_default.a.createElement("span",null,sidebar_header_shortcutHelp.BRING_TO_FRONT,external_kbnSharedDeps_React_default.a.createElement(tool_tip_shortcut_ToolTipShortcut,{namespace:"ELEMENT",action:"BRING_TO_FRONT"}))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{color:"text",iconType:"sortUp",onClick:bringToFront,"aria-label":sidebar_header_strings.getBringToFrontAriaLabel()}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"bottom",content:external_kbnSharedDeps_React_default.a.createElement("span",null,sidebar_header_shortcutHelp.BRING_FORWARD,external_kbnSharedDeps_React_default.a.createElement(tool_tip_shortcut_ToolTipShortcut,{namespace:"ELEMENT",action:"BRING_FORWARD"}))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{color:"text",iconType:"arrowUp",onClick:bringForward,"aria-label":sidebar_header_strings.getBringForwardAriaLabel()}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"bottom",content:external_kbnSharedDeps_React_default.a.createElement("span",null,sidebar_header_shortcutHelp.SEND_BACKWARD,external_kbnSharedDeps_React_default.a.createElement(tool_tip_shortcut_ToolTipShortcut,{namespace:"ELEMENT",action:"SEND_BACKWARD"}))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{color:"text",iconType:"arrowDown",onClick:sendBackward,"aria-label":sidebar_header_strings.getSendBackwardAriaLabel()}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"bottom",content:external_kbnSharedDeps_React_default.a.createElement("span",null,sidebar_header_shortcutHelp.SEND_TO_BACK,external_kbnSharedDeps_React_default.a.createElement(tool_tip_shortcut_ToolTipShortcut,{namespace:"ELEMENT",action:"SEND_TO_BACK"}))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{color:"text",iconType:"sortDown",onClick:sendToBack,"aria-label":sidebar_header_strings.getSendToBackAriaLabel()}))))):null);SidebarHeader.defaultProps={showLayerControls:!1};const sidebar_header_SidebarHeader=Object(Recompose.compose)(Object(lib.connect)(state=>{const pageId=getSelectedPage(state),nodes=getNodes(state,pageId),selectedPrimaryShapeObjects=getSelectedToplevelNodes(state).map(id=>nodes.find(s=>s.id===id)).filter(shape=>shape),selectedPersistentPrimaryNodes=flatten(selectedPrimaryShapeObjects.map(shape=>nodes.find(n=>n.id===shape.id)?[shape.id]:nodes.filter(s=>s.parent===shape.id).map(s=>s.id)));return{pageId:pageId,selectedNodes:flatten(selectedPersistentPrimaryNodes.map(crawlTree(nodes))).map(id=>nodes.find(s=>s.id===id))}},dispatch=>({insertNodes:(selectedNodes,pageId)=>dispatch(elements_insertNodes(selectedNodes,pageId)),removeNodes:(nodeIds,pageId)=>dispatch(removeElements(nodeIds,pageId)),selectToplevelNodes:nodes=>dispatch(transient_selectToplevelNodes(nodes.filter(e=>!e.position.parent).map(e=>e.id))),elementLayer:(pageId,elementId,movement)=>{dispatch(elements_elementLayer({pageId:pageId,elementId:elementId,movement:movement}))}})),Object(Recompose.withHandlers)(basicHandlerCreators),Object(Recompose.withHandlers)(clipboardHandlerCreators),Object(Recompose.withHandlers)(layerHandlerCreators),Object(Recompose.withHandlers)(groupHandlerCreators),Object(Recompose.withHandlers)(alignmentDistributionHandlerCreators))(SidebarHeader),{MultiElementSettings:multi_element_settings_strings}=components.a,MultiElementSettings=()=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__panel canvasSidebar__panel--isEmpty"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,multi_element_settings_strings.getMultipleElementsDescription()),external_kbnSharedDeps_React_default.a.createElement("p",null,multi_element_settings_strings.getMultipleElementsActionsDescription()))),{GroupSettings:group_settings_strings}=components.a,GroupSettings=()=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__panel canvasSidebar__panel--isEmpty"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,group_settings_strings.getUngroupDescription()),external_kbnSharedDeps_React_default.a.createElement("p",null,group_settings_strings.getSaveGroupDescription()))),{ElementConfig:element_config_strings}=i18n.e,element_config_ElementConfig=Object(lib.connect)(state=>({elementStats:getElementStats(state)}))(({elementStats:elementStats})=>{if(!elementStats)return null;const{total:total,ready:ready,error:error}=elementStats,progress=total>0?Math.round((ready+error)/total*100):100;return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__expandable"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiAccordion,{id:"canvas-element-stats",buttonContent:element_config_strings.getTitle(),initialIsOpen:!1,className:"canvasSidebar__accordion"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__accordionContent"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiStat,{title:total,description:element_config_strings.getTotalLabel(),titleSize:"xs"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiStat,{title:ready,description:element_config_strings.getLoadedLabel(),titleSize:"xs"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiStat,{title:error,description:element_config_strings.getFailedLabel(),titleSize:"xs"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiStat,{title:progress+"%",description:element_config_strings.getProgressLabel(),titleSize:"xs"}))))))});function Transition(config){this.name=config.name,this.displayName=config.displayName||this.name,this.help=config.help||"",this.enter=config.enter||"",this.exit=config.exit||""}class transitions_registry_TransitionsRegistry extends common.Registry{wrapper(obj){return new Transition(obj)}}const transitionsRegistry=new transitions_registry_TransitionsRegistry;var color_picker_popover=__webpack_require__(186);function workpad_color_picker_component_extends(){return(workpad_color_picker_component_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const{WorkpadConfig:workpad_color_picker_component_strings}=i18n.e,workpad_color_picker_mapDispatchToProps={onAddColor:addColor,onRemoveColor:removeColor},workpad_color_picker_WorkpadColorPicker=Object(lib.connect)(state=>({colors:getWorkpadColors(state)}),workpad_color_picker_mapDispatchToProps)(props=>external_kbnSharedDeps_React_default.a.createElement(color_picker_popover.a,workpad_color_picker_component_extends({},props,{hasButtons:!0,ariaLabel:workpad_color_picker_component_strings.getBackgroundColorLabel()}))),{PageConfig:page_config_strings}=i18n.e,{PageConfig:components_page_config_strings}=i18n.e,page_config_mapDispatchToProps={stylePage:stylePage,setPageTransition:setPageTransition},page_config_PageConfig=Object(lib.connect)(state=>{const pageIndex=getSelectedPageIndex(state);return{page:getPages(state)[pageIndex],pageIndex:pageIndex}},page_config_mapDispatchToProps,(stateProps,dispatchProps)=>({pageIndex:stateProps.pageIndex,setBackground:background=>{const itsTheNewStyle={...stateProps.page.style,background:background};dispatchProps.stylePage(stateProps.page.id,itsTheNewStyle)},background:Object(external_kbnSharedDeps_Lodash_.get)(stateProps,"page.style.background"),transition:transitionsRegistry.get(Object(external_kbnSharedDeps_Lodash_.get)(stateProps,"page.transition.name")),transitions:[{value:"",text:components_page_config_strings.getNoTransitionDropDownOptionLabel()}].concat(transitionsRegistry.toArray().map(({name:name,displayName:displayName})=>({value:name,text:displayName}))),setTransition:name=>{dispatchProps.setPageTransition(stateProps.page.id,{name:name})}}))(({pageIndex:pageIndex,setBackground:setBackground,background:background,transition:transition,transitions:transitions,setTransition:setTransition})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs",className:"canvasSidebar__panelTitleHeading"},external_kbnSharedDeps_React_default.a.createElement("h4",null,page_config_strings.getTitle())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{display:"columnCompressed",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:page_config_strings.getBackgroundColorDescription()},external_kbnSharedDeps_React_default.a.createElement("span",null,page_config_strings.getBackgroundColorLabel()," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"questionInCircle",color:"subdued"})))},external_kbnSharedDeps_React_default.a.createElement(workpad_color_picker_WorkpadColorPicker,{onChange:setBackground,value:background})),pageIndex>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:page_config_strings.getTransitionLabel(),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{value:transition?transition.name:"",options:transitions,compressed:!0,onChange:e=>setTransition(e.target.value)})),transition?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:page_config_strings.getTransitionPreviewLabel(),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCard,{title:"",description:"",className:transition.enter,style:{height:"72px",width:"128px",background:background,animationDuration:"1s"}})):""):""));var copy_to_clipboard=__webpack_require__(231),copy_to_clipboard_default=__webpack_require__.n(copy_to_clipboard);const{VarConfigVarValueField:var_value_field_strings}=i18n.e,VarValueField=({type:type,value:value,onChange:onChange})=>{const idPrefix=Object(external_kbnSharedDeps_ElasticEui_.htmlIdGenerator)()(),options=[{id:idPrefix+"-true",label:var_value_field_strings.getTrueOption()},{id:idPrefix+"-false",label:var_value_field_strings.getFalseOption()}];return"number"===type?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldNumber,{compressed:!0,name:"value",value:value,onChange:e=>onChange(e.target.value)}):"boolean"===type?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonGroup,{name:"value",options:options,idSelected:`${idPrefix}-${value}`,onChange:id=>{const val="true"===id.replace(idPrefix+"-","");onChange(val)},buttonSize:"compressed",isFullWidth:!0,legend:var_value_field_strings.getBooleanOptionsLegend()}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{compressed:!0,name:"value",value:String(value),onChange:e=>onChange(e.target.value)})};__webpack_require__(294),__webpack_require__(232);const{VarConfigEditVar:edit_var_strings}=i18n.e,EditVar=({variables:variables,selectedVar:selectedVar,onCancel:onCancel,onSave:onSave})=>{const isNew=null===selectedVar,[type,setType]=Object(external_kbnSharedDeps_React_.useState)(isNew?"string":selectedVar.type),[name,setName]=Object(external_kbnSharedDeps_React_.useState)(isNew?"":selectedVar.name),[value,setValue]=Object(external_kbnSharedDeps_React_.useState)(isNew?"":selectedVar.value),hasDupeName=((newName,oldName,variables)=>!!variables.find(v=>newName===v.name&&(!oldName||v.name!==oldName)))(name,selectedVar&&selectedVar.name,variables),typeOptions=[{value:"string",inputDisplay:external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasEditVar__typeOption"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToken,{iconType:"tokenString",className:"canvasEditVar__tokenIcon"})," ",external_kbnSharedDeps_React_default.a.createElement("span",null,edit_var_strings.getTypeStringLabel()))},{value:"number",inputDisplay:external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasEditVar__typeOption"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToken,{iconType:"tokenNumber",className:"canvasEditVar__tokenIcon"})," ",external_kbnSharedDeps_React_default.a.createElement("span",null,edit_var_strings.getTypeNumberLabel()))},{value:"boolean",inputDisplay:external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasEditVar__typeOption"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToken,{iconType:"tokenBoolean",className:"canvasEditVar__tokenIcon"})," ",external_kbnSharedDeps_React_default.a.createElement("span",null,edit_var_strings.getTypeBooleanLabel()))}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasVarHeader__triggerWrapper"},external_kbnSharedDeps_React_default.a.createElement("button",{className:"canvasVarHeader__button",type:"button",onClick:()=>onCancel()},external_kbnSharedDeps_React_default.a.createElement("span",{className:"canvasVarHeader__iconWrapper"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"sortLeft",style:{verticalAlign:"top"}})),external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement("span",{className:"canvasVarHeader__anchor"},isNew?edit_var_strings.getAddTitle():edit_var_strings.getEditTitle())))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__accordionContent"},!isNew&&external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:edit_var_strings.getEditWarning(),color:"warning",iconType:"alert",size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiForm,{component:"form"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:edit_var_strings.getTypeFieldLabel(),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSuperSelect,{options:typeOptions,valueOfSelected:type,onChange:v=>{setType(v),setValue("boolean"===v||("number"===v?0:""))},compressed:!0})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:edit_var_strings.getNameFieldLabel(),display:"rowCompressed",isInvalid:hasDupeName,error:hasDupeName&&edit_var_strings.getDuplicateNameError()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{name:"name",value:name,compressed:!0,onChange:e=>setName(e.target.value),isInvalid:hasDupeName})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:edit_var_strings.getValueFieldLabel(),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(VarValueField,{type:type,value:value,onChange:v=>setValue(v)})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{color:"secondary",size:"s",fill:!0,onClick:()=>onSave({name:name,value:value,type:type}),disabled:hasDupeName||!name,iconType:"save"},edit_var_strings.getSaveButtonLabel())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"s",onClick:()=>onCancel()},edit_var_strings.getCancelButtonLabel()))))))},{VarConfigDeleteVar:delete_var_strings}=i18n.e,DeleteVar=({selectedVar:selectedVar,onCancel:onCancel,onDelete:onDelete})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasVarHeader__triggerWrapper"},external_kbnSharedDeps_React_default.a.createElement("button",{className:"canvasVarHeader__button",type:"button",onClick:()=>onCancel()},external_kbnSharedDeps_React_default.a.createElement("span",{className:"canvasVarHeader__iconWrapper"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"sortLeft",style:{verticalAlign:"top"}})),external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement("span",{className:"canvasVarHeader__anchor"},delete_var_strings.getTitle())))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__accordionContent"},external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{color:"subdued",size:"s"},delete_var_strings.getWarningDescription()))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{color:"danger",size:"s",fill:!0,onClick:()=>onDelete(selectedVar),iconType:"trash"},delete_var_strings.getDeleteButtonLabel())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"s",onClick:()=>onCancel()},delete_var_strings.getCancelButtonLabel()))))));__webpack_require__(311);const{VarConfig:var_config_strings}=i18n.e;var PanelMode;!function(PanelMode){PanelMode[PanelMode.List=0]="List",PanelMode[PanelMode.Edit=1]="Edit",PanelMode[PanelMode.Delete=2]="Delete"}(PanelMode||(PanelMode={}));const typeToToken={number:"tokenNumber",boolean:"tokenBoolean",string:"tokenString"},VarConfig=({variables:variables,onCopyVar:onCopyVar,onDeleteVar:onDeleteVar,onAddVar:onAddVar,onEditVar:onEditVar})=>{const[panelMode,setPanelMode]=Object(external_kbnSharedDeps_React_.useState)(PanelMode.List),[selectedVar,setSelectedVar]=Object(external_kbnSharedDeps_React_.useState)(null),actions=[{type:"icon",name:var_config_strings.getCopyActionButtonLabel(),description:var_config_strings.getCopyActionTooltipLabel(),icon:"copyClipboard",onClick:onCopyVar,isPrimary:!0},{type:"icon",name:var_config_strings.getEditActionButtonLabel(),description:"",icon:"pencil",onClick:v=>{setSelectedVar(v),setPanelMode(PanelMode.Edit)}},{type:"icon",name:var_config_strings.getDeleteActionButtonLabel(),description:"",icon:"trash",color:"danger",onClick:v=>{setSelectedVar(v),setPanelMode(PanelMode.Delete)}}],varColumns=[{field:"type",name:var_config_strings.getTableTypeLabel(),sortable:!0,render:(varType,_v)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToken,{iconType:typeToToken[varType]}),width:"50px"},{field:"name",name:var_config_strings.getTableNameLabel(),sortable:!0},{field:"value",name:var_config_strings.getTableValueLabel(),sortable:!0,truncateText:!0,render:(value,_v)=>""+value},{actions:actions,width:"60px"}];return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__expandable canvasVarConfig__container "+(panelMode!==PanelMode.List?"canvasVarConfig-isEditMode":"")},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasVarConfig__innerContainer"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiAccordion,{id:"accordion-variables",className:"canvasVarConfig__listView canvasSidebar__accordion",buttonContent:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:var_config_strings.getTitleTooltip(),position:"left",className:"canvasArg__tooltip"},external_kbnSharedDeps_React_default.a.createElement("span",null,var_config_strings.getTitle())),extraAction:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"top",content:var_config_strings.getAddTooltipLabel()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{color:"primary",iconType:"plusInCircle","aria-label":var_config_strings.getAddTooltipLabel(),onClick:()=>{setSelectedVar(null),setPanelMode(PanelMode.Edit)}}))},0!==variables.length&&external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__accordionContent"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiInMemoryTable,{className:"canvasVarConfig__list",items:variables,columns:varColumns,hasActions:!0,pagination:!1,sorting:!0,compressed:!0})),0===variables.length&&external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__accordionContent"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{color:"subdued",size:"s"},var_config_strings.getEmptyDescription()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{size:"s",iconType:"plusInCircle",onClick:()=>setPanelMode(PanelMode.Edit)},var_config_strings.getAddButtonLabel()))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasVarConfig__editView canvasSidebar__accordion"},panelMode===PanelMode.Edit&&external_kbnSharedDeps_React_default.a.createElement(EditVar,{variables:variables,selectedVar:selectedVar,onSave:newVar=>{selectedVar?onEditVar(selectedVar,newVar):onAddVar(newVar),setSelectedVar(null),setPanelMode(PanelMode.List)},onCancel:()=>{setSelectedVar(null),setPanelMode(PanelMode.List)}}),panelMode===PanelMode.Delete&&selectedVar&&external_kbnSharedDeps_React_default.a.createElement(DeleteVar,{selectedVar:selectedVar,onDelete:v=>{onDeleteVar(v),setSelectedVar(null),setPanelMode(PanelMode.List)},onCancel:()=>{setSelectedVar(null),setPanelMode(PanelMode.List)}}))))},{VarConfig:components_var_config_strings}=i18n.e,var_config_VarConfig=({variables:variables,setVariables:setVariables})=>{const{success:success}=Object(public_services.g)();return external_kbnSharedDeps_React_default.a.createElement(VarConfig,{variables:variables,onCopyVar:v=>{const snippetStr=`{var "${v.name}"}`;copy_to_clipboard_default()(snippetStr,{debug:!0}),success(components_var_config_strings.getCopyNotificationDescription())},onDeleteVar:v=>{const index=variables.findIndex(targetVar=>targetVar.name===v.name);if(-1!==index){const newVars=[...variables];newVars.splice(index,1),setVariables(newVars),success(components_var_config_strings.getDeleteNotificationDescription())}},onAddVar:v=>{setVariables([...variables,v])},onEditVar:(oldVar,newVar)=>{const existingVarIndex=variables.findIndex(v=>oldVar.name===v.name),newVars=[...variables];newVars[existingVarIndex]=newVar,setVariables(newVars)}})},{WorkpadConfig:workpad_config_component_strings}=i18n.e,workpad_config_mapDispatchToProps={setSize:sizeWorkpad,setName:workpad_setName,setWorkpadCSS:workpad_setWorkpadCSS,setWorkpadVariables:vars=>updateWorkpadVariables(vars)},workpad_config_WorkpadConfig=Object(lib.connect)(state=>{const workpad=getWorkpad(state);return{name:Object(external_kbnSharedDeps_Lodash_.get)(workpad,"name"),size:{width:Object(external_kbnSharedDeps_Lodash_.get)(workpad,"width"),height:Object(external_kbnSharedDeps_Lodash_.get)(workpad,"height")},css:Object(external_kbnSharedDeps_Lodash_.get)(workpad,"css",constants.q),variables:Object(external_kbnSharedDeps_Lodash_.get)(workpad,"variables",[])}},workpad_config_mapDispatchToProps)(props=>{const[css,setCSS]=Object(external_kbnSharedDeps_React_.useState)(props.css),{size:size,name:name,setSize:setSize,setName:setName,setWorkpadCSS:setWorkpadCSS,variables:variables,setWorkpadVariables:setWorkpadVariables}=props,badges=[{name:"1080p",size:{height:1080,width:1920}},{name:"720p",size:{height:720,width:1280}},{name:"A4",size:{height:842,width:590}},{name:workpad_config_component_strings.getUSLetterButtonLabel(),size:{height:792,width:612}}];return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasLayout__sidebarHeaderWorkpad"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h4",null,workpad_config_component_strings.getTitle()))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:workpad_config_component_strings.getNameLabel(),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{compressed:!0,value:name,onChange:e=>setName(e.target.value)})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:workpad_config_component_strings.getPageWidthLabel(),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldNumber,{compressed:!0,onChange:e=>setSize({width:Number(e.target.value),height:size.height}),value:size.width}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{display:"rowCompressed",hasEmptyLabelSpace:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"bottom",content:workpad_config_component_strings.getFlipDimensionTooltip()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"merge",color:"text",onClick:()=>setSize({width:size.height,height:size.width}),"aria-label":workpad_config_component_strings.getFlipDimensionAriaLabel()})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:workpad_config_component_strings.getPageHeightLabel(),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldNumber,{compressed:!0,onChange:e=>setSize({height:Number(e.target.value),width:size.width}),value:size.height})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement("div",null,badges.map((badge,i)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBadge,{key:"page-size-badge-"+i,color:"hollow",onClick:()=>setSize(badge.size),"aria-label":workpad_config_component_strings.getPageSizeBadgeAriaLabel(badge.name),onClickAriaLabel:workpad_config_component_strings.getPageSizeBadgeOnClickAriaLabel(badge.name)},badge.name))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(var_config_VarConfig,{variables:variables,setVariables:setWorkpadVariables}),external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__expandable"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiAccordion,{id:"accordion-global-css",className:"canvasSidebar__accordion",style:{marginBottom:0},buttonContent:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:workpad_config_component_strings.getGlobalCSSTooltip(),position:"left",className:"canvasArg__tooltip"},external_kbnSharedDeps_React_default.a.createElement("span",null,workpad_config_component_strings.getGlobalCSSLabel()))},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__accordionContent"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextArea,{"aria-label":workpad_config_component_strings.getGlobalCSSTooltip(),value:css,compressed:!0,onChange:e=>setCSS(e.target.value),rows:10}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{size:"s",onClick:()=>setWorkpadCSS(css||constants.q)},workpad_config_component_strings.getApplyStylesheetButtonLabel()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xs"})))))}),SidebarSection=({children:children})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__panel"},children);function render_to_dom_extends(){return(render_to_dom_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const RenderToDom=({render:render,style:style})=>{const ref=Object(external_kbnSharedDeps_React_.useCallback)(node=>{null!==node&&render(node)},[render]);return external_kbnSharedDeps_React_default.a.createElement("div",render_to_dom_extends({className:"render_to_dom"},{ref:ref,style:style}))};var expression_form_handlers=__webpack_require__(50);class BaseForm{constructor(props){if(!props.name)throw new Error("Expression specs require a name property");this.name=props.name,this.displayName=props.displayName||this.name,this.help=props.help||""}}const defaultTemplate=()=>external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement("p",null,"This datasource has no interface. Use the expression editor to make changes."));class datasource_DatasourceWrapper extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){var obj,key,value;super(...args),value=()=>{const{spec:spec,datasourceProps:datasourceProps,handlers:handlers}=this.props,{template:template}=spec;template(this.domNode,datasourceProps,handlers)},(key="callRenderFn")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}componentDidUpdate(){this.callRenderFn()}componentWillUnmount(){this.props.handlers.destroy()}render(){return external_kbnSharedDeps_React_default.a.createElement(RenderToDom,{render:domNode=>{this.domNode=domNode,this.callRenderFn()}})}}class datasource_Datasource extends BaseForm{constructor(props){super(props),this.template=props.template||defaultTemplate,this.image=props.image}render(props={}){const expressionFormHandlers=new expression_form_handlers.a;return external_kbnSharedDeps_React_default.a.createElement(datasource_DatasourceWrapper,{spec:this,handlers:expressionFormHandlers,datasourceProps:props})}}class datasource_DatasourceRegistry extends common.Registry{wrapper(obj){return new datasource_Datasource(obj)}}const datasourceRegistry=new datasource_DatasourceRegistry;var popover=__webpack_require__(45);const ArgAdd=({onValueAdd:onValueAdd=(()=>{}),displayName:displayName,help:help})=>external_kbnSharedDeps_React_default.a.createElement("button",{className:"canvasArg__add",onClick:onValueAdd},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{compressed:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,displayName),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,external_kbnSharedDeps_React_default.a.createElement("small",null,help)))),{ArgAddPopover:arg_add_popover_strings}=i18n.e,ArgAddPopover=({options:options})=>external_kbnSharedDeps_React_default.a.createElement(popover.a,{id:"arg-add-popover",panelClassName:"canvasArg__addPopover",panelPaddingSize:"none",button:handleClick=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"plusInCircle","aria-label":arg_add_popover_strings.getAddAriaLabel(),onClick:handleClick,className:"canvasArg__addArg"})},({closePopover:closePopover})=>options.map(opt=>external_kbnSharedDeps_React_default.a.createElement(ArgAdd,{key:opt.arg.name+"-add",displayName:opt.arg.displayName,help:opt.arg.help,onValueAdd:()=>{opt.onValueAdd(),closePopover()}}))),SidebarSectionTitle=({title:title,tip:tip,children:children})=>{const formattedTitle=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xxxs",className:"canvasSidebar__panelTitleHeading"},external_kbnSharedDeps_React_default.a.createElement("h4",null,title));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{className:"canvasSidebar__panelTitle",gutterSize:"xs",alignItems:"center",justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},tip?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"left",content:tip},formattedTitle):formattedTitle),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},children))};var error_boundary=__webpack_require__(195),tooltip_icon=__webpack_require__(208);const{ArgFormArgSimpleForm:arg_simple_form_strings}=i18n.e,ArgSimpleForm=({children:children,required:required,valueMissing:valueMissing,onRemove:onRemove})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",gutterSize:"s",className:"canvasArg__form"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,children),valueMissing&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(tooltip_icon.b,{position:"left",icon:tooltip_icon.a.error,content:arg_simple_form_strings.getRequiredTooltip()})),!required&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"top",content:arg_simple_form_strings.getRemoveAriaLabel()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{color:"subdued",onClick:onRemove,iconType:"cross",iconSize:"s","aria-label":arg_simple_form_strings.getRemoveAriaLabel(),className:"canvasArg__remove"})));function arg_template_form_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class arg_template_form_ArgTemplateFormComponent extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args),arg_template_form_defineProperty(this,"_domNode",null),arg_template_form_defineProperty(this,"_renderTemplate",domNode=>{const{template:template,argumentProps:argumentProps,handlers:handlers}=this.props;if(template)return template(domNode,argumentProps,handlers)}),arg_template_form_defineProperty(this,"_renderErrorTemplate",()=>{const{errorTemplate:errorTemplate,argumentProps:argumentProps}=this.props;return external_kbnSharedDeps_React_default.a.createElement(errorTemplate,argumentProps)})}UNSAFE_componentWillUpdate(prevProps){this.props.error!==prevProps.error&&this.props.handlers.destroy()}componentDidUpdate(){if(this.props.error)return this._renderErrorTemplate();this._renderTemplate(this._domNode)}componentWillUnmount(){this.props.handlers.destroy()}render(){const{template:template,error:error}=this.props;return error?this._renderErrorTemplate():template?external_kbnSharedDeps_React_default.a.createElement(RenderToDom,{render:domNode=>{this._domNode=domNode,this._renderTemplate(domNode)}}):null}}const ArgTemplateForm=Object(Recompose.compose)(Object(Recompose.withPropsOnChange)(()=>!1,()=>({expressionFormHandlers:new expression_form_handlers.a})),Object(Recompose.withProps)(({handlers:handlers,expressionFormHandlers:expressionFormHandlers})=>({handlers:Object.assign(expressionFormHandlers,handlers)})))(arg_template_form_ArgTemplateFormComponent),{ArgFormSimpleFailure:simple_failure_strings}=i18n.e,SimpleFailure=()=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasArg--error canvasArg--error-simple"},external_kbnSharedDeps_React_default.a.createElement(tooltip_icon.b,{position:"left",icon:tooltip_icon.a.warning,content:simple_failure_strings.getFailureTooltip()}));var stateful_prop=__webpack_require__(184);const{ArgFormAdvancedFailure:advanced_failure_strings}=i18n.e,AdvancedFailure=Object(Recompose.compose)(Object(Recompose.withProps)(({argValue:argValue})=>({argExpression:Object(common.toExpression)(argValue,"argument")})),Object(stateful_prop.a)("argExpression","updateArgExpression"),Object(Recompose.withPropsOnChange)(["argExpression"],({argExpression:argExpression})=>({valid:function(){try{return Object(common.fromExpression)(argExpression,"argument"),!0}catch(e){return!1}}()})))(props=>{const{onValueChange:onValueChange,defaultValue:defaultValue,argExpression:argExpression,updateArgExpression:updateArgExpression,resetErrorState:resetErrorState,valid:valid,argId:argId}=props;return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{display:"rowCompressed",id:argId,isInvalid:!valid,error:advanced_failure_strings.getRowErrorMessage()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextArea,{id:argId,isInvalid:!valid,value:argExpression,compressed:!0,onChange:updateArgExpression,rows:3})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{disabled:!valid,onClick:e=>(ev=>{if(ev.preventDefault(),resetErrorState(),valid)return onValueChange(Object(common.fromExpression)(argExpression.trim(),"argument"))})(e),size:"s",type:"submit"},advanced_failure_strings.getApplyButtonLabel()),defaultValue&&defaultValue.length&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"s",color:"danger",onClick:ev=>{ev.preventDefault(),resetErrorState(),onValueChange(Object(common.fromExpression)(defaultValue,"argument"))}},advanced_failure_strings.getResetButtonLabel())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}))});AdvancedFailure.propTypes={argValue:prop_types_default.a.any.isRequired};const ArgLabel=props=>{const{argId:argId,className:className,label:label,help:help,expandable:expandable,children:children,simpleArg:simpleArg,initialIsOpen:initialIsOpen}=props;return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasArg--header"+(className&&" "+className)},expandable?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiAccordion,{id:"accordion-"+argId,className:"canvasSidebar__accordion",buttonContent:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:help,position:"left",className:"canvasArg__tooltip"},external_kbnSharedDeps_React_default.a.createElement("span",null,label)),extraAction:simpleArg,initialIsOpen:initialIsOpen},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__accordionContent"},children)):simpleArg&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{display:"columnCompressed",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:help},external_kbnSharedDeps_React_default.a.createElement("span",null,label," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"iInCircle",color:"subdued"}))),id:argId},simpleArg))};var loading_loading=__webpack_require__(196);const{ArgFormPendingArgValue:pending_arg_value_strings}=i18n.e;class pending_arg_value_PendingArgValue extends external_kbnSharedDeps_React_default.a.PureComponent{componentDidMount(){const{setResolvedArgValue:setResolvedArgValue,templateProps:templateProps}=this.props,{argResolver:argResolver,argValue:argValue}=templateProps;null==argValue?setResolvedArgValue(null):argResolver(argValue).then(val=>setResolvedArgValue(null!=val?val:null)).catch(()=>setResolvedArgValue(null))}render(){const{label:label,argTypeInstance:argTypeInstance}=this.props;return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasArg"},external_kbnSharedDeps_React_default.a.createElement(ArgLabel,{className:"resolve-pending",label:label,help:argTypeInstance.help,expandable:!1},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasArg--pending"},external_kbnSharedDeps_React_default.a.createElement(loading_loading.a,{animated:!0,text:pending_arg_value_strings.getLoadingMessage()}))))}}const branches=[Object(Recompose.branch)(({argTypeInstance:argTypeInstance,resolvedArgValue:resolvedArgValue})=>{const{argType:argType}=argTypeInstance;return!!argType.resolveArgValue&&void 0===resolvedArgValue},Object(Recompose.renderComponent)(pending_arg_value_PendingArgValue))];class arg_form_ArgFormComponent extends external_kbnSharedDeps_React_.PureComponent{componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){const{argId:argId,argTypeInstance:argTypeInstance,templateProps:templateProps,valueMissing:valueMissing,label:label,setLabel:setLabel,onValueRemove:onValueRemove,workpad:workpad,assets:assets,renderError:renderError,setRenderError:setRenderError,resolvedArgValue:resolvedArgValue}=this.props;return external_kbnSharedDeps_React_default.a.createElement(error_boundary.a,null,({error:error,resetErrorState:resetErrorState})=>{const{template:template,simpleTemplate:simpleTemplate}=argTypeInstance.argType,hasError=Boolean(error)||renderError,argumentProps={...templateProps,resolvedArgValue:resolvedArgValue,defaultValue:argTypeInstance.default,renderError:()=>{Promise.resolve().then(()=>{this._isMounted&&setRenderError(!0)})},error:hasError,setLabel:label=>this._isMounted&&setLabel(label),resetErrorState:()=>{resetErrorState(),this._isMounted&&setRenderError(!1)},label:label,workpad:workpad,argId:argId,assets:assets},expandableLabel=Boolean(hasError||template),simpleArg=external_kbnSharedDeps_React_default.a.createElement(ArgSimpleForm,{required:argTypeInstance.required,valueMissing:valueMissing,onRemove:onValueRemove},external_kbnSharedDeps_React_default.a.createElement(ArgTemplateForm,{template:simpleTemplate,errorTemplate:SimpleFailure,error:hasError,argumentProps:argumentProps})),extendedArg=external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasArg--controls"},external_kbnSharedDeps_React_default.a.createElement(ArgTemplateForm,{template:template,errorTemplate:AdvancedFailure,error:hasError,argumentProps:argumentProps}));return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasArg "+(expandableLabel?"canvasSidebar__expandable":null)},external_kbnSharedDeps_React_default.a.createElement(ArgLabel,{className:"resolved",argId:argId,label:label,help:argTypeInstance.help,expandable:expandableLabel,simpleArg:simpleArg,initialIsOpen:!simpleTemplate},extendedArg))})}}const ArgForm=Object(Recompose.compose)(...branches)(arg_form_ArgFormComponent),arg_form_ArgForm=Object(Recompose.compose)(Object(Recompose.withState)("label","setLabel",({label:label,argTypeInstance:argTypeInstance})=>label||argTypeInstance.displayName||argTypeInstance.name),Object(Recompose.withState)("resolvedArgValue","setResolvedArgValue"),Object(Recompose.withState)("renderError","setRenderError",!1),Object(Recompose.lifecycle)({componentDidUpdate(prevProps){prevProps.templateProps.argValue!==this.props.templateProps.argValue&&(this.props.setRenderError(!1),this.props.setResolvedArgValue())}}),Object(lib.connect)(state=>({workpad:getWorkpadInfo(state),assets:getAssets(state)})))(ArgForm);arg_form_ArgForm.propTypes={label:prop_types_default.a.string,argTypeInstance:prop_types_default.a.shape({name:prop_types_default.a.string.isRequired,displayName:prop_types_default.a.string,expanded:prop_types_default.a.bool}).isRequired};class arg_type_ArgType extends BaseForm{constructor(props){super(props),this.simpleTemplate=props.simpleTemplate,this.template=props.template,this.default=props.default,this.resolveArgValue=Boolean(props.resolveArgValue)}}class arg_type_ArgTypeRegistry extends common.Registry{wrapper(obj){return new arg_type_ArgType(obj)}}const argTypeRegistry=new arg_type_ArgTypeRegistry;class arg_Arg{constructor(props){const argType=argTypeRegistry.get(props.argType);if(!argType)throw new Error("Invalid arg type: "+props.argType);if(!props.name)throw new Error("Args must have a name property");const defaultProps={multi:!1,required:!1,types:[],default:null!=argType.default?argType.default:null,options:{},resolve:()=>({})},viewOverrides={argType:argType,...Object(external_kbnSharedDeps_Lodash_.pick)(props,["name","displayName","help","multi","required","types","default","resolve","options"])};Object.assign(this,defaultProps,argType,viewOverrides)}render({onValueChange:onValueChange,onValueRemove:onValueRemove,argValue:argValue,key:key,label:label,...otherProps}){const templateProps={...otherProps,...this.resolve(otherProps),onValueChange:onValueChange,argValue:argValue,typeInstance:this},formProps={key:key,argTypeInstance:this,valueMissing:this.required&&null==argValue,label:label,onValueChange:onValueChange,onValueRemove:onValueRemove,templateProps:templateProps,argId:key};return Object(external_kbnSharedDeps_React_.createElement)(arg_form_ArgForm,formProps)}}class function_form_FunctionForm extends BaseForm{constructor(props){super({...props}),this.args=props.args||[],this.resolve=props.resolve||(()=>({}))}renderArg(props,dataArg){const{onValueRemove:onValueRemove,onValueChange:onValueChange,...passedProps}=props,{arg:arg,argValues:argValues,skipRender:skipRender,label:label}=dataArg,{argType:argType,expressionIndex:expressionIndex}=passedProps;if(!arg||skipRender)return null;const renderArgWithProps=(argValue,valueIndex)=>arg.render({key:`${argType}-${expressionIndex}-${arg.name}-${valueIndex}`,...passedProps,label:label,valueIndex:valueIndex,argValue:argValue,onValueChange:onValueChange(arg.name,valueIndex),onValueRemove:onValueRemove(arg.name,valueIndex)});return!argValues&&arg.required?renderArgWithProps({type:void 0,value:""},0):argValues&&argValues.map(renderArgWithProps)}getAddableArg(props,dataArg){const{onValueAdd:onValueAdd}=props,{arg:arg,argValues:argValues,skipRender:skipRender}=dataArg;if(!arg||arg.required||skipRender)return null;if(argValues&&!arg.multi)return null;const value=null==arg.default?null:Object(common.fromExpression)(arg.default,"argument");return{arg:arg,onValueAdd:onValueAdd(arg.name,value)}}resolveArg(){return{}}render(data={}){const{args:args,argTypeDef:argTypeDef}=data,argInstances=this.args.map(argSpec=>new arg_Arg(argSpec));if(!Object(external_kbnSharedDeps_Lodash_.isPlainObject)(args))throw new Error(`Form "${this.name}" expects "args" object`);const dataArgs=Object(external_kbnSharedDeps_Lodash_.uniq)(argInstances.map(arg=>arg.name).concat(Object.keys(args))).map(argName=>{const arg=argInstances.find(arg=>arg.name===argName),isMulti=arg&&arg.multi;return{arg:arg,argValues:args[argName]&&!isMulti?[Object(external_kbnSharedDeps_Lodash_.last)(args[argName])]:args[argName]}}),props={...data,...this.resolve(data),typeInstance:this};try{const resolvedDataArgs=dataArgs.map(d=>({...d,...this.resolveArg(d,props)})),argumentForms=Object(external_kbnSharedDeps_Lodash_.compact)(resolvedDataArgs.map(d=>this.renderArg(props,d))),addableArgs=Object(external_kbnSharedDeps_Lodash_.compact)(resolvedDataArgs.map(d=>this.getAddableArg(props,d)));return addableArgs.length||argumentForms.length?external_kbnSharedDeps_React_default.a.createElement(SidebarSection,null,external_kbnSharedDeps_React_default.a.createElement(SidebarSectionTitle,{title:argTypeDef.displayName,tip:argTypeDef.help},0===addableArgs.length?null:external_kbnSharedDeps_React_default.a.createElement(ArgAddPopover,{options:addableArgs})),argumentForms):null}catch(e){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{color:"danger",iconType:"cross",title:"Expression rendering error"},external_kbnSharedDeps_React_default.a.createElement("p",null,e.message))}}}class transform_Transform extends function_form_FunctionForm{constructor(props){super(props);Object.assign(this,{requiresContext:!0},Object(external_kbnSharedDeps_Lodash_.pick)(props,["requiresContext"]))}}class transform_TransformRegistry extends common.Registry{wrapper(obj){return new transform_Transform(obj)}}const transformRegistry=new transform_TransformRegistry;class model_Model extends function_form_FunctionForm{constructor(props){super(props);Object.assign(this,{requiresContext:!0},Object(external_kbnSharedDeps_Lodash_.pick)(props,["requiresContext"]))}resolveArg(dataArg,props){const{nextExpressionType:nextExpressionType}=props,modelArgs=(expressionType=nextExpressionType)?expressionType.modelArgs&&expressionType.modelArgs.length>0?expressionType.modelArgs:"missing model args":"no next expression";var expressionType;if("no next expression"===modelArgs||"missing model args"===modelArgs)return{skipRender:!1};const argName=Object(external_kbnSharedDeps_Lodash_.get)(dataArg,"arg.name"),modelArg=modelArgs.find(modelArg=>Array.isArray(modelArg)?modelArg[0]===argName:modelArg===argName);return{label:Array.isArray(modelArg)?Object(external_kbnSharedDeps_Lodash_.get)(modelArg[1],"label"):null,skipRender:!modelArg}}}class model_ModelRegistry extends common.Registry{wrapper(obj){return new model_Model(obj)}}const modelRegistry=new model_ModelRegistry;class view_View extends function_form_FunctionForm{constructor(props){super(props);const defaultProps={help:"Element: "+props.name,requiresContext:!0};if(Object.assign(this,defaultProps,Object(external_kbnSharedDeps_Lodash_.pick)(props,["help","modelArgs","requiresContext"])),this.modelArgs=this.modelArgs||[],!Array.isArray(this.modelArgs))throw new Error(this.name+" element is invalid, modelArgs must be an array")}}class view_ViewRegistry extends common.Registry{wrapper(obj){return new view_View(obj)}}const viewRegistry=new view_ViewRegistry,{DatasourceNoDatasource:no_datasource_strings}=i18n.e;var es_service=__webpack_require__(190);const DatasourceSelector=({onSelect:onSelect,datasources:datasources,current:current})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasDataSource__list"},datasources.map(d=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCard,{key:d.name,title:d.displayName,titleElement:"h5",titleSize:"xs",icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:d.image,size:"l"}),description:d.help,layout:"horizontal",className:"canvasDataSource__card",selectable:{isSelected:d.name===current,onClick:()=>onSelect(d.name)}})));var components_datatable=__webpack_require__(104),components_error=__webpack_require__(102);const{DatasourceDatasourcePreview:datasource_preview_strings}=i18n.e,{DatasourceDatasourceComponent:datasourceStrings}=i18n.e,datasource_preview_DatasourcePreview=Object(Recompose.compose)(Recompose.pure,Object(Recompose.withState)("datatable","setDatatable"),Object(Recompose.lifecycle)({componentDidMount(){interpretAst({type:"expression",chain:[this.props.function]},{}).then(this.props.setDatatable)}}),Object(Recompose.branch)(({datatable:datatable})=>!datatable,Object(Recompose.renderComponent)(loading_loading.a)))(({done:done,datatable:datatable})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModal,{onClose:done,maxWidth:"1000px",className:"canvasModal--fixedSize"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeaderTitle,null,datasource_preview_strings.getModalTitle())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalBody,{className:"canvasDatasourcePreview"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.canvas.datasourceDatasourcePreview.modalDescription",defaultMessage:"The following data will be available to the selected element upon clicking {saveLabel} in the sidebar.",values:{saveLabel:external_kbnSharedDeps_React_default.a.createElement("strong",null,datasourceStrings.getSaveButtonLabel())}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),"error"===datatable.type?external_kbnSharedDeps_React_default.a.createElement(components_error.a,{payload:datatable}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,{className:"canvasDatasourcePreview__panel",paddingSize:"none"},datatable.rows.length>0?external_kbnSharedDeps_React_default.a.createElement(components_datatable.a,{datatable:datatable,showHeader:!0,paginate:!0}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{title:external_kbnSharedDeps_React_default.a.createElement("h2",null,datasource_preview_strings.getEmptyTitle()),titleSize:"s",body:external_kbnSharedDeps_React_default.a.createElement("p",null,datasource_preview_strings.getEmptyFirstLineDescription(),external_kbnSharedDeps_React_default.a.createElement("br",null),datasource_preview_strings.getEmptySecondLineDescription())})))));function datasource_component_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}datasource_preview_DatasourcePreview.propTypes={function:prop_types.PropTypes.object};const{DatasourceDatasourceComponent:datasource_component_strings}=i18n.e;class datasource_component_DatasourceComponent extends external_kbnSharedDeps_React_.PureComponent{constructor(..._args){super(..._args),datasource_component_defineProperty(this,"state",{defaultIndex:""}),datasource_component_defineProperty(this,"getDatasourceFunctionNode",(name,args)=>({arguments:args,function:name,type:"function"})),datasource_component_defineProperty(this,"setSelectedDatasource",value=>{const{datasource:datasource,resetArgs:resetArgs,updateArgs:updateArgs,selectDatasource:selectDatasource,datasources:datasources,setSelecting:setSelecting}=this.props;datasource.name===value?resetArgs&&resetArgs():updateArgs&&updateArgs({}),selectDatasource&&selectDatasource(datasources.find(d=>d.name===value)),setSelecting(!1)}),datasource_component_defineProperty(this,"save",()=>{const{stateDatasource:stateDatasource,stateArgs:stateArgs,setDatasourceAst:setDatasourceAst}=this.props,datasourceAst=this.getDatasourceFunctionNode(stateDatasource.name,stateArgs);setDatasourceAst&&setDatasourceAst(datasourceAst)})}componentDidMount(){Object(es_service.a)().then(defaultIndex=>this.setState({defaultIndex:defaultIndex}))}componentDidUpdate(prevProps){const{args:args,resetArgs:resetArgs,datasource:datasource,selectDatasource:selectDatasource}=this.props;Object(external_kbnSharedDeps_Lodash_.isEqual)(prevProps.args,args)||resetArgs(),Object(external_kbnSharedDeps_Lodash_.isEqual)(prevProps.datasource,datasource)||selectDatasource(datasource)}render(){const{datasources:datasources,datasourceDef:datasourceDef,stateDatasource:stateDatasource,stateArgs:stateArgs,updateArgs:updateArgs,selecting:selecting,setSelecting:setSelecting,previewing:previewing,setPreviewing:setPreviewing,isInvalid:isInvalid,setInvalid:setInvalid}=this.props,{defaultIndex:defaultIndex}=this.state;if(selecting)return external_kbnSharedDeps_React_default.a.createElement(DatasourceSelector,{datasources:datasources,onSelect:this.setSelectedDatasource,current:stateDatasource.name});const datasourcePreview=previewing?external_kbnSharedDeps_React_default.a.createElement(datasource_preview_DatasourcePreview,{show:previewing,done:()=>setPreviewing(!1),function:this.getDatasourceFunctionNode(stateDatasource.name,stateArgs)}):null,hasExpressionArgs=Object.values(stateArgs).some(a=>a&&"object"==typeof a[0]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasDataSource__section"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{iconSide:"right",iconType:"arrowRight",onClick:()=>setSelecting(!selecting),className:"canvasDataSource__triggerButton",flush:"left",size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:stateDatasource.image,className:"canvasDataSource__triggerButtonIcon"}),stateDatasource.displayName),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),hasExpressionArgs?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{color:"warning"},external_kbnSharedDeps_React_default.a.createElement("p",null,datasource_component_strings.getExpressionArgDescription())):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,stateDatasource.render({args:stateArgs,updateArgs:updateArgs,datasourceDef:datasourceDef,isInvalid:isInvalid,setInvalid:setInvalid,defaultIndex:defaultIndex}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHorizontalRule,{margin:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"s",onClick:()=>setPreviewing(!0)},datasource_component_strings.getPreviewButtonLabel())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{disabled:isInvalid,size:"s",onClick:this.save,fill:!0,color:"secondary"},datasource_component_strings.getSaveButtonLabel()))))),datasourcePreview)}}const datasource_branches=[Object(Recompose.branch)(({datasource:datasource,stateDatasource:stateDatasource})=>!datasource||!stateDatasource,Object(Recompose.renderComponent)(()=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasDataSource__section"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:no_datasource_strings.getPanelTitle(),iconType:"iInCircle"},external_kbnSharedDeps_React_default.a.createElement("p",null,no_datasource_strings.getPanelDescription())))))],datasource_datasource_Datasource=Object(Recompose.compose)(...datasource_branches)(datasource_component_DatasourceComponent);datasource_datasource_Datasource.propTypes={args:prop_types_default.a.object,datasource:prop_types_default.a.object,unknownArgs:prop_types_default.a.array};const components_datasource_Datasource=Object(Recompose.compose)(Object(lib.connect)(state=>({element:getSelectedElement(state),pageId:getSelectedPage(state),functionDefinitions:getServerFunctions(state)}),dispatch=>({dispatchArgumentAtIndex:props=>arg=>dispatch(setArgumentAtIndex({...props,arg:arg})),dispatchAstAtIndex:({index:index,element:element,pageId:pageId})=>ast=>{dispatch(flushContext(element.id)),dispatch(setAstAtIndex(index,ast,element,pageId))}}),(stateProps,dispatchProps,ownProps)=>{const{element:element,pageId:pageId,functionDefinitions:functionDefinitions}=stateProps,{dispatchArgumentAtIndex:dispatchArgumentAtIndex,dispatchAstAtIndex:dispatchAstAtIndex}=dispatchProps,datasourceAst=Object(external_kbnSharedDeps_Lodash_.get)(element,"ast.chain",[]).map((astDef,i)=>{if("function"!==astDef.type)return;const args=astDef.arguments,datasource=datasourceRegistry.get(astDef.function);if(!datasource)return;var name;return{datasource:datasource,datasourceDef:(name=datasource.name,functionDefinitions.find(fn=>fn.name===name&&"datatable"===fn.type)),args:args,expressionIndex:i}}).filter(Boolean)[0];return{...ownProps,...stateProps,...dispatchProps,...datasourceAst,datasources:datasourceRegistry.toArray(),setDatasourceAst:dispatchAstAtIndex({pageId:pageId,element:element,index:datasourceAst&&datasourceAst.expressionIndex}),setDatasourceArgs:dispatchArgumentAtIndex({pageId:pageId,element:element,index:datasourceAst&&datasourceAst.expressionIndex})}}),Object(Recompose.withState)("stateArgs","updateArgs",({args:args})=>args),Object(Recompose.withState)("selecting","setSelecting",!1),Object(Recompose.withState)("previewing","setPreviewing",!1),Object(Recompose.withState)("isInvalid","setInvalid",!1),Object(Recompose.withState)("stateDatasource","selectDatasource",({datasource:datasource})=>datasource),Object(Recompose.withHandlers)({resetArgs:({updateArgs:updateArgs,args:args})=>()=>updateArgs(args)}))(datasource_datasource_Datasource);components_datasource_Datasource.propTypes={done:prop_types.PropTypes.func};const expressionTypes=["view","model","transform","datasource"];function findExpressionType(name,type){const matches=expressionTypes.filter(expressionType=>null==type||expressionType===type).reduce((acc,checkType)=>{let expression;switch(checkType){case"view":return expression=viewRegistry.get(name),expression?acc.concat(expression):acc;case"model":return expression=modelRegistry.get(name),expression?acc.concat(expression):acc;case"transform":return expression=transformRegistry.get(name),expression?acc.concat(expression):acc;default:return acc}},[]);if(matches.length>1)throw new Error(`Found multiple expressions with name "${name}"`);return matches[0]||null}const findExistingAsset=(type,content,assets)=>Object.keys(assets).find(assetId=>assets[assetId].type===type&&assets[assetId].value===content),{FunctionFormFunctionUnknown:function_unknown_strings}=i18n.e;class function_form_context_pending_FunctionFormContextPending extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){var obj,key,value;super(...args),value=(props,force=!1)=>{const{expressionType:expressionType,context:context,updateContext:updateContext}=props;(force||null==context&&expressionType.requiresContext)&&updateContext()},(key="fetchContext")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}componentDidMount(){this.fetchContext(this.props)}UNSAFE_componentWillReceiveProps(newProps){const oldContext=this.props.contextExpression,newContext=newProps.contextExpression,forceUpdate=newProps.expressionType.requiresContext&&oldContext!==newContext;this.fetchContext(newProps,forceUpdate)}render(){return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasFunctionForm canvasFunctionForm--loading"},external_kbnSharedDeps_React_default.a.createElement(loading_loading.a,null))}}const{FunctionFormContextError:function_form_context_error_strings}=components.a;function checkState(state){return({context:context,expressionType:expressionType})=>{const matchState=!context||context.state===state;return expressionType&&expressionType.requiresContext&&matchState}}const function_form_branches=[Object(Recompose.branch)(props=>!props.expressionType,Object(Recompose.renderComponent)(({argType:argType})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasFunctionForm canvasFunctionForm--unknown-expression"},function_unknown_strings.getUnknownArgumentTypeErrorMessage(argType)))),Object(Recompose.branch)(checkState("pending"),Object(Recompose.renderComponent)(function_form_context_pending_FunctionFormContextPending)),Object(Recompose.branch)(checkState("error"),Object(Recompose.renderComponent)(({context:context})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasFunctionForm canvasFunctionForm--error"},function_form_context_error_strings.getContextErrorMessage(context.error))))],function_form_function_form_FunctionForm=Object(Recompose.compose)(...function_form_branches)(props=>{const passedProps={argResolver:props.argResolver,args:props.args,argType:props.argType,argTypeDef:props.argTypeDef,filterGroups:props.filterGroups,context:props.context,expressionIndex:props.expressionIndex,expressionType:props.expressionType,nextArgType:props.nextArgType,nextExpressionType:props.nextExpressionType,onAssetAdd:props.onAssetAdd,onValueAdd:props.onValueAdd,onValueChange:props.onValueChange,onValueRemove:props.onValueRemove};return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasFunctionForm"},props.expressionType.render(passedProps))});function_form_function_form_FunctionForm.propTypes={context:prop_types_default.a.object,expressionType:prop_types_default.a.object};const components_function_form_FunctionForm=Object(lib.connect)((state,{expressionIndex:expressionIndex})=>({context:getContextForIndex(state,expressionIndex),element:getSelectedElement(state),pageId:getSelectedPage(state),assets:getAssets(state),filterGroups:getGlobalFilterGroups(state)}),(dispatch,{expressionIndex:expressionIndex})=>({addArgument:(element,pageId)=>(argName,argValue)=>()=>{dispatch(addArgumentValueAtIndex({index:expressionIndex,element:element,pageId:pageId,argName:argName,value:argValue}))},updateContext:element=>()=>dispatch(fetchContext(expressionIndex,element)),setArgument:(element,pageId)=>(argName,valueIndex)=>value=>{dispatch(setArgumentAtIndex({index:expressionIndex,element:element,pageId:pageId,argName:argName,value:value,valueIndex:valueIndex}))},deleteArgument:(element,pageId)=>(argName,argIndex)=>()=>{dispatch(deleteArgumentAtIndex({index:expressionIndex,element:element,pageId:pageId,argName:argName,argIndex:argIndex}))},onAssetAdd:(type,content)=>{const assetId=Object(get_id.a)("asset");return dispatch(createAsset(type,content,assetId)),assetId}}),(stateProps,dispatchProps,ownProps)=>{const{element:element,pageId:pageId,assets:assets}=stateProps,{argType:argType,nextArgType:nextArgType}=ownProps,{updateContext:updateContext,setArgument:setArgument,addArgument:addArgument,deleteArgument:deleteArgument,onAssetAdd:onAssetAdd,...dispatchers}=dispatchProps;return{...stateProps,...dispatchers,...ownProps,updateContext:updateContext(element),expressionType:findExpressionType(argType),nextExpressionType:nextArgType?findExpressionType(nextArgType):nextArgType,onValueChange:setArgument(element,pageId),onValueAdd:addArgument(element,pageId),onValueRemove:deleteArgument(element,pageId),onAssetAdd:(type,content)=>{const existingId=findExistingAsset(type,content,assets);return existingId||onAssetAdd(type,content)}}})(function_form_function_form_FunctionForm);function function_form_list_extends(){return(function_form_list_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}components_function_form_FunctionForm.propTypes={expressionIndex:prop_types_default.a.number,argType:prop_types_default.a.string,nextArgType:prop_types_default.a.string};const function_form_list_functionFormItems=Object(Recompose.withProps)(props=>{const selectedElement=props.element,FunctionFormChain=Object(external_kbnSharedDeps_Lodash_.get)(selectedElement,"ast.chain",[]);return{functionFormItems:FunctionFormChain.reduce((acc,argType,i)=>{const argTypeDef=(fn=argType.function,modelRegistry.get(fn)||viewRegistry.get(fn)||transformRegistry.get(fn));var fn;const prevContext=(chain=acc.context,Array.isArray(chain)&&chain.length?{type:"expression",chain:chain}:null);var chain;const nextArg=FunctionFormChain[i+1]||null;if(argTypeDef){const component={args:argType.arguments,argType:argType.function,argTypeDef:argTypeDef,argResolver:argAst=>interpretAst(argAst,prevContext),contextExpression:(ast=prevContext,null!=ast&&"expression"===ast.type?Object(common.toExpression)(ast):ast),expressionIndex:i,nextArgType:nextArg&&nextArg.function};acc.mapped.push(component)}var ast;return acc.context=acc.context.concat(argType),acc},{mapped:[],context:[]}).mapped}}),function_form_list_FunctionFormList=Object(Recompose.compose)(function_form_list_functionFormItems)(({functionFormItems:functionFormItems})=>{const argTypeComponents=functionFormItems.map(functionFormProps=>external_kbnSharedDeps_React_default.a.createElement(components_function_form_FunctionForm,function_form_list_extends({},functionFormProps,{key:`${functionFormProps.argType}-${functionFormProps.expressionIndex}`})));return external_kbnSharedDeps_React_default.a.createElement("div",null,argTypeComponents)}),{ElementSettings:element_settings_component_strings}=i18n.e,ElementSettings=({element:element})=>{const tabs=[{id:"edit",name:element_settings_component_strings.getDisplayTabLabel(),content:external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__pop"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar--args"},external_kbnSharedDeps_React_default.a.createElement(function_form_list_FunctionFormList,{element:element})))},{id:"data",name:element_settings_component_strings.getDataTabLabel(),content:external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar__pop"},external_kbnSharedDeps_React_default.a.createElement(components_datasource_Datasource,null))}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTabbedContent,{tabs:tabs,initialSelectedTab:tabs[0],size:"s"})},element_settings_ElementSettings=Object(lib.connect)((state,{selectedElementId:selectedElementId})=>({element:getElementById(state,selectedElementId,getSelectedPage(state))}))(props=>props.element?external_kbnSharedDeps_React_default.a.createElement(ElementSettings,{element:props.element}):null),{SidebarContent:sidebar_content_strings}=i18n.e,sidebar_content_branches=[Object(Recompose.branch)(({selectedToplevelNodes:selectedToplevelNodes})=>selectedToplevelNodes.length>1,Object(Recompose.renderComponent)(()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(sidebar_header_SidebarHeader,{title:sidebar_content_strings.getMultiElementSidebarTitle()}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(MultiElementSettings,null)))),Object(Recompose.branch)(({selectedToplevelNodes:selectedToplevelNodes})=>1===selectedToplevelNodes.length&&selectedToplevelNodes[0].includes("group"),Object(Recompose.renderComponent)(()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(sidebar_header_SidebarHeader,{title:sidebar_content_strings.getGroupedElementSidebarTitle(),groupIsSelected:!0}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(GroupSettings,null)))),Object(Recompose.branch)(({selectedToplevelNodes:selectedToplevelNodes})=>1===selectedToplevelNodes.length,Object(Recompose.renderComponent)(({selectedElementId:selectedElementId})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(sidebar_header_SidebarHeader,{title:sidebar_content_strings.getSingleElementSidebarTitle(),showLayerControls:!0}),external_kbnSharedDeps_React_default.a.createElement(element_settings_ElementSettings,{selectedElementId:selectedElementId}))))],SidebarContent=Object(Recompose.compose)(Object(lib.connect)(state=>({selectedToplevelNodes:getSelectedToplevelNodes(state),selectedElementId:getSelectedElementId(state)})),...sidebar_content_branches)(()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(SidebarSection,null,external_kbnSharedDeps_React_default.a.createElement(workpad_config_WorkpadConfig,null),external_kbnSharedDeps_React_default.a.createElement(element_config_ElementConfig,null)),external_kbnSharedDeps_React_default.a.createElement(SidebarSection,null,external_kbnSharedDeps_React_default.a.createElement(page_config_PageConfig,null)))),Sidebar=({commit:commit})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasSidebar"},external_kbnSharedDeps_React_default.a.createElement(SidebarContent,{commit:commit}));var react_beautiful_dnd_cjs=__webpack_require__(320),style_it=__webpack_require__(197),style_it_default=__webpack_require__.n(style_it);function dom_preview_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class dom_preview_DomPreview extends external_kbnSharedDeps_React_.PureComponent{constructor(...args){super(...args),dom_preview_defineProperty(this,"_container",null),dom_preview_defineProperty(this,"_content",null),dom_preview_defineProperty(this,"_observer",null),dom_preview_defineProperty(this,"_original",null),dom_preview_defineProperty(this,"_updateTimeout",0),dom_preview_defineProperty(this,"update",()=>{if(!this._content||!this._container)return;const currentOriginal=document.querySelector("#"+this.props.elementId);if(currentOriginal!==this._original){if(this._observer&&this._observer.disconnect(),this._original=currentOriginal,!this._original)return clearTimeout(this._updateTimeout),void(this._updateTimeout=window.setTimeout(this.update,30));{const slowUpdate=Object(external_kbnSharedDeps_Lodash_.debounce)(this.update,100);this._observer=new MutationObserver(slowUpdate);const config={attributes:!0,childList:!0,subtree:!0};this._observer.observe(this._original,config)}}if(!this._original)return;const thumb=this._original.cloneNode(!0);thumb.id+="-thumb";const originalStyle=window.getComputedStyle(this._original,null),originalWidth=parseInt(originalStyle.getPropertyValue("width"),10),originalHeight=parseInt(originalStyle.getPropertyValue("height"),10),thumbHeight=this.props.height,scale=thumbHeight/originalHeight,thumbWidth=originalWidth*scale;this._content.firstChild&&this._content.removeChild(this._content.firstChild),this._content.appendChild(thumb),this._content.style.cssText=`transform: scale(${scale}); transform-origin: top left;`,this._container.style.cssText=`width: ${thumbWidth}px; height: ${thumbHeight}px;`;const originalCanvas=this._original.querySelectorAll("canvas"),thumbCanvas=thumb.querySelectorAll("canvas");originalCanvas.length>0&&Array.from(originalCanvas).map((img,i)=>{const context=thumbCanvas[i].getContext("2d");context&&context.drawImage(img,0,0)})})}componentDidMount(){this.update()}componentWillUnmount(){clearTimeout(this._updateTimeout),this._observer&&this._observer.disconnect()}render(){return external_kbnSharedDeps_React_default.a.createElement("div",{ref:container=>{this._container=container},className:"dom-preview"},external_kbnSharedDeps_React_default.a.createElement("div",{ref:content=>{this._content=content}}))}}const{PagePreviewPageControls:page_controls_strings}=i18n.e,PageControls=({pageId:pageId,onRemove:onRemove,onDuplicate:onDuplicate})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{className:"canvasPageManager__controls",gutterSize:"xs",justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:page_controls_strings.getClonePageTooltip()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"copy","aria-label":page_controls_strings.getClonePageAriaLabel(),onClick:ev=>{ev.preventDefault(),onDuplicate(pageId)}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:page_controls_strings.getDeletePageTooltip()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{color:"danger",iconType:"trash","aria-label":page_controls_strings.getDeletePageAriaLabel(),onClick:ev=>{ev.preventDefault(),onRemove(pageId)}})))),page_preview_PagePreview=Object(lib.connect)(state=>({isWriteable:workpad_isWriteable(state)&&app_canUserWrite(state)}),dispatch=>({onDuplicate:id=>dispatch(duplicatePage(id))}))(({isWriteable:isWriteable,page:page,height:height,onDuplicate:onDuplicate,onRemove:onRemove})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasPageManager__pagePreview",style:{backgroundColor:page.style.background}},external_kbnSharedDeps_React_default.a.createElement(dom_preview_DomPreview,{elementId:page.id,height:height}),isWriteable&&external_kbnSharedDeps_React_default.a.createElement(PageControls,{pageId:page.id,onDuplicate:onDuplicate,onRemove:onRemove})));function page_manager_component_extends(){return(page_manager_component_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function page_manager_component_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const{PageManager:page_manager_component_strings}=i18n.e;class page_manager_component_PageManager extends external_kbnSharedDeps_React_.Component{constructor(props){super(props),page_manager_component_defineProperty(this,"_isMounted",!1),page_manager_component_defineProperty(this,"_activePageRef",null),page_manager_component_defineProperty(this,"_pageListRef",null),page_manager_component_defineProperty(this,"scrollToActivePage",()=>{if(this._activePageRef&&this._pageListRef){if(!this._pageListRef.scrollTo)return;const pageOffset=this._activePageRef.offsetLeft,{left:pageLeft,right:pageRight,width:pageWidth}=this._activePageRef.getBoundingClientRect(),{left:listLeft,right:listRight,width:listWidth}=this._pageListRef.getBoundingClientRect();pageLeft<listLeft&&this._pageListRef.scrollTo({left:pageOffset,behavior:"smooth"}),pageRight>listRight&&this._pageListRef.scrollTo({left:pageOffset-listWidth+pageWidth,behavior:"smooth"})}}),page_manager_component_defineProperty(this,"onConfirmRemove",removeId=>{this._isMounted&&this.setState({removeId:removeId})}),page_manager_component_defineProperty(this,"resetRemove",()=>this._isMounted&&this.setState({removeId:null})),page_manager_component_defineProperty(this,"doRemove",()=>{const{onPreviousPage:onPreviousPage,onRemovePage:onRemovePage,selectedPage:selectedPage}=this.props,{removeId:removeId}=this.state;this.resetRemove(),removeId===selectedPage&&onPreviousPage(),null!==removeId&&onRemovePage(removeId)}),page_manager_component_defineProperty(this,"onDragEnd",({draggableId:pageId,source:source,destination:destination})=>{if(!destination)return;const position=destination.index-source.index;this.props.onMovePage(pageId,position)}),page_manager_component_defineProperty(this,"renderPage",(page,i)=>{const{isWriteable:isWriteable,selectedPage:selectedPage,workpadId:workpadId,workpadCSS:workpadCSS}=this.props,pageNumber=i+1;return external_kbnSharedDeps_React_default.a.createElement(react_beautiful_dnd_cjs.Draggable,{key:page.id,draggableId:page.id,index:i,isDragDisabled:!isWriteable},provided=>external_kbnSharedDeps_React_default.a.createElement("div",page_manager_component_extends({key:page.id,className:"canvasPageManager__page "+(page.id===selectedPage?"canvasPageManager__page-isActive":""),ref:el=>{page.id===selectedPage&&(this._activePageRef=el),provided.innerRef(el)}},provided.draggableProps,provided.dragHandleProps),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs",className:"canvasPageManager__pageNumber"},pageNumber)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(Link,{name:"loadWorkpad",params:{id:workpadId,page:pageNumber},"aria-label":page_manager_component_strings.getPageNumberAriaLabel(pageNumber)},style_it_default.a.it(workpadCSS,external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(page_preview_PagePreview,{height:100,page:page,onRemove:this.onConfirmRemove}))))))))}),this.state={showTrayPop:!0,removeId:null}}componentDidMount(){this._isMounted=!0,setTimeout(()=>{this.scrollToActivePage(),this._isMounted&&this.setState({showTrayPop:!1})},1e3)}componentDidUpdate(prevProps){prevProps.selectedPage!==this.props.selectedPage&&setTimeout(this.scrollToActivePage,0)}componentWillUnmount(){this._isMounted=!1}render(){const{pages:pages,onAddPage:onAddPage,isWriteable:isWriteable}=this.props,{showTrayPop:showTrayPop,removeId:removeId}=this.state;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"none",className:"canvasPageManager"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{className:"canvasPageManager__pages"},external_kbnSharedDeps_React_default.a.createElement(react_beautiful_dnd_cjs.DragDropContext,{onDragEnd:this.onDragEnd},external_kbnSharedDeps_React_default.a.createElement(react_beautiful_dnd_cjs.Droppable,{droppableId:"droppable-page-manager",direction:"horizontal"},provided=>external_kbnSharedDeps_React_default.a.createElement("div",page_manager_component_extends({className:"canvasPageManager__pageList "+(showTrayPop?"canvasPageManager--trayPop":""),ref:el=>{this._pageListRef=el,provided.innerRef(el)}},provided.droppableProps),pages.map(this.renderPage),provided.placeholder)))),isWriteable&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{anchorClassName:"canvasPageManager__addPageTip",content:page_manager_component_strings.getAddPageTooltip(),position:"left"},external_kbnSharedDeps_React_default.a.createElement("button",{onClick:onAddPage,className:"canvasPageManager__addPage kbn-resetFocusState"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{color:"ghost",type:"plusInCircle",size:"l"}))))),external_kbnSharedDeps_React_default.a.createElement(confirm_modal_ConfirmModal,{isOpen:null!==removeId,title:page_manager_component_strings.getConfirmRemoveTitle(),message:page_manager_component_strings.getConfirmRemoveDescription(),confirmButtonText:page_manager_component_strings.getConfirmRemoveButtonLabel(),onConfirm:this.doRemove,onCancel:this.resetRemove}))}}const page_manager_PageManager=Object(lib.connect)(state=>({isWriteable:workpad_isWriteable(state)&&app_canUserWrite(state),pages:getPages(state),selectedPage:getSelectedPage(state),workpadId:getWorkpad(state).id,workpadCSS:getWorkpad(state).css||constants.q}),dispatch=>({onAddPage:()=>dispatch(addPage()),onMovePage:(id,position)=>dispatch(movePage(id,position)),onRemovePage:id=>dispatch(removePage(id))}))(page_manager_component_PageManager),{ExpressionElementNotSelected:element_not_selected_strings}=i18n.e,ElementNotSelected=({done:done})=>external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement("div",null,element_not_selected_strings.getSelectDescription()),done&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{size:"s",onClick:done}," ",element_not_selected_strings.getCloseButtonLabel()));var react_shortcuts_lib=__webpack_require__(185),external_kbnSharedDeps_KbnMonaco_=__webpack_require__(166),public_=__webpack_require__(53),autocomplete=__webpack_require__(56);const language={keywords:[],symbols:/[=|]/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+(_+\d+)*/,boolean:["true","false"],null:["null"],tokenizer:{root:[[/[{}]/,"delimiter.bracket"],{include:"common"}],common:[[/[a-z_$][\w$]*=/,"identifier"],[/[a-z_$][\w$]*/,{cases:{"@keywords":"keyword","@null":"keyword","@boolean":"keyword","@default":"identifier"}}],[/(@digits)/,"number"],[/"/,"string","@string_double"],[/'/,"string","@string_single"],[/@symbols/,"delimiter"]],string_double:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],string_single:[[/[^\\']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/'/,"string","@pop"]],bracketCounting:[[/\{/,"delimiter.bracket","@bracketCounting"],[/\}/,"delimiter.bracket","@pop"],{include:"common"}]}};const{ExpressionInput:reference_strings}=i18n.e;function getFunctionReferenceStr(fnDef){const{help:help,type:type,inputTypes:inputTypes}=fnDef,acceptTypes=inputTypes?inputTypes.join(" | "):"null",returnType=type||"null";return`${reference_strings.getFunctionReferenceAcceptsDetail(acceptTypes)} ${reference_strings.getFunctionReferenceReturnsDetail(returnType)}\n\n\n${help}`}function getArgReferenceStr(argDef){const{aliases:aliases,types:types,default:def,required:required,help:help}=argDef,secondLineArr=[];null!=def&&secondLineArr.push(reference_strings.getArgReferenceDefaultDetail(String(def))),aliases&&aliases.length&&secondLineArr.push(reference_strings.getArgReferenceAliasesDetail(aliases.join(" | ")));const typesStr=types&&types.length?types.join(" | "):"null",requiredStr=String(Boolean(required));return`${reference_strings.getArgReferenceTypesDetail(typesStr)} ${reference_strings.getArgReferenceRequiredDetail(requiredStr)}\n  \n\n${secondLineArr.join(" ")}\n  \n\n${help}`}function expression_input_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class expression_input_ExpressionInput extends external_kbnSharedDeps_React_default.a.Component{constructor(props){super(props),expression_input_defineProperty(this,"editor",void 0),expression_input_defineProperty(this,"undoHistory",void 0),expression_input_defineProperty(this,"redoHistory",void 0),expression_input_defineProperty(this,"stash",Object(external_kbnSharedDeps_Lodash_.debounce)(value=>{this.undoHistory.push(value),this.redoHistory=[]},500,{leading:!0,trailing:!1})),expression_input_defineProperty(this,"onKeyDown",e=>{(e.ctrlKey||e.metaKey)&&("z"===e.key&&(e.preventDefault(),e.shiftKey?this.redo():this.undo()),"y"===e.key&&(e.preventDefault(),this.redo()))}),expression_input_defineProperty(this,"onChange",value=>{this.updateState({value:value})}),expression_input_defineProperty(this,"updateState",({value:value})=>{this.stash(this.props.value),this.props.onChange(value)}),expression_input_defineProperty(this,"provideSuggestions",(model,position,context)=>{const text=model.getValue(),textRange=model.getFullModelRange(),lengthAfterPosition=model.getValueLengthInRange({startLineNumber:position.lineNumber,startColumn:position.column,endLineNumber:textRange.endLineNumber,endColumn:textRange.endColumn});let wordRange,aSuggestions;if("{"===context.triggerCharacter){model.getWordAtPosition(position.delta(0,-3))&&(wordRange=new external_kbnSharedDeps_KbnMonaco_.monaco.Range(position.lineNumber,position.column,position.lineNumber,position.column),aSuggestions=Object(autocomplete.a)(this.props.functionDefinitions,text.substring(0,text.length-lengthAfterPosition)+"}",text.length-lengthAfterPosition))}else{const wordUntil=model.getWordUntilPosition(position);wordRange=new external_kbnSharedDeps_KbnMonaco_.monaco.Range(position.lineNumber,wordUntil.startColumn,position.lineNumber,wordUntil.endColumn),aSuggestions=Object(autocomplete.a)(this.props.functionDefinitions,text,text.length-lengthAfterPosition)}if(!aSuggestions)return{suggestions:[]};return{suggestions:aSuggestions.map((s,index)=>{const sortText=String.fromCharCode(index);return"argument"===s.type?{label:s.argDef.name,kind:external_kbnSharedDeps_KbnMonaco_.monaco.languages.CompletionItemKind.Variable,documentation:{value:getArgReferenceStr(s.argDef),isTrusted:!0},insertText:s.text,command:{title:"Trigger Suggestion Dialog",id:"editor.action.triggerSuggest"},range:wordRange,sortText:sortText}:"value"===s.type?{label:s.text,kind:external_kbnSharedDeps_KbnMonaco_.monaco.languages.CompletionItemKind.Value,insertText:s.text,command:{title:"Trigger Suggestion Dialog",id:"editor.action.triggerSuggest"},range:wordRange,sortText:sortText}:{label:s.fnDef.name,kind:external_kbnSharedDeps_KbnMonaco_.monaco.languages.CompletionItemKind.Function,documentation:{value:getFunctionReferenceStr(s.fnDef),isTrusted:!0},insertText:s.text,command:{title:"Trigger Suggestion Dialog",id:"editor.action.triggerSuggest"},range:wordRange,sortText:sortText}})}}),expression_input_defineProperty(this,"providerHover",(model,position)=>{const text=model.getValue(),word=model.getWordAtPosition(position);if(!word)return{contents:[]};const absPosition=model.getValueLengthInRange({startLineNumber:0,startColumn:0,endLineNumber:position.lineNumber,endColumn:word.endColumn}),{fnDef:fnDef,argDef:argDef,argStart:argStart,argEnd:argEnd}=Object(autocomplete.b)(this.props.functionDefinitions,text,absPosition);if(argDef&&argStart&&argEnd){const startPos=model.getPositionAt(argStart),endPos=model.getPositionAt(argEnd),argRange=new external_kbnSharedDeps_KbnMonaco_.monaco.Range(startPos.lineNumber,startPos.column,endPos.lineNumber,endPos.column);return{contents:[{value:getArgReferenceStr(argDef),isTrusted:!0}],range:argRange}}return fnDef?{contents:[{value:getFunctionReferenceStr(fnDef),isTrusted:!0}]}:{contents:[]}}),expression_input_defineProperty(this,"editorDidMount",editor=>{const model=editor.getModel();model&&model.updateOptions({tabSize:2}),this.editor=editor}),this.undoHistory=[],this.redoHistory=[],this.editor=null}undo(){if(!this.undoHistory.length)return;const value=this.undoHistory.pop();this.redoHistory.push(this.props.value),this.props.onChange(value)}redo(){if(!this.redoHistory.length)return;const value=this.redoHistory.pop();this.undoHistory.push(this.props.value),this.props.onChange(value)}render(){const{value:value,error:error,isCompact:isCompact}=this.props;return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasExpressionInput"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{className:"canvasExpressionInput__inner",fullWidth:!0,isInvalid:Boolean(error),error:error},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasExpressionInput__editor"},external_kbnSharedDeps_React_default.a.createElement(public_.CodeEditor,{languageId:"canvas-expression",languageConfiguration:{autoClosingPairs:[{open:"{",close:"}"}]},value:value,onChange:this.onChange,suggestionProvider:{triggerCharacters:[" ","{"],provideCompletionItems:this.provideSuggestions},hoverProvider:{provideHover:this.providerHover},options:{fontSize:isCompact?12:16,scrollBeyondLastLine:!1,quickSuggestions:!0,minimap:{enabled:!1},wordWrap:"on",wrappingIndent:"indent"},editorDidMount:this.editorDidMount}))))}}const{Expression:expression_strings}=i18n.e,{useRef:useRef}=external_kbnSharedDeps_React_default.a,Expression=({functionDefinitions:functionDefinitions,formState:formState,updateValue:updateValue,setExpression:setExpression,done:done,error:error,isCompact:isCompact,toggleCompactView:toggleCompactView})=>{const refExpressionInput=useRef(null),expressionPanel=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,{className:"canvasTray__panel canvasTray__panel--holdingExpression canvasExpression--"+(isCompact?"compactSize":"fullSize"),paddingSize:"none"},(ref=refExpressionInput,cmd="RUN",callback=()=>{error||setExpression(formState.expression)},external_kbnSharedDeps_React_default.a.createElement(react_shortcuts_lib.Shortcuts,{name:"EXPRESSION",handler:command=>{ref.current&&ref.current.editor&&ref.current.editor.hasTextFocus()&&command===cmd&&callback()},targetNodeSelector:"body",global:!0,stopPropagation:!0})),external_kbnSharedDeps_React_default.a.createElement(expression_input_ExpressionInput,{ref:refExpressionInput,isCompact:isCompact,functionDefinitions:functionDefinitions,error:error||" ",value:formState.expression,onChange:updateValue}),external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasExpression__settings"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:external_kbnSharedDeps_React_default.a.createElement("span",null,expression_strings.getRunTooltip()," ",external_kbnSharedDeps_React_default.a.createElement(tool_tip_shortcut_ToolTipShortcut,{namespace:"EXPRESSION",action:"RUN"}))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{fill:!0,disabled:!!error,onClick:()=>{setExpression(formState.expression),isCompact||error||toggleCompactView()},size:"s"},expression_strings.getRunButtonLabel()))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"s",color:formState.dirty?"danger":"primary",onClick:done},formState.dirty?expression_strings.getCancelButtonLabel():expression_strings.getCloseButtonLabel())))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:"https://www.elastic.co/guide/en/kibana/current/canvas-function-reference.html",target:"_blank"},expression_strings.getLearnLinkText())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{iconType:"fullScreen",onClick:toggleCompactView,size:"xs"},isCompact?expression_strings.getMaximizeButtonLabel():expression_strings.getMinimizeButtonLabel())))))));var ref,cmd,callback;return isCompact?expressionPanel:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPortal,null,expressionPanel)},expression_Expression=({done:done})=>{const{element:element,pageId:pageId}=Object(lib.useSelector)(state=>({pageId:getSelectedPage(state),element:getSelectedElement(state)}));return element?external_kbnSharedDeps_React_default.a.createElement(ExpressionContainer,{key:element.id,done:done,element:element,pageId:pageId}):external_kbnSharedDeps_React_default.a.createElement(ElementNotSelected,{done:done})},ExpressionContainer=({done:done,element:element,pageId:pageId})=>{const services=Object(public_services.h)(),dispatch=Object(lib.useDispatch)(),[isCompact,setCompact]=Object(external_kbnSharedDeps_React_.useState)(!0),toggleCompactView=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setCompact(!isCompact)},[isCompact,setCompact]),dispatchSetExpression=Object(external_kbnSharedDeps_React_.useCallback)(expression=>{dispatch(flushContext(element.id)),dispatch(elements_setExpression(expression,element.id,pageId))},[dispatch,element,pageId]),[formState,setFormState]=Object(external_kbnSharedDeps_React_.useState)({dirty:!1,expression:element.expression}),updateValue=Object(external_kbnSharedDeps_React_.useCallback)((expression="")=>{setFormState({expression:expression,dirty:!0})},[setFormState]),onSetExpression=Object(external_kbnSharedDeps_React_.useCallback)(expression=>{setFormState({...formState,dirty:!1}),dispatchSetExpression(expression)},[setFormState,dispatchSetExpression,formState]),currentExpression=formState.expression,error=Object(external_kbnSharedDeps_React_.useMemo)(()=>{try{return Object(common.fromExpression)(currentExpression),null}catch(e){return e.message}},[currentExpression]);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{element.expression===formState.expression||formState.dirty||setFormState({dirty:!1,expression:element.expression})},[element,setFormState,formState]),external_kbnSharedDeps_React_default.a.createElement(Expression,{done:done,isCompact:isCompact,functionDefinitions:Object.values(services.expressions.getFunctions()),formState:formState,setExpression:onSetExpression,toggleCompactView:toggleCompactView,updateValue:updateValue,error:error})},{ToolbarTray:tray_strings}=i18n.e,Tray=({children:children,done:done})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{className:"canvasTray__toggle",justifyContent:"spaceAround"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{size:"s",onClick:done,"aria-label":tray_strings.getCloseTrayAriaLabel(),iconType:"arrowDown"}))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasTray"},children)),{Toolbar:toolbar_component_strings}=i18n.e,toolbar_Toolbar=Object(lib.connect)(state=>({workpadName:getWorkpadName(state),workpadId:getWorkpad(state).id,totalPages:getWorkpad(state).pages.length,selectedPageNumber:getSelectedPageIndex(state)+1,selectedElement:getSelectedElement(state),isWriteable:workpad_isWriteable(state)&&app_canUserWrite(state)}))(({isWriteable:isWriteable,selectedElement:selectedElement,selectedPageNumber:selectedPageNumber,totalPages:totalPages,workpadId:workpadId,workpadName:workpadName})=>{const[activeTray,setActiveTray]=Object(external_kbnSharedDeps_React_.useState)(null),[showWorkpadManager,setShowWorkpadManager]=Object(external_kbnSharedDeps_React_.useState)(!1),router=Object(external_kbnSharedDeps_React_.useContext)(RouterContext);if(Object(external_kbnSharedDeps_React_.useEffect)(()=>{isWriteable||"expression"!==activeTray||setActiveTray(null)},[isWriteable,activeTray]),!router)return external_kbnSharedDeps_React_default.a.createElement("div",null,toolbar_component_strings.getErrorMessage("Router Undefined"));const previousPage=()=>{const page=Math.max(1,selectedPageNumber-1);router.navigateTo("loadWorkpad",{id:workpadId,page:page})},elementIsSelected=Boolean(selectedElement),toggleTray=tray=>{if(activeTray===tray)setActiveTray(null);else{if(!isWriteable&&"expression"===tray)return;setActiveTray(tray)}},closeWorkpadManager=()=>setShowWorkpadManager(!1),workpadManager=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModal,{onClose:closeWorkpadManager,className:"canvasModal--fixedSize",maxWidth:"1000px"},external_kbnSharedDeps_React_default.a.createElement(WorkpadManager,{onClose:closeWorkpadManager}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalFooter,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{size:"s",onClick:closeWorkpadManager},toolbar_component_strings.getWorkpadManagerCloseButtonLabel()))),trays={pageManager:external_kbnSharedDeps_React_default.a.createElement(page_manager_PageManager,{onPreviousPage:previousPage}),expression:elementIsSelected?external_kbnSharedDeps_React_default.a.createElement(expression_Expression,{done:()=>setActiveTray(null)}):null};return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasToolbar hide-for-sharing"},null!==activeTray&&external_kbnSharedDeps_React_default.a.createElement(Tray,{done:()=>setActiveTray(null)},trays[activeTray]),external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasToolbar__container"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",gutterSize:"none",className:"canvasToolbar__controls"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{color:"text",iconType:"grid",onClick:()=>setShowWorkpadManager(!0)},workpadName)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{color:"text",onClick:previousPage,iconType:"arrowLeft",disabled:selectedPageNumber<=1,"aria-label":toolbar_component_strings.getPreviousPageAriaLabel()})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{color:"text",onClick:()=>toggleTray("pageManager")},toolbar_component_strings.getPageButtonLabel(selectedPageNumber,totalPages))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{color:"text",onClick:()=>{const page=Math.min(selectedPageNumber+1,totalPages);router.navigateTo("loadWorkpad",{id:workpadId,page:page})},iconType:"arrowRight",disabled:selectedPageNumber>=totalPages,"aria-label":toolbar_component_strings.getNextPageAriaLabel()})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null),elementIsSelected&&isWriteable&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{color:"text",iconType:"editorCodeBlock",onClick:()=>toggleTray("expression"),"data-test-subj":"canvasExpressionEditorButton"},toolbar_component_strings.getEditorButtonLabel())))),showWorkpadManager&&workpadManager)}),history_undoHistory=Object(redux_actions_lib.createAction)("undoHistory"),history_redoHistory=Object(redux_actions_lib.createAction)("redoHistory"),restoreHistory=Object(redux_actions_lib.createAction)("restoreHistory"),zoomHandlerCreators={zoomIn:({zoomScale:zoomScale,setZoomScale:setZoomScale})=>()=>{const scaleUp=constants.C.find(zoomLevel=>zoomScale<zoomLevel)||constants.x;setZoomScale(scaleUp)},zoomOut:({zoomScale:zoomScale,setZoomScale:setZoomScale})=>()=>{const scaleDown=constants.C.slice().reverse().find(zoomLevel=>zoomScale>zoomLevel)||constants.y;setZoomScale(scaleDown)},resetZoom:({setZoomScale:setZoomScale})=>()=>{setZoomScale(1)}};var external_kbnSharedDeps_KbnAnalytics_=__webpack_require__(167);let reportUiCounter;function trackCanvasUiMetric(metricType,name){reportUiCounter&&reportUiCounter("canvas",metricType,name)}var react_fast_compare=__webpack_require__(206),react_fast_compare_default=__webpack_require__.n(react_fast_compare);const positioning_utils_isGroupId=id=>id.startsWith("group"),positioning_utils_headerData=id=>positioning_utils_isGroupId(id)?{id:id,type:"group",subtype:"persistentGroup"}:{id:id,type:"rectangleElement",subtype:""},positioning_utils_transformData=({top:top,left:left,width:width,height:height,angle:angle},z)=>multiply(translate(left+width/2,top+height/2,z),rotateZ(-angle/180*Math.PI)),positioning_utils_simplePosition=({id:id,position:position,filter:filter},z)=>({...positioning_utils_headerData(id),width:position.width,height:position.height,transformMatrix:positioning_utils_transformData(position,z),filter:filter}),positioning_utils_simplePositioning=({elements:elements})=>({elements:elements.map(positioning_utils_simplePosition)}),updateEmbeddableExpression=Object(redux_actions_lib.createAction)("updateEmbeddableExpression"),fetchEmbeddableRenderable=createThunk("fetchEmbeddableRenderable",({dispatch:dispatch,getState:getState},elementId)=>{const pageWithElement=getState().persistent.workpad.pages.find(page=>void 0!==page.elements.find(element=>element.id===elementId));if(pageWithElement){const element=pageWithElement.elements.find(el=>el.id===elementId);dispatch(fetchRenderable(element))}}),create_handlers_createHandlers=()=>({destroy(){},done(){},event(){},getElementId:()=>"",getFilter:()=>"",getRenderMode:()=>"display",isSyncColorsEnabled:()=>!1,onComplete(fn){this.done=fn},onDestroy(fn){this.destroy=fn},onEmbeddableDestroyed(){},onEmbeddableInputChange(){},onResize(fn){this.resize=fn},reload(){},resize(_size){},setFilter(){},update(){}}),createDispatchedHandlerFactory=dispatch=>{let oldElement,isComplete=!1,completeFn=()=>{};return element=>(Object(external_kbnSharedDeps_Lodash_.isEqual)(oldElement,element)||(isComplete=!1,oldElement=element),((handlers={})=>Object.assign(create_handlers_createHandlers(),handlers))({setFilter(text){dispatch(setFilter(text,element.id,!0))},getFilter:()=>element.filter,onComplete(fn){completeFn=fn},getElementId:()=>element.id,onEmbeddableInputChange(embeddableExpression){dispatch(updateEmbeddableExpression({elementId:element.id,embeddableExpression:embeddableExpression}))},onEmbeddableDestroyed(){dispatch(fetchEmbeddableRenderable(element.id))},done(){isComplete||(isComplete=!0,completeFn())}}))},matrixToCSS=transformMatrix=>transformMatrix?"matrix3d("+transformMatrix.join(",")+")":"translate3d(0,0,0)",Positionable=({children:children,transformMatrix:transformMatrix,width:width,height:height})=>{const childNode=external_kbnSharedDeps_React_default.a.Children.only(children),matrix=transformMatrix.map((n,i)=>i<12?n:Math.round(n)),newStyle={width:width,height:height,marginLeft:-width/2,marginTop:-height/2,position:"absolute",transform:matrixToCSS(matrix)};return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasPositionable canvasInteractable",style:newStyle},childNode)};var external_kbnSharedDeps_StyledComponents_=__webpack_require__(169),external_kbnSharedDeps_StyledComponents_default=__webpack_require__.n(external_kbnSharedDeps_StyledComponents_);const{RenderWithFn:render_with_fn_strings}=i18n.g,render_with_fn_style={height:"100%",width:"100%"};function element_share_container_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class element_share_container_ElementShareContainer extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){super(...args),element_share_container_defineProperty(this,"state",{renderComplete:!1}),element_share_container_defineProperty(this,"createDoneChecker",()=>{}),element_share_container_defineProperty(this,"clearDoneChecker",()=>{clearTimeout(this.timeout)})}componentDidMount(){const{onComplete:onComplete}=this.props;this.createDoneChecker(),onComplete(()=>{if(this.clearDoneChecker(),!this.sharedItemRef)return;const ev=new CustomEvent("renderComplete");this.sharedItemRef.dispatchEvent(ev),this.setState({renderComplete:!0})})}getSnapshotBeforeUpdate(prevProps){return{functionName:prevProps.functionName}}componentDidUpdate(prevProps,prevState,snapshot){snapshot.functionName!==this.props.functionName&&(this.clearDoneChecker(),this.createDoneChecker())}componentWillUnmount(){this.clearDoneChecker()}render(){const shouldTrackComplete="embeddable"!==this.props.functionName;return external_kbnSharedDeps_React_default.a.createElement("div",{"data-shared-item":shouldTrackComplete?this.state.renderComplete:void 0,"data-render-complete":shouldTrackComplete?this.state.renderComplete:void 0,className:this.props.className,ref:ref=>this.sharedItemRef=ref},this.props.children)}}const element_content_branches=[Object(Recompose.branch)(({renderable:renderable,state:state})=>!state||!renderable,Object(Recompose.renderComponent)(({backgroundColor:backgroundColor})=>external_kbnSharedDeps_React_default.a.createElement(loading_loading.a,{backgroundColor:backgroundColor}))),Object(Recompose.branch)(({renderable:renderable,renderFunction:renderFunction})=>renderable&&"render"!==Object(common.getType)(renderable)&&!renderFunction,Object(Recompose.renderComponent)(({renderableType:renderableType,selectElement:selectElement})=>external_kbnSharedDeps_React_default.a.createElement("h3",{onClick:selectElement},"Element not found: ",renderableType))),Object(Recompose.branch)(({renderable:renderable,renderFunction:renderFunction,state:state})=>"error"===state||"render"!==Object(common.getType)(renderable)||!renderFunction,Object(Recompose.renderComponent)(({selectElement:selectElement})=>external_kbnSharedDeps_React_default.a.createElement("h3",{onClick:selectElement},"Invalid expression")))];var _StyledRenderWithFn=external_kbnSharedDeps_StyledComponents_default()(({name:functionName,renderFn:renderFn,reuseNode:reuseNode=!1,handlers:incomingHandlers,config:config,width:width,height:height})=>{const{error:onError}=Object(public_services.g)(),[domNode,setDomNode]=Object(external_kbnSharedDeps_React_.useState)(null),firstRender=Object(external_kbnSharedDeps_React_.useRef)(!0),renderTarget=Object(external_kbnSharedDeps_React_.useRef)(null),handlers=Object(external_kbnSharedDeps_React_.useRef)(incomingHandlers),resetRenderTarget=Object(external_kbnSharedDeps_React_.useCallback)(()=>{if(!domNode)return;for(firstRender||handlers.current.destroy();domNode.firstChild;)domNode.removeChild(domNode.firstChild);const div=document.createElement("div");div.style.width="100%",div.style.height="100%",domNode.appendChild(div),renderTarget.current=div,firstRender.current=!0},[domNode]);Object(external_kbnSharedDeps_React_.useEffect)(()=>handlers.current.resize({height:height,width:width}),[height,width]),Object(external_kbnSharedDeps_React_.useEffect)(()=>()=>{handlers.current.destroy()},[]);const render=Object(external_kbnSharedDeps_React_.useCallback)(()=>{Object(external_kbnSharedDeps_Lodash_.isEqual)(handlers.current,incomingHandlers)||(handlers.current=incomingHandlers),renderFn(renderTarget.current,config,handlers.current)},[renderTarget,config,renderFn,incomingHandlers]);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{if(domNode){reuseNode&&renderTarget.current||resetRenderTarget();try{render(),firstRender.current=!1}catch(err){onError(err,{title:render_with_fn_strings.getRenderErrorMessage(functionName)})}}},[domNode,functionName,onError,render,resetRenderTarget,reuseNode]),external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasWorkpad--element_render canvasRenderEl",style:render_with_fn_style},external_kbnSharedDeps_React_default.a.createElement(RenderToDom,{style:render_with_fn_style,render:node=>{setDomNode(node)}}))}).withConfig({displayName:"_StyledRenderWithFn",componentId:"sc-1kx8mui-0"})(["",""],p=>p._css);const ElementContent=Object(Recompose.compose)(Recompose.pure,...element_content_branches)(({renderable:renderable,renderFunction:renderFunction,width:width,height:height,handlers:handlers})=>{const{onComplete:onComplete}=handlers;return style_it_default.a.it(renderable.css,external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvas__element canvasElement",style:{...renderable.containerStyle,width:width,height:height},"data-test-subj":"canvasWorkpadPageElementContent"},external_kbnSharedDeps_React_default.a.createElement(element_share_container_ElementShareContainer,{className:"canvasElement__content",onComplete:onComplete,functionName:renderFunction.name},external_kbnSharedDeps_React_default.a.createElement(_StyledRenderWithFn,{name:renderFunction.name,renderFn:renderFunction.render,reuseNode:renderFunction.reuseDomNode,config:renderable.value,width:width,height:height,handlers:handlers,_css:renderable.css}))))}),element_content_ElementContent=Object(Recompose.compose)(Object(lib.connect)(state=>({backgroundColor:getPageById(state,getSelectedPage(state)).style.background})),public_services.i,Object(Recompose.withProps)(({renderable:renderable,services:services})=>({renderFunction:services.expressions.getRenderer(Object(external_kbnSharedDeps_Lodash_.get)(renderable,"as"))})))(ElementContent);element_content_ElementContent.propTypes={renderable:prop_types_default.a.shape({as:prop_types_default.a.string})};const element_wrapper_ElementWrapper=Object(Recompose.compose)(Object(lib.connectAdvanced)((function(dispatch){let result={};const createHandlers=createDispatchedHandlerFactory(dispatch);return(nextState,nextOwnProps)=>{const{element:element,...restOwnProps}=nextOwnProps,{transformMatrix:transformMatrix,width:width,height:height}=element,resolvedArg=getResolvedArgs(nextState,element.id,"expressionRenderable"),nextResult={...restOwnProps,selectedPage:getSelectedPage(nextState),state:Object(resolved_arg.b)(resolvedArg),renderable:Object(resolved_arg.c)(resolvedArg),createHandlers:createHandlers,transformMatrix:transformMatrix,width:width,height:height,element:{id:element.id,filter:element.filter,expression:element.expression}};return react_fast_compare_default()(result,nextResult)||(result=nextResult),result}})),Object(Recompose.withPropsOnChange)((props,nextProps)=>!react_fast_compare_default()(props.element,nextProps.element),props=>{const{element:element,createHandlers:createHandlers}=props;return{handlers:createHandlers(element)}}),Object(Recompose.mapProps)(props=>{const{element:element,createHandlers:createHandlers,selectedPage:selectedPage,...restProps}=props;return restProps}))(props=>{const{renderable:renderable,transformMatrix:transformMatrix,width:width,height:height,state:state,handlers:handlers}=props;return external_kbnSharedDeps_React_default.a.createElement(Positionable,{transformMatrix:transformMatrix,width:width,height:height},external_kbnSharedDeps_React_default.a.createElement(element_content_ElementContent,{renderable:renderable,state:state,handlers:handlers,width:width,height:height}))});element_wrapper_ElementWrapper.propTypes={element:prop_types_default.a.shape({id:prop_types_default.a.string.isRequired,transformMatrix:prop_types_default.a.arrayOf(prop_types_default.a.number).isRequired,width:prop_types_default.a.number.isRequired,height:prop_types_default.a.number.isRequired,expression:prop_types_default.a.string,filter:prop_types_default.a.string}).isRequired};prop_types_default.a.string.isRequired,prop_types_default.a.object,prop_types_default.a.string.isRequired,prop_types_default.a.object.isRequired,prop_types_default.a.arrayOf(prop_types_default.a.shape({id:prop_types_default.a.string.isRequired,transformMatrix:prop_types_default.a.arrayOf(prop_types_default.a.number).isRequired,width:prop_types_default.a.number.isRequired,height:prop_types_default.a.number.isRequired,type:prop_types_default.a.string})).isRequired,prop_types_default.a.number.isRequired,prop_types_default.a.number.isRequired,prop_types_default.a.func,prop_types_default.a.string,prop_types_default.a.func,prop_types_default.a.func,prop_types_default.a.func,prop_types_default.a.func,prop_types_default.a.func,prop_types_default.a.func,prop_types_default.a.func,prop_types_default.a.func,prop_types_default.a.func,prop_types_default.a.func,prop_types_default.a.func,prop_types_default.a.func,prop_types_default.a.func,prop_types_default.a.func,prop_types_default.a.func,prop_types_default.a.func,prop_types_default.a.func,prop_types_default.a.func,prop_types_default.a.func.isRequired,prop_types_default.a.func.isRequired,prop_types_default.a.func.isRequired,prop_types_default.a.number.isRequired;class static_workpad_page_StaticWorkpadPage extends external_kbnSharedDeps_React_.PureComponent{render(){const{pageId:pageId,pageStyle:pageStyle,className:className,animationStyle:animationStyle,elements:elements,height:height,width:width}=this.props;return external_kbnSharedDeps_React_default.a.createElement("div",{key:pageId,id:pageId,"data-test-subj":"canvasWorkpadPage",className:"canvasPage kbn-resetFocusState canvasStaticPage "+className,"data-shared-items-container":!0,style:{...pageStyle,...animationStyle,height:height,width:width}},elements.filter(node=>!positioning_utils_isGroupId(node.id)).map(element=>external_kbnSharedDeps_React_default.a.createElement(element_wrapper_ElementWrapper,{key:element.id,element:element})))}}let store_counter=0;const select_select=fun=>(...fns)=>{let prevId=NaN,cache=null;return obj=>prevId===(prevId=obj.primaryUpdate.payload.uid)?cache:cache=fun(...fns.map(f=>f(obj)))},common_state=d=>d,scene=select_select(state=>state.currentScene)(common_state),primaryUpdate=select_select(state=>state.primaryUpdate)(common_state),appleKeyboard=Boolean(window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.match("Macintosh|iPhone|iPad")),gestures_primaryUpdate=state=>state.primaryUpdate,gestureStatePrev=select_select(scene=>scene.gestureState)(scene),rawCursorPosition=select_select(action=>"cursorPosition"===action.type?action.payload:null)(gestures_primaryUpdate),mouseButtonEvent=select_select(action=>"mouseEvent"===action.type?action.payload:null)(gestures_primaryUpdate),keyFromMouse=select_select(({type:type,payload:{altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey}})=>"cursorPosition"===type||"mouseEvent"===type?{altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey}:{})(gestures_primaryUpdate),gestures_metaHeld=select_select(appleKeyboard?e=>e.metaKey:e=>e.altKey)(keyFromMouse),optionHeld=select_select(appleKeyboard?e=>e.altKey:e=>e.ctrlKey)(keyFromMouse),shiftHeld=select_select(e=>e.shiftKey)(keyFromMouse),gestures_cursorPosition=select_select(({cursor:cursor},position)=>position||cursor)(gestureStatePrev,rawCursorPosition),mouseButton=select_select(next=>{if(!next)return{down:!1,up:!1,uid:null};const{event:event,uid:uid}=next;return"mouseDown"===event?{down:!0,up:!1,uid:uid}:"mouseUp"===event?{down:!1,up:!0,uid:uid}:{down:!1,up:!1,uid:null}})(mouseButtonEvent),mouseIsDown=select_select(({mouseIsDown:mouseIsDown},next)=>next?"mouseDown"===next.event:mouseIsDown)(gestureStatePrev,mouseButtonEvent),gestures_gestureEnd=select_select(action=>action&&("actionEvent"===action.type||"mouseEvent"===action.type&&"mouseUp"===action.payload.event))(gestures_primaryUpdate),mouseButtonState=select_select(({mouseButtonState:{buttonState:buttonState,downX:downX,downY:downY}},mouseNowDown,{x:x,y:y})=>{const newButtonState=((state,mouseNowDown,movedAlready)=>{switch(state){case"up":return mouseNowDown?"downed":"up";case"downed":return mouseNowDown?movedAlready?"dragging":"downed":"up";case"dragging":return mouseNowDown?"dragging":"up"}})(buttonState,mouseNowDown,x!==downX||y!==downY);return{buttonState:newButtonState,downX:"downed"===newButtonState?x:downX,downY:"downed"===newButtonState?y:downY}})(gestureStatePrev,mouseIsDown,gestures_cursorPosition),mouseDowned=select_select(state=>"downed"===state.buttonState)(mouseButtonState),gestures_dragging=select_select(state=>"dragging"===state.buttonState)(mouseButtonState),dragVector=select_select(({buttonState:buttonState,downX:downX,downY:downY},{x:x,y:y})=>({down:"up"!==buttonState,x0:downX,y0:downY,x1:x,y1:y}))(mouseButtonState,gestures_cursorPosition),actionEvent=select_select(action=>"actionEvent"===action.type?action.payload:null)(gestures_primaryUpdate),gestureState=select_select((cursor,mouseIsDown,mouseButtonState)=>({cursor:cursor,mouseIsDown:mouseIsDown,mouseButtonState:mouseButtonState}))(gestures_cursorPosition,mouseIsDown,mouseButtonState),layout_shapes=select_select(scene=>scene.shapes)(scene),configuration=select_select(scene=>scene.configuration)(scene),layout_hoveredShapes=select_select((config,shapes,cursorPosition)=>shapesAt(shapes.filter(s=>("annotation"!==s.type||s.interactive)&&(config.intraGroupManipulation||!s.parent||"annotation"===s.type)),cursorPosition))(configuration,layout_shapes,gestures_cursorPosition),hoveredShape=select_select(hoveredShapes=>hoveredShapes.length?hoveredShapes[0]:null)(layout_hoveredShapes),layout_draggedShape=select_select(({draggedShape:draggedShape,shapes:shapes},hoveredShape,down,mouseDowned)=>down&&shapes.reduce((prev,next)=>prev||draggedShape&&next.id===draggedShape.id,!1)&&draggedShape||down&&mouseDowned&&hoveredShape)(scene,hoveredShape,mouseIsDown,mouseDowned),focusedShape=select_select((draggedShape,hoveredShape)=>draggedShape||hoveredShape)(layout_draggedShape,hoveredShape),layout_alterSnapGesture=select_select(metaHeld=>metaHeld?["relax"]:[])(gestures_metaHeld),multiselectModifier=shiftHeld,mouseTransformGesturePrev=select_select(({mouseTransformState:mouseTransformState})=>mouseTransformState||initialTransformTuple)(scene),mouseTransformState=select_select((prev,dragging,{x0:x0,y0:y0,x1:x1,y1:y1})=>{if(!dragging||isNaN(x0)||isNaN(y0)||isNaN(x1)||isNaN(y1))return initialTransformTuple;{const deltaX=x1-x0,deltaY=y1-y0;return{deltaX:deltaX,deltaY:deltaY,transform:translate(deltaX-prev.deltaX,deltaY-prev.deltaY,0),cumulativeTransform:translate(deltaX,deltaY,0)}}})(mouseTransformGesturePrev,gestures_dragging,dragVector),directManipulationTransformGestures=select_select(tuple=>[tuple].filter(tpl=>tpl.transform).map(({transform:transform,cumulativeTransform:cumulativeTransform})=>({transform:transform,cumulativeTransform:cumulativeTransform})))(mouseTransformState),dragBox=select_select((dragging,draggedShape,{x0:x0,y0:y0,x1:x1,y1:y1})=>dragging&&!draggedShape&&{x:(x0+x1)/2,y:(y0+y1)/2,a:Math.abs(x1-x0)/2,b:Math.abs(y1-y0)/2})(gestures_dragging,layout_draggedShape,dragVector),layout_selectedShapeObjects=select_select((scene,shapes)=>(scene.selectedShapes||[]).map(s=>shapes.find(ss=>ss.id===s)))(scene,layout_shapes),selectedShapesPrev=select_select(scene=>scene.selectionState)(scene),layout_boxHighlightedShapes=select_select((box,shapes)=>{if(!box)return[];const filter=insideAABB(box);return shapes.filter(s=>"annotation"!==s.type&&!s.parent&&filter(s.transformMatrix,s.a,s.b))})(dragBox,layout_shapes),selectionStateFull=select_select((prev,config,selectedShapeObjects,hoveredShapes,{up:up,down:down,uid:uid},metaHeld,multiselect,boxHighlightedShapes)=>{const uidUnchanged=uid===prev.uid,mouseButtonUp=!down;if(selectedShapeObjects&&(prev.shapes=selectedShapeObjects.slice()),mouseButtonUp||uidUnchanged)return{...prev,shapes:up&&prev.boxHighlightedShapes.length?prev.shapes.concat(prev.boxHighlightedShapes).filter((d,i,a)=>a.findIndex(dd=>dd.id===d.id)===i):prev.shapes,down:down,uid:uid,metaHeld:metaHeld,boxHighlightedShapes:boxHighlightedShapes};return(config.singleSelect||!multiselect?singleSelect:multiSelect)(prev,config,hoveredShapes,metaHeld,uid,selectedShapeObjects,boxHighlightedShapes)})(selectedShapesPrev,configuration,layout_selectedShapeObjects,layout_hoveredShapes,mouseButton,gestures_metaHeld,multiselectModifier,layout_boxHighlightedShapes),selectionState=select_select(({uid:uid,depthIndex:depthIndex,down:down,metaHeld:metaHeld,boxHighlightedShapes:boxHighlightedShapes})=>({uid:uid,depthIndex:depthIndex,down:down,metaHeld:metaHeld,boxHighlightedShapes:boxHighlightedShapes}))(selectionStateFull),layout_selectedShapes=select_select(selectionTuple=>selectionTuple.shapes)(selectionStateFull),selectedPrimaryShapeIds=select_select(shapes=>shapes.map(primaryShape))(layout_selectedShapes),symmetricManipulation=optionHeld,resizeManipulator=select_select((config,toggle)=>(toggle?centeredResizeManipulation:asymmetricResizeManipulation)(config))(configuration,symmetricManipulation),directManipulationTransformIntents=select_select((config,transformGestures,directShapes,shapes,cursorPosition,alterSnapGesture,manipulator)=>[...directShapeTranslateManipulation(transformGestures.map(g=>g.cumulativeTransform),directShapes),...rotationAnnotationManipulation(config,transformGestures.map(g=>g.transform),directShapes,shapes,cursorPosition,alterSnapGesture),...resizeAnnotationManipulation(config,transformGestures,directShapes,shapes,manipulator)])(configuration,directManipulationTransformGestures,layout_selectedShapes,layout_shapes,gestures_cursorPosition,layout_alterSnapGesture,resizeManipulator),layout_alignAction=select_select(action=>alignments[action&&action.event]||null)(actionEvent),layout_distributeAction=select_select(action=>distributions[action&&action.event]||null)(actionEvent),commandTransformIntents=select_select((alignAction,distributeAction,shapes,selectedShapes)=>{if(1!==selectedShapes.length||"adHocGroup"!==selectedShapes[0].subtype)return[];const group=selectedShapes[0],children=shapes.filter(s=>s.parent===group.id&&"annotation"!==s.type);if(alignAction&&children.length>1){const{controlledAnchor:controlledAnchor,horizontal:horizontal}=alignAction,groupBoundingBox=shapeAABB(group,[[1/0,1/0],[-1/0,-1/0]]),groupAnchor=anchorAABB(groupBoundingBox,controlledAnchor,horizontal);return children.map(c=>{const childBoundingBox=shapeAABB(c,[[1/0,1/0],[-1/0,-1/0]]),childAnchor=anchorAABB(childBoundingBox,controlledAnchor,horizontal),delta=groupAnchor-childAnchor;return{cumulativeTransforms:[translate(horizontal?delta:0,horizontal?0:delta,0)],shapes:[c.id]}})}if(distributeAction&&children.length>2){const{horizontal:horizontal}=distributeAction,{a:A,b:B}=group,groupBoundingBox=shapeAABB(group,[[1/0,1/0],[-1/0,-1/0]]),groupAnchor=anchorAABB(groupBoundingBox,-1,horizontal),dimension=horizontalToIndex(horizontal),childrenBoxes2D=children.map(c=>shapeAABB(c,[[1/0,1/0],[-1/0,-1/0]])),childrenAnchors=childrenBoxes2D.map(childBoundingBox=>anchorAABB(childBoundingBox,-1,horizontal)),childrenBoxes1D=childrenBoxes2D.map(box2D=>[box2D[0][dimension],box2D[1][dimension]]),childrenCenters=childrenBoxes1D.map(box1D=>(box1D[1]+box1D[0])/2),childrenSizes=childrenBoxes1D.map(box1D=>box1D[1]-box1D[0]),totalChildrenSize=childrenSizes.reduce((a,b)=>a+b,0),gap=((horizontal?2*A:2*B)-totalChildrenSize)/(children.length-1),sortedChildrenIndex=[...Array(children.length)].map((_,i)=>i).sort((i,j)=>childrenCenters[i]-childrenCenters[j]);return sortedChildrenIndex.reduce(({cursor:cursor,deltas:deltas},i)=>{const size=childrenSizes[i],originalLeft=childrenAnchors[i];return{cursor:cursor+size+gap,deltas:[...deltas,cursor-originalLeft]}},{cursor:groupAnchor,deltas:[]}).deltas.map((delta,ii)=>{const i=sortedChildrenIndex[ii];return{cumulativeTransforms:[translate(horizontal?delta:0,horizontal?0:delta,0)],shapes:[children[i].id]}})}return[]})(layout_alignAction,layout_distributeAction,layout_shapes,layout_selectedShapes),layout_transformIntents=select_select((directIntents,commandIntents)=>directIntents.concat(commandIntents))(directManipulationTransformIntents,commandTransformIntents),transformedShapes=select_select((shapes,transformIntents)=>{return shapes.map((intents=transformIntents,shape=>{const transformIntents=flatten(intents.map(intent=>intent.transforms&&intent.transforms.length&&intent.shapes.find(id=>id===shape.id)&&intent.transforms.map(fromScreen(shape.localTransformMatrix))).filter(identity)),sizeIntents=flatten(intents.map(intent=>intent.sizes&&intent.sizes.length&&intent.shapes.find(id=>id===shape.id)&&intent.sizes).filter(identity)),cumulativeTransformIntents=flatten(intents.map(intent=>intent.cumulativeTransforms&&intent.cumulativeTransforms.length&&intent.shapes.find(id=>id===shape.id)&&intent.cumulativeTransforms.map(fromScreen(shape.localTransformMatrix))).filter(identity)),cumulativeSizeIntents=flatten(intents.map(intent=>intent.cumulativeSizes&&intent.cumulativeSizes.length&&intent.shapes.find(id=>id===shape.id)&&intent.cumulativeSizes).filter(identity)),baselineLocalTransformMatrix=multiply(shape.baselineLocalTransformMatrix||shape.localTransformMatrix,...transformIntents),cumulativeTransformIntentMatrix=multiply(...cumulativeTransformIntents),baselineSizeMatrix=matrix2d_multiply(...sizeIntents)||UNITMATRIX,localTransformMatrix=cumulativeTransformIntents.length?multiply(baselineLocalTransformMatrix,cumulativeTransformIntentMatrix):baselineLocalTransformMatrix,cumulativeSizeIntentMatrix=matrix2d_multiply(...cumulativeSizeIntents),sizeVector=(([a,b,c,d,e,f,g,h,i],[A,B,C])=>[a*A+d*B+g*C,b*A+e*B+h*C,c*A+f*B+i*C])(cumulativeSizeIntents.length?matrix2d_multiply(baselineSizeMatrix,cumulativeSizeIntentMatrix):baselineSizeMatrix,shape.baseAB?[...shape.baseAB,1]:[shape.a,shape.b,1]),absorbChanges=!(transformIntents.length||sizeIntents.length||cumulativeTransformIntents.length||cumulativeSizeIntents.length);return{...shape,baselineLocalTransformMatrix:absorbChanges?null:baselineLocalTransformMatrix,baselineSizeMatrix:absorbChanges?null:baselineSizeMatrix,localTransformMatrix:absorbChanges?shape.localTransformMatrix:localTransformMatrix,a:absorbChanges?shape.a:sizeVector[0],b:absorbChanges?shape.b:sizeVector[1],baseAB:absorbChanges?null:shape.baseAB||[shape.a,shape.b]}}));var intents})(layout_shapes,layout_transformIntents),layout_draggedPrimaryShape=select_select((shapes,draggedShape)=>draggedShape&&shapes.find(shape=>shape.id===primaryShape(draggedShape)))(layout_shapes,layout_draggedShape),alignmentGuideAnnotations=select_select((config,shapes,draggedPrimaryShape,draggedShape)=>{const guidedShapes=draggedPrimaryShape?[shapes.find(s=>s.id===draggedPrimaryShape.id)].filter(identity):[];return guidedShapes.length?((config,shapes,guidedShapes,draggedShape)=>{const result={};let counter=0;const extremeHorizontal=resizeMultiplierHorizontal[draggedShape.horizontalPosition],extremeVertical=resizeMultiplierVertical[draggedShape.verticalPosition];for(const d of guidedShapes){if("annotation"===d.type)continue;const a=config.pageWidth/2+1,b=config.pageHeight/2+1,pageBordersAndCenterLines=[{a:a,b:b,localTransformMatrix:[1,0,0,0,0,1,0,0,0,0,1,0,a-1,b-1,0,1]}];for(const referenceShape of shapes.concat(pageBordersAndCenterLines)){if("annotation"===referenceShape.type)continue;if(!config.intraGroupManipulation&&referenceShape.parent)continue;if(config.intraGroupSnapOnly&&d.parent!==referenceShape.parent&&d.parent!==referenceShape.id)continue;const s=d.id===referenceShape.id?{...d,localTransformMatrix:d.baselineLocalTransformMatrix||d.localTransformMatrix,a:d.baseAB?d.baseAB[0]:d.a,b:d.baseAB?d.baseAB[1]:d.b}:referenceShape;for(let k=-1;k<2;k++)for(let l=-1;l<2;l++){if(k&&!l||!k&&l)continue;if(draggedShape.subtype===config.resizeHandleName&&!(extremeHorizontal===k&&extremeVertical===l||0===extremeHorizontal&&0!==k&&extremeVertical===l||0===extremeVertical&&0!==l&&extremeHorizontal===k))continue;const D=landmarkPoint(d.a,d.b,cascadeUnsnappedTransforms(shapes,d),k,l);for(let m=-1;m<2;m++)for(let n=-1;n<2;n++){if(m&&!n||!m&&n)continue;const S=landmarkPoint(s.a,s.b,cascadeUnsnappedTransforms(shapes,s),m,n);for(let dim=0;dim<2;dim++){const orthogonalDimension=1-dim,dd=D[dim],ss=S[dim],key=k+"|"+l+"|"+dim,signedDistance=dd-ss,distance=Math.abs(signedDistance),currentClosest=result[key];if(Math.round(distance)<=config.guideDistance&&(!currentClosest||distance<=currentClosest.distance)){const orthogonalValues=[D[orthogonalDimension],S[orthogonalDimension],...currentClosest?[currentClosest.lowPoint,currentClosest.highPoint]:[]],lowPoint=Math.min(...orthogonalValues),highPoint=Math.max(...orthogonalValues),midPoint=(lowPoint+highPoint)/2,radius=midPoint-lowPoint;result[key]={id:counter++,localTransformMatrix:translate(dim?midPoint:ss,dim?ss:midPoint,config.atopZ),a:dim?radius:.5,b:dim?.5:radius,lowPoint:lowPoint,highPoint:highPoint,distance:distance,signedDistance:signedDistance,dimension:dim?"vertical":"horizontal",constrained:d.id,constrainer:s.id}}}}}}}return Object.values(result)})(config,shapes,guidedShapes,draggedShape).map(shape=>({...shape,id:config.alignmentGuideName+"_"+shape.id,type:"annotation",subtype:config.alignmentGuideName,interactive:!1,backgroundColor:"magenta",parent:null})):[]})(configuration,transformedShapes,layout_draggedPrimaryShape,layout_draggedShape),shapesToHover=select_select((dragBox,hoveredShapes,boxHighlightedShapes)=>dragBox?boxHighlightedShapes:hoveredShapes.slice(0,1))(dragBox,layout_hoveredShapes,layout_boxHighlightedShapes),hoverAnnotations=select_select((config,shapes,selectedPrimaryShapeIds,draggedShape)=>shapes.filter(shape=>shape&&"annotation"!==shape.type&&-1===selectedPrimaryShapeIds.indexOf(shape.id)&&!draggedShape).map(borderAnnotation(config.hoverAnnotationName,config.hoverLift)))(configuration,shapesToHover,selectedPrimaryShapeIds,layout_draggedShape),snappedShapes=select_select((config,shapes,draggedShape,draggedElement,alignmentGuideAnnotations,alterSnapGesture,symmetricManipulation)=>{const contentShapes=shapes.filter(shape=>"annotation"!==shape.type),subtype=draggedShape&&draggedShape.subtype;if(subtype&&-1===[config.resizeHandleName,config.adHocGroupName,config.persistentGroupName].indexOf(subtype))return contentShapes;const constraints=alignmentGuideAnnotations,relaxed=-1!==alterSnapGesture.indexOf("relax"),constrained=config.snapConstraint&&!relaxed,horizontalConstraint=constrained&&directionalConstraint(constraints,isHorizontal),verticalConstraint=constrained&&directionalConstraint(constraints,isVertical),snapper=subtype===config.resizeHandleName?((horizontalConstraint,verticalConstraint,draggedElement,symmetric,horizontalPosition,verticalPosition)=>shape=>{const constrainedShape=draggedElement&&shape.id===draggedElement.id,constrainedX=horizontalConstraint&&horizontalConstraint.constrained===shape.id,constrainedY=verticalConstraint&&verticalConstraint.constrained===shape.id,snapOffsetX=constrainedX?horizontalConstraint.signedDistance:0,snapOffsetY=constrainedY?-verticalConstraint.signedDistance:0;if(constrainedX||constrainedY){const multiplier=symmetric?1:.5,angle=matrixToAngle(draggedElement.localTransformMatrix),horizontalSign=-resizeMultiplierHorizontal[horizontalPosition],verticalSign=resizeMultiplierVertical[verticalPosition],sin=Math.sin(angle),cos=Math.cos(angle),snapOffsetA=horizontalSign*(cos*snapOffsetX-sin*snapOffsetY),snapOffsetB=verticalSign*(sin*snapOffsetX+cos*snapOffsetY),snapTranslateOffset=translateComponent(multiply(rotateZ(angle),translate((1-multiplier)*-snapOffsetX,(1-multiplier)*snapOffsetY,0))),snapSizeOffset=[multiplier*snapOffsetA,multiplier*snapOffsetB];return{...shape,snapDeltaMatrix:snapTranslateOffset,snapResizeVector:snapSizeOffset}}return constrainedShape?{...shape,snapDeltaMatrix:null,snapResizeVector:null}:crystallizeConstraint(shape)})(horizontalConstraint,verticalConstraint,draggedElement,symmetricManipulation,draggedShape.horizontalPosition,draggedShape.verticalPosition):((horizontalConstraint,verticalConstraint,draggedElement)=>shape=>{const constrainedX=horizontalConstraint&&horizontalConstraint.constrained===shape.id,constrainedY=verticalConstraint&&verticalConstraint.constrained===shape.id,snapOffsetX=constrainedX?-horizontalConstraint.signedDistance:0,snapOffsetY=constrainedY?-verticalConstraint.signedDistance:0;if(constrainedX||constrainedY){if(!snapOffsetX&&!snapOffsetY)return shape;const snapOffset=translateComponent(multiply(rotateZ(matrixToAngle(draggedElement.localTransformMatrix)),translate(snapOffsetX,snapOffsetY,0)));return{...shape,snapDeltaMatrix:snapOffset}}return shape.snapDeltaMatrix||shape.snapResizeVector?crystallizeConstraint(shape):shape})(horizontalConstraint,verticalConstraint,draggedElement);return contentShapes.map(snapper)})(configuration,transformedShapes,layout_draggedShape,layout_draggedPrimaryShape,alignmentGuideAnnotations,layout_alterSnapGesture,symmetricManipulation),constrainedShapesWithPreexistingAnnotations=select_select((snapped,transformed)=>snapped.concat(transformed.filter(s=>"annotation"===s.type)))(snappedShapes,transformedShapes),rotationTooltipAnnotation=select_select((config,proper,shape,intents,cursorPosition)=>shape&&shape.subtype===config.rotationHandleName?[{id:config.rotationTooltipName+"_"+proper.id,type:"annotation",subtype:config.rotationTooltipName,interactive:!1,parent:null,localTransformMatrix:translate(cursorPosition.x,cursorPosition.y,config.tooltipZ),a:0,b:0,text:String(Math.round(matrixToAngle(proper.transformMatrix)/Math.PI*180))}]:[])(configuration,layout_draggedPrimaryShape,layout_draggedShape,layout_transformIntents,gestures_cursorPosition),layout_groupAction=select_select((action,mouseIsDown)=>{const event=action&&action.event;return mouseIsDown||"group"!==event&&"ungroup"!==event?null:event})(actionEvent,mouseIsDown),groupingTuple=select_select((config,shapes,selectedShapes)=>{const preexistingAdHocGroups=shapes.filter(shape=>shape.type===config.groupName&&shape.subtype===config.adHocGroupName),matcher=(selectedShapes=>shape=>selectedShapes.find((shape=>s=>s.id===shape.id)(shape)))(selectedShapes),selectedFn=shape=>matcher(shape)&&"annotation"!==shape.type,freshSelectedShapes=shapes.filter(selectedFn),freshNonSelectedShapes=shapes.filter(not(selectedFn));return{selectionOutsideGroup:!selectedShapes.some(shape=>(shape=>shape.type===config.groupName)(shape)||(shape=>shape.parent&&shape.parent.startsWith(config.groupName))(shape)),freshSelectedShapes:freshSelectedShapes,freshNonSelectedShapes:freshNonSelectedShapes,preexistingAdHocGroups:preexistingAdHocGroups}})(configuration,constrainedShapesWithPreexistingAnnotations,layout_selectedShapes),grouping=select_select((config,shapes,selectedShapes,groupAction,tuple)=>{const{selectionOutsideGroup:selectionOutsideGroup,freshSelectedShapes:freshSelectedShapes,freshNonSelectedShapes:freshNonSelectedShapes,preexistingAdHocGroups:preexistingAdHocGroups}=tuple;if("group"===groupAction){const selectedAdHocGroupsToPersist=selectedShapes.filter(s=>s.subtype===config.adHocGroupName);return{shapes:shapes.map(s=>s.subtype===config.adHocGroupName?{...s,subtype:config.persistentGroupName}:s),selectedShapes:selectedShapes.filter(selected=>selected.subtype!==config.adHocGroupName).concat(selectedAdHocGroupsToPersist.map(shape=>({...shape,subtype:config.persistentGroupName})))}}if("ungroup"===groupAction)return dissolveGroups(selectedShapes.filter(s=>s.subtype===config.persistentGroupName),shapes,asYetUngroupedShapes(preexistingAdHocGroups,freshSelectedShapes));if(preexistingAdHocGroups.length&&selectionOutsideGroup)return dissolveGroups(preexistingAdHocGroups,shapes,asYetUngroupedShapes(preexistingAdHocGroups,freshSelectedShapes));const elements=((allShapes,shapes)=>{const idMap=arrayToMap(allShapes.map(shape=>shape.id));return shapes.filter(shape=>idMap[shape.id]).map(contentShape(allShapes))})(shapes,selectedShapes);if(1===elements.length&&"group"===elements[0].type)return config.groupResize?{shapes:[...resizeGroup(shapes.filter(s=>"annotation"!==s.type),elements[0]),...shapes.filter(s=>"annotation"===s.type)],selectedShapes:selectedShapes}:preserveCurrentGroups(shapes,selectedShapes);if(selectedShapes.length<2)return preserveCurrentGroups(shapes,selectedShapes);{const group=axisAlignedBoundingBoxShape(config,freshSelectedShapes),parentedSelectedShapes=((descendCondition,allShapes,shapes)=>{return idFun=s=>s.id,(a=flatten(shapes.map(shape=>descendCondition(shape)?allShapes.filter(s=>s.parent===shape.id):shape))).filter((d,i)=>a.findIndex(s=>idFun(s)===idFun(d))===i);var idFun,a})(shape=>shape.subtype===config.adHocGroupName,shapes,freshSelectedShapes).map(shape=>({...shape,parent:group.id,localTransformMatrix:multiply(group.rigTransform,shape.transformMatrix)})),nonGroupGraphConstituent=s=>s.subtype!==config.adHocGroupName&&!parentedSelectedShapes.find(ss=>s.id===ss.id),dissociateFromParentIfAny=s=>s.parent&&s.parent.startsWith(config.groupName)&&preexistingAdHocGroups.find(ahg=>ahg.id===s.parent)?{...s,parent:null}:s;return{shapes:parentedSelectedShapes.concat(freshNonSelectedShapes.filter(nonGroupGraphConstituent).map(dissociateFromParentIfAny)).concat([group]),selectedShapes:[group]}}})(configuration,constrainedShapesWithPreexistingAnnotations,layout_selectedShapes,layout_groupAction,groupingTuple),groupedSelectedShapes=select_select(({selectedShapes:selectedShapes})=>selectedShapes)(grouping),groupedSelectedShapeIds=select_select(selectedShapes=>selectedShapes.map(shape=>shape.id))(groupedSelectedShapes),groupedSelectedPrimaryShapeIds=select_select(selectedShapes=>selectedShapes.map(primaryShape))(groupedSelectedShapes),adHocChildrenAnnotations=select_select((config,{shapes:shapes})=>{const adHocGroups=shapes.filter(s=>s.subtype===config.adHocGroupName);return shapes.filter(s=>"annotation"!==s.type&&s.parent&&adHocGroups.find(p=>p.id===s.parent)).map(borderAnnotation(config.getAdHocChildAnnotationName,config.hoverLift))})(configuration,grouping),resizeAnnotations=select_select(resizeAnnotationsFunction)(configuration,grouping),rotationAnnotations=select_select((config,{shapes:shapes,selectedShapes:selectedShapes})=>selectedShapes.map((shape,i)=>rotationAnnotation(config,shapes,selectedShapes,shape,i)).filter(identity))(configuration,grouping),dragBoxAnnotation=select_select((config,box)=>box?[{id:config.dragBoxAnnotationName,type:"annotation",subtype:config.dragBoxAnnotationName,interactive:!1,parent:null,localTransformMatrix:translate(box.x,box.y,config.dragBoxZ),a:box.a,b:box.b}]:[])(configuration,dragBox),annotatedShapes=select_select(({shapes:shapes},alignmentGuideAnnotations,hoverAnnotations,rotationAnnotations,resizeAnnotations,rotationTooltipAnnotation,adHocChildrenAnnotations,dragBoxAnnotation)=>{const annotations=[].concat(alignmentGuideAnnotations,hoverAnnotations,rotationAnnotations,resizeAnnotations,rotationTooltipAnnotation,adHocChildrenAnnotations,dragBoxAnnotation);return shapes.filter(shape=>"annotation"!==shape.type).concat(annotations)})(grouping,alignmentGuideAnnotations,hoverAnnotations,rotationAnnotations,resizeAnnotations,rotationTooltipAnnotation,adHocChildrenAnnotations,dragBoxAnnotation),globalTransformShapes=select_select(shapes=>shapes.map((shapes=>shape=>({...shape,transformMatrix:cascadeTransforms(shapes,shape),width:2*snappedA(shape),height:2*snappedB(shape)}))(shapes)))(annotatedShapes),layout_cursor=select_select((config,shape,draggedPrimaryShape)=>{if(!shape)return"auto";switch(shape.subtype){case config.rotationHandleName:return"crosshair";case config.resizeHandleName:const screenProjectedAngle=(180*matrixToAngle(shape.transformMatrix)/Math.PI+360)%360+shape.cursorAngle,discretizedAngle=(45*Math.round(screenProjectedAngle/45)+360)%360;return bidirectionalCursors[discretizedAngle];default:return draggedPrimaryShape?"grabbing":"grab"}})(configuration,focusedShape,layout_draggedPrimaryShape),layout_nextScene=select_select((configuration,hoveredShape,selectedShapes,selectedPrimaryShapes,shapes,gestureEnd,draggedShape,cursor,selectionState,mouseTransformState,gestureState)=>({configuration:configuration,hoveredShape:hoveredShape,selectedShapes:selectedShapes,selectedPrimaryShapes:selectedPrimaryShapes,shapes:shapes,gestureEnd:gestureEnd,draggedShape:draggedShape,cursor:cursor,selectionState:selectionState,mouseTransformState:mouseTransformState,gestureState:gestureState}))(configuration,hoveredShape,groupedSelectedShapeIds,groupedSelectedPrimaryShapeIds,globalTransformShapes,gestures_gestureEnd,layout_draggedShape,layout_cursor,selectionState,mouseTransformState,gestureState),updater=select_select((nextScene,primaryUpdate)=>({primaryUpdate:primaryUpdate,currentScene:nextScene}))(layout_nextScene,primaryUpdate);var common_lib=__webpack_require__(47);const AlignmentGuide=({transformMatrix:transformMatrix,width:width,height:height})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasAlignmentGuide canvasInteractable canvasLayoutAnnotation",style:{background:"magenta",height:height,marginLeft:-width/2,marginTop:-height/2,position:"absolute",transform:matrixToCSS(transformMatrix),width:width}}),DragBoxAnnotation=({transformMatrix:transformMatrix,width:width,height:height})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasDragBoxAnnotation canvasLayoutAnnotation",style:{height:height,marginLeft:-width/2,marginTop:-height/2,transform:matrixToCSS(transformMatrix),width:width}}),HoverAnnotation=({transformMatrix:transformMatrix,width:width,height:height})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasHoverAnnotation canvasLayoutAnnotation",style:{width:width,height:height,marginLeft:-width/2,marginTop:-height/2,transform:matrixToCSS(transformMatrix)}}),TooltipAnnotation=({transformMatrix:transformMatrix,text:text})=>{const newStyle={transform:matrixToCSS(transformMatrix)+" translate(1em, -1em)"};return external_kbnSharedDeps_React_default.a.createElement("div",{className:"tooltipAnnotation canvasLayoutAnnotation",style:newStyle},external_kbnSharedDeps_React_default.a.createElement("p",null,text,"°"))},RotationHandle=({transformMatrix:transformMatrix,zoomScale:zoomScale=1})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasRotationHandle canvasLayoutAnnotation",style:{transform:matrixToCSS(transformMatrix)}},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasRotationHandle__handle",style:{transform:`scale3d(${1/zoomScale},${1/zoomScale},1)`}})),BorderConnection=({transformMatrix:transformMatrix,width:width,height:height})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasBorderConnection canvasLayoutAnnotation",style:{height:height,marginLeft:-width/2,marginTop:-height/2,position:"absolute",transform:matrixToCSS(transformMatrix),width:width}}),BorderResizeHandle=({transformMatrix:transformMatrix,zoomScale:zoomScale=1})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasBorderResizeHandle canvasLayoutAnnotation",style:{transform:`${matrixToCSS(transformMatrix)} scale3d(${1/zoomScale},${1/zoomScale}, 1)`}}),nonTextInputs=["button","checkbox","color","file","image","radio","range","reset","submit"],isTextInput=({tagName:tagName,type:type})=>{switch(tagName.toLowerCase()){case"input":return!nonTextInputs.includes(type);case"textarea":return!0;default:return!1}};class workpad_shortcuts_WorkpadShortcuts extends external_kbnSharedDeps_React_.Component{constructor(...args){var obj,key,value;super(...args),obj=this,key="_keyMap",value={CUT:this.props.cutNodes,COPY:this.props.copyNodes,PASTE:this.props.pasteNodes,CLONE:this.props.cloneNodes,DELETE:this.props.deleteNodes,BRING_TO_FRONT:this.props.bringToFront,BRING_FORWARD:this.props.bringForward,SEND_BACKWARD:this.props.sendBackward,SEND_TO_BACK:this.props.sendToBack,GROUP:this.props.groupNodes,UNGROUP:this.props.ungroupNodes,SHIFT_UP:this.props.shiftUp,SHIFT_DOWN:this.props.shiftDown,SHIFT_LEFT:this.props.shiftLeft,SHIFT_RIGHT:this.props.shiftRight,NUDGE_UP:this.props.nudgeUp,NUDGE_DOWN:this.props.nudgeDown,NUDGE_LEFT:this.props.nudgeLeft,NUDGE_RIGHT:this.props.nudgeRight},key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}render(){return external_kbnSharedDeps_React_default.a.createElement(react_shortcuts_lib.Shortcuts,{name:"ELEMENT",handler:(action,event)=>{isTextInput(event.target)||"function"!=typeof this._keyMap[action]||(event.preventDefault(),this._keyMap[action]())},targetNodeSelector:"body",global:!0})}shouldComponentUpdate(nextProps){return!react_fast_compare_default()(nextProps,this.props)}}const components_workpad_shortcuts_WorkpadShortcuts=Object(Recompose.compose)(Object(Recompose.withHandlers)(groupHandlerCreators),Object(Recompose.withHandlers)(layerHandlerCreators),Object(Recompose.withHandlers)(basicHandlerCreators),Object(Recompose.withHandlers)(clipboardHandlerCreators),Object(Recompose.withHandlers)(positionHandlerCreators))(workpad_shortcuts_WorkpadShortcuts);components_workpad_shortcuts_WorkpadShortcuts.propTypes={pageId:prop_types_default.a.string.isRequired,selectedNodes:prop_types_default.a.arrayOf(prop_types_default.a.object),elementLayer:prop_types_default.a.func.isRequired,insertNodes:prop_types_default.a.func.isRequired,removeNodes:prop_types_default.a.func.isRequired,selectToplevelNodes:prop_types_default.a.func.isRequired,commit:prop_types_default.a.func.isRequired};class interaction_boundary_InteractionBoundary extends external_kbnSharedDeps_React_.PureComponent{constructor(){super(),this.state={height:"0",width:"0",marginLeft:"0",marginTop:"0"}}componentDidMount(){const container=$("#"+void 0),height=container.height(),width=container.width();height&&width&&this.setState({height:height-24+"px",width:width-24+"px",marginLeft:-(width-24)/2+"px",marginTop:-(height-24)/2+"px"})}render(){const style={top:"50%",left:"50%",position:"absolute",...this.state};return external_kbnSharedDeps_React_default.a.createElement("div",{id:"canvasInteractionBoundary",style:style})}}class interactive_workpad_page_InteractiveWorkpadPage extends external_kbnSharedDeps_React_.PureComponent{componentWillUnmount(){this.props.resetHandler()}render(){const{pageId:pageId,pageStyle:pageStyle,className:className,elements:elements,cursor:cursor="auto",height:height,width:width,onDoubleClick:onDoubleClick,onKeyDown:onKeyDown,onMouseDown:onMouseDown,onMouseLeave:onMouseLeave,onMouseMove:onMouseMove,onMouseUp:onMouseUp,onAnimationEnd:onAnimationEnd,onWheel:onWheel,selectedNodes:selectedNodes,selectToplevelNodes:selectToplevelNodes,insertNodes:insertNodes,removeNodes:removeNodes,elementLayer:elementLayer,canvasOrigin:canvasOrigin,saveCanvasOrigin:saveCanvasOrigin,commit:commit,setMultiplePositions:setMultiplePositions,zoomScale:zoomScale}=this.props;let shortcuts=null;const shortcutProps={elementLayer:elementLayer,insertNodes:insertNodes,pageId:pageId,removeNodes:removeNodes,selectedNodes:selectedNodes,selectToplevelNodes:selectToplevelNodes,commit:commit,setMultiplePositions:setMultiplePositions};return shortcuts=external_kbnSharedDeps_React_default.a.createElement(components_workpad_shortcuts_WorkpadShortcuts,shortcutProps),external_kbnSharedDeps_React_default.a.createElement("div",{key:pageId,id:pageId,ref:node=>{!canvasOrigin&&node&&node.getBoundingClientRect&&saveCanvasOrigin(()=>()=>node.getBoundingClientRect())},"data-test-subj":"canvasWorkpadPage",className:"canvasPage kbn-resetFocusState canvasInteractivePage "+className,"data-shared-items-container":!0,style:{...pageStyle,height:height,width:width,cursor:cursor},onKeyDown:onKeyDown,onMouseMove:onMouseMove,onMouseUp:onMouseUp,onMouseDown:onMouseDown,onMouseLeave:onMouseLeave,onDoubleClick:onDoubleClick,onAnimationEnd:onAnimationEnd,onWheel:onWheel},external_kbnSharedDeps_React_default.a.createElement(interaction_boundary_InteractionBoundary,null),shortcuts,elements.map(node=>{if("annotation"===node.type){const props={key:node.id,type:node.type,transformMatrix:node.transformMatrix,width:node.width,height:node.height,text:node.text,zoomScale:zoomScale};switch(node.subtype){case"alignmentGuide":return external_kbnSharedDeps_React_default.a.createElement(AlignmentGuide,props);case"adHocChildAnnotation":case"hoverAnnotation":return external_kbnSharedDeps_React_default.a.createElement(HoverAnnotation,props);case"dragBoxAnnotation":return external_kbnSharedDeps_React_default.a.createElement(DragBoxAnnotation,props);case"rotationHandle":return external_kbnSharedDeps_React_default.a.createElement(RotationHandle,props);case"resizeHandle":return external_kbnSharedDeps_React_default.a.createElement(BorderResizeHandle,props);case"resizeConnector":return external_kbnSharedDeps_React_default.a.createElement(BorderConnection,props);case"rotationTooltip":return external_kbnSharedDeps_React_default.a.createElement(TooltipAnnotation,props);default:return[]}}else if("group"!==node.type)return external_kbnSharedDeps_React_default.a.createElement(element_wrapper_ElementWrapper,{key:node.id,element:node})}).filter(element=>!!element))}}const localMousePosition=(canvasOrigin,clientX,clientY,zoomScale=1)=>{const{left:left,top:top}=canvasOrigin();return{x:(clientX-left)/zoomScale,y:(clientY-top)/zoomScale}},resetHandler=()=>{window.onmousemove=null,window.onmouseup=null},handleMouseMove=(commit,{clientX:clientX,clientY:clientY,altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey},canvasOrigin,zoomScale)=>{const{x:x,y:y}=localMousePosition(canvasOrigin,clientX,clientY,zoomScale);commit&&commit("cursorPosition",{x:x,y:y,altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey})},handleMouseDown=(commit,e,canvasOrigin,zoomScale,allowDrag=!0)=>{e.stopPropagation();const{clientX:clientX,clientY:clientY,buttons:buttons,altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey}=e;if(1!==buttons||!commit)return void resetHandler();allowDrag&&((commit,canvasOrigin,zoomScale)=>{window.onmousemove=({buttons:buttons,clientX:clientX,clientY:clientY,altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey})=>{const{x:x,y:y}=localMousePosition(canvasOrigin,clientX,clientY,zoomScale);commit("cursorPosition",1===buttons||canvasOrigin?{x:x,y:y,altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey}:{})},window.onmouseup=e=>{e.stopPropagation();const{clientX:clientX,clientY:clientY,altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey}=e,{x:x,y:y}=localMousePosition(canvasOrigin,clientX,clientY,zoomScale);commit("mouseEvent",{event:"mouseUp",x:x,y:y,altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey}),resetHandler()}})(commit,canvasOrigin,zoomScale);const{x:x,y:y}=localMousePosition(canvasOrigin,clientX,clientY,zoomScale);commit("mouseEvent",{event:"mouseDown",x:x,y:y,altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey}),allowDrag||commit("mouseEvent",{event:"mouseUp",x:x,y:y,altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey})},eventHandlers={onMouseDown:props=>e=>handleMouseDown(props.commit,e,props.canvasOrigin,props.zoomScale,props.canDragElement(e.target)),onMouseMove:props=>e=>handleMouseMove(props.commit,e,props.canvasOrigin,props.zoomScale),onMouseLeave:props=>e=>((commit,{buttons:buttons})=>{1!==buttons&&commit&&commit("cursorPosition",{})})(props.commit,e),onWheel:props=>e=>handleMouseMove(props.commit,e,props.canvasOrigin),resetHandler:()=>()=>resetHandler()},workpad_interactive_page_configuration={getAdHocChildAnnotationName:"adHocChildAnnotation",adHocGroupName:"adHocGroup",alignmentGuideName:"alignmentGuide",atopZ:1e3,depthSelect:!0,devColor:"magenta",dragBoxAnnotationName:"dragBoxAnnotation",dragBoxZ:1050,groupName:"group",groupResize:!0,guideDistance:3,hoverAnnotationName:"hoverAnnotation",hoverLift:100,intraGroupManipulation:!1,intraGroupSnapOnly:!1,minimumElementSize:2,persistentGroupName:"persistentGroup",resizeAnnotationConnectorOffset:0,resizeAnnotationOffset:0,resizeAnnotationOffsetZ:.1,resizeAnnotationSize:10,resizeConnectorName:"resizeConnector",resizeHandleName:"resizeHandle",rotateAnnotationOffset:12,rotateSnapInPixels:10,rotationEpsilon:.001,rotationHandleName:"rotationHandle",rotationHandleSize:14,rotationTooltipName:"rotationTooltip",shortcuts:!1,singleSelect:!1,snapConstraint:!0,tooltipZ:1100};function closest(s){let el=this;const matchFn=el.matches?"matches":"msMatchesSelector";do{if(el[matchFn](s))return el;el=el.parentElement||el.parentNode}while(null!==el&&1===el.nodeType);return null}const InteractivePage=Object(Recompose.compose)(Object(lib.connect)((state,ownProps)=>{const selectedToplevelNodes=state.transient.selectedToplevelNodes,nodes=getNodes(state,ownProps.pageId),selectedPrimaryShapeObjects=selectedToplevelNodes.map(id=>nodes.find(s=>s.id===id)).filter(shape=>shape),selectedPersistentPrimaryNodes=flatten(selectedPrimaryShapeObjects.map(shape=>nodes.find(n=>n.id===shape.id)?[shape.id]:nodes.filter(s=>s.parent===shape.id).map(s=>s.id))),selectedNodeIds=flatten(selectedPersistentPrimaryNodes.map(crawlTree(nodes)));return{state:state,isEditable:!getFullscreen(state)&&workpad_isWriteable(state)&&app_canUserWrite(state),elements:nodes,selectedToplevelNodes:selectedToplevelNodes,selectedNodes:selectedNodeIds.map(id=>nodes.find(s=>s.id===id)),pageStyle:getPageById(state,ownProps.pageId).style,zoomScale:getZoomScale(state)}},dispatch=>({dispatch:dispatch,insertNodes:(selectedNodes,pageId)=>dispatch(elements_insertNodes(selectedNodes,pageId)),removeNodes:(nodeIds,pageId)=>dispatch(removeElements(nodeIds,pageId)),selectToplevelNodes:nodes=>dispatch(transient_selectToplevelNodes(nodes.filter(e=>!e.position.parent).map(e=>e.id))),elementLayer:(pageId,elementId,movement)=>dispatch(elements_elementLayer({pageId:pageId,elementId:elementId,movement:movement})),setMultiplePositions:pageId=>repositionedNodes=>dispatch(elements_setMultiplePositions(repositionedNodes.map(node=>({...node,pageId:pageId,elementId:node.id}))))}),({state:state,...restStateProps},{dispatch:dispatch,...restDispatchProps},ownProps)=>({...ownProps,...restDispatchProps,...restStateProps,updateGlobalState:globalStateUpdater(dispatch,state),setMultiplePositions:restDispatchProps.setMultiplePositions(ownProps.pageId)})),Object(Recompose.withState)("aeroStore","setAeroStore"),Object(Recompose.withProps)(({aeroStore:aeroStore,setAeroStore:setAeroStore,elements:elements,selectedToplevelNodes:selectedToplevelNodes,height:height,width:width})=>{const shapes=shapesForNodes(elements),selectedShapes=selectedToplevelNodes.filter(e=>shapes.find(s=>s.id===e)),newState={primaryUpdate:null,currentScene:{shapes:shapes,configuration:{...workpad_interactive_page_configuration,pageHeight:height,pageWidth:width},selectedShapes:selectedShapes,selectionState:aeroStore?aeroStore.getCurrentState().currentScene.selectionState:{uid:0,depthIndex:0,down:!1},gestureState:aeroStore?aeroStore.getCurrentState().currentScene.gestureState:{cursor:{x:1/0,y:1/0},mouseIsDown:!1,mouseButtonState:{buttonState:"up",downX:null,downY:null}}}};return aeroStore?aeroStore.setCurrentState(newState):setAeroStore(aeroStore=((initialState,updater)=>{let currentState=initialState;const commit=(type,payload)=>currentState=updater({...currentState,primaryUpdate:{type:type,payload:{...payload,uid:store_counter++}}});return{getCurrentState:()=>currentState,setCurrentState:state=>{currentState=state,commit("flush",{})},commit:commit}})(newState,updater)),{aeroStore:aeroStore}}),Object(Recompose.withProps)(({aeroStore:aeroStore,updateGlobalState:updateGlobalState})=>({commit:(type,payload)=>{const newLayoutState=aeroStore.commit(type,payload);newLayoutState.currentScene.gestureEnd&&updateGlobalState(newLayoutState)}})),Object(Recompose.lifecycle)({componentWillUnmount(){this.props.unregisterLayout(this.props.aeroStore)}}),Object(Recompose.withState)("canvasOrigin","saveCanvasOrigin"),Object(Recompose.withState)("_forceRerender","forceRerender"),Object(Recompose.withProps)(({registerLayout:registerLayout,aeroStore:aeroStore,updateGlobalState:updateGlobalState,forceRerender:forceRerender})=>(registerLayout((type,payload)=>{const newLayoutState=aeroStore.commit(type,payload);return newLayoutState.currentScene.gestureEnd&&updateGlobalState(newLayoutState),forceRerender(newLayoutState),newLayoutState}),{cursor:aeroStore.getCurrentState().currentScene.cursor})),Object(Recompose.withProps)(({aeroStore:aeroStore,elements:elements})=>{const elementLookup=new Map(elements.map(element=>[element.id,element]));return{elements:aeroStore.getCurrentState().currentScene.shapes.map(shape=>{const element=elementLookup.get(shape.id);return element?{...shape,width:2*shape.a,height:2*shape.b,filter:element.filter}:shape})}}),Object(Recompose.withProps)(({commit:commit,forceRerender:forceRerender})=>({commit:(...args)=>forceRerender(commit(...args))})),Object(Recompose.withProps)((...props)=>({...props,canDragElement:element=>!(element=>"function"==typeof element.closest?element.closest("."+common_lib.CANVAS_EMBEDDABLE_CLASSNAME)&&!element.closest(".embPanel__header"):closest.call(element,"."+common_lib.CANVAS_EMBEDDABLE_CLASSNAME)&&!closest.call(element,".embPanel__header"))(element)&&(element=>"function"==typeof element.closest?!!element.closest(".canvasWorkpadContainer"):!!closest.call(element,".canvasWorkpadContainer"))(element)})),Object(Recompose.withHandlers)(eventHandlers),()=>interactive_workpad_page_InteractiveWorkpadPage),WorkpadPage=Object(Recompose.compose)(Object(Recompose.shouldUpdate)(not(react_fast_compare_default.a)),Object(Recompose.withProps)(({animation:animation,isSelected:isSelected})=>animation?{className:animation.name+" "+(isSelected?"isActive":"isInactive"),animationStyle:{animationDirection:animation.direction,animationDuration:"1s"}}:{className:isSelected?"isActive":"isInactive",animationStyle:{}}),Object(lib.connect)((state,{isSelected:isSelected,pageId:pageId})=>({isInteractive:isSelected&&!getFullscreen(state)&&workpad_isWriteable(state)&&app_canUserWrite(state),elements:getNodes(state,pageId),pageStyle:getPageById(state,pageId).style})),Object(Recompose.branch)(({isInteractive:isInteractive})=>isInteractive,InteractivePage,()=>Object(Recompose.withProps)(positioning_utils_simplePositioning)(static_workpad_page_StaticWorkpadPage)))();function fullscreen_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}WorkpadPage.propTypes={pageId:prop_types_default.a.string.isRequired};class fullscreen_Fullscreen extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args),fullscreen_defineProperty(this,"state",{width:0,height:0}),fullscreen_defineProperty(this,"getWindowSize",()=>({width:this.win.innerWidth,height:this.win.innerHeight})),fullscreen_defineProperty(this,"onWindowResize",Object(external_kbnSharedDeps_Lodash_.debounce)(()=>{const{width:width,height:height}=this.getWindowSize();this.setState({width:width,height:height})},100))}UNSAFE_componentWillMount(){this.win=Object(get_window.a)(),this.setState({width:this.win.innerWidth,height:this.win.innerHeight})}componentDidMount(){this.win.addEventListener("resize",this.onWindowResize)}componentWillUnmount(){this.win.removeEventListener("resize",this.onWindowResize)}render(){const{isFullscreen:isFullscreen,children:children}=this.props;return children({isFullscreen:isFullscreen,windowSize:{width:this.state.width,height:this.state.height}})}}const components_fullscreen_Fullscreen=Object(lib.connect)(state=>({isFullscreen:getFullscreen(state)}))(fullscreen_Fullscreen);function workpad_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class workpad_Workpad extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){super(...args),workpad_defineProperty(this,"_toggleFullscreen",()=>{const{setFullscreen:setFullscreen,isFullscreen:isFullscreen}=this.props;setFullscreen(!isFullscreen)}),workpad_defineProperty(this,"_keyMap",{REFRESH:this.props.fetchAllRenderables,UNDO:this.props.undoHistory,REDO:this.props.redoHistory,GRID:()=>this.props.setGrid(!this.props.grid),ZOOM_IN:this.props.zoomIn,ZOOM_OUT:this.props.zoomOut,ZOOM_RESET:this.props.resetZoom,PREV:this.props.previousPage,NEXT:this.props.nextPage,FULLSCREEN:this._toggleFullscreen}),workpad_defineProperty(this,"_keyHandler",(action,event)=>{isTextInput(event.target)||"function"!=typeof this._keyMap[action]||(event.preventDefault(),this._keyMap[action]())})}render(){const{selectedPageNumber:selectedPageNumber,getAnimation:getAnimation,onTransitionEnd:onTransitionEnd,pages:pages,totalElementCount:totalElementCount,width:width,height:height,workpadCss:workpadCss,grid:grid,isFullscreen:isFullscreen,registerLayout:registerLayout,unregisterLayout:unregisterLayout,zoomScale:zoomScale}=this.props,bufferStyle={height:isFullscreen?height:(height+2*constants.B)*zoomScale,width:isFullscreen?width:(width+2*constants.B)*zoomScale};return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasWorkpad__buffer",style:bufferStyle},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasCheckered",style:{height:height,width:width,transformOrigin:"0 0",transform:isFullscreen?void 0:`scale3d(${zoomScale}, ${zoomScale}, 1)`}},!isFullscreen&&external_kbnSharedDeps_React_default.a.createElement(react_shortcuts_lib.Shortcuts,{name:"EDITOR",handler:this._keyHandler,targetNodeSelector:"body",global:!0}),external_kbnSharedDeps_React_default.a.createElement(components_fullscreen_Fullscreen,null,({isFullscreen:isFullscreen,windowSize:windowSize})=>{const scale=Math.min(windowSize.height/height,windowSize.width/width),fsStyle=isFullscreen?{transform:`scale3d(${scale}, ${scale}, 1)`,WebkitTransform:`scale3d(${scale}, ${scale}, 1)`,msTransform:`scale3d(${scale}, ${scale}, 1)`,height:windowSize.height<height?"auto":height,width:windowSize.width<width?"auto":width}:{};return style_it_default.a.it(workpadCss,external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasWorkpad "+(isFullscreen?"fullscreen":""),style:fsStyle,"data-shared-items-count":totalElementCount},isFullscreen&&external_kbnSharedDeps_React_default.a.createElement(react_shortcuts_lib.Shortcuts,{name:"PRESENTATION",handler:this.keyHandler,targetNodeSelector:"body",global:!0}),pages.map((page,i)=>external_kbnSharedDeps_React_default.a.createElement(WorkpadPage,{key:page.id,pageId:page.id,height:height,width:width,isSelected:i+1===selectedPageNumber,animation:getAnimation(i+1),onAnimationEnd:onTransitionEnd,registerLayout:registerLayout,unregisterLayout:unregisterLayout})),external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasGrid",style:{height:height,width:width,display:grid?"block":"none"}})))})))}}const workpad_mapDispatchToProps={undoHistory:history_undoHistory,redoHistory:history_redoHistory,fetchAllRenderables:fetchAllRenderables,setZoomScale:transient_setZoomScale,setFullscreen:setFullscreen},components_workpad_Workpad=Object(Recompose.compose)(Recompose.pure,Object(Recompose.getContext)({router:prop_types_default.a.object}),Object(Recompose.withState)("grid","setGrid",!1),Object(lib.connect)(state=>{const{width:width,height:height,id:workpadId,css:workpadCss}=getWorkpad(state);return{pages:getPages(state),selectedPageNumber:getSelectedPageIndex(state)+1,totalElementCount:getAllElements(state).length,width:width,height:height,workpadCss:workpadCss,workpadId:workpadId,isFullscreen:getFullscreen(state),zoomScale:getZoomScale(state)}},workpad_mapDispatchToProps,(stateProps,dispatchProps,ownProps)=>({...ownProps,...stateProps,...dispatchProps,setFullscreen:value=>{dispatchProps.setFullscreen(value),!0===value&&trackCanvasUiMetric(external_kbnSharedDeps_KbnAnalytics_.METRIC_TYPE.COUNT,stateProps.autoplayEnabled?[constants.u,constants.v]:constants.u)}})),Object(Recompose.withState)("transition","setTransition",null),Object(Recompose.withState)("prevSelectedPageNumber","setPrevSelectedPageNumber",0),Object(Recompose.withProps)(({selectedPageNumber:selectedPageNumber,prevSelectedPageNumber:prevSelectedPageNumber,transition:transition})=>({getAnimation:function(pageNumber){if(!transition||!transition.name)return null;if(![selectedPageNumber,prevSelectedPageNumber].includes(pageNumber))return null;const{enter:enter,exit:exit}=transitionsRegistry.get(transition.name);return{name:pageNumber===Math.max(selectedPageNumber,prevSelectedPageNumber)?enter:exit,direction:prevSelectedPageNumber>selectedPageNumber?"reverse":"normal"}}})),Object(Recompose.withHandlers)({onPageChange:props=>pageNumber=>{if(pageNumber===props.selectedPageNumber)return;props.setPrevSelectedPageNumber(props.selectedPageNumber);const transitionPage=Math.max(props.selectedPageNumber,pageNumber)-1,{transition:transition}=props.pages[transitionPage];transition&&props.setTransition(transition),props.router.navigateTo("loadWorkpad",{id:props.workpadId,page:pageNumber})}}),Object(Recompose.withHandlers)({onTransitionEnd:({setTransition:setTransition})=>()=>setTransition(null),nextPage:props=>()=>{const pageNumber=Math.min(props.selectedPageNumber+1,props.pages.length);props.onPageChange(pageNumber)},previousPage:props=>()=>{const pageNumber=Math.max(1,props.selectedPageNumber-1);props.onPageChange(pageNumber)}}),Object(Recompose.withHandlers)(zoomHandlerCreators))(workpad_Workpad),{WorkpadHeaderRefreshControlSettings:refresh_control_component_strings}=i18n.e,refresh_control_mapDispatchToProps={doRefresh:fetchAllRenderables},refresh_control_RefreshControl=Object(lib.connect)(state=>({inFlight:getInFlight(state)}),refresh_control_mapDispatchToProps)(({doRefresh:doRefresh,inFlight:inFlight})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"bottom",content:external_kbnSharedDeps_React_default.a.createElement("span",null,refresh_control_component_strings.getRefreshTooltip(),external_kbnSharedDeps_React_default.a.createElement(tool_tip_shortcut_ToolTipShortcut,{namespace:"EDITOR",action:"REFRESH"}))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{disabled:inFlight,iconType:"refresh","aria-label":refresh_control_component_strings.getRefreshAriaLabel(),onClick:doRefresh,"data-test-subj":"canvas-refresh-control"})));function fullscreen_control_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class fullscreen_control_FullscreenControl extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){super(...args),fullscreen_control_defineProperty(this,"_toggleFullscreen",()=>{const{setFullscreen:setFullscreen,isFullscreen:isFullscreen}=this.props;setFullscreen(!isFullscreen)}),fullscreen_control_defineProperty(this,"_keyMap",{REFRESH:this.props.fetchAllRenderables,PREV:this.props.previousPage,NEXT:this.props.nextPage,FULLSCREEN:this._toggleFullscreen,FULLSCREEN_EXIT:this._toggleFullscreen,PAGE_CYCLE_TOGGLE:()=>this.props.enableAutoplay(!this.props.autoplayEnabled)}),fullscreen_control_defineProperty(this,"_keyHandler",(action,event)=>{Object.keys(this._keyMap).indexOf(action)<0||isTextInput(event.target)||"function"!=typeof this._keyMap[action]||(event.preventDefault(),this._keyMap[action]())})}render(){const{children:children,isFullscreen:isFullscreen}=this.props;return external_kbnSharedDeps_React_default.a.createElement("span",null,isFullscreen&&external_kbnSharedDeps_React_default.a.createElement(react_shortcuts_lib.Shortcuts,{name:"PRESENTATION",handler:this._keyHandler,targetNodeSelector:"body",global:!0,isolate:!0}),children({isFullscreen:isFullscreen,toggleFullscreen:this._toggleFullscreen}))}}const workpad_header_fullscreen_control_FullscreenControl=Object(Recompose.compose)(Object(Recompose.getContext)({router:prop_types_default.a.object}),Object(lib.connect)(state=>({workpadId:getWorkpad(state).id,pages:getPages(state),selectedPageNumber:getSelectedPageIndex(state)+1,isFullscreen:getFullscreen(state),autoplayEnabled:getAutoplay(state).enabled}),dispatch=>({setFullscreen:value=>{dispatch(setFullscreen(value)),value&&dispatch(transient_selectToplevelNodes([]))},enableAutoplay:enabled=>dispatch(workpad_enableAutoplay(enabled)),fetchAllRenderables:()=>dispatch(fetchAllRenderables())}),(stateProps,dispatchProps,ownProps)=>({...ownProps,...stateProps,...dispatchProps,setFullscreen:value=>{dispatchProps.setFullscreen(value),!0===value&&trackCanvasUiMetric(external_kbnSharedDeps_KbnAnalytics_.METRIC_TYPE.COUNT,stateProps.autoplayEnabled?[constants.u,constants.v]:constants.u)}})),Object(Recompose.withState)("transition","setTransition",null),Object(Recompose.withState)("prevSelectedPageNumber","setPrevSelectedPageNumber",0),Object(Recompose.withProps)(({selectedPageNumber:selectedPageNumber,prevSelectedPageNumber:prevSelectedPageNumber,transition:transition})=>({getAnimation:function(pageNumber){if(!transition||!transition.name)return null;if(![selectedPageNumber,prevSelectedPageNumber].includes(pageNumber))return null;const{enter:enter,exit:exit}=transitionsRegistry.get(transition.name);return{name:pageNumber===Math.max(selectedPageNumber,prevSelectedPageNumber)?enter:exit,direction:prevSelectedPageNumber>selectedPageNumber?"reverse":"normal"}}})),Object(Recompose.withHandlers)({onPageChange:props=>pageNumber=>{if(pageNumber===props.selectedPageNumber)return;props.setPrevSelectedPageNumber(props.selectedPageNumber);const transitionPage=Math.max(props.selectedPageNumber,pageNumber)-1,{transition:transition}=props.pages[transitionPage];transition&&props.setTransition(transition),props.router.navigateTo("loadWorkpad",{id:props.workpadId,page:pageNumber})}}),Object(Recompose.withHandlers)({onTransitionEnd:({setTransition:setTransition})=>()=>setTransition(null),nextPage:props=>()=>{const pageNumber=Math.min(props.selectedPageNumber+1,props.pages.length);props.onPageChange(pageNumber)},previousPage:props=>()=>{const pageNumber=Math.max(1,props.selectedPageNumber-1);props.onPageChange(pageNumber)}}))(fullscreen_control_FullscreenControl),flattenPanelTree=(tree,array=[])=>(array.push(tree),tree.items&&tree.items.forEach(item=>{const{panel:panel}=item;panel&&(flattenPanelTree(panel,array),item.panel=panel.id)}),array);var lib_dataurl=__webpack_require__(24);function element_card_extends(){return(element_card_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const ElementCard=({title:title,description:description,image:image,tags:tags=[],onClick:onClick,...rest})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCard,element_card_extends({className:image?"canvasElementCard":"canvasElementCard canvasElementCard--hasIcon",textAlign:"left",title:title,description:description,footer:external_kbnSharedDeps_React_default.a.createElement(tag_list_TagList,{tags:tags,tagType:"badge"}),image:image,icon:image?void 0:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"canvasApp",size:"xxl"}),onClick:onClick},rest));function custom_element_modal_extends(){return(custom_element_modal_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function custom_element_modal_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const{CustomElementModal:custom_element_modal_strings}=components.a;class custom_element_modal_CustomElementModal extends external_kbnSharedDeps_React_.PureComponent{constructor(...args){super(...args),custom_element_modal_defineProperty(this,"state",{name:this.props.name||"",description:this.props.description||"",image:this.props.image||""}),custom_element_modal_defineProperty(this,"_handleChange",(type,value)=>{this.setState({[type]:value})}),custom_element_modal_defineProperty(this,"_handleUpload",files=>{if(null==files)return;const file=files[0],[type,subtype]=Object(external_kbnSharedDeps_Lodash_.get)(file,"type","").split("/");"image"===type&&constants.A.indexOf(subtype)>=0&&Object(lib_dataurl.a)(file).then(dataurl=>this._handleChange("image",dataurl))})}render(){const{onSave:onSave,onCancel:onCancel,title:title,...rest}=this.props,{name:name,description:description,image:image}=this.state;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModal,custom_element_modal_extends({},rest,{className:"canvasCustomElementModal",maxWidth:700,onClose:onCancel,initialFocus:".canvasCustomElementForm__name"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeaderTitle,null,external_kbnSharedDeps_React_default.a.createElement("h3",null,title))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexStart"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{className:"canvasCustomElementForm",grow:2},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:custom_element_modal_strings.getNameInputLabel(),helpText:custom_element_modal_strings.getCharactersRemainingDescription(40-name.length),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:name,className:"canvasCustomElementForm__name",onChange:e=>e.target.value.length<=40&&this._handleChange("name",e.target.value),required:!0,"data-test-subj":"canvasCustomElementForm-name"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:custom_element_modal_strings.getDescriptionInputLabel(),helpText:custom_element_modal_strings.getCharactersRemainingDescription(100-description.length)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextArea,{value:description,rows:2,onChange:e=>e.target.value.length<=100&&this._handleChange("description",e.target.value),"data-test-subj":"canvasCustomElementForm-description"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{className:"canvasCustomElementForm__thumbnail",label:custom_element_modal_strings.getImageInputLabel(),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFilePicker,{initialPromptText:custom_element_modal_strings.getImageFilePickerPlaceholder(),onChange:this._handleUpload,className:"canvasImageUpload",accept:"image/*"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{className:"canvasCustomElementForm__thumbnailHelp",size:"xs"},external_kbnSharedDeps_React_default.a.createElement("p",null,custom_element_modal_strings.getImageInputDescription()))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{className:"canvasElementCard__wrapper canvasCustomElementForm__preview",grow:1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xxxs"},external_kbnSharedDeps_React_default.a.createElement("h4",null,custom_element_modal_strings.getElementPreviewTitle())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(ElementCard,{title:name,description:description,image:image})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalFooter,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:onCancel},custom_element_modal_strings.getCancelButtonLabel())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{fill:!0,onClick:()=>{onSave(name,description,image)},"data-test-subj":"canvasCustomElementForm-submit"},custom_element_modal_strings.getSaveButtonLabel())))))}}const{WorkpadHeaderEditMenu:edit_menu_component_strings}=components.a,edit_menu_component_shortcutHelp=i18n_shortcuts.a.getShortcutHelp(),withGlobalState=(commit,updateGlobalState)=>(type,payload)=>{const newLayoutState=commit(type,payload);newLayoutState.currentScene.gestureEnd&&updateGlobalState(newLayoutState)},edit_menu_EditMenu=Object(Recompose.compose)(Object(lib.connect)(state=>{const pageId=getSelectedPage(state),nodes=getNodes(state,pageId),selectedToplevelNodes=getSelectedToplevelNodes(state),selectedPrimaryShapeObjects=selectedToplevelNodes.map(id=>nodes.find(s=>s.id===id)).filter(shape=>shape),selectedPersistentPrimaryNodes=flatten(selectedPrimaryShapeObjects.map(shape=>nodes.find(n=>n.id===shape.id)?[shape.id]:nodes.filter(s=>s.position.parent===shape.id).map(s=>s.id)));return{pageId:pageId,selectedToplevelNodes:selectedToplevelNodes,selectedNodes:flatten(selectedPersistentPrimaryNodes.map(crawlTree(nodes))).map(id=>nodes.find(s=>s.id===id)).filter(node=>!!node),state:state}},dispatch=>({insertNodes:(selectedNodes,pageId)=>dispatch(elements_insertNodes(selectedNodes,pageId)),removeNodes:(nodeIds,pageId)=>dispatch(removeElements(nodeIds,pageId)),selectToplevelNodes:nodes=>dispatch(transient_selectToplevelNodes(nodes.filter(e=>!e.position.parent).map(e=>e.id))),elementLayer:(pageId,elementId,movement)=>{dispatch(elements_elementLayer({pageId:pageId,elementId:elementId,movement:movement}))},undoHistory:()=>dispatch(history_undoHistory()),redoHistory:()=>dispatch(history_redoHistory()),dispatch:dispatch}),({state:state,selectedToplevelNodes:selectedToplevelNodes,...restStateProps},{dispatch:dispatch,...restDispatchProps},{commit:commit})=>{const updateGlobalState=globalStateUpdater(dispatch,state);return{...restDispatchProps,...restStateProps,commit:withGlobalState(commit,updateGlobalState),groupIsSelected:1===selectedToplevelNodes.length&&selectedToplevelNodes[0].includes("group")}}),Object(Recompose.withProps)(()=>({hasPasteData:Boolean(getClipboardData())})),Object(Recompose.withHandlers)(basicHandlerCreators),Object(Recompose.withHandlers)(clipboardHandlerCreators),Object(Recompose.withHandlers)(layerHandlerCreators),Object(Recompose.withHandlers)(groupHandlerCreators),Object(Recompose.withHandlers)(alignmentDistributionHandlerCreators))(({cutNodes:cutNodes,copyNodes:copyNodes,pasteNodes:pasteNodes,deleteNodes:deleteNodes,cloneNodes:cloneNodes,bringToFront:bringToFront,bringForward:bringForward,sendBackward:sendBackward,sendToBack:sendToBack,alignLeft:alignLeft,alignCenter:alignCenter,alignRight:alignRight,alignTop:alignTop,alignMiddle:alignMiddle,alignBottom:alignBottom,distributeHorizontally:distributeHorizontally,distributeVertically:distributeVertically,createCustomElement:createCustomElement,selectedNodes:selectedNodes,groupIsSelected:groupIsSelected,groupNodes:groupNodes,ungroupNodes:ungroupNodes,undoHistory:undoHistory,redoHistory:redoHistory,hasPasteData:hasPasteData})=>{const[isModalVisible,setModalVisible]=Object(external_kbnSharedDeps_React_.useState)(!1),hideModal=()=>setModalVisible(!1),getPanelTree=closePopover=>{const groupMenuItem=groupIsSelected?{name:edit_menu_component_strings.getUngroupMenuItemLabel(),className:constants.n,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"empty",size:"m"}),onClick:()=>{ungroupNodes(),closePopover()}}:{name:edit_menu_component_strings.getGroupMenuItemLabel(),className:constants.n,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"empty",size:"m"}),disabled:selectedNodes.length<2,onClick:()=>{groupNodes(),closePopover()}},orderMenuItem={name:edit_menu_component_strings.getOrderMenuItemLabel(),disabled:1!==selectedNodes.length,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"empty",size:"m"}),panel:{id:1,title:edit_menu_component_strings.getOrderMenuItemLabel(),items:[{name:edit_menu_component_shortcutHelp.BRING_TO_FRONT,icon:"sortUp",onClick:bringToFront},{name:edit_menu_component_shortcutHelp.BRING_FORWARD,icon:"arrowUp",onClick:bringForward},{name:edit_menu_component_shortcutHelp.SEND_BACKWARD,icon:"arrowDown",onClick:sendBackward},{name:edit_menu_component_shortcutHelp.SEND_TO_BACK,icon:"sortDown",onClick:sendToBack}]}},alignmentMenuItem={name:edit_menu_component_strings.getAlignmentMenuItemLabel(),className:"canvasContextMenu",disabled:groupIsSelected||selectedNodes.length<2,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"empty",size:"m"}),panel:{id:2,title:edit_menu_component_strings.getAlignmentMenuItemLabel(),items:[{name:edit_menu_component_strings.getLeftAlignMenuItemLabel(),icon:"editorItemAlignLeft",onClick:()=>{alignLeft(),closePopover()}},{name:edit_menu_component_strings.getCenterAlignMenuItemLabel(),icon:"editorItemAlignCenter",onClick:()=>{alignCenter(),closePopover()}},{name:edit_menu_component_strings.getRightAlignMenuItemLabel(),icon:"editorItemAlignRight",onClick:()=>{alignRight(),closePopover()}},{name:edit_menu_component_strings.getTopAlignMenuItemLabel(),icon:"editorItemAlignTop",onClick:()=>{alignTop(),closePopover()}},{name:edit_menu_component_strings.getMiddleAlignMenuItemLabel(),icon:"editorItemAlignMiddle",onClick:()=>{alignMiddle(),closePopover()}},{name:edit_menu_component_strings.getBottomAlignMenuItemLabel(),icon:"editorItemAlignBottom",onClick:()=>{alignBottom(),closePopover()}}]}},distributionMenuItem={name:edit_menu_component_strings.getDistributionMenuItemLabel(),className:"canvasContextMenu",disabled:groupIsSelected||selectedNodes.length<3,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"empty",size:"m"}),panel:{id:3,title:edit_menu_component_strings.getAlignmentMenuItemLabel(),items:[{name:edit_menu_component_strings.getHorizontalDistributionMenuItemLabel(),icon:"editorDistributeHorizontal",onClick:()=>{distributeHorizontally(),closePopover()}},{name:edit_menu_component_strings.getVerticalDistributionMenuItemLabel(),icon:"editorDistributeVertical",onClick:()=>{distributeVertically(),closePopover()}}]}},savedElementMenuItem={name:edit_menu_component_strings.getSaveElementMenuItemLabel(),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"indexOpen",size:"m"}),disabled:selectedNodes.length<1,className:constants.n,"data-test-subj":"canvasWorkpadEditMenu__saveElementButton",onClick:()=>{setModalVisible(!0),closePopover()}};return{id:0,items:[{name:edit_menu_component_strings.getUndoMenuItemLabel(),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"editorUndo",size:"m"}),onClick:()=>{undoHistory()}},{name:edit_menu_component_strings.getRedoMenuItemLabel(),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"editorRedo",size:"m"}),onClick:()=>{redoHistory()}},{name:edit_menu_component_shortcutHelp.CUT,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"cut",size:"m"}),className:constants.n,disabled:selectedNodes.length<1,onClick:()=>{cutNodes(),closePopover()}},{name:edit_menu_component_shortcutHelp.COPY,disabled:selectedNodes.length<1,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"copy",size:"m"}),onClick:()=>{copyNodes()}},{name:edit_menu_component_shortcutHelp.PASTE,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"copyClipboard",size:"m"}),disabled:!hasPasteData,onClick:()=>{pasteNodes(),closePopover()}},{name:edit_menu_component_shortcutHelp.DELETE,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"trash",size:"m"}),disabled:selectedNodes.length<1,onClick:()=>{deleteNodes(),closePopover()}},{name:edit_menu_component_shortcutHelp.CLONE,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"empty",size:"m"}),disabled:selectedNodes.length<1,onClick:()=>{cloneNodes(),closePopover()}},groupMenuItem,orderMenuItem,alignmentMenuItem,distributionMenuItem,savedElementMenuItem]}};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(popover.a,{button:togglePopover=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"xs","aria-label":edit_menu_component_strings.getEditMenuLabel(),onClick:togglePopover,"data-test-subj":"canvasWorkpadEditMenuButton"},edit_menu_component_strings.getEditMenuButtonLabel()),panelPaddingSize:"none",anchorPosition:"downLeft"},({closePopover:closePopover})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiContextMenu,{initialPanelId:0,panels:flattenPanelTree(getPanelTree(closePopover))})),isModalVisible?external_kbnSharedDeps_React_default.a.createElement(custom_element_modal_CustomElementModal,{title:edit_menu_component_strings.getCreateElementModalTitle(),onSave:(name,description,image)=>{createCustomElement(name,description,image),hideModal()},onCancel:hideModal}):null)});function element_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class Element{constructor(config){element_defineProperty(this,"name",void 0),element_defineProperty(this,"displayName",void 0),element_defineProperty(this,"type",void 0),element_defineProperty(this,"icon",void 0),element_defineProperty(this,"help",void 0),element_defineProperty(this,"expression",void 0),element_defineProperty(this,"filter",void 0),element_defineProperty(this,"width",void 0),element_defineProperty(this,"height",void 0);const{name:name,icon:icon,displayName:displayName,type:type,expression:expression,filter:filter,help:help,width:width,height:height}=config;if(this.name=name,this.displayName=displayName||name,this.icon=icon||"empty",this.help=help||"",!config.expression)throw new Error("Element types must have a default expression");this.type=type,this.expression=expression,this.filter=filter,this.width=width||500,this.height=height||300}}class elements_registry_ElementsRegistry extends common.Registry{wrapper(obj){return new Element(obj)}}const elementsRegistry=new elements_registry_ElementsRegistry;var external_kbnSharedDeps_SaferLodashSet_=__webpack_require__(163);class clipboard_Clipboard extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){var obj,key,value;super(...args),value=ev=>{const{content:content,onCopy:onCopy}=this.props;ev.preventDefault(),onCopy(copy_to_clipboard_default()(content.toString(),{debug:!0}))},(key="onClick")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}render(){return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasClipboard",onClick:this.onClick,onKeyPress:this.onClick,role:"button",tabIndex:0},this.props.children)}}const components_clipboard_Clipboard=clipboard_Clipboard;var base64_js=__webpack_require__(73);class download_Download extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){var obj,key,value;super(...args),value=()=>{const{fileName:fileName,content:content}=this.props,asset=Object(lib_dataurl.c)(content,!0);if(asset&&asset.data){const assetBlob=new Blob([Object(base64_js.toByteArray)(asset.data)],{type:asset.mimetype}),ext=asset.extension?"."+asset.extension:"";FileSaver_default.a.saveAs(assetBlob,`canvas-${fileName}${ext}`)}},(key="onClick")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}render(){return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasDownload",onClick:this.onClick,onKeyPress:this.onClick,tabIndex:0,role:"button"},this.props.children)}}const components_download_Download=download_Download,{Asset:asset_component_strings}=i18n.e,asset_Asset=Object(lib.connect)(state=>({selectedPage:getSelectedPage(state)}),dispatch=>({onCreate:pageId=>assetId=>{const imageElement=elementsRegistry.get("image"),elementAST=Object(common.fromExpression)(imageElement.expression),subExp=[{type:"expression",chain:[{type:"function",function:"asset",arguments:{_:[assetId]}}]}],newAST=Object(external_kbnSharedDeps_SaferLodashSet_.set)(elementAST,["chain","0","arguments","dataurl"],subExp);imageElement.expression=Object(common.toExpression)(newAST),dispatch(elements_addElement(pageId,imageElement))},onDelete:asset=>dispatch(removeAsset(asset.id))}),(stateProps,dispatchProps,ownProps)=>{const{onCreate:onCreate,onDelete:onDelete}=dispatchProps;return{...ownProps,onCreate:onCreate(stateProps.selectedPage),onDelete:onDelete}})(({asset:asset,onCreate:onCreate,onDelete:onDelete})=>{const{success:success}=Object(public_services.g)(),[isConfirmModalVisible,setIsConfirmModalVisible]=Object(external_kbnSharedDeps_React_.useState)(!1),confirmModal=external_kbnSharedDeps_React_default.a.createElement(confirm_modal_ConfirmModal,{isOpen:isConfirmModalVisible,title:asset_component_strings.getConfirmModalTitle(),message:asset_component_strings.getConfirmModalMessageText(),confirmButtonText:asset_component_strings.getConfirmModalButtonLabel(),onConfirm:()=>{setIsConfirmModalVisible(!1),onDelete(asset)},onCancel:()=>setIsConfirmModalVisible(!1)}),createImage=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{className:"asset-create-image",grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:asset_component_strings.getCreateImageTooltip()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"vector","aria-label":asset_component_strings.getCreateImageTooltip(),onClick:()=>onCreate(asset.id)}))),downloadAsset=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{className:"asset-download",grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:asset_component_strings.getDownloadAssetTooltip()},external_kbnSharedDeps_React_default.a.createElement(components_download_Download,{fileName:asset.id,content:asset.value},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"sortDown","aria-label":asset_component_strings.getDownloadAssetTooltip()})))),copyAsset=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:asset_component_strings.getCopyAssetTooltip()},external_kbnSharedDeps_React_default.a.createElement(components_clipboard_Clipboard,{content:asset.id,onCopy:result=>result&&success(`Copied '${asset.id}' to clipboard`)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"copyClipboard","aria-label":asset_component_strings.getCopyAssetTooltip()})))),deleteAsset=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:asset_component_strings.getDeleteAssetTooltip()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{color:"danger",iconType:"trash","aria-label":asset_component_strings.getDeleteAssetTooltip(),onClick:()=>setIsConfirmModalVisible(!0)}))),thumbnail=external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasAsset__thumb canvasCheckered"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiImage,{className:"canvasAsset__img",size:"original",url:asset.value,fullScreenIconColor:"dark",alt:asset_component_strings.getThumbnailAltText()})),assetLabel=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs",className:"eui-textBreakAll"},external_kbnSharedDeps_React_default.a.createElement("p",{className:"eui-textBreakAll"},external_kbnSharedDeps_React_default.a.createElement("strong",null,asset.id),external_kbnSharedDeps_React_default.a.createElement("br",null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextColor,{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("small",null,"(",Math.round(asset.value.length/1024)," kb)"))));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{key:asset.id},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,{className:"canvasAsset",paddingSize:"s"},thumbnail,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),assetLabel,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"baseline",justifyContent:"center",responsive:!1},createImage,downloadAsset,copyAsset,deleteAsset)),isConfirmModalVisible?confirmModal:null)}),{AssetManager:asset_manager_component_strings}=i18n.e,asset_manager_AssetManager=Object(lib.connect)(state=>({assets:getAssets(state)}),dispatch=>({onAddAsset:(type,content)=>{const assetId=Object(get_id.a)("asset");return dispatch(createAsset(type,content,assetId)),assetId}}),(stateProps,dispatchProps,ownProps)=>{const{assets:assets}=stateProps,{onAddAsset:onAddAsset}=dispatchProps,assetValues=Object.values(assets).filter(asset=>!!asset);return{...ownProps,assets:assetValues,onAddAsset:file=>{const[type,subtype]=Object(external_kbnSharedDeps_Lodash_.get)(file,"type","").split("/");return"image"===type&&constants.A.indexOf(subtype)>=0&&Object(lib_dataurl.a)(file).then(dataurl=>{const existingId=findExistingAsset("dataurl",dataurl,assetValues);return existingId||onAddAsset("dataurl",dataurl)})}}})(props=>{const{assets:assets,onClose:onClose,onAddAsset:onAddAsset}=props,[isLoading,setIsLoading]=Object(external_kbnSharedDeps_React_.useState)(!1),assetsTotal=Math.round(assets.reduce((total,{value:value})=>total+value.length,0)/1024),percentageUsed=Math.round(assetsTotal/constants.k*100),emptyAssets=external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasAssetManager__emptyPanel"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"importAction",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,asset_manager_component_strings.getEmptyAssetsDescription()),titleSize:"xs"}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModal,{onClose:()=>onClose(),className:"canvasAssetManager canvasModal--fixedSize",maxWidth:"1000px"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeader,{className:"canvasAssetManager__modalHeader"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeaderTitle,{className:"canvasAssetManager__modalHeaderTitle"},asset_manager_component_strings.getModalTitle()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{className:"canvasAssetManager__fileUploadWrapper"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},isLoading?external_kbnSharedDeps_React_default.a.createElement(loading_loading.a,{animated:!0,text:asset_manager_component_strings.getLoadingText()}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFilePicker,{initialPromptText:asset_manager_component_strings.getFilePickerPromptText(),compressed:!0,display:"default",multiple:!0,onChange:files=>{null!==files&&(setIsLoading(!0),Promise.all(Array.from(files).map(file=>onAddAsset(file))).finally(()=>{setIsLoading(!1)}))},accept:"image/*"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",null,asset_manager_component_strings.getDescription())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),assets.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGrid,{columns:4},assets.map(asset=>external_kbnSharedDeps_React_default.a.createElement(asset_Asset,{asset:asset,key:asset.id}))):emptyAssets),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalFooter,{className:"canvasAssetManager__modalFooter"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{className:"canvasAssetManager__meterWrapper",responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiProgress,{value:assetsTotal,max:constants.k,color:percentageUsed<90?"secondary":"danger",size:"s","aria-labelledby":"CanvasAssetManagerLabel"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,className:"eui-textNoWrap"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{id:"CanvasAssetManagerLabel"},asset_manager_component_strings.getSpaceUsedText(percentageUsed)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{size:"s",onClick:()=>onClose()},asset_manager_component_strings.getModalCloseButtonLabel())))}),{ElementControls:element_controls_strings}=components.a,ElementControls=({onDelete:onDelete,onEdit:onEdit})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{className:"canvasElementCard__controls",gutterSize:"xs",justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:element_controls_strings.getEditTooltip()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"pencil","aria-label":element_controls_strings.getEditAriaLabel(),onClick:onEdit,"data-test-subj":"canvasElementCard__editButton"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:element_controls_strings.getDeleteTooltip()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{color:"danger",iconType:"trash","aria-label":element_controls_strings.getDeleteAriaLabel(),onClick:onDelete,"data-test-subj":"canvasElementCard__deleteButton"})))),ElementGrid=({elements:elements,filterText:filterText,onClick:onClick,onEdit:onEdit,onDelete:onDelete})=>(filterText=filterText.toLowerCase(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGrid,{gutterSize:"l",columns:4},Object(external_kbnSharedDeps_Lodash_.map)(elements,(element,index)=>{const{name:name,displayName:displayName="",help:help="",image:image}=element;return!filterText.length||name.toLowerCase().includes(filterText)||displayName.toLowerCase().includes(filterText)||help.toLowerCase().includes(filterText)?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{key:index,className:"canvasElementCard__wrapper"},external_kbnSharedDeps_React_default.a.createElement(ElementCard,{title:displayName||name,description:help,image:image,onClick:()=>onClick(element)}),external_kbnSharedDeps_React_default.a.createElement(ElementControls,{onEdit:()=>onEdit(element),onDelete:()=>onDelete(element)})):null})));ElementGrid.defaultProps={filterText:""};const{SavedElementsModal:saved_elements_modal_component_strings}=i18n.e,saved_elements_modal_SavedElementsModal=Object(Recompose.compose)(public_services.i,Object(Recompose.withState)("search","setSearch",""),Object(Recompose.withState)("customElements","setCustomElements",[]),Object(lib.connect)(state=>({pageId:getSelectedPage(state)}),dispatch=>({selectToplevelNodes:nodes=>dispatch(transient_selectToplevelNodes(nodes.filter(e=>!e.position.parent).map(e=>e.id))),insertNodes:(selectedNodes,pageId)=>dispatch(elements_insertNodes(selectedNodes,pageId))}),(stateProps,dispatchProps,ownProps)=>{const{pageId:pageId}=stateProps,{onClose:onClose,search:search,setCustomElements:setCustomElements}=ownProps,findCustomElements=async()=>{const{customElements:customElements}=await(async searchTerm=>{const validSearchTerm="string"==typeof searchTerm&&searchTerm.length>0;return fetch.b.get(`${custom_element_service_getApiPath()}/find?name=${validSearchTerm?searchTerm:""}&perPage=10000`).then(({data:customElements})=>customElements)})(search);setCustomElements(customElements)};return{...ownProps,addCustomElement:customElement=>{const{selectedNodes:selectedNodes=[]}=JSON.parse(customElement.content)||{},clonedNodes=selectedNodes&&cloneSubgraphs(selectedNodes);clonedNodes&&(dispatchProps.insertNodes(clonedNodes,pageId),dispatchProps.selectToplevelNodes(clonedNodes)),onClose(),trackCanvasUiMetric(external_kbnSharedDeps_KbnAnalytics_.METRIC_TYPE.LOADED,"elements-custom-added")},findCustomElements:async text=>{try{await findCustomElements()}catch(err){ownProps.services.notify.error(err,{title:"Couldn't find custom elements"})}},removeCustomElement:async id=>{try{await(id=>fetch.b.delete(`${custom_element_service_getApiPath()}/${id}`))(id),await findCustomElements()}catch(err){ownProps.services.notify.error(err,{title:"Couldn't delete custom elements"})}},updateCustomElement:async(id,name,description,image)=>{try{await((id,element)=>fetch.b.put(`${custom_element_service_getApiPath()}/${id}`,element))(id,{name:Object(external_kbnSharedDeps_Lodash_.camelCase)(name),displayName:name,image:image,help:description}),await findCustomElements()}catch(err){ownProps.services.notify.error(err,{title:"Couldn't update custom elements"})}}}}))(({search:search,setSearch:setSearch,customElements:customElements,addCustomElement:addCustomElement,findCustomElements:findCustomElements,onClose:onClose,removeCustomElement:removeCustomElement,updateCustomElement:updateCustomElement})=>{const hasLoadedElements=Object(external_kbnSharedDeps_React_.useRef)(!1),[elementToDelete,setElementToDelete]=Object(external_kbnSharedDeps_React_.useState)(null),[elementToEdit,setElementToEdit]=Object(external_kbnSharedDeps_React_.useState)(null);Object(external_kbnSharedDeps_React_.useEffect)(()=>{hasLoadedElements.current||(hasLoadedElements.current=!0,findCustomElements())},[findCustomElements,hasLoadedElements]);const showEditModal=element=>setElementToEdit(element),hideEditModal=()=>setElementToEdit(null),handleEdit=async(name,description,image)=>{elementToEdit&&updateCustomElement(elementToEdit.id,name,description,image),hideEditModal()},showDeleteModal=element=>setElementToDelete(element),hideDeleteModal=()=>setElementToDelete(null),handleDelete=async()=>{elementToDelete&&removeCustomElement(elementToDelete.id),hideDeleteModal()};let customElementContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"vector",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,saved_elements_modal_component_strings.getAddNewElementTitle()),body:external_kbnSharedDeps_React_default.a.createElement("p",null,saved_elements_modal_component_strings.getAddNewElementDescription()),titleSize:"s"});var elements;return customElements.length&&(customElementContent=external_kbnSharedDeps_React_default.a.createElement(ElementGrid,{elements:(elements=customElements,Object(external_kbnSharedDeps_Lodash_.sortBy)(elements,"displayName")),filterText:search,onClick:addCustomElement,onEdit:showEditModal,onDelete:showDeleteModal})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModal,{onClose:onClose,className:"canvasModal--fixedSize",maxWidth:"1000px",initialFocus:".canvasElements__filter input"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeader,{className:"canvasAssetManager__modalHeader"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeaderTitle,{className:"canvasAssetManager__modalHeaderTitle"},saved_elements_modal_component_strings.getModalTitle())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalBody,{style:{paddingRight:"1px"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldSearch,{fullWidth:!0,value:search,placeholder:saved_elements_modal_component_strings.getFindElementPlaceholder(),onChange:e=>setSearch(e.target.value)}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),customElementContent),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalFooter,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{size:"s",onClick:onClose,"data-test-subj":"saved-elements-modal-close-button"},saved_elements_modal_component_strings.getSavedElementsModalCloseButtonLabel()))),elementToDelete?external_kbnSharedDeps_React_default.a.createElement(ConfirmModal,{isOpen:!0,title:saved_elements_modal_component_strings.getDeleteElementTitle(elementToDelete.displayName),message:saved_elements_modal_component_strings.getDeleteElementDescription(),confirmButtonText:saved_elements_modal_component_strings.getDeleteButtonLabel(),cancelButtonText:saved_elements_modal_component_strings.getCancelButtonLabel(),onConfirm:handleDelete,onCancel:hideDeleteModal}):null,elementToEdit?external_kbnSharedDeps_React_default.a.createElement(custom_element_modal_CustomElementModal,{title:saved_elements_modal_component_strings.getEditElementTitle(),name:elementToEdit.displayName,description:elementToEdit.help,image:elementToEdit.image,onSave:handleEdit,onCancel:hideEditModal}):null)}),{WorkpadHeaderElementMenu:element_menu_component_strings}=components.a,elementTypeMeta={chart:{name:element_menu_component_strings.getChartMenuItemLabel(),icon:"visArea"},filter:{name:element_menu_component_strings.getFilterMenuItemLabel(),icon:"filter"},image:{name:element_menu_component_strings.getImageMenuItemLabel(),icon:"image"},other:{name:element_menu_component_strings.getOtherMenuItemLabel(),icon:"empty"},progress:{name:element_menu_component_strings.getProgressMenuItemLabel(),icon:"visGoal"},shape:{name:element_menu_component_strings.getShapeMenuItemLabel(),icon:"node"},text:{name:element_menu_component_strings.getTextMenuItemLabel(),icon:"visText"}},getElementType=element=>element&&element.type&&Object.keys(elementTypeMeta).includes(element.type)?element.type:"other";var savedObjects_public_=__webpack_require__(170);const{AddEmbeddableFlyout:flyout_component_strings}=i18n.e,AddEmbeddableFlyout=({onSelect:onSelect,availableEmbeddables:availableEmbeddables,onClose:onClose})=>{const services=Object(public_services.h)(),{embeddables:embeddables,platform:platform}=services,{getEmbeddableFactories:getEmbeddableFactories}=embeddables,{getSavedObjects:getSavedObjects,getUISettings:getUISettings}=platform,embeddableFactories=getEmbeddableFactories(),availableSavedObjects=Array.from(embeddableFactories).filter(factory=>availableEmbeddables.includes(factory.type)).map(factory=>factory.savedObjectMetaData).filter((function(maybeSavedObjectMetaData){return void 0!==maybeSavedObjectMetaData}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyout,{ownFocus:!0,onClose:onClose,"data-test-subj":"dashboardAddPanel"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutHeader,{hasBorder:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",null,flyout_component_strings.getTitleText()))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutBody,null,external_kbnSharedDeps_React_default.a.createElement(savedObjects_public_.SavedObjectFinderUi,{onChoose:(id,savedObjectType,name)=>{const embeddableFactories=getEmbeddableFactories(),found=Array.from(embeddableFactories).find(embeddableFactory=>Boolean(embeddableFactory.savedObjectMetaData&&embeddableFactory.savedObjectMetaData.type===savedObjectType)),foundEmbeddableType=found?found.type:"unknown";onSelect(id,foundEmbeddableType)},savedObjectMetaData:availableSavedObjects,showFilter:!0,noItemsMessage:flyout_component_strings.getNoItemsText(),savedObjects:getSavedObjects(),uiSettings:getUISettings()})))};var embeddable=__webpack_require__(28);function flyout_extends(){return(flyout_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const allowedEmbeddables={[embeddable.b.map]:id=>`savedMap id="${id}" | render`,[embeddable.b.lens]:id=>`savedLens id="${id}" | render`,[embeddable.b.visualization]:id=>`savedVisualization id="${id}" | render`};class flyout_EmbeddableFlyoutPortal extends external_kbnSharedDeps_React_default.a.Component{constructor(props){var obj,key,value;super(props),value=void 0,(key="el")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this.el=document.createElement("div")}componentDidMount(){const body=document.querySelector("body");body&&this.el&&body.appendChild(this.el)}componentWillUnmount(){const body=document.querySelector("body");body&&this.el&&body.removeChild(this.el)}render(){if(this.el)return external_kbnSharedDeps_ReactDom_default.a.createPortal(external_kbnSharedDeps_React_default.a.createElement(AddEmbeddableFlyout,flyout_extends({},this.props,{availableEmbeddables:Object.keys(allowedEmbeddables)})),this.el)}}const AddEmbeddablePanel=Object(Recompose.compose)(Object(lib.connect)(state=>({pageId:getSelectedPage(state)}),dispatch=>({addEmbeddable:(pageId,partialElement)=>dispatch(elements_addElement(pageId,partialElement))}),(stateProps,dispatchProps,ownProps)=>{const{pageId:pageId,...remainingStateProps}=stateProps,{addEmbeddable:addEmbeddable}=dispatchProps;return{...remainingStateProps,...ownProps,onSelect:(id,type)=>{const partialElement={expression:`markdown "Could not find embeddable for type ${type}" | render`};allowedEmbeddables[type]&&(partialElement.expression=allowedEmbeddables[type](id)),addEmbeddable(pageId,partialElement),ownProps.onClose()}}}))(flyout_EmbeddableFlyoutPortal),element_menu_ElementMenu=Object(Recompose.compose)(Object(lib.connect)(state=>({pageId:getSelectedPage(state)}),dispatch=>({addElement:pageId=>element=>dispatch(elements_addElement(pageId,element))}),(stateProps,dispatchProps)=>({...stateProps,...dispatchProps,addElement:dispatchProps.addElement(stateProps.pageId),renderEmbedPanel:onClose=>external_kbnSharedDeps_React_default.a.createElement(AddEmbeddablePanel,{onClose:onClose})})),Object(Recompose.withProps)(()=>({elements:elementsRegistry.toJS()})))(({elements:elements,addElement:addElement,renderEmbedPanel:renderEmbedPanel})=>{const[isAssetModalVisible,setAssetModalVisible]=Object(external_kbnSharedDeps_React_.useState)(!1),[isEmbedPanelVisible,setEmbedPanelVisible]=Object(external_kbnSharedDeps_React_.useState)(!1),[isSavedElementsModalVisible,setSavedElementsModalVisible]=Object(external_kbnSharedDeps_React_.useState)(!1),{chart:chartElements,filter:filterElements,image:imageElements,other:otherElements,progress:progressElements,shape:shapeElements,text:textElements}=(elements=>{elements=Object(external_kbnSharedDeps_Lodash_.sortBy)(elements,"displayName");const categories={other:[]};return elements.forEach(element=>{const type=getElementType(element);categories[type]?categories[type].push(element):categories[type]=[element]}),categories})(Object.values(elements)),getPanelTree=closePopover=>{const elementToMenuItem=element=>({name:element.displayName||element.name,icon:element.icon,onClick:()=>{addElement(element),closePopover()}}),elementListToMenuItems=elementList=>{const type=getElementType(elementList[0]),{name:name,icon:icon}=elementTypeMeta[type]||elementTypeMeta.other;return elementList.length>1?{name:name,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:icon,size:"m"}),panel:{id:Object(get_id.a)("element-type"),title:name,items:elementList.map(elementToMenuItem)}}:elementToMenuItem(elementList[0])};return{id:0,items:[elementListToMenuItems(textElements),elementListToMenuItems(shapeElements),elementListToMenuItems(chartElements),elementListToMenuItems(imageElements),elementListToMenuItems(filterElements),elementListToMenuItems(progressElements),elementListToMenuItems(otherElements),{name:element_menu_component_strings.getMyElementsMenuItemLabel(),className:common_lib.CONTEXT_MENU_TOP_BORDER_CLASSNAME,"data-test-subj":"saved-elements-menu-option",icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"empty",size:"m"}),onClick:()=>{setSavedElementsModalVisible(!0),closePopover()}},{name:element_menu_component_strings.getAssetsMenuItemLabel(),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"empty",size:"m"}),onClick:()=>{setAssetModalVisible(!0),closePopover()}},{name:element_menu_component_strings.getEmbedObjectMenuItemLabel(),className:common_lib.CONTEXT_MENU_TOP_BORDER_CLASSNAME,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"logoKibana",size:"m"}),onClick:()=>{setEmbedPanelVisible(!0),closePopover()}}]}};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(popover.a,{button:togglePopover=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{fill:!0,iconType:"plusInCircle",size:"s","aria-label":element_menu_component_strings.getElementMenuLabel(),onClick:togglePopover,className:"canvasElementMenu__popoverButton","data-test-subj":"add-element-button"},element_menu_component_strings.getElementMenuButtonLabel()),panelPaddingSize:"none",anchorPosition:"downLeft"},({closePopover:closePopover})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiContextMenu,{initialPanelId:0,panels:flattenPanelTree(getPanelTree(closePopover))})),isAssetModalVisible?external_kbnSharedDeps_React_default.a.createElement(asset_manager_AssetManager,{onClose:()=>setAssetModalVisible(!1)}):null,isEmbedPanelVisible?renderEmbedPanel(()=>setEmbedPanelVisible(!1)):null,isSavedElementsModalVisible?external_kbnSharedDeps_React_default.a.createElement(saved_elements_modal_SavedElementsModal,{onClose:()=>setSavedElementsModalVisible(!1)}):null)});var reporting_public_=__webpack_require__(171);const{WorkpadHeaderShareMenu:pdf_panel_strings}=components.a,PDFPanel=({getPdfURL:getPdfURL,onExport:onExport,onCopy:onCopy})=>{const[reportLayout,setReportLayout]=Object(external_kbnSharedDeps_React_.useState)("preserve_layout");return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasShareMenu__panelContent"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,pdf_panel_strings.getPDFPanelGenerateDescription())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xxs"},external_kbnSharedDeps_React_default.a.createElement("h6",null,pdf_panel_strings.getPDFPanelOptionsLabel())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{helpText:pdf_panel_strings.getPDFFullPageLayoutHelpText()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:pdf_panel_strings.getPDFFullPageLayoutLabel(),checked:"canvas"===reportLayout,onChange:()=>setReportLayout("canvas"===reportLayout?"preserve_layout":"canvas"),"data-test-subj":"reportModeToggle"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{fill:!0,onClick:()=>onExport(reportLayout),size:"s",style:{width:"100%"},"data-test-subj":"generateReportButton"},pdf_panel_strings.getPDFPanelGenerateButtonLabel()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHorizontalRule,{margin:"s",style:{width:"auto",marginLeft:"-16px",marginRight:"-16px"}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiAccordion,{id:"advanced-options",buttonContent:pdf_panel_strings.getPDFPanelAdvancedOptionsLabel(),paddingSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,pdf_panel_strings.getPDFPanelCopyDescription())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(components_clipboard_Clipboard,{content:getPdfURL(reportLayout),onCopy:onCopy},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{iconType:"copy",size:"s",style:{width:"100%"},"aria-label":pdf_panel_strings.getPDFPanelCopyAriaLabel()},pdf_panel_strings.getPDFPanelCopyButtonLabel()))))};var i18n_constants=__webpack_require__(1);const{ShareWebsiteWorkpadStep:workpad_step_strings}=components.a,WorkpadStep=({onDownload:onDownload})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,workpad_step_strings.getStepDescription()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{onClick:()=>{onDownload("share")},size:"s"},workpad_step_strings.getDownloadLabel())),{ShareWebsiteRuntimeStep:runtime_step_strings}=components.a,RuntimeStep=({onDownload:onDownload})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,runtime_step_strings.getStepDescription()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{onClick:()=>{onDownload("shareRuntime")},size:"s"},runtime_step_strings.getDownloadLabel())),{ShareWebsiteSnippetsStep:snippets_step_strings}=components.a,HTML=`\x3c!-- ${snippets_step_strings.getIncludeRuntimeLabel()} --\x3e\n<script src="kbn_canvas.js"><\/script>\n\n\x3c!-- ${snippets_step_strings.getPlaceholderLabel()} --\x3e\n<div kbn-canvas-shareable="canvas" kbn-canvas-url="workpad.json" />\n\n\x3c!-- ${snippets_step_strings.getCallRuntimeLabel()} --\x3e\n<script type="text/javascript">\n  KbnCanvas.share();\n<\/script>`,SnippetsStep=({onCopy:onCopy})=>external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,snippets_step_strings.getSnippetsStepDescription())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(components_clipboard_Clipboard,{content:HTML,onCopy:onCopy},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCodeBlock,{className:"canvasShareMenu__reportingConfig",paddingSize:"s",fontSize:"s",language:"html"},HTML)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("h4",null,snippets_step_strings.getParametersTitle()),external_kbnSharedDeps_React_default.a.createElement("p",null,snippets_step_strings.getParametersDescription())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHorizontalRule,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,'kbn-canvas-shareable="canvas"')," (",snippets_step_strings.getRequiredLabel(),")"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,snippets_step_strings.getShareableParameterDescription()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,"kbn-canvas-url")," (",snippets_step_strings.getRequiredLabel(),")"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,snippets_step_strings.getUrlParameterDescription()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,"kbn-canvas-height")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,snippets_step_strings.getHeightParameterDescription()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,"kbn-canvas-width")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,snippets_step_strings.getWidthParameterDescription()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,"kbn-canvas-page")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,snippets_step_strings.getPageParameterDescription()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,"kbn-canvas-autoplay")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,snippets_step_strings.getAutoplayParameterDescription()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,"kbn-canvas-interval")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,snippets_step_strings.getIntervalParameterDescription()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,"kbn-canvas-toolbar")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,snippets_step_strings.getToolbarParameterDescription()))),{ShareWebsiteFlyout:flyout_flyout_component_strings}=components.a,steps=(onDownload,onCopy)=>[{title:flyout_flyout_component_strings.getWorkpadStepTitle(),children:external_kbnSharedDeps_React_default.a.createElement(WorkpadStep,{onDownload:onDownload})},{title:flyout_flyout_component_strings.getRuntimeStepTitle(),children:external_kbnSharedDeps_React_default.a.createElement(RuntimeStep,{onDownload:onDownload})},{title:flyout_flyout_component_strings.getSnippentsStepTitle(),children:external_kbnSharedDeps_React_default.a.createElement(SnippetsStep,{onCopy:onCopy})}];var debug=__webpack_require__(87),renderers_error=__webpack_require__(88),renderers_image=__webpack_require__(89),repeat_image=__webpack_require__(94),reveal_image=__webpack_require__(95),markdown=__webpack_require__(90),metric=__webpack_require__(103),pie=__webpack_require__(91),plot=__webpack_require__(92),renderers_progress=__webpack_require__(93),renderers_shape=__webpack_require__(96),table=__webpack_require__(97),renderers_text=__webpack_require__(98);const renderFunctionNames=[debug.a,renderers_error.a,renderers_image.a,repeat_image.a,reveal_image.a,markdown.a,metric.a,pie.a,plot.a,renderers_progress.a,renderers_shape.a,table.a,renderers_text.a].map(fn=>fn.name),{WorkpadHeaderShareMenu:flyout_strings}=components.a,getUnsupportedRenderers=state=>{const renderers=[];return function(state){const workpad=getRenderedWorkpad(state),{pages:pages}=workpad,expressions=[];return pages.forEach(page=>page.elements.forEach(element=>{if(element&&element.expressionRenderable){const{value:value}=element.expressionRenderable;if(value){const{as:as}=value;expressions.includes(as)||expressions.push(as)}}})),expressions}(state).forEach(expression=>{renderFunctionNames.includes(expression)||renderers.push(expression)}),renderers},flyout_ShareWebsiteFlyout=Object(Recompose.compose)(Object(lib.connect)(state=>({renderedWorkpad:getRenderedWorkpad(state),unsupportedRenderers:getUnsupportedRenderers(state),workpad:getWorkpad(state)})),public_.withKibana,Object(Recompose.withProps)(({unsupportedRenderers:unsupportedRenderers,renderedWorkpad:renderedWorkpad,onClose:onClose,workpad:workpad,kibana:kibana})=>({unsupportedRenderers:unsupportedRenderers,onClose:onClose,onCopy:()=>{kibana.services.canvas.notify.info(flyout_strings.getCopyShareConfigMessage())},onDownload:type=>{switch(type){case"share":return void(async renderedWorkpad=>{try{const jsonBlob=new Blob([JSON.stringify(renderedWorkpad)],{type:"application/json"});FileSaver_default.a.saveAs(jsonBlob,`canvas-embed-workpad-${renderedWorkpad.name}-${renderedWorkpad.id}.json`)}catch(err){public_services.c.getService().error(err,{title:download_workpad_strings.getDownloadRenderedWorkpadFailureErrorMessage()})}})(renderedWorkpad);case"shareRuntime":return void(async basePath=>{try{const path=`${basePath}${constants.d}`;window.open(path)}catch(err){public_services.c.getService().error(err,{title:download_workpad_strings.getDownloadRuntimeFailureErrorMessage()})}})(kibana.services.http.basePath.get());case"shareZip":const basePath=kibana.services.http.basePath.get();return void fetch.a.post(`${basePath}${constants.e}`,JSON.stringify(renderedWorkpad)).then(blob=>(async data=>{try{const zip=new Blob([data],{type:"octet/stream"});FileSaver_default.a.saveAs(zip,"canvas-workpad-embed.zip")}catch(err){public_services.c.getService().error(err,{title:download_workpad_strings.getDownloadZippedRuntimeFailureErrorMessage()})}})(blob.data)).catch(err=>{kibana.services.canvas.notify.error(err,{title:flyout_strings.getShareableZipErrorTitle(workpad.name)})});default:throw new Error(flyout_strings.getUnknownExportErrorMessage(type))}}})))(({onCopy:onCopy,onDownload:onDownload,onClose:onClose,unsupportedRenderers:unsupportedRenderers})=>{const link=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{style:{textDecoration:"underline"},onClick:()=>{onDownload("shareZip")}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.canvas.shareWebsiteFlyout.zipDownloadLinkLabel",defaultMessage:"download an example {ZIP} file",values:{ZIP:i18n_constants.R}})),title=external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.canvas.shareWebsiteFlyout.flyoutCalloutDescription",defaultMessage:"To try sharing, you can {link} containing this workpad, the {CANVAS} Shareable Workpad runtime, and a sample {HTML} file.",values:{CANVAS:i18n_constants.e,HTML:i18n_constants.p,link:link}}));let warningText=null;if(unsupportedRenderers&&unsupportedRenderers.length>0){const warning=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s",key:"text"},external_kbnSharedDeps_React_default.a.createElement("span",null,flyout_flyout_component_strings.getUnsupportedRendererWarning()),unsupportedRenderers.map((fn,index)=>[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,{key:"item-"+index},fn),index<unsupportedRenderers.length-1?", ":""])),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xs",key:"spacer"})];warningText=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:warning,color:"warning",size:"s",iconType:"alert",key:"callout"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{key:"spacer"})]}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyout,{onClose:()=>onClose("share"),maxWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutHeader,{hasBorder:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement("h2",{id:"flyoutTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},flyout_flyout_component_strings.getTitle())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBetaBadge,{label:"Beta",color:"accent"}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,flyout_flyout_component_strings.getStepsDescription())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{size:"s",title:title,iconType:"iInCircle"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),warningText,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSteps,{steps:steps(onDownload,onCopy)})))}),{WorkpadHeaderShareMenu:share_menu_component_strings}=components.a;var external_kbnSharedDeps_RisonNode_=__webpack_require__(172),external_kbnSharedDeps_RisonNode_default=__webpack_require__.n(external_kbnSharedDeps_RisonNode_),external_kbnSharedDeps_MomentTimezone_=__webpack_require__(168),external_kbnSharedDeps_MomentTimezone_default=__webpack_require__.n(external_kbnSharedDeps_MomentTimezone_),kibanaUtils_public_=__webpack_require__(62);function getPdfUrlParts({id:id,name:title,width:width,height:height},layoutType,{pageCount:pageCount},basePath){const reportingEntry=basePath.prepend("/api/reporting/generate"),canvasEntry=basePath.get().replace(basePath.serverBasePath,"")+"/app/canvas#",workpadUrls=[];for(let i=1;i<=pageCount;i++)workpadUrls.push(external_kbnSharedDeps_RisonNode_default.a.encode(`${canvasEntry}/export/workpad/pdf/${id}/page/${i}`));const jobParams={browserTimezone:external_kbnSharedDeps_MomentTimezone_default.a.tz.guess(),layout:{dimensions:{width:width,height:height},id:layoutType},objectType:"canvas workpad",relativeUrls:workpadUrls,title:title};return{createPdfUri:reportingEntry+"/printablePdf",createPdfPayload:{jobParams:external_kbnSharedDeps_RisonNode_default.a.encode(jobParams)}}}const{WorkpadHeaderShareMenu:share_menu_strings}=i18n.e,share_menu_ShareMenu=Object(Recompose.compose)(Object(lib.connect)(state=>({workpad:getWorkpad(state),pageCount:getPages(state).length})),public_services.i,Object(Recompose.withProps)(({workpad:workpad,pageCount:pageCount,services:services})=>({getExportUrl:(type,layout)=>{if("pdf"===type){return(path=>{const{location:location}=Object(get_window.a)();if(!location)return path;const{protocol:protocol,hostname:hostname,port:port}=location;return`${protocol}//${hostname}:${port}${path}`})(function(...args){const urlParts=getPdfUrlParts(...args);return`${urlParts.createPdfUri}?${key="jobParams",val=urlParts.createPdfPayload.jobParams,kibanaUtils_public_.url.encodeUriQuery(key,!0)+(!0===val?"":"="+kibanaUtils_public_.url.encodeUriQuery(val,!0))}`;var key,val}(workpad,layout,{pageCount:pageCount},services.platform.getBasePathInterface()))}throw new Error(share_menu_strings.getUnknownExportErrorMessage(type))},onCopy:type=>{switch(type){case"pdf":services.notify.info(share_menu_strings.getCopyPDFMessage());break;case"reportingConfig":services.notify.info(share_menu_strings.getCopyReportingConfigMessage());break;default:throw new Error(share_menu_strings.getUnknownExportErrorMessage(type))}},onExport:(type,layout)=>{switch(type){case"pdf":return function(...args){const{createPdfUri:createPdfUri,createPdfPayload:createPdfPayload}=getPdfUrlParts(...args);return fetch.b.post(createPdfUri,createPdfPayload)}(workpad,layout||"preserve_layout",{pageCount:pageCount},services.platform.getBasePathInterface()).then(({data:data})=>{services.notify.info(share_menu_strings.getExportPDFMessage(),{title:share_menu_strings.getExportPDFTitle(workpad.name)}),reporting_public_.jobCompletionNotifications.add(data.job.id)}).catch(err=>{services.notify.error(err,{title:share_menu_strings.getExportPDFErrorTitle(workpad.name),"data-test-subj":"queueReportError"})});case"json":return void downloadWorkpad(workpad.id);default:throw new Error(share_menu_strings.getUnknownExportErrorMessage(type))}}})))(({onCopy:onCopy,onExport:onExport,getExportUrl:getExportUrl})=>{const[showFlyout,setShowFlyout]=Object(external_kbnSharedDeps_React_.useState)(!1),getPDFPanel=closePopover=>external_kbnSharedDeps_React_default.a.createElement(PDFPanel,{getPdfURL:layoutType=>getExportUrl("pdf",layoutType),onExport:layoutType=>{onExport("pdf",layoutType),closePopover()},onCopy:()=>{onCopy("pdf"),closePopover()}}),getPanelTree=closePopover=>({id:0,items:[{name:share_menu_component_strings.getShareDownloadJSONTitle(),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"exportAction",size:"m"}),onClick:()=>{onExport("json"),closePopover()}},{name:share_menu_component_strings.getShareDownloadPDFTitle(),icon:"document",panel:{id:1,title:share_menu_component_strings.getShareDownloadPDFTitle(),content:getPDFPanel(closePopover)},"data-test-subj":"sharePanel-PDFReports"},{name:share_menu_component_strings.getShareWebsiteTitle(),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"globe",size:"m"}),onClick:()=>{setShowFlyout(!0),closePopover()}}]}),flyout=showFlyout?external_kbnSharedDeps_React_default.a.createElement(flyout_ShareWebsiteFlyout,{onClose:()=>{setShowFlyout(!1)}}):null;return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(popover.a,{button:togglePopover=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"xs","aria-label":share_menu_component_strings.getShareWorkpadMessage(),onClick:togglePopover,"data-test-subj":"shareTopNavButton"},share_menu_component_strings.getShareMenuButtonLabel()),panelPaddingSize:"none",anchorPosition:"downLeft"},({closePopover:closePopover})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiContextMenu,{initialPanelId:0,panels:flattenPanelTree(getPanelTree(closePopover))})),flyout)}),timeDuration=(time,format)=>{const seconds=time/1e3,minutes=seconds/60,hours=minutes/60,days=hours/24;return"days"===format||days>=1?{length:days,format:"days"}:"hours"===format||hours>=1?{length:hours,format:"hours"}:"minutes"===format||minutes>=1?{length:seconds/60,format:"minutes"}:{length:seconds,format:"seconds"}},{WorkpadHeaderCustomInterval:custom_interval_strings}=i18n.e,CustomInterval=({gutterSize:gutterSize,buttonSize:buttonSize,onSubmit:onSubmit,defaultValue:defaultValue})=>{const[customInterval,setCustomInterval]=Object(external_kbnSharedDeps_React_.useState)(defaultValue),refreshInterval=getTimeInterval(customInterval),isInvalid=Boolean(customInterval.length&&!refreshInterval);return external_kbnSharedDeps_React_default.a.createElement("form",{onSubmit:ev=>{ev.preventDefault(),!isInvalid&&refreshInterval&&onSubmit(refreshInterval)}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:gutterSize},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:custom_interval_strings.getFormLabel(),helpText:custom_interval_strings.getFormDescription(),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{isInvalid:isInvalid,value:customInterval,onChange:ev=>setCustomInterval(ev.target.value),compressed:!0}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{hasEmptyLabelSpace:!0,display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{disabled:isInvalid,size:buttonSize,type:"submit",style:{minWidth:"auto"}},custom_interval_strings.getButtonLabel())))))};function auto_refresh_controls_extends(){return(auto_refresh_controls_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}CustomInterval.defaultProps={buttonSize:"s",gutterSize:"s",defaultValue:""};const{WorkpadHeaderAutoRefreshControls:auto_refresh_controls_strings}=i18n.e,{time:timeStrings}=i18n.r,{getSecondsText:getSecondsText,getMinutesText:getMinutesText,getHoursText:getHoursText}=timeStrings,ListGroup=({children:children,...rest})=>external_kbnSharedDeps_React_default.a.createElement("ul",auto_refresh_controls_extends({style:{listStyle:"none",margin:0}},rest),[children]),generateId=Object(external_kbnSharedDeps_ElasticEui_.htmlIdGenerator)(),AutoRefreshControls=({refreshInterval:refreshInterval,setRefresh:setRefresh,disableInterval:disableInterval})=>{const RefreshItem=({duration:duration,label:label,descriptionId:descriptionId})=>external_kbnSharedDeps_React_default.a.createElement("li",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:()=>setRefresh(duration),"aria-describedby":descriptionId},label)),interval=timeDuration(refreshInterval),intervalTitleId=generateId();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{direction:"column",justifyContent:"spaceBetween",className:"canvasViewMenu__kioskSettings"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",gutterSize:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,auto_refresh_controls_strings.getRefreshListTitle()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,refreshInterval>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,timeStrings.getCycleTimeText(interval.length,interval.format)):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,auto_refresh_controls_strings.getRefreshListDurationManualText())))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"xs"},refreshInterval>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"bottom",content:auto_refresh_controls_strings.getDisableTooltip()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"cross",onClick:disableInterval,"aria-label":auto_refresh_controls_strings.getDisableTooltip()}))):null))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHorizontalRule,{margin:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xxxs",id:intervalTitleId},external_kbnSharedDeps_React_default.a.createElement("p",null,auto_refresh_controls_strings.getIntervalFormLabelText())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement(ListGroup,{"aria-labelledby":intervalTitleId,className:"canvasControlSettings__list"},external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:3e4,label:getSecondsText(30),descriptionId:intervalTitleId}),external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:6e4,label:getMinutesText(1),descriptionId:intervalTitleId}),external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:3e5,label:getMinutesText(5),descriptionId:intervalTitleId}),external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:18e5,label:getMinutesText(30),descriptionId:intervalTitleId}),external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:36e5,label:getHoursText(1),descriptionId:intervalTitleId}),external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:432e5,label:getHoursText(12),descriptionId:intervalTitleId}),external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:864e5,label:getHoursText(24),descriptionId:intervalTitleId})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(CustomInterval,{onSubmit:value=>setRefresh(value)})))};function kiosk_controls_extends(){return(kiosk_controls_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const{WorkpadHeaderKioskControls:kiosk_controls_strings}=i18n.e,{time:kiosk_controls_timeStrings}=i18n.r,{getSecondsText:kiosk_controls_getSecondsText,getMinutesText:kiosk_controls_getMinutesText}=kiosk_controls_timeStrings,kiosk_controls_ListGroup=({children:children,...rest})=>external_kbnSharedDeps_React_default.a.createElement("ul",kiosk_controls_extends({style:{listStyle:"none",margin:0}},rest),[children]),kiosk_controls_generateId=Object(external_kbnSharedDeps_ElasticEui_.htmlIdGenerator)(),KioskControls=({autoplayInterval:autoplayInterval,onSetInterval:onSetInterval})=>{const RefreshItem=({duration:duration,label:label,descriptionId:descriptionId})=>external_kbnSharedDeps_React_default.a.createElement("li",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:()=>onSetInterval(duration),"aria-describedby":descriptionId},label)),interval=timeDuration(autoplayInterval),intervalTitleId=kiosk_controls_generateId();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{direction:"column",justifyContent:"spaceBetween",className:"canvasViewMenu__kioskSettings"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,kiosk_controls_strings.getTitle()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,kiosk_controls_timeStrings.getCycleTimeText(interval.length,interval.format))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHorizontalRule,{margin:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xxxs",id:intervalTitleId},external_kbnSharedDeps_React_default.a.createElement("p",null,kiosk_controls_strings.getCycleFormLabel())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement(kiosk_controls_ListGroup,{"aria-labelledby":intervalTitleId,className:"canvasControlSettings__list"},external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:5e3,label:kiosk_controls_getSecondsText(5),descriptionId:intervalTitleId}),external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:1e4,label:kiosk_controls_getSecondsText(10),descriptionId:intervalTitleId}),external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:3e4,label:kiosk_controls_getSecondsText(30),descriptionId:intervalTitleId}),external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:6e4,label:kiosk_controls_getMinutesText(1),descriptionId:intervalTitleId}),external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:3e5,label:kiosk_controls_getMinutesText(5),descriptionId:intervalTitleId}),external_kbnSharedDeps_React_default.a.createElement(RefreshItem,{duration:9e5,label:kiosk_controls_getMinutesText(15),descriptionId:intervalTitleId})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(CustomInterval,{onSubmit:value=>onSetInterval(value)})))},{WorkpadHeaderViewMenu:view_menu_component_strings}=components.a,QUICK_ZOOM_LEVELS=[.5,1,2],view_menu_ViewMenu=Object(Recompose.compose)(Object(lib.connect)(state=>{const{enabled:enabled,interval:interval}=getAutoplay(state);return{zoomScale:getZoomScale(state),boundingBox:getWorkpadBoundingBox(state),workpadWidth:getWorkpadWidth(state),workpadHeight:getWorkpadHeight(state),isWriteable:workpad_isWriteable(state)&&app_canUserWrite(state),refreshInterval:getRefreshInterval(state),autoplayEnabled:enabled,autoplayInterval:interval}},dispatch=>({setZoomScale:scale=>dispatch(transient_setZoomScale(scale)),setWriteable:isWorkpadWriteable=>dispatch(setWriteable(isWorkpadWriteable)),setFullscreen:value=>{dispatch(setFullscreen(value)),value&&dispatch(transient_selectToplevelNodes([]))},doRefresh:()=>dispatch(fetchAllRenderables()),setRefreshInterval:interval=>dispatch(workpad_setRefreshInterval(interval)),enableAutoplay:autoplay=>dispatch(workpad_enableAutoplay(!!autoplay)),setAutoplayInterval:interval=>dispatch(workpad_setAutoplayInterval(interval))}),(stateProps,dispatchProps,ownProps)=>{const{boundingBox:boundingBox,workpadWidth:workpadWidth,workpadHeight:workpadHeight,...remainingStateProps}=stateProps;return{...remainingStateProps,...dispatchProps,...ownProps,toggleWriteable:()=>dispatchProps.setWriteable(!stateProps.isWriteable),enterFullscreen:()=>dispatchProps.setFullscreen(!0),fitToWindow:()=>dispatchProps.setZoomScale(((boundingBox,workpadWidth,workpadHeight)=>{const canvasLayoutContent=document.querySelector("#"+common_lib.CANVAS_LAYOUT_STAGE_CONTENT_SELECTOR),layoutWidth=canvasLayoutContent.clientWidth,layoutHeight=canvasLayoutContent.clientHeight,offsetLeft=boundingBox.left,offsetTop=boundingBox.top,offsetRight=boundingBox.right-workpadWidth,offsetBottom=boundingBox.bottom-workpadHeight,xScale=layoutWidth/(workpadWidth+2*Math.max(Math.abs(offsetLeft),Math.abs(offsetRight))+common_lib.WORKPAD_CANVAS_BUFFER),yScale=layoutHeight/(workpadHeight+2*Math.max(Math.abs(offsetTop),Math.abs(offsetBottom))+common_lib.WORKPAD_CANVAS_BUFFER);return Math.min(xScale,yScale)})(boundingBox,workpadWidth,workpadHeight))}}),Object(Recompose.withHandlers)(zoomHandlerCreators))(({enterFullscreen:enterFullscreen,fitToWindow:fitToWindow,isWriteable:isWriteable,resetZoom:resetZoom,setZoomScale:setZoomScale,toggleWriteable:toggleWriteable,zoomIn:zoomIn,zoomOut:zoomOut,zoomScale:zoomScale,doRefresh:doRefresh,refreshInterval:refreshInterval,setRefreshInterval:setRefreshInterval,autoplayEnabled:autoplayEnabled,autoplayInterval:autoplayInterval,enableAutoplay:enableAutoplay,setAutoplayInterval:setAutoplayInterval})=>{const setRefresh=val=>setRefreshInterval(val),getPanelTree=closePopover=>({id:0,items:[{name:view_menu_component_strings.getRefreshMenuItemLabel(),icon:"refresh",onClick:()=>{doRefresh()}},{name:view_menu_component_strings.getRefreshSettingsMenuItemLabel(),icon:"empty",panel:{id:1,title:view_menu_component_strings.getRefreshSettingsMenuItemLabel(),content:external_kbnSharedDeps_React_default.a.createElement(AutoRefreshControls,{refreshInterval:refreshInterval,setRefresh:val=>setRefresh(val),disableInterval:()=>{setRefresh(0)}})}},{name:view_menu_component_strings.getFullscreenMenuItemLabel(),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"fullScreen",size:"m"}),className:constants.n,onClick:()=>{enterFullscreen(),closePopover()}},{name:autoplayEnabled?view_menu_component_strings.getAutoplayOffMenuItemLabel():view_menu_component_strings.getAutoplayOnMenuItemLabel(),icon:autoplayEnabled?"stop":"play",onClick:()=>{enableAutoplay(!autoplayEnabled),closePopover()}},{name:view_menu_component_strings.getAutoplaySettingsMenuItemLabel(),icon:"empty",panel:{id:2,title:view_menu_component_strings.getAutoplaySettingsMenuItemLabel(),content:external_kbnSharedDeps_React_default.a.createElement(KioskControls,{autoplayInterval:autoplayInterval,onSetInterval:setAutoplayInterval})}},{name:isWriteable?view_menu_component_strings.getHideEditModeLabel():view_menu_component_strings.getShowEditModeLabel(),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:isWriteable?"eyeClosed":"eye",size:"m"}),className:constants.n,onClick:()=>{toggleWriteable(),closePopover()}},{name:view_menu_component_strings.getZoomMenuItemLabel(),icon:"magnifyWithPlus",panel:{id:3,title:view_menu_component_strings.getZoomMenuItemLabel(),items:[{name:view_menu_component_strings.getZoomFitToWindowText(),icon:"empty",onClick:fitToWindow,disabled:zoomScale===constants.x},...QUICK_ZOOM_LEVELS.map(scale=>({name:view_menu_component_strings.getZoomPercentage(scale),icon:"empty",onClick:()=>setZoomScale(scale)})),{name:view_menu_component_strings.getZoomInText(),icon:"magnifyWithPlus",onClick:zoomIn,disabled:zoomScale===constants.x,className:"canvasContextMenu--topBorder"},{name:view_menu_component_strings.getZoomOutText(),icon:"magnifyWithMinus",onClick:zoomOut,disabled:zoomScale<=constants.y},{name:view_menu_component_strings.getZoomResetText(),icon:"empty",onClick:resetZoom,disabled:zoomScale>=constants.x,className:"canvasContextMenu--topBorder"}]}}]});return external_kbnSharedDeps_React_default.a.createElement(popover.a,{button:togglePopover=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"xs","aria-label":view_menu_component_strings.getViewMenuLabel(),onClick:togglePopover},view_menu_component_strings.getViewMenuButtonLabel()),panelPaddingSize:"none",anchorPosition:"downLeft"},({closePopover:closePopover})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiContextMenu,{initialPanelId:0,panels:flattenPanelTree(getPanelTree(closePopover)),className:"canvasViewMenu"}))}),{WorkpadHeader:workpad_header_component_strings}=i18n.e,workpad_header_WorkpadHeader=Object(lib.connect)(state=>({isWriteable:workpad_isWriteable(state)&&app_canUserWrite(state),canUserWrite:app_canUserWrite(state),selectedPage:getSelectedPage(state)}),dispatch=>({onSetWriteable:isWorkpadWriteable=>dispatch(setWriteable(isWorkpadWriteable))}))(({isWriteable:isWriteable,canUserWrite:canUserWrite,commit:commit,onSetWriteable:onSetWriteable=(()=>{})})=>{const toggleWriteable=()=>onSetWriteable(!isWriteable),fullscreenButton=({toggleFullscreen:toggleFullscreen})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"bottom",content:external_kbnSharedDeps_React_default.a.createElement("span",null,workpad_header_component_strings.getFullScreenTooltip()," ",external_kbnSharedDeps_React_default.a.createElement(tool_tip_shortcut_ToolTipShortcut,{namespace:"PRESENTATION",action:"FULLSCREEN"}))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"fullScreen","aria-label":workpad_header_component_strings.getFullScreenButtonAriaLabel(),onClick:toggleFullscreen})),getEditToggleToolTipText=()=>{if(!canUserWrite)return workpad_header_component_strings.getNoWritePermissionTooltipText();return isWriteable?workpad_header_component_strings.getHideEditControlTooltip():workpad_header_component_strings.getShowEditControlTooltip()};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"none",alignItems:"center",justifyContent:"spaceBetween",className:"canvasLayout__stageHeaderInner"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},isWriteable&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(element_menu_ElementMenu,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(view_menu_ViewMenu,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(edit_menu_EditMenu,{commit:commit})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(share_menu_ShareMenu,null)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},canUserWrite&&external_kbnSharedDeps_React_default.a.createElement(react_shortcuts_lib.Shortcuts,{name:"EDITOR",handler:action=>{"EDITING"===action&&toggleWriteable()},targetNodeSelector:"body",global:!0,isolate:!0}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"bottom",content:(({textOnly:textOnly}={textOnly:!1})=>{const content=getEditToggleToolTipText();return textOnly?content:external_kbnSharedDeps_React_default.a.createElement("span",null,content," ",external_kbnSharedDeps_React_default.a.createElement(tool_tip_shortcut_ToolTipShortcut,{namespace:"EDITOR",action:"EDITING"}))})()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:isWriteable?"eyeClosed":"eye",onClick:toggleWriteable,size:"s","aria-label":getEditToggleToolTipText(),isDisabled:!canUserWrite}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(refresh_control_RefreshControl,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(workpad_header_fullscreen_control_FullscreenControl,null,fullscreenButton)))))});function workpad_telemetry_extends(){return(workpad_telemetry_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const withUnconnectedElementsLoadedTelemetry=(Component,trackMetric=trackCanvasUiMetric)=>function(props){const{telemetryElementCounts:telemetryElementCounts,workpad:workpad,telemetryResolvedArgs:telemetryResolvedArgs,...other}=props,{error:error,pending:pending}=telemetryElementCounts,[currentWorkpadId,setWorkpadId]=Object(external_kbnSharedDeps_React_.useState)(void 0),[hasReported,setHasReported]=Object(external_kbnSharedDeps_React_.useState)(!1);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{const resolvedArgsAreForWorkpad=function(workpad,resolvedArgs){const resolvedArgsElements=Object.keys(resolvedArgs);return workpad.pages.reduce((reduction,page)=>[...reduction,...page.elements.map(element=>element.id)],[]).every(element=>resolvedArgsElements.includes(element))}(workpad,telemetryResolvedArgs);if(workpad.id!==currentWorkpadId){setWorkpadId(workpad.id);const workpadElementCount=workpad.pages.reduce((reduction,page)=>reduction+page.elements.length,0);setHasReported(!!(0===workpadElementCount||resolvedArgsAreForWorkpad&&0===pending))}else!hasReported&&0===pending&&resolvedArgsAreForWorkpad&&(trackMetric(external_kbnSharedDeps_KbnAnalytics_.METRIC_TYPE.LOADED,error>0?["workpad-loaded","workpad-loaded-with-errors"]:"workpad-loaded"),setHasReported(!0))},[currentWorkpadId,hasReported,error,pending,telemetryResolvedArgs,workpad]),external_kbnSharedDeps_React_default.a.createElement(Component,workpad_telemetry_extends({},other,{workpad:workpad}))},connector=Object(lib.connect)(state=>({telemetryElementCounts:getElementCounts(state),telemetryResolvedArgs:getArgs(state)}),{}),workpad_app_WorkpadApp=Object(lib.connect)(state=>({isWriteable:workpad_isWriteable(state)&&app_canUserWrite(state),workpad:getWorkpad(state)}),dispatch=>({deselectElement:ev=>{ev.stopPropagation(),dispatch(transient_selectToplevelNodes([]))}}))((Component=>{const telemetry=withUnconnectedElementsLoadedTelemetry(Component);return connector(telemetry)})(({deselectElement:deselectElement,isWriteable:isWriteable})=>{const interactivePageLayout=Object(external_kbnSharedDeps_React_.useRef)(null),commit=interactivePageLayout.current||(()=>{});return external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasLayout"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasLayout__rows"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasLayout__cols"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasLayout__stage"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasLayout__stageHeader"},external_kbnSharedDeps_React_default.a.createElement(workpad_header_WorkpadHeader,{commit:commit})),external_kbnSharedDeps_React_default.a.createElement("div",{id:constants.m,className:constants.m,onMouseDown:deselectElement},external_kbnSharedDeps_React_default.a.createElement("div",{id:"canvasWorkpadContainer",className:"canvasWorkpadContainer canvasLayout__stageContentOverflow"},external_kbnSharedDeps_React_default.a.createElement(components_workpad_Workpad,{registerLayout:newLayout=>{interactivePageLayout.current!==newLayout&&(interactivePageLayout.current=newLayout)},unregisterLayout:oldLayout=>{interactivePageLayout.current===oldLayout&&(interactivePageLayout.current=null)}})))),isWriteable&&external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasLayout__sidebar hide-for-sharing"},external_kbnSharedDeps_React_default.a.createElement(Sidebar,{commit:commit}))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasLayout__footer hide-for-sharing"},external_kbnSharedDeps_React_default.a.createElement(toolbar_Toolbar,null))))})),{workpadRoutes:routes_strings}=i18n.g,workpad_routes_routes=[{path:"/workpad",children:[{name:"createWorkpad",path:"/create",action:dispatch=>async({router:router})=>{const newWorkpad=getDefaultWorkpad();try{await create(newWorkpad),dispatch(setWorkpad(newWorkpad)),dispatch(resetAssets()),router.redirectTo("loadWorkpad",{id:newWorkpad.id,page:1})}catch(err){public_services.c.getService().error(err,{title:routes_strings.getCreateFailureErrorMessage()}),router.redirectTo("home")}},meta:{component:workpad_app_WorkpadApp}},{name:"loadWorkpad",path:"/:id(/page/:page)",action:(dispatch,getState)=>async({params:params,router:router})=>{const currentWorkpad=getWorkpad(getState());if(params.id!==currentWorkpad.id)try{const fetchedWorkpad=await get(params.id),{assets:assets,...workpad}=fetchedWorkpad;dispatch(setWorkpad(workpad)),dispatch(setAssets(assets)),dispatch(transient_setZoomScale(1))}catch(err){return public_services.c.getService().error(err,{title:routes_strings.getLoadFailureErrorMessage()}),router.redirectTo("home")}const workpad=getWorkpad(getState()),pageNumber=params.page?parseInt(params.page,10):null;if(!pageNumber||isNaN(pageNumber))return router.redirectTo("loadWorkpad",{id:workpad.id,page:workpad.page+1});const pageIndex=pageNumber-1;pageIndex!==workpad.page&&dispatch(pages_setPage(pageIndex)),setBreadcrumb([{text:"Canvas",href:"#/"},getWorkpadBreadcrumb(workpad)])},meta:{component:workpad_app_WorkpadApp}}]}],export_app_ExportApp=Object(lib.connect)(state=>({workpad:getWorkpad(state),selectedPageIndex:getSelectedPageIndex(state)}),dispatch=>({initializeWorkpad:()=>dispatch(workpad_initializeWorkpad())}))(({workpad:workpad,selectedPageIndex:selectedPageIndex,initializeWorkpad:initializeWorkpad})=>{const{id:id,pages:pages,height:height,width:width}=workpad,activePage=pages[selectedPageIndex],pageElementCount=activePage.elements.length;return Object(external_kbnSharedDeps_React_.useEffect)(()=>initializeWorkpad()),external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasExport","data-shared-page":selectedPageIndex+1},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasExport__stage"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasLayout__stageHeader"},external_kbnSharedDeps_React_default.a.createElement(Link,{name:"loadWorkpad",params:{id:id}},"Edit Workpad")),style_it_default.a.it(workpad.css,external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvasExport__stageContent","data-shared-items-count":pageElementCount},external_kbnSharedDeps_React_default.a.createElement(WorkpadPage,{isSelected:!0,key:activePage.id,pageId:activePage.id,height:height,width:width,registerLayout:()=>{},unregisterLayout:()=>{}})))))}),apps_routes=[].concat(workpad_routes_routes,routes_routes,[{path:"/export/workpad",children:[{name:"exportWorkpad",path:"/pdf/:id/page/:page",action:dispatch=>async({params:params,router:router})=>{const fetchedWorkpad=await get(params.id),pageNumber=parseInt(params.page,10);if(null==fetchedWorkpad&&isNaN(pageNumber))return router.redirectTo("home");const{assets:assets,...workpad}=fetchedWorkpad;dispatch(setAssets(assets)),dispatch(setWorkpad(workpad,{loadPages:!1})),dispatch(pages_setPage(pageNumber-1)),dispatch(fetchAllRenderables({onlyActivePage:!0}))},meta:{component:export_app_ExportApp}}]}]),shortcutManager=new react_shortcuts_lib.ShortcutManager(keymap);function app_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const{App:app_strings}=i18n.e;class app_App extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){super(...args),app_defineProperty(this,"renderError",()=>(console.error(this.props.appState),external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement("div",null,app_strings.getLoadErrorTitle()),external_kbnSharedDeps_React_default.a.createElement("div",null,app_strings.getLoadErrorMessage(this.props.appState.messgae)))))}getChildContext(){return{shortcuts:shortcutManager}}componentDidMount(){const win=Object(get_window.a)();win.canvasInitErrorHandler&&win.canvasInitErrorHandler()}componentWillUnmount(){const win=Object(get_window.a)();win.canvasRestoreErrorHandler&&win.canvasRestoreErrorHandler()}render(){return this.props.appState instanceof Error?this.renderError():external_kbnSharedDeps_React_default.a.createElement("div",{className:"canvas canvasContainer"},external_kbnSharedDeps_React_default.a.createElement(components_router_Router,{routes:apps_routes,showLoading:!1===this.props.appState.ready,loadingMessage:app_strings.getLoadingMessage(),onRouteChange:this.props.onRouteChange,onLoad:()=>this.props.setAppReady(!0),onError:err=>this.props.setAppError(err)}))}}app_defineProperty(app_App,"childContextTypes",{shortcuts:prop_types_default.a.object.isRequired});const components_app_App=Object(Recompose.compose)(Object(lib.connect)(state=>{const appState=getAppReady(state);return{appState:"object"==typeof appState?appState:{ready:appState},basePath:getBasePath(state)}},dispatch=>({setAppReady:()=>async()=>{try{dispatch(appReady())}catch(e){dispatch(appError(e))}},setAppError:payload=>dispatch(appError(payload))}),(stateProps,dispatchProps,ownProps)=>({...ownProps,...stateProps,...dispatchProps,setAppReady:dispatchProps.setAppReady(stateProps.basePath)})),public_services.i,Object(Recompose.withProps)(props=>({onRouteChange:props.services.navLink.updatePath})))(app_App),defaultWorkpad=getDefaultWorkpad();function Template(config){this.name=config.name,this.displayName=config.displayName||this.name,this.id=config.id||Object(get_id.a)("workpad"),this.help=config.help||"",this.tags=config.tags||[],this.tags.forEach(tag=>{tagsRegistry.get(tag)||tagsRegistry.register(()=>({name:tag,color:"#666666"}))}),this.width=config.width||defaultWorkpad.width,this.height=config.height||defaultWorkpad.height,this.page=config.page||defaultWorkpad.page,this.pages=config.pages||defaultWorkpad.pages,this.colors=config.colors||defaultWorkpad.colors,this["@timestamp"]=config["@timestamp"]||defaultWorkpad["@timestamp"],this["@created"]=config["@created"]||defaultWorkpad["@created"],this.assets=config.assets||{},this.css=config.css||defaultWorkpad.css}class templates_registry_TemplateRegistry extends common.Registry{wrapper(obj){return new Template(obj)}}const templatesRegistry=new templates_registry_TemplateRegistry;let registries_registries={};const{KeyboardShortcutsDoc:keyboard_shortcuts_doc_strings}=components.a,keyboard_shortcuts_doc_os=getClientPlatform(),getDescriptionListItems=shortcuts=>shortcuts.map(shortcutKeyMap=>{const osShortcuts=shortcutKeyMap[keyboard_shortcuts_doc_os];return{title:shortcutKeyMap.help,description:osShortcuts.reduce((acc,shortcut,i)=>(shortcut=shortcut.replace(/\+/g," "),0!==i&&acc.push(external_kbnSharedDeps_React_default.a.createElement("span",{key:Object(get_id.a)("span")}," ",keyboard_shortcuts_doc_strings.getShortcutSeparator()," ")),acc.push(external_kbnSharedDeps_React_default.a.createElement("span",{key:Object(get_id.a)("span")},getPrettyShortcut(shortcut).split(/( )/g).map(key=>" "===key?key:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,{key:Object(get_id.a)("shortcut")},key)))),acc),[])}}),KeyboardShortcutsDoc=({onClose:onClose})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyout,{closeButtonAriaLabel:keyboard_shortcuts_doc_strings.getFlyoutCloseButtonAriaLabel(),size:"s",onClose:onClose},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutHeader,{hasBorder:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,keyboard_shortcuts_doc_strings.getTitle()))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutBody,null,Object.values(keymap).map(namespace=>{const{displayName:displayName,...shortcuts}=namespace;return external_kbnSharedDeps_React_default.a.createElement("div",{key:Object(get_id.a)("shortcuts"),className:"canvasKeyboardShortcut"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h4",null,displayName)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHorizontalRule,{margin:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse",type:"column",listItems:getDescriptionListItems(Object.values(shortcuts)),compressed:!0}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null))})));const{HelpMenu:help_menu_strings}=i18n.e,HelpMenu=({functionRegistry:functionRegistry})=>{const[isFlyoutVisible,setFlyoutVisible]=Object(external_kbnSharedDeps_React_.useState)(!1);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"xs",flush:"left",iconType:"keyboardShortcut",onClick:()=>{setFlyoutVisible(!0)}},help_menu_strings.getKeyboardShortcutsLinkLabel()),null,isFlyoutVisible&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPortal,null,external_kbnSharedDeps_React_default.a.createElement(KeyboardShortcutsDoc,{onClose:()=>{setFlyoutVisible(!1)}})))};var redux=__webpack_require__(192),redux_thunk_lib=__webpack_require__(363),redux_thunk_lib_default=__webpack_require__.n(redux_thunk_lib);const{esPersist:es_persist_strings}=i18n.g;function getHistoryState(state){return state.persistent}var loading_indicator=__webpack_require__(61);const pathToKey=path=>function(path){return Object(external_kbnSharedDeps_Lodash_.toPath)(path)}(path).join("/"),in_flight_inFlight=(({loadingIndicator:loadingIndicator,pendingCache:pendingCache})=>({dispatch:dispatch})=>next=>action=>{if(action.type===setLoadingActionType){const cacheKey=pathToKey(action.payload.path);pendingCache.push(cacheKey),dispatch(resolved_args_inFlightActive())}else if(action.type===setValueActionType){const cacheKey=pathToKey(action.payload.path),idx=pendingCache.indexOf(cacheKey);idx>=0&&pendingCache.splice(idx,1),0===pendingCache.length&&dispatch(inFlightComplete())}else action.type===inFlightActiveActionType?loadingIndicator.show():action.type===inFlightCompleteActionType&&loadingIndicator.hide();next(action)})({loadingIndicator:loading_indicator.b,pendingCache:[]}),middlewares=[Object(redux.applyMiddleware)(redux_thunk_lib_default.a,({dispatch:dispatch,getState:getState})=>next=>action=>{next(action);const state=getState(),stats=getElementStats(state),total=getAllElements(state).length,counts=getElementCounts(state),{ready:ready,error:error}=counts,pending=total-ready-error;total>0&&(ready!==stats.ready||pending!==stats.pending||error!==stats.error||total!==stats.total)&&dispatch(setElementStats({total:total,ready:ready,pending:pending,error:error}))},({dispatch:dispatch,getState:getState})=>next=>action=>{const startElementIds=getAllElements(getState()).map(element=>element.id);next(action);const resolvedElementIds=getAllElements(getState()).map(element=>element.id),deadIds=startElementIds.filter(id=>!resolvedElementIds.includes(id));deadIds.length>0&&dispatch(clearValues(deadIds))},({getState:getState})=>{const skippedActions=[appReady,resetWorkpad,setWorkpad,setAssets,resetAssets,workpad_setRefreshInterval,...Object.values(actions_resolved_args_namespaceObject),...Object.values(transient_namespaceObject)].map(a=>a.toString());return next=>action=>{if(skippedActions.indexOf(action.type)>=0)return next(action);const curState=getState();next(action);const newState=getState();if(!app_canUserWrite(newState))return;const notifyError=err=>{switch(err.response&&err.response.status){case 400:return public_services.e.notify.getService().error(err.response,{title:es_persist_strings.getSaveFailureTitle()});case 413:return public_services.e.notify.getService().error(es_persist_strings.getTooLargeErrorMessage(),{title:es_persist_strings.getSaveFailureTitle()});default:return public_services.e.notify.getService().error(err,{title:es_persist_strings.getUpdateFailureTitle()})}},changedWorkpad=((before,after)=>{const workpad=getWorkpad(before);return getWorkpad(after)!==workpad})(curState,newState),changedAssets=((before,after)=>{const assets=getAssetIds(before);return!Object(external_kbnSharedDeps_Lodash_.isEqual)(assets,getAssetIds(after))})(curState,newState);if(changedWorkpad&&changedAssets){const persistedWorkpad=getFullWorkpadPersisted(getState());return(id=persistedWorkpad.id,workpad=persistedWorkpad,fetch.b.put(`${getApiPath()}/${id}`,sanitizeWorkpad({...workpad}))).catch(notifyError)}if(changedWorkpad){const persistedWorkpad=getWorkpad(getState());return workpad_service_updateWorkpad(persistedWorkpad.id,persistedWorkpad).catch(notifyError)}if(changedAssets){const persistedWorkpad=getFullWorkpadPersisted(getState());return updateAssets(persistedWorkpad.id,persistedWorkpad.assets).catch(notifyError)}var id,workpad}},({dispatch:dispatch,getState:getState})=>{const reduxInject=routes=>routes.map(route=>route.children?{...route,children:reduxInject(route.children)}:route.action?{...route,action:route.action(dispatch,getState)}:route),handlerState={pendingCount:0},router=routerProvider(reduxInject(apps_routes)),history=historyProvider();return history.onChange(async(...args)=>{handlerState.pendingCount+=1;try{await(async(location,prevLocation)=>{const{pathname:pathname,state:historyState,action:historyAction}=location,isBrowserNav="pop"===historyAction&&null!=historyState,isUrlChange=!isBrowserNav&&"pop"===historyAction||("push"===historyAction||"replace"===historyAction)&&prevLocation.pathname!==pathname;if(isBrowserNav){if(getWorkpad(getState()).id!==historyState.workpad.id){const newWorkpad=await get(historyState.workpad.id);dispatch(setAssets(newWorkpad.assets))}return dispatch(restoreHistory(historyState))}if(isUrlChange)return await router.parse(pathname)})(...args)}catch(e){}finally{handlerState.pendingCount-=1}}),next=>action=>{const oldState=getState();switch(action.type){case history_undoHistory.toString():return history.undo();case history_redoHistory.toString():return history.redo();case restoreHistory.toString():return next(action),void dispatch(workpad_initializeWorkpad())}next(action);const newState=getState();if(!isAppReady(newState))return;if(!isAppReady(oldState)&&isAppReady(newState))return void history.replace(getHistoryState(newState));const oldHistoryState=getHistoryState(oldState),historyState=getHistoryState(newState);if(!Object(external_kbnSharedDeps_Lodash_.isEqual)(historyState,oldHistoryState)){0!==handlerState.pendingCount?history.replace(historyState):history.push(historyState)}}},({getState:getState})=>next=>action=>{const currentWorkpad=getWorkpad(getState());next(action);const updatedWorkpad=getWorkpad(getState());currentWorkpad.name!==updatedWorkpad.name&&setBreadcrumb([{text:"Canvas",href:"#/"},getWorkpadBreadcrumb(updatedWorkpad)])},({getState:getState})=>next=>action=>{if(next(action),action.type===setFullscreen.toString()){const fullscreen=getFullscreen(getState());!function(fullscreen,doc=document){const enabled=Boolean(fullscreen),bodyClassList=doc.querySelector("body").classList,isFullscreen=bodyClassList.contains("canvas-isFullscreen");enabled&&!isFullscreen?(public_services.d.getService().setFullscreen(!1),bodyClassList.add("canvas-isFullscreen")):!enabled&&isFullscreen&&(bodyClassList.remove("canvas-isFullscreen"),public_services.d.getService().setFullscreen(!0))}(fullscreen),function(payload){const appState=getAppState(),appValue=appState[types.AppStateKeys.FULLSCREEN];!1===payload&&appValue?(delete appState[types.AppStateKeys.FULLSCREEN],routerProvider().updateAppState(appState)):!0!==payload||appValue||(appState[types.AppStateKeys.FULLSCREEN]=!0,routerProvider().updateAppState(appState))}(fullscreen)}},in_flight_inFlight,({dispatch:dispatch,getState:getState})=>next=>action=>{next(action);const state=getState();state.app.ready||isAppReady(state)&&dispatch(appReady())},({dispatch:dispatch,getState:getState})=>next=>action=>{const oldIsWriteable=workpad_isWriteable(getState()),oldName=getWorkpadName(getState());if(next(action),getWorkpadName(getState())!==oldName&&setDocTitle(getWorkpadName(getState())),action.type===duplicatePage.toString()&&dispatch(fetchAllRenderables()),action.type===setWriteable.toString()&&oldIsWriteable!==workpad_isWriteable(getState())){const win=Object(get_window.a)();"function"==typeof win.getSelection&&win.getSelection().collapse(document.querySelector("body"),0)}},({dispatch:dispatch,getState:getState})=>next=>{let refreshTimeout,refreshInterval=0;function cancelDelayedUpdate(){clearTimeout(refreshTimeout),refreshTimeout=void 0}function startDelayedUpdate(){refreshTimeout||(clearTimeout(refreshTimeout),refreshTimeout=window.setTimeout(()=>{!function(){if(cancelDelayedUpdate(),0===refreshInterval)return;getInFlight(getState())?startDelayedUpdate():dispatch(fetchAllRenderables())}()},refreshInterval))}return action=>{const previousRefreshInterval=getRefreshInterval(getState());next(action),refreshInterval=getRefreshInterval(getState()),action.type===inFlightComplete.toString()&&refreshInterval>0&&startDelayedUpdate(),action.type===workpad_setRefreshInterval.toString()&&previousRefreshInterval!==refreshInterval&&(refreshInterval=action.payload,function(payload){const appState=getAppState();payload!==appState[types.AppStateKeys.REFRESH_INTERVAL]&&(getTimeInterval(payload)?(appState[types.AppStateKeys.REFRESH_INTERVAL]=payload,routerProvider().updateAppState(appState)):(delete appState[types.AppStateKeys.REFRESH_INTERVAL],routerProvider().updateAppState(appState)))}(createTimeInterval(refreshInterval)),cancelDelayedUpdate(),refreshInterval>0&&startDelayedUpdate()),action.type===appUnload.toString()&&cancelDelayedUpdate()}},({getState:getState})=>next=>{let playTimeout,displayInterval=0;const router=routerProvider();function stopAutoUpdate(){clearTimeout(playTimeout),playTimeout=void 0}function startDelayedUpdate(){playTimeout||(stopAutoUpdate(),playTimeout=window.setTimeout(()=>{!function(){if(0===displayInterval)return;if(!getInFlight(getState())){const workpadId=getWorkpad(getState()).id,pageIndex=getSelectedPageIndex(getState()),pageCount=getPages(getState()).length,nextPage=Math.min(pageIndex+1,pageCount-1);nextPage===pageIndex?router.navigateTo("loadWorkpad",{id:workpadId,page:1}):router.navigateTo("loadWorkpad",{id:workpadId,page:nextPage+1})}stopAutoUpdate(),startDelayedUpdate()}()},displayInterval))}return action=>{next(action);const isFullscreen=getFullscreen(getState()),autoplay=getAutoplay(getState()),shouldPlay=isFullscreen&&autoplay.enabled&&autoplay.interval>0;displayInterval=autoplay.interval,autoplay.enabled?app_state_setAutoplayInterval(createTimeInterval(autoplay.interval)):app_state_setAutoplayInterval(null),shouldPlay?startDelayedUpdate():stopAutoUpdate(),action.type===appUnload.toString()&&stopAutoUpdate()}})],middleware=(Object(get_window.a)().__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||redux.compose)(...middlewares);var reduce_reducers_lib=__webpack_require__(364),reduce_reducers_lib_default=__webpack_require__.n(reduce_reducers_lib);const appReducer=Object(redux_actions_lib.handleActions)({[appReady]:appState=>({...appState,ready:!0}),[appError]:(appState,{payload:payload})=>({...appState,ready:payload})},{}),{set:transient_set,del:transient_del}=object_path_immutable_default.a,transientReducer=Object(redux_actions_lib.handleActions)({[restoreHistory]:transientState=>transient_set(transientState,"resolvedArgs",{}),[removeElements]:(transientState,{payload:{elementIds:elementIds}})=>{const{selectedToplevelNodes:selectedToplevelNodes}=transientState;return transient_del({...transientState,selectedToplevelNodes:selectedToplevelNodes.filter(n=>elementIds.indexOf(n)<0)},["resolvedArgs",elementIds])},[setFirstLoad]:(transientState,{payload:payload})=>transient_set(transientState,"isFirstLoad",Boolean(payload)),[setFullscreen]:(transientState,{payload:payload})=>transient_set(transientState,"fullscreen",Boolean(payload)),[setElementStats]:(transientState,{payload:payload})=>transient_set(transientState,"elementStats",payload),[transient_selectToplevelNodes]:(transientState,{payload:payload})=>({...transientState,selectedToplevelNodes:payload}),[transient_setZoomScale]:(transientState,{payload:payload})=>({...transientState,zoomScale:payload||1}),[pages_setPage]:transientState=>({...transientState,selectedToplevelNodes:[]}),[addPage]:transientState=>({...transientState,selectedToplevelNodes:[]}),[duplicatePage]:transientState=>({...transientState,selectedToplevelNodes:[]}),[workpad_setRefreshInterval]:(transientState,{payload:payload})=>({...transientState,refresh:{interval:Number(payload)||0}}),[workpad_enableAutoplay]:(transientState,{payload:payload})=>transient_set(transientState,"autoplay.enabled",Boolean(payload)||!1),[workpad_setAutoplayInterval]:(transientState,{payload:payload})=>transient_set(transientState,"autoplay.interval",Number(payload)||0)},{}),{set:resolved_args_set,del:resolved_args_del}=object_path_immutable_default.a;function _getState(hasError,loading){return hasError?"error":Boolean(loading)?"pending":"ready"}function _getValue(hasError,value,oldVal){return hasError||null==value?oldVal&&oldVal.value:value}function resolved_args_getContext(value,loading=!1,oldVal=null){const hasError=value instanceof Error;return{state:_getState(hasError,loading),value:_getValue(hasError,value,oldVal),error:hasError?value:null}}function getFullPath(path){if(!Array.isArray(path)&&!("string"==typeof path))throw new Error("Resolved argument path is invalid: "+path);return prepend(path,"resolvedArgs")}const resolvedArgsReducer=Object(redux_actions_lib.handleActions)({[setLoading]:(transientState,{payload:payload})=>{const{path:path,loading:loading=!0}=payload,fullPath=getFullPath(path),oldVal=Object(external_kbnSharedDeps_Lodash_.get)(transientState,fullPath,null);return resolved_args_set(transientState,fullPath,resolved_args_getContext(Object(external_kbnSharedDeps_Lodash_.get)(oldVal,"value",null),loading))},[resolved_args_setValue]:(transientState,{payload:payload})=>{const{path:path,value:value}=payload,fullPath=getFullPath(path),oldVal=Object(external_kbnSharedDeps_Lodash_.get)(transientState,fullPath,null);return resolved_args_set(transientState,fullPath,resolved_args_getContext(value,!1,oldVal))},[setValues]:(transientState,{payload:payload})=>payload.reduce((acc,setValueObj)=>{const fullPath=getFullPath(setValueObj.path),oldVal=Object(external_kbnSharedDeps_Lodash_.get)(acc,fullPath,null);return resolved_args_set(acc,fullPath,resolved_args_getContext(setValueObj.value,!1,oldVal))},transientState),[clearValue]:(transientState,{payload:payload})=>{const{path:path}=payload;return resolved_args_del(transientState,getFullPath(path))},[clearValues]:(transientState,{payload:payload})=>payload.reduce((transientState,path)=>resolved_args_del(transientState,getFullPath(path)),transientState),[resolved_args_inFlightActive]:transientState=>resolved_args_set(transientState,"inFlight",!0),[inFlightComplete]:transientState=>resolved_args_set(transientState,"inFlight",!1),[flushContext]:(transientState,{payload:elementId})=>resolved_args_del(transientState,getFullPath([elementId,"expressionContext"])),[flushContextAfterIndex]:(transientState,{payload:payload})=>{const{elementId:elementId,index:index}=payload,expressionContext=Object(external_kbnSharedDeps_Lodash_.get)(transientState,getFullPath([elementId,"expressionContext"]));return expressionContext?Object.keys(expressionContext).reduce((state,indexKey)=>parseInt(indexKey,10)>=index?resolved_args_del(state,getFullPath([elementId,"expressionContext",indexKey])):state,transientState):transientState},[setWorkpad]:(transientState,{})=>resolved_args_set(transientState,"resolvedArgs",{})},{}),workpadReducer=Object(redux_actions_lib.handleActions)({[setWorkpad]:(workpadState,{payload:payload})=>(public_services.d.getService().setRecentlyAccessed(`${constants.j}/${payload.id}`,payload.name,payload.id),payload),[sizeWorkpad]:(workpadState,{payload:payload})=>({...workpadState,...payload}),[setColors]:(workpadState,{payload:payload})=>({...workpadState,colors:payload}),[workpad_setName]:(workpadState,{payload:payload})=>(public_services.d.getService().setRecentlyAccessed(`${constants.j}/${workpadState.id}`,payload,workpadState.id),{...workpadState,name:payload}),[setWriteable]:(workpadState,{payload:payload})=>({...workpadState,isWriteable:Boolean(payload)}),[workpad_setWorkpadCSS]:(workpadState,{payload:payload})=>({...workpadState,css:payload}),[workpad_setWorkpadVariables]:(workpadState,{payload:payload})=>({...workpadState,variables:payload}),[resetWorkpad]:()=>({...getDefaultWorkpad()})},{}),{set:pages_set,del:pages_del,insert:insert}=object_path_immutable_default.a,setPageIndex=(workpadState,index)=>index<0||!workpadState.pages[index]||getSelectedPageIndex(workpadState)===index?workpadState:pages_set(workpadState,"page",index);function pages_getPageIndexById(workpadState,id){return workpadState.pages.findIndex(page=>page.id===id)}function pages_addPage(workpadState,payload,srcIndex=workpadState.pages.length-1){return insert(workpadState,"pages",payload||getDefaultPage(),srcIndex+1)}const pagesReducer=Object(redux_actions_lib.handleActions)({[addPage]:(workpadState,{payload:payload})=>{const{page:activePage}=workpadState,withNewPage=pages_addPage(workpadState,payload,activePage),newState=setPageIndex(withNewPage,activePage+1);return routerProvider().navigateTo("loadWorkpad",{id:newState.id,page:newState.page+1}),newState},[duplicatePage]:(workpadState,{payload:payload})=>{const srcPage=workpadState.pages.find(page=>page.id===payload);if(!srcPage)return workpadState;const srcIndex=workpadState.pages.indexOf(srcPage),newPageIndex=srcIndex+1,insertedWorkpadState=pages_addPage(workpadState,function(page){const elements=page.elements,groups=page.groups||[],nodes=elements.concat(groups),newNodes=cloneSubgraphs(nodes);return{...page,id:Object(get_id.a)("page"),groups:newNodes.filter(n=>positioning_utils_isGroupId(n.id)),elements:newNodes.filter(n=>!positioning_utils_isGroupId(n.id))}}(srcPage),srcIndex),newState=setPageIndex(insertedWorkpadState,newPageIndex);return routerProvider().navigateTo("loadWorkpad",{id:newState.id,page:newPageIndex+1}),newState},[pages_setPage]:(workpadState,{payload:payload})=>setPageIndex(workpadState,payload),[movePage]:(workpadState,{payload:payload})=>{const{id:id,position:position}=payload,pageIndex=pages_getPageIndexById(workpadState,id),newIndex=pageIndex+position;if(pageIndex<0)return workpadState;if(newIndex<0||newIndex>=workpadState.pages.length)return workpadState;const page={...workpadState.pages[pageIndex]};let newState=insert(pages_del(workpadState,"pages."+pageIndex),"pages",page,newIndex);const selectedId=workpadState.pages[workpadState.page].id,newSelectedIndex=newState.pages.findIndex(page=>page.id===selectedId);newState=pages_set(newState,"page",newSelectedIndex);return routerProvider().navigateTo("loadWorkpad",{id:newState.id,page:newState.page+1}),newState},[removePage]:(workpadState,{payload:payload})=>{const curIndex=workpadState.page,delIndex=pages_getPageIndexById(workpadState,payload);if(delIndex>=0){let newState=pages_del(workpadState,"pages."+delIndex);const router=routerProvider(),wasSelected=curIndex===delIndex,wasOnlyPage=0===newState.pages.length,newSelectedPage=curIndex>=delIndex?curIndex-1:curIndex;return wasOnlyPage&&(newState=pages_addPage(newState)),newState=pages_set(newState,"page",wasOnlyPage||wasSelected?0:newSelectedPage),router.navigateTo("loadWorkpad",{id:newState.id,page:newState.page+1}),newState}},[stylePage]:(workpadState,{payload:payload})=>{const pageIndex=workpadState.pages.findIndex(page=>page.id===payload.pageId);return pages_set(workpadState,`pages.${pageIndex}.style`,payload.style)},[setPageTransition]:(workpadState,{payload:payload})=>{const pageIndex=workpadState.pages.findIndex(page=>page.id===payload.pageId);return pages_set(workpadState,`pages.${pageIndex}.transition`,payload.transition)}},{}),{assign:elements_assign,push:push,del:elements_del,set:elements_set}=object_path_immutable_default.a,getLocation=type=>"group"===type?"groups":"elements",firstOccurrence=(element,index,array)=>array.indexOf(element)===index,getLocationFromIds=(workpadState,pageId,nodeId)=>{const page=workpadState.pages.find(p=>p.id===pageId);return(null==page?[]:page.groups||[]).find(e=>e.id===nodeId)?"groups":"elements"};function elements_getPageIndexById(workpadState,pageId){return Object(external_kbnSharedDeps_Lodash_.get)(workpadState,"pages",[]).findIndex(page=>page.id===pageId)}function getNodeIndexById(page,nodeId,location){return page[location].findIndex(node=>node.id===nodeId)}function assignNodeProperties(workpadState,pageId,nodeId,props){const pageIndex=elements_getPageIndexById(workpadState,pageId),nodesPath=`pages.${pageIndex}.${getLocationFromIds(workpadState,pageId,nodeId)}`,nodeIndex=Object(external_kbnSharedDeps_Lodash_.get)(workpadState,nodesPath,[]).findIndex(node=>node.id===nodeId);return-1===pageIndex||-1===nodeIndex?workpadState:elements_assign(workpadState,`${nodesPath}.${nodeIndex}`,props)}const trimPosition=({left:left,top:top,width:width,height:height,angle:angle,parent:parent})=>({left:left,top:top,width:width,height:height,angle:angle,parent:parent}),trimElement=({id:id,position:position,expression:expression,filter:filter})=>({id:id,position:trimPosition(position),..."group"!==position.type&&{expression:expression},...void 0!==filter&&{filter:filter}}),elementsReducer=Object(redux_actions_lib.handleActions)({[elements_setExpression]:(workpadState,{payload:payload})=>{const{expression:expression,pageId:pageId,elementId:elementId}=payload;return assignNodeProperties(workpadState,pageId,elementId,{expression:expression})},[setFilter]:(workpadState,{payload:payload})=>{const{filter:filter,elementId:elementId}=payload;return assignNodeProperties(workpadState,((workpad,elementId)=>{const matchingPage=workpad.pages.find(page=>page.elements.map(element=>element.id).includes(elementId));if(matchingPage)return matchingPage.id})(workpadState,elementId),elementId,{filter:filter})},[elements_setMultiplePositions]:(workpadState,{payload:payload})=>payload.repositionedElements.reduce((previousWorkpadState,{position:position,pageId:pageId,elementId:elementId})=>assignNodeProperties(previousWorkpadState,pageId,elementId,{position:trimPosition(position)}),workpadState),[elements_elementLayer]:(workpadState,{payload:{pageId:pageId,elementId:elementId,movement:movement}})=>function(workpadState,pageId,nodeId,movement,location){const pageIndex=elements_getPageIndexById(workpadState,pageId),nodeIndex=getNodeIndexById(workpadState.pages[pageIndex],nodeId,location),nodes=Object(external_kbnSharedDeps_Lodash_.get)(workpadState,["pages",pageIndex,location]),from=nodeIndex,to=function(){if(movement<1/0&&movement>-1/0)return nodeIndex+movement;if(movement===1/0)return nodes.length-1;if(movement===-1/0)return 0;throw new Error("Invalid element layer movement")}();if(to>nodes.length-1||to<0)return workpadState;const newNodes=nodes.slice(0);return newNodes.splice(to,0,newNodes.splice(from,1)[0]),elements_set(workpadState,`pages.${pageIndex}.${location}`,newNodes)}(workpadState,pageId,elementId,movement,getLocationFromIds(workpadState,pageId,elementId)),[elements_addElement]:(workpadState,{payload:{pageId:pageId,element:element}})=>{const pageIndex=elements_getPageIndexById(workpadState,pageId);return pageIndex<0||workpadState.pages[pageIndex][getLocation(element.position.type)].find(e=>e.id===element.id)?workpadState:push(workpadState,`pages.${pageIndex}.${getLocation(element.position.type)}`,trimElement(element))},[elements_insertNodes]:(workpadState,{payload:{pageId:pageId,elements:elements}})=>{const pageIndex=elements_getPageIndexById(workpadState,pageId);return pageIndex<0?workpadState:elements.reduce((state,element)=>push(state,`pages.${pageIndex}.${getLocation(element.position.type)}`,trimElement(element)),workpadState)},[removeElements]:(workpadState,{payload:{pageId:pageId,elementIds:elementIds}})=>{const pageIndex=elements_getPageIndexById(workpadState,pageId);if(pageIndex<0)return workpadState;return elementIds.filter(firstOccurrence).map(nodeId=>{const location=getLocationFromIds(workpadState,pageId,nodeId);return{location:location,index:getNodeIndexById(workpadState.pages[pageIndex],nodeId,location)}}).sort((a,b)=>b.index-a.index).reduce((state,{location:location,index:index})=>elements_del(state,`pages.${pageIndex}.${location}.${index}`),workpadState)}},{}),{set:assets_set,assign:assets_assign,del:assets_del}=object_path_immutable_default.a,assetsReducer=Object(redux_actions_lib.handleActions)({[createAsset]:(assetState,{payload:payload})=>{const asset={id:Object(get_id.a)("asset"),"@created":(new Date).toISOString(),...payload};return assets_set(assetState,asset.id,asset)},[setAssetValue]:(assetState,{payload:payload})=>{const{id:id,value:value}=payload;if(!Object(external_kbnSharedDeps_Lodash_.get)(assetState,[id]))throw new Error("Can not set asset data, id not found: "+id);return assets_assign(assetState,id,{value:value})},[removeAsset]:(assetState,{payload:assetId})=>assets_del(assetState,assetId),[Object(redux_actions_lib.combineActions)(setAssets,resetAssets)]:(_assetState,{payload:payload})=>payload||{}},{}),historyReducer=Object(redux_actions_lib.handleActions)({[restoreHistory]:(persistedState,{payload:payload})=>payload},{}),embeddableReducer=Object(redux_actions_lib.handleActions)({updateEmbeddableExpression:(workpadState,{payload:payload})=>{if(!payload)return workpadState;const{elementId:elementId,embeddableExpression:embeddableExpression}=payload,pageWithElement=workpadState.pages.find(page=>void 0!==page.elements.find(element=>element.id===elementId));if(!pageWithElement)return workpadState;const element=pageWithElement.elements.find(elem=>elem.id===elementId);if(!element)return workpadState;const existingAst=Object(common.fromExpression)(element.expression),newAst=Object(common.fromExpression)(embeddableExpression),searchForFunction=newAst.chain[0].function,existingAstFunction=existingAst.chain.find(f=>f.function===searchForFunction);if(!existingAstFunction)return workpadState;existingAstFunction.arguments=newAst.chain[0].arguments;const updatedExpression=Object(common.toExpression)(existingAst);return assignNodeProperties(workpadState,pageWithElement.id,elementId,{expression:updatedExpression})}},{});let store;function store_createStore(initialState){if(void 0!==store)throw new Error("Redux store can only be initialized once");if(!Object(external_kbnSharedDeps_Lodash_.isPlainObject)(initialState))throw new Error("Initial state must be a plain object");const rootReducer=function(initialState){return Object(redux.combineReducers)({assets:assetsReducer,app:appReducer,transient:reduce_reducers_lib_default()(transientReducer,resolvedArgsReducer),persistent:reduce_reducers_lib_default()(historyReducer,Object(redux.combineReducers)({workpad:reduce_reducers_lib_default()(workpadReducer,pagesReducer,elementsReducer,embeddableReducer),schemaVersion:(state=Object(external_kbnSharedDeps_Lodash_.get)(initialState,"persistent.schemaVersion"))=>state}))})}(initialState);return store=Object(redux.createStore)(rootReducer,initialState,middleware),store}function store_getState(){return store.getState()}async function public_store_createStore(core,plugins){return store?function(){const state=store.getState();return store=void 0,store_createStore(state)}():async function(core,plugins){const initialState=getInitialState(),basePath=core.http.basePath.get(),serverFunctionsResponse=await core.http.get(constants.c),serverFunctions=Object.values(serverFunctionsResponse);return initialState.app={basePath:basePath,serverFunctions:serverFunctions,ready:!1},store_createStore(initialState)}(core)}function asset_asset(){const{help:help,args:argHelp}=Object(i18n.u)().asset,errors=Object(i18n.t)().asset;return{name:"asset",aliases:[],type:"string",inputTypes:["null"],help:help,args:{id:{aliases:["_"],types:["string"],help:argHelp.id,required:!0}},fn:(input,args)=>{const assetId=args.id,storedAsset=(state=store_getState(),id=assetId,state.assets[id]);var state,id;if(void 0!==storedAsset)return storedAsset.value;throw errors.invalidAssetId(assetId)}}}function filtersFunctionFactory(initialize){return function(){const{help:help,args:argHelp}=Object(i18n.u)().filters;return{name:"filters",type:"filter",help:help,context:{types:["null"]},args:{group:{aliases:["_"],types:["string"],help:argHelp.group,multi:!0},ungrouped:{aliases:["nogroup","nogroups"],types:["boolean"],help:argHelp.ungrouped,default:!1}},fn:(input,{group:group,ungrouped:ungrouped})=>{const filterList=function(allFilters,groups,ungrouped=!1){return groups&&0!==groups.length?allFilters.filter(filter=>{const ast=Object(common.fromExpression)(filter),expGroups=Object(external_kbnSharedDeps_Lodash_.get)(ast,"chain[0].arguments.filterGroup",[]);return expGroups.length>0&&expGroups.every(expGroup=>groups.includes(expGroup))}):ungrouped?allFilters.filter(filter=>{const ast=Object(common.fromExpression)(filter);return 0===Object(external_kbnSharedDeps_Lodash_.get)(ast,"chain[0].arguments.filterGroup",[]).length}):allFilters}(getAllElements(store_getState()).reduce((acc,el)=>null!=el.filter&&el.filter.length?acc.concat(el.filter):acc,[]),group,ungrouped);if(filterList&&filterList.length){const filterExpression=filterList.join(" | ");return interpretAst(Object(common.fromExpression)(filterExpression),getWorkpadVariablesAsObject(store_getState()))}{const filterType=initialize.types.filter;return null==filterType?void 0:filterType.from(null,{})}}}}}var build_bool_array=__webpack_require__(101);function timelionFunctionFactory(initialize){return()=>{const{help:help,args:argHelp}=Object(i18n.u)().timelion;return{name:"timelion",type:"datatable",inputTypes:["filter"],help:help,args:{query:{types:["string"],aliases:["_","q"],help:argHelp.query,default:'".es(*)"'},interval:{types:["string"],help:argHelp.interval,default:"auto"},from:{types:["string"],help:argHelp.from,default:"now-1y"},to:{types:["string"],help:argHelp.to,default:"now"},timezone:{types:["string"],help:argHelp.timezone,default:"UTC"}},fn:(input,args)=>{const timeFilter=input.and.find(and=>"time"===and.filterType),range=timeFilter?{min:timeFilter.from,max:timeFilter.to}:function(timeRange,timeZone,timefilter){const defaultTimezone=external_kbnSharedDeps_MomentTimezone_default()().zoneName();external_kbnSharedDeps_MomentTimezone_default.a.tz.setDefault(timeZone);const parsedRange=timefilter.calculateBounds(timeRange);return external_kbnSharedDeps_MomentTimezone_default.a.tz.setDefault(defaultTimezone),parsedRange}({from:args.from,to:args.to},args.timezone,initialize.timefilter),body={extended:{es:{filter:{bool:{must:Object(build_bool_array.a)(input.and)}}}},sheet:[args.query],time:{from:range.min,to:range.max,interval:args.interval,timezone:args.timezone}};return Object(fetch.b)(initialize.prependBasePath("/api/timelion/run"),{method:"POST",responseType:"json",data:body}).then(resp=>{const seriesList=resp.data.sheet[0].list;return{type:"datatable",meta:{source:"timelion"},columns:[{id:"@timestamp",name:"@timestamp",meta:{type:"date"}},{id:"value",name:"value",meta:{type:"number"}},{id:"label",name:"label",meta:{type:"string"}}],rows:Object(external_kbnSharedDeps_Lodash_.flatten)(seriesList.map(series=>series.data.map(row=>({"@timestamp":row[0],value:row[1],label:series.label}))))}})}}}}function toFunctionFactory(initialize){return function(){const{help:help,args:argHelp}=Object(i18n.u)().to,errors=Object(i18n.t)().to;return{name:"to",aliases:[],help:help,args:{type:{types:["string"],help:argHelp.type,aliases:["_"],multi:!0}},fn:(input,args)=>{if(!args.type)throw errors.missingType();return Object(common.castProvider)(initialize.types)(input,args.type)}}}}var get_legend_config=__webpack_require__(51);const getFlotAxisConfig=(axis,argValue,{columns:columns,ticks:ticks,font:font}={})=>{if(!argValue||Object(types.isAxisConfig)(argValue)&&!1===argValue.show)return{show:!1};const config={show:!0},axisType=Object(external_kbnSharedDeps_Lodash_.get)(columns,axis+".type");if(Object(types.isAxisConfig)(argValue)){const{position:position,min:min,max:max,tickSize:tickSize}=argValue,acceptedPositions="x"===axis?["bottom","top"]:["left","right"];config.position=position&&acceptedPositions.includes(position)?position:acceptedPositions[0],"number"!==axisType&&"date"!==axisType||(null!=min&&(config.min=min),null!=max&&(config.max=max)),tickSize&&"number"===axisType&&(config.tickSize=tickSize)}if("string"===axisType&&ticks){const tickAxis=ticks[axis];tickAxis&&(config.ticks=Object(external_kbnSharedDeps_Lodash_.map)(tickAxis.hash,(position,name)=>[position,name]))}return"date"===axisType&&(config.mode="time"),"object"==typeof font&&(config.font=font),config};const defaultSpec={size:14,lHeight:21,style:"normal",weight:"normal",family:__webpack_require__(19).openSans.value,color:"#000"},seriesStyleToFlot=seriesStyle=>{if(!seriesStyle)return{};const lines=Object(external_kbnSharedDeps_Lodash_.get)(seriesStyle,"lines"),bars=Object(external_kbnSharedDeps_Lodash_.get)(seriesStyle,"bars"),fill=Object(external_kbnSharedDeps_Lodash_.get)(seriesStyle,"fill"),color=Object(external_kbnSharedDeps_Lodash_.get)(seriesStyle,"color"),stack=Object(external_kbnSharedDeps_Lodash_.get)(seriesStyle,"stack"),flotStyle={numbers:{show:!0},lines:{show:lines>0,lineWidth:lines,fillColor:color,fill:fill/10},bars:{show:bars>0,barWidth:bars,fill:1,align:"center",horizontal:Object(external_kbnSharedDeps_Lodash_.get)(seriesStyle,"horizontalBars",!1)},points:{show:!1},bubbles:{show:!0,fill:fill}};return null!=stack&&(flotStyle.stack=stack),color&&(flotStyle.color=color),flotStyle};function plotFunctionFactory(paletteService){return()=>{const{help:help,args:argHelp}=Object(i18n.u)().plot;return{name:"plot",aliases:[],type:"render",inputTypes:["pointseries"],help:help,args:{defaultStyle:{multi:!1,types:["seriesStyle"],help:argHelp.defaultStyle,default:"{seriesStyle points=5}"},font:{types:["style"],help:argHelp.font,default:"{font}"},legend:{types:["string","boolean"],help:argHelp.legend,default:"ne",options:[...Object.values(types.Legend),!1]},palette:{types:["palette"],help:argHelp.palette,default:"{palette}"},seriesStyle:{multi:!0,types:["seriesStyle"],help:argHelp.seriesStyle},xaxis:{types:["boolean","axisConfig"],help:argHelp.xaxis,default:!0},yaxis:{types:["boolean","axisConfig"],help:argHelp.yaxis,default:!0}},fn:(input,args)=>{const seriesStyles=Object(external_kbnSharedDeps_Lodash_.keyBy)(args.seriesStyle||[],"label")||{},sortedRows=input.rows,ticks=((columns,rows)=>{const ticks={x:{hash:{},counter:0},y:{hash:{},counter:0}};return"string"===Object(external_kbnSharedDeps_Lodash_.get)(columns,"x.type")&&rows.forEach(row=>{ticks.x.hash[row.x]||(ticks.x.hash[row.x]=ticks.x.counter++)}),"string"===Object(external_kbnSharedDeps_Lodash_.get)(columns,"y.type")&&rows.reverse().forEach(row=>{ticks.y.hash[row.y]||(ticks.y.hash[row.y]=ticks.y.counter++)}),ticks})(input.columns,sortedRows),font=args.font?(argFont=>{if(!argFont||!argFont.spec)return defaultSpec;const{fontSize:fontSize,lineHeight:lineHeight,fontStyle:fontStyle,fontWeight:fontWeight,fontFamily:fontFamily,color:color}=argFont.spec,size=fontSize&&Number(fontSize.replace("px","")),lHeight="string"==typeof lineHeight&&Number(lineHeight.replace("px",""));return{size:size&&!isNaN(size)?size:defaultSpec.size,lHeight:size&&!isNaN(size)?lHeight:defaultSpec.lHeight,style:fontStyle||defaultSpec.style,weight:fontWeight||defaultSpec.weight,family:fontFamily||defaultSpec.family,color:color||defaultSpec.color}})(args.font):{},data=Object(external_kbnSharedDeps_Lodash_.map)(Object(external_kbnSharedDeps_Lodash_.groupBy)(sortedRows,"color"),(series,label)=>{const seriesStyle={...args.defaultStyle,...seriesStyles[label]},flotStyle=seriesStyle?seriesStyleToFlot(seriesStyle):{};return{...flotStyle,label:label,data:series.map(point=>{const attrs={},x="string"===Object(external_kbnSharedDeps_Lodash_.get)(input.columns,"x.type")?ticks.x.hash[point.x]:point.x,y="string"===Object(external_kbnSharedDeps_Lodash_.get)(input.columns,"y.type")?ticks.y.hash[point.y]:point.y;return null!=point.size?attrs.size=point.size:Object(external_kbnSharedDeps_Lodash_.get)(seriesStyle,"points")&&(attrs.size=seriesStyle.points,Object(external_kbnSharedDeps_SaferLodashSet_.set)(flotStyle,"bubbles.size.min",seriesStyle.points)),null!=point.text&&(attrs.text=point.text),[x,y,attrs]})}}),output={type:"render",as:"plot",value:{font:args.font,data:Object(external_kbnSharedDeps_Lodash_.sortBy)(data,"label"),options:{canvas:!1,colors:paletteService.get(args.palette.name||"custom").getColors(data.length,args.palette.params),legend:Object(get_legend_config.a)(args.legend,data.length),grid:{borderWidth:0,borderColor:null,color:"rgba(0,0,0,0)",labelMargin:30,margin:{right:30,top:20,bottom:0,left:0}},xaxis:getFlotAxisConfig("x",args.xaxis,{columns:input.columns,ticks:ticks,font:font}),yaxis:getFlotAxisConfig("y",args.yaxis,{columns:input.columns,ticks:ticks,font:font}),series:{shadowSize:0,...seriesStyleToFlot(args.defaultStyle)}}}};return JSON.parse(JSON.stringify(output))}}}}var plugins_size=__webpack_require__(36),plugins_text=__webpack_require__(37);__webpack_require__(365);const{ReadOnlyBadge:application_strings}=i18n.d,renderApp=(coreStart,plugins,{element:element},canvasStore)=>{const{presentationUtil:presentationUtil}=plugins;return element.classList.add("canvas"),element.classList.add("canvasContainerWrapper"),external_kbnSharedDeps_ReactDom_default.a.render(external_kbnSharedDeps_React_default.a.createElement(public_.KibanaContextProvider,{services:{...plugins,...coreStart}},external_kbnSharedDeps_React_default.a.createElement(public_services.a,{providers:public_services.e},external_kbnSharedDeps_React_default.a.createElement(presentationUtil.ContextProvider,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.I18nProvider,null,external_kbnSharedDeps_React_default.a.createElement(lib.Provider,{store:canvasStore},external_kbnSharedDeps_React_default.a.createElement(components_app_App,null)))))),element),()=>{external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(element),canvasStore.dispatch(appUnload())}},initializeCanvas=async(coreSetup,coreStart,setupPlugins,startPlugins,registries,appUpdater)=>{await Object(public_services.f)(coreSetup,coreStart,setupPlugins,startPlugins,appUpdater);const canvasFunctions=[asset_asset,filtersFunctionFactory(initialize={timefilter:setupPlugins.data.query.timefilter.timefilter,prependBasePath:coreSetup.http.basePath.prepend,types:setupPlugins.expressions.getTypes(),paletteService:await setupPlugins.charts.palettes.getPalettes()}),timelionFunctionFactory(initialize),toFunctionFactory(initialize),(paletteService=initialize.paletteService,()=>{const{help:help,args:argHelp}=Object(i18n.u)().pie;return{name:"pie",aliases:[],type:"render",inputTypes:["pointseries"],help:help,args:{font:{types:["style"],help:argHelp.font,default:"{font}"},hole:{types:["number"],default:0,help:argHelp.hole},labelRadius:{types:["number"],default:100,help:argHelp.labelRadius},labels:{types:["boolean"],default:!0,help:argHelp.labels},legend:{types:["string","boolean"],help:argHelp.legend,default:!1,options:[...Object.values(types.Legend),!1]},palette:{types:["palette"],help:argHelp.palette,default:"{palette}"},radius:{types:["string","number"],help:argHelp.radius,default:"auto"},seriesStyle:{multi:!0,types:["seriesStyle"],help:argHelp.seriesStyle},tilt:{types:["number"],default:1,help:argHelp.tilt}},fn:(input,args)=>{const{tilt:tilt,radius:radius,labelRadius:labelRadius,labels:labels,hole:hole,legend:legend,palette:palette,font:font,seriesStyle:seriesStyle}=args,seriesStyles=Object(external_kbnSharedDeps_Lodash_.keyBy)(seriesStyle||[],"label")||{},data=Object(external_kbnSharedDeps_Lodash_.map)(Object(external_kbnSharedDeps_Lodash_.groupBy)(input.rows,"color"),(series,label="")=>{const item={label:label,data:series.map(point=>point.size||1)},style=seriesStyles[label];return style&&(item.color=Object(external_kbnSharedDeps_Lodash_.get)(style,"color")),item});return{type:"render",as:"pie",value:{font:font,data:data,options:{canvas:!1,colors:paletteService.get(palette.name||"custom").getColors(data.length,palette.params),legend:Object(get_legend_config.a)(legend,data.length),grid:{show:!1},series:{pie:{show:!0,innerRadius:Math.max(hole,0)/100,stroke:{width:0},label:{show:labels,radius:(labelRadius>=0?labelRadius:100)/100},tilt:tilt,radius:radius},bubbles:{show:!1},shadowSize:0}}}}}}}),plotFunctionFactory(initialize.paletteService)];var initialize,paletteService;for(const fn of canvasFunctions)public_services.e.expressions.getService().registerFunction(fn);createHistory();const canvasStore=await public_store_createStore(coreSetup);var functions;functions=Object.values(public_services.e.expressions.getService().getFunctions()),language.keywords=functions.map(fn=>fn.name),external_kbnSharedDeps_KbnMonaco_.monaco.languages.register({id:"canvas-expression"}),external_kbnSharedDeps_KbnMonaco_.monaco.languages.setMonarchTokensProvider("canvas-expression",language),Object(common.addRegistries)(registries_registries,{elements:elementsRegistry,transformUIs:transformRegistry,datasourceUIs:datasourceRegistry,modelUIs:modelRegistry,viewUIs:viewRegistry,argumentUIs:argTypeRegistry,templates:templatesRegistry,tagUIs:tagsRegistry,transitions:transitionsRegistry}),await async function(setupRegistries){const resolvedRegistries={},promises=Object.entries(setupRegistries).map(async([key,specs])=>{const resolved=await(await Promise.all(specs.map(fn=>"function"==typeof fn?fn():fn))).flat();resolvedRegistries[key]=resolved});await Promise.all(promises),Object(common.register)(registries_registries,resolvedRegistries)}(registries),coreStart.chrome.setBadge(coreStart.application.capabilities.canvas&&coreStart.application.capabilities.canvas.save?void 0:{text:application_strings.getText(),tooltip:application_strings.getTooltip(),iconType:"glasses"});const{docLinks:docLinks}=coreStart;var _reportUiCounter;return coreStart.chrome.setHelpExtension({appName:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.canvas.helpMenu.appName",{defaultMessage:"Canvas"}),links:[{linkType:"documentation",href:docLinks.links.canvas.guide}],content:domNode=>(external_kbnSharedDeps_ReactDom_default.a.render(external_kbnSharedDeps_React_default.a.createElement(HelpMenu,{functionRegistry:public_services.e.expressions.getService().getFunctions()}),domNode),()=>external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(domNode))}),setupPlugins.usageCollection&&(_reportUiCounter=setupPlugins.usageCollection.reportUiCounter,reportUiCounter=_reportUiCounter),canvasStore},teardownCanvas=(coreStart,startPlugins)=>{registries_registries={},Object(external_kbnSharedDeps_Lodash_.includes)($.plot.plugins,plugins_size.a)&&Object(external_kbnSharedDeps_Lodash_.remove)($.plot.plugins,plugins_size.a),Object(external_kbnSharedDeps_Lodash_.includes)($.plot.plugins,plugins_text.a)&&Object(external_kbnSharedDeps_Lodash_.remove)($.plot.plugins,plugins_text.a),coreStart.chrome.setBadge(void 0),coreStart.chrome.setHelpExtension(void 0),((win=Object(get_window.a)())=>{const instance=instances.get(win);instance&&instance.resetOnChange()})(),router_provider_router&&(router_provider_router.stop(),router_provider_router=void 0)}}])]);