/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(modules){function webpackJsonpCallback(data){for(var moduleId,chunkId,chunkIds=data[0],moreModules=data[1],i=0,resolves=[];i<chunkIds.length;i++)chunkId=chunkIds[i],Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]&&resolves.push(installedChunks[chunkId][0]),installedChunks[chunkId]=0;for(moduleId in moreModules)Object.prototype.hasOwnProperty.call(moreModules,moduleId)&&(modules[moduleId]=moreModules[moduleId]);for(parentJsonpFunction&&parentJsonpFunction(data);resolves.length;)resolves.shift()()}var installedModules={},installedChunks={2:0};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.e=function(chunkId){var promises=[],installedChunkData=installedChunks[chunkId];if(0!==installedChunkData)if(installedChunkData)promises.push(installedChunkData[2]);else{var promise=new Promise((function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var onScriptComplete,script=document.createElement("script");script.charset="utf-8",script.timeout=120,__webpack_require__.nc&&script.setAttribute("nonce",__webpack_require__.nc),script.src=function(chunkId){return __webpack_require__.p+"security.chunk."+chunkId+".js"}(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null,clearTimeout(timeout);var chunk=installedChunks[chunkId];if(0!==chunk){if(chunk){var errorType=event&&("load"===event.type?"missing":event.type),realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")",error.name="ChunkLoadError",error.type=errorType,error.request=realSrc,chunk[1](error)}installedChunks[chunkId]=void 0}};var timeout=setTimeout((function(){onScriptComplete({type:"timeout",target:script})}),12e4);script.onerror=script.onload=onScriptComplete,document.head.appendChild(script)}return Promise.all(promises)},__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__.oe=function(err){throw console.error(err),err};var jsonpArray=window.security_bundle_jsonpfunction=window.security_bundle_jsonpfunction||[],oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback,jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;__webpack_require__(__webpack_require__.s=42)}([function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,exports){module.exports=__kbnSharedDeps__.ReactRouterDom},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Breadcrumb})),__webpack_require__.d(__webpack_exports__,"b",(function(){return BreadcrumbsProvider})),__webpack_require__.d(__webpack_exports__,"c",(function(){return createBreadcrumbsChangeHandler}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_src_plugins_kibana_react_public__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6);const BreadcrumbsContext=Object(react__WEBPACK_IMPORTED_MODULE_0__.createContext)(void 0),Breadcrumb=({children:children,...breadcrumb})=>{const context=Object(react__WEBPACK_IMPORTED_MODULE_0__.useContext)(BreadcrumbsContext),component=react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(InnerBreadcrumb,{breadcrumb:breadcrumb},children);return context?component:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(BreadcrumbsProvider,null,component)},BreadcrumbsProvider=({children:children,onChange:onChange})=>{const{services:services}=Object(_src_plugins_kibana_react_public__WEBPACK_IMPORTED_MODULE_1__.useKibana)(),breadcrumbsRef=Object(react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]),handleChange=breadcrumbs=>{if(onChange)onChange(breadcrumbs);else if(services.chrome){createBreadcrumbsChangeHandler(services.chrome)(breadcrumbs)}};return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(BreadcrumbsContext.Provider,{value:{parents:[],onMount:breadcrumbs=>{breadcrumbs.length>breadcrumbsRef.current.length&&(breadcrumbsRef.current=breadcrumbs,handleChange(breadcrumbs))},onUnmount:breadcrumbs=>{breadcrumbs.length<breadcrumbsRef.current.length&&(breadcrumbsRef.current=breadcrumbs,handleChange(breadcrumbs))}}},children)},InnerBreadcrumb=({breadcrumb:breadcrumb,children:children})=>{const{parents:parents,onMount:onMount,onUnmount:onUnmount}=Object(react__WEBPACK_IMPORTED_MODULE_0__.useContext)(BreadcrumbsContext),nextParents=[...parents,breadcrumb];return Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>(onMount(nextParents),()=>onUnmount(parents)),[breadcrumb.text,breadcrumb.href]),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(BreadcrumbsContext.Provider,{value:{parents:nextParents,onMount:onMount,onUnmount:onUnmount}},children)};function createBreadcrumbsChangeHandler(chrome,setBreadcrumbs=chrome.setBreadcrumbs){return breadcrumbs=>{setBreadcrumbs(breadcrumbs),0===breadcrumbs.length?chrome.docTitle.reset():chrome.docTitle.change(function(breadcrumbs,maxBreadcrumbs=2){return breadcrumbs.slice(0,maxBreadcrumbs).reverse().map(({text:text})=>text)}(breadcrumbs))}}},function(module,exports,__webpack_require__){"use strict";(function(process){Object.defineProperty(exports,"__esModule",{value:!0}),exports.isPromise=function(obj){return!(!obj||"function"!=typeof obj.then)},exports.sleep=function(time){time||(time=0);return new Promise((function(res){return setTimeout(res,time)}))},exports.randomInt=function(min,max){return Math.floor(Math.random()*(max-min+1)+min)},exports.randomToken=function(){return Math.random().toString(36).substring(2)},exports.microSeconds=function(){var ms=(new Date).getTime();return ms===lastMs?(additional++,1e3*ms+additional):(lastMs=ms,additional=0,1e3*ms)},exports.isNode=void 0;var lastMs=0,additional=0;var isNode="[object process]"===Object.prototype.toString.call(void 0!==process?process:0);exports.isNode=isNode}).call(this,__webpack_require__(41))},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return tryDecodeURIComponent}));const tryDecodeURIComponent=uriComponent=>{try{return decodeURIComponent(uriComponent)}catch{return uriComponent}}},function(module,exports){module.exports=function(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,exports){module.exports=__kbnSharedDeps__.RxjsOperators},function(module,exports,__webpack_require__){"use strict";var memo,isOldIE=function(){return void 0===memo&&(memo=Boolean(window&&document&&document.all&&!window.atob)),memo},getTarget=function(){var memo={};return function(target){if(void 0===memo[target]){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}}(),stylesInDom=[];function getIndexByIdentifier(identifier){for(var result=-1,i=0;i<stylesInDom.length;i++)if(stylesInDom[i].identifier===identifier){result=i;break}return result}function modulesToDom(list,options){for(var idCountMap={},identifiers=[],i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],count=idCountMap[id]||0,identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier),obj={css:item[1],media:item[2],sourceMap:item[3]};-1!==index?(stylesInDom[index].references++,stylesInDom[index].updater(obj)):stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1}),identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style"),attributes=options.attributes||{};if(void 0===attributes.nonce){var nonce=__webpack_require__.nc;nonce&&(attributes.nonce=nonce)}if(Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])})),"function"==typeof options.insert)options.insert(style);else{var target=getTarget(options.insert||"head");if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");target.appendChild(style)}return style}var textStore,replaceText=(textStore=[],function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")});function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}function applyToTag(style,options,obj){var css=obj.css,media=obj.media,sourceMap=obj.sourceMap;if(media?style.setAttribute("media",media):style.removeAttribute("media"),sourceMap&&btoa&&(css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")),style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}var singleton=null,singletonCounter=0;function addStyle(obj,options){var style,update,remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else style=insertStyleElement(options),update=applyToTag.bind(null,style,options),remove=function(){!function(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style)}(style)};return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}module.exports=function(list,options){(options=options||{}).singleton||"boolean"==typeof options.singleton||(options.singleton=isOldIE());var lastIdentifiers=modulesToDom(list=list||[],options);return function(newList){if(newList=newList||[],"[object Array]"===Object.prototype.toString.call(newList)){for(var i=0;i<lastIdentifiers.length;i++){var index=getIndexByIdentifier(lastIdentifiers[i]);stylesInDom[index].references--}for(var newLastIdentifiers=modulesToDom(newList,options),_i=0;_i<lastIdentifiers.length;_i++){var _index=getIndexByIdentifier(lastIdentifiers[_i]);0===stylesInDom[_index].references&&(stylesInDom[_index].updater(),stylesInDom.splice(_index,1))}lastIdentifiers=newLastIdentifiers}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];return list.toString=function(){return this.map((function(item){var content=function(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=(sourceMap=cssMapping,base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64),"/*# ".concat(data," */")),sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}var sourceMap,base64,data;return[content].join("\n")}(item,useSourceMap);return item[2]?"@media ".concat(item[2]," {").concat(content,"}"):content})).join("")},list.i=function(modules,mediaQuery,dedupe){"string"==typeof modules&&(modules=[[null,modules,""]]);var alreadyImportedModules={};if(dedupe)for(var i=0;i<this.length;i++){var id=this[i][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);dedupe&&alreadyImportedModules[item[0]]||(mediaQuery&&(item[2]?item[2]="".concat(mediaQuery," and ").concat(item[2]):item[2]=mediaQuery),list.push(item))}},list}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return getUserDisplayName})),__webpack_require__.d(__webpack_exports__,"a",(function(){})),__webpack_require__.d(__webpack_exports__,"b",(function(){return canUserChangePassword})),__webpack_require__.d(__webpack_exports__,"c",(function(){return copyRole})),__webpack_require__.d(__webpack_exports__,"g",(function(){return isRoleDeprecated})),__webpack_require__.d(__webpack_exports__,"i",(function(){return isRoleReadOnly})),__webpack_require__.d(__webpack_exports__,"j",(function(){return isRoleReserved})),__webpack_require__.d(__webpack_exports__,"k",(function(){return isRoleSystem})),__webpack_require__.d(__webpack_exports__,"f",(function(){return isRoleAdmin})),__webpack_require__.d(__webpack_exports__,"h",(function(){return isRoleEnabled})),__webpack_require__.d(__webpack_exports__,"l",(function(){return prepareRoleClone})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getExtendedRoleDeprecationNotice}));__webpack_require__(20);function getUserDisplayName(user){return user.full_name||user.username}const REALMS_ELIGIBLE_FOR_PASSWORD_CHANGE=["reserved","native"];function canUserChangePassword(user){return REALMS_ELIGIBLE_FOR_PASSWORD_CHANGE.includes(user.authentication_realm.type)&&"anonymous"!==user.authentication_provider.type}__webpack_require__(31),__webpack_require__(23),__webpack_require__(32);var external_kbnSharedDeps_Lodash_=__webpack_require__(16),external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);function isRoleEnabled(role){var _role$transient_metad,_role$transient_metad2;return null===(_role$transient_metad=null===(_role$transient_metad2=role.transient_metadata)||void 0===_role$transient_metad2?void 0:_role$transient_metad2.enabled)||void 0===_role$transient_metad||_role$transient_metad}function isRoleReserved(role){var _ref,_role$metadata;return null!==(_ref=null===(_role$metadata=role.metadata)||void 0===_role$metadata?void 0:_role$metadata._reserved)&&void 0!==_ref&&_ref}function isRoleDeprecated(role){var _ref2,_role$metadata2;return null!==(_ref2=null===(_role$metadata2=role.metadata)||void 0===_role$metadata2?void 0:_role$metadata2._deprecated)&&void 0!==_ref2&&_ref2}function isRoleSystem(role){var _ref3,_role$name;return null!==(_ref3=isRoleReserved(role)&&(null===(_role$name=role.name)||void 0===_role$name?void 0:_role$name.endsWith("_system")))&&void 0!==_ref3&&_ref3}function isRoleAdmin(role){var _ref4,_role$name2;return null!==(_ref4=isRoleReserved(role)&&((null===(_role$name2=role.name)||void 0===_role$name2?void 0:_role$name2.endsWith("_admin"))||"superuser"===role.name))&&void 0!==_ref4&&_ref4}function getExtendedRoleDeprecationNotice(role){return external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.common.extendedRoleDeprecationNotice",{defaultMessage:"The {roleName} role is deprecated. {reason}",values:{roleName:role.name,reason:getRoleDeprecatedReason(role)}})}function isRoleReadOnly(role){var _role$_transform_erro,_role$_transform_erro2;return isRoleReserved(role)||(null!==(_role$_transform_erro=null===(_role$_transform_erro2=role._transform_error)||void 0===_role$_transform_erro2?void 0:_role$_transform_erro2.length)&&void 0!==_role$_transform_erro?_role$_transform_erro:0)>0}function copyRole(role){return Object(external_kbnSharedDeps_Lodash_.cloneDeep)(role)}function prepareRoleClone(role){const clone=copyRole(role);return clone.name="",clone}function getRoleDeprecatedReason(role){var _role$metadata$_depre,_role$metadata3;return null!==(_role$metadata$_depre=null===(_role$metadata3=role.metadata)||void 0===_role$metadata3?void 0:_role$metadata3._deprecated_reason)&&void 0!==_role$metadata$_depre?_role$metadata$_depre:""}__webpack_require__(9)},function(module,exports){module.exports=__kbnSharedDeps__.Lodash},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"UserAPIClient",(function(){return UserAPIClient}));const usersUrl="/internal/security/users";class UserAPIClient{constructor(http){this.http=http}async getUsers(){return await this.http.get(usersUrl)}async getUser(username){return await this.http.get(`${usersUrl}/${encodeURIComponent(username)}`)}async deleteUser(username){await this.http.delete(`${usersUrl}/${encodeURIComponent(username)}`)}async saveUser(user){await this.http.post(`${usersUrl}/${encodeURIComponent(user.username)}`,{body:JSON.stringify(user)})}async changePassword(username,password,currentPassword){const data={newPassword:password};currentPassword&&(data.password=currentPassword),await this.http.post(`${usersUrl}/${encodeURIComponent(username)}/password`,{body:JSON.stringify(data)})}async disableUser(username){await this.http.post(`${usersUrl}/${encodeURIComponent(username)}/_disable`)}async enableUser(username){await this.http.post(`${usersUrl}/${encodeURIComponent(username)}/_enable`)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AUTH_PROVIDER_HINT_QUERY_STRING_PARAMETER})),__webpack_require__.d(__webpack_exports__,"b",(function(){return LOGOUT_PROVIDER_QUERY_STRING_PARAMETER})),__webpack_require__.d(__webpack_exports__,"c",(function(){return LOGOUT_REASON_QUERY_STRING_PARAMETER})),__webpack_require__.d(__webpack_exports__,"f",(function(){return NEXT_URL_QUERY_STRING_PARAMETER})),__webpack_require__.d(__webpack_exports__,"e",(function(){return NAME_REGEX})),__webpack_require__.d(__webpack_exports__,"d",(function(){return MAX_NAME_LENGTH}));const AUTH_PROVIDER_HINT_QUERY_STRING_PARAMETER="auth_provider_hint",LOGOUT_PROVIDER_QUERY_STRING_PARAMETER="provider",LOGOUT_REASON_QUERY_STRING_PARAMETER="msg",NEXT_URL_QUERY_STRING_PARAMETER="next",NAME_REGEX=/^(?! )[a-zA-Z0-9 !"#$%&'()*+,\-./\\:;<=>?@\[\]^_`{|}~]*[a-zA-Z0-9!"#$%&'()*+,\-./\\:;<=>?@\[\]^_`{|}~]$/,MAX_NAME_LENGTH=1024},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AuthenticationProvider})),__webpack_require__.d(__webpack_exports__,"b",(function(){return useCurrentUser}));var constate__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(36),constate__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(constate__WEBPACK_IMPORTED_MODULE_0__),react_use_lib_useAsync__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(37),react_use_lib_useAsync__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react_use_lib_useAsync__WEBPACK_IMPORTED_MODULE_1__);const[AuthenticationProvider,useAuthentication]=constate__WEBPACK_IMPORTED_MODULE_0___default()(({authc:authc})=>authc);function useCurrentUser(){const authc=useAuthentication();return react_use_lib_useAsync__WEBPACK_IMPORTED_MODULE_1___default()(authc.getCurrentUser,[authc])}},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"UserAPIClient",(function(){return user_api_client.UserAPIClient})),__webpack_require__.d(__webpack_exports__,"usersManagementApp",(function(){return usersManagementApp}));var user_api_client=__webpack_require__(17),external_kbnSharedDeps_React_=__webpack_require__(0),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_ReactDom_=__webpack_require__(5),external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(3),external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(4),public_=__webpack_require__(6),breadcrumb=__webpack_require__(7),use_current_user=__webpack_require__(19),url_utils=__webpack_require__(10);const usersManagementApp=Object.freeze({id:"users",create({authc:authc,getStartServices:getStartServices}){return{id:this.id,order:10,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.management.usersTitle",{defaultMessage:"Users"}),async mount({element:element,setBreadcrumbs:setBreadcrumbs,history:history}){const[[coreStart],{UsersGridPage:UsersGridPage},{CreateUserPage:CreateUserPage,EditUserPage:EditUserPage},{UserAPIClient:UserAPIClient},{RolesAPIClient:RolesAPIClient}]=await Promise.all([getStartServices(),__webpack_require__.e(9).then(__webpack_require__.bind(null,310)),__webpack_require__.e(7).then(__webpack_require__.bind(null,305)),Promise.resolve().then(__webpack_require__.bind(null,17)),Promise.resolve().then(__webpack_require__.bind(null,26))]);return Object(external_kbnSharedDeps_ReactDom_.render)(external_kbnSharedDeps_React_default.a.createElement(Providers,{services:coreStart,history:history,authc:authc,onChange:Object(breadcrumb.c)(coreStart.chrome,setBreadcrumbs)},external_kbnSharedDeps_React_default.a.createElement(breadcrumb.a,{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.users.breadcrumb",{defaultMessage:"Users"}),href:"/"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Switch,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:["/",""],exact:!0},external_kbnSharedDeps_React_default.a.createElement(UsersGridPage,{notifications:coreStart.notifications,userAPIClient:new UserAPIClient(coreStart.http),rolesAPIClient:new RolesAPIClient(coreStart.http),history:history,navigateToApp:coreStart.application.navigateToApp})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:"/create"},external_kbnSharedDeps_React_default.a.createElement(breadcrumb.a,{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.users.editUserPage.createBreadcrumb",{defaultMessage:"Create"}),href:"/create"},external_kbnSharedDeps_React_default.a.createElement(CreateUserPage,null))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:"/edit/:username",render:props=>{const username=Object(url_utils.a)(props.match.params.username);return external_kbnSharedDeps_React_default.a.createElement(breadcrumb.a,{text:username,href:"/edit/"+encodeURIComponent(username)},external_kbnSharedDeps_React_default.a.createElement(EditUserPage,{username:username}))}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:"/edit"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Redirect,{to:"/create"}))))),element),()=>{Object(external_kbnSharedDeps_ReactDom_.unmountComponentAtNode)(element)}}}}}),Providers=({services:services,history:history,authc:authc,onChange:onChange,children:children})=>external_kbnSharedDeps_React_default.a.createElement(public_.KibanaContextProvider,{services:services},external_kbnSharedDeps_React_default.a.createElement(use_current_user.a,{authc:authc},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.I18nProvider,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Router,{history:history},external_kbnSharedDeps_React_default.a.createElement(breadcrumb.b,{onChange:onChange},children)))))},function(module,exports){},function(module,exports){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fillOptionsWithDefaults=function(){var originalOptions=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},options=JSON.parse(JSON.stringify(originalOptions));void 0===options.webWorkerSupport&&(options.webWorkerSupport=!0);options.idb||(options.idb={});options.idb.ttl||(options.idb.ttl=45e3);options.idb.fallbackInterval||(options.idb.fallbackInterval=150);options.localstorage||(options.localstorage={});options.localstorage.removeTimeout||(options.localstorage.removeTimeout=6e4);originalOptions.methods&&(options.methods=originalOptions.methods);options.node||(options.node={});options.node.ttl||(options.node.ttl=12e4);void 0===options.node.useFastPath&&(options.node.useFastPath=!0);return options}},function(module,exports){module.exports=__kbnSharedDeps__.Rxjs},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"rolesManagementApp",(function(){return rolesManagementApp})),__webpack_require__.d(__webpack_exports__,"RolesAPIClient",(function(){return roles_api_client.RolesAPIClient}));var external_kbnSharedDeps_React_=__webpack_require__(0),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_ReactDom_=__webpack_require__(5),external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(3),external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),url_utils=__webpack_require__(10);const rolesManagementApp=Object.freeze({id:"roles",create({license:license,fatalErrors:fatalErrors,getStartServices:getStartServices}){return{id:this.id,order:20,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.management.rolesTitle",{defaultMessage:"Roles"}),async mount({element:element,setBreadcrumbs:setBreadcrumbs,history:history}){const rolesBreadcrumbs=[{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.roles.breadcrumb",{defaultMessage:"Roles"}),href:"/"}],[[{application:application,docLinks:docLinks,http:http,i18n:i18nStart,notifications:notifications},{data:data,features:features,spaces:spaces}],{RolesGridPage:RolesGridPage},{EditRolePage:EditRolePage},{RolesAPIClient:RolesAPIClient},{IndicesAPIClient:IndicesAPIClient},{PrivilegesAPIClient:PrivilegesAPIClient},{UserAPIClient:UserAPIClient}]=await Promise.all([getStartServices(),__webpack_require__.e(12).then(__webpack_require__.bind(null,308)),__webpack_require__.e(3).then(__webpack_require__.bind(null,302)),Promise.resolve().then(__webpack_require__.bind(null,29)),__webpack_require__.e(17).then(__webpack_require__.bind(null,300)),__webpack_require__.e(18).then(__webpack_require__.bind(null,301)),Promise.resolve().then(__webpack_require__.bind(null,21))]),rolesAPIClient=new RolesAPIClient(http),RolesGridPageWithBreadcrumbs=()=>(setBreadcrumbs(rolesBreadcrumbs),external_kbnSharedDeps_React_default.a.createElement(RolesGridPage,{notifications:notifications,rolesAPIClient:rolesAPIClient,history:history})),EditRolePageWithBreadcrumbs=({action:action})=>{const{roleName:roleName}=Object(external_kbnSharedDeps_ReactRouterDom_.useParams)(),decodedRoleName=roleName?Object(url_utils.a)(roleName):void 0;setBreadcrumbs([...rolesBreadcrumbs,"edit"===action&&roleName?{text:decodedRoleName,href:"/edit/"+encodeURIComponent(roleName)}:{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.roles.createBreadcrumb",{defaultMessage:"Create"})}]);const spacesApiUi=null==spaces?void 0:spaces.ui;return external_kbnSharedDeps_React_default.a.createElement(EditRolePage,{action:action,roleName:decodedRoleName,rolesAPIClient:rolesAPIClient,userAPIClient:new UserAPIClient(http),indicesAPIClient:new IndicesAPIClient(http),privilegesAPIClient:new PrivilegesAPIClient(http),getFeatures:features.getFeatures,http:http,notifications:notifications,fatalErrors:fatalErrors,license:license,docLinks:docLinks,uiCapabilities:application.capabilities,indexPatterns:data.indexPatterns,history:history,spacesApiUi:spacesApiUi})};return Object(external_kbnSharedDeps_ReactDom_.render)(external_kbnSharedDeps_React_default.a.createElement(i18nStart.Context,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Router,{history:history},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Switch,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:["/",""],exact:!0},external_kbnSharedDeps_React_default.a.createElement(RolesGridPageWithBreadcrumbs,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:"/edit/:roleName?"},external_kbnSharedDeps_React_default.a.createElement(EditRolePageWithBreadcrumbs,{action:"edit"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:"/clone/:roleName"},external_kbnSharedDeps_React_default.a.createElement(EditRolePageWithBreadcrumbs,{action:"clone"}))))),element),()=>{Object(external_kbnSharedDeps_ReactDom_.unmountComponentAtNode)(element)}}}}});var roles_api_client=__webpack_require__(29)},function(module,__webpack_exports__,__webpack_require__){"use strict";function isGlobalPrivilegeDefinition(privilegeSpec){return!privilegeSpec.spaces||0===privilegeSpec.spaces.length||privilegeSpec.spaces.includes("*")}__webpack_require__.d(__webpack_exports__,"a",(function(){return isGlobalPrivilegeDefinition}))},function(module,exports,__webpack_require__){"use strict";var punycode=__webpack_require__(44),util=__webpack_require__(47);function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}exports.parse=urlParse,exports.resolve=function(source,relative){return urlParse(source,!1,!0).resolve(relative)},exports.resolveObject=function(source,relative){return source?urlParse(source,!1,!0).resolveObject(relative):relative},exports.format=function(obj){util.isString(obj)&&(obj=urlParse(obj));return obj instanceof Url?obj.format():Url.prototype.format.call(obj)},exports.Url=Url;var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,unwise=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=__webpack_require__(48);function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&util.isObject(url)&&url instanceof Url)return url;var u=new Url;return u.parse(url,parseQueryString,slashesDenoteHost),u}Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!util.isString(url))throw new TypeError("Parameter 'url' must be a string, not "+typeof url);var queryIndex=url.indexOf("?"),splitter=-1!==queryIndex&&queryIndex<url.indexOf("#")?"?":"#",uSplit=url.split(splitter);uSplit[0]=uSplit[0].replace(/\\/g,"/");var rest=url=uSplit.join(splitter);if(rest=rest.trim(),!slashesDenoteHost&&1===url.split("#").length){var simplePath=simplePathPattern.exec(rest);if(simplePath)return this.path=rest,this.href=rest,this.pathname=simplePath[1],simplePath[2]?(this.search=simplePath[2],this.query=parseQueryString?querystring.parse(this.search.substr(1)):this.search.substr(1)):parseQueryString&&(this.search="",this.query={}),this}var proto=protocolPattern.exec(rest);if(proto){var lowerProto=(proto=proto[0]).toLowerCase();this.protocol=lowerProto,rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes="//"===rest.substr(0,2);!slashes||proto&&hostlessProtocol[proto]||(rest=rest.substr(2),this.slashes=!0)}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){for(var auth,atSign,hostEnd=-1,i=0;i<hostEndingChars.length;i++){-1!==(hec=rest.indexOf(hostEndingChars[i]))&&(-1===hostEnd||hec<hostEnd)&&(hostEnd=hec)}-1!==(atSign=-1===hostEnd?rest.lastIndexOf("@"):rest.lastIndexOf("@",hostEnd))&&(auth=rest.slice(0,atSign),rest=rest.slice(atSign+1),this.auth=decodeURIComponent(auth)),hostEnd=-1;for(i=0;i<nonHostChars.length;i++){var hec;-1!==(hec=rest.indexOf(nonHostChars[i]))&&(-1===hostEnd||hec<hostEnd)&&(hostEnd=hec)}-1===hostEnd&&(hostEnd=rest.length),this.host=rest.slice(0,hostEnd),rest=rest.slice(hostEnd),this.parseHost(),this.hostname=this.hostname||"";var ipv6Hostname="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!ipv6Hostname)for(var hostparts=this.hostname.split(/\./),l=(i=0,hostparts.length);i<l;i++){var part=hostparts[i];if(part&&!part.match(hostnamePartPattern)){for(var newpart="",j=0,k=part.length;j<k;j++)part.charCodeAt(j)>127?newpart+="x":newpart+=part[j];if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i),notHost=hostparts.slice(i+1),bit=part.match(hostnamePartStart);bit&&(validParts.push(bit[1]),notHost.unshift(bit[2])),notHost.length&&(rest="/"+notHost.join(".")+rest),this.hostname=validParts.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),ipv6Hostname||(this.hostname=punycode.toASCII(this.hostname));var p=this.port?":"+this.port:"",h=this.hostname||"";this.host=h+p,this.href+=this.host,ipv6Hostname&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==rest[0]&&(rest="/"+rest))}if(!unsafeProtocol[lowerProto])for(i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i];if(-1!==rest.indexOf(ae)){var esc=encodeURIComponent(ae);esc===ae&&(esc=escape(ae)),rest=rest.split(ae).join(esc)}}var hash=rest.indexOf("#");-1!==hash&&(this.hash=rest.substr(hash),rest=rest.slice(0,hash));var qm=rest.indexOf("?");if(-1!==qm?(this.search=rest.substr(qm),this.query=rest.substr(qm+1),parseQueryString&&(this.query=querystring.parse(this.query)),rest=rest.slice(0,qm)):parseQueryString&&(this.search="",this.query={}),rest&&(this.pathname=rest),slashedProtocol[lowerProto]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){p=this.pathname||"";var s=this.search||"";this.path=p+s}return this.href=this.format(),this},Url.prototype.format=function(){var auth=this.auth||"";auth&&(auth=(auth=encodeURIComponent(auth)).replace(/%3A/i,":"),auth+="@");var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=!1,query="";this.host?host=auth+this.host:this.hostname&&(host=auth+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(host+=":"+this.port)),this.query&&util.isObject(this.query)&&Object.keys(this.query).length&&(query=querystring.stringify(this.query));var search=this.search||query&&"?"+query||"";return protocol&&":"!==protocol.substr(-1)&&(protocol+=":"),this.slashes||(!protocol||slashedProtocol[protocol])&&!1!==host?(host="//"+(host||""),pathname&&"/"!==pathname.charAt(0)&&(pathname="/"+pathname)):host||(host=""),hash&&"#"!==hash.charAt(0)&&(hash="#"+hash),search&&"?"!==search.charAt(0)&&(search="?"+search),protocol+host+(pathname=pathname.replace(/[?#]/g,(function(match){return encodeURIComponent(match)})))+(search=search.replace("#","%23"))+hash},Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,!1,!0)).format()},Url.prototype.resolveObject=function(relative){if(util.isString(relative)){var rel=new Url;rel.parse(relative,!1,!0),relative=rel}for(var result=new Url,tkeys=Object.keys(this),tk=0;tk<tkeys.length;tk++){var tkey=tkeys[tk];result[tkey]=this[tkey]}if(result.hash=relative.hash,""===relative.href)return result.href=result.format(),result;if(relative.slashes&&!relative.protocol){for(var rkeys=Object.keys(relative),rk=0;rk<rkeys.length;rk++){var rkey=rkeys[rk];"protocol"!==rkey&&(result[rkey]=relative[rkey])}return slashedProtocol[result.protocol]&&result.hostname&&!result.pathname&&(result.path=result.pathname="/"),result.href=result.format(),result}if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){for(var keys=Object.keys(relative),v=0;v<keys.length;v++){var k=keys[v];result[k]=relative[k]}return result.href=result.format(),result}if(result.protocol=relative.protocol,relative.host||hostlessProtocol[relative.protocol])result.pathname=relative.pathname;else{for(var relPath=(relative.pathname||"").split("/");relPath.length&&!(relative.host=relPath.shift()););relative.host||(relative.host=""),relative.hostname||(relative.hostname=""),""!==relPath[0]&&relPath.unshift(""),relPath.length<2&&relPath.unshift(""),result.pathname=relPath.join("/")}if(result.search=relative.search,result.query=relative.query,result.host=relative.host||"",result.auth=relative.auth,result.hostname=relative.hostname||relative.host,result.port=relative.port,result.pathname||result.search){var p=result.pathname||"",s=result.search||"";result.path=p+s}return result.slashes=result.slashes||relative.slashes,result.href=result.format(),result}var isSourceAbs=result.pathname&&"/"===result.pathname.charAt(0),isRelAbs=relative.host||relative.pathname&&"/"===relative.pathname.charAt(0),mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],psychotic=(relPath=relative.pathname&&relative.pathname.split("/")||[],result.protocol&&!slashedProtocol[result.protocol]);if(psychotic&&(result.hostname="",result.port=null,result.host&&(""===srcPath[0]?srcPath[0]=result.host:srcPath.unshift(result.host)),result.host="",relative.protocol&&(relative.hostname=null,relative.port=null,relative.host&&(""===relPath[0]?relPath[0]=relative.host:relPath.unshift(relative.host)),relative.host=null),mustEndAbs=mustEndAbs&&(""===relPath[0]||""===srcPath[0])),isRelAbs)result.host=relative.host||""===relative.host?relative.host:result.host,result.hostname=relative.hostname||""===relative.hostname?relative.hostname:result.hostname,result.search=relative.search,result.query=relative.query,srcPath=relPath;else if(relPath.length)srcPath||(srcPath=[]),srcPath.pop(),srcPath=srcPath.concat(relPath),result.search=relative.search,result.query=relative.query;else if(!util.isNullOrUndefined(relative.search)){if(psychotic)result.hostname=result.host=srcPath.shift(),(authInHost=!!(result.host&&result.host.indexOf("@")>0)&&result.host.split("@"))&&(result.auth=authInHost.shift(),result.host=result.hostname=authInHost.shift());return result.search=relative.search,result.query=relative.query,util.isNull(result.pathname)&&util.isNull(result.search)||(result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")),result.href=result.format(),result}if(!srcPath.length)return result.pathname=null,result.search?result.path="/"+result.search:result.path=null,result.href=result.format(),result;for(var last=srcPath.slice(-1)[0],hasTrailingSlash=(result.host||relative.host||srcPath.length>1)&&("."===last||".."===last)||""===last,up=0,i=srcPath.length;i>=0;i--)"."===(last=srcPath[i])?srcPath.splice(i,1):".."===last?(srcPath.splice(i,1),up++):up&&(srcPath.splice(i,1),up--);if(!mustEndAbs&&!removeAllDots)for(;up--;up)srcPath.unshift("..");!mustEndAbs||""===srcPath[0]||srcPath[0]&&"/"===srcPath[0].charAt(0)||srcPath.unshift(""),hasTrailingSlash&&"/"!==srcPath.join("/").substr(-1)&&srcPath.push("");var authInHost,isAbsolute=""===srcPath[0]||srcPath[0]&&"/"===srcPath[0].charAt(0);psychotic&&(result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"",(authInHost=!!(result.host&&result.host.indexOf("@")>0)&&result.host.split("@"))&&(result.auth=authInHost.shift(),result.host=result.hostname=authInHost.shift()));return(mustEndAbs=mustEndAbs||result.host&&srcPath.length)&&!isAbsolute&&srcPath.unshift(""),srcPath.length?result.pathname=srcPath.join("/"):(result.pathname=null,result.path=null),util.isNull(result.pathname)&&util.isNull(result.search)||(result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")),result.auth=relative.auth||result.auth,result.slashes=result.slashes||relative.slashes,result.href=result.format(),result},Url.prototype.parseHost=function(){var host=this.host,port=portPattern.exec(host);port&&(":"!==(port=port[0])&&(this.port=port.substr(1)),host=host.substr(0,host.length-port.length)),host&&(this.hostname=host)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"RolesAPIClient",(function(){return RolesAPIClient}));var _common_model__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15),_edit_role_privilege_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(27);class RolesAPIClient{constructor(http){this.http=http}async getRoles(){return await this.http.get("/api/security/role")}async getRole(roleName){return await this.http.get("/api/security/role/"+encodeURIComponent(roleName))}async deleteRole(roleName){await this.http.delete("/api/security/role/"+encodeURIComponent(roleName))}async saveRole({role:role,spacesEnabled:spacesEnabled}){await this.http.put("/api/security/role/"+encodeURIComponent(role.name),{body:JSON.stringify(this.transformRoleForSave(Object(_common_model__WEBPACK_IMPORTED_MODULE_0__.c)(role),spacesEnabled))})}transformRoleForSave(role,spacesEnabled){return role.elasticsearch.indices=role.elasticsearch.indices.filter(indexPrivilege=>!(indexPrivilege=>0===indexPrivilege.names.length)(indexPrivilege)),role.elasticsearch.indices.forEach(index=>index.query||delete index.query),spacesEnabled||(role.kibana=role.kibana.filter(_edit_role_privilege_utils__WEBPACK_IMPORTED_MODULE_1__.a)),role.kibana.forEach(kibanaPrivilege=>{kibanaPrivilege.base.length>0&&(kibanaPrivilege.feature={})}),delete role.name,delete role.transient_metadata,delete role._unrecognized_applications,delete role._transform_error,role}}},function(module,exports){module.exports=__kbnSharedDeps__.TsLib},function(module,exports){},function(module,exports){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;function now(){return(new Date).getTime()}var _default=function(ttl){var set=new Set,timeMap=new Map;this.has=set.has.bind(set),this.add=function(value){timeMap.set(value,now()),set.add(value),function(){var olderThen=now()-ttl,iterator=set[Symbol.iterator]();for(;;){var value=iterator.next().value;if(!value)return;if(!(timeMap.get(value)<olderThen))return;timeMap.delete(value),set.delete(value)}}()},this.clear=function(){set.clear(),timeMap.clear()}};exports.default=_default},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/home/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("entry/core/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var React=__webpack_require__(0);function createUseContext(context){return function(){var value=React.useContext(context);return value}}exports.default=function(useValue){for(var _len=arguments.length,splitValues=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)splitValues[_key-1]=arguments[_key];var Context=React.createContext("_NP_"),Provider=function(props){var value=useValue(props),createMemoDeps=splitValues[0],deps=createMemoDeps&&createMemoDeps(value);var memoizedValue=Array.isArray(deps)?React.useMemo((function(){return value}),deps):value;return React.createElement(Context.Provider,{value:memoizedValue},props.children)},useContext=createUseContext(Context);useContext.Context=Context,useContext.Provider=Provider;var tuple=[];if(splitValues.length){var contexts=[],SplitProvider=function(props){for(var value=useValue(props),children=props.children,i=0;i<contexts.length;i+=1){var context=contexts[i],splitValue=splitValues[i];children=React.createElement(context.Provider,{value:splitValue(value)},children)}return children};0,tuple.push(SplitProvider);for(var i=0;i<splitValues.length;i+=1){var context=React.createContext("_NP_");contexts.push(context),tuple.push(createUseContext(context))}}else tuple.push(Provider,createUseContext(Context));for(var _i=0;_i<tuple.length;_i+=1)useContext[_i]=tuple[_i];return"function"==typeof Symbol&&Symbol.iterator&&(useContext[Symbol.iterator]=function(){return tuple[Symbol.iterator]()}),useContext}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=__webpack_require__(30),react_1=__webpack_require__(0),useAsyncFn_1=tslib_1.__importDefault(__webpack_require__(40));exports.default=function(fn,deps){void 0===deps&&(deps=[]);var _a=useAsyncFn_1.default(fn,deps,{loading:!0}),state=_a[0],callback=_a[1];return react_1.useEffect((function(){callback()}),[callback]),state}},function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(61);module.exports={BroadcastChannel:_index.BroadcastChannel,createLeaderElection:_index.createLeaderElection,clearNodeFolder:_index.clearNodeFolder,enforceOptions:_index.enforceOptions}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ManagementService",(function(){return management_service_ManagementService})),__webpack_require__.d(__webpack_exports__,"UserAPIClient",(function(){return user_api_client.UserAPIClient}));var external_kbnSharedDeps_React_=__webpack_require__(0),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_ReactDom_=__webpack_require__(5),external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(3),external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(4),public_=__webpack_require__(6),breadcrumb=__webpack_require__(7),use_current_user=__webpack_require__(19);const apiKeysManagementApp=Object.freeze({id:"api_keys",create({authc:authc,getStartServices:getStartServices}){return{id:this.id,order:30,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.management.apiKeysTitle",{defaultMessage:"API keys"}),async mount({element:element,setBreadcrumbs:setBreadcrumbs,history:history}){const[[coreStart],{APIKeysGridPage:APIKeysGridPage},{APIKeysAPIClient:APIKeysAPIClient}]=await Promise.all([getStartServices(),__webpack_require__.e(8).then(__webpack_require__.bind(null,304)),__webpack_require__.e(15).then(__webpack_require__.bind(null,117))]);return Object(external_kbnSharedDeps_ReactDom_.render)(external_kbnSharedDeps_React_default.a.createElement(Providers,{services:coreStart,history:history,authc:authc,onChange:Object(breadcrumb.c)(coreStart.chrome,setBreadcrumbs)},external_kbnSharedDeps_React_default.a.createElement(breadcrumb.a,{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.management.apiKeysTitle",{defaultMessage:"API keys"}),href:"/"},external_kbnSharedDeps_React_default.a.createElement(APIKeysGridPage,{history:history,notifications:coreStart.notifications,apiKeysAPIClient:new APIKeysAPIClient(coreStart.http)}))),element),()=>{Object(external_kbnSharedDeps_ReactDom_.unmountComponentAtNode)(element)}}}}}),Providers=({services:services,history:history,authc:authc,onChange:onChange,children:children})=>external_kbnSharedDeps_React_default.a.createElement(public_.KibanaContextProvider,{services:services},external_kbnSharedDeps_React_default.a.createElement(use_current_user.a,{authc:authc},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.I18nProvider,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Router,{history:history},external_kbnSharedDeps_React_default.a.createElement(breadcrumb.b,{onChange:onChange},children)))));var url_utils=__webpack_require__(10);const roleMappingsManagementApp=Object.freeze({id:"role_mappings",create({getStartServices:getStartServices}){return{id:this.id,order:40,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.management.roleMappingsTitle",{defaultMessage:"Role Mappings"}),async mount({element:element,setBreadcrumbs:setBreadcrumbs,history:history}){const[coreStart]=await getStartServices(),roleMappingsBreadcrumbs=[{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.roleMapping.breadcrumb",{defaultMessage:"Role Mappings"}),href:"/"}],[[core],{RoleMappingsGridPage:RoleMappingsGridPage},{EditRoleMappingPage:EditRoleMappingPage},{RoleMappingsAPIClient:RoleMappingsAPIClient},{RolesAPIClient:RolesAPIClient}]=await Promise.all([getStartServices(),__webpack_require__.e(10).then(__webpack_require__.bind(null,307)),__webpack_require__.e(5).then(__webpack_require__.bind(null,303)),__webpack_require__.e(16).then(__webpack_require__.bind(null,299)),Promise.resolve().then(__webpack_require__.bind(null,26))]),roleMappingsAPIClient=new RoleMappingsAPIClient(core.http),RoleMappingsGridPageWithBreadcrumbs=()=>(setBreadcrumbs(roleMappingsBreadcrumbs),external_kbnSharedDeps_React_default.a.createElement(RoleMappingsGridPage,{notifications:core.notifications,rolesAPIClient:new RolesAPIClient(core.http),roleMappingsAPI:roleMappingsAPIClient,docLinks:core.docLinks,history:history,navigateToApp:coreStart.application.navigateToApp})),EditRoleMappingsPageWithBreadcrumbs=()=>{const{name:name}=Object(external_kbnSharedDeps_ReactRouterDom_.useParams)(),decodedName=name?Object(url_utils.a)(name):void 0;return setBreadcrumbs([...roleMappingsBreadcrumbs,name?{text:decodedName,href:"/edit/"+encodeURIComponent(name)}:{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.roleMappings.createBreadcrumb",{defaultMessage:"Create"})}]),external_kbnSharedDeps_React_default.a.createElement(EditRoleMappingPage,{name:decodedName,roleMappingsAPI:roleMappingsAPIClient,rolesAPIClient:new RolesAPIClient(core.http),notifications:core.notifications,docLinks:core.docLinks,history:history})};return Object(external_kbnSharedDeps_ReactDom_.render)(external_kbnSharedDeps_React_default.a.createElement(public_.KibanaContextProvider,{services:core},external_kbnSharedDeps_React_default.a.createElement(core.i18n.Context,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Router,{history:history},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Switch,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:["/",""],exact:!0},external_kbnSharedDeps_React_default.a.createElement(RoleMappingsGridPageWithBreadcrumbs,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:"/edit/:name?"},external_kbnSharedDeps_React_default.a.createElement(EditRoleMappingsPageWithBreadcrumbs,null)))))),element),()=>{Object(external_kbnSharedDeps_ReactDom_.unmountComponentAtNode)(element)}}}}});var roles=__webpack_require__(26),users=__webpack_require__(21);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class management_service_ManagementService{constructor(){_defineProperty(this,"license",void 0),_defineProperty(this,"licenseFeaturesSubscription",void 0),_defineProperty(this,"securitySection",void 0)}setup({getStartServices:getStartServices,management:management,authc:authc,license:license,fatalErrors:fatalErrors}){this.license=license,this.securitySection=management.sections.section.security,this.securitySection.registerApp(users.usersManagementApp.create({authc:authc,getStartServices:getStartServices})),this.securitySection.registerApp(roles.rolesManagementApp.create({fatalErrors:fatalErrors,license:license,getStartServices:getStartServices})),this.securitySection.registerApp(apiKeysManagementApp.create({authc:authc,getStartServices:getStartServices})),this.securitySection.registerApp(roleMappingsManagementApp.create({getStartServices:getStartServices}))}start({capabilities:capabilities}){this.licenseFeaturesSubscription=this.license.features$.subscribe(async features=>{const securitySection=this.securitySection,securityManagementAppsStatuses=[[securitySection.getApp(users.usersManagementApp.id),features.showLinks],[securitySection.getApp(roles.rolesManagementApp.id),features.showLinks],[securitySection.getApp(apiKeysManagementApp.id),features.showLinks],[securitySection.getApp(roleMappingsManagementApp.id),features.showLinks&&features.showRoleMappingsManagement]];for(const[app,enableStatus]of securityManagementAppsStatuses)!0===capabilities.management.security[app.id]?app.enabled!==enableStatus&&(enableStatus?app.enable():app.disable()):app.disable()})}stop(){this.licenseFeaturesSubscription&&(this.licenseFeaturesSubscription.unsubscribe(),this.licenseFeaturesSubscription=void 0)}}var user_api_client=__webpack_require__(17)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=__webpack_require__(30),react_1=__webpack_require__(0),useMountedState_1=tslib_1.__importDefault(__webpack_require__(51));exports.default=function(fn,deps,initialState){void 0===deps&&(deps=[]),void 0===initialState&&(initialState={loading:!1});var lastCallId=react_1.useRef(0),isMounted=useMountedState_1.default(),_a=react_1.useState(initialState),state=_a[0],set=_a[1];return[state,react_1.useCallback((function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var callId=++lastCallId.current;return set((function(prevState){return tslib_1.__assign(tslib_1.__assign({},prevState),{loading:!0})})),fn.apply(void 0,args).then((function(value){return isMounted()&&callId===lastCallId.current&&set({value:value,loading:!1}),value}),(function(error){return isMounted()&&callId===lastCallId.current&&set({error:error,loading:!1}),error}))}),deps)]}},function(module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(43);__kbnBundles__.define("plugin/security/public",__webpack_require__,74)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__.security},function(module,exports,__webpack_require__){(function(module,global){var __WEBPACK_AMD_DEFINE_RESULT__;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(root){exports&&exports.nodeType,module&&module.nodeType;var freeGlobal="object"==typeof global&&global;freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal&&freeGlobal.self;var punycode,maxInt=2147483647,regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},floor=Math.floor,stringFromCharCode=String.fromCharCode;function error(type){throw new RangeError(errors[type])}function map(array,fn){for(var length=array.length,result=[];length--;)result[length]=fn(array[length]);return result}function mapDomain(string,fn){var parts=string.split("@"),result="";return parts.length>1&&(result=parts[0]+"@",string=parts[1]),result+map((string=string.replace(regexSeparators,".")).split("."),fn).join(".")}function ucs2decode(string){for(var value,extra,output=[],counter=0,length=string.length;counter<length;)(value=string.charCodeAt(counter++))>=55296&&value<=56319&&counter<length?56320==(64512&(extra=string.charCodeAt(counter++)))?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),counter--):output.push(value);return output}function ucs2encode(array){return map(array,(function(value){var output="";return value>65535&&(output+=stringFromCharCode((value-=65536)>>>10&1023|55296),value=56320|1023&value),output+=stringFromCharCode(value)})).join("")}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((0!=flag)<<5)}function adapt(delta,numPoints,firstTime){var k=0;for(delta=firstTime?floor(delta/700):delta>>1,delta+=floor(delta/numPoints);delta>455;k+=36)delta=floor(delta/35);return floor(k+36*delta/(delta+38))}function decode(input){var out,basic,j,index,oldi,w,k,digit,t,baseMinusT,codePoint,output=[],inputLength=input.length,i=0,n=128,bias=72;for((basic=input.lastIndexOf("-"))<0&&(basic=0),j=0;j<basic;++j)input.charCodeAt(j)>=128&&error("not-basic"),output.push(input.charCodeAt(j));for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=36;index>=inputLength&&error("invalid-input"),((digit=(codePoint=input.charCodeAt(index++))-48<10?codePoint-22:codePoint-65<26?codePoint-65:codePoint-97<26?codePoint-97:36)>=36||digit>floor((maxInt-i)/w))&&error("overflow"),i+=digit*w,!(digit<(t=k<=bias?1:k>=bias+26?26:k-bias));k+=36)w>floor(maxInt/(baseMinusT=36-t))&&error("overflow"),w*=baseMinusT;bias=adapt(i-oldi,out=output.length+1,0==oldi),floor(i/out)>maxInt-n&&error("overflow"),n+=floor(i/out),i%=out,output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,inputLength,handledCPCountPlusOne,baseMinusT,qMinusT,output=[];for(inputLength=(input=ucs2decode(input)).length,n=128,delta=0,bias=72,j=0;j<inputLength;++j)(currentValue=input[j])<128&&output.push(stringFromCharCode(currentValue));for(handledCPCount=basicLength=output.length,basicLength&&output.push("-");handledCPCount<inputLength;){for(m=maxInt,j=0;j<inputLength;++j)(currentValue=input[j])>=n&&currentValue<m&&(m=currentValue);for(m-n>floor((maxInt-delta)/(handledCPCountPlusOne=handledCPCount+1))&&error("overflow"),delta+=(m-n)*handledCPCountPlusOne,n=m,j=0;j<inputLength;++j)if((currentValue=input[j])<n&&++delta>maxInt&&error("overflow"),currentValue==n){for(q=delta,k=36;!(q<(t=k<=bias?1:k>=bias+26?26:k-bias));k+=36)qMinusT=q-t,baseMinusT=36-t,output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0))),q=floor(qMinusT/baseMinusT);output.push(stringFromCharCode(digitToBasic(q,0))),bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength),delta=0,++handledCPCount}++delta,++n}return output.join("")}punycode={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:function(input){return mapDomain(input,(function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string}))},toUnicode:function(input){return mapDomain(input,(function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string}))}},void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return punycode}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()}).call(this,__webpack_require__(45)(module),__webpack_require__(46))},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,exports,__webpack_require__){"use strict";module.exports={isString:function(arg){return"string"==typeof arg},isObject:function(arg){return"object"==typeof arg&&null!==arg},isNull:function(arg){return null===arg},isNullOrUndefined:function(arg){return null==arg}}},function(module,exports,__webpack_require__){"use strict";exports.decode=exports.parse=__webpack_require__(49),exports.encode=exports.stringify=__webpack_require__(50)},function(module,exports,__webpack_require__){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&",eq=eq||"=";var obj={};if("string"!=typeof qs||0===qs.length)return obj;var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;options&&"number"==typeof options.maxKeys&&(maxKeys=options.maxKeys);var len=qs.length;maxKeys>0&&len>maxKeys&&(len=maxKeys);for(var i=0;i<len;++i){var kstr,vstr,k,v,x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq);idx>=0?(kstr=x.substr(0,idx),vstr=x.substr(idx+1)):(kstr=x,vstr=""),k=decodeURIComponent(kstr),v=decodeURIComponent(vstr),hasOwnProperty(obj,k)?isArray(obj[k])?obj[k].push(v):obj[k]=[obj[k],v]:obj[k]=v}return obj};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)}},function(module,exports,__webpack_require__){"use strict";var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){return sep=sep||"&",eq=eq||"=",null===obj&&(obj=void 0),"object"==typeof obj?map(objectKeys(obj),(function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;return isArray(obj[k])?map(obj[k],(function(v){return ks+encodeURIComponent(stringifyPrimitive(v))})).join(sep):ks+encodeURIComponent(stringifyPrimitive(obj[k]))})).join(sep):name?encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj)):""};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)};function map(xs,f){if(xs.map)return xs.map(f);for(var res=[],i=0;i<xs.length;i++)res.push(f(xs[i],i));return res}var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&res.push(key);return res}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__webpack_require__(0);exports.default=function(){var mountedRef=react_1.useRef(!1),get=react_1.useCallback((function(){return mountedRef.current}),[]);return react_1.useEffect((function(){return mountedRef.current=!0,function(){mountedRef.current=!1}})),get}},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(53);case"v7light":return __webpack_require__(55);case"v8dark":return __webpack_require__(57);case"v8light":return __webpack_require__(59)}},function(module,exports,__webpack_require__){var api=__webpack_require__(13),content=__webpack_require__(54);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(14)(!1)).push([module.i,".chrNavControl__userMenu .euiContextMenuPanelTitle{text-transform:none}.chrNavControl__userMenu .euiContextMenuItem{line-height:normal}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(13),content=__webpack_require__(56);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(14)(!1)).push([module.i,".chrNavControl__userMenu .euiContextMenuPanelTitle{text-transform:none}.chrNavControl__userMenu .euiContextMenuItem{line-height:normal}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(13),content=__webpack_require__(58);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(14)(!1)).push([module.i,".chrNavControl__userMenu .euiContextMenuPanelTitle{text-transform:none}.chrNavControl__userMenu .euiContextMenuItem{line-height:normal}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(13),content=__webpack_require__(60);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(14)(!1)).push([module.i,".chrNavControl__userMenu .euiContextMenuPanelTitle{text-transform:none}.chrNavControl__userMenu .euiContextMenuItem{line-height:normal}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"BroadcastChannel",{enumerable:!0,get:function(){return _broadcastChannel.BroadcastChannel}}),Object.defineProperty(exports,"clearNodeFolder",{enumerable:!0,get:function(){return _broadcastChannel.clearNodeFolder}}),Object.defineProperty(exports,"enforceOptions",{enumerable:!0,get:function(){return _broadcastChannel.enforceOptions}}),Object.defineProperty(exports,"createLeaderElection",{enumerable:!0,get:function(){return _leaderElection.createLeaderElection}});var _broadcastChannel=__webpack_require__(62),_leaderElection=__webpack_require__(69)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clearNodeFolder=function(options){options=(0,_options.fillOptionsWithDefaults)(options);var method=(0,_methodChooser.chooseMethod)(options);return"node"===method.type?method.clearNodeFolder().then((function(){return!0})):Promise.resolve(!1)},exports.enforceOptions=function(options){ENFORCED_OPTIONS=options},exports.BroadcastChannel=void 0;var ENFORCED_OPTIONS,_util=__webpack_require__(8),_methodChooser=__webpack_require__(63),_options=__webpack_require__(24),BroadcastChannel=function(name,options){var channel,maybePromise;this.name=name,ENFORCED_OPTIONS&&(options=ENFORCED_OPTIONS),this.options=(0,_options.fillOptionsWithDefaults)(options),this.method=(0,_methodChooser.chooseMethod)(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._befC=[],this._prepP=null,maybePromise=(channel=this).method.create(channel.name,channel.options),(0,_util.isPromise)(maybePromise)?(channel._prepP=maybePromise,maybePromise.then((function(s){channel._state=s}))):channel._state=maybePromise};function _post(broadcastChannel,type,msg){var msgObj={time:broadcastChannel.method.microSeconds(),type:type,data:msg};return(broadcastChannel._prepP?broadcastChannel._prepP:Promise.resolve()).then((function(){return broadcastChannel.method.postMessage(broadcastChannel._state,msgObj)}))}function _hasMessageListeners(channel){return channel._addEL.message.length>0||channel._addEL.internal.length>0}function _addListenerObject(channel,type,obj){channel._addEL[type].push(obj),function(channel){if(!channel._iL&&_hasMessageListeners(channel)){var listenerFn=function(msgObj){channel._addEL[msgObj.type].forEach((function(obj){msgObj.time>=obj.time&&obj.fn(msgObj.data)}))},time=channel.method.microSeconds();channel._prepP?channel._prepP.then((function(){channel._iL=!0,channel.method.onMessage(channel._state,listenerFn,time)})):(channel._iL=!0,channel.method.onMessage(channel._state,listenerFn,time))}}(channel)}function _removeListenerObject(channel,type,obj){channel._addEL[type]=channel._addEL[type].filter((function(o){return o!==obj})),function(channel){if(channel._iL&&!_hasMessageListeners(channel)){channel._iL=!1;var time=channel.method.microSeconds();channel.method.onMessage(channel._state,null,time)}}(channel)}exports.BroadcastChannel=BroadcastChannel,BroadcastChannel._pubkey=!0,BroadcastChannel.prototype={postMessage:function(msg){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed");return _post(this,"message",msg)},postInternal:function(msg){return _post(this,"internal",msg)},set onmessage(fn){var listenObj={time:this.method.microSeconds(),fn:fn};_removeListenerObject(this,"message",this._onML),fn&&"function"==typeof fn?(this._onML=listenObj,_addListenerObject(this,"message",listenObj)):this._onML=null},addEventListener:function(type,fn){_addListenerObject(this,type,{time:this.method.microSeconds(),fn:fn})},removeEventListener:function(type,fn){_removeListenerObject(this,type,this._addEL[type].find((function(obj){return obj.fn===fn})))},close:function(){var _this=this;if(!this.closed){this.closed=!0;var awaitPrepare=this._prepP?this._prepP:Promise.resolve();return this._onML=null,this._addEL.message=[],awaitPrepare.then((function(){return Promise.all(_this._befC.map((function(fn){return fn()})))})).then((function(){return _this.method.close(_this._state)}))}},get type(){return this.method.type}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(11);Object.defineProperty(exports,"__esModule",{value:!0}),exports.chooseMethod=function(options){var chooseMethods=[].concat(options.methods,METHODS).filter(Boolean);if(options.type){if("simulate"===options.type)return _simulate.default;var ret=chooseMethods.find((function(m){return m.type===options.type}));if(ret)return ret;throw new Error("method-type "+options.type+" not found")}options.webWorkerSupport||_util.isNode||(chooseMethods=chooseMethods.filter((function(m){return"idb"!==m.type})));var useMethod=chooseMethods.find((function(method){return method.canBeUsed()}));if(useMethod)return useMethod;throw new Error("No useable methode found:"+JSON.stringify(METHODS.map((function(m){return m.type}))))};var _native=_interopRequireDefault(__webpack_require__(64)),_indexedDb=_interopRequireDefault(__webpack_require__(65)),_localstorage=_interopRequireDefault(__webpack_require__(66)),_simulate=_interopRequireDefault(__webpack_require__(67)),_util=__webpack_require__(8),METHODS=[_native.default,_indexedDb.default,_localstorage.default];if(_util.isNode){var NodeMethod=__webpack_require__(68);"function"==typeof NodeMethod.canBeUsed&&METHODS.push(NodeMethod)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=create,exports.close=close,exports.postMessage=postMessage,exports.onMessage=onMessage,exports.canBeUsed=canBeUsed,exports.averageResponseTime=averageResponseTime,exports.default=exports.type=exports.microSeconds=void 0;var _util=__webpack_require__(8),microSeconds=_util.microSeconds;exports.microSeconds=microSeconds;function create(channelName){var state={messagesCallback:null,bc:new BroadcastChannel(channelName),subFns:[]};return state.bc.onmessage=function(msg){state.messagesCallback&&state.messagesCallback(msg.data)},state}function close(channelState){channelState.bc.close(),channelState.subFns=[]}function postMessage(channelState,messageJson){channelState.bc.postMessage(messageJson,!1)}function onMessage(channelState,fn){channelState.messagesCallback=fn}function canBeUsed(){if(_util.isNode&&"undefined"==typeof window)return!1;if("function"==typeof BroadcastChannel){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}return!1}function averageResponseTime(){return 150}exports.type="native";var _default={create:create,close:close,onMessage:onMessage,postMessage:postMessage,canBeUsed:canBeUsed,type:"native",averageResponseTime:averageResponseTime,microSeconds:microSeconds};exports.default=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(11);Object.defineProperty(exports,"__esModule",{value:!0}),exports.getIdb=getIdb,exports.createDatabase=createDatabase,exports.writeMessage=writeMessage,exports.getAllMessages=function(db){var objectStore=db.transaction("messages").objectStore("messages"),ret=[];return new Promise((function(res){objectStore.openCursor().onsuccess=function(ev){var cursor=ev.target.result;cursor?(ret.push(cursor.value),cursor.continue()):res(ret)}}))},exports.getMessagesHigherThen=getMessagesHigherThen,exports.removeMessageById=removeMessageById,exports.getOldMessages=getOldMessages,exports.cleanOldMessages=cleanOldMessages,exports.create=create,exports.close=close,exports.postMessage=postMessage,exports.onMessage=onMessage,exports.canBeUsed=canBeUsed,exports.averageResponseTime=averageResponseTime,exports.default=exports.type=exports.microSeconds=void 0;var _util=__webpack_require__(8),_obliviousSet=_interopRequireDefault(__webpack_require__(33)),_options=__webpack_require__(24),microSeconds=_util.microSeconds;exports.microSeconds=microSeconds;function getIdb(){return"undefined"!=typeof indexedDB?indexedDB:void 0!==window.mozIndexedDB?window.mozIndexedDB:void 0!==window.webkitIndexedDB?window.webkitIndexedDB:void 0!==window.msIndexedDB&&window.msIndexedDB}function createDatabase(channelName){var dbName="pubkey.broadcast-channel-0-"+channelName,openRequest=getIdb().open(dbName,1);return openRequest.onupgradeneeded=function(ev){ev.target.result.createObjectStore("messages",{keyPath:"id",autoIncrement:!0})},new Promise((function(res,rej){openRequest.onerror=function(ev){return rej(ev)},openRequest.onsuccess=function(){res(openRequest.result)}}))}function writeMessage(db,readerUuid,messageJson){var writeObject={uuid:readerUuid,time:(new Date).getTime(),data:messageJson},transaction=db.transaction(["messages"],"readwrite");return new Promise((function(res,rej){transaction.oncomplete=function(){return res()},transaction.onerror=function(ev){return rej(ev)},transaction.objectStore("messages").add(writeObject)}))}function getMessagesHigherThen(db,lastCursorId){var objectStore=db.transaction("messages").objectStore("messages"),ret=[],keyRangeValue=IDBKeyRange.bound(lastCursorId+1,1/0);return new Promise((function(res){objectStore.openCursor(keyRangeValue).onsuccess=function(ev){var cursor=ev.target.result;cursor?(ret.push(cursor.value),cursor.continue()):res(ret)}}))}function removeMessageById(db,id){var request=db.transaction(["messages"],"readwrite").objectStore("messages").delete(id);return new Promise((function(res){request.onsuccess=function(){return res()}}))}function getOldMessages(db,ttl){var olderThen=(new Date).getTime()-ttl,objectStore=db.transaction("messages").objectStore("messages"),ret=[];return new Promise((function(res){objectStore.openCursor().onsuccess=function(ev){var cursor=ev.target.result;if(cursor){var msgObk=cursor.value;if(!(msgObk.time<olderThen))return void res(ret);ret.push(msgObk),cursor.continue()}else res(ret)}}))}function cleanOldMessages(db,ttl){return getOldMessages(db,ttl).then((function(tooOld){return Promise.all(tooOld.map((function(msgObj){return removeMessageById(db,msgObj.id)})))}))}function create(channelName,options){return options=(0,_options.fillOptionsWithDefaults)(options),createDatabase(channelName).then((function(db){var state={closed:!1,lastCursorId:0,channelName:channelName,options:options,uuid:(0,_util.randomToken)(),eMIs:new _obliviousSet.default(2*options.idb.ttl),writeBlockPromise:Promise.resolve(),messagesCallback:null,readQueuePromises:[],db:db};return function _readLoop(state){if(state.closed)return;return readNewMessages(state).then((function(){return(0,_util.sleep)(state.options.idb.fallbackInterval)})).then((function(){return _readLoop(state)}))}(state),state}))}function readNewMessages(state){return state.closed?Promise.resolve():state.messagesCallback?getMessagesHigherThen(state.db,state.lastCursorId).then((function(newerMessages){return newerMessages.filter((function(msgObj){return!!msgObj})).map((function(msgObj){return msgObj.id>state.lastCursorId&&(state.lastCursorId=msgObj.id),msgObj})).filter((function(msgObj){return function(msgObj,state){return msgObj.uuid!==state.uuid&&(!state.eMIs.has(msgObj.id)&&!(msgObj.data.time<state.messagesCallbackTime))}(msgObj,state)})).sort((function(msgObjA,msgObjB){return msgObjA.time-msgObjB.time})).forEach((function(msgObj){state.messagesCallback&&(state.eMIs.add(msgObj.id),state.messagesCallback(msgObj.data))})),Promise.resolve()})):Promise.resolve()}function close(channelState){channelState.closed=!0,channelState.db.close()}function postMessage(channelState,messageJson){return channelState.writeBlockPromise=channelState.writeBlockPromise.then((function(){return writeMessage(channelState.db,channelState.uuid,messageJson)})).then((function(){0===(0,_util.randomInt)(0,10)&&cleanOldMessages(channelState.db,channelState.options.idb.ttl)})),channelState.writeBlockPromise}function onMessage(channelState,fn,time){channelState.messagesCallbackTime=time,channelState.messagesCallback=fn,readNewMessages(channelState)}function canBeUsed(){return!_util.isNode&&!!getIdb()}function averageResponseTime(options){return 2*options.idb.fallbackInterval}exports.type="idb";var _default={create:create,close:close,onMessage:onMessage,postMessage:postMessage,canBeUsed:canBeUsed,type:"idb",averageResponseTime:averageResponseTime,microSeconds:microSeconds};exports.default=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(11);Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLocalStorage=getLocalStorage,exports.storageKey=storageKey,exports.postMessage=postMessage,exports.addStorageEventListener=addStorageEventListener,exports.removeStorageEventListener=removeStorageEventListener,exports.create=create,exports.close=close,exports.onMessage=onMessage,exports.canBeUsed=canBeUsed,exports.averageResponseTime=averageResponseTime,exports.default=exports.type=exports.microSeconds=void 0;var _obliviousSet=_interopRequireDefault(__webpack_require__(33)),_options=__webpack_require__(24),_util=__webpack_require__(8),microSeconds=_util.microSeconds;exports.microSeconds=microSeconds;function getLocalStorage(){var localStorage;if("undefined"==typeof window)return null;try{localStorage=window.localStorage,localStorage=window["ie8-eventlistener/storage"]||window.localStorage}catch(e){}return localStorage}function storageKey(channelName){return"pubkey.broadcastChannel-"+channelName}function postMessage(channelState,messageJson){return new Promise((function(res){(0,_util.sleep)().then((function(){var key=storageKey(channelState.channelName),writeObj={token:(0,_util.randomToken)(),time:(new Date).getTime(),data:messageJson,uuid:channelState.uuid},value=JSON.stringify(writeObj);getLocalStorage().setItem(key,value);var ev=document.createEvent("Event");ev.initEvent("storage",!0,!0),ev.key=key,ev.newValue=value,window.dispatchEvent(ev),res()}))}))}function addStorageEventListener(channelName,fn){var key=storageKey(channelName),listener=function(ev){ev.key===key&&fn(JSON.parse(ev.newValue))};return window.addEventListener("storage",listener),listener}function removeStorageEventListener(listener){window.removeEventListener("storage",listener)}function create(channelName,options){if(options=(0,_options.fillOptionsWithDefaults)(options),!canBeUsed())throw new Error("BroadcastChannel: localstorage cannot be used");var uuid=(0,_util.randomToken)(),eMIs=new _obliviousSet.default(options.localstorage.removeTimeout),state={channelName:channelName,uuid:uuid,eMIs:eMIs};return state.listener=addStorageEventListener(channelName,(function(msgObj){state.messagesCallback&&msgObj.uuid!==uuid&&msgObj.token&&!eMIs.has(msgObj.token)&&(msgObj.data.time&&msgObj.data.time<state.messagesCallbackTime||(eMIs.add(msgObj.token),state.messagesCallback(msgObj.data)))})),state}function close(channelState){removeStorageEventListener(channelState.listener)}function onMessage(channelState,fn,time){channelState.messagesCallbackTime=time,channelState.messagesCallback=fn}function canBeUsed(){if(_util.isNode)return!1;var ls=getLocalStorage();if(!ls)return!1;try{var key="__broadcastchannel_check";ls.setItem(key,"works"),ls.removeItem(key)}catch(e){return!1}return!0}function averageResponseTime(){var userAgent=navigator.userAgent.toLowerCase();return userAgent.includes("safari")&&!userAgent.includes("chrome")?240:120}exports.type="localstorage";var _default={create:create,close:close,onMessage:onMessage,postMessage:postMessage,canBeUsed:canBeUsed,type:"localstorage",averageResponseTime:averageResponseTime,microSeconds:microSeconds};exports.default=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=create,exports.close=close,exports.postMessage=postMessage,exports.onMessage=onMessage,exports.canBeUsed=canBeUsed,exports.averageResponseTime=averageResponseTime,exports.default=exports.type=exports.microSeconds=void 0;var microSeconds=__webpack_require__(8).microSeconds;exports.microSeconds=microSeconds;exports.type="simulate";var SIMULATE_CHANNELS=new Set;function create(channelName){var state={name:channelName,messagesCallback:null};return SIMULATE_CHANNELS.add(state),state}function close(channelState){SIMULATE_CHANNELS.delete(channelState)}function postMessage(channelState,messageJson){return new Promise((function(res){return setTimeout((function(){Array.from(SIMULATE_CHANNELS).filter((function(channel){return channel.name===channelState.name})).filter((function(channel){return channel!==channelState})).filter((function(channel){return!!channel.messagesCallback})).forEach((function(channel){return channel.messagesCallback(messageJson)})),res()}),5)}))}function onMessage(channelState,fn){channelState.messagesCallback=fn}function canBeUsed(){return!0}function averageResponseTime(){return 5}var _default={create:create,close:close,onMessage:onMessage,postMessage:postMessage,canBeUsed:canBeUsed,type:"simulate",averageResponseTime:averageResponseTime,microSeconds:microSeconds};exports.default=_default},function(module,exports){},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(11);Object.defineProperty(exports,"__esModule",{value:!0}),exports.createLeaderElection=function(channel,options){if(channel._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");options=function(options,channel){options||(options={});(options=JSON.parse(JSON.stringify(options))).fallbackInterval||(options.fallbackInterval=3e3);options.responseTime||(options.responseTime=channel.method.averageResponseTime(channel.options));return options}(options,channel);var elector=new LeaderElection(channel,options);return channel._befC.push((function(){return elector.die()})),channel._leaderElector=elector,elector};var _util=__webpack_require__(8),_unload=_interopRequireDefault(__webpack_require__(70)),LeaderElection=function(channel,options){this._channel=channel,this._options=options,this.isLeader=!1,this.isDead=!1,this.token=(0,_util.randomToken)(),this._isApl=!1,this._reApply=!1,this._unl=[],this._lstns=[],this._invs=[]};function _sendMessage(leaderElector,action){var msgJson={context:"leader",action:action,token:leaderElector.token};return leaderElector._channel.postInternal(msgJson)}LeaderElection.prototype={applyOnce:function(){var _this=this;if(this.isLeader)return Promise.resolve(!1);if(this.isDead)return Promise.resolve(!1);if(this._isApl)return this._reApply=!0,Promise.resolve(!1);this._isApl=!0;var stopCriteria=!1,recieved=[],handleMessage=function(msg){"leader"===msg.context&&msg.token!=_this.token&&(recieved.push(msg),"apply"===msg.action&&msg.token>_this.token&&(stopCriteria=!0),"tell"===msg.action&&(stopCriteria=!0))};return this._channel.addEventListener("internal",handleMessage),_sendMessage(this,"apply").then((function(){return(0,_util.sleep)(_this._options.responseTime)})).then((function(){return stopCriteria?Promise.reject(new Error):_sendMessage(_this,"apply")})).then((function(){return(0,_util.sleep)(_this._options.responseTime)})).then((function(){return stopCriteria?Promise.reject(new Error):_sendMessage(_this)})).then((function(){return function(leaderElector){leaderElector.isLeader=!0;var unloadFn=_unload.default.add((function(){return leaderElector.die()}));leaderElector._unl.push(unloadFn);var isLeaderListener=function(msg){"leader"===msg.context&&"apply"===msg.action&&_sendMessage(leaderElector,"tell")};return leaderElector._channel.addEventListener("internal",isLeaderListener),leaderElector._lstns.push(isLeaderListener),_sendMessage(leaderElector,"tell")}(_this)})).then((function(){return!0})).catch((function(){return!1})).then((function(success){return _this._channel.removeEventListener("internal",handleMessage),_this._isApl=!1,!success&&_this._reApply?(_this._reApply=!1,_this.applyOnce()):success}))},awaitLeadership:function(){var leaderElector;return this._aLP||(this._aLP=(leaderElector=this).isLeader?Promise.resolve():new Promise((function(res){var resolved=!1,finish=function(){resolved||(resolved=!0,clearInterval(interval),leaderElector._channel.removeEventListener("internal",whenDeathListener),res(!0))};leaderElector.applyOnce().then((function(){leaderElector.isLeader&&finish()}));var interval=setInterval((function(){leaderElector.applyOnce().then((function(){leaderElector.isLeader&&finish()}))}),leaderElector._options.fallbackInterval);leaderElector._invs.push(interval);var whenDeathListener=function(msg){"leader"===msg.context&&"death"===msg.action&&leaderElector.applyOnce().then((function(){leaderElector.isLeader&&finish()}))};leaderElector._channel.addEventListener("internal",whenDeathListener),leaderElector._lstns.push(whenDeathListener)}))),this._aLP},die:function(){var _this2=this;if(!this.isDead)return this.isDead=!0,this._lstns.forEach((function(listener){return _this2._channel.removeEventListener("internal",listener)})),this._invs.forEach((function(interval){return clearInterval(interval)})),this._unl.forEach((function(uFn){uFn.remove()})),_sendMessage(this,"death")}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(11);Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=add,exports.runAll=runAll,exports.removeAll=removeAll,exports.getSize=getSize,exports.default=void 0;var _detectNode=_interopRequireDefault(__webpack_require__(71)),_browser=_interopRequireDefault(__webpack_require__(72)),_node=_interopRequireDefault(__webpack_require__(73)),USE_METHOD=_detectNode.default?_node.default:_browser.default,LISTENERS=new Set,startedListening=!1;function add(fn){if(startedListening||(startedListening=!0,USE_METHOD.add(runAll)),"function"!=typeof fn)throw new Error("Listener is no function");return LISTENERS.add(fn),{remove:function(){return LISTENERS.delete(fn)},run:function(){return LISTENERS.delete(fn),fn()}}}function runAll(){var promises=[];return LISTENERS.forEach((function(fn){promises.push(fn()),LISTENERS.delete(fn)})),Promise.all(promises)}function removeAll(){LISTENERS.clear()}function getSize(){return LISTENERS.size}var _default={add:add,runAll:runAll,removeAll:removeAll,getSize:getSize};exports.default=_default},function(module,exports){module.exports=!1},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={add:function(fn){if("function"==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);else{if("function"!=typeof window.addEventListener)return;window.addEventListener("beforeunload",(function(){fn()}),!0),window.addEventListener("unload",(function(){fn()}),!0)}}};exports.default=_default},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"SecurityPluginSetup",(function(){})),__webpack_require__.d(__webpack_exports__,"SecurityPluginStart",(function(){})),__webpack_require__.d(__webpack_exports__,"AuthenticatedUser",(function(){return model.a})),__webpack_require__.d(__webpack_exports__,"SecurityLicense",(function(){})),__webpack_require__.d(__webpack_exports__,"SecurityLicenseFeatures",(function(){return license_features.SecurityLicenseFeatures})),__webpack_require__.d(__webpack_exports__,"UserMenuLink",(function(){})),__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),public_=__webpack_require__(34),external_kbnSharedDeps_RxjsOperators_=__webpack_require__(12);class license_service_SecurityLicenseService{constructor(){var obj,key,value;value=void 0,(key="licenseSubscription")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}setup({license$:license$}){let rawLicense;return this.licenseSubscription=license$.subscribe(nextRawLicense=>{rawLicense=nextRawLicense}),{license:Object.freeze({isLicenseAvailable:()=>{var _rawLicense$isAvailab,_rawLicense;return null!==(_rawLicense$isAvailab=null===(_rawLicense=rawLicense)||void 0===_rawLicense?void 0:_rawLicense.isAvailable)&&void 0!==_rawLicense$isAvailab&&_rawLicense$isAvailab},isEnabled:()=>this.isSecurityEnabledFromRawLicense(rawLicense),getType:()=>{var _rawLicense2;return null===(_rawLicense2=rawLicense)||void 0===_rawLicense2?void 0:_rawLicense2.type},getFeatures:()=>this.calculateFeaturesFromRawLicense(rawLicense),features$:license$.pipe(Object(external_kbnSharedDeps_RxjsOperators_.map)(nextRawLicense=>this.calculateFeaturesFromRawLicense(nextRawLicense)))})}}stop(){this.licenseSubscription&&(this.licenseSubscription.unsubscribe(),this.licenseSubscription=void 0)}isSecurityEnabledFromRawLicense(rawLicense){if(!rawLicense)return!1;const securityFeature=rawLicense.getFeature("security");return void 0!==securityFeature&&securityFeature.isAvailable&&securityFeature.isEnabled}calculateFeaturesFromRawLicense(rawLicense){if(null==rawLicense||!rawLicense.isAvailable)return{showLogin:!0,allowLogin:!1,showLinks:!1,showRoleMappingsManagement:!1,allowAccessAgreement:!1,allowAuditLogging:!1,allowLegacyAuditLogging:!1,allowRoleDocumentLevelSecurity:!1,allowRoleFieldLevelSecurity:!1,allowRbac:!1,allowSubFeaturePrivileges:!1,layout:void 0===rawLicense||null!=rawLicense&&rawLicense.isAvailable?"error-es-unavailable":"error-xpack-unavailable"};if(!this.isSecurityEnabledFromRawLicense(rawLicense))return{showLogin:!1,allowLogin:!1,showLinks:!1,showRoleMappingsManagement:!1,allowAccessAgreement:!1,allowAuditLogging:!1,allowLegacyAuditLogging:!1,allowRoleDocumentLevelSecurity:!1,allowRoleFieldLevelSecurity:!1,allowRbac:!1,allowSubFeaturePrivileges:!1};const isLicenseStandardOrBetter=rawLicense.hasAtLeast("standard"),isLicenseGoldOrBetter=rawLicense.hasAtLeast("gold"),isLicensePlatinumOrBetter=rawLicense.hasAtLeast("platinum");return{showLogin:!0,allowLogin:!0,showLinks:!0,showRoleMappingsManagement:isLicenseGoldOrBetter,allowAccessAgreement:isLicenseGoldOrBetter,allowAuditLogging:isLicenseGoldOrBetter,allowLegacyAuditLogging:isLicenseStandardOrBetter,allowSubFeaturePrivileges:isLicenseGoldOrBetter,allowRoleDocumentLevelSecurity:isLicensePlatinumOrBetter,allowRoleFieldLevelSecurity:isLicensePlatinumOrBetter,allowRbac:!0}}}var license_features=__webpack_require__(22),core_public_=__webpack_require__(35);const accountManagementApp=Object.freeze({id:"security_account",create({application:application,authc:authc,getStartServices:getStartServices}){const title=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.account.breadcrumb",{defaultMessage:"Account Management"});application.register({id:this.id,title:title,navLinkStatus:core_public_.AppNavLinkStatus.hidden,appRoute:"/security/account",async mount({element:element}){const[[coreStart],{renderAccountManagementPage:renderAccountManagementPage},{UserAPIClient:UserAPIClient}]=await Promise.all([getStartServices(),__webpack_require__.e(11).then(__webpack_require__.bind(null,309)),Promise.resolve().then(__webpack_require__.bind(null,39))]);return coreStart.chrome.setBreadcrumbs([{text:title}]),renderAccountManagementPage(coreStart.i18n,element,{authc:authc,notifications:coreStart.notifications,userAPIClient:new UserAPIClient(coreStart.http)})}})}}),accessAgreementApp=Object.freeze({id:"security_access_agreement",create({application:application,getStartServices:getStartServices}){application.register({id:this.id,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.accessAgreementAppTitle",{defaultMessage:"Access Agreement"}),chromeless:!0,appRoute:"/security/access_agreement",async mount({element:element}){const[[coreStart],{renderAccessAgreementPage:renderAccessAgreementPage}]=await Promise.all([getStartServices(),Promise.all([__webpack_require__.e(0),__webpack_require__.e(1),__webpack_require__.e(6)]).then(__webpack_require__.bind(null,296))]);return renderAccessAgreementPage(coreStart.i18n,element,{http:coreStart.http,notifications:coreStart.notifications,fatalErrors:coreStart.fatalErrors})}})}});var url=__webpack_require__(28);const captureURLApp=Object.freeze({id:"security_capture_url",create({application:application,fatalErrors:fatalErrors,http:http}){http.anonymousPaths.register("/internal/security/capture-url"),application.register({id:this.id,title:"Capture URL",chromeless:!0,appRoute:"/internal/security/capture-url",async mount(){try{var _parse$query;const{providerName:providerName,providerType:providerType}=null!==(_parse$query=Object(url.parse)(window.location.href,!0).query)&&void 0!==_parse$query?_parse$query:{};if(!providerName||!providerType)return fatalErrors.add(new Error("Provider to capture URL for is not specified.")),()=>{};const{location:location}=await http.post("/internal/security/login",{body:JSON.stringify({providerType:providerType,providerName:providerName,currentURL:window.location.href})});window.location.href=location}catch(err){fatalErrors.add(new Error("Cannot login with captured URL."))}return()=>{}}})}}),loggedOutApp=Object.freeze({id:"security_logged_out",create({application:application,http:http,getStartServices:getStartServices}){http.anonymousPaths.register("/security/logged_out"),application.register({id:this.id,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.loggedOutAppTitle",{defaultMessage:"Logged out"}),chromeless:!0,appRoute:"/security/logged_out",async mount({element:element}){const[[coreStart],{renderLoggedOutPage:renderLoggedOutPage}]=await Promise.all([getStartServices(),Promise.all([__webpack_require__.e(0),__webpack_require__.e(13)]).then(__webpack_require__.bind(null,297))]);return renderLoggedOutPage(coreStart.i18n,element,{basePath:coreStart.http.basePath})}})}}),loginApp=Object.freeze({id:"security_login",create({application:application,http:http,getStartServices:getStartServices,config:config}){http.anonymousPaths.register("/login"),application.register({id:this.id,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.loginAppTitle",{defaultMessage:"Login"}),chromeless:!0,appRoute:"/login",async mount({element:element}){const[[coreStart],{renderLoginPage:renderLoginPage}]=await Promise.all([getStartServices(),Promise.all([__webpack_require__.e(1),__webpack_require__.e(4)]).then(__webpack_require__.bind(null,306))]);return renderLoginPage(coreStart.i18n,element,{http:coreStart.http,notifications:coreStart.notifications,fatalErrors:coreStart.fatalErrors,loginAssistanceMessage:config.loginAssistanceMessage})}})}}),logoutApp=Object.freeze({id:"security_logout",create({application:application,http:http}){http.anonymousPaths.register("/logout"),application.register({id:this.id,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.logoutAppTitle",{defaultMessage:"Logout"}),chromeless:!0,appRoute:"/logout",mount:async()=>(window.sessionStorage.clear(),window.location.href=http.basePath.prepend("/api/security/logout"+window.location.search),()=>{})})}}),overwrittenSessionApp=Object.freeze({id:"security_overwritten_session",create({application:application,authc:authc,getStartServices:getStartServices}){application.register({id:this.id,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.overwrittenSessionAppTitle",{defaultMessage:"Overwritten Session"}),chromeless:!0,appRoute:"/security/overwritten_session",async mount({element:element}){const[[coreStart],{renderOverwrittenSessionPage:renderOverwrittenSessionPage}]=await Promise.all([getStartServices(),Promise.all([__webpack_require__.e(0),__webpack_require__.e(14)]).then(__webpack_require__.bind(null,298))]);return renderOverwrittenSessionPage(coreStart.i18n,element,{authc:authc,basePath:coreStart.http.basePath})}})}});class authentication_service_AuthenticationService{setup({application:application,fatalErrors:fatalErrors,config:config,getStartServices:getStartServices,http:http}){const getCurrentUser=async()=>await http.get("/internal/security/me",{asSystemRequest:!0});return accessAgreementApp.create({application:application,getStartServices:getStartServices}),captureURLApp.create({application:application,fatalErrors:fatalErrors,http:http}),loginApp.create({application:application,config:config,getStartServices:getStartServices,http:http}),logoutApp.create({application:application,http:http}),loggedOutApp.create({application:application,getStartServices:getStartServices,http:http}),overwrittenSessionApp.create({application:application,authc:{getCurrentUser:getCurrentUser},getStartServices:getStartServices}),{getCurrentUser:getCurrentUser,areAPIKeysEnabled:async()=>(await http.get("/internal/security/api_key/_enabled")).apiKeysEnabled}}}var public_management=__webpack_require__(39),external_kbnSharedDeps_Lodash_=__webpack_require__(16),external_kbnSharedDeps_React_=__webpack_require__(0),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_ReactDom_=__webpack_require__(5),external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_),external_kbnSharedDeps_Rxjs_=__webpack_require__(25),external_kbnSharedDeps_ElasticEui_=(__webpack_require__(52),__webpack_require__(2)),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(4);function nav_control_component_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class nav_control_component_SecurityNavControl extends external_kbnSharedDeps_React_.Component{constructor(props){super(props),nav_control_component_defineProperty(this,"subscription",void 0),nav_control_component_defineProperty(this,"onMenuButtonClick",()=>{this.state.authenticatedUser&&this.setState({isOpen:!this.state.isOpen})}),nav_control_component_defineProperty(this,"closeMenu",()=>{this.setState({isOpen:!1})}),this.state={isOpen:!1,authenticatedUser:null,userMenuLinks:[]},props.user.then(authenticatedUser=>{this.setState({authenticatedUser:authenticatedUser})})}componentDidMount(){this.subscription=this.props.userMenuLinks$.subscribe(async userMenuLinks=>{this.setState({userMenuLinks:userMenuLinks})})}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}render(){const{editProfileUrl:editProfileUrl,logoutUrl:logoutUrl}=this.props,{authenticatedUser:authenticatedUser,userMenuLinks:userMenuLinks}=this.state,username=authenticatedUser&&(authenticatedUser.full_name||authenticatedUser.username)||"",buttonContents=authenticatedUser?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiAvatar,{name:username,size:"s"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"m"}),button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHeaderSectionItemButton,{"aria-controls":"headerUserMenu","aria-expanded":this.state.isOpen,"aria-haspopup":"true","aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.navControlComponent.accountMenuAriaLabel",{defaultMessage:"Account menu"}),onClick:this.onMenuButtonClick,"data-test-subj":"userMenuButton"},buttonContents),isAnonymousUser="anonymous"===(null==authenticatedUser?void 0:authenticatedUser.authentication_provider.type),items=[];if(userMenuLinks.length){const userMenuLinkMenuItems=userMenuLinks.sort(({order:orderA=1/0},{order:orderB=1/0})=>orderA-orderB).map(({label:label,iconType:iconType,href:href})=>({name:label,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:iconType,size:"m"}),href:href,"data-test-subj":"userMenuLink__"+label}));items.push(...userMenuLinkMenuItems)}if(!isAnonymousUser){const hasCustomProfileLinks=userMenuLinks.some(({setAsProfile:setAsProfile})=>!0===setAsProfile),profileMenuItem={name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.security.navControlComponent.editProfileLinkText",defaultMessage:"{profileOverridden, select, true{Preferences} other{Profile}}",values:{profileOverridden:hasCustomProfileLinks}}),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:hasCustomProfileLinks?"controlsHorizontal":"user",size:"m"}),href:editProfileUrl,"data-test-subj":"profileLink"};hasCustomProfileLinks?items.push(profileMenuItem):items.unshift(profileMenuItem)}const logoutMenuItem={name:isAnonymousUser?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.security.navControlComponent.loginLinkText",defaultMessage:"Log in"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.security.navControlComponent.logoutLinkText",defaultMessage:"Log out"}),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"exit",size:"m"}),href:logoutUrl,"data-test-subj":"logoutLink"};items.push(logoutMenuItem);const panels=[{id:0,title:username,items:items}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{id:"headerUserMenu",ownFocus:!0,button:button,isOpen:this.state.isOpen,anchorPosition:"downRight",repositionOnScroll:!0,closePopover:this.closeMenu,panelPaddingSize:"none",buffer:0},external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"userMenu"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiContextMenu,{className:"chrNavControl__userMenu",initialPanelId:0,panels:panels})))}}function nav_control_service_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class nav_control_service_SecurityNavControlService{constructor(){nav_control_service_defineProperty(this,"securityLicense",void 0),nav_control_service_defineProperty(this,"authc",void 0),nav_control_service_defineProperty(this,"logoutUrl",void 0),nav_control_service_defineProperty(this,"navControlRegistered",void 0),nav_control_service_defineProperty(this,"securityFeaturesSubscription",void 0),nav_control_service_defineProperty(this,"stop$",new external_kbnSharedDeps_Rxjs_.ReplaySubject(1)),nav_control_service_defineProperty(this,"userMenuLinks$",new external_kbnSharedDeps_Rxjs_.BehaviorSubject([]))}setup({securityLicense:securityLicense,authc:authc,logoutUrl:logoutUrl}){this.securityLicense=securityLicense,this.authc=authc,this.logoutUrl=logoutUrl}start({core:core}){return this.securityFeaturesSubscription=this.securityLicense.features$.subscribe(({showLinks:showLinks})=>{!core.http.anonymousPaths.isAnonymous(window.location.pathname)&&showLinks&&!this.navControlRegistered&&this.registerSecurityNavControl(core)}),{getUserMenuLinks$:()=>this.userMenuLinks$.pipe(Object(external_kbnSharedDeps_RxjsOperators_.map)(this.sortUserMenuLinks),Object(external_kbnSharedDeps_RxjsOperators_.takeUntil)(this.stop$)),addUserMenuLinks:userMenuLinks=>{const currentLinks=this.userMenuLinks$.value,hasCustomProfileLink=currentLinks.find(({setAsProfile:setAsProfile})=>!0===setAsProfile),passedCustomProfileLinkCount=userMenuLinks.filter(({setAsProfile:setAsProfile})=>!0===setAsProfile).length;if(hasCustomProfileLink&&passedCustomProfileLinkCount>0)throw new Error(`Only one custom profile link can be set. A custom profile link named ${hasCustomProfileLink.label} (${hasCustomProfileLink.href}) already exists`);if(passedCustomProfileLinkCount>1)throw new Error(`Only one custom profile link can be passed at a time (found ${passedCustomProfileLinkCount})`);const newLinks=[...currentLinks,...userMenuLinks];this.userMenuLinks$.next(newLinks)}}}stop(){this.securityFeaturesSubscription&&(this.securityFeaturesSubscription.unsubscribe(),this.securityFeaturesSubscription=void 0),this.navControlRegistered=!1,this.stop$.next()}registerSecurityNavControl(core){const currentUserPromise=this.authc.getCurrentUser();core.chrome.navControls.registerRight({order:2e3,mount:el=>{const I18nContext=core.i18n.Context,props={user:currentUserPromise,editProfileUrl:core.http.basePath.prepend("/security/account"),logoutUrl:this.logoutUrl,userMenuLinks$:this.userMenuLinks$};return external_kbnSharedDeps_ReactDom_default.a.render(external_kbnSharedDeps_React_default.a.createElement(I18nContext,null,external_kbnSharedDeps_React_default.a.createElement(nav_control_component_SecurityNavControl,props)),el),()=>external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(el)}}),this.navControlRegistered=!0}sortUserMenuLinks(userMenuLinks){return Object(external_kbnSharedDeps_Lodash_.sortBy)(userMenuLinks,"order")}}const insecureClusterAlertTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.checkup.insecureClusterTitle",{defaultMessage:"Your data is not secure"});function security_checkup_service_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class security_checkup_service_SecurityCheckupService{constructor(){security_checkup_service_defineProperty(this,"securityOssStart",void 0),security_checkup_service_defineProperty(this,"docLinks",void 0)}setup({securityOssSetup:securityOssSetup}){var getDocLinks,onDismiss;securityOssSetup.insecureCluster.setAlertTitle(insecureClusterAlertTitle),securityOssSetup.insecureCluster.setAlertText((getDocLinks=()=>this.docLinks,onDismiss=persist=>this.onDismiss(persist),e=>{const AlertText=()=>{const[persist,setPersist]=Object(external_kbnSharedDeps_React_.useState)(!1),enableSecurityDocLink=getDocLinks().links.security.elasticsearchEnableSecurity+"?blade=kibanasecuritymessage";return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.I18nProvider,null,external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"insecureClusterAlertText"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.security.checkup.insecureClusterMessage",defaultMessage:"Don’t lose one bit. Enable our free security features."})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCheckbox,{id:"persistDismissedAlertPreference",checked:persist,onChange:changeEvent=>setPersist(changeEvent.target.checked),label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.checkup.dontShowAgain",{defaultMessage:"Don't show again"})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{size:"s",color:"primary",fill:!0,href:enableSecurityDocLink,target:"_blank","data-test-subj":"learnMoreButton"},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.checkup.enableButtonText",{defaultMessage:"Enable security"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{size:"s",onClick:()=>onDismiss(persist),"data-test-subj":"dismissAlertButton"},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.checkup.dismissButtonText",{defaultMessage:"Dismiss"}))))))};return Object(external_kbnSharedDeps_ReactDom_.render)(external_kbnSharedDeps_React_default.a.createElement(AlertText,null),e),()=>Object(external_kbnSharedDeps_ReactDom_.unmountComponentAtNode)(e)}))}start({securityOssStart:securityOssStart,docLinks:docLinks}){this.securityOssStart=securityOssStart,this.docLinks=docLinks}onDismiss(persist){this.securityOssStart&&this.securityOssStart.insecureCluster.hideAlert(persist)}stop(){}}var constants=__webpack_require__(18);class session_expired_SessionExpired{constructor(logoutUrl,tenant){this.logoutUrl=logoutUrl,this.tenant=tenant}logout(){const next=(()=>{const{location:location}=window,next=encodeURIComponent(`${location.pathname}${location.search}${location.hash}`);return`&${constants.f}=${next}`})(),provider=(tenant=>{const key=tenant+"/session_provider",providerName=sessionStorage.getItem(key);return providerName?`&${constants.b}=${encodeURIComponent(providerName)}`:""})(this.tenant);window.location.assign(`${this.logoutUrl}?${constants.c}=SESSION_EXPIRED${next}${provider}`)}}var index_es5=__webpack_require__(38),kibanaReact_public_=__webpack_require__(6);const SessionIdleTimeoutWarning=props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiProgress,{size:"xs",color:"danger",position:"absolute"}),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.security.components.sessionIdleTimeoutWarning.message",defaultMessage:"You will be logged out {timeout} due to inactivity. Click OK to resume.",values:{timeout:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedRelative,{value:props.timeout,units:"second",updateInterval:1e3})}})),external_kbnSharedDeps_React_default.a.createElement("div",{className:"eui-textRight"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{size:"s",color:"warning",onClick:props.onRefreshSession,"data-test-subj":"refreshSessionButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.security.components.sessionIdleTimeoutWarning.okButtonText",defaultMessage:"OK"})))),SessionLifespanWarning=props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiProgress,{size:"xs",color:"danger",position:"absolute"}),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.security.components.sessionLifespanWarning.message",defaultMessage:"Your session will reach the maximum time limit {timeout}. You will need to log in again.",values:{timeout:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedRelative,{value:props.timeout,units:"second",updateInterval:1e3})}})));function session_timeout_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class session_timeout_SessionTimeout{constructor(notifications,sessionExpired,http,tenant){this.notifications=notifications,this.sessionExpired=sessionExpired,this.http=http,this.tenant=tenant,session_timeout_defineProperty(this,"channel",void 0),session_timeout_defineProperty(this,"sessionInfo",void 0),session_timeout_defineProperty(this,"fetchTimer",void 0),session_timeout_defineProperty(this,"warningTimer",void 0),session_timeout_defineProperty(this,"expirationTimer",void 0),session_timeout_defineProperty(this,"warningToast",void 0),session_timeout_defineProperty(this,"fetchSessionInfoAndResetTimers",async(extend=!1)=>{const method=extend?"POST":"GET";try{const result=await this.http.fetch("/internal/security/session",{method:method,asSystemRequest:!extend});this.handleSessionInfoAndResetTimers(result),this.channel&&this.channel.postMessage(result)}catch(err){}}),session_timeout_defineProperty(this,"handleSessionInfoAndResetTimers",sessionInfo=>{this.sessionInfo=sessionInfo;const key=this.tenant+"/session_provider";sessionStorage.setItem(key,sessionInfo.provider.name);const{timeout:timeout,isLifespanTimeout:isLifespanTimeout}=this.getTimeout();if(null==timeout)return;this.cleanup();const timeoutVal=timeout-6e4-5e3-1e3;timeoutVal>0&&!isLifespanTimeout&&this.startTimer(timeoutID=>this.fetchTimer=timeoutID,this.fetchSessionInfoAndResetTimers,timeoutVal),this.startTimer(timeoutID=>this.warningTimer=timeoutID,this.showWarning,Math.max(timeout-6e4-5e3,0)),this.startTimer(timeoutID=>this.expirationTimer=timeoutID,()=>this.sessionExpired.logout(),Math.max(timeout-5e3,0))}),session_timeout_defineProperty(this,"cleanup",()=>{this.fetchTimer&&window.clearTimeout(this.fetchTimer),this.warningTimer&&window.clearTimeout(this.warningTimer),this.expirationTimer&&window.clearTimeout(this.expirationTimer),this.warningToast&&(this.notifications.toasts.remove(this.warningToast),this.warningToast=void 0)}),session_timeout_defineProperty(this,"getTimeout",()=>{let timeout=null,isLifespanTimeout=!1;if(this.sessionInfo){const{now:now,idleTimeoutExpiration:idleTimeoutExpiration,lifespanExpiration:lifespanExpiration}=this.sessionInfo;idleTimeoutExpiration&&(timeout=idleTimeoutExpiration-now),lifespanExpiration&&(null===idleTimeoutExpiration||lifespanExpiration<=idleTimeoutExpiration)&&(timeout=lifespanExpiration-now,isLifespanTimeout=!0)}return{timeout:timeout,isLifespanTimeout:isLifespanTimeout}}),session_timeout_defineProperty(this,"showWarning",()=>{const{timeout:timeout,isLifespanTimeout:isLifespanTimeout}=this.getTimeout(),toastLifeTimeMs=Math.min(timeout-5e3,6e4);let toast;if(isLifespanTimeout)toast=(toastLifeTimeMs=>{const timeout=toastLifeTimeMs+Date.now();return{color:"danger",text:Object(kibanaReact_public_.toMountPoint)(external_kbnSharedDeps_React_default.a.createElement(SessionLifespanWarning,{timeout:timeout})),title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.components.sessionLifespanWarning.title",{defaultMessage:"Warning"}),iconType:"alert",toastLifeTimeMs:toastLifeTimeMs}})(toastLifeTimeMs);else{toast=((toastLifeTimeMs,onRefreshSession)=>{const timeout=toastLifeTimeMs+Date.now();return{color:"warning",text:Object(kibanaReact_public_.toMountPoint)(external_kbnSharedDeps_React_default.a.createElement(SessionIdleTimeoutWarning,{onRefreshSession:onRefreshSession,timeout:timeout})),title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.components.sessionIdleTimeoutWarning.title",{defaultMessage:"Warning"}),iconType:"clock",toastLifeTimeMs:toastLifeTimeMs}})(toastLifeTimeMs,()=>this.fetchSessionInfoAndResetTimers(!0))}this.warningToast=this.notifications.toasts.add(toast)})}start(){if(this.http.anonymousPaths.isAnonymous(window.location.pathname))return;const name=this.tenant+"/session_timeout";return this.channel=new index_es5.BroadcastChannel(name,{webWorkerSupport:!1}),this.channel.onmessage=this.handleSessionInfoAndResetTimers,this.fetchSessionInfoAndResetTimers()}stop(){this.channel&&this.channel.close(),this.cleanup()}extend(url){if(url.endsWith("/internal/security/session"))return;const{isLifespanTimeout:isLifespanTimeout}=this.getTimeout();return this.warningToast&&!isLifespanTimeout?this.fetchSessionInfoAndResetTimers():void 0}startTimer(updater,callback,timeout){updater(timeout>2147483647?window.setTimeout(()=>this.startTimer(updater,callback,timeout-2147483647),2147483647):window.setTimeout(callback,timeout))}}class SessionTimeoutHttpInterceptor{constructor(sessionTimeout,anonymousPaths){this.sessionTimeout=sessionTimeout,this.anonymousPaths=anonymousPaths}response(httpResponse){this.anonymousPaths.isAnonymous(window.location.pathname)||httpResponse.fetchOptions.asSystemRequest||this.sessionTimeout.extend(httpResponse.request.url)}responseError(httpErrorResponse){if(this.anonymousPaths.isAnonymous(window.location.pathname))return;if(httpErrorResponse.fetchOptions.asSystemRequest)return;const{response:response}=httpErrorResponse;response&&this.sessionTimeout.extend(httpErrorResponse.request.url)}}class UnauthorizedResponseHttpInterceptor{constructor(sessionExpired,anonymousPaths){this.sessionExpired=sessionExpired,this.anonymousPaths=anonymousPaths}responseError(httpErrorResponse,controller){if(this.anonymousPaths.isAnonymous(window.location.pathname))return;if("omit"===httpErrorResponse.request.credentials)return;const{response:response}=httpErrorResponse;response&&401===response.status&&(this.sessionExpired.logout(),controller.halt())}}function plugin_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class plugin_SecurityPlugin{constructor(initializerContext){this.initializerContext=initializerContext,plugin_defineProperty(this,"sessionTimeout",void 0),plugin_defineProperty(this,"authenticationService",new authentication_service_AuthenticationService),plugin_defineProperty(this,"navControlService",new nav_control_service_SecurityNavControlService),plugin_defineProperty(this,"securityLicenseService",new license_service_SecurityLicenseService),plugin_defineProperty(this,"managementService",new public_management.ManagementService),plugin_defineProperty(this,"securityCheckupService",new security_checkup_service_SecurityCheckupService),plugin_defineProperty(this,"authc",void 0),plugin_defineProperty(this,"config",void 0),this.config=this.initializerContext.config.get()}setup(core,{home:home,licensing:licensing,management:management,securityOss:securityOss}){const{http:http,notifications:notifications}=core,{anonymousPaths:anonymousPaths}=http,logoutUrl=core.http.basePath.serverBasePath+"/logout",tenant=core.http.basePath.serverBasePath,sessionExpired=new session_expired_SessionExpired(logoutUrl,tenant);http.intercept(new UnauthorizedResponseHttpInterceptor(sessionExpired,anonymousPaths)),this.sessionTimeout=new session_timeout_SessionTimeout(notifications,sessionExpired,http,tenant),http.intercept(new SessionTimeoutHttpInterceptor(this.sessionTimeout,anonymousPaths));const{license:license}=this.securityLicenseService.setup({license$:licensing.license$});return this.securityCheckupService.setup({securityOssSetup:securityOss}),this.authc=this.authenticationService.setup({application:core.application,fatalErrors:core.fatalErrors,config:this.config,getStartServices:core.getStartServices,http:core.http}),this.navControlService.setup({securityLicense:license,authc:this.authc,logoutUrl:logoutUrl}),accountManagementApp.create({authc:this.authc,application:core.application,getStartServices:core.getStartServices}),management&&this.managementService.setup({license:license,management:management,authc:this.authc,fatalErrors:core.fatalErrors,getStartServices:core.getStartServices}),management&&home&&home.featureCatalogue.register({id:"security",title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.registerFeature.securitySettingsTitle",{defaultMessage:"Manage permissions"}),description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.security.registerFeature.securitySettingsDescription",{defaultMessage:"Control who has access and what tasks they can perform."}),icon:"securityApp",path:"/app/management/security/roles",showOnHomePage:!0,category:public_.FeatureCatalogueCategory.ADMIN,order:600}),{authc:this.authc,sessionTimeout:this.sessionTimeout,license:license,__legacyCompat:{logoutUrl:logoutUrl,tenant:tenant}}}start(core,{management:management,securityOss:securityOss}){return this.sessionTimeout.start(),this.securityCheckupService.start({securityOssStart:securityOss,docLinks:core.docLinks}),management&&this.managementService.start({capabilities:core.application.capabilities}),{navControlService:this.navControlService.start({core:core}),authc:this.authc}}stop(){this.sessionTimeout.stop(),this.navControlService.stop(),this.securityLicenseService.stop(),this.managementService.stop(),this.securityCheckupService.stop()}}var model=__webpack_require__(15);const public_plugin=initializerContext=>new plugin_SecurityPlugin(initializerContext)},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/features/common");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/spaces/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.MomentTimezone},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/esUiShared/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.Theme},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/spaces/common");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))}]);