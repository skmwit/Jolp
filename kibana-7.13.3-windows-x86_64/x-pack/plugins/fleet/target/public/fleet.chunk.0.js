/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.fleet_bundle_jsonpfunction=window.fleet_bundle_jsonpfunction||[]).push([[0],{107:function(module,__webpack_exports__,__webpack_require__){"use strict";function useCapabilities(){return Object(use_core.a)().application.capabilities.fleet}__webpack_require__.d(__webpack_exports__,"K",(function(){return useCapabilities})),__webpack_require__.d(__webpack_exports__,"nb",(function(){return use_core.a})),__webpack_require__.d(__webpack_exports__,"M",(function(){return useConfig})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ConfigContext})),__webpack_require__.d(__webpack_exports__,"gb",(function(){return useKibanaVersion})),__webpack_require__.d(__webpack_exports__,"c",(function(){return KibanaVersionContext})),__webpack_require__.d(__webpack_exports__,"d",(function(){return use_license.a})),__webpack_require__.d(__webpack_exports__,"hb",(function(){return use_license.b})),__webpack_require__.d(__webpack_exports__,"J",(function(){return useBreadcrumbs})),__webpack_require__.d(__webpack_exports__,"ib",(function(){return useLink})),__webpack_require__.d(__webpack_exports__,"fb",(function(){return useKibanaLink})),__webpack_require__.d(__webpack_exports__,"jb",(function(){return usePackageIconType})),__webpack_require__.d(__webpack_exports__,"kb",(function(){return usePagination})),__webpack_require__.d(__webpack_exports__,"pb",(function(){return useUrlPagination})),__webpack_require__.d(__webpack_exports__,"mb",(function(){return useSorting})),__webpack_require__.d(__webpack_exports__,"ob",(function(){return useUrlModal})),__webpack_require__.d(__webpack_exports__,"F",(function(){return use_request.a})),__webpack_require__.d(__webpack_exports__,"lb",(function(){return use_request.d})),__webpack_require__.d(__webpack_exports__,"O",(function(){return useGetAgentPolicies})),__webpack_require__.d(__webpack_exports__,"V",(function(){return useGetOneAgentPolicy})),__webpack_require__.d(__webpack_exports__,"W",(function(){return useGetOneAgentPolicyFull})),__webpack_require__.d(__webpack_exports__,"q",(function(){return sendGetOneAgentPolicyFull})),__webpack_require__.d(__webpack_exports__,"p",(function(){return sendGetOneAgentPolicy})),__webpack_require__.d(__webpack_exports__,"f",(function(){return sendCreateAgentPolicy})),__webpack_require__.d(__webpack_exports__,"H",(function(){return sendUpdateAgentPolicy})),__webpack_require__.d(__webpack_exports__,"e",(function(){return sendCopyAgentPolicy})),__webpack_require__.d(__webpack_exports__,"h",(function(){return sendDeleteAgentPolicy})),__webpack_require__.d(__webpack_exports__,"g",(function(){return sendCreatePackagePolicy})),__webpack_require__.d(__webpack_exports__,"I",(function(){return sendUpdatePackagePolicy})),__webpack_require__.d(__webpack_exports__,"j",(function(){return sendDeletePackagePolicy})),__webpack_require__.d(__webpack_exports__,"ab",(function(){return useGetPackagePolicies})),__webpack_require__.d(__webpack_exports__,"s",(function(){return sendGetOnePackagePolicy})),__webpack_require__.d(__webpack_exports__,"R",(function(){return useGetDataStreams})),__webpack_require__.d(__webpack_exports__,"U",(function(){return useGetOneAgent})),__webpack_require__.d(__webpack_exports__,"m",(function(){return sendGetAgents})),__webpack_require__.d(__webpack_exports__,"P",(function(){return useGetAgentStatus})),__webpack_require__.d(__webpack_exports__,"l",(function(){return sendGetAgentStatus})),__webpack_require__.d(__webpack_exports__,"C",(function(){return sendPutAgentReassign})),__webpack_require__.d(__webpack_exports__,"z",(function(){return sendPostBulkAgentReassign})),__webpack_require__.d(__webpack_exports__,"x",(function(){return sendPostAgentUnenroll})),__webpack_require__.d(__webpack_exports__,"A",(function(){return sendPostBulkAgentUnenroll})),__webpack_require__.d(__webpack_exports__,"y",(function(){return sendPostAgentUpgrade})),__webpack_require__.d(__webpack_exports__,"w",(function(){return sendPostAgentAction})),__webpack_require__.d(__webpack_exports__,"B",(function(){return sendPostBulkAgentUpgrade})),__webpack_require__.d(__webpack_exports__,"X",(function(){return useGetOneEnrollmentAPIKey})),__webpack_require__.d(__webpack_exports__,"r",(function(){return sendGetOneEnrollmentAPIKey})),__webpack_require__.d(__webpack_exports__,"i",(function(){return sendDeleteOneEnrollmentAPIKey})),__webpack_require__.d(__webpack_exports__,"n",(function(){return sendGetEnrollmentAPIKeys})),__webpack_require__.d(__webpack_exports__,"S",(function(){return useGetEnrollmentAPIKeys})),__webpack_require__.d(__webpack_exports__,"Q",(function(){return useGetCategories})),__webpack_require__.d(__webpack_exports__,"cb",(function(){return useGetPackages})),__webpack_require__.d(__webpack_exports__,"T",(function(){return useGetLimitedPackages})),__webpack_require__.d(__webpack_exports__,"Z",(function(){return useGetPackageInfoByKey})),__webpack_require__.d(__webpack_exports__,"bb",(function(){return useGetPackageStats})),__webpack_require__.d(__webpack_exports__,"t",(function(){return sendGetPackageInfoByKey})),__webpack_require__.d(__webpack_exports__,"o",(function(){return sendGetFileByPath})),__webpack_require__.d(__webpack_exports__,"v",(function(){return sendInstallPackage})),__webpack_require__.d(__webpack_exports__,"E",(function(){return sendRemovePackage})),__webpack_require__.d(__webpack_exports__,"Y",(function(){return outputs.b})),__webpack_require__.d(__webpack_exports__,"db",(function(){return useGetSettings})),__webpack_require__.d(__webpack_exports__,"D",(function(){return sendPutSettings})),__webpack_require__.d(__webpack_exports__,"G",(function(){return sendSetup})),__webpack_require__.d(__webpack_exports__,"u",(function(){return sendGetPermissionsCheck})),__webpack_require__.d(__webpack_exports__,"k",(function(){return sendGenerateServiceToken})),__webpack_require__.d(__webpack_exports__,"eb",(function(){return useInput})),__webpack_require__.d(__webpack_exports__,"L",(function(){return useComboInput})),__webpack_require__.d(__webpack_exports__,"qb",(function(){return useUrlParams})),__webpack_require__.d(__webpack_exports__,"b",(function(){return FleetStatusProvider})),__webpack_require__.d(__webpack_exports__,"N",(function(){return useFleetStatus}));var use_core=__webpack_require__(114),external_kbnSharedDeps_React_=__webpack_require__(2),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);const ConfigContext=external_kbnSharedDeps_React_default.a.createContext(null);function useConfig(){const config=Object(external_kbnSharedDeps_React_.useContext)(ConfigContext);if(null===config)throw new Error("ConfigContext not initialized");return config}const KibanaVersionContext=external_kbnSharedDeps_React_default.a.createContext(null);function useKibanaVersion(){const version=Object(external_kbnSharedDeps_React_.useContext)(KibanaVersionContext);if(null===version)throw new Error("KibanaVersionContext is not initialized");return version}var use_license=__webpack_require__(25),external_kbnSharedDeps_KbnI18n_=__webpack_require__(4),constants=__webpack_require__(11);const BASE_BREADCRUMB={href:constants.m.overview(),text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.appTitle",{defaultMessage:"Fleet"})},breadcrumbGetters={base:()=>[BASE_BREADCRUMB],overview:()=>[BASE_BREADCRUMB,{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.overviewPageTitle",{defaultMessage:"Overview"})}],integrations:()=>[BASE_BREADCRUMB,{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.integrationsPageTitle",{defaultMessage:"Integrations"})}],integrations_all:()=>[BASE_BREADCRUMB,{href:constants.m.integrations(),text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.integrationsPageTitle",{defaultMessage:"Integrations"})},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.allIntegrationsPageTitle",{defaultMessage:"All"})}],integrations_installed:()=>[BASE_BREADCRUMB,{href:constants.m.integrations(),text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.integrationsPageTitle",{defaultMessage:"Integrations"})},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.installedIntegrationsPageTitle",{defaultMessage:"Installed"})}],integration_details_overview:({pkgTitle:pkgTitle})=>[BASE_BREADCRUMB,{href:constants.m.integrations(),text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.integrationsPageTitle",{defaultMessage:"Integrations"})},{text:pkgTitle}],integration_policy_edit:({pkgTitle:pkgTitle,pkgkey:pkgkey,policyName:policyName})=>[BASE_BREADCRUMB,{href:constants.m.integrations(),text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.integrationPageTitle",{defaultMessage:"Integration"})},{href:constants.m.integration_details_policies({pkgkey:pkgkey}),text:pkgTitle},{text:policyName}],policies:()=>[BASE_BREADCRUMB,{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.policiesPageTitle",{defaultMessage:"Policies"})}],policies_list:()=>[BASE_BREADCRUMB,{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.policiesPageTitle",{defaultMessage:"Policies"})}],policy_details:({policyName:policyName})=>[BASE_BREADCRUMB,{href:constants.m.policies(),text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.policiesPageTitle",{defaultMessage:"Policies"})},{text:policyName}],add_integration_from_policy:({policyName:policyName,policyId:policyId})=>[BASE_BREADCRUMB,{href:constants.m.policies(),text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.policiesPageTitle",{defaultMessage:"Policies"})},{href:constants.m.policy_details({policyId:policyId}),text:policyName},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.addPackagePolicyPageTitle",{defaultMessage:"Add integration"})}],add_integration_to_policy:({pkgTitle:pkgTitle,pkgkey:pkgkey})=>[BASE_BREADCRUMB,{href:constants.m.integrations(),text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.integrationsPageTitle",{defaultMessage:"Integrations"})},{href:constants.m.integration_details_overview({pkgkey:pkgkey}),text:pkgTitle},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.addPackagePolicyPageTitle",{defaultMessage:"Add integration"})}],edit_integration:({policyName:policyName,policyId:policyId})=>[BASE_BREADCRUMB,{href:constants.m.policies(),text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.policiesPageTitle",{defaultMessage:"Policies"})},{href:constants.m.policy_details({policyId:policyId}),text:policyName},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.editPackagePolicyPageTitle",{defaultMessage:"Edit integration"})}],fleet:()=>[BASE_BREADCRUMB,{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.agentsPageTitle",{defaultMessage:"Agents"})}],fleet_agent_list:()=>[BASE_BREADCRUMB,{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.agentsPageTitle",{defaultMessage:"Agents"})}],fleet_agent_details:({agentHost:agentHost})=>[BASE_BREADCRUMB,{href:constants.m.fleet(),text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.agentsPageTitle",{defaultMessage:"Agents"})},{text:agentHost}],fleet_enrollment_tokens:()=>[BASE_BREADCRUMB,{href:constants.m.fleet(),text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.agentsPageTitle",{defaultMessage:"Agents"})},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.enrollmentTokensPageTitle",{defaultMessage:"Enrollment tokens"})}],data_streams:()=>[BASE_BREADCRUMB,{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.fleet.breadcrumbs.datastreamsPageTitle",{defaultMessage:"Data streams"})}]};function useBreadcrumbs(page,values={}){var _breadcrumbGetters$pa;const{chrome:chrome,http:http}=Object(use_core.a)(),breadcrumbs=(null===(_breadcrumbGetters$pa=breadcrumbGetters[page])||void 0===_breadcrumbGetters$pa?void 0:_breadcrumbGetters$pa.call(breadcrumbGetters,values).map(breadcrumb=>({...breadcrumb,href:breadcrumb.href?http.basePath.prepend(`${constants.e}#${breadcrumb.href}`):void 0})))||[],docTitle=[...breadcrumbs].reverse().map(breadcrumb=>breadcrumb.text);chrome.docTitle.change(docTitle),chrome.setBreadcrumbs(breadcrumbs)}const getPath=(page,values={})=>values?constants.m[page](values):constants.m[page](),useLink=()=>{const core=Object(use_core.a)();return{getPath:getPath,getAssetsPath:path=>core.http.basePath.prepend(`/plugins/${constants.k}/assets/${path}`),getHref:(page,values)=>{const path=getPath(page,values);return core.http.basePath.prepend(`${constants.e}#${path}`)}}};function useKibanaLink(path="/"){return Object(use_core.a)().http.basePath.prepend("/app/kibana#"+path)}var external_kbnSharedDeps_ElasticEui_=__webpack_require__(10),hooks=__webpack_require__(110);const CACHED_ICONS=new Map,usePackageIconType=({packageName:packageName,version:version,icons:paramIcons,tryApi:tryApi=!1})=>{const{toPackageImage:toPackageImage}=Object(hooks.e)(),[iconList,setIconList]=Object(external_kbnSharedDeps_React_.useState)(),[iconType,setIconType]=Object(external_kbnSharedDeps_React_.useState)(""),pkgKey=`${packageName}-${version}`;return Object(external_kbnSharedDeps_React_.useEffect)(()=>{var _ref;if(CACHED_ICONS.has(pkgKey))return void setIconType(CACHED_ICONS.get(pkgKey)||"");const svgIcons=null===(_ref=paramIcons||iconList)||void 0===_ref?void 0:_ref.filter(iconDef=>"image/svg+xml"===iconDef.type),localIconSrc=Array.isArray(svgIcons)&&toPackageImage(svgIcons[0],packageName,version);if(localIconSrc)return CACHED_ICONS.set(pkgKey,localIconSrc),void setIconType(CACHED_ICONS.get(pkgKey)||"");const euiLogoIcon=external_kbnSharedDeps_ElasticEui_.ICON_TYPES.find(key=>key.toLowerCase()==="logo"+packageName);if(euiLogoIcon)return CACHED_ICONS.set(pkgKey,euiLogoIcon),void setIconType(euiLogoIcon);!tryApi||paramIcons||iconList||sendGetPackageInfoByKey(pkgKey).catch(error=>{}).then(res=>{var _res$data,_res$data$response;CACHED_ICONS.delete(pkgKey),setIconList(null==res||null===(_res$data=res.data)||void 0===_res$data||null===(_res$data$response=_res$data.response)||void 0===_res$data$response?void 0:_res$data$response.icons)}),CACHED_ICONS.set(pkgKey,"package"),setIconType("package")},[paramIcons,pkgKey,toPackageImage,iconList,packageName,iconType,tryApi,version]),iconType},PAGE_SIZE_OPTIONS=[5,20,50];function usePagination(pageInfo={currentPage:1,pageSize:20}){const[pagination,setPagination]=Object(external_kbnSharedDeps_React_.useState)(pageInfo);return{pagination:pagination,setPagination:setPagination,pageSizeOptions:Object(external_kbnSharedDeps_React_.useMemo)(()=>[...PAGE_SIZE_OPTIONS],[])}}var external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(97),query_string=__webpack_require__(132);function useUrlParams(){const{search:search}=Object(external_kbnSharedDeps_ReactRouterDom_.useLocation)(),[urlParams,setUrlParams]=Object(external_kbnSharedDeps_React_.useState)(()=>Object(query_string.parse)(search)),toUrlParams=Object(external_kbnSharedDeps_React_.useCallback)((params=urlParams)=>Object(query_string.stringify)(params),[urlParams]);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{setUrlParams(Object(query_string.parse)(search))},[search]),{urlParams:urlParams,toUrlParams:toUrlParams}}const useUrlPagination=()=>{const location=Object(external_kbnSharedDeps_ReactRouterDom_.useLocation)(),history=Object(external_kbnSharedDeps_ReactRouterDom_.useHistory)(),{urlParams:urlParams,toUrlParams:toUrlParams}=useUrlParams(),urlPaginationParams=Object(external_kbnSharedDeps_React_.useMemo)(()=>paginationFromUrlParams(urlParams),[urlParams]),{pagination:pagination,pageSizeOptions:pageSizeOptions,setPagination:setPagination}=usePagination(urlPaginationParams),setUrlPagination=Object(external_kbnSharedDeps_React_.useCallback)(({pageSize:pageSize,currentPage:currentPage})=>{history.push({...location,search:toUrlParams({...urlParams,currentPage:currentPage,pageSize:pageSize})})},[history,location,toUrlParams,urlParams]);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{setPagination(prevState=>({...prevState,...paginationFromUrlParams(urlParams)}))},[setPagination,urlParams]),{pagination:pagination,setPagination:setUrlPagination,pageSizeOptions:pageSizeOptions}},paginationFromUrlParams=urlParams=>{var _ref,_Number,_ref2;const pagination={pageSize:20,currentPage:1};return pagination.currentPage=Number(null!==(_ref=Array.isArray(urlParams.currentPage)?urlParams.currentPage.pop():urlParams.currentPage)&&void 0!==_ref?_ref:pagination.currentPage),pagination.pageSize=null!==(_Number=Number(null!==(_ref2=Array.isArray(urlParams.pageSize)?urlParams.pageSize.pop():urlParams.pageSize)&&void 0!==_ref2?_ref2:pagination.pageSize))&&void 0!==_Number?_Number:pagination.pageSize,(!Number.isFinite(pagination.currentPage)||pagination.currentPage<1)&&(pagination.currentPage=1),PAGE_SIZE_OPTIONS.includes(pagination.pageSize)||(pagination.pageSize=20),pagination};function useSorting(defaultSorting){const[sorting,setSorting]=Object(external_kbnSharedDeps_React_.useState)(defaultSorting);return{sorting:sorting,setSorting:setSorting}}const useUrlModal=()=>{const location=Object(external_kbnSharedDeps_ReactRouterDom_.useLocation)(),history=Object(external_kbnSharedDeps_ReactRouterDom_.useHistory)(),{urlParams:urlParams,toUrlParams:toUrlParams}=useUrlParams(),setModal=Object(external_kbnSharedDeps_React_.useCallback)(modal=>{const newUrlParams={...urlParams,modal:modal};null===modal&&delete newUrlParams.modal,history.push({...location,search:toUrlParams(newUrlParams)})},[history,location,toUrlParams,urlParams]),getModalHref=Object(external_kbnSharedDeps_React_.useCallback)(modal=>history.createHref({...location,search:toUrlParams({...urlParams,modal:modal})}),[history,location,toUrlParams,urlParams]);return{modal:Object(external_kbnSharedDeps_React_.useMemo)(()=>"settings"===urlParams.modal?urlParams.modal:null,[urlParams.modal]),setModal:setModal,getModalHref:getModalHref}};var use_request=__webpack_require__(23),services=__webpack_require__(108);const useGetAgentPolicies=query=>Object(use_request.d)({path:services.b.getListPath(),method:"get",query:query}),useGetOneAgentPolicy=agentPolicyId=>Object(use_request.c)({path:agentPolicyId?services.b.getInfoPath(agentPolicyId):void 0,method:"get",shouldSendRequest:!!agentPolicyId}),useGetOneAgentPolicyFull=agentPolicyId=>Object(use_request.d)({path:services.b.getInfoFullPath(agentPolicyId),method:"get"}),sendGetOneAgentPolicyFull=(agentPolicyId,query={})=>Object(use_request.a)({path:services.b.getInfoFullPath(agentPolicyId),method:"get",query:query}),sendGetOneAgentPolicy=agentPolicyId=>Object(use_request.a)({path:services.b.getInfoPath(agentPolicyId),method:"get"}),sendCreateAgentPolicy=(body,{withSysMonitoring:withSysMonitoring}={withSysMonitoring:!1})=>Object(use_request.a)({path:services.b.getCreatePath(),method:"post",body:JSON.stringify(body),query:withSysMonitoring?{sys_monitoring:!0}:{}}),sendUpdateAgentPolicy=(agentPolicyId,body)=>Object(use_request.a)({path:services.b.getUpdatePath(agentPolicyId),method:"put",body:JSON.stringify(body)}),sendCopyAgentPolicy=(agentPolicyId,body)=>Object(use_request.a)({path:services.b.getCopyPath(agentPolicyId),method:"post",body:JSON.stringify(body)}),sendDeleteAgentPolicy=body=>Object(use_request.a)({path:services.b.getDeletePath(),method:"post",body:JSON.stringify(body)}),sendCreatePackagePolicy=body=>Object(use_request.a)({path:services.p.getCreatePath(),method:"post",body:JSON.stringify(body)}),sendUpdatePackagePolicy=(packagePolicyId,body)=>Object(use_request.a)({path:services.p.getUpdatePath(packagePolicyId),method:"put",body:JSON.stringify(body)}),sendDeletePackagePolicy=body=>Object(use_request.a)({path:services.p.getDeletePath(),method:"post",body:JSON.stringify(body)});function useGetPackagePolicies(query){return Object(use_request.d)({method:"get",path:services.p.getListPath(),query:query})}const sendGetOnePackagePolicy=packagePolicyId=>Object(use_request.a)({path:services.p.getInfoPath(packagePolicyId),method:"get"}),useGetDataStreams=()=>Object(use_request.d)({path:services.e.getListPath(),method:"get"});function useGetOneAgent(agentId,options){return Object(use_request.d)({path:services.c.getInfoPath(agentId),method:"get",...options})}function sendGetAgents(query,options){return Object(use_request.a)({method:"get",path:services.c.getListPath(),query:query,...options})}function useGetAgentStatus(query,options){return Object(use_request.d)({method:"get",path:services.c.getStatusPath(),query:query,...options})}function sendGetAgentStatus(query,options){return Object(use_request.a)({method:"get",path:services.c.getStatusPath(),query:query,...options})}function sendPutAgentReassign(agentId,body,options){return Object(use_request.a)({method:"put",path:services.c.getReassignPath(agentId),body:body,...options})}function sendPostBulkAgentReassign(body,options){return Object(use_request.a)({method:"post",path:services.c.getBulkReassignPath(),body:body,...options})}function sendPostAgentUnenroll(agentId,body,options){return Object(use_request.a)({path:services.c.getUnenrollPath(agentId),method:"post",body:body,...options})}function sendPostBulkAgentUnenroll(body,options){return Object(use_request.a)({path:services.c.getBulkUnenrollPath(),method:"post",body:body,...options})}function sendPostAgentUpgrade(agentId,body,options){return Object(use_request.a)({path:services.c.getUpgradePath(agentId),method:"post",body:body,...options})}function sendPostAgentAction(agentId,body,options){return Object(use_request.a)({path:services.c.getCreateActionPath(agentId),method:"post",body:body,...options})}function sendPostBulkAgentUpgrade(body,options){return Object(use_request.a)({path:services.c.getBulkUpgradePath(),method:"post",body:body,...options})}function useGetOneEnrollmentAPIKey(keyId){return Object(use_request.c)({method:"get",path:keyId?services.g.getInfoPath(keyId):void 0,shouldSendRequest:!!keyId})}function sendGetOneEnrollmentAPIKey(keyId,options){return Object(use_request.a)({method:"get",path:services.g.getInfoPath(keyId),...options})}function sendDeleteOneEnrollmentAPIKey(keyId,options){return Object(use_request.a)({method:"delete",path:services.g.getDeletePath(keyId),...options})}function sendGetEnrollmentAPIKeys(query,options){return Object(use_request.a)({method:"get",path:services.g.getListPath(),query:query,...options})}function useGetEnrollmentAPIKeys(query,options){return Object(use_request.d)({method:"get",path:services.g.getListPath(),query:query,...options})}const useGetCategories=(query={})=>Object(use_request.d)({path:services.h.getCategoriesPath(),method:"get",query:{experimental:!0,...query}}),useGetPackages=(query={})=>Object(use_request.d)({path:services.h.getListPath(),method:"get",query:{experimental:!0,...query}}),useGetLimitedPackages=()=>Object(use_request.d)({path:services.h.getListLimitedPath(),method:"get"}),useGetPackageInfoByKey=pkgkey=>Object(use_request.d)({path:services.h.getInfoPath(pkgkey),method:"get"}),useGetPackageStats=pkgName=>Object(use_request.d)({path:services.h.getStatsPath(pkgName),method:"get"}),sendGetPackageInfoByKey=pkgkey=>Object(use_request.a)({path:services.h.getInfoPath(pkgkey),method:"get"}),sendGetFileByPath=filePath=>Object(use_request.a)({path:services.h.getFilePath(filePath),method:"get"}),sendInstallPackage=pkgkey=>Object(use_request.a)({path:services.h.getInstallPath(pkgkey),method:"post"}),sendRemovePackage=pkgkey=>Object(use_request.a)({path:services.h.getRemovePath(pkgkey),method:"delete"});var outputs=__webpack_require__(121);function useGetSettings(){return Object(use_request.d)({method:"get",path:services.r.getInfoPath()})}function sendPutSettings(body){return Object(use_request.a)({method:"put",path:services.r.getUpdatePath(),body:body})}const sendSetup=()=>Object(use_request.a)({path:services.s.getSetupPath(),method:"post"}),sendGetPermissionsCheck=()=>Object(use_request.a)({path:services.d.getCheckPermissionsPath(),method:"get"}),sendGenerateServiceToken=()=>Object(use_request.a)({path:services.d.getRegenerateServiceTokenPath(),method:"post"});function useInput(defaultValue="",validate){const[value,setValue]=external_kbnSharedDeps_React_default.a.useState(defaultValue),[errors,setErrors]=external_kbnSharedDeps_React_default.a.useState(),isInvalid=void 0!==errors;return{value:value,errors:errors,props:{onChange:e=>{const newValue=e.target.value;setValue(newValue),errors&&validate&&void 0===validate(newValue)&&setErrors(void 0)},value:value,isInvalid:isInvalid},formRowProps:{error:errors,isInvalid:isInvalid},clear:()=>{setValue("")},validate:()=>{if(validate){const newErrors=validate(value);return setErrors(newErrors),void 0===newErrors}return!0},setValue:setValue}}function useComboInput(defaultValue=[],validate){const[value,setValue]=external_kbnSharedDeps_React_default.a.useState(defaultValue),[errors,setErrors]=external_kbnSharedDeps_React_default.a.useState(),isInvalid=void 0!==errors;return{props:{selectedOptions:value.map(val=>({label:val})),onCreateOption:newVal=>{setValue([...value,newVal])},onChange:newSelectedOptions=>{const newValues=newSelectedOptions.map(option=>option.label);setValue(newValues),errors&&validate&&void 0===validate(newValues)&&setErrors(void 0)},isInvalid:isInvalid},formRowProps:{error:errors,isInvalid:isInvalid},value:value,clear:()=>{setValue([])},setValue:setValue,validate:()=>{if(validate){const newErrors=validate(value);return setErrors(newErrors),void 0===newErrors}return!0}}}const FleetStatusContext=external_kbnSharedDeps_React_default.a.createContext(void 0),FleetStatusProvider=({children:children})=>{const config=useConfig(),[state,setState]=Object(external_kbnSharedDeps_React_.useState)({enabled:config.agents.enabled,isLoading:!1,isReady:!1});async function sendGetStatus(){try{setState(s=>({...s,isLoading:!0}));const res=await Object(use_request.a)({path:services.i.getFleetSetupPath(),method:"get"});if(res.error)throw res.error;setState(s=>{var _res$data$isReady,_res$data,_res$data2;return{...s,isLoading:!1,isReady:null!==(_res$data$isReady=null===(_res$data=res.data)||void 0===_res$data?void 0:_res$data.isReady)&&void 0!==_res$data$isReady&&_res$data$isReady,missingRequirements:null===(_res$data2=res.data)||void 0===_res$data2?void 0:_res$data2.missing_requirements}})}catch(error){setState(s=>({...s,isLoading:!1,error:error}))}}return Object(external_kbnSharedDeps_React_.useEffect)(()=>{sendGetStatus()},[]),external_kbnSharedDeps_React_default.a.createElement(FleetStatusContext.Provider,{value:{...state,refresh:()=>sendGetStatus()}},children)};function useFleetStatus(){const context=Object(external_kbnSharedDeps_React_.useContext)(FleetStatusContext);if(!context)throw new Error("FleetStatusContext not set");return context}},108:function(module,__webpack_exports__,__webpack_require__){"use strict";var _kbn_std__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(101);__webpack_require__.d(__webpack_exports__,"k",(function(){return _kbn_std__WEBPACK_IMPORTED_MODULE_0__.getFlattenedObject}));var _common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);__webpack_require__.d(__webpack_exports__,"a",(function(){return _common__WEBPACK_IMPORTED_MODULE_1__.AgentStatusKueryHelper})),__webpack_require__.d(__webpack_exports__,"b",(function(){return _common__WEBPACK_IMPORTED_MODULE_1__.agentPolicyRouteService})),__webpack_require__.d(__webpack_exports__,"p",(function(){return _common__WEBPACK_IMPORTED_MODULE_1__.packagePolicyRouteService})),__webpack_require__.d(__webpack_exports__,"e",(function(){return _common__WEBPACK_IMPORTED_MODULE_1__.dataStreamRouteService})),__webpack_require__.d(__webpack_exports__,"i",(function(){return _common__WEBPACK_IMPORTED_MODULE_1__.fleetSetupRouteService})),__webpack_require__.d(__webpack_exports__,"c",(function(){return _common__WEBPACK_IMPORTED_MODULE_1__.agentRouteService})),__webpack_require__.d(__webpack_exports__,"g",(function(){return _common__WEBPACK_IMPORTED_MODULE_1__.enrollmentAPIKeyRouteService})),__webpack_require__.d(__webpack_exports__,"h",(function(){return _common__WEBPACK_IMPORTED_MODULE_1__.epmRouteService})),__webpack_require__.d(__webpack_exports__,"s",(function(){return _common__WEBPACK_IMPORTED_MODULE_1__.setupRouteService})),__webpack_require__.d(__webpack_exports__,"o",(function(){return _common__WEBPACK_IMPORTED_MODULE_1__.outputRoutesService})),__webpack_require__.d(__webpack_exports__,"r",(function(){return _common__WEBPACK_IMPORTED_MODULE_1__.settingsRoutesService})),__webpack_require__.d(__webpack_exports__,"d",(function(){return _common__WEBPACK_IMPORTED_MODULE_1__.appRoutesService})),__webpack_require__.d(__webpack_exports__,"q",(function(){return _common__WEBPACK_IMPORTED_MODULE_1__.packageToPackagePolicyInputs})),__webpack_require__.d(__webpack_exports__,"j",(function(){return _common__WEBPACK_IMPORTED_MODULE_1__.fullAgentPolicyToYaml})),__webpack_require__.d(__webpack_exports__,"m",(function(){return _common__WEBPACK_IMPORTED_MODULE_1__.isPackageLimited})),__webpack_require__.d(__webpack_exports__,"f",(function(){return _common__WEBPACK_IMPORTED_MODULE_1__.doesAgentPolicyAlreadyIncludePackage})),__webpack_require__.d(__webpack_exports__,"n",(function(){return _common__WEBPACK_IMPORTED_MODULE_1__.isValidNamespace})),__webpack_require__.d(__webpack_exports__,"l",(function(){return _common__WEBPACK_IMPORTED_MODULE_1__.isAgentUpgradeable}))},110:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return useLinks})),__webpack_require__.d(__webpack_exports__,"f",(function(){return useLocalSearch})),__webpack_require__.d(__webpack_exports__,"b",(function(){return searchIdField})),__webpack_require__.d(__webpack_exports__,"a",(function(){return PackageInstallProvider})),__webpack_require__.d(__webpack_exports__,"h",(function(){return useUninstallPackage})),__webpack_require__.d(__webpack_exports__,"c",(function(){return useGetPackageInstallStatus})),__webpack_require__.d(__webpack_exports__,"d",(function(){return useInstallPackage})),__webpack_require__.d(__webpack_exports__,"g",(function(){return useSetPackageInstallStatus}));var use_core=__webpack_require__(114),constants=__webpack_require__(11),services=__webpack_require__(108);function useLinks(){const{http:http}=Object(use_core.a)();return{toAssets:path=>http.basePath.prepend(`/plugins/${constants.k}/assets/${path}`),toPackageImage:(img,pkgName,pkgVersion)=>{const sourcePath=img.src?`/package/${pkgName}/${pkgVersion}${img.src}`:"path"in img&&img.path;if(sourcePath){const filePath=services.h.getFilePath(sourcePath);return http.basePath.prepend(filePath)}},toRelativeImage:({path:path,packageName:packageName,version:version})=>{const imagePath=new URL(path,"http://example.com").pathname;const pkgkey=`${packageName}-${version}`,filePath=`${services.h.getInfoPath(pkgkey)}/${imagePath}`;return http.basePath.prepend(filePath)}}}var commonjs=__webpack_require__(144),external_kbnSharedDeps_React_=__webpack_require__(2),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);const searchIdField="name",fieldsToSearch=["description","name","title"];function useLocalSearch(packageList){const localSearchRef=Object(external_kbnSharedDeps_React_.useRef)(null);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{const localSearch=new commonjs.Search(searchIdField);fieldsToSearch.forEach(field=>localSearch.addIndex(field)),localSearch.addDocuments(packageList),localSearchRef.current=localSearch},[packageList]),localSearchRef}var constate_cjs=__webpack_require__(157),constate_cjs_default=__webpack_require__.n(constate_cjs),external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(97),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(95),public_=__webpack_require__(98),hooks=__webpack_require__(107),types=__webpack_require__(112);const[PackageInstallProvider,useInstallPackage,useSetPackageInstallStatus,useGetPackageInstallStatus,useUninstallPackage]=constate_cjs_default()((function({notifications:notifications}){const history=Object(external_kbnSharedDeps_ReactRouterDom_.useHistory)(),{getPath:getPath}=Object(hooks.ib)(),[packages,setPackage]=Object(external_kbnSharedDeps_React_.useState)({}),setPackageInstallStatus=Object(external_kbnSharedDeps_React_.useCallback)(({name:name,status:status,version:version})=>{const packageProps={status:status,version:version};setPackage(prev=>({...prev,[name]:packageProps}))},[]),getPackageInstallStatus=Object(external_kbnSharedDeps_React_.useCallback)(pkg=>packages[pkg],[packages]),installPackage=Object(external_kbnSharedDeps_React_.useCallback)(async({name:name,version:version,title:title,fromUpdate:fromUpdate=!1})=>{const currStatus=getPackageInstallStatus(name),newStatus={...currStatus,name:name,status:types.InstallStatus.installing};setPackageInstallStatus(newStatus);const pkgkey=`${name}-${version}`;if((await Object(hooks.v)(pkgkey)).error)setPackageInstallStatus(fromUpdate?{...currStatus,name:name}:{name:name,status:types.InstallStatus.notInstalled,version:version}),notifications.toasts.addWarning({title:Object(public_.toMountPoint)(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.fleet.integrations.packageInstallErrorTitle",defaultMessage:"Failed to install {title} package",values:{title:title}})),text:Object(public_.toMountPoint)(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.fleet.integrations.packageInstallErrorDescription",defaultMessage:"Something went wrong while trying to install this package. Please try again later."})),iconType:"alert"});else{if(setPackageInstallStatus({name:name,status:types.InstallStatus.installed,version:version}),fromUpdate){const settingsPath=getPath("integration_details_settings",{pkgkey:`${name}-${version}`});history.push(settingsPath)}notifications.toasts.addSuccess({title:Object(public_.toMountPoint)(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.fleet.integrations.packageInstallSuccessTitle",defaultMessage:"Installed {title}",values:{title:title}})),text:Object(public_.toMountPoint)(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.fleet.integrations.packageInstallSuccessDescription",defaultMessage:"Successfully installed {title}",values:{title:title}}))})}},[getPackageInstallStatus,notifications.toasts,setPackageInstallStatus,getPath,history]),uninstallPackage=Object(external_kbnSharedDeps_React_.useCallback)(async({name:name,version:version,title:title})=>{setPackageInstallStatus({name:name,status:types.InstallStatus.uninstalling,version:version});const pkgkey=`${name}-${version}`;(await Object(hooks.E)(pkgkey)).error?(setPackageInstallStatus({name:name,status:types.InstallStatus.installed,version:version}),notifications.toasts.addWarning({title:Object(public_.toMountPoint)(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.fleet.integrations.packageUninstallErrorTitle",defaultMessage:"Failed to uninstall {title} package",values:{title:title}})),text:Object(public_.toMountPoint)(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.fleet.integrations.packageUninstallErrorDescription",defaultMessage:"Something went wrong while trying to uninstall this package. Please try again later."})),iconType:"alert"})):(setPackageInstallStatus({name:name,status:types.InstallStatus.notInstalled,version:null}),notifications.toasts.addSuccess({title:Object(public_.toMountPoint)(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.fleet.integrations.packageUninstallSuccessTitle",defaultMessage:"Uninstalled {title}",values:{title:title}})),text:Object(public_.toMountPoint)(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.fleet.integrations.packageUninstallSuccessDescription",defaultMessage:"Successfully uninstalled {title}",values:{title:title}}))}))},[notifications.toasts,setPackageInstallStatus]);return{packages:packages,installPackage:installPackage,setPackageInstallStatus:setPackageInstallStatus,getPackageInstallStatus:getPackageInstallStatus,uninstallPackage:uninstallPackage}}),value=>value.installPackage,value=>value.setPackageInstallStatus,value=>value.getPackageInstallStatus,value=>value.uninstallPackage)},112:function(module,__webpack_exports__,__webpack_require__){"use strict";var _common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);__webpack_require__.d(__webpack_exports__,"entries",(function(){return _common__WEBPACK_IMPORTED_MODULE_0__.entries})),__webpack_require__.d(__webpack_exports__,"ElasticsearchAssetType",(function(){return _common__WEBPACK_IMPORTED_MODULE_0__.ElasticsearchAssetType})),__webpack_require__.d(__webpack_exports__,"KibanaAssetType",(function(){return _common__WEBPACK_IMPORTED_MODULE_0__.KibanaAssetType})),__webpack_require__.d(__webpack_exports__,"InstallStatus",(function(){return _common__WEBPACK_IMPORTED_MODULE_0__.InstallStatus}));__webpack_require__(26),__webpack_require__(27)},114:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return useStartServices}));var _src_plugins_kibana_react_public__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(98);function useStartServices(){const{services:services}=Object(_src_plugins_kibana_react_public__WEBPACK_IMPORTED_MODULE_0__.useKibana)();if(null===services)throw new Error("KibanaContextProvider not initialized");return services}},119:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _AllSubstringsIndexStrategy=__webpack_require__(145);Object.defineProperty(exports,"AllSubstringsIndexStrategy",{enumerable:!0,get:function(){return _AllSubstringsIndexStrategy.AllSubstringsIndexStrategy}});var _ExactWordIndexStrategy=__webpack_require__(146);Object.defineProperty(exports,"ExactWordIndexStrategy",{enumerable:!0,get:function(){return _ExactWordIndexStrategy.ExactWordIndexStrategy}});var _PrefixIndexStrategy=__webpack_require__(147);Object.defineProperty(exports,"PrefixIndexStrategy",{enumerable:!0,get:function(){return _PrefixIndexStrategy.PrefixIndexStrategy}})},120:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _CaseSensitiveSanitizer=__webpack_require__(148);Object.defineProperty(exports,"CaseSensitiveSanitizer",{enumerable:!0,get:function(){return _CaseSensitiveSanitizer.CaseSensitiveSanitizer}});var _LowerCaseSanitizer=__webpack_require__(149);Object.defineProperty(exports,"LowerCaseSanitizer",{enumerable:!0,get:function(){return _LowerCaseSanitizer.LowerCaseSanitizer}})},121:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return useGetOutputs})),__webpack_require__.d(__webpack_exports__,"a",(function(){return sendPutOutput}));var _services__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(108),_use_request__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(23);function useGetOutputs(){return Object(_use_request__WEBPACK_IMPORTED_MODULE_1__.d)({method:"get",path:_services__WEBPACK_IMPORTED_MODULE_0__.o.getListPath()})}function sendPutOutput(outputId,body){return Object(_use_request__WEBPACK_IMPORTED_MODULE_1__.a)({method:"put",path:_services__WEBPACK_IMPORTED_MODULE_0__.o.getUpdatePath(outputId),body:body})}},128:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _TfIdfSearchIndex=__webpack_require__(150);Object.defineProperty(exports,"TfIdfSearchIndex",{enumerable:!0,get:function(){return _TfIdfSearchIndex.TfIdfSearchIndex}});var _UnorderedSearchIndex=__webpack_require__(151);Object.defineProperty(exports,"UnorderedSearchIndex",{enumerable:!0,get:function(){return _UnorderedSearchIndex.UnorderedSearchIndex}})},129:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(object,path){path=path||[];for(var value=object=object||{},i=0;i<path.length;i++)if(null==(value=value[path[i]]))return null;return value}},130:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _SimpleTokenizer=__webpack_require__(152);Object.defineProperty(exports,"SimpleTokenizer",{enumerable:!0,get:function(){return _SimpleTokenizer.SimpleTokenizer}});var _StemmingTokenizer=__webpack_require__(153);Object.defineProperty(exports,"StemmingTokenizer",{enumerable:!0,get:function(){return _StemmingTokenizer.StemmingTokenizer}});var _StopWordsTokenizer=__webpack_require__(154);Object.defineProperty(exports,"StopWordsTokenizer",{enumerable:!0,get:function(){return _StopWordsTokenizer.StopWordsTokenizer}})},131:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var StopWordsMap=exports.StopWordsMap={a:!0,able:!0,about:!0,across:!0,after:!0,all:!0,almost:!0,also:!0,am:!0,among:!0,an:!0,and:!0,any:!0,are:!0,as:!0,at:!0,be:!0,because:!0,been:!0,but:!0,by:!0,can:!0,cannot:!0,could:!0,dear:!0,did:!0,do:!0,does:!0,either:!0,else:!0,ever:!0,every:!0,for:!0,from:!0,get:!0,got:!0,had:!0,has:!0,have:!0,he:!0,her:!0,hers:!0,him:!0,his:!0,how:!0,however:!0,i:!0,if:!0,in:!0,into:!0,is:!0,it:!0,its:!0,just:!0,least:!0,let:!0,like:!0,likely:!0,may:!0,me:!0,might:!0,most:!0,must:!0,my:!0,neither:!0,no:!0,nor:!0,not:!0,of:!0,off:!0,often:!0,on:!0,only:!0,or:!0,other:!0,our:!0,own:!0,rather:!0,said:!0,say:!0,says:!0,she:!0,should:!0,since:!0,so:!0,some:!0,than:!0,that:!0,the:!0,their:!0,them:!0,then:!0,there:!0,these:!0,they:!0,this:!0,tis:!0,to:!0,too:!0,twas:!0,us:!0,wants:!0,was:!0,we:!0,were:!0,what:!0,when:!0,where:!0,which:!0,while:!0,who:!0,whom:!0,why:!0,will:!0,with:!0,would:!0,yet:!0,you:!0,your:!0};StopWordsMap.constructor=!1,StopWordsMap.hasOwnProperty=!1,StopWordsMap.isPrototypeOf=!1,StopWordsMap.propertyIsEnumerable=!1,StopWordsMap.toLocaleString=!1,StopWordsMap.toString=!1,StopWordsMap.valueOf=!1},132:function(module,exports,__webpack_require__){"use strict";const strictUriEncode=__webpack_require__(158),decodeComponent=__webpack_require__(159),splitOnFirst=__webpack_require__(160);function validateArrayFormatSeparator(value){if("string"!=typeof value||1!==value.length)throw new TypeError("arrayFormatSeparator must be single character string")}function encode(value,options){return options.encode?options.strict?strictUriEncode(value):encodeURIComponent(value):value}function decode(value,options){return options.decode?decodeComponent(value):value}function removeHash(input){const hashStart=input.indexOf("#");return-1!==hashStart&&(input=input.slice(0,hashStart)),input}function extract(input){const queryStart=(input=removeHash(input)).indexOf("?");return-1===queryStart?"":input.slice(queryStart+1)}function parseValue(value,options){return options.parseNumbers&&!Number.isNaN(Number(value))&&"string"==typeof value&&""!==value.trim()?value=Number(value):!options.parseBooleans||null===value||"true"!==value.toLowerCase()&&"false"!==value.toLowerCase()||(value="true"===value.toLowerCase()),value}function parse(input,options){validateArrayFormatSeparator((options=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},options)).arrayFormatSeparator);const formatter=function(options){let result;switch(options.arrayFormat){case"index":return(key,value,accumulator)=>{result=/\[(\d*)\]$/.exec(key),key=key.replace(/\[\d*\]$/,""),result?(void 0===accumulator[key]&&(accumulator[key]={}),accumulator[key][result[1]]=value):accumulator[key]=value};case"bracket":return(key,value,accumulator)=>{result=/(\[\])$/.exec(key),key=key.replace(/\[\]$/,""),result?void 0!==accumulator[key]?accumulator[key]=[].concat(accumulator[key],value):accumulator[key]=[value]:accumulator[key]=value};case"comma":case"separator":return(key,value,accumulator)=>{const newValue="string"==typeof value&&value.split("").indexOf(options.arrayFormatSeparator)>-1?value.split(options.arrayFormatSeparator).map(item=>decode(item,options)):null===value?value:decode(value,options);accumulator[key]=newValue};default:return(key,value,accumulator)=>{void 0!==accumulator[key]?accumulator[key]=[].concat(accumulator[key],value):accumulator[key]=value}}}(options),ret=Object.create(null);if("string"!=typeof input)return ret;if(!(input=input.trim().replace(/^[?#&]/,"")))return ret;for(const param of input.split("&")){let[key,value]=splitOnFirst(options.decode?param.replace(/\+/g," "):param,"=");value=void 0===value?null:["comma","separator"].includes(options.arrayFormat)?value:decode(value,options),formatter(decode(key,options),value,ret)}for(const key of Object.keys(ret)){const value=ret[key];if("object"==typeof value&&null!==value)for(const k of Object.keys(value))value[k]=parseValue(value[k],options);else ret[key]=parseValue(value,options)}return!1===options.sort?ret:(!0===options.sort?Object.keys(ret).sort():Object.keys(ret).sort(options.sort)).reduce((result,key)=>{const value=ret[key];return Boolean(value)&&"object"==typeof value&&!Array.isArray(value)?result[key]=function keysSorter(input){return Array.isArray(input)?input.sort():"object"==typeof input?keysSorter(Object.keys(input)).sort((a,b)=>Number(a)-Number(b)).map(key=>input[key]):input}(value):result[key]=value,result},Object.create(null))}exports.extract=extract,exports.parse=parse,exports.stringify=(object,options)=>{if(!object)return"";validateArrayFormatSeparator((options=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},options)).arrayFormatSeparator);const shouldFilter=key=>options.skipNull&&null==object[key]||options.skipEmptyString&&""===object[key],formatter=function(options){switch(options.arrayFormat){case"index":return key=>(result,value)=>{const index=result.length;return void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,[encode(key,options),"[",index,"]"].join("")]:[...result,[encode(key,options),"[",encode(index,options),"]=",encode(value,options)].join("")]};case"bracket":return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,[encode(key,options),"[]"].join("")]:[...result,[encode(key,options),"[]=",encode(value,options)].join("")];case"comma":case"separator":return key=>(result,value)=>null==value||0===value.length?result:0===result.length?[[encode(key,options),"=",encode(value,options)].join("")]:[[result,encode(value,options)].join(options.arrayFormatSeparator)];default:return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,encode(key,options)]:[...result,[encode(key,options),"=",encode(value,options)].join("")]}}(options),objectCopy={};for(const key of Object.keys(object))shouldFilter(key)||(objectCopy[key]=object[key]);const keys=Object.keys(objectCopy);return!1!==options.sort&&keys.sort(options.sort),keys.map(key=>{const value=object[key];return void 0===value?"":null===value?encode(key,options):Array.isArray(value)?value.reduce(formatter(key),[]).join("&"):encode(key,options)+"="+encode(value,options)}).filter(x=>x.length>0).join("&")},exports.parseUrl=(input,options)=>{options=Object.assign({decode:!0},options);const[url,hash]=splitOnFirst(input,"#");return Object.assign({url:url.split("?")[0]||"",query:parse(extract(input),options)},options&&options.parseFragmentIdentifier&&hash?{fragmentIdentifier:decode(hash,options)}:{})},exports.stringifyUrl=(input,options)=>{options=Object.assign({encode:!0,strict:!0},options);const url=removeHash(input.url).split("?")[0]||"",queryFromUrl=exports.extract(input.url),parsedQueryFromUrl=exports.parse(queryFromUrl,{sort:!1}),query=Object.assign(parsedQueryFromUrl,input.query);let queryString=exports.stringify(query,options);queryString&&(queryString="?"+queryString);let hash=function(url){let hash="";const hashStart=url.indexOf("#");return-1!==hashStart&&(hash=url.slice(hashStart)),hash}(input.url);return input.fragmentIdentifier&&(hash="#"+encode(input.fragmentIdentifier,options)),`${url}${queryString}${hash}`}},144:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _index=__webpack_require__(119);Object.defineProperty(exports,"AllSubstringsIndexStrategy",{enumerable:!0,get:function(){return _index.AllSubstringsIndexStrategy}}),Object.defineProperty(exports,"ExactWordIndexStrategy",{enumerable:!0,get:function(){return _index.ExactWordIndexStrategy}}),Object.defineProperty(exports,"PrefixIndexStrategy",{enumerable:!0,get:function(){return _index.PrefixIndexStrategy}});var _index2=__webpack_require__(120);Object.defineProperty(exports,"CaseSensitiveSanitizer",{enumerable:!0,get:function(){return _index2.CaseSensitiveSanitizer}}),Object.defineProperty(exports,"LowerCaseSanitizer",{enumerable:!0,get:function(){return _index2.LowerCaseSanitizer}});var _index3=__webpack_require__(128);Object.defineProperty(exports,"TfIdfSearchIndex",{enumerable:!0,get:function(){return _index3.TfIdfSearchIndex}}),Object.defineProperty(exports,"UnorderedSearchIndex",{enumerable:!0,get:function(){return _index3.UnorderedSearchIndex}});var _index4=__webpack_require__(130);Object.defineProperty(exports,"SimpleTokenizer",{enumerable:!0,get:function(){return _index4.SimpleTokenizer}}),Object.defineProperty(exports,"StemmingTokenizer",{enumerable:!0,get:function(){return _index4.StemmingTokenizer}}),Object.defineProperty(exports,"StopWordsTokenizer",{enumerable:!0,get:function(){return _index4.StopWordsTokenizer}});var _Search=__webpack_require__(155);Object.defineProperty(exports,"Search",{enumerable:!0,get:function(){return _Search.Search}});var _StopWordsMap=__webpack_require__(131);Object.defineProperty(exports,"StopWordsMap",{enumerable:!0,get:function(){return _StopWordsMap.StopWordsMap}});var _TokenHighlighter=__webpack_require__(156);Object.defineProperty(exports,"TokenHighlighter",{enumerable:!0,get:function(){return _TokenHighlighter.TokenHighlighter}})},145:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.AllSubstringsIndexStrategy=function(){function AllSubstringsIndexStrategy(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AllSubstringsIndexStrategy)}return _createClass(AllSubstringsIndexStrategy,[{key:"expandToken",value:function(token){for(var string,expandedTokens=[],i=0,length=token.length;i<length;++i){string="";for(var j=i;j<length;++j)string+=token.charAt(j),expandedTokens.push(string)}return expandedTokens}}]),AllSubstringsIndexStrategy}()},146:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.ExactWordIndexStrategy=function(){function ExactWordIndexStrategy(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ExactWordIndexStrategy)}return _createClass(ExactWordIndexStrategy,[{key:"expandToken",value:function(token){return token?[token]:[]}}]),ExactWordIndexStrategy}()},147:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.PrefixIndexStrategy=function(){function PrefixIndexStrategy(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PrefixIndexStrategy)}return _createClass(PrefixIndexStrategy,[{key:"expandToken",value:function(token){for(var expandedTokens=[],string="",i=0,length=token.length;i<length;++i)string+=token.charAt(i),expandedTokens.push(string);return expandedTokens}}]),PrefixIndexStrategy}()},148:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.CaseSensitiveSanitizer=function(){function CaseSensitiveSanitizer(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CaseSensitiveSanitizer)}return _createClass(CaseSensitiveSanitizer,[{key:"sanitize",value:function(text){return text?text.trim():""}}]),CaseSensitiveSanitizer}()},149:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.LowerCaseSanitizer=function(){function LowerCaseSanitizer(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LowerCaseSanitizer)}return _createClass(LowerCaseSanitizer,[{key:"sanitize",value:function(text){return text?text.toLocaleLowerCase().trim():""}}]),LowerCaseSanitizer}()},150:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TfIdfSearchIndex=void 0;var obj,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_getNestedFieldValue=__webpack_require__(129),_getNestedFieldValue2=(obj=_getNestedFieldValue)&&obj.__esModule?obj:{default:obj};exports.TfIdfSearchIndex=function(){function TfIdfSearchIndex(uidFieldName){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TfIdfSearchIndex),this._uidFieldName=uidFieldName,this._tokenToIdfCache={},this._tokenMap={}}return _createClass(TfIdfSearchIndex,[{key:"indexDocument",value:function(token,uid,doc){this._tokenToIdfCache={};var tokenDatum,tokenMap=this._tokenMap;"object"!==_typeof(tokenMap[token])?tokenMap[token]=tokenDatum={$numDocumentOccurrences:0,$totalNumOccurrences:1,$uidMap:{}}:(tokenDatum=tokenMap[token]).$totalNumOccurrences++;var uidMap=tokenDatum.$uidMap;"object"!==_typeof(uidMap[uid])?(tokenDatum.$numDocumentOccurrences++,uidMap[uid]={$document:doc,$numTokenOccurrences:1}):uidMap[uid].$numTokenOccurrences++}},{key:"search",value:function(tokens,corpus){for(var uidToDocumentMap={},i=0,numTokens=tokens.length;i<numTokens;i++){var token=tokens[i],tokenMetadata=this._tokenMap[token];if(!tokenMetadata)return[];if(0===i)for(var j=0,numKeys=(keys=Object.keys(tokenMetadata.$uidMap)).length;j<numKeys;j++){uidToDocumentMap[uid=keys[j]]=tokenMetadata.$uidMap[uid].$document}else{var keys;for(j=0,numKeys=(keys=Object.keys(uidToDocumentMap)).length;j<numKeys;j++){var uid=keys[j];"object"!==_typeof(tokenMetadata.$uidMap[uid])&&delete uidToDocumentMap[uid]}}}var documents=[];for(var uid in uidToDocumentMap)documents.push(uidToDocumentMap[uid]);var calculateTfIdf=this._createCalculateTfIdf();return documents.sort((function(documentA,documentB){return calculateTfIdf(tokens,documentB,corpus)-calculateTfIdf(tokens,documentA,corpus)}))}},{key:"_createCalculateIdf",value:function(){var tokenMap=this._tokenMap,tokenToIdfCache=this._tokenToIdfCache;return function(token,documents){if(!tokenToIdfCache[token]){var numDocumentsWithToken=void 0!==tokenMap[token]?tokenMap[token].$numDocumentOccurrences:0;tokenToIdfCache[token]=1+Math.log(documents.length/(1+numDocumentsWithToken))}return tokenToIdfCache[token]}}},{key:"_createCalculateTfIdf",value:function(){var tokenMap=this._tokenMap,uidFieldName=this._uidFieldName,calculateIdf=this._createCalculateIdf();return function(tokens,document,documents){for(var score=0,i=0,numTokens=tokens.length;i<numTokens;++i){var uid,token=tokens[i],inverseDocumentFrequency=calculateIdf(token,documents);inverseDocumentFrequency===1/0&&(inverseDocumentFrequency=0),uid=uidFieldName instanceof Array?document&&(0,_getNestedFieldValue2.default)(document,uidFieldName):document&&document[uidFieldName],score+=(void 0!==tokenMap[token]&&void 0!==tokenMap[token].$uidMap[uid]?tokenMap[token].$uidMap[uid].$numTokenOccurrences:0)*inverseDocumentFrequency}return score}}}]),TfIdfSearchIndex}()},151:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.UnorderedSearchIndex=function(){function UnorderedSearchIndex(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,UnorderedSearchIndex),this._tokenToUidToDocumentMap={}}return _createClass(UnorderedSearchIndex,[{key:"indexDocument",value:function(token,uid,doc){"object"!==_typeof(this._tokenToUidToDocumentMap[token])&&(this._tokenToUidToDocumentMap[token]={}),this._tokenToUidToDocumentMap[token][uid]=doc}},{key:"search",value:function(tokens,corpus){for(var intersectingDocumentMap={},tokenToUidToDocumentMap=this._tokenToUidToDocumentMap,i=0,numTokens=tokens.length;i<numTokens;i++){var documentMap=tokenToUidToDocumentMap[tokens[i]];if(!documentMap)return[];if(0===i)for(var j=0,numKeys=(keys=Object.keys(documentMap)).length;j<numKeys;j++){intersectingDocumentMap[uid=keys[j]]=documentMap[uid]}else for(j=0,numKeys=(keys=Object.keys(intersectingDocumentMap)).length;j<numKeys;j++){var uid=keys[j];"object"!==_typeof(documentMap[uid])&&delete intersectingDocumentMap[uid]}}var keys,documents=[];for(i=0,numKeys=(keys=Object.keys(intersectingDocumentMap)).length;i<numKeys;i++){uid=keys[i];documents.push(intersectingDocumentMap[uid])}return documents}}]),UnorderedSearchIndex}()},152:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var REGEX=/[^a-zа-яё0-9\-']+/i;exports.SimpleTokenizer=function(){function SimpleTokenizer(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SimpleTokenizer)}return _createClass(SimpleTokenizer,[{key:"tokenize",value:function(text){return text.split(REGEX).filter((function(text){return text}))}}]),SimpleTokenizer}()},153:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.StemmingTokenizer=function(){function StemmingTokenizer(stemmingFunction,decoratedTokenizer){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,StemmingTokenizer),this._stemmingFunction=stemmingFunction,this._tokenizer=decoratedTokenizer}return _createClass(StemmingTokenizer,[{key:"tokenize",value:function(text){return this._tokenizer.tokenize(text).map(this._stemmingFunction)}}]),StemmingTokenizer}()},154:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StopWordsTokenizer=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_StopWordsMap=__webpack_require__(131);exports.StopWordsTokenizer=function(){function StopWordsTokenizer(decoratedTokenizer){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,StopWordsTokenizer),this._tokenizer=decoratedTokenizer}return _createClass(StopWordsTokenizer,[{key:"tokenize",value:function(text){return this._tokenizer.tokenize(text).filter((function(token){return!_StopWordsMap.StopWordsMap[token]}))}}]),StopWordsTokenizer}()},155:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Search=void 0;var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_getNestedFieldValue=__webpack_require__(129),_getNestedFieldValue2=(obj=_getNestedFieldValue)&&obj.__esModule?obj:{default:obj},_index=__webpack_require__(119),_index2=__webpack_require__(120),_index3=__webpack_require__(128),_index4=__webpack_require__(130);exports.Search=function(){function Search(uidFieldName){if(function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Search),!uidFieldName)throw Error("js-search requires a uid field name constructor parameter");this._uidFieldName=uidFieldName,this._indexStrategy=new _index.PrefixIndexStrategy,this._searchIndex=new _index3.TfIdfSearchIndex(uidFieldName),this._sanitizer=new _index2.LowerCaseSanitizer,this._tokenizer=new _index4.SimpleTokenizer,this._documents=[],this._searchableFields=[]}return _createClass(Search,[{key:"addDocument",value:function(document){this.addDocuments([document])}},{key:"addDocuments",value:function(documents){this._documents=this._documents.concat(documents),this.indexDocuments_(documents,this._searchableFields)}},{key:"addIndex",value:function(field){this._searchableFields.push(field),this.indexDocuments_(this._documents,[field])}},{key:"search",value:function(query){var tokens=this._tokenizer.tokenize(this._sanitizer.sanitize(query));return this._searchIndex.search(tokens,this._documents)}},{key:"indexDocuments_",value:function(documents,_searchableFields){this._initialized=!0;for(var indexStrategy=this._indexStrategy,sanitizer=this._sanitizer,searchIndex=this._searchIndex,tokenizer=this._tokenizer,uidFieldName=this._uidFieldName,di=0,numDocuments=documents.length;di<numDocuments;di++){var uid,doc=documents[di];uid=uidFieldName instanceof Array?(0,_getNestedFieldValue2.default)(doc,uidFieldName):doc[uidFieldName];for(var sfi=0,numSearchableFields=_searchableFields.length;sfi<numSearchableFields;sfi++){var fieldValue,searchableField=_searchableFields[sfi];if(null!=(fieldValue=searchableField instanceof Array?(0,_getNestedFieldValue2.default)(doc,searchableField):doc[searchableField])&&"string"!=typeof fieldValue&&fieldValue.toString&&(fieldValue=fieldValue.toString()),"string"==typeof fieldValue)for(var fieldTokens=tokenizer.tokenize(sanitizer.sanitize(fieldValue)),fti=0,numFieldValues=fieldTokens.length;fti<numFieldValues;fti++)for(var fieldToken=fieldTokens[fti],expandedTokens=indexStrategy.expandToken(fieldToken),eti=0,nummExpandedTokens=expandedTokens.length;eti<nummExpandedTokens;eti++){var expandedToken=expandedTokens[eti];searchIndex.indexDocument(expandedToken,uid,doc)}}}}},{key:"indexStrategy",set:function(value){if(this._initialized)throw Error("IIndexStrategy cannot be set after initialization");this._indexStrategy=value},get:function(){return this._indexStrategy}},{key:"sanitizer",set:function(value){if(this._initialized)throw Error("ISanitizer cannot be set after initialization");this._sanitizer=value},get:function(){return this._sanitizer}},{key:"searchIndex",set:function(value){if(this._initialized)throw Error("ISearchIndex cannot be set after initialization");this._searchIndex=value},get:function(){return this._searchIndex}},{key:"tokenizer",set:function(value){if(this._initialized)throw Error("ITokenizer cannot be set after initialization");this._tokenizer=value},get:function(){return this._tokenizer}}]),Search}()},156:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TokenHighlighter=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_index=__webpack_require__(119),_index2=__webpack_require__(120);exports.TokenHighlighter=function(){function TokenHighlighter(opt_indexStrategy,opt_sanitizer,opt_wrapperTagName){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TokenHighlighter),this._indexStrategy=opt_indexStrategy||new _index.PrefixIndexStrategy,this._sanitizer=opt_sanitizer||new _index2.LowerCaseSanitizer,this._wrapperTagName=opt_wrapperTagName||"mark"}return _createClass(TokenHighlighter,[{key:"highlight",value:function(text,tokens){for(var tagsLength=this._wrapText("").length,tokenDictionary=Object.create(null),i=0,numTokens=tokens.length;i<numTokens;i++)for(var token=this._sanitizer.sanitize(tokens[i]),expandedTokens=this._indexStrategy.expandToken(token),j=0,numExpandedTokens=expandedTokens.length;j<numExpandedTokens;j++){var expandedToken=expandedTokens[j];tokenDictionary[expandedToken]?tokenDictionary[expandedToken].push(token):tokenDictionary[expandedToken]=[token]}for(var actualCurrentWord="",sanitizedCurrentWord="",currentWordStartIndex=0,textLength=(i=0,text.length);i<textLength;i++){var character=text.charAt(i);" "===character?(actualCurrentWord="",sanitizedCurrentWord="",currentWordStartIndex=i+1):(actualCurrentWord+=character,sanitizedCurrentWord+=this._sanitizer.sanitize(character)),tokenDictionary[sanitizedCurrentWord]&&tokenDictionary[sanitizedCurrentWord].indexOf(sanitizedCurrentWord)>=0&&(actualCurrentWord=this._wrapText(actualCurrentWord),text=text.substring(0,currentWordStartIndex)+actualCurrentWord+text.substring(i+1),i+=tagsLength,textLength+=tagsLength)}return text}},{key:"_wrapText",value:function(text){var tagName=this._wrapperTagName;return"<"+tagName+">"+text+"</"+tagName+">"}}]),TokenHighlighter}()},157:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var React=__webpack_require__(2);function createUseContext(context){return function(){var value=React.useContext(context);return value}}exports.default=function(useValue){for(var _len=arguments.length,splitValues=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)splitValues[_key-1]=arguments[_key];var Context=React.createContext("_NP_"),Provider=function(props){var value=useValue(props),createMemoDeps=splitValues[0],deps=createMemoDeps&&createMemoDeps(value);var memoizedValue=Array.isArray(deps)?React.useMemo((function(){return value}),deps):value;return React.createElement(Context.Provider,{value:memoizedValue},props.children)},useContext=createUseContext(Context);useContext.Context=Context,useContext.Provider=Provider;var tuple=[];if(splitValues.length){var contexts=[],SplitProvider=function(props){for(var value=useValue(props),children=props.children,i=0;i<contexts.length;i+=1){var context=contexts[i],splitValue=splitValues[i];children=React.createElement(context.Provider,{value:splitValue(value)},children)}return children};0,tuple.push(SplitProvider);for(var i=0;i<splitValues.length;i+=1){var context=React.createContext("_NP_");contexts.push(context),tuple.push(createUseContext(context))}}else tuple.push(Provider,createUseContext(Context));for(var _i=0;_i<tuple.length;_i+=1)useContext[_i]=tuple[_i];return"function"==typeof Symbol&&Symbol.iterator&&(useContext[Symbol.iterator]=function(){return tuple[Symbol.iterator]()}),useContext}},158:function(module,exports,__webpack_require__){"use strict";module.exports=str=>encodeURIComponent(str).replace(/[!'()*]/g,x=>"%"+x.charCodeAt(0).toString(16).toUpperCase())},159:function(module,exports,__webpack_require__){"use strict";var singleMatcher=new RegExp("%[a-f0-9]{2}","gi"),multiMatcher=new RegExp("(%[a-f0-9]{2})+","gi");function decodeComponents(components,split){try{return decodeURIComponent(components.join(""))}catch(err){}if(1===components.length)return components;split=split||1;var left=components.slice(0,split),right=components.slice(split);return Array.prototype.concat.call([],decodeComponents(left),decodeComponents(right))}function decode(input){try{return decodeURIComponent(input)}catch(err){for(var tokens=input.match(singleMatcher),i=1;i<tokens.length;i++)tokens=(input=decodeComponents(tokens,i).join("")).match(singleMatcher);return input}}module.exports=function(encodedURI){if("string"!=typeof encodedURI)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof encodedURI+"`");try{return encodedURI=encodedURI.replace(/\+/g," "),decodeURIComponent(encodedURI)}catch(err){return function(input){for(var replaceMap={"%FE%FF":"��","%FF%FE":"��"},match=multiMatcher.exec(input);match;){try{replaceMap[match[0]]=decodeURIComponent(match[0])}catch(err){var result=decode(match[0]);result!==match[0]&&(replaceMap[match[0]]=result)}match=multiMatcher.exec(input)}replaceMap["%C2"]="�";for(var entries=Object.keys(replaceMap),i=0;i<entries.length;i++){var key=entries[i];input=input.replace(new RegExp(key,"g"),replaceMap[key])}return input}(encodedURI)}}},160:function(module,exports,__webpack_require__){"use strict";module.exports=(string,separator)=>{if("string"!=typeof string||"string"!=typeof separator)throw new TypeError("Expected the arguments to be of type `string`");if(""===separator)return[string];const separatorIndex=string.indexOf(separator);return-1===separatorIndex?[string]:[string.slice(0,separatorIndex),string.slice(separatorIndex+separator.length)]}}}]);