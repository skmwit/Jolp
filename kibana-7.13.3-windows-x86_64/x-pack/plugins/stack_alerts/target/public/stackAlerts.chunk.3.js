/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.stackAlerts_bundle_jsonpfunction=window.stackAlerts_bundle_jsonpfunction||[]).push([[3],{46:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"GeoContainmentAlertTypeExpression",(function(){return GeoContainmentAlertTypeExpression})),__webpack_require__.d(__webpack_exports__,"default",(function(){return GeoContainmentAlertTypeExpression}));var external_kbnSharedDeps_React_=__webpack_require__(2),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_ElasticEui_=__webpack_require__(7),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(8),external_kbnSharedDeps_KbnI18n_=__webpack_require__(0),public_=__webpack_require__(9);const ES_GEO_FIELD_TYPES=["geo_point"],ES_GEO_SHAPE_TYPES=["geo_shape"];function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class geo_index_pattern_select_GeoIndexPatternSelect extends external_kbnSharedDeps_React_.Component{constructor(...args){super(...args),_defineProperty(this,"_isMounted",!1),_defineProperty(this,"state",{doesIndexPatternHaveGeoField:!1,noIndexPatternsExist:!1}),_defineProperty(this,"_loadIndexPattern",async indexPatternId=>{if(!indexPatternId||0===indexPatternId.length||!this.props.indexPatternService)return;let indexPattern;try{indexPattern=await this.props.indexPatternService.get(indexPatternId)}catch(err){return}return this._isMounted&&indexPattern.id===indexPatternId?(this.setState({doesIndexPatternHaveGeoField:indexPattern.fields.some(field=>this.props.includedGeoTypes.includes(field.type))}),indexPattern):void 0}),_defineProperty(this,"_onIndexPatternSelect",async indexPatternId=>{const indexPattern=await this._loadIndexPattern(indexPatternId);indexPattern&&this.props.onChange(indexPattern)}),_defineProperty(this,"_onNoIndexPatterns",()=>{this.setState({noIndexPatternsExist:!0})})}componentWillUnmount(){this._isMounted=!1}componentDidMount(){this._isMounted=!0,this.props.value&&this._loadIndexPattern(this.props.value)}_renderNoIndexPatternWarning(){return this.state.noIndexPatternsExist?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.stackAlerts.geoContainment.noIndexPattern.messageTitle",{defaultMessage:"Couldn't find any index patterns"}),color:"warning"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.stackAlerts.geoContainment.noIndexPattern.doThisPrefixDescription",defaultMessage:"You'll need to "}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:this.props.http.basePath.prepend("/app/management/kibana/indexPatterns")},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.stackAlerts.geoContainment.noIndexPattern.doThisLinkTextDescription",defaultMessage:"Create an index pattern."}))),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.stackAlerts.geoContainment.noIndexPattern.hintDescription",defaultMessage:"Don't have any data? "}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:this.props.http.basePath.prepend("/app/home#/tutorial_directory/sampleData")},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.stackAlerts.geoContainment.noIndexPattern.getStartedLinkText",defaultMessage:"Get started with some sample data sets."})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"})):null}render(){const IndexPatternSelectComponent=this.props.IndexPatternSelectComponent,isIndexPatternInvalid=!!this.props.value&&!this.state.doesIndexPatternHaveGeoField,error=isIndexPatternInvalid?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.stackAlerts.geoContainment.noGeoFieldInIndexPattern.message",{defaultMessage:"Index pattern does not contain any allowed geospatial fields. Must have one of type {geoFields}.",values:{geoFields:this.props.includedGeoTypes.join(", ")}}):"";return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,this._renderNoIndexPatternWarning(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.stackAlerts.geoContainment.indexPatternSelectLabel",{defaultMessage:"Index pattern"}),isInvalid:isIndexPatternInvalid,error:error},IndexPatternSelectComponent?external_kbnSharedDeps_React_default.a.createElement(IndexPatternSelectComponent,{isInvalid:isIndexPatternInvalid,isDisabled:this.state.noIndexPatternsExist,indexPatternId:this.props.value,onChange:this._onIndexPatternSelect,placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.stackAlerts.geoContainment.indexPatternSelectPlaceholder",{defaultMessage:"Select index pattern"}),fieldTypes:this.props.includedGeoTypes,onNoIndexPatterns:this._onNoIndexPatterns,isClearable:!1}):external_kbnSharedDeps_React_default.a.createElement("div",null)))}}var external_kbnSharedDeps_Lodash_=__webpack_require__(10),external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);function fieldsToOptions(fields){return fields?fields.map(field=>({value:field,label:field.name})).sort((a,b)=>a.label.toLowerCase().localeCompare(b.label.toLowerCase())):[]}function SingleFieldSelect({placeholder:placeholder,value:value,onChange:onChange,fields:fields}){const selectedOptions=[];if(value&&fields){const selectedField=fields.find(field=>field.name===value);selectedField&&selectedOptions.push({value:selectedField,label:value})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiComboBox,{singleSelection:!0,options:fieldsToOptions(fields),selectedOptions:selectedOptions,onChange:selectedOptions=>{onChange(external_kbnSharedDeps_Lodash_default.a.get(selectedOptions,"0.value.name"))},isDisabled:!fields,renderOption:function(option,searchValue,contentClassName){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{className:contentClassName,gutterSize:"s",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:null},external_kbnSharedDeps_React_default.a.createElement(public_.FieldIcon,{type:option.value.type,fill:"none"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHighlight,{search:searchValue},option.label)))},isClearable:!1,placeholder:placeholder,compressed:!0})}const ExpressionWithPopover=({popoverContent:popoverContent,expressionDescription:expressionDescription,defaultValue:defaultValue,value:value,isInvalid:isInvalid})=>{const[popoverOpen,setPopoverOpen]=Object(external_kbnSharedDeps_React_.useState)(!1);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{id:"popoverForExpression",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiExpression,{display:"columns","data-test-subj":"selectIndexExpression",description:expressionDescription,value:value||defaultValue,isActive:popoverOpen,onClick:()=>setPopoverOpen(!0),isInvalid:isInvalid}),isOpen:popoverOpen,closePopover:()=>setPopoverOpen(!1),ownFocus:!0,anchorPosition:"downLeft",zIndex:8e3,display:"block"},external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:"450px"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopoverTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,expressionDescription),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{"data-test-subj":"closePopover",iconType:"cross",color:"danger","aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.stackAlerts.geoContainment.ui.expressionPopover.closePopoverLabel",{defaultMessage:"Close"}),onClick:()=>setPopoverOpen(!1)})))),popoverContent))},EntityIndexExpression=({setAlertParamsDate:setAlertParamsDate,setAlertParamsGeoField:setAlertParamsGeoField,errors:errors,setIndexPattern:setIndexPattern,indexPattern:indexPattern,isInvalid:isInvalid,dateField:timeField,geoField:geoField,data:data})=>{const{http:http}=Object(public_.useKibana)().services,IndexPatternSelect=data.ui&&data.ui.IndexPatternSelect||null,oldIndexPattern=(value=>{const ref=Object(external_kbnSharedDeps_React_.useRef)();return Object(external_kbnSharedDeps_React_.useEffect)(()=>{ref.current=value}),ref.current})(indexPattern),fields=Object(external_kbnSharedDeps_React_.useRef)({dateFields:[],geoFields:[]});Object(external_kbnSharedDeps_React_.useEffect)(()=>{oldIndexPattern!==indexPattern&&(fields.current.geoFields=indexPattern.fields.length&&indexPattern.fields.filter(field=>ES_GEO_FIELD_TYPES.includes(field.type))||[],fields.current.geoFields.length&&setAlertParamsGeoField(fields.current.geoFields[0].name),fields.current.dateFields=indexPattern.fields.length&&indexPattern.fields.filter(field=>"date"===field.type)||[],fields.current.dateFields.length&&setAlertParamsDate(fields.current.dateFields[0].name))},[indexPattern,oldIndexPattern,setAlertParamsDate,setAlertParamsGeoField]);const indexPopover=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{id:"geoIndexPatternSelect",fullWidth:!0,error:errors.index},external_kbnSharedDeps_React_default.a.createElement(geo_index_pattern_select_GeoIndexPatternSelect,{onChange:_indexPattern=>{_indexPattern&&setIndexPattern(_indexPattern)},value:indexPattern.id,IndexPatternSelectComponent:IndexPatternSelect,indexPatternService:data.indexPatterns,http:http,includedGeoTypes:ES_GEO_FIELD_TYPES})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{id:"containmentTimeField",fullWidth:!0,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.stackAlerts.geoContainment.timeFieldLabel",defaultMessage:"Time field"})},external_kbnSharedDeps_React_default.a.createElement(SingleFieldSelect,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.stackAlerts.geoContainment.selectTimeLabel",{defaultMessage:"Select time field"}),value:timeField,onChange:_timeField=>_timeField&&setAlertParamsDate(_timeField),fields:fields.current.dateFields})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{id:"geoField",fullWidth:!0,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.stackAlerts.geoContainment.geofieldLabel",{defaultMessage:"Geospatial field"})},external_kbnSharedDeps_React_default.a.createElement(SingleFieldSelect,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.stackAlerts.geoContainment.selectGeoLabel",{defaultMessage:"Select geo field"}),value:geoField,onChange:_geoField=>_geoField&&setAlertParamsGeoField(_geoField),fields:fields.current.geoFields})));return external_kbnSharedDeps_React_default.a.createElement(ExpressionWithPopover,{isInvalid:isInvalid,value:indexPattern.title,defaultValue:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.stackAlerts.geoContainment.entityIndexSelect",{defaultMessage:"Select an index pattern and geo point field"}),popoverContent:indexPopover,expressionDescription:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.stackAlerts.geoContainment.entityIndexLabel",{defaultMessage:"index"})})},ENTITY_TYPES=["string","number","ip"];const EntityByExpression=({errors:errors,entity:entity,setAlertParamsEntity:setAlertParamsEntity,indexFields:indexFields,isInvalid:isInvalid})=>{const oldIndexFields=(value=>{const ref=Object(external_kbnSharedDeps_React_.useRef)();return Object(external_kbnSharedDeps_React_.useEffect)(()=>{ref.current=value}),ref.current})(indexFields),fields=Object(external_kbnSharedDeps_React_.useRef)({indexFields:[]});Object(external_kbnSharedDeps_React_.useEffect)(()=>{external_kbnSharedDeps_Lodash_default.a.isEqual(oldIndexFields,indexFields)||(fields.current.indexFields=function(fields){return fields.filter(field=>{const isSpecifiedSupportedField=ENTITY_TYPES.includes(field.type),hasLeadingUnderscore=field.name.startsWith("_"),isAggregatable=!!field.aggregatable;return isSpecifiedSupportedField&&isAggregatable&&!hasLeadingUnderscore})}(indexFields),!entity&&fields.current.indexFields.length&&setAlertParamsEntity(fields.current.indexFields[0].name))},[indexFields,oldIndexFields,setAlertParamsEntity,entity]);const indexPopover=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{id:"entitySelect",fullWidth:!0,error:errors.index},external_kbnSharedDeps_React_default.a.createElement(SingleFieldSelect,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.stackAlerts.geoContainment.topHitsSplitFieldSelectPlaceholder",{defaultMessage:"Select entity field"}),value:entity,onChange:_entity=>_entity&&setAlertParamsEntity(_entity),fields:fields.current.indexFields}));return external_kbnSharedDeps_React_default.a.createElement(ExpressionWithPopover,{isInvalid:isInvalid,value:entity,defaultValue:"Select entity field",popoverContent:indexPopover,expressionDescription:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.stackAlerts.geoContainment.entityByLabel",{defaultMessage:"by"})})},BoundaryIndexExpression=({alertParams:alertParams,errors:errors,boundaryIndexPattern:boundaryIndexPattern,boundaryNameField:boundaryNameField,setBoundaryIndexPattern:setBoundaryIndexPattern,setBoundaryGeoField:setBoundaryGeoField,setBoundaryNameField:setBoundaryNameField,data:data})=>{const BOUNDARY_NAME_ENTITY_TYPES=["string","number","ip"],{http:http}=Object(public_.useKibana)().services,IndexPatternSelect=data.ui&&data.ui.IndexPatternSelect||null,{boundaryGeoField:boundaryGeoField}=alertParams,nothingSelected={name:"<nothing selected>",type:"string"},oldIndexPattern=(value=>{const ref=Object(external_kbnSharedDeps_React_.useRef)();return Object(external_kbnSharedDeps_React_.useEffect)(()=>{ref.current=value}),ref.current})(boundaryIndexPattern),fields=Object(external_kbnSharedDeps_React_.useRef)({geoFields:[],boundaryNameFields:[]});Object(external_kbnSharedDeps_React_.useEffect)(()=>{oldIndexPattern!==boundaryIndexPattern&&(fields.current.geoFields=boundaryIndexPattern.fields.length&&boundaryIndexPattern.fields.filter(field=>ES_GEO_SHAPE_TYPES.includes(field.type))||[],fields.current.geoFields.length&&setBoundaryGeoField(fields.current.geoFields[0].name),fields.current.boundaryNameFields=[...boundaryIndexPattern.fields.filter(field=>BOUNDARY_NAME_ENTITY_TYPES.includes(field.type)&&!field.name.startsWith("_")&&!field.name.endsWith("keyword")),nothingSelected],fields.current.boundaryNameFields.length&&setBoundaryNameField(fields.current.boundaryNameFields[0].name))},[BOUNDARY_NAME_ENTITY_TYPES,boundaryIndexPattern,nothingSelected,oldIndexPattern,setBoundaryGeoField,setBoundaryNameField]);const indexPopover=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{id:"geoIndexPatternSelect",fullWidth:!0,error:errors.index},external_kbnSharedDeps_React_default.a.createElement(geo_index_pattern_select_GeoIndexPatternSelect,{onChange:_indexPattern=>{_indexPattern&&setBoundaryIndexPattern(_indexPattern)},value:boundaryIndexPattern.id,IndexPatternSelectComponent:IndexPatternSelect,indexPatternService:data.indexPatterns,http:http,includedGeoTypes:ES_GEO_SHAPE_TYPES})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{id:"geoField",fullWidth:!0,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.stackAlerts.geoContainment.geofieldLabel",{defaultMessage:"Geospatial field"})},external_kbnSharedDeps_React_default.a.createElement(SingleFieldSelect,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.stackAlerts.geoContainment.selectLabel",{defaultMessage:"Select geo field"}),value:boundaryGeoField,onChange:setBoundaryGeoField,fields:fields.current.geoFields})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{id:"boundaryNameFieldSelect",fullWidth:!0,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.stackAlerts.geoContainment.boundaryNameSelectLabel",{defaultMessage:"Human-readable boundary name (optional)"})},external_kbnSharedDeps_React_default.a.createElement(SingleFieldSelect,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.stackAlerts.geoContainment.boundaryNameSelect",{defaultMessage:"Select boundary name"}),value:boundaryNameField||null,onChange:name=>{setBoundaryNameField(name===nothingSelected.name?void 0:name)},fields:fields.current.boundaryNameFields})));return external_kbnSharedDeps_React_default.a.createElement(ExpressionWithPopover,{defaultValue:"Select an index pattern and geo shape field",value:boundaryIndexPattern.title,popoverContent:indexPopover,expressionDescription:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.stackAlerts.geoContainment.indexLabel",{defaultMessage:"index"})})};var data_public_=__webpack_require__(12);const DEFAULT_VALUES_ENTITY="",DEFAULT_VALUES_INDEX="",DEFAULT_VALUES_INDEX_ID="",DEFAULT_VALUES_DATE_FIELD="",DEFAULT_VALUES_BOUNDARY_TYPE="entireIndex",DEFAULT_VALUES_GEO_FIELD="",DEFAULT_VALUES_BOUNDARY_INDEX="",DEFAULT_VALUES_BOUNDARY_INDEX_ID="",DEFAULT_VALUES_BOUNDARY_GEO_FIELD="",DEFAULT_VALUES_BOUNDARY_NAME_FIELD="";function validateQuery(query){try{"kuery"===query.language?data_public_.esKuery.fromKueryExpression(query.query):data_public_.esQuery.luceneStringToDsl(query.query)}catch(err){return!1}return!0}const GeoContainmentAlertTypeExpression=({alertParams:alertParams,alertInterval:alertInterval,setAlertParams:setAlertParams,setAlertProperty:setAlertProperty,errors:errors,data:data})=>{const{index:index,indexId:indexId,indexQuery:indexQuery,geoField:geoField,entity:entity,dateField:dateField,boundaryType:boundaryType,boundaryIndexTitle:boundaryIndexTitle,boundaryIndexId:boundaryIndexId,boundaryIndexQuery:boundaryIndexQuery,boundaryGeoField:boundaryGeoField,boundaryNameField:boundaryNameField}=alertParams,[indexPattern,_setIndexPattern]=Object(external_kbnSharedDeps_React_.useState)({id:"",fields:[],title:""}),setIndexPattern=_indexPattern=>{_indexPattern&&(_setIndexPattern(_indexPattern),_indexPattern.title&&setAlertParams("index",_indexPattern.title),_indexPattern.id&&setAlertParams("indexId",_indexPattern.id))},[indexQueryInput,setIndexQueryInput]=Object(external_kbnSharedDeps_React_.useState)(indexQuery||{query:"",language:"kuery"}),[boundaryIndexPattern,_setBoundaryIndexPattern]=Object(external_kbnSharedDeps_React_.useState)({id:"",fields:[],title:""}),setBoundaryIndexPattern=_indexPattern=>{_indexPattern&&(_setBoundaryIndexPattern(_indexPattern),_indexPattern.title&&setAlertParams("boundaryIndexTitle",_indexPattern.title),_indexPattern.id&&setAlertParams("boundaryIndexId",_indexPattern.id))},[boundaryIndexQueryInput,setBoundaryIndexQueryInput]=Object(external_kbnSharedDeps_React_.useState)(boundaryIndexQuery||{query:"",language:"kuery"});external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.stackAlerts.geoContainment.fixErrorInExpressionBelowValidationMessage",{defaultMessage:"Expression contains errors."});return Object(external_kbnSharedDeps_React_.useEffect)(()=>{(async()=>{if(setAlertProperty("params",{...alertParams,index:null!=index?index:DEFAULT_VALUES_INDEX,indexId:null!=indexId?indexId:DEFAULT_VALUES_INDEX_ID,entity:null!=entity?entity:DEFAULT_VALUES_ENTITY,dateField:null!=dateField?dateField:DEFAULT_VALUES_DATE_FIELD,boundaryType:null!=boundaryType?boundaryType:DEFAULT_VALUES_BOUNDARY_TYPE,geoField:null!=geoField?geoField:DEFAULT_VALUES_GEO_FIELD,boundaryIndexTitle:null!=boundaryIndexTitle?boundaryIndexTitle:DEFAULT_VALUES_BOUNDARY_INDEX,boundaryIndexId:null!=boundaryIndexId?boundaryIndexId:DEFAULT_VALUES_BOUNDARY_INDEX_ID,boundaryGeoField:null!=boundaryGeoField?boundaryGeoField:DEFAULT_VALUES_BOUNDARY_GEO_FIELD,boundaryNameField:null!=boundaryNameField?boundaryNameField:DEFAULT_VALUES_BOUNDARY_NAME_FIELD}),data.indexPatterns){if(indexId){const _indexPattern=await data.indexPatterns.get(indexId);setIndexPattern(_indexPattern)}if(boundaryIndexId){const _boundaryIndexPattern=await data.indexPatterns.get(boundaryIndexId);setBoundaryIndexPattern(_boundaryIndexPattern)}}})()},[]),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.stackAlerts.geoContainment.selectEntity",defaultMessage:"Select entity"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(EntityIndexExpression,{dateField:dateField,geoField:geoField,errors:errors,setAlertParamsDate:_date=>setAlertParams("dateField",_date),setAlertParamsGeoField:_geoField=>setAlertParams("geoField",_geoField),setAlertProperty:setAlertProperty,setIndexPattern:setIndexPattern,indexPattern:indexPattern,isInvalid:!indexId||!dateField||!geoField,data:data}),external_kbnSharedDeps_React_default.a.createElement(EntityByExpression,{errors:errors,entity:entity,setAlertParamsEntity:entityName=>setAlertParams("entity",entityName),indexFields:indexPattern.fields,isInvalid:!!(indexId&&dateField&&geoField)&&!entity}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(data_public_.QueryStringInput,{disableAutoFocus:!0,bubbleSubmitEvent:!0,indexPatterns:indexPattern?[indexPattern]:[],query:indexQueryInput,onChange:query=>{query.language&&(validateQuery(query)&&setAlertParams("indexQuery",query),setIndexQueryInput(query))}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.stackAlerts.geoContainment.selectBoundaryIndex",defaultMessage:"Select boundary"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(BoundaryIndexExpression,{alertParams:alertParams,errors:errors,boundaryIndexPattern:boundaryIndexPattern,setBoundaryIndexPattern:setBoundaryIndexPattern,setBoundaryGeoField:_geoField=>_geoField&&setAlertParams("boundaryGeoField",_geoField),setBoundaryNameField:_boundaryNameField=>setAlertParams("boundaryNameField",_boundaryNameField||""),boundaryNameField:boundaryNameField,data:data}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(data_public_.QueryStringInput,{disableAutoFocus:!0,bubbleSubmitEvent:!0,indexPatterns:boundaryIndexPattern?[boundaryIndexPattern]:[],query:boundaryIndexQueryInput,onChange:query=>{query.language&&(validateQuery(query)&&setAlertParams("boundaryIndexQuery",query),setBoundaryIndexQueryInput(query))}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}))}}}]);