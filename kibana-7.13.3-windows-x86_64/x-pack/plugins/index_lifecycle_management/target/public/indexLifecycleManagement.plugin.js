/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(modules){function webpackJsonpCallback(data){for(var moduleId,chunkId,chunkIds=data[0],moreModules=data[1],i=0,resolves=[];i<chunkIds.length;i++)chunkId=chunkIds[i],Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]&&resolves.push(installedChunks[chunkId][0]),installedChunks[chunkId]=0;for(moduleId in moreModules)Object.prototype.hasOwnProperty.call(moreModules,moduleId)&&(modules[moduleId]=moreModules[moduleId]);for(parentJsonpFunction&&parentJsonpFunction(data);resolves.length;)resolves.shift()()}var installedModules={},installedChunks={0:0};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.e=function(chunkId){var promises=[],installedChunkData=installedChunks[chunkId];if(0!==installedChunkData)if(installedChunkData)promises.push(installedChunkData[2]);else{var promise=new Promise((function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var onScriptComplete,script=document.createElement("script");script.charset="utf-8",script.timeout=120,__webpack_require__.nc&&script.setAttribute("nonce",__webpack_require__.nc),script.src=function(chunkId){return __webpack_require__.p+"indexLifecycleManagement.chunk."+chunkId+".js"}(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null,clearTimeout(timeout);var chunk=installedChunks[chunkId];if(0!==chunk){if(chunk){var errorType=event&&("load"===event.type?"missing":event.type),realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")",error.name="ChunkLoadError",error.type=errorType,error.request=realSrc,chunk[1](error)}installedChunks[chunkId]=void 0}};var timeout=setTimeout((function(){onScriptComplete({type:"timeout",target:script})}),12e4);script.onerror=script.onload=onScriptComplete,document.head.appendChild(script)}return Promise.all(promises)},__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__.oe=function(err){throw console.error(err),err};var jsonpArray=window.indexLifecycleManagement_bundle_jsonpfunction=window.indexLifecycleManagement_bundle_jsonpfunction||[],oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback,jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;__webpack_require__(__webpack_require__.s=21)}([function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return init})),__webpack_require__.d(__webpack_exports__,"d",(function(){return sendPost})),__webpack_require__.d(__webpack_exports__,"c",(function(){return sendGet})),__webpack_require__.d(__webpack_exports__,"b",(function(){return sendDelete})),__webpack_require__.d(__webpack_exports__,"e",(function(){return useRequest}));var _src_plugins_es_ui_shared_public__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14);let _httpClient;function init(httpClient){_httpClient=httpClient}function getFullPath(path){const apiPrefix="/api/index_lifecycle_management";return path?`${apiPrefix}/${path}`:apiPrefix}function sendPost(path,payload,query){return _httpClient.post(getFullPath(path),{body:JSON.stringify(payload),query:query})}function sendGet(path,query){return _httpClient.get(getFullPath(path),{query:query})}function sendDelete(path){return _httpClient.delete(getFullPath(path))}const useRequest=config=>Object(_src_plugins_es_ui_shared_public__WEBPACK_IMPORTED_MODULE_0__.useRequest)(_httpClient,{...config,path:getFullPath(config.path)})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"n",(function(){return defaultIndexPriority})),__webpack_require__.d(__webpack_exports__,"p",(function(){return defaultRolloverAction})),__webpack_require__.d(__webpack_exports__,"o",(function(){return defaultPolicy})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ui_metric.b})),__webpack_require__.d(__webpack_exports__,"j",(function(){return ui_metric.k})),__webpack_require__.d(__webpack_exports__,"m",(function(){return ui_metric.n})),__webpack_require__.d(__webpack_exports__,"k",(function(){return ui_metric.l})),__webpack_require__.d(__webpack_exports__,"h",(function(){return ui_metric.i})),__webpack_require__.d(__webpack_exports__,"i",(function(){return ui_metric.j})),__webpack_require__.d(__webpack_exports__,"l",(function(){return ui_metric.m})),__webpack_require__.d(__webpack_exports__,"b",(function(){return ui_metric.c})),__webpack_require__.d(__webpack_exports__,"e",(function(){return ui_metric.f})),__webpack_require__.d(__webpack_exports__,"d",(function(){return ui_metric.e})),__webpack_require__.d(__webpack_exports__,"c",(function(){return ui_metric.d})),__webpack_require__.d(__webpack_exports__,"g",(function(){return ui_metric.h})),__webpack_require__.d(__webpack_exports__,"f",(function(){return ui_metric.g}));const defaultIndexPriority={hot:"100",warm:"50",cold:"0",frozen:"0"},defaultRolloverAction={max_age:"30d",max_primary_shard_size:"50gb"},defaultPolicy={name:"",phases:{hot:{actions:{rollover:defaultRolloverAction}}}};var ui_metric=__webpack_require__(16)},function(module,__webpack_exports__,__webpack_require__){"use strict";let toasts,fatalErrors;function init(_toasts,_fatalErrors){toasts=_toasts,fatalErrors=_fatalErrors}__webpack_require__.d(__webpack_exports__,"c",(function(){return toasts})),__webpack_require__.d(__webpack_exports__,"a",(function(){return fatalErrors})),__webpack_require__.d(__webpack_exports__,"b",(function(){return init}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return trackUiMetric})),__webpack_require__.d(__webpack_exports__,"b",(function(){return init})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getUiMetricsForPhases}));var _constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5);let trackUiMetric=(metricType,eventName)=>{};function init(usageCollection){usageCollection&&(trackUiMetric=usageCollection.reportUiCounter.bind(usageCollection,_constants__WEBPACK_IMPORTED_MODULE_0__.a))}function getUiMetricsForPhases(phases){return[{metric:_constants__WEBPACK_IMPORTED_MODULE_0__.b,isTracked:()=>Boolean(phases.cold)},{metric:_constants__WEBPACK_IMPORTED_MODULE_0__.e,isTracked:()=>Boolean(phases.warm)},{metric:_constants__WEBPACK_IMPORTED_MODULE_0__.d,isTracked:()=>{const isHotPhasePriorityChanged=phases.hot&&phases.hot.actions.set_priority&&phases.hot.actions.set_priority.priority!==parseInt(_constants__WEBPACK_IMPORTED_MODULE_0__.n.hot,10),isWarmPhasePriorityChanged=phases.warm&&phases.warm.actions.set_priority&&phases.warm.actions.set_priority.priority!==parseInt(_constants__WEBPACK_IMPORTED_MODULE_0__.n.warm,10),isColdPhasePriorityChanged=phases.cold&&phases.cold.actions.set_priority&&phases.cold.actions.set_priority.priority!==parseInt(_constants__WEBPACK_IMPORTED_MODULE_0__.n.cold,10);return isHotPhasePriorityChanged||isWarmPhasePriorityChanged||isColdPhasePriorityChanged}},{metric:_constants__WEBPACK_IMPORTED_MODULE_0__.c,isTracked:()=>phases.cold&&phases.cold.actions.freeze}].reduce((tracked,{metric:metric,isTracked:isTracked})=>(isTracked()&&tracked.push(metric),tracked),[])}},function(module,exports){module.exports=__kbnSharedDeps__.Lodash},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"j",(function(){return useLoadNodes})),__webpack_require__.d(__webpack_exports__,"i",(function(){return useLoadNodeDetails})),__webpack_require__.d(__webpack_exports__,"h",(function(){return useLoadIndexTemplates})),__webpack_require__.d(__webpack_exports__,"d",(function(){return loadPolicies})),__webpack_require__.d(__webpack_exports__,"k",(function(){return useLoadPoliciesList})),__webpack_require__.d(__webpack_exports__,"g",(function(){return savePolicy})),__webpack_require__.d(__webpack_exports__,"c",(function(){return deletePolicy})),__webpack_require__.d(__webpack_exports__,"f",(function(){return retryLifecycleForIndex})),__webpack_require__.d(__webpack_exports__,"e",(function(){return removeLifecycleForIndex})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addLifecyclePolicyToIndex})),__webpack_require__.d(__webpack_exports__,"b",(function(){return addLifecyclePolicyToTemplate})),__webpack_require__.d(__webpack_exports__,"l",(function(){return useLoadSnapshotPolicies})),__webpack_require__.d(__webpack_exports__,"m",(function(){return useLoadSnapshotRepositories}));var _kbn_analytics__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),_constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_ui_metric__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7),_http__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4);const useLoadNodes=()=>Object(_http__WEBPACK_IMPORTED_MODULE_3__.e)({path:"nodes/list",method:"get",initialData:{nodesByAttributes:{},nodesByRoles:{}}}),useLoadNodeDetails=selectedNodeAttrs=>Object(_http__WEBPACK_IMPORTED_MODULE_3__.e)({path:`nodes/${selectedNodeAttrs}/details`,method:"get"}),useLoadIndexTemplates=(legacy=!1)=>Object(_http__WEBPACK_IMPORTED_MODULE_3__.e)({path:"templates",query:{legacy:legacy},method:"get",initialData:[]});async function loadPolicies(withIndices){return await Object(_http__WEBPACK_IMPORTED_MODULE_3__.c)("policies",{withIndices:withIndices})}const useLoadPoliciesList=withIndices=>Object(_http__WEBPACK_IMPORTED_MODULE_3__.e)({path:"policies",method:"get",query:{withIndices:withIndices}});async function savePolicy(policy){return await Object(_http__WEBPACK_IMPORTED_MODULE_3__.d)("policies",policy)}async function deletePolicy(policyName){const response=await Object(_http__WEBPACK_IMPORTED_MODULE_3__.b)("policies/"+encodeURIComponent(policyName));return Object(_ui_metric__WEBPACK_IMPORTED_MODULE_2__.c)(_kbn_analytics__WEBPACK_IMPORTED_MODULE_0__.METRIC_TYPE.COUNT,_constants__WEBPACK_IMPORTED_MODULE_1__.k),response}const retryLifecycleForIndex=async indexNames=>{const response=await Object(_http__WEBPACK_IMPORTED_MODULE_3__.d)("index/retry",{indexNames:indexNames});return Object(_ui_metric__WEBPACK_IMPORTED_MODULE_2__.c)(_kbn_analytics__WEBPACK_IMPORTED_MODULE_0__.METRIC_TYPE.COUNT,_constants__WEBPACK_IMPORTED_MODULE_1__.g),response},removeLifecycleForIndex=async indexNames=>{const response=await Object(_http__WEBPACK_IMPORTED_MODULE_3__.d)("index/remove",{indexNames:indexNames});return Object(_ui_metric__WEBPACK_IMPORTED_MODULE_2__.c)(_kbn_analytics__WEBPACK_IMPORTED_MODULE_0__.METRIC_TYPE.COUNT,_constants__WEBPACK_IMPORTED_MODULE_1__.l),response},addLifecyclePolicyToIndex=async body=>{const response=await Object(_http__WEBPACK_IMPORTED_MODULE_3__.d)("index/add",body);return Object(_ui_metric__WEBPACK_IMPORTED_MODULE_2__.c)(_kbn_analytics__WEBPACK_IMPORTED_MODULE_0__.METRIC_TYPE.COUNT,_constants__WEBPACK_IMPORTED_MODULE_1__.h),response},addLifecyclePolicyToTemplate=async(body,legacy=!1)=>{const response=await Object(_http__WEBPACK_IMPORTED_MODULE_3__.d)("template",body,{legacy:legacy});return Object(_ui_metric__WEBPACK_IMPORTED_MODULE_2__.c)(_kbn_analytics__WEBPACK_IMPORTED_MODULE_0__.METRIC_TYPE.COUNT,_constants__WEBPACK_IMPORTED_MODULE_1__.i),response},useLoadSnapshotPolicies=()=>Object(_http__WEBPACK_IMPORTED_MODULE_3__.e)({path:"snapshot_policies",method:"get",initialData:[]}),useLoadSnapshotRepositories=()=>Object(_http__WEBPACK_IMPORTED_MODULE_3__.e)({path:"snapshot_repositories",method:"get"})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return phaseToNodePreferenceMap})),__webpack_require__.d(__webpack_exports__,"b",(function(){return PLUGIN})),__webpack_require__.d(__webpack_exports__,"a",(function(){return MIN_SEARCHABLE_SNAPSHOT_LICENSE}));var external_kbnSharedDeps_KbnI18n_=__webpack_require__(2);const phaseToNodePreferenceMap=Object.freeze({warm:["data_warm","data_hot"],cold:["data_cold","data_warm","data_hot"],frozen:["data_frozen","data_cold","data_warm","data_hot"]}),MIN_SEARCHABLE_SNAPSHOT_LICENSE="enterprise",PLUGIN={ID:"index_lifecycle_management",minimumLicenseType:"basic",TITLE:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.appTitle",{defaultMessage:"Index Lifecycle Policies"})}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ROUTES})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getPolicyEditPath})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getPolicyCreatePath})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getPoliciesListPath}));const ROUTES={list:"/policies",edit:"/policies/edit/:policyName?",create:"/policies/edit"},getPolicyEditPath=policyName=>encodeURI("/policies/edit/"+encodeURIComponent(policyName)),getPolicyCreatePath=()=>ROUTES.create,getPoliciesListPath=()=>ROUTES.list},function(module,exports){module.exports=__kbnSharedDeps__.KbnAnalytics},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return showApiError}));var _notification__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6);function createToastConfig(error,errorTitle){if(error&&error.body){var _attributes$causes;const{error:errorString,statusCode:statusCode,message:errorMessage,attributes:attributes}=error.body;return{title:errorTitle,text:`${statusCode}: ${errorString}. ${null!=attributes&&null!==(_attributes$causes=attributes.causes)&&void 0!==_attributes$causes&&_attributes$causes.length?attributes.causes[attributes.causes.length-1]:errorMessage}`}}}function showApiError(error,errorTitle){const toastConfig=createToastConfig(error,errorTitle);if(toastConfig)return _notification__WEBPACK_IMPORTED_MODULE_0__.c.addDanger(toastConfig);_notification__WEBPACK_IMPORTED_MODULE_0__.a.add(error,errorTitle)}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/esUiShared/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";let _esDocBasePath;function init(esDocBasePath){_esDocBasePath=esDocBasePath}__webpack_require__.d(__webpack_exports__,"b",(function(){return init})),__webpack_require__.d(__webpack_exports__,"a",(function(){return createDocLink}));const createDocLink=docPath=>`${_esDocBasePath}${docPath}`},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return UIM_APP_NAME})),__webpack_require__.d(__webpack_exports__,"a",(function(){return UIM_APP_LOAD})),__webpack_require__.d(__webpack_exports__,"k",(function(){return UIM_POLICY_CREATE})),__webpack_require__.d(__webpack_exports__,"n",(function(){return UIM_POLICY_UPDATE})),__webpack_require__.d(__webpack_exports__,"l",(function(){return UIM_POLICY_DELETE})),__webpack_require__.d(__webpack_exports__,"i",(function(){return UIM_POLICY_ATTACH_INDEX})),__webpack_require__.d(__webpack_exports__,"j",(function(){return UIM_POLICY_ATTACH_INDEX_TEMPLATE})),__webpack_require__.d(__webpack_exports__,"m",(function(){return UIM_POLICY_DETACH_INDEX})),__webpack_require__.d(__webpack_exports__,"c",(function(){return UIM_CONFIG_COLD_PHASE})),__webpack_require__.d(__webpack_exports__,"f",(function(){return UIM_CONFIG_WARM_PHASE})),__webpack_require__.d(__webpack_exports__,"e",(function(){return UIM_CONFIG_SET_PRIORITY})),__webpack_require__.d(__webpack_exports__,"d",(function(){return UIM_CONFIG_FREEZE_INDEX})),__webpack_require__.d(__webpack_exports__,"h",(function(){return UIM_INDEX_RETRY_STEP})),__webpack_require__.d(__webpack_exports__,"g",(function(){return UIM_EDIT_CLICK}));const UIM_APP_NAME="index_lifecycle_management",UIM_APP_LOAD="app_load",UIM_POLICY_CREATE="policy_create",UIM_POLICY_UPDATE="policy_update",UIM_POLICY_DELETE="policy_delete",UIM_POLICY_ATTACH_INDEX="policy_attach_index",UIM_POLICY_ATTACH_INDEX_TEMPLATE="policy_attach_index_template",UIM_POLICY_DETACH_INDEX="policy_detach_index",UIM_CONFIG_COLD_PHASE="config_cold_phase",UIM_CONFIG_WARM_PHASE="config_warm_phase",UIM_CONFIG_SET_PRIORITY="config_set_priority",UIM_CONFIG_FREEZE_INDEX="config_freeze_index",UIM_INDEX_RETRY_STEP="index_retry_step",UIM_EDIT_CLICK="edit_click"},function(module,exports){module.exports=__kbnSharedDeps__.RxjsOperators},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/home/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.MomentTimezone},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/management/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(22);__kbnBundles__.define("plugin/indexLifecycleManagement/public",__webpack_require__,23)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__.indexLifecycleManagement},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin})),__webpack_require__.d(__webpack_exports__,"ILM_URL_GENERATOR_ID",(function(){return ILM_URL_GENERATOR_ID})),__webpack_require__.d(__webpack_exports__,"IlmUrlGeneratorState",(function(){}));var external_kbnSharedDeps_RxjsOperators_=__webpack_require__(17),external_kbnSharedDeps_KbnI18n_=__webpack_require__(2),public_=__webpack_require__(18),constants=__webpack_require__(10),services_http=__webpack_require__(4),documentation=__webpack_require__(15),ui_metric=__webpack_require__(7),notification=__webpack_require__(6);const breadcrumbs=function(){const policies=[{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.breadcrumb.homeLabel",{defaultMessage:"Index Lifecycle Management"}),href:"/policies"}];return{policies:policies,editPolicy:[...policies,{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.breadcrumb.editPolicyLabel",{defaultMessage:"Edit policy"}),href:void 0}]}}();class BreadcrumbService{constructor(){var obj,key,value;value=void 0,(key="setBreadcrumbsHandler")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}setup(setBreadcrumbsHandler){this.setBreadcrumbsHandler=setBreadcrumbsHandler}setBreadcrumbs(type){if(!this.setBreadcrumbsHandler)throw new Error("BreadcrumbService#setup() must be called first!");const newBreadcrumbs=breadcrumbs[type]?[...breadcrumbs[type]]:[...breadcrumbs.policies],lastBreadcrumb=newBreadcrumbs.pop();newBreadcrumbs.push({...lastBreadcrumb,href:void 0}),this.setBreadcrumbsHandler(newBreadcrumbs)}}var external_kbnSharedDeps_React_=__webpack_require__(0),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_Lodash_=__webpack_require__(8),external_kbnSharedDeps_ElasticEui_=__webpack_require__(1),api=__webpack_require__(9),external_kbnSharedDeps_MomentTimezone_=__webpack_require__(19),external_kbnSharedDeps_MomentTimezone_default=__webpack_require__.n(external_kbnSharedDeps_MomentTimezone_),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(3),navigation=__webpack_require__(11);function index_lifecycle_summary_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class index_lifecycle_summary_IndexLifecycleSummary extends external_kbnSharedDeps_React_.Component{constructor(props){super(props),index_lifecycle_summary_defineProperty(this,"toggleStackPopover",()=>{this.setState({showStackPopover:!this.state.showStackPopover})}),index_lifecycle_summary_defineProperty(this,"closeStackPopover",()=>{this.setState({showStackPopover:!1})}),index_lifecycle_summary_defineProperty(this,"togglePhaseExecutionPopover",()=>{this.setState({showPhaseExecutionPopover:!this.state.showPhaseExecutionPopover})}),index_lifecycle_summary_defineProperty(this,"closePhaseExecutionPopover",()=>{this.setState({showPhaseExecutionPopover:!1})}),this.state={showStackPopover:!1,showPhaseExecutionPopover:!1}}renderStackPopoverButton(ilm){if(!ilm.step_info.stack_trace)return null;const button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:this.toggleStackPopover},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Stack trace",id:"xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.stackTraceButton"}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{id:"stackPopover",button:button,isOpen:this.state.showStackPopover,closePopover:this.closeStackPopover},external_kbnSharedDeps_React_default.a.createElement("div",{style:{maxHeight:"400px",width:"900px",overflowY:"scroll"}},external_kbnSharedDeps_React_default.a.createElement("pre",null,ilm.step_info.stack_trace)))}renderPhaseExecutionPopoverButton(ilm){const button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:this.togglePhaseExecutionPopover},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Show definition",id:"xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.showPhaseDefinitionButton"}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,{key:"phaseDefinition"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{key:"phaseDefinition_title"},external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Phase definition",id:"xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.showPhaseDefinitionDescriptionTitle"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{key:"phaseDefinition_desc"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{key:"phaseExecutionPopover",id:"phaseExecutionPopover",button:button,isOpen:this.state.showPhaseExecutionPopover,closePopover:this.closePhaseExecutionPopover},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopoverTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Phase definition",id:"xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.phaseDefinitionTitle"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCodeBlock,{lang:"json"},JSON.stringify(ilm.phase_execution,null,2)))))}buildRows(){const{index:{ilm:ilm}}=this.props,headers=[["policy",external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.headers.lifecyclePolicyHeader",{defaultMessage:"Lifecycle policy"})],["phase",external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.headers.currentPhaseHeader",{defaultMessage:"Current phase"})],["action",external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.headers.currentActionHeader",{defaultMessage:"Current action"})],["action_time_millis",external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.headers.currentActionTimeHeader",{defaultMessage:"Current action time"})],["failed_step",external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.headers.failedStepHeader",{defaultMessage:"Failed step"})]],rows={left:[],right:[]};return headers.forEach(([fieldName,label],arrayIndex)=>{const value=ilm[fieldName];let content;content="action_time_millis"===fieldName?external_kbnSharedDeps_MomentTimezone_default()(value).format("YYYY-MM-DD HH:mm:ss"):"policy"===fieldName?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:this.props.getUrlForApp("management",{path:"data/index_lifecycle_management/"+Object(navigation.d)(value)})},value):value,content=content||"-";const cell=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,{key:String(arrayIndex)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,{key:fieldName},external_kbnSharedDeps_React_default.a.createElement("strong",null,label)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,{key:fieldName+"_desc"},content));arrayIndex%2==0?rows.left.push(cell):rows.right.push(cell)}),ilm.phase_execution&&rows.right.push(this.renderPhaseExecutionPopoverButton(ilm)),rows}render(){const{index:{ilm:ilm}}=this.props;if(!ilm.managed)return null;const{left:left,right:right}=this.buildRows();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Index lifecycle management",id:"xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.summaryTitle"}))),ilm.step_info&&ilm.step_info.type?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{color:"danger",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Index lifecycle error",id:"xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.summaryErrorMessage"}),iconType:"cross"},ilm.step_info.type,": ",ilm.step_info.reason,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),this.renderStackPopoverButton(ilm))):null,ilm.step_info&&ilm.step_info.message&&!ilm.step_info.stack_trace?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{color:"primary",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Action status",id:"xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.actionStatusTitle"})},ilm.step_info.message)):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{type:"column"},left)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{type:"column"},right))))}}var api_errors=__webpack_require__(13);function add_lifecycle_confirm_modal_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class add_lifecycle_confirm_modal_AddLifecyclePolicyConfirmModal extends external_kbnSharedDeps_React_.Component{constructor(props){super(props),add_lifecycle_confirm_modal_defineProperty(this,"addPolicy",async()=>{const{indexName:indexName,closeModal:closeModal,reloadIndices:reloadIndices}=this.props,{selectedPolicyName:selectedPolicyName,selectedAlias:selectedAlias}=this.state;if(selectedPolicyName)try{const body={indexName:indexName,policyName:selectedPolicyName,alias:selectedAlias};await Object(api.a)(body),closeModal(),notification.c.addSuccess(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.addPolicyToIndexSuccess",{defaultMessage:"Added policy {policyName} to index {indexName}.",values:{policyName:selectedPolicyName,indexName:indexName}})),reloadIndices()}catch(err){Object(api_errors.a)(err,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.addPolicyToIndexError",{defaultMessage:"Error adding policy to index"}))}else this.setState({policyErrorMessage:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.noPolicySelectedErrorMessage",{defaultMessage:"You must select a policy."})})}),add_lifecycle_confirm_modal_defineProperty(this,"renderAliasFormElement",selectedPolicy=>{const{selectedAlias:selectedAlias}=this.state,{index:index}=this.props;if(!(selectedPolicy&&Object(external_kbnSharedDeps_Lodash_.get)(selectedPolicy,"policy.phases.hot.actions.rollover")))return null;const{aliases:aliases}=index;if("none"===aliases)return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{style:{maxWidth:400},title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.indexHasNoAliasesWarningTitle",defaultMessage:"Index has no aliases"}),color:"warning"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.indexHasNoAliasesWarningMessage",defaultMessage:"Policy {policyName} is configured for rollover, but index {indexName} does not have an alias, which is required for rollover.",values:{policyName:null==selectedPolicy?void 0:selectedPolicy.name,indexName:index.name}})));const aliasOptions=aliases.map(alias=>({text:alias,value:alias}));return aliasOptions.unshift({text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.chooseAliasMessage",{defaultMessage:"Choose an alias"}),value:""}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.chooseAliasLabel",defaultMessage:"Index rollover alias"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{options:aliasOptions,value:selectedAlias,onChange:e=>{this.setState({selectedAlias:e.target.value})}}))}),this.state={policies:[],selectedPolicyName:"",selectedAlias:""}}renderForm(){const{policies:policies,selectedPolicyName:selectedPolicyName,policyErrorMessage:policyErrorMessage}=this.state,selectedPolicy=selectedPolicyName?policies.find(policy=>policy.name===selectedPolicyName):void 0,options=policies.map(({name:name})=>({value:name,text:name}));return options.unshift({value:"",text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.choosePolicyMessage",{defaultMessage:"Select a lifecycle policy"})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiForm,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{isInvalid:!!policyErrorMessage,error:policyErrorMessage,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.choosePolicyLabel",defaultMessage:"Lifecycle policy"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{options:options,value:selectedPolicyName,onChange:e=>{this.setState({policyErrorMessage:void 0,selectedPolicyName:e.target.value})}})),this.renderAliasFormElement(selectedPolicy))}async componentDidMount(){try{const policies=await Object(api.d)(!1);this.setState({policies:policies})}catch(err){Object(api_errors.a)(err,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.loadPolicyError",{defaultMessage:"Error loading policy list"})),this.props.closeModal()}}render(){const{policies:policies}=this.state,{indexName:indexName,closeModal:closeModal,getUrlForApp:getUrlForApp}=this.props,title=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.modalTitle",defaultMessage:'Add lifecycle policy to "{indexName}"',values:{indexName:indexName}});return policies.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiConfirmModal,{title:title,onCancel:closeModal,onConfirm:this.addPolicy,cancelButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.cancelButtonText",defaultMessage:"Cancel"}),confirmButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.addPolicyButtonText",defaultMessage:"Add policy"})},this.renderForm()):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModal,{onClose:closeModal},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeaderTitle,null,title)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{style:{maxWidth:400},title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.noPoliciesWarningTitle",defaultMessage:"No index lifecycle policies defined"}),color:"warning"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:getUrlForApp("management",{path:"data/index_lifecycle_management/policies/edit"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.defineLifecyclePolicyLinkText",defaultMessage:"Define lifecycle policy"}))))))}}class remove_lifecycle_confirm_modal_RemoveLifecyclePolicyConfirmModal extends external_kbnSharedDeps_React_.Component{constructor(...args){var obj,key,value;super(...args),value=async()=>{const{indexNames:indexNames,closeModal:closeModal,reloadIndices:reloadIndices}=this.props;try{await Object(api.e)(indexNames),closeModal(),notification.c.addSuccess(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexManagementTable.removeLifecyclePolicyConfirmModal.removePolicySuccess",{defaultMessage:"Removed lifecycle policy from {count, plural, one {index} other {indices}}",values:{count:indexNames.length}})),reloadIndices()}catch(err){Object(api_errors.a)(err,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexManagementTable.removeLifecyclePolicyConfirmModal.removePolicyToIndexError",{defaultMessage:"Error removing policy"}))}},(key="removePolicy")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}render(){const{closeModal:closeModal,indexNames:indexNames}=this.props;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiConfirmModal,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.removeLifecyclePolicyConfirmModal.modalTitle",defaultMessage:"Remove lifecycle policy from {count, plural, one {index} other {indices}}",values:{count:indexNames.length}}),onCancel:closeModal,onConfirm:this.removePolicy,cancelButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.removeLifecyclePolicyConfirmModal.cancelButtonText",defaultMessage:"Cancel"}),buttonColor:"danger",confirmButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.removeLifecyclePolicyConfirmModal.removePolicyButtonText",defaultMessage:"Remove policy"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.removeLifecyclePolicyConfirmModal.removeMessage",defaultMessage:"You are about to remove the index lifecycle policy from {count, plural, one {this index} other {these indices}}. This operation cannot be undone.",values:{count:indexNames.length}})),external_kbnSharedDeps_React_default.a.createElement("ul",null,indexNames.map(indexName=>external_kbnSharedDeps_React_default.a.createElement("li",{key:indexName},indexName)))))}}const retryLifecycleActionExtension=({indices:indices})=>{if(!Object(external_kbnSharedDeps_Lodash_.every)(indices,index=>index.ilm&&index.ilm.failed_step))return null;const indexNames=indices.map(({name:name})=>name);return{requestMethod:api.f,icon:"play",indexNames:[indexNames],buttonLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.retryIndexLifecycleActionButtonLabel",{defaultMessage:"Retry lifecycle step"}),successMessage:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.retryIndexLifecycleAction.retriedLifecycleMessage",{defaultMessage:"Called retry lifecycle step for: {indexNames}",values:{indexNames:indexNames.map(indexName=>`"${indexName}"`).join(", ")}})}},removeLifecyclePolicyActionExtension=({indices:indices,reloadIndices:reloadIndices})=>{if(!Object(external_kbnSharedDeps_Lodash_.every)(indices,index=>index.ilm&&index.ilm.managed))return null;const indexNames=indices.map(({name:name})=>name);return{renderConfirmModal:closeModal=>external_kbnSharedDeps_React_default.a.createElement(remove_lifecycle_confirm_modal_RemoveLifecyclePolicyConfirmModal,{indexNames:indexNames,closeModal:closeModal,reloadIndices:reloadIndices}),icon:"stopFilled",indexNames:[indexNames],buttonLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.removeIndexLifecycleActionButtonLabel",{defaultMessage:"Remove lifecycle policy"})}},addLifecyclePolicyActionExtension=({indices:indices,reloadIndices:reloadIndices,getUrlForApp:getUrlForApp})=>{if(1!==indices.length)return null;const index=indices[0];if(index.ilm&&index.ilm.managed)return null;const indexName=index.name;return{renderConfirmModal:closeModal=>external_kbnSharedDeps_React_default.a.createElement(add_lifecycle_confirm_modal_AddLifecyclePolicyConfirmModal,{indexName:indexName,closeModal:closeModal,index:index,reloadIndices:reloadIndices,getUrlForApp:getUrlForApp}),icon:"plusInCircle",buttonLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.addLifecyclePolicyActionButtonLabel",{defaultMessage:"Add lifecycle policy"})}},ilmBannerExtension=indices=>{const{Query:Query}=external_kbnSharedDeps_ElasticEui_.EuiSearchBar;if(!indices.length)return null;const numIndicesWithLifecycleErrors=indices.filter(index=>"ERROR"===Object(external_kbnSharedDeps_Lodash_.get)(index,"ilm.step")).length;return numIndicesWithLifecycleErrors?{type:"warning",filter:Query.parse("ilm.step:ERROR"),filterLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexMgmtBanner.filterLabel",{defaultMessage:"Show errors"}),title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexMgmtBanner.errorMessage",{defaultMessage:"{ numIndicesWithLifecycleErrors, number}\n          {numIndicesWithLifecycleErrors, plural, one {index has} other {indices have} }\n          lifecycle errors",values:{numIndicesWithLifecycleErrors:numIndicesWithLifecycleErrors}})}:null},ilmSummaryExtension=(index,getUrlForApp)=>external_kbnSharedDeps_React_default.a.createElement(index_lifecycle_summary_IndexLifecycleSummary,{index:index,getUrlForApp:getUrlForApp}),ilmFilterExtension=indices=>Object(external_kbnSharedDeps_Lodash_.some)(indices,index=>index.ilm&&index.ilm.managed)?[{type:"field_value_selection",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexMgmtFilter.lifecycleStatusLabel",{defaultMessage:"Lifecycle status"}),multiSelect:!1,field:"ilm.managed",options:[{value:!0,view:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexMgmtFilter.managedLabel",{defaultMessage:"Managed"})},{value:!1,view:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexMgmtFilter.unmanagedLabel",{defaultMessage:"Unmanaged"})}]},{type:"field_value_selection",field:"ilm.phase",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexMgmtFilter.lifecyclePhaseLabel",{defaultMessage:"Lifecycle phase"}),multiSelect:"or",options:[{value:"hot",view:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexMgmtFilter.hotLabel",{defaultMessage:"Hot"})},{value:"warm",view:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexMgmtFilter.warmLabel",{defaultMessage:"Warm"})},{value:"frozen",view:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexMgmtFilter.frozenLabel",{defaultMessage:"Frozen"})},{value:"cold",view:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexMgmtFilter.coldLabel",{defaultMessage:"Cold"})},{value:"delete",view:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.indexMgmtFilter.deleteLabel",{defaultMessage:"Delete"})}]}]:[];var management_public_=__webpack_require__(20);const ILM_URL_GENERATOR_ID="ILM_URL_GENERATOR_ID",registerUrlGenerator=(coreSetup,management,share)=>{share.urlGenerators.registerUrlGenerator((getAppBasePath=>({id:ILM_URL_GENERATOR_ID,createUrl:async state=>{switch(state.page){case"policy_create":return`${await getAppBasePath(!!state.absolute)}${Object(navigation.c)()}`;case"policy_edit":return`${await getAppBasePath(!!state.absolute)}${Object(navigation.d)(state.policyName)}`;case"policies_list":return`${await getAppBasePath(!!state.absolute)}${Object(navigation.b)()}`}}}))(async(absolute=!1)=>{const[coreStart]=await coreSetup.getStartServices();return coreStart.application.getUrlForApp(management_public_.MANAGEMENT_APP_ID,{path:management.sections.section.data.getApp(constants.b.ID).basePath,absolute:absolute})}))};class plugin_IndexLifecycleManagementPlugin{constructor(initializerContext){var obj,key,value;this.initializerContext=initializerContext,obj=this,key="breadcrumbService",value=new BreadcrumbService,key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}setup(coreSetup,plugins){const{ui:{enabled:isIndexLifecycleManagementUiEnabled}}=this.initializerContext.config.get();if(isIndexLifecycleManagementUiEnabled){const{http:http,notifications:{toasts:toasts},fatalErrors:fatalErrors,getStartServices:getStartServices}=coreSetup,{usageCollection:usageCollection,management:management,indexManagement:indexManagement,home:home,cloud:cloud,share:share}=plugins;Object(services_http.a)(http),Object(ui_metric.b)(usageCollection),Object(notification.b)(toasts,fatalErrors),management.sections.section.data.registerApp({id:constants.b.ID,title:constants.b.TITLE,order:2,mount:async({element:element,history:history,setBreadcrumbs:setBreadcrumbs})=>{const[coreStart,{licensing:licensing}]=await getStartServices(),{chrome:{docTitle:docTitle},i18n:{Context:I18nContext},docLinks:{ELASTIC_WEBSITE_URL:ELASTIC_WEBSITE_URL,DOC_LINK_VERSION:DOC_LINK_VERSION},application:{navigateToApp:navigateToApp,getUrlForApp:getUrlForApp}}=coreStart,license=await licensing.license$.pipe(Object(external_kbnSharedDeps_RxjsOperators_.first)()).toPromise();docTitle.change(constants.b.TITLE),this.breadcrumbService.setup(setBreadcrumbs),Object(documentation.b)(`${ELASTIC_WEBSITE_URL}guide/en/elasticsearch/reference/${DOC_LINK_VERSION}/`);const{renderApp:renderApp}=await __webpack_require__.e(1).then(__webpack_require__.bind(null,105)),unmountAppCallback=renderApp(element,I18nContext,history,navigateToApp,getUrlForApp,this.breadcrumbService,license,cloud);return()=>{docTitle.reset(),unmountAppCallback()}}}),home&&home.featureCatalogue.register({id:constants.b.ID,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.featureCatalogueTitle",{defaultMessage:"Manage index lifecycles"}),description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.indexLifecycleMgmt.featureCatalogueDescription",{defaultMessage:"Define lifecycle policies to automatically perform operations as an index ages."}),icon:"indexSettings",path:"/app/management/data/index_lifecycle_management",showOnHomePage:!0,category:public_.FeatureCatalogueCategory.ADMIN,order:640}),indexManagement&&((extensionsService=indexManagement.extensionsService).addAction(retryLifecycleActionExtension),extensionsService.addAction(removeLifecyclePolicyActionExtension),extensionsService.addAction(addLifecyclePolicyActionExtension),extensionsService.addBanner(ilmBannerExtension),extensionsService.addSummary(ilmSummaryExtension),extensionsService.addFilter(ilmFilterExtension)),registerUrlGenerator(coreSetup,management,share)}var extensionsService}start(){}stop(){}}const public_plugin=initializerContext=>new plugin_IndexLifecycleManagementPlugin(initializerContext)},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/esUiShared/static/forms/hook_form_lib");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/esUiShared/static/forms/components");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/esUiShared/static/forms/helpers");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.Moment},function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},function(module,exports){module.exports=__kbnSharedDeps__.ReactRouterDom},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEuiLibServices},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/indexManagement/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))}]);