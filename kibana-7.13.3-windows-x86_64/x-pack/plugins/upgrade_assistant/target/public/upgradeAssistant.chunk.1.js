/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.upgradeAssistant_bundle_jsonpfunction=window.upgradeAssistant_bundle_jsonpfunction||[]).push([[1],{31:function(module,exports,__webpack_require__){"use strict";function identity(a){return a}function absurd(_){throw new Error("Called `absurd` function which should be uncallable")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.bindTo_=exports.bind_=exports.hole=exports.pipe=exports.untupled=exports.tupled=exports.absurd=exports.decrement=exports.increment=exports.tuple=exports.flow=exports.flip=exports.constVoid=exports.constUndefined=exports.constNull=exports.constFalse=exports.constTrue=exports.constant=exports.not=exports.unsafeCoerce=exports.identity=void 0,exports.identity=identity,exports.unsafeCoerce=identity,exports.not=function(predicate){return function(a){return!predicate(a)}},exports.constant=function(a){return function(){return a}},exports.constTrue=function(){return!0},exports.constFalse=function(){return!1},exports.constNull=function(){return null},exports.constUndefined=function(){},exports.constVoid=function(){},exports.flip=function(f){return function(b,a){return f(a,b)}},exports.flow=function(ab,bc,cd,de,ef,fg,gh,hi,ij){switch(arguments.length){case 1:return ab;case 2:return function(){return bc(ab.apply(this,arguments))};case 3:return function(){return cd(bc(ab.apply(this,arguments)))};case 4:return function(){return de(cd(bc(ab.apply(this,arguments))))};case 5:return function(){return ef(de(cd(bc(ab.apply(this,arguments)))))};case 6:return function(){return fg(ef(de(cd(bc(ab.apply(this,arguments))))))};case 7:return function(){return gh(fg(ef(de(cd(bc(ab.apply(this,arguments)))))))};case 8:return function(){return hi(gh(fg(ef(de(cd(bc(ab.apply(this,arguments))))))))};case 9:return function(){return ij(hi(gh(fg(ef(de(cd(bc(ab.apply(this,arguments)))))))))}}},exports.tuple=function(){for(var t=[],_i=0;_i<arguments.length;_i++)t[_i]=arguments[_i];return t},exports.increment=function(n){return n+1},exports.decrement=function(n){return n-1},exports.absurd=absurd,exports.tupled=function(f){return function(a){return f.apply(void 0,a)}},exports.untupled=function(f){return function(){for(var a=[],_i=0;_i<arguments.length;_i++)a[_i]=arguments[_i];return f(a)}},exports.pipe=function(a,ab,bc,cd,de,ef,fg,gh,hi,ij,jk,kl,lm,mn,no,op,pq,qr,rs,st){switch(arguments.length){case 1:return a;case 2:return ab(a);case 3:return bc(ab(a));case 4:return cd(bc(ab(a)));case 5:return de(cd(bc(ab(a))));case 6:return ef(de(cd(bc(ab(a)))));case 7:return fg(ef(de(cd(bc(ab(a))))));case 8:return gh(fg(ef(de(cd(bc(ab(a)))))));case 9:return hi(gh(fg(ef(de(cd(bc(ab(a))))))));case 10:return ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))));case 11:return jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))));case 12:return kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))));case 13:return lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))));case 14:return mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))));case 15:return no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))))));case 16:return op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))))));case 17:return pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))))))));case 18:return qr(pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))))))));case 19:return rs(qr(pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))))))))));case 20:return st(rs(qr(pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))))))))))}},exports.hole=absurd,exports.bind_=function(a,name,b){var _a;return Object.assign({},a,((_a={})[name]=b,_a))},exports.bindTo_=function(name){return function(b){var _a;return(_a={})[name]=b,_a}}},32:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pipeable=exports.pipe=void 0;var function_1=__webpack_require__(31);exports.pipe=function_1.pipe;exports.pipeable=function(I){var r={};if(function(I){return"function"==typeof I.map}(I)){r.map=function(f){return function(fa){return I.map(fa,f)}}}if(function(I){return"function"==typeof I.contramap}(I)){r.contramap=function(f){return function(fa){return I.contramap(fa,f)}}}if(function(I){return"function"==typeof I.mapWithIndex}(I)){r.mapWithIndex=function(f){return function(fa){return I.mapWithIndex(fa,f)}}}if(function(I){return"function"==typeof I.ap}(I)){r.ap=function(fa){return function(fab){return I.ap(fab,fa)}},r.apFirst=function(fb){return function(fa){return I.ap(I.map(fa,(function(a){return function(){return a}})),fb)}},r.apSecond=function(fb){return function(fa){return I.ap(I.map(fa,(function(){return function(b){return b}})),fb)}}}if(function(I){return"function"==typeof I.chain}(I)){r.chain=function(f){return function(ma){return I.chain(ma,f)}},r.chainFirst=function(f){return function(ma){return I.chain(ma,(function(a){return I.map(f(a),(function(){return a}))}))}},r.flatten=function(mma){return I.chain(mma,function_1.identity)}}if(function(I){return"function"==typeof I.bimap}(I)){r.bimap=function(f,g){return function(fa){return I.bimap(fa,f,g)}},r.mapLeft=function(f){return function(fa){return I.mapLeft(fa,f)}}}if(function(I){return"function"==typeof I.extend}(I)){r.extend=function(f){return function(wa){return I.extend(wa,f)}},r.duplicate=function(wa){return I.extend(wa,function_1.identity)}}if(function(I){return"function"==typeof I.reduce}(I)){r.reduce=function(b,f){return function(fa){return I.reduce(fa,b,f)}},r.foldMap=function(M){var foldMapM=I.foldMap(M);return function(f){return function(fa){return foldMapM(fa,f)}}},r.reduceRight=function(b,f){return function(fa){return I.reduceRight(fa,b,f)}}}if(function(I){return"function"==typeof I.reduceWithIndex}(I)){r.reduceWithIndex=function(b,f){return function(fa){return I.reduceWithIndex(fa,b,f)}},r.foldMapWithIndex=function(M){var foldMapM=I.foldMapWithIndex(M);return function(f){return function(fa){return foldMapM(fa,f)}}},r.reduceRightWithIndex=function(b,f){return function(fa){return I.reduceRightWithIndex(fa,b,f)}}}if(function(I){return"function"==typeof I.alt}(I)){r.alt=function(that){return function(fa){return I.alt(fa,that)}}}if(function(I){return"function"==typeof I.compact}(I)&&(r.compact=I.compact,r.separate=I.separate),function(I){return"function"==typeof I.filter}(I)){r.filter=function(predicate){return function(fa){return I.filter(fa,predicate)}},r.filterMap=function(f){return function(fa){return I.filterMap(fa,f)}},r.partition=function(predicate){return function(fa){return I.partition(fa,predicate)}},r.partitionMap=function(f){return function(fa){return I.partitionMap(fa,f)}}}if(function(I){return"function"==typeof I.filterWithIndex}(I)){r.filterWithIndex=function(predicateWithIndex){return function(fa){return I.filterWithIndex(fa,predicateWithIndex)}},r.filterMapWithIndex=function(f){return function(fa){return I.filterMapWithIndex(fa,f)}},r.partitionWithIndex=function(predicateWithIndex){return function(fa){return I.partitionWithIndex(fa,predicateWithIndex)}},r.partitionMapWithIndex=function(f){return function(fa){return I.partitionMapWithIndex(fa,f)}}}if(function(I){return"function"==typeof I.promap}(I)){r.promap=function(f,g){return function(fa){return I.promap(fa,f,g)}}}if(function(I){return"function"==typeof I.compose}(I)){r.compose=function(that){return function(fa){return I.compose(fa,that)}}}if(function(I){return"function"==typeof I.throwError}(I)){r.fromOption=function(onNone){return function(ma){return"None"===ma._tag?I.throwError(onNone()):I.of(ma.value)}},r.fromEither=function(ma){return"Left"===ma._tag?I.throwError(ma.left):I.of(ma.right)},r.fromPredicate=function(predicate,onFalse){return function(a){return predicate(a)?I.of(a):I.throwError(onFalse(a))}},r.filterOrElse=function(predicate,onFalse){return function(ma){return I.chain(ma,(function(a){return predicate(a)?I.of(a):I.throwError(onFalse(a))}))}}}return r}},33:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.apS=exports.apSW=exports.bind=exports.bindW=exports.bindTo=exports.exists=exports.elem=exports.toError=exports.either=exports.getValidationMonoid=exports.MonadThrow=exports.ChainRec=exports.Extend=exports.Alt=exports.Bifunctor=exports.Traversable=exports.Foldable=exports.Monad=exports.Applicative=exports.Functor=exports.getValidationSemigroup=exports.getValidation=exports.getAltValidation=exports.getApplicativeValidation=exports.getWitherable=exports.getFilterable=exports.getApplyMonoid=exports.getApplySemigroup=exports.getSemigroup=exports.getEq=exports.getShow=exports.URI=exports.throwError=exports.sequence=exports.traverse=exports.reduceRight=exports.foldMap=exports.reduce=exports.duplicate=exports.extend=exports.alt=exports.flatten=exports.chainFirst=exports.chainFirstW=exports.chain=exports.chainW=exports.of=exports.apSecond=exports.apFirst=exports.ap=exports.apW=exports.mapLeft=exports.bimap=exports.map=exports.filterOrElse=exports.orElse=exports.swap=exports.getOrElse=exports.getOrElseW=exports.fold=exports.fromPredicate=exports.fromOption=exports.stringifyJSON=exports.parseJSON=exports.tryCatch=exports.fromNullable=exports.right=exports.left=exports.isRight=exports.isLeft=void 0;var ChainRec_1=__webpack_require__(34),function_1=__webpack_require__(31);function tryCatch(f,onError){try{return exports.right(f())}catch(e){return exports.left(onError(e))}}exports.isLeft=function(ma){return"Left"===ma._tag},exports.isRight=function(ma){return"Right"===ma._tag},exports.left=function(e){return{_tag:"Left",left:e}},exports.right=function(a){return{_tag:"Right",right:a}},exports.fromNullable=function(e){return function(a){return null==a?exports.left(e):exports.right(a)}},exports.tryCatch=tryCatch,exports.parseJSON=function(s,onError){return tryCatch((function(){return JSON.parse(s)}),onError)},exports.stringifyJSON=function(u,onError){return tryCatch((function(){return JSON.stringify(u)}),onError)},exports.fromOption=function(onNone){return function(ma){return"None"===ma._tag?exports.left(onNone()):exports.right(ma.value)}},exports.fromPredicate=function(predicate,onFalse){return function(a){return predicate(a)?exports.right(a):exports.left(onFalse(a))}},exports.fold=function(onLeft,onRight){return function(ma){return exports.isLeft(ma)?onLeft(ma.left):onRight(ma.right)}},exports.getOrElseW=function(onLeft){return function(ma){return exports.isLeft(ma)?onLeft(ma.left):ma.right}},exports.getOrElse=exports.getOrElseW,exports.swap=function(ma){return exports.isLeft(ma)?exports.right(ma.left):exports.left(ma.right)},exports.orElse=function(onLeft){return function(ma){return exports.isLeft(ma)?onLeft(ma.left):ma}},exports.filterOrElse=function(predicate,onFalse){return exports.chain((function(a){return predicate(a)?exports.right(a):exports.left(onFalse(a))}))};var map_=function(fa,f){return function_1.pipe(fa,exports.map(f))},ap_=function(fab,fa){return function_1.pipe(fab,exports.ap(fa))},chain_=function(ma,f){return function_1.pipe(ma,exports.chain(f))},reduce_=function(fa,b,f){return function_1.pipe(fa,exports.reduce(b,f))},foldMap_=function(M){return function(fa,f){var foldMapM=exports.foldMap(M);return function_1.pipe(fa,foldMapM(f))}},reduceRight_=function(fa,b,f){return function_1.pipe(fa,exports.reduceRight(b,f))},traverse_=function(F){var traverseF=exports.traverse(F);return function(ta,f){return function_1.pipe(ta,traverseF(f))}},bimap_=function(fa,f,g){return function_1.pipe(fa,exports.bimap(f,g))},mapLeft_=function(fa,f){return function_1.pipe(fa,exports.mapLeft(f))},alt_=function(fa,that){return function_1.pipe(fa,exports.alt(that))},extend_=function(wa,f){return function_1.pipe(wa,exports.extend(f))},chainRec_=function(a,f){return ChainRec_1.tailRec(f(a),(function(e){return exports.isLeft(e)?exports.right(exports.left(e.left)):exports.isLeft(e.right)?exports.left(f(e.right.left)):exports.right(exports.right(e.right.right))}))};function getApplySemigroup(S){return{concat:function(x,y){return exports.isLeft(x)?x:exports.isLeft(y)?y:exports.right(S.concat(x.right,y.right))}}}function getFilterable(M){var empty=exports.left(M.empty);return{URI:exports.URI,_E:void 0,map:map_,compact:function(ma){return exports.isLeft(ma)?ma:"None"===ma.right._tag?empty:exports.right(ma.right.value)},separate:function(ma){return exports.isLeft(ma)?{left:ma,right:ma}:exports.isLeft(ma.right)?{left:exports.right(ma.right.left),right:empty}:{left:empty,right:exports.right(ma.right.right)}},filter:function(ma,predicate){return exports.isLeft(ma)||predicate(ma.right)?ma:empty},filterMap:function(ma,f){if(exports.isLeft(ma))return ma;var ob=f(ma.right);return"None"===ob._tag?empty:exports.right(ob.value)},partition:function(ma,p){return exports.isLeft(ma)?{left:ma,right:ma}:p(ma.right)?{left:empty,right:exports.right(ma.right)}:{left:exports.right(ma.right),right:empty}},partitionMap:function(ma,f){if(exports.isLeft(ma))return{left:ma,right:ma};var e=f(ma.right);return exports.isLeft(e)?{left:exports.right(e.left),right:empty}:{left:empty,right:exports.right(e.right)}}}}function getApplicativeValidation(SE){return{URI:exports.URI,_E:void 0,map:map_,ap:function(fab,fa){return exports.isLeft(fab)?exports.isLeft(fa)?exports.left(SE.concat(fab.left,fa.left)):fab:exports.isLeft(fa)?fa:exports.right(fab.right(fa.right))},of:exports.of}}function getAltValidation(SE){return{URI:exports.URI,_E:void 0,map:map_,alt:function(me,that){if(exports.isRight(me))return me;var ea=that();return exports.isLeft(ea)?exports.left(SE.concat(me.left,ea.left)):ea}}}function getValidationSemigroup(SE,SA){return{concat:function(x,y){return exports.isLeft(x)?exports.isLeft(y)?exports.left(SE.concat(x.left,y.left)):x:exports.isLeft(y)?y:exports.right(SA.concat(x.right,y.right))}}}exports.map=function(f){return function(fa){return exports.isLeft(fa)?fa:exports.right(f(fa.right))}},exports.bimap=function(f,g){return function(fa){return exports.isLeft(fa)?exports.left(f(fa.left)):exports.right(g(fa.right))}},exports.mapLeft=function(f){return function(fa){return exports.isLeft(fa)?exports.left(f(fa.left)):fa}},exports.apW=function(fa){return function(fab){return exports.isLeft(fab)?fab:exports.isLeft(fa)?fa:exports.right(fab.right(fa.right))}},exports.ap=exports.apW,exports.apFirst=function(fb){return function_1.flow(exports.map((function(a){return function(){return a}})),exports.ap(fb))},exports.apSecond=function(fb){return function_1.flow(exports.map((function(){return function(b){return b}})),exports.ap(fb))},exports.of=exports.right,exports.chainW=function(f){return function(ma){return exports.isLeft(ma)?ma:f(ma.right)}},exports.chain=exports.chainW,exports.chainFirstW=function(f){return function(ma){return function_1.pipe(ma,exports.chainW((function(a){return function_1.pipe(f(a),exports.map((function(){return a})))})))}},exports.chainFirst=exports.chainFirstW,exports.flatten=exports.chain(function_1.identity),exports.alt=function(that){return function(fa){return exports.isLeft(fa)?that():fa}},exports.extend=function(f){return function(wa){return exports.isLeft(wa)?wa:exports.right(f(wa))}},exports.duplicate=exports.extend(function_1.identity),exports.reduce=function(b,f){return function(fa){return exports.isLeft(fa)?b:f(b,fa.right)}},exports.foldMap=function(M){return function(f){return function(fa){return exports.isLeft(fa)?M.empty:f(fa.right)}}},exports.reduceRight=function(b,f){return function(fa){return exports.isLeft(fa)?b:f(fa.right,b)}},exports.traverse=function(F){return function(f){return function(ta){return exports.isLeft(ta)?F.of(exports.left(ta.left)):F.map(f(ta.right),exports.right)}}},exports.sequence=function(F){return function(ma){return exports.isLeft(ma)?F.of(exports.left(ma.left)):F.map(ma.right,exports.right)}},exports.throwError=exports.left,exports.URI="Either",exports.getShow=function(SE,SA){return{show:function(ma){return exports.isLeft(ma)?"left("+SE.show(ma.left)+")":"right("+SA.show(ma.right)+")"}}},exports.getEq=function(EL,EA){return{equals:function(x,y){return x===y||(exports.isLeft(x)?exports.isLeft(y)&&EL.equals(x.left,y.left):exports.isRight(y)&&EA.equals(x.right,y.right))}}},exports.getSemigroup=function(S){return{concat:function(x,y){return exports.isLeft(y)?x:exports.isLeft(x)?y:exports.right(S.concat(x.right,y.right))}}},exports.getApplySemigroup=getApplySemigroup,exports.getApplyMonoid=function(M){return{concat:getApplySemigroup(M).concat,empty:exports.right(M.empty)}},exports.getFilterable=getFilterable,exports.getWitherable=function(M){var F_=getFilterable(M);return{URI:exports.URI,_E:void 0,map:map_,compact:F_.compact,separate:F_.separate,filter:F_.filter,filterMap:F_.filterMap,partition:F_.partition,partitionMap:F_.partitionMap,traverse:traverse_,sequence:exports.sequence,reduce:reduce_,foldMap:foldMap_,reduceRight:reduceRight_,wither:function(F){var traverseF=traverse_(F);return function(ma,f){return F.map(traverseF(ma,f),F_.compact)}},wilt:function(F){var traverseF=traverse_(F);return function(ma,f){return F.map(traverseF(ma,f),F_.separate)}}}},exports.getApplicativeValidation=getApplicativeValidation,exports.getAltValidation=getAltValidation,exports.getValidation=function(SE){var applicativeValidation=getApplicativeValidation(SE),altValidation=getAltValidation(SE);return{URI:exports.URI,_E:void 0,map:map_,of:exports.of,chain:chain_,bimap:bimap_,mapLeft:mapLeft_,reduce:reduce_,foldMap:foldMap_,reduceRight:reduceRight_,extend:extend_,traverse:traverse_,sequence:exports.sequence,chainRec:chainRec_,throwError:exports.throwError,ap:applicativeValidation.ap,alt:altValidation.alt}},exports.getValidationSemigroup=getValidationSemigroup,exports.Functor={URI:exports.URI,map:map_},exports.Applicative={URI:exports.URI,map:map_,ap:ap_,of:exports.of},exports.Monad={URI:exports.URI,map:map_,ap:ap_,of:exports.of,chain:chain_},exports.Foldable={URI:exports.URI,reduce:reduce_,foldMap:foldMap_,reduceRight:reduceRight_},exports.Traversable={URI:exports.URI,map:map_,reduce:reduce_,foldMap:foldMap_,reduceRight:reduceRight_,traverse:traverse_,sequence:exports.sequence},exports.Bifunctor={URI:exports.URI,bimap:bimap_,mapLeft:mapLeft_},exports.Alt={URI:exports.URI,map:map_,alt:alt_},exports.Extend={URI:exports.URI,map:map_,extend:extend_},exports.ChainRec={URI:exports.URI,map:map_,ap:ap_,chain:chain_,chainRec:chainRec_},exports.MonadThrow={URI:exports.URI,map:map_,ap:ap_,of:exports.of,chain:chain_,throwError:exports.throwError},exports.getValidationMonoid=function(SE,SA){return{concat:getValidationSemigroup(SE,SA).concat,empty:exports.right(SA.empty)}},exports.either={URI:exports.URI,map:map_,of:exports.of,ap:ap_,chain:chain_,reduce:reduce_,foldMap:foldMap_,reduceRight:reduceRight_,traverse:traverse_,sequence:exports.sequence,bimap:bimap_,mapLeft:mapLeft_,alt:alt_,extend:extend_,chainRec:chainRec_,throwError:exports.throwError},exports.toError=function(e){return e instanceof Error?e:new Error(String(e))},exports.elem=function(E){return function(a,ma){return!exports.isLeft(ma)&&E.equals(a,ma.right)}},exports.exists=function(predicate){return function(ma){return!exports.isLeft(ma)&&predicate(ma.right)}},exports.bindTo=function(name){return exports.map(function_1.bindTo_(name))},exports.bindW=function(name,f){return exports.chainW((function(a){return function_1.pipe(f(a),exports.map((function(b){return function_1.bind_(a,name,b)})))}))},exports.bind=exports.bindW,exports.apSW=function(name,fb){return function_1.flow(exports.map((function(a){return function(b){return function_1.bind_(a,name,b)}})),exports.apW(fb))},exports.apS=exports.apSW},34:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tailRec=void 0,exports.tailRec=function(a,f){for(var v=f(a);"Left"===v._tag;)v=f(v.left);return v.right}},35:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){for(var classes=[],i=0;i<arguments.length;i++){var arg=arguments[i];if(arg){var argType=typeof arg;if("string"===argType||"number"===argType)classes.push(arg);else if(Array.isArray(arg)&&arg.length){var inner=classNames.apply(null,arg);inner&&classes.push(inner)}else if("object"===argType)for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&classes.push(key)}}return classes.join(" ")}module.exports?(classNames.default=classNames,module.exports=classNames):void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,[]))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},36:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"mountManagementSection",(function(){return mountManagementSection}));var semver=__webpack_require__(3);new(__webpack_require__.n(semver).a)("7.0.0");const API_BASE_PATH="/api/upgrade_assistant";var external_kbnSharedDeps_React_=__webpack_require__(21),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_ReactDom_=__webpack_require__(27),external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(26);const AppContext=Object(external_kbnSharedDeps_React_.createContext)({}),AppContextProvider=({children:children,value:value})=>external_kbnSharedDeps_React_default.a.createElement(AppContext.Provider,{value:value},children),useAppContext=()=>{const ctx=Object(external_kbnSharedDeps_React_.useContext)(AppContext);if(!ctx)throw new Error("useAppContext must be called from inside AppContext");return ctx};var external_kbnSharedDeps_ElasticEui_=__webpack_require__(22),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(23);const ComingSoonPrompt=()=>{const{kibanaVersionInfo:kibanaVersionInfo,docLinks:docLinks}=useAppContext(),{nextMajor:nextMajor,currentMajor:currentMajor}=kibanaVersionInfo,{ELASTIC_WEBSITE_URL:ELASTIC_WEBSITE_URL}=docLinks;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContent,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"wrench","data-test-subj":"comingSoonPrompt",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.emptyPrompt.title",defaultMessage:"{uaVersion} Upgrade Assistant",values:{uaVersion:nextMajor+".0"}})),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.emptyPrompt.upgradeAssistantDescription",defaultMessage:"The Upgrade Assistant identifies deprecated settings in your cluster and helps you resolve issues before you upgrade. Check back here when it's time to upgrade to Elastic {nextMajor}.",values:{nextMajor:nextMajor+".0"}})),7===currentMajor&&external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{external:!0,target:"_blank",href:ELASTIC_WEBSITE_URL+"guide/en/elasticsearch/reference/master/migrating-8.0.html"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.emptyPrompt.learnMoreDescription",defaultMessage:"Learn more about migrating to {nextMajor}.",values:{nextMajor:nextMajor+".0"}}))))}))};var external_kbnSharedDeps_KbnI18n_=__webpack_require__(2);external_kbnSharedDeps_React_default.a.Component;let LoadingState,LevelFilterOption,GroupByOption,TelemetryState;!function(LoadingState){LoadingState[LoadingState.Loading=0]="Loading",LoadingState[LoadingState.Success=1]="Success",LoadingState[LoadingState.Error=2]="Error"}(LoadingState||(LoadingState={})),function(LevelFilterOption){LevelFilterOption.all="all",LevelFilterOption.critical="critical",LevelFilterOption.warning="warning"}(LevelFilterOption||(LevelFilterOption={})),function(GroupByOption){GroupByOption.message="message",GroupByOption.index="index",GroupByOption.node="node"}(GroupByOption||(GroupByOption={})),function(TelemetryState){TelemetryState[TelemetryState.Running=0]="Running",TelemetryState[TelemetryState.Complete=1]="Complete"}(TelemetryState||(TelemetryState={}));var external_kbnSharedDeps_Lodash_=__webpack_require__(25),public_=__webpack_require__(24),pipeable=__webpack_require__(32),Either=__webpack_require__(33);const LocalizedOptions={warning:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.controls.filterBar.warningButtonLabel",{defaultMessage:"warning"}),critical:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.controls.filterBar.criticalButtonLabel",{defaultMessage:"critical"})},FilterBar=({allDeprecations:allDeprecations=[],currentFilter:currentFilter,onFilterChange:onFilterChange})=>{const levelGroups=Object(external_kbnSharedDeps_Lodash_.groupBy)(allDeprecations,"level"),levelCounts=Object.keys(levelGroups).reduce((counts,level)=>(counts[level]=levelGroups[level].length,counts),{});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFilterGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFilterButton,{withNext:!0,key:LevelFilterOption.critical,onClick:()=>{onFilterChange(currentFilter!==LevelFilterOption.critical?LevelFilterOption.critical:LevelFilterOption.all)},hasActiveFilters:currentFilter===LevelFilterOption.critical,numFilters:levelCounts[LevelFilterOption.critical]||void 0,"data-test-subj":"criticalLevelFilter"},LocalizedOptions[LevelFilterOption.critical]),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFilterButton,{key:LevelFilterOption.warning,onClick:()=>{onFilterChange(currentFilter!==LevelFilterOption.warning?LevelFilterOption.warning:LevelFilterOption.all)},hasActiveFilters:currentFilter===LevelFilterOption.warning,numFilters:levelCounts[LevelFilterOption.warning]||void 0,"data-test-subj":"warningLevelFilter"},LocalizedOptions[LevelFilterOption.warning])))},group_by_bar_LocalizedOptions={message:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.controls.groupByBar.byIssueLabel",{defaultMessage:"by issue"}),index:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.controls.groupByBar.byIndexLabel",{defaultMessage:"by index"})},GroupByBar=({availableGroupByOptions:availableGroupByOptions,currentGroupBy:currentGroupBy,onGroupByChange:onGroupByChange})=>availableGroupByOptions.length<=1?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFilterGroup,null,availableGroupByOptions.map(option=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFilterButton,{key:option,onClick:onGroupByChange.bind(null,option),hasActiveFilters:currentGroupBy===option},group_by_bar_LocalizedOptions[option])))),CheckupControls=({allDeprecations:allDeprecations,isLoading:isLoading,loadData:loadData,currentFilter:currentFilter,onFilterChange:onFilterChange,onSearchChange:onSearchChange,availableGroupByOptions:availableGroupByOptions,currentGroupBy:currentGroupBy,onGroupByChange:onGroupByChange})=>{const[searchTermError,setSearchTermError]=Object(external_kbnSharedDeps_React_.useState)(null),filterInvalid=Boolean(searchTermError);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{direction:"column",responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",wrap:!0,responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldSearch,{isInvalid:filterInvalid,"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.controls.searchBarPlaceholderAriaLabel",{defaultMessage:"Filter"}),placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.controls.searchBarPlaceholder",{defaultMessage:"Filter"}),onChange:e=>{const string=e.target.value,errorMessage=(s=string,Object(pipeable.pipe)(Object(Either.tryCatch)(()=>new RegExp(s),e=>e.message),Object(Either.fold)(errorMessage=>errorMessage,()=>"")));var s;errorMessage?(onSearchChange(""),setSearchTermError(errorMessage)):(onSearchChange(e.target.value),searchTermError&&setSearchTermError(null))}})),external_kbnSharedDeps_React_default.a.createElement(FilterBar,{allDeprecations:allDeprecations,currentFilter:currentFilter,onFilterChange:onFilterChange}),external_kbnSharedDeps_React_default.a.createElement(GroupByBar,{availableGroupByOptions:availableGroupByOptions,currentGroupBy:currentGroupBy,onGroupByChange:onGroupByChange}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{fill:!0,onClick:loadData,iconType:"refresh",isLoading:isLoading},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.controls.refreshButtonLabel",defaultMessage:"Refresh"}))))),filterInvalid&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{color:"danger",title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.controls.filterErrorMessageLabel",{defaultMessage:"Filter invalid: {searchTermError}",values:{searchTermError:searchTermError}}),iconType:"faceSad"})))},DeprecationCountSummary=({deprecations:deprecations,allDeprecations:allDeprecations})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},allDeprecations.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.numDeprecationsShownLabel",defaultMessage:"Showing {numShown} of {total}",values:{numShown:deprecations.length,total:allDeprecations.length}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.noDeprecationsLabel",defaultMessage:"No deprecations"}),deprecations.length!==allDeprecations.length&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,". ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.changeFiltersShowMoreLabel",description:"Explains how to show all deprecations if there are more available.",defaultMessage:"Change filter to show more."}))),LEVEL_MAP={warning:0,critical:1},REVERSE_LEVEL_MAP=Object(external_kbnSharedDeps_Lodash_.invert)(LEVEL_MAP),COLOR_MAP={warning:"default",critical:"danger"},LocalizedLevels={warning:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.deprecations.warningLabel",{defaultMessage:"warning"}),critical:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.deprecations.criticalLabel",{defaultMessage:"critical"})},LocalizedActions={warning:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.deprecations.warningActionTooltip",{defaultMessage:"Resolving this issue before upgrading is advised, but not required."}),critical:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.deprecations.criticalActionTooltip",{defaultMessage:"Resolve this issue before upgrading."})},SingleHealth=({level:level,label:label})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:LocalizedActions[level]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBadge,{color:COLOR_MAP[level]},label))," "),DeprecationHealth=({deprecations:deprecations,single:single=!1})=>{if(0===deprecations.length)return external_kbnSharedDeps_React_default.a.createElement("span",null);const levels=deprecations.map(d=>LEVEL_MAP[d.level]);if(single){const highest=Math.max(...levels),highestLevel=REVERSE_LEVEL_MAP[highest];return external_kbnSharedDeps_React_default.a.createElement(SingleHealth,{level:highestLevel,label:LocalizedLevels[highestLevel]})}const countByLevel=Object(external_kbnSharedDeps_Lodash_.countBy)(levels);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,Object.keys(countByLevel).map(k=>parseInt(k,10)).sort().map(level=>[level,REVERSE_LEVEL_MAP[level]]).map(([numLevel,stringLevel])=>external_kbnSharedDeps_React_default.a.createElement(SingleHealth,{key:stringLevel,level:stringLevel,label:`${countByLevel[numLevel]} ${LocalizedLevels[stringLevel]}`})))};var external_kbnSharedDeps_SaferLodashSet_=__webpack_require__(28);let ReindexStep,ReindexStatus;!function(ReindexStep){ReindexStep[ReindexStep.created=0]="created",ReindexStep[ReindexStep.indexGroupServicesStopped=10]="indexGroupServicesStopped",ReindexStep[ReindexStep.readonly=20]="readonly",ReindexStep[ReindexStep.newIndexCreated=30]="newIndexCreated",ReindexStep[ReindexStep.reindexStarted=40]="reindexStarted",ReindexStep[ReindexStep.reindexCompleted=50]="reindexCompleted",ReindexStep[ReindexStep.aliasCreated=60]="aliasCreated",ReindexStep[ReindexStep.indexGroupServicesStarted=70]="indexGroupServicesStarted"}(ReindexStep||(ReindexStep={})),function(ReindexStatus){ReindexStatus[ReindexStatus.inProgress=0]="inProgress",ReindexStatus[ReindexStatus.completed=1]="completed",ReindexStatus[ReindexStatus.failed=2]="failed",ReindexStatus[ReindexStatus.paused=3]="paused",ReindexStatus[ReindexStatus.cancelled=4]="cancelled"}(ReindexStatus||(ReindexStatus={}));let IndexGroup;!function(IndexGroup){IndexGroup.ml="___ML_REINDEX_LOCK___",IndexGroup.watcher="___WATCHER_REINDEX_LOCK___"}(IndexGroup||(IndexGroup={}));var classnames=__webpack_require__(35),classnames_default=__webpack_require__.n(classnames);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const StepStatus=({status:status,idx:idx})=>{if("incomplete"===status)return external_kbnSharedDeps_React_default.a.createElement("span",{className:"upgStepProgress__status"},idx+1,".");if("inProgress"===status)return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"m",className:"upgStepProgress__status"});if("complete"===status)return external_kbnSharedDeps_React_default.a.createElement("span",{className:"upgStepProgress__status upgStepProgress__status--circle upgStepProgress__status--circle-complete"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"check",size:"s"}));if("paused"===status)return external_kbnSharedDeps_React_default.a.createElement("span",{className:"upgStepProgress__status upgStepProgress__status--circle upgStepProgress__status--circle-paused"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"pause",size:"s"}));if("cancelled"===status)return external_kbnSharedDeps_React_default.a.createElement("span",{className:"upgStepProgress__status upgStepProgress__status--circle upgStepProgress__status--circle-cancelled"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"cross",size:"s"}));if("failed"===status)return external_kbnSharedDeps_React_default.a.createElement("span",{className:"upgStepProgress__status upgStepProgress__status--circle upgStepProgress__status--circle-failed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"cross",size:"s"}));throw new Error("Unsupported status: "+status)},Step=({title:title,status:status,children:children,idx:idx})=>{const titleClassName=classnames_default()("upgStepProgress__title",{"upgStepProgress__title--currentStep":"inProgress"===status||"paused"===status||"failed"===status||"cancelled"===status});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("div",{className:"upgStepProgress__step"},external_kbnSharedDeps_React_default.a.createElement(StepStatus,{status:status,idx:idx}),external_kbnSharedDeps_React_default.a.createElement("p",{className:titleClassName},title)),children&&external_kbnSharedDeps_React_default.a.createElement("div",{className:"upgStepProgress__content"},children))},StepProgress=({steps:steps})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"upgStepProgress__container"},steps.map((step,idx)=>external_kbnSharedDeps_React_default.a.createElement(Step,_extends({key:idx},step,{idx:idx})))),ErrorCallout=({errorMessage:errorMessage})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{color:"danger",title:"There was an error"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("p",null,errorMessage))),PausedCallout=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{color:"warning",title:"This step was paused due to a Kibana restart. Click 'Resume' below to continue."}),ReindexProgressBar=({reindexState:{lastCompletedStep:lastCompletedStep,status:status,reindexTaskPercComplete:reindexTaskPercComplete,cancelLoadingState:cancelLoadingState},cancelReindex:cancelReindex})=>{const progressBar=reindexTaskPercComplete?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiProgress,{size:"s",value:reindexTaskPercComplete,max:1}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiProgress,{size:"s"});let cancelText;switch(cancelLoadingState){case LoadingState.Loading:cancelText=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.cancelButton.cancellingLabel",defaultMessage:"Cancelling…"});break;case LoadingState.Success:cancelText=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.cancelButton.cancelledLabel",defaultMessage:"Cancelled"});break;case LoadingState.Error:cancelText="Could not cancel",cancelText=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.cancelButton.errorLabel",defaultMessage:"Could not cancel"});break;default:cancelText=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.cancelButton.cancelLabel",defaultMessage:"Cancel"})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,progressBar),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:cancelReindex,disabled:cancelLoadingState===LoadingState.Loading||status!==ReindexStatus.inProgress||lastCompletedStep!==ReindexStep.reindexStarted,isLoading:cancelLoadingState===LoadingState.Loading},cancelText)))},orderedSteps=Object.values(ReindexStep).sort(),ReindexProgress=props=>{const{errorMessage:errorMessage,indexGroup:indexGroup,lastCompletedStep:lastCompletedStep=-1,status:status}=props.reindexState,stepDetails=thisStep=>{const previousStep=orderedSteps[orderedSteps.indexOf(thisStep)-1];return status===ReindexStatus.failed&&lastCompletedStep===previousStep?{status:"failed",children:external_kbnSharedDeps_React_default.a.createElement(ErrorCallout,{errorMessage:errorMessage})}:status===ReindexStatus.paused&&lastCompletedStep===previousStep?{status:"paused",children:external_kbnSharedDeps_React_default.a.createElement(PausedCallout,null)}:status===ReindexStatus.cancelled&&lastCompletedStep===previousStep?{status:"cancelled"}:void 0===status||lastCompletedStep<previousStep?{status:"incomplete"}:lastCompletedStep===previousStep?{status:"inProgress"}:{status:"complete"}},reindexingDocsStep={title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.reindexingDocumentsStepTitle",defaultMessage:"Reindexing documents"})};status!==ReindexStatus.failed||lastCompletedStep!==ReindexStep.newIndexCreated&&lastCompletedStep!==ReindexStep.reindexStarted?status!==ReindexStatus.paused||lastCompletedStep!==ReindexStep.newIndexCreated&&lastCompletedStep!==ReindexStep.reindexStarted?status!==ReindexStatus.cancelled||lastCompletedStep!==ReindexStep.newIndexCreated&&lastCompletedStep!==ReindexStep.reindexStarted?void 0===status||lastCompletedStep<ReindexStep.newIndexCreated?reindexingDocsStep.status="incomplete":lastCompletedStep===ReindexStep.newIndexCreated||lastCompletedStep===ReindexStep.reindexStarted?(reindexingDocsStep.status="inProgress",reindexingDocsStep.children=external_kbnSharedDeps_React_default.a.createElement(ReindexProgressBar,props)):reindexingDocsStep.status="complete":reindexingDocsStep.status="cancelled":(reindexingDocsStep.status="paused",reindexingDocsStep.children=external_kbnSharedDeps_React_default.a.createElement(PausedCallout,null)):(reindexingDocsStep.status="failed",reindexingDocsStep.children=external_kbnSharedDeps_React_default.a.createElement(ErrorCallout,{errorMessage:errorMessage}));const steps=[{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.readonlyStepTitle",defaultMessage:"Setting old index to read-only"}),...stepDetails(ReindexStep.readonly)},{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.createIndexStepTitle",defaultMessage:"Creating new index"}),...stepDetails(ReindexStep.newIndexCreated)},reindexingDocsStep,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.aliasSwapStepTitle",defaultMessage:"Swapping original index with alias"}),...stepDetails(ReindexStep.aliasCreated)}];return indexGroup===IndexGroup.ml?(steps.unshift({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.pauseMlStepTitle",defaultMessage:"Pausing Machine Learning jobs"}),...stepDetails(ReindexStep.indexGroupServicesStopped)}),steps.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.resumeMlStepTitle",defaultMessage:"Resuming Machine Learning jobs"}),...stepDetails(ReindexStep.indexGroupServicesStarted)})):indexGroup===IndexGroup.watcher&&(steps.unshift({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.stopWatcherStepTitle",defaultMessage:"Stopping Watcher"}),...stepDetails(ReindexStep.indexGroupServicesStopped)}),steps.push({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.resumeWatcherStepTitle",defaultMessage:"Resuming Watcher"}),...stepDetails(ReindexStep.indexGroupServicesStarted)})),external_kbnSharedDeps_React_default.a.createElement(StepProgress,{steps:steps})},ChecklistFlyoutStep=({closeFlyout:closeFlyout,reindexState:reindexState,startReindex:startReindex,cancelReindex:cancelReindex,http:http,renderGlobalCallouts:renderGlobalCallouts})=>{const{loadingState:loadingState,status:status,hasRequiredPrivileges:hasRequiredPrivileges}=reindexState,loading=loadingState===LoadingState.Loading||status===ReindexStatus.inProgress;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutBody,null,renderGlobalCallouts(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.readonlyCallout.calloutTitle",defaultMessage:"Index is unable to ingest, update, or delete documents while reindexing"}),color:"warning",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.readonlyCallout.cantStopDetail",defaultMessage:"If you can’t stop document updates or need to reindex into a new cluster, consider using a different upgrade strategy."})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.readonlyCallout.backgroundResumeDetail",defaultMessage:"Reindexing will continue in the background, but if Kibana shuts down or restarts you will need to return to this page to resume reindexing."}))),!hasRequiredPrivileges&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.insufficientPrivilegeCallout.calloutTitle",defaultMessage:"You do not have sufficient privileges to reindex this index"}),color:"danger",iconType:"alert"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklistTitle",defaultMessage:"Reindexing process"}))),external_kbnSharedDeps_React_default.a.createElement(ReindexProgress,{reindexState:reindexState,cancelReindex:cancelReindex})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutFooter,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{iconType:"cross",onClick:closeFlyout,flush:"left"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.closeButtonLabel",defaultMessage:"Close"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{fill:!0,color:status===ReindexStatus.paused?"warning":"primary",iconType:status===ReindexStatus.paused?"play":void 0,onClick:startReindex,isLoading:loading,disabled:loading||status===ReindexStatus.completed||!hasRequiredPrivileges},(status=>{switch(status){case ReindexStatus.failed:return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.tryAgainLabel",defaultMessage:"Try again"});case ReindexStatus.inProgress:return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.reindexingLabel",defaultMessage:"Reindexing…"});case ReindexStatus.completed:return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.doneLabel",defaultMessage:"Done!"});case ReindexStatus.paused:return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.resumeLabel",defaultMessage:"Resume"});default:return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.runReindexLabel",defaultMessage:"Run reindex"})}})(status))))))},warning_step_checkbox_WarningCheckbox=({isChecked:isChecked,warningId:warningId,label:label,onChange:onChange,description:description,documentationUrl:documentationUrl})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCheckbox,{id:warningId,label:external_kbnSharedDeps_React_default.a.createElement("strong",null,label),checked:isChecked,onChange:onChange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:documentationUrl,target:"_blank",external:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIconTip,{content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.documentationLinkLabel",defaultMessage:"Documentation"}),position:"right",type:"help"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xs"}),description),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null)),warningToComponentMap={customTypeName:({isChecked:isChecked,onChange:onChange,docLinks:docLinks,id:id,meta:meta})=>external_kbnSharedDeps_React_default.a.createElement(warning_step_checkbox_WarningCheckbox,{isChecked:isChecked,onChange:onChange,warningId:id,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.customTypeNameWarningTitle",defaultMessage:"Replace mapping type {mappingType} with {defaultType}",values:{mappingType:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,meta.typeName),defaultType:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,"_doc")}}),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.customTypeNameWarningDetail",defaultMessage:"Mapping types are no longer supported in 8.0. Ensure no application code or scripts rely on {mappingType}.",values:{mappingType:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,meta.typeName)}}),documentationUrl:docLinks.elasticsearch.typesRemoval}),indexSetting:({isChecked:isChecked,onChange:onChange,docLinks:docLinks,id:id,meta:meta})=>external_kbnSharedDeps_React_default.a.createElement(warning_step_checkbox_WarningCheckbox,{isChecked:isChecked,onChange:onChange,warningId:id,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.deprecatedIndexSettingsWarningTitle",defaultMessage:"Remove deprecated index settings"}),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.deprecatedIndexSettingsWarningDetail",defaultMessage:"The following deprecated index settings were detected:"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement("ul",null,meta.deprecatedSettings.map((setting,index)=>external_kbnSharedDeps_React_default.a.createElement("li",{key:`${setting}-${index}`},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,setting))))),documentationUrl:docLinks.elasticsearch.indexModules})},idForWarning=id=>"reindexWarning-"+id,WarningsFlyoutStep=({warnings:warnings,renderGlobalCallouts:renderGlobalCallouts,closeFlyout:closeFlyout,advanceNextStep:advanceNextStep})=>{const{docLinks:docLinks}=useAppContext(),{links:links}=docLinks,[checkedIds,setCheckedIds]=Object(external_kbnSharedDeps_React_.useState)(warnings.reduce((initialCheckedIds,warning,index)=>(initialCheckedIds[idForWarning(index)]=!1,initialCheckedIds),{})),blockAdvance=Object.values(checkedIds).filter(v=>v).length<warnings.length,onChange=e=>{const optionId=e.target.id;setCheckedIds(prev=>({...prev,[optionId]:!checkedIds[optionId]}))};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutBody,null,renderGlobalCallouts(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.destructiveCallout.calloutTitle",defaultMessage:"This index requires destructive changes that cannot be reversed"}),color:"danger",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.destructiveCallout.calloutDetail",defaultMessage:"Back up the index before continuing. To proceed with the reindex, accept each change."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),warnings.map((warning,index)=>{const WarningCheckbox=warningToComponentMap[warning.warningType];return external_kbnSharedDeps_React_default.a.createElement(WarningCheckbox,{key:idForWarning(index),isChecked:checkedIds[idForWarning(index)],onChange:onChange,docLinks:links,id:idForWarning(index),meta:warning.meta})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutFooter,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{iconType:"cross",onClick:closeFlyout,flush:"left"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.cancelButtonLabel",defaultMessage:"Cancel"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{fill:!0,color:"danger",onClick:advanceNextStep,disabled:blockAdvance},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.continueButtonLabel",defaultMessage:"Continue with reindex"}))))))};var ReindexFlyoutStep;!function(ReindexFlyoutStep){ReindexFlyoutStep[ReindexFlyoutStep.reindexWarnings=0]="reindexWarnings",ReindexFlyoutStep[ReindexFlyoutStep.checklist=1]="checklist"}(ReindexFlyoutStep||(ReindexFlyoutStep={}));const getOpenAndCloseIndexDocLink=docLinks=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{target:"_blank",href:""+docLinks.links.apis.openIndex},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.reindexing.flyout.openAndCloseDocumentation",{defaultMessage:"documentation"}));class container_ReindexFlyout extends external_kbnSharedDeps_React_default.a.Component{constructor(props){var obj,key,value;super(props),value=()=>{this.setState({currentFlyoutStep:ReindexFlyoutStep.checklist})},(key="advanceNextStep")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;const{status:status,reindexWarnings:reindexWarnings}=props.reindexState;this.state={currentFlyoutStep:reindexWarnings&&reindexWarnings.length>0&&void 0===status?ReindexFlyoutStep.reindexWarnings:ReindexFlyoutStep.checklist}}render(){const{closeFlyout:closeFlyout,indexName:indexName,reindexState:reindexState,startReindex:startReindex,cancelReindex:cancelReindex,reindexBlocker:reindexBlocker,docLinks:docLinks}=this.props,{currentFlyoutStep:currentFlyoutStep}=this.state;let flyoutContents;const globalCallout="index-closed"===reindexBlocker&&reindexState.status!==ReindexStatus.completed?(docLinks=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.reindexing.flyout.indexClosedCallout.calloutTitle",{defaultMessage:"Index closed"}),color:"warning",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.indexClosedCallout.calloutDetails",defaultMessage:"This index is currently closed. The Upgrade Assistant will open, reindex and then close the index. {reindexingMayTakeLongerEmph}. Please see the {docs} for more information.",values:{docs:getOpenAndCloseIndexDocLink(docLinks),reindexingMayTakeLongerEmph:external_kbnSharedDeps_React_default.a.createElement("b",null,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.reindexing.flyout.indexClosedCallout.calloutDetails.reindexingTakesLongerEmphasis",{defaultMessage:"Reindexing may take longer than usual"}))}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"})))(docLinks):void 0;switch(currentFlyoutStep){case ReindexFlyoutStep.reindexWarnings:flyoutContents=external_kbnSharedDeps_React_default.a.createElement(WarningsFlyoutStep,{renderGlobalCallouts:()=>globalCallout,closeFlyout:closeFlyout,warnings:reindexState.reindexWarnings,advanceNextStep:this.advanceNextStep});break;case ReindexFlyoutStep.checklist:flyoutContents=external_kbnSharedDeps_React_default.a.createElement(ChecklistFlyoutStep,{http:this.props.http,renderGlobalCallouts:()=>globalCallout,closeFlyout:closeFlyout,reindexState:reindexState,startReindex:startReindex,cancelReindex:cancelReindex});break;default:throw new Error("Invalid flyout step: "+currentFlyoutStep)}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPortal,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyout,{onClose:closeFlyout,"aria-labelledby":"Reindex",ownFocus:!0,size:"m",maxWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutHeader,{hasBorder:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.flyoutHeader",defaultMessage:"Reindex {indexName}",values:{indexName:indexName}})))),flyoutContents))}}var external_kbnSharedDeps_Rxjs_=__webpack_require__(29);function polling_service_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class polling_service_ReindexPollingService{constructor(indexName,http){this.indexName=indexName,this.http=http,polling_service_defineProperty(this,"status$",void 0),polling_service_defineProperty(this,"pollTimeout",void 0),polling_service_defineProperty(this,"updateStatus",async()=>{this.stopPolling();try{const data=await this.http.get(`${API_BASE_PATH}/reindex/${this.indexName}`);this.updateWithResponse(data),data.reindexOp&&data.reindexOp.status===ReindexStatus.inProgress&&(this.pollTimeout=setTimeout(this.updateStatus,1e3))}catch(e){this.status$.next({...this.status$.value,status:ReindexStatus.failed})}}),polling_service_defineProperty(this,"stopPolling",()=>{this.pollTimeout&&clearTimeout(this.pollTimeout)}),polling_service_defineProperty(this,"startReindex",async()=>{try{const currentValue=this.status$.value;this.status$.next({...currentValue,lastCompletedStep:currentValue.status===ReindexStatus.paused?currentValue.lastCompletedStep:void 0,status:ReindexStatus.inProgress,reindexTaskPercComplete:null,errorMessage:null,cancelLoadingState:void 0});const data=await this.http.post(`${API_BASE_PATH}/reindex/${this.indexName}`);this.updateWithResponse({reindexOp:data}),this.updateStatus()}catch(e){this.status$.next({...this.status$.value,status:ReindexStatus.failed})}}),polling_service_defineProperty(this,"cancelReindex",async()=>{try{this.status$.next({...this.status$.value,cancelLoadingState:LoadingState.Loading}),await this.http.post(`${API_BASE_PATH}/reindex/${this.indexName}/cancel`)}catch(e){this.status$.next({...this.status$.value,cancelLoadingState:LoadingState.Error})}}),polling_service_defineProperty(this,"updateWithResponse",({reindexOp:reindexOp,warnings:warnings,hasRequiredPrivileges:hasRequiredPrivileges,indexGroup:indexGroup})=>{const nextValue={...this.status$.value,loadingState:LoadingState.Success};warnings&&(nextValue.reindexWarnings=warnings),void 0!==hasRequiredPrivileges&&(nextValue.hasRequiredPrivileges=hasRequiredPrivileges),indexGroup&&(nextValue.indexGroup=indexGroup),reindexOp&&(nextValue.lastCompletedStep=reindexOp.lastCompletedStep,nextValue.status=reindexOp.status,nextValue.reindexTaskPercComplete=reindexOp.reindexTaskPercComplete,nextValue.errorMessage=reindexOp.errorMessage,reindexOp.status===ReindexStatus.cancelled&&(nextValue.cancelLoadingState=LoadingState.Success)),this.status$.next(nextValue)}),this.status$=new external_kbnSharedDeps_Rxjs_.BehaviorSubject({loadingState:LoadingState.Loading,errorMessage:null,reindexTaskPercComplete:null})}}function button_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class button_ReindexButton extends external_kbnSharedDeps_React_default.a.Component{constructor(props){super(props),button_defineProperty(this,"service",void 0),button_defineProperty(this,"subscription",void 0),button_defineProperty(this,"startReindex",async()=>{this.state.reindexState.status||this.sendUIReindexTelemetryInfo("start"),await this.service.startReindex()}),button_defineProperty(this,"cancelReindex",async()=>{this.sendUIReindexTelemetryInfo("stop"),await this.service.cancelReindex()}),button_defineProperty(this,"showFlyout",()=>{this.sendUIReindexTelemetryInfo("open"),this.setState({flyoutVisible:!0})}),button_defineProperty(this,"closeFlyout",()=>{this.sendUIReindexTelemetryInfo("close"),this.setState({flyoutVisible:!1})}),this.service=this.newService(),this.state={flyoutVisible:!1,reindexState:this.service.status$.value}}async componentDidMount(){this.subscribeToUpdates()}async componentWillUnmount(){this.unsubscribeToUpdates()}componentDidUpdate(prevProps){prevProps.indexName!==this.props.indexName&&(this.unsubscribeToUpdates(),this.service=this.newService(),this.subscribeToUpdates())}render(){const{indexName:indexName,reindexBlocker:reindexBlocker,docLinks:docLinks}=this.props,{flyoutVisible:flyoutVisible,reindexState:reindexState}=this.state,buttonProps={size:"s",onClick:this.showFlyout};let buttonContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.reindexButton.reindexLabel",defaultMessage:"Reindex"});if(reindexState.loadingState===LoadingState.Loading)buttonProps.disabled=!0,buttonContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.reindexButton.loadingLabel",defaultMessage:"Loading…"});else switch(reindexState.status){case ReindexStatus.inProgress:buttonContent=external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{className:"upgReindexButton__spinner",size:"m"})," Reindexing…");break;case ReindexStatus.completed:buttonProps.color="secondary",buttonProps.iconSide="left",buttonProps.iconType="check",buttonContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.reindexButton.doneLabel",defaultMessage:"Done"});break;case ReindexStatus.failed:buttonProps.color="danger",buttonProps.iconSide="left",buttonProps.iconType="cross",buttonContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.reindexButton.failedLabel",defaultMessage:"Failed"});break;case ReindexStatus.paused:buttonProps.color="warning",buttonProps.iconSide="left",buttonProps.iconType="pause",buttonContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.reindexButton.pausedLabel",defaultMessage:"Paused"});case ReindexStatus.cancelled:buttonProps.color="danger",buttonProps.iconSide="left",buttonProps.iconType="cross",buttonContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.reindexButton.cancelledLabel",defaultMessage:"Cancelled"})}const showIndexedClosedWarning="index-closed"===reindexBlocker&&reindexState.status!==ReindexStatus.completed;showIndexedClosedWarning&&(buttonProps.color="warning",buttonProps.iconType="alert");const button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,buttonProps,buttonContent);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,showIndexedClosedWarning?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"top",content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.reindexing.reindexButton.indexClosedToolTipDetails",{defaultMessage:'"{indexName}" needs to be reindexed, but it is currently closed. The Upgrade Assistant will open, reindex and then close the index. Reindexing may take longer than usual.',values:{indexName:indexName}}))},button):button,flyoutVisible&&external_kbnSharedDeps_React_default.a.createElement(container_ReindexFlyout,{http:this.props.http,reindexBlocker:reindexBlocker,docLinks:docLinks,indexName:indexName,closeFlyout:this.closeFlyout,reindexState:reindexState,startReindex:this.startReindex,cancelReindex:this.cancelReindex}))}newService(){const{indexName:indexName,http:http}=this.props;return new polling_service_ReindexPollingService(indexName,http)}subscribeToUpdates(){this.service.updateStatus(),this.subscription=this.service.status$.subscribe(reindexState=>this.setState({reindexState:reindexState}))}unsubscribeToUpdates(){this.subscription&&(this.subscription.unsubscribe(),delete this.subscription),this.service&&this.service.stopPolling()}async sendUIReindexTelemetryInfo(uiReindexAction){await this.props.http.put(API_BASE_PATH+"/stats/ui_reindex",{body:JSON.stringify(Object(external_kbnSharedDeps_SaferLodashSet_.set)({},uiReindexAction,!0))})}}const i18nTexts={removeButtonLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.confirmationModal.removeButtonLabel",{defaultMessage:"Remove"}),cancelButtonLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.indexSettings.confirmationModal.cancelButtonLabel",{defaultMessage:"Cancel"}),modalDescription:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.indexSettings.confirmationModal.description",{defaultMessage:"The following deprecated index settings were detected and will be removed:"}),successNotificationText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.indexSettings.confirmationModal.successNotificationText",{defaultMessage:"Index settings removed"}),errorNotificationText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.indexSettings.confirmationModal.errorNotificationText",{defaultMessage:"Error removing index settings"})},RemoveIndexSettingsProvider=({children:children})=>{const[isModalOpen,setIsModalOpen]=Object(external_kbnSharedDeps_React_.useState)(!1),[successfulRequests,setSuccessfulRequests]=Object(external_kbnSharedDeps_React_.useState)({}),[isLoading,setIsLoading]=Object(external_kbnSharedDeps_React_.useState)(!1),deprecatedSettings=Object(external_kbnSharedDeps_React_.useRef)([]),indexName=Object(external_kbnSharedDeps_React_.useRef)(void 0),{api:api,notifications:notifications}=useAppContext(),closeModal=()=>{setIsModalOpen(!1)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,children((index,settings)=>{setIsModalOpen(!0),setSuccessfulRequests({[index]:!1}),indexName.current=index,deprecatedSettings.current=settings},successfulRequests),isModalOpen&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiConfirmModal,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.indexSettings.confirmationModal.title",{defaultMessage:"Remove deprecated settings from '{indexName}'?",values:{indexName:indexName.current}}),"data-test-subj":"indexSettingsDeleteConfirmModal",onCancel:closeModal,onConfirm:async()=>{setIsLoading(!0);const{error:error}=await api.updateIndexSettings(indexName.current,deprecatedSettings.current);setIsLoading(!1),closeModal(),error?notifications.toasts.addDanger(i18nTexts.errorNotificationText):(setSuccessfulRequests({[indexName.current]:!0}),notifications.toasts.addSuccess(i18nTexts.successNotificationText))},cancelButtonText:i18nTexts.cancelButtonLabel,buttonColor:"danger",confirmButtonText:i18nTexts.removeButtonLabel,isLoading:isLoading},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,i18nTexts.modalDescription),external_kbnSharedDeps_React_default.a.createElement("ul",null,deprecatedSettings.current.map((setting,index)=>external_kbnSharedDeps_React_default.a.createElement("li",{key:`${setting}-${index}`},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,setting)))))))},button_i18nTexts={fixButtonLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.indexSettings.fixButtonLabel",{defaultMessage:"Fix"}),doneButtonLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.indexSettings.doneButtonLabel",{defaultMessage:"Done"})},FixIndexSettingsButton=({settings:settings,index:index})=>external_kbnSharedDeps_React_default.a.createElement(RemoveIndexSettingsProvider,null,(removeIndexSettingsPrompt,successfulRequests)=>{const isSuccessfulRequest=!0===successfulRequests[index];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{size:"s","data-test-subj":"removeIndexSettingsButton",onClick:()=>removeIndexSettingsPrompt(index,settings),isDisabled:isSuccessfulRequest,iconType:isSuccessfulRequest?"check":void 0},isSuccessfulRequest?button_i18nTexts.doneButtonLabel:button_i18nTexts.fixButtonLabel)}),DeprecationCell=({headline:headline,healthColor:healthColor,indexName:indexName,reindex:reindex,deprecatedIndexSettings:deprecatedIndexSettings,docUrl:docUrl,items:items=[],children:children,reindexBlocker:reindexBlocker})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"upgDeprecationCell"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{responsive:!1,wrap:!0,alignItems:"baseline"},healthColor&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"dot",color:healthColor})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!0},headline&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xxs"},external_kbnSharedDeps_React_default.a.createElement("h2",null,headline)),docUrl&&external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:docUrl,target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.deprecations.documentationButtonLabel",defaultMessage:"Documentation"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"})),items.map(item=>external_kbnSharedDeps_React_default.a.createElement("div",{key:item.title||item.body},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,item.title&&external_kbnSharedDeps_React_default.a.createElement("h6",null,item.title),external_kbnSharedDeps_React_default.a.createElement("p",null,item.body))))),reindex&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(AppContext.Consumer,null,({http:http,docLinks:docLinks})=>external_kbnSharedDeps_React_default.a.createElement(button_ReindexButton,{docLinks:docLinks,reindexBlocker:reindexBlocker,indexName:indexName,http:http}))),(null==deprecatedIndexSettings?void 0:deprecatedIndexSettings.length)&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(FixIndexSettingsButton,{settings:deprecatedIndexSettings,index:indexName}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),children);const PAGE_SIZES=[10,25,50,100,250,500,1e3];class index_table_IndexDeprecationTable extends external_kbnSharedDeps_React_default.a.Component{constructor(props){var obj,key,value;super(props),value=tableProps=>{this.setState({sortField:tableProps.sort.field,sortDirection:tableProps.sort.direction,pageIndex:tableProps.page.index,pageSize:tableProps.page.size})},(key="onTableChange")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this.state={sortField:"index",sortDirection:"asc",pageIndex:0,pageSize:10}}render(){const{pageIndex:pageIndex,pageSize:pageSize,sortField:sortField,sortDirection:sortDirection}=this.state,columns=[{field:"index",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.deprecations.indexTable.indexColumnLabel",{defaultMessage:"Index"}),sortable:!0},{field:"details",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.checkupTab.deprecations.indexTable.detailsColumnLabel",{defaultMessage:"Details"})}],actionsColumn=this.generateActionsColumn();actionsColumn&&columns.push(actionsColumn);const sorting={sort:{field:sortField,direction:sortDirection}},pagination={pageIndex:pageIndex,pageSize:pageSize,...this.pageSizeOptions()};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBasicTable,{items:this.getRows(),columns:columns,sorting:sorting,pagination:pagination,onChange:this.onTableChange,hasActions:!1,rowProps:indexDetails=>({"data-test-subj":"indexTableRow-"+indexDetails.index})})}getRows(){const{sortField:sortField,sortDirection:sortDirection,pageIndex:pageIndex,pageSize:pageSize}=this.state,{indices:indices}=this.props;let sorted=Object(external_kbnSharedDeps_Lodash_.sortBy)(indices,sortField);"desc"===sortDirection&&(sorted=sorted.reverse());const start=pageIndex*pageSize;return sorted.slice(start,start+pageSize)}pageSizeOptions(){const{indices:indices}=this.props,totalItemCount=indices.length;if(totalItemCount<=PAGE_SIZES[0])return{totalItemCount:totalItemCount,pageSizeOptions:[],hidePerPageOptions:!0};const pageSizeOptions=PAGE_SIZES.filter((perPage,idx)=>0===idx||totalItemCount>PAGE_SIZES[idx-1]);return{totalItemCount:totalItemCount,pageSizeOptions:pageSizeOptions,hidePerPageOptions:!1}}generateActionsColumn(){const{indices:indices}=this.props,showReindexButton=Boolean(indices.find(i=>!0===i.reindex)),showFixSettingsButton=Boolean(indices.find(i=>i.deprecatedIndexSettings&&i.deprecatedIndexSettings.length>0));return!1===showReindexButton&&!1===showFixSettingsButton?null:{actions:[{render:indexDep=>showReindexButton?external_kbnSharedDeps_React_default.a.createElement(AppContext.Consumer,null,({http:http,docLinks:docLinks})=>external_kbnSharedDeps_React_default.a.createElement(button_ReindexButton,{docLinks:docLinks,reindexBlocker:indexDep.blockerForReindexing,indexName:indexDep.index,http:http})):external_kbnSharedDeps_React_default.a.createElement(FixIndexSettingsButton,{settings:indexDep.deprecatedIndexSettings,index:indexDep.index})}]}}}const sortByLevelDesc=(a,b)=>-1*(LEVEL_MAP[a.level]-LEVEL_MAP[b.level]),MessageDeprecation=({deprecation:deprecation})=>{const items=[];return deprecation.details&&items.push({body:deprecation.details}),external_kbnSharedDeps_React_default.a.createElement(DeprecationCell,{reindexBlocker:deprecation.blockerForReindexing,headline:deprecation.message,healthColor:COLOR_MAP[deprecation.level],indexName:deprecation.index,reindex:deprecation.reindex,deprecatedIndexSettings:deprecation.deprecatedIndexSettings,docUrl:deprecation.url,items:items})},SimpleMessageDeprecation=({deprecation:deprecation})=>{const items=[];return deprecation.details&&items.push({body:deprecation.details}),external_kbnSharedDeps_React_default.a.createElement(DeprecationCell,{reindexBlocker:deprecation.blockerForReindexing,items:items,docUrl:deprecation.url,deprecatedIndexSettings:deprecation.deprecatedIndexSettings})},IndexDeprecation=({deprecation:deprecation,indices:indices})=>external_kbnSharedDeps_React_default.a.createElement(DeprecationCell,{docUrl:deprecation.url},external_kbnSharedDeps_React_default.a.createElement(index_table_IndexDeprecationTable,{indices:indices})),DeprecationList=({deprecations:deprecations,currentGroupBy:currentGroupBy})=>{if(currentGroupBy===GroupByOption.message&&void 0!==deprecations[0].index){const indices=deprecations.map(dep=>({index:dep.index,details:dep.details,reindex:!0===dep.reindex,deprecatedIndexSettings:dep.deprecatedIndexSettings,blockerForReindexing:dep.blockerForReindexing}));return external_kbnSharedDeps_React_default.a.createElement(IndexDeprecation,{indices:indices,deprecation:deprecations[0]})}return currentGroupBy===GroupByOption.index?external_kbnSharedDeps_React_default.a.createElement("div",null,deprecations.sort(sortByLevelDesc).map(dep=>external_kbnSharedDeps_React_default.a.createElement(MessageDeprecation,{deprecation:dep,key:dep.message}))):external_kbnSharedDeps_React_default.a.createElement("div",null,deprecations.sort(sortByLevelDesc).map(dep=>external_kbnSharedDeps_React_default.a.createElement(SimpleMessageDeprecation,{deprecation:dep,key:dep.message})))};function grouped_extends(){return(grouped_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function grouped_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const DeprecationAccordion=({id:id,deprecations:deprecations,title:title,currentGroupBy:currentGroupBy,forceExpand:forceExpand,dataTestSubj:dataTestSubj})=>{const hasIndices=Boolean(currentGroupBy===GroupByOption.message&&deprecations.filter(d=>d.index).length),numIndices=hasIndices?deprecations.length:null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiAccordion,{id:id,"data-test-subj":dataTestSubj,className:"upgDeprecations__item",initialIsOpen:forceExpand,buttonContent:external_kbnSharedDeps_React_default.a.createElement("span",{className:"upgDeprecations__itemName"},title),extraAction:external_kbnSharedDeps_React_default.a.createElement("div",null,hasIndices&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBadge,{color:"hollow"},external_kbnSharedDeps_React_default.a.createElement("span",{"data-test-subj":"indexCount"},numIndices)," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.indicesBadgeLabel",defaultMessage:"{numIndices, plural, one {index} other {indices}}",values:{numIndices:numIndices}}))," "),external_kbnSharedDeps_React_default.a.createElement(DeprecationHealth,{single:currentGroupBy===GroupByOption.message,deprecations:deprecations}))},external_kbnSharedDeps_React_default.a.createElement(DeprecationList,{deprecations:deprecations,currentGroupBy:currentGroupBy}))},CalcFields={filteredDeprecations(props){const{allDeprecations:allDeprecations=[],currentFilter:currentFilter,search:search}=props;return allDeprecations.filter(((level,search="")=>{const conditions=[];return level!==LevelFilterOption.all&&conditions.push(dep=>dep.level===level),search.length>0&&conditions.push(dep=>{try{const searchReg=new RegExp(search.toLowerCase());return Boolean(dep.message.toLowerCase().match(searchReg)||dep.details&&dep.details.toLowerCase().match(searchReg)||dep.index&&dep.index.toLowerCase().match(searchReg)||dep.node&&dep.node.toLowerCase().match(searchReg))}catch(e){return!0}}),dep=>conditions.map(c=>c(dep)).every(t=>t)})(currentFilter,search))},groups(props){const{currentGroupBy:currentGroupBy}=props;return Object(external_kbnSharedDeps_Lodash_.groupBy)(CalcFields.filteredDeprecations(props),currentGroupBy)},numPages:props=>Math.ceil(Object.keys(CalcFields.groups(props)).length/25)};class grouped_GroupedDeprecations extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args),grouped_defineProperty(this,"state",{forceExpand:!1,expandNumber:0,currentPage:0}),grouped_defineProperty(this,"setExpand",forceExpand=>{this.setState({forceExpand:forceExpand,expandNumber:this.state.expandNumber+1})}),grouped_defineProperty(this,"setPage",currentPage=>this.setState({currentPage:currentPage}))}static getDerivedStateFromProps(nextProps,{currentPage:currentPage}){return currentPage>=CalcFields.numPages(nextProps)?{currentPage:0}:null}render(){const{currentGroupBy:currentGroupBy,allDeprecations:allDeprecations=[]}=this.props,{forceExpand:forceExpand,expandNumber:expandNumber,currentPage:currentPage}=this.state,filteredDeprecations=CalcFields.filteredDeprecations(this.props),groups=CalcFields.groups(this.props);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{responsive:!1,alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{flush:"left",size:"s",onClick:()=>this.setExpand(!0),"data-test-subj":"expandAll"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.controls.expandAllButtonLabel",defaultMessage:"Expand all"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{flush:"left",size:"s",onClick:()=>this.setExpand(!1),"data-test-subj":"collapseAll"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.controls.collapseAllButtonLabel",defaultMessage:"Collapse all"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(DeprecationCountSummary,{allDeprecations:allDeprecations,deprecations:filteredDeprecations}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement("div",{className:"upgDeprecations"},Object.keys(groups).sort().slice(25*currentPage,25*(currentPage+1)).map(groupName=>[external_kbnSharedDeps_React_default.a.createElement(DeprecationAccordion,grouped_extends({key:expandNumber,id:"depgroup-"+groupName,dataTestSubj:"depgroup_"+groupName.split(" ").join("_"),title:groupName,deprecations:groups[groupName]},{currentGroupBy:currentGroupBy,forceExpand:forceExpand}))]),Object.keys(groups).length>25&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceAround"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPagination,{pageCount:CalcFields.numPages(this.props),activePage:currentPage,onPageClick:this.setPage}))))))}}const es_deprecation_errors_i18nTexts={permissionsError:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.esDeprecationErrors.permissionsErrorMessage",{defaultMessage:"You are not authorized to view Elasticsearch deprecations."}),partiallyUpgradedWarning:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.esDeprecationErrors.partiallyUpgradedWarningMessage",{defaultMessage:"Upgrade Kibana to the same version as your Elasticsearch cluster. One or more nodes in the cluster is running a different version than Kibana."}),upgradedMessage:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.esDeprecationErrors.upgradedWarningMessage",{defaultMessage:"Your configuration is up to date. Kibana and all Elasticsearch nodes are running the same version."}),loadingError:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.esDeprecationErrors.loadingErrorMessage",{defaultMessage:"Could not retrieve Elasticsearch deprecations."})},getEsDeprecationError=error=>{var _error$attributes,_error$attributes2;return 403===error.statusCode?{code:"unauthorized_error",message:es_deprecation_errors_i18nTexts.permissionsError}:426===(null==error?void 0:error.statusCode)&&!1===(null===(_error$attributes=error.attributes)||void 0===_error$attributes?void 0:_error$attributes.allNodesUpgraded)?{code:"partially_upgraded_error",message:es_deprecation_errors_i18nTexts.partiallyUpgradedWarning}:426===(null==error?void 0:error.statusCode)&&!0===(null===(_error$attributes2=error.attributes)||void 0===_error$attributes2?void 0:_error$attributes2.allNodesUpgraded)?{code:"upgraded_error",message:es_deprecation_errors_i18nTexts.upgradedMessage}:{code:"request_error",message:es_deprecation_errors_i18nTexts.loadingError}},EsDeprecationErrors=({error:error})=>{const{code:errorType,message:message}=getEsDeprecationError(error);switch(errorType){case"unauthorized_error":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:message,color:"danger",iconType:"alert","data-test-subj":"permissionsError"});case"partially_upgraded_error":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:message,color:"warning",iconType:"alert","data-test-subj":"partiallyUpgradedWarning"});case"upgraded_error":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:message,iconType:"pin","data-test-subj":"upgradedCallout"});case"request_error":default:return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:message,color:"danger",iconType:"alert","data-test-subj":"requestError"},error.message)}},deprecation_tab_content_i18nTexts={isLoading:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.esDeprecations.loadingText",{defaultMessage:"Loading deprecations…"})},DeprecationTabContent=({checkupLabel:checkupLabel,deprecations:deprecations,error:error,isLoading:isLoading,refreshCheckupData:refreshCheckupData,navigateToOverviewPage:navigateToOverviewPage})=>{const[currentFilter,setCurrentFilter]=Object(external_kbnSharedDeps_React_.useState)(LevelFilterOption.all),[search,setSearch]=Object(external_kbnSharedDeps_React_.useState)(""),[currentGroupBy,setCurrentGroupBy]=Object(external_kbnSharedDeps_React_.useState)(GroupByOption.message);if(deprecations&&0===deprecations.length)return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"faceHappy","data-test-subj":"noDeprecationsPrompt",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.noIssues.noIssuesTitle",defaultMessage:"Ready to upgrade!"})),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",{"data-test-subj":"upgradeAssistantIssueSummary"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.noIssues.noIssuesLabel",defaultMessage:"Your configuration is up to date."})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.noIssues.nextStepsDetail",defaultMessage:"Check the {overviewTabButton} for other Stack deprecations.",values:{overviewTabButton:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:navigateToOverviewPage},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.noIssues.nextStepsDetail.overviewTabButtonLabel",defaultMessage:"Overview page"}))}})))});let content;return isLoading?content=external_kbnSharedDeps_React_default.a.createElement(public_.SectionLoading,null,deprecation_tab_content_i18nTexts.isLoading):null!=deprecations&&deprecations.length?content=external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"deprecationsContainer"},external_kbnSharedDeps_React_default.a.createElement(CheckupControls,{allDeprecations:deprecations,isLoading:isLoading,loadData:refreshCheckupData,currentFilter:currentFilter,onFilterChange:setCurrentFilter,onSearchChange:setSearch,availableGroupByOptions:deprecations?Object.keys(GroupByOption).filter(opt=>Object(external_kbnSharedDeps_Lodash_.find)(deprecations,opt)):[],currentGroupBy:currentGroupBy,onGroupByChange:setCurrentGroupBy}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(grouped_GroupedDeprecations,{currentGroupBy:currentGroupBy,currentFilter:currentFilter,search:search,allDeprecations:deprecations})):error&&(content=external_kbnSharedDeps_React_default.a.createElement(EsDeprecationErrors,{error:error})),external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":checkupLabel+"TabContent"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),content)};function es_deprecations_extends(){return(es_deprecations_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const es_deprecations_i18nTexts={pageTitle:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.esDeprecations.pageTitle",{defaultMessage:"Elasticsearch"}),pageDescription:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.esDeprecations.pageDescription",{defaultMessage:"Review the deprecated cluster and index settings. You must resolve any critical issues before upgrading."}),docLinkText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.esDeprecations.docLinkText",{defaultMessage:"Documentation"}),backupDataButton:{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.esDeprecations.backupDataButtonLabel",{defaultMessage:"Back up your data"}),tooltipText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.esDeprecations.backupDataTooltipText",{defaultMessage:"Take a snapshot before you make any changes."})},clusterTab:{tabName:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.esDeprecations.clusterTabLabel",{defaultMessage:"Cluster"}),deprecationType:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.esDeprecations.clusterLabel",{defaultMessage:"cluster"})},indicesTab:{tabName:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.esDeprecations.indicesTabLabel",{defaultMessage:"Indices"}),deprecationType:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.esDeprecations.indexLabel",{defaultMessage:"index"})}},EsDeprecationsContent=Object(external_kbnSharedDeps_ReactRouterDom_.withRouter)(({match:{params:{tabName:tabName}},history:history})=>{const[telemetryState,setTelemetryState]=Object(external_kbnSharedDeps_React_.useState)(TelemetryState.Complete),{api:api,breadcrumbs:breadcrumbs,getUrlForApp:getUrlForApp,docLinks:docLinks}=useAppContext(),{data:checkupData,isLoading:isLoading,error:error,resendRequest:resendRequest}=api.useLoadUpgradeStatus(),tabs=Object(external_kbnSharedDeps_React_.useMemo)(()=>{const commonTabProps={error:error,isLoading:isLoading,refreshCheckupData:resendRequest,navigateToOverviewPage:()=>history.push("/overview")};return[{id:"cluster","data-test-subj":"upgradeAssistantClusterTab",name:external_kbnSharedDeps_React_default.a.createElement("span",null,es_deprecations_i18nTexts.clusterTab.tabName,checkupData&&checkupData.cluster.length>0&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiNotificationBadge,null,checkupData.cluster.length))),content:external_kbnSharedDeps_React_default.a.createElement(DeprecationTabContent,es_deprecations_extends({key:"cluster",deprecations:checkupData?checkupData.cluster:void 0,checkupLabel:es_deprecations_i18nTexts.clusterTab.deprecationType},commonTabProps))},{id:"indices","data-test-subj":"upgradeAssistantIndicesTab",name:external_kbnSharedDeps_React_default.a.createElement("span",null,es_deprecations_i18nTexts.indicesTab.tabName,checkupData&&checkupData.indices.length>0&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiNotificationBadge,null,checkupData.indices.length))),content:external_kbnSharedDeps_React_default.a.createElement(DeprecationTabContent,es_deprecations_extends({key:"indices",deprecations:checkupData?checkupData.indices:void 0,checkupLabel:es_deprecations_i18nTexts.indicesTab.deprecationType},commonTabProps))}]},[checkupData,error,history,isLoading,resendRequest]);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{breadcrumbs.setBreadcrumbs("esDeprecations")},[breadcrumbs]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{if(!1===isLoading){setTelemetryState(TelemetryState.Running),async function(){await api.sendTelemetryData({[tabName]:!0}),setTelemetryState(TelemetryState.Complete)}()}},[api,tabName,isLoading]),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContent,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageHeader,{pageTitle:es_deprecations_i18nTexts.pageTitle,description:es_deprecations_i18nTexts.pageDescription,rightSideItems:[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{href:docLinks.links.upgradeAssistant,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},es_deprecations_i18nTexts.docLinkText)]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"bottom",content:es_deprecations_i18nTexts.backupDataButton.tooltipText},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{fill:!0,href:getUrlForApp("management",{path:"data/snapshot_restore"}),iconType:"popout",iconSide:"right",target:"_blank"},es_deprecations_i18nTexts.backupDataButton.label))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContentBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTabbedContent,{"data-test-subj":telemetryState===TelemetryState.Running?"upgradeAssistantTelemetryRunning":void 0,tabs:tabs,onTabClick:selectedTab=>{history.push("/es_deprecations/"+selectedTab.id)},selectedTab:tabs.find(tab=>tab.id===tabName)}))))}),LatestMinorBanner=()=>{const{docLinks:docLinks,kibanaVersionInfo:kibanaVersionInfo}=useAppContext(),{ELASTIC_WEBSITE_URL:ELASTIC_WEBSITE_URL}=docLinks,esDocBasePath=ELASTIC_WEBSITE_URL+"guide/en/elasticsearch/reference",{currentMajor:currentMajor,nextMajor:nextMajor}=kibanaVersionInfo;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.tabs.incompleteCallout.calloutTitle",defaultMessage:"Issues list might be incomplete"}),color:"warning",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.tabs.incompleteCallout.calloutBody.calloutDetail",defaultMessage:"The complete list of {breakingChangesDocButton} in Elasticsearch {nextEsVersion} will be available in the final {currentEsVersion} minor release. When the list is complete, this warning will go away.",values:{breakingChangesDocButton:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:esDocBasePath+"/master/breaking-changes.html",target:"_blank",external:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.tabs.incompleteCallout.calloutBody.breackingChangesDocButtonLabel",defaultMessage:"deprecations and breaking changes"})),nextEsVersion:nextMajor+".x",currentEsVersion:currentMajor+".x"}})))};var kibanaReact_public_=__webpack_require__(30);const EsStatsErrors=({error:error})=>{let iconContent;const{code:errorType,message:message}=getEsDeprecationError(error);switch(errorType){case"unauthorized_error":iconContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIconTip,{type:"alert",color:"danger",size:"l",content:message,iconProps:{"data-test-subj":"unauthorizedErrorIconTip"}});break;case"partially_upgraded_error":iconContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIconTip,{type:"alert",color:"warning",size:"l",content:message,iconProps:{"data-test-subj":"partiallyUpgradedErrorIconTip"}});break;case"upgraded_error":iconContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIconTip,{type:"alert",color:"warning",size:"l",content:message,iconProps:{"data-test-subj":"upgradedErrorIconTip"}});break;case"request_error":default:iconContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIconTip,{type:"alert",color:"danger",size:"l",content:message,iconProps:{"data-test-subj":"requestErrorIconTip"}})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),iconContent)};function es_stats_extends(){return(es_stats_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const es_stats_i18nTexts={statsTitle:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.esDeprecationStats.statsTitle",{defaultMessage:"Elasticsearch"}),totalDeprecationsTitle:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.esDeprecationStats.totalDeprecationsTitle",{defaultMessage:"Deprecations"}),criticalDeprecationsTitle:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.esDeprecationStats.criticalDeprecationsTitle",{defaultMessage:"Critical"}),viewDeprecationsLink:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.esDeprecationStats.viewDeprecationsLinkText",{defaultMessage:"View deprecations"}),getTotalDeprecationsTooltip:(clusterCount,indexCount)=>external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.esDeprecationStats.totalDeprecationsTooltip",{defaultMessage:"This cluster is using {clusterCount} deprecated cluster settings and {indexCount} deprecated index settings",values:{clusterCount:clusterCount,indexCount:indexCount}})},ESDeprecationStats=({history:history})=>{var _esDeprecations$clust,_esDeprecations$clust2,_esDeprecations$clust3,_esDeprecations$indic;const{api:api}=useAppContext(),{data:esDeprecations,isLoading:isLoading,error:error}=api.useLoadUpgradeStatus(),allDeprecations=null!==(_esDeprecations$clust=null==esDeprecations||null===(_esDeprecations$clust2=esDeprecations.cluster)||void 0===_esDeprecations$clust2?void 0:_esDeprecations$clust2.concat(null==esDeprecations?void 0:esDeprecations.indices))&&void 0!==_esDeprecations$clust?_esDeprecations$clust:[],criticalDeprecations=allDeprecations.filter(deprecation=>"critical"===deprecation.level);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,{"data-test-subj":"esStatsPanel",hasShadow:!1,hasBorder:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"baseline"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,es_stats_i18nTexts.statsTitle))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,es_stats_extends({},Object(kibanaReact_public_.reactRouterNavigate)(history,"/es_deprecations/cluster"),{"data-test-subj":"esDeprecationsLink"}),es_stats_i18nTexts.viewDeprecationsLink))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiStat,{"data-test-subj":"totalDeprecations",title:error?"--":allDeprecations.length,description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("span",null,es_stats_i18nTexts.totalDeprecationsTitle)," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIconTip,{content:es_stats_i18nTexts.getTotalDeprecationsTooltip(null!==(_esDeprecations$clust3=null==esDeprecations?void 0:esDeprecations.cluster.length)&&void 0!==_esDeprecations$clust3?_esDeprecations$clust3:0,null!==(_esDeprecations$indic=null==esDeprecations?void 0:esDeprecations.indices.length)&&void 0!==_esDeprecations$indic?_esDeprecations$indic:0),position:"right"})),isLoading:isLoading})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiStat,{"data-test-subj":"criticalDeprecations",title:error?"--":criticalDeprecations.length,description:es_stats_i18nTexts.criticalDeprecationsTitle,titleColor:"danger",isLoading:isLoading},error&&external_kbnSharedDeps_React_default.a.createElement(EsStatsErrors,{error:error})))))},deprecation_logging_toggle_i18nTexts={toggleErrorLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.overviewTab.steps.deprecationLogsStep.enableDeprecationLoggingToggleSwitch.errorLabel",{defaultMessage:"Could not load logging state"}),toggleLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.overviewTab.steps.deprecationLogsStep.enableDeprecationLoggingToggleSwitch.enabledLabel",{defaultMessage:"Enable deprecation logging"}),enabledMessage:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.overviewTab.steps.deprecationLogsStep.enableDeprecationLoggingToggleSwitch.enabledToastMessage",{defaultMessage:"Log deprecated actions."}),disabledMessage:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.overviewTab.steps.deprecationLogsStep.enableDeprecationLoggingToggleSwitch.disabledToastMessage",{defaultMessage:"Do not log deprecated actions."})},DeprecationLoggingToggle=()=>{const{api:api,notifications:notifications}=useAppContext(),[isEnabled,setIsEnabled]=Object(external_kbnSharedDeps_React_.useState)(!0),[isLoading,setIsLoading]=Object(external_kbnSharedDeps_React_.useState)(!1),[error,setError]=Object(external_kbnSharedDeps_React_.useState)(void 0);if(Object(external_kbnSharedDeps_React_.useEffect)(()=>{!async function(){setIsLoading(!0);const{data:data,error:responseError}=await api.getDeprecationLogging();setIsLoading(!1),responseError?setError(responseError):data&&setIsEnabled(data.isEnabled)}()},[api]),isLoading)return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"l"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{"data-test-subj":"upgradeAssistantDeprecationToggle",label:error?deprecation_logging_toggle_i18nTexts.toggleErrorLabel:deprecation_logging_toggle_i18nTexts.toggleLabel,checked:isEnabled,onChange:async()=>{const newIsEnabledValue=!isEnabled;setIsLoading(!0);const{data:data,error:updateError}=await api.updateDeprecationLogging({isEnabled:newIsEnabledValue});setIsLoading(!1),updateError?setError(updateError):data&&(setIsEnabled(data.isEnabled),notifications.toasts.addSuccess(data.isEnabled?deprecation_logging_toggle_i18nTexts.enabledMessage:deprecation_logging_toggle_i18nTexts.disabledMessage))},disabled:isLoading||Boolean(error)})},overview_i18nTexts={pageTitle:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.pageTitle",{defaultMessage:"Upgrade Assistant"}),getPageDescription:nextMajor=>external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.pageDescription",{defaultMessage:"Prepare to upgrade by identifying deprecated settings and updating your configuration. Enable deprecation logging to see if your are using deprecated features that will not be available after you upgrade to Elastic {nextMajor}.",values:{nextMajor:nextMajor}}),getDeprecationLoggingLabel:href=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.upgradeAssistant.deprecationLoggingDescription",defaultMessage:"Log deprecated actions. {learnMore}",values:{learnMore:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:href,target:"_blank"},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.deprecationLoggingDescription.learnMoreLink",{defaultMessage:"Learn more."}))}}),docLink:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.documentationLinkText",{defaultMessage:"Documentation"})},DeprecationsOverview=({history:history})=>{const{kibanaVersionInfo:kibanaVersionInfo,breadcrumbs:breadcrumbs,docLinks:docLinks,api:api}=useAppContext(),{nextMajor:nextMajor}=kibanaVersionInfo;return Object(external_kbnSharedDeps_React_.useEffect)(()=>{!async function(){await api.sendTelemetryData({overview:!0})}()},[api]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{breadcrumbs.setBreadcrumbs("overview")},[breadcrumbs]),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContent,{"data-test-subj":"overviewPageContent"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageHeader,{pageTitle:overview_i18nTexts.pageTitle,rightSideItems:[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{href:docLinks.links.upgradeAssistant,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},overview_i18nTexts.docLink)]}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContentBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{"data-test-subj":"overviewDetail",grow:!1},external_kbnSharedDeps_React_default.a.createElement("p",null,overview_i18nTexts.getPageDescription(nextMajor+".x"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(LatestMinorBanner,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xl"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,style:{minWidth:400}},external_kbnSharedDeps_React_default.a.createElement(ESDeprecationStats,{history:history}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{helpText:overview_i18nTexts.getDeprecationLoggingLabel(docLinks.links.elasticsearch.deprecationLogging),"data-test-subj":"deprecationLoggingFormRow"},external_kbnSharedDeps_React_default.a.createElement(DeprecationLoggingToggle,null))))))))},App=()=>{const{isReadOnlyMode:isReadOnlyMode}=useAppContext();return isReadOnlyMode?external_kbnSharedDeps_React_default.a.createElement(ComingSoonPrompt,null):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Switch,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{exact:!0,path:"/overview",component:DeprecationsOverview}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{exact:!0,path:"/es_deprecations/:tabName",component:EsDeprecationsContent}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Redirect,{from:"/",to:"/overview"}))},AppWithRouter=({history:history})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Router,{history:history},external_kbnSharedDeps_React_default.a.createElement(App,null)),RootComponent=({i18n:i18n,history:history,...contextValue})=>external_kbnSharedDeps_React_default.a.createElement(i18n.Context,null,external_kbnSharedDeps_React_default.a.createElement(AppContextProvider,{value:contextValue},external_kbnSharedDeps_React_default.a.createElement(AppWithRouter,{history:history})));const apiService=new class{constructor(){var obj,key,value;value=void 0,(key="client")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}useRequest(config){if(!this.client)throw new Error("API service has not be initialized.");return Object(public_.useRequest)(this.client,config)}sendRequest(config){if(!this.client)throw new Error("API service has not be initialized.");return Object(public_.sendRequest)(this.client,config)}setup(httpClient){this.client=httpClient}useLoadUpgradeStatus(){return this.useRequest({path:API_BASE_PATH+"/status",method:"get"})}async sendTelemetryData(telemetryData){return await this.sendRequest({path:API_BASE_PATH+"/stats/ui_open",method:"put",body:JSON.stringify(telemetryData)})}async getDeprecationLogging(){return await this.sendRequest({path:API_BASE_PATH+"/deprecation_logging",method:"get"})}async updateDeprecationLogging(loggingData){return await this.sendRequest({path:API_BASE_PATH+"/deprecation_logging",method:"put",body:JSON.stringify(loggingData)})}async updateIndexSettings(indexName,settings){return await this.sendRequest({path:`${API_BASE_PATH}/${indexName}/index_settings`,method:"post",body:{settings:JSON.stringify(settings)}})}};function breadcrumbs_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const breadcrumbs_i18nTexts={breadcrumbs:{overview:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.breadcrumb.overviewLabel",{defaultMessage:"Upgrade Assistant"}),esDeprecations:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.upgradeAssistant.breadcrumb.esDeprecationsLabel",{defaultMessage:"Elasticsearch deprecations"})}};const breadcrumbService=new class{constructor(){breadcrumbs_defineProperty(this,"breadcrumbs",{overview:[{text:breadcrumbs_i18nTexts.breadcrumbs.overview}],esDeprecations:[{text:breadcrumbs_i18nTexts.breadcrumbs.overview,href:"/"},{text:breadcrumbs_i18nTexts.breadcrumbs.esDeprecations}]}),breadcrumbs_defineProperty(this,"setBreadcrumbsHandler",void 0)}setup(setBreadcrumbsHandler){this.setBreadcrumbsHandler=setBreadcrumbsHandler}setBreadcrumbs(type){if(!this.setBreadcrumbsHandler)throw new Error("Breadcrumb service has not been initialized");const newBreadcrumbs=this.breadcrumbs[type]?[...this.breadcrumbs[type]]:[...this.breadcrumbs.home];this.setBreadcrumbsHandler(newBreadcrumbs)}};async function mountManagementSection(coreSetup,isCloudEnabled,params,kibanaVersionInfo){const[{i18n:i18n,docLinks:docLinks,notifications:notifications,application:application}]=await coreSetup.getStartServices(),{element:element,history:history,setBreadcrumbs:setBreadcrumbs}=params,{http:http}=coreSetup;return apiService.setup(http),breadcrumbService.setup(setBreadcrumbs),(deps=>{const{element:element,...appDependencies}=deps;return Object(external_kbnSharedDeps_ReactDom_.render)(external_kbnSharedDeps_React_default.a.createElement(RootComponent,appDependencies),element),()=>{Object(external_kbnSharedDeps_ReactDom_.unmountComponentAtNode)(element)}})({element:element,isCloudEnabled:isCloudEnabled,http:http,i18n:i18n,docLinks:docLinks,kibanaVersionInfo:kibanaVersionInfo,notifications:notifications,isReadOnlyMode:!0,history:history,api:apiService,breadcrumbs:breadcrumbService,getUrlForApp:application.getUrlForApp})}}}]);