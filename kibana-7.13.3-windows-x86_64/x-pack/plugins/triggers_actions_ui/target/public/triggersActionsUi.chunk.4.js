/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[4],{113:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(114);case"v7light":return __webpack_require__(116);case"v8dark":return __webpack_require__(118);case"v8light":return __webpack_require__(120)}},114:function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(115);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},115:function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".connectorEditFlyoutTabs{margin-bottom:-24px}\n",""]),module.exports=exports},116:function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(117);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},117:function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".connectorEditFlyoutTabs{margin-bottom:-24px}\n",""]),module.exports=exports},118:function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(119);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},119:function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".connectorEditFlyoutTabs{margin-bottom:-24px}\n",""]),module.exports=exports},120:function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(121);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},121:function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".connectorEditFlyoutTabs{margin-bottom:-24px}\n",""]),module.exports=exports},43:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"EditConectorTabs",(function(){return EditConectorTabs})),__webpack_require__.d(__webpack_exports__,"ConnectorEditFlyout",(function(){return ConnectorEditFlyout})),__webpack_require__.d(__webpack_exports__,"default",(function(){return ConnectorEditFlyout}));var external_kbnSharedDeps_React_=__webpack_require__(1),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(52),external_kbnSharedDeps_ElasticEui_=__webpack_require__(15),external_kbnSharedDeps_KbnI18n_=__webpack_require__(0),Option=__webpack_require__(89),action_connector_form=__webpack_require__(94),pipeable=__webpack_require__(91);const TestConnectorForm=({connector:connector,executeEnabled:executeEnabled,executionResult:executionResult,actionParams:actionParams,setActionParams:setActionParams,onExecutAction:onExecutAction,isExecutingAction:isExecutingAction,actionTypeRegistry:actionTypeRegistry})=>{const actionTypeModel=actionTypeRegistry.get(connector.actionTypeId),ParamsFieldsComponent=actionTypeModel.actionParamsFields,actionErrors=null==actionTypeModel?void 0:actionTypeModel.validateParams(actionParams).errors,hasErrors=!!Object.values(actionErrors).find(errors=>errors.length>0),steps=[{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.createActionHeader",{defaultMessage:"Create an action"}),children:ParamsFieldsComponent?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiErrorBoundary,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Suspense,{fallback:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"m"})))},external_kbnSharedDeps_React_default.a.createElement(ParamsFieldsComponent,{actionParams:actionParams,index:0,errors:actionErrors,editAction:(field,value)=>setActionParams({...actionParams,[field]:value}),messageVariables:[],actionConnector:connector}))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.testConnectorForm.noActionParametersRequiredText",defaultMessage:"This Connector does not require any Action Parameter."})))},{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.runTestHeader",{defaultMessage:"Run the test"}),children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,executeEnabled?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{iconType:"alert",color:"warning"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Save your changes before testing the connector.",id:"xpack.triggersActionsUI.sections.testConnectorForm.executeTestDisabled"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{iconType:"play",isLoading:isExecutingAction,isDisabled:!executeEnabled||hasErrors||isExecutingAction,"data-test-subj":"executeActionButton",onClick:onExecutAction},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Run",id:"xpack.triggersActionsUI.sections.testConnectorForm.executeTestButton"}))))},{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.testResultsHeader",{defaultMessage:"Results"}),children:Object(pipeable.pipe)(executionResult,Object(Option.map)(result=>"ok"===result.status?external_kbnSharedDeps_React_default.a.createElement(SuccessfulExecution,null):external_kbnSharedDeps_React_default.a.createElement(FailedExecussion,{executionResult:result})),Object(Option.getOrElse)(()=>external_kbnSharedDeps_React_default.a.createElement(AwaitingExecution,null)))}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSteps,{steps:steps})},AwaitingExecution=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{"data-test-subj":"executionAwaiting"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"When you run the test, the results will show up here.",id:"xpack.triggersActionsUI.sections.testConnectorForm.awaitingExecutionDescription"}))),SuccessfulExecution=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.executionSuccessfulTitle",{defaultMessage:"Test was successful",values:{}}),color:"success","data-test-subj":"executionSuccessfulResult",iconType:"check"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Ensure the results are what you expect.",id:"xpack.triggersActionsUI.sections.testConnectorForm.executionSuccessfulDescription"}))),FailedExecussion=({executionResult:{message:message,serviceMessage:serviceMessage}})=>{const items=[{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.executionFailureDescription",{defaultMessage:"The following error was found:"}),description:null!=message?message:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.executionFailureUnknownReason",{defaultMessage:"Unknown reason"})}];return serviceMessage&&items.push({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.executionFailureAdditionalDetails",{defaultMessage:"Details:"}),description:serviceMessage}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.executionFailureTitle",{defaultMessage:"Test failed to run"}),"data-test-subj":"executionFailureResult",color:"danger",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse",listItems:items}))};var connector_reducer=__webpack_require__(95),action_connector_api=__webpack_require__(25),lib_capabilities=__webpack_require__(84),common=__webpack_require__(10),kibana=(__webpack_require__(113),__webpack_require__(72)),value_validators=__webpack_require__(5);let EditConectorTabs;!function(EditConectorTabs){EditConectorTabs.Configuration="configuration",EditConectorTabs.Test="test"}(EditConectorTabs||(EditConectorTabs={}));const ConnectorEditFlyout=({initialConnector:initialConnector,onClose:onClose,tab:tab=EditConectorTabs.Configuration,reloadConnectors:reloadConnectors,consumer:consumer,actionTypeRegistry:actionTypeRegistry})=>{const{http:http,notifications:{toasts:toasts},docLinks:docLinks,application:{capabilities:capabilities}}=Object(kibana.b)().services,getConnectorWithoutSecrets=()=>({...initialConnector,secrets:{}}),canSave=Object(lib_capabilities.d)(capabilities),reducer=Object(connector_reducer.a)(),[{connector:connector},dispatch]=Object(external_kbnSharedDeps_React_.useReducer)(reducer,{connector:getConnectorWithoutSecrets()}),[isSaving,setIsSaving]=Object(external_kbnSharedDeps_React_.useState)(!1),[selectedTab,setTab]=Object(external_kbnSharedDeps_React_.useState)(tab),[hasChanges,setHasChanges]=Object(external_kbnSharedDeps_React_.useState)(!1),setConnector=value=>{dispatch({command:{type:"setConnector"},payload:{key:"connector",value:value}})},[testExecutionActionParams,setTestExecutionActionParams]=Object(external_kbnSharedDeps_React_.useState)({}),[testExecutionResult,setTestExecutionResult]=Object(external_kbnSharedDeps_React_.useState)(Option.none),[isExecutingAction,setIsExecutinAction]=Object(external_kbnSharedDeps_React_.useState)(!1),handleSetTab=Object(external_kbnSharedDeps_React_.useCallback)(()=>setTab(prevTab=>prevTab===EditConectorTabs.Configuration?EditConectorTabs.Test:(testExecutionResult!==Option.none&&setTestExecutionResult(Option.none),EditConectorTabs.Configuration)),[testExecutionResult]),closeFlyout=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setConnector(getConnectorWithoutSecrets()),setHasChanges(!1),setTestExecutionResult(Option.none),onClose()},[onClose]),actionTypeModel=actionTypeRegistry.get(connector.actionTypeId),{configErrors:configErrors,connectorBaseErrors:connectorBaseErrors,connectorErrors:connectorErrors,secretsErrors:secretsErrors}=connector.isPreconfigured?{configErrors:{},connectorBaseErrors:{},connectorErrors:{},secretsErrors:{}}:Object(action_connector_form.b)(connector,actionTypeModel),hasErrors=!!Object.keys(connectorErrors).find(errorKey=>connectorErrors[errorKey].length>=1),flyoutTitle=connector.isPreconfigured?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",{id:"flyoutTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"{connectorName}",id:"xpack.triggersActionsUI.sections.preconfiguredConnectorForm.flyoutTitle",values:{connectorName:initialConnector.name}})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBetaBadge,{label:"Preconfigured","data-test-subj":"preconfiguredBadge",tooltipContent:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.preconfiguredConnectorForm.tooltipContent",{defaultMessage:"This connector is preconfigured and cannot be edited"})}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"{actionDescription}",id:"xpack.triggersActionsUI.sections.editConnectorForm.actionTypeDescription",values:{actionDescription:actionTypeModel.selectMessage}}))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",{id:"flyoutTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Edit connector",id:"xpack.triggersActionsUI.sections.editConnectorForm.flyoutPreconfiguredTitle"}))),onSaveClicked=async(closeAfterSave=!0)=>{if(hasErrors)return void setConnector(Object(value_validators.b)(connector,configErrors,secretsErrors,connectorBaseErrors));setIsSaving(!0);const savedAction=await(async()=>await Object(action_connector_api.f)({http:http,connector:connector,id:connector.id}).then(savedConnector=>(toasts.addSuccess(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.editConnectorForm.updateSuccessNotificationText",{defaultMessage:"Updated '{connectorName}'",values:{connectorName:savedConnector.name}})),savedConnector)).catch(errorRes=>{var _errorRes$body$messag,_errorRes$body;toasts.addDanger(null!==(_errorRes$body$messag=null===(_errorRes$body=errorRes.body)||void 0===_errorRes$body?void 0:_errorRes$body.message)&&void 0!==_errorRes$body$messag?_errorRes$body$messag:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.editConnectorForm.updateErrorNotificationText",{defaultMessage:"Cannot update a connector."}))}))();setIsSaving(!1),savedAction&&(setHasChanges(!1),closeAfterSave&&closeFlyout(),reloadConnectors&&reloadConnectors())};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyout,{onClose:closeFlyout,"aria-labelledby":"flyoutActionEditTitle",size:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutHeader,{hasBorder:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},actionTypeModel?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:actionTypeModel.iconClass,size:"m"})):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,flyoutTitle)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTabs,{className:"connectorEditFlyoutTabs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTab,{onClick:handleSetTab,"data-test-subj":"configureConnectorTab",isSelected:EditConectorTabs.Configuration===selectedTab},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.editConnectorForm.tabText",{defaultMessage:"Configuration"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTab,{onClick:handleSetTab,"data-test-subj":"testConnectorTab",isSelected:EditConectorTabs.Test===selectedTab},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.tabText",{defaultMessage:"Test"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutBody,null,selectedTab===EditConectorTabs.Configuration?connector.isPreconfigured?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.editConnectorForm.descriptionText",{defaultMessage:"This connector is readonly."})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:docLinks.links.alerting.preconfiguredConnectors,target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.editConnectorForm.preconfiguredHelpLabel",defaultMessage:"Learn more about preconfigured connectors."}))):external_kbnSharedDeps_React_default.a.createElement(action_connector_form.a,{connector:connector,errors:connectorErrors,dispatch:changes=>{setHasChanges(!0),setTestExecutionResult(Option.none),dispatch(changes)},actionTypeRegistry:actionTypeRegistry,consumer:consumer}):external_kbnSharedDeps_React_default.a.createElement(TestConnectorForm,{connector:connector,executeEnabled:!hasChanges,actionParams:testExecutionActionParams,setActionParams:setTestExecutionActionParams,onExecutAction:()=>(setIsExecutinAction(!0),Object(action_connector_api.c)({id:connector.id,params:testExecutionActionParams,http:http}).then(result=>(setIsExecutinAction(!1),setTestExecutionResult(Object(Option.some)(result)),result)).catch(ex=>{const result=Object(common.isActionTypeExecutorResult)(ex)?ex:{actionId:connector.id,status:"error",message:ex.message};return setIsExecutinAction(!1),setTestExecutionResult(Object(Option.some)(result)),result})),isExecutingAction:isExecutingAction,executionResult:testExecutionResult,actionTypeRegistry:actionTypeRegistry})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutFooter,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:closeFlyout,"data-test-subj":"cancelSaveEditedConnectorButton"},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.editConnectorForm.cancelButtonLabel",{defaultMessage:"Cancel"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},canSave&&actionTypeModel&&!connector.isPreconfigured?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{color:"secondary","data-test-subj":"saveEditedActionButton",isLoading:isSaving||isExecutingAction,onClick:async()=>{await onSaveClicked(!1)}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.editConnectorForm.saveButtonLabel",defaultMessage:"Save"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{fill:!0,color:"secondary","data-test-subj":"saveAndCloseEditedActionButton",type:"submit",isLoading:isSaving||isExecutingAction,onClick:async()=>{await onSaveClicked()}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.editConnectorForm.saveAndCloseButtonLabel",defaultMessage:"Save & close"})))):null)))))}},72:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return public_.KibanaContextProvider})),__webpack_require__.d(__webpack_exports__,"b",(function(){return useTypedKibana}));var public_=__webpack_require__(51);const useTypedKibana=()=>Object(public_.useKibana)()},88:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SectionLoading}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_elastic_eui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(15);const SectionLoading=({children:children})=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiEmptyPrompt,{title:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiLoadingSpinner,{size:"xl"}),body:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiText,{color:"subdued"},children),"data-test-subj":"sectionLoading"})},94:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getConnectorErrors})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ActionConnectorForm}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_elastic_eui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(15),_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(52),_lib_capabilities__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(84),_common_lib_kibana__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(72),_components_section_loading__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(88);function getConnectorErrors(connector,actionTypeModel){const connectorValidationResult=null==actionTypeModel?void 0:actionTypeModel.validateConnector(connector),configErrors=connectorValidationResult.config?connectorValidationResult.config.errors:{},secretsErrors=connectorValidationResult.secrets?connectorValidationResult.secrets.errors:{},connectorBaseErrors=function(actionObject){const validationResult={errors:{}},verrors={name:new Array};return validationResult.errors=verrors,actionObject.name||verrors.name.push(_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__.i18n.translate("xpack.triggersActionsUI.sections.actionConnectorForm.error.requiredNameText",{defaultMessage:"Name is required."})),validationResult}(connector).errors;return{configErrors:configErrors,secretsErrors:secretsErrors,connectorBaseErrors:connectorBaseErrors,connectorErrors:{...configErrors,...secretsErrors,...connectorBaseErrors}}}const ActionConnectorForm=({connector:connector,dispatch:dispatch,actionTypeName:actionTypeName,serverError:serverError,errors:errors,actionTypeRegistry:actionTypeRegistry,consumer:consumer})=>{const{docLinks:docLinks,application:{capabilities:capabilities}}=Object(_common_lib_kibana__WEBPACK_IMPORTED_MODULE_5__.b)().services,canSave=Object(_lib_capabilities__WEBPACK_IMPORTED_MODULE_4__.d)(capabilities),setActionProperty=(key,value)=>{dispatch({command:{type:"setProperty"},payload:{key:key,value:value}})},actionTypeRegistered=actionTypeRegistry.get(connector.actionTypeId);if(!actionTypeRegistered)return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiCallOut,{title:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__.i18n.translate("xpack.triggersActionsUI.sections.actionConnectorForm.actions.connectorTypeConfigurationWarningTitleText",{defaultMessage:"Connector type not registered"}),color:"warning",iconType:"help"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiText,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionConnectorForm.actions.connectorTypeConfigurationWarningDescriptionText",defaultMessage:"To create this connector, you must configure at least one {connectorType} account. {docLink}",values:{connectorType:null!=actionTypeName?actionTypeName:connector.actionTypeId,docLink:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiLink,{href:docLinks.links.alerting.actionTypes,target:"_blank"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionConnectorForm.actions.actionConfigurationWarningHelpLinkText",defaultMessage:"Learn more."}))}})))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiSpacer,null));const FieldsComponent=actionTypeRegistered.actionConnectorFields;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiForm,{isInvalid:!!serverError,error:null==serverError?void 0:serverError.body.message},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiFormRow,{id:"actionName",fullWidth:!0,label:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionConnectorForm.actionNameLabel",defaultMessage:"Connector name"}),isInvalid:errors.name.length>0&&void 0!==connector.name,error:errors.name},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiFieldText,{fullWidth:!0,readOnly:!canSave,isInvalid:errors.name.length>0&&void 0!==connector.name,name:"name",placeholder:"Untitled","data-test-subj":"nameInput",value:connector.name||"",onChange:e=>{setActionProperty("name",e.target.value)},onBlur:()=>{connector.name||setActionProperty("name","")}})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiSpacer,{size:"m"}),null!==FieldsComponent?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiTitle,{size:"xxs"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h4",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionConnectorForm.connectorSettingsLabel",defaultMessage:"Connector settings"}))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiSpacer,{size:"s"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiErrorBoundary,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Suspense,{fallback:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_section_loading__WEBPACK_IMPORTED_MODULE_6__.a,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionConnectorForm.loadingConnectorSettingsDescription",defaultMessage:"Loading connector settings…"}))},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FieldsComponent,{action:connector,errors:errors,readOnly:!canSave,editActionConfig:(key,value)=>{dispatch({command:{type:"setConfigProperty"},payload:{key:key,value:value}})},editActionSecrets:(key,value)=>{dispatch({command:{type:"setSecretsProperty"},payload:{key:key,value:value}})},consumer:consumer})))):null)}},95:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createConnectorReducer}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3);const createConnectorReducer=()=>(state,action)=>{const{connector:connector}=state;switch(action.command.type){case"setConnector":{const{key:key,value:value}=action.payload;return"connector"===key?{...state,connector:value}:state}case"setProperty":{const{key:key,value:value}=action.payload;return Object(lodash__WEBPACK_IMPORTED_MODULE_0__.isEqual)(connector[key],value)?state:{...state,connector:{...connector,[key]:value}}}case"setConfigProperty":{const{key:key,value:value}=action.payload;return Object(lodash__WEBPACK_IMPORTED_MODULE_0__.isEqual)(connector.config[key],value)?state:{...state,connector:{...connector,config:{...connector.config,[key]:value}}}}case"setSecretsProperty":{const{key:key,value:value}=action.payload;return Object(lodash__WEBPACK_IMPORTED_MODULE_0__.isEqual)(connector.secrets[key],value)?state:{...state,connector:{...connector,secrets:{...connector.secrets,[key]:value}}}}}}}}]);