/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[38],{281:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return WebhookActionConnectorFields}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(52),_elastic_eui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(15),_kbn_i18n__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0);const HTTP_VERBS=["post","put"],WebhookActionConnectorFields=({action:action,editActionConfig:editActionConfig,editActionSecrets:editActionSecrets,errors:errors,readOnly:readOnly})=>{const{user:user,password:password}=action.secrets,{method:method,url:url,headers:headers,hasAuth:hasAuth}=action.config,[httpHeaderKey,setHttpHeaderKey]=Object(react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),[httpHeaderValue,setHttpHeaderValue]=Object(react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),[hasHeaders,setHasHeaders]=Object(react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1);Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{action.id||editActionConfig("hasAuth",!0)},[]),method||editActionConfig("method","post");const headerErrors={keyHeader:new Array,valueHeader:new Array};!httpHeaderKey&&httpHeaderValue&&headerErrors.keyHeader.push(_kbn_i18n__WEBPACK_IMPORTED_MODULE_3__.i18n.translate("xpack.triggersActionsUI.sections.addAction.webhookAction.error.requiredHeaderKeyText",{defaultMessage:"Key is required."})),httpHeaderKey&&!httpHeaderValue&&headerErrors.valueHeader.push(_kbn_i18n__WEBPACK_IMPORTED_MODULE_3__.i18n.translate("xpack.triggersActionsUI.sections.addAction.webhookAction.error.requiredHeaderValueText",{defaultMessage:"Value is required."}));const hasHeaderErrors=headerErrors.keyHeader.length>0||headerErrors.valueHeader.length>0;let headerControl;hasHeaders&&(headerControl=react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiTitle,{size:"xxs"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h5",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage,{defaultMessage:"Add header",id:"xpack.triggersActionsUI.components.builtinActionTypes.webhookAction.addHeader"}))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiSpacer,{size:"m"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFlexGroup,{gutterSize:"s",alignItems:"flexStart"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFlexItem,{grow:!1},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFormRow,{id:"webhookHeaderKey",fullWidth:!0,error:headerErrors.keyHeader,isInvalid:hasHeaderErrors&&void 0!==httpHeaderKey,label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_3__.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.webhookAction.keyTextFieldLabel",{defaultMessage:"Key"})},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFieldText,{fullWidth:!0,isInvalid:hasHeaderErrors&&void 0!==httpHeaderKey,name:"keyHeader",readOnly:readOnly,value:httpHeaderKey,"data-test-subj":"webhookHeadersKeyInput",onChange:e=>{setHttpHeaderKey(e.target.value)}}))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFlexItem,{grow:!1},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFormRow,{id:"webhookHeaderValue",fullWidth:!0,error:headerErrors.valueHeader,isInvalid:hasHeaderErrors&&void 0!==httpHeaderValue,label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_3__.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.webhookAction.valueTextFieldLabel",{defaultMessage:"Value"})},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFieldText,{fullWidth:!0,isInvalid:hasHeaderErrors&&void 0!==httpHeaderValue,name:"valueHeader",readOnly:readOnly,value:httpHeaderValue,"data-test-subj":"webhookHeadersValueInput",onChange:e=>{setHttpHeaderValue(e.target.value)}}))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFlexItem,{grow:!1},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFormRow,{hasEmptyLabelSpace:!0},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiButtonEmpty,{isDisabled:hasHeaders&&(hasHeaderErrors||!httpHeaderKey||!httpHeaderValue),"data-test-subj":"webhookAddHeaderButton",onClick:()=>function(){if(headers&&Object.keys(headers).find(key=>key===httpHeaderKey))return;const updatedHeaders=headers?{...headers,[httpHeaderKey]:httpHeaderValue}:{[httpHeaderKey]:httpHeaderValue};editActionConfig("headers",updatedHeaders),setHttpHeaderKey(""),setHttpHeaderValue("")}()},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage,{defaultMessage:"Add",id:"xpack.triggersActionsUI.components.builtinActionTypes.webhookAction.addHeaderButton"})))))));const headersList=Object.keys(headers||{}).map(key=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFlexGroup,{key:key,"data-test-subj":"webhookHeaderText",gutterSize:"s"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFlexItem,{grow:!1},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiButtonIcon,{"aria-label":_kbn_i18n__WEBPACK_IMPORTED_MODULE_3__.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.webhookAction.deleteHeaderButton",{defaultMessage:"Delete",description:"Delete HTTP header"}),iconType:"trash",color:"danger",onClick:()=>function(keyToRemove){const updatedHeaders=Object.keys(headers).filter(key=>key!==keyToRemove).reduce((headerToRemove,key)=>(headerToRemove[key]=headers[key],headerToRemove),{});editActionConfig("headers",updatedHeaders)}(key)})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFlexItem,{grow:!1},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiDescriptionList,{compressed:!0},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiDescriptionListTitle,null,key),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiDescriptionListDescription,null,headers[key])))));return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFlexGroup,{justifyContent:"spaceBetween"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFlexItem,{grow:!1},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFormRow,{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_3__.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.webhookAction.methodTextFieldLabel",{defaultMessage:"Method"})},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiSelect,{name:"method",value:method||"post",disabled:readOnly,"data-test-subj":"webhookMethodSelect",options:HTTP_VERBS.map(verb=>({text:verb.toUpperCase(),value:verb})),onChange:e=>{editActionConfig("method",e.target.value)}}))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFlexItem,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFormRow,{id:"url",fullWidth:!0,error:errors.url,isInvalid:errors.url.length>0&&void 0!==url,label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_3__.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.webhookAction.urlTextFieldLabel",{defaultMessage:"URL"})},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFieldText,{name:"url",isInvalid:errors.url.length>0&&void 0!==url,fullWidth:!0,readOnly:readOnly,value:url||"","data-test-subj":"webhookUrlText",onChange:e=>{editActionConfig("url",e.target.value)},onBlur:()=>{url||editActionConfig("url","")}})))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFlexGroup,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFlexItem,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiSpacer,{size:"m"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiTitle,{size:"xxs"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h4",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.webhookAction.authenticationLabel",defaultMessage:"Authentication"}))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiSpacer,{size:"s"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiSwitch,{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_3__.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.webhookAction.hasAuthSwitchLabel",{defaultMessage:"Require authentication for this webhook"}),disabled:readOnly,checked:hasAuth,onChange:e=>{editActionConfig("hasAuth",e.target.checked),e.target.checked||(editActionSecrets("user",null),editActionSecrets("password",null))}}))),hasAuth?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,function(isCreate){if(isCreate)return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiSpacer,{size:"s"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiText,{size:"s","data-test-subj":"rememberValuesMessage"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.webhookAction.rememberValuesLabel",defaultMessage:"Remember these values. You must reenter them each time you edit the connector."})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiSpacer,{size:"s"}));return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiSpacer,{size:"m"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiCallOut,{size:"s",iconType:"iInCircle","data-test-subj":"reenterValuesMessage",title:_kbn_i18n__WEBPACK_IMPORTED_MODULE_3__.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.webhookAction.reenterValuesLabel",{defaultMessage:"Username and password are encrypted. Please reenter values for these fields."})}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiSpacer,{size:"m"}))}(!action.id),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFlexGroup,{justifyContent:"spaceBetween"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFlexItem,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFormRow,{id:"webhookUser",fullWidth:!0,error:errors.user,isInvalid:errors.user.length>0&&void 0!==user,label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_3__.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.webhookAction.userTextFieldLabel",{defaultMessage:"Username"})},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFieldText,{fullWidth:!0,isInvalid:errors.user.length>0&&void 0!==user,name:"user",readOnly:readOnly,value:user||"","data-test-subj":"webhookUserInput",onChange:e=>{editActionSecrets("user",e.target.value)},onBlur:()=>{user||editActionSecrets("user","")}}))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFlexItem,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFormRow,{id:"webhookPassword",fullWidth:!0,error:errors.password,isInvalid:errors.password.length>0&&void 0!==password,label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_3__.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.webhookAction.passwordTextFieldLabel",{defaultMessage:"Password"})},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFieldPassword,{fullWidth:!0,name:"password",readOnly:readOnly,isInvalid:errors.password.length>0&&void 0!==password,value:password||"","data-test-subj":"webhookPasswordInput",onChange:e=>{editActionSecrets("password",e.target.value)},onBlur:()=>{password||editActionSecrets("password","")}}))))):null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiSpacer,{size:"m"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiSwitch,{"data-test-subj":"webhookViewHeadersSwitch",disabled:readOnly,label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_3__.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.webhookAction.viewHeadersSwitch",{defaultMessage:"Add HTTP header"}),checked:hasHeaders,onChange:()=>(setHasHeaders(!hasHeaders),void(hasHeaders||headers||editActionConfig("headers",{})))}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiSpacer,{size:"m"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,Object.keys(headers||{}).length>0?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiSpacer,{size:"m"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiTitle,{size:"xxs"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h5",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage,{defaultMessage:"Headers in use",id:"xpack.triggersActionsUI.components.builtinActionTypes.webhookAction.httpHeadersTitle"}))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiSpacer,{size:"s"}),headersList):null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiSpacer,{size:"m"}),hasHeaders&&headerControl,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiSpacer,{size:"m"})))}}}]);