/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[12],Array(43).concat([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"EditConectorTabs",(function(){return EditConectorTabs})),__webpack_require__.d(__webpack_exports__,"ConnectorEditFlyout",(function(){return ConnectorEditFlyout})),__webpack_require__.d(__webpack_exports__,"default",(function(){return ConnectorEditFlyout}));var external_kbnSharedDeps_React_=__webpack_require__(1),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(52),external_kbnSharedDeps_ElasticEui_=__webpack_require__(15),external_kbnSharedDeps_KbnI18n_=__webpack_require__(0),Option=__webpack_require__(89),action_connector_form=__webpack_require__(94),pipeable=__webpack_require__(91);const TestConnectorForm=({connector:connector,executeEnabled:executeEnabled,executionResult:executionResult,actionParams:actionParams,setActionParams:setActionParams,onExecutAction:onExecutAction,isExecutingAction:isExecutingAction,actionTypeRegistry:actionTypeRegistry})=>{const actionTypeModel=actionTypeRegistry.get(connector.actionTypeId),ParamsFieldsComponent=actionTypeModel.actionParamsFields,actionErrors=null==actionTypeModel?void 0:actionTypeModel.validateParams(actionParams).errors,hasErrors=!!Object.values(actionErrors).find(errors=>errors.length>0),steps=[{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.createActionHeader",{defaultMessage:"Create an action"}),children:ParamsFieldsComponent?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiErrorBoundary,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Suspense,{fallback:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"m"})))},external_kbnSharedDeps_React_default.a.createElement(ParamsFieldsComponent,{actionParams:actionParams,index:0,errors:actionErrors,editAction:(field,value)=>setActionParams({...actionParams,[field]:value}),messageVariables:[],actionConnector:connector}))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.testConnectorForm.noActionParametersRequiredText",defaultMessage:"This Connector does not require any Action Parameter."})))},{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.runTestHeader",{defaultMessage:"Run the test"}),children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,executeEnabled?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{iconType:"alert",color:"warning"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Save your changes before testing the connector.",id:"xpack.triggersActionsUI.sections.testConnectorForm.executeTestDisabled"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{iconType:"play",isLoading:isExecutingAction,isDisabled:!executeEnabled||hasErrors||isExecutingAction,"data-test-subj":"executeActionButton",onClick:onExecutAction},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Run",id:"xpack.triggersActionsUI.sections.testConnectorForm.executeTestButton"}))))},{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.testResultsHeader",{defaultMessage:"Results"}),children:Object(pipeable.pipe)(executionResult,Object(Option.map)(result=>"ok"===result.status?external_kbnSharedDeps_React_default.a.createElement(SuccessfulExecution,null):external_kbnSharedDeps_React_default.a.createElement(FailedExecussion,{executionResult:result})),Object(Option.getOrElse)(()=>external_kbnSharedDeps_React_default.a.createElement(AwaitingExecution,null)))}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSteps,{steps:steps})},AwaitingExecution=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{"data-test-subj":"executionAwaiting"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"When you run the test, the results will show up here.",id:"xpack.triggersActionsUI.sections.testConnectorForm.awaitingExecutionDescription"}))),SuccessfulExecution=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.executionSuccessfulTitle",{defaultMessage:"Test was successful",values:{}}),color:"success","data-test-subj":"executionSuccessfulResult",iconType:"check"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Ensure the results are what you expect.",id:"xpack.triggersActionsUI.sections.testConnectorForm.executionSuccessfulDescription"}))),FailedExecussion=({executionResult:{message:message,serviceMessage:serviceMessage}})=>{const items=[{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.executionFailureDescription",{defaultMessage:"The following error was found:"}),description:null!=message?message:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.executionFailureUnknownReason",{defaultMessage:"Unknown reason"})}];return serviceMessage&&items.push({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.executionFailureAdditionalDetails",{defaultMessage:"Details:"}),description:serviceMessage}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.executionFailureTitle",{defaultMessage:"Test failed to run"}),"data-test-subj":"executionFailureResult",color:"danger",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{textStyle:"reverse",listItems:items}))};var connector_reducer=__webpack_require__(95),action_connector_api=__webpack_require__(25),lib_capabilities=__webpack_require__(84),common=__webpack_require__(10),kibana=(__webpack_require__(113),__webpack_require__(72)),value_validators=__webpack_require__(5);let EditConectorTabs;!function(EditConectorTabs){EditConectorTabs.Configuration="configuration",EditConectorTabs.Test="test"}(EditConectorTabs||(EditConectorTabs={}));const ConnectorEditFlyout=({initialConnector:initialConnector,onClose:onClose,tab:tab=EditConectorTabs.Configuration,reloadConnectors:reloadConnectors,consumer:consumer,actionTypeRegistry:actionTypeRegistry})=>{const{http:http,notifications:{toasts:toasts},docLinks:docLinks,application:{capabilities:capabilities}}=Object(kibana.b)().services,getConnectorWithoutSecrets=()=>({...initialConnector,secrets:{}}),canSave=Object(lib_capabilities.d)(capabilities),reducer=Object(connector_reducer.a)(),[{connector:connector},dispatch]=Object(external_kbnSharedDeps_React_.useReducer)(reducer,{connector:getConnectorWithoutSecrets()}),[isSaving,setIsSaving]=Object(external_kbnSharedDeps_React_.useState)(!1),[selectedTab,setTab]=Object(external_kbnSharedDeps_React_.useState)(tab),[hasChanges,setHasChanges]=Object(external_kbnSharedDeps_React_.useState)(!1),setConnector=value=>{dispatch({command:{type:"setConnector"},payload:{key:"connector",value:value}})},[testExecutionActionParams,setTestExecutionActionParams]=Object(external_kbnSharedDeps_React_.useState)({}),[testExecutionResult,setTestExecutionResult]=Object(external_kbnSharedDeps_React_.useState)(Option.none),[isExecutingAction,setIsExecutinAction]=Object(external_kbnSharedDeps_React_.useState)(!1),handleSetTab=Object(external_kbnSharedDeps_React_.useCallback)(()=>setTab(prevTab=>prevTab===EditConectorTabs.Configuration?EditConectorTabs.Test:(testExecutionResult!==Option.none&&setTestExecutionResult(Option.none),EditConectorTabs.Configuration)),[testExecutionResult]),closeFlyout=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setConnector(getConnectorWithoutSecrets()),setHasChanges(!1),setTestExecutionResult(Option.none),onClose()},[onClose]),actionTypeModel=actionTypeRegistry.get(connector.actionTypeId),{configErrors:configErrors,connectorBaseErrors:connectorBaseErrors,connectorErrors:connectorErrors,secretsErrors:secretsErrors}=connector.isPreconfigured?{configErrors:{},connectorBaseErrors:{},connectorErrors:{},secretsErrors:{}}:Object(action_connector_form.b)(connector,actionTypeModel),hasErrors=!!Object.keys(connectorErrors).find(errorKey=>connectorErrors[errorKey].length>=1),flyoutTitle=connector.isPreconfigured?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",{id:"flyoutTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"{connectorName}",id:"xpack.triggersActionsUI.sections.preconfiguredConnectorForm.flyoutTitle",values:{connectorName:initialConnector.name}}),"â€ƒ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBetaBadge,{label:"Preconfigured","data-test-subj":"preconfiguredBadge",tooltipContent:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.preconfiguredConnectorForm.tooltipContent",{defaultMessage:"This connector is preconfigured and cannot be edited"})}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"{actionDescription}",id:"xpack.triggersActionsUI.sections.editConnectorForm.actionTypeDescription",values:{actionDescription:actionTypeModel.selectMessage}}))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",{id:"flyoutTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Edit connector",id:"xpack.triggersActionsUI.sections.editConnectorForm.flyoutPreconfiguredTitle"}))),onSaveClicked=async(closeAfterSave=!0)=>{if(hasErrors)return void setConnector(Object(value_validators.b)(connector,configErrors,secretsErrors,connectorBaseErrors));setIsSaving(!0);const savedAction=await(async()=>await Object(action_connector_api.f)({http:http,connector:connector,id:connector.id}).then(savedConnector=>(toasts.addSuccess(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.editConnectorForm.updateSuccessNotificationText",{defaultMessage:"Updated '{connectorName}'",values:{connectorName:savedConnector.name}})),savedConnector)).catch(errorRes=>{var _errorRes$body$messag,_errorRes$body;toasts.addDanger(null!==(_errorRes$body$messag=null===(_errorRes$body=errorRes.body)||void 0===_errorRes$body?void 0:_errorRes$body.message)&&void 0!==_errorRes$body$messag?_errorRes$body$messag:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.editConnectorForm.updateErrorNotificationText",{defaultMessage:"Cannot update a connector."}))}))();setIsSaving(!1),savedAction&&(setHasChanges(!1),closeAfterSave&&closeFlyout(),reloadConnectors&&reloadConnectors())};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyout,{onClose:closeFlyout,"aria-labelledby":"flyoutActionEditTitle",size:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutHeader,{hasBorder:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},actionTypeModel?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:actionTypeModel.iconClass,size:"m"})):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,flyoutTitle)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTabs,{className:"connectorEditFlyoutTabs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTab,{onClick:handleSetTab,"data-test-subj":"configureConnectorTab",isSelected:EditConectorTabs.Configuration===selectedTab},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.editConnectorForm.tabText",{defaultMessage:"Configuration"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTab,{onClick:handleSetTab,"data-test-subj":"testConnectorTab",isSelected:EditConectorTabs.Test===selectedTab},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.tabText",{defaultMessage:"Test"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutBody,null,selectedTab===EditConectorTabs.Configuration?connector.isPreconfigured?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.editConnectorForm.descriptionText",{defaultMessage:"This connector is readonly."})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:docLinks.links.alerting.preconfiguredConnectors,target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.editConnectorForm.preconfiguredHelpLabel",defaultMessage:"Learn more about preconfigured connectors."}))):external_kbnSharedDeps_React_default.a.createElement(action_connector_form.a,{connector:connector,errors:connectorErrors,dispatch:changes=>{setHasChanges(!0),setTestExecutionResult(Option.none),dispatch(changes)},actionTypeRegistry:actionTypeRegistry,consumer:consumer}):external_kbnSharedDeps_React_default.a.createElement(TestConnectorForm,{connector:connector,executeEnabled:!hasChanges,actionParams:testExecutionActionParams,setActionParams:setTestExecutionActionParams,onExecutAction:()=>(setIsExecutinAction(!0),Object(action_connector_api.c)({id:connector.id,params:testExecutionActionParams,http:http}).then(result=>(setIsExecutinAction(!1),setTestExecutionResult(Object(Option.some)(result)),result)).catch(ex=>{const result=Object(common.isActionTypeExecutorResult)(ex)?ex:{actionId:connector.id,status:"error",message:ex.message};return setIsExecutinAction(!1),setTestExecutionResult(Object(Option.some)(result)),result})),isExecutingAction:isExecutingAction,executionResult:testExecutionResult,actionTypeRegistry:actionTypeRegistry})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutFooter,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:closeFlyout,"data-test-subj":"cancelSaveEditedConnectorButton"},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.editConnectorForm.cancelButtonLabel",{defaultMessage:"Cancel"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},canSave&&actionTypeModel&&!connector.isPreconfigured?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{color:"secondary","data-test-subj":"saveEditedActionButton",isLoading:isSaving||isExecutingAction,onClick:async()=>{await onSaveClicked(!1)}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.editConnectorForm.saveButtonLabel",defaultMessage:"Save"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{fill:!0,color:"secondary","data-test-subj":"saveAndCloseEditedActionButton",type:"submit",isLoading:isSaving||isExecutingAction,onClick:async()=>{await onSaveClicked()}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.editConnectorForm.saveAndCloseButtonLabel",defaultMessage:"Save & close"})))):null)))))}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return HealthContextProvider})),__webpack_require__.d(__webpack_exports__,"b",(function(){return useHealthContext}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);const defaultHealthContext={loadingHealthCheck:!1,setLoadingHealthCheck:loading=>{throw new Error("setLoadingHealthCheck was not initialized, set it when you invoke the context")}},HealthContext=Object(react__WEBPACK_IMPORTED_MODULE_0__.createContext)(defaultHealthContext),HealthContextProvider=({children:children})=>{const[loading,setLoading]=Object(react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),setLoadingHealthCheck=Object(react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(isLoading=>{setLoading(isLoading)},[]),value=Object(react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>({loadingHealthCheck:loading,setLoadingHealthCheck:setLoadingHealthCheck}),[loading,setLoadingHealthCheck]);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(HealthContext.Provider,{value:value},children)},useHealthContext=()=>{const ctx=Object(react__WEBPACK_IMPORTED_MODULE_0__.useContext)(HealthContext);if(!ctx)throw new Error("HealthContext has not been set.");return ctx}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return withBulkAlertOperations}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_lib_alert_api__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(90),_common_lib_kibana__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(72);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function withBulkAlertOperations(WrappedComponent){return props=>{const{http:http}=Object(_common_lib_kibana__WEBPACK_IMPORTED_MODULE_2__.b)().services;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(WrappedComponent,_extends({},props,{muteAlerts:async items=>Object(_lib_alert_api__WEBPACK_IMPORTED_MODULE_1__.p)({http:http,ids:items.filter(item=>!isAlertMuted(item)).map(item=>item.id)}),unmuteAlerts:async items=>Object(_lib_alert_api__WEBPACK_IMPORTED_MODULE_1__.s)({http:http,ids:items.filter(isAlertMuted).map(item=>item.id)}),enableAlerts:async items=>Object(_lib_alert_api__WEBPACK_IMPORTED_MODULE_1__.g)({http:http,ids:items.filter(isAlertDisabled).map(item=>item.id)}),disableAlerts:async items=>Object(_lib_alert_api__WEBPACK_IMPORTED_MODULE_1__.e)({http:http,ids:items.filter(item=>!isAlertDisabled(item)).map(item=>item.id)}),deleteAlerts:async items=>Object(_lib_alert_api__WEBPACK_IMPORTED_MODULE_1__.c)({http:http,ids:items.map(item=>item.id)}),muteAlert:async alert=>{if(!isAlertMuted(alert))return await Object(_lib_alert_api__WEBPACK_IMPORTED_MODULE_1__.n)({http:http,id:alert.id})},unmuteAlert:async alert=>{if(isAlertMuted(alert))return await Object(_lib_alert_api__WEBPACK_IMPORTED_MODULE_1__.q)({http:http,id:alert.id})},muteAlertInstance:async(alert,instanceId)=>{if(!isAlertInstanceMuted(alert,instanceId))return Object(_lib_alert_api__WEBPACK_IMPORTED_MODULE_1__.o)({http:http,id:alert.id,instanceId:instanceId})},unmuteAlertInstance:async(alert,instanceId)=>{if(isAlertInstanceMuted(alert,instanceId))return Object(_lib_alert_api__WEBPACK_IMPORTED_MODULE_1__.r)({http:http,id:alert.id,instanceId:instanceId})},enableAlert:async alert=>{if(isAlertDisabled(alert))return await Object(_lib_alert_api__WEBPACK_IMPORTED_MODULE_1__.f)({http:http,id:alert.id})},disableAlert:async alert=>{if(!isAlertDisabled(alert))return await Object(_lib_alert_api__WEBPACK_IMPORTED_MODULE_1__.d)({http:http,id:alert.id})},deleteAlert:async alert=>Object(_lib_alert_api__WEBPACK_IMPORTED_MODULE_1__.c)({http:http,ids:[alert.id]}),loadAlert:async alertId=>Object(_lib_alert_api__WEBPACK_IMPORTED_MODULE_1__.h)({http:http,alertId:alertId}),loadAlertState:async alertId=>Object(_lib_alert_api__WEBPACK_IMPORTED_MODULE_1__.k)({http:http,alertId:alertId}),loadAlertInstanceSummary:async alertId=>Object(_lib_alert_api__WEBPACK_IMPORTED_MODULE_1__.j)({http:http,alertId:alertId}),loadAlertTypes:async()=>Object(_lib_alert_api__WEBPACK_IMPORTED_MODULE_1__.l)({http:http}),getHealth:async()=>Object(_lib_alert_api__WEBPACK_IMPORTED_MODULE_1__.a)({http:http})}))}}function isAlertDisabled(alert){return!1===alert.enabled}function isAlertMuted(alert){return!0===alert.muteAll}function isAlertInstanceMuted(alert,instanceId){return alert.mutedInstanceIds.findIndex(muted=>muted===instanceId)>=0}},,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ALERT_STATUS_LICENSE_ERROR})),__webpack_require__.d(__webpack_exports__,"c",(function(){return alertsStatusesTranslationsMapping})),__webpack_require__.d(__webpack_exports__,"b",(function(){return alertsErrorReasonTranslationsMapping}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);const ALERT_STATUS_OK=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertStatusOk",{defaultMessage:"Ok"}),ALERT_STATUS_ACTIVE=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertStatusActive",{defaultMessage:"Active"}),ALERT_STATUS_ERROR=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertStatusError",{defaultMessage:"Error"}),ALERT_STATUS_LICENSE_ERROR=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertStatusLicenseError",{defaultMessage:"License Error"}),alertsStatusesTranslationsMapping={ok:ALERT_STATUS_OK,active:ALERT_STATUS_ACTIVE,error:ALERT_STATUS_ERROR,pending:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertStatusPending",{defaultMessage:"Pending"}),unknown:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertStatusUnknown",{defaultMessage:"Unknown"})},ALERT_ERROR_UNKNOWN_REASON=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertErrorReasonUnknown",{defaultMessage:"An error occurred for unknown reasons."}),alertsErrorReasonTranslationsMapping={read:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertErrorReasonReading",{defaultMessage:"An error occurred when reading the rule."}),decrypt:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertErrorReasonDecrypting",{defaultMessage:"An error occurred when decrypting the rule."}),execute:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertErrorReasonRunning",{defaultMessage:"An error occurred when running the rule."}),unknown:ALERT_ERROR_UNKNOWN_REASON,license:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertErrorReasonLicense",{defaultMessage:"Cannot run rule"})}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return HealthCheck}));var external_kbnSharedDeps_React_=__webpack_require__(1),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),Option=__webpack_require__(89),pipeable=__webpack_require__(91),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(52),external_kbnSharedDeps_ElasticEui_=__webpack_require__(15),external_kbnSharedDeps_KbnI18n_=__webpack_require__(0),health_context=(__webpack_require__(123),__webpack_require__(92)),kibana=__webpack_require__(72),center_justified_spinner=__webpack_require__(26);var alert_api=__webpack_require__(90);const HealthCheck=({children:children,waitForCheck:waitForCheck,inFlyout:inFlyout=!1})=>{const{http:http,docLinks:docLinks}=Object(kibana.b)().services,{setLoadingHealthCheck:setLoadingHealthCheck}=Object(health_context.b)(),[alertingHealth,setAlertingHealth]=external_kbnSharedDeps_React_default.a.useState(Option.none);external_kbnSharedDeps_React_default.a.useEffect(()=>{!async function(){setLoadingHealthCheck(!0);const healthStatus={...await async function({http:http}){return await http.get("/api/triggers_actions_ui/_health")}({http:http}),isSufficientlySecure:!1,hasPermanentEncryptionKey:!1};if(healthStatus.isAlertsAvailable){const alertingHealthResult=await Object(alert_api.a)({http:http});healthStatus.isSufficientlySecure=alertingHealthResult.isSufficientlySecure,healthStatus.hasPermanentEncryptionKey=alertingHealthResult.hasPermanentEncryptionKey}setAlertingHealth(Object(Option.some)(healthStatus)),setLoadingHealthCheck(!1)}()},[http,setLoadingHealthCheck]);const className=inFlyout?"alertingFlyoutHealthCheck":"alertingHealthCheck";return Object(pipeable.pipe)(alertingHealth,Object(Option.fold)(()=>waitForCheck?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(center_justified_spinner.a,null)):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,children),healthCheck=>null!=healthCheck&&healthCheck.isSufficientlySecure&&null!=healthCheck&&healthCheck.hasPermanentEncryptionKey?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,children):healthCheck.isAlertsAvailable?healthCheck.isSufficientlySecure||healthCheck.hasPermanentEncryptionKey?healthCheck.hasPermanentEncryptionKey?external_kbnSharedDeps_React_default.a.createElement(TlsError,{docLinks:docLinks,className:className}):external_kbnSharedDeps_React_default.a.createElement(EncryptionError,{docLinks:docLinks,className:className}):external_kbnSharedDeps_React_default.a.createElement(TlsAndEncryptionError,{docLinks:docLinks,className:className}):external_kbnSharedDeps_React_default.a.createElement(AlertsError,{docLinks:docLinks,className:className})))},EncryptionError=({docLinks:docLinks,className:className})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"actionNeededEmptyPrompt",className:className,titleSize:"xs",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.components.healthCheck.encryptionErrorTitle",defaultMessage:"Encrypted saved objects are not available"})),body:external_kbnSharedDeps_React_default.a.createElement("div",{className:className+"__body"},external_kbnSharedDeps_React_default.a.createElement("p",{role:"banner"},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.components.healthCheck.encryptionErrorBeforeKey",{defaultMessage:"To create a rule, set a value for "}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,"xpack.encryptedSavedObjects.encryptionKey"),external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.components.healthCheck.encryptionErrorAfterKey",{defaultMessage:" in your kibana.yml file and ensure the Encrypted Saved Objects plugin is enabled. "}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:docLinks.links.alerting.generalSettings,external:!0,target:"_blank"},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.components.healthCheck.encryptionErrorAction",{defaultMessage:"Learn how."}))))}),TlsError=({docLinks:docLinks,className:className})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"actionNeededEmptyPrompt",className:className,titleSize:"xs",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.components.healthCheck.tlsErrorTitle",defaultMessage:"You must enable Transport Layer Security"})),body:external_kbnSharedDeps_React_default.a.createElement("div",{className:className+"__body"},external_kbnSharedDeps_React_default.a.createElement("p",{role:"banner"},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.components.healthCheck.tlsError",{defaultMessage:"Alerting relies on API keys, which require TLS between Elasticsearch and Kibana. "}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:docLinks.links.security.kibanaTLS,external:!0,target:"_blank"},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.components.healthCheck.tlsErrorAction",{defaultMessage:"Learn how to enable TLS."}))))}),AlertsError=({docLinks:docLinks,className:className})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"alertsNeededEmptyPrompt",className:className,titleSize:"xs",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.components.healthCheck.alertsErrorTitle",defaultMessage:"You must enable Alerting and Actions"})),body:external_kbnSharedDeps_React_default.a.createElement("div",{className:className+"__body"},external_kbnSharedDeps_React_default.a.createElement("p",{role:"banner"},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.components.healthCheck.alertsError",{defaultMessage:"To create a rule, you must enable the alerting and actions plugins. "}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:docLinks.links.alerting.generalSettings,external:!0,target:"_blank"},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.components.healthCheck.alertsErrorAction",{defaultMessage:"Learn how."}))))}),TlsAndEncryptionError=({docLinks:docLinks,className:className})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"actionNeededEmptyPrompt",className:className,titleSize:"xs",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.components.healthCheck.tlsAndEncryptionErrorTitle",defaultMessage:"Additional setup required"})),body:external_kbnSharedDeps_React_default.a.createElement("div",{className:className+"__body"},external_kbnSharedDeps_React_default.a.createElement("p",{role:"banner"},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.components.healthCheck.tlsAndEncryptionError",{defaultMessage:"You must enable Transport Layer Security between Kibana and Elasticsearch and configure an encryption key in your kibana.yml file. "}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:docLinks.links.alerting.setupPrerequisites,external:!0,target:"_blank"},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.components.healthCheck.tlsAndEncryptionErrorAction",{defaultMessage:"Learn how."}))))})},,,,,,,,,,,,,function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(114);case"v7light":return __webpack_require__(116);case"v8dark":return __webpack_require__(118);case"v8light":return __webpack_require__(120)}},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(115);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".connectorEditFlyoutTabs{margin-bottom:-24px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(117);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".connectorEditFlyoutTabs{margin-bottom:-24px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(119);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".connectorEditFlyoutTabs{margin-bottom:-24px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(121);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".connectorEditFlyoutTabs{margin-bottom:-24px}\n",""]),module.exports=exports},,function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(124);case"v7light":return __webpack_require__(126);case"v8dark":return __webpack_require__(128);case"v8light":return __webpack_require__(130)}},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(125);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".alertingHealthCheck__body{padding-left:32px;padding-right:32px}.alertingFlyoutHealthCheck__body{padding-left:32px;padding-right:32px;margin-top:16px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(127);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".alertingHealthCheck__body{padding-left:32px;padding-right:32px}.alertingFlyoutHealthCheck__body{padding-left:32px;padding-right:32px;margin-top:16px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(129);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".alertingHealthCheck__body{padding-left:32px;padding-right:32px}.alertingFlyoutHealthCheck__body{padding-left:32px;padding-right:32px;margin-top:16px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(131);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".alertingHealthCheck__body{padding-left:32px;padding-right:32px}.alertingFlyoutHealthCheck__body{padding-left:32px;padding-right:32px;margin-top:16px}\n",""]),module.exports=exports},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getAlertingSectionBreadcrumb})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getAlertDetailsBreadcrumb}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2);const getAlertingSectionBreadcrumb=type=>{switch(type){case"connectors":return{text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.connectors.breadcrumbTitle",{defaultMessage:"Connectors"}),href:""+_constants__WEBPACK_IMPORTED_MODULE_1__.h};case"rules":return{text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.rules.breadcrumbTitle",{defaultMessage:"Rules"}),href:""+_constants__WEBPACK_IMPORTED_MODULE_1__.k};default:return{text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.home.breadcrumbTitle",{defaultMessage:"Rules and Connectors"}),href:""+_constants__WEBPACK_IMPORTED_MODULE_1__.i}}},getAlertDetailsBreadcrumb=(id,name)=>({text:name,href:""+_constants__WEBPACK_IMPORTED_MODULE_1__.j.replace(":ruleId",id)})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getCurrentDocTitle}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);const getCurrentDocTitle=page=>{let updatedTitle;switch(page){case"connectors":updatedTitle=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.connectors.breadcrumbTitle",{defaultMessage:"Connectors"});break;case"rules":updatedTitle=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.rules.breadcrumbTitle",{defaultMessage:"Rules"});break;default:updatedTitle=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.home.breadcrumbTitle",{defaultMessage:"Rules and Connectors"})}return updatedTitle}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(216);case"v7light":return __webpack_require__(218);case"v8dark":return __webpack_require__(220);case"v8light":return __webpack_require__(222)}},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(217);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actConnectorsList__tableRowDisabled{background-color:#25262E}.actConnectorsList__tableRowDisabled .actConnectorsList__tableCellDisabled{color:#98A2B3}.actConnectorsList__tableRowDisabled .euiLink+.euiToolTipAnchor{margin-left:4px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(219);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actConnectorsList__tableRowDisabled{background-color:#F5F7FA}.actConnectorsList__tableRowDisabled .actConnectorsList__tableCellDisabled{color:#69707D}.actConnectorsList__tableRowDisabled .euiLink+.euiToolTipAnchor{margin-left:4px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(221);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actConnectorsList__tableRowDisabled{background-color:#25262E}.actConnectorsList__tableRowDisabled .actConnectorsList__tableCellDisabled{color:#98A2B3}.actConnectorsList__tableRowDisabled .euiLink+.euiToolTipAnchor{margin-left:4px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(223);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actConnectorsList__tableRowDisabled{background-color:#F5F7FA}.actConnectorsList__tableRowDisabled .actConnectorsList__tableCellDisabled{color:#69707D}.actConnectorsList__tableRowDisabled .euiLink+.euiToolTipAnchor{margin-left:4px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(225);case"v7light":return __webpack_require__(227);case"v8dark":return __webpack_require__(229);case"v8light":return __webpack_require__(231)}},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(226);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actEmptyConnectorsPrompt__logo+.actEmptyConnectorsPrompt__logo{margin-left:16px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(228);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actEmptyConnectorsPrompt__logo+.actEmptyConnectorsPrompt__logo{margin-left:16px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(230);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actEmptyConnectorsPrompt__logo+.actEmptyConnectorsPrompt__logo{margin-left:16px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(232);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actEmptyConnectorsPrompt__logo+.actEmptyConnectorsPrompt__logo{margin-left:16px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(234);case"v7light":return __webpack_require__(236);case"v8dark":return __webpack_require__(238);case"v8light":return __webpack_require__(240)}},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(235);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actBulkActionPopover__deleteAll .euiButtonEmpty__text{padding-top:4px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(237);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actBulkActionPopover__deleteAll .euiButtonEmpty__text{padding-top:4px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(239);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actBulkActionPopover__deleteAll .euiButtonEmpty__text{padding-top:4px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(241);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actBulkActionPopover__deleteAll .euiButtonEmpty__text{padding-top:4px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(243);case"v7light":return __webpack_require__(245);case"v8dark":return __webpack_require__(247);case"v8light":return __webpack_require__(249)}},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(244);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actCollapsedItemActions .euiContextMenuItem:hover{text-decoration:none}.actCollapsedItemActions__item{padding:12px}.actCollapsedItemActions__delete{display:flex}.actCollapsedItemActions__delete .actCollapsedItemActions__deleteIcon{width:28px;text-align:center}.actCollapsedItemActions__delete .actCollapsedItemActions__deleteLabel{padding-left:8px;padding-top:2px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(246);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actCollapsedItemActions .euiContextMenuItem:hover{text-decoration:none}.actCollapsedItemActions__item{padding:12px}.actCollapsedItemActions__delete{display:flex}.actCollapsedItemActions__delete .actCollapsedItemActions__deleteIcon{width:28px;text-align:center}.actCollapsedItemActions__delete .actCollapsedItemActions__deleteLabel{padding-left:8px;padding-top:2px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(248);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actCollapsedItemActions .euiContextMenuItem:hover{text-decoration:none}.actCollapsedItemActions__item{padding:12px}.actCollapsedItemActions__delete{display:flex}.actCollapsedItemActions__delete .actCollapsedItemActions__deleteIcon{width:28px;text-align:center}.actCollapsedItemActions__delete .actCollapsedItemActions__deleteLabel{padding-left:8px;padding-top:2px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(250);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actCollapsedItemActions .euiContextMenuItem:hover{text-decoration:none}.actCollapsedItemActions__item{padding:12px}.actCollapsedItemActions__delete{display:flex}.actCollapsedItemActions__delete .actCollapsedItemActions__deleteIcon{width:28px;text-align:center}.actCollapsedItemActions__delete .actCollapsedItemActions__deleteLabel{padding-left:8px;padding-top:2px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(252);case"v7light":return __webpack_require__(254);case"v8dark":return __webpack_require__(256);case"v8light":return __webpack_require__(258)}},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(253);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actAlertsList__tableRowDisabled{background-color:#25262E}.actAlertsList__tableRowDisabled .actAlertsList__tableCellDisabled{color:#98A2B3}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(255);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actAlertsList__tableRowDisabled{background-color:#F5F7FA}.actAlertsList__tableRowDisabled .actAlertsList__tableCellDisabled{color:#69707D}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(257);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actAlertsList__tableRowDisabled{background-color:#25262E}.actAlertsList__tableRowDisabled .actAlertsList__tableCellDisabled{color:#98A2B3}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(259);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actAlertsList__tableRowDisabled{background-color:#F5F7FA}.actAlertsList__tableRowDisabled .actAlertsList__tableCellDisabled{color:#69707D}\n",""]),module.exports=exports},,,,,,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"TriggersActionsUIHome",(function(){return TriggersActionsUIHome})),__webpack_require__.d(__webpack_exports__,"default",(function(){return TriggersActionsUIHome}));var external_kbnSharedDeps_React_=__webpack_require__(1),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(54),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(52),external_kbnSharedDeps_ElasticEui_=__webpack_require__(15),constants=__webpack_require__(2),breadcrumb=__webpack_require__(132),doc_title=__webpack_require__(133),lib_capabilities=__webpack_require__(84),external_kbnSharedDeps_KbnI18n_=__webpack_require__(0),external_kbnSharedDeps_Lodash_=__webpack_require__(3),action_connector_api=__webpack_require__(25),connector_add_flyout=__webpack_require__(45),connector_edit_flyout=__webpack_require__(43),kibana=__webpack_require__(72);const DeleteModalConfirmation=({idsToDelete:idsToDelete,apiDeleteCall:apiDeleteCall,onDeleted:onDeleted,onCancel:onCancel,onErrors:onErrors,singleTitle:singleTitle,multipleTitle:multipleTitle,setIsLoadingState:setIsLoadingState})=>{const[deleteModalFlyoutVisible,setDeleteModalVisibility]=Object(external_kbnSharedDeps_React_.useState)(!1);Object(external_kbnSharedDeps_React_.useEffect)(()=>{setDeleteModalVisibility(idsToDelete.length>0)},[idsToDelete]);const{http:http,notifications:{toasts:toasts}}=Object(kibana.b)().services,numIdsToDelete=idsToDelete.length;if(!deleteModalFlyoutVisible)return null;const confirmModalText=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.deleteSelectedIdsConfirmModal.descriptionText",{defaultMessage:"You can't recover {numIdsToDelete, plural, one {a deleted {singleTitle}} other {deleted {multipleTitle}}}.",values:{numIdsToDelete:numIdsToDelete,singleTitle:singleTitle,multipleTitle:multipleTitle}}),confirmButtonText=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.deleteSelectedIdsConfirmModal.deleteButtonLabel",{defaultMessage:"Delete {numIdsToDelete, plural, one {{singleTitle}} other {# {multipleTitle}}} ",values:{numIdsToDelete:numIdsToDelete,singleTitle:singleTitle,multipleTitle:multipleTitle}}),cancelButtonText=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.deleteSelectedIdsConfirmModal.cancelButtonLabel",{defaultMessage:"Cancel"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiConfirmModal,{buttonColor:"danger","data-test-subj":"deleteIdsConfirmation",title:confirmButtonText,onCancel:()=>{setDeleteModalVisibility(!1),onCancel()},onConfirm:async()=>{setDeleteModalVisibility(!1),setIsLoadingState(!0);const{successes:successes,errors:errors}=await apiDeleteCall({ids:idsToDelete,http:http});setIsLoadingState(!1);const numSuccesses=successes.length,numErrors=errors.length;numSuccesses>0&&toasts.addSuccess(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.components.deleteSelectedIdsSuccessNotification.descriptionText",{defaultMessage:"Deleted {numSuccesses, number} {numSuccesses, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numSuccesses:numSuccesses,singleTitle:singleTitle,multipleTitle:multipleTitle}})),numErrors>0&&(toasts.addDanger(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.components.deleteSelectedIdsErrorNotification.descriptionText",{defaultMessage:"Failed to delete {numErrors, number} {numErrors, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numErrors:numErrors,singleTitle:singleTitle,multipleTitle:multipleTitle}})),await onErrors()),await onDeleted(successes)},cancelButtonText:cancelButtonText,confirmButtonText:confirmButtonText},confirmModalText)};var check_action_type_enabled=__webpack_require__(96);__webpack_require__(215),__webpack_require__(224);const EmptyConnectorsPrompt=({onCTAClicked:onCTAClicked})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{"data-test-subj":"createFirstConnectorEmptyPrompt",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"logoSlack",size:"xl",className:"actEmptyConnectorsPrompt__logo"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"logoGmail",size:"xl",className:"actEmptyConnectorsPrompt__logo"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"logoWebhook",size:"xl",className:"actEmptyConnectorsPrompt__logo"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.components.emptyConnectorsPrompt.addConnectorEmptyTitle",defaultMessage:"Create your first connector"})))),body:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.components.emptyConnectorsPrompt.addConnectorEmptyBody",defaultMessage:"Configure email, Slack, Elasticsearch, and third-party services that Kibana runs."})),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{"data-test-subj":"createFirstActionButton",key:"create-action",fill:!0,iconType:"plusInCircle",iconSide:"left",onClick:onCTAClicked},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.components.emptyConnectorsPrompt.addConnectorButtonLabel",defaultMessage:"Create connector"}))});var public_0=__webpack_require__(44),center_justified_spinner=__webpack_require__(26);const ActionsConnectorsList=()=>{const{http:http,notifications:{toasts:toasts},application:{capabilities:capabilities},actionTypeRegistry:actionTypeRegistry}=Object(kibana.b)().services,canDelete=Object(lib_capabilities.b)(capabilities),canExecute=Object(lib_capabilities.c)(capabilities),canSave=Object(lib_capabilities.d)(capabilities),[actionTypesIndex,setActionTypesIndex]=Object(external_kbnSharedDeps_React_.useState)(void 0),[actions,setActions]=Object(external_kbnSharedDeps_React_.useState)([]),[pageIndex,setPageIndex]=Object(external_kbnSharedDeps_React_.useState)(0),[selectedItems,setSelectedItems]=Object(external_kbnSharedDeps_React_.useState)([]),[isLoadingActionTypes,setIsLoadingActionTypes]=Object(external_kbnSharedDeps_React_.useState)(!1),[isLoadingActions,setIsLoadingActions]=Object(external_kbnSharedDeps_React_.useState)(!1),[addFlyoutVisible,setAddFlyoutVisibility]=Object(external_kbnSharedDeps_React_.useState)(!1),[editConnectorProps,setEditConnectorProps]=Object(external_kbnSharedDeps_React_.useState)({}),[connectorsToDelete,setConnectorsToDelete]=Object(external_kbnSharedDeps_React_.useState)([]);Object(external_kbnSharedDeps_React_.useEffect)(()=>{loadActions()},[]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{(async()=>{try{setIsLoadingActionTypes(!0);const actionTypes=await Object(action_connector_api.d)({http:http}),index={};for(const actionTypeItem of actionTypes)index[actionTypeItem.id]=actionTypeItem;setActionTypesIndex(index)}catch(e){toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.unableToLoadConnectorTypesMessage",{defaultMessage:"Unable to load connector types"})})}finally{setIsLoadingActionTypes(!1)}})()},[]);const actionConnectorTableItems=actionTypesIndex?actions.filter(action=>!public_0.DEFAULT_HIDDEN_ACTION_TYPES.includes(action.actionTypeId)).map(action=>({...action,actionType:actionTypesIndex[action.actionTypeId]?actionTypesIndex[action.actionTypeId].name:action.actionTypeId})):[],actionTypesList=actionTypesIndex?Object.values(actionTypesIndex).filter(actionType=>!public_0.DEFAULT_HIDDEN_ACTION_TYPES.includes(actionType.id)).map(actionType=>({value:actionType.id,name:`${actionType.name} (${getActionsCountByActionType(actions,actionType.id)})`})).sort((a,b)=>a.name.localeCompare(b.name)):[];async function loadActions(){setIsLoadingActions(!0);try{const actionsResponse=await Object(action_connector_api.e)({http:http});setActions(actionsResponse)}catch(e){toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.unableToLoadActionsMessage",{defaultMessage:"Unable to load connectors"})})}finally{setIsLoadingActions(!1)}}async function editItem(actionConnector,tab){setEditConnectorProps({initialConnector:actionConnector,tab:tab})}const actionsTableColumns=[{field:"name","data-test-subj":"connectorsTableCell-name",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.nameTitle",{defaultMessage:"Name"}),sortable:!1,truncateText:!0,render:(value,item)=>{var _actionTypesIndex$ite;const checkEnabledResult=Object(check_action_type_enabled.b)(actionTypesIndex&&actionTypesIndex[item.actionTypeId]),link=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{"data-test-subj":"edit"+item.id,onClick:()=>editItem(item,connector_edit_flyout.EditConectorTabs.Configuration),key:item.id,disabled:!actionTypesIndex||!(null!==(_actionTypesIndex$ite=actionTypesIndex[item.actionTypeId])&&void 0!==_actionTypesIndex$ite&&_actionTypesIndex$ite.enabled)},value);return checkEnabledResult.isEnabled?link:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,link,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIconTip,{type:"questionInCircle",content:checkEnabledResult.message,position:"right"}))}},{field:"actionType","data-test-subj":"connectorsTableCell-actionType",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actionTypeTitle",{defaultMessage:"Type"}),sortable:!1,truncateText:!0},{name:"",render:item=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"flexEnd",alignItems:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(DeleteOperation,{canDelete:canDelete,item:item,onDelete:()=>setConnectorsToDelete([item.id])}),external_kbnSharedDeps_React_default.a.createElement(RunOperation,{canExecute:canExecute&&actionTypesIndex&&actionTypesIndex[item.actionTypeId],item:item,onRun:()=>editItem(item,connector_edit_flyout.EditConectorTabs.Test)}))}],table=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiInMemoryTable,{loading:isLoadingActions||isLoadingActionTypes,items:actionConnectorTableItems,sorting:!0,itemId:"id",columns:actionsTableColumns,rowProps:item=>{var _actionTypesIndex$ite2;return{className:actionTypesIndex&&null!==(_actionTypesIndex$ite2=actionTypesIndex[item.actionTypeId])&&void 0!==_actionTypesIndex$ite2&&_actionTypesIndex$ite2.enabled?"":"actConnectorsList__tableRowDisabled","data-test-subj":"connectors-row"}},cellProps:item=>{var _actionTypesIndex$ite3;return{"data-test-subj":"cell",className:actionTypesIndex&&null!==(_actionTypesIndex$ite3=actionTypesIndex[item.actionTypeId])&&void 0!==_actionTypesIndex$ite3&&_actionTypesIndex$ite3.enabled?"":"actConnectorsList__tableCellDisabled"}},"data-test-subj":"actionsTable",pagination:{initialPageIndex:0,pageIndex:pageIndex},onTableChange:({page:page})=>{page&&setPageIndex(page.index)},selection:canDelete?{onSelectionChange(updatedSelectedItemsList){setSelectedItems(updatedSelectedItemsList)},selectable:({isPreconfigured:isPreconfigured})=>!isPreconfigured}:void 0,search:{filters:[{type:"field_value_selection",field:"actionTypeId",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.filters.actionTypeIdName",{defaultMessage:"Type"}),multiSelect:"or",options:actionTypesList}],toolsLeft:0!==selectedItems.length&&canDelete?[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{key:"delete",iconType:"trash",color:"danger","data-test-subj":"bulkDelete",onClick:()=>{setConnectorsToDelete(selectedItems.map(selected=>selected.id))},title:canDelete?void 0:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.buttons.deleteDisabledTitle",{defaultMessage:"Unable to delete connectors"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionsConnectorsList.buttons.deleteLabel",defaultMessage:"Delete {count}",values:{count:selectedItems.length}}))]:[],toolsRight:canSave?[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{"data-test-subj":"createActionButton",key:"create-action",fill:!0,onClick:()=>setAddFlyoutVisibility(!0)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionsConnectorsList.addActionButtonLabel",defaultMessage:"Create connector"}))]:[]}});return external_kbnSharedDeps_React_default.a.createElement("section",{"data-test-subj":"actionsList"},external_kbnSharedDeps_React_default.a.createElement(DeleteModalConfirmation,{onDeleted:deleted=>{if(0===selectedItems.length||selectedItems.length===deleted.length){const updatedActions=actions.filter(action=>action.id&&!connectorsToDelete.includes(action.id));setActions(updatedActions),setSelectedItems([])}setConnectorsToDelete([])},onErrors:async()=>{await loadActions(),setConnectorsToDelete([])},onCancel:async()=>{setConnectorsToDelete([])},apiDeleteCall:action_connector_api.b,idsToDelete:connectorsToDelete,singleTitle:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.singleTitle",{defaultMessage:"connector"}),multipleTitle:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.multipleTitle",{defaultMessage:"connectors"}),setIsLoadingState:isLoading=>setIsLoadingActionTypes(isLoading)}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),(isLoadingActions||isLoadingActionTypes)&&external_kbnSharedDeps_React_default.a.createElement(center_justified_spinner.a,null),0!==actionConnectorTableItems.length&&table,0===actionConnectorTableItems.length&&canSave&&!isLoadingActions&&!isLoadingActionTypes&&external_kbnSharedDeps_React_default.a.createElement(EmptyConnectorsPrompt,{onCTAClicked:()=>setAddFlyoutVisibility(!0)}),0===actionConnectorTableItems.length&&!canSave&&external_kbnSharedDeps_React_default.a.createElement(NoPermissionPrompt,null),addFlyoutVisible?external_kbnSharedDeps_React_default.a.createElement(connector_add_flyout.default,{onClose:()=>{setAddFlyoutVisibility(!1)},onTestConnector:connector=>editItem(connector,connector_edit_flyout.EditConectorTabs.Test),reloadConnectors:loadActions,actionTypeRegistry:actionTypeRegistry}):null,editConnectorProps.initialConnector?external_kbnSharedDeps_React_default.a.createElement(connector_edit_flyout.default,{key:`${editConnectorProps.initialConnector.id}${editConnectorProps.tab?":"+editConnectorProps.tab:""}`,initialConnector:editConnectorProps.initialConnector,tab:editConnectorProps.tab,onClose:()=>{setEditConnectorProps(Object(external_kbnSharedDeps_Lodash_.omit)(editConnectorProps,"initialConnector"))},reloadConnectors:loadActions,actionTypeRegistry:actionTypeRegistry}):null)};function getActionsCountByActionType(actions,actionTypeId){return actions.filter(action=>action.actionTypeId===actionTypeId).length}const DeleteOperation=({item:item,canDelete:canDelete,onDelete:onDelete})=>item.isPreconfigured?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBetaBadge,{"data-test-subj":"preConfiguredTitleMessage",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertForm.preconfiguredTitleMessage",{defaultMessage:"Preconfigured"}),tooltipContent:"This connector can't be deleted."})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:canDelete?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actions.deleteActionDescription",{defaultMessage:"Delete this connector"}):external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actions.deleteActionDisabledDescription",{defaultMessage:"Unable to delete connectors"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{isDisabled:!canDelete,"data-test-subj":"deleteConnector","aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actions.deleteActionName",{defaultMessage:"Delete"}),onClick:onDelete,iconType:"trash"}))),RunOperation=({item:item,canExecute:canExecute,onRun:onRun})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:canExecute?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actions.runConnectorDescription",{defaultMessage:"Run this connector"}):external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actions.runConnectorDisabledDescription",{defaultMessage:"Unable to run connectors"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{isDisabled:!canExecute,"data-test-subj":"runConnector","aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actions.runConnectorName",{defaultMessage:"Run"}),onClick:onRun,iconType:"play"}))),NoPermissionPrompt=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"securityApp",title:external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionsConnectorsList.noPermissionToCreateTitle",defaultMessage:"No permissions to create connectors"})),body:external_kbnSharedDeps_React_default.a.createElement("p",{"data-test-subj":"permissionDeniedMessage"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionsConnectorsList.noPermissionToCreateDescription",defaultMessage:"Contact your system administrator."}))});var alert_form=__webpack_require__(27);const BulkOperationPopover=({children:children})=>{const[isPopoverOpen,setIsPopoverOpen]=Object(external_kbnSharedDeps_React_.useState)(!1);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{isOpen:isPopoverOpen,closePopover:()=>setIsPopoverOpen(!1),"data-test-subj":"bulkAction",panelPaddingSize:"s",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{iconType:"arrowDown",iconSide:"right",onClick:()=>setIsPopoverOpen(!isPopoverOpen)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.bulkActionPopover.buttonTitle",defaultMessage:"Manage rules"}))},children&&external_kbnSharedDeps_React_default.a.Children.map(children,child=>external_kbnSharedDeps_React_default.a.isValidElement(child)?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.cloneElement(child,{})):child))};var with_bulk_alert_api_operations=__webpack_require__(93);__webpack_require__(233);const AlertQuickEditButtonsWithApi=Object(with_bulk_alert_api_operations.a)(({selectedItems:selectedItems,onPerformingAction:onPerformingAction=noop,onActionPerformed:onActionPerformed=noop,muteAlerts:muteAlerts,unmuteAlerts:unmuteAlerts,enableAlerts:enableAlerts,disableAlerts:disableAlerts,setAlertsToDelete:setAlertsToDelete})=>{const{notifications:{toasts:toasts}}=Object(kibana.b)().services,[isMutingAlerts,setIsMutingAlerts]=Object(external_kbnSharedDeps_React_.useState)(!1),[isUnmutingAlerts,setIsUnmutingAlerts]=Object(external_kbnSharedDeps_React_.useState)(!1),[isEnablingAlerts,setIsEnablingAlerts]=Object(external_kbnSharedDeps_React_.useState)(!1),[isDisablingAlerts,setIsDisablingAlerts]=Object(external_kbnSharedDeps_React_.useState)(!1),[isDeletingAlerts,setIsDeletingAlerts]=Object(external_kbnSharedDeps_React_.useState)(!1),allAlertsMuted=selectedItems.every(isAlertMuted),allAlertsDisabled=selectedItems.every(isAlertDisabled),isPerformingAction=isMutingAlerts||isUnmutingAlerts||isEnablingAlerts||isDisablingAlerts||isDeletingAlerts,hasDisabledByLicenseAlertTypes=!!selectedItems.find(alertItem=>!alertItem.enabledInLicense);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"baseline",direction:"column",gutterSize:"none"},!allAlertsMuted&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:async function(){onPerformingAction(),setIsMutingAlerts(!0);try{await muteAlerts(selectedItems)}catch(e){toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertsList.bulkActionPopover.failedToMuteRulesMessage",{defaultMessage:"Failed to mute rule(s)"})})}finally{setIsMutingAlerts(!1),onActionPerformed()}},isLoading:isMutingAlerts,isDisabled:isPerformingAction||hasDisabledByLicenseAlertTypes,"data-test-subj":"muteAll"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.bulkActionPopover.muteAllTitle",defaultMessage:"Mute"}))),allAlertsMuted&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:async function(){onPerformingAction(),setIsUnmutingAlerts(!0);try{await unmuteAlerts(selectedItems)}catch(e){toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertsList.bulkActionPopover.failedToUnmuteRulesMessage",{defaultMessage:"Failed to unmute rule(s)"})})}finally{setIsUnmutingAlerts(!1),onActionPerformed()}},isLoading:isUnmutingAlerts,isDisabled:isPerformingAction||hasDisabledByLicenseAlertTypes,"data-test-subj":"unmuteAll"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.bulkActionPopover.unmuteAllTitle",defaultMessage:"Unmute"}))),allAlertsDisabled&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:async function(){onPerformingAction(),setIsEnablingAlerts(!0);try{await enableAlerts(selectedItems)}catch(e){toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertsList.bulkActionPopover.failedToEnableRulesMessage",{defaultMessage:"Failed to enable rule(s)"})})}finally{setIsEnablingAlerts(!1),onActionPerformed()}},isLoading:isEnablingAlerts,isDisabled:isPerformingAction||hasDisabledByLicenseAlertTypes,"data-test-subj":"enableAll"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.bulkActionPopover.enableAllTitle",defaultMessage:"Enable"}))),!allAlertsDisabled&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:async function(){onPerformingAction(),setIsDisablingAlerts(!0);try{await disableAlerts(selectedItems)}catch(e){toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertsList.bulkActionPopover.failedToDisableRulesMessage",{defaultMessage:"Failed to disable rule(s)"})})}finally{setIsDisablingAlerts(!1),onActionPerformed()}},isLoading:isDisablingAlerts,isDisabled:isPerformingAction||hasDisabledByLicenseAlertTypes,"data-test-subj":"disableAll"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.bulkActionPopover.disableAllTitle",defaultMessage:"Disable"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:async function(){onPerformingAction(),setIsDeletingAlerts(!0);try{setAlertsToDelete(selectedItems.map(selected=>selected.id))}catch(e){toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertsList.bulkActionPopover.failedToDeleteRulesMessage",{defaultMessage:"Failed to delete rule(s)"})})}finally{setIsDeletingAlerts(!1),onActionPerformed()}},isLoading:isDeletingAlerts,iconType:"trash",color:"danger",isDisabled:isPerformingAction,"data-test-subj":"deleteAll",className:"actBulkActionPopover__deleteAll"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.bulkActionPopover.deleteAllTitle",defaultMessage:"Delete"}))))});function isAlertDisabled(alert){return!1===alert.enabled}function isAlertMuted(alert){return!0===alert.muteAll}function noop(){}var external_kbnSharedDeps_Rxjs_=__webpack_require__(68);__webpack_require__(242);const CollapsedItemActionsWithApi=Object(with_bulk_alert_api_operations.a)(({item:item,onAlertChanged:onAlertChanged,disableAlert:disableAlert,enableAlert:enableAlert,unmuteAlert:unmuteAlert,muteAlert:muteAlert,setAlertsToDelete:setAlertsToDelete})=>{const[isPopoverOpen,setIsPopoverOpen]=Object(external_kbnSharedDeps_React_.useState)(!1),[isDisabled,setIsDisabled]=Object(external_kbnSharedDeps_React_.useState)(!item.enabled),[isMuted,setIsMuted]=Object(external_kbnSharedDeps_React_.useState)(item.muteAll);Object(external_kbnSharedDeps_React_.useEffect)(()=>{setIsDisabled(!item.enabled),setIsMuted(item.muteAll)},[item.enabled,item.muteAll]);const button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{disabled:!item.isEditable,iconType:"boxesVertical",onClick:()=>setIsPopoverOpen(!isPopoverOpen),"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertsList.collapsedItemActons.popoverButtonTitle",{defaultMessage:"Actions"})});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{button:button,isOpen:isPopoverOpen,closePopover:()=>setIsPopoverOpen(!1),ownFocus:!0,panelPaddingSize:"none","data-test-subj":"collapsedItemActions"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiContextMenuPanel,{className:"actCollapsedItemActions",hasFocus:!1},external_kbnSharedDeps_React_default.a.createElement("div",{className:"actCollapsedItemActions__item"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{name:"disable",disabled:!item.isEditable||!item.enabledInLicense,compressed:!0,checked:isDisabled,"data-test-subj":"disableSwitch",onChange:async()=>{const enabled=!isDisabled;external_kbnSharedDeps_Rxjs_.asyncScheduler.schedule(async()=>{enabled?await disableAlert({...item,enabled:enabled}):await enableAlert({...item,enabled:enabled}),onAlertChanged()},10),setIsDisabled(!isDisabled)},label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.collapsedItemActons.disableTitle",defaultMessage:"Disable"})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{color:"subdued",size:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.collapsedItemActons.disableHelpText",defaultMessage:"When disabled, the rule is not checked."}))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"actCollapsedItemActions__item"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{name:"mute",checked:isMuted,disabled:!(item.isEditable&&!isDisabled&&item.enabledInLicense),compressed:!0,"data-test-subj":"muteSwitch",onChange:async()=>{const muteAll=isMuted;external_kbnSharedDeps_Rxjs_.asyncScheduler.schedule(async()=>{muteAll?await unmuteAlert({...item,muteAll:muteAll}):await muteAlert({...item,muteAll:muteAll}),onAlertChanged()},10),setIsMuted(!isMuted)},label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.collapsedItemActons.muteTitle",defaultMessage:"Mute"})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{color:"subdued",size:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.collapsedItemActons.muteHelpText",defaultMessage:"When muted, the rule is checked, but no action is performed."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHorizontalRule,{margin:"none"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiContextMenuItem,{disabled:!item.isEditable,"data-test-subj":"deleteAlert",onClick:()=>setAlertsToDelete([item.id])},external_kbnSharedDeps_React_default.a.createElement("div",{className:"actCollapsedItemActions__delete"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"actCollapsedItemActions__deleteIcon"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{color:"danger",type:"trash"})),external_kbnSharedDeps_React_default.a.createElement("div",{className:"actCollapsedItemActions__deleteLabel"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s",color:"danger"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.collapsedItemActons.deleteTitle",defaultMessage:"Delete"}))))))))}),TypeFilter=({options:options,onChange:onChange})=>{const[selectedValues,setSelectedValues]=Object(external_kbnSharedDeps_React_.useState)([]),[isPopoverOpen,setIsPopoverOpen]=Object(external_kbnSharedDeps_React_.useState)(!1);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{onChange&&onChange(selectedValues)},[selectedValues]),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFilterGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{isOpen:isPopoverOpen,closePopover:()=>setIsPopoverOpen(!1),button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFilterButton,{iconType:"arrowDown",hasActiveFilters:selectedValues.length>0,numActiveFilters:selectedValues.length,numFilters:selectedValues.length,onClick:()=>setIsPopoverOpen(!isPopoverOpen),"data-test-subj":"alertTypeFilterButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.typeFilterLabel",defaultMessage:"Type"}))},external_kbnSharedDeps_React_default.a.createElement("div",{className:"euiFilterSelect__items"},options.map((groupItem,groupIndex)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,{key:"group"+groupIndex},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{"data-test-subj":`alertType${groupIndex}Group`,size:"xxs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,groupItem.groupName)),groupItem.subOptions.map((item,index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFilterSelectItem,{key:index,onClick:()=>{const isPreviouslyChecked=selectedValues.includes(item.value);setSelectedValues(isPreviouslyChecked?selectedValues.filter(val=>val!==item.value):selectedValues.concat(item.value))},checked:selectedValues.includes(item.value)?"on":void 0,"data-test-subj":`alertType${item.value}FilterOption`},item.name)))))))},ActionTypeFilter=({actionTypes:actionTypes,onChange:onChange})=>{const[selectedValues,setSelectedValues]=Object(external_kbnSharedDeps_React_.useState)([]),[isPopoverOpen,setIsPopoverOpen]=Object(external_kbnSharedDeps_React_.useState)(!1);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{onChange&&onChange(selectedValues)},[selectedValues]),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFilterGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{isOpen:isPopoverOpen,closePopover:()=>setIsPopoverOpen(!1),button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFilterButton,{iconType:"arrowDown",hasActiveFilters:selectedValues.length>0,numActiveFilters:selectedValues.length,numFilters:selectedValues.length,onClick:()=>setIsPopoverOpen(!isPopoverOpen),"data-test-subj":"actionTypeFilterButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.actionTypeFilterLabel",defaultMessage:"Action type"}))},external_kbnSharedDeps_React_default.a.createElement("div",{className:"euiFilterSelect__items"},actionTypes.map(item=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFilterSelectItem,{key:item.id,onClick:()=>{const isPreviouslyChecked=selectedValues.includes(item.id);setSelectedValues(isPreviouslyChecked?selectedValues.filter(val=>val!==item.id):selectedValues.concat(item.id))},checked:selectedValues.includes(item.id)?"on":void 0,"data-test-subj":`actionType${item.id}FilterOption`},item.name)))))};var common_=__webpack_require__(6),translations=__webpack_require__(99);const AlertStatusFilter=({selectedStatuses:selectedStatuses,onChange:onChange})=>{const[selectedValues,setSelectedValues]=Object(external_kbnSharedDeps_React_.useState)(selectedStatuses),[isPopoverOpen,setIsPopoverOpen]=Object(external_kbnSharedDeps_React_.useState)(!1);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{onChange&&onChange(selectedValues)},[selectedValues]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{setSelectedValues(selectedStatuses)},[selectedStatuses]),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFilterGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{isOpen:isPopoverOpen,closePopover:()=>setIsPopoverOpen(!1),button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFilterButton,{iconType:"arrowDown",hasActiveFilters:selectedValues.length>0,numActiveFilters:selectedValues.length,numFilters:selectedValues.length,onClick:()=>setIsPopoverOpen(!isPopoverOpen),"data-test-subj":"alertStatusFilterButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.alertStatusFilterLabel",defaultMessage:"Status"}))},external_kbnSharedDeps_React_default.a.createElement("div",{className:"euiFilterSelect__items"},[...common_.AlertExecutionStatusValues].sort().map(item=>{const healthColor=getHealthColor(item);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFilterSelectItem,{key:item,style:{textTransform:"capitalize"},onClick:()=>{const isPreviouslyChecked=selectedValues.includes(item);setSelectedValues(isPreviouslyChecked?selectedValues.filter(val=>val!==item):selectedValues.concat(item))},checked:selectedValues.includes(item)?"on":void 0,"data-test-subj":`alertStatus${item}FilerOption`},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHealth,{color:healthColor},translations.c[item]))}))))};function getHealthColor(status){switch(status){case"active":return"primary";case"error":return"danger";case"ok":return"subdued";case"pending":return"success";default:return"warning"}}var alert_api=__webpack_require__(90);const EmptyPrompt=({onCTAClicked:onCTAClicked})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"createFirstAlertEmptyPrompt",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.components.emptyPrompt.emptyTitle",defaultMessage:"Create your first rule"})),body:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.components.emptyPrompt.emptyDesc",defaultMessage:"Receive an alert through email, Slack, or another connector when a condition is met."})),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{"data-test-subj":"createFirstAlertButton",key:"create-action",fill:!0,onClick:onCTAClicked},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.components.emptyPrompt.emptyButton",defaultMessage:"Create rule"}))});var common_constants=__webpack_require__(21);__webpack_require__(251);const ManageLicenseModal=({licenseType:licenseType,alertTypeId:alertTypeId,onConfirm:onConfirm,onCancel:onCancel})=>{const licenseRequired=Object(external_kbnSharedDeps_Lodash_.capitalize)(licenseType);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiConfirmModal,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.manageLicense.manageLicenseTitle",{defaultMessage:"{licenseRequired} license required",values:{licenseRequired:licenseRequired}}),onCancel:onCancel,onConfirm:onConfirm,confirmButtonText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.manageLicense.manageLicenseConfirmButtonText",{defaultMessage:"Manage license"}),cancelButtonText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.manageLicense.manageLicenseCancelButtonText",{defaultMessage:"Cancel"}),defaultFocusedButton:"confirm","data-test-subj":"manageLicenseModal"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.manageLicense.manageLicenseMessage",defaultMessage:"Rule type {alertTypeId} is disabled because it requires a {licenseRequired} license. Continue to License Management to view upgrade options.",values:{alertTypeId:alertTypeId,licenseRequired:licenseRequired}})))},AlertsList=()=>{const history=Object(external_kbnSharedDeps_ReactRouterDom_.useHistory)(),{http:http,notifications:{toasts:toasts},application:{capabilities:capabilities},alertTypeRegistry:alertTypeRegistry,actionTypeRegistry:actionTypeRegistry,kibanaFeatures:kibanaFeatures}=Object(kibana.b)().services,canExecuteActions=Object(lib_capabilities.c)(capabilities),[actionTypes,setActionTypes]=Object(external_kbnSharedDeps_React_.useState)([]),[selectedIds,setSelectedIds]=Object(external_kbnSharedDeps_React_.useState)([]),[isPerformingAction,setIsPerformingAction]=Object(external_kbnSharedDeps_React_.useState)(!1),[page,setPage]=Object(external_kbnSharedDeps_React_.useState)({index:0,size:constants.c}),[searchText,setSearchText]=Object(external_kbnSharedDeps_React_.useState)(),[inputText,setInputText]=Object(external_kbnSharedDeps_React_.useState)(),[typesFilter,setTypesFilter]=Object(external_kbnSharedDeps_React_.useState)([]),[actionTypesFilter,setActionTypesFilter]=Object(external_kbnSharedDeps_React_.useState)([]),[alertStatusesFilter,setAlertStatusesFilter]=Object(external_kbnSharedDeps_React_.useState)([]),[alertFlyoutVisible,setAlertFlyoutVisibility]=Object(external_kbnSharedDeps_React_.useState)(!1),[dismissAlertErrors,setDismissAlertErrors]=Object(external_kbnSharedDeps_React_.useState)(!1),[sort,setSort]=Object(external_kbnSharedDeps_React_.useState)({field:"name",direction:"asc"}),[manageLicenseModalOpts,setManageLicenseModalOpts]=Object(external_kbnSharedDeps_React_.useState)(null),[alertsStatusesTotal,setAlertsStatusesTotal]=Object(external_kbnSharedDeps_React_.useState)(common_.AlertExecutionStatusValues.reduce((prev,status)=>({...prev,[status]:0}),{})),[alertTypesState,setAlertTypesState]=Object(external_kbnSharedDeps_React_.useState)({isLoading:!1,isInitialized:!1,data:new Map}),[alertsState,setAlertsState]=Object(external_kbnSharedDeps_React_.useState)({isLoading:!1,data:[],totalItemCount:0}),[alertsToDelete,setAlertsToDelete]=Object(external_kbnSharedDeps_React_.useState)([]);async function loadAlertsData(){if(alertTypesState.data.size>0){setAlertsState({...alertsState,isLoading:!0});try{var _alertsResponse$data;const alertsResponse=await Object(alert_api.m)({http:http,page:page,searchText:searchText,typesFilter:typesFilter,actionTypesFilter:actionTypesFilter,alertStatusesFilter:alertStatusesFilter,sort:sort});await async function(){try{const alertsAggs=await Object(alert_api.i)({http:http,searchText:searchText,typesFilter:typesFilter,actionTypesFilter:actionTypesFilter,alertStatusesFilter:alertStatusesFilter});null!=alertsAggs&&alertsAggs.alertExecutionStatus&&setAlertsStatusesTotal(alertsAggs.alertExecutionStatus)}catch(e){toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertsList.unableToLoadRuleStatusInfoMessage",{defaultMessage:"Unable to load rule status info"})})}}(),setAlertsState({isLoading:!1,data:alertsResponse.data,totalItemCount:alertsResponse.total}),(null===(_alertsResponse$data=alertsResponse.data)||void 0===_alertsResponse$data||!_alertsResponse$data.length)&&page.index>0&&setPage({...page,index:0})}catch(e){toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertsList.unableToLoadRulesMessage",{defaultMessage:"Unable to load rules"})}),setAlertsState({...alertsState,isLoading:!1})}}}Object(external_kbnSharedDeps_React_.useEffect)(()=>{loadAlertsData()},[alertTypesState,page,searchText,JSON.stringify(typesFilter),JSON.stringify(actionTypesFilter),JSON.stringify(alertStatusesFilter)]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{(async()=>{try{setAlertTypesState({...alertTypesState,isLoading:!0});const alertTypes=await Object(alert_api.l)({http:http}),index=new Map;for(const alertType of alertTypes)index.set(alertType.id,alertType);setAlertTypesState({isLoading:!1,data:index,isInitialized:!0})}catch(e){toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertsList.unableToLoadRuleTypesMessage",{defaultMessage:"Unable to load rule types"})}),setAlertTypesState({...alertTypesState,isLoading:!1})}})()},[]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{(async()=>{try{const result=await Object(action_connector_api.d)({http:http});setActionTypes(result.filter(({id:id})=>actionTypeRegistry.has(id)&&!common_constants.DEFAULT_HIDDEN_ACTION_TYPES.includes(id)).sort((a,b)=>a.name.localeCompare(b.name)))}catch(e){toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertsList.unableToLoadConnectorTypesMessage",{defaultMessage:"Unable to load connector types"})})}})()},[]);const alertsTableColumns=[{field:"name",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertsListTable.columns.nameTitle",{defaultMessage:"Name"}),sortable:!0,truncateText:!0,width:"35%","data-test-subj":"alertsTableCell-name",render:(name,alert)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{title:name,onClick:()=>{history.push(constants.j.replace(":ruleId",alert.id))}},name)},{field:"executionStatus.status",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertsListTable.columns.statusTitle",{defaultMessage:"Status"}),sortable:!0,truncateText:!1,width:"150px","data-test-subj":"alertsTableCell-status",render:(executionStatus,item)=>((executionStatus,item)=>{var _executionStatus$erro,_executionStatus$erro2;const healthColor=getHealthColor(executionStatus.status),tooltipMessage="error"===executionStatus.status?"Error: "+(null==executionStatus||null===(_executionStatus$erro=executionStatus.error)||void 0===_executionStatus$erro?void 0:_executionStatus$erro.message):null,isLicenseError=(null===(_executionStatus$erro2=executionStatus.error)||void 0===_executionStatus$erro2?void 0:_executionStatus$erro2.reason)===common_.AlertExecutionStatusErrorReasons.License,statusMessage=isLicenseError?translations.a:translations.c[executionStatus.status],health=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHealth,{"data-test-subj":"alertStatus-"+executionStatus.status,color:healthColor},statusMessage),healthWithTooltip=tooltipMessage?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{"data-test-subj":"alertStatus-error-tooltip",position:"top",content:tooltipMessage},health):health;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,healthWithTooltip),isLicenseError&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"xs","data-test-subj":"alertStatus-error-license-fix",onClick:()=>{var _alertTypesState$data;return setManageLicenseModalOpts({licenseType:null===(_alertTypesState$data=alertTypesState.data.get(item.alertTypeId))||void 0===_alertTypesState$data?void 0:_alertTypesState$data.minimumLicenseRequired,alertTypeId:item.alertTypeId})}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.fixLicenseLink",defaultMessage:"Fix"}))))})(item.executionStatus,item)},{field:"tagsText",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertsListTable.columns.tagsText",{defaultMessage:"Tags"}),sortable:!1,"data-test-subj":"alertsTableCell-tagsText"},{field:"actionsCount",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertsListTable.columns.actionsCount",{defaultMessage:"Actions"}),render:(count,item)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBadge,{color:"hollow",key:item.id},count),sortable:!1,"data-test-subj":"alertsTableCell-actionsCount"},{field:"alertType",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertsListTable.columns.alertTypeTitle",{defaultMessage:"Type"}),sortable:!1,truncateText:!0,"data-test-subj":"alertsTableCell-alertType"},{field:"schedule.interval",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertsListTable.columns.intervalTitle",{defaultMessage:"Runs every"}),sortable:!1,truncateText:!1,"data-test-subj":"alertsTableCell-interval"},{name:"",width:"40px",render:item=>external_kbnSharedDeps_React_default.a.createElement(CollapsedItemActionsWithApi,{key:item.id,item:item,onAlertChanged:()=>loadAlertsData(),setAlertsToDelete:setAlertsToDelete})}],authorizedAlertTypes=[...alertTypesState.data.values()],authorizedToCreateAnyAlerts=authorizedAlertTypes.some(alertType=>{var _alertType$authorized;return null===(_alertType$authorized=alertType.authorizedConsumers[common_.ALERTS_FEATURE_ID])||void 0===_alertType$authorized?void 0:_alertType$authorized.all}),toolsRight=[external_kbnSharedDeps_React_default.a.createElement(TypeFilter,{key:"type-filter",onChange:types=>setTypesFilter(types),options:Object(external_kbnSharedDeps_Lodash_.sortBy)(Object.entries(authorizedAlertTypes.reduce((result,alertType)=>{const producer=alertType.producer;return(result[producer]=result[producer]||[]).push({value:alertType.id,name:alertType.name}),result},{}))).map(([groupName,alertTypesOptions])=>{var _getProducerFeatureNa,producer,_kibanaFeatures$find;return{groupName:null!==(producer=groupName,_getProducerFeatureNa=null==kibanaFeatures||null===(_kibanaFeatures$find=kibanaFeatures.find(featureItem=>featureItem.id===producer))||void 0===_kibanaFeatures$find?void 0:_kibanaFeatures$find.name)&&void 0!==_getProducerFeatureNa?_getProducerFeatureNa:Object(external_kbnSharedDeps_Lodash_.capitalize)(groupName),subOptions:alertTypesOptions.sort((a,b)=>a.name.localeCompare(b.name))}})}),external_kbnSharedDeps_React_default.a.createElement(ActionTypeFilter,{key:"action-type-filter",actionTypes:actionTypes,onChange:ids=>setActionTypesFilter(ids)}),external_kbnSharedDeps_React_default.a.createElement(AlertStatusFilter,{key:"alert-status-filter",selectedStatuses:alertStatusesFilter,onChange:ids=>setAlertStatusesFilter(ids)}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{"data-test-subj":"refreshAlertsButton",iconType:"refresh",onClick:loadAlertsData,name:"refresh",color:"primary"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.refreshAlertsButtonLabel",defaultMessage:"Refresh"}))],authorizedToModifySelectedAlerts=!!selectedIds.length&&filterAlertsById(alertsState.data,selectedIds).every(selectedAlert=>Object(lib_capabilities.a)(selectedAlert,alertTypesState.data.get(selectedAlert.alertTypeId))),table=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s"},selectedIds.length>0&&authorizedToModifySelectedAlerts&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(BulkOperationPopover,null,external_kbnSharedDeps_React_default.a.createElement(AlertQuickEditButtonsWithApi,{selectedItems:convertAlertsToTableItems(filterAlertsById(alertsState.data,selectedIds),alertTypesState.data,canExecuteActions),onPerformingAction:()=>setIsPerformingAction(!0),onActionPerformed:()=>{loadAlertsData(),setIsPerformingAction(!1)},setAlertsToDelete:setAlertsToDelete}))),authorizedToCreateAnyAlerts?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{key:"create-alert","data-test-subj":"createAlertButton",fill:!0,onClick:()=>setAlertFlyoutVisibility(!0)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.addRuleButtonLabel",defaultMessage:"Create rule"}))):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldSearch,{fullWidth:!0,isClearable:!0,"data-test-subj":"alertSearchField",onChange:e=>setInputText(e.target.value),onKeyUp:e=>{13===e.keyCode&&setSearchText(inputText)},placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertsList.searchPlaceholderTitle",{defaultMessage:"Search"})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s"},toolsRight.map((tool,index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{key:index,grow:!1},tool))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),!dismissAlertErrors&&alertsStatusesTotal.error>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{color:"danger",size:"s",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.attentionBannerTitle",defaultMessage:"Error found in {totalStausesError, plural, one {# rule} other {# rules}}.",values:{totalStausesError:alertsStatusesTotal.error}}),iconType:"alert","data-test-subj":"alertsErrorBanner"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{type:"primary",size:"s",color:"danger",onClick:()=>setAlertStatusesFilter(["error"])},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.viewBunnerButtonLabel",defaultMessage:"View"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{color:"danger",onClick:()=>setDismissAlertErrors(!0)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.dismissBunnerButtonLabel",defaultMessage:"Dismiss"}))))):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s",color:"subdued","data-test-subj":"totalAlertsCount"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.totalItemsCountDescription",defaultMessage:"Showing: {pageSize} of {totalItemCount} rules.",values:{totalItemCount:alertsState.totalItemCount,pageSize:alertsState.data.length}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHealth,{color:"primary","data-test-subj":"totalActiveAlertsCount"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.totalStausesActiveDescription",defaultMessage:"Active: {totalStausesActive}",values:{totalStausesActive:alertsStatusesTotal.active}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHealth,{color:"danger","data-test-subj":"totalErrorAlertsCount"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.totalStausesErrorDescription",defaultMessage:"Error: {totalStausesError}",values:{totalStausesError:alertsStatusesTotal.error}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHealth,{color:"subdued","data-test-subj":"totalOkAlertsCount"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.totalStausesOkDescription",defaultMessage:"Ok: {totalStausesOk}",values:{totalStausesOk:alertsStatusesTotal.ok}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHealth,{color:"success","data-test-subj":"totalPendingAlertsCount"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.totalStausesPendingDescription",defaultMessage:"Pending: {totalStausesPending}",values:{totalStausesPending:alertsStatusesTotal.pending}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHealth,{color:"warning","data-test-subj":"totalUnknownAlertsCount"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.totalStausesUnknownDescription",defaultMessage:"Unknown: {totalStausesUnknown}",values:{totalStausesUnknown:alertsStatusesTotal.unknown}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBasicTable,{loading:alertsState.isLoading||alertTypesState.isLoading||isPerformingAction,items:!1===alertTypesState.isInitialized?[]:convertAlertsToTableItems(alertsState.data,alertTypesState.data,canExecuteActions),itemId:"id",columns:alertsTableColumns,sorting:{sort:sort},rowProps:item=>{var _alertTypesState$data2;return{"data-test-subj":"alert-row",className:null!==(_alertTypesState$data2=alertTypesState.data.get(item.alertTypeId))&&void 0!==_alertTypesState$data2&&_alertTypesState$data2.enabledInLicense?"":"actAlertsList__tableRowDisabled"}},cellProps:item=>{var _alertTypesState$data3;return{"data-test-subj":"cell",className:null!==(_alertTypesState$data3=alertTypesState.data.get(item.alertTypeId))&&void 0!==_alertTypesState$data3&&_alertTypesState$data3.enabledInLicense?"":"actAlertsList__tableCellDisabled"}},"data-test-subj":"alertsList",pagination:{pageIndex:page.index,pageSize:page.size,totalItemCount:!1===alertTypesState.isInitialized?0:alertsState.totalItemCount},selection:{selectable:alert=>alert.isEditable,onSelectionChange(updatedSelectedItemsList){setSelectedIds(updatedSelectedItemsList.map(item=>item.id))}},onChange:({page:changedPage,sort:changedSort})=>{changedPage&&setPage(changedPage),changedSort&&setSort(changedSort)}}),manageLicenseModalOpts&&external_kbnSharedDeps_React_default.a.createElement(ManageLicenseModal,{licenseType:manageLicenseModalOpts.licenseType,alertTypeId:manageLicenseModalOpts.alertTypeId,onConfirm:()=>{window.open(http.basePath.get()+"/app/management/stack/license_management","_blank"),setManageLicenseModalOpts(null)},onCancel:()=>setManageLicenseModalOpts(null)})),loadedItems=convertAlertsToTableItems(alertsState.data,alertTypesState.data,canExecuteActions),isFilterApplied=!(Object(external_kbnSharedDeps_Lodash_.isEmpty)(searchText)&&Object(external_kbnSharedDeps_Lodash_.isEmpty)(typesFilter)&&Object(external_kbnSharedDeps_Lodash_.isEmpty)(actionTypesFilter)&&Object(external_kbnSharedDeps_Lodash_.isEmpty)(alertStatusesFilter));return external_kbnSharedDeps_React_default.a.createElement("section",{"data-test-subj":"alertsList"},external_kbnSharedDeps_React_default.a.createElement(DeleteModalConfirmation,{onDeleted:async()=>{setAlertsToDelete([]),setSelectedIds([]),await loadAlertsData()},onErrors:async()=>{await loadAlertsData(),setAlertsToDelete([])},onCancel:()=>{setAlertsToDelete([])},apiDeleteCall:alert_api.c,idsToDelete:alertsToDelete,singleTitle:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertsList.singleTitle",{defaultMessage:"rule"}),multipleTitle:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertsList.multipleTitle",{defaultMessage:"rules"}),setIsLoadingState:isLoading=>{setAlertsState({...alertsState,isLoading:isLoading})}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),loadedItems.length||isFilterApplied?table:alertTypesState.isLoading||alertsState.isLoading?external_kbnSharedDeps_React_default.a.createElement(center_justified_spinner.a,null):authorizedToCreateAnyAlerts?external_kbnSharedDeps_React_default.a.createElement(EmptyPrompt,{onCTAClicked:()=>setAlertFlyoutVisibility(!0)}):noPermissionPrompt,alertFlyoutVisible&&external_kbnSharedDeps_React_default.a.createElement(alert_form.a,{consumer:common_.ALERTS_FEATURE_ID,onClose:()=>{setAlertFlyoutVisibility(!1)},actionTypeRegistry:actionTypeRegistry,alertTypeRegistry:alertTypeRegistry,onSave:loadAlertsData}))},noPermissionPrompt=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"securityApp",title:external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.noPermissionToCreateTitle",defaultMessage:"No permissions to create rules"})),body:external_kbnSharedDeps_React_default.a.createElement("p",{"data-test-subj":"permissionDeniedMessage"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.noPermissionToCreateDescription",defaultMessage:"Contact your system administrator."}))});function filterAlertsById(alerts,ids){return alerts.filter(alert=>ids.includes(alert.id))}function convertAlertsToTableItems(alerts,alertTypesIndex,canExecuteActions){return alerts.map(alert=>{var _alertTypesIndex$get$,_alertTypesIndex$get,_alertTypesIndex$get2;return{...alert,actionsCount:alert.actions.length,tagsText:alert.tags.join(", "),alertType:null!==(_alertTypesIndex$get$=null===(_alertTypesIndex$get=alertTypesIndex.get(alert.alertTypeId))||void 0===_alertTypesIndex$get?void 0:_alertTypesIndex$get.name)&&void 0!==_alertTypesIndex$get$?_alertTypesIndex$get$:alert.alertTypeId,isEditable:Object(lib_capabilities.a)(alert,alertTypesIndex.get(alert.alertTypeId))&&(canExecuteActions||!canExecuteActions&&!alert.actions.length),enabledInLicense:!(null===(_alertTypesIndex$get2=alertTypesIndex.get(alert.alertTypeId))||void 0===_alertTypesIndex$get2||!_alertTypesIndex$get2.enabledInLicense)}})}var health_check=__webpack_require__(100),health_context=__webpack_require__(92);const TriggersActionsUIHome=({match:{params:{section:section}},history:history})=>{const{chrome:chrome,application:{capabilities:capabilities},setBreadcrumbs:setBreadcrumbs,docLinks:docLinks}=Object(kibana.b)().services,canShowActions=Object(lib_capabilities.e)(capabilities),tabs=[];tabs.push({id:"rules",name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.home.rulesTabTitle",defaultMessage:"Rules"})}),canShowActions&&tabs.push({id:"connectors",name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.home.connectorsTabTitle",defaultMessage:"Connectors"})});return Object(external_kbnSharedDeps_React_.useEffect)(()=>{setBreadcrumbs([Object(breadcrumb.b)(section||"home")]),chrome.docTitle.change(Object(doc_title.a)(section||"home"))},[section,chrome,setBreadcrumbs]),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContent,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement("h1",{"data-test-subj":"appTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.home.appTitle",defaultMessage:"Rules and Connectors"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{href:docLinks.links.alerting.guide,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.home.docsLinkText",defaultMessage:"Documentation"}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.home.sectionDescription",defaultMessage:"Detect conditions using rules, and take actions using connectors."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTabs,null,tabs.map(tab=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTab,{onClick:()=>{return newSection=tab.id,void history.push("/"+newSection);var newSection},isSelected:tab.id===section,key:tab.id,"data-test-subj":tab.id+"Tab"},tab.name))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Switch,null,canShowActions&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{exact:!0,path:constants.h,component:()=>external_kbnSharedDeps_React_default.a.createElement(health_context.a,null,external_kbnSharedDeps_React_default.a.createElement(health_check.a,{waitForCheck:!0},external_kbnSharedDeps_React_default.a.createElement(ActionsConnectorsList,null)))}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{exact:!0,path:constants.k,component:()=>external_kbnSharedDeps_React_default.a.createElement(health_context.a,null,external_kbnSharedDeps_React_default.a.createElement(health_check.a,{inFlyout:!0,waitForCheck:!0},external_kbnSharedDeps_React_default.a.createElement(AlertsList,null)))}))))}}])]);