/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[27],{278:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"IndexParamsFields",(function(){return IndexParamsFields})),__webpack_require__.d(__webpack_exports__,"default",(function(){return IndexParamsFields}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_elastic_eui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(15),_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(52),_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(16),_json_editor_with_message_variables__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(135),_common_lib_kibana__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(72);const IndexParamsFields=({actionParams:actionParams,index:index,editAction:editAction,messageVariables:messageVariables,errors:errors,actionConnector:actionConnector})=>{const{docLinks:docLinks}=Object(_common_lib_kibana__WEBPACK_IMPORTED_MODULE_6__.b)().services,{documents:documents,indexOverride:indexOverride}=actionParams,defaultAlertHistoryIndexSuffix=_types__WEBPACK_IMPORTED_MODULE_4__.c.replace(_types__WEBPACK_IMPORTED_MODULE_4__.a,""),getDocumentToIndex=doc=>doc&&doc.length>0?doc[0]:void 0,[documentToIndex,setDocumentToIndex]=Object(react__WEBPACK_IMPORTED_MODULE_0__.useState)(getDocumentToIndex(documents)),[alertHistoryIndexSuffix,setAlertHistoryIndexSuffix]=Object(react__WEBPACK_IMPORTED_MODULE_0__.useState)(indexOverride?indexOverride.replace(_types__WEBPACK_IMPORTED_MODULE_4__.a,""):defaultAlertHistoryIndexSuffix),[usePreconfiguredSchema,setUsePreconfiguredSchema]=Object(react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1);Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{setDocumentToIndex(getDocumentToIndex(documents))},[documents]),Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{(null==actionConnector?void 0:actionConnector.id)===_types__WEBPACK_IMPORTED_MODULE_4__.e?(setUsePreconfiguredSchema(!0),editAction("documents",[JSON.stringify(_types__WEBPACK_IMPORTED_MODULE_4__.d)],index),setDocumentToIndex(JSON.stringify(_types__WEBPACK_IMPORTED_MODULE_4__.d))):(setUsePreconfiguredSchema(!1),editAction("documents",void 0,index),setDocumentToIndex(void 0))},[null==actionConnector?void 0:actionConnector.id]);const onDocumentsChange=updatedDocuments=>{try{const documentsJSON=JSON.parse(updatedDocuments);editAction("documents",[documentsJSON],index),setDocumentToIndex(updatedDocuments)}catch(e){editAction("documents",[{}],index),setDocumentToIndex(void 0)}},documentsFieldLabel=_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.indexAction.documentsFieldLabel",{defaultMessage:"Document to index"}),resetDefaultIndex=indexOverride&&indexOverride!==_types__WEBPACK_IMPORTED_MODULE_4__.c?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiText,{size:"xs"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiLink,{"data-test-subj":"resetDefaultIndex",onClick:()=>{editAction("indexOverride",_types__WEBPACK_IMPORTED_MODULE_4__.c,index),setAlertHistoryIndexSuffix(defaultAlertHistoryIndexSuffix)}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiIcon,{type:"refresh"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.resetDefaultIndexLabel",defaultMessage:"Reset default index"}))):react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null),preconfiguredDocumentSchema=react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiFormRow,{fullWidth:!0,error:errors.indexOverride,isInvalid:errors.indexOverride&&errors.indexOverride.length>0,label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.indexAction.preconfiguredIndex",{defaultMessage:"Elasticsearch index"}),labelAppend:resetDefaultIndex,helpText:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.indexAction.preconfiguredIndexHelpText",defaultMessage:"Documents are indexed into the {alertHistoryIndex} index. ",values:{alertHistoryIndex:`${_types__WEBPACK_IMPORTED_MODULE_4__.a}${alertHistoryIndexSuffix}`}}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiLink,{href:docLinks.links.alerting.preconfiguredAlertHistoryConnector,target:"_blank"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.indexAction.preconfiguredIndexDocLink",defaultMessage:"View docs."})))},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiFieldText,{fullWidth:!0,"data-test-subj":"preconfiguredIndexToUse",prepend:_types__WEBPACK_IMPORTED_MODULE_4__.a,value:alertHistoryIndexSuffix,onChange:e=>{editAction("indexOverride",`${_types__WEBPACK_IMPORTED_MODULE_4__.a}${e.target.value}`,index),setAlertHistoryIndexSuffix(e.target.value)}})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiSpacer,{size:"m"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiFormRow,{fullWidth:!0,label:documentsFieldLabel},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiCodeBlock,{language:"json",fontSize:"s",paddingSize:"s","data-test-subj":"preconfiguredDocumentToIndex"},JSON.stringify(_types__WEBPACK_IMPORTED_MODULE_4__.d,null,2)))),jsonDocumentEditor=react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_json_editor_with_message_variables__WEBPACK_IMPORTED_MODULE_5__.a,{messageVariables:messageVariables,paramsProperty:"documents","data-test-subj":"documentToIndex",inputTargetValue:null===documentToIndex?"{}":documentToIndex,label:documentsFieldLabel,"aria-label":_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.indexAction.jsonDocAriaLabel",{defaultMessage:"Code editor"}),errors:errors.documents,onDocumentsChange:onDocumentsChange,helpText:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiLink,{href:docLinks.links.alerting.indexAction,target:"_blank"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.indexAction.indexDocumentHelpLabel",defaultMessage:"Index document example."})),onBlur:()=>{documentToIndex||onDocumentsChange("{}")}});return usePreconfiguredSchema?preconfiguredDocumentSchema:jsonDocumentEditor}},72:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return public_.KibanaContextProvider})),__webpack_require__.d(__webpack_exports__,"b",(function(){return useTypedKibana}));var public_=__webpack_require__(51);const useTypedKibana=()=>Object(public_.useKibana)()}}]);