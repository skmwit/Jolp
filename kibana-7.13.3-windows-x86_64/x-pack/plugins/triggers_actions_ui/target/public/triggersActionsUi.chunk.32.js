/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[32],{62:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"GroupByExpression",(function(){return GroupByExpression})),__webpack_require__.d(__webpack_exports__,"default",(function(){return GroupByExpression}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(52),_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),_elastic_eui__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(15),_constants__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(21),_components__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(87);const GroupByExpression=({groupBy:groupBy,errors:errors,onChangeSelectedTermSize:onChangeSelectedTermSize,onChangeSelectedTermField:onChangeSelectedTermField,onChangeSelectedGroupBy:onChangeSelectedGroupBy,display:display="inline",fields:fields,termSize:termSize,termField:termField,customGroupByTypes:customGroupByTypes,popupPosition:popupPosition})=>{const groupByTypes=null!=customGroupByTypes?customGroupByTypes:_constants__WEBPACK_IMPORTED_MODULE_4__.builtInGroupByTypes,[groupByPopoverOpen,setGroupByPopoverOpen]=Object(react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),firstFieldOption={text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__.i18n.translate("xpack.triggersActionsUI.common.expressionItems.groupByType.timeFieldOptionLabel",{defaultMessage:"Select a field"}),value:""};return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_3__.EuiPopover,{button:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_3__.EuiExpression,{description:""+(groupByTypes[groupBy].sizeRequired?_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__.i18n.translate("xpack.triggersActionsUI.common.expressionItems.groupByType.groupedOverLabel",{defaultMessage:"grouped over"}):_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__.i18n.translate("xpack.triggersActionsUI.common.expressionItems.groupByType.overLabel",{defaultMessage:"over"})),"data-test-subj":"groupByExpression",value:`${groupByTypes[groupBy].text} ${groupByTypes[groupBy].sizeRequired?`${termSize} ${termField?`'${termField}'`:""}`:""}`,isActive:groupByPopoverOpen||"top"===groupBy&&!(termSize&&termField),onClick:()=>{setGroupByPopoverOpen(!0)},display:"inline"===display?"inline":"columns",isInvalid:!("all"===groupBy||termSize&&termField)}),isOpen:groupByPopoverOpen,closePopover:()=>{setGroupByPopoverOpen(!1)},ownFocus:!0,display:"fullWidth"===display?"block":"inlineBlock",anchorPosition:null!=popupPosition?popupPosition:"downRight",repositionOnScroll:!0},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_5__.a,{onClose:()=>setGroupByPopoverOpen(!1)},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage,{id:"xpack.triggersActionsUI.common.expressionItems.groupByType.overButtonLabel",defaultMessage:"over"})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_3__.EuiFlexGroup,{justifyContent:"spaceBetween"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_3__.EuiFlexItem,{grow:!1},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_3__.EuiSelect,{"data-test-subj":"overExpressionSelect",value:groupBy,onChange:e=>{groupByTypes[e.target.value].sizeRequired?(onChangeSelectedTermSize(1),onChangeSelectedTermField("")):(onChangeSelectedTermSize(void 0),onChangeSelectedTermField(void 0)),onChangeSelectedGroupBy(e.target.value)},options:Object.values(groupByTypes).map(({text:text,value:value})=>({text:text,value:value}))})),groupByTypes[groupBy].sizeRequired?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_3__.EuiFlexItem,{grow:!1},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_3__.EuiFormRow,{isInvalid:errors.termSize.length>0,error:errors.termSize},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_3__.EuiFieldNumber,{isInvalid:errors.termSize.length>0,value:termSize||"",onChange:e=>{const{value:value}=e.target,termSizeVal=""!==value?parseFloat(value):void 0;onChangeSelectedTermSize(termSizeVal)},min:1,max:1e3}))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_3__.EuiFlexItem,{grow:!1},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_3__.EuiFormRow,{isInvalid:errors.termField.length>0&&void 0!==termField,error:errors.termField},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_3__.EuiSelect,{"data-test-subj":"fieldsExpressionSelect",value:termField,isInvalid:errors.termField.length>0&&void 0!==termField,onChange:e=>{onChangeSelectedTermField(e.target.value)},options:fields.reduce((options,field)=>(groupByTypes[groupBy].validNormalizedTypes.includes(field.normalizedType)&&options.push({text:field.name,value:field.name}),options),[firstFieldOption]),onBlur:()=>{void 0===termField&&onChangeSelectedTermField("")}})))):null)))}},87:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ClosablePopoverTitle}));var external_kbnSharedDeps_React_=__webpack_require__(1),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_KbnI18n_=__webpack_require__(0),external_kbnSharedDeps_ElasticEui_=__webpack_require__(15);const ClosablePopoverTitle=({children:children,onClose:onClose})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopoverTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,children),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"cross",color:"danger","aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.common.expressionItems.components.closablePopoverTitle.closeLabel",{defaultMessage:"Close"}),onClick:()=>onClose()}))))}}]);