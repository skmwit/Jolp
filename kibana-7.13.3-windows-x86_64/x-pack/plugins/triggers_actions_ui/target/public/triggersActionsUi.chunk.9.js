/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[9,5],{102:function(module,__webpack_exports__,__webpack_require__){"use strict";function actionTypeCompare(a,b,preconfiguredConnectors){const aEnabled=getIsEnabledValue(a,preconfiguredConnectors),bEnabled=getIsEnabledValue(b,preconfiguredConnectors);return!0===aEnabled&&!1===bEnabled?-1:!1===aEnabled&&!0===bEnabled?1:a.name.localeCompare(b.name)}__webpack_require__.d(__webpack_exports__,"a",(function(){return actionTypeCompare}));const getIsEnabledValue=(actionType,preconfiguredConnectors)=>{let isEnabled=actionType.enabled;return!actionType.enabledInConfig&&preconfiguredConnectors&&preconfiguredConnectors.length>0&&(isEnabled=void 0!==preconfiguredConnectors.find(connector=>connector.actionTypeId===actionType.id)),isEnabled}},103:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(104);case"v7light":return __webpack_require__(106);case"v8dark":return __webpack_require__(108);case"v8light":return __webpack_require__(110)}},104:function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(105);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},105:function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actCheckActionTypeEnabled__disabledActionWarningCard{background-color:#25262E}.actAccordionActionForm{background-color:#25262E}.actAccordionActionForm .euiCard{box-shadow:none}.actAccordionActionForm__button{padding:12px}.actConnectorsListGrid .euiToolTipAnchor,.actConnectorsListGrid .euiCard{height:100%}\n",""]),module.exports=exports},106:function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(107);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},107:function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actCheckActionTypeEnabled__disabledActionWarningCard{background-color:#F5F7FA}.actAccordionActionForm{background-color:#F5F7FA}.actAccordionActionForm .euiCard{box-shadow:none}.actAccordionActionForm__button{padding:12px}.actConnectorsListGrid .euiToolTipAnchor,.actConnectorsListGrid .euiCard{height:100%}\n",""]),module.exports=exports},108:function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(109);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},109:function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actCheckActionTypeEnabled__disabledActionWarningCard{background-color:#25262E}.actAccordionActionForm{background-color:#25262E}.actAccordionActionForm .euiCard{box-shadow:none}.actAccordionActionForm__button{padding:12px}.actConnectorsListGrid .euiToolTipAnchor,.actConnectorsListGrid .euiCard{height:100%}\n",""]),module.exports=exports},110:function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(111);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},111:function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actCheckActionTypeEnabled__disabledActionWarningCard{background-color:#F5F7FA}.actAccordionActionForm{background-color:#F5F7FA}.actAccordionActionForm .euiCard{box-shadow:none}.actAccordionActionForm__button{padding:12px}.actConnectorsListGrid .euiToolTipAnchor,.actConnectorsListGrid .euiCard{height:100%}\n",""]),module.exports=exports},122:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return transformActionVariables})),__webpack_require__.d(__webpack_exports__,"a",(function(){return AlertProvidedActionVariables}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);function transformActionVariables(actionVariables){const alwaysProvidedVars=function(){const result=[];return result.push({name:AlertProvidedActionVariables.ruleId,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.actionVariables.ruleIdLabel",{defaultMessage:"The ID of the rule."})}),result.push({name:AlertProvidedActionVariables.ruleName,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.actionVariables.ruleNameLabel",{defaultMessage:"The name of the rule."})}),result.push({name:AlertProvidedActionVariables.ruleSpaceId,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.actionVariables.ruleSpaceIdLabel",{defaultMessage:"The space ID of the rule."})}),result.push({name:AlertProvidedActionVariables.ruleTags,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.actionVariables.ruleTagsLabel",{defaultMessage:"The tags of the rule."})}),result.push({name:AlertProvidedActionVariables.ruleType,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.actionVariables.ruleTypeLabel",{defaultMessage:"The type of rule."})}),result.push({name:AlertProvidedActionVariables.date,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.actionVariables.dateLabel",{defaultMessage:"The date the rule scheduled the action."})}),result.push({name:AlertProvidedActionVariables.alertId,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.actionVariables.alertIdLabel",{defaultMessage:"The ID of the alert that scheduled actions for the rule."})}),result.push({name:AlertProvidedActionVariables.alertActionGroup,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.actionVariables.alertActionGroupLabel",{defaultMessage:"The action group of the alert that scheduled actions for the rule."})}),result.push({name:AlertProvidedActionVariables.alertActionSubgroup,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.actionVariables.alertActionSubgroupLabel",{defaultMessage:"The action subgroup of the alert that scheduled actions for the rule."})}),result.push({name:AlertProvidedActionVariables.alertActionGroupName,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.actionVariables.alertActionGroupNameLabel",{defaultMessage:"The human readable name of the action group of the alert that scheduled actions for the rule."})}),result.push({name:"kibanaBaseUrl",description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.actionVariables.kibanaBaseUrlLabel",{defaultMessage:"The configured server.publicBaseUrl value or empty string if not configured."})}),result.push({name:LegacyAlertProvidedActionVariables.alertId,deprecated:!0,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.actionVariables.legacyAlertIdLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:AlertProvidedActionVariables.ruleId}})}),result.push({name:LegacyAlertProvidedActionVariables.alertName,deprecated:!0,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.actionVariables.legacyAlertNameLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:AlertProvidedActionVariables.ruleName}})}),result.push({name:LegacyAlertProvidedActionVariables.alertInstanceId,deprecated:!0,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.actionVariables.legacyAlertInstanceIdLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:AlertProvidedActionVariables.alertId}})}),result.push({name:LegacyAlertProvidedActionVariables.alertActionGroup,deprecated:!0,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.actionVariables.legacyAlertActionGroupLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:AlertProvidedActionVariables.alertActionGroup}})}),result.push({name:LegacyAlertProvidedActionVariables.alertActionGroupName,deprecated:!0,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.actionVariables.legacyAlertActionGroupNameLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:AlertProvidedActionVariables.alertActionGroupName}})}),result.push({name:LegacyAlertProvidedActionVariables.alertActionSubgroup,deprecated:!0,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.actionVariables.legacyAlertActionSubGroupLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:AlertProvidedActionVariables.alertActionSubgroup}})}),result.push({name:LegacyAlertProvidedActionVariables.spaceId,deprecated:!0,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.actionVariables.legacySpaceIdLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:AlertProvidedActionVariables.ruleSpaceId}})}),result.push({name:LegacyAlertProvidedActionVariables.tags,deprecated:!0,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.triggersActionsUI.actionVariables.legacyTagsLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:AlertProvidedActionVariables.ruleTags}})}),result}(),contextVars=actionVariables.context?prefixKeys(actionVariables.context,"context."):[],paramsVars=prefixKeys(actionVariables.params,"params."),stateVars=prefixKeys(actionVariables.state,"state.");return alwaysProvidedVars.concat(contextVars,paramsVars,stateVars)}let AlertProvidedActionVariables,LegacyAlertProvidedActionVariables;function prefixKeys(actionVariables,prefix){return actionVariables.map(actionVariable=>({...actionVariable,name:`${prefix}${actionVariable.name}`}))}!function(AlertProvidedActionVariables){AlertProvidedActionVariables.ruleId="rule.id",AlertProvidedActionVariables.ruleName="rule.name",AlertProvidedActionVariables.ruleSpaceId="rule.spaceId",AlertProvidedActionVariables.ruleTags="rule.tags",AlertProvidedActionVariables.ruleType="rule.type",AlertProvidedActionVariables.date="date",AlertProvidedActionVariables.alertId="alert.id",AlertProvidedActionVariables.alertActionGroup="alert.actionGroup",AlertProvidedActionVariables.alertActionGroupName="alert.actionGroupName",AlertProvidedActionVariables.alertActionSubgroup="alert.actionSubgroup"}(AlertProvidedActionVariables||(AlertProvidedActionVariables={})),function(LegacyAlertProvidedActionVariables){LegacyAlertProvidedActionVariables.alertId="alertId",LegacyAlertProvidedActionVariables.alertName="alertName",LegacyAlertProvidedActionVariables.alertInstanceId="alertInstanceId",LegacyAlertProvidedActionVariables.alertActionGroup="alertActionGroup",LegacyAlertProvidedActionVariables.alertActionGroupName="alertActionGroupName",LegacyAlertProvidedActionVariables.alertActionSubgroup="alertActionSubgroup",LegacyAlertProvidedActionVariables.tags="tags",LegacyAlertProvidedActionVariables.spaceId="spaceId"}(LegacyAlertProvidedActionVariables||(LegacyAlertProvidedActionVariables={}))},197:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(198);case"v7light":return __webpack_require__(200);case"v8dark":return __webpack_require__(202);case"v8light":return __webpack_require__(204)}},198:function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(199);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},199:function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actConnectorModal{z-index:9000}.euiComboBoxOptionsList{z-index:9001}\n",""]),module.exports=exports},200:function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(201);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},201:function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actConnectorModal{z-index:9000}.euiComboBoxOptionsList{z-index:9001}\n",""]),module.exports=exports},202:function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(203);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},203:function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actConnectorModal{z-index:9000}.euiComboBoxOptionsList{z-index:9001}\n",""]),module.exports=exports},204:function(module,exports,__webpack_require__){var api=__webpack_require__(70),content=__webpack_require__(205);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},205:function(module,exports,__webpack_require__){(exports=__webpack_require__(71)(!1)).push([module.i,".actConnectorModal{z-index:9000}.euiComboBoxOptionsList{z-index:9001}\n",""]),module.exports=exports},47:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ActionForm",(function(){return ActionForm})),__webpack_require__.d(__webpack_exports__,"default",(function(){return ActionForm}));var external_kbnSharedDeps_React_=__webpack_require__(1),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_KbnI18n_=__webpack_require__(0),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(52),external_kbnSharedDeps_ElasticEui_=__webpack_require__(15),action_connector_api=__webpack_require__(25),section_loading=__webpack_require__(88),action_connector_form=__webpack_require__(94),connector_reducer=__webpack_require__(95),lib_capabilities=(__webpack_require__(197),__webpack_require__(84)),kibana=__webpack_require__(72),value_validators=__webpack_require__(5);const ConnectorAddModal=({actionType:actionType,onClose:onClose,postSaveEventHandler:postSaveEventHandler,consumer:consumer,actionTypeRegistry:actionTypeRegistry})=>{const{http:http,notifications:{toasts:toasts},application:{capabilities:capabilities}}=Object(kibana.b)().services;let hasErrors=!1;const initialConnector=Object(external_kbnSharedDeps_React_.useMemo)(()=>({actionTypeId:actionType.id,config:{},secrets:{}}),[actionType.id]),[isSaving,setIsSaving]=Object(external_kbnSharedDeps_React_.useState)(!1),canSave=Object(lib_capabilities.d)(capabilities),reducer=Object(connector_reducer.a)(),[{connector:connector},dispatch]=Object(external_kbnSharedDeps_React_.useReducer)(reducer,{connector:initialConnector}),setConnector=value=>{dispatch({command:{type:"setConnector"},payload:{key:"connector",value:value}})},[serverError,setServerError]=Object(external_kbnSharedDeps_React_.useState)(void 0),closeModal=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setConnector(initialConnector),setServerError(void 0),onClose()},[initialConnector,onClose]),actionTypeModel=actionTypeRegistry.get(actionType.id),{configErrors:configErrors,connectorBaseErrors:connectorBaseErrors,connectorErrors:connectorErrors,secretsErrors:secretsErrors}=Object(action_connector_form.b)(connector,actionTypeModel);hasErrors=!!Object.keys(connectorErrors).find(errorKey=>connectorErrors[errorKey].length>=1);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModal,{className:"actConnectorModal","data-test-subj":"connectorAddModal",onClose:closeModal},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeaderTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},actionTypeModel&&actionTypeModel.iconClass?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:actionTypeModel.iconClass,size:"xl"})):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",{id:"flyoutTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"{actionTypeName} connector",id:"xpack.triggersActionsUI.sections.addModalConnectorForm.flyoutTitle",values:{actionTypeName:actionType.name}}))))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalBody,null,external_kbnSharedDeps_React_default.a.createElement(action_connector_form.a,{connector:connector,actionTypeName:actionType.name,dispatch:dispatch,serverError:serverError,errors:connectorErrors,actionTypeRegistry:actionTypeRegistry,consumer:consumer})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalFooter,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:closeModal},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.addModalConnectorForm.cancelButtonLabel",{defaultMessage:"Cancel"})),canSave?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{fill:!0,color:"secondary","data-test-subj":"saveActionButtonModal",type:"submit",iconType:"check",isLoading:isSaving,onClick:async()=>{if(hasErrors)return void setConnector(Object(value_validators.b)(connector,configErrors,secretsErrors,connectorBaseErrors));setIsSaving(!0);const savedAction=await(async()=>await Object(action_connector_api.a)({http:http,connector:connector}).then(savedConnector=>(toasts&&toasts.addSuccess(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.addModalConnectorForm.updateSuccessNotificationText",{defaultMessage:"Created '{connectorName}'",values:{connectorName:savedConnector.name}})),savedConnector)).catch(errorRes=>{setServerError(errorRes)}))();setIsSaving(!1),savedAction&&(postSaveEventHandler&&postSaveEventHandler(savedAction),closeModal())}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.addModalConnectorForm.saveButtonLabel",defaultMessage:"Save"})):null))};var external_kbnSharedDeps_Lodash_=__webpack_require__(3),types=__webpack_require__(16),check_action_type_enabled=__webpack_require__(96),action_variables=__webpack_require__(122);const preconfiguredMessage=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.actionForm.preconfiguredTitleMessage",{defaultMessage:"(preconfigured)"}),ActionTypeForm=({actionItem:actionItem,actionConnector:actionConnector,actionParamsErrors:actionParamsErrors,index:index,onAddConnector:onAddConnector,onConnectorSelected:onConnectorSelected,onDeleteAction:onDeleteAction,setActionParamsProperty:setActionParamsProperty,actionTypesIndex:actionTypesIndex,connectors:connectors,defaultActionGroupId:defaultActionGroupId,defaultActionMessage:defaultActionMessage,messageVariables:messageVariables,actionGroups:actionGroups,setActionGroupIdByIndex:setActionGroupIdByIndex,actionTypeRegistry:actionTypeRegistry,isActionGroupDisabledForActionType:isActionGroupDisabledForActionType,defaultParams:defaultParams})=>{var _actionGroups$find,_selectedActionGroup$;const{application:{capabilities:capabilities}}=Object(kibana.b)().services,[isOpen,setIsOpen]=Object(external_kbnSharedDeps_React_.useState)(!0),[availableActionVariables,setAvailableActionVariables]=Object(external_kbnSharedDeps_React_.useState)([]),defaultActionGroup=null==actionGroups?void 0:actionGroups.find(({id:id})=>id===defaultActionGroupId),selectedActionGroup=null!==(_actionGroups$find=null==actionGroups?void 0:actionGroups.find(({id:id})=>id===actionItem.group))&&void 0!==_actionGroups$find?_actionGroups$find:defaultActionGroup,[actionGroup,setActionGroup]=Object(external_kbnSharedDeps_React_.useState)();Object(external_kbnSharedDeps_React_.useEffect)(()=>{if(setAvailableActionVariables(messageVariables?function(actionVariables,actionGroup){const transformedActionVariables=Object(action_variables.b)(null!=actionGroup&&actionGroup.omitOptionalMessageVariables?Object(external_kbnSharedDeps_Lodash_.pick)(actionVariables,...types.f):actionVariables);return Object(external_kbnSharedDeps_Lodash_.partition)(transformedActionVariables,v=>!0!==v.deprecated).reduce((acc,curr)=>[...acc,...curr.sort((a,b)=>a.name.toUpperCase().localeCompare(b.name.toUpperCase()))],[])}(messageVariables,selectedActionGroup):[]),defaultParams)for(const[key,paramValue]of Object.entries(defaultParams))void 0!==actionItem.params[key]&&null!==actionItem.params[key]||setActionParamsProperty(key,paramValue,index)},[actionItem.group]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{if(defaultParams&&actionGroup)for(const[key,paramValue]of Object.entries(defaultParams))setActionParamsProperty(key,paramValue,index)},[actionGroup]);const canSave=Object(lib_capabilities.d)(capabilities),actionType=actionTypesIndex[actionItem.actionTypeId],isActionGroupDisabled=(actionGroupId,actionTypeId)=>!!isActionGroupDisabledForActionType&&isActionGroupDisabledForActionType(actionGroupId,actionTypeId),optionsList=connectors.filter(connectorItem=>connectorItem.actionTypeId===actionItem.actionTypeId&&(actionType.enabledInConfig||connectorItem.isPreconfigured)).map(({name:name,id:id,isPreconfigured:isPreconfigured})=>({label:`${name} ${isPreconfigured?preconfiguredMessage:""}`,key:id,id:id})),actionTypeRegistered=actionTypeRegistry.get(actionConnector.actionTypeId);if(!actionTypeRegistered)return null;const ParamsFieldsComponent=actionTypeRegistered.actionParamsFields,checkEnabledResult=Object(check_action_type_enabled.a)(actionTypesIndex[actionConnector.actionTypeId],connectors.filter(connector=>connector.isPreconfigured)),accordionContent=checkEnabledResult.isEnabled?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,actionGroups&&selectedActionGroup&&setActionGroupIdByIndex&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{component:"div"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormControlLayout,{fullWidth:!0,prepend:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormLabel,{htmlFor:"addNewActionConnectorActionGroup-"+actionItem.actionTypeId},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertForm.actionRunWhenInActionGroup",defaultMessage:"Run when"}))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSuperSelect,{fullWidth:!0,id:"addNewActionConnectorActionGroup-"+actionItem.actionTypeId,"data-test-subj":"addNewActionConnectorActionGroup-"+index,options:actionGroups.map(({id:value,name:name})=>{return{value:value,inputDisplay:(actionGroupId=value,actionGroupName=name,actionTypeId=actionItem.actionTypeId,isActionGroupDisabledForActionType&&isActionGroupDisabledForActionType(actionGroupId,actionTypeId)?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertForm.addNewActionConnectorActionGroup.display",{defaultMessage:"{actionGroupName} (Not Currently Supported)",values:{actionGroupName:actionGroupName}}):actionGroupName),disabled:isActionGroupDisabled(value,actionItem.actionTypeId),"data-test-subj":`addNewActionConnectorActionGroup-${index}-option-${value}`};var actionGroupId,actionGroupName,actionTypeId}),valueOfSelected:selectedActionGroup.id,onChange:group=>{setActionGroupIdByIndex(group,index),setActionGroup(group)}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{component:"div"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{fullWidth:!0,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertForm.actionIdLabel",defaultMessage:"{connectorInstance} connector",values:{connectorInstance:actionTypesIndex?actionTypesIndex[actionConnector.actionTypeId].name:actionConnector.actionTypeId}}),labelAppend:canSave&&actionTypesIndex&&actionTypesIndex[actionConnector.actionTypeId].enabledInConfig?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"xs","data-test-subj":"addNewActionConnectorButton-"+actionItem.actionTypeId,onClick:onAddConnector},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Add connector",id:"xpack.triggersActionsUI.sections.alertForm.addNewConnectorEmptyButton"})):null},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiComboBox,{fullWidth:!0,singleSelection:{asPlainText:!0},options:optionsList,id:"selectActionConnector-"+actionItem.id,"data-test-subj":"selectActionConnector-"+actionItem.actionTypeId,selectedOptions:(actionItemId=>{const selectedConnector=connectors.find(connector=>connector.id===actionItemId);if(!selectedConnector||actionTypesIndex&&!actionTypesIndex[selectedConnector.actionTypeId].enabledInConfig&&!selectedConnector.isPreconfigured)return[];const optionTitle=`${selectedConnector.name} ${selectedConnector.isPreconfigured?preconfiguredMessage:""}`;return[{label:optionTitle,value:optionTitle,id:actionItemId,"data-test-subj":"itemActionConnector"}]})(actionItem.id),onChange:selectedOptions=>{var _selectedOptions$0$id;onConnectorSelected(null!==(_selectedOptions$0$id=selectedOptions[0].id)&&void 0!==_selectedOptions$0$id?_selectedOptions$0$id:"")},isClearable:!1})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xl"}),ParamsFieldsComponent?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiErrorBoundary,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Suspense,{fallback:null},external_kbnSharedDeps_React_default.a.createElement(ParamsFieldsComponent,{actionParams:actionItem.params,index:index,errors:actionParamsErrors.errors,editAction:setActionParamsProperty,messageVariables:availableActionVariables,defaultMessage:null!==(_selectedActionGroup$=null==selectedActionGroup?void 0:selectedActionGroup.defaultActionMessage)&&void 0!==_selectedActionGroup$?_selectedActionGroup$:defaultActionMessage,actionConnector:actionConnector}))):null):checkEnabledResult.messageCard;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,{key:index},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiAccordion,{initialIsOpen:!0,id:index.toString(),onToggle:setIsOpen,paddingSize:"l",className:"actAccordionActionForm",buttonContentClassName:"actAccordionActionForm__button","data-test-subj":"alertActionAccordion-"+index,buttonContent:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"l",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:actionTypeRegistered.iconClass,size:"m"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"{actionConnectorName}",id:"xpack.triggersActionsUI.sections.alertForm.existingAlertActionTypeEditTitle",values:{actionConnectorName:`${actionConnector.name} ${actionConnector.isPreconfigured?preconfiguredMessage:""}`}})),selectedActionGroup&&!isOpen&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBadge,null,selectedActionGroup.name)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},!1===checkEnabledResult.isEnabled&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIconTip,{type:"alert",color:"danger",content:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertForm.actionDisabledTitle",{defaultMessage:"This action is disabled"}),position:"right"})))))))),extraAction:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"minusInCircle",color:"danger",className:"actAccordionActionForm__extraAction","aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertForm.accordion.deleteIconAriaLabel",{defaultMessage:"Delete"}),onClick:onDeleteAction})},accordionContent),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}))};const AddConnectorInline=({actionTypesIndex:actionTypesIndex,actionItem:actionItem,index:index,connectors:connectors,onAddConnector:onAddConnector,onDeleteConnector:onDeleteConnector,onSelectConnector:onSelectConnector,actionTypeRegistry:actionTypeRegistry,emptyActionsIds:emptyActionsIds})=>{const{application:{capabilities:capabilities}}=Object(kibana.b)().services,canSave=Object(lib_capabilities.d)(capabilities),[connectorOptionsList,setConnectorOptionsList]=Object(external_kbnSharedDeps_React_.useState)([]),[isEmptyActionId,setIsEmptyActionId]=Object(external_kbnSharedDeps_React_.useState)(!1),[errors,setErrors]=Object(external_kbnSharedDeps_React_.useState)([]),actionTypeName=actionTypesIndex?actionTypesIndex[actionItem.actionTypeId].name:actionItem.actionTypeId,actionType=actionTypesIndex[actionItem.actionTypeId],actionTypeRegistered=actionTypeRegistry.get(actionItem.actionTypeId),noConnectorsLabel=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertForm.emptyConnectorsLabel",defaultMessage:"No {actionTypeName} connectors",values:{actionTypeName:actionTypeName}}),unableToLoadConnectorLabel=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{color:"danger"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertForm.unableToLoadConnectorTitle",defaultMessage:"Unable to load connector."}));Object(external_kbnSharedDeps_React_.useEffect)(()=>{if(connectors){const altConnectorOptions=connectors.filter(connector=>connector.actionTypeId===actionItem.actionTypeId&&((null==actionType?void 0:actionType.enabledInConfig)||connector.isPreconfigured)).map(({name:name,id:id,isPreconfigured:isPreconfigured})=>({label:`${name} ${isPreconfigured?"(preconfigured)":""}`,key:id,id:id}));setConnectorOptionsList(altConnectorOptions),altConnectorOptions.length>0&&setErrors([`Unable to load ${actionTypeRegistered.actionTypeTitle} connector`])}setIsEmptyActionId(!!emptyActionsIds.find(emptyId=>actionItem.id===emptyId))},[]);const connectorsDropdown=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{component:"div"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{fullWidth:!0,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertForm.connectorAddInline.actionIdLabel",defaultMessage:"Use another {connectorInstance} connector",values:{connectorInstance:actionTypeName}}),labelAppend:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"xs","data-test-subj":"addNewActionConnectorButton-"+actionItem.actionTypeId,onClick:onAddConnector},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Add connector",id:"xpack.triggersActionsUI.sections.alertForm.connectorAddInline.addNewConnectorEmptyButton"})),error:errors,isInvalid:errors.length>0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiComboBox,{fullWidth:!0,singleSelection:{asPlainText:!0},options:connectorOptionsList,id:`selectActionConnector-${actionItem.id}-${index}`,"data-test-subj":`selectActionConnector-${actionItem.actionTypeId}-${index}`,onChange:selectedOptions=>{setTimeout(()=>{var _selectedOptions$0$id;onSelectConnector(null!==(_selectedOptions$0$id=selectedOptions[0].id)&&void 0!==_selectedOptions$0$id?_selectedOptions$0$id:"")})},isClearable:!1}))));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,{key:index},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiAccordion,{initialIsOpen:!0,id:index.toString(),className:"actAccordionActionForm",buttonContentClassName:"actAccordionActionForm__button","data-test-subj":"alertActionAccordion-"+index,buttonContent:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:actionTypeRegistered.iconClass,size:"m"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"{actionConnectorName}",id:"xpack.triggersActionsUI.sections.alertForm.newAlertActionTypeEditTitle",values:{actionConnectorName:actionTypeRegistered.actionTypeTitle}})))),!isEmptyActionId&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIconTip,{type:"alert",size:"m",color:"danger","data-test-subj":"alertActionAccordionErrorTooltip",content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Unable to load connector.",id:"xpack.triggersActionsUI.sections.alertForm.unableToLoadConnectorTitle'"})}))),extraAction:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"minusInCircle",color:"danger",className:"actAccordionActionForm__extraAction","aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertForm.accordion.deleteIconAriaLabel",{defaultMessage:"Delete"}),onClick:onDeleteConnector}),paddingSize:"l"},canSave?connectorOptionsList.length>0?connectorsDropdown:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{title:isEmptyActionId?noConnectorsLabel:unableToLoadConnectorLabel,actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{color:"primary",fill:!0,size:"s","data-test-subj":"createActionConnectorButton-"+index,onClick:onAddConnector},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertForm.addConnectorButtonLabel",defaultMessage:"Create a connector"}))}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:noConnectorsLabel},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertForm.unauthorizedToCreateForEmptyConnectors",defaultMessage:"Only authorized users can configure a connector. Contact your administrator."})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xs"}))};var action_type_compare=__webpack_require__(102),constants=__webpack_require__(21);const ActionForm=({actions:actions,defaultActionGroupId:defaultActionGroupId,setActionIdByIndex:setActionIdByIndex,setActionGroupIdByIndex:setActionGroupIdByIndex,setActions:setActions,setActionParamsProperty:setActionParamsProperty,actionTypes:actionTypes,messageVariables:messageVariables,actionGroups:actionGroups,defaultActionMessage:defaultActionMessage,setHasActionsDisabled:setHasActionsDisabled,setHasActionsWithBrokenConnector:setHasActionsWithBrokenConnector,actionTypeRegistry:actionTypeRegistry,getDefaultActionParams:getDefaultActionParams,isActionGroupDisabledForActionType:isActionGroupDisabledForActionType})=>{const{http:http,notifications:{toasts:toasts}}=Object(kibana.b)().services,[addModalVisible,setAddModalVisibility]=Object(external_kbnSharedDeps_React_.useState)(!1),[activeActionItem,setActiveActionItem]=Object(external_kbnSharedDeps_React_.useState)(void 0),[isAddActionPanelOpen,setIsAddActionPanelOpen]=Object(external_kbnSharedDeps_React_.useState)(!0),[connectors,setConnectors]=Object(external_kbnSharedDeps_React_.useState)([]),[isLoadingConnectors,setIsLoadingConnectors]=Object(external_kbnSharedDeps_React_.useState)(!1),[isLoadingActionTypes,setIsLoadingActionTypes]=Object(external_kbnSharedDeps_React_.useState)(!1),[actionTypesIndex,setActionTypesIndex]=Object(external_kbnSharedDeps_React_.useState)(void 0),[emptyActionsIds,setEmptyActionsIds]=Object(external_kbnSharedDeps_React_.useState)([]),closeAddConnectorModal=Object(external_kbnSharedDeps_React_.useCallback)(()=>setAddModalVisibility(!1),[setAddModalVisibility]);Object(external_kbnSharedDeps_React_.useEffect)(()=>{(async()=>{try{setIsLoadingActionTypes(!0);const registeredActionTypes=(null!=actionTypes?actionTypes:await Object(action_connector_api.d)({http:http})).sort((a,b)=>a.name.localeCompare(b.name)),index={};for(const actionTypeItem of registeredActionTypes)index[actionTypeItem.id]=actionTypeItem;setActionTypesIndex(index)}catch(e){toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertForm.unableToLoadConnectorTypesMessage",{defaultMessage:"Unable to load connector types"})})}finally{setIsLoadingActionTypes(!1)}})()},[]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{(async()=>{try{setIsLoadingConnectors(!0);const loadedConnectors=await Object(action_connector_api.e)({http:http});setConnectors(loadedConnectors)}catch(e){toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertForm.unableToLoadActionsMessage",{defaultMessage:"Unable to load connectors"})})}finally{setIsLoadingConnectors(!1)}})()},[]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{connectors.length>0&&actionTypesIndex&&(()=>{const preconfiguredConnectors=connectors.filter(connector=>connector.isPreconfigured),hasActionsDisabled=actions.some(action=>actionTypesIndex&&!actionTypesIndex[action.actionTypeId].enabled&&!Object(check_action_type_enabled.a)(actionTypesIndex[action.actionTypeId],preconfiguredConnectors).isEnabled);setHasActionsDisabled&&setHasActionsDisabled(hasActionsDisabled)})()},[connectors,actionTypesIndex]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{const hasActionWithBrokenConnector=actions.some(action=>!connectors.find(connector=>connector.id===action.id));setHasActionsWithBrokenConnector&&setHasActionsWithBrokenConnector(hasActionWithBrokenConnector)},[actions,connectors]);let actionTypeNodes=null,hasDisabledByLicenseActionTypes=!1;if(actionTypesIndex){const preconfiguredConnectors=connectors.filter(connector=>connector.isPreconfigured);actionTypeNodes=actionTypeRegistry.list().filter(({id:id})=>null!=actionTypes?actionTypes:!constants.DEFAULT_HIDDEN_ACTION_TYPES.includes(id)&&!constants.DEFAULT_HIDDEN_ONLY_ON_ALERTS_ACTION_TYPES.includes(id)).filter(item=>actionTypesIndex[item.id]).filter(item=>!!item.actionParamsFields).sort((a,b)=>Object(action_type_compare.a)(actionTypesIndex[a.id],actionTypesIndex[b.id],preconfiguredConnectors)).map((function(item,index){const actionType=actionTypesIndex[item.id],checkEnabledResult=Object(check_action_type_enabled.a)(actionTypesIndex[item.id],preconfiguredConnectors);if(!actionType.enabledInConfig&&!checkEnabledResult.isEnabled)return null;actionType.enabledInLicense||(hasDisabledByLicenseActionTypes=!0);const keyPadItem=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiKeyPadMenuItem,{key:index,isDisabled:!checkEnabledResult.isEnabled,"data-test-subj":item.id+"-ActionTypeSelectOption",label:actionTypesIndex[item.id].name,onClick:()=>function(actionTypeModel){if(!defaultActionGroupId)return void toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.sections.alertForm.unableToAddAction",{defaultMessage:"Unable to add action, because default action group is not defined"})});setIsAddActionPanelOpen(!1);const actionTypeConnectors=connectors.filter(field=>field.actionTypeId===actionTypeModel.id);actionTypeConnectors.length>0&&(actions.push({id:"",actionTypeId:actionTypeModel.id,group:defaultActionGroupId,params:{}}),setActionIdByIndex(actionTypeConnectors[0].id,actions.length-1)),0===actionTypeConnectors.length&&(actions.push({id:"",actionTypeId:actionTypeModel.id,group:defaultActionGroupId,params:{}}),setActionIdByIndex(actions.length.toString(),actions.length-1),setEmptyActionsIds([...emptyActionsIds,actions.length.toString()]))}(item)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{size:"xl",type:item.iconClass}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,key:"keypad-"+item.id},checkEnabledResult.isEnabled&&keyPadItem,!1===checkEnabledResult.isEnabled&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"top",content:checkEnabledResult.message},keyPadItem))}))}return isLoadingConnectors?external_kbnSharedDeps_React_default.a.createElement(section_loading.a,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertForm.loadingConnectorsDescription",defaultMessage:"Loading connectors…"})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Actions",id:"xpack.triggersActionsUI.sections.alertForm.actionSectionsTitle"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),actionTypesIndex&&actions.map((actionItem,index)=>{var _actionTypeRegistry$g;const actionConnector=connectors.find(field=>field.id===actionItem.id);if(!actionConnector)return external_kbnSharedDeps_React_default.a.createElement(AddConnectorInline,{actionTypesIndex:actionTypesIndex,actionItem:actionItem,index:index,key:"action-form-action-at-"+index,actionTypeRegistry:actionTypeRegistry,emptyActionsIds:emptyActionsIds,connectors:connectors,onDeleteConnector:()=>{const updatedActions=actions.filter((_item,i)=>i!==index);setActions(updatedActions),setIsAddActionPanelOpen(0===updatedActions.filter(item=>item.id!==actionItem.id).length),setActiveActionItem(void 0)},onAddConnector:()=>{setActiveActionItem({actionTypeId:actionItem.actionTypeId,indices:actions.map((item,idx)=>item.id===actionItem.id?idx:-1).filter(idx=>idx>=0)}),setAddModalVisibility(!0)},onSelectConnector:connectorId=>{setActionIdByIndex(connectorId,index)}});const actionParamsErrors=null===(_actionTypeRegistry$g=actionTypeRegistry.get(actionItem.actionTypeId))||void 0===_actionTypeRegistry$g?void 0:_actionTypeRegistry$g.validateParams(actionItem.params);return external_kbnSharedDeps_React_default.a.createElement(ActionTypeForm,{actionItem:actionItem,actionConnector:actionConnector,actionParamsErrors:actionParamsErrors,index:index,key:"action-form-action-at-"+index,setActionParamsProperty:setActionParamsProperty,actionTypesIndex:actionTypesIndex,connectors:connectors,defaultActionGroupId:defaultActionGroupId,messageVariables:messageVariables,actionGroups:actionGroups,defaultActionMessage:defaultActionMessage,defaultParams:null==getDefaultActionParams?void 0:getDefaultActionParams(actionItem.actionTypeId,actionItem.group),isActionGroupDisabledForActionType:isActionGroupDisabledForActionType,setActionGroupIdByIndex:setActionGroupIdByIndex,onAddConnector:()=>{setActiveActionItem({actionTypeId:actionItem.actionTypeId,indices:[index]}),setAddModalVisibility(!0)},onConnectorSelected:id=>{setActionIdByIndex(id,index)},actionTypeRegistry:actionTypeRegistry,onDeleteAction:()=>{const updatedActions=actions.filter((_item,i)=>i!==index);setActions(updatedActions),setIsAddActionPanelOpen(0===updatedActions.filter(item=>item.id!==actionItem.id).length),setActiveActionItem(void 0)}})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),isAddActionPanelOpen?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{id:"alertActionTypeTitle",justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Select a connector type",id:"xpack.triggersActionsUI.sections.alertForm.selectConnectorTypeTitle"})))),hasDisabledByLicenseActionTypes&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:constants.VIEW_LICENSE_OPTIONS_LINK,target:"_blank",external:!0,className:"actActionForm__getMoreActionsLink"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Get more connectors",id:"xpack.triggersActionsUI.sections.actionForm.getMoreConnectorsTitle"})))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"m",wrap:!0},isLoadingActionTypes?external_kbnSharedDeps_React_default.a.createElement(section_loading.a,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertForm.loadingConnectorTypesDescription",defaultMessage:"Loading connector types…"})):actionTypeNodes)):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{size:"s","data-test-subj":"addAlertActionButton",onClick:()=>setIsAddActionPanelOpen(!0)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertForm.addActionButtonLabel",defaultMessage:"Add action"})))),actionTypesIndex&&activeActionItem&&addModalVisible?external_kbnSharedDeps_React_default.a.createElement(ConnectorAddModal,{actionType:actionTypesIndex[activeActionItem.actionTypeId],onClose:closeAddConnectorModal,postSaveEventHandler:savedAction=>{connectors.push(savedAction);(activeActionItem.indices||[]).forEach(index=>setActionIdByIndex(savedAction.id,index))},actionTypeRegistry:actionTypeRegistry}):null)}},70:function(module,exports,__webpack_require__){"use strict";var memo,isOldIE=function(){return void 0===memo&&(memo=Boolean(window&&document&&document.all&&!window.atob)),memo},getTarget=function(){var memo={};return function(target){if(void 0===memo[target]){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}}(),stylesInDom=[];function getIndexByIdentifier(identifier){for(var result=-1,i=0;i<stylesInDom.length;i++)if(stylesInDom[i].identifier===identifier){result=i;break}return result}function modulesToDom(list,options){for(var idCountMap={},identifiers=[],i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],count=idCountMap[id]||0,identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier),obj={css:item[1],media:item[2],sourceMap:item[3]};-1!==index?(stylesInDom[index].references++,stylesInDom[index].updater(obj)):stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1}),identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style"),attributes=options.attributes||{};if(void 0===attributes.nonce){var nonce=__webpack_require__.nc;nonce&&(attributes.nonce=nonce)}if(Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])})),"function"==typeof options.insert)options.insert(style);else{var target=getTarget(options.insert||"head");if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");target.appendChild(style)}return style}var textStore,replaceText=(textStore=[],function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")});function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}function applyToTag(style,options,obj){var css=obj.css,media=obj.media,sourceMap=obj.sourceMap;if(media?style.setAttribute("media",media):style.removeAttribute("media"),sourceMap&&btoa&&(css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")),style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}var singleton=null,singletonCounter=0;function addStyle(obj,options){var style,update,remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else style=insertStyleElement(options),update=applyToTag.bind(null,style,options),remove=function(){!function(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style)}(style)};return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}module.exports=function(list,options){(options=options||{}).singleton||"boolean"==typeof options.singleton||(options.singleton=isOldIE());var lastIdentifiers=modulesToDom(list=list||[],options);return function(newList){if(newList=newList||[],"[object Array]"===Object.prototype.toString.call(newList)){for(var i=0;i<lastIdentifiers.length;i++){var index=getIndexByIdentifier(lastIdentifiers[i]);stylesInDom[index].references--}for(var newLastIdentifiers=modulesToDom(newList,options),_i=0;_i<lastIdentifiers.length;_i++){var _index=getIndexByIdentifier(lastIdentifiers[_i]);0===stylesInDom[_index].references&&(stylesInDom[_index].updater(),stylesInDom.splice(_index,1))}lastIdentifiers=newLastIdentifiers}}}},71:function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];return list.toString=function(){return this.map((function(item){var content=function(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=(sourceMap=cssMapping,base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64),"/*# ".concat(data," */")),sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}var sourceMap,base64,data;return[content].join("\n")}(item,useSourceMap);return item[2]?"@media ".concat(item[2]," {").concat(content,"}"):content})).join("")},list.i=function(modules,mediaQuery,dedupe){"string"==typeof modules&&(modules=[[null,modules,""]]);var alreadyImportedModules={};if(dedupe)for(var i=0;i<this.length;i++){var id=this[i][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);dedupe&&alreadyImportedModules[item[0]]||(mediaQuery&&(item[2]?item[2]="".concat(mediaQuery," and ").concat(item[2]):item[2]=mediaQuery),list.push(item))}},list}},72:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return public_.KibanaContextProvider})),__webpack_require__.d(__webpack_exports__,"b",(function(){return useTypedKibana}));var public_=__webpack_require__(51);const useTypedKibana=()=>Object(public_.useKibana)()},84:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return hasShowActionsCapability})),__webpack_require__.d(__webpack_exports__,"d",(function(){return hasSaveActionsCapability})),__webpack_require__.d(__webpack_exports__,"c",(function(){return hasExecuteActionsCapability})),__webpack_require__.d(__webpack_exports__,"b",(function(){return hasDeleteActionsCapability})),__webpack_require__.d(__webpack_exports__,"a",(function(){return hasAllPrivilege}));const hasShowActionsCapability=capabilities=>{var _capabilities$actions;return null==capabilities||null===(_capabilities$actions=capabilities.actions)||void 0===_capabilities$actions?void 0:_capabilities$actions.show},hasSaveActionsCapability=capabilities=>{var _capabilities$actions2;return null==capabilities||null===(_capabilities$actions2=capabilities.actions)||void 0===_capabilities$actions2?void 0:_capabilities$actions2.save},hasExecuteActionsCapability=capabilities=>{var _capabilities$actions3;return null==capabilities||null===(_capabilities$actions3=capabilities.actions)||void 0===_capabilities$actions3?void 0:_capabilities$actions3.execute},hasDeleteActionsCapability=capabilities=>{var _capabilities$actions4;return null==capabilities||null===(_capabilities$actions4=capabilities.actions)||void 0===_capabilities$actions4?void 0:_capabilities$actions4.delete};function hasAllPrivilege(alert,alertType){var _alertType$authorized,_alertType$authorized2;return null!==(_alertType$authorized=null==alertType||null===(_alertType$authorized2=alertType.authorizedConsumers[alert.consumer])||void 0===_alertType$authorized2?void 0:_alertType$authorized2.all)&&void 0!==_alertType$authorized&&_alertType$authorized}},88:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SectionLoading}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_elastic_eui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(15);const SectionLoading=({children:children})=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiEmptyPrompt,{title:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiLoadingSpinner,{size:"xl"}),body:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiText,{color:"subdued"},children),"data-test-subj":"sectionLoading"})},94:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getConnectorErrors})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ActionConnectorForm}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_elastic_eui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(15),_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(52),_lib_capabilities__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(84),_common_lib_kibana__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(72),_components_section_loading__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(88);function getConnectorErrors(connector,actionTypeModel){const connectorValidationResult=null==actionTypeModel?void 0:actionTypeModel.validateConnector(connector),configErrors=connectorValidationResult.config?connectorValidationResult.config.errors:{},secretsErrors=connectorValidationResult.secrets?connectorValidationResult.secrets.errors:{},connectorBaseErrors=function(actionObject){const validationResult={errors:{}},verrors={name:new Array};return validationResult.errors=verrors,actionObject.name||verrors.name.push(_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__.i18n.translate("xpack.triggersActionsUI.sections.actionConnectorForm.error.requiredNameText",{defaultMessage:"Name is required."})),validationResult}(connector).errors;return{configErrors:configErrors,secretsErrors:secretsErrors,connectorBaseErrors:connectorBaseErrors,connectorErrors:{...configErrors,...secretsErrors,...connectorBaseErrors}}}const ActionConnectorForm=({connector:connector,dispatch:dispatch,actionTypeName:actionTypeName,serverError:serverError,errors:errors,actionTypeRegistry:actionTypeRegistry,consumer:consumer})=>{const{docLinks:docLinks,application:{capabilities:capabilities}}=Object(_common_lib_kibana__WEBPACK_IMPORTED_MODULE_5__.b)().services,canSave=Object(_lib_capabilities__WEBPACK_IMPORTED_MODULE_4__.d)(capabilities),setActionProperty=(key,value)=>{dispatch({command:{type:"setProperty"},payload:{key:key,value:value}})},actionTypeRegistered=actionTypeRegistry.get(connector.actionTypeId);if(!actionTypeRegistered)return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiCallOut,{title:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__.i18n.translate("xpack.triggersActionsUI.sections.actionConnectorForm.actions.connectorTypeConfigurationWarningTitleText",{defaultMessage:"Connector type not registered"}),color:"warning",iconType:"help"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiText,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionConnectorForm.actions.connectorTypeConfigurationWarningDescriptionText",defaultMessage:"To create this connector, you must configure at least one {connectorType} account. {docLink}",values:{connectorType:null!=actionTypeName?actionTypeName:connector.actionTypeId,docLink:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiLink,{href:docLinks.links.alerting.actionTypes,target:"_blank"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionConnectorForm.actions.actionConfigurationWarningHelpLinkText",defaultMessage:"Learn more."}))}})))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiSpacer,null));const FieldsComponent=actionTypeRegistered.actionConnectorFields;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiForm,{isInvalid:!!serverError,error:null==serverError?void 0:serverError.body.message},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiFormRow,{id:"actionName",fullWidth:!0,label:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionConnectorForm.actionNameLabel",defaultMessage:"Connector name"}),isInvalid:errors.name.length>0&&void 0!==connector.name,error:errors.name},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiFieldText,{fullWidth:!0,readOnly:!canSave,isInvalid:errors.name.length>0&&void 0!==connector.name,name:"name",placeholder:"Untitled","data-test-subj":"nameInput",value:connector.name||"",onChange:e=>{setActionProperty("name",e.target.value)},onBlur:()=>{connector.name||setActionProperty("name","")}})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiSpacer,{size:"m"}),null!==FieldsComponent?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiTitle,{size:"xxs"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h4",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionConnectorForm.connectorSettingsLabel",defaultMessage:"Connector settings"}))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiSpacer,{size:"s"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiErrorBoundary,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Suspense,{fallback:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_section_loading__WEBPACK_IMPORTED_MODULE_6__.a,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionConnectorForm.loadingConnectorSettingsDescription",defaultMessage:"Loading connector settings…"}))},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FieldsComponent,{action:connector,errors:errors,readOnly:!canSave,editActionConfig:(key,value)=>{dispatch({command:{type:"setConfigProperty"},payload:{key:key,value:value}})},editActionSecrets:(key,value)=>{dispatch({command:{type:"setSecretsProperty"},payload:{key:key,value:value}})},consumer:consumer})))):null)}},95:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createConnectorReducer}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3);const createConnectorReducer=()=>(state,action)=>{const{connector:connector}=state;switch(action.command.type){case"setConnector":{const{key:key,value:value}=action.payload;return"connector"===key?{...state,connector:value}:state}case"setProperty":{const{key:key,value:value}=action.payload;return Object(lodash__WEBPACK_IMPORTED_MODULE_0__.isEqual)(connector[key],value)?state:{...state,connector:{...connector,[key]:value}}}case"setConfigProperty":{const{key:key,value:value}=action.payload;return Object(lodash__WEBPACK_IMPORTED_MODULE_0__.isEqual)(connector.config[key],value)?state:{...state,connector:{...connector,config:{...connector.config,[key]:value}}}}case"setSecretsProperty":{const{key:key,value:value}=action.payload;return Object(lodash__WEBPACK_IMPORTED_MODULE_0__.isEqual)(connector.secrets[key],value)?state:{...state,connector:{...connector,secrets:{...connector.secrets,[key]:value}}}}}}},96:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return checkActionTypeEnabled})),__webpack_require__.d(__webpack_exports__,"a",(function(){return checkActionFormActionTypeEnabled}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(52),_elastic_eui__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(15),_common_constants__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(21);__webpack_require__(103);const getLicenseCheckResult=actionType=>({isEnabled:!1,message:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__.i18n.translate("xpack.triggersActionsUI.checkActionTypeEnabled.actionTypeDisabledByLicenseMessage",{defaultMessage:"This connector requires a {minimumLicenseRequired} license.",values:{minimumLicenseRequired:Object(lodash__WEBPACK_IMPORTED_MODULE_1__.upperFirst)(actionType.minimumLicenseRequired)}}),messageCard:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_4__.EuiCard,{titleSize:"xs",title:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__.i18n.translate("xpack.triggersActionsUI.sections.alertForm.actionTypeDisabledByLicenseMessageTitle",{defaultMessage:"This feature requires a {minimumLicenseRequired} license.",values:{minimumLicenseRequired:Object(lodash__WEBPACK_IMPORTED_MODULE_1__.upperFirst)(actionType.minimumLicenseRequired)}}),description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__.i18n.translate("xpack.triggersActionsUI.sections.alertForm.actionTypeDisabledByLicenseMessageDescription",{defaultMessage:"To re-enable this action, please upgrade your license."}),className:"actCheckActionTypeEnabled__disabledActionWarningCard",children:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_4__.EuiLink,{href:_common_constants__WEBPACK_IMPORTED_MODULE_5__.VIEW_LICENSE_OPTIONS_LINK,target:"_blank"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage,{defaultMessage:"View license options",id:"xpack.triggersActionsUI.sections.alertForm.actionTypeDisabledByLicenseLinkTitle"}))})}),configurationCheckResult={isEnabled:!1,message:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__.i18n.translate("xpack.triggersActionsUI.checkActionTypeEnabled.actionTypeDisabledByConfigMessage",{defaultMessage:"This connector is disabled by the Kibana configuration."}),messageCard:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_4__.EuiCard,{title:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__.i18n.translate("xpack.triggersActionsUI.sections.alertForm.actionTypeDisabledByConfigMessageTitle",{defaultMessage:"This feature is disabled by the Kibana configuration."}),description:"",className:"actCheckActionTypeEnabled__disabledActionWarningCard"})};function checkActionTypeEnabled(actionType){return!1===(null==actionType?void 0:actionType.enabledInLicense)?getLicenseCheckResult(actionType):!1===(null==actionType?void 0:actionType.enabledInConfig)?configurationCheckResult:{isEnabled:!0}}function checkActionFormActionTypeEnabled(actionType,preconfiguredConnectors){return!1===(null==actionType?void 0:actionType.enabledInLicense)?getLicenseCheckResult(actionType):!1!==(null==actionType?void 0:actionType.enabledInConfig)||preconfiguredConnectors.find(preconfiguredConnector=>preconfiguredConnector.actionTypeId===actionType.id)?{isEnabled:!0}:configurationCheckResult}}}]);