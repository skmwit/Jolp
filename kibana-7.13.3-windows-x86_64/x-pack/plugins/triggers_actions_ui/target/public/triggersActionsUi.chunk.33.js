/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[33],{67:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ThresholdExpression",(function(){return ThresholdExpression})),__webpack_require__.d(__webpack_exports__,"default",(function(){return ThresholdExpression}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_kbn_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_elastic_eui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(15),_constants__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(21),_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(87);const ThresholdExpression=({thresholdComparator:thresholdComparator,errors:errors,onChangeSelectedThresholdComparator:onChangeSelectedThresholdComparator,onChangeSelectedThreshold:onChangeSelectedThreshold,customComparators:customComparators,display:display="inline",threshold:threshold=[],popupPosition:popupPosition})=>{const comparators=null!=customComparators?customComparators:_constants__WEBPACK_IMPORTED_MODULE_3__.builtInComparators,[alertThresholdPopoverOpen,setAlertThresholdPopoverOpen]=Object(react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[comparator,setComparator]=Object(react__WEBPACK_IMPORTED_MODULE_0__.useState)(thresholdComparator),[numRequiredThresholds,setNumRequiredThresholds]=Object(react__WEBPACK_IMPORTED_MODULE_0__.useState)(comparators[thresholdComparator].requiredValues),andThresholdText=_kbn_i18n__WEBPACK_IMPORTED_MODULE_1__.i18n.translate("xpack.triggersActionsUI.common.expressionItems.threshold.andLabel",{defaultMessage:"AND"});return Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{if(comparators[comparator].requiredValues!==numRequiredThresholds){const thresholdValues=threshold.slice(0,comparators[comparator].requiredValues);onChangeSelectedThreshold(thresholdValues),setNumRequiredThresholds(comparators[comparator].requiredValues)}},[comparator]),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiPopover,{button:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiExpression,{"data-test-subj":"thresholdPopover",description:comparators[comparator].text,value:(threshold||[]).slice(0,numRequiredThresholds).join(` ${andThresholdText} `),isActive:Boolean(alertThresholdPopoverOpen||errors.threshold0&&errors.threshold0.length||errors.threshold1&&errors.threshold1.length),onClick:()=>{setAlertThresholdPopoverOpen(!0)},display:"inline"===display?"inline":"columns",isInvalid:!!(errors.threshold0&&errors.threshold0.length||(errors.threshold1&&errors.threshold1.length)>0)}),isOpen:alertThresholdPopoverOpen,closePopover:()=>{setAlertThresholdPopoverOpen(!1)},ownFocus:!0,display:"fullWidth"===display?"block":"inlineBlock",anchorPosition:null!=popupPosition?popupPosition:"downLeft",repositionOnScroll:!0},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_4__.a,{onClose:()=>setAlertThresholdPopoverOpen(!1)},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,comparators[comparator].text)),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFlexGroup,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFlexItem,{grow:!1},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiSelect,{"data-test-subj":"comparatorOptionsComboBox",value:comparator,onChange:e=>{setComparator(e.target.value),onChangeSelectedThresholdComparator(e.target.value)},options:Object.values(comparators).map(({text:text,value:value})=>({text:text,value:value}))})),Array.from(Array(numRequiredThresholds)).map((_notUsed,i)=>{var _errors$,_errors$2;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,{key:"threshold"+i},i>0?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFlexItem,{grow:!1,className:"watcherThresholdWatchInBetweenComparatorText"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiText,null,andThresholdText)):null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFlexItem,{grow:!1},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFormRow,{isInvalid:(null===(_errors$=errors["threshold"+i])||void 0===_errors$?void 0:_errors$.length)>0||!threshold[i],error:errors["threshold"+i]},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiFieldNumber,{"data-test-subj":"alertThresholdInput",min:0,value:threshold&&void 0!==threshold[i]?threshold[i]:"",isInvalid:(null===(_errors$2=errors["threshold"+i])||void 0===_errors$2?void 0:_errors$2.length)>0||!threshold[i],onChange:e=>{const{value:value}=e.target,thresholdVal=""!==value?parseFloat(value):void 0,newThreshold=[...threshold];void 0!==thresholdVal?newThreshold[i]=thresholdVal:delete newThreshold[i],onChangeSelectedThreshold(newThreshold)}}))))}))))}},87:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ClosablePopoverTitle}));var external_kbnSharedDeps_React_=__webpack_require__(1),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_KbnI18n_=__webpack_require__(0),external_kbnSharedDeps_ElasticEui_=__webpack_require__(15);const ClosablePopoverTitle=({children:children,onClose:onClose})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopoverTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,children),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"cross",color:"danger","aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.triggersActionsUI.common.expressionItems.components.closablePopoverTitle.closeLabel",{defaultMessage:"Close"}),onClick:()=>onClose()}))))}}]);