/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(modules){function webpackJsonpCallback(data){for(var moduleId,chunkId,chunkIds=data[0],moreModules=data[1],i=0,resolves=[];i<chunkIds.length;i++)chunkId=chunkIds[i],Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]&&resolves.push(installedChunks[chunkId][0]),installedChunks[chunkId]=0;for(moduleId in moreModules)Object.prototype.hasOwnProperty.call(moreModules,moduleId)&&(modules[moduleId]=moreModules[moduleId]);for(parentJsonpFunction&&parentJsonpFunction(data);resolves.length;)resolves.shift()()}var installedModules={},installedChunks={0:0};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.e=function(chunkId){var promises=[],installedChunkData=installedChunks[chunkId];if(0!==installedChunkData)if(installedChunkData)promises.push(installedChunkData[2]);else{var promise=new Promise((function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var onScriptComplete,script=document.createElement("script");script.charset="utf-8",script.timeout=120,__webpack_require__.nc&&script.setAttribute("nonce",__webpack_require__.nc),script.src=function(chunkId){return __webpack_require__.p+"spaces.chunk."+chunkId+".js"}(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null,clearTimeout(timeout);var chunk=installedChunks[chunkId];if(0!==chunk){if(chunk){var errorType=event&&("load"===event.type?"missing":event.type),realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")",error.name="ChunkLoadError",error.type=errorType,error.request=realSrc,chunk[1](error)}installedChunks[chunkId]=void 0}};var timeout=setTimeout((function(){onScriptComplete({type:"timeout",target:script})}),12e4);script.onerror=script.onload=onScriptComplete,document.head.appendChild(script)}return Promise.all(promises)},__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__.oe=function(err){throw console.error(err),err};var jsonpArray=window.spaces_bundle_jsonpfunction=window.spaces_bundle_jsonpfunction||[],oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback,jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;__webpack_require__(__webpack_require__.s=26)}([function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getSpaceAvatarComponent})),__webpack_require__.d(__webpack_exports__,"b",(function(){return space_attributes.a})),__webpack_require__.d(__webpack_exports__,"d",(function(){return space_attributes.c})),__webpack_require__.d(__webpack_exports__,"c",(function(){return space_attributes.b}));var external_kbnSharedDeps_React_=__webpack_require__(0),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);const getSpaceAvatarComponent=async()=>{const{SpaceAvatarInternal:SpaceAvatarInternal}=await __webpack_require__.e(8).then(__webpack_require__.bind(null,178));return props=>external_kbnSharedDeps_React_default.a.createElement(SpaceAvatarInternal,props)};var space_attributes=__webpack_require__(16)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return DEFAULT_SPACE_ID})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ALL_SPACES_ID})),__webpack_require__.d(__webpack_exports__,"f",(function(){return UNKNOWN_SPACE})),__webpack_require__.d(__webpack_exports__,"e",(function(){return SPACE_SEARCH_COUNT_THRESHOLD})),__webpack_require__.d(__webpack_exports__,"d",(function(){return MAX_SPACE_INITIALS})),__webpack_require__.d(__webpack_exports__,"c",(function(){return ENTER_SPACE_PATH}));const DEFAULT_SPACE_ID="default",ALL_SPACES_ID="*",UNKNOWN_SPACE="?",SPACE_SEARCH_COUNT_THRESHOLD=8,MAX_SPACE_INITIALS=2,ENTER_SPACE_PATH="/spaces/enter"},function(module,exports){module.exports=__kbnSharedDeps__.ReactRouterDom},function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/savedObjectsManagement/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.RxjsOperators},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=__webpack_require__(21),react_1=__webpack_require__(0),useAsyncFn_1=tslib_1.__importDefault(__webpack_require__(28));exports.default=function(fn,deps){void 0===deps&&(deps=[]);var _a=useAsyncFn_1.default(fn,deps,{loading:!0}),state=_a[0],callback=_a[1];return react_1.useEffect((function(){callback()}),[callback]),state}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return suspense_error_boundary_SuspenseErrorBoundary}));var external_kbnSharedDeps_ElasticEui_=__webpack_require__(2),external_kbnSharedDeps_React_=__webpack_require__(0),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);class suspense_error_boundary_SuspenseErrorBoundary extends external_kbnSharedDeps_React_.Component{constructor(...args){var obj,key,value;super(...args),value={error:null},(key="state")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}static getDerivedStateFromError(error){return{error:error}}componentDidCatch(error){const{notifications:notifications}=this.props;if(notifications){const title=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.uiApi.errorBoundaryToastTitle",{defaultMessage:"Failed to load Kibana asset"}),toastMessage=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.uiApi.errorBoundaryToastMessage",{defaultMessage:"Reload page to continue."});notifications.toasts.addError(error,{title:title,toastMessage:toastMessage})}}render(){const{children:children,notifications:notifications}=this.props,{error:error}=this.state;return!notifications||error?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Suspense,{fallback:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,null)},children)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"isReservedSpace",(function(){return is_reserved_space.a})),__webpack_require__.d(__webpack_exports__,"MAX_SPACE_INITIALS",(function(){return constants.d})),__webpack_require__.d(__webpack_exports__,"SPACE_SEARCH_COUNT_THRESHOLD",(function(){return constants.e})),__webpack_require__.d(__webpack_exports__,"ENTER_SPACE_PATH",(function(){return constants.c})),__webpack_require__.d(__webpack_exports__,"addSpaceIdToPath",(function(){return addSpaceIdToPath})),__webpack_require__.d(__webpack_exports__,"getSpaceIdFromPath",(function(){return getSpaceIdFromPath})),__webpack_require__.d(__webpack_exports__,"GetAllSpacesOptions",(function(){return types.GetAllSpacesOptions})),__webpack_require__.d(__webpack_exports__,"GetAllSpacesPurpose",(function(){return types.GetAllSpacesPurpose})),__webpack_require__.d(__webpack_exports__,"GetSpaceResult",(function(){return types.GetSpaceResult}));var is_reserved_space=__webpack_require__(17),constants=__webpack_require__(4);const spaceContextRegex=/^\/s\/([a-z0-9_\-]+)/;function getSpaceIdFromPath(requestBasePath,serverBasePath){null==requestBasePath&&(requestBasePath="/"),null==serverBasePath&&(serverBasePath="/");const matchResult=function(requestBasePath,serverBasePath){if(serverBasePath&&"/"!==serverBasePath&&requestBasePath.startsWith(serverBasePath))return requestBasePath.substr(serverBasePath.length);return requestBasePath}(requestBasePath,serverBasePath).match(spaceContextRegex);if(!matchResult||0===matchResult.length)return{spaceId:constants.b,pathHasExplicitSpaceIdentifier:!1};const[,spaceId]=matchResult;if(!spaceId)throw new Error("Unable to determine Space ID from request path: "+requestBasePath);return{spaceId:spaceId,pathHasExplicitSpaceIdentifier:!0}}function addSpaceIdToPath(basePath="/",spaceId="",requestedPath=""){if(requestedPath&&!requestedPath.startsWith("/"))throw new Error("path must start with a /");const normalizedBasePath=basePath.endsWith("/")?basePath.slice(0,-1):basePath;return spaceId&&spaceId!==constants.b?`${normalizedBasePath}/s/${spaceId}${requestedPath}`:`${normalizedBasePath}${requestedPath}`||"/"}var types=__webpack_require__(8)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return context.b})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getSpacesContextProviderWrapper}));var context=__webpack_require__(20),external_kbnSharedDeps_React_=__webpack_require__(0),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);const getSpacesContextProviderWrapper=async internalProps=>{const{SpacesContextWrapperInternal:SpacesContextWrapperInternal}=await __webpack_require__.e(10).then(__webpack_require__.bind(null,181));return({children:children,...props})=>external_kbnSharedDeps_React_default.a.createElement(SpacesContextWrapperInternal,{...internalProps,...props,children:children})}},function(module,exports){module.exports=__kbnSharedDeps__.Lodash},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getSpaceColor})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getSpaceInitials})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getSpaceImageUrl}));var _elastic_eui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(13);function getSpaceColor(space={}){const{color:color,name:name=""}=space;if(color)return color;const firstCodePoint=name.codePointAt(0)||97;return _elastic_eui__WEBPACK_IMPORTED_MODULE_0__.VISUALIZATION_COLORS[firstCodePoint%_elastic_eui__WEBPACK_IMPORTED_MODULE_0__.VISUALIZATION_COLORS.length]}function getSpaceInitials(space={}){const{initials:initials,name:name=""}=space;if(initials)return initials;const words=name.split(" "),numInitials=Math.min(_common__WEBPACK_IMPORTED_MODULE_1__.MAX_SPACE_INITIALS,words.length);return words.splice(numInitials,words.length),words.map(word=>word.substring(0,1)).join("")}function getSpaceImageUrl(space={}){const{imageUrl:imageUrl}=space;return imageUrl||""}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return isReservedSpace}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15);function isReservedSpace(space){return Object(lodash__WEBPACK_IMPORTED_MODULE_0__.get)(space,"_reserved",!1)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getSpacesFeatureDescription}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);let spacesFeatureDescription;const getSpacesFeatureDescription=()=>(spacesFeatureDescription||(spacesFeatureDescription=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.spaces.featureDescription",{defaultMessage:"Organize your dashboards and other saved objects into meaningful categories."})),spacesFeatureDescription)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DEFAULT_OBJECT_NOUN}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);const DEFAULT_OBJECT_NOUN=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.spaces.shareToSpace.objectNoun",{defaultMessage:"object"})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return useSpaces})),__webpack_require__.d(__webpack_exports__,"a",(function(){return createSpacesReactContext}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);const{useContext:useContext,createElement:createElement,createContext:createContext}=react__WEBPACK_IMPORTED_MODULE_0__,context=createContext({}),useSpaces=()=>useContext(context),createSpacesReactContext=(services,spacesManager,shareToSpacesDataPromise)=>{const value={spacesManager:spacesManager,shareToSpacesDataPromise:shareToSpacesDataPromise,services:services};return{value:value,Provider:({children:children})=>createElement(context.Provider,{value:value,children:children}),Consumer:context.Consumer}}},function(module,exports){module.exports=__kbnSharedDeps__.TsLib},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getCopyToSpaceFlyoutComponent})),__webpack_require__.d(__webpack_exports__,"a",(function(){return copy_saved_objects_to_space_service_CopySavedObjectsToSpaceService}));var external_kbnSharedDeps_React_=__webpack_require__(0),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);const getCopyToSpaceFlyoutComponent=async()=>{const{CopyToSpaceFlyoutInternal:CopyToSpaceFlyoutInternal}=await __webpack_require__.e(1).then(__webpack_require__.bind(null,183));return props=>external_kbnSharedDeps_React_default.a.createElement(CopyToSpaceFlyoutInternal,props)};var useAsync=__webpack_require__(11),useAsync_default=__webpack_require__.n(useAsync),external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),public_=__webpack_require__(9),suspense_error_boundary=__webpack_require__(12);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const LazyCopyToSpaceFlyout=Object(external_kbnSharedDeps_React_.lazy)(()=>getCopyToSpaceFlyoutComponent().then(component=>({default:component}))),Wrapper=({getStartServices:getStartServices,props:props})=>{const{value:startServices=[{notifications:void 0}]}=useAsync_default()(getStartServices),[{notifications:notifications}]=startServices;return notifications?external_kbnSharedDeps_React_default.a.createElement(suspense_error_boundary.a,{notifications:notifications},external_kbnSharedDeps_React_default.a.createElement(LazyCopyToSpaceFlyout,props)):null};class copy_saved_objects_to_space_action_CopyToSpaceSavedObjectsManagementAction extends public_.SavedObjectsManagementAction{constructor(getStartServices){super(),this.getStartServices=getStartServices,_defineProperty(this,"id","copy_saved_objects_to_space"),_defineProperty(this,"euiAction",{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.management.copyToSpace.actionTitle",{defaultMessage:"Copy to space"}),description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.management.copyToSpace.actionDescription",{defaultMessage:"Make a copy of this saved object in one or more spaces"}),icon:"copy",type:"icon",available:object=>"agnostic"!==object.meta.namespaceType,onClick:object=>{this.start(object)}}),_defineProperty(this,"render",()=>{var _this$record$namespac;if(!this.record)throw new Error("No record available! `render()` was likely called before `start()`.");const props={onClose:this.onClose,savedObjectTarget:{type:this.record.type,id:this.record.id,namespaces:null!==(_this$record$namespac=this.record.namespaces)&&void 0!==_this$record$namespac?_this$record$namespac:[],title:this.record.meta.title,icon:this.record.meta.icon}};return external_kbnSharedDeps_React_default.a.createElement(Wrapper,{getStartServices:this.getStartServices,props:props})}),_defineProperty(this,"onClose",()=>{this.finish()})}}class copy_saved_objects_to_space_service_CopySavedObjectsToSpaceService{setup({savedObjectsManagementSetup:savedObjectsManagementSetup,getStartServices:getStartServices}){const action=new copy_saved_objects_to_space_action_CopyToSpaceSavedObjectsManagementAction(getStartServices);savedObjectsManagementSetup.actions.register(action)}}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/home/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.Rxjs},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(27);__kbnBundles__.define("plugin/spaces/public",__webpack_require__,30),__kbnBundles__.define("plugin/spaces/common",__webpack_require__,13)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__.spaces},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=__webpack_require__(21),react_1=__webpack_require__(0),useMountedState_1=tslib_1.__importDefault(__webpack_require__(29));exports.default=function(fn,deps,initialState){void 0===deps&&(deps=[]),void 0===initialState&&(initialState={loading:!1});var lastCallId=react_1.useRef(0),isMounted=useMountedState_1.default(),_a=react_1.useState(initialState),state=_a[0],set=_a[1];return[state,react_1.useCallback((function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var callId=++lastCallId.current;return set((function(prevState){return tslib_1.__assign(tslib_1.__assign({},prevState),{loading:!0})})),fn.apply(void 0,args).then((function(value){return isMounted()&&callId===lastCallId.current&&set({value:value,loading:!1}),value}),(function(error){return isMounted()&&callId===lastCallId.current&&set({error:error,loading:!1}),error}))}),deps)]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__webpack_require__(0);exports.default=function(){var mountedRef=react_1.useRef(!1),get=react_1.useCallback((function(){return mountedRef.current}),[]);return react_1.useEffect((function(){return mountedRef.current=!0,function(){mountedRef.current=!1}})),get}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"getSpaceColor",(function(){return space_avatar.b})),__webpack_require__.d(__webpack_exports__,"getSpaceImageUrl",(function(){return space_avatar.c})),__webpack_require__.d(__webpack_exports__,"getSpaceInitials",(function(){return space_avatar.d})),__webpack_require__.d(__webpack_exports__,"SpacesPluginSetup",(function(){})),__webpack_require__.d(__webpack_exports__,"SpacesPluginStart",(function(){})),__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));var external_kbnSharedDeps_React_=__webpack_require__(0),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_ElasticEui_=__webpack_require__(2),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(7);const AdvancedSettingsSubtitle=props=>{const[activeSpace,setActiveSpace]=Object(external_kbnSharedDeps_React_.useState)(null);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{props.getActiveSpace().then(space=>setActiveSpace(space))},[props]),activeSpace?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{color:"primary",iconType:"spacesApp",title:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.spaces.management.advancedSettingsSubtitle.applyingSettingsOnPageToSpaceDescription",defaultMessage:"The settings on this page apply to the {spaceName} space, unless otherwise specified.",values:{spaceName:external_kbnSharedDeps_React_default.a.createElement("strong",null,activeSpace.name)}}))})):null};var space_avatar=__webpack_require__(3);const LazySpaceAvatar=Object(external_kbnSharedDeps_React_.lazy)(()=>Object(space_avatar.a)().then(component=>({default:component}))),AdvancedSettingsTitle=props=>{const[activeSpace,setActiveSpace]=Object(external_kbnSharedDeps_React_.useState)(null);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{props.getActiveSpace().then(space=>setActiveSpace(space))},[props]),activeSpace?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s",responsive:!1,alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Suspense,{fallback:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,null)},external_kbnSharedDeps_React_default.a.createElement(LazySpaceAvatar,{space:activeSpace}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{style:{marginLeft:"10px"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h1",{"data-test-subj":"managementSettingsTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.spaces.management.advancedSettingsTitle.settingsTitle",defaultMessage:"Settings"}))))):null};class advanced_settings_service_AdvancedSettingsService{setup({getActiveSpace:getActiveSpace,componentRegistry:componentRegistry}){componentRegistry.register(componentRegistry.componentType.PAGE_TITLE_COMPONENT,()=>external_kbnSharedDeps_React_default.a.createElement(AdvancedSettingsTitle,{getActiveSpace:getActiveSpace}),!0),componentRegistry.register(componentRegistry.componentType.PAGE_SUBTITLE_COMPONENT,()=>external_kbnSharedDeps_React_default.a.createElement(AdvancedSettingsSubtitle,{getActiveSpace:getActiveSpace}),!0)}}var copy_saved_objects_to_space=__webpack_require__(23),external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),public_=__webpack_require__(24),constants=__webpack_require__(18);var external_kbnSharedDeps_ReactDom_=__webpack_require__(6),external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_),external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(5),kibanaReact_public_=__webpack_require__(22);const spacesManagementApp=Object.freeze({id:"spaces",create({getStartServices:getStartServices,spacesManager:spacesManager}){return{id:this.id,order:2,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.displayName",{defaultMessage:"Spaces"}),async mount({element:element,setBreadcrumbs:setBreadcrumbs,history:history}){const[startServices,{SpacesGridPage:SpacesGridPage},{ManageSpacePage:ManageSpacePage}]=await Promise.all([getStartServices(),__webpack_require__.e(6).then(__webpack_require__.bind(null,187)),__webpack_require__.e(4).then(__webpack_require__.bind(null,182))]),[{notifications:notifications,i18n:i18nStart,application:application},{features:features}]=startServices,spacesBreadcrumbs=[{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.management.breadcrumb",{defaultMessage:"Spaces"}),href:"/"}],SpacesGridPageWithBreadcrumbs=()=>(setBreadcrumbs(spacesBreadcrumbs),external_kbnSharedDeps_React_default.a.createElement(SpacesGridPage,{capabilities:application.capabilities,getFeatures:features.getFeatures,notifications:notifications,spacesManager:spacesManager,history:history,getUrlForApp:application.getUrlForApp})),CreateSpacePageWithBreadcrumbs=()=>(setBreadcrumbs([...spacesBreadcrumbs,{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.management.createSpaceBreadcrumb",{defaultMessage:"Create"})}]),external_kbnSharedDeps_React_default.a.createElement(ManageSpacePage,{capabilities:application.capabilities,getFeatures:features.getFeatures,notifications:notifications,spacesManager:spacesManager,history:history,getUrlForApp:application.getUrlForApp})),EditSpacePageWithBreadcrumbs=()=>{const{spaceId:spaceId}=Object(external_kbnSharedDeps_ReactRouterDom_.useParams)();return external_kbnSharedDeps_React_default.a.createElement(ManageSpacePage,{capabilities:application.capabilities,getFeatures:features.getFeatures,notifications:notifications,spacesManager:spacesManager,spaceId:spaceId,onLoadSpace:space=>{setBreadcrumbs([...spacesBreadcrumbs,{text:space.name,href:"/edit/"+encodeURIComponent(space.id)}])},history:history,getUrlForApp:application.getUrlForApp})};return Object(external_kbnSharedDeps_ReactDom_.render)(external_kbnSharedDeps_React_default.a.createElement(i18nStart.Context,null,external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_.RedirectAppLinks,{application:application},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Router,{history:history},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Switch,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:["","/"],exact:!0},external_kbnSharedDeps_React_default.a.createElement(SpacesGridPageWithBreadcrumbs,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:"/create"},external_kbnSharedDeps_React_default.a.createElement(CreateSpacePageWithBreadcrumbs,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:"/edit/:spaceId"},external_kbnSharedDeps_React_default.a.createElement(EditSpacePageWithBreadcrumbs,null)))))),element),()=>{Object(external_kbnSharedDeps_ReactDom_.unmountComponentAtNode)(element)}}}}});class management_service_ManagementService{constructor(){var obj,key,value;value=void 0,(key="registeredSpacesManagementApp")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}setup({getStartServices:getStartServices,management:management,spacesManager:spacesManager}){this.registeredSpacesManagementApp=management.sections.section.kibana.registerApp(spacesManagementApp.create({getStartServices:getStartServices,spacesManager:spacesManager}))}stop(){this.disableSpacesApp()}disableSpacesApp(){this.registeredSpacesManagementApp&&this.registeredSpacesManagementApp.disable()}}var savedObjectsManagement_public_=__webpack_require__(9);function share_saved_objects_to_space_action_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const Wrapper=({spacesApiUi:spacesApiUi,props:props})=>{const LazyComponent=Object(external_kbnSharedDeps_React_.useMemo)(()=>spacesApiUi.components.getShareToSpaceFlyout,[spacesApiUi]);return external_kbnSharedDeps_React_default.a.createElement(LazyComponent,props)};class share_saved_objects_to_space_action_ShareToSpaceSavedObjectsManagementAction extends savedObjectsManagement_public_.SavedObjectsManagementAction{constructor(spacesApiUi){super(),this.spacesApiUi=spacesApiUi,share_saved_objects_to_space_action_defineProperty(this,"id","share_saved_objects_to_space"),share_saved_objects_to_space_action_defineProperty(this,"euiAction",{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.actionTitle",{defaultMessage:"Share to space"}),description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.actionDescription",{defaultMessage:"Share this saved object to one or more spaces"}),icon:"share",type:"icon",available:object=>{const hasCapability=!this.actionContext||!!this.actionContext.capabilities.savedObjectsManagement.shareIntoSpace;return"multiple"===object.meta.namespaceType&&hasCapability},onClick:object=>{this.isDataChanged=!1,this.start(object)}}),share_saved_objects_to_space_action_defineProperty(this,"refreshOnFinish",()=>this.isDataChanged),share_saved_objects_to_space_action_defineProperty(this,"isDataChanged",!1),share_saved_objects_to_space_action_defineProperty(this,"render",()=>{var _this$record$namespac;if(!this.record)throw new Error("No record available! `render()` was likely called before `start()`.");const props={savedObjectTarget:{type:this.record.type,id:this.record.id,namespaces:null!==(_this$record$namespac=this.record.namespaces)&&void 0!==_this$record$namespac?_this$record$namespac:[],title:this.record.meta.title,icon:this.record.meta.icon},flyoutIcon:"share",onUpdate:()=>this.isDataChanged=!0,onClose:this.onClose,enableCreateCopyCallout:!0,enableCreateNewSpaceLink:!0};return external_kbnSharedDeps_React_default.a.createElement(Wrapper,{spacesApiUi:this.spacesApiUi,props:props})}),share_saved_objects_to_space_action_defineProperty(this,"onClose",()=>{this.finish()})}}class share_saved_objects_to_space_service_ShareSavedObjectsToSpaceService{setup({savedObjectsManagementSetup:savedObjectsManagementSetup,spacesApiUi:spacesApiUi}){const action=new share_saved_objects_to_space_action_ShareToSpaceSavedObjectsManagementAction(spacesApiUi);savedObjectsManagementSetup.actions.register(action)}}const getShareToSpaceFlyoutComponent=async()=>{const{ShareToSpaceFlyoutInternal:ShareToSpaceFlyoutInternal}=await __webpack_require__.e(3).then(__webpack_require__.bind(null,184));return props=>external_kbnSharedDeps_React_default.a.createElement(ShareToSpaceFlyoutInternal,props)};var external_kbnSharedDeps_RxjsOperators_=__webpack_require__(10),components_constants=__webpack_require__(19);function createRedirectLegacyUrl(getStartServices){return async function(path,objectNoun=components_constants.a){const[{notifications:notifications,application:application}]=await getStartServices(),{currentAppId$:currentAppId$,navigateToApp:navigateToApp}=application,appId=await currentAppId$.pipe(Object(external_kbnSharedDeps_RxjsOperators_.first)()).toPromise(),title=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.redirectLegacyUrlToast.title",{defaultMessage:"We redirected you to a new URL"}),text=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.redirectLegacyUrlToast.text",{defaultMessage:"The {objectNoun} you're looking for has a new location. Use this URL from now on.",values:{objectNoun:objectNoun}});notifications.toasts.addInfo({title:title,text:text}),await navigateToApp(appId,{replace:!0,path:path})}}const spaceSelectorApp=Object.freeze({id:"space_selector",create({application:application,getStartServices:getStartServices,spacesManager:spacesManager}){application.register({id:this.id,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.spaceSelector.appTitle",{defaultMessage:"Select a space"}),chromeless:!0,appRoute:"/spaces/space_selector",mount:async params=>{const[[coreStart],{renderSpaceSelectorApp:renderSpaceSelectorApp}]=await Promise.all([getStartServices(),__webpack_require__.e(2).then(__webpack_require__.bind(null,186))]);return renderSpaceSelectorApp(coreStart.i18n,params.element,{spacesManager:spacesManager,serverBasePath:coreStart.http.basePath.serverBasePath})}})}});var external_kbnSharedDeps_Rxjs_=__webpack_require__(25);function spaces_manager_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class spaces_manager_SpacesManager{constructor(http){this.http=http,spaces_manager_defineProperty(this,"activeSpace$",new external_kbnSharedDeps_Rxjs_.BehaviorSubject(null)),spaces_manager_defineProperty(this,"serverBasePath",void 0),spaces_manager_defineProperty(this,"_onActiveSpaceChange$",void 0),this.serverBasePath=http.basePath.serverBasePath,this._onActiveSpaceChange$=this.activeSpace$.asObservable().pipe(Object(external_kbnSharedDeps_RxjsOperators_.skipWhile)(v=>null==v))}get onActiveSpaceChange$(){return this.activeSpace$.value||this.refreshActiveSpace(),this._onActiveSpaceChange$}async getSpaces(options={}){const{purpose:purpose,includeAuthorizedPurposes:includeAuthorizedPurposes}=options,query={purpose:purpose,include_authorized_purposes:includeAuthorizedPurposes};return await this.http.get("/api/spaces/space",{query:query})}async getSpace(id){return await this.http.get("/api/spaces/space/"+encodeURIComponent(id))}async getActiveSpace({forceRefresh:forceRefresh=!1}={}){if(this.isAnonymousPath())throw new Error("Cannot retrieve the active space for anonymous paths");return!forceRefresh&&this.activeSpace$.value||await this.refreshActiveSpace(),this.activeSpace$.value}async createSpace(space){await this.http.post("/api/spaces/space",{body:JSON.stringify(space)})}async updateSpace(space){await this.http.put("/api/spaces/space/"+encodeURIComponent(space.id),{query:{overwrite:!0},body:JSON.stringify(space)});const activeSpaceId=(await this.getActiveSpace()).id;space.id===activeSpaceId&&this.refreshActiveSpace()}async deleteSpace(space){await this.http.delete("/api/spaces/space/"+encodeURIComponent(space.id))}async copySavedObjects(objects,spaces,includeReferences,createNewCopies,overwrite){return this.http.post("/api/spaces/_copy_saved_objects",{body:JSON.stringify({objects:objects,spaces:spaces,includeReferences:includeReferences,createNewCopies:createNewCopies,...createNewCopies?{overwrite:!1}:{overwrite:overwrite}})})}async resolveCopySavedObjectsErrors(objects,retries,includeReferences,createNewCopies){return this.http.post("/api/spaces/_resolve_copy_saved_objects_errors",{body:JSON.stringify({objects:objects,includeReferences:includeReferences,createNewCopies:createNewCopies,retries:retries})})}async getShareSavedObjectPermissions(type){return this.http.get("/internal/security/_share_saved_object_permissions",{query:{type:type}}).catch(err=>{var _err$body;if(404===(null==err||null===(_err$body=err.body)||void 0===_err$body?void 0:_err$body.statusCode))return{shareToAllSpaces:!0};throw err})}async shareSavedObjectAdd(object,spaces){return this.http.post("/api/spaces/_share_saved_object_add",{body:JSON.stringify({object:object,spaces:spaces})})}async shareSavedObjectRemove(object,spaces){return this.http.post("/api/spaces/_share_saved_object_remove",{body:JSON.stringify({object:object,spaces:spaces})})}redirectToSpaceSelector(){window.location.href=this.serverBasePath+"/spaces/space_selector"}async refreshActiveSpace(){if(this.isAnonymousPath())return;const activeSpace=await this.http.get("/internal/spaces/_active_space");this.activeSpace$.next(activeSpace)}isAnonymousPath(){return this.http.anonymousPaths.isAnonymous(window.location.pathname)}}const getSpaceListComponent=async()=>{const{SpaceListInternal:SpaceListInternal}=await __webpack_require__.e(9).then(__webpack_require__.bind(null,180));return props=>external_kbnSharedDeps_React_default.a.createElement(SpaceListInternal,props)};var spaces_context=__webpack_require__(14),useAsync=__webpack_require__(11),useAsync_default=__webpack_require__.n(useAsync),suspense_error_boundary=__webpack_require__(12);const LazyWrapper=({fn:fn,getStartServices:getStartServices,props:props})=>{const{value:startServices=[{notifications:void 0}]}=useAsync_default()(getStartServices),[{notifications:notifications}]=startServices,LazyComponent=Object(external_kbnSharedDeps_React_.useMemo)(()=>Object(external_kbnSharedDeps_React_.lazy)(()=>fn().then(x=>({default:x}))),[fn]);return notifications?external_kbnSharedDeps_React_default.a.createElement(suspense_error_boundary.a,{notifications:notifications},external_kbnSharedDeps_React_default.a.createElement(LazyComponent,props)):null},getComponents=({spacesManager:spacesManager,getStartServices:getStartServices})=>{function wrapLazy(fn){return props=>external_kbnSharedDeps_React_default.a.createElement(LazyWrapper,{fn:fn,getStartServices:getStartServices,props:props})}return{getSpacesContextProvider:wrapLazy(()=>Object(spaces_context.a)({spacesManager:spacesManager,getStartServices:getStartServices})),getShareToSpaceFlyout:wrapLazy(getShareToSpaceFlyoutComponent),getSpaceList:wrapLazy(getSpaceListComponent),getLegacyUrlConflict:wrapLazy(()=>(async internalProps=>{const{LegacyUrlConflictInternal:LegacyUrlConflictInternal}=await __webpack_require__.e(7).then(__webpack_require__.bind(null,179));return props=>external_kbnSharedDeps_React_default.a.createElement(LegacyUrlConflictInternal,{...internalProps,...props})})({getStartServices:getStartServices})),getSpaceAvatar:wrapLazy(space_avatar.a)}},getUiApi=({spacesManager:spacesManager,getStartServices:getStartServices})=>({components:getComponents({spacesManager:spacesManager,getStartServices:getStartServices}),redirectLegacyUrl:createRedirectLegacyUrl(getStartServices)});function plugin_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class plugin_SpacesPlugin{constructor(){plugin_defineProperty(this,"spacesManager",void 0),plugin_defineProperty(this,"spacesApi",void 0),plugin_defineProperty(this,"managementService",void 0)}setup(core,plugins){if(this.spacesManager=new spaces_manager_SpacesManager(core.http),this.spacesApi={ui:getUiApi({spacesManager:this.spacesManager,getStartServices:core.getStartServices}),getActiveSpace$:()=>this.spacesManager.onActiveSpaceChange$,getActiveSpace:()=>this.spacesManager.getActiveSpace()},plugins.home&&plugins.home.featureCatalogue.register({id:"spaces",title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.spacesTitle",{defaultMessage:"Spaces"}),description:Object(constants.a)(),icon:"spacesApp",path:"/app/management/kibana/spaces",showOnHomePage:!1,category:public_.FeatureCatalogueCategory.ADMIN}),plugins.management&&(this.managementService=new management_service_ManagementService,this.managementService.setup({management:plugins.management,getStartServices:core.getStartServices,spacesManager:this.spacesManager})),plugins.advancedSettings){(new advanced_settings_service_AdvancedSettingsService).setup({getActiveSpace:()=>this.spacesManager.getActiveSpace(),componentRegistry:plugins.advancedSettings.component})}if(plugins.savedObjectsManagement){(new share_saved_objects_to_space_service_ShareSavedObjectsToSpaceService).setup({savedObjectsManagementSetup:plugins.savedObjectsManagement,spacesApiUi:this.spacesApi.ui});(new copy_saved_objects_to_space.a).setup({savedObjectsManagementSetup:plugins.savedObjectsManagement,getStartServices:core.getStartServices})}return spaceSelectorApp.create({getStartServices:core.getStartServices,application:core.application,spacesManager:this.spacesManager}),plugins.spacesOss.registerSpacesApi(this.spacesApi),{}}start(core){return function(spacesManager,core){const I18nContext=core.i18n.Context;core.chrome.navControls.registerLeft({order:1e3,mount(targetDomElement){if(core.http.anonymousPaths.isAnonymous(window.location.pathname))return()=>null;const LazyNavControlPopover=Object(external_kbnSharedDeps_React_.lazy)(()=>__webpack_require__.e(5).then(__webpack_require__.bind(null,185)).then(({NavControlPopover:NavControlPopover})=>({default:NavControlPopover})));return external_kbnSharedDeps_ReactDom_default.a.render(external_kbnSharedDeps_React_default.a.createElement(I18nContext,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Suspense,{fallback:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,null)},external_kbnSharedDeps_React_default.a.createElement(LazyNavControlPopover,{spacesManager:spacesManager,serverBasePath:core.http.basePath.serverBasePath,anchorPosition:"downLeft",capabilities:core.application.capabilities,navigateToApp:core.application.navigateToApp}))),targetDomElement),()=>{external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(targetDomElement)}}})}(this.spacesManager,core),this.spacesApi}stop(){this.managementService&&(this.managementService.stop(),this.managementService=void 0)}}const public_plugin=()=>new plugin_SpacesPlugin},function(module,exports){module.exports=__kbnSharedDeps__.Moment}]);