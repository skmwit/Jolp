/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.spaces_bundle_jsonpfunction=window.spaces_bundle_jsonpfunction||[]).push([[10],{181:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"SpacesContextWrapperInternal",(function(){return SpacesContextWrapperInternal}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_context__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(20);const SpacesContextWrapperInternal=props=>{const{spacesManager:spacesManager,getStartServices:getStartServices,feature:feature,children:children}=props,[context,setContext]=Object(react__WEBPACK_IMPORTED_MODULE_0__.useState)(),shareToSpacesDataPromise=Object(react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>async function(spacesManager,feature){const spaces=await spacesManager.getSpaces({includeAuthorizedPurposes:!0}),activeSpace=await spacesManager.getActiveSpace();return{spacesMap:spaces.map(({authorizedPurposes:authorizedPurposes,disabledFeatures:disabledFeatures,...space})=>{const isActiveSpace=space.id===activeSpace.id,cannotShareToSpace=!1===(null==authorizedPurposes?void 0:authorizedPurposes.shareSavedObjectsIntoSpace),isFeatureDisabled=void 0!==feature&&disabledFeatures.includes(feature);return{...space,...isActiveSpace&&{isActiveSpace:isActiveSpace},...cannotShareToSpace&&{cannotShareToSpace:cannotShareToSpace},...isFeatureDisabled&&{isFeatureDisabled:isFeatureDisabled}}}).reduce((acc,cur)=>acc.set(cur.id,cur),new Map),activeSpaceId:activeSpace.id}}(spacesManager,feature),[spacesManager,feature]);return Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{getStartServices().then(([coreStart])=>{const{application:application,docLinks:docLinks,notifications:notifications}=coreStart,services={application:application,docLinks:docLinks,notifications:notifications};setContext(Object(_context__WEBPACK_IMPORTED_MODULE_1__.a)(services,spacesManager,shareToSpacesDataPromise))})},[getStartServices,shareToSpacesDataPromise,spacesManager]),context?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(context.Provider,null,children):null}}}]);