/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.spaces_bundle_jsonpfunction=window.spaces_bundle_jsonpfunction||[]).push([[3],{124:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(125);case"v7light":return __webpack_require__(127);case"v8dark":return __webpack_require__(129);case"v8light":return __webpack_require__(131)}},125:function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(126);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},126:function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".spcShareToSpaceIncludeRelated .euiIcon{margin-right:28px}.spcShareToSpaceIncludeRelated__label{font-size:14px}\n",""]),module.exports=exports},127:function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(128);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},128:function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".spcShareToSpaceIncludeRelated .euiIcon{margin-right:28px}.spcShareToSpaceIncludeRelated__label{font-size:14px}\n",""]),module.exports=exports},129:function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(130);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},130:function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".spcShareToSpaceIncludeRelated .euiIcon{margin-right:28px}.spcShareToSpaceIncludeRelated__label{font-size:14px}\n",""]),module.exports=exports},131:function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(132);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},132:function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".spcShareToSpaceIncludeRelated .euiIcon{margin-right:28px}.spcShareToSpaceIncludeRelated__label{font-size:14px}\n",""]),module.exports=exports},133:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(134);case"v7light":return __webpack_require__(136);case"v8dark":return __webpack_require__(138);case"v8light":return __webpack_require__(140)}},134:function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(135);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},135:function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".euiCheckableCard__children{width:100%}\n",""]),module.exports=exports},136:function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(137);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},137:function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".euiCheckableCard__children{width:100%}\n",""]),module.exports=exports},138:function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(139);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},139:function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".euiCheckableCard__children{width:100%}\n",""]),module.exports=exports},140:function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(141);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},141:function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".euiCheckableCard__children{width:100%}\n",""]),module.exports=exports},142:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(143);case"v7light":return __webpack_require__(145);case"v8dark":return __webpack_require__(147);case"v8light":return __webpack_require__(149)}},143:function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(144);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},144:function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".spcShareToSpace__spacesList{margin-top:4px}\n",""]),module.exports=exports},145:function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(146);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},146:function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".spcShareToSpace__spacesList{margin-top:4px}\n",""]),module.exports=exports},147:function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(148);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},148:function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".spcShareToSpace__spacesList{margin-top:4px}\n",""]),module.exports=exports},149:function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(150);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},150:function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".spcShareToSpace__spacesList{margin-top:4px}\n",""]),module.exports=exports},184:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ShareToSpaceFlyoutInternal",(function(){return ShareToSpaceFlyoutInternal}));var external_kbnSharedDeps_ElasticEui_=__webpack_require__(2),external_kbnSharedDeps_React_=__webpack_require__(0),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(7),constants=__webpack_require__(4),copy_saved_objects_to_space=__webpack_require__(23),spaces_context=__webpack_require__(14),components_constants=__webpack_require__(19);__webpack_require__(124),__webpack_require__(133);class DocumentationLinksService{constructor(docLinks){var obj,key,value;value=void 0,(key="kbnPrivileges")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this.kbnPrivileges=""+docLinks.links.security.kibanaPrivileges}getKibanaPrivilegesDocUrl(){return""+this.kbnPrivileges}}__webpack_require__(142);var space_avatar=__webpack_require__(3);const NoSpacesAvailable=props=>{const{capabilities:capabilities,getUrlForApp:getUrlForApp}=props.application;return capabilities.spaces.manage?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.spaces.shareToSpace.noAvailableSpaces.canCreateNewSpace.text",defaultMessage:"You can {createANewSpaceLink} for sharing your objects.",values:{createANewSpaceLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{"data-test-subj":"sts-new-space-link",href:getUrlForApp("management",{path:"kibana/spaces/create"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.spaces.shareToSpace.noAvailableSpaces.canCreateNewSpace.linkText",defaultMessage:"create a new space"}))}}))):null},LazySpaceAvatar=Object(external_kbnSharedDeps_React_.lazy)(()=>Object(space_avatar.a)().then(component=>({default:component}))),APPEND_ACTIVE_SPACE=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBadge,{color:"hollow"},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.currentSpaceBadge",{defaultMessage:"Current"})),APPEND_CANNOT_SELECT=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIconTip,{content:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.partiallyAuthorizedSpaceTooltip.unchecked",{defaultMessage:"You need additional privileges to select this space."}),position:"left",type:"iInCircle"}),APPEND_CANNOT_DESELECT=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIconTip,{content:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.partiallyAuthorizedSpaceTooltip.checked",{defaultMessage:"You need additional privileges to deselect this space."}),position:"left",type:"iInCircle"}),APPEND_FEATURE_IS_DISABLED=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIconTip,{content:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.featureIsDisabledTooltip",{defaultMessage:"This feature is disabled in this space."}),position:"left",type:"alert",color:"warning"}),SelectableSpacesControl=props=>{const{spaces:spaces,shareOptions:shareOptions,onChange:onChange,enableCreateNewSpaceLink:enableCreateNewSpaceLink,enableSpaceAgnosticBehavior:enableSpaceAgnosticBehavior}=props,{services:services}=Object(spaces_context.b)(),{application:application,docLinks:docLinks}=services,{selectedSpaceIds:selectedSpaceIds,initiallySelectedSpaceIds:initiallySelectedSpaceIds}=shareOptions,activeSpaceId=!enableSpaceAgnosticBehavior&&spaces.find(space=>space.isActiveSpace).id,isGlobalControlChecked=selectedSpaceIds.includes(constants.a),options=spaces.filter(({id:id,isFeatureDisabled:isFeatureDisabled})=>!isFeatureDisabled||initiallySelectedSpaceIds.includes(id)).sort(function(activeSpaceId){return(a,b)=>a.id===activeSpaceId?-1:b.id===activeSpaceId?1:a.isFeatureDisabled!==b.isFeatureDisabled?a.isFeatureDisabled?1:-1:0}(activeSpaceId)).map(space=>{const checked=selectedSpaceIds.includes(space.id),additionalProps=function(space,activeSpaceId,checked){if(space.id===activeSpaceId)return{append:APPEND_ACTIVE_SPACE,disabled:!0,checked:"on"};if(space.cannotShareToSpace)return{append:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,checked?APPEND_CANNOT_DESELECT:APPEND_CANNOT_SELECT,space.isFeatureDisabled?APPEND_FEATURE_IS_DISABLED:null),disabled:!0};if(space.isFeatureDisabled)return{append:APPEND_FEATURE_IS_DISABLED}}(space,activeSpaceId,checked);return{label:space.name,prepend:external_kbnSharedDeps_React_default.a.createElement(LazySpaceAvatar,{space:space,size:"s"}),checked:checked?"on":void 0,"data-space-id":space.id,"data-test-subj":"sts-space-selector-row-"+space.id,...isGlobalControlChecked&&{disabled:!0},...additionalProps}});const selectedCountPad=enableSpaceAgnosticBehavior?0:1,selectedCount=selectedSpaceIds.filter(id=>id!==constants.a&&id!==constants.f).length+selectedCountPad,hiddenCount=selectedSpaceIds.filter(id=>id===constants.f).length,selectSpacesLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.selectSpacesLabel",{defaultMessage:"Select spaces"}),selectedSpacesLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.selectedCountLabel",{defaultMessage:"{selectedCount} selected",values:{selectedCount:selectedCount}}),hiddenSpacesLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.hiddenCountLabel",{defaultMessage:"+{hiddenCount} hidden",values:{hiddenCount:hiddenCount}}),hiddenSpaces=hiddenCount?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs"},hiddenSpacesLabel):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:selectSpacesLabel,labelAppend:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{direction:"column",gutterSize:"none",alignItems:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs"},selectedSpacesLabel)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},hiddenSpaces)),fullWidth:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Suspense,{fallback:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,null)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelectable,{options:options,onChange:newOptions=>function(spaceOptions){const updatedSpaceIds=[...spaceOptions.filter(x=>x.checked&&x["data-space-id"]!==activeSpaceId).map(x=>x["data-space-id"]),...selectedSpaceIds.filter(x=>x===constants.f)];onChange(updatedSpaceIds)}(newOptions),listProps:{bordered:!0,rowHeight:40,className:"spcShareToSpace__spacesList","data-test-subj":"sts-form-space-selector"},height:140,searchable:options.length>6},(list,search)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,search,list))),(()=>{if(!selectedSpaceIds.filter(id=>id===constants.f).length)return null;const kibanaPrivilegesUrl=new DocumentationLinksService(docLinks).getKibanaPrivilegesDocUrl();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.spaces.shareToSpace.unknownSpacesLabel.text",defaultMessage:"To view hidden spaces, you need {additionalPrivilegesLink}.",values:{additionalPrivilegesLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:kibanaPrivilegesUrl,target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.spaces.shareToSpace.unknownSpacesLabel.additionalPrivilegesLink",defaultMessage:"additional privileges"}))}})))})(),enableCreateNewSpaceLink&&spaces.length<2?external_kbnSharedDeps_React_default.a.createElement(NoSpacesAvailable,{application:application}):null))};function createLabel({title:title,text:text,disabled:disabled,tooltip:tooltip}){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,title)),tooltip&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIconTip,{content:tooltip,position:"left",type:"iInCircle"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{color:disabled?void 0:"subdued",size:"s"},text))}const ShareModeControl=props=>{const{spaces:spaces,objectNoun:objectNoun,canShareToAllSpaces:canShareToAllSpaces,shareOptions:shareOptions,onChange:onChange,enableCreateNewSpaceLink:enableCreateNewSpaceLink,enableSpaceAgnosticBehavior:enableSpaceAgnosticBehavior}=props,{services:services}=Object(spaces_context.b)(),{docLinks:docLinks}=services;if(0===spaces.length)return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,null);const{selectedSpaceIds:selectedSpaceIds}=shareOptions,isGlobalControlChecked=selectedSpaceIds.includes(constants.a),shareToAllSpaces={id:"shareToAllSpaces",title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.shareToAllSpaces.title",{defaultMessage:"All spaces"}),text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.shareToAllSpaces.text",{defaultMessage:"Make {objectNoun} available in all current and future spaces.",values:{objectNoun:objectNoun}}),...!canShareToAllSpaces&&{tooltip:isGlobalControlChecked?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.shareToAllSpaces.cannotUncheckTooltip",{defaultMessage:"You need additional privileges to change this option."}):external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.shareToAllSpaces.cannotCheckTooltip",{defaultMessage:"You need additional privileges to use this option."})},disabled:!canShareToAllSpaces},shareToExplicitSpaces={id:"shareToExplicitSpaces",title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.shareToExplicitSpaces.title",{defaultMessage:"Select spaces"}),text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.shareToExplicitSpaces.text",{defaultMessage:"Make {objectNoun} available in selected spaces only.",values:{objectNoun:objectNoun}}),disabled:!canShareToAllSpaces&&isGlobalControlChecked},toggleShareOption=allSpaces=>{const updatedSpaceIds=allSpaces?[constants.a,...selectedSpaceIds]:selectedSpaceIds.filter(id=>id!==constants.a);onChange(updatedSpaceIds)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,(()=>{if(!shareToExplicitSpaces.disabled)return null;const kibanaPrivilegesUrl=new DocumentationLinksService(docLinks).getKibanaPrivilegesDocUrl();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{size:"s",iconType:"help",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.spaces.shareToSpace.privilegeWarningTitle",defaultMessage:"Additional privileges required"}),color:"warning"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.spaces.shareToSpace.privilegeWarningBody",defaultMessage:"To edit the spaces for this {objectNoun}, you need {readAndWritePrivilegesLink} in all spaces.",values:{objectNoun:objectNoun,readAndWritePrivilegesLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:kibanaPrivilegesUrl,target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.spaces.shareToSpace.privilegeWarningLink",defaultMessage:"read and write privileges"}))}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}))})(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCheckableCard,{id:shareToExplicitSpaces.id,label:createLabel(shareToExplicitSpaces),checked:!isGlobalControlChecked,onChange:()=>toggleShareOption(!1),disabled:shareToExplicitSpaces.disabled},external_kbnSharedDeps_React_default.a.createElement(SelectableSpacesControl,{spaces:spaces,shareOptions:shareOptions,onChange:onChange,enableCreateNewSpaceLink:enableCreateNewSpaceLink,enableSpaceAgnosticBehavior:enableSpaceAgnosticBehavior})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCheckableCard,{id:shareToAllSpaces.id,label:createLabel(shareToAllSpaces),checked:isGlobalControlChecked,onChange:()=>toggleShareOption(!0),disabled:shareToAllSpaces.disabled}))},ShareToSpaceForm=props=>{const{spaces:spaces,objectNoun:objectNoun,onUpdate:onUpdate,shareOptions:shareOptions,showCreateCopyCallout:showCreateCopyCallout,canShareToAllSpaces:canShareToAllSpaces,makeCopy:makeCopy,enableCreateNewSpaceLink:enableCreateNewSpaceLink,enableSpaceAgnosticBehavior:enableSpaceAgnosticBehavior}=props,createCopyCallout=showCreateCopyCallout?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{size:"s",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.spaces.shareToSpace.shareWarningTitle",defaultMessage:"Changes are synchronized across spaces"}),color:"warning"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.spaces.shareToSpace.shareWarningBody",defaultMessage:"Your changes appear in each space you select. {makeACopyLink} if you don't want to synchronize your changes.",values:{makeACopyLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{"data-test-subj":"sts-copy-link",onClick:()=>makeCopy()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.spaces.shareToSpace.shareWarningLink",defaultMessage:"Make a copy"}))}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"})):null;return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"share-to-space-form"},createCopyCallout,external_kbnSharedDeps_React_default.a.createElement(ShareModeControl,{spaces:spaces,objectNoun:objectNoun,canShareToAllSpaces:canShareToAllSpaces,shareOptions:shareOptions,onChange:selection=>{return selectedSpaceIds=selection,onUpdate({...shareOptions,selectedSpaceIds:selectedSpaceIds});var selectedSpaceIds},enableCreateNewSpaceLink:enableCreateNewSpaceLink,enableSpaceAgnosticBehavior:enableSpaceAgnosticBehavior}))},LazyCopyToSpaceFlyout=Object(external_kbnSharedDeps_React_.lazy)(()=>Object(copy_saved_objects_to_space.b)().then(component=>({default:component}))),ALL_SPACES_TARGET=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.allSpacesTarget",{defaultMessage:"all"}),arraysAreEqual=(a,b)=>a.every(x=>b.includes(x))&&b.every(x=>a.includes(x));function createDefaultChangeSpacesHandler(object,spacesManager,toastNotifications){return async(spacesToAdd,spacesToRemove)=>{const{type:type,id:id,title:title}=object,toastTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.shareSuccessTitle",{values:{objectNoun:object.noun},defaultMessage:"Updated {objectNoun}"}),isSharedToAllSpaces=spacesToAdd.includes(constants.a);if(spacesToAdd.length>0){await spacesManager.shareSavedObjectAdd({type:type,id:id},spacesToAdd);const spaceTargets=isSharedToAllSpaces?ALL_SPACES_TARGET:""+spacesToAdd.length,toastText=isSharedToAllSpaces||1!==spacesToAdd.length?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.shareAddSuccessTextPlural",{defaultMessage:"'{object}' was added to {spaceTargets} spaces.",values:{object:title,spaceTargets:spaceTargets}}):external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.shareAddSuccessTextSingular",{defaultMessage:"'{object}' was added to 1 space.",values:{object:title}});toastNotifications.addSuccess({title:toastTitle,text:toastText})}if(spacesToRemove.length>0){await spacesManager.shareSavedObjectRemove({type:type,id:id},spacesToRemove);const isUnsharedFromAllSpaces=spacesToRemove.includes(constants.a),spaceTargets=isUnsharedFromAllSpaces?ALL_SPACES_TARGET:""+spacesToRemove.length,toastText=isUnsharedFromAllSpaces||1!==spacesToRemove.length?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.shareRemoveSuccessTextPlural",{defaultMessage:"'{object}' was removed from {spaceTargets} spaces.",values:{object:title,spaceTargets:spaceTargets}}):external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.shareRemoveSuccessTextSingular",{defaultMessage:"'{object}' was removed from 1 space.",values:{object:title}});isSharedToAllSpaces||toastNotifications.addSuccess({title:toastTitle,text:toastText})}}}const ShareToSpaceFlyoutInternal=props=>{const{spacesManager:spacesManager,shareToSpacesDataPromise:shareToSpacesDataPromise,services:services}=Object(spaces_context.b)(),{notifications:notifications}=services,toastNotifications=notifications.toasts,{savedObjectTarget:object}=props,savedObjectTarget=Object(external_kbnSharedDeps_React_.useMemo)(()=>({type:object.type,id:object.id,namespaces:object.namespaces,icon:object.icon,title:object.title||`${object.type} [id=${object.id}]`,noun:object.noun||components_constants.a}),[object]),{flyoutIcon:flyoutIcon,flyoutTitle:flyoutTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.flyoutTitle",{defaultMessage:"Edit spaces for {objectNoun}",values:{objectNoun:savedObjectTarget.noun}}),enableCreateCopyCallout:enableCreateCopyCallout=!1,enableCreateNewSpaceLink:enableCreateNewSpaceLink=!1,behaviorContext:behaviorContext,changeSpacesHandler:changeSpacesHandler=createDefaultChangeSpacesHandler(savedObjectTarget,spacesManager,toastNotifications),onUpdate:onUpdate=(()=>null),onClose:onClose=(()=>null)}=props,enableSpaceAgnosticBehavior="outside-space"===behaviorContext,[shareOptions,setShareOptions]=Object(external_kbnSharedDeps_React_.useState)({selectedSpaceIds:[],initiallySelectedSpaceIds:[]}),[canShareToAllSpaces,setCanShareToAllSpaces]=Object(external_kbnSharedDeps_React_.useState)(!1),[showMakeCopy,setShowMakeCopy]=Object(external_kbnSharedDeps_React_.useState)(!1),[{isLoading:isLoading,spaces:spaces},setSpacesState]=Object(external_kbnSharedDeps_React_.useState)({isLoading:!0,spaces:[]});Object(external_kbnSharedDeps_React_.useEffect)(()=>{const getPermissions=spacesManager.getShareSavedObjectPermissions(savedObjectTarget.type);Promise.all([shareToSpacesDataPromise,getPermissions]).then(([shareToSpacesData,permissions])=>{const activeSpaceId=!enableSpaceAgnosticBehavior&&shareToSpacesData.activeSpaceId,selectedSpaceIds=savedObjectTarget.namespaces.filter(spaceId=>spaceId!==activeSpaceId);setShareOptions({selectedSpaceIds:selectedSpaceIds,initiallySelectedSpaceIds:selectedSpaceIds}),setCanShareToAllSpaces(permissions.shareToAllSpaces),setSpacesState({isLoading:!1,spaces:[...shareToSpacesData.spacesMap].map(([,spaceTarget])=>spaceTarget)})}).catch(e=>{toastNotifications.addError(e,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.spacesLoadErrorTitle",{defaultMessage:"Error loading available spaces"})})})},[savedObjectTarget,spacesManager,shareToSpacesDataPromise,toastNotifications,enableSpaceAgnosticBehavior]);const{isSelectionChanged:isSelectionChanged,spacesToAdd:spacesToAdd,spacesToRemove:spacesToRemove}=(()=>{if(!spaces.length)return{isSelectionChanged:!1,spacesToAdd:[],spacesToRemove:[]};const activeSpaceId=!enableSpaceAgnosticBehavior&&spaces.find(space=>space.isActiveSpace).id,initialSelection=savedObjectTarget.namespaces.filter(spaceId=>spaceId!==activeSpaceId&&spaceId!==constants.f),{selectedSpaceIds:selectedSpaceIds}=shareOptions,filteredSelection=selectedSpaceIds.filter(x=>x!==constants.f),initiallySharedToAllSpaces=initialSelection.includes(constants.a),selectionIncludesAllSpaces=filteredSelection.includes(constants.a),isSharedToAllSpaces=!initiallySharedToAllSpaces&&selectionIncludesAllSpaces,isUnsharedFromAllSpaces=initiallySharedToAllSpaces&&!selectionIncludesAllSpaces,selectedSpacesChanged=!selectionIncludesAllSpaces&&!arraysAreEqual(initialSelection,filteredSelection),isSelectionChanged=isSharedToAllSpaces||isUnsharedFromAllSpaces||!isSharedToAllSpaces&&!isUnsharedFromAllSpaces&&selectedSpacesChanged,selectedSpacesToAdd=filteredSelection.filter(spaceId=>!initialSelection.includes(spaceId)),selectedSpacesToRemove=initialSelection.filter(spaceId=>!filteredSelection.includes(spaceId)),activeSpaceArray=activeSpaceId?[activeSpaceId]:[];return{isSelectionChanged:isSelectionChanged,spacesToAdd:isSharedToAllSpaces?[constants.a]:isUnsharedFromAllSpaces?[...activeSpaceArray,...selectedSpacesToAdd]:selectedSpacesToAdd,spacesToRemove:isUnsharedFromAllSpaces||!isSharedToAllSpaces?selectedSpacesToRemove:[...activeSpaceArray,...initialSelection]}})(),[shareInProgress,setShareInProgress]=Object(external_kbnSharedDeps_React_.useState)(!1);if(showMakeCopy)return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Suspense,{fallback:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,null)},external_kbnSharedDeps_React_default.a.createElement(LazyCopyToSpaceFlyout,{onClose:onClose,savedObjectTarget:savedObjectTarget}));const isStartShareButtonDisabled=!isSelectionChanged||shareInProgress||enableSpaceAgnosticBehavior&&!shareOptions.selectedSpaceIds.length;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyout,{onClose:onClose,maxWidth:500,"data-test-subj":"share-to-space-flyout"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutHeader,{hasBorder:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},flyoutIcon&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{size:"m",type:flyoutIcon})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",null,flyoutTitle))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},savedObjectTarget.icon&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:savedObjectTarget.icon})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("p",null,savedObjectTarget.title)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHorizontalRule,{margin:"m"}),(()=>{if(isLoading)return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,null);const showCreateCopyCallout=enableCreateCopyCallout&&spaces.length>1&&1===savedObjectTarget.namespaces.length&&!arraysAreEqual(savedObjectTarget.namespaces,[constants.a]);return external_kbnSharedDeps_React_default.a.createElement(ShareToSpaceForm,{spaces:spaces,objectNoun:savedObjectTarget.noun,shareOptions:shareOptions,onUpdate:setShareOptions,showCreateCopyCallout:showCreateCopyCallout,canShareToAllSpaces:canShareToAllSpaces,makeCopy:()=>setShowMakeCopy(!0),enableCreateNewSpaceLink:enableCreateNewSpaceLink,enableSpaceAgnosticBehavior:enableSpaceAgnosticBehavior})})()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutFooter,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:()=>onClose(),"data-test-subj":"sts-cancel-button",disabled:shareInProgress},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.spaces.shareToSpace.cancelButton",defaultMessage:"Cancel"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{fill:!0,onClick:()=>async function(){setShareInProgress(!0);try{await changeSpacesHandler(spacesToAdd,spacesToRemove),onUpdate(),onClose()}catch(e){setShareInProgress(!1),toastNotifications.addError(e,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.spaces.shareToSpace.shareErrorTitle",{values:{objectNoun:savedObjectTarget.noun},defaultMessage:"Error updating {objectNoun}"})})}}(),"data-test-subj":"sts-initiate-button",disabled:isStartShareButtonDisabled},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.spaces.shareToSpace.shareToSpacesButton",defaultMessage:"Save & close"}))))))}},32:function(module,exports,__webpack_require__){"use strict";var memo,isOldIE=function(){return void 0===memo&&(memo=Boolean(window&&document&&document.all&&!window.atob)),memo},getTarget=function(){var memo={};return function(target){if(void 0===memo[target]){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}}(),stylesInDom=[];function getIndexByIdentifier(identifier){for(var result=-1,i=0;i<stylesInDom.length;i++)if(stylesInDom[i].identifier===identifier){result=i;break}return result}function modulesToDom(list,options){for(var idCountMap={},identifiers=[],i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],count=idCountMap[id]||0,identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier),obj={css:item[1],media:item[2],sourceMap:item[3]};-1!==index?(stylesInDom[index].references++,stylesInDom[index].updater(obj)):stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1}),identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style"),attributes=options.attributes||{};if(void 0===attributes.nonce){var nonce=__webpack_require__.nc;nonce&&(attributes.nonce=nonce)}if(Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])})),"function"==typeof options.insert)options.insert(style);else{var target=getTarget(options.insert||"head");if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");target.appendChild(style)}return style}var textStore,replaceText=(textStore=[],function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")});function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}function applyToTag(style,options,obj){var css=obj.css,media=obj.media,sourceMap=obj.sourceMap;if(media?style.setAttribute("media",media):style.removeAttribute("media"),sourceMap&&btoa&&(css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")),style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}var singleton=null,singletonCounter=0;function addStyle(obj,options){var style,update,remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else style=insertStyleElement(options),update=applyToTag.bind(null,style,options),remove=function(){!function(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style)}(style)};return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}module.exports=function(list,options){(options=options||{}).singleton||"boolean"==typeof options.singleton||(options.singleton=isOldIE());var lastIdentifiers=modulesToDom(list=list||[],options);return function(newList){if(newList=newList||[],"[object Array]"===Object.prototype.toString.call(newList)){for(var i=0;i<lastIdentifiers.length;i++){var index=getIndexByIdentifier(lastIdentifiers[i]);stylesInDom[index].references--}for(var newLastIdentifiers=modulesToDom(newList,options),_i=0;_i<lastIdentifiers.length;_i++){var _index=getIndexByIdentifier(lastIdentifiers[_i]);0===stylesInDom[_index].references&&(stylesInDom[_index].updater(),stylesInDom.splice(_index,1))}lastIdentifiers=newLastIdentifiers}}}},33:function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];return list.toString=function(){return this.map((function(item){var content=function(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=(sourceMap=cssMapping,base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64),"/*# ".concat(data," */")),sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}var sourceMap,base64,data;return[content].join("\n")}(item,useSourceMap);return item[2]?"@media ".concat(item[2]," {").concat(content,"}"):content})).join("")},list.i=function(modules,mediaQuery,dedupe){"string"==typeof modules&&(modules=[[null,modules,""]]);var alreadyImportedModules={};if(dedupe)for(var i=0;i<this.length;i++){var id=this[i][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);dedupe&&alreadyImportedModules[item[0]]||(mediaQuery&&(item[2]?item[2]="".concat(mediaQuery," and ").concat(item[2]):item[2]=mediaQuery),list.push(item))}},list}}}]);