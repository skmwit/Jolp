/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.securitySolution_bundle_jsonpfunction=window.securitySolution_bundle_jsonpfunction||[]).push([[15],{107:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return JiraFieldsComponent}));var external_kbnSharedDeps_React_=__webpack_require__(6),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_LodashFp_=__webpack_require__(7),external_kbnSharedDeps_ElasticEui_=__webpack_require__(74),translations=__webpack_require__(21),connectors=__webpack_require__(10),kibana=__webpack_require__(109);const useGetIssueTypes=({http:http,connector:connector,toastNotifications:toastNotifications,handleIssueType:handleIssueType})=>{const[isLoading,setIsLoading]=Object(external_kbnSharedDeps_React_.useState)(!0),[issueTypes,setIssueTypes]=Object(external_kbnSharedDeps_React_.useState)([]),didCancel=Object(external_kbnSharedDeps_React_.useRef)(!1),abortCtrl=Object(external_kbnSharedDeps_React_.useRef)(new AbortController);return Object(external_kbnSharedDeps_React_.useEffect)(()=>(didCancel.current=!1,abortCtrl.current.abort(),(async()=>{if(connector)try{abortCtrl.current=new AbortController,setIsLoading(!0);const res=await async function({http:http,signal:signal,connectorId:connectorId}){return http.post(`/api/actions/action/${connectorId}/_execute`,{body:JSON.stringify({params:{subAction:"issueTypes",subActionParams:{}}}),signal:signal})}({http:http,signal:abortCtrl.current.signal,connectorId:connector.id});if(!didCancel.current){var _res$data,_res$data2;setIsLoading(!1);const asOptions=(null!==(_res$data=res.data)&&void 0!==_res$data?_res$data:[]).map(type=>{var _type$name,_type$id;return{text:null!==(_type$name=type.name)&&void 0!==_type$name?_type$name:"",value:null!==(_type$id=type.id)&&void 0!==_type$id?_type$id:""}});var _res$serviceMessage;if(setIssueTypes(null!==(_res$data2=res.data)&&void 0!==_res$data2?_res$data2:[]),handleIssueType(asOptions),res.status&&"error"===res.status)toastNotifications.addDanger({title:translations.e,text:""+(null!==(_res$serviceMessage=res.serviceMessage)&&void 0!==_res$serviceMessage?_res$serviceMessage:res.message)})}}catch(error){didCancel.current||(setIsLoading(!1),"AbortError"!==error.name&&toastNotifications.addDanger({title:translations.e,text:error.message}))}else setIsLoading(!1)})(),()=>{didCancel.current=!0,abortCtrl.current.abort()}),[http,connector,toastNotifications]),{issueTypes:issueTypes,isLoading:isLoading}},useGetFieldsByIssueType=({http:http,toastNotifications:toastNotifications,connector:connector,issueType:issueType})=>{const[isLoading,setIsLoading]=Object(external_kbnSharedDeps_React_.useState)(!0),[fields,setFields]=Object(external_kbnSharedDeps_React_.useState)({}),didCancel=Object(external_kbnSharedDeps_React_.useRef)(!1),abortCtrl=Object(external_kbnSharedDeps_React_.useRef)(new AbortController);return Object(external_kbnSharedDeps_React_.useEffect)(()=>(didCancel.current=!1,abortCtrl.current.abort(),(async()=>{if(connector&&issueType)try{abortCtrl.current=new AbortController,setIsLoading(!0);const res=await async function({http:http,signal:signal,connectorId:connectorId,id:id}){return http.post(`/api/actions/action/${connectorId}/_execute`,{body:JSON.stringify({params:{subAction:"fieldsByIssueType",subActionParams:{id:id}}}),signal:signal})}({http:http,signal:abortCtrl.current.signal,connectorId:connector.id,id:issueType});var _res$data,_res$serviceMessage;if(!didCancel.current)if(setIsLoading(!1),setFields(null!==(_res$data=res.data)&&void 0!==_res$data?_res$data:{}),res.status&&"error"===res.status)toastNotifications.addDanger({title:translations.a,text:""+(null!==(_res$serviceMessage=res.serviceMessage)&&void 0!==_res$serviceMessage?_res$serviceMessage:res.message)})}catch(error){didCancel.current||(setIsLoading(!1),"AbortError"!==error.name&&toastNotifications.addDanger({title:translations.a,text:error.message}))}else setIsLoading(!1)})(),()=>{didCancel.current=!0,abortCtrl.current.abort()}),[http,connector,issueType,toastNotifications]),{isLoading:isLoading,fields:fields}},useGetIssues=({http:http,actionConnector:actionConnector,toastNotifications:toastNotifications,query:query})=>{const[isLoading,setIsLoading]=Object(external_kbnSharedDeps_React_.useState)(!1),[issues,setIssues]=Object(external_kbnSharedDeps_React_.useState)([]),didCancel=Object(external_kbnSharedDeps_React_.useRef)(!1),abortCtrl=Object(external_kbnSharedDeps_React_.useRef)(new AbortController);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{const fetchData=Object(external_kbnSharedDeps_LodashFp_.debounce)(500,async()=>{if(actionConnector&&!Object(external_kbnSharedDeps_LodashFp_.isEmpty)(query))try{abortCtrl.current=new AbortController,setIsLoading(!0);const res=await async function({http:http,signal:signal,connectorId:connectorId,title:title}){return http.post(`/api/actions/action/${connectorId}/_execute`,{body:JSON.stringify({params:{subAction:"issues",subActionParams:{title:title}}}),signal:signal})}({http:http,signal:abortCtrl.current.signal,connectorId:actionConnector.id,title:null!=query?query:""});var _res$data,_res$serviceMessage;if(!didCancel.current)if(setIsLoading(!1),setIssues(null!==(_res$data=res.data)&&void 0!==_res$data?_res$data:[]),res.status&&"error"===res.status)toastNotifications.addDanger({title:translations.c,text:""+(null!==(_res$serviceMessage=res.serviceMessage)&&void 0!==_res$serviceMessage?_res$serviceMessage:res.message)})}catch(error){didCancel.current||(setIsLoading(!1),"AbortError"!==error.name&&toastNotifications.addDanger({title:translations.c,text:error.message}))}else setIsLoading(!1)});return didCancel.current=!1,abortCtrl.current.abort(),fetchData(),()=>{didCancel.current=!0,abortCtrl.current.abort()}},[http,actionConnector,toastNotifications,query]),{issues:issues,isLoading:isLoading}},useGetSingleIssue=({http:http,toastNotifications:toastNotifications,actionConnector:actionConnector,id:id})=>{const[isLoading,setIsLoading]=Object(external_kbnSharedDeps_React_.useState)(!1),[issue,setIssue]=Object(external_kbnSharedDeps_React_.useState)(null),didCancel=Object(external_kbnSharedDeps_React_.useRef)(!1),abortCtrl=Object(external_kbnSharedDeps_React_.useRef)(new AbortController);return Object(external_kbnSharedDeps_React_.useEffect)(()=>(didCancel.current=!1,abortCtrl.current.abort(),(async()=>{if(actionConnector&&id){abortCtrl.current=new AbortController,setIsLoading(!0);try{const res=await async function({http:http,signal:signal,connectorId:connectorId,id:id}){return http.post(`/api/actions/action/${connectorId}/_execute`,{body:JSON.stringify({params:{subAction:"issue",subActionParams:{id:id}}}),signal:signal})}({http:http,signal:abortCtrl.current.signal,connectorId:actionConnector.id,id:id});var _res$data,_res$serviceMessage;if(!didCancel.current)if(setIsLoading(!1),setIssue(null!==(_res$data=res.data)&&void 0!==_res$data?_res$data:null),res.status&&"error"===res.status)toastNotifications.addDanger({title:translations.b(id),text:""+(null!==(_res$serviceMessage=res.serviceMessage)&&void 0!==_res$serviceMessage?_res$serviceMessage:res.message)})}catch(error){didCancel.current||(setIsLoading(!1),"AbortError"!==error.name&&toastNotifications.addDanger({title:translations.b(id),text:error.message}))}}else setIsLoading(!1)})(),()=>{didCancel.current=!0,abortCtrl.current.abort()}),[http,actionConnector,id,toastNotifications]),{isLoading:isLoading,issue:issue}},SearchIssuesComponent=({selectedValue:selectedValue,actionConnector:actionConnector,onChange:onChange})=>{const[query,setQuery]=Object(external_kbnSharedDeps_React_.useState)(null),[selectedOptions,setSelectedOptions]=Object(external_kbnSharedDeps_React_.useState)([]),[options,setOptions]=Object(external_kbnSharedDeps_React_.useState)([]),{http:http,notifications:notifications}=Object(kibana.h)().services,{isLoading:isLoadingIssues,issues:issues}=useGetIssues({http:http,toastNotifications:notifications.toasts,actionConnector:actionConnector,query:query}),{isLoading:isLoadingSingleIssue,issue:singleIssue}=useGetSingleIssue({http:http,toastNotifications:notifications.toasts,actionConnector:actionConnector,id:selectedValue});Object(external_kbnSharedDeps_React_.useEffect)(()=>setOptions(issues.map(issue=>({label:issue.title,value:issue.key}))),[issues]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{if(isLoadingSingleIssue||null==singleIssue)return;const singleIssueAsOptions=[{label:singleIssue.title,value:singleIssue.key}];setOptions(singleIssueAsOptions),setSelectedOptions(singleIssueAsOptions)},[singleIssue,isLoadingSingleIssue]);const onSearchChange=Object(external_kbnSharedDeps_React_.useCallback)(searchVal=>{setQuery(searchVal)},[]),onChangeComboBox=Object(external_kbnSharedDeps_React_.useCallback)(changedOptions=>{setSelectedOptions(changedOptions),onChange(changedOptions[0].value)},[onChange]),inputPlaceholder=Object(external_kbnSharedDeps_React_.useMemo)(()=>isLoadingIssues||isLoadingSingleIssue?translations.i:translations.j,[isLoadingIssues,isLoadingSingleIssue]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiComboBox,{singleSelection:!0,fullWidth:!0,placeholder:inputPlaceholder,"data-test-subj":"search-parent-issues","aria-label":translations.h,options:options,isLoading:isLoadingIssues||isLoadingSingleIssue,onSearchChange:onSearchChange,selectedOptions:selectedOptions,onChange:onChangeComboBox})},SearchIssues=Object(external_kbnSharedDeps_React_.memo)(SearchIssuesComponent);var card=__webpack_require__(254);const JiraFieldsComponent=({connector:connector,fields:fields,isEdit:isEdit=!0,onChange:onChange})=>{const init=Object(external_kbnSharedDeps_React_.useRef)(!0),{issueType:issueType=null,priority:priority=null,parent:parent=null}=null!=fields?fields:{},{http:http,notifications:notifications}=Object(kibana.h)().services,handleIssueType=Object(external_kbnSharedDeps_React_.useCallback)(issueTypeSelectOptions=>{null==issueType&&issueTypeSelectOptions.length>0&&isEdit&&onChange({issueType:issueTypeSelectOptions[0].value,parent:parent,priority:priority})},[isEdit,issueType,onChange,parent,priority]),{isLoading:isLoadingIssueTypes,issueTypes:issueTypes}=useGetIssueTypes({connector:connector,http:http,toastNotifications:notifications.toasts,handleIssueType:handleIssueType}),issueTypesSelectOptions=Object(external_kbnSharedDeps_React_.useMemo)(()=>issueTypes.map(type=>{var _type$name,_type$id;return{text:null!==(_type$name=type.name)&&void 0!==_type$name?_type$name:"",value:null!==(_type$id=type.id)&&void 0!==_type$id?_type$id:""}}),[issueTypes]),currentIssueType=Object(external_kbnSharedDeps_React_.useMemo)(()=>!issueType&&issueTypesSelectOptions.length>0||issueTypesSelectOptions.length>0&&!issueTypesSelectOptions.some(({value:value})=>value===issueType)?issueTypesSelectOptions[0].value:issueType,[issueType,issueTypesSelectOptions]),{isLoading:isLoadingFields,fields:fieldsByIssueType}=useGetFieldsByIssueType({connector:connector,http:http,issueType:currentIssueType,toastNotifications:notifications.toasts}),hasPriority=Object(external_kbnSharedDeps_React_.useMemo)(()=>null!=fieldsByIssueType.priority,[fieldsByIssueType]),hasParent=Object(external_kbnSharedDeps_React_.useMemo)(()=>null!=fieldsByIssueType.parent,[fieldsByIssueType]),prioritiesSelectOptions=Object(external_kbnSharedDeps_React_.useMemo)(()=>{var _fieldsByIssueType$pr,_fieldsByIssueType$pr2;const priorities=null!==(_fieldsByIssueType$pr=null===(_fieldsByIssueType$pr2=fieldsByIssueType.priority)||void 0===_fieldsByIssueType$pr2?void 0:_fieldsByIssueType$pr2.allowedValues)&&void 0!==_fieldsByIssueType$pr?_fieldsByIssueType$pr:[];return Object(external_kbnSharedDeps_LodashFp_.map)(p=>({text:p.name,value:p.name}),priorities)},[fieldsByIssueType]),listItems=Object(external_kbnSharedDeps_React_.useMemo)(()=>{var _issueTypes$find$name,_issueTypes$find;return[...null!=issueType&&issueType.length>0?[{title:translations.d,description:null!==(_issueTypes$find$name=null===(_issueTypes$find=issueTypes.find(issue=>issue.id===issueType))||void 0===_issueTypes$find?void 0:_issueTypes$find.name)&&void 0!==_issueTypes$find$name?_issueTypes$find$name:""}]:[],...null!=parent&&parent.length>0?[{title:translations.f,description:parent}]:[],...null!=priority&&priority.length>0?[{title:translations.g,description:priority}]:[]]},[issueType,issueTypes,parent,priority]),onFieldChange=Object(external_kbnSharedDeps_React_.useCallback)((key,value)=>onChange("issueType"===key?{...fields,issueType:value,priority:null,parent:null}:{...fields,issueType:currentIssueType,parent:parent,priority:priority,[key]:value}),[currentIssueType,fields,onChange,parent,priority]);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{init.current&&(init.current=!1,onChange({issueType:issueType,priority:priority,parent:parent}))},[issueType,onChange,parent,priority]),isEdit?external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"connector-fields-jira"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{fullWidth:!0,label:translations.d},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{"data-test-subj":"issueTypeSelect",disabled:isLoadingIssueTypes||isLoadingFields,fullWidth:!0,isLoading:isLoadingIssueTypes,onChange:e=>onFieldChange("issueType",e.target.value),options:issueTypesSelectOptions,value:null!=currentIssueType?currentIssueType:""})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,hasParent&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{fullWidth:!0,label:translations.f},external_kbnSharedDeps_React_default.a.createElement(SearchIssues,{actionConnector:connector,onChange:parentIssueKey=>onFieldChange("parent",parentIssueKey),selectedValue:parent})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"})),hasPriority&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{fullWidth:!0,label:translations.g},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{"data-test-subj":"prioritySelect",disabled:isLoadingIssueTypes||isLoadingFields,fullWidth:!0,hasNoInitialSelection:!0,isLoading:isLoadingFields,onChange:e=>onFieldChange("priority",e.target.value),options:prioritiesSelectOptions,value:null!=priority?priority:""}))))))):external_kbnSharedDeps_React_default.a.createElement(card.a,{connectorType:connectors.c.jira,isLoading:isLoadingIssueTypes||isLoadingFields,listItems:listItems,title:connector.name})}},109:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return useDateFormat})),__webpack_require__.d(__webpack_exports__,"i",(function(){return useTimeZone})),__webpack_require__.d(__webpack_exports__,"c",(function(){return useBasePath})),__webpack_require__.d(__webpack_exports__,"j",(function(){return useToasts})),__webpack_require__.d(__webpack_exports__,"g",(function(){return useHttp})),__webpack_require__.d(__webpack_exports__,"d",(function(){return useCurrentUser})),__webpack_require__.d(__webpack_exports__,"f",(function(){return useGetUserSavedObjectPermissions})),__webpack_require__.d(__webpack_exports__,"a",(function(){return public_.KibanaContextProvider})),__webpack_require__.d(__webpack_exports__,"h",(function(){return useTypedKibana})),__webpack_require__.d(__webpack_exports__,"k",(function(){return public_.useUiSetting})),__webpack_require__.d(__webpack_exports__,"l",(function(){return public_.useUiSetting$})),__webpack_require__.d(__webpack_exports__,"b",(function(){return services.a}));var external_kbnSharedDeps_MomentTimezone_=__webpack_require__(88),external_kbnSharedDeps_MomentTimezone_default=__webpack_require__.n(external_kbnSharedDeps_MomentTimezone_),external_kbnSharedDeps_React_=__webpack_require__(6),external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),constants=__webpack_require__(2),toasters=__webpack_require__(116),utils=__webpack_require__(140),public_=__webpack_require__(79);const useTypedKibana=()=>Object(public_.useKibana)(),useDateFormat=()=>Object(public_.useUiSetting)(constants.r),useTimeZone=()=>{const timeZone=Object(public_.useUiSetting)(constants.s);return"Browser"===timeZone?external_kbnSharedDeps_MomentTimezone_default.a.tz.guess():timeZone},useBasePath=()=>useTypedKibana().services.http.basePath.get(),useToasts=()=>useTypedKibana().services.notifications.toasts,useHttp=()=>useTypedKibana().services.http,useCurrentUser=()=>{const[user,setUser]=Object(external_kbnSharedDeps_React_.useState)(null),[,dispatchToaster]=Object(toasters.h)(),{security:security}=useTypedKibana().services,fetchUser=Object(external_kbnSharedDeps_React_.useCallback)(()=>{let didCancel=!1;return(async()=>{try{if(null!=security){const response=await security.authc.getCurrentUser();didCancel||setUser(Object(utils.c)(response))}else setUser({username:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.securitySolution.getCurrentUser.unknownUser",{defaultMessage:"Unknown"}),email:"",fullName:"",roles:[],enabled:!1,authenticationRealm:{name:"",type:""},lookupRealm:{name:"",type:""},authenticationProvider:""})}catch(error){didCancel||(Object(toasters.g)({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.securitySolution.getCurrentUser.Error",{defaultMessage:"Error getting user"}),error:error.body&&error.body.message?new Error(error.body.message):error,dispatchToaster:dispatchToaster}),setUser(null))}})(),()=>{didCancel=!0}},[security]);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{fetchUser()},[]),user},useGetUserSavedObjectPermissions=()=>{const[savedObjectsPermissions,setSavedObjectsPermissions]=Object(external_kbnSharedDeps_React_.useState)(null),uiCapabilities=useTypedKibana().services.application.capabilities;return Object(external_kbnSharedDeps_React_.useEffect)(()=>{const capabilitiesCanUserCRUD="boolean"==typeof uiCapabilities.siem.crud&&uiCapabilities.siem.crud,capabilitiesCanUserRead="boolean"==typeof uiCapabilities.siem.show&&uiCapabilities.siem.show;setSavedObjectsPermissions({crud:capabilitiesCanUserCRUD,read:capabilitiesCanUserRead})},[uiCapabilities]),savedObjectsPermissions};var services=__webpack_require__(36)},116:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return displayErrorToast})),__webpack_require__.d(__webpack_exports__,"f",(function(){return displayWarningToast})),__webpack_require__.d(__webpack_exports__,"e",(function(){return displaySuccessToast})),__webpack_require__.d(__webpack_exports__,"g",(function(){return errorToToaster})),__webpack_require__.d(__webpack_exports__,"c",(function(){return ToasterError})),__webpack_require__.d(__webpack_exports__,"h",(function(){return useStateToaster})),__webpack_require__.d(__webpack_exports__,"b",(function(){return ManageGlobalToaster})),__webpack_require__.d(__webpack_exports__,"a",(function(){return GlobalToaster}));var external_kbnSharedDeps_ElasticEui_=__webpack_require__(74),external_kbnSharedDeps_LodashFp_=__webpack_require__(7),external_kbnSharedDeps_React_=__webpack_require__(6),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_StyledComponents_=__webpack_require__(75),external_kbnSharedDeps_StyledComponents_default=__webpack_require__.n(external_kbnSharedDeps_StyledComponents_),external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);const SEE_ALL_ERRORS=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.securitySolution.modalAllErrors.seeAllErrors.button",{defaultMessage:"See the full error(s)"}),TITLE_ERROR_MODAL=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.securitySolution.modalAllErrors.title",{defaultMessage:"Your visualization has error(s)"}),CLOSE_ERROR_MODAL=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.securitySolution.modalAllErrors.close.button",{defaultMessage:"Close"}),ModalAllErrorsComponent=({isShowing:isShowing,toast:toast,toggle:toggle})=>{const handleClose=Object(external_kbnSharedDeps_React_.useCallback)(()=>toggle(toast),[toggle,toast]);return isShowing&&null!=toast?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModal,{onClose:handleClose},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeaderTitle,null,TITLE_ERROR_MODAL)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:toast.title,color:"danger",size:"s",iconType:"alert"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),Array.isArray(toast.errors)&&toast.errors.map((error,index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiAccordion,{key:`${toast.id}-${index}`,id:"accordion1",initialIsOpen:0===index,buttonContent:error.length>100?error.substring(0,100)+" ...":error,"data-test-subj":"modal-all-errors-accordion"},external_kbnSharedDeps_React_default.a.createElement(MyEuiCodeBlock,null,error)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalFooter,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{onClick:handleClose,fill:!0,"data-test-subj":"modal-all-errors-close"},CLOSE_ERROR_MODAL))):null},ModalAllErrors=external_kbnSharedDeps_React_default.a.memo(ModalAllErrorsComponent),MyEuiCodeBlock=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_.EuiCodeBlock).withConfig({displayName:"MyEuiCodeBlock",componentId:"sc-1lr0hx6-0"})(["margin-top:4px;"]);MyEuiCodeBlock.displayName="MyEuiCodeBlock";var uuid=__webpack_require__(19),uuid_default=__webpack_require__.n(uuid);class ToasterError extends Error{constructor(messages){var obj,key,value;super(messages[0]),value=void 0,(key="messages")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this.name="ToasterError",this.messages=messages}}var api=__webpack_require__(161);const displayErrorToast=(errorTitle,errorMessages,dispatchToaster,id=uuid_default.a.v4())=>{dispatchToaster({type:"addToaster",toast:{id:id,title:errorTitle,color:"danger",iconType:"alert",errors:errorMessages}})},displayWarningToast=(title,dispatchToaster,id=uuid_default.a.v4())=>{dispatchToaster({type:"addToaster",toast:{id:id,title:title,color:"warning",iconType:"help"}})},displaySuccessToast=(title,dispatchToaster,id=uuid_default.a.v4())=>{dispatchToaster({type:"addToaster",toast:{id:id,title:title,color:"success",iconType:"check"}})},errorToToaster=({id:id=uuid_default.a.v4(),title:title,error:error,color:color="danger",iconType:iconType="alert",dispatchToaster:dispatchToaster})=>{let toast;toast=(error=>error instanceof ToasterError)(error)?{id:id,title:title,color:color,iconType:iconType,errors:error.messages}:Object(api.a)(error)?{id:id,title:title,color:color,iconType:iconType,errors:[error.body.message]}:Object(external_kbnSharedDeps_LodashFp_.isError)(error)?{id:id,title:title,color:color,iconType:iconType,errors:[error.message]}:{id:id,title:title,color:color,iconType:iconType,errors:["Network Error"]},dispatchToaster({type:"addToaster",toast:toast})},initialToasterState={toasts:[]},StateToasterContext=Object(external_kbnSharedDeps_React_.createContext)([initialToasterState,()=>external_kbnSharedDeps_LodashFp_.noop]),useStateToaster=()=>Object(external_kbnSharedDeps_React_.useContext)(StateToasterContext),ManageGlobalToaster=({children:children})=>external_kbnSharedDeps_React_default.a.createElement(StateToasterContext.Provider,{value:Object(external_kbnSharedDeps_React_.useReducer)((state,action)=>{switch(action.type){case"addToaster":return{...state,toasts:[...state.toasts,action.toast]};case"deleteToaster":return{...state,toasts:state.toasts.filter(msg=>msg.id!==action.id)};default:return state}},initialToasterState)},children),GlobalToasterListContainer=external_kbnSharedDeps_StyledComponents_default.a.div.withConfig({displayName:"GlobalToasterListContainer",componentId:"fvmqid-0"})(["position:absolute;right:0;bottom:0;"]),GlobalToaster=({toastLifeTimeMs:toastLifeTimeMs=5e3})=>{const[{toasts:toasts},dispatch]=useStateToaster(),[isShowing,setIsShowing]=Object(external_kbnSharedDeps_React_.useState)(!1),[toastInModal,setToastInModal]=Object(external_kbnSharedDeps_React_.useState)(null),toggle=toast=>{isShowing?(dispatch({type:"deleteToaster",id:toast.id}),setToastInModal(null)):setToastInModal(toast),setIsShowing(!isShowing)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,toasts.length>0&&!isShowing&&external_kbnSharedDeps_React_default.a.createElement(GlobalToasterListContainer,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiGlobalToastList,{toasts:[formatToErrorToastIfNeeded(toasts[0],toggle)],dismissToast:({id:id})=>{dispatch({type:"deleteToaster",id:id})},toastLifeTimeMs:toastLifeTimeMs})),null!=toastInModal&&external_kbnSharedDeps_React_default.a.createElement(ModalAllErrors,{isShowing:isShowing,toast:toastInModal,toggle:toggle}))},formatToErrorToastIfNeeded=(toast,toggle)=>(null!=toast&&null!=toast.errors&&toast.errors.length>0&&(toast.text=external_kbnSharedDeps_React_default.a.createElement(ErrorToastContainer,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{"data-test-subj":"toaster-show-all-error-modal",size:"s",color:"danger",onClick:()=>null!=toast&&toggle(toast)},SEE_ALL_ERRORS))),toast),ErrorToastContainer=external_kbnSharedDeps_StyledComponents_default.a.div.withConfig({displayName:"ErrorToastContainer",componentId:"fvmqid-1"})(["text-align:right;"]);ErrorToastContainer.displayName="ErrorToastContainer"},127:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return ERROR_TITLE})),__webpack_require__.d(__webpack_exports__,"c",(function(){return ERROR_DELETING})),__webpack_require__.d(__webpack_exports__,"j",(function(){return UPDATED_CASE})),__webpack_require__.d(__webpack_exports__,"b",(function(){return DELETED_CASES})),__webpack_require__.d(__webpack_exports__,"a",(function(){return CLOSED_CASES})),__webpack_require__.d(__webpack_exports__,"f",(function(){return REOPENED_CASES})),__webpack_require__.d(__webpack_exports__,"e",(function(){return MARK_IN_PROGRESS_CASES})),__webpack_require__.d(__webpack_exports__,"h",(function(){return SUCCESS_SEND_TO_EXTERNAL_SERVICE})),__webpack_require__.d(__webpack_exports__,"i",(function(){return SYNC_CASE})),__webpack_require__.d(__webpack_exports__,"g",(function(){return STATUS_CHANGED_TOASTER_TEXT}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);__webpack_require__(34);const ERROR_TITLE=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.securitySolution.containers.cases.errorTitle",{defaultMessage:"Error fetching data"}),ERROR_DELETING=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.securitySolution.containers.cases.errorDeletingTitle",{defaultMessage:"Error deleting data"}),UPDATED_CASE=caseTitle=>_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.securitySolution.containers.cases.updatedCase",{values:{caseTitle:caseTitle},defaultMessage:'Updated "{caseTitle}"'}),DELETED_CASES=(totalCases,caseTitle)=>_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.securitySolution.containers.cases.deletedCases",{values:{caseTitle:caseTitle,totalCases:totalCases},defaultMessage:'Deleted {totalCases, plural, =1 {"{caseTitle}"} other {{totalCases} cases}}'}),CLOSED_CASES=({totalCases:totalCases,caseTitle:caseTitle})=>_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.securitySolution.containers.cases.closedCases",{values:{caseTitle:caseTitle,totalCases:totalCases},defaultMessage:'Closed {totalCases, plural, =1 {"{caseTitle}"} other {{totalCases} cases}}'}),REOPENED_CASES=({totalCases:totalCases,caseTitle:caseTitle})=>_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.securitySolution.containers.cases.reopenedCases",{values:{caseTitle:caseTitle,totalCases:totalCases},defaultMessage:'Opened {totalCases, plural, =1 {"{caseTitle}"} other {{totalCases} cases}}'}),MARK_IN_PROGRESS_CASES=({totalCases:totalCases,caseTitle:caseTitle})=>_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.securitySolution.containers.cases.markInProgressCases",{values:{caseTitle:caseTitle,totalCases:totalCases},defaultMessage:'Marked {totalCases, plural, =1 {"{caseTitle}"} other {{totalCases} cases}} as in progress'}),SUCCESS_SEND_TO_EXTERNAL_SERVICE=serviceName=>_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.securitySolution.containers.cases.pushToExternalService",{values:{serviceName:serviceName},defaultMessage:"Successfully sent to { serviceName }"}),SYNC_CASE=(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.securitySolution.cases.configure.errorGetFields",{defaultMessage:"Error getting fields from service"}),caseTitle=>_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.securitySolution.containers.cases.syncCase",{values:{caseTitle:caseTitle},defaultMessage:'Alerts in "{caseTitle}" have been synced'})),STATUS_CHANGED_TOASTER_TEXT=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("xpack.securitySolution.cases.containers.statusChangeToasterText",{defaultMessage:"Alerts in this case have been also had their status updated"})},140:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"l",(function(){return getTypedPayload})),__webpack_require__.d(__webpack_exports__,"m",(function(){return parseString})),__webpack_require__.d(__webpack_exports__,"b",(function(){return convertArrayToCamelCase})),__webpack_require__.d(__webpack_exports__,"c",(function(){return convertToCamelCase})),__webpack_require__.d(__webpack_exports__,"a",(function(){return convertAllCasesToCamel})),__webpack_require__.d(__webpack_exports__,"k",(function(){return decodeCasesStatusResponse})),__webpack_require__.d(__webpack_exports__,"d",(function(){return createToasterPlainError})),__webpack_require__.d(__webpack_exports__,"g",(function(){return decodeCaseResponse})),__webpack_require__.d(__webpack_exports__,"j",(function(){return decodeCasesResponse})),__webpack_require__.d(__webpack_exports__,"i",(function(){return decodeCasesFindResponse})),__webpack_require__.d(__webpack_exports__,"f",(function(){return decodeCaseConfigureResponse})),__webpack_require__.d(__webpack_exports__,"h",(function(){return decodeCaseUserActionsResponse})),__webpack_require__.d(__webpack_exports__,"e",(function(){return createUpdateSuccessToaster}));var uuid__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(19),uuid__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_0__),_elastic_safer_lodash_set__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(89),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(80),fp_ts_lib_Either__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4),fp_ts_lib_function__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(13),fp_ts_lib_pipeable__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8),_cases_common_api__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(33),_common_components_toasters__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(116),_translations__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(127);const getTypedPayload=a=>a,parseString=params=>{try{return JSON.parse(params)}catch{return null}},convertArrayToCamelCase=arrayOfSnakes=>arrayOfSnakes.reduce((acc,value)=>Object(lodash__WEBPACK_IMPORTED_MODULE_2__.isArray)(value)?[...acc,convertArrayToCamelCase(value)]:Object(lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(value)?[...acc,convertToCamelCase(value)]:[...acc,value],[]),convertToCamelCase=snakeCase=>Object.entries(snakeCase).reduce((acc,[key,value])=>(Object(lodash__WEBPACK_IMPORTED_MODULE_2__.isArray)(value)?Object(_elastic_safer_lodash_set__WEBPACK_IMPORTED_MODULE_1__.set)(acc,Object(lodash__WEBPACK_IMPORTED_MODULE_2__.camelCase)(key),convertArrayToCamelCase(value)):Object(lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(value)?Object(_elastic_safer_lodash_set__WEBPACK_IMPORTED_MODULE_1__.set)(acc,Object(lodash__WEBPACK_IMPORTED_MODULE_2__.camelCase)(key),convertToCamelCase(value)):Object(_elastic_safer_lodash_set__WEBPACK_IMPORTED_MODULE_1__.set)(acc,Object(lodash__WEBPACK_IMPORTED_MODULE_2__.camelCase)(key),value),acc),{}),convertAllCasesToCamel=snakeCases=>({cases:snakeCases.cases.map(snakeCase=>convertToCamelCase(snakeCase)),countOpenCases:snakeCases.count_open_cases,countInProgressCases:snakeCases.count_in_progress_cases,countClosedCases:snakeCases.count_closed_cases,page:snakeCases.page,perPage:snakeCases.per_page,total:snakeCases.total}),decodeCasesStatusResponse=respCase=>Object(fp_ts_lib_pipeable__WEBPACK_IMPORTED_MODULE_5__.pipe)(_cases_common_api__WEBPACK_IMPORTED_MODULE_6__.j.decode(respCase),Object(fp_ts_lib_Either__WEBPACK_IMPORTED_MODULE_3__.fold)(Object(_cases_common_api__WEBPACK_IMPORTED_MODULE_6__.o)(createToasterPlainError),fp_ts_lib_function__WEBPACK_IMPORTED_MODULE_4__.identity)),createToasterPlainError=message=>new _common_components_toasters__WEBPACK_IMPORTED_MODULE_7__.c([message]),decodeCaseResponse=respCase=>Object(fp_ts_lib_pipeable__WEBPACK_IMPORTED_MODULE_5__.pipe)(_cases_common_api__WEBPACK_IMPORTED_MODULE_6__.d.decode(respCase),Object(fp_ts_lib_Either__WEBPACK_IMPORTED_MODULE_3__.fold)(Object(_cases_common_api__WEBPACK_IMPORTED_MODULE_6__.o)(createToasterPlainError),fp_ts_lib_function__WEBPACK_IMPORTED_MODULE_4__.identity)),decodeCasesResponse=respCase=>Object(fp_ts_lib_pipeable__WEBPACK_IMPORTED_MODULE_5__.pipe)(_cases_common_api__WEBPACK_IMPORTED_MODULE_6__.i.decode(respCase),Object(fp_ts_lib_Either__WEBPACK_IMPORTED_MODULE_3__.fold)(Object(_cases_common_api__WEBPACK_IMPORTED_MODULE_6__.o)(createToasterPlainError),fp_ts_lib_function__WEBPACK_IMPORTED_MODULE_4__.identity)),decodeCasesFindResponse=respCases=>Object(fp_ts_lib_pipeable__WEBPACK_IMPORTED_MODULE_5__.pipe)(_cases_common_api__WEBPACK_IMPORTED_MODULE_6__.h.decode(respCases),Object(fp_ts_lib_Either__WEBPACK_IMPORTED_MODULE_3__.fold)(Object(_cases_common_api__WEBPACK_IMPORTED_MODULE_6__.o)(createToasterPlainError),fp_ts_lib_function__WEBPACK_IMPORTED_MODULE_4__.identity)),decodeCaseConfigureResponse=respCase=>Object(fp_ts_lib_pipeable__WEBPACK_IMPORTED_MODULE_5__.pipe)(_cases_common_api__WEBPACK_IMPORTED_MODULE_6__.c.decode(respCase),Object(fp_ts_lib_Either__WEBPACK_IMPORTED_MODULE_3__.fold)(Object(_cases_common_api__WEBPACK_IMPORTED_MODULE_6__.o)(createToasterPlainError),fp_ts_lib_function__WEBPACK_IMPORTED_MODULE_4__.identity)),decodeCaseUserActionsResponse=respUserActions=>Object(fp_ts_lib_pipeable__WEBPACK_IMPORTED_MODULE_5__.pipe)(_cases_common_api__WEBPACK_IMPORTED_MODULE_6__.g.decode(respUserActions),Object(fp_ts_lib_Either__WEBPACK_IMPORTED_MODULE_3__.fold)(Object(_cases_common_api__WEBPACK_IMPORTED_MODULE_6__.o)(createToasterPlainError),fp_ts_lib_function__WEBPACK_IMPORTED_MODULE_4__.identity)),createUpdateSuccessToaster=(caseBeforeUpdate,caseAfterUpdate,key,value)=>{const caseHasAlerts=caseBeforeUpdate.comments.some(comment=>comment.type===_cases_common_api__WEBPACK_IMPORTED_MODULE_6__.k.alert),toast={id:uuid__WEBPACK_IMPORTED_MODULE_0___default.a.v4(),color:"success",iconType:"check",title:_translations__WEBPACK_IMPORTED_MODULE_8__.j(caseAfterUpdate.title)};return((key,value)=>"settings"===key)(key)&&null!=value&&value.syncAlerts&&caseHasAlerts?{...toast,title:_translations__WEBPACK_IMPORTED_MODULE_8__.i(caseAfterUpdate.title)}:((key,value)=>"status"===key)(key)&&caseHasAlerts&&caseBeforeUpdate.settings.syncAlerts?{...toast,text:_translations__WEBPACK_IMPORTED_MODULE_8__.g}:toast}},161:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return isKibanaError})),__webpack_require__.d(__webpack_exports__,"c",(function(){return isSecurityAppError})),__webpack_require__.d(__webpack_exports__,"a",(function(){return isAppError}));var lodash_fp__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);const isKibanaError=error=>Object(lodash_fp__WEBPACK_IMPORTED_MODULE_0__.has)("message",error)&&Object(lodash_fp__WEBPACK_IMPORTED_MODULE_0__.has)("body.message",error)&&Object(lodash_fp__WEBPACK_IMPORTED_MODULE_0__.has)("body.statusCode",error),isSecurityAppError=error=>Object(lodash_fp__WEBPACK_IMPORTED_MODULE_0__.has)("message",error)&&Object(lodash_fp__WEBPACK_IMPORTED_MODULE_0__.has)("body.message",error)&&Object(lodash_fp__WEBPACK_IMPORTED_MODULE_0__.has)("body.status_code",error),isAppError=error=>isKibanaError(error)||isSecurityAppError(error)},254:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ConnectorCard}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_elastic_eui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(74),styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(75),styled_components__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_2__),___WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(38);const StyledText=styled_components__WEBPACK_IMPORTED_MODULE_2___default.a.span.withConfig({displayName:"StyledText",componentId:"sc-15m9dva-0"})(["span{display:block;}"]),ConnectorCardDisplay=({connectorType:connectorType,title:title,listItems:listItems,isLoading:isLoading})=>{const description=Object(react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(StyledText,null,listItems.length>0&&listItems.map((item,i)=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",{"data-test-subj":"card-list-item",key:`${item.title}-${i}`},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("strong",null,item.title+": "),item.description))),[listItems]),icon=Object(react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{var _connectorsConfigurat,_connectorsConfigurat2;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiIcon,{size:"xl",type:null!==(_connectorsConfigurat=null===(_connectorsConfigurat2=___WEBPACK_IMPORTED_MODULE_3__.a[""+connectorType])||void 0===_connectorsConfigurat2?void 0:_connectorsConfigurat2.logo)&&void 0!==_connectorsConfigurat?_connectorsConfigurat:""})},[connectorType]);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,isLoading&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiLoadingSpinner,{"data-test-subj":"connector-card-loading"}),!isLoading&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__.EuiCard,{"data-test-subj":"connector-card",description:description,display:"plain",icon:icon,layout:"horizontal",paddingSize:"none",title:title,titleSize:"xs"}))},ConnectorCard=Object(react__WEBPACK_IMPORTED_MODULE_0__.memo)(ConnectorCardDisplay)}}]);