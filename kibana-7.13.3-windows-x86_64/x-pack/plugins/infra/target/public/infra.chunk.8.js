/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.infra_bundle_jsonpfunction=window.infra_bundle_jsonpfunction||[]).push([[8],{204:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return MetricsExplorerGroupBy}));var _elastic_eui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10),_kbn_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);const MetricsExplorerGroupBy=({options:options,onChange:onChange,fields:fields})=>{const handleChange=Object(react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(selectedOptions=>{const groupBy=selectedOptions.map(option=>option.label);onChange(groupBy)},[onChange]),selectedOptions=Array.isArray(options.groupBy)?options.groupBy.map(field=>({label:field})):options.groupBy?[{label:options.groupBy}]:[];return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_0__.EuiComboBox,{placeholder:_kbn_i18n__WEBPACK_IMPORTED_MODULE_1__.i18n.translate("xpack.infra.metricsExplorer.groupByLabel",{defaultMessage:"Everything"}),"aria-label":_kbn_i18n__WEBPACK_IMPORTED_MODULE_1__.i18n.translate("xpack.infra.metricsExplorer.groupByAriaLabel",{defaultMessage:"Graph per"}),fullWidth:!0,singleSelection:!1,selectedOptions:selectedOptions,options:fields.filter(f=>f.aggregatable&&"string"===f.type).map(f=>({label:f.name})),onChange:handleChange,isClearable:!0})}},205:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return useMetricsExplorerData}));var _elastic_datemath__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),_elastic_datemath__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_elastic_datemath__WEBPACK_IMPORTED_MODULE_0__),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(24),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_common_http_api_metrics_explorer__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(98),_utils_kuery__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(117),_src_plugins_kibana_react_public__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3),_common_runtime_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(15),_utils_use_tracked_promise__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(79);function useMetricsExplorerData(options,source,derivedIndexPattern,timerange,afterKey,signal,shouldLoadImmediately=!0){var _kibana$services$http;const fetchFn=null===(_kibana$services$http=Object(_src_plugins_kibana_react_public__WEBPACK_IMPORTED_MODULE_5__.useKibana)().services.http)||void 0===_kibana$services$http?void 0:_kibana$services$http.fetch,[error,setError]=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(null),[loading,setLoading]=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(!0),[data,setData]=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(null),[lastOptions,setLastOptions]=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(null),[lastTimerange,setLastTimerange]=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(null),from=_elastic_datemath__WEBPACK_IMPORTED_MODULE_0___default.a.parse(timerange.from),to=_elastic_datemath__WEBPACK_IMPORTED_MODULE_0___default.a.parse(timerange.to,{roundUp:!0}),[,makeRequest]=Object(_utils_use_tracked_promise__WEBPACK_IMPORTED_MODULE_7__.c)({cancelPreviousOn:"creation",createPromise:()=>(setLoading(!0),from&&to?fetchFn?source?fetchFn?fetchFn("/api/infra/metrics_explorer",{method:"POST",body:JSON.stringify({forceInterval:options.forceInterval,dropLastBucket:null==options.dropLastBucket||options.dropLastBucket,metrics:"count"===options.aggregation?[{aggregation:"count"}]:options.metrics.map(metric=>({aggregation:metric.aggregation,field:metric.field})),groupBy:options.groupBy,afterKey:afterKey,limit:options.limit,indexPattern:source.metricAlias,filterQuery:options.filterQuery&&Object(_utils_kuery__WEBPACK_IMPORTED_MODULE_4__.a)(options.filterQuery,derivedIndexPattern)||void 0,timerange:{...timerange,field:source.fields.timestamp,from:from.valueOf(),to:to.valueOf()}})}):Promise.reject(new Error("HTTP service is unavailable")):Promise.reject(new Error("Source is unavailable")):Promise.reject(new Error("HTTP service is unavailable")):Promise.reject(new Error("Unalble to parse timerange"))),onResolve:resp=>{setLoading(!1);const response=Object(_common_runtime_types__WEBPACK_IMPORTED_MODULE_6__.b)(_common_http_api_metrics_explorer__WEBPACK_IMPORTED_MODULE_3__.e)(resp);if(response){if(data&&lastOptions&&data.pageInfo.afterKey!==response.pageInfo.afterKey&&(current=lastOptions,next=options,Object(lodash__WEBPACK_IMPORTED_MODULE_1__.isEqual)(current,next))&&Object(lodash__WEBPACK_IMPORTED_MODULE_1__.isEqual)(timerange,lastTimerange)&&afterKey){const{series:series}=data;setData({...response,series:[...series,...response.series]})}else setData(response);setLastOptions(options),setLastTimerange(timerange),setError(null)}var current,next},onReject:e=>{setError(e),setLoading(!1)}},[source,timerange,options,signal,afterKey]);return Object(react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{shouldLoadImmediately&&makeRequest()},[makeRequest,shouldLoadImmediately]),{error:error,loading:loading,data:data,loadData:makeRequest}}},279:function(module,exports,__webpack_require__){"use strict";function _interopDefault(ex){return ex&&"object"==typeof ex&&"default"in ex?ex.default:ex}Object.defineProperty(exports,"__esModule",{value:!0});var allLocaleData=_interopDefault(__webpack_require__(507)),IntlMessageFormat=_interopDefault(__webpack_require__(280)),IntlRelativeFormat=_interopDefault(__webpack_require__(516)),PropTypes=_interopDefault(__webpack_require__(523)),React=__webpack_require__(2),React__default=_interopDefault(React),hoistNonReactStatics=_interopDefault(__webpack_require__(526)),invariant=_interopDefault(__webpack_require__(529)),memoizeIntlConstructor=_interopDefault(__webpack_require__(530)),defaultLocaleData={locale:"en",pluralRuleFunction:function(n,ord){var s=String(n).split("."),v0=!s[1],t0=Number(s[0])==n,n10=t0&&s[0].slice(-1),n100=t0&&s[0].slice(-2);return ord?1==n10&&11!=n100?"one":2==n10&&12!=n100?"two":3==n10&&13!=n100?"few":"other":1==n&&v0?"one":"other"},fields:{year:{displayName:"year",relative:{0:"this year",1:"next year","-1":"last year"},relativeTime:{future:{one:"in {0} year",other:"in {0} years"},past:{one:"{0} year ago",other:"{0} years ago"}}},"year-short":{displayName:"yr.",relative:{0:"this yr.",1:"next yr.","-1":"last yr."},relativeTime:{future:{one:"in {0} yr.",other:"in {0} yr."},past:{one:"{0} yr. ago",other:"{0} yr. ago"}}},month:{displayName:"month",relative:{0:"this month",1:"next month","-1":"last month"},relativeTime:{future:{one:"in {0} month",other:"in {0} months"},past:{one:"{0} month ago",other:"{0} months ago"}}},"month-short":{displayName:"mo.",relative:{0:"this mo.",1:"next mo.","-1":"last mo."},relativeTime:{future:{one:"in {0} mo.",other:"in {0} mo."},past:{one:"{0} mo. ago",other:"{0} mo. ago"}}},day:{displayName:"day",relative:{0:"today",1:"tomorrow","-1":"yesterday"},relativeTime:{future:{one:"in {0} day",other:"in {0} days"},past:{one:"{0} day ago",other:"{0} days ago"}}},"day-short":{displayName:"day",relative:{0:"today",1:"tomorrow","-1":"yesterday"},relativeTime:{future:{one:"in {0} day",other:"in {0} days"},past:{one:"{0} day ago",other:"{0} days ago"}}},hour:{displayName:"hour",relative:{0:"this hour"},relativeTime:{future:{one:"in {0} hour",other:"in {0} hours"},past:{one:"{0} hour ago",other:"{0} hours ago"}}},"hour-short":{displayName:"hr.",relative:{0:"this hour"},relativeTime:{future:{one:"in {0} hr.",other:"in {0} hr."},past:{one:"{0} hr. ago",other:"{0} hr. ago"}}},minute:{displayName:"minute",relative:{0:"this minute"},relativeTime:{future:{one:"in {0} minute",other:"in {0} minutes"},past:{one:"{0} minute ago",other:"{0} minutes ago"}}},"minute-short":{displayName:"min.",relative:{0:"this minute"},relativeTime:{future:{one:"in {0} min.",other:"in {0} min."},past:{one:"{0} min. ago",other:"{0} min. ago"}}},second:{displayName:"second",relative:{0:"now"},relativeTime:{future:{one:"in {0} second",other:"in {0} seconds"},past:{one:"{0} second ago",other:"{0} seconds ago"}}},"second-short":{displayName:"sec.",relative:{0:"now"},relativeTime:{future:{one:"in {0} sec.",other:"in {0} sec."},past:{one:"{0} sec. ago",other:"{0} sec. ago"}}}}};function addLocaleData(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],locales=Array.isArray(data)?data:[data];locales.forEach((function(localeData){localeData&&localeData.locale&&(IntlMessageFormat.__addLocaleData(localeData),IntlRelativeFormat.__addLocaleData(localeData))}))}function hasIMFAndIRFLocaleData(locale){var normalizedLocale=locale&&locale.toLowerCase();return!(!IntlMessageFormat.__localeData__[normalizedLocale]||!IntlRelativeFormat.__localeData__[normalizedLocale])}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},classCallCheck=(function(){function AwaitValue(value){this.value=value}function AsyncGenerator(gen){var front,back;function resume(key,arg){try{var result=gen[key](arg),value=result.value;value instanceof AwaitValue?Promise.resolve(value.value).then((function(arg){resume("next",arg)}),(function(arg){resume("throw",arg)})):settle(result.done?"return":"normal",result.value)}catch(err){settle("throw",err)}}function settle(type,value){switch(type){case"return":front.resolve({value:value,done:!0});break;case"throw":front.reject(value);break;default:front.resolve({value:value,done:!1})}(front=front.next)?resume(front.key,front.arg):back=null}this._invoke=function(key,arg){return new Promise((function(resolve,reject){var request={key:key,arg:arg,resolve:resolve,reject:reject,next:null};back?back=back.next=request:(front=back=request,resume(key,arg))}))},"function"!=typeof gen.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(AsyncGenerator.prototype[Symbol.asyncIterator]=function(){return this}),AsyncGenerator.prototype.next=function(arg){return this._invoke("next",arg)},AsyncGenerator.prototype.throw=function(arg){return this._invoke("throw",arg)},AsyncGenerator.prototype.return=function(arg){return this._invoke("return",arg)}}(),function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}),createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),defineProperty=function(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj},_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},inherits=function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)},possibleConstructorReturn=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call},toConsumableArray=function(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)},bool=PropTypes.bool,number=PropTypes.number,string=PropTypes.string,func=PropTypes.func,object=PropTypes.object,oneOf=PropTypes.oneOf,shape=PropTypes.shape,any=PropTypes.any,oneOfType=PropTypes.oneOfType,localeMatcher=oneOf(["best fit","lookup"]),narrowShortLong=oneOf(["narrow","short","long"]),numeric2digit=oneOf(["numeric","2-digit"]),funcReq=func.isRequired,intlConfigPropTypes={locale:string,timeZone:string,formats:object,messages:object,textComponent:any,defaultLocale:string,defaultFormats:object,onError:func},intlFormatPropTypes={formatDate:funcReq,formatTime:funcReq,formatRelative:funcReq,formatNumber:funcReq,formatPlural:funcReq,formatMessage:funcReq,formatHTMLMessage:funcReq},intlShape=shape(_extends({},intlConfigPropTypes,intlFormatPropTypes,{formatters:object,now:funcReq})),dateTimeFormatPropTypes=(string.isRequired,oneOfType([string,object]),{localeMatcher:localeMatcher,formatMatcher:oneOf(["basic","best fit"]),timeZone:string,hour12:bool,weekday:narrowShortLong,era:narrowShortLong,year:numeric2digit,month:oneOf(["numeric","2-digit","narrow","short","long"]),day:numeric2digit,hour:numeric2digit,minute:numeric2digit,second:numeric2digit,timeZoneName:oneOf(["short","long"])}),numberFormatPropTypes={localeMatcher:localeMatcher,style:oneOf(["decimal","currency","percent"]),currency:string,currencyDisplay:oneOf(["symbol","code","name"]),useGrouping:bool,minimumIntegerDigits:number,minimumFractionDigits:number,maximumFractionDigits:number,minimumSignificantDigits:number,maximumSignificantDigits:number},relativeFormatPropTypes={style:oneOf(["best fit","numeric"]),units:oneOf(["second","minute","hour","day","month","year","second-short","minute-short","hour-short","day-short","month-short","year-short"])},pluralFormatPropTypes={style:oneOf(["cardinal","ordinal"])},intlConfigPropNames=Object.keys(intlConfigPropTypes),ESCAPED_CHARS={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},UNSAFE_CHARS_REGEX=/[&><"']/g;function escape(str){return(""+str).replace(UNSAFE_CHARS_REGEX,(function(match){return ESCAPED_CHARS[match]}))}function filterProps(props,whitelist){var defaults$$1=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return whitelist.reduce((function(filtered,name){return props.hasOwnProperty(name)?filtered[name]=props[name]:defaults$$1.hasOwnProperty(name)&&(filtered[name]=defaults$$1[name]),filtered}),{})}function invariantIntlContext(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},intl=_ref.intl;invariant(intl,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}function shallowEquals(objA,objB){if(objA===objB)return!0;if("object"!==(void 0===objA?"undefined":_typeof(objA))||null===objA||"object"!==(void 0===objB?"undefined":_typeof(objB))||null===objB)return!1;var keysA=Object.keys(objA),keysB=Object.keys(objB);if(keysA.length!==keysB.length)return!1;for(var bHasOwnProperty=Object.prototype.hasOwnProperty.bind(objB),i=0;i<keysA.length;i++)if(!bHasOwnProperty(keysA[i])||objA[keysA[i]]!==objB[keysA[i]])return!1;return!0}function shouldIntlComponentUpdate(_ref2,nextProps,nextState){var props=_ref2.props,state=_ref2.state,_ref2$context=_ref2.context,context=void 0===_ref2$context?{}:_ref2$context,nextContext=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},_context$intl=context.intl,intl=void 0===_context$intl?{}:_context$intl,_nextContext$intl=nextContext.intl,nextIntl=void 0===_nextContext$intl?{}:_nextContext$intl;return!shallowEquals(nextProps,props)||!shallowEquals(nextState,state)||!(nextIntl===intl||shallowEquals(filterProps(nextIntl,intlConfigPropNames),filterProps(intl,intlConfigPropNames)))}function createError(message,exception){return"[React Intl] "+message+(exception?"\n"+exception:"")}function defaultErrorHandler(error){0}function getDisplayName(Component$$1){return Component$$1.displayName||Component$$1.name||"Component"}function resolveLocale(locales){return IntlMessageFormat.prototype._resolveLocale(locales)}function findPluralFunction(locale){return IntlMessageFormat.prototype._findPluralRuleFunction(locale)}var IntlPluralFormat=function IntlPluralFormat(locales){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};classCallCheck(this,IntlPluralFormat);var useOrdinal="ordinal"===options.style,pluralFn=findPluralFunction(resolveLocale(locales));this.format=function(value){return pluralFn(value,useOrdinal)}},DATE_TIME_FORMAT_OPTIONS=Object.keys(dateTimeFormatPropTypes),NUMBER_FORMAT_OPTIONS=Object.keys(numberFormatPropTypes),RELATIVE_FORMAT_OPTIONS=Object.keys(relativeFormatPropTypes),PLURAL_FORMAT_OPTIONS=Object.keys(pluralFormatPropTypes),RELATIVE_FORMAT_THRESHOLDS={second:60,minute:60,hour:24,day:30,month:12};function updateRelativeFormatThresholds(newThresholds){var thresholds=IntlRelativeFormat.thresholds;thresholds.second=newThresholds.second,thresholds.minute=newThresholds.minute,thresholds.hour=newThresholds.hour,thresholds.day=newThresholds.day,thresholds.month=newThresholds.month,thresholds["second-short"]=newThresholds["second-short"],thresholds["minute-short"]=newThresholds["minute-short"],thresholds["hour-short"]=newThresholds["hour-short"],thresholds["day-short"]=newThresholds["day-short"],thresholds["month-short"]=newThresholds["month-short"]}function getNamedFormat(formats,type,name,onError){var format=formats&&formats[type]&&formats[type][name];if(format)return format;onError(createError("No "+type+" format named: "+name))}function formatMessage(config,state){var messageDescriptor=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},values=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},locale=config.locale,formats=config.formats,messages=config.messages,defaultLocale=config.defaultLocale,defaultFormats=config.defaultFormats,id=messageDescriptor.id,defaultMessage=messageDescriptor.defaultMessage;invariant(id,"[React Intl] An `id` must be provided to format a message.");var message=messages&&messages[id],hasValues=Object.keys(values).length>0;if(!hasValues)return message||defaultMessage||id;var formattedMessage=void 0,onError=config.onError||defaultErrorHandler;if(message)try{var formatter=state.getMessageFormat(message,locale,formats);formattedMessage=formatter.format(values)}catch(e){onError(createError('Error formatting message: "'+id+'" for locale: "'+locale+'"'+(defaultMessage?", using default message as fallback.":""),e))}else(!defaultMessage||locale&&locale.toLowerCase()!==defaultLocale.toLowerCase())&&onError(createError('Missing message: "'+id+'" for locale: "'+locale+'"'+(defaultMessage?", using default message as fallback.":"")));if(!formattedMessage&&defaultMessage)try{var _formatter=state.getMessageFormat(defaultMessage,defaultLocale,defaultFormats);formattedMessage=_formatter.format(values)}catch(e){onError(createError('Error formatting the default message for: "'+id+'"',e))}return formattedMessage||onError(createError('Cannot format message: "'+id+'", using message '+(message||defaultMessage?"source":"id")+" as fallback.")),formattedMessage||message||defaultMessage||id}var format=Object.freeze({formatDate:function(config,state,value){var options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},locale=config.locale,formats=config.formats,timeZone=config.timeZone,format=options.format,onError=config.onError||defaultErrorHandler,date=new Date(value),defaults$$1=_extends({},timeZone&&{timeZone:timeZone},format&&getNamedFormat(formats,"date",format,onError)),filteredOptions=filterProps(options,DATE_TIME_FORMAT_OPTIONS,defaults$$1);try{return state.getDateTimeFormat(locale,filteredOptions).format(date)}catch(e){onError(createError("Error formatting date.",e))}return String(date)},formatTime:function(config,state,value){var options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},locale=config.locale,formats=config.formats,timeZone=config.timeZone,format=options.format,onError=config.onError||defaultErrorHandler,date=new Date(value),defaults$$1=_extends({},timeZone&&{timeZone:timeZone},format&&getNamedFormat(formats,"time",format,onError)),filteredOptions=filterProps(options,DATE_TIME_FORMAT_OPTIONS,defaults$$1);filteredOptions.hour||filteredOptions.minute||filteredOptions.second||(filteredOptions=_extends({},filteredOptions,{hour:"numeric",minute:"numeric"}));try{return state.getDateTimeFormat(locale,filteredOptions).format(date)}catch(e){onError(createError("Error formatting time.",e))}return String(date)},formatRelative:function(config,state,value){var options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},locale=config.locale,formats=config.formats,format=options.format,onError=config.onError||defaultErrorHandler,date=new Date(value),now=new Date(options.now),defaults$$1=format&&getNamedFormat(formats,"relative",format,onError),filteredOptions=filterProps(options,RELATIVE_FORMAT_OPTIONS,defaults$$1),oldThresholds=_extends({},IntlRelativeFormat.thresholds);updateRelativeFormatThresholds(RELATIVE_FORMAT_THRESHOLDS);try{return state.getRelativeFormat(locale,filteredOptions).format(date,{now:isFinite(now)?now:state.now()})}catch(e){onError(createError("Error formatting relative time.",e))}finally{updateRelativeFormatThresholds(oldThresholds)}return String(date)},formatNumber:function(config,state,value){var options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},locale=config.locale,formats=config.formats,format=options.format,onError=config.onError||defaultErrorHandler,defaults$$1=format&&getNamedFormat(formats,"number",format,onError),filteredOptions=filterProps(options,NUMBER_FORMAT_OPTIONS,defaults$$1);try{return state.getNumberFormat(locale,filteredOptions).format(value)}catch(e){onError(createError("Error formatting number.",e))}return String(value)},formatPlural:function(config,state,value){var options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},locale=config.locale,filteredOptions=filterProps(options,PLURAL_FORMAT_OPTIONS),onError=config.onError||defaultErrorHandler;try{return state.getPluralFormat(locale,filteredOptions).format(value)}catch(e){onError(createError("Error formatting plural.",e))}return"other"},formatMessage:formatMessage,formatHTMLMessage:function(config,state,messageDescriptor){var rawValues=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},escapedValues=Object.keys(rawValues).reduce((function(escaped,name){var value=rawValues[name];return escaped[name]="string"==typeof value?escape(value):value,escaped}),{});return formatMessage(config,state,messageDescriptor,escapedValues)}}),intlConfigPropNames$1=Object.keys(intlConfigPropTypes),intlFormatPropNames=Object.keys(intlFormatPropTypes),defaultProps={formats:{},messages:{},timeZone:null,textComponent:"span",defaultLocale:"en",defaultFormats:{},onError:defaultErrorHandler},IntlProvider=function(_Component){function IntlProvider(props){var context=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};classCallCheck(this,IntlProvider);var _this=possibleConstructorReturn(this,(IntlProvider.__proto__||Object.getPrototypeOf(IntlProvider)).call(this,props,context));invariant("undefined"!=typeof Intl,"[React Intl] The `Intl` APIs must be available in the runtime, and do not appear to be built-in. An `Intl` polyfill should be loaded.\nSee: http://formatjs.io/guides/runtime-environments/");var intlContext=context.intl,initialNow=void 0;initialNow=isFinite(props.initialNow)?Number(props.initialNow):intlContext?intlContext.now():Date.now();var _ref=intlContext||{},_ref$formatters=_ref.formatters,formatters=void 0===_ref$formatters?{getDateTimeFormat:memoizeIntlConstructor(Intl.DateTimeFormat),getNumberFormat:memoizeIntlConstructor(Intl.NumberFormat),getMessageFormat:memoizeIntlConstructor(IntlMessageFormat),getRelativeFormat:memoizeIntlConstructor(IntlRelativeFormat),getPluralFormat:memoizeIntlConstructor(IntlPluralFormat)}:_ref$formatters;return _this.state=_extends({},formatters,{now:function(){return _this._didDisplay?Date.now():initialNow}}),_this}return inherits(IntlProvider,_Component),createClass(IntlProvider,[{key:"getConfig",value:function(){var intlContext=this.context.intl,config=filterProps(this.props,intlConfigPropNames$1,intlContext);for(var propName in defaultProps)void 0===config[propName]&&(config[propName]=defaultProps[propName]);if(!function(locale){for(var localeParts=(locale||"").split("-");localeParts.length>0;){if(hasIMFAndIRFLocaleData(localeParts.join("-")))return!0;localeParts.pop()}return!1}(config.locale)){var _config=config,locale=_config.locale,defaultLocale=_config.defaultLocale,defaultFormats=_config.defaultFormats;(0,_config.onError)(createError('Missing locale data for locale: "'+locale+'". Using default locale: "'+defaultLocale+'" as fallback.')),config=_extends({},config,{locale:defaultLocale,formats:defaultFormats,messages:defaultProps.messages})}return config}},{key:"getBoundFormatFns",value:function(config,state){return intlFormatPropNames.reduce((function(boundFormatFns,name){return boundFormatFns[name]=format[name].bind(null,config,state),boundFormatFns}),{})}},{key:"getChildContext",value:function(){var config=this.getConfig(),boundFormatFns=this.getBoundFormatFns(config,this.state),_state=this.state,now=_state.now,formatters=function(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}(_state,["now"]);return{intl:_extends({},config,boundFormatFns,{formatters:formatters,now:now})}}},{key:"shouldComponentUpdate",value:function(){for(var _len=arguments.length,next=Array(_len),_key=0;_key<_len;_key++)next[_key]=arguments[_key];return shouldIntlComponentUpdate.apply(void 0,[this].concat(next))}},{key:"componentDidMount",value:function(){this._didDisplay=!0}},{key:"render",value:function(){return React.Children.only(this.props.children)}}]),IntlProvider}(React.Component);IntlProvider.displayName="IntlProvider",IntlProvider.contextTypes={intl:intlShape},IntlProvider.childContextTypes={intl:intlShape.isRequired};var FormattedDate=function(_Component){function FormattedDate(props,context){classCallCheck(this,FormattedDate);var _this=possibleConstructorReturn(this,(FormattedDate.__proto__||Object.getPrototypeOf(FormattedDate)).call(this,props,context));return invariantIntlContext(context),_this}return inherits(FormattedDate,_Component),createClass(FormattedDate,[{key:"shouldComponentUpdate",value:function(){for(var _len=arguments.length,next=Array(_len),_key=0;_key<_len;_key++)next[_key]=arguments[_key];return shouldIntlComponentUpdate.apply(void 0,[this].concat(next))}},{key:"render",value:function(){var _context$intl=this.context.intl,formatDate=_context$intl.formatDate,Text=_context$intl.textComponent,_props=this.props,value=_props.value,children=_props.children,formattedDate=formatDate(value,this.props);return"function"==typeof children?children(formattedDate):React__default.createElement(Text,null,formattedDate)}}]),FormattedDate}(React.Component);FormattedDate.displayName="FormattedDate",FormattedDate.contextTypes={intl:intlShape};var FormattedTime=function(_Component){function FormattedTime(props,context){classCallCheck(this,FormattedTime);var _this=possibleConstructorReturn(this,(FormattedTime.__proto__||Object.getPrototypeOf(FormattedTime)).call(this,props,context));return invariantIntlContext(context),_this}return inherits(FormattedTime,_Component),createClass(FormattedTime,[{key:"shouldComponentUpdate",value:function(){for(var _len=arguments.length,next=Array(_len),_key=0;_key<_len;_key++)next[_key]=arguments[_key];return shouldIntlComponentUpdate.apply(void 0,[this].concat(next))}},{key:"render",value:function(){var _context$intl=this.context.intl,formatTime=_context$intl.formatTime,Text=_context$intl.textComponent,_props=this.props,value=_props.value,children=_props.children,formattedTime=formatTime(value,this.props);return"function"==typeof children?children(formattedTime):React__default.createElement(Text,null,formattedTime)}}]),FormattedTime}(React.Component);FormattedTime.displayName="FormattedTime",FormattedTime.contextTypes={intl:intlShape};var FormattedRelative=function(_Component){function FormattedRelative(props,context){classCallCheck(this,FormattedRelative);var _this=possibleConstructorReturn(this,(FormattedRelative.__proto__||Object.getPrototypeOf(FormattedRelative)).call(this,props,context));invariantIntlContext(context);var now=isFinite(props.initialNow)?Number(props.initialNow):context.intl.now();return _this.state={now:now},_this}return inherits(FormattedRelative,_Component),createClass(FormattedRelative,[{key:"scheduleNextUpdate",value:function(props,state){var _this2=this;clearTimeout(this._timer);var value=props.value,units=props.units,updateInterval=props.updateInterval,time=new Date(value).getTime();if(updateInterval&&isFinite(time)){var delta=time-state.now,unitDelay=function(units){switch(units){case"second":return 1e3;case"minute":return 6e4;case"hour":return 36e5;case"day":return 864e5;default:return 2147483647}}(units||function(delta){var absDelta=Math.abs(delta);return absDelta<6e4?"second":absDelta<36e5?"minute":absDelta<864e5?"hour":"day"}(delta)),unitRemainder=Math.abs(delta%unitDelay),delay=delta<0?Math.max(updateInterval,unitDelay-unitRemainder):Math.max(updateInterval,unitRemainder);this._timer=setTimeout((function(){_this2.setState({now:_this2.context.intl.now()})}),delay)}}},{key:"componentDidMount",value:function(){this.scheduleNextUpdate(this.props,this.state)}},{key:"componentWillReceiveProps",value:function(_ref){(function(a,b){if(a===b)return!0;var aTime=new Date(a).getTime(),bTime=new Date(b).getTime();return isFinite(aTime)&&isFinite(bTime)&&aTime===bTime})(_ref.value,this.props.value)||this.setState({now:this.context.intl.now()})}},{key:"shouldComponentUpdate",value:function(){for(var _len=arguments.length,next=Array(_len),_key=0;_key<_len;_key++)next[_key]=arguments[_key];return shouldIntlComponentUpdate.apply(void 0,[this].concat(next))}},{key:"componentWillUpdate",value:function(nextProps,nextState){this.scheduleNextUpdate(nextProps,nextState)}},{key:"componentWillUnmount",value:function(){clearTimeout(this._timer)}},{key:"render",value:function(){var _context$intl=this.context.intl,formatRelative=_context$intl.formatRelative,Text=_context$intl.textComponent,_props=this.props,value=_props.value,children=_props.children,formattedRelative=formatRelative(value,_extends({},this.props,this.state));return"function"==typeof children?children(formattedRelative):React__default.createElement(Text,null,formattedRelative)}}]),FormattedRelative}(React.Component);FormattedRelative.displayName="FormattedRelative",FormattedRelative.contextTypes={intl:intlShape},FormattedRelative.defaultProps={updateInterval:1e4};var FormattedNumber=function(_Component){function FormattedNumber(props,context){classCallCheck(this,FormattedNumber);var _this=possibleConstructorReturn(this,(FormattedNumber.__proto__||Object.getPrototypeOf(FormattedNumber)).call(this,props,context));return invariantIntlContext(context),_this}return inherits(FormattedNumber,_Component),createClass(FormattedNumber,[{key:"shouldComponentUpdate",value:function(){for(var _len=arguments.length,next=Array(_len),_key=0;_key<_len;_key++)next[_key]=arguments[_key];return shouldIntlComponentUpdate.apply(void 0,[this].concat(next))}},{key:"render",value:function(){var _context$intl=this.context.intl,formatNumber=_context$intl.formatNumber,Text=_context$intl.textComponent,_props=this.props,value=_props.value,children=_props.children,formattedNumber=formatNumber(value,this.props);return"function"==typeof children?children(formattedNumber):React__default.createElement(Text,null,formattedNumber)}}]),FormattedNumber}(React.Component);FormattedNumber.displayName="FormattedNumber",FormattedNumber.contextTypes={intl:intlShape};var FormattedPlural=function(_Component){function FormattedPlural(props,context){classCallCheck(this,FormattedPlural);var _this=possibleConstructorReturn(this,(FormattedPlural.__proto__||Object.getPrototypeOf(FormattedPlural)).call(this,props,context));return invariantIntlContext(context),_this}return inherits(FormattedPlural,_Component),createClass(FormattedPlural,[{key:"shouldComponentUpdate",value:function(){for(var _len=arguments.length,next=Array(_len),_key=0;_key<_len;_key++)next[_key]=arguments[_key];return shouldIntlComponentUpdate.apply(void 0,[this].concat(next))}},{key:"render",value:function(){var _context$intl=this.context.intl,formatPlural=_context$intl.formatPlural,Text=_context$intl.textComponent,_props=this.props,value=_props.value,other=_props.other,children=_props.children,pluralCategory=formatPlural(value,this.props),formattedPlural=this.props[pluralCategory]||other;return"function"==typeof children?children(formattedPlural):React__default.createElement(Text,null,formattedPlural)}}]),FormattedPlural}(React.Component);FormattedPlural.displayName="FormattedPlural",FormattedPlural.contextTypes={intl:intlShape},FormattedPlural.defaultProps={style:"cardinal"};var defaultFormatMessage=function(descriptor,values){return formatMessage({},{getMessageFormat:memoizeIntlConstructor(IntlMessageFormat)},descriptor,values)},FormattedMessage=function(_Component){function FormattedMessage(props,context){classCallCheck(this,FormattedMessage);var _this=possibleConstructorReturn(this,(FormattedMessage.__proto__||Object.getPrototypeOf(FormattedMessage)).call(this,props,context));return props.defaultMessage||invariantIntlContext(context),_this}return inherits(FormattedMessage,_Component),createClass(FormattedMessage,[{key:"shouldComponentUpdate",value:function(nextProps){var values=this.props.values,nextValues=nextProps.values;if(!shallowEquals(nextValues,values))return!0;for(var nextPropsToCheck=_extends({},nextProps,{values:values}),_len=arguments.length,next=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)next[_key-1]=arguments[_key];return shouldIntlComponentUpdate.apply(void 0,[this,nextPropsToCheck].concat(next))}},{key:"render",value:function(){var counter,_ref=this.context.intl||{},_ref$formatMessage=_ref.formatMessage,formatMessage$$1=void 0===_ref$formatMessage?defaultFormatMessage:_ref$formatMessage,_ref$textComponent=_ref.textComponent,Text=void 0===_ref$textComponent?"span":_ref$textComponent,_props=this.props,id=_props.id,description=_props.description,defaultMessage=_props.defaultMessage,values=_props.values,_props$tagName=_props.tagName,Component$$1=void 0===_props$tagName?Text:_props$tagName,children=_props.children,tokenDelimiter=void 0,tokenizedValues=void 0,elements=void 0;if(values&&Object.keys(values).length>0){var uid=Math.floor(1099511627776*Math.random()).toString(16),generateToken=(counter=0,function(){return"ELEMENT-"+uid+"-"+(counter+=1)});tokenDelimiter="@__"+uid+"__@",tokenizedValues={},elements={},Object.keys(values).forEach((function(name){var value=values[name];if(React.isValidElement(value)){var token=generateToken();tokenizedValues[name]=tokenDelimiter+token+tokenDelimiter,elements[token]=value}else tokenizedValues[name]=value}))}var formattedMessage=formatMessage$$1({id:id,description:description,defaultMessage:defaultMessage},tokenizedValues||values),nodes=void 0;return nodes=elements&&Object.keys(elements).length>0?formattedMessage.split(tokenDelimiter).filter((function(part){return!!part})).map((function(part){return elements[part]||part})):[formattedMessage],"function"==typeof children?children.apply(void 0,toConsumableArray(nodes)):React.createElement.apply(void 0,[Component$$1,null].concat(toConsumableArray(nodes)))}}]),FormattedMessage}(React.Component);FormattedMessage.displayName="FormattedMessage",FormattedMessage.contextTypes={intl:intlShape},FormattedMessage.defaultProps={values:{}};var FormattedHTMLMessage=function(_Component){function FormattedHTMLMessage(props,context){classCallCheck(this,FormattedHTMLMessage);var _this=possibleConstructorReturn(this,(FormattedHTMLMessage.__proto__||Object.getPrototypeOf(FormattedHTMLMessage)).call(this,props,context));return invariantIntlContext(context),_this}return inherits(FormattedHTMLMessage,_Component),createClass(FormattedHTMLMessage,[{key:"shouldComponentUpdate",value:function(nextProps){var values=this.props.values,nextValues=nextProps.values;if(!shallowEquals(nextValues,values))return!0;for(var nextPropsToCheck=_extends({},nextProps,{values:values}),_len=arguments.length,next=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)next[_key-1]=arguments[_key];return shouldIntlComponentUpdate.apply(void 0,[this,nextPropsToCheck].concat(next))}},{key:"render",value:function(){var _context$intl=this.context.intl,formatHTMLMessage=_context$intl.formatHTMLMessage,Text=_context$intl.textComponent,_props=this.props,id=_props.id,description=_props.description,defaultMessage=_props.defaultMessage,rawValues=_props.values,_props$tagName=_props.tagName,Component$$1=void 0===_props$tagName?Text:_props$tagName,children=_props.children,formattedHTMLMessage=formatHTMLMessage({id:id,description:description,defaultMessage:defaultMessage},rawValues);if("function"==typeof children)return children(formattedHTMLMessage);var html={__html:formattedHTMLMessage};return React__default.createElement(Component$$1,{dangerouslySetInnerHTML:html})}}]),FormattedHTMLMessage}(React.Component);FormattedHTMLMessage.displayName="FormattedHTMLMessage",FormattedHTMLMessage.contextTypes={intl:intlShape},FormattedHTMLMessage.defaultProps={values:{}},addLocaleData(defaultLocaleData),addLocaleData(allLocaleData),exports.addLocaleData=addLocaleData,exports.intlShape=intlShape,exports.injectIntl=function(WrappedComponent){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_options$intlPropName=options.intlPropName,intlPropName=void 0===_options$intlPropName?"intl":_options$intlPropName,_options$withRef=options.withRef,withRef=void 0!==_options$withRef&&_options$withRef,InjectIntl=function(_Component){function InjectIntl(props,context){classCallCheck(this,InjectIntl);var _this=possibleConstructorReturn(this,(InjectIntl.__proto__||Object.getPrototypeOf(InjectIntl)).call(this,props,context));return invariantIntlContext(context),_this}return inherits(InjectIntl,_Component),createClass(InjectIntl,[{key:"getWrappedInstance",value:function(){return invariant(withRef,"[React Intl] To access the wrapped instance, the `{withRef: true}` option must be set when calling: `injectIntl()`"),this._wrappedInstance}},{key:"render",value:function(){var _this2=this;return React__default.createElement(WrappedComponent,_extends({},this.props,defineProperty({},intlPropName,this.context.intl),{ref:withRef?function(ref){return _this2._wrappedInstance=ref}:null}))}}]),InjectIntl}(React.Component);return InjectIntl.displayName="InjectIntl("+getDisplayName(WrappedComponent)+")",InjectIntl.contextTypes={intl:intlShape},InjectIntl.WrappedComponent=WrappedComponent,hoistNonReactStatics(InjectIntl,WrappedComponent)},exports.defineMessages=function(messageDescriptors){return messageDescriptors},exports.IntlProvider=IntlProvider,exports.FormattedDate=FormattedDate,exports.FormattedTime=FormattedTime,exports.FormattedRelative=FormattedRelative,exports.FormattedNumber=FormattedNumber,exports.FormattedPlural=FormattedPlural,exports.FormattedMessage=FormattedMessage,exports.FormattedHTMLMessage=FormattedHTMLMessage},280:function(module,exports,__webpack_require__){"use strict";var IntlMessageFormat=__webpack_require__(508).default;__webpack_require__(515),(exports=module.exports=IntlMessageFormat).default=exports},281:function(module,exports,__webpack_require__){"use strict";exports.extend=function(obj){var i,len,source,key,sources=Array.prototype.slice.call(arguments,1);for(i=0,len=sources.length;i<len;i+=1)if(source=sources[i])for(key in source)hop.call(source,key)&&(obj[key]=source[key]);return obj};var hop=Object.prototype.hasOwnProperty;exports.hop=hop},290:function(module,exports,__webpack_require__){var cssKeywords=__webpack_require__(551),reverseKeywords={};for(var key in cssKeywords)cssKeywords.hasOwnProperty(key)&&(reverseKeywords[cssKeywords[key]]=key);var convert=module.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var model in convert)if(convert.hasOwnProperty(model)){if(!("channels"in convert[model]))throw new Error("missing channels property: "+model);if(!("labels"in convert[model]))throw new Error("missing channel labels property: "+model);if(convert[model].labels.length!==convert[model].channels)throw new Error("channel and label counts mismatch: "+model);var channels=convert[model].channels,labels=convert[model].labels;delete convert[model].channels,delete convert[model].labels,Object.defineProperty(convert[model],"channels",{value:channels}),Object.defineProperty(convert[model],"labels",{value:labels})}convert.rgb.hsl=function(rgb){var h,l,r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,min=Math.min(r,g,b),max=Math.max(r,g,b),delta=max-min;return max===min?h=0:r===max?h=(g-b)/delta:g===max?h=2+(b-r)/delta:b===max&&(h=4+(r-g)/delta),(h=Math.min(60*h,360))<0&&(h+=360),l=(min+max)/2,[h,100*(max===min?0:l<=.5?delta/(max+min):delta/(2-max-min)),100*l]},convert.rgb.hsv=function(rgb){var rdif,gdif,bdif,h,s,r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,v=Math.max(r,g,b),diff=v-Math.min(r,g,b),diffc=function(c){return(v-c)/6/diff+.5};return 0===diff?h=s=0:(s=diff/v,rdif=diffc(r),gdif=diffc(g),bdif=diffc(b),r===v?h=bdif-gdif:g===v?h=1/3+rdif-bdif:b===v&&(h=2/3+gdif-rdif),h<0?h+=1:h>1&&(h-=1)),[360*h,100*s,100*v]},convert.rgb.hwb=function(rgb){var r=rgb[0],g=rgb[1],b=rgb[2];return[convert.rgb.hsl(rgb)[0],100*(1/255*Math.min(r,Math.min(g,b))),100*(b=1-1/255*Math.max(r,Math.max(g,b)))]},convert.rgb.cmyk=function(rgb){var k,r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255;return[100*((1-r-(k=Math.min(1-r,1-g,1-b)))/(1-k)||0),100*((1-g-k)/(1-k)||0),100*((1-b-k)/(1-k)||0),100*k]},convert.rgb.keyword=function(rgb){var reversed=reverseKeywords[rgb];if(reversed)return reversed;var currentClosestKeyword,x,y,currentClosestDistance=1/0;for(var keyword in cssKeywords)if(cssKeywords.hasOwnProperty(keyword)){var value=cssKeywords[keyword],distance=(x=rgb,y=value,Math.pow(x[0]-y[0],2)+Math.pow(x[1]-y[1],2)+Math.pow(x[2]-y[2],2));distance<currentClosestDistance&&(currentClosestDistance=distance,currentClosestKeyword=keyword)}return currentClosestKeyword},convert.keyword.rgb=function(keyword){return cssKeywords[keyword]},convert.rgb.xyz=function(rgb){var r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255;return[100*(.4124*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.3576*(g=g>.04045?Math.pow((g+.055)/1.055,2.4):g/12.92)+.1805*(b=b>.04045?Math.pow((b+.055)/1.055,2.4):b/12.92)),100*(.2126*r+.7152*g+.0722*b),100*(.0193*r+.1192*g+.9505*b)]},convert.rgb.lab=function(rgb){var xyz=convert.rgb.xyz(rgb),x=xyz[0],y=xyz[1],z=xyz[2];return y/=100,z/=108.883,x=(x/=95.047)>.008856?Math.pow(x,1/3):7.787*x+16/116,[116*(y=y>.008856?Math.pow(y,1/3):7.787*y+16/116)-16,500*(x-y),200*(y-(z=z>.008856?Math.pow(z,1/3):7.787*z+16/116))]},convert.hsl.rgb=function(hsl){var t1,t2,t3,rgb,val,h=hsl[0]/360,s=hsl[1]/100,l=hsl[2]/100;if(0===s)return[val=255*l,val,val];t1=2*l-(t2=l<.5?l*(1+s):l+s-l*s),rgb=[0,0,0];for(var i=0;i<3;i++)(t3=h+1/3*-(i-1))<0&&t3++,t3>1&&t3--,val=6*t3<1?t1+6*(t2-t1)*t3:2*t3<1?t2:3*t3<2?t1+(t2-t1)*(2/3-t3)*6:t1,rgb[i]=255*val;return rgb},convert.hsl.hsv=function(hsl){var h=hsl[0],s=hsl[1]/100,l=hsl[2]/100,smin=s,lmin=Math.max(l,.01);return s*=(l*=2)<=1?l:2-l,smin*=lmin<=1?lmin:2-lmin,[h,100*(0===l?2*smin/(lmin+smin):2*s/(l+s)),100*((l+s)/2)]},convert.hsv.rgb=function(hsv){var h=hsv[0]/60,s=hsv[1]/100,v=hsv[2]/100,hi=Math.floor(h)%6,f=h-Math.floor(h),p=255*v*(1-s),q=255*v*(1-s*f),t=255*v*(1-s*(1-f));switch(v*=255,hi){case 0:return[v,t,p];case 1:return[q,v,p];case 2:return[p,v,t];case 3:return[p,q,v];case 4:return[t,p,v];case 5:return[v,p,q]}},convert.hsv.hsl=function(hsv){var lmin,sl,l,h=hsv[0],s=hsv[1]/100,v=hsv[2]/100,vmin=Math.max(v,.01);return l=(2-s)*v,sl=s*vmin,[h,100*(sl=(sl/=(lmin=(2-s)*vmin)<=1?lmin:2-lmin)||0),100*(l/=2)]},convert.hwb.rgb=function(hwb){var i,v,f,n,r,g,b,h=hwb[0]/360,wh=hwb[1]/100,bl=hwb[2]/100,ratio=wh+bl;switch(ratio>1&&(wh/=ratio,bl/=ratio),f=6*h-(i=Math.floor(6*h)),0!=(1&i)&&(f=1-f),n=wh+f*((v=1-bl)-wh),i){default:case 6:case 0:r=v,g=n,b=wh;break;case 1:r=n,g=v,b=wh;break;case 2:r=wh,g=v,b=n;break;case 3:r=wh,g=n,b=v;break;case 4:r=n,g=wh,b=v;break;case 5:r=v,g=wh,b=n}return[255*r,255*g,255*b]},convert.cmyk.rgb=function(cmyk){var c=cmyk[0]/100,m=cmyk[1]/100,y=cmyk[2]/100,k=cmyk[3]/100;return[255*(1-Math.min(1,c*(1-k)+k)),255*(1-Math.min(1,m*(1-k)+k)),255*(1-Math.min(1,y*(1-k)+k))]},convert.xyz.rgb=function(xyz){var r,g,b,x=xyz[0]/100,y=xyz[1]/100,z=xyz[2]/100;return g=-.9689*x+1.8758*y+.0415*z,b=.0557*x+-.204*y+1.057*z,r=(r=3.2406*x+-1.5372*y+-.4986*z)>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,g=g>.0031308?1.055*Math.pow(g,1/2.4)-.055:12.92*g,b=b>.0031308?1.055*Math.pow(b,1/2.4)-.055:12.92*b,[255*(r=Math.min(Math.max(0,r),1)),255*(g=Math.min(Math.max(0,g),1)),255*(b=Math.min(Math.max(0,b),1))]},convert.xyz.lab=function(xyz){var x=xyz[0],y=xyz[1],z=xyz[2];return y/=100,z/=108.883,x=(x/=95.047)>.008856?Math.pow(x,1/3):7.787*x+16/116,[116*(y=y>.008856?Math.pow(y,1/3):7.787*y+16/116)-16,500*(x-y),200*(y-(z=z>.008856?Math.pow(z,1/3):7.787*z+16/116))]},convert.lab.xyz=function(lab){var x,y,z,l=lab[0];x=lab[1]/500+(y=(l+16)/116),z=y-lab[2]/200;var y2=Math.pow(y,3),x2=Math.pow(x,3),z2=Math.pow(z,3);return y=y2>.008856?y2:(y-16/116)/7.787,x=x2>.008856?x2:(x-16/116)/7.787,z=z2>.008856?z2:(z-16/116)/7.787,[x*=95.047,y*=100,z*=108.883]},convert.lab.lch=function(lab){var h,l=lab[0],a=lab[1],b=lab[2];return(h=360*Math.atan2(b,a)/2/Math.PI)<0&&(h+=360),[l,Math.sqrt(a*a+b*b),h]},convert.lch.lab=function(lch){var hr,l=lch[0],c=lch[1];return hr=lch[2]/360*2*Math.PI,[l,c*Math.cos(hr),c*Math.sin(hr)]},convert.rgb.ansi16=function(args){var r=args[0],g=args[1],b=args[2],value=1 in arguments?arguments[1]:convert.rgb.hsv(args)[2];if(0===(value=Math.round(value/50)))return 30;var ansi=30+(Math.round(b/255)<<2|Math.round(g/255)<<1|Math.round(r/255));return 2===value&&(ansi+=60),ansi},convert.hsv.ansi16=function(args){return convert.rgb.ansi16(convert.hsv.rgb(args),args[2])},convert.rgb.ansi256=function(args){var r=args[0],g=args[1],b=args[2];return r===g&&g===b?r<8?16:r>248?231:Math.round((r-8)/247*24)+232:16+36*Math.round(r/255*5)+6*Math.round(g/255*5)+Math.round(b/255*5)},convert.ansi16.rgb=function(args){var color=args%10;if(0===color||7===color)return args>50&&(color+=3.5),[color=color/10.5*255,color,color];var mult=.5*(1+~~(args>50));return[(1&color)*mult*255,(color>>1&1)*mult*255,(color>>2&1)*mult*255]},convert.ansi256.rgb=function(args){if(args>=232){var c=10*(args-232)+8;return[c,c,c]}var rem;return args-=16,[Math.floor(args/36)/5*255,Math.floor((rem=args%36)/6)/5*255,rem%6/5*255]},convert.rgb.hex=function(args){var string=(((255&Math.round(args[0]))<<16)+((255&Math.round(args[1]))<<8)+(255&Math.round(args[2]))).toString(16).toUpperCase();return"000000".substring(string.length)+string},convert.hex.rgb=function(args){var match=args.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!match)return[0,0,0];var colorString=match[0];3===match[0].length&&(colorString=colorString.split("").map((function(char){return char+char})).join(""));var integer=parseInt(colorString,16);return[integer>>16&255,integer>>8&255,255&integer]},convert.rgb.hcg=function(rgb){var hue,r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,max=Math.max(Math.max(r,g),b),min=Math.min(Math.min(r,g),b),chroma=max-min;return hue=chroma<=0?0:max===r?(g-b)/chroma%6:max===g?2+(b-r)/chroma:4+(r-g)/chroma+4,hue/=6,[360*(hue%=1),100*chroma,100*(chroma<1?min/(1-chroma):0)]},convert.hsl.hcg=function(hsl){var s=hsl[1]/100,l=hsl[2]/100,c=1,f=0;return(c=l<.5?2*s*l:2*s*(1-l))<1&&(f=(l-.5*c)/(1-c)),[hsl[0],100*c,100*f]},convert.hsv.hcg=function(hsv){var s=hsv[1]/100,v=hsv[2]/100,c=s*v,f=0;return c<1&&(f=(v-c)/(1-c)),[hsv[0],100*c,100*f]},convert.hcg.rgb=function(hcg){var h=hcg[0]/360,c=hcg[1]/100,g=hcg[2]/100;if(0===c)return[255*g,255*g,255*g];var mg,pure=[0,0,0],hi=h%1*6,v=hi%1,w=1-v;switch(Math.floor(hi)){case 0:pure[0]=1,pure[1]=v,pure[2]=0;break;case 1:pure[0]=w,pure[1]=1,pure[2]=0;break;case 2:pure[0]=0,pure[1]=1,pure[2]=v;break;case 3:pure[0]=0,pure[1]=w,pure[2]=1;break;case 4:pure[0]=v,pure[1]=0,pure[2]=1;break;default:pure[0]=1,pure[1]=0,pure[2]=w}return mg=(1-c)*g,[255*(c*pure[0]+mg),255*(c*pure[1]+mg),255*(c*pure[2]+mg)]},convert.hcg.hsv=function(hcg){var c=hcg[1]/100,v=c+hcg[2]/100*(1-c),f=0;return v>0&&(f=c/v),[hcg[0],100*f,100*v]},convert.hcg.hsl=function(hcg){var c=hcg[1]/100,l=hcg[2]/100*(1-c)+.5*c,s=0;return l>0&&l<.5?s=c/(2*l):l>=.5&&l<1&&(s=c/(2*(1-l))),[hcg[0],100*s,100*l]},convert.hcg.hwb=function(hcg){var c=hcg[1]/100,v=c+hcg[2]/100*(1-c);return[hcg[0],100*(v-c),100*(1-v)]},convert.hwb.hcg=function(hwb){var w=hwb[1]/100,v=1-hwb[2]/100,c=v-w,g=0;return c<1&&(g=(v-c)/(1-c)),[hwb[0],100*c,100*g]},convert.apple.rgb=function(apple){return[apple[0]/65535*255,apple[1]/65535*255,apple[2]/65535*255]},convert.rgb.apple=function(rgb){return[rgb[0]/255*65535,rgb[1]/255*65535,rgb[2]/255*65535]},convert.gray.rgb=function(args){return[args[0]/100*255,args[0]/100*255,args[0]/100*255]},convert.gray.hsl=convert.gray.hsv=function(args){return[0,0,args[0]]},convert.gray.hwb=function(gray){return[0,100,gray[0]]},convert.gray.cmyk=function(gray){return[0,0,0,gray[0]]},convert.gray.lab=function(gray){return[gray[0],0,0]},convert.gray.hex=function(gray){var val=255&Math.round(gray[0]/100*255),string=((val<<16)+(val<<8)+val).toString(16).toUpperCase();return"000000".substring(string.length)+string},convert.rgb.gray=function(rgb){return[(rgb[0]+rgb[1]+rgb[2])/3/255*100]}},505:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var PathReporter_1=__webpack_require__(506),Either_1=__webpack_require__(17);exports.ThrowReporter={report:function(validation){if(Either_1.isLeft(validation))throw new Error(PathReporter_1.PathReporter.report(validation).join("\n"))}}},506:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _1=__webpack_require__(0),Either_1=__webpack_require__(17);function getMessage(e){return void 0!==e.message?e.message:"Invalid value "+(("function"==typeof(v=e.value)?_1.getFunctionName(v):"number"!=typeof v||isFinite(v)?JSON.stringify(v):isNaN(v)?"NaN":v>0?"Infinity":"-Infinity")+" supplied to ")+e.context.map((function(_a){return _a.key+": "+_a.type.name})).join("/");var v}function failure(es){return es.map(getMessage)}function success(){return["No errors!"]}exports.failure=failure,exports.success=success,exports.PathReporter={report:Either_1.fold(failure,success)}},507:function(module,exports){},508:function(module,exports,__webpack_require__){"use strict";var src$core$$=__webpack_require__(509),src$en$$=__webpack_require__(514);src$core$$.default.__addLocaleData(src$en$$.default),src$core$$.default.defaultLocale="en",exports.default=src$core$$.default},509:function(module,exports,__webpack_require__){"use strict";var src$utils$$=__webpack_require__(281),src$es5$$=__webpack_require__(510),src$compiler$$=__webpack_require__(511),intl$messageformat$parser$$=__webpack_require__(512);function MessageFormat(message,locales,formats){var ast="string"==typeof message?MessageFormat.__parse(message):message;if(!ast||"messageFormatPattern"!==ast.type)throw new TypeError("A message must be provided as a String or AST.");formats=this._mergeFormats(MessageFormat.formats,formats),src$es5$$.defineProperty(this,"_locale",{value:this._resolveLocale(locales)});var pluralFn=this._findPluralRuleFunction(this._locale),pattern=this._compilePattern(ast,locales,formats,pluralFn),messageFormat=this;this.format=function(values){try{return messageFormat._format(pattern,values)}catch(e){throw e.variableId?new Error("The intl string context variable '"+e.variableId+"' was not provided to the string '"+message+"'"):e}}}exports.default=MessageFormat,src$es5$$.defineProperty(MessageFormat,"formats",{enumerable:!0,value:{number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}}}),src$es5$$.defineProperty(MessageFormat,"__localeData__",{value:src$es5$$.objCreate(null)}),src$es5$$.defineProperty(MessageFormat,"__addLocaleData",{value:function(data){if(!data||!data.locale)throw new Error("Locale data provided to IntlMessageFormat is missing a `locale` property");MessageFormat.__localeData__[data.locale.toLowerCase()]=data}}),src$es5$$.defineProperty(MessageFormat,"__parse",{value:intl$messageformat$parser$$.default.parse}),src$es5$$.defineProperty(MessageFormat,"defaultLocale",{enumerable:!0,writable:!0,value:void 0}),MessageFormat.prototype.resolvedOptions=function(){return{locale:this._locale}},MessageFormat.prototype._compilePattern=function(ast,locales,formats,pluralFn){return new src$compiler$$.default(locales,formats,pluralFn).compile(ast)},MessageFormat.prototype._findPluralRuleFunction=function(locale){for(var localeData=MessageFormat.__localeData__,data=localeData[locale.toLowerCase()];data;){if(data.pluralRuleFunction)return data.pluralRuleFunction;data=data.parentLocale&&localeData[data.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlMessageFormat is missing a `pluralRuleFunction` for :"+locale)},MessageFormat.prototype._format=function(pattern,values){var i,len,part,id,value,err,result="";for(i=0,len=pattern.length;i<len;i+=1)if("string"!=typeof(part=pattern[i])){if(id=part.id,!values||!src$utils$$.hop.call(values,id))throw(err=new Error("A value must be provided for: "+id)).variableId=id,err;value=values[id],part.options?result+=this._format(part.getOption(value),values):result+=part.format(value)}else result+=part;return result},MessageFormat.prototype._mergeFormats=function(defaults,formats){var type,mergedType,mergedFormats={};for(type in defaults)src$utils$$.hop.call(defaults,type)&&(mergedFormats[type]=mergedType=src$es5$$.objCreate(defaults[type]),formats&&src$utils$$.hop.call(formats,type)&&src$utils$$.extend(mergedType,formats[type]));return mergedFormats},MessageFormat.prototype._resolveLocale=function(locales){"string"==typeof locales&&(locales=[locales]),locales=(locales||[]).concat(MessageFormat.defaultLocale);var i,len,localeParts,data,localeData=MessageFormat.__localeData__;for(i=0,len=locales.length;i<len;i+=1)for(localeParts=locales[i].toLowerCase().split("-");localeParts.length;){if(data=localeData[localeParts.join("-")])return data.locale;localeParts.pop()}var defaultLocale=locales.pop();throw new Error("No locale data has been added to IntlMessageFormat for: "+locales.join(", ")+", or the default locale: "+defaultLocale)}},510:function(module,exports,__webpack_require__){"use strict";var src$utils$$=__webpack_require__(281),realDefineProp=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),defineProperty=(!realDefineProp&&Object.prototype.__defineGetter__,realDefineProp?Object.defineProperty:function(obj,name,desc){"get"in desc&&obj.__defineGetter__?obj.__defineGetter__(name,desc.get):src$utils$$.hop.call(obj,name)&&!("value"in desc)||(obj[name]=desc.value)}),objCreate=Object.create||function(proto,props){var obj,k;function F(){}for(k in F.prototype=proto,obj=new F,props)src$utils$$.hop.call(props,k)&&defineProperty(obj,k,props[k]);return obj};exports.defineProperty=defineProperty,exports.objCreate=objCreate},511:function(module,exports,__webpack_require__){"use strict";function Compiler(locales,formats,pluralFn){this.locales=locales,this.formats=formats,this.pluralFn=pluralFn}function StringFormat(id){this.id=id}function PluralFormat(id,useOrdinal,offset,options,pluralFn){this.id=id,this.useOrdinal=useOrdinal,this.offset=offset,this.options=options,this.pluralFn=pluralFn}function PluralOffsetString(id,offset,numberFormat,string){this.id=id,this.offset=offset,this.numberFormat=numberFormat,this.string=string}function SelectFormat(id,options){this.id=id,this.options=options}exports.default=Compiler,Compiler.prototype.compile=function(ast){return this.pluralStack=[],this.currentPlural=null,this.pluralNumberFormat=null,this.compileMessage(ast)},Compiler.prototype.compileMessage=function(ast){if(!ast||"messageFormatPattern"!==ast.type)throw new Error('Message AST is not of type: "messageFormatPattern"');var i,len,element,elements=ast.elements,pattern=[];for(i=0,len=elements.length;i<len;i+=1)switch((element=elements[i]).type){case"messageTextElement":pattern.push(this.compileMessageText(element));break;case"argumentElement":pattern.push(this.compileArgument(element));break;default:throw new Error("Message element does not have a valid type")}return pattern},Compiler.prototype.compileMessageText=function(element){return this.currentPlural&&/(^|[^\\])#/g.test(element.value)?(this.pluralNumberFormat||(this.pluralNumberFormat=new Intl.NumberFormat(this.locales)),new PluralOffsetString(this.currentPlural.id,this.currentPlural.format.offset,this.pluralNumberFormat,element.value)):element.value.replace(/\\#/g,"#")},Compiler.prototype.compileArgument=function(element){var format=element.format;if(!format)return new StringFormat(element.id);var options,formats=this.formats,locales=this.locales,pluralFn=this.pluralFn;switch(format.type){case"numberFormat":return options=formats.number[format.style],{id:element.id,format:new Intl.NumberFormat(locales,options).format};case"dateFormat":return options=formats.date[format.style],{id:element.id,format:new Intl.DateTimeFormat(locales,options).format};case"timeFormat":return options=formats.time[format.style],{id:element.id,format:new Intl.DateTimeFormat(locales,options).format};case"pluralFormat":return options=this.compileOptions(element),new PluralFormat(element.id,format.ordinal,format.offset,options,pluralFn);case"selectFormat":return options=this.compileOptions(element),new SelectFormat(element.id,options);default:throw new Error("Message element does not have a valid format type")}},Compiler.prototype.compileOptions=function(element){var i,len,option,format=element.format,options=format.options,optionsHash={};for(this.pluralStack.push(this.currentPlural),this.currentPlural="pluralFormat"===format.type?element:null,i=0,len=options.length;i<len;i+=1)optionsHash[(option=options[i]).selector]=this.compileMessage(option.value);return this.currentPlural=this.pluralStack.pop(),optionsHash},StringFormat.prototype.format=function(value){return value||"number"==typeof value?"string"==typeof value?value:String(value):""},PluralFormat.prototype.getOption=function(value){var options=this.options;return options["="+value]||options[this.pluralFn(value-this.offset,this.useOrdinal)]||options.other},PluralOffsetString.prototype.format=function(value){var number=this.numberFormat.format(value-this.offset);return this.string.replace(/(^|[^\\])#/g,"$1"+number).replace(/\\#/g,"#")},SelectFormat.prototype.getOption=function(value){var options=this.options;return options[value]||options.other}},512:function(module,exports,__webpack_require__){"use strict";(exports=module.exports=__webpack_require__(513).default).default=exports},513:function(module,exports,__webpack_require__){"use strict";exports.default=function(){function peg$SyntaxError(message,expected,found,location){this.message=message,this.expected=expected,this.found=found,this.location=location,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}return function(child,parent){function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor}(peg$SyntaxError,Error),{SyntaxError:peg$SyntaxError,parse:function(input){var peg$result,options=arguments.length>1?arguments[1]:{},peg$FAILED={},peg$startRuleFunctions={start:peg$parsestart},peg$startRuleFunction=peg$parsestart,peg$c0=function(elements){return{type:"messageFormatPattern",elements:elements,location:location()}},peg$c1=function(text){var i,j,outerLen,inner,innerLen,string="";for(i=0,outerLen=text.length;i<outerLen;i+=1)for(j=0,innerLen=(inner=text[i]).length;j<innerLen;j+=1)string+=inner[j];return string},peg$c2=function(messageText){return{type:"messageTextElement",value:messageText,location:location()}},peg$c3=/^[^ \t\n\r,.+={}#]/,peg$c4={type:"class",value:"[^ \\t\\n\\r,.+={}#]",description:"[^ \\t\\n\\r,.+={}#]"},peg$c5="{",peg$c6={type:"literal",value:"{",description:'"{"'},peg$c7=",",peg$c8={type:"literal",value:",",description:'","'},peg$c9="}",peg$c10={type:"literal",value:"}",description:'"}"'},peg$c11=function(id,format){return{type:"argumentElement",id:id,format:format&&format[2],location:location()}},peg$c12="number",peg$c13={type:"literal",value:"number",description:'"number"'},peg$c14="date",peg$c15={type:"literal",value:"date",description:'"date"'},peg$c16="time",peg$c17={type:"literal",value:"time",description:'"time"'},peg$c18=function(type,style){return{type:type+"Format",style:style&&style[2],location:location()}},peg$c19="plural",peg$c20={type:"literal",value:"plural",description:'"plural"'},peg$c21=function(pluralStyle){return{type:pluralStyle.type,ordinal:!1,offset:pluralStyle.offset||0,options:pluralStyle.options,location:location()}},peg$c22="selectordinal",peg$c23={type:"literal",value:"selectordinal",description:'"selectordinal"'},peg$c24=function(pluralStyle){return{type:pluralStyle.type,ordinal:!0,offset:pluralStyle.offset||0,options:pluralStyle.options,location:location()}},peg$c25="select",peg$c26={type:"literal",value:"select",description:'"select"'},peg$c27=function(options){return{type:"selectFormat",options:options,location:location()}},peg$c28="=",peg$c29={type:"literal",value:"=",description:'"="'},peg$c30=function(selector,pattern){return{type:"optionalFormatPattern",selector:selector,value:pattern,location:location()}},peg$c31="offset:",peg$c32={type:"literal",value:"offset:",description:'"offset:"'},peg$c33=function(number){return number},peg$c34=function(offset,options){return{type:"pluralFormat",offset:offset,options:options,location:location()}},peg$c35={type:"other",description:"whitespace"},peg$c36=/^[ \t\n\r]/,peg$c37={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},peg$c38={type:"other",description:"optionalWhitespace"},peg$c39=/^[0-9]/,peg$c40={type:"class",value:"[0-9]",description:"[0-9]"},peg$c41=/^[0-9a-f]/i,peg$c42={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},peg$c43="0",peg$c44={type:"literal",value:"0",description:'"0"'},peg$c45=/^[1-9]/,peg$c46={type:"class",value:"[1-9]",description:"[1-9]"},peg$c47=function(digits){return parseInt(digits,10)},peg$c48=/^[^{}\\\0-\x1F \t\n\r]/,peg$c49={type:"class",value:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]",description:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]"},peg$c50="\\\\",peg$c51={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},peg$c52=function(){return"\\"},peg$c53="\\#",peg$c54={type:"literal",value:"\\#",description:'"\\\\#"'},peg$c55=function(){return"\\#"},peg$c56="\\{",peg$c57={type:"literal",value:"\\{",description:'"\\\\{"'},peg$c58=function(){return"{"},peg$c59="\\}",peg$c60={type:"literal",value:"\\}",description:'"\\\\}"'},peg$c61=function(){return"}"},peg$c62="\\u",peg$c63={type:"literal",value:"\\u",description:'"\\\\u"'},peg$c64=function(digits){return String.fromCharCode(parseInt(digits,16))},peg$c65=function(chars){return chars.join("")},peg$currPos=0,peg$savedPos=0,peg$posDetailsCache=[{line:1,column:1,seenCR:!1}],peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions))throw new Error("Can't start parsing from rule \""+options.startRule+'".');peg$startRuleFunction=peg$startRuleFunctions[options.startRule]}function location(){return peg$computeLocation(peg$savedPos,peg$currPos)}function peg$computePosDetails(pos){var p,ch,details=peg$posDetailsCache[pos];if(details)return details;for(p=pos-1;!peg$posDetailsCache[p];)p--;for(details={line:(details=peg$posDetailsCache[p]).line,column:details.column,seenCR:details.seenCR};p<pos;)"\n"===(ch=input.charAt(p))?(details.seenCR||details.line++,details.column=1,details.seenCR=!1):"\r"===ch||"\u2028"===ch||"\u2029"===ch?(details.line++,details.column=1,details.seenCR=!0):(details.column++,details.seenCR=!1),p++;return peg$posDetailsCache[pos]=details,details}function peg$computeLocation(startPos,endPos){var startPosDetails=peg$computePosDetails(startPos),endPosDetails=peg$computePosDetails(endPos);return{start:{offset:startPos,line:startPosDetails.line,column:startPosDetails.column},end:{offset:endPos,line:endPosDetails.line,column:endPosDetails.column}}}function peg$fail(expected){peg$currPos<peg$maxFailPos||(peg$currPos>peg$maxFailPos&&(peg$maxFailPos=peg$currPos,peg$maxFailExpected=[]),peg$maxFailExpected.push(expected))}function peg$buildException(message,expected,found,location){return null!==expected&&function(expected){var i=1;for(expected.sort((function(a,b){return a.description<b.description?-1:a.description>b.description?1:0}));i<expected.length;)expected[i-1]===expected[i]?expected.splice(i,1):i++}(expected),new peg$SyntaxError(null!==message?message:function(expected,found){var i,expectedDescs=new Array(expected.length);for(i=0;i<expected.length;i++)expectedDescs[i]=expected[i].description;return"Expected "+(expected.length>1?expectedDescs.slice(0,-1).join(", ")+" or "+expectedDescs[expected.length-1]:expectedDescs[0])+" but "+(found?'"'+function(s){function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase()}return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(ch){return"\\x0"+hex(ch)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(ch){return"\\x"+hex(ch)})).replace(/[\u0100-\u0FFF]/g,(function(ch){return"\\u0"+hex(ch)})).replace(/[\u1000-\uFFFF]/g,(function(ch){return"\\u"+hex(ch)}))}(found)+'"':"end of input")+" found."}(expected,found),expected,found,location)}function peg$parsestart(){return peg$parsemessageFormatPattern()}function peg$parsemessageFormatPattern(){var s0,s1,s2;for(s0=peg$currPos,s1=[],s2=peg$parsemessageFormatElement();s2!==peg$FAILED;)s1.push(s2),s2=peg$parsemessageFormatElement();return s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c0(s1)),s0=s1}function peg$parsemessageFormatElement(){var s0;return(s0=peg$parsemessageTextElement())===peg$FAILED&&(s0=peg$parseargumentElement()),s0}function peg$parsemessageText(){var s0,s1,s2,s3,s4,s5;if(s0=peg$currPos,s1=[],s2=peg$currPos,(s3=peg$parse_())!==peg$FAILED&&(s4=peg$parsechars())!==peg$FAILED&&(s5=peg$parse_())!==peg$FAILED?s2=s3=[s3,s4,s5]:(peg$currPos=s2,s2=peg$FAILED),s2!==peg$FAILED)for(;s2!==peg$FAILED;)s1.push(s2),s2=peg$currPos,(s3=peg$parse_())!==peg$FAILED&&(s4=peg$parsechars())!==peg$FAILED&&(s5=peg$parse_())!==peg$FAILED?s2=s3=[s3,s4,s5]:(peg$currPos=s2,s2=peg$FAILED);else s1=peg$FAILED;return s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c1(s1)),(s0=s1)===peg$FAILED&&(s0=peg$currPos,s0=(s1=peg$parsews())!==peg$FAILED?input.substring(s0,peg$currPos):s1),s0}function peg$parsemessageTextElement(){var s0,s1;return s0=peg$currPos,(s1=peg$parsemessageText())!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c2(s1)),s0=s1}function peg$parseargument(){var s0,s1,s2;if((s0=peg$parsenumber())===peg$FAILED){if(s0=peg$currPos,s1=[],peg$c3.test(input.charAt(peg$currPos))?(s2=input.charAt(peg$currPos),peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c4)),s2!==peg$FAILED)for(;s2!==peg$FAILED;)s1.push(s2),peg$c3.test(input.charAt(peg$currPos))?(s2=input.charAt(peg$currPos),peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c4));else s1=peg$FAILED;s0=s1!==peg$FAILED?input.substring(s0,peg$currPos):s1}return s0}function peg$parseargumentElement(){var s0,s1,s3,s5,s6,s7,s8;return s0=peg$currPos,123===input.charCodeAt(peg$currPos)?(s1=peg$c5,peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c6)),s1!==peg$FAILED&&peg$parse_()!==peg$FAILED&&(s3=peg$parseargument())!==peg$FAILED&&peg$parse_()!==peg$FAILED?(s5=peg$currPos,44===input.charCodeAt(peg$currPos)?(s6=peg$c7,peg$currPos++):(s6=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c8)),s6!==peg$FAILED&&(s7=peg$parse_())!==peg$FAILED&&(s8=peg$parseelementFormat())!==peg$FAILED?s5=s6=[s6,s7,s8]:(peg$currPos=s5,s5=peg$FAILED),s5===peg$FAILED&&(s5=null),s5!==peg$FAILED&&(s6=peg$parse_())!==peg$FAILED?(125===input.charCodeAt(peg$currPos)?(s7=peg$c9,peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c10)),s7!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c11(s3,s5)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0}function peg$parseelementFormat(){var s0;return(s0=peg$parsesimpleFormat())===peg$FAILED&&(s0=peg$parsepluralFormat())===peg$FAILED&&(s0=peg$parseselectOrdinalFormat())===peg$FAILED&&(s0=peg$parseselectFormat()),s0}function peg$parsesimpleFormat(){var s0,s1,s3,s4,s5,s6;return s0=peg$currPos,input.substr(peg$currPos,6)===peg$c12?(s1=peg$c12,peg$currPos+=6):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c13)),s1===peg$FAILED&&(input.substr(peg$currPos,4)===peg$c14?(s1=peg$c14,peg$currPos+=4):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c15)),s1===peg$FAILED&&(input.substr(peg$currPos,4)===peg$c16?(s1=peg$c16,peg$currPos+=4):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c17)))),s1!==peg$FAILED&&peg$parse_()!==peg$FAILED?(s3=peg$currPos,44===input.charCodeAt(peg$currPos)?(s4=peg$c7,peg$currPos++):(s4=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c8)),s4!==peg$FAILED&&(s5=peg$parse_())!==peg$FAILED&&(s6=peg$parsechars())!==peg$FAILED?s3=s4=[s4,s5,s6]:(peg$currPos=s3,s3=peg$FAILED),s3===peg$FAILED&&(s3=null),s3!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c18(s1,s3)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0}function peg$parsepluralFormat(){var s0,s1,s3,s5;return s0=peg$currPos,input.substr(peg$currPos,6)===peg$c19?(s1=peg$c19,peg$currPos+=6):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c20)),s1!==peg$FAILED&&peg$parse_()!==peg$FAILED?(44===input.charCodeAt(peg$currPos)?(s3=peg$c7,peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c8)),s3!==peg$FAILED&&peg$parse_()!==peg$FAILED&&(s5=peg$parsepluralStyle())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c21(s5)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0}function peg$parseselectOrdinalFormat(){var s0,s1,s3,s5;return s0=peg$currPos,input.substr(peg$currPos,13)===peg$c22?(s1=peg$c22,peg$currPos+=13):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c23)),s1!==peg$FAILED&&peg$parse_()!==peg$FAILED?(44===input.charCodeAt(peg$currPos)?(s3=peg$c7,peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c8)),s3!==peg$FAILED&&peg$parse_()!==peg$FAILED&&(s5=peg$parsepluralStyle())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c24(s5)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0}function peg$parseselectFormat(){var s0,s1,s3,s5,s6;if(s0=peg$currPos,input.substr(peg$currPos,6)===peg$c25?(s1=peg$c25,peg$currPos+=6):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c26)),s1!==peg$FAILED)if(peg$parse_()!==peg$FAILED)if(44===input.charCodeAt(peg$currPos)?(s3=peg$c7,peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c8)),s3!==peg$FAILED)if(peg$parse_()!==peg$FAILED){if(s5=[],(s6=peg$parseoptionalFormatPattern())!==peg$FAILED)for(;s6!==peg$FAILED;)s5.push(s6),s6=peg$parseoptionalFormatPattern();else s5=peg$FAILED;s5!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c27(s5)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parseselector(){var s0,s1,s2,s3;return s0=peg$currPos,s1=peg$currPos,61===input.charCodeAt(peg$currPos)?(s2=peg$c28,peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c29)),s2!==peg$FAILED&&(s3=peg$parsenumber())!==peg$FAILED?s1=s2=[s2,s3]:(peg$currPos=s1,s1=peg$FAILED),(s0=s1!==peg$FAILED?input.substring(s0,peg$currPos):s1)===peg$FAILED&&(s0=peg$parsechars()),s0}function peg$parseoptionalFormatPattern(){var s0,s2,s4,s6,s8;return s0=peg$currPos,peg$parse_()!==peg$FAILED&&(s2=peg$parseselector())!==peg$FAILED&&peg$parse_()!==peg$FAILED?(123===input.charCodeAt(peg$currPos)?(s4=peg$c5,peg$currPos++):(s4=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c6)),s4!==peg$FAILED&&peg$parse_()!==peg$FAILED&&(s6=peg$parsemessageFormatPattern())!==peg$FAILED&&peg$parse_()!==peg$FAILED?(125===input.charCodeAt(peg$currPos)?(s8=peg$c9,peg$currPos++):(s8=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c10)),s8!==peg$FAILED?(peg$savedPos=s0,s0=peg$c30(s2,s6)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0}function peg$parseoffset(){var s0,s1,s3;return s0=peg$currPos,input.substr(peg$currPos,7)===peg$c31?(s1=peg$c31,peg$currPos+=7):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c32)),s1!==peg$FAILED&&peg$parse_()!==peg$FAILED&&(s3=peg$parsenumber())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c33(s3)):(peg$currPos=s0,s0=peg$FAILED),s0}function peg$parsepluralStyle(){var s0,s1,s3,s4;if(s0=peg$currPos,(s1=peg$parseoffset())===peg$FAILED&&(s1=null),s1!==peg$FAILED)if(peg$parse_()!==peg$FAILED){if(s3=[],(s4=peg$parseoptionalFormatPattern())!==peg$FAILED)for(;s4!==peg$FAILED;)s3.push(s4),s4=peg$parseoptionalFormatPattern();else s3=peg$FAILED;s3!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c34(s1,s3)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parsews(){var s0,s1;if(peg$silentFails++,s0=[],peg$c36.test(input.charAt(peg$currPos))?(s1=input.charAt(peg$currPos),peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c37)),s1!==peg$FAILED)for(;s1!==peg$FAILED;)s0.push(s1),peg$c36.test(input.charAt(peg$currPos))?(s1=input.charAt(peg$currPos),peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c37));else s0=peg$FAILED;return peg$silentFails--,s0===peg$FAILED&&(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c35)),s0}function peg$parse_(){var s0,s1,s2;for(peg$silentFails++,s0=peg$currPos,s1=[],s2=peg$parsews();s2!==peg$FAILED;)s1.push(s2),s2=peg$parsews();return s0=s1!==peg$FAILED?input.substring(s0,peg$currPos):s1,peg$silentFails--,s0===peg$FAILED&&(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c38)),s0}function peg$parsedigit(){var s0;return peg$c39.test(input.charAt(peg$currPos))?(s0=input.charAt(peg$currPos),peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c40)),s0}function peg$parsehexDigit(){var s0;return peg$c41.test(input.charAt(peg$currPos))?(s0=input.charAt(peg$currPos),peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c42)),s0}function peg$parsenumber(){var s0,s1,s2,s3,s4,s5;if(s0=peg$currPos,48===input.charCodeAt(peg$currPos)?(s1=peg$c43,peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c44)),s1===peg$FAILED){if(s1=peg$currPos,s2=peg$currPos,peg$c45.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c46)),s3!==peg$FAILED){for(s4=[],s5=peg$parsedigit();s5!==peg$FAILED;)s4.push(s5),s5=peg$parsedigit();s4!==peg$FAILED?s2=s3=[s3,s4]:(peg$currPos=s2,s2=peg$FAILED)}else peg$currPos=s2,s2=peg$FAILED;s1=s2!==peg$FAILED?input.substring(s1,peg$currPos):s2}return s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c47(s1)),s0=s1}function peg$parsechar(){var s0,s1,s2,s3,s4,s5,s6,s7;return peg$c48.test(input.charAt(peg$currPos))?(s0=input.charAt(peg$currPos),peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c49)),s0===peg$FAILED&&(s0=peg$currPos,input.substr(peg$currPos,2)===peg$c50?(s1=peg$c50,peg$currPos+=2):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c51)),s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c52()),(s0=s1)===peg$FAILED&&(s0=peg$currPos,input.substr(peg$currPos,2)===peg$c53?(s1=peg$c53,peg$currPos+=2):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c54)),s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c55()),(s0=s1)===peg$FAILED&&(s0=peg$currPos,input.substr(peg$currPos,2)===peg$c56?(s1=peg$c56,peg$currPos+=2):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c57)),s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c58()),(s0=s1)===peg$FAILED&&(s0=peg$currPos,input.substr(peg$currPos,2)===peg$c59?(s1=peg$c59,peg$currPos+=2):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c60)),s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c61()),(s0=s1)===peg$FAILED&&(s0=peg$currPos,input.substr(peg$currPos,2)===peg$c62?(s1=peg$c62,peg$currPos+=2):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c63)),s1!==peg$FAILED?(s2=peg$currPos,s3=peg$currPos,(s4=peg$parsehexDigit())!==peg$FAILED&&(s5=peg$parsehexDigit())!==peg$FAILED&&(s6=peg$parsehexDigit())!==peg$FAILED&&(s7=peg$parsehexDigit())!==peg$FAILED?s3=s4=[s4,s5,s6,s7]:(peg$currPos=s3,s3=peg$FAILED),(s2=s3!==peg$FAILED?input.substring(s2,peg$currPos):s3)!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c64(s2)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)))))),s0}function peg$parsechars(){var s0,s1,s2;if(s0=peg$currPos,s1=[],(s2=peg$parsechar())!==peg$FAILED)for(;s2!==peg$FAILED;)s1.push(s2),s2=peg$parsechar();else s1=peg$FAILED;return s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c65(s1)),s0=s1}if((peg$result=peg$startRuleFunction())!==peg$FAILED&&peg$currPos===input.length)return peg$result;throw peg$result!==peg$FAILED&&peg$currPos<input.length&&peg$fail({type:"end",description:"end of input"}),peg$buildException(null,peg$maxFailExpected,peg$maxFailPos<input.length?input.charAt(peg$maxFailPos):null,peg$maxFailPos<input.length?peg$computeLocation(peg$maxFailPos,peg$maxFailPos+1):peg$computeLocation(peg$maxFailPos,peg$maxFailPos))}}}()},514:function(module,exports,__webpack_require__){"use strict";exports.default={locale:"en",pluralRuleFunction:function(n,ord){var s=String(n).split("."),v0=!s[1],t0=Number(s[0])==n,n10=t0&&s[0].slice(-1),n100=t0&&s[0].slice(-2);return ord?1==n10&&11!=n100?"one":2==n10&&12!=n100?"two":3==n10&&13!=n100?"few":"other":1==n&&v0?"one":"other"}}},515:function(module,exports){},516:function(module,exports,__webpack_require__){"use strict";var IntlRelativeFormat=__webpack_require__(517).default;__webpack_require__(522),(exports=module.exports=IntlRelativeFormat).default=exports},517:function(module,exports,__webpack_require__){"use strict";var src$core$$=__webpack_require__(518),src$en$$=__webpack_require__(521);src$core$$.default.__addLocaleData(src$en$$.default),src$core$$.default.defaultLocale="en",exports.default=src$core$$.default},518:function(module,exports,__webpack_require__){"use strict";var intl$messageformat$$=__webpack_require__(280),src$diff$$=__webpack_require__(519),src$es5$$=__webpack_require__(520);exports.default=RelativeFormat;var FIELDS=["second","second-short","minute","minute-short","hour","hour-short","day","day-short","month","month-short","year","year-short"],STYLES=["best fit","numeric"];function RelativeFormat(locales,options){options=options||{},src$es5$$.isArray(locales)&&(locales=locales.concat()),src$es5$$.defineProperty(this,"_locale",{value:this._resolveLocale(locales)}),src$es5$$.defineProperty(this,"_options",{value:{style:this._resolveStyle(options.style),units:this._isValidUnits(options.units)&&options.units}}),src$es5$$.defineProperty(this,"_locales",{value:locales}),src$es5$$.defineProperty(this,"_fields",{value:this._findFields(this._locale)}),src$es5$$.defineProperty(this,"_messages",{value:src$es5$$.objCreate(null)});var relativeFormat=this;this.format=function(date,options){return relativeFormat._format(date,options)}}src$es5$$.defineProperty(RelativeFormat,"__localeData__",{value:src$es5$$.objCreate(null)}),src$es5$$.defineProperty(RelativeFormat,"__addLocaleData",{value:function(data){if(!data||!data.locale)throw new Error("Locale data provided to IntlRelativeFormat is missing a `locale` property value");RelativeFormat.__localeData__[data.locale.toLowerCase()]=data,intl$messageformat$$.default.__addLocaleData(data)}}),src$es5$$.defineProperty(RelativeFormat,"defaultLocale",{enumerable:!0,writable:!0,value:void 0}),src$es5$$.defineProperty(RelativeFormat,"thresholds",{enumerable:!0,value:{second:45,"second-short":45,minute:45,"minute-short":45,hour:22,"hour-short":22,day:26,"day-short":26,month:11,"month-short":11}}),RelativeFormat.prototype.resolvedOptions=function(){return{locale:this._locale,style:this._options.style,units:this._options.units}},RelativeFormat.prototype._compileMessage=function(units){var i,locales=this._locales,relativeTime=(this._locale,this._fields[units].relativeTime),future="",past="";for(i in relativeTime.future)relativeTime.future.hasOwnProperty(i)&&(future+=" "+i+" {"+relativeTime.future[i].replace("{0}","#")+"}");for(i in relativeTime.past)relativeTime.past.hasOwnProperty(i)&&(past+=" "+i+" {"+relativeTime.past[i].replace("{0}","#")+"}");var message="{when, select, future {{0, plural, "+future+"}}past {{0, plural, "+past+"}}}";return new intl$messageformat$$.default(message,locales)},RelativeFormat.prototype._getMessage=function(units){var messages=this._messages;return messages[units]||(messages[units]=this._compileMessage(units)),messages[units]},RelativeFormat.prototype._getRelativeUnits=function(diff,units){var field=this._fields[units];if(field.relative)return field.relative[diff]},RelativeFormat.prototype._findFields=function(locale){for(var localeData=RelativeFormat.__localeData__,data=localeData[locale.toLowerCase()];data;){if(data.fields)return data.fields;data=data.parentLocale&&localeData[data.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlRelativeFormat is missing `fields` for :"+locale)},RelativeFormat.prototype._format=function(date,options){var now=options&&void 0!==options.now?options.now:src$es5$$.dateNow();if(void 0===date&&(date=now),!isFinite(now))throw new RangeError("The `now` option provided to IntlRelativeFormat#format() is not in valid range.");if(!isFinite(date))throw new RangeError("The date value provided to IntlRelativeFormat#format() is not in valid range.");var diffReport=src$diff$$.default(now,date),units=this._options.units||this._selectUnits(diffReport),diffInUnits=diffReport[units];if("numeric"!==this._options.style){var relativeUnits=this._getRelativeUnits(diffInUnits,units);if(relativeUnits)return relativeUnits}return this._getMessage(units).format({0:Math.abs(diffInUnits),when:diffInUnits<0?"past":"future"})},RelativeFormat.prototype._isValidUnits=function(units){if(!units||src$es5$$.arrIndexOf.call(FIELDS,units)>=0)return!0;if("string"==typeof units){var suggestion=/s$/.test(units)&&units.substr(0,units.length-1);if(suggestion&&src$es5$$.arrIndexOf.call(FIELDS,suggestion)>=0)throw new Error('"'+units+'" is not a valid IntlRelativeFormat `units` value, did you mean: '+suggestion)}throw new Error('"'+units+'" is not a valid IntlRelativeFormat `units` value, it must be one of: "'+FIELDS.join('", "')+'"')},RelativeFormat.prototype._resolveLocale=function(locales){"string"==typeof locales&&(locales=[locales]),locales=(locales||[]).concat(RelativeFormat.defaultLocale);var i,len,localeParts,data,localeData=RelativeFormat.__localeData__;for(i=0,len=locales.length;i<len;i+=1)for(localeParts=locales[i].toLowerCase().split("-");localeParts.length;){if(data=localeData[localeParts.join("-")])return data.locale;localeParts.pop()}var defaultLocale=locales.pop();throw new Error("No locale data has been added to IntlRelativeFormat for: "+locales.join(", ")+", or the default locale: "+defaultLocale)},RelativeFormat.prototype._resolveStyle=function(style){if(!style)return STYLES[0];if(src$es5$$.arrIndexOf.call(STYLES,style)>=0)return style;throw new Error('"'+style+'" is not a valid IntlRelativeFormat `style` value, it must be one of: "'+STYLES.join('", "')+'"')},RelativeFormat.prototype._selectUnits=function(diffReport){var i,l,units,fields=FIELDS.filter((function(field){return field.indexOf("-short")<1}));for(i=0,l=fields.length;i<l&&(units=fields[i],!(Math.abs(diffReport[units])<RelativeFormat.thresholds[units]));i+=1);return units}},519:function(module,exports,__webpack_require__){"use strict";var round=Math.round;exports.default=function(from,to){var millisecond=round((to=+to)-(from=+from)),second=round(millisecond/1e3),minute=round(second/60),hour=round(minute/60),day=round(hour/24),week=round(day/7),rawYears=400*day/146097,month=round(12*rawYears),year=round(rawYears);return{millisecond:millisecond,second:second,"second-short":second,minute:minute,"minute-short":minute,hour:hour,"hour-short":hour,day:day,"day-short":day,week:week,"week-short":week,month:month,"month-short":month,year:year,"year-short":year}}},520:function(module,exports,__webpack_require__){"use strict";var hop=Object.prototype.hasOwnProperty,toString=Object.prototype.toString,realDefineProp=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),defineProperty=(!realDefineProp&&Object.prototype.__defineGetter__,realDefineProp?Object.defineProperty:function(obj,name,desc){"get"in desc&&obj.__defineGetter__?obj.__defineGetter__(name,desc.get):hop.call(obj,name)&&!("value"in desc)||(obj[name]=desc.value)}),objCreate=Object.create||function(proto,props){var obj,k;function F(){}for(k in F.prototype=proto,obj=new F,props)hop.call(props,k)&&defineProperty(obj,k,props[k]);return obj},arrIndexOf=Array.prototype.indexOf||function(search,fromIndex){if(!this.length)return-1;for(var i=fromIndex||0,max=this.length;i<max;i++)if(this[i]===search)return i;return-1},isArray=Array.isArray||function(obj){return"[object Array]"===toString.call(obj)},dateNow=Date.now||function(){return(new Date).getTime()};exports.defineProperty=defineProperty,exports.objCreate=objCreate,exports.arrIndexOf=arrIndexOf,exports.isArray=isArray,exports.dateNow=dateNow},521:function(module,exports,__webpack_require__){"use strict";exports.default={locale:"en",pluralRuleFunction:function(n,ord){var s=String(n).split("."),v0=!s[1],t0=Number(s[0])==n,n10=t0&&s[0].slice(-1),n100=t0&&s[0].slice(-2);return ord?1==n10&&11!=n100?"one":2==n10&&12!=n100?"two":3==n10&&13!=n100?"few":"other":1==n&&v0?"one":"other"},fields:{year:{displayName:"year",relative:{0:"this year",1:"next year","-1":"last year"},relativeTime:{future:{one:"in {0} year",other:"in {0} years"},past:{one:"{0} year ago",other:"{0} years ago"}}},"year-short":{displayName:"yr.",relative:{0:"this yr.",1:"next yr.","-1":"last yr."},relativeTime:{future:{one:"in {0} yr.",other:"in {0} yr."},past:{one:"{0} yr. ago",other:"{0} yr. ago"}}},month:{displayName:"month",relative:{0:"this month",1:"next month","-1":"last month"},relativeTime:{future:{one:"in {0} month",other:"in {0} months"},past:{one:"{0} month ago",other:"{0} months ago"}}},"month-short":{displayName:"mo.",relative:{0:"this mo.",1:"next mo.","-1":"last mo."},relativeTime:{future:{one:"in {0} mo.",other:"in {0} mo."},past:{one:"{0} mo. ago",other:"{0} mo. ago"}}},day:{displayName:"day",relative:{0:"today",1:"tomorrow","-1":"yesterday"},relativeTime:{future:{one:"in {0} day",other:"in {0} days"},past:{one:"{0} day ago",other:"{0} days ago"}}},"day-short":{displayName:"day",relative:{0:"today",1:"tomorrow","-1":"yesterday"},relativeTime:{future:{one:"in {0} day",other:"in {0} days"},past:{one:"{0} day ago",other:"{0} days ago"}}},hour:{displayName:"hour",relative:{0:"this hour"},relativeTime:{future:{one:"in {0} hour",other:"in {0} hours"},past:{one:"{0} hour ago",other:"{0} hours ago"}}},"hour-short":{displayName:"hr.",relative:{0:"this hour"},relativeTime:{future:{one:"in {0} hr.",other:"in {0} hr."},past:{one:"{0} hr. ago",other:"{0} hr. ago"}}},minute:{displayName:"minute",relative:{0:"this minute"},relativeTime:{future:{one:"in {0} minute",other:"in {0} minutes"},past:{one:"{0} minute ago",other:"{0} minutes ago"}}},"minute-short":{displayName:"min.",relative:{0:"this minute"},relativeTime:{future:{one:"in {0} min.",other:"in {0} min."},past:{one:"{0} min. ago",other:"{0} min. ago"}}},second:{displayName:"second",relative:{0:"now"},relativeTime:{future:{one:"in {0} second",other:"in {0} seconds"},past:{one:"{0} second ago",other:"{0} seconds ago"}}},"second-short":{displayName:"sec.",relative:{0:"now"},relativeTime:{future:{one:"in {0} sec.",other:"in {0} sec."},past:{one:"{0} sec. ago",other:"{0} sec. ago"}}}}}},522:function(module,exports){},523:function(module,exports,__webpack_require__){module.exports=__webpack_require__(524)()},524:function(module,exports,__webpack_require__){"use strict";var ReactPropTypesSecret=__webpack_require__(525);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret!==ReactPropTypesSecret){var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw err.name="Invariant Violation",err}}function getShim(){return shim}shim.isRequired=shim;var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return ReactPropTypes.PropTypes=ReactPropTypes,ReactPropTypes}},525:function(module,exports,__webpack_require__){"use strict";module.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},526:function(module,exports,__webpack_require__){"use strict";var reactIs=__webpack_require__(527),REACT_STATICS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KNOWN_STATICS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};function getStatics(component){return reactIs.isMemo(component)?MEMO_STATICS:TYPE_STATICS[component.$$typeof]||REACT_STATICS}TYPE_STATICS[reactIs.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;var defineProperty=Object.defineProperty,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf=Object.getPrototypeOf,objectPrototype=Object.prototype;module.exports=function hoistNonReactStatics(targetComponent,sourceComponent,blacklist){if("string"!=typeof sourceComponent){if(objectPrototype){var inheritedComponent=getPrototypeOf(sourceComponent);inheritedComponent&&inheritedComponent!==objectPrototype&&hoistNonReactStatics(targetComponent,inheritedComponent,blacklist)}var keys=getOwnPropertyNames(sourceComponent);getOwnPropertySymbols&&(keys=keys.concat(getOwnPropertySymbols(sourceComponent)));for(var targetStatics=getStatics(targetComponent),sourceStatics=getStatics(sourceComponent),i=0;i<keys.length;++i){var key=keys[i];if(!(KNOWN_STATICS[key]||blacklist&&blacklist[key]||sourceStatics&&sourceStatics[key]||targetStatics&&targetStatics[key])){var descriptor=getOwnPropertyDescriptor(sourceComponent,key);try{defineProperty(targetComponent,key,descriptor)}catch(e){}}}}return targetComponent}},527:function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(528)},528:function(module,exports,__webpack_require__){"use strict";
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b="function"==typeof Symbol&&Symbol.for,c=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,k=b?Symbol.for("react.context"):60110,l=b?Symbol.for("react.async_mode"):60111,m=b?Symbol.for("react.concurrent_mode"):60111,n=b?Symbol.for("react.forward_ref"):60112,p=b?Symbol.for("react.suspense"):60113,q=b?Symbol.for("react.suspense_list"):60120,r=b?Symbol.for("react.memo"):60115,t=b?Symbol.for("react.lazy"):60116,v=b?Symbol.for("react.block"):60121,w=b?Symbol.for("react.fundamental"):60117,x=b?Symbol.for("react.responder"):60118,y=b?Symbol.for("react.scope"):60119;function z(a){if("object"==typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l,exports.ConcurrentMode=m,exports.ContextConsumer=k,exports.ContextProvider=h,exports.Element=c,exports.ForwardRef=n,exports.Fragment=e,exports.Lazy=t,exports.Memo=r,exports.Portal=d,exports.Profiler=g,exports.StrictMode=f,exports.Suspense=p,exports.isAsyncMode=function(a){return A(a)||z(a)===l},exports.isConcurrentMode=A,exports.isContextConsumer=function(a){return z(a)===k},exports.isContextProvider=function(a){return z(a)===h},exports.isElement=function(a){return"object"==typeof a&&null!==a&&a.$$typeof===c},exports.isForwardRef=function(a){return z(a)===n},exports.isFragment=function(a){return z(a)===e},exports.isLazy=function(a){return z(a)===t},exports.isMemo=function(a){return z(a)===r},exports.isPortal=function(a){return z(a)===d},exports.isProfiler=function(a){return z(a)===g},exports.isStrictMode=function(a){return z(a)===f},exports.isSuspense=function(a){return z(a)===p},exports.isValidElementType=function(a){return"string"==typeof a||"function"==typeof a||a===e||a===m||a===g||a===f||a===p||a===q||"object"==typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)},exports.typeOf=z},529:function(module,exports,__webpack_require__){"use strict";module.exports=function(condition,format,a,b,c,d,e,f){if(!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var args=[a,b,c,d,e,f],argIndex=0;(error=new Error(format.replace(/%s/g,(function(){return args[argIndex++]})))).name="Invariant Violation"}throw error.framesToPop=1,error}}},530:function(module,exports,__webpack_require__){"use strict";(exports=module.exports=__webpack_require__(531).default).default=exports},531:function(module,exports,__webpack_require__){"use strict";var src$es5$$=__webpack_require__(532);function getCacheId(inputs){if("undefined"!=typeof JSON){var i,len,input,cacheId=[];for(i=0,len=inputs.length;i<len;i+=1)(input=inputs[i])&&"object"==typeof input?cacheId.push(orderedProps(input)):cacheId.push(input);return JSON.stringify(cacheId)}}function orderedProps(obj){var key,i,len,prop,props=[],keys=[];for(key in obj)obj.hasOwnProperty(key)&&keys.push(key);var orderedKeys=keys.sort();for(i=0,len=orderedKeys.length;i<len;i+=1)(prop={})[key=orderedKeys[i]]=obj[key],props[i]=prop;return props}exports.default=function(FormatConstructor){var cache=src$es5$$.objCreate(null);return function(){var args=Array.prototype.slice.call(arguments),cacheId=getCacheId(args),format=cacheId&&cache[cacheId];return format||(format=new(src$es5$$.bind.apply(FormatConstructor,[null].concat(args))),cacheId&&(cache[cacheId]=format)),format}}},532:function(module,exports,__webpack_require__){"use strict";var bind=Function.prototype.bind||function(oThis){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(fNOP.prototype=this.prototype),fBound.prototype=new fNOP,fBound},hop=Object.prototype.hasOwnProperty,realDefineProp=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),defineProperty=(!realDefineProp&&Object.prototype.__defineGetter__,realDefineProp?Object.defineProperty:function(obj,name,desc){"get"in desc&&obj.__defineGetter__?obj.__defineGetter__(name,desc.get):hop.call(obj,name)&&!("value"in desc)||(obj[name]=desc.value)}),objCreate=Object.create||function(proto,props){var obj,k;function F(){}for(k in F.prototype=proto,obj=new F,props)hop.call(props,k)&&defineProperty(obj,k,props[k]);return obj};exports.bind=bind,exports.defineProperty=defineProperty,exports.objCreate=objCreate},533:function(module){module.exports=JSON.parse('{"job_type":"anomaly_detector","groups":["hosts","metrics"],"description":"Metrics: Hosts - Identify unusual spikes in memory usage across hosts.","analysis_config":{"bucket_span":"15m","detectors":[{"detector_description":"max(\'system.memory.actual.used.pct\')","function":"max","field_name":"system.memory.actual.used.pct","custom_rules":[{"actions":["skip_result"],"conditions":[{"applies_to":"actual","operator":"lt","value":0.1}]}]}],"influencers":["host.name"]},"data_description":{"time_field":"@timestamp"},"analysis_limits":{"model_memory_limit":"64mb"},"custom_settings":{"created_by":"ml-module-metrics-ui-hosts","custom_urls":[{"url_name":"Host Metrics","url_value":"metrics/detail/host/$host.name$?metricTime=(autoReload:!f,refreshInterval:5000,time:(from:%27$earliest$%27,interval:%3E%3D1m,to:%27$latest$%27))"}]}}')},534:function(module){module.exports=JSON.parse('{"job_id":"JOB_ID","indices":["INDEX_PATTERN_NAME"],"indices_options":{"allow_no_indices":true},"query":{"bool":{"must":[{"exists":{"field":"system.memory"}}]}}}')},535:function(module){module.exports=JSON.parse('{"job_type":"anomaly_detector","description":"Metrics: Hosts - Identify unusual spikes in inbound traffic across hosts.","groups":["hosts","metrics"],"analysis_config":{"bucket_span":"15m","detectors":[{"detector_description":"max(bytes_in_derivative)","function":"max","field_name":"bytes_in_derivative"}],"influencers":["host.name"],"summary_count_field_name":"doc_count"},"data_description":{"time_field":"@timestamp"},"analysis_limits":{"model_memory_limit":"32mb"},"custom_settings":{"created_by":"ml-module-metrics-ui-hosts","custom_urls":[{"url_name":"Host Metrics","url_value":"metrics/detail/host/$host.name$?metricTime=(autoReload:!f,refreshInterval:5000,time:(from:%27$earliest$%27,interval:%3E%3D1m,to:%27$latest$%27))"}]}}')},536:function(module){module.exports=JSON.parse('{"job_id":"JOB_ID","indices":["INDEX_PATTERN_NAME"],"indices_options":{"allow_no_indices":true},"query":{"bool":{"must":[{"exists":{"field":"system.network"}}]}},"chunking_config":{"mode":"manual","time_span":"900s"},"aggregations":{"host.name":{"terms":{"field":"host.name","size":100},"aggregations":{"buckets":{"date_histogram":{"field":"@timestamp","fixed_interval":"5m"},"aggregations":{"@timestamp":{"max":{"field":"@timestamp"}},"bytes_in_max":{"max":{"field":"system.network.in.bytes"}},"bytes_in_derivative":{"derivative":{"buckets_path":"bytes_in_max"}},"positive_only":{"bucket_script":{"buckets_path":{"in_derivative":"bytes_in_derivative.value"},"script":"params.in_derivative > 0.0 ? params.in_derivative : 0.0"}}}}}}}}')},537:function(module){module.exports=JSON.parse('{"job_type":"anomaly_detector","description":"Metrics: Hosts - Identify unusual spikes in outbound traffic across hosts.","groups":["hosts","metrics"],"analysis_config":{"bucket_span":"15m","detectors":[{"detector_description":"max(bytes_out_derivative)","function":"max","field_name":"bytes_out_derivative"}],"influencers":["host.name"],"summary_count_field_name":"doc_count"},"data_description":{"time_field":"@timestamp"},"analysis_limits":{"model_memory_limit":"32mb"},"custom_settings":{"created_by":"ml-module-metrics-ui-hosts","custom_urls":[{"url_name":"Host Metrics","url_value":"metrics/detail/host/$host.name$?metricTime=(autoReload:!f,refreshInterval:5000,time:(from:%27$earliest$%27,interval:%3E%3D1m,to:%27$latest$%27))"}]}}')},538:function(module){module.exports=JSON.parse('{"job_id":"JOB_ID","indices":["INDEX_PATTERN_NAME"],"indices_options":{"allow_no_indices":true},"query":{"bool":{"must":[{"exists":{"field":"system.network"}}]}},"chunking_config":{"mode":"manual","time_span":"900s"},"aggregations":{"host.name":{"terms":{"field":"host.name","size":100},"aggregations":{"buckets":{"date_histogram":{"field":"@timestamp","fixed_interval":"5m"},"aggregations":{"@timestamp":{"max":{"field":"@timestamp"}},"bytes_out_max":{"max":{"field":"system.network.out.bytes"}},"bytes_out_derivative":{"derivative":{"buckets_path":"bytes_out_max"}},"positive_only":{"bucket_script":{"buckets_path":{"out_derivative":"bytes_out_derivative.value"},"script":"params.out_derivative > 0.0 ? params.out_derivative : 0.0"}}}}}}}}')},539:function(module){module.exports=JSON.parse('{"job_type":"anomaly_detector","groups":["k8s","metrics"],"description":"Metrics: Kubernetes - Identify unusual spikes in memory usage across Kubernetes pods.","analysis_config":{"bucket_span":"15m","detectors":[{"detector_description":"max(\'kubernetes.pod.memory.usage.node.pct\')","function":"max","field_name":"kubernetes.pod.memory.usage.node.pct","partition_field_name":"kubernetes.namespace","custom_rules":[{"actions":["skip_result"],"conditions":[{"applies_to":"actual","operator":"lt","value":0.1}]}]}],"influencers":["kubernetes.namespace","kubernetes.node.name","kubernetes.pod.uid"]},"data_description":{"time_field":"@timestamp"},"analysis_limits":{"model_memory_limit":"64mb"},"custom_settings":{"created_by":"ml-module-metrics-ui-k8s","custom_urls":[{"url_name":"Pod Metrics","url_value":"metrics/detail/pod/$kubernetes.pod.uid$?metricTime=(autoReload:!f,refreshInterval:5000,time:(from:%27$earliest$%27,interval:%3E%3D1m,to:%27$latest$%27))"}]}}')},540:function(module){module.exports=JSON.parse('{"job_id":"JOB_ID","indices":["INDEX_PATTERN_NAME"],"indices_options":{"allow_no_indices":true},"query":{"bool":{"must":[{"exists":{"field":"kubernetes.pod.uid"}},{"exists":{"field":"kubernetes.pod.memory"}}]}}}')},541:function(module){module.exports=JSON.parse('{"job_type":"anomaly_detector","description":"Metrics: Kubernetes - Identify unusual spikes in inbound traffic across Kubernetes pods.","groups":["k8s","metrics"],"analysis_config":{"bucket_span":"15m","detectors":[{"detector_description":"max(bytes_in_derivative)","function":"max","field_name":"bytes_in_derivative","partition_field_name":"kubernetes.namespace"}],"influencers":["kubernetes.namespace","kubernetes.pod.uid"],"summary_count_field_name":"doc_count"},"data_description":{"time_field":"@timestamp"},"analysis_limits":{"model_memory_limit":"32mb"},"custom_settings":{"created_by":"ml-module-metrics-ui-k8s","custom_urls":[{"url_name":"Pod Metrics","url_value":"metrics/detail/pod/$kubernetes.pod.uid$?metricTime=(autoReload:!f,refreshInterval:5000,time:(from:%27$earliest$%27,interval:%3E%3D1m,to:%27$latest$%27))"}]}}')},542:function(module){module.exports=JSON.parse('{"job_id":"JOB_ID","indices":["INDEX_PATTERN_NAME"],"indices_options":{"allow_no_indices":true},"query":{"bool":{"must":[{"exists":{"field":"kubernetes.pod.network"}}]}},"chunking_config":{"mode":"manual","time_span":"900s"},"aggregations":{"kubernetes.namespace":{"terms":{"field":"kubernetes.namespace","size":25},"aggregations":{"kubernetes.pod.uid":{"terms":{"field":"kubernetes.pod.uid","size":100},"aggregations":{"buckets":{"date_histogram":{"field":"@timestamp","fixed_interval":"5m"},"aggregations":{"@timestamp":{"max":{"field":"@timestamp"}},"bytes_in_max":{"max":{"field":"kubernetes.pod.network.rx.bytes"}},"bytes_in_derivative":{"derivative":{"buckets_path":"bytes_in_max"}},"positive_only":{"bucket_script":{"buckets_path":{"in_derivative":"bytes_in_derivative.value"},"script":"params.in_derivative > 0.0 ? params.in_derivative : 0.0"}}}}}}}}}}')},543:function(module){module.exports=JSON.parse('{"job_type":"anomaly_detector","description":"Metrics: Kubernetes - Identify unusual spikes in outbound traffic across Kubernetes pods.","groups":["k8s","metrics"],"analysis_config":{"bucket_span":"15m","detectors":[{"detector_description":"max(bytes_out_derivative)","function":"max","field_name":"bytes_out_derivative","partition_field_name":"kubernetes.namespace"}],"influencers":["kubernetes.namespace","kubernetes.pod.uid"],"summary_count_field_name":"doc_count"},"data_description":{"time_field":"@timestamp"},"analysis_limits":{"model_memory_limit":"32mb"},"custom_settings":{"created_by":"ml-module-metrics-ui-k8s","custom_urls":[{"url_name":"Pod Metrics","url_value":"metrics/detail/pod/$kubernetes.pod.uid$?metricTime=(autoReload:!f,refreshInterval:5000,time:(from:%27$earliest$%27,interval:%3E%3D1m,to:%27$latest$%27))"}]}}')},544:function(module){module.exports=JSON.parse('{"job_id":"JOB_ID","indices":["INDEX_PATTERN_NAME"],"indices_options":{"allow_no_indices":true},"query":{"bool":{"must":[{"exists":{"field":"kubernetes.pod.network"}}]}},"chunking_config":{"mode":"manual","time_span":"900s"},"aggregations":{"kubernetes.namespace":{"terms":{"field":"kubernetes.namespace","size":25},"aggregations":{"kubernetes.pod.uid":{"terms":{"field":"kubernetes.pod.uid","size":100},"aggregations":{"buckets":{"date_histogram":{"field":"@timestamp","fixed_interval":"5m"},"aggregations":{"@timestamp":{"max":{"field":"@timestamp"}},"bytes_out_max":{"max":{"field":"kubernetes.pod.network.tx.bytes"}},"bytes_out_derivative":{"derivative":{"buckets_path":"bytes_out_max"}},"positive_only":{"bucket_script":{"buckets_path":{"pos_derivative":"bytes_out_derivative.value"},"script":"params.pos_derivative > 0.0 ? params.pos_derivative : 0.0"}}}}}}}}}}')},545:function(module,exports,__webpack_require__){"use strict";var colorString=__webpack_require__(546),convert=__webpack_require__(550),_slice=[].slice,skippedModels=["keyword","gray","hex"],hashedModelKeys={};Object.keys(convert).forEach((function(model){hashedModelKeys[_slice.call(convert[model].labels).sort().join("")]=model}));var limiters={};function Color(obj,model){if(!(this instanceof Color))return new Color(obj,model);if(model&&model in skippedModels&&(model=null),model&&!(model in convert))throw new Error("Unknown model: "+model);var i,channels;if(obj)if(obj instanceof Color)this.model=obj.model,this.color=obj.color.slice(),this.valpha=obj.valpha;else if("string"==typeof obj){var result=colorString.get(obj);if(null===result)throw new Error("Unable to parse color from string: "+obj);this.model=result.model,channels=convert[this.model].channels,this.color=result.value.slice(0,channels),this.valpha="number"==typeof result.value[channels]?result.value[channels]:1}else if(obj.length){this.model=model||"rgb",channels=convert[this.model].channels;var newArr=_slice.call(obj,0,channels);this.color=zeroArray(newArr,channels),this.valpha="number"==typeof obj[channels]?obj[channels]:1}else if("number"==typeof obj)obj&=16777215,this.model="rgb",this.color=[obj>>16&255,obj>>8&255,255&obj],this.valpha=1;else{this.valpha=1;var keys=Object.keys(obj);"alpha"in obj&&(keys.splice(keys.indexOf("alpha"),1),this.valpha="number"==typeof obj.alpha?obj.alpha:0);var hashedKeys=keys.sort().join("");if(!(hashedKeys in hashedModelKeys))throw new Error("Unable to parse color from object: "+JSON.stringify(obj));this.model=hashedModelKeys[hashedKeys];var labels=convert[this.model].labels,color=[];for(i=0;i<labels.length;i++)color.push(obj[labels[i]]);this.color=zeroArray(color)}else this.model="rgb",this.color=[0,0,0],this.valpha=1;if(limiters[this.model])for(channels=convert[this.model].channels,i=0;i<channels;i++){var limit=limiters[this.model][i];limit&&(this.color[i]=limit(this.color[i]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function getset(model,channel,modifier){return(model=Array.isArray(model)?model:[model]).forEach((function(m){(limiters[m]||(limiters[m]=[]))[channel]=modifier})),model=model[0],function(val){var result;return arguments.length?(modifier&&(val=modifier(val)),(result=this[model]()).color[channel]=val,result):(result=this[model]().color[channel],modifier&&(result=modifier(result)),result)}}function maxfn(max){return function(v){return Math.max(0,Math.min(max,v))}}function assertArray(val){return Array.isArray(val)?val:[val]}function zeroArray(arr,length){for(var i=0;i<length;i++)"number"!=typeof arr[i]&&(arr[i]=0);return arr}Color.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(places){var self=this.model in colorString.to?this:this.rgb(),args=1===(self=self.round("number"==typeof places?places:1)).valpha?self.color:self.color.concat(this.valpha);return colorString.to[self.model](args)},percentString:function(places){var self=this.rgb().round("number"==typeof places?places:1),args=1===self.valpha?self.color:self.color.concat(this.valpha);return colorString.to.rgb.percent(args)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var result={},channels=convert[this.model].channels,labels=convert[this.model].labels,i=0;i<channels;i++)result[labels[i]]=this.color[i];return 1!==this.valpha&&(result.alpha=this.valpha),result},unitArray:function(){var rgb=this.rgb().color;return rgb[0]/=255,rgb[1]/=255,rgb[2]/=255,1!==this.valpha&&rgb.push(this.valpha),rgb},unitObject:function(){var rgb=this.rgb().object();return rgb.r/=255,rgb.g/=255,rgb.b/=255,1!==this.valpha&&(rgb.alpha=this.valpha),rgb},round:function(places){return places=Math.max(places||0,0),new Color(this.color.map(function(places){return function(num){return function(num,places){return Number(num.toFixed(places))}(num,places)}}(places)).concat(this.valpha),this.model)},alpha:function(val){return arguments.length?new Color(this.color.concat(Math.max(0,Math.min(1,val))),this.model):this.valpha},red:getset("rgb",0,maxfn(255)),green:getset("rgb",1,maxfn(255)),blue:getset("rgb",2,maxfn(255)),hue:getset(["hsl","hsv","hsl","hwb","hcg"],0,(function(val){return(val%360+360)%360})),saturationl:getset("hsl",1,maxfn(100)),lightness:getset("hsl",2,maxfn(100)),saturationv:getset("hsv",1,maxfn(100)),value:getset("hsv",2,maxfn(100)),chroma:getset("hcg",1,maxfn(100)),gray:getset("hcg",2,maxfn(100)),white:getset("hwb",1,maxfn(100)),wblack:getset("hwb",2,maxfn(100)),cyan:getset("cmyk",0,maxfn(100)),magenta:getset("cmyk",1,maxfn(100)),yellow:getset("cmyk",2,maxfn(100)),black:getset("cmyk",3,maxfn(100)),x:getset("xyz",0,maxfn(100)),y:getset("xyz",1,maxfn(100)),z:getset("xyz",2,maxfn(100)),l:getset("lab",0,maxfn(100)),a:getset("lab",1),b:getset("lab",2),keyword:function(val){return arguments.length?new Color(val):convert[this.model].keyword(this.color)},hex:function(val){return arguments.length?new Color(val):colorString.to.hex(this.rgb().round().color)},rgbNumber:function(){var rgb=this.rgb().color;return(255&rgb[0])<<16|(255&rgb[1])<<8|255&rgb[2]},luminosity:function(){for(var rgb=this.rgb().color,lum=[],i=0;i<rgb.length;i++){var chan=rgb[i]/255;lum[i]=chan<=.03928?chan/12.92:Math.pow((chan+.055)/1.055,2.4)}return.2126*lum[0]+.7152*lum[1]+.0722*lum[2]},contrast:function(color2){var lum1=this.luminosity(),lum2=color2.luminosity();return lum1>lum2?(lum1+.05)/(lum2+.05):(lum2+.05)/(lum1+.05)},level:function(color2){var contrastRatio=this.contrast(color2);return contrastRatio>=7.1?"AAA":contrastRatio>=4.5?"AA":""},dark:function(){var rgb=this.rgb().color;return(299*rgb[0]+587*rgb[1]+114*rgb[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var rgb=this.rgb(),i=0;i<3;i++)rgb.color[i]=255-rgb.color[i];return rgb},lighten:function(ratio){var hsl=this.hsl();return hsl.color[2]+=hsl.color[2]*ratio,hsl},darken:function(ratio){var hsl=this.hsl();return hsl.color[2]-=hsl.color[2]*ratio,hsl},saturate:function(ratio){var hsl=this.hsl();return hsl.color[1]+=hsl.color[1]*ratio,hsl},desaturate:function(ratio){var hsl=this.hsl();return hsl.color[1]-=hsl.color[1]*ratio,hsl},whiten:function(ratio){var hwb=this.hwb();return hwb.color[1]+=hwb.color[1]*ratio,hwb},blacken:function(ratio){var hwb=this.hwb();return hwb.color[2]+=hwb.color[2]*ratio,hwb},grayscale:function(){var rgb=this.rgb().color,val=.3*rgb[0]+.59*rgb[1]+.11*rgb[2];return Color.rgb(val,val,val)},fade:function(ratio){return this.alpha(this.valpha-this.valpha*ratio)},opaquer:function(ratio){return this.alpha(this.valpha+this.valpha*ratio)},rotate:function(degrees){var hsl=this.hsl(),hue=hsl.color[0];return hue=(hue=(hue+degrees)%360)<0?360+hue:hue,hsl.color[0]=hue,hsl},mix:function(mixinColor,weight){var color1=this.rgb(),color2=mixinColor.rgb(),p=void 0===weight?.5:weight,w=2*p-1,a=color1.alpha()-color2.alpha(),w1=((w*a==-1?w:(w+a)/(1+w*a))+1)/2,w2=1-w1;return Color.rgb(w1*color1.red()+w2*color2.red(),w1*color1.green()+w2*color2.green(),w1*color1.blue()+w2*color2.blue(),color1.alpha()*p+color2.alpha()*(1-p))}},Object.keys(convert).forEach((function(model){if(-1===skippedModels.indexOf(model)){var channels=convert[model].channels;Color.prototype[model]=function(){if(this.model===model)return new Color(this);if(arguments.length)return new Color(arguments,model);var newAlpha="number"==typeof arguments[channels]?channels:this.valpha;return new Color(assertArray(convert[this.model][model].raw(this.color)).concat(newAlpha),model)},Color[model]=function(color){return"number"==typeof color&&(color=zeroArray(_slice.call(arguments),channels)),new Color(color,model)}}})),module.exports=Color},546:function(module,exports,__webpack_require__){var colorNames=__webpack_require__(547),swizzle=__webpack_require__(548),reverseNames={};for(var name in colorNames)colorNames.hasOwnProperty(name)&&(reverseNames[colorNames[name]]=name);var cs=module.exports={to:{},get:{}};function clamp(num,min,max){return Math.min(Math.max(min,num),max)}function hexDouble(num){var str=num.toString(16).toUpperCase();return str.length<2?"0"+str:str}cs.get=function(string){var val,model;switch(string.substring(0,3).toLowerCase()){case"hsl":val=cs.get.hsl(string),model="hsl";break;case"hwb":val=cs.get.hwb(string),model="hwb";break;default:val=cs.get.rgb(string),model="rgb"}return val?{model:model,value:val}:null},cs.get.rgb=function(string){if(!string)return null;var match,i,hexAlpha,rgb=[0,0,0,1];if(match=string.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(hexAlpha=match[2],match=match[1],i=0;i<3;i++){var i2=2*i;rgb[i]=parseInt(match.slice(i2,i2+2),16)}hexAlpha&&(rgb[3]=parseInt(hexAlpha,16)/255)}else if(match=string.match(/^#([a-f0-9]{3,4})$/i)){for(hexAlpha=(match=match[1])[3],i=0;i<3;i++)rgb[i]=parseInt(match[i]+match[i],16);hexAlpha&&(rgb[3]=parseInt(hexAlpha+hexAlpha,16)/255)}else if(match=string.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(i=0;i<3;i++)rgb[i]=parseInt(match[i+1],0);match[4]&&(rgb[3]=parseFloat(match[4]))}else{if(!(match=string.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(match=string.match(/(\D+)/))?"transparent"===match[1]?[0,0,0,0]:(rgb=colorNames[match[1]])?(rgb[3]=1,rgb):null:null;for(i=0;i<3;i++)rgb[i]=Math.round(2.55*parseFloat(match[i+1]));match[4]&&(rgb[3]=parseFloat(match[4]))}for(i=0;i<3;i++)rgb[i]=clamp(rgb[i],0,255);return rgb[3]=clamp(rgb[3],0,1),rgb},cs.get.hsl=function(string){if(!string)return null;var match=string.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(match){var alpha=parseFloat(match[4]);return[(parseFloat(match[1])+360)%360,clamp(parseFloat(match[2]),0,100),clamp(parseFloat(match[3]),0,100),clamp(isNaN(alpha)?1:alpha,0,1)]}return null},cs.get.hwb=function(string){if(!string)return null;var match=string.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(match){var alpha=parseFloat(match[4]);return[(parseFloat(match[1])%360+360)%360,clamp(parseFloat(match[2]),0,100),clamp(parseFloat(match[3]),0,100),clamp(isNaN(alpha)?1:alpha,0,1)]}return null},cs.to.hex=function(){var rgba=swizzle(arguments);return"#"+hexDouble(rgba[0])+hexDouble(rgba[1])+hexDouble(rgba[2])+(rgba[3]<1?hexDouble(Math.round(255*rgba[3])):"")},cs.to.rgb=function(){var rgba=swizzle(arguments);return rgba.length<4||1===rgba[3]?"rgb("+Math.round(rgba[0])+", "+Math.round(rgba[1])+", "+Math.round(rgba[2])+")":"rgba("+Math.round(rgba[0])+", "+Math.round(rgba[1])+", "+Math.round(rgba[2])+", "+rgba[3]+")"},cs.to.rgb.percent=function(){var rgba=swizzle(arguments),r=Math.round(rgba[0]/255*100),g=Math.round(rgba[1]/255*100),b=Math.round(rgba[2]/255*100);return rgba.length<4||1===rgba[3]?"rgb("+r+"%, "+g+"%, "+b+"%)":"rgba("+r+"%, "+g+"%, "+b+"%, "+rgba[3]+")"},cs.to.hsl=function(){var hsla=swizzle(arguments);return hsla.length<4||1===hsla[3]?"hsl("+hsla[0]+", "+hsla[1]+"%, "+hsla[2]+"%)":"hsla("+hsla[0]+", "+hsla[1]+"%, "+hsla[2]+"%, "+hsla[3]+")"},cs.to.hwb=function(){var hwba=swizzle(arguments),a="";return hwba.length>=4&&1!==hwba[3]&&(a=", "+hwba[3]),"hwb("+hwba[0]+", "+hwba[1]+"%, "+hwba[2]+"%"+a+")"},cs.to.keyword=function(rgb){return reverseNames[rgb.slice(0,3)]}},547:function(module,exports,__webpack_require__){"use strict";module.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},548:function(module,exports,__webpack_require__){"use strict";var isArrayish=__webpack_require__(549),concat=Array.prototype.concat,slice=Array.prototype.slice,swizzle=module.exports=function(args){for(var results=[],i=0,len=args.length;i<len;i++){var arg=args[i];isArrayish(arg)?results=concat.call(results,slice.call(arg)):results.push(arg)}return results};swizzle.wrap=function(fn){return function(){return fn(swizzle(arguments))}}},549:function(module,exports){module.exports=function(obj){return!(!obj||"string"==typeof obj)&&(obj instanceof Array||Array.isArray(obj)||obj.length>=0&&(obj.splice instanceof Function||Object.getOwnPropertyDescriptor(obj,obj.length-1)&&"String"!==obj.constructor.name))}},550:function(module,exports,__webpack_require__){var conversions=__webpack_require__(290),route=__webpack_require__(552),convert={};Object.keys(conversions).forEach((function(fromModel){convert[fromModel]={},Object.defineProperty(convert[fromModel],"channels",{value:conversions[fromModel].channels}),Object.defineProperty(convert[fromModel],"labels",{value:conversions[fromModel].labels});var routes=route(fromModel);Object.keys(routes).forEach((function(toModel){var fn=routes[toModel];convert[fromModel][toModel]=function(fn){var wrappedFn=function(args){if(null==args)return args;arguments.length>1&&(args=Array.prototype.slice.call(arguments));var result=fn(args);if("object"==typeof result)for(var len=result.length,i=0;i<len;i++)result[i]=Math.round(result[i]);return result};return"conversion"in fn&&(wrappedFn.conversion=fn.conversion),wrappedFn}(fn),convert[fromModel][toModel].raw=function(fn){var wrappedFn=function(args){return null==args?args:(arguments.length>1&&(args=Array.prototype.slice.call(arguments)),fn(args))};return"conversion"in fn&&(wrappedFn.conversion=fn.conversion),wrappedFn}(fn)}))})),module.exports=convert},551:function(module,exports,__webpack_require__){"use strict";module.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},552:function(module,exports,__webpack_require__){var conversions=__webpack_require__(290);function deriveBFS(fromModel){var graph=function(){for(var graph={},models=Object.keys(conversions),len=models.length,i=0;i<len;i++)graph[models[i]]={distance:-1,parent:null};return graph}(),queue=[fromModel];for(graph[fromModel].distance=0;queue.length;)for(var current=queue.pop(),adjacents=Object.keys(conversions[current]),len=adjacents.length,i=0;i<len;i++){var adjacent=adjacents[i],node=graph[adjacent];-1===node.distance&&(node.distance=graph[current].distance+1,node.parent=current,queue.unshift(adjacent))}return graph}function link(from,to){return function(args){return to(from(args))}}function wrapConversion(toModel,graph){for(var path=[graph[toModel].parent,toModel],fn=conversions[graph[toModel].parent][toModel],cur=graph[toModel].parent;graph[cur].parent;)path.unshift(graph[cur].parent),fn=link(conversions[graph[cur].parent][cur],fn),cur=graph[cur].parent;return fn.conversion=path,fn}module.exports=function(fromModel){for(var graph=deriveBFS(fromModel),conversion={},models=Object.keys(graph),len=models.length,i=0;i<len;i++){var toModel=models[i];null!==graph[toModel].parent&&(conversion[toModel]=wrapConversion(toModel,graph))}return conversion}},560:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"renderApp",(function(){return renderApp}));var external_kbnSharedDeps_React_=__webpack_require__(2),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_ReactDom_=__webpack_require__(21),external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_),external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(62),public_=__webpack_require__(34),_404=(__webpack_require__(217),__webpack_require__(218)),constate_cjs=__webpack_require__(78),constate_cjs_default=__webpack_require__.n(constate_cjs),external_kbnSharedDeps_Moment_=__webpack_require__(50),external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_),datemath_target=__webpack_require__(7),target_default=__webpack_require__.n(datemath_target),lib=__webpack_require__(0),pipeable=__webpack_require__(25),Either=__webpack_require__(17),lib_function=__webpack_require__(18),use_url_state=__webpack_require__(99),url_state=__webpack_require__(108);const parseRange=range=>{const parsedFrom=target_default.a.parse(range.from.toString()),parsedTo=target_default.a.parse(range.to.toString(),{roundUp:!0});return{...range,from:parsedFrom&&parsedFrom.valueOf()||external_kbnSharedDeps_Moment_default()().subtract(1,"hour").valueOf(),to:parsedTo&&parsedTo.valueOf()||external_kbnSharedDeps_Moment_default()().valueOf()}},DEFAULT_TIMERANGE={from:"now-1h",to:"now",interval:">=1m"},DEFAULT_URL_STATE={time:DEFAULT_TIMERANGE,autoReload:!1,refreshInterval:5e3},MetricsTimeInputRT=lib.type({from:lib.union([lib.string,lib.number]),to:lib.union([lib.string,lib.number]),interval:lib.string}),MetricsTimeUrlStateRT=lib.partial({time:MetricsTimeInputRT,autoReload:lib.boolean,refreshInterval:lib.number}),encodeUrlState=MetricsTimeUrlStateRT.encode,decodeUrlState=value=>Object(pipeable.pipe)(MetricsTimeUrlStateRT.decode(value),Object(Either.fold)(Object(lib_function.constant)(void 0),lib_function.identity)),replaceMetricTimeInQueryString=(from,to)=>Number.isNaN(from)||Number.isNaN(to)?value=>value:Object(url_state.d)("metricTime",{autoReload:!1,time:{interval:">=1m",from:external_kbnSharedDeps_Moment_default()(from).toISOString(),to:external_kbnSharedDeps_Moment_default()(to).toISOString()}}),MetricsTimeContainer=constate_cjs_default()(()=>{const[urlState,setUrlState]=Object(use_url_state.b)({defaultState:DEFAULT_URL_STATE,decodeUrlState:decodeUrlState,encodeUrlState:encodeUrlState,urlStateKey:"metricTime"}),[isAutoReloading,setAutoReload]=Object(external_kbnSharedDeps_React_.useState)(urlState.autoReload||!1),[refreshInterval,setRefreshInterval]=Object(external_kbnSharedDeps_React_.useState)(urlState.refreshInterval||5e3),[lastRefresh,setLastRefresh]=Object(external_kbnSharedDeps_React_.useState)(external_kbnSharedDeps_Moment_default()().valueOf()),[timeRange,setTimeRange]=Object(external_kbnSharedDeps_React_.useState)(urlState.time||DEFAULT_TIMERANGE);Object(external_kbnSharedDeps_React_.useEffect)(()=>setUrlState({time:timeRange,autoReload:isAutoReloading,refreshInterval:refreshInterval}),[isAutoReloading,refreshInterval,setUrlState,timeRange]);const[parsedTimeRange,setParsedTimeRange]=Object(external_kbnSharedDeps_React_.useState)(parseRange(urlState.time||DEFAULT_TIMERANGE)),updateTimeRange=Object(external_kbnSharedDeps_React_.useCallback)(range=>{setTimeRange(range),setParsedTimeRange(parseRange(range))},[]);return{timeRange:timeRange,setTimeRange:updateTimeRange,parsedTimeRange:parsedTimeRange,refreshInterval:refreshInterval,setRefreshInterval:setRefreshInterval,isAutoReloading:isAutoReloading,setAutoReload:setAutoReload,lastRefresh:lastRefresh,triggerRefresh:Object(external_kbnSharedDeps_React_.useCallback)(()=>setLastRefresh(external_kbnSharedDeps_Moment_default()().valueOf()),[setLastRefresh])}}),[MetricsTimeProvider,useMetricsTimeContext]=MetricsTimeContainer;var query_params=__webpack_require__(148);const RedirectToNodeDetail=({match:{params:{nodeId:nodeId,nodeType:nodeType}},location:location})=>{const searchString=replaceMetricTimeInQueryString(Object(query_params.b)(location),Object(query_params.d)(location))("");return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Redirect,{to:`/detail/${nodeType}/${nodeId}?${searchString}`})},getNodeDetailUrl=({nodeType:nodeType,nodeId:nodeId,to:to,from:from})=>({app:"metrics",pathname:`link-to/${nodeType}-detail/${nodeId}`,search:to&&from?{to:""+to,from:""+from}:void 0});var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),kibanaReact_public_=__webpack_require__(3);var loading_page=__webpack_require__(109),external_kbnSharedDeps_ElasticEui_=__webpack_require__(10),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(14),common_=__webpack_require__(13),header=__webpack_require__(171),components_page=__webpack_require__(90);const DetailPageContent=Object(common_.euiStyled)(components_page.c)`
  overflow: auto;
  background-color: ${props=>props.theme.eui.euiColorLightestShade};
`,error_Error=({message:message})=>external_kbnSharedDeps_React_default.a.createElement(components_page.a,null,external_kbnSharedDeps_React_default.a.createElement(header.a,null),external_kbnSharedDeps_React_default.a.createElement(DetailPageContent,null,external_kbnSharedDeps_React_default.a.createElement(ErrorPageBody,{message:message}))),ErrorPageBody=({message:message})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPage,{style:{flex:"1 0 auto"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageHeaderSection,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.errorPage.unexpectedErrorTitle",defaultMessage:"Oops!"}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContent,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{color:"danger",title:message,iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.errorPage.tryAgainDescription ",defaultMessage:"Please click the back button and try again."}))))));var use_source_via_http=__webpack_require__(141);const RedirectToHostDetailViaIP=({match:{params:{hostIp:hostIp}},location:location})=>{const{source:source}=Object(use_source_via_http.a)({sourceId:"default"}),{error:error,name:name}=((ipAddress,indexPattern)=>{var _useKibana$services$h;const fetch=null===(_useKibana$services$h=Object(kibanaReact_public_.useKibana)().services.http)||void 0===_useKibana$services$h?void 0:_useKibana$services$h.fetch,[error,setError]=Object(external_kbnSharedDeps_React_.useState)(null),[loading,setLoadingState]=Object(external_kbnSharedDeps_React_.useState)(!0),[data,setData]=Object(external_kbnSharedDeps_React_.useState)(null);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{(async()=>{setLoadingState(!0),setError(null);try{if(!fetch)throw new Error("HTTP service is unavailable");if(ipAddress&&indexPattern){const response=await fetch("/api/infra/ip_to_host",{method:"POST",body:JSON.stringify({ip:ipAddress,index_pattern:indexPattern})});setLoadingState(!1),setData(response)}}catch(err){setLoadingState(!1),setError(err)}})()},[ipAddress,indexPattern,fetch]),{name:data&&data.host||null,loading:loading,error:error}})(hostIp,source&&source.configuration&&source.configuration.metricAlias||null);if(error)return external_kbnSharedDeps_React_default.a.createElement(error_Error,{message:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.linkTo.hostWithIp.error",{defaultMessage:'Host not found with IP address "{hostIp}".',values:{hostIp:hostIp}})});const searchString=replaceMetricTimeInQueryString(Object(query_params.b)(location),Object(query_params.d)(location))("");return name?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Redirect,{to:`/detail/host/${name}?${searchString}`}):external_kbnSharedDeps_React_default.a.createElement(loading_page.a,{message:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.linkTo.hostWithIp.loading",{defaultMessage:'Loading host with IP address "{hostIp}".',values:{hostIp:hostIp}})})};var inventory_models=__webpack_require__(88);const ITEM_TYPES=inventory_models.c.map(m=>m.id).join("|"),LinkToMetricsPage=props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Switch,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:`${props.match.url}/:nodeType(${ITEM_TYPES})-detail/:nodeId`,component:RedirectToNodeDetail}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:props.match.url+"/host-detail-via-ip/:hostIp",component:RedirectToHostDetailViaIP}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Redirect,{to:"/"}));var document_title=__webpack_require__(110),help_center_content=__webpack_require__(243),routed_tabs=__webpack_require__(245),use_metrics_explorer_options=__webpack_require__(93),external_kbnSharedDeps_SaferLodashSet_=__webpack_require__(70),ThrowReporter=__webpack_require__(505);const WithMetricsExplorerOptionsUrlState=()=>{const{options:options,chartOptions:chartOptions,setChartOptions:setChartOptions,currentTimerange:currentTimerange,setOptions:setRawOptions,setTimeRange:setTimeRange}=Object(external_kbnSharedDeps_React_.useContext)(use_metrics_explorer_options.c.Context),urlState=Object(external_kbnSharedDeps_React_.useMemo)(()=>({options:options,chartOptions:chartOptions,timerange:currentTimerange}),[options,chartOptions,currentTimerange]),handleChange=newUrlState=>{var value;newUrlState&&newUrlState.options&&(value=newUrlState.options,setRawOptions(value)),newUrlState&&newUrlState.timerange&&setTimeRange(newUrlState.timerange),newUrlState&&newUrlState.chartOptions&&setChartOptions(newUrlState.chartOptions)};return external_kbnSharedDeps_React_default.a.createElement(url_state.a,{urlState:urlState,urlStateKey:"metricsExplorer",mapToUrlState:mapToUrlState,onChange:handleChange,onInitialize:handleChange,populateWithInitialState:!0})};const mapToUrlState=value=>{const finalState={};if(value)return value.options&&function(subject){const result=use_metrics_explorer_options.e.decode(subject);try{return ThrowReporter.ThrowReporter.report(result),!0}catch(e){return!1}}(value.options)&&(value.options.source="url",Object(external_kbnSharedDeps_SaferLodashSet_.set)(finalState,"options",value.options)),value.timerange&&function(subject){const result=use_metrics_explorer_options.g.decode(subject);try{return ThrowReporter.ThrowReporter.report(result),!0}catch(e){return!1}}(value.timerange)&&Object(external_kbnSharedDeps_SaferLodashSet_.set)(finalState,"timerange",value.timerange),value.chartOptions&&function(subject){const result=use_metrics_explorer_options.f.decode(subject);try{return ThrowReporter.ThrowReporter.report(result),!0}catch(e){return!1}}(value.chartOptions)&&Object(external_kbnSharedDeps_SaferLodashSet_.set)(finalState,"chartOptions",value.chartOptions),finalState};var metrics_source=__webpack_require__(82);const WithSource=({children:children})=>{const{createSourceConfiguration:createSourceConfiguration,createDerivedIndexPattern:createDerivedIndexPattern,source:source,sourceExists:sourceExists,sourceId:sourceId,metricIndicesExist:metricIndicesExist,isLoading:isLoading,loadSource:loadSource,hasFailedLoadingSource:hasFailedLoadingSource,loadSourceFailureMessage:loadSourceFailureMessage,updateSourceConfiguration:updateSourceConfiguration,version:version}=Object(external_kbnSharedDeps_React_.useContext)(metrics_source.a.Context);return children({create:createSourceConfiguration,configuration:source&&source.configuration,createDerivedIndexPattern:createDerivedIndexPattern,exists:sourceExists,hasFailed:hasFailedLoadingSource,isLoading:isLoading,lastFailureMessage:loadSourceFailureMessage,load:loadSource,metricIndicesExist:metricIndicesExist,sourceId:sourceId,update:updateSourceConfiguration,version:version})};var observability_public_=__webpack_require__(60),empty_states=__webpack_require__(158),components_loading=__webpack_require__(137),no_data=__webpack_require__(198),external_kbnSharedDeps_ElasticCharts_=__webpack_require__(61),external_kbnSharedDeps_Lodash_=__webpack_require__(24),create_formatter_for_metric=__webpack_require__(138),series_chart=__webpack_require__(124),triggers_actions_context=__webpack_require__(20),alerting_metrics=__webpack_require__(131),use_alert_prefill=__webpack_require__(128);const AlertFlyout=props=>{const{visible:visible,setVisible:setVisible}=props,{triggersActionsUI:triggersActionsUI}=Object(external_kbnSharedDeps_React_.useContext)(triggers_actions_context.a),onCloseFlyout=Object(external_kbnSharedDeps_React_.useCallback)(()=>setVisible(!1),[setVisible]),AddAlertFlyout=Object(external_kbnSharedDeps_React_.useMemo)(()=>triggersActionsUI&&triggersActionsUI.getAddAlertFlyout({consumer:"infrastructure",onClose:onCloseFlyout,canChangeTrigger:!1,alertTypeId:alerting_metrics.e,metadata:{currentOptions:props.options,series:props.series}}),[triggersActionsUI,onCloseFlyout]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,visible&&AddAlertFlyout)},PrefilledThresholdAlertFlyout=({onClose:onClose})=>{const{metricThresholdPrefill:metricThresholdPrefill}=Object(use_alert_prefill.b)(),{groupBy:groupBy,filterQuery:filterQuery,metrics:metrics}=metricThresholdPrefill;return external_kbnSharedDeps_React_default.a.createElement(AlertFlyout,{options:{groupBy:groupBy,filterQuery:filterQuery,metrics:metrics},visible:!0,setVisible:onClose})};var external_kbnSharedDeps_RisonNode_=__webpack_require__(26),uuid=__webpack_require__(37),uuid_default=__webpack_require__.n(uuid),color_palette=__webpack_require__(86),metric_to_format=__webpack_require__(276),lib_lib=__webpack_require__(32),create_metric_label=__webpack_require__(277);const metricsExplorerMetricToTSVBMetric=metric=>{if("rate"===metric.aggregation){const metricId=uuid_default.a.v1(),positiveOnlyId=uuid_default.a.v1(),derivativeId=uuid_default.a.v1();return[{id:metricId,type:"max",field:metric.field||void 0},{id:derivativeId,type:"derivative",field:metricId,unit:"1s"},{id:positiveOnlyId,type:"positive_only",field:derivativeId}]}if("p95"===metric.aggregation||"p99"===metric.aggregation){const percentileValue="p95"===metric.aggregation?"95":"99";return[{id:uuid_default.a.v1(),type:"percentile",field:metric.field,percentiles:[{id:uuid_default.a.v1(),value:percentileValue,mode:"line",percentile:"",shade:.2}]}]}return[{id:uuid_default.a.v1(),type:metric.aggregation,field:metric.field||void 0}]},mapMetricToSeries=chartOptions=>metric=>{const format=Object(metric_to_format.a)(metric);return{label:Object(create_metric_label.a)(metric),axis_position:"right",chart_type:"line",color:metric.color&&Object(color_palette.b)(metric.color)||Object(color_palette.b)(color_palette.a.color0),fill:chartOptions.type===use_metrics_explorer_options.b.area?.5:0,formatter:format===lib_lib.b.bits?lib_lib.b.bytes:format,value_template:"rate"===metric.aggregation?"{{value}}/s":"{{value}}",id:uuid_default.a.v1(),line_width:2,metrics:metricsExplorerMetricToTSVBMetric(metric),point_size:0,separate_axis:0,split_mode:"everything",stacked:chartOptions.stack?"stacked":"none"}},createFilterFromOptions=(options,series)=>{const filters=[];if(options.filterQuery&&filters.push(options.filterQuery),options.groupBy){const id=series.id.replace('"','\\"'),groupByFilters=Array.isArray(options.groupBy)?options.groupBy.map((field,index)=>{if(!series.keys)return null;const value=series.keys[index];return value?`${field}: "${value.replace('"','\\"')}"`:null}).join(" and "):`${options.groupBy} : "${id}"`;filters.push(groupByFilters)}return{language:"kuery",query:filters.join(" and ")}},createTSVBLink=(source,options,series,timeRange,chartOptions)=>{const tsvbIndexPattern=(alias=source&&source.metricAlias||"metric*").split(",").length>1?"metric*":alias;var alias;const appState={filters:[],linked:!1,query:{language:"kuery",query:""},uiState:{},vis:{aggs:[],params:{axis_formatter:"number",axis_position:"left",axis_scale:"normal",id:uuid_default.a.v1(),default_index_pattern:tsvbIndexPattern,index_pattern:tsvbIndexPattern,interval:"auto",series:options.metrics.map(mapMetricToSeries(chartOptions)),show_grid:1,show_legend:1,time_field:source&&source.fields.timestamp||"@timestamp",type:"timeseries",filter:createFilterFromOptions(options,series)},title:series.id,type:"metrics"}};chartOptions.yAxisMode===use_metrics_explorer_options.d.fromZero&&Object(external_kbnSharedDeps_SaferLodashSet_.set)(appState,"vis.params.axis_min",0);const globalState={refreshInterval:{pause:!0,value:0},time:{from:timeRange.from,to:timeRange.to}};return{app:"visualize",hash:"/create",search:{type:"metrics",_g:Object(external_kbnSharedDeps_RisonNode_.encode)(globalState),_a:Object(external_kbnSharedDeps_RisonNode_.encode)(appState)}}};var use_link_props=__webpack_require__(31);const dateMathExpressionToEpoch=(dateMathExpression,roundUp=!1)=>{const dateObj=target_default.a.parse(dateMathExpression,{roundUp:roundUp});if(!dateObj)throw new Error(`"${dateMathExpression}" is not a valid time string`);return dateObj.valueOf()},createNodeDetailLink=(nodeType,nodeId,from,to)=>getNodeDetailUrl({nodeType:nodeType,nodeId:nodeId,from:dateMathExpressionToEpoch(from),to:dateMathExpressionToEpoch(to,!0)}),MetricsExplorerChartContextMenu=({onFilter:onFilter,options:options,series:series,source:source,timeRange:timeRange,uiCapabilities:uiCapabilities,chartOptions:chartOptions})=>{var _uiCapabilities$visua,_uiCapabilities$infra;const[isPopoverOpen,setPopoverState]=Object(external_kbnSharedDeps_React_.useState)(!1),[flyoutVisible,setFlyoutVisible]=Object(external_kbnSharedDeps_React_.useState)(!1),supportFiltering=null!=options.groupBy&&null!=onFilter,handleFilter=Object(external_kbnSharedDeps_React_.useCallback)(()=>{supportFiltering&&onFilter&&(Array.isArray(options.groupBy)?onFilter(options.groupBy.map((field,index)=>{var _series$keys;return`${field}: "${null===(_series$keys=series.keys)||void 0===_series$keys?void 0:_series$keys[index]}"`}).join(" and ")):onFilter(`${options.groupBy}: "${series.id}"`)),setPopoverState(!1)},[supportFiltering,onFilter,options,series.keys,series.id]),filterByItem=supportFiltering?[{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.filterByLabel",{defaultMessage:"Add filter"}),icon:"metricsApp",onClick:handleFilter,"data-test-subj":"metricsExplorerAction-AddFilter"}]:[],nodeType=source&&options.groupBy&&((source,groupBy)=>{const fields=Array.isArray(groupBy)?groupBy:[groupBy];return fields.includes(source.fields.host)?"host":fields.includes(source.fields.pod)?"pod":fields.includes(source.fields.container)?"container":void 0})(source,options.groupBy),nodeDetailLinkProps=Object(use_link_props.b)({app:"metrics",...nodeType?createNodeDetailLink(nodeType,series.id,timeRange.from,timeRange.to):{}}),tsvbLinkProps=Object(use_link_props.b)({...createTSVBLink(source,options,series,timeRange,chartOptions)}),viewNodeDetail=nodeType?[{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.viewNodeDetail",{defaultMessage:"View metrics for {name}",values:{name:nodeType}}),icon:"metricsApp",...nodeType?nodeDetailLinkProps:{},"data-test-subj":"metricsExplorerAction-ViewNodeMetrics"}]:[],itemPanels=[...filterByItem,...null!=uiCapabilities&&null!==(_uiCapabilities$visua=uiCapabilities.visualize)&&void 0!==_uiCapabilities$visua&&_uiCapabilities$visua.show?[{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.openInTSVB",{defaultMessage:"Open in Visualize"}),...tsvbLinkProps,icon:"visualizeApp",disabled:0===options.metrics.length,"data-test-subj":"metricsExplorerAction-OpenInTSVB"}]:[],...viewNodeDetail,...null!=uiCapabilities&&null!==(_uiCapabilities$infra=uiCapabilities.infrastructure)&&void 0!==_uiCapabilities$infra&&_uiCapabilities$infra.save?[{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.alerts.createAlertButton",{defaultMessage:"Create alert"}),icon:"bell",onClick(){setFlyoutVisible(!0)}}]:[]];if(0===itemPanels.length)return null;const panels=[{id:0,title:"Actions",items:itemPanels}],actionAriaLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.actionsLabel.aria",{defaultMessage:"Actions for {grouping}",values:{grouping:series.id}}),actionLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.actionsLabel.button",{defaultMessage:"Actions"}),button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{contentProps:{"aria-label":actionAriaLabel},onClick:()=>setPopoverState(!0),size:"s",iconType:"arrowDown",iconSide:"right"},actionLabel);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{closePopover:()=>setPopoverState(!1),id:series.id+"-popover",button:button,isOpen:isPopoverOpen,panelPaddingSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiContextMenu,{initialPanelId:0,panels:panels}),external_kbnSharedDeps_React_default.a.createElement(AlertFlyout,{series:series,options:options,setVisible:setFlyoutVisible,visible:flyoutVisible})))},MetricsExplorerEmptyChart=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"stats",title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metricsExplorer.emptyChart.title",defaultMessage:"Chart Data Missing"})),body:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metricsExplorer.emptyChart.body",defaultMessage:"Unable to render chart."}))}),MetricsExplorerNoMetrics=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"stats",title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metricsExplorer.noMetrics.title",defaultMessage:"Missing Metric"})),body:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metricsExplorer.noMetrics.body",defaultMessage:"Please choose a metric above."}))});function getChartTheme(isDarkMode){return isDarkMode?external_kbnSharedDeps_ElasticCharts_.DARK_THEME:external_kbnSharedDeps_ElasticCharts_.LIGHT_THEME}function getTimelineChartTheme(isDarkMode){return isDarkMode?external_kbnSharedDeps_ElasticCharts_.DARK_THEME:Object(external_kbnSharedDeps_ElasticCharts_.mergeWithDefaultTheme)(TIMELINE_LIGHT_THEME,external_kbnSharedDeps_ElasticCharts_.LIGHT_THEME)}const TIMELINE_LIGHT_THEME={crosshair:{band:{fill:"#D3DAE6"}},axes:{gridLine:{horizontal:{stroke:"#eaeaea"}}}};var use_kibana_ui_setting=__webpack_require__(114),calculate_domain=__webpack_require__(125);const ALL_TITLE=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.everything",{defaultMessage:"Everything"}),ChartTitle=({series:series})=>{if(null!=series.keys){const{keys:keys}=series;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"xs"},keys.map((name,i)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,{key:name},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"m",color:keys.length-1>i?"subdued":"default"},external_kbnSharedDeps_React_default.a.createElement("strong",null,"*"===name?ALL_TITLE:name))),keys.length-1>i&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"m",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("span",null,"/"))))))}return external_kbnSharedDeps_React_default.a.createElement("span",null,series.id)},MetricsExplorerChart=({source:source,options:options,chartOptions:chartOptions,series:series,title:title,onFilter:onFilter,height:height=200,width:width="100%",timeRange:timeRange,onTimeChange:onTimeChange})=>{var _useKibana$services$a;const uiCapabilities=null===(_useKibana$services$a=Object(kibanaReact_public_.useKibana)().services.application)||void 0===_useKibana$services$a?void 0:_useKibana$services$a.capabilities,isDarkMode=Object(kibanaReact_public_.useUiSetting)("theme:darkMode"),{metrics:metrics}=options,[dateFormat]=Object(use_kibana_ui_setting.a)("dateFormat"),dateFormatter=Object(external_kbnSharedDeps_React_.useMemo)(()=>{const firstRow=Object(external_kbnSharedDeps_Lodash_.first)(series.rows),lastRow=Object(external_kbnSharedDeps_Lodash_.last)(series.rows);return firstRow&&lastRow?Object(external_kbnSharedDeps_ElasticCharts_.niceTimeFormatter)([firstRow.timestamp,lastRow.timestamp]):value=>""+value},[series.rows]),tooltipProps={headerFormatter:Object(external_kbnSharedDeps_React_.useCallback)(data=>external_kbnSharedDeps_Moment_default()(data.value).format(dateFormat||"Y-MM-DD HH:mm:ss.SSS"),[dateFormat])},yAxisFormater=Object(external_kbnSharedDeps_React_.useCallback)(Object(create_formatter_for_metric.a)(Object(external_kbnSharedDeps_Lodash_.first)(metrics)),[options]),dataDomain=Object(calculate_domain.a)(series,metrics,chartOptions.stack),domain=chartOptions.yAxisMode===use_metrics_explorer_options.d.fromZero?{...dataDomain,min:0}:dataDomain;return external_kbnSharedDeps_React_default.a.createElement("div",{style:{padding:24}},options.groupBy?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(ChartTitleContainer,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:title,anchorClassName:"metricsExplorerTitleAnchor"},external_kbnSharedDeps_React_default.a.createElement(ChartTitle,{series:series}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(MetricsExplorerChartContextMenu,{timeRange:timeRange,options:options,chartOptions:chartOptions,series:series,onFilter:onFilter,source:source,uiCapabilities:uiCapabilities})))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(MetricsExplorerChartContextMenu,{options:options,chartOptions:chartOptions,series:series,source:source,timeRange:timeRange,uiCapabilities:uiCapabilities}))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"infrastructureChart",style:{height:height,width:width}},metrics.length&&series.rows.length>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Chart,null,metrics.map((metric,id)=>external_kbnSharedDeps_React_default.a.createElement(series_chart.a,{type:chartOptions.type,key:id,metric:metric,id:id,series:series,stack:chartOptions.stack})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Axis,{id:"timestamp",position:external_kbnSharedDeps_ElasticCharts_.Position.Bottom,showOverlappingTicks:!0,tickFormat:dateFormatter}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Axis,{id:"values",position:external_kbnSharedDeps_ElasticCharts_.Position.Left,tickFormat:yAxisFormater,domain:domain}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Settings,{tooltip:tooltipProps,onBrushEnd:({x:x})=>{if(!x)return;const[from,to]=x;onTimeChange(external_kbnSharedDeps_Moment_default()(from).toISOString(),external_kbnSharedDeps_Moment_default()(to).toISOString())},theme:getChartTheme(isDarkMode)})):options.metrics.length>0?external_kbnSharedDeps_React_default.a.createElement(MetricsExplorerEmptyChart,null):external_kbnSharedDeps_React_default.a.createElement(MetricsExplorerNoMetrics,null)))},ChartTitleContainer=common_.euiStyled.div`
  width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  text-align: left;
  flex: 1 1 auto;
  margin: 12px;
`,MetricsExplorerCharts=({loading:loading,data:data,onLoadMore:onLoadMore,options:options,chartOptions:chartOptions,onRefetch:onRefetch,onFilter:onFilter,source:source,timeRange:timeRange,onTimeChange:onTimeChange})=>{if(loading)return external_kbnSharedDeps_React_default.a.createElement(components_loading.a,{height:800,width:"100%",text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.loadingCharts",{defaultMessage:"Loading charts"})});if(!data||0===data.series.length)return external_kbnSharedDeps_React_default.a.createElement(no_data.a,{titleText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.noDataTitle",{defaultMessage:"There is no data to display."}),bodyText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.noDataBodyText",{defaultMessage:"Try adjusting your time, filters or group by settings."}),refetchText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.noDataRefetchText",{defaultMessage:"Check for new data"}),testString:"metrics-explorer-no-data",onRefetch:onRefetch});const and=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.andLabel",{defaultMessage:'" and "'});return external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:"100%"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGrid,{gutterSize:"s",columns:1===data.series.length?1:3},data.series.map(series=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{key:series.id,style:{minWidth:0}},external_kbnSharedDeps_React_default.a.createElement(MetricsExplorerChart,{key:"chart-"+series.id,onFilter:onFilter,options:options,chartOptions:chartOptions,title:options.groupBy?series.id:null,height:data.series.length>1?200:400,series:series,source:source,timeRange:timeRange,onTimeChange:onTimeChange})))),data.series.length>1?external_kbnSharedDeps_React_default.a.createElement("div",{style:{textAlign:"center",marginBottom:16}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHorizontalRule,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metricsExplorer.footerPaginationMessage",defaultMessage:'Displaying {length} of {total} charts grouped by "{groupBy}".',values:{length:data.series.length,total:data.pageInfo.total,groupBy:Array.isArray(options.groupBy)?options.groupBy.join(and):options.groupBy}}))),data.pageInfo.afterKey?external_kbnSharedDeps_React_default.a.createElement("div",{style:{margin:"16px 0"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{isLoading:loading,size:"s",onClick:()=>onLoadMore(data.pageInfo.afterKey||null)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metricsExplorer.loadMoreChartsButton",defaultMessage:"Load More Charts"}))):null):null)};var data_public_=__webpack_require__(63),kuery_bar=__webpack_require__(162);const MetricsExplorerMetrics=({options:options,onChange:onChange,fields:fields,autoFocus:autoFocus=!1})=>{const colors=Object.keys(color_palette.a),[shouldFocus,setShouldFocus]=Object(external_kbnSharedDeps_React_.useState)(autoFocus),autoFocusInputElement=Object(external_kbnSharedDeps_React_.useCallback)(inputElement=>{inputElement&&shouldFocus&&(inputElement.focus(),setShouldFocus(!1))},[shouldFocus]),handleChange=Object(external_kbnSharedDeps_React_.useCallback)(selectedOptions=>{onChange(selectedOptions.map((opt,index)=>({aggregation:options.aggregation,field:opt.value,color:colors[index]})))},[onChange,options.aggregation,colors]),comboOptions=fields.map(field=>({label:field.name,value:field.name})),selectedOptions=options.metrics.filter(m=>"count"!==m.aggregation).map(metric=>({label:metric.field||"",value:metric.field||"",color:Object(color_palette.b)(metric.color||color_palette.a.color0)})),placeholderText=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.metricComboBoxPlaceholder",{defaultMessage:"choose a metric to plot"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiComboBox,{"aria-label":placeholderText,isDisabled:"count"===options.aggregation,placeholder:placeholderText,fullWidth:!0,options:comboOptions,selectedOptions:selectedOptions,onChange:handleChange,isClearable:!0,inputRef:autoFocusInputElement})};var group_by=__webpack_require__(204),metrics_explorer=__webpack_require__(98);const MetricsExplorerAggregationPicker=({options:options,onChange:onChange})=>{const AGGREGATION_LABELS={avg:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.aggregationLables.avg",{defaultMessage:"Average"}),sum:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.aggregationLables.sum",{defaultMessage:"Sum"}),max:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.aggregationLables.max",{defaultMessage:"Max"}),min:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.aggregationLables.min",{defaultMessage:"Min"}),cardinality:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.aggregationLables.cardinality",{defaultMessage:"Cardinality"}),rate:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.aggregationLables.rate",{defaultMessage:"Rate"}),p95:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.aggregationLables.p95",{defaultMessage:"95th Percentile"}),p99:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.aggregationLables.p99",{defaultMessage:"99th Percentile"}),count:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.aggregationLables.count",{defaultMessage:"Document count"})},handleChange=Object(external_kbnSharedDeps_React_.useCallback)(e=>{const aggregation=metrics_explorer.c.is(e.target.value)&&e.target.value||"avg";onChange(aggregation)},[onChange]),placeholder=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.aggregationSelectLabel",{defaultMessage:"Select an aggregation"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{"aria-label":placeholder,placeholder:placeholder,fullWidth:!0,value:options.aggregation,options:metrics_explorer.a.map(k=>({text:AGGREGATION_LABELS[k],value:k})),onChange:handleChange})},MetricsExplorerChartOptions=({chartOptions:chartOptions,onChange:onChange})=>{const[isPopoverOpen,setPopoverState]=Object(external_kbnSharedDeps_React_.useState)(!1),handleClosePopover=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setPopoverState(!1)},[]),handleOpenPopover=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setPopoverState(!0)},[]),button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{iconSide:"left",iconType:"eye",onClick:handleOpenPopover},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metricsExplorer.customizeChartOptions",defaultMessage:"Customize"})),yAxisRadios=[{id:use_metrics_explorer_options.d.auto,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.chartOptions.autoLabel",{defaultMessage:"Automatic (min to max)"})},{id:use_metrics_explorer_options.d.fromZero,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.chartOptions.fromZeroLabel",{defaultMessage:"From zero (0 to max)"})}],typeRadios=[{id:use_metrics_explorer_options.b.line,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.chartOptions.lineLabel",{defaultMessage:"Line"})},{id:use_metrics_explorer_options.b.area,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.chartOptions.areaLabel",{defaultMessage:"Area"})},{id:use_metrics_explorer_options.b.bar,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.chartOptions.barLabel",{defaultMessage:"Bar"})}],handleYAxisChange=Object(external_kbnSharedDeps_React_.useCallback)(id=>{onChange({...chartOptions,yAxisMode:id})},[chartOptions,onChange]),handleTypeChange=Object(external_kbnSharedDeps_React_.useCallback)(id=>{onChange({...chartOptions,type:id})},[chartOptions,onChange]),handleStackChange=Object(external_kbnSharedDeps_React_.useCallback)(e=>{onChange({...chartOptions,stack:e.target.checked})},[chartOptions,onChange]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{id:"MetricExplorerChartOptionsPopover",button:button,isOpen:isPopoverOpen,closePopover:handleClosePopover},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiForm,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{display:"rowCompressed",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.chartOptions.typeLabel",{defaultMessage:"Chart style"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiRadioGroup,{compressed:!0,options:typeRadios,idSelected:chartOptions.type,onChange:handleTypeChange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{display:"rowCompressed",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.chartOptions.stackLabel",{defaultMessage:"Stack series"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.chartOptions.stackSwitchLabel",{defaultMessage:"Stack"}),checked:chartOptions.stack,onChange:handleStackChange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{display:"rowCompressed",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.chartOptions.yAxisDomainLabel",{defaultMessage:"Y Axis Domain"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiRadioGroup,{compressed:!0,options:yAxisRadios,idSelected:chartOptions.yAxisMode,onChange:handleYAxisChange}))))},SavedViewCreateModal=({close:close,save:save,isInvalid:isInvalid})=>{const[viewName,setViewName]=Object(external_kbnSharedDeps_React_.useState)(""),[includeTime,setIncludeTime]=Object(external_kbnSharedDeps_React_.useState)(!1),onCheckChange=Object(external_kbnSharedDeps_React_.useCallback)(e=>setIncludeTime(e.target.checked),[]),textChange=Object(external_kbnSharedDeps_React_.useCallback)(e=>setViewName(e.target.value),[]),saveView=Object(external_kbnSharedDeps_React_.useCallback)(()=>{save(viewName,includeTime)},[includeTime,save,viewName]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModal,{onClose:close},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeaderTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Save View",id:"xpack.infra.waffle.savedView.createHeader"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{isInvalid:isInvalid,placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.waffle.savedViews.viewNamePlaceholder",{defaultMessage:"Name"}),"data-test-subj":"savedViewViweName",value:viewName,onChange:textChange,"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.waffle.savedViews.viewNamePlaceholder",{defaultMessage:"Name"})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xl"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{id:"saved-view-save-time-checkbox",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Store time with view",id:"xpack.infra.waffle.savedViews.includeTimeFilterLabel"}),checked:includeTime,onChange:onCheckChange}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs",grow:!1,style:{maxWidth:400}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"This changes the time filter to the currently selected time each time the view is loaded",id:"xpack.infra.waffle.savedViews.includeTimeHelpText"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalFooter,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:close},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Cancel",id:"xpack.infra.waffle.savedViews.cancelButton"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{color:"primary",disabled:!viewName,fill:!0,onClick:saveView,"data-test-subj":"createSavedViewButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Save",id:"xpack.infra.waffle.savedViews.saveButton"}))))};function SavedViewUpdateModal({close:close,save:save,isInvalid:isInvalid,currentView:currentView}){const[viewName,setViewName]=Object(external_kbnSharedDeps_React_.useState)(currentView.name),[includeTime,setIncludeTime]=Object(external_kbnSharedDeps_React_.useState)(!1),onCheckChange=Object(external_kbnSharedDeps_React_.useCallback)(e=>setIncludeTime(e.target.checked),[]),textChange=Object(external_kbnSharedDeps_React_.useCallback)(e=>setViewName(e.target.value),[]),saveView=Object(external_kbnSharedDeps_React_.useCallback)(()=>{save(viewName,includeTime)},[includeTime,save,viewName]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModal,{onClose:close},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeaderTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Update View",id:"xpack.infra.waffle.savedView.updateHeader"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{isInvalid:isInvalid,placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.waffle.savedViews.viewNamePlaceholder",{defaultMessage:"Name"}),"data-test-subj":"savedViewViweName",value:viewName,onChange:textChange,"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.waffle.savedViews.viewNamePlaceholder",{defaultMessage:"Name"})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xl"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{id:"saved-view-save-time-checkbox",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Store time with view",id:"xpack.infra.waffle.savedViews.includeTimeFilterLabel"}),checked:includeTime,onChange:onCheckChange}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs",grow:!1,style:{maxWidth:400}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"This changes the time filter to the currently selected time each time the view is loaded",id:"xpack.infra.waffle.savedViews.includeTimeHelpText"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalFooter,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:close},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Cancel",id:"xpack.infra.waffle.savedViews.cancelButton"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{color:"primary",disabled:!viewName,fill:!0,onClick:saveView,"data-test-subj":"updateSavedViewButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Save",id:"xpack.infra.waffle.savedViews.saveButton"}))))}const DeleteConfimation=props=>{const[confirmVisible,setConfirmVisible]=Object(external_kbnSharedDeps_React_.useState)(!1),showConfirm=Object(external_kbnSharedDeps_React_.useCallback)(()=>setConfirmVisible(!0),[]),hideConfirm=Object(external_kbnSharedDeps_React_.useCallback)(()=>setConfirmVisible(!1),[]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,confirmVisible&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:hideConfirm,"data-test-subj":"hideConfirm"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"cancel",id:"xpack.infra.waffle.savedViews.cancel"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{disabled:props.isDisabled,fill:!0,iconType:"trash",color:"danger",onClick:props.confirmedAction,"data-test-subj":"showConfirm"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Delete view?",id:"xpack.infra.openView.actionNames.deleteConfirmation"}))),!confirmVisible&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{iconType:"trash",color:"danger",onClick:showConfirm}))};function SavedViewManageViewsFlyout({close:close,views:views,defaultViewId:defaultViewId,setView:setView,makeDefault:makeDefault,deleteView:deleteView,loading:loading,sourceIsLoading:sourceIsLoading}){const[inProgressView,setInProgressView]=Object(external_kbnSharedDeps_React_.useState)(null),renderName=Object(external_kbnSharedDeps_React_.useCallback)((name,item)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:()=>{setView(item),close()}},name),[setView,close]),renderDeleteAction=Object(external_kbnSharedDeps_React_.useCallback)(item=>"0"===item.id?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null):external_kbnSharedDeps_React_default.a.createElement(DeleteConfimation,{isDisabled:item.isDefault,confirmedAction:()=>{deleteView(item.id)}}),[deleteView]),renderMakeDefaultAction=Object(external_kbnSharedDeps_React_.useCallback)(item=>{const isDefault=item.id===defaultViewId;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{isLoading:inProgressView===item.id&&sourceIsLoading,iconType:isDefault?"starFilled":"starEmpty",onClick:()=>{setInProgressView(item.id),makeDefault(item.id)}}))},[makeDefault,defaultViewId,sourceIsLoading,inProgressView]),columns=[{field:"name",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.openView.columnNames.name",{defaultMessage:"Name"}),sortable:!0,truncateText:!0,render:renderName},{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.openView.columnNames.actions",{defaultMessage:"Actions"}),actions:[{available:()=>!0,render:renderMakeDefaultAction},{available:item=>!0,render:renderDeleteAction}]}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPortal,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyout,{onClose:close,"data-test-subj":"loadViewsFlyout"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Manage saved views",id:"xpack.infra.openView.flyoutHeader"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiInMemoryTable,{items:views,columns:columns,loading:loading,search:!0,pagination:!0,sorting:!0})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalFooter,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{"data-test-subj":"cancelSavedViewModal",onClick:close},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Cancel",id:"xpack.infra.openView.cancelButton"})))))}const createInputFieldProps=({errors:errors,name:name,onChange:onChange,value:value})=>({error:errors,isInvalid:errors.length>0,name:name,onChange:evt=>onChange(evt.currentTarget.value),value:value}),validateInputFieldNotEmpty=value=>""===value?[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.fieldEmptyErrorMessage",defaultMessage:"The field must not be empty"})]:[],defaultFormState={name:"",description:"",metricAlias:"",containerField:"",hostField:"",podField:"",tiebreakerField:"",timestampField:"",anomalyThreshold:0},useSourceConfigurationFormState=configuration=>{const indicesConfigurationFormState=(({initialFormState:initialFormState=defaultFormState})=>{const[formStateChanges,setFormStateChanges]=Object(external_kbnSharedDeps_React_.useState)({}),resetForm=Object(external_kbnSharedDeps_React_.useCallback)(()=>setFormStateChanges({}),[]),formState=Object(external_kbnSharedDeps_React_.useMemo)(()=>({...initialFormState,...formStateChanges}),[initialFormState,formStateChanges]),nameFieldProps=Object(external_kbnSharedDeps_React_.useMemo)(()=>createInputFieldProps({errors:validateInputFieldNotEmpty(formState.name),name:"name",onChange:name=>setFormStateChanges(changes=>({...changes,name:name})),value:formState.name}),[formState.name]),metricAliasFieldProps=Object(external_kbnSharedDeps_React_.useMemo)(()=>createInputFieldProps({errors:validateInputFieldNotEmpty(formState.metricAlias),name:"metricAlias",onChange:metricAlias=>setFormStateChanges(changes=>({...changes,metricAlias:metricAlias})),value:formState.metricAlias}),[formState.metricAlias]),containerFieldFieldProps=Object(external_kbnSharedDeps_React_.useMemo)(()=>createInputFieldProps({errors:validateInputFieldNotEmpty(formState.containerField),name:"containerField",onChange:containerField=>setFormStateChanges(changes=>({...changes,containerField:containerField})),value:formState.containerField}),[formState.containerField]),hostFieldFieldProps=Object(external_kbnSharedDeps_React_.useMemo)(()=>createInputFieldProps({errors:validateInputFieldNotEmpty(formState.hostField),name:"hostField",onChange:hostField=>setFormStateChanges(changes=>({...changes,hostField:hostField})),value:formState.hostField}),[formState.hostField]),podFieldFieldProps=Object(external_kbnSharedDeps_React_.useMemo)(()=>createInputFieldProps({errors:validateInputFieldNotEmpty(formState.podField),name:"podField",onChange:podField=>setFormStateChanges(changes=>({...changes,podField:podField})),value:formState.podField}),[formState.podField]),tiebreakerFieldFieldProps=Object(external_kbnSharedDeps_React_.useMemo)(()=>createInputFieldProps({errors:validateInputFieldNotEmpty(formState.tiebreakerField),name:"tiebreakerField",onChange:tiebreakerField=>setFormStateChanges(changes=>({...changes,tiebreakerField:tiebreakerField})),value:formState.tiebreakerField}),[formState.tiebreakerField]),timestampFieldFieldProps=Object(external_kbnSharedDeps_React_.useMemo)(()=>createInputFieldProps({errors:validateInputFieldNotEmpty(formState.timestampField),name:"timestampField",onChange:timestampField=>setFormStateChanges(changes=>({...changes,timestampField:timestampField})),value:formState.timestampField}),[formState.timestampField]),anomalyThresholdFieldProps=Object(external_kbnSharedDeps_React_.useMemo)(()=>(({errors:errors,name:name,onChange:onChange,value:value})=>({error:errors,isInvalid:errors.length>0,name:name,onChange:(evt,isValid)=>onChange(+evt.currentTarget.value,isValid),value:value}))({errors:validateInputFieldNotEmpty(formState.anomalyThreshold),name:"anomalyThreshold",onChange:anomalyThreshold=>setFormStateChanges(changes=>({...changes,anomalyThreshold:anomalyThreshold})),value:formState.anomalyThreshold}),[formState.anomalyThreshold]),fieldProps=Object(external_kbnSharedDeps_React_.useMemo)(()=>({name:nameFieldProps,metricAlias:metricAliasFieldProps,containerField:containerFieldFieldProps,hostField:hostFieldFieldProps,podField:podFieldFieldProps,tiebreakerField:tiebreakerFieldFieldProps,timestampField:timestampFieldFieldProps,anomalyThreshold:anomalyThresholdFieldProps}),[nameFieldProps,metricAliasFieldProps,containerFieldFieldProps,hostFieldFieldProps,podFieldFieldProps,tiebreakerFieldFieldProps,timestampFieldFieldProps,anomalyThresholdFieldProps]),errors=Object(external_kbnSharedDeps_React_.useMemo)(()=>Object.values(fieldProps).reduce((accumulatedErrors,{error:error})=>[...accumulatedErrors,...error],[]),[fieldProps]),isFormValid=Object(external_kbnSharedDeps_React_.useMemo)(()=>errors.length<=0,[errors]),isFormDirty=Object(external_kbnSharedDeps_React_.useMemo)(()=>Object.keys(formStateChanges).length>0,[formStateChanges]);return{errors:errors,fieldProps:fieldProps,formState:formState,formStateChanges:formStateChanges,isFormDirty:isFormDirty,isFormValid:isFormValid,resetForm:resetForm}})({initialFormState:Object(external_kbnSharedDeps_React_.useMemo)(()=>configuration?{name:configuration.name,description:configuration.description,metricAlias:configuration.metricAlias,containerField:configuration.fields.container,hostField:configuration.fields.host,podField:configuration.fields.pod,tiebreakerField:configuration.fields.tiebreaker,timestampField:configuration.fields.timestamp,anomalyThreshold:configuration.anomalyThreshold}:void 0,[configuration])}),errors=Object(external_kbnSharedDeps_React_.useMemo)(()=>[...indicesConfigurationFormState.errors],[indicesConfigurationFormState.errors]),resetForm=Object(external_kbnSharedDeps_React_.useCallback)(()=>{indicesConfigurationFormState.resetForm()},[indicesConfigurationFormState]),isFormDirty=Object(external_kbnSharedDeps_React_.useMemo)(()=>indicesConfigurationFormState.isFormDirty,[indicesConfigurationFormState.isFormDirty]),isFormValid=Object(external_kbnSharedDeps_React_.useMemo)(()=>indicesConfigurationFormState.isFormValid,[indicesConfigurationFormState.isFormValid]);return{errors:errors,formState:Object(external_kbnSharedDeps_React_.useMemo)(()=>({name:indicesConfigurationFormState.formState.name,description:indicesConfigurationFormState.formState.description,metricAlias:indicesConfigurationFormState.formState.metricAlias,fields:{container:indicesConfigurationFormState.formState.containerField,host:indicesConfigurationFormState.formState.hostField,pod:indicesConfigurationFormState.formState.podField,tiebreaker:indicesConfigurationFormState.formState.tiebreakerField,timestamp:indicesConfigurationFormState.formState.timestampField},anomalyThreshold:indicesConfigurationFormState.formState.anomalyThreshold}),[indicesConfigurationFormState.formState]),formStateChanges:Object(external_kbnSharedDeps_React_.useMemo)(()=>({name:indicesConfigurationFormState.formStateChanges.name,description:indicesConfigurationFormState.formStateChanges.description,metricAlias:indicesConfigurationFormState.formStateChanges.metricAlias,fields:{container:indicesConfigurationFormState.formStateChanges.containerField,host:indicesConfigurationFormState.formStateChanges.hostField,pod:indicesConfigurationFormState.formStateChanges.podField,tiebreaker:indicesConfigurationFormState.formStateChanges.tiebreakerField,timestamp:indicesConfigurationFormState.formStateChanges.timestampField},anomalyThreshold:indicesConfigurationFormState.formStateChanges.anomalyThreshold}),[indicesConfigurationFormState.formStateChanges]),isFormDirty:isFormDirty,isFormValid:isFormValid,indicesConfigurationProps:indicesConfigurationFormState.fieldProps,resetForm:resetForm}},savedViewUrlStateRT=lib.type({viewId:lib.string}),DEFAULT_SAVED_VIEW_STATE={viewId:"0"},SavedView=constate_cjs_default()(props=>{const{source:source,isLoading:sourceIsLoading,sourceExists:sourceExists,createSourceConfiguration:createSourceConfiguration,updateSourceConfiguration:updateSourceConfiguration}=Object(external_kbnSharedDeps_React_.useContext)(metrics_source.a.Context),{viewType:viewType,defaultViewState:defaultViewState}=props,{data:data,loading:loading,find:find,error:errorOnFind,hasView:hasView}=(type=>{const kibana=Object(kibanaReact_public_.useKibana)(),[data,setData]=Object(external_kbnSharedDeps_React_.useState)(null),[error,setError]=Object(external_kbnSharedDeps_React_.useState)(null),[loading,setLoading]=Object(external_kbnSharedDeps_React_.useState)(!1);return{hasView:async name=>{var _kibana$services$save2;const savedObjectsClient=null===(_kibana$services$save2=kibana.services.savedObjects)||void 0===_kibana$services$save2?void 0:_kibana$services$save2.client;if(!savedObjectsClient)throw new Error("Saved objects client is unavailable");return(await savedObjectsClient.find({type:type})).savedObjects.find(o=>o.attributes.name===name)},data:data,loading:loading,error:error,find:Object(external_kbnSharedDeps_React_.useCallback)((query,searchFields=[])=>{setLoading(!0);(async()=>{try{var _kibana$services$save;const savedObjectsClient=null===(_kibana$services$save=kibana.services.savedObjects)||void 0===_kibana$services$save?void 0:_kibana$services$save.client;if(!savedObjectsClient)throw new Error("Saved objects client is unavailable");const d=await savedObjectsClient.find({type:type,search:query,searchFields:searchFields});setError(null),setLoading(!1),setData(d)}catch(e){setLoading(!1),setError(e)}})()},[type,kibana.services.savedObjects])}})(viewType),[urlState,setUrlState]=Object(use_url_state.b)({defaultState:DEFAULT_SAVED_VIEW_STATE,decodeUrlState:saved_view_decodeUrlState,encodeUrlState:saved_view_encodeUrlState,urlStateKey:"savedView"}),[shouldLoadDefault]=Object(external_kbnSharedDeps_React_.useState)(props.shouldLoadDefault),[currentView,setCurrentView]=Object(external_kbnSharedDeps_React_.useState)(null),[loadingDefaultView,setLoadingDefaultView]=Object(external_kbnSharedDeps_React_.useState)(null),{create:create,error:errorOnCreate,data:createdViewData,createdId:createdId}=(type=>{const kibana=Object(kibanaReact_public_.useKibana)(),[data,setData]=Object(external_kbnSharedDeps_React_.useState)(null),[createdId,setCreatedId]=Object(external_kbnSharedDeps_React_.useState)(null),[error,setError]=Object(external_kbnSharedDeps_React_.useState)(null),[loading,setLoading]=Object(external_kbnSharedDeps_React_.useState)(!1);return{data:data,loading:loading,error:error,create:Object(external_kbnSharedDeps_React_.useCallback)((attributes,options)=>{setLoading(!0);(async()=>{try{var _kibana$services$save;const savedObjectsClient=null===(_kibana$services$save=kibana.services.savedObjects)||void 0===_kibana$services$save?void 0:_kibana$services$save.client;if(!savedObjectsClient)throw new Error("Saved objects client is unavailable");const d=await savedObjectsClient.create(type,attributes,options);setCreatedId(d.id),setError(null),setData(d),setLoading(!1)}catch(e){setLoading(!1),setError(e)}})()},[type,kibana.services.savedObjects]),createdId:createdId}})(viewType),{update:update,error:errorOnUpdate,data:updatedViewData,updatedId:updatedId}=(type=>{const kibana=Object(kibanaReact_public_.useKibana)(),[data,setData]=Object(external_kbnSharedDeps_React_.useState)(null),[updatedId,setUpdatedId]=Object(external_kbnSharedDeps_React_.useState)(null),[error,setError]=Object(external_kbnSharedDeps_React_.useState)(null),[loading,setLoading]=Object(external_kbnSharedDeps_React_.useState)(!1);return{data:data,loading:loading,error:error,update:Object(external_kbnSharedDeps_React_.useCallback)((id,attributes,options)=>{setLoading(!0);(async()=>{try{var _kibana$services$save;const savedObjectsClient=null===(_kibana$services$save=kibana.services.savedObjects)||void 0===_kibana$services$save?void 0:_kibana$services$save.client;if(!savedObjectsClient)throw new Error("Saved objects client is unavailable");const d=await savedObjectsClient.update(type,id,attributes,options);setUpdatedId(d.id),setError(null),setData(d),setLoading(!1)}catch(e){setLoading(!1),setError(e)}})()},[type,kibana.services.savedObjects]),updatedId:updatedId}})(viewType),{deleteObject:deleteObject,deletedId:deletedId}=(type=>{const kibana=Object(kibanaReact_public_.useKibana)(),[error,setError]=Object(external_kbnSharedDeps_React_.useState)(null),[loading,setLoading]=Object(external_kbnSharedDeps_React_.useState)(!1),[deletedId,setDeletedId]=Object(external_kbnSharedDeps_React_.useState)(null);return{loading:loading,error:error,deleteObject:Object(external_kbnSharedDeps_React_.useCallback)(id=>{setLoading(!0);(async()=>{try{var _kibana$services$save;await(null===(_kibana$services$save=kibana.services.savedObjects)||void 0===_kibana$services$save?void 0:_kibana$services$save.client.delete(type,id)),setError(null),setDeletedId(id),setLoading(!1)}catch(e){setLoading(!1),setError(e)}})()},[type,kibana.services.savedObjects]),deletedId:deletedId}})(viewType),{getObject:getObject,data:currentViewSavedObject}=(type=>{const kibana=Object(kibanaReact_public_.useKibana)(),[data,setData]=Object(external_kbnSharedDeps_React_.useState)(null),[error,setError]=Object(external_kbnSharedDeps_React_.useState)(null),[loading,setLoading]=Object(external_kbnSharedDeps_React_.useState)(!1);return{data:data,loading:loading,error:error,getObject:Object(external_kbnSharedDeps_React_.useCallback)(id=>{setLoading(!0);(async()=>{try{var _kibana$services$save;const savedObjectsClient=null===(_kibana$services$save=kibana.services.savedObjects)||void 0===_kibana$services$save?void 0:_kibana$services$save.client;if(!savedObjectsClient)throw new Error("Saved objects client is unavailable");const d=await savedObjectsClient.get(type,id);setError(null),setLoading(!1),setData(d)}catch(e){setLoading(!1),setError(e)}})()},[type,kibana.services.savedObjects])}})(viewType),[createError,setCreateError]=Object(external_kbnSharedDeps_React_.useState)(null);Object(external_kbnSharedDeps_React_.useEffect)(()=>setCreateError(errorOnCreate),[errorOnCreate]);const deleteView=Object(external_kbnSharedDeps_React_.useCallback)(id=>deleteObject(id),[deleteObject]),formState=useSourceConfigurationFormState(source&&source.configuration),defaultViewFieldName=Object(external_kbnSharedDeps_React_.useMemo)(()=>"inventory-view"===viewType?"inventoryDefaultView":"metricsExplorerDefaultView",[viewType]),makeDefault=Object(external_kbnSharedDeps_React_.useCallback)(async id=>{sourceExists?await updateSourceConfiguration({...formState.formStateChanges,[defaultViewFieldName]:id}):await createSourceConfiguration({...formState.formState,[defaultViewFieldName]:id})},[formState.formState,formState.formStateChanges,sourceExists,defaultViewFieldName,createSourceConfiguration,updateSourceConfiguration]),saveView=Object(external_kbnSharedDeps_React_.useCallback)(d=>{setCreateError(null),(async()=>{await hasView(d.name)?setCreateError(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.savedView.errorOnCreate.duplicateViewName",{defaultMessage:"A view with that name already exists."})):create(d)})()},[create,hasView]),updateView=Object(external_kbnSharedDeps_React_.useCallback)((id,d)=>{setCreateError(null),(async()=>{const view=await hasView(d.name);view&&view.id!==id?setCreateError(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.savedView.errorOnCreate.duplicateViewName",{defaultMessage:"A view with that name already exists."})):update(id,d)})()},[update,hasView]),defaultViewId=Object(external_kbnSharedDeps_React_.useMemo)(()=>source&&source.configuration?"inventoryDefaultView"===defaultViewFieldName?source.configuration.inventoryDefaultView:"metricsExplorerDefaultView"===defaultViewFieldName?source.configuration.metricsExplorerDefaultView:"":"",[source,defaultViewFieldName]),mapToView=Object(external_kbnSharedDeps_React_.useCallback)(o=>({...o.attributes,id:o.id,isDefault:defaultViewId===o.id}),[defaultViewId]),savedObjects=Object(external_kbnSharedDeps_React_.useMemo)(()=>data?data.savedObjects:[],[data]),views=Object(external_kbnSharedDeps_React_.useMemo)(()=>{const items=[{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.savedView.defaultViewNameHosts",{defaultMessage:"Default view"}),id:"0",isDefault:!defaultViewId||"0"===defaultViewId,...defaultViewState}];return savedObjects.forEach(o=>o.type===viewType&&items.push(mapToView(o))),items},[defaultViewState,savedObjects,viewType,defaultViewId,mapToView]),createdView=Object(external_kbnSharedDeps_React_.useMemo)(()=>createdViewData?mapToView(createdViewData):null,[createdViewData,mapToView]),updatedView=Object(external_kbnSharedDeps_React_.useMemo)(()=>updatedViewData?mapToView(updatedViewData):null,[updatedViewData,mapToView]),loadDefaultView=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setLoadingDefaultView(!0),getObject(defaultViewId)},[setLoadingDefaultView,getObject,defaultViewId]);Object(external_kbnSharedDeps_React_.useEffect)(()=>{currentViewSavedObject&&(setCurrentView(mapToView(currentViewSavedObject)),setLoadingDefaultView(!1))},[currentViewSavedObject,defaultViewId,mapToView]);const setDefault=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setCurrentView({name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.savedView.defaultViewNameHosts",{defaultMessage:"Default view"}),id:"0",isDefault:!defaultViewId||"0"===defaultViewId,...defaultViewState})},[setCurrentView,defaultViewId,defaultViewState]),loadDefaultViewIfSet=Object(external_kbnSharedDeps_React_.useCallback)(()=>{"0"!==defaultViewId?loadDefaultView():(setDefault(),setLoadingDefaultView(!1))},[defaultViewId,loadDefaultView,setDefault,setLoadingDefaultView]);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{loadingDefaultView||currentView||!shouldLoadDefault||loadDefaultViewIfSet()},[loadDefaultViewIfSet,loadingDefaultView,currentView,shouldLoadDefault]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{currentView&&urlState.viewId!==currentView.id&&data&&setUrlState({viewId:currentView.id})},[urlState,setUrlState,currentView,defaultViewId,data]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{if(!currentView&&!loading&&data){const viewToSet=views.find(v=>v.id===urlState.viewId);viewToSet?setCurrentView(viewToSet):loadDefaultViewIfSet()}},[loading,currentView,data,views,setCurrentView,loadDefaultViewIfSet,urlState.viewId]),{views:views,saveView:saveView,defaultViewId:defaultViewId,loading:loading,updateView:updateView,updatedView:updatedView,updatedId:updatedId,deletedId:deletedId,createdId:createdId,createdView:createdView,errorOnUpdate:errorOnUpdate,errorOnFind:errorOnFind,errorOnCreate:createError,shouldLoadDefault:shouldLoadDefault,makeDefault:makeDefault,sourceIsLoading:sourceIsLoading,deleteView:deleteView,loadingDefaultView:loadingDefaultView,setCurrentView:setCurrentView,currentView:currentView,loadDefaultView:loadDefaultView,find:find}}),[SavedViewProvider,useSavedViewContext]=SavedView,saved_view_encodeUrlState=state=>savedViewUrlStateRT.encode(state),saved_view_decodeUrlState=value=>Object(pipeable.pipe)(savedViewUrlStateRT.decode(value),Object(Either.fold)(Object(lib_function.constant)(void 0),lib_function.identity));function SavedViewListModal({close:close,views:views,setView:setView,currentView:currentView}){const[options,setOptions]=Object(external_kbnSharedDeps_React_.useState)(null),onChange=Object(external_kbnSharedDeps_React_.useCallback)(opts=>{setOptions(opts)},[]),loadView=Object(external_kbnSharedDeps_React_.useCallback)(()=>{if(!options)return void close();const selected=options.find(o=>o.checked);selected?(setView(views.find(v=>v.id===selected.key)),close()):close()},[options,views,setView,close]),defaultOptions=Object(external_kbnSharedDeps_React_.useMemo)(()=>views.map(v=>({label:v.name,key:v.id,checked:(null==currentView?void 0:currentView.id)===v.id?"on":void 0})),[views,currentView]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModal,{onClose:close},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalHeaderTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Select a view to load",id:"xpack.infra.waffle.savedView.selectViewHeader"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelectable,{singleSelection:!0,searchable:!0,options:options||defaultOptions,onChange:onChange,searchProps:{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.savedView.searchPlaceholder",{defaultMessage:"Search for saved views"})},listProps:{bordered:!0}},(list,search)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,search,external_kbnSharedDeps_React_default.a.createElement("div",{style:{marginTop:20}},list)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiModalFooter,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{"data-test-subj":"cancelSavedViewModal",onClick:close},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Cancel",id:"xpack.infra.openView.cancelButton"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{fill:!0,color:"primary","data-test-subj":"loadSavedViewModal",onClick:loadView},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Load view",id:"xpack.infra.openView.loadButton"}))))}function SavedViewsToolbarControls(props){const kibana=Object(kibanaReact_public_.useKibana)(),{views:views,saveView:saveView,loading:loading,updateView:updateView,deletedId:deletedId,deleteView:deleteView,defaultViewId:defaultViewId,makeDefault:makeDefault,sourceIsLoading:sourceIsLoading,find:find,errorOnFind:errorOnFind,errorOnCreate:errorOnCreate,createdView:createdView,updatedView:updatedView,currentView:currentView,setCurrentView:setCurrentView}=useSavedViewContext(),[modalOpen,setModalOpen]=Object(external_kbnSharedDeps_React_.useState)(!1),[viewListModalOpen,setViewListModalOpen]=Object(external_kbnSharedDeps_React_.useState)(!1),[isInvalid,setIsInvalid]=Object(external_kbnSharedDeps_React_.useState)(!1),[isSavedViewMenuOpen,setIsSavedViewMenuOpen]=Object(external_kbnSharedDeps_React_.useState)(!1),[createModalOpen,setCreateModalOpen]=Object(external_kbnSharedDeps_React_.useState)(!1),[updateModalOpen,setUpdateModalOpen]=Object(external_kbnSharedDeps_React_.useState)(!1),hideSavedViewMenu=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setIsSavedViewMenuOpen(!1)},[setIsSavedViewMenuOpen]),openViewListModal=Object(external_kbnSharedDeps_React_.useCallback)(()=>{hideSavedViewMenu(),find(),setViewListModalOpen(!0)},[setViewListModalOpen,find,hideSavedViewMenu]),closeViewListModal=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setViewListModalOpen(!1)},[setViewListModalOpen]),openSaveModal=Object(external_kbnSharedDeps_React_.useCallback)(()=>{hideSavedViewMenu(),setIsInvalid(!1),setCreateModalOpen(!0)},[hideSavedViewMenu]),openUpdateModal=Object(external_kbnSharedDeps_React_.useCallback)(()=>{hideSavedViewMenu(),setIsInvalid(!1),setUpdateModalOpen(!0)},[hideSavedViewMenu]),closeModal=Object(external_kbnSharedDeps_React_.useCallback)(()=>setModalOpen(!1),[]),closeCreateModal=Object(external_kbnSharedDeps_React_.useCallback)(()=>setCreateModalOpen(!1),[]),closeUpdateModal=Object(external_kbnSharedDeps_React_.useCallback)(()=>setUpdateModalOpen(!1),[]),loadViews=Object(external_kbnSharedDeps_React_.useCallback)(()=>{hideSavedViewMenu(),find(),setModalOpen(!0)},[find,hideSavedViewMenu]),showSavedViewMenu=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setIsSavedViewMenuOpen(!0)},[setIsSavedViewMenuOpen]),save=Object(external_kbnSharedDeps_React_.useCallback)((name,hasTime=!1)=>{const currentState={...props.viewState,...hasTime?{}:{time:void 0}};saveView({...currentState,name:name})},[props.viewState,saveView]),update=Object(external_kbnSharedDeps_React_.useCallback)((name,hasTime=!1)=>{const currentState={...props.viewState,...hasTime?{}:{time:void 0}};updateView(currentView.id,{...currentState,name:name})},[props.viewState,updateView,currentView]);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{errorOnCreate&&setIsInvalid(!0)},[errorOnCreate]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{void 0!==updatedView&&(setCurrentView(updatedView),closeUpdateModal())},[updatedView,setCurrentView,closeUpdateModal]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{void 0!==createdView&&(setCurrentView(createdView),closeCreateModal())},[createdView,setCurrentView,closeCreateModal]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{void 0!==deletedId&&find()},[deletedId,find]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{errorOnCreate?kibana.notifications.toasts.warning(getErrorToast("create",errorOnCreate)):errorOnFind&&kibana.notifications.toasts.warning(getErrorToast("find",errorOnFind))},[errorOnCreate,errorOnFind,kibana]),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{style:{cursor:"pointer"},compressed:!0,onClick:showSavedViewMenu},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Current view",id:"xpack.infra.savedView.currentView"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,currentView?currentView.name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.savedView.unknownView",{defaultMessage:"No view selected"})))))),isOpen:isSavedViewMenuOpen,closePopover:hideSavedViewMenu,anchorPosition:"upCenter"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiListGroup,{flush:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiListGroupItem,{iconType:"indexSettings",onClick:loadViews,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.savedView.manageViews",{defaultMessage:"Manage views"})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiListGroupItem,{iconType:"refresh",onClick:openUpdateModal,disabled:!currentView||"0"===currentView.id,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.savedView.updateView",{defaultMessage:"Update view"})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiListGroupItem,{iconType:"importAction",onClick:openViewListModal,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.savedView.loadView",{defaultMessage:"Load view"})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiListGroupItem,{iconType:"save",onClick:openSaveModal,label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.savedView.saveNewView",{defaultMessage:"Save new view"})})))),createModalOpen&&external_kbnSharedDeps_React_default.a.createElement(SavedViewCreateModal,{isInvalid:isInvalid,close:closeCreateModal,save:save}),updateModalOpen&&external_kbnSharedDeps_React_default.a.createElement(SavedViewUpdateModal,{currentView:currentView,isInvalid:isInvalid,close:closeUpdateModal,save:update}),viewListModalOpen&&external_kbnSharedDeps_React_default.a.createElement(SavedViewListModal,{currentView:currentView,views:views,close:closeViewListModal,setView:setCurrentView}),modalOpen&&external_kbnSharedDeps_React_default.a.createElement(SavedViewManageViewsFlyout,{sourceIsLoading:sourceIsLoading,loading:loading,views:views,defaultViewId:defaultViewId,makeDefault:makeDefault,deleteView:deleteView,close:closeModal,setView:setCurrentView}))}const getErrorToast=(type,msg)=>"create"===type?{toastLifeTimeMs:3e3,title:msg||external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.savedView.errorOnCreate.title",{defaultMessage:"An error occured saving view."})}:"find"===type?{toastLifeTimeMs:3e3,title:msg||external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.savedView.findError.title",{defaultMessage:"An error occurred while loading views."})}:void 0,mapKibanaQuickRangesToDatePickerRanges=timepickerQuickRanges=>timepickerQuickRanges?timepickerQuickRanges.map(r=>({start:r.from,end:r.to,label:r.display})):[],ToolbarPanel=Object(common_.euiStyled)(external_kbnSharedDeps_ElasticEui_.EuiPanel).attrs(()=>({grow:!1,paddingSize:"none"}))`
  border-top: none;
  border-right: none;
  border-left: none;
  border-radius: 0;
  padding: ${props=>"12px "+props.theme.eui.paddingSizes.m};
`,MetricsExplorerToolbar=({timeRange:timeRange,derivedIndexPattern:derivedIndexPattern,options:options,onTimeChange:onTimeChange,onRefresh:onRefresh,onGroupByChange:onGroupByChange,onFilterQuerySubmit:onFilterQuerySubmit,onMetricsChange:onMetricsChange,onAggregationChange:onAggregationChange,chartOptions:chartOptions,onChartOptionsChange:onChartOptionsChange})=>{const isDefaultOptions="avg"===options.aggregation&&0===options.metrics.length,[timepickerQuickRanges]=Object(use_kibana_ui_setting.a)(data_public_.UI_SETTINGS.TIMEPICKER_QUICK_RANGES),commonlyUsedRanges=mapKibanaQuickRangesToDatePickerRanges(timepickerQuickRanges);return external_kbnSharedDeps_React_default.a.createElement(ToolbarPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:"count"===options.aggregation&&2},external_kbnSharedDeps_React_default.a.createElement(MetricsExplorerAggregationPicker,{fullWidth:!0,options:options,onChange:onAggregationChange})),"count"!==options.aggregation&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metricsExplorer.aggregationLabel",defaultMessage:"of"})),"count"!==options.aggregation&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:2},external_kbnSharedDeps_React_default.a.createElement(MetricsExplorerMetrics,{autoFocus:isDefaultOptions,fields:derivedIndexPattern.fields,options:options,onChange:onMetricsChange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metricsExplorer.groupByToolbarLabel",defaultMessage:"graph per"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:1},external_kbnSharedDeps_React_default.a.createElement(group_by.a,{onChange:onGroupByChange,fields:derivedIndexPattern.fields,options:options}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(kuery_bar.a,{derivedIndexPattern:derivedIndexPattern,onSubmit:onFilterQuerySubmit,value:options.filterQuery})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(MetricsExplorerChartOptions,{onChange:onChartOptionsChange,chartOptions:chartOptions})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(SavedViewsToolbarControls,{viewState:{options:options,chartOptions:chartOptions,currentTimerange:timeRange}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,style:{marginRight:5}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSuperDatePicker,{start:timeRange.from,end:timeRange.to,onTimeChange:({start:start,end:end})=>onTimeChange(start,end),onRefresh:onRefresh,commonlyUsedRanges:commonlyUsedRanges}))))};var use_metrics_explorer_data=__webpack_require__(205);const MetricsExplorerPage=({source:source,derivedIndexPattern:derivedIndexPattern})=>{const{loading:loading,error:error,data:data,currentTimerange:currentTimerange,options:options,chartOptions:chartOptions,setChartOptions:setChartOptions,handleAggregationChange:handleAggregationChange,handleMetricsChange:handleMetricsChange,handleFilterQuerySubmit:handleFilterQuerySubmit,handleGroupByChange:handleGroupByChange,handleTimeChange:handleTimeChange,handleRefresh:handleRefresh,handleLoadMore:handleLoadMore,onViewStateChange:onViewStateChange,loadData:loadData}=((source,derivedIndexPattern,shouldLoadImmediately=!0)=>{const[refreshSignal,setRefreshSignal]=Object(external_kbnSharedDeps_React_.useState)(0),[afterKey,setAfterKey]=Object(external_kbnSharedDeps_React_.useState)(null),{defaultViewState:defaultViewState,options:options,currentTimerange:currentTimerange,chartOptions:chartOptions,setChartOptions:setChartOptions,setTimeRange:setTimeRange,setOptions:setOptions}=Object(external_kbnSharedDeps_React_.useContext)(use_metrics_explorer_options.c.Context),{loading:loading,error:error,data:data,loadData:loadData}=Object(use_metrics_explorer_data.a)(options,source,derivedIndexPattern,currentTimerange,afterKey,refreshSignal,shouldLoadImmediately),handleRefresh=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setAfterKey(null),setRefreshSignal(refreshSignal+1)},[refreshSignal]),handleTimeChange=Object(external_kbnSharedDeps_React_.useCallback)((start,end)=>{setAfterKey(null),setTimeRange({...currentTimerange,from:start,to:end})},[currentTimerange,setTimeRange]),handleGroupByChange=Object(external_kbnSharedDeps_React_.useCallback)(groupBy=>{setAfterKey(null),setOptions({...options,groupBy:groupBy||void 0})},[options,setOptions]),handleFilterQuerySubmit=Object(external_kbnSharedDeps_React_.useCallback)(query=>{setAfterKey(null),setOptions({...options,filterQuery:query})},[options,setOptions]),handleMetricsChange=Object(external_kbnSharedDeps_React_.useCallback)(metrics=>{setAfterKey(null),setOptions({...options,metrics:metrics})},[options,setOptions]),handleAggregationChange=Object(external_kbnSharedDeps_React_.useCallback)(aggregation=>{setAfterKey(null);const metrics="count"===aggregation?[{aggregation:aggregation}]:options.metrics.filter(metric=>"count"!==metric.aggregation).map(metric=>({...metric,aggregation:aggregation}));setOptions({...options,aggregation:aggregation,metrics:metrics})},[options,setOptions]),onViewStateChange=Object(external_kbnSharedDeps_React_.useCallback)(vs=>{vs.chartOptions&&setChartOptions(vs.chartOptions),vs.currentTimerange&&"0"!==vs.id&&setTimeRange(vs.currentTimerange),vs.options&&setOptions(vs.options)},[setChartOptions,setOptions,setTimeRange]);return{loading:loading,error:error,data:data,currentTimerange:currentTimerange,options:options,chartOptions:chartOptions,setChartOptions:setChartOptions,handleAggregationChange:handleAggregationChange,handleMetricsChange:handleMetricsChange,handleFilterQuerySubmit:handleFilterQuerySubmit,handleGroupByChange:handleGroupByChange,handleTimeChange:handleTimeChange,handleRefresh:handleRefresh,handleLoadMore:setAfterKey,defaultViewState:defaultViewState,onViewStateChange:onViewStateChange,loadData:loadData,refreshSignal:refreshSignal,afterKey:afterKey}})(source,derivedIndexPattern,!1),{currentView:currentView,shouldLoadDefault:shouldLoadDefault}=useSavedViewContext();return Object(observability_public_.useTrackPageview)({app:"infra_metrics",path:"metrics_explorer"}),Object(observability_public_.useTrackPageview)({app:"infra_metrics",path:"metrics_explorer",delay:15e3}),Object(external_kbnSharedDeps_React_.useEffect)(()=>{currentView&&onViewStateChange(currentView)},[currentView,onViewStateChange]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{null==currentView&&shouldLoadDefault||loadData()},[loadData,shouldLoadDefault]),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiErrorBoundary,null,external_kbnSharedDeps_React_default.a.createElement(document_title.a,{title:previousTitle=>external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.infrastructureMetricsExplorerPage.documentTitle",{defaultMessage:"{previousTitle} | Metrics Explorer",values:{previousTitle:previousTitle}})}),external_kbnSharedDeps_React_default.a.createElement(MetricsExplorerToolbar,{derivedIndexPattern:derivedIndexPattern,timeRange:currentTimerange,options:options,chartOptions:chartOptions,onRefresh:handleRefresh,onTimeChange:handleTimeChange,onGroupByChange:handleGroupByChange,onFilterQuerySubmit:handleFilterQuerySubmit,onMetricsChange:handleMetricsChange,onAggregationChange:handleAggregationChange,onChartOptionsChange:setChartOptions}),error?external_kbnSharedDeps_React_default.a.createElement(empty_states.a,{titleText:"Whoops!",bodyText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.errorMessage",{defaultMessage:'It looks like the request failed with "{message}"',values:{message:error.message}}),onRefetch:handleRefresh,refetchText:"Try Again"}):external_kbnSharedDeps_React_default.a.createElement(MetricsExplorerCharts,{timeRange:currentTimerange,loading:loading,data:data,source:source,options:options,chartOptions:chartOptions,onLoadMore:handleLoadMore,onFilter:handleFilterQuerySubmit,onRefetch:handleRefresh,onTimeChange:handleTimeChange}))};var use_kibana_timefilter_time=__webpack_require__(133);const DEFAULT_WAFFLE_TIME_STATE={currentTime:Date.now(),isAutoReloading:!1},WaffleTimeStateRT=lib.type({currentTime:lib.number,isAutoReloading:lib.boolean}),use_waffle_time_encodeUrlState=WaffleTimeStateRT.encode,use_waffle_time_decodeUrlState=value=>Object(pipeable.pipe)(WaffleTimeStateRT.decode(value),Object(Either.fold)(Object(lib_function.constant)(void 0),lib_function.identity)),WaffleTime=constate_cjs_default()(()=>{const[getTime]=Object(use_kibana_timefilter_time.a)({from:"now",to:"now"}),kibanaTime=target_default.a.parse(getTime().to),[urlState,setUrlState]=Object(use_url_state.b)({defaultState:{...DEFAULT_WAFFLE_TIME_STATE,currentTime:kibanaTime?kibanaTime.toDate().getTime():Date.now()},decodeUrlState:use_waffle_time_decodeUrlState,encodeUrlState:use_waffle_time_encodeUrlState,urlStateKey:"waffleTime"}),[state,setState]=Object(external_kbnSharedDeps_React_.useState)(urlState);Object(external_kbnSharedDeps_React_.useEffect)(()=>{setUrlState(state)},[setUrlState,state]);const{currentTime:currentTime,isAutoReloading:isAutoReloading}=urlState;return{currentTime:currentTime,currentTimeRange:{from:currentTime-3e5,interval:"1m",to:currentTime},isAutoReloading:isAutoReloading,startAutoReload:Object(external_kbnSharedDeps_React_.useCallback)(()=>{setState(previous=>({...previous,isAutoReloading:!0}))},[setState]),stopAutoReload:Object(external_kbnSharedDeps_React_.useCallback)(()=>{setState(previous=>({...previous,isAutoReloading:!1}))},[setState]),jumpToTime:Object(external_kbnSharedDeps_React_.useCallback)(time=>{setState(previous=>({...previous,currentTime:time}))},[setState]),setWaffleTimeState:setState}}),[WaffleTimeProvider,useWaffleTimeContext]=WaffleTime,WaffleTimeControls=Object(common_.withTheme)(({theme:theme})=>{const{currentTime:currentTime,isAutoReloading:isAutoReloading,startAutoReload:startAutoReload,stopAutoReload:stopAutoReload,jumpToTime:jumpToTime}=useWaffleTimeContext(),currentMoment=external_kbnSharedDeps_Moment_default()(currentTime),liveStreamingButton=isAutoReloading?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{color:"primary",iconSide:"left",iconType:"pause",onClick:stopAutoReload},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.waffleTime.stopRefreshingButtonLabel",defaultMessage:"Stop refreshing"})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{iconSide:"left",iconType:"play",onClick:startAutoReload},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.waffleTime.autoRefreshButtonLabel",defaultMessage:"Auto-refresh"})),handleChangeDate=Object(external_kbnSharedDeps_React_.useCallback)(time=>{time&&jumpToTime(time.valueOf())},[jumpToTime]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,style:{border:null==theme?void 0:theme.eui.euiFormInputGroupBorder,boxShadow:`0px 3px 2px ${null==theme?void 0:theme.eui.euiTableActionsBorderColor}, 0px 1px 1px ${null==theme?void 0:theme.eui.euiTableActionsBorderColor}`,marginRight:null==theme?void 0:theme.eui.paddingSizes.m},"data-test-subj":"waffleDatePicker"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDatePicker,{className:"euiFieldText--inGroup",dateFormat:"L LTS",disabled:isAutoReloading,injectTimes:currentMoment?[currentMoment]:[],isLoading:isAutoReloading,onChange:handleChangeDate,popperPlacement:"top-end",selected:currentMoment,shouldCloseOnSelect:!0,showTimeSelect:!0,timeFormat:"LT"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},liveStreamingButton))});var autocomplete_field=__webpack_require__(298),with_kuery_autocompletion=__webpack_require__(278),kuery=__webpack_require__(117);const DEFAULT_WAFFLE_FILTERS_STATE={kind:"kuery",expression:""},WaffleFiltersStateRT=lib.type({kind:lib.literal("kuery"),expression:lib.string}),use_waffle_filters_encodeUrlState=WaffleFiltersStateRT.encode,use_waffle_filters_decodeUrlState=value=>Object(pipeable.pipe)(WaffleFiltersStateRT.decode(value),Object(Either.fold)(Object(lib_function.constant)(void 0),lib_function.identity)),WaffleFilters=constate_cjs_default()(()=>{const{createDerivedIndexPattern:createDerivedIndexPattern}=Object(metrics_source.b)(),indexPattern=createDerivedIndexPattern("metrics"),[urlState,setUrlState]=Object(use_url_state.b)({defaultState:DEFAULT_WAFFLE_FILTERS_STATE,decodeUrlState:use_waffle_filters_decodeUrlState,encodeUrlState:use_waffle_filters_encodeUrlState,urlStateKey:"waffleFilter"}),[state,setState]=Object(external_kbnSharedDeps_React_.useState)(urlState);Object(external_kbnSharedDeps_React_.useEffect)(()=>setUrlState(state),[setUrlState,state]);const[filterQueryDraft,setFilterQueryDraft]=Object(external_kbnSharedDeps_React_.useState)(urlState.expression),filterQueryAsJson=Object(external_kbnSharedDeps_React_.useMemo)(()=>Object(kuery.a)(urlState.expression,indexPattern),[indexPattern,urlState.expression]),applyFilterQueryFromKueryExpression=Object(external_kbnSharedDeps_React_.useCallback)(expression=>{setState(previous=>({...previous,kind:"kuery",expression:expression}))},[setState]),applyFilterQuery=Object(external_kbnSharedDeps_React_.useCallback)(filterQuery=>{setState(filterQuery),setFilterQueryDraft(filterQuery.expression)},[]),isFilterQueryDraftValid=Object(external_kbnSharedDeps_React_.useMemo)(()=>(expression=>{try{data_public_.esKuery.fromKueryExpression(expression)}catch(err){return!1}return!0})(filterQueryDraft),[filterQueryDraft]),{inventoryPrefill:inventoryPrefill}=Object(use_alert_prefill.b)(),prefillContext=Object(external_kbnSharedDeps_React_.useMemo)(()=>inventoryPrefill,[inventoryPrefill]);return Object(external_kbnSharedDeps_React_.useEffect)(()=>prefillContext.setFilterQuery(state.expression),[prefillContext,state]),{filterQuery:urlState,filterQueryDraft:filterQueryDraft,filterQueryAsJson:filterQueryAsJson,applyFilterQuery:applyFilterQuery,setFilterQueryDraftFromKueryExpression:setFilterQueryDraft,applyFilterQueryFromKueryExpression:applyFilterQueryFromKueryExpression,isFilterQueryDraftValid:isFilterQueryDraftValid,setWaffleFiltersState:applyFilterQuery}}),[WaffleFiltersProvider,useWaffleFiltersContext]=WaffleFilters,SearchBar=()=>{const{createDerivedIndexPattern:createDerivedIndexPattern}=Object(external_kbnSharedDeps_React_.useContext)(metrics_source.a.Context),{applyFilterQueryFromKueryExpression:applyFilterQueryFromKueryExpression,filterQueryDraft:filterQueryDraft,isFilterQueryDraftValid:isFilterQueryDraftValid,setFilterQueryDraftFromKueryExpression:setFilterQueryDraftFromKueryExpression}=useWaffleFiltersContext();return external_kbnSharedDeps_React_default.a.createElement(with_kuery_autocompletion.a,{indexPattern:createDerivedIndexPattern("metrics")},({isLoadingSuggestions:isLoadingSuggestions,loadSuggestions:loadSuggestions,suggestions:suggestions})=>external_kbnSharedDeps_React_default.a.createElement(autocomplete_field.a,{isLoadingSuggestions:isLoadingSuggestions,isValid:isFilterQueryDraftValid,loadSuggestions:loadSuggestions,onChange:setFilterQueryDraftFromKueryExpression,onSubmit:applyFilterQueryFromKueryExpression,placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.homePage.toolbar.kqlSearchFieldPlaceholder",{defaultMessage:"Search for infrastructure data (e.g. host.name:host-1)"}),suggestions:suggestions,value:filterQueryDraft||"",autoFocus:!0}))},FilterBar=()=>external_kbnSharedDeps_React_default.a.createElement(ToolbarPanel,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween",gutterSize:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(SearchBar,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(WaffleTimeControls,null))));var no_indices=__webpack_require__(159);const ErrorPage=({detailedMessage:detailedMessage,retry:retry,shortMessage:shortMessage})=>external_kbnSharedDeps_React_default.a.createElement(components_page.b,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageBody,null,external_kbnSharedDeps_React_default.a.createElement(MinimumPageContent,{horizontalPosition:"center",verticalPosition:"center",panelPaddingSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContentBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{color:"danger",iconType:"cross",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.errorPage.errorOccurredTitle",defaultMessage:"An error occurred"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,shortMessage),retry?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{onClick:retry,iconType:"refresh"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.errorPage.tryAgainButtonLabel",defaultMessage:"Try again"}))):null),detailedMessage?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement("div",null,detailedMessage)):null))))),MinimumPageContent=Object(common_.euiStyled)(external_kbnSharedDeps_ElasticEui_.EuiPageContent)`
  min-width: 50vh;
`,SourceErrorPage=({errorMessage:errorMessage,retry:retry})=>external_kbnSharedDeps_React_default.a.createElement(ErrorPage,{shortMessage:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceErrorPage.failedToLoadDataSourcesMessage",defaultMessage:"Failed to load data sources."}),detailedMessage:external_kbnSharedDeps_React_default.a.createElement("code",null,errorMessage),retry:retry});var source_loading_page=__webpack_require__(116),view_source_configuration_button=__webpack_require__(202),useInterval=__webpack_require__(121),useInterval_default=__webpack_require__.n(useInterval),auto_sizer=__webpack_require__(115);const INTERVAL_STRING_RE=new RegExp(`^([\\d\\.]+)\\s*(${target_default.a.units.join("|")})$`),UNITS=(lib.keyof({seconds:null,minutes:null,hours:null,days:null,weeks:null,months:null,years:null}),["seconds","minutes","hours","days","weeks","months","years"]),DISPLAY_STRINGS_FOR_UNITS_PLURAL={seconds:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.durationUnits.seconds.plural",{defaultMessage:"seconds"}),minutes:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.durationUnits.minutes.plural",{defaultMessage:"minutes"}),hours:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.durationUnits.hours.plural",{defaultMessage:"hours"}),days:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.durationUnits.days.plural",{defaultMessage:"days"}),weeks:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.durationUnits.weeks.plural",{defaultMessage:"weeks"}),months:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.durationUnits.months.plural",{defaultMessage:"months"}),years:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.durationUnits.years.plural",{defaultMessage:"years"})},DISPLAY_STRINGS_FOR_UNITS_SINGULAR={seconds:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.durationUnits.seconds.singular",{defaultMessage:"second"}),minutes:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.durationUnits.minutes.singular",{defaultMessage:"minute"}),hours:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.durationUnits.hours.singular",{defaultMessage:"hour"}),days:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.durationUnits.days.singular",{defaultMessage:"day"}),weeks:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.durationUnits.weeks.singular",{defaultMessage:"week"}),months:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.durationUnits.months.singular",{defaultMessage:"month"}),years:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.durationUnits.years.singular",{defaultMessage:"year"})},convertIntervalToString=input=>{const interval=(intervalString=>{if(intervalString){const matches=intervalString.match(INTERVAL_STRING_RE);if(matches){return{value:Number(matches[1]),unit:matches[2]}}}throw new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.parseInterval.errorMessage",{defaultMessage:"{value} is not an interval string",values:{value:intervalString}}))})(input);if("s"===(null==interval?void 0:interval.unit)){const duration=external_kbnSharedDeps_Moment_default.a.duration(interval.value,interval.unit),targetUnit=UNITS.reduce((answer,unit)=>duration.as(unit)>=1?unit:answer,"seconds"),durationAsUnit=duration.as(targetUnit);return`${Math.floor(durationAsUnit)} ${value=durationAsUnit,unit=targetUnit,1===Math.floor(value)?DISPLAY_STRINGS_FOR_UNITS_SINGULAR[unit]:DISPLAY_STRINGS_FOR_UNITS_PLURAL[unit]}`}var value,unit};function isWaffleMapGroupWithNodes(subject){return subject&&null!=subject.nodes&&Array.isArray(subject.nodes)}function isWaffleMapGroupWithGroups(subject){return subject&&null!=subject.groups&&Array.isArray(subject.groups)}function createId(path){return path.map(p=>p.value).join("/")}function findOrCreateGroupWithNodes(groups,path){const id=0===path.length?"__all__":createId(path),firstPath=Object(external_kbnSharedDeps_Lodash_.first)(path);if(2===path.length&&firstPath){const parentId=firstPath.value,existingParentGroup=groups.find(g=>g.id===parentId);if(isWaffleMapGroupWithGroups(existingParentGroup)){const existingSubGroup=existingParentGroup.groups.find(g=>g.id===id);if(isWaffleMapGroupWithNodes(existingSubGroup))return existingSubGroup}}const lastPath=Object(external_kbnSharedDeps_Lodash_.last)(path),existingGroup=groups.find(g=>g.id===id);return isWaffleMapGroupWithNodes(existingGroup)?existingGroup:{id:id,name:"__all__"===id?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodesToWaffleMap.groupsWithNodes.allName",{defaultMessage:"All"}):lastPath&&lastPath.label||"Unknown Group",count:0,width:0,squareSize:0,nodes:[]}}function createWaffleMapNode(node){const nodePathItem=Object(external_kbnSharedDeps_Lodash_.last)(node.path);if(!nodePathItem)throw new Error("There must be at least one node path item");return{pathId:node.path.map(p=>p.value).join("/"),path:node.path,id:nodePathItem.value,ip:nodePathItem.ip,name:nodePathItem.label||nodePathItem.value,metrics:node.metrics}}function withoutGroup(group){return subject=>subject.id!==group.id}function nodesToWaffleMap(nodes){return nodes.reduce((groups,node)=>{const waffleNode=createWaffleMapNode(node);if(2===node.path.length){const parentGroup=findOrCreateGroupWithNodes(groups,node.path.slice(0,node.path.length-1));return parentGroup.nodes.push(waffleNode),groups.filter(withoutGroup(parentGroup)).concat([parentGroup])}if(3===node.path.length){const parentGroup=findOrCreateGroupWithNodes(groups,node.path.slice(0,node.path.length-1));parentGroup.nodes.push(waffleNode);const topGroup=function(groups,path){const id=0===path.length?"__all__":createId(path),lastPath=Object(external_kbnSharedDeps_Lodash_.last)(path),existingGroup=groups.find(g=>g.id===id);return isWaffleMapGroupWithGroups(existingGroup)?existingGroup:{id:id,name:"__all__"===id?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodesToWaffleMap.groupsWithGroups.allName",{defaultMessage:"All"}):lastPath&&lastPath.label||"Unknown Group",count:0,width:0,squareSize:0,groups:[]}}(groups,node.path.slice(0,node.path.length-2));return topGroup.groups=topGroup.groups.filter(withoutGroup(parentGroup)).concat([parentGroup]),groups.filter(withoutGroup(topGroup)).concat([topGroup])}const allGroup=findOrCreateGroupWithNodes(groups,[]);return allGroup.nodes.push(waffleNode),groups.filter(withoutGroup(allGroup)).concat([allGroup])},[])}class group_name_GroupName extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){var obj,key,value;super(...args),value=event=>{event.preventDefault();const{groupBy:groupBy}=this.props.options;if(0===groupBy.length)return;const currentPath=this.props.isChild&&groupBy.length>1?groupBy[1]:groupBy[0];this.props.onDrilldown(`${currentPath.field}: "${this.props.group.name}"`)},(key="handleClick")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}render(){const{group:group,isChild:isChild}=this.props,linkStyle={fontSize:isChild?"0.85em":"1em"};return external_kbnSharedDeps_React_default.a.createElement(GroupNameContainer,null,external_kbnSharedDeps_React_default.a.createElement(Inner,{isChild:isChild},external_kbnSharedDeps_React_default.a.createElement(Name,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{position:"top",content:group.name},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{style:linkStyle,onClickCapture:this.handleClick},group.name))),external_kbnSharedDeps_React_default.a.createElement(Count,null,group.count)))}}const GroupNameContainer=common_.euiStyled.div`
  position: relative;
  text-align: center;
  font-size: 16px;
  margin-bottom: 5px;
  top: 20px;
  display: flex;
  justify-content: center;
  padding: 0 10px;
`,Inner=common_.euiStyled.div`
  border: 1px solid ${props=>props.theme.eui.euiBorderColor};
  background-color: ${props=>props.isChild?props.theme.eui.euiColorLightestShade:props.theme.eui.euiColorEmptyShade};
  border-radius: 4px;
  box-shadow: 0px 2px 0px 0px ${props=>props.theme.eui.euiBorderColor};
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
`,Name=common_.euiStyled.div`
  flex: 1 1 auto;
  padding: 6px 10px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`,Count=common_.euiStyled.div`
  flex: 0 0 auto;
  border-left: 1px solid ${props=>props.theme.eui.euiBorderColor};
  padding: 6px 10px;
  font-size: 0.85em;
  font-weight: normal;
`;var polished_lib=__webpack_require__(111),get_custom_metric_label=__webpack_require__(126),types=__webpack_require__(83),use_snaphot=__webpack_require__(163),create_inventory_metric_formatter=__webpack_require__(164),snapshot_metric_i18n=__webpack_require__(165);const SNAPSHOT_METRIC_TRANSLATIONS=Object.keys(types.e).reduce((result,metric)=>{var _toMetricOpt;const text=null===(_toMetricOpt=Object(snapshot_metric_i18n.a)(metric))||void 0===_toMetricOpt?void 0:_toMetricOpt.text;return text?{...result,[metric]:text}:result},{});var use_waffle_options=__webpack_require__(94);const ConditionalToolTip=Object(common_.withTheme)(({theme:theme,hidden:hidden,node:node,children:children,nodeType:nodeType,currentTime:currentTime})=>{const{sourceId:sourceId}=Object(metrics_source.b)(),[timer,setTimer]=Object(external_kbnSharedDeps_React_.useState)(null),model=Object(inventory_models.b)(nodeType),{customMetrics:customMetrics}=Object(use_waffle_options.d)(),requestMetrics=model.tooltipMetrics.map(type=>({type:type})).concat(customMetrics),query=JSON.stringify({bool:{filter:{match_phrase:{[model.fields.id]:node.id}}}}),{nodes:nodes,reload:reload}=Object(use_snaphot.a)(query,requestMetrics,[],nodeType,sourceId,currentTime,"","",!1),handleDataLoad=Object(external_kbnSharedDeps_React_.useCallback)(()=>{const id=setTimeout(reload,200);setTimer(id)},[reload]),cancelDataLoad=Object(external_kbnSharedDeps_React_.useCallback)(()=>timer&&clearTimeout(timer)||void 0,[timer]);if(Object(external_kbnSharedDeps_React_.useEffect)(()=>cancelDataLoad,[timer,cancelDataLoad]),hidden)return children;const dataNode=Object(external_kbnSharedDeps_Lodash_.first)(nodes),metrics=dataNode&&dataNode.metrics||[],content=external_kbnSharedDeps_React_default.a.createElement("div",{style:{minWidth:200},"data-test-subj":"conditionalTooltipContent"},external_kbnSharedDeps_React_default.a.createElement("div",{style:{borderBottom:"1px solid "+(null==theme?void 0:theme.eui.euiColorMediumShade),paddingBottom:null==theme?void 0:theme.eui.paddingSizes.xs,marginBottom:null==theme?void 0:theme.eui.paddingSizes.xs}},node.name),metrics.map(metric=>{const metricName=types.f.is(metric.name)?metric.name:"custom",name=SNAPSHOT_METRIC_TRANSLATIONS[metricName]||metricName,customMetric="custom"===name?customMetrics.find(item=>item.id===metric.name):null,formatter=customMetric?Object(create_formatter_for_metric.a)(customMetric):Object(create_inventory_metric_formatter.a)({type:metricName});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s",key:metric.name},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:1,className:"eui-textTruncate eui-displayBlock"},customMetric?Object(get_custom_metric_label.a)(customMetric):name),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},metric.value&&formatter(metric.value)||"-"))}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{delay:"regular",position:"right",content:content},external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"conditionalTooltipMouseHandler",onMouseOver:handleDataLoad,onFocus:handleDataLoad,onMouseOut:cancelDataLoad,onBlur:cancelDataLoad},children))}),OPERATOR_TO_FN={[lib_lib.c.eq]:external_kbnSharedDeps_Lodash_.isEqual,[lib_lib.c.lt]:external_kbnSharedDeps_Lodash_.lt,[lib_lib.c.lte]:external_kbnSharedDeps_Lodash_.lte,[lib_lib.c.gte]:external_kbnSharedDeps_Lodash_.gte,[lib_lib.c.gt]:external_kbnSharedDeps_Lodash_.gt},convertToRgbString=color=>Object(polished_lib.toColorString)(Object(polished_lib.parseToRgb)(color)),normalizeValue=(min,max,value)=>(value-min)/(max-min),calculateSteppedGradientColor=(rules,value,bounds,defaultColor="rgba(217, 217, 217, 1)")=>{var _first$color,_first;const normalizedValue=normalizeValue(bounds.min,bounds.max,Number(value)),steps=rules.length,lastRule=Object(external_kbnSharedDeps_Lodash_.last)(rules);return lastRule&&Object(external_kbnSharedDeps_Lodash_.gte)(normalizedValue,lastRule.value)?lastRule.color:rules.reduce((color,rule)=>{const min=rule.value-1/steps,max=rule.value;return Object(external_kbnSharedDeps_Lodash_.gte)(normalizedValue,min)&&Object(external_kbnSharedDeps_Lodash_.lte)(normalizedValue,max)?rule.color:color},null!==(_first$color=null===(_first=Object(external_kbnSharedDeps_Lodash_.first)(rules))||void 0===_first?void 0:_first.color)&&void 0!==_first$color?_first$color:defaultColor)},calculateStepColor=(rules,value,defaultColor="rgba(217, 217, 217, 1)")=>rules.reduce((color,rule)=>(0,OPERATOR_TO_FN[rule.operator])(value,rule.value)?rule.color:color,defaultColor),calculateGradientColor=(rules,value,bounds,defaultColor="rgba(0, 179, 164, 1)")=>{if(0===rules.length)return defaultColor;if(1===rules.length)return Object(external_kbnSharedDeps_Lodash_.last)(rules).color;const{min:min,max:max}=bounds,sortedRules=Object(external_kbnSharedDeps_Lodash_.sortBy)(rules,"value"),normValue=normalizeValue(min,max,Number(value)),startRule=sortedRules.reduce((acc,rule)=>rule.value<=normValue?rule:acc,Object(external_kbnSharedDeps_Lodash_.first)(sortedRules)),endRule=sortedRules.filter(r=>r!==startRule).find(r=>r.value>=normValue);if(!endRule)return startRule.color;const mixValue=normalizeValue(startRule.value,endRule.value,normValue);return Object(polished_lib.mix)(mixValue,endRule.color,startRule.color)},shared_TabContent=common_.euiStyled.div`
  padding: ${props=>props.theme.eui.paddingSizes.m};
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
`,ChartHeader=({title:title,metrics:metrics})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s",responsive:!1},external_kbnSharedDeps_React_default.a.createElement(HeaderItem,{grow:1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement(H4,null,title))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},metrics.map(chartMetric=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{key:chartMetric.label},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{key:chartMetric.label,gutterSize:"xs",alignItems:"center",responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{color:Object(color_palette.b)(chartMetric.color),type:"dot"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs"},chartMetric.label)))))))),HeaderItem=Object(common_.euiStyled)(external_kbnSharedDeps_ElasticEui_.EuiFlexItem).attrs({grow:1})`
  overflow: hidden;
`,H4=Object(common_.euiStyled)("h4")`
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`,CHART_SIZE=["100%",160],ChartSection=({title:title,style:style,chartRef:chartRef,series:series,tickFormatterForTime:tickFormatterForTime,tickFormatter:tickFormatter,onPointerUpdate:onPointerUpdate,domain:domain,stack:stack=!1})=>{const isDarkMode=Object(kibanaReact_public_.useUiSetting)("theme:darkMode"),metrics=series.map(chartSeries=>chartSeries.metric),tooltipProps={headerFormatter:tooltipValue=>external_kbnSharedDeps_Moment_default()(tooltipValue.value).format("Y-MM-DD HH:mm:ss.SSS")};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(ChartHeader,{title:title,metrics:metrics}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Chart,{ref:chartRef,size:CHART_SIZE},series.map((chartSeries,index)=>external_kbnSharedDeps_React_default.a.createElement(series_chart.a,{type:style,metric:chartSeries.metric,id:"0",key:chartSeries.series.id,series:chartSeries.series,stack:stack})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Axis,{id:"timestamp",position:external_kbnSharedDeps_ElasticCharts_.Position.Bottom,showOverlappingTicks:!0,tickFormat:tickFormatterForTime}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Axis,{id:"values",position:external_kbnSharedDeps_ElasticCharts_.Position.Left,tickFormat:tickFormatter,domain:domain,ticks:6,showGridLines:!0}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Settings,{onPointerUpdate:onPointerUpdate,tooltip:tooltipProps,theme:getTimelineChartTheme(isDarkMode)})))},SYSTEM_METRIC_NAME=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.metrics.system",{defaultMessage:"System"}),USER_METRIC_NAME=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.metrics.user",{defaultMessage:"User"}),INBOUND_METRIC_NAME=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.metrics.inbound",{defaultMessage:"Inbound"}),OUTBOUND_METRIC_NAME=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.metrics.outbound",{defaultMessage:"Outbound"}),USED_MEMORY_METRIC_NAME=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.metrics.used",{defaultMessage:"Used"}),FREE_MEMORY_METRIC_NAME=(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.metrics.cached",{defaultMessage:"Cached"}),external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.metrics.free",{defaultMessage:"Free"})),NETWORK_CHART_TITLE=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.metrics.charts.networkTitle",{defaultMessage:"Network"}),MEMORY_CHART_TITLE=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.metrics.charts.memoryTitle",{defaultMessage:"Memory"}),CPU_CHART_TITLE=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.metrics.fcharts.cpuTitle",{defaultMessage:"CPU"}),LOAD_CHART_TITLE=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.metrics.charts.loadTitle",{defaultMessage:"Load"}),LOG_RATE_METRIC_NAME=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.metrics.logRate",{defaultMessage:"Log Rate"}),LOG_RATE_CHART_TITLE=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.metrics.charts.logRateTitle",{defaultMessage:"Log Rate"}),TimeDropdown=props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{fullWidth:!0,options:[{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.metrics.last15Minutes",{defaultMessage:"Last 15 mintues"}),value:9e5},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.metrics.lastHour",{defaultMessage:"Last hour"}),value:36e5},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.metrics.last3Hours",{defaultMessage:"Last 3 hours"}),value:108e5},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.metrics.last24Hours",{defaultMessage:"Last 24 hours"}),value:864e5},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.metrics.last7Days",{defaultMessage:"Last 7 days"}),value:6048e5}],value:props.value,onChange:props.onChange}),ChartGridItem=Object(common_.euiStyled)(external_kbnSharedDeps_ElasticEui_.EuiFlexItem)`
  overflow: hidden
`,LoadingPlaceholder=()=>external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:"100%",height:"200px",padding:"16px",display:"flex",alignItems:"center",justifyContent:"center"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingChart,{size:"xl"})),MetricsTab={id:"metrics",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.tabs.metrics",{defaultMessage:"Metrics"}),content:props=>{const cpuChartRef=Object(external_kbnSharedDeps_React_.useRef)(null),networkChartRef=Object(external_kbnSharedDeps_React_.useRef)(null),memoryChartRef=Object(external_kbnSharedDeps_React_.useRef)(null),loadChartRef=Object(external_kbnSharedDeps_React_.useRef)(null),logRateChartRef=Object(external_kbnSharedDeps_React_.useRef)(null),customMetricRefs=Object(external_kbnSharedDeps_React_.useRef)({}),[time,setTime]=Object(external_kbnSharedDeps_React_.useState)(36e5),chartRefs=Object(external_kbnSharedDeps_React_.useMemo)(()=>[...[cpuChartRef,networkChartRef,memoryChartRef,loadChartRef,logRateChartRef],customMetricRefs],[cpuChartRef,networkChartRef,memoryChartRef,loadChartRef,logRateChartRef,customMetricRefs]),{sourceId:sourceId,createDerivedIndexPattern:createDerivedIndexPattern}=Object(metrics_source.b)(),{nodeType:nodeType,accountId:accountId,region:region,customMetrics:customMetrics}=Object(use_waffle_options.d)(),{currentTime:currentTime,options:options,node:node}=props,derivedIndexPattern=Object(external_kbnSharedDeps_React_.useMemo)(()=>createDerivedIndexPattern("metrics"),[createDerivedIndexPattern]);let filter=options.fields?`${Object(inventory_models.a)(nodeType,options.fields).id}: "${node.id}"`:"";filter&&(filter=Object(kuery.a)(filter,derivedIndexPattern));const buildCustomMetric=Object(external_kbnSharedDeps_React_.useCallback)((field,id,aggregation="avg")=>({type:"custom",aggregation:aggregation,field:field,id:id}),[]),updateTime=Object(external_kbnSharedDeps_React_.useCallback)(e=>{setTime(Number(e.currentTarget.value))},[setTime]),timeRange={interval:"1m",to:currentTime,from:currentTime-time,ignoreLookback:!0},defaultMetrics=[{type:"rx"},{type:"tx"},buildCustomMetric("system.cpu.user.pct","user"),buildCustomMetric("system.cpu.system.pct","system"),buildCustomMetric("system.load.1","load1m"),buildCustomMetric("system.load.5","load5m"),buildCustomMetric("system.load.15","load15m"),buildCustomMetric("system.memory.actual.used.bytes","usedMemory"),buildCustomMetric("system.memory.actual.free","freeMemory"),buildCustomMetric("system.cpu.cores","cores","max")],{nodes:nodes,reload:reload}=Object(use_snaphot.a)(filter,[...defaultMetrics,...customMetrics],[],nodeType,sourceId,currentTime,accountId,region,!1,timeRange),{nodes:logRateNodes,reload:reloadLogRate}=Object(use_snaphot.a)(filter,[{type:"logRate"}],[],nodeType,sourceId,currentTime,accountId,region,!1,timeRange),getDomain=Object(external_kbnSharedDeps_React_.useCallback)((timeseries,ms)=>{const dataDomain=timeseries?Object(calculate_domain.a)(timeseries,ms,!1):null;return dataDomain?{max:1.1*dataDomain.max,min:dataDomain.min}:{max:0,min:0}},[]),dateFormatter=Object(external_kbnSharedDeps_React_.useCallback)(timeseries=>{var _first,_last;if(!timeseries)return()=>"";const firstTimestamp=null===(_first=Object(external_kbnSharedDeps_Lodash_.first)(timeseries.rows))||void 0===_first?void 0:_first.timestamp,lastTimestamp=null===(_last=Object(external_kbnSharedDeps_Lodash_.last)(timeseries.rows))||void 0===_last?void 0:_last.timestamp;return null==firstTimestamp||null==lastTimestamp?value=>""+value:Object(external_kbnSharedDeps_ElasticCharts_.niceTimeFormatter)([firstTimestamp,lastTimestamp])},[]),networkFormatter=Object(external_kbnSharedDeps_React_.useMemo)(()=>Object(create_inventory_metric_formatter.a)({type:"rx"}),[]),cpuFormatter=Object(external_kbnSharedDeps_React_.useMemo)(()=>Object(create_inventory_metric_formatter.a)({type:"cpu"}),[]),memoryFormatter=Object(external_kbnSharedDeps_React_.useMemo)(()=>Object(create_inventory_metric_formatter.a)({type:"s3BucketSize"}),[]),loadFormatter=Object(external_kbnSharedDeps_React_.useMemo)(()=>Object(create_inventory_metric_formatter.a)({type:"load"}),[]),logRateFormatter=Object(external_kbnSharedDeps_React_.useMemo)(()=>Object(create_inventory_metric_formatter.a)({type:"logRate"}),[]),mergeTimeseries=Object(external_kbnSharedDeps_React_.useCallback)((...series)=>{const base=series[0],otherSeries=series.slice(1);return base.rows=base.rows.map((b,rowIdx)=>{const newRow={...b};return otherSeries.forEach((o,idx)=>{newRow["metric_"+(idx+1)]=o.rows[rowIdx].metric_0}),newRow}),base},[]),buildChartMetricLabels=Object(external_kbnSharedDeps_React_.useCallback)((labels,aggregation)=>{const baseMetric={color:color_palette.a.color0,aggregation:aggregation,label:"System"};return labels.map((label,idx)=>({...baseMetric,color:color_palette.a["color"+idx],label:label}))},[]),pointerUpdate=Object(external_kbnSharedDeps_React_.useCallback)(event=>{chartRefs.forEach(ref=>{if(ref.current)if(ref.current instanceof external_kbnSharedDeps_ElasticCharts_.Chart)ref.current.dispatchExternalPointerEvent(event);else{Object.values(ref.current).forEach(c=>{c&&c.dispatchExternalPointerEvent(event)})}})},[chartRefs]),getTimeseries=Object(external_kbnSharedDeps_React_.useCallback)(metricName=>nodes&&nodes.length?nodes[0].metrics.find(m=>m.name===metricName).timeseries:null,[nodes]),getLogRateTimeseries=Object(external_kbnSharedDeps_React_.useCallback)(()=>logRateNodes?0===logRateNodes.length?{rows:[],columns:[],id:"0"}:logRateNodes[0].metrics.find(m=>"logRate"===m.name).timeseries:null,[logRateNodes]),systemMetricsTs=Object(external_kbnSharedDeps_React_.useMemo)(()=>getTimeseries("system"),[getTimeseries]),userMetricsTs=Object(external_kbnSharedDeps_React_.useMemo)(()=>getTimeseries("user"),[getTimeseries]),rxMetricsTs=Object(external_kbnSharedDeps_React_.useMemo)(()=>getTimeseries("rx"),[getTimeseries]),txMetricsTs=Object(external_kbnSharedDeps_React_.useMemo)(()=>getTimeseries("tx"),[getTimeseries]),load1mMetricsTs=Object(external_kbnSharedDeps_React_.useMemo)(()=>getTimeseries("load1m"),[getTimeseries]),load5mMetricsTs=Object(external_kbnSharedDeps_React_.useMemo)(()=>getTimeseries("load5m"),[getTimeseries]),load15mMetricsTs=Object(external_kbnSharedDeps_React_.useMemo)(()=>getTimeseries("load15m"),[getTimeseries]),usedMemoryMetricsTs=Object(external_kbnSharedDeps_React_.useMemo)(()=>getTimeseries("usedMemory"),[getTimeseries]),freeMemoryMetricsTs=Object(external_kbnSharedDeps_React_.useMemo)(()=>getTimeseries("freeMemory"),[getTimeseries]),coresMetricsTs=Object(external_kbnSharedDeps_React_.useMemo)(()=>getTimeseries("cores"),[getTimeseries]),logRateMetricsTs=Object(external_kbnSharedDeps_React_.useMemo)(()=>getLogRateTimeseries(),[getLogRateTimeseries]);if(Object(external_kbnSharedDeps_React_.useEffect)(()=>{reload(),reloadLogRate()},[time,reload,reloadLogRate]),!(systemMetricsTs&&userMetricsTs&&rxMetricsTs&&txMetricsTs&&load1mMetricsTs&&load5mMetricsTs&&load15mMetricsTs&&usedMemoryMetricsTs&&freeMemoryMetricsTs&&logRateMetricsTs))return external_kbnSharedDeps_React_default.a.createElement(LoadingPlaceholder,null);const cpuChartMetrics=buildChartMetricLabels([SYSTEM_METRIC_NAME,USER_METRIC_NAME],"avg"),logRateChartMetrics=buildChartMetricLabels([LOG_RATE_METRIC_NAME],"rate"),networkChartMetrics=buildChartMetricLabels([INBOUND_METRIC_NAME,OUTBOUND_METRIC_NAME],"rate"),loadChartMetrics=buildChartMetricLabels(["1m","5m","15m"],"avg"),memoryChartMetrics=buildChartMetricLabels([USED_MEMORY_METRIC_NAME,FREE_MEMORY_METRIC_NAME],"rate");systemMetricsTs.rows=systemMetricsTs.rows.slice().map((r,idx)=>{const metric=r.metric_0,cores=coresMetricsTs.rows[idx].metric_0;return metric&&cores&&(r.metric_0=metric/cores),r}),userMetricsTs.rows=userMetricsTs.rows.slice().map((r,idx)=>{const metric=r.metric_0,cores=coresMetricsTs.rows[idx].metric_0;return metric&&cores&&(r.metric_0=metric/cores),r});const cpuTimeseries=mergeTimeseries(systemMetricsTs,userMetricsTs),logRateTimeseries=mergeTimeseries(logRateMetricsTs),networkTimeseries=mergeTimeseries(rxMetricsTs,txMetricsTs),loadTimeseries=mergeTimeseries(load1mMetricsTs,load5mMetricsTs,load15mMetricsTs),memoryTimeseries=mergeTimeseries(usedMemoryMetricsTs,freeMemoryMetricsTs),formatter=dateFormatter(rxMetricsTs);return external_kbnSharedDeps_React_default.a.createElement(shared_TabContent,null,external_kbnSharedDeps_React_default.a.createElement(TimeDropdown,{value:time,onChange:updateTime}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGrid,{columns:2,gutterSize:"l",responsive:!1},external_kbnSharedDeps_React_default.a.createElement(ChartGridItem,null,external_kbnSharedDeps_React_default.a.createElement(ChartSection,{title:CPU_CHART_TITLE,style:use_metrics_explorer_options.b.line,chartRef:cpuChartRef,series:[{metric:cpuChartMetrics[0],series:systemMetricsTs},{metric:cpuChartMetrics[1],series:userMetricsTs}],tickFormatterForTime:formatter,tickFormatter:cpuFormatter,onPointerUpdate:pointerUpdate,domain:getDomain(cpuTimeseries,cpuChartMetrics)})),external_kbnSharedDeps_React_default.a.createElement(ChartGridItem,null,external_kbnSharedDeps_React_default.a.createElement(ChartSection,{title:LOAD_CHART_TITLE,style:use_metrics_explorer_options.b.line,chartRef:loadChartRef,series:[{metric:loadChartMetrics[0],series:load1mMetricsTs},{metric:loadChartMetrics[1],series:load5mMetricsTs},{metric:loadChartMetrics[2],series:load15mMetricsTs}],tickFormatterForTime:formatter,tickFormatter:loadFormatter,onPointerUpdate:pointerUpdate,domain:getDomain(loadTimeseries,loadChartMetrics)})),external_kbnSharedDeps_React_default.a.createElement(ChartGridItem,null,external_kbnSharedDeps_React_default.a.createElement(ChartSection,{title:MEMORY_CHART_TITLE,style:use_metrics_explorer_options.b.line,chartRef:memoryChartRef,series:[{metric:memoryChartMetrics[0],series:usedMemoryMetricsTs},{metric:memoryChartMetrics[1],series:freeMemoryMetricsTs}],tickFormatterForTime:formatter,tickFormatter:memoryFormatter,onPointerUpdate:pointerUpdate,domain:getDomain(memoryTimeseries,memoryChartMetrics)})),external_kbnSharedDeps_React_default.a.createElement(ChartGridItem,null,external_kbnSharedDeps_React_default.a.createElement(ChartSection,{title:NETWORK_CHART_TITLE,style:use_metrics_explorer_options.b.line,chartRef:networkChartRef,series:[{metric:networkChartMetrics[0],series:rxMetricsTs},{metric:networkChartMetrics[1],series:txMetricsTs}],tickFormatterForTime:formatter,tickFormatter:networkFormatter,onPointerUpdate:pointerUpdate,domain:getDomain(networkTimeseries,networkChartMetrics),stack:!0})),external_kbnSharedDeps_React_default.a.createElement(ChartGridItem,null,external_kbnSharedDeps_React_default.a.createElement(ChartSection,{title:LOG_RATE_CHART_TITLE,style:use_metrics_explorer_options.b.line,chartRef:logRateChartRef,series:[{metric:logRateChartMetrics[0],series:logRateMetricsTs}],tickFormatterForTime:formatter,tickFormatter:logRateFormatter,onPointerUpdate:pointerUpdate,domain:getDomain(logRateTimeseries,logRateChartMetrics),stack:!0})),customMetrics.map(c=>{const metricTS=getTimeseries(c.id),chartMetrics=buildChartMetricLabels([c.field],c.aggregation);return metricTS?external_kbnSharedDeps_React_default.a.createElement(ChartGridItem,null,external_kbnSharedDeps_React_default.a.createElement(ChartSection,{title:Object(get_custom_metric_label.a)(c),style:use_metrics_explorer_options.b.line,chartRef:r=>{customMetricRefs.current[c.id]=r},series:[{metric:chartMetrics[0],series:metricTS}],tickFormatterForTime:formatter,tickFormatter:Object(create_formatter_for_metric.a)(c),onPointerUpdate:pointerUpdate,domain:getDomain(mergeTimeseries(metricTS),chartMetrics),stack:!0})):null})))}};var react_use_lib=__webpack_require__(173),log_stream=__webpack_require__(265),redirect_to_node_logs=(__webpack_require__(213),__webpack_require__(149));function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const LogsTab={id:"logs",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.tabs.logs",{defaultMessage:"Logs"}),content:props=>{const[textQuery,setTextQuery]=Object(external_kbnSharedDeps_React_.useState)(""),endTimestamp=props.currentTime,startTimestamp=endTimestamp-36e5,{nodeType:nodeType}=Object(use_waffle_options.d)(),{options:options,node:node}=props,throttledTextQuery=Object(react_use_lib.useThrottle)(textQuery,textQueryThrottleInterval),filter=Object(external_kbnSharedDeps_React_.useMemo)(()=>({language:"kuery",query:[...null!=options.fields?[`${Object(inventory_models.a)(nodeType,options.fields).id}: "${node.id}"`]:[],...""!==throttledTextQuery?[throttledTextQuery]:[]].join(" and ")}),[options.fields,nodeType,node.id,throttledTextQuery]),onQueryChange=Object(external_kbnSharedDeps_React_.useCallback)(e=>{setTextQuery(e.target.value)},[]),nodeLogsMenuItemLinkProps=Object(use_link_props.b)(Object(redirect_to_node_logs.b)({nodeType:nodeType,nodeId:node.id,time:startTimestamp}));return external_kbnSharedDeps_React_default.a.createElement(shared_TabContent,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"m",alignItems:"center",responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldSearch,{fullWidth:!0,placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.logs.textFieldPlaceholder",{defaultMessage:"Search for log entries..."}),value:textQuery,isClearable:!0,onChange:onQueryChange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,_extends({size:"xs",flush:"both",iconType:"popout"},nodeLogsMenuItemLinkProps),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.nodeDetails.logs.openLogsLink",defaultMessage:"Open in Logs"})))),external_kbnSharedDeps_React_default.a.createElement(log_stream.a,{startTimestamp:startTimestamp,endTimestamp:endTimestamp,query:filter}))}},textQueryThrottleInterval=1e3;var http_api=__webpack_require__(89),runtime_types=__webpack_require__(15),use_http_request=__webpack_require__(102);const ProcessListContext=constate_cjs_default()((function(props){const{hostTerm:hostTerm,timefield:timefield,to:to}=props,{createDerivedIndexPattern:createDerivedIndexPattern}=Object(metrics_source.b)();return{hostTerm:hostTerm,indexPattern:createDerivedIndexPattern("metrics").title,timefield:timefield,to:to}})),[ProcessListContextProvider,useProcessListContext]=ProcessListContext,STATE_NAMES={running:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processes.stateRunning",{defaultMessage:"Running"}),sleeping:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processes.stateSleeping",{defaultMessage:"Sleeping"}),dead:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processes.stateDead",{defaultMessage:"Dead"}),stopped:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processes.stateStopped",{defaultMessage:"Stopped"}),idle:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processes.stateIdle",{defaultMessage:"Idle"}),zombie:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processes.stateZombie",{defaultMessage:"Zombie"}),unknown:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processes.stateUnknown",{defaultMessage:"Unknown"})},STATE_ORDER=["running","sleeping","stopped","idle","dead","zombie","unknown"],SummaryTable=({processSummary:processSummary,isLoading:isLoading})=>{const processCount=Object(external_kbnSharedDeps_React_.useMemo)(()=>({total:isLoading?-1:processSummary.total,...Object(external_kbnSharedDeps_Lodash_.mapValues)(STATE_NAMES,()=>isLoading?-1:0),...isLoading?{}:processSummary}),[processSummary,isLoading]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"m",responsive:!1,wrap:!0},Object.entries(processCount).map(([field,value])=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList,{compressed:!0},external_kbnSharedDeps_React_default.a.createElement(ColumnTitle,null,columnTitles[field]),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,-1===value?external_kbnSharedDeps_React_default.a.createElement(LoadingSpinner,null):value))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHorizontalRule,{margin:"m"}))},columnTitles={total:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processes.headingTotalProcesses",{defaultMessage:"Total processes"}),...STATE_NAMES},LoadingSpinner=Object(common_.euiStyled)(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner).attrs({size:"m"})`
  margin-top: 2px;
  margin-bottom: 3px;
`,ColumnTitle=Object(common_.euiStyled)(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle)`
  white-space: nowrap;
`;var formatters=__webpack_require__(33);const ProcessRowCharts=({command:command})=>{const{loading:loading,error:error,response:response}=function(command){const[inErrorState,setInErrorState]=Object(external_kbnSharedDeps_React_.useState)(!1),{hostTerm:hostTerm,timefield:timefield,indexPattern:indexPattern,to:to}=useProcessListContext(),{error:error,loading:loading,response:response,makeRequest:makeRequest}=Object(use_http_request.a)("/api/metrics/process_list/chart","POST",JSON.stringify({hostTerm:hostTerm,timefield:timefield,indexPattern:indexPattern,to:to,command:command}),response=>Object(pipeable.pipe)(http_api.h.decode(response),Object(Either.fold)(Object(runtime_types.c)(runtime_types.a),lib_function.identity)));return Object(external_kbnSharedDeps_React_.useEffect)(()=>setInErrorState(!0),[error]),Object(external_kbnSharedDeps_React_.useEffect)(()=>setInErrorState(!1),[loading]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{makeRequest()},[makeRequest]),{error:inErrorState,loading:loading,response:response,makeRequest:makeRequest}}(command),isLoading=loading||!response,cpuChart=error?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"alert",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,failedToLoadChart)}):isLoading?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingChart,null):external_kbnSharedDeps_React_default.a.createElement(ProcessChart,{timeseries:response.cpu,color:color_palette.a.color2,label:cpuMetricLabel}),memoryChart=error?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"alert",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,failedToLoadChart)}):isLoading?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingChart,null):external_kbnSharedDeps_React_default.a.createElement(ProcessChart,{timeseries:response.memory,color:color_palette.a.color0,label:memoryMetricLabel});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,cpuMetricLabel),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,cpuChart)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,memoryMetricLabel),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,memoryChart)))},ProcessChart=({timeseries:timeseries,color:color,label:label})=>{const chartMetric={color:color,aggregation:"avg",label:label},isDarkMode=Object(kibanaReact_public_.useUiSetting)("theme:darkMode"),dateFormatter=Object(external_kbnSharedDeps_React_.useMemo)(()=>{var _first,_last;if(!timeseries)return()=>"";const firstTimestamp=null===(_first=Object(external_kbnSharedDeps_Lodash_.first)(timeseries.rows))||void 0===_first?void 0:_first.timestamp,lastTimestamp=null===(_last=Object(external_kbnSharedDeps_Lodash_.last)(timeseries.rows))||void 0===_last?void 0:_last.timestamp;return null==firstTimestamp||null==lastTimestamp?value=>""+value:Object(external_kbnSharedDeps_ElasticCharts_.niceTimeFormatter)([firstTimestamp,lastTimestamp])},[timeseries]),yAxisFormatter=Object(formatters.b)("percent"),tooltipProps={headerFormatter:tooltipValue=>external_kbnSharedDeps_Moment_default()(tooltipValue.value).format("Y-MM-DD HH:mm:ss.SSS")},dataDomain=Object(calculate_domain.a)(timeseries,[chartMetric],!1),domain=dataDomain?{max:1.1*dataDomain.max,min:dataDomain.min}:{max:0,min:0};return external_kbnSharedDeps_React_default.a.createElement(ChartContainer,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Chart,null,external_kbnSharedDeps_React_default.a.createElement(series_chart.a,{type:use_metrics_explorer_options.b.area,metric:chartMetric,id:"0",series:timeseries,stack:!1}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Axis,{id:"timestamp",position:external_kbnSharedDeps_ElasticCharts_.Position.Bottom,showOverlappingTicks:!0,tickFormat:dateFormatter}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Axis,{id:"values",position:external_kbnSharedDeps_ElasticCharts_.Position.Left,tickFormat:yAxisFormatter,domain:domain,ticks:6,showGridLines:!0}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Settings,{tooltip:tooltipProps,theme:getChartTheme(isDarkMode)})))},ChartContainer=common_.euiStyled.div`
  width: 100%;
  height: 140px;
`,cpuMetricLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processes.expandedRowLabelCPU",{defaultMessage:"CPU"}),memoryMetricLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processes.expandedRowLabelMemory",{defaultMessage:"Memory"}),failedToLoadChart=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processes.failedToLoadChart",{defaultMessage:"Unable to load chart"}),ProcessRow=({cells:cells,item:item})=>{const[isExpanded,setIsExpanded]=Object(external_kbnSharedDeps_React_.useState)(!1);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTableRow,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTableRowCell,{isExpander:!0,textOnly:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{iconType:isExpanded?"arrowDown":"arrowRight","aria-expanded":isExpanded,onClick:()=>setIsExpanded(!isExpanded)})),cells),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTableRow,{isExpandable:!0,isExpandedRow:isExpanded},isExpanded&&external_kbnSharedDeps_React_default.a.createElement(auto_sizer.a,{bounds:!0},({measureRef:measureRef,bounds:{height:height=0}})=>external_kbnSharedDeps_React_default.a.createElement(ExpandedRowCell,{commandHeight:height},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(ExpandedRowDescriptionList,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement("div",{ref:measureRef},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processes.expandedRowLabelCommand",{defaultMessage:"Command"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,external_kbnSharedDeps_React_default.a.createElement(ExpandedCommandLine,null,item.command)))),item.apmTrace&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,null,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processes.viewTraceInAPM",{defaultMessage:"View trace in APM"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGrid,{columns:2,gutterSize:"s",responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processes.expandedRowLabelPID",{defaultMessage:"PID"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,external_kbnSharedDeps_React_default.a.createElement(CodeListItem,null,item.pid))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListTitle,null,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processes.expandedRowLabelUser",{defaultMessage:"User"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescriptionListDescription,null,external_kbnSharedDeps_React_default.a.createElement(CodeListItem,null,item.user))),external_kbnSharedDeps_React_default.a.createElement(ProcessRowCharts,{command:item.command})))))))},ExpandedRowDescriptionList=Object(common_.euiStyled)(external_kbnSharedDeps_ElasticEui_.EuiDescriptionList).attrs({compressed:!0})`
  width: 100%;
`,CodeListItem=Object(common_.euiStyled)(external_kbnSharedDeps_ElasticEui_.EuiCode).attrs({transparentBackground:!0})`
  padding: 0 !important;
  & code.euiCodeBlock__code {
    white-space: nowrap !important;
    vertical-align: middle;
  }
`,ExpandedCommandLine=Object(common_.euiStyled)(external_kbnSharedDeps_ElasticEui_.EuiCode).attrs({transparentBackground:!0})`
  padding: 0 !important;
  margin-bottom: ${props=>props.theme.eui.euiSizeS};
`,ExpandedRowCell=Object(common_.euiStyled)(external_kbnSharedDeps_ElasticEui_.EuiTableRowCell).attrs({textOnly:!1,colSpan:6})`
  height: ${props=>props.commandHeight+240}px;
  padding: 0 ${props=>props.theme.eui.paddingSizes.m};
  background-color: ${props=>props.theme.eui.euiColorLightestShade};
`,StateBadge=({state:state})=>{switch(state){case"running":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBadge,{color:"secondary"},STATE_NAMES.running);case"sleeping":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBadge,{color:"default"},STATE_NAMES.sleeping);case"dead":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBadge,{color:"danger"},STATE_NAMES.dead);case"stopped":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBadge,{color:"warning"},STATE_NAMES.stopped);case"idle":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBadge,{color:"primary"},STATE_NAMES.idle);case"zombie":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBadge,{color:"danger"},STATE_NAMES.zombie);default:return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBadge,{color:"hollow"},STATE_NAMES.unknown)}};const ProcessesTable=({processList:processList,currentTime:currentTime,isLoading:isLoading,sortBy:sortBy,setSortBy:setSortBy,clearSearchBar:clearSearchBar})=>{const{updateSortableProperties:updateSortableProperties}=function(sortablePropertyItems,defaultSortProperty,callback){const[sortableProperties]=Object(external_kbnSharedDeps_React_.useState)(new external_kbnSharedDeps_ElasticEui_.SortableProperties(sortablePropertyItems,defaultSortProperty));return{updateSortableProperties:Object(external_kbnSharedDeps_React_.useCallback)(property=>{sortableProperties.sortOn(property),callback(Object(external_kbnSharedDeps_Lodash_.omit)(sortableProperties.getSortedProperty(),"getValue"))},[sortableProperties,callback])}}([{name:"startTime",getValue:item=>Date.parse(item.startTime),isAscending:!0},{name:"cpu",getValue:item=>item.cpu,isAscending:!1},{name:"memory",getValue:item=>item.memory,isAscending:!1}],"cpu",setSortBy),currentItems=Object(external_kbnSharedDeps_React_.useMemo)(()=>processList.sort((a,b)=>STATE_ORDER.indexOf(a.state)-STATE_ORDER.indexOf(b.state)),[processList]);return isLoading?external_kbnSharedDeps_React_default.a.createElement(processes_table_LoadingPlaceholder,null):0===currentItems.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"search",titleSize:"s",title:external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.noProcesses",{defaultMessage:"No processes found"})),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.nodeDetails.noProcessesBody",defaultMessage:"Try modifying your filter. Only processes that are within the configured {metricbeatDocsLink} will display here.",values:{metricbeatDocsLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:"https://www.elastic.co/guide/en/beats/metricbeat/current/metricbeat-module-system.html",target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.nodeDetails.noProcessesBody.metricbeatDocsLinkText",defaultMessage:"top N by CPU or Memory"}))}})),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{onClick:clearSearchBar},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.noProcessesClearFilters",{defaultMessage:"Clear filters"}))}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTable,{responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTableHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTableHeaderCell,{width:24}),processes_table_columns.map(column=>{var _column$align;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTableHeaderCell,{key:String(column.field)+"-header",align:null!==(_column$align=column.align)&&void 0!==_column$align?_column$align:external_kbnSharedDeps_ElasticEui_.LEFT_ALIGNMENT,width:column.width,onSort:column.sortable?()=>updateSortableProperties(column.field):void 0,isSorted:sortBy.name===column.field,isSortAscending:sortBy.name===column.field&&sortBy.isAscending},column.name)})),external_kbnSharedDeps_React_default.a.createElement(StyledTableBody,null,external_kbnSharedDeps_React_default.a.createElement(ProcessesTableBody,{items:currentItems,currentTime:currentTime}))))},processes_table_LoadingPlaceholder=()=>external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:"100%",height:"200px",padding:"16px",display:"flex",alignItems:"center",justifyContent:"center"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingChart,{size:"xl"})),ProcessesTableBody=({items:items,currentTime:currentTime})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,items.map((item,i)=>{const cells=processes_table_columns.map(column=>{var _column$align2,_column$textOnly;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTableRowCell,{key:`${String(column.field)}-${i}`,header:column.name,align:null!==(_column$align2=column.align)&&void 0!==_column$align2?_column$align2:external_kbnSharedDeps_ElasticEui_.LEFT_ALIGNMENT,textOnly:null===(_column$textOnly=column.textOnly)||void 0===_column$textOnly||_column$textOnly},column.render?column.render(item[column.field],currentTime):item[column.field])});return external_kbnSharedDeps_React_default.a.createElement(ProcessRow,{cells:cells,item:item,key:"row-"+i})})),StyledTableBody=Object(common_.euiStyled)(external_kbnSharedDeps_ElasticEui_.EuiTableBody)`
  & .euiTableCellContent {
    padding-top: 0;
    padding-bottom: 0;
    
  }
`,RuntimeCell=({startTime:startTime,currentTime:currentTime})=>{let remainingRuntimeMS=currentTime-startTime;const runtimeHours=Math.floor(remainingRuntimeMS/36e5);remainingRuntimeMS-=36e5*runtimeHours;const runtimeMinutes=Math.floor(remainingRuntimeMS/6e4);remainingRuntimeMS-=6e4*runtimeMinutes;const runtimeSeconds=Math.floor(remainingRuntimeMS/1e3);remainingRuntimeMS-=1e3*runtimeSeconds;const runtimeDisplayHours=runtimeHours?runtimeHours+":":"",runtimeDisplayMinutes=runtimeMinutes<10?`0${runtimeMinutes}:`:runtimeMinutes+":",runtimeDisplaySeconds=runtimeSeconds<10?"0"+runtimeSeconds:runtimeSeconds;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,`${runtimeDisplayHours}${runtimeDisplayMinutes}${runtimeDisplaySeconds}`)},processes_table_columns=[{field:"state",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processes.columnLabelState",{defaultMessage:"State"}),sortable:!1,render:state=>external_kbnSharedDeps_React_default.a.createElement(StateBadge,{state:state}),width:84,textOnly:!1},{field:"command",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processes.columnLabelCommand",{defaultMessage:"Command"}),sortable:!1,width:"40%",render:command=>external_kbnSharedDeps_React_default.a.createElement(CodeLine,null,command)},{field:"startTime",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processes.columnLabelTime",{defaultMessage:"Time"}),align:external_kbnSharedDeps_ElasticEui_.RIGHT_ALIGNMENT,sortable:!0,render:(startTime,currentTime)=>external_kbnSharedDeps_React_default.a.createElement(RuntimeCell,{startTime:startTime,currentTime:currentTime})},{field:"cpu",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processes.columnLabelCPU",{defaultMessage:"CPU"}),sortable:!0,render:value=>formatters.a.percent(value)},{field:"memory",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processes.columnLabelMemory",{defaultMessage:"Mem."}),sortable:!0,render:value=>formatters.a.percent(value)}],CodeLine=common_.euiStyled.div`
  font-family: ${props=>props.theme.eui.euiCodeFontFamily};
  font-size: ${props=>props.theme.eui.euiFontSizeS};
  white-space: pre;
  overflow: hidden;
  text-overflow: ellipsis;
`,escapeReservedCharacters=clause=>clause.replace(/([+-=!\(\)\{\}\[\]^"~*?:\\/!]|&&|\|\|)/g,"\\$1"),ProcessesTab={id:"processes",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.tabs.processes",{defaultMessage:"Processes"}),content:({currentTime:currentTime,node:node,nodeType:nodeType,options:options})=>{var _ref,_response$processList;const[searchBarState,setSearchBarState]=Object(external_kbnSharedDeps_React_.useState)(external_kbnSharedDeps_ElasticEui_.Query.MATCH_ALL),[searchFilter,setSearchFilter]=Object(external_kbnSharedDeps_React_.useState)(""),[sortBy,setSortBy]=Object(external_kbnSharedDeps_React_.useState)({name:"cpu",isAscending:!1}),timefield=options.fields.timestamp,hostTerm=Object(external_kbnSharedDeps_React_.useMemo)(()=>({[options.fields&&Reflect.has(options.fields,nodeType)?Reflect.get(options.fields,nodeType):nodeType]:node.name}),[options,node,nodeType]),{loading:loading,error:error,response:response,makeRequest:reload}=function(hostTerm,timefield,to,sortBy,searchFilter){const{createDerivedIndexPattern:createDerivedIndexPattern}=Object(metrics_source.b)(),indexPattern=createDerivedIndexPattern("metrics").title,[inErrorState,setInErrorState]=Object(external_kbnSharedDeps_React_.useState)(!1),parsedSortBy="runtimeLength"===sortBy.name?{...sortBy,name:"startTime"}:sortBy,{error:error,loading:loading,response:response,makeRequest:makeRequest}=Object(use_http_request.a)("/api/metrics/process_list","POST",JSON.stringify({hostTerm:hostTerm,timefield:timefield,indexPattern:indexPattern,to:to,sortBy:parsedSortBy,searchFilter:searchFilter}),response=>Object(pipeable.pipe)(http_api.i.decode(response),Object(Either.fold)(Object(runtime_types.c)(runtime_types.a),lib_function.identity)));return Object(external_kbnSharedDeps_React_.useEffect)(()=>setInErrorState(!0),[error]),Object(external_kbnSharedDeps_React_.useEffect)(()=>setInErrorState(!1),[loading]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{makeRequest()},[makeRequest]),{error:inErrorState,loading:loading,response:response,makeRequest:makeRequest}}(hostTerm,timefield,currentTime,sortBy,(query=>{if(""===query.trim())return[{match_all:{}}];const elements=query.split(" ").map(s=>s.trim()).filter(Boolean),stateFilter=elements.filter(s=>s.startsWith("state="));return[...elements.filter(s=>!s.startsWith("state=")).map(clause=>({query_string:{fields:["system.process.cmdline"],query:`*${escapeReservedCharacters(clause)}*`,minimum_should_match:1}})),...stateFilter.map(state=>({match:{"system.process.state":state.replace("state=","")}}))]})(searchFilter)),debouncedSearchOnChange=Object(external_kbnSharedDeps_React_.useMemo)(()=>Object(external_kbnSharedDeps_Lodash_.debounce)(queryText=>setSearchFilter(queryText),500),[setSearchFilter]),searchBarOnChange=Object(external_kbnSharedDeps_React_.useCallback)(({query:query,queryText:queryText})=>{setSearchBarState(query),debouncedSearchOnChange(queryText)},[setSearchBarState,debouncedSearchOnChange]),clearSearchBar=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setSearchBarState(external_kbnSharedDeps_ElasticEui_.Query.MATCH_ALL),setSearchFilter("")},[setSearchBarState,setSearchFilter]);return external_kbnSharedDeps_React_default.a.createElement(shared_TabContent,null,external_kbnSharedDeps_React_default.a.createElement(ProcessListContextProvider,{hostTerm:hostTerm,to:currentTime,timefield:timefield},external_kbnSharedDeps_React_default.a.createElement(SummaryTable,{isLoading:loading,processSummary:null!==(_ref=error?null:null==response?void 0:response.summary)&&void 0!==_ref?_ref:{total:0}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processesHeader",{defaultMessage:"Top processes"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIconTip,{"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processesHeader.tooltipLabel",{defaultMessage:"More info"}),size:"m",type:"iInCircle",content:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processesHeader.tooltipBody",{defaultMessage:"The table below aggregates the top CPU and top memory consuming processes. It does not display all processes."})}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSearchBar,{query:searchBarState,onChange:searchBarOnChange,box:{incremental:!0,placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.searchForProcesses",{defaultMessage:"Search for processes"})},filters:[{type:"field_value_selection",field:"state",name:"State",operator:"exact",multiSelect:!1,options:Object.entries(STATE_NAMES).map(([value,view])=>({value:value,view:view}))}]}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),error?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"alert",title:external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processListError",{defaultMessage:"Unable to load process data"})),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{color:"primary",fill:!0,onClick:reload},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.nodeDetails.processListRetry",{defaultMessage:"Try again"}))}):external_kbnSharedDeps_React_default.a.createElement(ProcessesTable,{currentTime:currentTime,isLoading:loading||!response,processList:null!==(_response$processList=null==response?void 0:response.processList)&&void 0!==_response$processList?_response$processList:[],sortBy:sortBy,setSortBy:setSortBy,clearSearchBar:clearSearchBar})))}};var metadata_api=__webpack_require__(193),inventory_models_metrics=__webpack_require__(208);const getFilteredMetrics=(requiredMetrics,metadata)=>{const metricMetadata=metadata.filter(data=>data&&"metrics"===data.source).map(data=>data&&data.name);return requiredMetrics.filter(metric=>{const metricModel=(0,inventory_models_metrics.a.tsvb[metric])("@timestamp","test",">=1m");return metricMetadata.some(m=>m&&metricModel.requires.includes(m))})};function useMetadata(nodeId,nodeType,requiredMetrics,sourceId,timeRange){const{error:error,loading:loading,response:response,makeRequest:makeRequest}=Object(use_http_request.a)("/api/infra/metadata","POST",JSON.stringify({nodeId:nodeId,nodeType:nodeType,sourceId:sourceId,timeRange:{from:timeRange.from,to:timeRange.to}}),response=>Object(pipeable.pipe)(metadata_api.a.decode(response),Object(Either.fold)(Object(runtime_types.c)(runtime_types.a),lib_function.identity)));return Object(external_kbnSharedDeps_React_.useEffect)(()=>{(async()=>{await makeRequest()})()},[makeRequest]),{name:response&&response.name||"",filteredRequiredMetrics:response&&getFilteredMetrics(requiredMetrics,response.features)||[],error:error&&error.message||null,loading:loading,metadata:response,cloudId:response&&response.info&&response.info.cloud&&response.info.cloud.instance&&response.info.cloud.instance.id||""}}const getFields=(metadata,group)=>{var _metadata$info,_metadata$info$host,_metadata$info2,_metadata$info2$host,_metadata$info3,_metadata$info3$host,_metadata$info4,_metadata$info4$host,_metadata$info5,_metadata$info5$host,_metadata$info6,_metadata$info6$host,_metadata$info7,_metadata$info7$host,_metadata$info7$host$,_metadata$info8,_metadata$info8$host,_metadata$info8$host$,_metadata$info9,_metadata$info9$host,_metadata$info9$host$,_metadata$info10,_metadata$info10$host,_metadata$info10$host2,_metadata$info11,_metadata$info11$host,_metadata$info11$host2,_metadata$info12,_metadata$info12$host,_metadata$info12$host2,_metadata$info13,_metadata$info13$clou,_metadata$info13$clou2,_metadata$info14,_metadata$info14$clou,_metadata$info14$clou2,_metadata$info15,_metadata$info15$clou,_metadata$info16,_metadata$info16$clou,_metadata$info16$clou2,_metadata$info17,_metadata$info17$clou,_metadata$info17$clou2,_metadata$info18,_metadata$info18$clou,_metadata$info18$clou2,_metadata$info19,_metadata$info19$clou,_metadata$info20,_metadata$info20$clou,_metadata$info21,_metadata$info21$agen,_metadata$info22,_metadata$info22$agen,_metadata$info23,_metadata$info23$agen;switch(group){case"host":return prune([{name:"host.architecture",value:null===(_metadata$info=metadata.info)||void 0===_metadata$info||null===(_metadata$info$host=_metadata$info.host)||void 0===_metadata$info$host?void 0:_metadata$info$host.architecture},{name:"host.hostname",value:null===(_metadata$info2=metadata.info)||void 0===_metadata$info2||null===(_metadata$info2$host=_metadata$info2.host)||void 0===_metadata$info2$host?void 0:_metadata$info2$host.name},{name:"host.id",value:null===(_metadata$info3=metadata.info)||void 0===_metadata$info3||null===(_metadata$info3$host=_metadata$info3.host)||void 0===_metadata$info3$host?void 0:_metadata$info3$host.id},{name:"host.ip",value:null===(_metadata$info4=metadata.info)||void 0===_metadata$info4||null===(_metadata$info4$host=_metadata$info4.host)||void 0===_metadata$info4$host?void 0:_metadata$info4$host.ip},{name:"host.mac",value:null===(_metadata$info5=metadata.info)||void 0===_metadata$info5||null===(_metadata$info5$host=_metadata$info5.host)||void 0===_metadata$info5$host?void 0:_metadata$info5$host.mac},{name:"host.name",value:null===(_metadata$info6=metadata.info)||void 0===_metadata$info6||null===(_metadata$info6$host=_metadata$info6.host)||void 0===_metadata$info6$host?void 0:_metadata$info6$host.name},{name:"host.os.build",value:null===(_metadata$info7=metadata.info)||void 0===_metadata$info7||null===(_metadata$info7$host=_metadata$info7.host)||void 0===_metadata$info7$host||null===(_metadata$info7$host$=_metadata$info7$host.os)||void 0===_metadata$info7$host$?void 0:_metadata$info7$host$.build},{name:"host.os.family",value:null===(_metadata$info8=metadata.info)||void 0===_metadata$info8||null===(_metadata$info8$host=_metadata$info8.host)||void 0===_metadata$info8$host||null===(_metadata$info8$host$=_metadata$info8$host.os)||void 0===_metadata$info8$host$?void 0:_metadata$info8$host$.family},{name:"host.os.name",value:null===(_metadata$info9=metadata.info)||void 0===_metadata$info9||null===(_metadata$info9$host=_metadata$info9.host)||void 0===_metadata$info9$host||null===(_metadata$info9$host$=_metadata$info9$host.os)||void 0===_metadata$info9$host$?void 0:_metadata$info9$host$.name},{name:"host.os.kernel",value:null===(_metadata$info10=metadata.info)||void 0===_metadata$info10||null===(_metadata$info10$host=_metadata$info10.host)||void 0===_metadata$info10$host||null===(_metadata$info10$host2=_metadata$info10$host.os)||void 0===_metadata$info10$host2?void 0:_metadata$info10$host2.kernel},{name:"host.os.platform",value:null===(_metadata$info11=metadata.info)||void 0===_metadata$info11||null===(_metadata$info11$host=_metadata$info11.host)||void 0===_metadata$info11$host||null===(_metadata$info11$host2=_metadata$info11$host.os)||void 0===_metadata$info11$host2?void 0:_metadata$info11$host2.platform},{name:"host.os.version",value:null===(_metadata$info12=metadata.info)||void 0===_metadata$info12||null===(_metadata$info12$host=_metadata$info12.host)||void 0===_metadata$info12$host||null===(_metadata$info12$host2=_metadata$info12$host.os)||void 0===_metadata$info12$host2?void 0:_metadata$info12$host2.version}]);case"cloud":return prune([{name:"cloud.account.id",value:null===(_metadata$info13=metadata.info)||void 0===_metadata$info13||null===(_metadata$info13$clou=_metadata$info13.cloud)||void 0===_metadata$info13$clou||null===(_metadata$info13$clou2=_metadata$info13$clou.account)||void 0===_metadata$info13$clou2?void 0:_metadata$info13$clou2.id},{name:"cloud.account.name",value:null===(_metadata$info14=metadata.info)||void 0===_metadata$info14||null===(_metadata$info14$clou=_metadata$info14.cloud)||void 0===_metadata$info14$clou||null===(_metadata$info14$clou2=_metadata$info14$clou.account)||void 0===_metadata$info14$clou2?void 0:_metadata$info14$clou2.name},{name:"cloud.availability_zone",value:null===(_metadata$info15=metadata.info)||void 0===_metadata$info15||null===(_metadata$info15$clou=_metadata$info15.cloud)||void 0===_metadata$info15$clou?void 0:_metadata$info15$clou.availability_zone},{name:"cloud.instance.id",value:null===(_metadata$info16=metadata.info)||void 0===_metadata$info16||null===(_metadata$info16$clou=_metadata$info16.cloud)||void 0===_metadata$info16$clou||null===(_metadata$info16$clou2=_metadata$info16$clou.instance)||void 0===_metadata$info16$clou2?void 0:_metadata$info16$clou2.id},{name:"cloud.instance.name",value:null===(_metadata$info17=metadata.info)||void 0===_metadata$info17||null===(_metadata$info17$clou=_metadata$info17.cloud)||void 0===_metadata$info17$clou||null===(_metadata$info17$clou2=_metadata$info17$clou.instance)||void 0===_metadata$info17$clou2?void 0:_metadata$info17$clou2.name},{name:"cloud.machine.type",value:null===(_metadata$info18=metadata.info)||void 0===_metadata$info18||null===(_metadata$info18$clou=_metadata$info18.cloud)||void 0===_metadata$info18$clou||null===(_metadata$info18$clou2=_metadata$info18$clou.machine)||void 0===_metadata$info18$clou2?void 0:_metadata$info18$clou2.type},{name:"cloud.provider",value:null===(_metadata$info19=metadata.info)||void 0===_metadata$info19||null===(_metadata$info19$clou=_metadata$info19.cloud)||void 0===_metadata$info19$clou?void 0:_metadata$info19$clou.provider},{name:"cloud.region",value:null===(_metadata$info20=metadata.info)||void 0===_metadata$info20||null===(_metadata$info20$clou=_metadata$info20.cloud)||void 0===_metadata$info20$clou?void 0:_metadata$info20$clou.region}]);case"agent":return prune([{name:"agent.id",value:null===(_metadata$info21=metadata.info)||void 0===_metadata$info21||null===(_metadata$info21$agen=_metadata$info21.agent)||void 0===_metadata$info21$agen?void 0:_metadata$info21$agen.id},{name:"agent.version",value:null===(_metadata$info22=metadata.info)||void 0===_metadata$info22||null===(_metadata$info22$agen=_metadata$info22.agent)||void 0===_metadata$info22$agen?void 0:_metadata$info22$agen.version},{name:"agent.policy",value:null===(_metadata$info23=metadata.info)||void 0===_metadata$info23||null===(_metadata$info23$agen=_metadata$info23.agent)||void 0===_metadata$info23$agen?void 0:_metadata$info23$agen.policy}])}},prune=fields=>fields.filter(f=>!!f.value);var react_intl_lib=__webpack_require__(279);const Table=props=>{const{rows:rows,title:title,onClick:onClick}=props,columns=Object(external_kbnSharedDeps_React_.useMemo)(()=>[{field:"name",name:"",width:"35%",sortable:!1,render:(name,item)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("strong",null,item.name))},{field:"value",name:"",width:"65%",sortable:!1,render:(_name,item)=>external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"xs",alignItems:"center",responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.tabs.metadata.setFilterTooltip",{defaultMessage:"View event with filter"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{color:"subdued",size:"s",iconType:"filter","aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.tabs.metadata.filterAriaLabel",{defaultMessage:"Filter"}),onClick:()=>onClick(item)}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,!Array.isArray(item.value)&&item.value,Array.isArray(item.value)&&external_kbnSharedDeps_React_default.a.createElement(ArrayValue,{values:item.value}))))}],[onClick]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("h4",null,title)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(table_TableWithoutHeader,{tableLayout:"fixed",compressed:!0,responsive:!1,columns:columns,items:rows}))};class table_TableWithoutHeader extends external_kbnSharedDeps_ElasticEui_.EuiBasicTable{renderTableHead(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null)}}const ArrayValue=props=>{const{values:values}=props,[isExpanded,setIsExpanded]=Object(external_kbnSharedDeps_React_.useState)(!1),expand=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setIsExpanded(!0)},[]),collapse=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setIsExpanded(!1)},[]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,!isExpanded&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"xs",responsive:!1,alignItems:"baseline",wrap:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},Object(external_kbnSharedDeps_Lodash_.first)(values)," ... "),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:expand},external_kbnSharedDeps_React_default.a.createElement(react_intl_lib.FormattedMessage,{id:"xpack.infra.nodeDetails.tabs.metadata.seeMore",defaultMessage:"+{count} more",values:{count:values.length}})))),isExpanded&&external_kbnSharedDeps_React_default.a.createElement("div",null,values.map(v=>external_kbnSharedDeps_React_default.a.createElement("div",{key:v},v)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:collapse},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.tabs.metadata.seeLess",{defaultMessage:"Show less"}))))},TableWrapper=common_.euiStyled.div`
  &:not(:last-child) {
    margin-bottom: 16px
  }
`,properties_LoadingPlaceholder=()=>external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:"100%",height:"200px",padding:"16px",display:"flex",alignItems:"center",justifyContent:"center"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingChart,{size:"xl"})),PropertiesTab={id:"properties",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.tabs.metadata.title",{defaultMessage:"Metadata"}),content:props=>{const nodeId=props.node.id,nodeType=props.nodeType,inventoryModel=Object(inventory_models.b)(nodeType),{sourceId:sourceId}=Object(external_kbnSharedDeps_React_.useContext)(metrics_source.a.Context),{currentTimeRange:currentTimeRange}=useWaffleTimeContext(),{applyFilterQuery:applyFilterQuery}=useWaffleFiltersContext(),{loading:metadataLoading,metadata:metadata}=useMetadata(nodeId,nodeType,inventoryModel.requiredMetrics,sourceId,currentTimeRange),hostFields=Object(external_kbnSharedDeps_React_.useMemo)(()=>metadata?getFields(metadata,"host"):null,[metadata]),cloudFields=Object(external_kbnSharedDeps_React_.useMemo)(()=>metadata?getFields(metadata,"cloud"):null,[metadata]),agentFields=Object(external_kbnSharedDeps_React_.useMemo)(()=>metadata?getFields(metadata,"agent"):null,[metadata]),onFilter=Object(external_kbnSharedDeps_React_.useCallback)(item=>{applyFilterQuery({kind:"kuery",expression:`${item.name}: "${item.value}"`})},[applyFilterQuery]);return metadataLoading?external_kbnSharedDeps_React_default.a.createElement(properties_LoadingPlaceholder,null):external_kbnSharedDeps_React_default.a.createElement(shared_TabContent,null,hostFields&&hostFields.length>0&&external_kbnSharedDeps_React_default.a.createElement(TableWrapper,null,external_kbnSharedDeps_React_default.a.createElement(Table,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.tabs.metadata.hostsHeader",{defaultMessage:"Hosts"}),onClick:onFilter,rows:hostFields})),cloudFields&&cloudFields.length>0&&external_kbnSharedDeps_React_default.a.createElement(TableWrapper,null,external_kbnSharedDeps_React_default.a.createElement(Table,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.tabs.metadata.cloudHeader",{defaultMessage:"Cloud"}),onClick:onFilter,rows:cloudFields})),agentFields&&agentFields.length>0&&external_kbnSharedDeps_React_default.a.createElement(TableWrapper,null,external_kbnSharedDeps_React_default.a.createElement(Table,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.tabs.metadata.agentHeader",{defaultMessage:"Agent"}),onClick:onFilter,rows:agentFields})))}};var datemath=__webpack_require__(27);var shared=__webpack_require__(4);const paginationCursorRT=lib.tuple([lib.union([lib.string,lib.number]),lib.union([lib.string,lib.number])]),anomalyTypeRT=lib.keyof({metrics_hosts:null,metrics_k8s:null}),sortOptionsRT=lib.keyof({anomalyScore:null,dataset:null,startTime:null}),sortDirectionsRT=lib.keyof({asc:null,desc:null}),paginationPreviousPageCursorRT=lib.type({searchBefore:paginationCursorRT}),paginationNextPageCursorRT=lib.type({searchAfter:paginationCursorRT}),paginationRT=lib.intersection([lib.type({pageSize:lib.number}),lib.partial({cursor:lib.union([paginationPreviousPageCursorRT,paginationNextPageCursorRT])})]),sortRT=lib.type({field:sortOptionsRT,direction:sortDirectionsRT}),metricRT=lib.keyof({memory_usage:null,network_in:null,network_out:null}),metricsHostsAnomalyRT=lib.intersection([lib.type({id:lib.string,anomalyScore:lib.number,typical:lib.number,actual:lib.number,type:anomalyTypeRT,influencers:lib.array(lib.string),duration:lib.number,startTime:lib.number,jobId:lib.string}),lib.partial({partitionFieldName:lib.string,partitionFieldValue:lib.string})]),getMetricsHostsAnomaliesSuccessReponsePayloadRT=lib.intersection([lib.type({data:lib.intersection([lib.type({anomalies:lib.array(metricsHostsAnomalyRT),hasMoreEntries:lib.boolean}),lib.partial({paginationCursors:lib.type({previousPageCursor:paginationCursorRT,nextPageCursor:paginationCursorRT})})])}),lib.partial({timing:shared.c})]),getMetricsHostsAnomaliesRequestPayloadRT=lib.type({data:lib.intersection([lib.type({sourceId:lib.string,anomalyThreshold:lib.number,timeRange:shared.d}),lib.partial({query:lib.string,hostName:lib.string,metric:metricRT,pagination:paginationRT,sort:sortRT})])}),metricsK8sAnomalyRT=lib.intersection([lib.type({id:lib.string,anomalyScore:lib.number,typical:lib.number,actual:lib.number,type:anomalyTypeRT,influencers:lib.array(lib.string),duration:lib.number,startTime:lib.number,jobId:lib.string}),lib.partial({partitionFieldName:lib.string,partitionFieldValue:lib.string})]),getMetricsK8sAnomaliesSuccessReponsePayloadRT=lib.intersection([lib.type({data:lib.intersection([lib.type({anomalies:lib.array(metricsK8sAnomalyRT),hasMoreEntries:lib.boolean}),lib.partial({paginationCursors:lib.type({previousPageCursor:paginationCursorRT,nextPageCursor:paginationCursorRT})})])}),lib.partial({timing:shared.c})]),getMetricsK8sAnomaliesRequestPayloadRT=lib.type({data:lib.intersection([lib.type({sourceId:lib.string,anomalyThreshold:lib.number,timeRange:shared.d}),lib.partial({query:lib.string,metric:metricRT,pagination:paginationRT,sort:sortRT})])});var use_tracked_promise=__webpack_require__(79),use_kibana=__webpack_require__(16);const stateReducer=(state,action)=>{const resetPagination={page:1,paginationCursor:void 0};switch(action.type){case"changePaginationOptions":case"changeSortOptions":return{...state,...resetPagination,...action.payload};case"changeHasNextPage":case"changeLastReceivedCursors":return{...state,...action.payload};case"fetchNextPage":return state.lastReceivedCursors?{...state,page:state.page+1,paginationCursor:{searchAfter:state.lastReceivedCursors.nextPageCursor}}:state;case"fetchPreviousPage":return state.lastReceivedCursors?{...state,page:state.page-1,paginationCursor:{searchBefore:state.lastReceivedCursors.previousPageCursor}}:state;case"changeTimeRange":case"changeFilteredDatasets":return{...state,...resetPagination,...action.payload};default:return state}},STATE_DEFAULTS={page:1,lastReceivedCursors:void 0,paginationCursor:void 0,hasNextPage:!1},useMetricsK8sAnomaliesResults=({endTime:endTime,startTime:startTime,sourceId:sourceId,anomalyThreshold:anomalyThreshold,defaultSortOptions:defaultSortOptions,defaultPaginationOptions:defaultPaginationOptions,onGetMetricsHostsAnomaliesDatasetsError:onGetMetricsHostsAnomaliesDatasetsError,filteredDatasets:filteredDatasets})=>{const{services:services}=Object(use_kibana.b)(),[reducerState,dispatch]=Object(external_kbnSharedDeps_React_.useReducer)(stateReducer,STATE_DEFAULTS,stateDefaults=>({...stateDefaults,paginationOptions:defaultPaginationOptions,sortOptions:defaultSortOptions,filteredDatasets:filteredDatasets,timeRange:{start:startTime,end:endTime}})),[metricsK8sAnomalies,setMetricsK8sAnomalies]=Object(external_kbnSharedDeps_React_.useState)([]),[getMetricsK8sAnomaliesRequest,getMetricsK8sAnomalies]=Object(use_tracked_promise.c)({cancelPreviousOn:"creation",createPromise:async(metric,query)=>{const{timeRange:{start:queryStartTime,end:queryEndTime},sortOptions:sortOptions,paginationOptions:paginationOptions,paginationCursor:paginationCursor}=reducerState;return await callGetMetricsK8sAnomaliesAPI({sourceId:sourceId,anomalyThreshold:anomalyThreshold,startTime:queryStartTime,endTime:queryEndTime,metric:metric,query:query,sort:sortOptions,pagination:{...paginationOptions,cursor:paginationCursor}},services.http.fetch)},onResolve:({data:{anomalies:anomalies,paginationCursors:requestCursors,hasMoreEntries:hasMoreEntries}})=>{const{paginationCursor:paginationCursor}=reducerState;requestCursors&&dispatch({type:"changeLastReceivedCursors",payload:{lastReceivedCursors:requestCursors}}),!paginationCursor||paginationCursor&&"searchAfter"in paginationCursor?dispatch({type:"changeHasNextPage",payload:{hasNextPage:hasMoreEntries}}):paginationCursor&&"searchBefore"in paginationCursor&&dispatch({type:"changeHasNextPage",payload:{hasNextPage:!0}}),setMetricsK8sAnomalies(anomalies)}},[sourceId,anomalyThreshold,dispatch,reducerState.timeRange,reducerState.sortOptions,reducerState.paginationOptions,reducerState.paginationCursor,reducerState.filteredDatasets]),changeSortOptions=Object(external_kbnSharedDeps_React_.useCallback)(nextSortOptions=>{dispatch({type:"changeSortOptions",payload:{sortOptions:nextSortOptions}})},[dispatch]),changePaginationOptions=Object(external_kbnSharedDeps_React_.useCallback)(nextPaginationOptions=>{dispatch({type:"changePaginationOptions",payload:{paginationOptions:nextPaginationOptions}})},[dispatch]);Object(external_kbnSharedDeps_React_.useEffect)(()=>{dispatch({type:"changeTimeRange",payload:{timeRange:{start:startTime,end:endTime}}})},[startTime,endTime]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{dispatch({type:"changeFilteredDatasets",payload:{filteredDatasets:filteredDatasets}})},[filteredDatasets]);const handleFetchNextPage=Object(external_kbnSharedDeps_React_.useCallback)(()=>{reducerState.lastReceivedCursors&&dispatch({type:"fetchNextPage"})},[dispatch,reducerState]),handleFetchPreviousPage=Object(external_kbnSharedDeps_React_.useCallback)(()=>{reducerState.lastReceivedCursors&&dispatch({type:"fetchPreviousPage"})},[dispatch,reducerState]);return{metricsK8sAnomalies:metricsK8sAnomalies,getMetricsK8sAnomalies:getMetricsK8sAnomalies,isLoadingMetricsK8sAnomalies:Object(external_kbnSharedDeps_React_.useMemo)(()=>"pending"===getMetricsK8sAnomaliesRequest.state,[getMetricsK8sAnomaliesRequest.state]),hasFailedLoadingMetricsK8sAnomalies:Object(external_kbnSharedDeps_React_.useMemo)(()=>"rejected"===getMetricsK8sAnomaliesRequest.state,[getMetricsK8sAnomaliesRequest.state]),changeSortOptions:changeSortOptions,sortOptions:reducerState.sortOptions,changePaginationOptions:changePaginationOptions,paginationOptions:reducerState.paginationOptions,fetchPreviousPage:reducerState.page>1?handleFetchPreviousPage:void 0,fetchNextPage:reducerState.hasNextPage?handleFetchNextPage:void 0,page:reducerState.page}},callGetMetricsK8sAnomaliesAPI=async(requestArgs,fetch)=>{const{sourceId:sourceId,anomalyThreshold:anomalyThreshold,startTime:startTime,endTime:endTime,metric:metric,query:query,sort:sort,pagination:pagination}=requestArgs,response=await fetch("/api/infra/infra_ml/results/metrics_k8s_anomalies",{method:"POST",body:JSON.stringify(getMetricsK8sAnomaliesRequestPayloadRT.encode({data:{sourceId:sourceId,anomalyThreshold:anomalyThreshold,timeRange:{startTime:startTime,endTime:endTime},metric:metric,query:query,sort:sort,pagination:pagination}}))});return Object(runtime_types.b)(getMetricsK8sAnomaliesSuccessReponsePayloadRT)(response)},use_metrics_hosts_anomalies_stateReducer=(state,action)=>{const resetPagination={page:1,paginationCursor:void 0};switch(action.type){case"changePaginationOptions":case"changeSortOptions":return{...state,...resetPagination,...action.payload};case"changeHasNextPage":case"changeLastReceivedCursors":return{...state,...action.payload};case"fetchNextPage":return state.lastReceivedCursors?{...state,page:state.page+1,paginationCursor:{searchAfter:state.lastReceivedCursors.nextPageCursor}}:state;case"fetchPreviousPage":return state.lastReceivedCursors?{...state,page:state.page-1,paginationCursor:{searchBefore:state.lastReceivedCursors.previousPageCursor}}:state;case"changeTimeRange":case"changeFilteredDatasets":return{...state,...resetPagination,...action.payload};default:return state}},use_metrics_hosts_anomalies_STATE_DEFAULTS={page:1,lastReceivedCursors:void 0,paginationCursor:void 0,hasNextPage:!1},useMetricsHostsAnomaliesResults=({endTime:endTime,startTime:startTime,sourceId:sourceId,anomalyThreshold:anomalyThreshold,defaultSortOptions:defaultSortOptions,defaultPaginationOptions:defaultPaginationOptions,onGetMetricsHostsAnomaliesDatasetsError:onGetMetricsHostsAnomaliesDatasetsError,filteredDatasets:filteredDatasets})=>{const{services:services}=Object(use_kibana.b)(),[reducerState,dispatch]=Object(external_kbnSharedDeps_React_.useReducer)(use_metrics_hosts_anomalies_stateReducer,use_metrics_hosts_anomalies_STATE_DEFAULTS,stateDefaults=>({...stateDefaults,paginationOptions:defaultPaginationOptions,sortOptions:defaultSortOptions,filteredDatasets:filteredDatasets,timeRange:{start:startTime,end:endTime}})),[metricsHostsAnomalies,setMetricsHostsAnomalies]=Object(external_kbnSharedDeps_React_.useState)([]),[getMetricsHostsAnomaliesRequest,getMetricsHostsAnomalies]=Object(use_tracked_promise.c)({cancelPreviousOn:"creation",createPromise:async(metric,query,hostName)=>{const{timeRange:{start:queryStartTime,end:queryEndTime},sortOptions:sortOptions,paginationOptions:paginationOptions,paginationCursor:paginationCursor}=reducerState;return await callGetMetricHostsAnomaliesAPI({sourceId:sourceId,anomalyThreshold:anomalyThreshold,startTime:queryStartTime,endTime:queryEndTime,metric:metric,query:query,sort:sortOptions,pagination:{...paginationOptions,cursor:paginationCursor},hostName:hostName},services.http.fetch)},onResolve:({data:{anomalies:anomalies,paginationCursors:requestCursors,hasMoreEntries:hasMoreEntries}})=>{const{paginationCursor:paginationCursor}=reducerState;requestCursors&&dispatch({type:"changeLastReceivedCursors",payload:{lastReceivedCursors:requestCursors}}),!paginationCursor||paginationCursor&&"searchAfter"in paginationCursor?dispatch({type:"changeHasNextPage",payload:{hasNextPage:hasMoreEntries}}):paginationCursor&&"searchBefore"in paginationCursor&&dispatch({type:"changeHasNextPage",payload:{hasNextPage:!0}}),setMetricsHostsAnomalies(anomalies)}},[sourceId,anomalyThreshold,dispatch,reducerState.timeRange,reducerState.sortOptions,reducerState.paginationOptions,reducerState.paginationCursor,reducerState.filteredDatasets]),changeSortOptions=Object(external_kbnSharedDeps_React_.useCallback)(nextSortOptions=>{dispatch({type:"changeSortOptions",payload:{sortOptions:nextSortOptions}})},[dispatch]),changePaginationOptions=Object(external_kbnSharedDeps_React_.useCallback)(nextPaginationOptions=>{dispatch({type:"changePaginationOptions",payload:{paginationOptions:nextPaginationOptions}})},[dispatch]);Object(external_kbnSharedDeps_React_.useEffect)(()=>{dispatch({type:"changeTimeRange",payload:{timeRange:{start:startTime,end:endTime}}})},[startTime,endTime]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{dispatch({type:"changeFilteredDatasets",payload:{filteredDatasets:filteredDatasets}})},[filteredDatasets]);const handleFetchNextPage=Object(external_kbnSharedDeps_React_.useCallback)(()=>{reducerState.lastReceivedCursors&&dispatch({type:"fetchNextPage"})},[dispatch,reducerState]),handleFetchPreviousPage=Object(external_kbnSharedDeps_React_.useCallback)(()=>{reducerState.lastReceivedCursors&&dispatch({type:"fetchPreviousPage"})},[dispatch,reducerState]);return{metricsHostsAnomalies:metricsHostsAnomalies,getMetricsHostsAnomalies:getMetricsHostsAnomalies,isLoadingMetricsHostsAnomalies:Object(external_kbnSharedDeps_React_.useMemo)(()=>"pending"===getMetricsHostsAnomaliesRequest.state,[getMetricsHostsAnomaliesRequest.state]),hasFailedLoadingMetricsHostsAnomalies:Object(external_kbnSharedDeps_React_.useMemo)(()=>"rejected"===getMetricsHostsAnomaliesRequest.state,[getMetricsHostsAnomaliesRequest.state]),changeSortOptions:changeSortOptions,sortOptions:reducerState.sortOptions,changePaginationOptions:changePaginationOptions,paginationOptions:reducerState.paginationOptions,fetchPreviousPage:reducerState.page>1?handleFetchPreviousPage:void 0,fetchNextPage:reducerState.hasNextPage?handleFetchNextPage:void 0,page:reducerState.page,timeRange:reducerState.timeRange}},callGetMetricHostsAnomaliesAPI=async(requestArgs,fetch)=>{const{sourceId:sourceId,anomalyThreshold:anomalyThreshold,startTime:startTime,endTime:endTime,metric:metric,sort:sort,pagination:pagination,query:query,hostName:hostName}=requestArgs,response=await fetch("/api/infra/infra_ml/results/metrics_hosts_anomalies",{method:"POST",body:JSON.stringify(getMetricsHostsAnomaliesRequestPayloadRT.encode({data:{sourceId:sourceId,anomalyThreshold:anomalyThreshold,timeRange:{startTime:startTime,endTime:endTime},query:query,metric:metric,sort:sort,pagination:pagination,hostName:hostName}}))});return Object(runtime_types.b)(getMetricsHostsAnomaliesSuccessReponsePayloadRT)(response)},previousPageLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.logs.analysis.anomaliesTablePreviousPageLabel",{defaultMessage:"Previous page"}),nextPageLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.logs.analysis.anomaliesTableNextPageLabel",{defaultMessage:"Next page"}),PaginationControls=({fetchPreviousPage:fetchPreviousPage,fetchNextPage:fetchNextPage,page:page,isLoading:isLoading})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"arrowLeft",isDisabled:!fetchPreviousPage||isLoading,onClick:fetchPreviousPage,"aria-label":previousPageLabel}),external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement("strong",null,page)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"arrowRight",isDisabled:!fetchNextPage||isLoading,onClick:fetchNextPage,"aria-label":nextPageLabel}))));var log_analysis=__webpack_require__(77);const AnomalySummary=({anomaly:anomaly})=>{const{actual:actual,typical:typical}=anomaly,moreThanExpectedAnomalyMessage=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.ml.anomalyFlyout.anomaliesTableMoreThanExpectedAnomalyMessage",{defaultMessage:"more"}),fewerThanExpectedAnomalyMessage=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.ml.anomalyFlyout.anomaliesTableFewerThanExpectedAnomalyMessage",{defaultMessage:"fewer"}),isMore=actual>typical,message=isMore?moreThanExpectedAnomalyMessage:fewerThanExpectedAnomalyMessage,ratio=isMore?actual/typical:typical/actual,icon=isMore?"sortUp":"sortDown",ratioMessage=ratio!==1/0?Object(log_analysis.formatOneDecimalPlace)(ratio)+"x":"";return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s",responsive:!1,alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,component:"span"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:icon})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{component:"span"},`${ratioMessage} ${message}`))};var anomaly_severity_indicator=__webpack_require__(200),subscription_splash_content=__webpack_require__(214);const getMlCapabilitiesResponsePayloadRT=lib.type({capabilities:lib.type({canGetJobs:lib.boolean,canCreateJob:lib.boolean,canDeleteJob:lib.boolean,canOpenJob:lib.boolean,canCloseJob:lib.boolean,canForecastJob:lib.boolean,canGetDatafeeds:lib.boolean,canStartStopDatafeed:lib.boolean,canUpdateJob:lib.boolean,canUpdateDatafeed:lib.boolean,canPreviewDatafeed:lib.boolean}),isPlatinumOrTrialLicense:lib.boolean,mlFeatureEnabledInSpace:lib.boolean,upgradeInProgress:lib.boolean}),useInfraMLCapabilities=()=>{const{services:services}=Object(use_kibana.b)(),[mlCapabilities,setMlCapabilities]=Object(external_kbnSharedDeps_React_.useState)(initialMlCapabilities),[fetchMlCapabilitiesRequest,fetchMlCapabilities]=Object(use_tracked_promise.c)({cancelPreviousOn:"resolution",createPromise:async()=>{const rawResponse=await services.http.fetch("/api/ml/ml_capabilities");return Object(pipeable.pipe)(getMlCapabilitiesResponsePayloadRT.decode(rawResponse),Object(Either.fold)(Object(runtime_types.c)(runtime_types.a),lib_function.identity))},onResolve:response=>{setMlCapabilities(response)}},[]);Object(external_kbnSharedDeps_React_.useEffect)(()=>{fetchMlCapabilities()},[fetchMlCapabilities]);const isLoading=Object(external_kbnSharedDeps_React_.useMemo)(()=>"pending"===fetchMlCapabilitiesRequest.state,[fetchMlCapabilitiesRequest.state]),hasInfraMLSetupCapabilities=mlCapabilities.capabilities.canCreateJob,hasInfraMLReadCapabilities=mlCapabilities.capabilities.canGetJobs;return{hasInfraMLCapabilities:mlCapabilities.isPlatinumOrTrialLicense&&mlCapabilities.mlFeatureEnabledInSpace,hasInfraMLReadCapabilities:hasInfraMLReadCapabilities,hasInfraMLSetupCapabilities:hasInfraMLSetupCapabilities,isLoading:isLoading}},[InfraMLCapabilitiesProvider,useInfraMLCapabilitiesContext]=constate_cjs_default()(useInfraMLCapabilities),initialMlCapabilities={capabilities:{canGetJobs:!1,canCreateJob:!1,canDeleteJob:!1,canOpenJob:!1,canCloseJob:!1,canForecastJob:!1,canGetDatafeeds:!1,canStartStopDatafeed:!1,canUpdateJob:!1,canUpdateDatafeed:!1,canPreviewDatafeed:!1,canGetCalendars:!1,canCreateCalendar:!1,canDeleteCalendar:!1,canGetFilters:!1,canCreateFilter:!1,canDeleteFilter:!1,canFindFileStructure:!1,canGetDataFrameJobs:!1,canDeleteDataFrameJob:!1,canPreviewDataFrameJob:!1,canCreateDataFrameJob:!1,canStartStopDataFrameJob:!1},isPlatinumOrTrialLicense:!1,mlFeatureEnabledInSpace:!1,upgradeInProgress:!1};var log_analysis_setup=__webpack_require__(140),infra_ml=__webpack_require__(104);const createInitialState=({jobTypes:jobTypes})=>({jobStatus:jobTypes.reduce((accumulatedJobStatus,jobType)=>({...accumulatedJobStatus,[jobType]:"unknown"}),{}),jobSummaries:[],lastSetupErrorMessages:[],setupStatus:{type:"initializing"}}),hasSuccessfullyCreatedJob=jobId=>jobSetupResponses=>jobSetupResponses.filter(jobSetupResponse=>jobSetupResponse.id===jobId&&jobSetupResponse.success&&!jobSetupResponse.error).length>0,hasSuccessfullyStartedDatafeed=datafeedId=>datafeedSetupResponses=>datafeedSetupResponses.filter(datafeedSetupResponse=>datafeedSetupResponse.id===datafeedId&&datafeedSetupResponse.success&&datafeedSetupResponse.started&&!datafeedSetupResponse.error).length>0,getJobStatus=jobId=>jobSummaries=>jobSummaries.filter(jobSummary=>jobSummary.id===jobId).map(jobSummary=>"failed"===jobSummary.jobState||""===jobSummary.datafeedState?"failed":"closed"===jobSummary.jobState&&"stopped"===jobSummary.datafeedState&&jobSummary.fullJob&&null!=jobSummary.fullJob.finished_time?"finished":"closed"===jobSummary.jobState||"closing"===jobSummary.jobState||"stopped"===jobSummary.datafeedState?"stopped":"opening"===jobSummary.jobState?"initializing":"opened"===jobSummary.jobState&&"started"===jobSummary.datafeedState?"started":"unknown")[0]||"missing",getSetupStatus=everyJobStatus=>previousSetupStatus=>Object.entries(everyJobStatus).reduce((setupStatus,[,jobStatus])=>"missing"===jobStatus?{type:"required"}:"required"===setupStatus.type||"succeeded"===setupStatus.type?setupStatus:"skipped"===setupStatus.type||Object(infra_ml.e)(jobStatus)?{type:"skipped",newlyCreated:"skipped"===setupStatus.type&&setupStatus.newlyCreated}:setupStatus,previousSetupStatus),hasError=value=>null!=value.error,useModuleStatus=jobTypes=>Object(external_kbnSharedDeps_React_.useReducer)((jobTypes=>(state,action)=>{switch(action.type){case"startedSetup":return{...state,jobStatus:jobTypes.reduce((accumulatedJobStatus,jobType)=>({...accumulatedJobStatus,[jobType]:"initializing"}),{}),setupStatus:{type:"pending"}};case"finishedSetup":{const{datafeedSetupResults:datafeedSetupResults,jobSetupResults:jobSetupResults,jobSummaries:jobSummaries,spaceId:spaceId,sourceId:sourceId}=action,nextJobStatus=jobTypes.reduce((accumulatedJobStatus,jobType)=>({...accumulatedJobStatus,[jobType]:hasSuccessfullyCreatedJob(Object(infra_ml.c)(spaceId,sourceId,jobType))(jobSetupResults)&&hasSuccessfullyStartedDatafeed(Object(infra_ml.b)(spaceId,sourceId,jobType))(datafeedSetupResults)?"started":"failed"}),{}),nextSetupStatus=Object.values(nextJobStatus).every(jobState=>"started"===jobState)?{type:"succeeded"}:{type:"failed",reasons:[...Object.values(datafeedSetupResults).filter(hasError).map(datafeed=>datafeed.error.msg),...Object.values(jobSetupResults).filter(hasError).map(job=>job.error.msg)]};return{...state,jobStatus:nextJobStatus,jobSummaries:jobSummaries,setupStatus:nextSetupStatus}}case"failedSetup":return{...state,jobStatus:jobTypes.reduce((accumulatedJobStatus,jobType)=>({...accumulatedJobStatus,[jobType]:"failed"}),{}),setupStatus:{type:"failed",reasons:["unknown"]}};case"fetchingJobStatuses":return{...state,setupStatus:"unknown"===state.setupStatus.type?{type:"initializing"}:state.setupStatus};case"fetchedJobStatuses":{const{payload:jobSummaries,spaceId:spaceId,sourceId:sourceId}=action,{setupStatus:setupStatus}=state,nextJobStatus=jobTypes.reduce((accumulatedJobStatus,jobType)=>({...accumulatedJobStatus,[jobType]:getJobStatus(Object(infra_ml.c)(spaceId,sourceId,jobType))(jobSummaries)}),{}),nextSetupStatus=getSetupStatus(nextJobStatus)(setupStatus);return{...state,jobSummaries:jobSummaries,jobStatus:nextJobStatus,setupStatus:nextSetupStatus}}case"failedFetchingJobStatuses":return{...state,setupStatus:{type:"unknown"},jobStatus:jobTypes.reduce((accumulatedJobStatus,jobType)=>({...accumulatedJobStatus,[jobType]:"unknown"}),{})};case"viewedResults":return{...state,setupStatus:{type:"skipped",newlyCreated:!0}};default:return state}})(jobTypes),{jobTypes:jobTypes},createInitialState),useInfraMLModule=({sourceConfiguration:sourceConfiguration,moduleDescriptor:moduleDescriptor})=>{const{services:services}=Object(use_kibana.b)(),{spaceId:spaceId,sourceId:sourceId,timestampField:timestampField}=sourceConfiguration,[moduleStatus,dispatchModuleStatus]=useModuleStatus(moduleDescriptor.jobTypes),[,fetchJobStatus]=Object(use_tracked_promise.c)({cancelPreviousOn:"resolution",createPromise:async()=>(dispatchModuleStatus({type:"fetchingJobStatuses"}),await moduleDescriptor.getJobSummary(spaceId,sourceId,services.http.fetch)),onResolve:jobResponse=>{dispatchModuleStatus({type:"fetchedJobStatuses",payload:jobResponse,spaceId:spaceId,sourceId:sourceId})},onReject:()=>{dispatchModuleStatus({type:"failedFetchingJobStatuses"})}},[spaceId,sourceId]),[,setUpModule]=Object(use_tracked_promise.c)({cancelPreviousOn:"resolution",createPromise:async(selectedIndices,start,end,filter,partitionField)=>{dispatchModuleStatus({type:"startedSetup"});return{setupResult:await moduleDescriptor.setUpModule({start:start,end:end,filter:filter,moduleSourceConfiguration:{indices:selectedIndices,sourceId:sourceId,spaceId:spaceId,timestampField:timestampField},partitionField:partitionField},services.http.fetch),jobSummaries:await moduleDescriptor.getJobSummary(spaceId,sourceId,services.http.fetch)}},onResolve:({setupResult:{datafeeds:datafeeds,jobs:jobs},jobSummaries:jobSummaries})=>{dispatchModuleStatus({type:"finishedSetup",datafeedSetupResults:datafeeds,jobSetupResults:jobs,jobSummaries:jobSummaries,spaceId:spaceId,sourceId:sourceId})},onReject:()=>{dispatchModuleStatus({type:"failedSetup"})}},[moduleDescriptor.setUpModule,spaceId,sourceId,timestampField]),[cleanUpModuleRequest,cleanUpModule]=Object(use_tracked_promise.c)({cancelPreviousOn:"resolution",createPromise:async()=>await moduleDescriptor.cleanUpModule(spaceId,sourceId,services.http.fetch)},[spaceId,sourceId]),isCleaningUp=Object(external_kbnSharedDeps_React_.useMemo)(()=>"pending"===cleanUpModuleRequest.state,[cleanUpModuleRequest.state]),cleanUpAndSetUpModule=Object(external_kbnSharedDeps_React_.useCallback)((selectedIndices,start,end,filter,partitionField)=>{dispatchModuleStatus({type:"startedSetup"}),cleanUpModule().then(()=>{setUpModule(selectedIndices,start,end,filter,partitionField)}).catch(()=>{dispatchModuleStatus({type:"failedSetup"})})},[cleanUpModule,dispatchModuleStatus,setUpModule]),viewResults=Object(external_kbnSharedDeps_React_.useCallback)(()=>{dispatchModuleStatus({type:"viewedResults"})},[dispatchModuleStatus]),jobIds=Object(external_kbnSharedDeps_React_.useMemo)(()=>moduleDescriptor.getJobIds(spaceId,sourceId),[moduleDescriptor,spaceId,sourceId]);return{cleanUpAndSetUpModule:cleanUpAndSetUpModule,cleanUpModule:cleanUpModule,fetchJobStatus:fetchJobStatus,isCleaningUp:isCleaningUp,jobIds:jobIds,jobStatus:moduleStatus.jobStatus,jobSummaries:moduleStatus.jobSummaries,lastSetupErrorMessages:moduleStatus.lastSetupErrorMessages,moduleDescriptor:moduleDescriptor,setUpModule:setUpModule,setupStatus:moduleStatus.setupStatus,sourceConfiguration:sourceConfiguration,viewResults:viewResults}},useInfraMLModuleConfiguration=({moduleDescriptor:moduleDescriptor,sourceConfiguration:sourceConfiguration})=>({getIsJobConfigurationOutdated:Object(external_kbnSharedDeps_React_.useMemo)(()=>isJobConfigurationOutdated(moduleDescriptor,sourceConfiguration),[sourceConfiguration,moduleDescriptor])}),isJobConfigurationOutdated=({bucketSpan:bucketSpan},currentSourceConfiguration)=>jobSummary=>{if(!jobSummary.fullJob||!jobSummary.fullJob.custom_settings)return!1;const jobConfiguration=jobSummary.fullJob.custom_settings.metrics_source_config;return!(jobConfiguration&&jobConfiguration.bucketSpan===bucketSpan&&jobConfiguration.indexPattern&&isSubset(new Set(jobConfiguration.indexPattern.split(",")),new Set(currentSourceConfiguration.indices))&&jobConfiguration.timestampField===currentSourceConfiguration.timestampField)},isSubset=(subset,superset)=>Array.from(subset).every(subsetElement=>superset.has(subsetElement)),useInfraMLModuleDefinition=({sourceConfiguration:{spaceId:spaceId,sourceId:sourceId},moduleDescriptor:moduleDescriptor})=>{const{services:services}=Object(use_kibana.b)(),[moduleDefinition,setModuleDefinition]=Object(external_kbnSharedDeps_React_.useState)(),jobDefinitionByJobId=Object(external_kbnSharedDeps_React_.useMemo)(()=>moduleDefinition?moduleDefinition.jobs.reduce((accumulatedJobDefinitions,jobDefinition)=>({...accumulatedJobDefinitions,[Object(log_analysis.getJobId)(spaceId,sourceId,jobDefinition.id)]:jobDefinition}),{}):{},[moduleDefinition,sourceId,spaceId]),[fetchModuleDefinitionRequest,fetchModuleDefinition]=Object(use_tracked_promise.c)({cancelPreviousOn:"resolution",createPromise:async()=>await moduleDescriptor.getModuleDefinition(services.http.fetch),onResolve:response=>{setModuleDefinition(response)},onReject:()=>{setModuleDefinition(void 0)}},[moduleDescriptor.getModuleDefinition,spaceId,sourceId]),getIsJobDefinitionOutdated=Object(external_kbnSharedDeps_React_.useCallback)(jobSummary=>{var _jobSummary$fullJob$c,_jobSummary$fullJob,_jobSummary$fullJob$c2;const jobDefinition=jobDefinitionByJobId[jobSummary.id];if(null==jobDefinition)return!1;const currentRevision=null==jobDefinition?void 0:jobDefinition.config.custom_settings.job_revision;return(null!==(_jobSummary$fullJob$c=null===(_jobSummary$fullJob=jobSummary.fullJob)||void 0===_jobSummary$fullJob||null===(_jobSummary$fullJob$c2=_jobSummary$fullJob.custom_settings)||void 0===_jobSummary$fullJob$c2?void 0:_jobSummary$fullJob$c2.job_revision)&&void 0!==_jobSummary$fullJob$c?_jobSummary$fullJob$c:0)<(null!=currentRevision?currentRevision:0)},[jobDefinitionByJobId]);return{fetchModuleDefinition:fetchModuleDefinition,fetchModuleDefinitionRequestState:fetchModuleDefinitionRequest.state,getIsJobDefinitionOutdated:getIsJobDefinitionOutdated,jobDefinitionByJobId:jobDefinitionByJobId,moduleDefinition:moduleDefinition}},callGetJobDeletionTasks=async fetch=>{const jobDeletionTasksResponse=await fetch("/api/ml/jobs/deleting_jobs_tasks");return Object(runtime_types.b)(getJobDeletionTasksResponsePayloadRT)(jobDeletionTasksResponse)},deleteJobsRequestPayloadRT=lib.type({jobIds:lib.array(lib.string)}),deleteJobsResponsePayloadRT=lib.record(lib.string,lib.type({deleted:lib.boolean})),getJobDeletionTasksResponsePayloadRT=lib.type({jobIds:lib.array(lib.string)}),stopDatafeedsRequestPayloadRT=lib.type({datafeedIds:lib.array(lib.string)}),stopDatafeedsResponsePayloadRT=lib.record(lib.string,lib.type({stopped:lib.boolean})),cleanUpJobsAndDatafeeds=async(spaceId,sourceId,jobTypes,fetch)=>{try{await(async(requestArgs,fetch)=>{const{spaceId:spaceId,sourceId:sourceId,jobTypes:jobTypes}=requestArgs,stopDatafeedResponse=await fetch("/api/ml/jobs/stop_datafeeds",{method:"POST",body:JSON.stringify(stopDatafeedsRequestPayloadRT.encode({datafeedIds:jobTypes.map(jobType=>Object(infra_ml.b)(spaceId,sourceId,jobType))}))});return Object(runtime_types.b)(stopDatafeedsResponsePayloadRT)(stopDatafeedResponse)})({spaceId:spaceId,sourceId:sourceId,jobTypes:jobTypes},fetch)}catch(err){var _err$res;if(404!==(null==err||null===(_err$res=err.res)||void 0===_err$res?void 0:_err$res.status))throw err}return await deleteJobs(spaceId,sourceId,jobTypes,fetch)},deleteJobs=async(spaceId,sourceId,jobTypes,fetch)=>{const deleteJobsResponse=await(async(requestArgs,fetch)=>{const{spaceId:spaceId,sourceId:sourceId,jobTypes:jobTypes}=requestArgs,deleteJobsResponse=await fetch("/api/ml/jobs/delete_jobs",{method:"POST",body:JSON.stringify(deleteJobsRequestPayloadRT.encode({jobIds:jobTypes.map(jobType=>Object(infra_ml.c)(spaceId,sourceId,jobType))}))});return Object(runtime_types.b)(deleteJobsResponsePayloadRT)(deleteJobsResponse)})({spaceId:spaceId,sourceId:sourceId,jobTypes:jobTypes},fetch);return await waitUntilJobsAreDeleted(spaceId,sourceId,jobTypes,fetch),deleteJobsResponse},waitUntilJobsAreDeleted=async(spaceId,sourceId,jobTypes,fetch)=>{const moduleJobIds=jobTypes.map(jobType=>Object(infra_ml.c)(spaceId,sourceId,jobType));for(;;){const{jobIds:jobIdsBeingDeleted}=await callGetJobDeletionTasks(fetch);if(!jobIdsBeingDeleted.some(jobId=>moduleJobIds.includes(jobId)))return!0;await timeout(1e3)}},timeout=ms=>new Promise(res=>setTimeout(res,ms)),callJobsSummaryAPI=async(requestArgs,fetch)=>{const{spaceId:spaceId,sourceId:sourceId,jobTypes:jobTypes}=requestArgs,response=await fetch("/api/ml/jobs/jobs_summary",{method:"POST",body:JSON.stringify(fetchJobStatusRequestPayloadRT.encode({jobIds:jobTypes.map(jobType=>Object(infra_ml.c)(spaceId,sourceId,jobType))}))});return Object(runtime_types.b)(fetchJobStatusResponsePayloadRT)(response)},fetchJobStatusRequestPayloadRT=lib.type({jobIds:lib.array(lib.string)}),datafeedStateRT=lib.keyof({started:null,stopped:null,stopping:null,"":null}),jobStateRT=lib.keyof({closed:null,closing:null,deleting:null,failed:null,opened:null,opening:null}),jobCategorizationStatusRT=lib.keyof({ok:null,warn:null}),jobModelSizeStatsRT=lib.type({categorization_status:jobCategorizationStatusRT,categorized_doc_count:lib.number,dead_category_count:lib.number,frequent_category_count:lib.number,rare_category_count:lib.number,total_category_count:lib.number}),jobSummaryRT=lib.intersection([lib.type({id:lib.string,jobState:jobStateRT}),lib.partial({datafeedIndices:lib.array(lib.string),datafeedState:datafeedStateRT,fullJob:lib.partial({custom_settings:infra_ml.f,finished_time:lib.number,model_size_stats:jobModelSizeStatsRT})})]),fetchJobStatusResponsePayloadRT=lib.array(jobSummaryRT),callGetMlModuleAPI=async(moduleId,fetch)=>{const response=await fetch("/api/ml/modules/get_module/"+moduleId,{method:"GET"});return Object(runtime_types.b)(getMlModuleResponsePayloadRT)(response)},jobDefinitionRT=lib.type({id:lib.string,config:lib.type({custom_settings:log_analysis.jobCustomSettingsRT})}),getMlModuleResponsePayloadRT=lib.type({id:lib.string,jobs:lib.array(jobDefinitionRT)}),callSetupMlModuleAPI=async(requestArgs,fetch)=>{const{moduleId:moduleId,start:start,end:end,spaceId:spaceId,sourceId:sourceId,indexPattern:indexPattern,jobOverrides:jobOverrides=[],datafeedOverrides:datafeedOverrides=[],query:query}=requestArgs,response=await fetch("/api/ml/modules/setup/"+moduleId,{method:"POST",body:JSON.stringify(setupMlModuleRequestPayloadRT.encode({start:start,end:end,indexPatternName:indexPattern,prefix:Object(infra_ml.d)(spaceId,sourceId),startDatafeed:!0,jobOverrides:jobOverrides,datafeedOverrides:datafeedOverrides,query:query}))});return Object(runtime_types.b)(setupMlModuleResponsePayloadRT)(response)},setupMlModuleTimeParamsRT=lib.partial({start:lib.number,end:lib.number}),setupMlModuleJobOverridesRT=lib.type({job_id:lib.string,custom_settings:infra_ml.f}),setupMlModuleDatafeedOverridesRT=lib.object,setupMlModuleRequestParamsRT=lib.intersection([lib.strict({indexPatternName:lib.string,prefix:lib.string,startDatafeed:lib.boolean,jobOverrides:lib.array(setupMlModuleJobOverridesRT),datafeedOverrides:lib.array(setupMlModuleDatafeedOverridesRT)}),lib.exact(lib.partial({query:lib.object}))]),setupMlModuleRequestPayloadRT=lib.intersection([setupMlModuleTimeParamsRT,setupMlModuleRequestParamsRT]),setupErrorResponseRT=lib.type({msg:lib.string}),datafeedSetupResponseRT=lib.intersection([lib.type({id:lib.string,started:lib.boolean,success:lib.boolean}),lib.partial({error:setupErrorResponseRT})]),jobSetupResponseRT=lib.intersection([lib.type({id:lib.string,success:lib.boolean}),lib.partial({error:setupErrorResponseRT})]),setupMlModuleResponsePayloadRT=lib.type({datafeeds:lib.array(datafeedSetupResponseRT),jobs:lib.array(jobSetupResponseRT)});var hosts_memory_usage=__webpack_require__(533),datafeed_hosts_memory_usage=__webpack_require__(534),hosts_network_in=__webpack_require__(535),datafeed_hosts_network_in=__webpack_require__(536),hosts_network_out=__webpack_require__(537),datafeed_hosts_network_out=__webpack_require__(538);const moduleName=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.ml.metricsModuleName",{defaultMessage:"Metrics anomanly detection"}),moduleDescription=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.ml.metricsHostModuleDescription",{defaultMessage:"Use Machine Learning to automatically detect anomalous log entry rates."}),getJobIds=(spaceId,sourceId)=>infra_ml.g.reduce((accumulatedJobIds,jobType)=>({...accumulatedJobIds,[jobType]:Object(infra_ml.c)(spaceId,sourceId,jobType)}),{}),getDefaultJobConfigs=jobId=>{switch(jobId){case"hosts_memory_usage":return{datafeed:datafeed_hosts_memory_usage,job:hosts_memory_usage};case"hosts_network_in":return{datafeed:datafeed_hosts_network_in,job:hosts_network_in};case"hosts_network_out":return{datafeed:datafeed_hosts_network_out,job:hosts_network_out}}},metricHostsModule={moduleId:"metrics_ui_hosts",moduleName:moduleName,moduleDescription:moduleDescription,jobTypes:infra_ml.g,bucketSpan:infra_ml.a,getJobIds:getJobIds,getJobSummary:async(spaceId,sourceId,fetch)=>{const response=await callJobsSummaryAPI({spaceId:spaceId,sourceId:sourceId,jobTypes:infra_ml.g},fetch),jobIds=Object.values(getJobIds(spaceId,sourceId));return response.filter(jobSummary=>jobIds.includes(jobSummary.id))},getModuleDefinition:async fetch=>await callGetMlModuleAPI("metrics_ui_hosts",fetch),setUpModule:async(setUpModuleArgs,fetch)=>{const{start:start,end:end,filter:filter,moduleSourceConfiguration:{spaceId:spaceId,sourceId:sourceId,indices:indices,timestampField:timestampField},partitionField:partitionField}=setUpModuleArgs,indexNamePattern=indices.join(","),jobIds=["hosts_memory_usage","hosts_network_in","hosts_network_out"],jobOverrides=jobIds.map(id=>{const{job:defaultJobConfig}=getDefaultJobConfigs(id),analysis_config={...defaultJobConfig.analysis_config};return partitionField&&(analysis_config.detectors[0].partition_field_name=partitionField,-1===analysis_config.influencers.indexOf(partitionField)&&analysis_config.influencers.push(partitionField)),{job_id:id,data_description:{time_field:timestampField},analysis_config:analysis_config,custom_settings:{metrics_source_config:{indexPattern:indexNamePattern,timestampField:timestampField,bucketSpan:infra_ml.a}}}}),datafeedOverrides=jobIds.map(id=>{const{datafeed:defaultDatafeedConfig}=getDefaultJobConfigs(id),config={...defaultDatafeedConfig};if(filter){const query=JSON.parse(filter);config.query.bool={...config.query.bool,...query.bool}}if(!partitionField||"hosts_memory_usage"===id)return{...config,job_id:id};const aggregations={[partitionField]:{terms:{field:partitionField},aggregations:{...defaultDatafeedConfig.aggregations}}};return{...config,job_id:id,aggregations:aggregations}});return callSetupMlModuleAPI({moduleId:"metrics_ui_hosts",start:start,end:end,spaceId:spaceId,sourceId:sourceId,indexPattern:indexNamePattern,jobOverrides:jobOverrides,datafeedOverrides:datafeedOverrides},fetch)},cleanUpModule:async(spaceId,sourceId,fetch)=>await cleanUpJobsAndDatafeeds(spaceId,sourceId,infra_ml.g,fetch)},[MetricHostsModuleProvider,useMetricHostsModuleContext]=constate_cjs_default()(({indexPattern:indexPattern,sourceId:sourceId,spaceId:spaceId,timestampField:timestampField})=>{const sourceConfiguration=Object(external_kbnSharedDeps_React_.useMemo)(()=>({indices:indexPattern.split(","),sourceId:sourceId,spaceId:spaceId,timestampField:timestampField}),[indexPattern,sourceId,spaceId,timestampField]),infraMLModule=useInfraMLModule({moduleDescriptor:metricHostsModule,sourceConfiguration:sourceConfiguration}),{getIsJobConfigurationOutdated:getIsJobConfigurationOutdated}=useInfraMLModuleConfiguration({sourceConfiguration:sourceConfiguration,moduleDescriptor:metricHostsModule}),{fetchModuleDefinition:fetchModuleDefinition,getIsJobDefinitionOutdated:getIsJobDefinitionOutdated}=useInfraMLModuleDefinition({sourceConfiguration:sourceConfiguration,moduleDescriptor:metricHostsModule}),hasOutdatedJobConfigurations=Object(external_kbnSharedDeps_React_.useMemo)(()=>infraMLModule.jobSummaries.some(getIsJobConfigurationOutdated),[getIsJobConfigurationOutdated,infraMLModule.jobSummaries]),hasOutdatedJobDefinitions=Object(external_kbnSharedDeps_React_.useMemo)(()=>infraMLModule.jobSummaries.some(getIsJobDefinitionOutdated),[getIsJobDefinitionOutdated,infraMLModule.jobSummaries]),hasStoppedJobs=Object(external_kbnSharedDeps_React_.useMemo)(()=>Object.values(infraMLModule.jobStatus).some(currentJobStatus=>"stopped"===currentJobStatus),[infraMLModule.jobStatus]);return{...infraMLModule,fetchModuleDefinition:fetchModuleDefinition,hasOutdatedJobConfigurations:hasOutdatedJobConfigurations,hasOutdatedJobDefinitions:hasOutdatedJobDefinitions,hasStoppedJobs:hasStoppedJobs}});var k8s_memory_usage=__webpack_require__(539),datafeed_k8s_memory_usage=__webpack_require__(540),k8s_network_in=__webpack_require__(541),datafeed_k8s_network_in=__webpack_require__(542),k8s_network_out=__webpack_require__(543),datafeed_k8s_network_out=__webpack_require__(544);const module_descriptor_moduleName=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.ml.metricsModuleName",{defaultMessage:"Metrics anomanly detection"}),module_descriptor_moduleDescription=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.ml.metricsHostModuleDescription",{defaultMessage:"Use Machine Learning to automatically detect anomalous log entry rates."}),module_descriptor_getJobIds=(spaceId,sourceId)=>infra_ml.h.reduce((accumulatedJobIds,jobType)=>({...accumulatedJobIds,[jobType]:Object(infra_ml.c)(spaceId,sourceId,jobType)}),{}),module_descriptor_getDefaultJobConfigs=jobId=>{switch(jobId){case"k8s_memory_usage":return{datafeed:datafeed_k8s_memory_usage,job:k8s_memory_usage};case"k8s_network_in":return{datafeed:datafeed_k8s_network_in,job:k8s_network_in};case"k8s_network_out":return{datafeed:datafeed_k8s_network_out,job:k8s_network_out}}},module_descriptor_metricHostsModule={moduleId:"metrics_ui_k8s",moduleName:module_descriptor_moduleName,moduleDescription:module_descriptor_moduleDescription,jobTypes:infra_ml.h,bucketSpan:infra_ml.a,getJobIds:module_descriptor_getJobIds,getJobSummary:async(spaceId,sourceId,fetch)=>{const response=await callJobsSummaryAPI({spaceId:spaceId,sourceId:sourceId,jobTypes:infra_ml.h},fetch),jobIds=Object.values(module_descriptor_getJobIds(spaceId,sourceId));return response.filter(jobSummary=>jobIds.includes(jobSummary.id))},getModuleDefinition:async fetch=>await callGetMlModuleAPI("metrics_ui_k8s",fetch),setUpModule:async(setUpModuleArgs,fetch)=>{const{start:start,end:end,filter:filter,moduleSourceConfiguration:{spaceId:spaceId,sourceId:sourceId,indices:indices,timestampField:timestampField},partitionField:partitionField}=setUpModuleArgs,indexNamePattern=indices.join(","),jobIds=["k8s_memory_usage","k8s_network_in","k8s_network_out"],jobOverrides=jobIds.map(id=>{const{job:defaultJobConfig}=module_descriptor_getDefaultJobConfigs(id),analysis_config={...defaultJobConfig.analysis_config};return partitionField&&(analysis_config.detectors[0].partition_field_name=partitionField,-1===analysis_config.influencers.indexOf(partitionField)&&analysis_config.influencers.push(partitionField)),{job_id:id,data_description:{time_field:timestampField},analysis_config:analysis_config,custom_settings:{metrics_source_config:{indexPattern:indexNamePattern,timestampField:timestampField,bucketSpan:infra_ml.a}}}}),datafeedOverrides=jobIds.map(id=>{const{datafeed:defaultDatafeedConfig}=module_descriptor_getDefaultJobConfigs(id),config={...defaultDatafeedConfig};if(filter){const query=JSON.parse(filter);config.query.bool={...config.query.bool,...query.bool}}if(!partitionField||"k8s_memory_usage"===id)return{...config,job_id:id};const innerAggregation=defaultDatafeedConfig.aggregations["kubernetes.namespace"].aggregations,aggregations={[partitionField]:{terms:{field:partitionField,size:25},aggregations:{...innerAggregation}}};return{...config,job_id:id,aggregations:aggregations}});return callSetupMlModuleAPI({moduleId:"metrics_ui_k8s",start:start,end:end,spaceId:spaceId,sourceId:sourceId,indexPattern:indexNamePattern,jobOverrides:jobOverrides,datafeedOverrides:datafeedOverrides},fetch)},cleanUpModule:async(spaceId,sourceId,fetch)=>await cleanUpJobsAndDatafeeds(spaceId,sourceId,infra_ml.h,fetch)},[MetricK8sModuleProvider,useMetricK8sModuleContext]=constate_cjs_default()(({indexPattern:indexPattern,sourceId:sourceId,spaceId:spaceId,timestampField:timestampField})=>{const sourceConfiguration=Object(external_kbnSharedDeps_React_.useMemo)(()=>({indices:indexPattern.split(","),sourceId:sourceId,spaceId:spaceId,timestampField:timestampField}),[indexPattern,sourceId,spaceId,timestampField]),infraMLModule=useInfraMLModule({moduleDescriptor:module_descriptor_metricHostsModule,sourceConfiguration:sourceConfiguration}),{getIsJobConfigurationOutdated:getIsJobConfigurationOutdated}=useInfraMLModuleConfiguration({sourceConfiguration:sourceConfiguration,moduleDescriptor:module_descriptor_metricHostsModule}),{fetchModuleDefinition:fetchModuleDefinition,getIsJobDefinitionOutdated:getIsJobDefinitionOutdated}=useInfraMLModuleDefinition({sourceConfiguration:sourceConfiguration,moduleDescriptor:module_descriptor_metricHostsModule}),hasOutdatedJobConfigurations=Object(external_kbnSharedDeps_React_.useMemo)(()=>infraMLModule.jobSummaries.some(getIsJobConfigurationOutdated),[getIsJobConfigurationOutdated,infraMLModule.jobSummaries]),hasOutdatedJobDefinitions=Object(external_kbnSharedDeps_React_.useMemo)(()=>infraMLModule.jobSummaries.some(getIsJobDefinitionOutdated),[getIsJobDefinitionOutdated,infraMLModule.jobSummaries]),hasStoppedJobs=Object(external_kbnSharedDeps_React_.useMemo)(()=>Object.values(infraMLModule.jobStatus).some(currentJobStatus=>"stopped"===currentJobStatus),[infraMLModule.jobStatus]);return{...infraMLModule,fetchModuleDefinition:fetchModuleDefinition,hasOutdatedJobConfigurations:hasOutdatedJobConfigurations,hasOutdatedJobDefinitions:hasOutdatedJobDefinitions,hasStoppedJobs:hasStoppedJobs}});function flyout_home_extends(){return(flyout_home_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const FlyoutHome=props=>{const[tab,setTab]=Object(external_kbnSharedDeps_React_.useState)("jobs"),{goToSetup:goToSetup,closeFlyout:closeFlyout}=props,{fetchJobStatus:fetchHostJobStatus,setupStatus:hostSetupStatus,jobSummaries:hostJobSummaries}=useMetricHostsModuleContext(),{fetchJobStatus:fetchK8sJobStatus,setupStatus:k8sSetupStatus,jobSummaries:k8sJobSummaries}=useMetricK8sModuleContext(),{hasInfraMLCapabilities:hasInfraMLCapabilities,hasInfraMLReadCapabilities:hasInfraMLReadCapabilities,hasInfraMLSetupCapabilities:hasInfraMLSetupCapabilities}=useInfraMLCapabilitiesContext(),createHosts=Object(external_kbnSharedDeps_React_.useCallback)(()=>{goToSetup("hosts")},[goToSetup]),createK8s=Object(external_kbnSharedDeps_React_.useCallback)(()=>{goToSetup("kubernetes")},[goToSetup]),jobIds=[...(k8sJobSummaries||[]).map(k=>k.id),...(hostJobSummaries||[]).map(h=>h.id)];Object(external_kbnSharedDeps_React_.useEffect)(()=>{hasInfraMLReadCapabilities&&(fetchHostJobStatus(),fetchK8sJobStatus())},[fetchK8sJobStatus,fetchHostJobStatus,hasInfraMLReadCapabilities]);const hasJobs=hostJobSummaries.length>0||k8sJobSummaries.length>0,manageJobsLinkProps=Object(use_link_props.b)({app:"ml",pathname:"/jobs"});return hasInfraMLCapabilities?hasInfraMLReadCapabilities?"initializing"===hostSetupStatus.type||"initializing"===k8sSetupStatus.type?external_kbnSharedDeps_React_default.a.createElement(loading_page.a,{message:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.ml.anomalyFlyout.jobStatusLoadingMessage",{defaultMessage:"Checking status of metrics jobs..."})}):hasInfraMLSetupCapabilities?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Machine Learning anomaly detection",id:"xpack.infra.ml.anomalyFlyout.flyoutHeader"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTabs,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTab,{isSelected:"jobs"===tab,onClick:()=>setTab("jobs")},"Jobs"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTab,{isSelected:"anomalies"===tab,onClick:()=>setTab("anomalies")},"Anomalies")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutBody,{banner:"jobs"===tab&&hasJobs&&external_kbnSharedDeps_React_default.a.createElement(JobsEnabledCallout,{hasHostJobs:hostJobSummaries.length>0,hasK8sJobs:k8sJobSummaries.length>0,jobIds:jobIds})},"jobs"===tab&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,hasJobs&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,flyout_home_extends({},manageJobsLinkProps,{style:{marginRight:5}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Manage jobs in ML",id:"xpack.infra.ml.anomalyFlyout.manageJobs"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("h4",null,"Create ML Jobs"),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Anomaly detection is powered by machine learning. Machine learning jobs are available for the following resource types. Enable these jobs to begin detecting anomalies in your infrastructure metrics.",id:"xpack.infra.ml.anomalyFlyout.createJobs"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(CreateJobTab,{hasHostJobs:hostJobSummaries.length>0,hasK8sJobs:k8sJobSummaries.length>0,hasSetupCapabilities:props.hasSetupCapabilities,createHosts:createHosts,createK8s:createK8s})),"anomalies"===tab&&external_kbnSharedDeps_React_default.a.createElement(AnomaliesTable,{closeFlyout:closeFlyout}))):external_kbnSharedDeps_React_default.a.createElement(log_analysis_setup.f,null):external_kbnSharedDeps_React_default.a.createElement(log_analysis_setup.e,null):external_kbnSharedDeps_React_default.a.createElement(subscription_splash_content.a,null)},JobsEnabledCallout=props=>{let target="";return props.hasHostJobs&&props.hasK8sJobs?target=`${external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.ml.anomalyFlyout.create.hostTitle",{defaultMessage:"Hosts"})} and ${external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.ml.anomalyFlyout.create.k8sSuccessTitle",{defaultMessage:"Kubernetes"})}`:props.hasHostJobs?target=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.ml.anomalyFlyout.create.hostSuccessTitle",{defaultMessage:"Hosts"}):props.hasK8sJobs&&(target=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.ml.anomalyFlyout.create.k8sSuccessTitle",{defaultMessage:"Kubernetes"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{size:"m",color:"success",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Anomaly detection enabled for {target}",id:"xpack.infra.ml.anomalyFlyout.enabledCallout",values:{target:target}}),iconType:"check"}))},CreateJobTab=props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCard,{isDisabled:!props.hasSetupCapabilities,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"storage",size:"xl"}),title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Hosts",id:"xpack.infra.ml.anomalyFlyout.create.hostTitle"}),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Detect anomalies for memory usage and network traffic on hosts.",id:"xpack.infra.ml.anomalyFlyout.create.hostDescription"}),footer:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,props.hasHostJobs&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:props.createHosts},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Recreate jobs",id:"xpack.infra.ml.anomalyFlyout.create.recreateButton"})),!props.hasHostJobs&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{onClick:props.createHosts},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Enable",id:"xpack.infra.ml.anomalyFlyout.create.createButton"})))})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCard,{isDisabled:!props.hasSetupCapabilities,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"logoKubernetes",size:"xl"}),title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Kubernetes Pods",id:"xpack.infra.ml.anomalyFlyout.create.k8sTitle"}),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Detect anomalies for memory usage and network traffic on Kubernetes Pods.",id:"xpack.infra.ml.anomalyFlyout.create.k8sDescription"}),footer:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,props.hasK8sJobs&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:props.createK8s},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Recreate jobs",id:"xpack.infra.ml.anomalyFlyout.create.recreateButton"})),!props.hasK8sJobs&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{onClick:props.createK8s},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Enable",id:"xpack.infra.ml.anomalyFlyout.create.createButton"})))})))),createResultsUrl=(jobIds,mode="absolute")=>{let path="";return path+=`(ml:(jobIds:!(${jobIds.map(j=>`'${j}'`).join(",")}))`,path+=`,refreshInterval:(display:Off,pause:!f,value:0),time:(from:'${external_kbnSharedDeps_Moment_default()().subtract(4,"weeks").toISOString()}'`,path+=`,to:'${external_kbnSharedDeps_Moment_default()().toISOString()}'`,"invalid"===mode&&(path+=",mode:invalid"),path+="))&_a=(query:(query_string:(analyze_wildcard:!t,query:'*')))",path},DEFAULT_WAFFLE_VIEW_STATE={...use_waffle_options.b,filterQuery:DEFAULT_WAFFLE_FILTERS_STATE,time:DEFAULT_WAFFLE_TIME_STATE.currentTime,autoReload:DEFAULT_WAFFLE_TIME_STATE.isAutoReloading},useWaffleViewState=()=>{const{metric:metric,groupBy:groupBy,nodeType:nodeType,view:view,customOptions:customOptions,customMetrics:customMetrics,boundsOverride:boundsOverride,autoBounds:autoBounds,accountId:accountId,region:region,legend:legend,sort:sort,setWaffleOptionsState:setWaffleOptionsState}=Object(use_waffle_options.d)(),{currentTime:currentTime,isAutoReloading:isAutoReloading,setWaffleTimeState:setWaffleTimeState}=useWaffleTimeContext(),{filterQuery:filterQuery,setWaffleFiltersState:setWaffleFiltersState}=useWaffleFiltersContext(),viewState={metric:metric,sort:sort,groupBy:groupBy,nodeType:nodeType,view:view,customOptions:customOptions,customMetrics:customMetrics,boundsOverride:boundsOverride,autoBounds:autoBounds,accountId:accountId,region:region,time:currentTime,autoReload:isAutoReloading,filterQuery:filterQuery,legend:legend},onViewChange=Object(external_kbnSharedDeps_React_.useCallback)(newState=>{setWaffleOptionsState({sort:newState.sort,metric:newState.metric,groupBy:newState.groupBy,nodeType:newState.nodeType,view:newState.view,customOptions:newState.customOptions,customMetrics:newState.customMetrics,boundsOverride:newState.boundsOverride,autoBounds:newState.autoBounds,accountId:newState.accountId,region:newState.region,legend:newState.legend}),newState.time&&setWaffleTimeState({currentTime:newState.time,isAutoReloading:newState.autoReload}),setWaffleFiltersState(newState.filterQuery)},[setWaffleOptionsState,setWaffleTimeState,setWaffleFiltersState]);return{viewState:viewState,defaultViewState:DEFAULT_WAFFLE_VIEW_STATE,onViewChange:onViewChange}};function anomalies_table_extends(){return(anomalies_table_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const AnomalyActionMenu=({jobId:jobId,type:type,startTime:startTime,closeFlyout:closeFlyout,influencerField:influencerField,influencers:influencers,disableShowInInventory:disableShowInInventory})=>{const[isOpen,setIsOpen]=Object(external_kbnSharedDeps_React_.useState)(!1),close=Object(external_kbnSharedDeps_React_.useCallback)(()=>setIsOpen(!1),[setIsOpen]),handleToggleMenu=Object(external_kbnSharedDeps_React_.useCallback)(()=>setIsOpen(!isOpen),[isOpen]),{onViewChange:onViewChange}=useWaffleViewState(),showInInventory=Object(external_kbnSharedDeps_React_.useCallback)(()=>{const jobIdParts=jobId.split("-"),anomalyViewParams={metric:{type:{memory_usage:"memory",network_in:"rx",network_out:"tx"}[jobIdParts[jobIdParts.length-1].replace(/hosts_|k8s_/,"")]},sort:{by:"name",direction:"desc"},groupBy:[],nodeType:"metrics_k8s"===type?"pod":"host",view:"map",customOptions:[],customMetrics:[],boundsOverride:{max:1,min:0},autoBounds:!0,accountId:"",region:"",autoReload:!1,filterQuery:{expression:influencers.reduce((query,i)=>(query&&(query+=" or "),`${query} ${influencerField}: "${i}"`),""),kind:"kuery"},legend:{palette:"cool",reverseColors:!1,steps:10},time:startTime};onViewChange(anomalyViewParams),closeFlyout()},[jobId,onViewChange,startTime,type,influencers,influencerField,closeFlyout]),anomaliesUrl=Object(use_link_props.b)({app:"ml",pathname:"/explorer?_g="+createResultsUrl([jobId.toString()])}),items=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiContextMenuItem,anomalies_table_extends({key:"openInAnomalyExplorer",icon:"popout"},anomaliesUrl),external_kbnSharedDeps_React_default.a.createElement(react_intl_lib.FormattedMessage,{id:"xpack.infra.ml.anomalyFlyout.actions.openInAnomalyExplorer",defaultMessage:"Open in Anomaly Explorer"}))];return disableShowInInventory||items.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiContextMenuItem,{key:"showInInventory",icon:"search",onClick:showInInventory},external_kbnSharedDeps_React_default.a.createElement(react_intl_lib.FormattedMessage,{id:"xpack.infra.ml.anomalyFlyout.actions.showInInventory",defaultMessage:"Show in Inventory"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{anchorPosition:"downRight",panelPaddingSize:"none",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"boxesHorizontal",onClick:handleToggleMenu,"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.ml.anomalyFlyout.actions.openActionMenu",{defaultMessage:"Open"})}),isOpen:isOpen,closePopover:close},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiContextMenuPanel,{items:items})))},NoAnomaliesFound=Object(common_.withTheme)(({theme:theme})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xl"}),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"eyeClosed",size:"xl",color:theme.eui.euiColorMediumShade})),external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(react_intl_lib.FormattedMessage,{id:"xpack.infra.ml.anomalyFlyout.anomalyTable.noAnomaliesFound",defaultMessage:"No anomalies found"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(react_intl_lib.FormattedMessage,{id:"xpack.infra.ml.anomalyFlyout.anomalyTable.noAnomaliesSuggestion",defaultMessage:"Try modifying your search or selected time range."})))),AnomaliesTable=props=>{const{closeFlyout:closeFlyout,hostName:hostName}=props,[search,setSearch]=Object(external_kbnSharedDeps_React_.useState)(""),[start,setStart]=Object(external_kbnSharedDeps_React_.useState)("now-30d"),[end,setEnd]=Object(external_kbnSharedDeps_React_.useState)("now"),trackMetric=Object(observability_public_.useUiTracker)({app:"infra_metrics"}),[timeRange,setTimeRange]=Object(external_kbnSharedDeps_React_.useState)({start:Object(datemath.a)(start)||0,end:Object(datemath.a)(end,"up")||0}),{sorting:sorting,setSorting:setSorting}=function(defaultSorting){const[sorting,setSorting]=Object(external_kbnSharedDeps_React_.useState)(defaultSorting);return{sorting:sorting,setSorting:setSorting}}({field:"startTime",direction:"desc"}),jobOptions=[{id:"hosts",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.ml.anomalyFlyout.hostBtn",{defaultMessage:"Hosts"})},{id:"k8s",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.ml.anomalyFlyout.podsBtn",{defaultMessage:"Kubernetes Pods"})}],[jobType,setJobType]=Object(external_kbnSharedDeps_React_.useState)("hosts"),[selectedJobType,setSelectedJobType]=Object(external_kbnSharedDeps_React_.useState)([jobOptions.find(item=>"hosts"===item.id)||jobOptions[0]]),{source:source}=Object(metrics_source.b)(),anomalyThreshold=null==source?void 0:source.configuration.anomalyThreshold,onTimeChange=Object(external_kbnSharedDeps_React_.useCallback)(({isInvalid:isInvalid,start:startChange,end:endChange})=>{isInvalid||(setStart(startChange),setEnd(endChange),setTimeRange({start:Object(datemath.a)(startChange),end:Object(datemath.a)(endChange,"up")}))},[]),anomalyParams=Object(external_kbnSharedDeps_React_.useMemo)(()=>({sourceId:"default",anomalyThreshold:anomalyThreshold||0,startTime:timeRange.start,endTime:timeRange.end,defaultSortOptions:{direction:(null==sorting?void 0:sorting.direction)||"desc",field:(null==sorting?void 0:sorting.field)||"startTime"},defaultPaginationOptions:{pageSize:10}}),[timeRange,null==sorting?void 0:sorting.field,null==sorting?void 0:sorting.direction,anomalyThreshold]),{metricsHostsAnomalies:metricsHostsAnomalies,getMetricsHostsAnomalies:getMetricsHostsAnomalies,page:hostPage,changeSortOptions:hostChangeSort,fetchNextPage:hostFetchNextPage,fetchPreviousPage:hostFetchPrevPage,isLoadingMetricsHostsAnomalies:hostLoading}=useMetricsHostsAnomaliesResults(anomalyParams),{metricsK8sAnomalies:metricsK8sAnomalies,getMetricsK8sAnomalies:getMetricsK8sAnomalies,page:k8sPage,changeSortOptions:k8sChangeSort,fetchNextPage:k8sFetchNextPage,fetchPreviousPage:k8sPreviousPage,isLoadingMetricsK8sAnomalies:k8sLoading}=useMetricsK8sAnomaliesResults(anomalyParams),page=Object(external_kbnSharedDeps_React_.useMemo)(()=>"hosts"===jobType?hostPage:k8sPage,[jobType,hostPage,k8sPage]),isLoading=Object(external_kbnSharedDeps_React_.useMemo)(()=>"hosts"===jobType?hostLoading:k8sLoading,[jobType,hostLoading,k8sLoading]),fetchNextPage=Object(external_kbnSharedDeps_React_.useMemo)(()=>"hosts"===jobType?hostFetchNextPage:k8sFetchNextPage,[jobType,hostFetchNextPage,k8sFetchNextPage]),fetchPreviousPage=Object(external_kbnSharedDeps_React_.useMemo)(()=>"hosts"===jobType?hostFetchPrevPage:k8sPreviousPage,[jobType,hostFetchPrevPage,k8sPreviousPage]),getAnomalies=Object(external_kbnSharedDeps_React_.useMemo)(()=>"hosts"===jobType?getMetricsHostsAnomalies:"k8s"===jobType?getMetricsK8sAnomalies:void 0,[jobType,getMetricsK8sAnomalies,getMetricsHostsAnomalies]),results=Object(external_kbnSharedDeps_React_.useMemo)(()=>"hosts"===jobType?metricsHostsAnomalies:metricsK8sAnomalies,[jobType,metricsHostsAnomalies,metricsK8sAnomalies]),onSearchChange=Object(external_kbnSharedDeps_React_.useCallback)(e=>{setSearch(e.target.value)},[]),changeJobType=Object(external_kbnSharedDeps_React_.useCallback)(selectedOptions=>{setSelectedJobType(selectedOptions),setJobType(selectedOptions[0].id)},[]),changeSortOptions=Object(external_kbnSharedDeps_React_.useCallback)(nextSortOptions=>{"hosts"===jobType?hostChangeSort(nextSortOptions):k8sChangeSort(nextSortOptions)},[hostChangeSort,k8sChangeSort,jobType]);Object(external_kbnSharedDeps_React_.useEffect)(()=>{results&&results.forEach(r=>{r.influencers.length>100&&trackMetric({metric:"metrics_ml_anomaly_detection_more_than_100_influencers"})})},[results,trackMetric]);let columns=[{field:"startTime",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.ml.anomalyFlyout.columnTime",{defaultMessage:"Time"}),width:"15%",sortable:!0,textOnly:!0,truncateText:!0,render:startTime=>external_kbnSharedDeps_React_default.a.createElement(react_intl_lib.FormattedDate,{value:startTime,year:"numeric",month:"short",day:"2-digit"})},{field:"jobId",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.ml.anomalyFlyout.columnJob",{defaultMessage:"Job"}),width:"25%",render:jobId=>jobId},{field:"anomalyScore",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.ml.anomalyFlyout.columnSeverit",{defaultMessage:"Severity"}),width:"15%",sortable:!0,render:anomalyScore=>external_kbnSharedDeps_React_default.a.createElement(anomaly_severity_indicator.a,{anomalyScore:anomalyScore})},{field:"typical",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.ml.anomalyFlyout.columnSummary",{defaultMessage:"Summary"}),width:"15%",textOnly:!0,render:(typical,item)=>external_kbnSharedDeps_React_default.a.createElement(AnomalySummary,{anomaly:item})},{field:"influencers",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.ml.anomalyFlyout.columnInfluencerName",{defaultMessage:"Node name"}),width:"20%",textOnly:!0,truncateText:!0,render:influencers=>influencers.join(",")},{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.ml.anomalyFlyout.columnActionsName",{defaultMessage:"Actions"}),width:"10%",actions:[{render:anomaly=>external_kbnSharedDeps_React_default.a.createElement(AnomalyActionMenu,{jobId:anomaly.jobId,type:anomaly.type,influencerField:"metrics_hosts"===anomaly.type?"host.name":"kubernetes.pod.uid",disableShowInInventory:anomaly.influencers.length>100,influencers:anomaly.influencers,startTime:anomaly.startTime,closeFlyout:closeFlyout})}]}];return columns=hostName?columns.filter(c=>!("field"in c)||"influencers"!==c.field):columns,Object(external_kbnSharedDeps_React_.useEffect)(()=>{getAnomalies&&getAnomalies(void 0,search,hostName)},[getAnomalies,search,hostName]),external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSuperDatePicker,{start:start,end:end,showUpdateButton:!1,onTimeChange:onTimeChange}))),!hostName&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:3},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldSearch,{fullWidth:!0,placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.ml.anomalyFlyout.searchPlaceholder",{defaultMessage:"Search"}),value:search,onChange:onSearchChange,isClearable:!0})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiComboBox,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.ml.anomalyFlyout.jobTypeSelect",{defaultMessage:"Select group"}),singleSelection:{asPlainText:!0},options:jobOptions,selectedOptions:selectedJobType,onChange:changeJobType,isClearable:!1}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBasicTable,{columns:columns,items:results,sorting:{sort:sorting},onChange:criteria=>{var _criteria$sort,_criteria$sort2;setSorting(criteria.sort),changeSortOptions({field:(null==criteria||null===(_criteria$sort=criteria.sort)||void 0===_criteria$sort?void 0:_criteria$sort.field)||"startTime",direction:(null==criteria||null===(_criteria$sort2=criteria.sort)||void 0===_criteria$sort2?void 0:_criteria$sort2.direction)||"desc"})},hasActions:!0,loading:isLoading,noItemsMessage:isLoading?external_kbnSharedDeps_React_default.a.createElement(react_intl_lib.FormattedMessage,{id:"xpack.infra.ml.anomalyFlyout.anomalyTable.loading",defaultMessage:"Loading anomalies"}):external_kbnSharedDeps_React_default.a.createElement(NoAnomaliesFound,null)}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(PaginationControls,{fetchNextPage:fetchNextPage,fetchPreviousPage:fetchPreviousPage,page:page,isLoading:isLoading}))},AnomaliesTab={id:"anomalies",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.tabs.anomalies",{defaultMessage:"Anomalies"}),content:props=>{const{node:node,onClose:onClose}=props;return external_kbnSharedDeps_React_default.a.createElement(shared_TabContent,null,external_kbnSharedDeps_React_default.a.createElement(AnomaliesTable,{closeFlyout:onClose,hostName:node.name}))}},createUptimeLink=(options,nodeType,node)=>{if("host"===nodeType&&node.ip)return{app:"uptime",hash:"/",search:{search:`host.ip:"${node.ip}"`}};const field=Object(external_kbnSharedDeps_Lodash_.get)(options,["fields",nodeType],"");return{app:"uptime",hash:"/",search:{search:`${field?field+":":""}"${node.id}"`}}},NodeContextPopover=({isOpen:isOpen,node:node,nodeType:nodeType,currentTime:currentTime,options:options,onClose:onClose,openAlertFlyout:openAlertFlyout})=>{var _useKibana$services$a;const tabConfigs=[MetricsTab,LogsTab,ProcessesTab,PropertiesTab,AnomaliesTab],inventoryModel=Object(inventory_models.b)(nodeType),nodeDetailFrom=currentTime-1e3*inventoryModel.metrics.defaultTimeRangeInSeconds,uiCapabilities=null===(_useKibana$services$a=Object(kibanaReact_public_.useKibana)().services.application)||void 0===_useKibana$services$a?void 0:_useKibana$services$a.capabilities,canCreateAlerts=Object(external_kbnSharedDeps_React_.useMemo)(()=>{var _uiCapabilities$infra;return Boolean(null==uiCapabilities||null===(_uiCapabilities$infra=uiCapabilities.infrastructure)||void 0===_uiCapabilities$infra?void 0:_uiCapabilities$infra.save)},[uiCapabilities]),tabs=Object(external_kbnSharedDeps_React_.useMemo)(()=>tabConfigs.map(m=>{const TabContent=m.content;return{...m,content:external_kbnSharedDeps_React_default.a.createElement(TabContent,{onClose:onClose,node:node,nodeType:nodeType,currentTime:currentTime,options:options})}}),[tabConfigs,node,nodeType,currentTime,onClose,options]),[selectedTab,setSelectedTab]=Object(external_kbnSharedDeps_React_.useState)(0),nodeDetailMenuItemLinkProps=Object(use_link_props.b)({...getNodeDetailUrl({nodeType:nodeType,nodeId:node.id,from:nodeDetailFrom,to:currentTime})}),apmField="host"===nodeType?"host.hostname":inventoryModel.fields.id,apmTracesMenuItemLinkProps=Object(use_link_props.b)({app:"apm",hash:"traces",search:{kuery:`${apmField}:"${node.id}"`}}),uptimeMenuItemLinkProps=Object(use_link_props.b)(createUptimeLink(options,nodeType,node));return isOpen?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPortal,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiOutsideClickDetector,{onOutsideClick:onClose},external_kbnSharedDeps_React_default.a.createElement(OverlayPanel,null,external_kbnSharedDeps_React_default.a.createElement(OverlayHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{responsive:!1,gutterSize:"m"},external_kbnSharedDeps_React_default.a.createElement(OverlayTitle,{grow:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h4",null,node.name))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"m",responsive:!1},canCreateAlerts&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:openAlertFlyout,size:"xs",iconSide:"left",flush:"both",iconType:"bell"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.infra.nodeDetails.createAlertLink",defaultMessage:"Create alert"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{size:"xs",iconSide:"left",iconType:"popout",href:nodeDetailMenuItemLinkProps.href,flush:"both"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.infra.nodeDetails.openAsPage",defaultMessage:"Open as page"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{size:"s",onClick:onClose,iconType:"cross"}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTabs,{size:"s"},tabs.map((tab,i)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTab,{key:tab.id,isSelected:i===selectedTab,onClick:()=>setSelectedTab(i)},tab.name)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTab,apmTracesMenuItemLinkProps,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"popout"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.infra.nodeDetails.apmTabLabel",defaultMessage:"APM"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTab,uptimeMenuItemLinkProps,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"popout"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.infra.nodeDetails.updtimeTabLabel",defaultMessage:"Uptime"})))),tabs[selectedTab].content))):null},OverlayHeader=common_.euiStyled.div`
  padding-top: ${props=>props.theme.eui.paddingSizes.m};
  padding-right: ${props=>props.theme.eui.paddingSizes.m};
  padding-left: ${props=>props.theme.eui.paddingSizes.m};
  background-color: ${props=>props.theme.eui.euiPageBackgroundColor};
  box-shadow: inset 0 -1px ${props=>props.theme.eui.euiBorderColor};
`,OverlayPanel=Object(common_.euiStyled)(external_kbnSharedDeps_ElasticEui_.EuiPanel).attrs({paddingSize:"none"})`
  display: flex;
  flex-direction: column;
  position: absolute;
  right: 16px;
  top: ${266}px;
  width: 100%;
  max-width: 720px;
  z-index: 2;
  max-height: calc(100vh - ${282}px);
  overflow: hidden;

  @media (max-width: 752px) {
    border-radius: 0px !important;
    left: 0px;
    right: 0px;
    top: 97px;
    bottom: 0;
    max-height: calc(100vh - 97px);
    max-width: 100%;
  }
`,OverlayTitle=Object(common_.euiStyled)(external_kbnSharedDeps_ElasticEui_.EuiFlexItem)`
  overflow: hidden;
  & h4 {
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
  }
`,alert_flyout_AlertFlyout=({options:options,nodeType:nodeType,filter:filter,visible:visible,setVisible:setVisible})=>{const{triggersActionsUI:triggersActionsUI}=Object(external_kbnSharedDeps_React_.useContext)(triggers_actions_context.a),{inventoryPrefill:inventoryPrefill}=Object(use_alert_prefill.b)(),{customMetrics:customMetrics}=inventoryPrefill,onCloseFlyout=Object(external_kbnSharedDeps_React_.useCallback)(()=>setVisible(!1),[setVisible]),AddAlertFlyout=Object(external_kbnSharedDeps_React_.useMemo)(()=>triggersActionsUI&&triggersActionsUI.getAddAlertFlyout({consumer:"infrastructure",onClose:onCloseFlyout,canChangeTrigger:!1,alertTypeId:alerting_metrics.d,metadata:{options:options,nodeType:nodeType,filter:filter,customMetrics:customMetrics}}),[triggersActionsUI,visible]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,visible&&AddAlertFlyout)},PrefilledInventoryAlertFlyout=({onClose:onClose})=>{const{inventoryPrefill:inventoryPrefill}=Object(use_alert_prefill.b)(),{nodeType:nodeType,metric:metric,filterQuery:filterQuery}=inventoryPrefill;return external_kbnSharedDeps_React_default.a.createElement(alert_flyout_AlertFlyout,{options:{metric:metric},nodeType:nodeType,filter:filterQuery,visible:!0,setVisible:onClose})};function node_context_menu_extends(){return(node_context_menu_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const NodeContextMenu=Object(common_.withTheme)(({options:options,currentTime:currentTime,node:node,nodeType:nodeType})=>{var _useKibana$services$a,_uiCapabilities$logs,_uiCapabilities$infra;const[flyoutVisible,setFlyoutVisible]=Object(external_kbnSharedDeps_React_.useState)(!1),inventoryModel=Object(inventory_models.b)(nodeType),nodeDetailFrom=currentTime-1e3*inventoryModel.metrics.defaultTimeRangeInSeconds,uiCapabilities=null===(_useKibana$services$a=Object(kibanaReact_public_.useKibana)().services.application)||void 0===_useKibana$services$a?void 0:_useKibana$services$a.capabilities,apmField="host"===nodeType?"host.hostname":inventoryModel.fields.id,showDetail=inventoryModel.crosslinkSupport.details,showLogsLink=inventoryModel.crosslinkSupport.logs&&node.id&&(null==uiCapabilities||null===(_uiCapabilities$logs=uiCapabilities.logs)||void 0===_uiCapabilities$logs?void 0:_uiCapabilities$logs.show),showAPMTraceLink=inventoryModel.crosslinkSupport.apm&&(null==uiCapabilities?void 0:uiCapabilities.apm)&&(null==uiCapabilities?void 0:uiCapabilities.apm.show),showUptimeLink=inventoryModel.crosslinkSupport.uptime&&(["pod","container"].includes(nodeType)||node.ip),showCreateAlertLink=null==uiCapabilities||null===(_uiCapabilities$infra=uiCapabilities.infrastructure)||void 0===_uiCapabilities$infra?void 0:_uiCapabilities$infra.save,inventoryId=Object(external_kbnSharedDeps_React_.useMemo)(()=>{if("host"===nodeType){if(node.ip)return{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,"host.ip"),value:node.ip}}else if(options.fields){const{id:id}=Object(inventory_models.a)(nodeType,options.fields);return{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,id),value:node.id}}return{label:"",value:""}},[nodeType,node.ip,node.id,options.fields]),nodeLogsMenuItemLinkProps=Object(use_link_props.b)(Object(redirect_to_node_logs.b)({nodeType:nodeType,nodeId:node.id,time:currentTime})),nodeDetailMenuItemLinkProps=Object(use_link_props.b)({...getNodeDetailUrl({nodeType:nodeType,nodeId:node.id,from:nodeDetailFrom,to:currentTime})}),apmTracesMenuItemLinkProps=Object(use_link_props.b)({app:"apm",hash:"traces",search:{kuery:`${apmField}:"${node.id}"`}}),uptimeMenuItemLinkProps=Object(use_link_props.b)(createUptimeLink(options,nodeType,node)),nodeLogsMenuItem={label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeContextMenu.viewLogsName",{defaultMessage:"{inventoryName} logs",values:{inventoryName:inventoryModel.singularDisplayName}}),...nodeLogsMenuItemLinkProps,"data-test-subj":"viewLogsContextMenuItem",isDisabled:!showLogsLink},nodeDetailMenuItem={label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeContextMenu.viewMetricsName",{defaultMessage:"{inventoryName} metrics",values:{inventoryName:inventoryModel.singularDisplayName}}),...nodeDetailMenuItemLinkProps,isDisabled:!showDetail},apmTracesMenuItem={label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeContextMenu.viewAPMTraces",{defaultMessage:"{inventoryName} APM traces",values:{inventoryName:inventoryModel.singularDisplayName}}),...apmTracesMenuItemLinkProps,"data-test-subj":"viewApmTracesContextMenuItem",isDisabled:!showAPMTraceLink},uptimeMenuItem={label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeContextMenu.viewUptimeLink",{defaultMessage:"{inventoryName} in Uptime",values:{inventoryName:inventoryModel.singularDisplayName}}),...uptimeMenuItemLinkProps,isDisabled:!showUptimeLink},createAlertMenuItem={label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeContextMenu.createAlertLink",{defaultMessage:"Create alert"}),onClick:()=>{setFlyoutVisible(!0)},isDisabled:!showCreateAlertLink};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("div",{style:{maxWidth:300},"data-test-subj":"nodeContextMenu"},external_kbnSharedDeps_React_default.a.createElement(observability_public_.Section,null,external_kbnSharedDeps_React_default.a.createElement(observability_public_.SectionTitle,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.nodeContextMenu.title",defaultMessage:"{inventoryName} details",values:{inventoryName:inventoryModel.singularDisplayName}})),inventoryId.label&&external_kbnSharedDeps_React_default.a.createElement(observability_public_.SectionSubtitle,null,external_kbnSharedDeps_React_default.a.createElement("div",{style:{wordBreak:"break-all"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.nodeContextMenu.description",defaultMessage:"View details for {label} {value}",values:{label:inventoryId.label,value:inventoryId.value}}))),external_kbnSharedDeps_React_default.a.createElement(observability_public_.SectionLinks,null,external_kbnSharedDeps_React_default.a.createElement(observability_public_.SectionLink,node_context_menu_extends({"data-test-subj":"viewLogsContextMenuItem"},nodeLogsMenuItem)),external_kbnSharedDeps_React_default.a.createElement(observability_public_.SectionLink,nodeDetailMenuItem),external_kbnSharedDeps_React_default.a.createElement(observability_public_.SectionLink,node_context_menu_extends({"data-test-subj":"viewApmTracesContextMenuItem"},apmTracesMenuItem)),external_kbnSharedDeps_React_default.a.createElement(observability_public_.SectionLink,uptimeMenuItem),external_kbnSharedDeps_React_default.a.createElement(observability_public_.SectionLink,createAlertMenuItem)))),flyoutVisible&&external_kbnSharedDeps_React_default.a.createElement(alert_flyout_AlertFlyout,{filter:options.fields?`${Object(inventory_models.a)(nodeType,options.fields).id}: "${node.id}"`:"",options:options,nodeType:nodeType,setVisible:setFlyoutVisible,visible:flyoutVisible}))});function node_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const initialState={isPopoverOpen:!1,isOverlayOpen:!1,isAlertFlyoutVisible:!1};class node_Node extends external_kbnSharedDeps_React_default.a.PureComponent{constructor(...args){super(...args),node_defineProperty(this,"state",initialState),node_defineProperty(this,"openAlertFlyout",()=>{this.setState({isOverlayOpen:!1,isAlertFlyoutVisible:!0})}),node_defineProperty(this,"setAlertFlyoutVisible",isOpen=>{this.setState({isAlertFlyoutVisible:isOpen})}),node_defineProperty(this,"togglePopover",()=>{const{nodeType:nodeType}=this.props;"host"===nodeType?this.toggleNewOverlay():this.setState(prevState=>({isPopoverOpen:!prevState.isPopoverOpen}))}),node_defineProperty(this,"toggleNewOverlay",()=>{this.setState(prevState=>({isPopoverOpen:!0!=!prevState.isOverlayOpen&&prevState.isPopoverOpen,isOverlayOpen:!prevState.isOverlayOpen}))}),node_defineProperty(this,"closePopover",()=>{this.state.isPopoverOpen&&this.setState({isPopoverOpen:!1})})}render(){const{nodeType:nodeType,node:node,options:options,squareSize:squareSize,bounds:bounds,formatter:formatter,currentTime:currentTime}=this.props,{isPopoverOpen:isPopoverOpen,isAlertFlyoutVisible:isAlertFlyoutVisible}=this.state,metric=Object(external_kbnSharedDeps_Lodash_.first)(node.metrics),valueMode=squareSize>70,ellipsisMode=squareSize>30,rawValue=metric&&metric.value||0,color=((legend,value,bounds,defaultColor="rgba(217, 217, 217, 1)")=>{try{return lib_lib.f.is(legend)?convertToRgbString(calculateStepColor(legend.rules,value,defaultColor)):lib_lib.a.is(legend)?convertToRgbString(calculateGradientColor(legend.rules,value,bounds,defaultColor)):lib_lib.g.is(legend)?convertToRgbString(calculateSteppedGradientColor(legend.rules,value,bounds,defaultColor)):defaultColor}catch(error){return defaultColor}})(options.legend,rawValue,bounds),value=formatter(rawValue),nodeAriaLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.node.ariaLabel",{defaultMessage:"{nodeName}, click to open menu",values:{nodeName:node.name}}),nodeBorder=this.state.isOverlayOpen?{border:"solid 4px #000"}:void 0,button=external_kbnSharedDeps_React_default.a.createElement(ConditionalToolTip,{currentTime:currentTime,formatter:formatter,hidden:isPopoverOpen,node:node,options:options,nodeType:nodeType},external_kbnSharedDeps_React_default.a.createElement(NodeContainer,{"data-test-subj":"nodeContainer",style:{width:squareSize||0,height:squareSize||0},onClick:this.togglePopover},external_kbnSharedDeps_React_default.a.createElement(SquareOuter,{color:color,style:nodeBorder},external_kbnSharedDeps_React_default.a.createElement(SquareInner,{color:color},valueMode?external_kbnSharedDeps_React_default.a.createElement(ValueInner,{"aria-label":nodeAriaLabel},external_kbnSharedDeps_React_default.a.createElement(Label,{color:color},node.name),external_kbnSharedDeps_React_default.a.createElement(Value,{color:color},value)):ellipsisMode&&external_kbnSharedDeps_React_default.a.createElement(ValueInner,{"aria-label":nodeAriaLabel},external_kbnSharedDeps_React_default.a.createElement(Label,{color:color},"..."))))));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{button:button,isOpen:isPopoverOpen,closePopover:this.closePopover,anchorPosition:"downCenter"},external_kbnSharedDeps_React_default.a.createElement(NodeContextMenu,{node:node,nodeType:nodeType,options:options,currentTime:currentTime})),this.state.isOverlayOpen&&external_kbnSharedDeps_React_default.a.createElement(NodeContextPopover,{openAlertFlyout:this.openAlertFlyout,node:node,nodeType:nodeType,isOpen:this.state.isOverlayOpen,options:options,currentTime:currentTime,onClose:this.toggleNewOverlay}),isAlertFlyoutVisible&&external_kbnSharedDeps_React_default.a.createElement(alert_flyout_AlertFlyout,{filter:options.fields?`${Object(inventory_models.a)(nodeType,options.fields).id}: "${node.id}"`:"",options:options,nodeType:nodeType,setVisible:this.setAlertFlyoutVisible,visible:isAlertFlyoutVisible}))}}const NodeContainer=common_.euiStyled.div`
  position: relative;
`,SquareOuter=common_.euiStyled.div`
  position: absolute;
  top: 4px;
  left: 4px;
  bottom: 4px;
  right: 4px;
  background-color: ${props=>Object(polished_lib.darken)(.1,props.color)};
  border-radius: 3px;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.2);
`,SquareInner=common_.euiStyled.div`
  cursor: pointer;
  position: absolute;
  top: 0;
  right: 0;
  bottom: 2px;
  left: 0;
  border-radius: 3px;
  background-color: ${props=>props.color};
`,ValueInner=common_.euiStyled.button`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  line-height: 1.2em;
  align-items: center;
  align-content: center;
  padding: 1em;
  overflow: hidden;
  flex-wrap: wrap;
  width: 100%;
  border: none;
  &:focus {
    outline: none !important;
    border: ${params=>{var _params$theme;return null===(_params$theme=params.theme)||void 0===_params$theme?void 0:_params$theme.eui.euiFocusRingSize}} solid
      ${params=>{var _params$theme2;return null===(_params$theme2=params.theme)||void 0===_params$theme2?void 0:_params$theme2.eui.euiFocusRingColor}};
    box-shadow: none;
  }
`,SquareTextContent=common_.euiStyled.div`
  text-align: center;
  width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  flex: 1 0 auto;
  color: ${props=>Object(polished_lib.readableColor)(props.color)};
`,Value=Object(common_.euiStyled)(SquareTextContent)`
  font-weight: bold;
  font-size: 0.9em;
  line-height: 1.2em;
`,Label=Object(common_.euiStyled)(SquareTextContent)`
  font-size: 0.7em;
  margin-bottom: 0.7em;
`,GroupOfNodes=({group:group,options:options,formatter:formatter,onDrilldown:onDrilldown,isChild:isChild=!1,bounds:bounds,nodeType:nodeType,currentTime:currentTime})=>{const width=group.width>200?group.width:200;return external_kbnSharedDeps_React_default.a.createElement(GroupOfNodesContainer,{style:{width:width}},external_kbnSharedDeps_React_default.a.createElement(group_name_GroupName,{group:group,onDrilldown:onDrilldown,isChild:isChild,options:options}),external_kbnSharedDeps_React_default.a.createElement(Nodes,null,group.width?group.nodes.map(node=>external_kbnSharedDeps_React_default.a.createElement(node_Node,{key:`${node.pathId}:${node.name}`,options:options,squareSize:group.squareSize,node:node,formatter:formatter,bounds:bounds,nodeType:nodeType,currentTime:currentTime})):null))},GroupOfNodesContainer=common_.euiStyled.div`
  margin: 0 10px;
`,Nodes=common_.euiStyled.div`
  display: flex;
  background-color: rgba(0, 0, 0, 0.05);
  flex-wrap: wrap;
  justify-content: center;
  padding: 20px 10px 10px;
  border-radius: 4px;
  border: 1px solid ${props=>props.theme.eui.euiBorderColor};
  box-shadow: 0 1px 7px rgba(0, 0, 0, 0.1);
`,GroupOfGroups=props=>external_kbnSharedDeps_React_default.a.createElement(GroupOfGroupsContainer,null,external_kbnSharedDeps_React_default.a.createElement(group_name_GroupName,{group:props.group,onDrilldown:props.onDrilldown,options:props.options}),external_kbnSharedDeps_React_default.a.createElement(Groups,null,props.group.groups.map(group=>external_kbnSharedDeps_React_default.a.createElement(GroupOfNodes,{isChild:!0,key:group.id,onDrilldown:props.onDrilldown,options:props.options,group:group,formatter:props.formatter,bounds:props.bounds,nodeType:props.nodeType,currentTime:props.currentTime})))),GroupOfGroupsContainer=common_.euiStyled.div`
  margin: 0 10px;
  width: 100%;
`,Groups=common_.euiStyled.div`
  display: flex;
  background-color: rgba(0, 0, 0, 0.05);
  flex-wrap: wrap;
  justify-content: center;
  padding: 20px 10px 10px;
  border-radius: 4px;
  border: 1px solid ${props=>props.theme.eui.euiBorderColor};
  box-shadow: 0 1px 7px rgba(0, 0, 0, 0.1);
`;function getColumns(n,w=1,h=1){const pageRatio=w/h,ratio=pageRatio>1.2?1.2:pageRatio,width=Math.ceil(Math.sqrt(n));return Math.ceil(width*ratio)}function getTotalItems(groups){return groups?groups.reduce((acc,group)=>isWaffleMapGroupWithGroups(group)?group.groups.reduce((total,subGroup)=>subGroup.nodes.length+total,acc):isWaffleMapGroupWithNodes(group)?group.nodes.length+acc:acc,0):0}const getTotalItemsOfGroup=group=>getTotalItems([group]);function applyWaffleMapLayout(groups,width,height){if(0===groups.length)return[];const levels=isWaffleMapGroupWithGroups(Object(external_kbnSharedDeps_Lodash_.first)(groups))?2:1,totalItems=getTotalItems(groups),squareSize=Math.round(function(width,height,totalItems,levels=1){const scale=.55/(levels>1?.7*levels:1),x=width*scale,y=height*scale,possibleX=Math.ceil(Math.sqrt(totalItems*x/y));let newX,newY;newX=Math.floor(possibleX*y/x)*possibleX<totalItems?y/Math.ceil(possibleX*y/x):x/possibleX;const possibleY=Math.ceil(Math.sqrt(totalItems*y/x));newY=Math.floor(possibleY*x/y)*possibleY<totalItems?x/Math.ceil(x*possibleY/y):y/possibleY;const size=Math.max(newX,newY);return Math.min(Math.max(size,24),1/0)}(width,height,totalItems,levels)),largestCount=function(groups){return groups?groups.reduce((total,group)=>isWaffleMapGroupWithGroups(group)?group.groups.reduce((subTotal,subGroup)=>isWaffleMapGroupWithNodes(subGroup)?subTotal>subGroup.nodes.length?subTotal:subGroup.nodes.length:subTotal,total):isWaffleMapGroupWithNodes(group)?total>group.nodes.length?total:group.nodes.length:total,0):0}(groups);return Object(external_kbnSharedDeps_Lodash_.sortBy)(groups,getTotalItemsOfGroup).reverse().map(group=>{if(isWaffleMapGroupWithGroups(group)){const columns=getColumns(largestCount,width,height),groupOfNodes=group.groups,subGroups=Object(external_kbnSharedDeps_Lodash_.sortBy)(groupOfNodes,getTotalItemsOfGroup).reverse().filter(isWaffleMapGroupWithNodes).map(subGroup=>({...subGroup,count:subGroup.nodes.length,columns:columns,width:columns*squareSize,squareSize:squareSize}));return{...group,groups:subGroups,count:getTotalItems([group]),squareSize:squareSize}}if(isWaffleMapGroupWithNodes(group)){const columns=getColumns(Math.max(group.nodes.length,largestCount),width,height);return{...group,count:group.nodes.length,squareSize:squareSize,width:columns*squareSize}}return group})}const SORT_PATHS={name:node=>Object(external_kbnSharedDeps_Lodash_.last)(node.path),value:node=>{const metric=Object(external_kbnSharedDeps_Lodash_.first)(node.metrics);return metric&&metric.value||0}},Map=({nodes:nodes,options:options,currentTime:currentTime,onFilter:onFilter,formatter:formatter,bounds:bounds,nodeType:nodeType,dataBounds:dataBounds,bottomMargin:bottomMargin,staticHeight:staticHeight})=>{const map=nodesToWaffleMap(((sort,nodes)=>{const sortPath=SORT_PATHS[sort.by],sortedNodes=Object(external_kbnSharedDeps_Lodash_.sortBy)(nodes,sortPath);return"desc"===sort.direction?sortedNodes.reverse():sortedNodes})(options.sort,nodes));return external_kbnSharedDeps_React_default.a.createElement(auto_sizer.a,{bounds:!0},({measureRef:measureRef,bounds:{width:width=0,height:height=0}})=>{const groupsWithLayout=applyWaffleMapLayout(map,width,height);return external_kbnSharedDeps_React_default.a.createElement(WaffleMapOuterContainer,{ref:el=>measureRef(el),bottomMargin:bottomMargin,"data-test-subj":"waffleMap",staticHeight:staticHeight},external_kbnSharedDeps_React_default.a.createElement(WaffleMapInnerContainer,null,groupsWithLayout.map(group=>isWaffleMapGroupWithGroups(group)?external_kbnSharedDeps_React_default.a.createElement(GroupOfGroups,{onDrilldown:onFilter,key:group.id,options:options,group:group,formatter:formatter,bounds:bounds,nodeType:nodeType,currentTime:currentTime}):isWaffleMapGroupWithNodes(group)?external_kbnSharedDeps_React_default.a.createElement(GroupOfNodes,{key:group.id,options:options,group:group,onDrilldown:onFilter,formatter:formatter,isChild:!1,bounds:bounds,nodeType:nodeType,currentTime:currentTime}):void 0)))})},WaffleMapOuterContainer=common_.euiStyled.div`
  flex: 1 0 0%;
  display: flex;
  justify-content: flex-start;
  flex-direction: column;
  overflow-x: hidden;
  overflow-y: auto;
  margin-bottom: ${props=>props.bottomMargin}px;
  ${props=>props.staticHeight&&"min-height: 300px;"}
`,WaffleMapInnerContainer=common_.euiStyled.div`
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  justify-content: center;
  align-content: flex-start;
  padding: 10px;
`;var field_to_display_name=__webpack_require__(282),common_styles=__webpack_require__(203);const getGroupPaths=path=>{switch(path.length){case 3:return path.slice(0,2);case 2:return path.slice(0,1);default:return[]}},TableView=props=>{const{nodes:nodes,options:options,formatter:formatter,currentTime:currentTime,nodeType:nodeType}=props,[openPopovers,setOpenPopovers]=Object(external_kbnSharedDeps_React_.useState)([]),openPopoverFor=Object(external_kbnSharedDeps_React_.useCallback)(id=>()=>{setOpenPopovers([...openPopovers,id])},[openPopovers]),closePopoverFor=Object(external_kbnSharedDeps_React_.useCallback)(id=>()=>{openPopovers.includes(id)&&setOpenPopovers(openPopovers.filter(subject=>subject!==id))},[openPopovers]);Object(external_kbnSharedDeps_React_.useEffect)(()=>{const el=document.getElementsByClassName(common_styles.a)[0];el instanceof HTMLElement&&(openPopovers.length>0?el.style.overflowY="hidden":el.style.overflowY="auto")},[openPopovers]);const columns=[{field:"name",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.tableView.columnName.name",{defaultMessage:"Name"}),sortable:!0,truncateText:!0,textOnly:!0,render:(value,item)=>{const tooltipText=item.node.id===value?""+value:`${value} (${item.node.id})`,uniqueID=[...item.node.path.map(p=>p.value),item.node.name].join(":"),button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:tooltipText},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:openPopoverFor(uniqueID)},value));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{button:button,isOpen:openPopovers.includes(uniqueID),closePopover:closePopoverFor(uniqueID),anchorPosition:"rightCenter"},external_kbnSharedDeps_React_default.a.createElement(NodeContextMenu,{node:item.node,nodeType:nodeType,currentTime:currentTime,options:options}))}},...options.groupBy.map((grouping,index)=>({field:"group_"+index,name:Object(field_to_display_name.a)(grouping&&grouping.field||""),sortable:!0,truncateText:!0,textOnly:!0,render:value=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:"Set Filter"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:()=>props.onFilter(`${grouping.field}:"${value}"`)},value))})),{field:"value",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.tableView.columnName.last1m",{defaultMessage:"Last 1m"}),sortable:!0,truncateText:!0,dataType:"number",render:value=>external_kbnSharedDeps_React_default.a.createElement("span",null,formatter(value))},{field:"avg",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.tableView.columnName.avg",{defaultMessage:"Avg"}),sortable:!0,truncateText:!0,dataType:"number",render:value=>external_kbnSharedDeps_React_default.a.createElement("span",null,formatter(value))},{field:"max",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.tableView.columnName.max",{defaultMessage:"Max"}),sortable:!0,truncateText:!0,dataType:"number",render:value=>external_kbnSharedDeps_React_default.a.createElement("span",null,formatter(value))}],items=nodes.map(node=>{const name=Object(external_kbnSharedDeps_Lodash_.last)(node.path),metric=Object(external_kbnSharedDeps_Lodash_.first)(node.metrics);return{name:name&&name.label||"unknown",...getGroupPaths(node.path).reduce((acc,path,index)=>({...acc,["group_"+index]:path.label}),{}),value:metric&&metric.value||0,avg:metric&&metric.avg||0,max:metric&&metric.max||0,node:createWaffleMapNode(node)}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiInMemoryTable,{pagination:!0,sorting:{sort:{field:"value",direction:"desc"}},items:items,columns:columns})},calculateBoundsFromNodes=nodes=>{const values=nodes.map(node=>{const metric=Object(external_kbnSharedDeps_Lodash_.first)(node.metrics);return metric&&metric.value?metric.value:0});1===values.length&&values.unshift(0);const maxValue=Object(external_kbnSharedDeps_Lodash_.max)(values)||0,minValue=Object(external_kbnSharedDeps_Lodash_.min)(values)||0;return{min:Object(external_kbnSharedDeps_Lodash_.isFinite)(minValue)?minValue:0,max:Object(external_kbnSharedDeps_Lodash_.isFinite)(maxValue)?maxValue:0}},NodesOverview=({autoBounds:autoBounds,boundsOverride:boundsOverride,loading:loading,nodes:nodes,nodeType:nodeType,reload:reload,view:view,currentTime:currentTime,options:options,formatter:formatter,onDrilldown:onDrilldown,bottomMargin:bottomMargin,topMargin:topMargin,showLoading:showLoading})=>{const handleDrilldown=Object(external_kbnSharedDeps_React_.useCallback)(filter=>{onDrilldown({kind:"kuery",expression:filter})},[onDrilldown]),noData=!loading&&nodes&&0===nodes.length;if(loading&&showLoading)return external_kbnSharedDeps_React_default.a.createElement(components_loading.a,{height:"100%",width:"100%",text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.waffle.loadingDataText",{defaultMessage:"Loading data"})});if(noData)return external_kbnSharedDeps_React_default.a.createElement(empty_states.a,{titleText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.waffle.noDataTitle",{defaultMessage:"There is no data to display."}),bodyText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.waffle.noDataDescription",{defaultMessage:"Try adjusting your time or filter."}),refetchText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.waffle.checkNewDataButtonLabel",{defaultMessage:"Check for new data"}),onRefetch:()=>{reload()},testString:"noMetricsDataPrompt"});const dataBounds=calculateBoundsFromNodes(nodes),bounds=autoBounds?dataBounds:boundsOverride,isStatic=["xs","s"].includes(Object(external_kbnSharedDeps_ElasticEui_.getBreakpoint)(window.innerWidth));return"table"===view?external_kbnSharedDeps_React_default.a.createElement(TableContainer,null,external_kbnSharedDeps_React_default.a.createElement(TableView,{nodeType:nodeType,nodes:nodes,options:options,formatter:formatter,currentTime:currentTime,onFilter:handleDrilldown})):external_kbnSharedDeps_React_default.a.createElement(MapContainer,{top:topMargin,positionStatic:isStatic},external_kbnSharedDeps_React_default.a.createElement(Map,{nodeType:nodeType,nodes:nodes,options:options,formatter:formatter,currentTime:currentTime,onFilter:handleDrilldown,bounds:bounds,dataBounds:dataBounds,bottomMargin:bottomMargin,staticHeight:isStatic}))},TableContainer=common_.euiStyled.div`
  padding: ${props=>props.theme.eui.paddingSizes.l};
`,MapContainer=common_.euiStyled.div`
  position: ${props=>props.positionStatic?"static":"absolute"};
  display: flex;
  top: ${props=>props.top}px;
  right: 0;
  bottom: 0;
  left: 0;
`;var toolbar_items=__webpack_require__(283),container_toolbar_items=__webpack_require__(284),pod_toolbar_items=__webpack_require__(285),aws_ec2_toolbar_items=__webpack_require__(286),aws_s3_toolbar_items=__webpack_require__(287),aws_rds_toolbar_items=__webpack_require__(288),aws_sqs_toolbar_items=__webpack_require__(289);const toolbars={host:toolbar_items.a,container:container_toolbar_items.a,pod:pod_toolbar_items.a,awsEC2:aws_ec2_toolbar_items.a,awsS3:aws_s3_toolbar_items.a,awsRDS:aws_rds_toolbar_items.a,awsSQS:aws_sqs_toolbar_items.a};var toolbar_wrapper=__webpack_require__(300);const CloudAccountRT=lib.type({value:lib.string,name:lib.string}),InventoryMetaResponseRT=lib.type({accounts:lib.array(CloudAccountRT),projects:lib.array(lib.string),regions:lib.array(lib.string)});lib.type({sourceId:lib.string,nodeType:types.c,currentTime:lib.number});function toolbar_extends(){return(toolbar_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const toolbar_Toolbar=({nodeType:nodeType,currentTime:currentTime})=>{const{sourceId:sourceId}=Object(metrics_source.b)(),{accounts:accounts,regions:regions}=function(sourceId,nodeType,currentTime){const{error:error,loading:loading,response:response,makeRequest:makeRequest}=Object(use_http_request.a)("/api/infra/inventory/meta","POST",JSON.stringify({sourceId:sourceId,nodeType:nodeType,currentTime:currentTime}),response=>Object(pipeable.pipe)(InventoryMetaResponseRT.decode(response),Object(Either.fold)(Object(runtime_types.c)(runtime_types.a),lib_function.identity)));return Object(external_kbnSharedDeps_React_.useEffect)(()=>{makeRequest()},[makeRequest]),{error:error,loading:loading,accounts:response?response.accounts:[],regions:response?response.regions:[],makeRequest:makeRequest}}(sourceId,nodeType,currentTime);return((ToolbarItems,accounts,regions)=>external_kbnSharedDeps_React_default.a.createElement(toolbar_wrapper.a,null,props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(ToolbarItems,toolbar_extends({},props,{accounts:accounts,regions:regions})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!0}))))((type=>{const Toolbar=null==toolbars?void 0:toolbars[type];if(!Toolbar)throw new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.inventoryModels.findToolbar.error",{defaultMessage:"The toolbar you've attempted to find does not exist."}));return Toolbar})(nodeType),accounts,regions)},ViewSwitcher=({view:view,onChange:onChange})=>{const buttons=[{id:"map",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.viewSwitcher.mapViewLabel",{defaultMessage:"Map view"}),iconType:"apps"},{id:"table",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.viewSwitcher.tableViewLabel",{defaultMessage:"Table view"}),iconType:"visTable"}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonGroup,{legend:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.viewSwitcher.lenged",{defaultMessage:"Switch between table and map view"}),options:buttons,color:"text",buttonSize:"m",idSelected:view,onChange:onChange,isIconOnly:!0})},IntervalLabel=({intervalAsString:intervalAsString})=>intervalAsString?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{color:"subdued",size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.homePage.toolbar.showingLastOneMinuteDataText",defaultMessage:"Last {duration} of data for the selected time",values:{duration:intervalAsString}}))):null,createColorPalette=(name="cool",steps=10)=>{switch(name){case"temperature":return Object(external_kbnSharedDeps_ElasticEui_.euiPaletteForTemperature)(steps);case"status":return Object(external_kbnSharedDeps_ElasticEui_.euiPaletteForStatus)(steps);case"warm":return Object(external_kbnSharedDeps_ElasticEui_.euiPaletteWarm)(steps);case"positive":return Object(external_kbnSharedDeps_ElasticEui_.euiPalettePositive)(steps);case"negative":return Object(external_kbnSharedDeps_ElasticEui_.euiPaletteNegative)(steps);default:return Object(external_kbnSharedDeps_ElasticEui_.euiPaletteCool)(steps)}},getColorPalette=(name="cool",steps=10,reverse=!1)=>reverse?createColorPalette(name,steps).reverse():createColorPalette(name,steps),createLegend=(name,steps=10,reverse=!1)=>({type:"steppedGradient",rules:getColorPalette(name,steps,reverse).map((color,index)=>({color:color,value:(index+1)/steps}))});var get_interval_in_seconds=__webpack_require__(206),snapshot_api=__webpack_require__(87);function useTimeline(filterQuery,metrics,nodeType,sourceId,currentTime,accountId,region,interval,shouldReload){const displayInterval=Object(external_kbnSharedDeps_React_.useMemo)(()=>(interval=>{if(interval){if(Object(get_interval_in_seconds.a)(interval)<300)return"5m"}return interval})(interval),[interval]),timeLengthResult=Object(external_kbnSharedDeps_React_.useMemo)(()=>(interval=>{if(interval){const intervalInSeconds=Object(get_interval_in_seconds.a)(interval);return{timeLength:intervalInSeconds<=900?86400:intervalInSeconds<=2100?259200:intervalInSeconds<=9e3?604800:2592e3,intervalInSeconds:intervalInSeconds}}return{timeLength:0,intervalInSeconds:0}})(displayInterval),[displayInterval]),{timeLength:timeLength,intervalInSeconds:intervalInSeconds}=timeLengthResult,endTime=currentTime+1e3*intervalInSeconds,startTime=currentTime-1e3*timeLength,timerange={interval:null!=displayInterval?displayInterval:"",to:endTime,from:startTime,ignoreLookback:!0,forceInterval:!0},{error:error,loading:loading,response:response,makeRequest:makeRequest}=Object(use_http_request.a)("/api/metrics/snapshot","POST",JSON.stringify({metrics:metrics,groupBy:null,nodeType:nodeType,timerange:timerange,filterQuery:filterQuery,sourceId:sourceId,accountId:accountId,region:region,includeTimeseries:!0}),response=>Object(pipeable.pipe)(snapshot_api.g.decode(response),Object(Either.fold)(Object(runtime_types.c)(runtime_types.a),lib_function.identity))),loadData=Object(external_kbnSharedDeps_React_.useCallback)(()=>shouldReload?makeRequest():Promise.resolve(),[makeRequest,shouldReload]);Object(external_kbnSharedDeps_React_.useEffect)(()=>{(async()=>{timeLength&&await loadData()})()},[loadData,timeLength]);const timeseries=response?Object(external_kbnSharedDeps_Lodash_.first)(response.nodes.map(node=>{var _first;return null===(_first=Object(external_kbnSharedDeps_Lodash_.first)(node.metrics))||void 0===_first?void 0:_first.timeseries})):null;return{error:error&&error.message||null,loading:!interval||loading,timeseries:timeseries,startTime:startTime,endTime:endTime,reload:makeRequest}}const Timeline=({interval:interval,yAxisFormatter:yAxisFormatter,isVisible:isVisible})=>{var _toMetricOpt,_toMetricOpt2;const{sourceId:sourceId,source:source}=Object(metrics_source.b)(),{metric:metric,nodeType:nodeType,accountId:accountId,region:region}=Object(use_waffle_options.d)(),{currentTime:currentTime,jumpToTime:jumpToTime,stopAutoReload:stopAutoReload}=useWaffleTimeContext(),{filterQueryAsJson:filterQueryAsJson}=useWaffleFiltersContext(),{loading:loading,error:error,startTime:startTime,endTime:endTime,timeseries:timeseries,reload:reload}=useTimeline(filterQueryAsJson,[metric],nodeType,sourceId,currentTime,accountId,region,interval,isVisible),anomalyParams={sourceId:"default",anomalyThreshold:(null==source?void 0:source.configuration.anomalyThreshold)||0,startTime:startTime,endTime:endTime,defaultSortOptions:{direction:"desc",field:"anomalyScore"},defaultPaginationOptions:{pageSize:100}},{metricsHostsAnomalies:metricsHostsAnomalies,getMetricsHostsAnomalies:getMetricsHostsAnomalies}=useMetricsHostsAnomaliesResults(anomalyParams),{metricsK8sAnomalies:metricsK8sAnomalies,getMetricsK8sAnomalies:getMetricsK8sAnomalies}=useMetricsK8sAnomaliesResults(anomalyParams),getAnomalies=Object(external_kbnSharedDeps_React_.useMemo)(()=>"host"===nodeType?getMetricsHostsAnomalies:"pod"===nodeType?getMetricsK8sAnomalies:void 0,[nodeType,getMetricsK8sAnomalies,getMetricsHostsAnomalies]),anomalies=Object(external_kbnSharedDeps_React_.useMemo)(()=>"host"===nodeType?metricsHostsAnomalies:"pod"===nodeType?metricsK8sAnomalies:void 0,[nodeType,metricsHostsAnomalies,metricsK8sAnomalies]),metricLabel=null===(_toMetricOpt=Object(snapshot_metric_i18n.a)(metric.type))||void 0===_toMetricOpt?void 0:_toMetricOpt.textLC,metricPopoverLabel=null===(_toMetricOpt2=Object(snapshot_metric_i18n.a)(metric.type))||void 0===_toMetricOpt2?void 0:_toMetricOpt2.text,chartMetric={color:color_palette.a.color0,aggregation:"avg",label:metricPopoverLabel},dateFormatter=Object(external_kbnSharedDeps_React_.useMemo)(()=>{var _first,_last;if(!timeseries)return()=>"";const firstTimestamp=null===(_first=Object(external_kbnSharedDeps_Lodash_.first)(timeseries.rows))||void 0===_first?void 0:_first.timestamp,lastTimestamp=null===(_last=Object(external_kbnSharedDeps_Lodash_.last)(timeseries.rows))||void 0===_last?void 0:_last.timestamp;return null==firstTimestamp||null==lastTimestamp?value=>""+value:Object(external_kbnSharedDeps_ElasticCharts_.niceTimeFormatter)([firstTimestamp,lastTimestamp])},[timeseries]),isDarkMode=Object(kibanaReact_public_.useUiSetting)("theme:darkMode"),tooltipProps={headerFormatter:tooltipValue=>external_kbnSharedDeps_Moment_default()(tooltipValue.value).format("Y-MM-DD HH:mm:ss.SSS")},dataDomain=timeseries?Object(calculate_domain.a)(timeseries,[chartMetric],!1):null,domain=dataDomain?{max:1.1*dataDomain.max,min:dataDomain.min}:{max:0,min:0},onClickPoint=Object(external_kbnSharedDeps_React_.useCallback)(([[geometryValue]])=>{if(!Array.isArray(geometryValue)){const{x:timestamp}=geometryValue;jumpToTime(timestamp),stopAutoReload()}},[jumpToTime,stopAutoReload]),anomalyMetricName=Object(external_kbnSharedDeps_React_.useMemo)(()=>{const metricType=metric.type;return"memory"===metricType?"memory_usage":"rx"===metricType?"network_in":"tx"===metricType?"network_out":void 0},[metric]);if(Object(external_kbnSharedDeps_React_.useEffect)(()=>{getAnomalies&&anomalyMetricName&&getAnomalies(anomalyMetricName)},[getAnomalies,anomalyMetricName]),loading)return external_kbnSharedDeps_React_default.a.createElement(TimelineContainer,null,external_kbnSharedDeps_React_default.a.createElement(TimelineLoadingContainer,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingChart,{size:"xl"})));if(!loading&&(error||!timeseries))return external_kbnSharedDeps_React_default.a.createElement(TimelineContainer,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"visArea",title:external_kbnSharedDeps_React_default.a.createElement("h4",null,error?errorTitle:noHistoryDataTitle),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{color:"primary",fill:!0,onClick:reload},error?retryButtonLabel:checkNewDataButtonLabel)}));return external_kbnSharedDeps_React_default.a.createElement(TimelineContainer,null,external_kbnSharedDeps_React_default.a.createElement(TimelineHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.inventoryTimeline.header",defaultMessage:"Average {metricLabel}",values:{metricLabel:metricLabel}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{color:Object(color_palette.b)(chartMetric.color),type:"dot"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.inventoryTimeline.header",defaultMessage:"Average {metricLabel}",values:{metricLabel:metricLabel}}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,style:{backgroundColor:"#D36086",height:5,width:10}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.inventoryTimeline.legend.anomalyLabel",defaultMessage:"Anomaly detected"})))))))),external_kbnSharedDeps_React_default.a.createElement(TimelineChartContainer,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Chart,null,anomalies&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.RectAnnotation,{id:"anomalies",dataValues:(results=anomalies.map(a=>[a.startTime,a.influencers]),results.map(anomaly=>{const[val,influencers]=anomaly;return{coordinates:{x0:val,x1:external_kbnSharedDeps_Moment_default()(val).add(15,"minutes").valueOf(),y0:null==dataDomain?void 0:dataDomain.min,y1:null==dataDomain?void 0:dataDomain.max},details:influencers.join(",")}})),style:{fill:"#D36086"}}),external_kbnSharedDeps_React_default.a.createElement(series_chart.a,{type:use_metrics_explorer_options.b.area,metric:chartMetric,id:"0",series:timeseries,stack:!1}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Axis,{id:"timestamp",position:external_kbnSharedDeps_ElasticCharts_.Position.Bottom,showOverlappingTicks:!0,tickFormat:dateFormatter}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Axis,{id:"values",position:external_kbnSharedDeps_ElasticCharts_.Position.Left,tickFormat:yAxisFormatter,domain:domain,ticks:6,showGridLines:!0}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Settings,{tooltip:tooltipProps,theme:getTimelineChartTheme(isDarkMode),onElementClick:onClickPoint}))));var results},TimelineContainer=common_.euiStyled.div`
  background-color: ${props=>props.theme.eui.euiPageBackgroundColor};
  border-top: 1px solid ${props=>props.theme.eui.euiColorLightShade};
  height: 220px;
  width: 100%;
  padding: ${props=>props.theme.eui.paddingSizes.s} ${props=>props.theme.eui.paddingSizes.m};
  display: flex;
  flex-direction: column;
`,TimelineHeader=common_.euiStyled.div`
  display: flex;
  width: 100%;
  padding: ${props=>props.theme.eui.paddingSizes.s} ${props=>props.theme.eui.paddingSizes.m};
  @media only screen and (max-width: 767px) {
      margin-top: 30px;
  }
`,TimelineChartContainer=common_.euiStyled.div`
  padding-left: ${props=>props.theme.eui.paddingSizes.xs};
  width: 100%;
  height: 100%;
`,TimelineLoadingContainer=common_.euiStyled.div`
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100%;
`,noHistoryDataTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.inventoryTimeline.noHistoryDataTitle",{defaultMessage:"There is no historical data to display."}),errorTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.inventoryTimeline.errorTitle",{defaultMessage:"Unable to show historical data."}),checkNewDataButtonLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.inventoryTimeline.checkNewDataButtonLabel",{defaultMessage:"Check for new data"}),retryButtonLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.inventoryTimeline.retryButtonLabel",{defaultMessage:"Try again"}),showHistory=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.showHistory",{defaultMessage:"Show history"}),hideHistory=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.hideHistory",{defaultMessage:"Hide history"}),BottomDrawer=({measureRef:measureRef,width:width,interval:interval,formatter:formatter,children:children})=>{const[isOpen,setIsOpen]=Object(external_kbnSharedDeps_React_.useState)(!1),trackDrawerOpen=Object(observability_public_.useUiTracker)({app:"infra_metrics"}),onClick=Object(external_kbnSharedDeps_React_.useCallback)(()=>{isOpen||trackDrawerOpen({metric:"open_timeline_drawer__inventory"}),setIsOpen(!isOpen)},[isOpen,trackDrawerOpen]);return external_kbnSharedDeps_React_default.a.createElement(BottomActionContainer,{ref:isOpen?measureRef:null,isOpen:isOpen,outerWidth:width},external_kbnSharedDeps_React_default.a.createElement(BottomActionTopBar,{ref:isOpen?null:measureRef},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(ShowHideButton,{"aria-expanded":isOpen,iconType:isOpen?"arrowDown":"arrowRight",onClick:onClick},isOpen?hideHistory:showHistory)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,style:{position:"relative",minWidth:400,height:"16px"}},children),external_kbnSharedDeps_React_default.a.createElement(RightSideSpacer,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{style:{marginTop:0}},external_kbnSharedDeps_React_default.a.createElement(Timeline,{isVisible:isOpen,interval:interval,yAxisFormatter:formatter})))},BottomActionContainer=common_.euiStyled.div`
  padding: ${props=>props.theme.eui.paddingSizes.m} 0;
  position: fixed;
  bottom: 0;
  right: 0;
  transition: transform ${300}ms;
  transform: translateY(${props=>props.isOpen?0:"224px"});
  width: ${props=>props.outerWidth}px;
`,BottomActionTopBar=Object(common_.euiStyled)(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup).attrs({justifyContent:"spaceBetween",alignItems:"center"})`
 margin-bottom: 0;
 height: 48px;
`,ShowHideButton=Object(common_.euiStyled)(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty).attrs({size:"s"})`
  width: 140px;
`,RightSideSpacer=Object(common_.euiStyled)(external_kbnSharedDeps_ElasticEui_.EuiSpacer).attrs({size:"xs"})`
  width: 140px;
`,GradientLegend=({legend:legend,bounds:bounds,formatter:formatter})=>{const maxValue=legend.rules.reduce((acc,rule)=>acc<rule.value?rule.value:acc,0),style={background:`linear-gradient(to right, ${legend.rules.map(rule=>{const percent=rule.value/maxValue*100;return`${rule.color} ${percent}%`})})`};return external_kbnSharedDeps_React_default.a.createElement(GradientLegendContainer,{style:style},legend.rules.map(((bounds,formatter)=>(rule,index)=>{const value=0===rule.value?bounds.min:bounds.max*rule.value,style={left:100*rule.value+"%"},label=formatter(value);return external_kbnSharedDeps_React_default.a.createElement(GradientLegendTick,{style:style,key:"legend-rule-"+index},external_kbnSharedDeps_React_default.a.createElement(GradientLegendTickLine,null),external_kbnSharedDeps_React_default.a.createElement(GradientLegendTickLabel,null,label))})(bounds,formatter)))},GradientLegendContainer=common_.euiStyled.div`
  position: absolute;
  height: 10px;
  bottom: 0;
  left: 0;
  right: 40px;
`,GradientLegendTick=common_.euiStyled.div`
  position: absolute;
  bottom: 0;
  top: -18px;
`,GradientLegendTickLine=common_.euiStyled.div`
  position: absolute;
  background-color: ${props=>props.theme.eui.euiBorderColor};
  width: 1px;
  left: 0;
  top: 15px;
  bottom: 0;
  ${GradientLegendTick}:first-child {
    top: 2px;
  }
  ${GradientLegendTick}:last-child {
    top: 2px;
  }
`,GradientLegendTickLabel=common_.euiStyled.div`
  position: absolute;
  font-size: 11px;
  text-align: center;
  top: 0;
  left: 0;
  white-space: nowrap;
  transform: translate(-50%, 0);
  ${GradientLegendTick}:first-child & {
    padding-left: 5px;
    transform: translate(0, 0);
  }
  ${GradientLegendTick}:last-child & {
    padding-right: 5px;
    transform: translate(-100%, 0);
  }
`,convertBoundsToPercents=bounds=>({min:100*bounds.min,max:100*(bounds.max||1)}),SwatchLabel=({label:label,color:color})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiColorPickerSwatch,{color:color})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("strong",null,label)))),PalettePreview=({steps:steps,palette:palette,reverse:reverse})=>{const colors=getColorPalette(palette,steps,reverse);return external_kbnSharedDeps_React_default.a.createElement(Swatches,null,colors.map(color=>external_kbnSharedDeps_React_default.a.createElement(Swatch,{key:color,style:{backgroundColor:color}})))},Swatch=common_.euiStyled.div`
  width: 15px;
  height: 12px;
  flex: 0 0 auto;
  &:first-child {
    border-radius: ${props=>props.theme.eui.euiBorderRadius} 0 0 ${props=>props.theme.eui.euiBorderRadius};
  }
  &:last-child {
    border-radius: 0 ${props=>props.theme.eui.euiBorderRadius} ${props=>props.theme.eui.euiBorderRadius} 0;
`,Swatches=common_.euiStyled.div`
  display: flex;
`,PALETTE_OPTIONS=["temperature","status","cool","warm","positive","negative"].map(name=>({text:lib_lib.e[name],value:name})),LegendControls=({autoBounds:autoBounds,boundsOverride:boundsOverride,onChange:onChange,dataBounds:dataBounds,options:options})=>{const[isPopoverOpen,setPopoverState]=Object(external_kbnSharedDeps_React_.useState)(!1),[draftAuto,setDraftAuto]=Object(external_kbnSharedDeps_React_.useState)(autoBounds),[draftLegend,setLegendOptions]=Object(external_kbnSharedDeps_React_.useState)(options),[draftBounds,setDraftBounds]=Object(external_kbnSharedDeps_React_.useState)(convertBoundsToPercents(boundsOverride));Object(external_kbnSharedDeps_React_.useEffect)(()=>{draftAuto&&setDraftBounds(convertBoundsToPercents(dataBounds))},[autoBounds,dataBounds,draftAuto,onChange,options]);const buttonComponent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:"controlsHorizontal",color:"text","aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.legendControls.buttonLabel",{defaultMessage:"configure legend"}),onClick:()=>setPopoverState(!0)}),handleAutoChange=Object(external_kbnSharedDeps_React_.useCallback)(e=>{const auto=e.target.checked;setDraftAuto(auto),auto||setDraftBounds(convertBoundsToPercents(boundsOverride))},[boundsOverride]),handleReverseColors=Object(external_kbnSharedDeps_React_.useCallback)(e=>{setLegendOptions(previous=>({...previous,reverseColors:e.target.checked}))},[setLegendOptions]),handleMaxBounds=Object(external_kbnSharedDeps_React_.useCallback)(e=>{const value=parseFloat(e.currentTarget.value),max=value<=draftBounds.min?draftBounds.min+1:value>100?100:value;setDraftBounds({...draftBounds,max:max})},[draftBounds]),handleMinBounds=Object(external_kbnSharedDeps_React_.useCallback)(e=>{const value=parseFloat(e.currentTarget.value),min=value>=draftBounds.max?draftBounds.max-1:value<0?0:value;setDraftBounds({...draftBounds,min:min})},[draftBounds]),handleApplyClick=Object(external_kbnSharedDeps_React_.useCallback)(()=>{onChange({auto:draftAuto,bounds:{min:draftBounds.min/100,max:draftBounds.max/100},legend:draftLegend})},[onChange,draftAuto,draftBounds,draftLegend]),handleCancelClick=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setDraftBounds(convertBoundsToPercents(boundsOverride)),setDraftAuto(autoBounds),setLegendOptions(options),setPopoverState(!1)},[autoBounds,boundsOverride,options]),handleStepsChange=Object(external_kbnSharedDeps_React_.useCallback)(e=>{const steps=parseInt(e.target.value,10);setLegendOptions(previous=>({...previous,steps:steps}))},[setLegendOptions]),handlePaletteChange=Object(external_kbnSharedDeps_React_.useCallback)(e=>{const palette=e.target.value;setLegendOptions(previous=>({...previous,palette:palette}))},[setLegendOptions]),commited=draftAuto===autoBounds&&100*boundsOverride.min===draftBounds.min&&100*boundsOverride.max===draftBounds.max&&options.steps===draftLegend.steps&&options.reverseColors===draftLegend.reverseColors&&options.palette===draftLegend.palette,boundsValidRange=draftBounds.min<draftBounds.max,paletteColors=getColorPalette(draftLegend.palette,draftLegend.steps,draftLegend.reverseColors),errors=boundsValidRange?[]:[external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.legnedControls.boundRangeError",{defaultMessage:"Minimum must be smaller then the maximum"})];return external_kbnSharedDeps_React_default.a.createElement(ControlContainer,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{isOpen:isPopoverOpen,closePopover:handleCancelClick,id:"legendControls",button:buttonComponent},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopoverTitle,null,"Legend Options"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiForm,{style:{minWidth:400}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{display:"columnCompressed",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.legendControls.colorPaletteLabel",{defaultMessage:"Color palette"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{options:PALETTE_OPTIONS,value:draftLegend.palette,id:"palette",onChange:handlePaletteChange,compressed:!0}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(PalettePreview,{palette:draftLegend.palette,steps:draftLegend.steps,reverse:draftLegend.reverseColors}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{display:"columnCompressed",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.legendControls.stepsLabel",{defaultMessage:"Number of colors"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiRange,{id:"steps",min:2,max:18,step:1,value:draftLegend.steps,onChange:handleStepsChange,showValue:!0,fullWidth:!0})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{fullWidth:!0,display:"columnCompressed",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.legendControls.reverseDirectionLabel",{defaultMessage:"Reverse direction"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{showLabel:!1,name:"reverseColors",label:"reverseColors",checked:draftLegend.reverseColors,onChange:handleReverseColors,compressed:!0,style:{position:"relative",top:"8px"}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{fullWidth:!0,display:"columnCompressed",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.legendControls.switchLabel",{defaultMessage:"Auto calculate range"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{showLabel:!1,name:"bounds",label:"bounds",checked:draftAuto,onChange:handleAutoChange,compressed:!0,style:{position:"relative",top:"8px"}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{fullWidth:!0,label:external_kbnSharedDeps_React_default.a.createElement(SwatchLabel,{color:Object(external_kbnSharedDeps_Lodash_.first)(paletteColors),label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.legendControls.minLabel",{defaultMessage:"Minimum"})}),isInvalid:!boundsValidRange,display:"columnCompressed",error:errors},external_kbnSharedDeps_React_default.a.createElement("div",{style:{maxWidth:150}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldNumber,{disabled:draftAuto,step:1,value:isNaN(draftBounds.min)?"":draftBounds.min,isInvalid:!boundsValidRange,name:"legendMin",onChange:handleMinBounds,append:"%",compressed:!0}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{fullWidth:!0,display:"columnCompressed",label:external_kbnSharedDeps_React_default.a.createElement(SwatchLabel,{color:Object(external_kbnSharedDeps_Lodash_.last)(paletteColors),label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.legendControls.maxLabel",{defaultMessage:"Maxium"})}),isInvalid:!boundsValidRange,error:errors},external_kbnSharedDeps_React_default.a.createElement("div",{style:{maxWidth:150}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldNumber,{disabled:draftAuto,step:1,isInvalid:!boundsValidRange,value:isNaN(draftBounds.max)?"":draftBounds.max,name:"legendMax",onChange:handleMaxBounds,append:"%",compressed:!0}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"flexEnd",responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{type:"submit",size:"s",onClick:handleCancelClick},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.legendControls.cancelButton",defaultMessage:"Cancel"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{type:"submit",size:"s",fill:!0,disabled:commited||!boundsValidRange,onClick:handleApplyClick},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.legendControls.applyButton",defaultMessage:"Apply"})))))))},ControlContainer=common_.euiStyled.div`
  position: absolute;
  top: -20px;
  right: 6px;
  bottom: 0;
`,OPERATORS={[lib_lib.c.gte]:">=",[lib_lib.c.gt]:">",[lib_lib.c.lte]:"<=",[lib_lib.c.lt]:"<",[lib_lib.c.eq]:"="},StepLegend=({legend:legend,formatter:formatter})=>external_kbnSharedDeps_React_default.a.createElement(StepLegendContainer,null,legend.rules.map((formatter=>(rule,index)=>{const label=null!=rule.label?rule.label:`${OPERATORS[rule.operator]} ${formatter(rule.value)}`,squareStyle={backgroundColor:Object(polished_lib.darken)(.4,rule.color)},squareInnerStyle={backgroundColor:rule.color};return external_kbnSharedDeps_React_default.a.createElement(StepContainer,{key:"legend-step-"+index},external_kbnSharedDeps_React_default.a.createElement(StepSquare,{style:squareStyle},external_kbnSharedDeps_React_default.a.createElement(StepSquareInner,{style:squareInnerStyle})),external_kbnSharedDeps_React_default.a.createElement(StepLabel,null,label))})(formatter))),StepLegendContainer=common_.euiStyled.div`
  display: flex;
  padding: 10px 40px 10px 10px;
`,StepContainer=common_.euiStyled.div`
  display: flex;
  margin-right: 20px
  align-items: center;
`,StepSquare=common_.euiStyled.div`
  position: relative;
  width: 24px;
  height: 24px;
  flex: 0 0 auto;
  margin-right: 5px;
  border-radius: 3px;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.2);
`,StepSquareInner=common_.euiStyled.div`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 2px;
  border-radius: 3px;
`,StepLabel=common_.euiStyled.div`
  font-size: 12px;
`,SteppedGradientLegend=({legend:legend,bounds:bounds,formatter:formatter})=>external_kbnSharedDeps_React_default.a.createElement(LegendContainer,null,external_kbnSharedDeps_React_default.a.createElement(Ticks,null,external_kbnSharedDeps_React_default.a.createElement(TickLabel,{value:0,bounds:bounds,formatter:formatter}),external_kbnSharedDeps_React_default.a.createElement(TickLabel,{value:1,bounds:bounds,formatter:formatter})),external_kbnSharedDeps_React_default.a.createElement(GradientContainer,null,legend.rules.map((rule,index)=>external_kbnSharedDeps_React_default.a.createElement(GradientStep,{key:`step-${index}-${rule.value}`,style:{backgroundColor:rule.color}})))),TickLabel=({value:value,bounds:bounds,formatter:formatter})=>{const style={left:100*value+"%"},label=formatter(0===value?bounds.min:bounds.max*value);return external_kbnSharedDeps_React_default.a.createElement(Tick,{style:style},label)},GradientStep=common_.euiStyled.div`
  height: ${props=>props.theme.eui.paddingSizes.s};
  flex: 1 1 auto;
  &:first-child {
    border-radius: ${props=>props.theme.eui.euiBorderRadius} 0 0 ${props=>props.theme.eui.euiBorderRadius};
  }
  &:last-child {
    border-radius: 0 ${props=>props.theme.eui.euiBorderRadius} ${props=>props.theme.eui.euiBorderRadius} 0;
  }
`,Ticks=common_.euiStyled.div`
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  top: -18px;
`,Tick=common_.euiStyled.div`
  position: absolute;
  font-size: 11px;
  text-align: center;
  top: 0;
  left: 0;
  white-space: nowrap;
  transform: translate(-50%, 0);
  &:first-child {
    padding-left: 5px;
    transform: translate(0, 0);
  }
  &:last-child {
    padding-right: 5px;
    transform: translate(-100%, 0);
  }
`,GradientContainer=common_.euiStyled.div`
  display: flex;
  flex-direction; row;
  align-items: stretch;
  flex-grow: 1;
`,LegendContainer=common_.euiStyled.div`
  position: absolute;
  height: 10px;
  bottom: 0;
  left: 0;
  right: 40px;
`,Legend=({dataBounds:dataBounds,legend:legend,bounds:bounds,formatter:formatter})=>{const{changeBoundsOverride:changeBoundsOverride,changeAutoBounds:changeAutoBounds,autoBounds:autoBounds,legend:legendOptions,changeLegend:changeLegend,boundsOverride:boundsOverride}=Object(use_waffle_options.d)(),handleChange=Object(external_kbnSharedDeps_React_.useCallback)(options=>{changeBoundsOverride(options.bounds),changeAutoBounds(options.auto),changeLegend(options.legend)},[changeBoundsOverride,changeAutoBounds,changeLegend]);return external_kbnSharedDeps_React_default.a.createElement(legend_LegendContainer,null,external_kbnSharedDeps_React_default.a.createElement(LegendControls,{options:null!=legendOptions?legendOptions:use_waffle_options.a,dataBounds:dataBounds,bounds:bounds,autoBounds:autoBounds,boundsOverride:boundsOverride,onChange:handleChange}),lib_lib.a.is(legend)&&external_kbnSharedDeps_React_default.a.createElement(GradientLegend,{formatter:formatter,legend:legend,bounds:bounds}),lib_lib.f.is(legend)&&external_kbnSharedDeps_React_default.a.createElement(StepLegend,{formatter:formatter,legend:legend}),lib_lib.g.is(legend)&&external_kbnSharedDeps_React_default.a.createElement(SteppedGradientLegend,{formatter:formatter,bounds:bounds,legend:legend}))},legend_LegendContainer=common_.euiStyled.div`
  position: absolute;
  bottom: 0px;
  left: 10px;
  right: 10px;
`,layout_Layout=external_kbnSharedDeps_React_default.a.memo(({shouldLoadDefault:shouldLoadDefault,currentView:currentView})=>{var _legend$palette,_legend$steps,_legend$reverseColors,_source$configuration;const[showLoading,setShowLoading]=Object(external_kbnSharedDeps_React_.useState)(!0),{sourceId:sourceId,source:source}=Object(metrics_source.b)(),{metric:metric,groupBy:groupBy,sort:sort,nodeType:nodeType,accountId:accountId,region:region,changeView:changeView,view:view,autoBounds:autoBounds,boundsOverride:boundsOverride,legend:legend}=Object(use_waffle_options.d)(),{currentTime:currentTime,jumpToTime:jumpToTime,isAutoReloading:isAutoReloading}=useWaffleTimeContext(),{filterQueryAsJson:filterQueryAsJson,applyFilterQuery:applyFilterQuery}=useWaffleFiltersContext(),{loading:loading,nodes:nodes,reload:reload,interval:interval}=Object(use_snaphot.a)(filterQueryAsJson,[metric],groupBy,nodeType,sourceId,currentTime,accountId,region,!1),legendPalette=null!==(_legend$palette=null==legend?void 0:legend.palette)&&void 0!==_legend$palette?_legend$palette:use_waffle_options.a.palette,legendSteps=null!==(_legend$steps=null==legend?void 0:legend.steps)&&void 0!==_legend$steps?_legend$steps:use_waffle_options.a.steps,legendReverseColors=null!==(_legend$reverseColors=null==legend?void 0:legend.reverseColors)&&void 0!==_legend$reverseColors?_legend$reverseColors:use_waffle_options.a.reverseColors,options={formatter:lib_lib.b.percent,formatTemplate:"{{value}}",legend:createLegend(legendPalette,legendSteps,legendReverseColors),metric:metric,sort:sort,fields:null==source||null===(_source$configuration=source.configuration)||void 0===_source$configuration?void 0:_source$configuration.fields,groupBy:groupBy};useInterval_default()(()=>{loading||jumpToTime(Date.now())},isAutoReloading?5e3:null);const intervalAsString=convertIntervalToString(interval),dataBounds=calculateBoundsFromNodes(nodes),bounds=autoBounds?dataBounds:boundsOverride,formatter=Object(external_kbnSharedDeps_React_.useCallback)(Object(create_inventory_metric_formatter.a)(options.metric),[options.metric]),{viewState:viewState,onViewChange:onViewChange}=useWaffleViewState();return Object(external_kbnSharedDeps_React_.useEffect)(()=>{currentView&&onViewChange(currentView)},[currentView,onViewChange]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{null==currentView&&shouldLoadDefault||reload()},[reload,shouldLoadDefault]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{setShowLoading(!0)},[options.metric,nodeType]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{const hasNodes=nodes&&nodes.length;setShowLoading(!hasNodes)},[nodes]),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(components_page.c,null,external_kbnSharedDeps_React_default.a.createElement(auto_sizer.a,{bounds:!0},({measureRef:pageMeasureRef,bounds:{width:width=0}})=>external_kbnSharedDeps_React_default.a.createElement(MainContainer,{ref:pageMeasureRef},external_kbnSharedDeps_React_default.a.createElement(auto_sizer.a,{bounds:!0},({measureRef:topActionMeasureRef,bounds:{height:topActionHeight=0}})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(TopActionContainer,{ref:topActionMeasureRef},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center",gutterSize:"m"},external_kbnSharedDeps_React_default.a.createElement(toolbar_Toolbar,{nodeType:nodeType,currentTime:currentTime}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(IntervalLabel,{intervalAsString:intervalAsString})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(ViewSwitcher,{view:view,onChange:changeView}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(SavedViewContainer,null,external_kbnSharedDeps_React_default.a.createElement(SavedViewsToolbarControls,{viewState:viewState}))),external_kbnSharedDeps_React_default.a.createElement(auto_sizer.a,{bounds:!0},({measureRef:measureRef,bounds:{height:height=0}})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(NodesOverview,{nodes:nodes,options:options,nodeType:nodeType,loading:loading,showLoading:showLoading,reload:reload,onDrilldown:applyFilterQuery,currentTime:currentTime,view:view,autoBounds:autoBounds,boundsOverride:boundsOverride,formatter:formatter,bottomMargin:height,topMargin:topActionHeight}),"map"===view&&external_kbnSharedDeps_React_default.a.createElement(BottomDrawer,{measureRef:measureRef,interval:interval,formatter:formatter,width:width},external_kbnSharedDeps_React_default.a.createElement(Legend,{formatter:formatter,bounds:bounds,dataBounds:dataBounds,legend:options.legend}))))))))))}),MainContainer=common_.euiStyled.div`
  position: relative;
  flex: 1 1 auto;
`,TopActionContainer=common_.euiStyled.div`
  padding: ${props=>"12px "+props.theme.eui.paddingSizes.m};
`,SavedViewContainer=common_.euiStyled.div`
  position: relative;
  z-index: 1;
  padding-left: ${props=>props.theme.eui.paddingSizes.m};
`,LayoutView=()=>{const{shouldLoadDefault:shouldLoadDefault,currentView:currentView}=useSavedViewContext();return external_kbnSharedDeps_React_default.a.createElement(layout_Layout,{shouldLoadDefault:shouldLoadDefault,currentView:currentView})};function inventory_view_extends(){return(inventory_view_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const SnapshotPage=()=>{var _useKibana$services$a,_uiCapabilities$infra;const uiCapabilities=null===(_useKibana$services$a=Object(kibanaReact_public_.useKibana)().services.application)||void 0===_useKibana$services$a?void 0:_useKibana$services$a.capabilities,{hasFailedLoadingSource:hasFailedLoadingSource,isLoading:isLoading,loadSourceFailureMessage:loadSourceFailureMessage,loadSource:loadSource,source:source,metricIndicesExist:metricIndicesExist}=Object(external_kbnSharedDeps_React_.useContext)(metrics_source.a.Context);Object(observability_public_.useTrackPageview)({app:"infra_metrics",path:"inventory"}),Object(observability_public_.useTrackPageview)({app:"infra_metrics",path:"inventory",delay:15e3});const{source:optionsSource}=Object(use_waffle_options.d)(),tutorialLinkProps=Object(use_link_props.b)({app:"home",hash:"/tutorial_directory/metrics"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiErrorBoundary,null,external_kbnSharedDeps_React_default.a.createElement(components_page.a,null,external_kbnSharedDeps_React_default.a.createElement(document_title.a,{title:previousTitle=>external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.infrastructureSnapshotPage.documentTitle",{defaultMessage:"{previousTitle} | Inventory",values:{previousTitle:previousTitle}})}),isLoading&&!source?external_kbnSharedDeps_React_default.a.createElement(source_loading_page.a,null):metricIndicesExist?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(FilterBar,null),external_kbnSharedDeps_React_default.a.createElement(SavedViewProvider,{shouldLoadDefault:"default"===optionsSource,viewType:"inventory-view",defaultViewState:DEFAULT_WAFFLE_VIEW_STATE},external_kbnSharedDeps_React_default.a.createElement(LayoutView,null))):hasFailedLoadingSource?external_kbnSharedDeps_React_default.a.createElement(SourceErrorPage,{errorMessage:loadSourceFailureMessage||"",retry:loadSource}):external_kbnSharedDeps_React_default.a.createElement(no_indices.a,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.homePage.noMetricsIndicesTitle",{defaultMessage:"Looks like you don't have any metrics indices."}),message:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.homePage.noMetricsIndicesDescription",{defaultMessage:"Let's add some!"}),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,inventory_view_extends({},tutorialLinkProps,{color:"primary",fill:!0,"data-test-subj":"infrastructureViewSetupInstructionsButton"}),external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.homePage.noMetricsIndicesInstructionsActionLabel",{defaultMessage:"View setup instructions"}))),null!=uiCapabilities&&null!==(_uiCapabilities$infra=uiCapabilities.infrastructure)&&void 0!==_uiCapabilities$infra&&_uiCapabilities$infra.configureSource?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(view_source_configuration_button.a,{app:"metrics","data-test-subj":"configureSourceButton"},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.configureSourceActionLabel",{defaultMessage:"Change source configuration"}))):null),"data-test-subj":"noMetricsIndicesPrompt"})))};var navigation_warning_prompt=__webpack_require__(22);function fields_configuration_panel_extends(){return(fields_configuration_panel_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const FieldsConfigurationPanel=({containerFieldProps:containerFieldProps,hostFieldProps:hostFieldProps,isLoading:isLoading,readOnly:readOnly,podFieldProps:podFieldProps,timestampFieldProps:timestampFieldProps})=>{const isHostValueDefault="host.name"===hostFieldProps.value,isContainerValueDefault="container.id"===containerFieldProps.value,isPodValueDefault="kubernetes.pod.uid"===podFieldProps.value,isTimestampValueDefault="@timestamp"===timestampFieldProps.value;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiForm,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.fieldsSectionTitle",defaultMessage:"Fields"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.sourceConfiguration.deprecationNotice",{defaultMessage:"Deprecation Notice"}),color:"warning",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.deprecationMessage",defaultMessage:"Configuring these fields have been deprecated and will be removed in 8.0.0. This application is designed to work with {ecsLink}, you should adjust your indexing to use the {documentationLink}.",values:{documentationLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:"https://www.elastic.co/guide/en/infrastructure/guide/7.4/infrastructure-metrics.html",target:"BLANK"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.documentedFields",defaultMessage:"documented fields"})),ecsLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:"https://www.elastic.co/guide/en/ecs/current/index.html",target:"BLANK"},"ECS")}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.timestampFieldLabel",defaultMessage:"Timestamp"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.timestampFieldDescription",defaultMessage:"Timestamp used to sort log entries"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{error:timestampFieldProps.error,fullWidth:!0,helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.timestampFieldRecommendedValue",defaultMessage:"The recommended value is {defaultValue}",values:{defaultValue:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,"@timestamp")}}),isInvalid:timestampFieldProps.isInvalid,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.timestampFieldLabel",defaultMessage:"Timestamp"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,fields_configuration_panel_extends({fullWidth:!0,disabled:isLoading||isTimestampValueDefault,readOnly:readOnly,isLoading:isLoading},timestampFieldProps)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.containerFieldLabel",defaultMessage:"Container ID"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.containerFieldDescription",defaultMessage:"Field used to identify Docker containers"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{error:containerFieldProps.error,fullWidth:!0,helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.containerFieldRecommendedValue",defaultMessage:"The recommended value is {defaultValue}",values:{defaultValue:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,"container.id")}}),isInvalid:containerFieldProps.isInvalid,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.containerFieldLabel",defaultMessage:"Container ID"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,fields_configuration_panel_extends({fullWidth:!0,disabled:isLoading||isContainerValueDefault,readOnly:readOnly,isLoading:isLoading},containerFieldProps)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.hostNameFieldLabel",defaultMessage:"Host name"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.hostNameFieldDescription",defaultMessage:"Field used to identify hosts"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{error:hostFieldProps.error,fullWidth:!0,helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.hostFieldDescription",defaultMessage:"The recommended value is {defaultValue}",values:{defaultValue:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,"host.name")}}),isInvalid:hostFieldProps.isInvalid,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.hostFieldLabel",defaultMessage:"Host name"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,fields_configuration_panel_extends({fullWidth:!0,disabled:isLoading||isHostValueDefault,readOnly:readOnly,isLoading:isLoading},hostFieldProps)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.podFieldLabel",defaultMessage:"Pod ID"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.podFieldDescription",defaultMessage:"Field used to identify Kubernetes pods"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{error:podFieldProps.error,fullWidth:!0,helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.podFieldRecommendedValue",defaultMessage:"The recommended value is {defaultValue}",values:{defaultValue:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,"kubernetes.pod.uid")}}),isInvalid:podFieldProps.isInvalid,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.podFieldLabel",defaultMessage:"Pod ID"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,fields_configuration_panel_extends({fullWidth:!0,disabled:isLoading||isPodValueDefault,readOnly:readOnly,isLoading:isLoading},podFieldProps)))))};var constants=__webpack_require__(28);function indices_configuration_panel_extends(){return(indices_configuration_panel_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const IndicesConfigurationPanel=({isLoading:isLoading,readOnly:readOnly,metricAliasFieldProps:metricAliasFieldProps})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiForm,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.indicesSectionTitle",defaultMessage:"Indices"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.metricIndicesTitle",defaultMessage:"Metrics indices"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.metricIndicesDescription",defaultMessage:"Index pattern for matching indices that contain metrics data"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{error:metricAliasFieldProps.error,fullWidth:!0,helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.metricIndicesRecommendedValue",defaultMessage:"The recommended value is {defaultValue}",values:{defaultValue:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,constants.b)}}),isInvalid:metricAliasFieldProps.isInvalid,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.metricIndicesLabel",defaultMessage:"Metrics indices"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,indices_configuration_panel_extends({"data-test-subj":"metricIndicesInput",fullWidth:!0,disabled:isLoading,readOnly:readOnly,isLoading:isLoading},metricAliasFieldProps)))));function ml_configuration_panel_extends(){return(ml_configuration_panel_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const MLConfigurationPanel=({isLoading:isLoading,readOnly:readOnly,anomalyThresholdFieldProps:anomalyThresholdFieldProps})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiForm,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.mlSectionTitle",defaultMessage:"Machine Learning"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.anomalyThresholdTitle",defaultMessage:"Anomaly Severity Threshold"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.anomalyThresholdDescription",defaultMessage:"Sets the minimum severity score required to show anomalies in the Metrics application."})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{error:anomalyThresholdFieldProps.error,fullWidth:!0,isInvalid:anomalyThresholdFieldProps.isInvalid,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.anomalyThresholdLabel",defaultMessage:"Minimum severity score"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiRange,ml_configuration_panel_extends({min:0,max:100,"data-test-subj":"anomalyThresholdInput",showInput:!0,showTicks:!0,showRange:!0,tickInterval:20,"aria-label":"Minimum severity score",disabled:isLoading,readOnly:readOnly,isLoading:isLoading},anomalyThresholdFieldProps)))));function name_configuration_panel_extends(){return(name_configuration_panel_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const NameConfigurationPanel=({isLoading:isLoading,readOnly:readOnly,nameFieldProps:nameFieldProps})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiForm,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s","data-test-subj":"sourceConfigurationNameSectionTitle"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.nameSectionTitle",defaultMessage:"Name"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.nameLabel",defaultMessage:"Name"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.nameDescription",defaultMessage:"A descriptive name for the source configuration"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{error:nameFieldProps.error,fullWidth:!0,isInvalid:nameFieldProps.isInvalid,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.nameLabel",defaultMessage:"Name"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,name_configuration_panel_extends({"data-test-subj":"nameInput",fullWidth:!0,disabled:isLoading,readOnly:readOnly,isLoading:isLoading},nameFieldProps))))),SourceConfigurationSettings=({shouldAllowEdit:shouldAllowEdit})=>{const{createSourceConfiguration:createSourceConfiguration,source:source,sourceExists:sourceExists,isLoading:isLoading,isUninitialized:isUninitialized,updateSourceConfiguration:updateSourceConfiguration}=Object(external_kbnSharedDeps_React_.useContext)(metrics_source.a.Context),{indicesConfigurationProps:indicesConfigurationProps,errors:errors,resetForm:resetForm,isFormDirty:isFormDirty,isFormValid:isFormValid,formState:formState,formStateChanges:formStateChanges}=useSourceConfigurationFormState(source&&source.configuration),persistUpdates=Object(external_kbnSharedDeps_React_.useCallback)(async()=>{sourceExists?await updateSourceConfiguration(formStateChanges):await createSourceConfiguration(formState),resetForm()},[sourceExists,updateSourceConfiguration,createSourceConfiguration,resetForm,formState,formStateChanges]),isWriteable=Object(external_kbnSharedDeps_React_.useMemo)(()=>shouldAllowEdit&&source&&"internal"!==source.origin,[shouldAllowEdit,source]),{hasInfraMLCapabilities:hasInfraMLCapabilities}=useInfraMLCapabilitiesContext();return!isLoading&&!isUninitialized||source?null!=source&&source.configuration?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPage,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageBody,{className:"eui-displayBlock",restrictWidth:!0,"data-test-subj":"sourceConfigurationContent"},external_kbnSharedDeps_React_default.a.createElement(navigation_warning_prompt.b,{prompt:isFormDirty?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.sourceConfiguration.unsavedFormPrompt",{defaultMessage:"Are you sure you want to leave? Changes will be lost"}):void 0}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,{paddingSize:"l"},external_kbnSharedDeps_React_default.a.createElement(NameConfigurationPanel,{isLoading:isLoading,nameFieldProps:indicesConfigurationProps.name,readOnly:!isWriteable})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,{paddingSize:"l"},external_kbnSharedDeps_React_default.a.createElement(IndicesConfigurationPanel,{isLoading:isLoading,metricAliasFieldProps:indicesConfigurationProps.metricAlias,readOnly:!isWriteable})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,{paddingSize:"l"},external_kbnSharedDeps_React_default.a.createElement(FieldsConfigurationPanel,{containerFieldProps:indicesConfigurationProps.containerField,hostFieldProps:indicesConfigurationProps.hostField,isLoading:isLoading,podFieldProps:indicesConfigurationProps.podField,readOnly:!isWriteable,timestampFieldProps:indicesConfigurationProps.timestampField})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),hasInfraMLCapabilities&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,{paddingSize:"l"},external_kbnSharedDeps_React_default.a.createElement(MLConfigurationPanel,{isLoading:isLoading,readOnly:!isWriteable,anomalyThresholdFieldProps:indicesConfigurationProps.anomalyThreshold})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null)),errors.length>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{color:"danger"},external_kbnSharedDeps_React_default.a.createElement("ul",null,errors.map((error,errorIndex)=>external_kbnSharedDeps_React_default.a.createElement("li",{key:errorIndex},error)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"})):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,isWriteable&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,isLoading?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{color:"primary",isLoading:!0,fill:!0},"Loading"))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{"data-test-subj":"discardSettingsButton",color:"danger",iconType:"cross",isDisabled:isLoading||!isFormDirty,onClick:()=>{resetForm()}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.discardSettingsButtonLabel",defaultMessage:"Discard"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{"data-test-subj":"applySettingsButton",color:"primary",isDisabled:!isFormDirty||!isFormValid,fill:!0,onClick:persistUpdates},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.sourceConfiguration.applySettingsButtonLabel",defaultMessage:"Apply"})))))))))):null:external_kbnSharedDeps_React_default.a.createElement(source_loading_page.a,null)},MetricsSettingsPage=()=>{var _useKibana$services$a,_uiCapabilities$infra;const uiCapabilities=null===(_useKibana$services$a=Object(kibanaReact_public_.useKibana)().services.application)||void 0===_useKibana$services$a?void 0:_useKibana$services$a.capabilities;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiErrorBoundary,null,external_kbnSharedDeps_React_default.a.createElement(SourceConfigurationSettings,{shouldAllowEdit:null==uiCapabilities||null===(_uiCapabilities$infra=uiCapabilities.infrastructure)||void 0===_uiCapabilities$infra?void 0:_uiCapabilities$infra.configureSource}))};var app_navigation=__webpack_require__(244);const MetricsAlertDropdown=()=>{var _useKibana$services$a;const[popoverOpen,setPopoverOpen]=Object(external_kbnSharedDeps_React_.useState)(!1),[visibleFlyoutType,setVisibleFlyoutType]=Object(external_kbnSharedDeps_React_.useState)(null),uiCapabilities=null===(_useKibana$services$a=Object(kibanaReact_public_.useKibana)().services.application)||void 0===_useKibana$services$a?void 0:_useKibana$services$a.capabilities,canCreateAlerts=Object(external_kbnSharedDeps_React_.useMemo)(()=>{var _uiCapabilities$infra;return Boolean(null==uiCapabilities||null===(_uiCapabilities$infra=uiCapabilities.infrastructure)||void 0===_uiCapabilities$infra?void 0:_uiCapabilities$infra.save)},[uiCapabilities]),closeFlyout=Object(external_kbnSharedDeps_React_.useCallback)(()=>setVisibleFlyoutType(null),[setVisibleFlyoutType]),infrastructureAlertsPanel=Object(external_kbnSharedDeps_React_.useMemo)(()=>({id:1,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.alerting.infrastructureDropdownTitle",{defaultMessage:"Infrastructure alerts"}),items:[{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.alerting.createInventoryAlertButton",{defaultMessage:"Create inventory alert"}),onClick:()=>setVisibleFlyoutType("inventory")}]}),[setVisibleFlyoutType]),metricsAlertsPanel=Object(external_kbnSharedDeps_React_.useMemo)(()=>({id:2,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.alerting.metricsDropdownTitle",{defaultMessage:"Metrics alerts"}),items:[{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.alerting.createThresholdAlertButton",{defaultMessage:"Create threshold alert"}),onClick:()=>setVisibleFlyoutType("threshold")}]}),[setVisibleFlyoutType]),manageAlertsLinkProps=Object(use_link_props.b)({app:"management",pathname:"/insightsAndAlerting/triggersActions/alerts"}),manageAlertsMenuItem=Object(external_kbnSharedDeps_React_.useMemo)(()=>({name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.alerting.manageAlerts",{defaultMessage:"Manage alerts"}),icon:"tableOfContents",onClick:manageAlertsLinkProps.onClick}),[manageAlertsLinkProps]),firstPanelMenuItems=Object(external_kbnSharedDeps_React_.useMemo)(()=>canCreateAlerts?[{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.alerting.infrastructureDropdownMenu",{defaultMessage:"Infrastructure"}),panel:1},{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.alerting.metricsDropdownMenu",{defaultMessage:"Metrics"}),panel:2},manageAlertsMenuItem]:[manageAlertsMenuItem],[canCreateAlerts,manageAlertsMenuItem]),panels=Object(external_kbnSharedDeps_React_.useMemo)(()=>[{id:0,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.alerting.alertDropdownTitle",{defaultMessage:"Alerts"}),items:firstPanelMenuItems}].concat(canCreateAlerts?[infrastructureAlertsPanel,metricsAlertsPanel]:[]),[infrastructureAlertsPanel,metricsAlertsPanel,firstPanelMenuItems,canCreateAlerts]),closePopover=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setPopoverOpen(!1)},[setPopoverOpen]),openPopover=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setPopoverOpen(!0)},[setPopoverOpen]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{panelPaddingSize:"none",anchorPosition:"downLeft",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{iconSide:"right",iconType:"arrowDown",onClick:openPopover},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.alerting.alertsButton",defaultMessage:"Alerts"})),isOpen:popoverOpen,closePopover:closePopover},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiContextMenu,{initialPanelId:0,panels:panels})),external_kbnSharedDeps_React_default.a.createElement(metrics_alert_dropdown_AlertFlyout,{visibleFlyoutType:visibleFlyoutType,onClose:closeFlyout}))},metrics_alert_dropdown_AlertFlyout=({visibleFlyoutType:visibleFlyoutType,onClose:onClose})=>{switch(visibleFlyoutType){case"inventory":return external_kbnSharedDeps_React_default.a.createElement(PrefilledInventoryAlertFlyout,{onClose:onClose});case"threshold":return external_kbnSharedDeps_React_default.a.createElement(PrefilledThresholdAlertFlyout,{onClose:onClose});default:return null}};var fixed_datepicker=__webpack_require__(264);const JobSetupScreen=props=>{const[now]=Object(external_kbnSharedDeps_React_.useState)(()=>external_kbnSharedDeps_Moment_default()()),{goHome:goHome}=props,[startDate,setStartDate]=Object(external_kbnSharedDeps_React_.useState)(now.clone().subtract(4,"weeks")),[partitionField,setPartitionField]=Object(external_kbnSharedDeps_React_.useState)(null),h=useMetricHostsModuleContext(),k=useMetricK8sModuleContext(),[filter,setFilter]=Object(external_kbnSharedDeps_React_.useState)(""),[filterQuery,setFilterQuery]=Object(external_kbnSharedDeps_React_.useState)(""),trackMetric=Object(observability_public_.useUiTracker)({app:"infra_metrics"}),{createDerivedIndexPattern:createDerivedIndexPattern}=Object(use_source_via_http.a)({sourceId:"default"}),indicies=h.sourceConfiguration.indices,setupStatus=Object(external_kbnSharedDeps_React_.useMemo)(()=>"kubernetes"===props.jobType?k.setupStatus:h.setupStatus,[props.jobType,k.setupStatus,h.setupStatus]),cleanUpAndSetUpModule=Object(external_kbnSharedDeps_React_.useMemo)(()=>"kubernetes"===props.jobType?k.cleanUpAndSetUpModule:h.cleanUpAndSetUpModule,[props.jobType,k.cleanUpAndSetUpModule,h.cleanUpAndSetUpModule]),setUpModule=Object(external_kbnSharedDeps_React_.useMemo)(()=>"kubernetes"===props.jobType?k.setUpModule:h.setUpModule,[props.jobType,k.setUpModule,h.setUpModule]),hasSummaries=Object(external_kbnSharedDeps_React_.useMemo)(()=>"kubernetes"===props.jobType?k.jobSummaries.length>0:h.jobSummaries.length>0,[props.jobType,k.jobSummaries,h.jobSummaries]),derivedIndexPattern=Object(external_kbnSharedDeps_React_.useMemo)(()=>createDerivedIndexPattern(),[createDerivedIndexPattern]),updateStart=Object(external_kbnSharedDeps_React_.useCallback)(date=>{setStartDate(date)},[]),createJobs=Object(external_kbnSharedDeps_React_.useCallback)(()=>{hasSummaries?cleanUpAndSetUpModule(indicies,external_kbnSharedDeps_Moment_default()(startDate).toDate().getTime(),void 0,filterQuery,partitionField?partitionField[0]:void 0):setUpModule(indicies,external_kbnSharedDeps_Moment_default()(startDate).toDate().getTime(),void 0,filterQuery,partitionField?partitionField[0]:void 0)},[cleanUpAndSetUpModule,filterQuery,setUpModule,hasSummaries,indicies,partitionField,startDate]),onFilterChange=Object(external_kbnSharedDeps_React_.useCallback)(f=>{setFilter(f||""),setFilterQuery(Object(kuery.a)(f,derivedIndexPattern)||"")},[derivedIndexPattern]),debouncedOnFilterChange=Object(external_kbnSharedDeps_React_.useCallback)(Object(external_kbnSharedDeps_Lodash_.debounce)(onFilterChange,500),[onFilterChange]),onPartitionFieldChange=Object(external_kbnSharedDeps_React_.useCallback)(value=>{setPartitionField(value.map(v=>v.label))},[]);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{"kubernetes"===props.jobType&&setPartitionField(["kubernetes.namespace"])},[props.jobType]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{"succeeded"===setupStatus.type&&("kubernetes"===props.jobType?(trackMetric({metric:"metrics_ml_anomaly_detection_k8s_enabled"}),!partitionField||1===partitionField.length&&"kubernetes.namespace"===partitionField[0]||trackMetric({metric:"metrics_ml_anomaly_detection_k8s_partition_changed"})):(trackMetric({metric:"metrics_ml_anomaly_detection_hosts_enabled"}),partitionField&&trackMetric({metric:"metrics_ml_anomaly_detection_hosts_partition_changed"}),trackMetric({metric:"metrics_ml_anomaly_detection_hosts_enabled"})),goHome())},[setupStatus,props.jobType,partitionField,trackMetric,goHome]),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{defaultMessage:"Enable machine learning for {nodeType}",id:"xpack.infra.ml.aomalyFlyout.jobSetup.flyoutHeader",values:{nodeType:props.jobType}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutBody,null,"pending"===setupStatus.type?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,{size:"xl"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.ml.steps.setupProcess.loadingText",defaultMessage:"Creating ML job..."}))):"failed"===setupStatus.type?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.ml.steps.setupProcess.failureText",defaultMessage:"Something went wrong creating the necessary ML jobs."}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{fill:!0,onClick:createJobs},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.ml.steps.setupProcess.tryAgainButton",defaultMessage:"Try again"}))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.ml.steps.setupProcess.description",defaultMessage:"Settings can not be changed once the jobs are created. You can recreate jobs anytime, however, the previously detected anomalies are removed."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiForm,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.ml.steps.setupProcess.when.title",defaultMessage:"When does your model begin?"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.ml.steps.setupProcess.when.description",defaultMessage:"By default, machine learning jobs analyze the last 4 weeks of data and continue to run indefinitely."})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.ml.steps.setupProcess.when.timePicker.label",defaultMessage:"Start date"})},external_kbnSharedDeps_React_default.a.createElement(fixed_datepicker.a,{showTimeSelect:!0,selected:startDate,onChange:updateStart,maxDate:now}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.ml.steps.setupProcess.partition.title",defaultMessage:"How do you want to partition your data?"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.ml.steps.setupProcess.partition.description",defaultMessage:"Partitions enable you to build independent models for groups of data that share similar behavior. For example, you can partition by machine type or cloud availability zone."})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.ml.steps.setupProcess.partition.label",defaultMessage:"Partition field"}),display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiComboBox,{placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.groupByLabel",{defaultMessage:"Everything"}),"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsExplorer.groupByAriaLabel",{defaultMessage:"Graph per"}),fullWidth:!0,singleSelection:!0,selectedOptions:partitionField?partitionField.map(p=>({label:p})):void 0,options:derivedIndexPattern.fields.filter(f=>f.aggregatable&&"string"===f.type).map(f=>({label:f.name})),onChange:onPartitionFieldChange,isClearable:!0}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDescribedFormGroup,{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.ml.steps.setupProcess.filter.title",defaultMessage:"Filter"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.ml.steps.setupProcess.filter.description",defaultMessage:"By default, machine learning jobs analyze all of your metric data."})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{display:"rowCompressed",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.ml.steps.setupProcess.filter.label",defaultMessage:"Filter (optional)"})},external_kbnSharedDeps_React_default.a.createElement(kuery_bar.a,{derivedIndexPattern:derivedIndexPattern,onSubmit:onFilterChange,onChange:debouncedOnFilterChange,value:filter})))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutFooter,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:props.closeFlyout},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.ml.steps.setupProcess.cancelButton",defaultMessage:"Cancel"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{fill:!0,fullWidth:!1,onClick:createJobs},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.ml.steps.setupProcess.enableButton",defaultMessage:"Enable jobs"}))))))};var use_kibana_space=__webpack_require__(201);const AnomalyDetectionFlyout=()=>{var _source$configuration,_source$configuration2,_source$configuration3,_source$configuration4;const{hasInfraMLSetupCapabilities:hasInfraMLSetupCapabilities}=useInfraMLCapabilities(),[showFlyout,setShowFlyout]=Object(external_kbnSharedDeps_React_.useState)(!1),[screenName,setScreenName]=Object(external_kbnSharedDeps_React_.useState)("home"),[screenParams,setScreenParams]=Object(external_kbnSharedDeps_React_.useState)(null),{source:source}=Object(use_source_via_http.a)({sourceId:"default"}),{space:space}=Object(use_kibana_space.a)(),openFlyout=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setScreenName("home"),setShowFlyout(!0)},[]),openJobSetup=Object(external_kbnSharedDeps_React_.useCallback)(jobType=>{setScreenName("setup"),setScreenParams({jobType:jobType})},[setScreenName]),closeFlyout=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setShowFlyout(!1)},[]);return null==(null==source?void 0:source.configuration.metricAlias)||null==space?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{iconSide:"left",iconType:"inspect",onClick:openFlyout},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.ml.anomalyDetectionButton",defaultMessage:"Anomaly detection"})),showFlyout&&external_kbnSharedDeps_React_default.a.createElement(MetricHostsModuleProvider,{indexPattern:null!==(_source$configuration=null==source?void 0:source.configuration.metricAlias)&&void 0!==_source$configuration?_source$configuration:"",sourceId:"default",spaceId:space.id,timestampField:null!==(_source$configuration2=null==source?void 0:source.configuration.fields.timestamp)&&void 0!==_source$configuration2?_source$configuration2:""},external_kbnSharedDeps_React_default.a.createElement(MetricK8sModuleProvider,{indexPattern:null!==(_source$configuration3=null==source?void 0:source.configuration.metricAlias)&&void 0!==_source$configuration3?_source$configuration3:"",sourceId:"default",spaceId:space.id,timestampField:null!==(_source$configuration4=null==source?void 0:source.configuration.fields.timestamp)&&void 0!==_source$configuration4?_source$configuration4:""},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyout,{onClose:closeFlyout,"data-test-subj":"loadMLFlyout"},"home"===screenName&&external_kbnSharedDeps_React_default.a.createElement(FlyoutHome,{hasSetupCapabilities:hasInfraMLSetupCapabilities,goToSetup:openJobSetup,closeFlyout:closeFlyout}),"setup"===screenName&&external_kbnSharedDeps_React_default.a.createElement(JobSetupScreen,{goHome:openFlyout,closeFlyout:closeFlyout,jobType:screenParams.jobType})))))};var header_action_menu_provider=__webpack_require__(41);function metrics_extends(){return(metrics_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const ADD_DATA_LABEL=external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricsHeaderAddDataButtonLabel",{defaultMessage:"Add data"}),InfrastructurePage=({match:match})=>{var _useKibana$services$a,_kibana$services,_kibana$services$appl,_uiCapabilities$infra;const uiCapabilities=null===(_useKibana$services$a=Object(kibanaReact_public_.useKibana)().services.application)||void 0===_useKibana$services$a?void 0:_useKibana$services$a.capabilities,{setHeaderActionMenu:setHeaderActionMenu}=Object(external_kbnSharedDeps_React_.useContext)(header_action_menu_provider.a),kibana=Object(kibanaReact_public_.useKibana)();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiErrorBoundary,null,external_kbnSharedDeps_React_default.a.createElement(metrics_source.a.Provider,{sourceId:"default"},external_kbnSharedDeps_React_default.a.createElement(use_alert_prefill.a,null,external_kbnSharedDeps_React_default.a.createElement(use_waffle_options.c,null,external_kbnSharedDeps_React_default.a.createElement(WaffleTimeProvider,null,external_kbnSharedDeps_React_default.a.createElement(WaffleFiltersProvider,null,external_kbnSharedDeps_React_default.a.createElement(InfraMLCapabilitiesProvider,null,external_kbnSharedDeps_React_default.a.createElement(components_page.a,null,external_kbnSharedDeps_React_default.a.createElement(document_title.a,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.homePage.documentTitle",{defaultMessage:"Metrics"})}),external_kbnSharedDeps_React_default.a.createElement(help_center_content.a,{feedbackLink:"https://discuss.elastic.co/c/metrics",appName:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.header.infrastructureHelpAppName",{defaultMessage:"Metrics"})}),setHeaderActionMenu&&external_kbnSharedDeps_React_default.a.createElement(observability_public_.HeaderMenuPortal,{setHeaderActionMenu:setHeaderActionMenu},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",gutterSize:"none",responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:"/inventory",component:AnomalyDetectionFlyout})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(MetricsAlertDropdown,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{href:null===(_kibana$services=kibana.services)||void 0===_kibana$services||null===(_kibana$services$appl=_kibana$services.application)||void 0===_kibana$services$appl?void 0:_kibana$services$appl.getUrlForApp("/home#/tutorial_directory/metrics"),size:"s",color:"primary",iconType:"indexOpen"},ADD_DATA_LABEL)))),external_kbnSharedDeps_React_default.a.createElement(header.a,{breadcrumbs:[{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.header.infrastructureTitle",{defaultMessage:"Metrics"})}],readOnlyBadge:!(null!=uiCapabilities&&null!==(_uiCapabilities$infra=uiCapabilities.infrastructure)&&void 0!==_uiCapabilities$infra&&_uiCapabilities$infra.save)}),external_kbnSharedDeps_React_default.a.createElement(app_navigation.a,{"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.header.infrastructureNavigationTitle",{defaultMessage:"Metrics"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"none",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(routed_tabs.a,{tabs:[{app:"metrics",title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.homePage.inventoryTabTitle",{defaultMessage:"Inventory"}),pathname:"/inventory"},{app:"metrics",title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.homePage.metricsExplorerTabTitle",{defaultMessage:"Metrics Explorer"}),pathname:"/explorer"},{app:"metrics",title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.homePage.settingsTabTitle",{defaultMessage:"Settings"}),pathname:"/settings"}]})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Switch,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:"/inventory",component:SnapshotPage}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:"/explorer",render:props=>external_kbnSharedDeps_React_default.a.createElement(WithSource,null,({configuration:configuration,createDerivedIndexPattern:createDerivedIndexPattern})=>external_kbnSharedDeps_React_default.a.createElement(use_metrics_explorer_options.c.Provider,null,external_kbnSharedDeps_React_default.a.createElement(WithMetricsExplorerOptionsUrlState,null),configuration?external_kbnSharedDeps_React_default.a.createElement(PageContent,{configuration:configuration,createDerivedIndexPattern:createDerivedIndexPattern}):external_kbnSharedDeps_React_default.a.createElement(source_loading_page.a,null)))}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:"/settings",component:MetricsSettingsPage}))))))))))},PageContent=props=>{const{createDerivedIndexPattern:createDerivedIndexPattern,configuration:configuration}=props,{options:options}=Object(external_kbnSharedDeps_React_.useContext)(use_metrics_explorer_options.c.Context);return external_kbnSharedDeps_React_default.a.createElement(SavedViewProvider,{shouldLoadDefault:"default"===options.source,viewType:"metrics-explorer-view",defaultViewState:use_metrics_explorer_options.a},external_kbnSharedDeps_React_default.a.createElement(MetricsExplorerPage,metrics_extends({derivedIndexPattern:createDerivedIndexPattern("metrics"),source:configuration},props)))},NodeDetailsDataPointRT=lib.intersection([lib.type({timestamp:lib.number}),lib.partial({value:lib.union([lib.number,lib.null])})]),NodeDetailsDataSeriesRT=lib.type({id:lib.string,label:lib.string,data:lib.array(NodeDetailsDataPointRT)}),NodeDetailsMetricDataRT=lib.intersection([lib.partial({id:lib.union([types.a,lib.null])}),lib.type({series:lib.array(NodeDetailsDataSeriesRT)})]),NodeDetailsMetricDataResponseRT=lib.type({metrics:lib.array(NodeDetailsMetricDataRT)});lib.intersection([lib.type({nodeType:types.c,nodeId:lib.string,metrics:lib.array(types.a),timerange:snapshot_api.a,sourceId:lib.string}),lib.partial({cloudId:lib.union([lib.string,lib.null])})]);const MetricsSideNav=({loading:loading,name:name,items:items})=>{const[isOpenOnMobile,setMobileState]=Object(external_kbnSharedDeps_React_.useState)(!1),toggle=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setMobileState(!isOpenOnMobile)},[isOpenOnMobile]),content=loading?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSideNav,{items:items}),mobileContent=loading?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSideNav,{items:items,mobileTitle:name,toggleOpenOnMobile:toggle,isOpenOnMobile:isOpenOnMobile});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageSideBar,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHideFor,{sizes:["xs","s"]},external_kbnSharedDeps_React_default.a.createElement(SideNavContainer,null,content)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiShowFor,{sizes:["xs","s"]},mobileContent))},SideNavContainer=common_.euiStyled.div`
  position: fixed;
  z-index: 1;
  height: 88vh;
  padding-left: 16px;
  margin-left: -16px;
  overflow-y: auto;
  overflow-x: hidden;
`,MetricsTimeControls=props=>{const[timepickerQuickRanges]=Object(use_kibana_ui_setting.a)(data_public_.UI_SETTINGS.TIMEPICKER_QUICK_RANGES),{onChangeTimeRange:onChangeTimeRange,onRefresh:onRefresh,currentTimeRange:currentTimeRange,isLiveStreaming:isLiveStreaming,refreshInterval:refreshInterval,setAutoReload:setAutoReload,setRefreshInterval:setRefreshInterval}=props,commonlyUsedRanges=mapKibanaQuickRangesToDatePickerRanges(timepickerQuickRanges),handleTimeChange=Object(external_kbnSharedDeps_React_.useCallback)(({start:start,end:end})=>{onChangeTimeRange({from:start,to:end,interval:">=1m"})},[onChangeTimeRange]),handleRefreshChange=Object(external_kbnSharedDeps_React_.useCallback)(({isPaused:isPaused,refreshInterval:_refreshInterval})=>{isPaused?setAutoReload(!1):(setRefreshInterval(_refreshInterval),setAutoReload(!0))},[setAutoReload,setRefreshInterval]);return external_kbnSharedDeps_React_default.a.createElement(MetricsTimeControlsContainer,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSuperDatePicker,{start:currentTimeRange.from.toString(),end:currentTimeRange.to.toString(),isPaused:!isLiveStreaming,refreshInterval:refreshInterval||0,onTimeChange:handleTimeChange,onRefreshChange:handleRefreshChange,onRefresh:onRefresh,commonlyUsedRanges:commonlyUsedRanges}))},MetricsTimeControlsContainer=common_.euiStyled.div`
  max-width: 750px;
`,SideNavContext=external_kbnSharedDeps_React_default.a.createContext({items:[],addNavItem:item=>{}}),Section=({children:children,metrics:metrics,navLabel:navLabel,sectionLabel:sectionLabel,onChangeRangeTime:onChangeRangeTime,isLiveStreaming:isLiveStreaming,stopLiveStreaming:stopLiveStreaming})=>{const{addNavItem:addNavItem}=Object(external_kbnSharedDeps_React_.useContext)(SideNavContext),subNavItems=external_kbnSharedDeps_React_.Children.toArray(children).reduce((accumulatedChildren,child)=>{var _metrics$find;if(!Object(external_kbnSharedDeps_React_.isValidElement)(child))return accumulatedChildren;return null===(null!==(_metrics$find=null==metrics?void 0:metrics.find(m=>m.id===child.props.id))&&void 0!==_metrics$find?_metrics$find:null)?accumulatedChildren:child.props.label?[...accumulatedChildren,{id:child.props.id,name:child.props.label,onClick:()=>{const el=document.getElementById(child.props.id);el&&el.scrollIntoView()}}]:accumulatedChildren},[]),childrenWithProps=external_kbnSharedDeps_React_.Children.map(children,child=>Object(external_kbnSharedDeps_React_.isValidElement)(child)?Object(external_kbnSharedDeps_React_.cloneElement)(child,{metrics:metrics,onChangeRangeTime:onChangeRangeTime,isLiveStreaming:isLiveStreaming,stopLiveStreaming:stopLiveStreaming}):null);return metrics&&subNavItems.length?(addNavItem({id:navLabel,name:navLabel,items:subNavItems}),external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,null,external_kbnSharedDeps_React_default.a.createElement("h1",null,sectionLabel)),childrenWithProps)):null},SubSection=({id:id,label:label,children:children,metrics:metrics,onChangeRangeTime:onChangeRangeTime,isLiveStreaming:isLiveStreaming,stopLiveStreaming:stopLiveStreaming})=>{const metric=Object(external_kbnSharedDeps_React_.useMemo)(()=>null==metrics?void 0:metrics.find(m=>m.id===id),[id,metrics]);if(!children||!metric)return null;const childrenWithProps=external_kbnSharedDeps_React_.Children.map(children,child=>Object(external_kbnSharedDeps_React_.isValidElement)(child)?Object(external_kbnSharedDeps_React_.cloneElement)(child,{metric:metric,id:id,onChangeRangeTime:onChangeRangeTime,isLiveStreaming:isLiveStreaming,stopLiveStreaming:stopLiveStreaming}):null);return external_kbnSharedDeps_React_default.a.createElement("div",{style:{margin:"10px 0 16px 0"},id:id},label?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h4",null,label)):null,childrenWithProps)};var node_modules_color=__webpack_require__(545),color_default=__webpack_require__.n(node_modules_color);const seriesHasLessThen2DataPoints=series=>series.data.length<2,getChartName=(seriesOverrides,seriesId,label)=>seriesOverrides?Object(external_kbnSharedDeps_Lodash_.get)(seriesOverrides,[seriesId,"name"],label):label,getChartColor=(seriesOverrides,seriesId)=>{const rawColor=seriesOverrides?Object(external_kbnSharedDeps_Lodash_.get)(seriesOverrides,[seriesId,"color"]):null;if(!rawColor)return null;return new color_default.a(rawColor).hex().toString()},getChartType=(seriesOverrides,type,seriesId)=>{if(!seriesOverrides||!type)return"line";const overrideValue=Object(external_kbnSharedDeps_Lodash_.get)(seriesOverrides,[seriesId,"type"]);return types.b.is(overrideValue)?overrideValue:types.b.is(type)?type:"line"},GaugesSectionVis=({id:id,metric:metric,seriesOverrides:seriesOverrides,formatter:formatter,formatterTemplate:formatterTemplate})=>metric&&id?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContentBody,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(GroupBox,null,metric.series.map(series=>{const lastDataPoint=Object(external_kbnSharedDeps_Lodash_.last)(series.data);if(!lastDataPoint)return null;const value=((defaultFormatter="number",defaultFormatterTemplate="{{value}}",seriesOverrides={},seriesId)=>val=>{if(null==val)return"";const formatter=Object(external_kbnSharedDeps_Lodash_.get)(seriesOverrides,[seriesId,"formatter"],defaultFormatter),formatterTemplate=Object(external_kbnSharedDeps_Lodash_.get)(seriesOverrides,[seriesId,"formatterTemplate"],defaultFormatterTemplate);return Object(formatters.b)(formatter,formatterTemplate)(val)})(formatter,formatterTemplate,seriesOverrides,series.id)(lastDataPoint.value||0),name=getChartName(seriesOverrides,series.id,series.id),dataMax=Object(external_kbnSharedDeps_Lodash_.max)(series.data.map(d=>d.value||0)),gaugeMax=Object(external_kbnSharedDeps_Lodash_.get)(seriesOverrides,[series.id,"gaugeMax"],dataMax);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{key:`${id}-${series.id}`,style:{margin:"0.4rem"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,{style:{minWidth:"160px"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{style:{textAlign:"right"},size:"s"},name),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h1",{style:{textAlign:"right",whiteSpace:"nowrap"}},value)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiProgress,{value:lastDataPoint.value||0,max:gaugeMax,size:"s",color:"primary"})))})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"})):null,GroupBox=common_.euiStyled.div`
  display: flex;
  flex-flow: row wrap;
  justify-content: space-evenly;
`,SeriesChart=props=>"bar"===props.type?external_kbnSharedDeps_React_default.a.createElement(BarChart,props):external_kbnSharedDeps_React_default.a.createElement(AreaChart,props),AreaChart=({id:id,color:color,series:series,name:name,type:type,stack:stack})=>{const style={area:{opacity:1,visible:"area"===type},line:{strokeWidth:"area"===type?1:2,visible:!0}};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.AreaSeries,{id:id,name:name,xScaleType:external_kbnSharedDeps_ElasticCharts_.ScaleType.Time,yScaleType:external_kbnSharedDeps_ElasticCharts_.ScaleType.Linear,xAccessor:"timestamp",yAccessors:["value"],data:series.data,areaSeriesStyle:style,color:color||void 0,stackAccessors:stack?["timestamp"]:void 0})},BarChart=({id:id,color:color,series:series,name:name,stack:stack})=>{const style={rectBorder:{stroke:color||void 0,strokeWidth:1,visible:!0},rect:{opacity:1}};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.BarSeries,{id:id,name:name,xScaleType:external_kbnSharedDeps_ElasticCharts_.ScaleType.Time,yScaleType:external_kbnSharedDeps_ElasticCharts_.ScaleType.Linear,xAccessor:"timestamp",yAccessors:["value"],data:series.data,barSeriesStyle:style,color:color||void 0,stackAccessors:stack?["timestamp"]:void 0})},ErrorMessage=({title:title,body:body})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"stats",title:external_kbnSharedDeps_React_default.a.createElement("h3",null,title),body:external_kbnSharedDeps_React_default.a.createElement("p",null,body)}),ChartSectionVis=({id:id,onChangeRangeTime:onChangeRangeTime,metric:metric,stopLiveStreaming:stopLiveStreaming,isLiveStreaming:isLiveStreaming,formatter:formatter,formatterTemplate:formatterTemplate,stacked:stacked,seriesOverrides:seriesOverrides,type:type})=>{const isDarkMode=Object(kibanaReact_public_.useUiSetting)("theme:darkMode"),[dateFormat]=Object(use_kibana_ui_setting.a)("dateFormat"),valueFormatter=Object(external_kbnSharedDeps_React_.useCallback)(((formatter="number",template="{{value}}")=>val=>null!=val?Object(formatters.b)(formatter,template)(val):"")(formatter,formatterTemplate),[formatter,formatterTemplate]),dateFormatter=Object(external_kbnSharedDeps_React_.useMemo)(()=>null!=metric?Object(external_kbnSharedDeps_ElasticCharts_.niceTimeFormatter)((metric=>{if(metric.series.some(seriesHasLessThen2DataPoints))return[0,0];const values=metric.series.reduce((acc,item)=>{const firstRow=Object(external_kbnSharedDeps_Lodash_.first)(item.data),lastRow=Object(external_kbnSharedDeps_Lodash_.last)(item.data);return acc.concat([firstRow&&firstRow.timestamp||0,lastRow&&lastRow.timestamp||0])},[]);return[Object(external_kbnSharedDeps_Lodash_.min)(values),Object(external_kbnSharedDeps_Lodash_.max)(values)]})(metric)):void 0,[metric]),handleTimeChange=Object(external_kbnSharedDeps_React_.useCallback)(({x:x})=>{if(!x)return;const[from,to]=x;onChangeRangeTime&&(isLiveStreaming&&stopLiveStreaming&&stopLiveStreaming(),onChangeRangeTime({from:external_kbnSharedDeps_Moment_default()(from).toISOString(),to:external_kbnSharedDeps_Moment_default()(to).toISOString(),interval:">=1m"}))},[onChangeRangeTime,isLiveStreaming,stopLiveStreaming]),tooltipProps={headerFormatter:Object(external_kbnSharedDeps_React_.useCallback)(data=>external_kbnSharedDeps_Moment_default()(data.value).format(dateFormat||"Y-MM-DD HH:mm:ss.SSS"),[dateFormat])};return id?metric?metric.series.some(seriesHasLessThen2DataPoints)?external_kbnSharedDeps_React_default.a.createElement(ErrorMessage,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.chartSection.notEnoughDataPointsToRenderTitle",{defaultMessage:"Not Enough Data"}),body:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.chartSection.notEnoughDataPointsToRenderText",{defaultMessage:"Not enough data points to render chart, try increasing the time range."})}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContentBody,null,external_kbnSharedDeps_React_default.a.createElement("div",{className:"infrastructureChart",style:{height:250,marginBottom:16}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Chart,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Axis,{id:"timestamp",position:external_kbnSharedDeps_ElasticCharts_.Position.Bottom,showOverlappingTicks:!0,tickFormat:dateFormatter}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Axis,{id:"values",position:external_kbnSharedDeps_ElasticCharts_.Position.Left,tickFormat:valueFormatter}),metric&&metric.series.map(series=>external_kbnSharedDeps_React_default.a.createElement(SeriesChart,{key:`series-${id}-${series.id}`,id:`series-${id}-${series.id}`,series:series,name:getChartName(seriesOverrides,series.id,series.id),type:getChartType(seriesOverrides,type,series.id),color:getChartColor(seriesOverrides,series.id),stack:stacked})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Settings,{tooltip:tooltipProps,onBrushEnd:handleTimeChange,theme:getChartTheme(isDarkMode),showLegend:!0,showLegendExtra:!0,legendPosition:"right"})))):external_kbnSharedDeps_React_default.a.createElement(ErrorMessage,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.chartSection.missingMetricDataText",{defaultMessage:"Missing Data"}),body:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.chartSection.missingMetricDataBody",{defaultMessage:"The data for this chart is missing."})}):null},aws_Layout=Object(common_.withTheme)(({metrics:metrics,onChangeRangeTime:onChangeRangeTime,theme:theme})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(Section,{navLabel:"AWS",sectionLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.awsMetricsLayout.overviewSection.sectionLabel",{defaultMessage:"AWS Overview"}),metrics:metrics,onChangeRangeTime:onChangeRangeTime},external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsOverview"},external_kbnSharedDeps_React_default.a.createElement(GaugesSectionVis,{seriesOverrides:{"cpu-util":{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.awsMetricsLayout.overviewSection.cpuUtilizationSeriesLabel",{defaultMessage:"CPU Utilization"}),color:theme.eui.euiColorFullShade,formatter:"percent",gaugeMax:1},"status-check-failed":{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.awsMetricsLayout.overviewSection.statusCheckFailedLabel",{defaultMessage:"Status check failed"}),color:theme.eui.euiColorFullShade},"packets-in":{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.awsMetricsLayout.overviewSection.networkPacketsInLabel",{defaultMessage:"Packets (in)"}),color:theme.eui.euiColorFullShade,formatter:"number"},"packets-out":{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.awsMetricsLayout.overviewSection.networkPacketsOutLabel",{defaultMessage:"Packets (out)"}),color:theme.eui.euiColorFullShade,formatter:"number"}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsCpuUtilization",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.awsMetricsLayout.cpuUtilSection.sectionLabel",{defaultMessage:"CPU Utilization"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"area",formatter:"number",seriesOverrides:{"cpu-util":{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.awsMetricsLayout.cpuUtilSection.percentSeriesLabel",{defaultMessage:"percent"})}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsNetworkBytes",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.awsMetricsLayout.networkBytesSection.sectionLabel",{defaultMessage:"Network Traffic"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"area",formatter:"bits",formatterTemplate:"{{value}}/s",seriesOverrides:{tx:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.awsMetricsLayout.networkBytesSection.txSeriesLabel",{defaultMessage:"out"})},rx:{color:theme.eui.euiColorVis2,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.awsMetricsLayout.networkBytesSection.rxSeriesLabel",{defaultMessage:"in"})}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsNetworkPackets",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.awsMetricsLayout.networkPacketsSection.sectionLabel",{defaultMessage:"Network Packets (Average)"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"area",formatter:"number",seriesOverrides:{"packets-out":{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.awsMetricsLayout.networkPacketsSection.packetsOutSeriesLabel",{defaultMessage:"out"})},"packets-in":{color:theme.eui.euiColorVis2,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.awsMetricsLayout.networkPacketsSection.packetsInSeriesLabel",{defaultMessage:"in"})}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsDiskioOps",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.awsMetricsLayout.diskioOperationsSection.sectionLabel",{defaultMessage:"Disk I/O Operations"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"area",formatter:"number",seriesOverrides:{writes:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.awsMetricsLayout.diskioOperationsSection.writesSeriesLabel",{defaultMessage:"writes"})},reads:{color:theme.eui.euiColorVis2,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.awsMetricsLayout.diskioOperationsSection.readsSeriesLabel",{defaultMessage:"reads"})}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsDiskioBytes",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.awsMetricsLayout.diskioBytesSection.sectionLabel",{defaultMessage:"Disk I/O Bytes"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"area",formatter:"number",seriesOverrides:{writes:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.awsMetricsLayout.diskioBytesSection.writesSeriesLabel",{defaultMessage:"writes"})},reads:{color:theme.eui.euiColorVis2,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.awsMetricsLayout.diskioBytesSection.readsSeriesLabel",{defaultMessage:"reads"})}}}))))),nginx_Layout=Object(common_.withTheme)(({metrics:metrics,onChangeRangeTime:onChangeRangeTime,theme:theme})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(Section,{navLabel:"Nginx",sectionLabel:"Nginx",metrics:metrics,onChangeRangeTime:onChangeRangeTime},external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"nginxHits",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.nginxMetricsLayout.hitsSection.sectionLabel",{defaultMessage:"Hits"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{stacked:!0,type:"bar",formatter:"abbreviatedNumber",seriesOverrides:{"200s":{color:theme.eui.euiColorVis1},"300s":{color:theme.eui.euiColorVis5},"400s":{color:theme.eui.euiColorVis2},"500s":{color:theme.eui.euiColorVis9}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"nginxRequestRate",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.nginxMetricsLayout.requestRateSection.sectionLabel",{defaultMessage:"Request Rate"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"area",formatter:"abbreviatedNumber",formatterTemplate:"{{value}}/s",seriesOverrides:{rate:{color:theme.eui.euiColorVis1}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"nginxActiveConnections",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.nginxMetricsLayout.activeConnectionsSection.sectionLabel",{defaultMessage:"Active Connections"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"area",formatter:"abbreviatedNumber",seriesOverrides:{connections:{color:theme.eui.euiColorVis1,type:"bar"}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"nginxRequestsPerConnection",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.nginxMetricsLayout.requestsPerConnectionsSection.sectionLabel",{defaultMessage:"Requests per Connections"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"bar",formatter:"abbreviatedNumber",seriesOverrides:{reqPerConns:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.nginxMetricsLayout.requestsPerConnectionsSection.reqsPerConnSeriesLabel",{defaultMessage:"reqs per conn"})}}}))))),MetadataContext=external_kbnSharedDeps_React_default.a.createContext(null),FIELDS=[{field:"cloud.instance.id",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.labels.instanceId",{defaultMessage:"Instance ID"})},{field:"cloud.provider",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.labels.cloudProvider",{defaultMessage:"Cloud Provider"})},{field:"host.os.name",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.labels.operatinSystem",{defaultMessage:"Operating System"})},{field:"host.os.kernel",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.labels.kernelVersion",{defaultMessage:"Kernel Version"})},{field:"host.hostname",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.labels.hostname",{defaultMessage:"Hostname"})},{field:"host.containerized",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.labels.containerized",{defaultMessage:"Containerized"}),isBoolean:!0},{field:"cloud.project.id",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.labels.projectId",{defaultMessage:"Project ID"})},{field:"cloud.availability_zone",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.labels.availabilityZone",{defaultMessage:"Availability Zone"})},{field:"cloud.machine.type",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.labels.machineType",{defaultMessage:"Machine Type"})},{field:"cloud.instance.name",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.labels.instanceName",{defaultMessage:"Instance Name"})}],MetadataDetails=props=>{const[isOpen,setControlState]=Object(external_kbnSharedDeps_React_.useState)(!1),toggleIsOpen=Object(external_kbnSharedDeps_React_.useCallback)(()=>setControlState(!isOpen),[isOpen]),filteredFields=Object(external_kbnSharedDeps_React_.useMemo)(()=>props.fields&&props.fields.length?props.fields.map(field=>{const fieldDef=FIELDS.find(f=>f.field===field);if(fieldDef)return fieldDef}).filter(f=>f):FIELDS,[props.fields]),fields=Object(external_kbnSharedDeps_React_.useMemo)(()=>isOpen?filteredFields:filteredFields.slice(0,4),[filteredFields,isOpen]),metadata=Object(external_kbnSharedDeps_React_.useContext)(MetadataContext);return metadata?external_kbnSharedDeps_React_default.a.createElement(MetadataContainer,null,filteredFields.length>4?external_kbnSharedDeps_React_default.a.createElement(Controls,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:isOpen?"arrowUp":"arrowDown",onClick:toggleIsOpen,"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.labels.showMoreDetails",{defaultMessage:"Show more details"})})):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGrid,{columns:4,style:{flexGrow:1},gutterSize:"s"},fields.map(field=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{key:field.field,style:{minWidth:0}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,(({field:field})=>{const fieldDef=FIELDS.find(f=>f.field===field);return fieldDef?fieldDef.label:field})(field))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,((metadata,{field:field,isBoolean:isBoolean})=>{if(isBoolean)return Object(external_kbnSharedDeps_Lodash_.get)(metadata.info,field,!1)?external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.yes",{defaultMessage:"Yes"}):external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.nodeDetails.no",{defaultMessage:"No"});return Object(external_kbnSharedDeps_Lodash_.get)(metadata.info,field,"--")})(metadata,field)))))):null},MetadataContainer=common_.euiStyled.div`
border-top: ${props=>props.theme.eui.euiBorderWidthThin} solid ${props=>props.theme.eui.euiBorderColor};
border-bottom: ${props=>props.theme.eui.euiBorderWidthThin} solid ${props=>props.theme.eui.euiBorderColor};
padding: ${props=>props.theme.eui.paddingSizes.m} 0;
margin-bottom: ${props=>props.theme.eui.paddingSizes.m};
display: flex;
`,Controls=common_.euiStyled.div`
flex-grow: 0;
margin-right: ${props=>props.theme.eui.paddingSizes.m};
min-width: 0px;
`,LayoutContent=Object(common_.euiStyled)(external_kbnSharedDeps_ElasticEui_.EuiPageContent)`
  position: relative;
`,layouts={host:Object(common_.withTheme)(({metrics:metrics,onChangeRangeTime:onChangeRangeTime,theme:theme})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(MetadataDetails,{fields:["host.hostname","host.os.name","host.os.kernel","host.containerized","cloud.provider","cloud.availability_zone","cloud.machine.type","cloud.project.id","cloud.instance.id","cloud.instance.name"]}),external_kbnSharedDeps_React_default.a.createElement(LayoutContent,null,external_kbnSharedDeps_React_default.a.createElement(Section,{navLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.hostMetricsLayout.layoutLabel",{defaultMessage:"Host"}),sectionLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.hostMetricsLayout.overviewSection.sectionLabel",{defaultMessage:"Host Overview"}),metrics:metrics,onChangeRangeTime:onChangeRangeTime},external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"hostSystemOverview"},external_kbnSharedDeps_React_default.a.createElement(GaugesSectionVis,{seriesOverrides:{cpu:{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.hostMetricsLayout.overviewSection.cpuUsageSeriesLabel",{defaultMessage:"CPU Usage"}),color:theme.eui.euiColorFullShade,formatter:"percent",gaugeMax:1},load:{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.hostMetricsLayout.overviewSection.loadSeriesLabel",{defaultMessage:"Load (5m)"}),color:theme.eui.euiColorFullShade},memory:{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.hostMetricsLayout.overviewSection.memoryCapacitySeriesLabel",{defaultMessage:"Memory Usage"}),color:theme.eui.euiColorFullShade,formatter:"percent",gaugeMax:1},rx:{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.hostMetricsLayout.overviewSection.inboundRXSeriesLabel",{defaultMessage:"Inbound (RX)"}),color:theme.eui.euiColorFullShade,formatter:"bits",formatterTemplate:"{{value}}/s"},tx:{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.hostMetricsLayout.overviewSection.outboundTXSeriesLabel",{defaultMessage:"Outbound (TX)"}),color:theme.eui.euiColorFullShade,formatter:"bits",formatterTemplate:"{{value}}/s"}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"hostCpuUsage",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.hostMetricsLayout.cpuUsageSection.sectionLabel",{defaultMessage:"CPU Usage"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{stacked:!0,type:"area",formatter:"percent",seriesOverrides:{user:{color:theme.eui.euiColorVis0},system:{color:theme.eui.euiColorVis2},steal:{color:theme.eui.euiColorVis9},irq:{color:theme.eui.euiColorVis4},softirq:{color:theme.eui.euiColorVis6},iowait:{color:theme.eui.euiColorVis7},nice:{color:theme.eui.euiColorVis5}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"hostLoad",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.hostMetricsLayout.loadSection.sectionLabel",{defaultMessage:"Load"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{seriesOverrides:{load_1m:{color:theme.eui.euiColorVis0,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.hostMetricsLayout.loadSection.oneMinuteSeriesLabel",{defaultMessage:"1m"})},load_5m:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.hostMetricsLayout.loadSection.fiveMinuteSeriesLabel",{defaultMessage:"5m"})},load_15m:{color:theme.eui.euiColorVis3,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.hostMetricsLayout.loadSection.fifteenMinuteSeriesLabel",{defaultMessage:"15m"})}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"hostMemoryUsage",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.hostMetricsLayout.memoryUsageSection.sectionLabel",{defaultMessage:"Memory Usage"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{stacked:!0,formatter:"bytes",type:"area",seriesOverrides:{used:{color:theme.eui.euiColorVis2},free:{color:theme.eui.euiColorVis0},cache:{color:theme.eui.euiColorVis1}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"hostNetworkTraffic",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.hostMetricsLayout.networkTrafficSection.sectionLabel",{defaultMessage:"Network Traffic"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{formatter:"bits",formatterTemplate:"{{value}}/s",type:"area",seriesOverrides:{rx:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.hostMetricsLayout.networkTrafficSection.networkRxRateSeriesLabel",{defaultMessage:"in"})},tx:{color:theme.eui.euiColorVis2,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.hostMetricsLayout.networkTrafficSection.networkTxRateSeriesLabel",{defaultMessage:"out"})}}}))),external_kbnSharedDeps_React_default.a.createElement(Section,{navLabel:"Kubernetes",sectionLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.kubernetesMetricsLayout.overviewSection.sectionLabel",{defaultMessage:"Kubernetes Overview"}),metrics:metrics,onChangeRangeTime:onChangeRangeTime},external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"hostK8sOverview"},external_kbnSharedDeps_React_default.a.createElement(GaugesSectionVis,{seriesOverrides:{cpucap:{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.kubernetesMetricsLayout.overviewSection.cpuUsageSeriesLabel",{defaultMessage:"CPU Capacity"}),color:"secondary",formatter:"percent",gaugeMax:1},load:{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.kubernetesMetricsLayout.overviewSection.loadSeriesLabel",{defaultMessage:"Load (5m)"}),color:"secondary"},memorycap:{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.kubernetesMetricsLayout.overviewSection.memoryUsageSeriesLabel",{defaultMessage:"Memory Capacity"}),color:"secondary",formatter:"percent",gaugeMax:1},podcap:{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.kubernetesMetricsLayout.overviewSection.podCapacitySeriesLabel",{defaultMessage:"Pod Capacity"}),color:"secondary",formatter:"percent",gaugeMax:1},diskcap:{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.kubernetesMetricsLayout.overviewSection.diskCapacitySeriesLabel",{defaultMessage:"Disk Capacity"}),color:"secondary",formatter:"percent",gaugeMax:1}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"hostK8sCpuCap",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.kubernetesMetricsLayout.nodeCpuCapacitySection.sectionLabel",{defaultMessage:"Node CPU Capacity"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{formatter:"abbreviatedNumber",seriesOverrides:{capacity:{color:theme.eui.euiColorVis2},used:{color:theme.eui.euiColorVis1,type:"area"}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"hostK8sMemoryCap",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.kubernetesMetricsLayout.nodeMemoryCapacitySection.sectionLabel",{defaultMessage:"Node Memory Capacity"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{formatter:"bytes",seriesOverrides:{capacity:{color:theme.eui.euiColorVis2},used:{color:theme.eui.euiColorVis1,type:"area"}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"hostK8sDiskCap",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.kubernetesMetricsLayout.nodeDiskCapacitySection.sectionLabel",{defaultMessage:"Node Disk Capacity"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{formatter:"bytes",seriesOverrides:{capacity:{color:theme.eui.euiColorVis2},used:{color:theme.eui.euiColorVis1,type:"area"}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"hostK8sPodCap",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.kubernetesMetricsLayout.nodePodCapacitySection.sectionLabel",{defaultMessage:"Node Pod Capacity"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{formatter:"number",seriesOverrides:{capacity:{color:theme.eui.euiColorVis2},used:{color:theme.eui.euiColorVis1,type:"area"}}}))),external_kbnSharedDeps_React_default.a.createElement(aws_Layout,{metrics:metrics,onChangeRangeTime:onChangeRangeTime}),external_kbnSharedDeps_React_default.a.createElement(nginx_Layout,{metrics:metrics,onChangeRangeTime:onChangeRangeTime})))),pod:Object(common_.withTheme)(({metrics:metrics,onChangeRangeTime:onChangeRangeTime,theme:theme})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(MetadataDetails,null),external_kbnSharedDeps_React_default.a.createElement(LayoutContent,null,external_kbnSharedDeps_React_default.a.createElement(Section,{navLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.podMetricsLayout.layoutLabel",{defaultMessage:"Pod"}),sectionLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.podMetricsLayout.overviewSection.sectionLabel",{defaultMessage:"Pod Overview"}),metrics:metrics,onChangeRangeTime:onChangeRangeTime},external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"podOverview"},external_kbnSharedDeps_React_default.a.createElement(GaugesSectionVis,{seriesOverrides:{cpu:{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.podMetricsLayout.overviewSection.cpuUsageSeriesLabel",{defaultMessage:"CPU Usage"}),color:theme.eui.euiColorFullShade,formatter:"percent",gaugeMax:1},memory:{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.podMetricsLayout.overviewSection.memoryUsageSeriesLabel",{defaultMessage:"Memory Usage"}),color:theme.eui.euiColorFullShade,formatter:"percent",gaugeMax:1},rx:{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.podMetricsLayout.overviewSection.inboundRXSeriesLabel",{defaultMessage:"Inbound (RX)"}),color:theme.eui.euiColorFullShade,formatter:"bits",formatterTemplate:"{{value}}/s"},tx:{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.podMetricsLayout.overviewSection.outboundTXSeriesLabel",{defaultMessage:"Outbound (TX)"}),color:theme.eui.euiColorFullShade,formatter:"bits",formatterTemplate:"{{value}}/s"}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"podCpuUsage",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.podMetricsLayout.cpuUsageSection.sectionLabel",{defaultMessage:"CPU Usage"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{formatter:"percent",type:"area",seriesOverrides:{cpu:{color:theme.eui.euiColorVis1}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"podMemoryUsage",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.podMetricsLayout.memoryUsageSection.sectionLabel",{defaultMessage:"Memory Usage"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"area",formatter:"percent",seriesOverrides:{memory:{color:theme.eui.euiColorVis1}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"podNetworkTraffic",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.podMetricsLayout.networkTrafficSection.sectionLabel",{defaultMessage:"Network Traffic"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{formatter:"bits",formatterTemplate:"{{value}}/s",type:"area",seriesOverrides:{rx:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.podMetricsLayout.networkTrafficSection.networkRxRateSeriesLabel",{defaultMessage:"in"})},tx:{color:theme.eui.euiColorVis2,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.podMetricsLayout.networkTrafficSection.networkTxRateSeriesLabel",{defaultMessage:"out"})}}}))),external_kbnSharedDeps_React_default.a.createElement(nginx_Layout,{metrics:metrics,onChangeRangeTime:onChangeRangeTime})))),container:Object(common_.withTheme)(({metrics:metrics,onChangeRangeTime:onChangeRangeTime,theme:theme})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(MetadataDetails,null),external_kbnSharedDeps_React_default.a.createElement(LayoutContent,null,external_kbnSharedDeps_React_default.a.createElement(Section,{navLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.containerMetricsLayout.layoutLabel",{defaultMessage:"Container"}),sectionLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.containerMetricsLayout.overviewSection.sectionLabel",{defaultMessage:"Container Overview"}),metrics:metrics,onChangeRangeTime:onChangeRangeTime},external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"containerOverview"},external_kbnSharedDeps_React_default.a.createElement(GaugesSectionVis,{seriesOverrides:{cpu:{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.containerMetricsLayout.overviewSection.cpuUsageSeriesLabel",{defaultMessage:"CPU Usage"}),color:theme.eui.euiColorFullShade,formatter:"percent",gaugeMax:1},memory:{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.containerMetricsLayout.overviewSection.memoryUsageSeriesLabel",{defaultMessage:"Memory Usage"}),color:theme.eui.euiColorFullShade,formatter:"percent",gaugeMax:1},rx:{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.containerMetricsLayout.overviewSection.inboundRXSeriesLabel",{defaultMessage:"Inbound (RX)"}),color:theme.eui.euiColorFullShade,formatter:"bits",formatterTemplate:"{{value}}/s"},tx:{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.containerMetricsLayout.overviewSection.outboundTXSeriesLabel",{defaultMessage:"Outbound (TX)"}),color:theme.eui.euiColorFullShade,formatter:"bits",formatterTemplate:"{{value}}/s"}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"containerCpuUsage",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.containerMetricsLayout.cpuUsageSection.sectionLabel",{defaultMessage:"CPU Usage"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{stacked:!0,type:"area",formatter:"percent",seriesOverrides:{cpu:{color:theme.eui.euiColorVis1}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"containerMemory",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.containerMetricsLayout.memoryUsageSection.sectionLabel",{defaultMessage:"Memory Usage"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{stacked:!0,type:"area",formatter:"percent",seriesOverrides:{memory:{color:theme.eui.euiColorVis1}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"containerNetworkTraffic",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.containerMetricsLayout.networkTrafficSection.sectionLabel",{defaultMessage:"Network Traffic"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{formatter:"bits",formatterTemplate:"{{value}}/s",type:"area",seriesOverrides:{rx:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.containerMetricsLayout.networkTrafficSection.networkRxRateSeriesLabel",{defaultMessage:"in"})},tx:{color:theme.eui.euiColorVis2,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.containerMetricsLayout.networkTrafficSection.networkTxRateSeriesLabel",{defaultMessage:"out"})}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"containerDiskIOOps",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.containerMetricsLayout.diskIoOpsSection.sectionLabel",{defaultMessage:"Disk IO (Ops)"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"area",formatterTemplate:"{{value}}/s",formatter:"number",seriesOverrides:{read:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.containerMetricsLayout.diskIoOpsSection.readRateSeriesLabel",{defaultMessage:"reads"})},write:{color:theme.eui.euiColorVis2,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.containerMetricsLayout.diskIoOpsSection.writeRateSeriesLabel",{defaultMessage:"writes"})}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"containerDiskIOBytes",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.containerMetricsLayout.diskIoBytesSection.sectionLabel",{defaultMessage:"Disk IO (Bytes)"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"area",formatter:"bytes",formatterTemplate:"{{value}}/s",seriesOverrides:{read:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.containerMetricsLayout.diskIoBytesSection.readRateSeriesLabel",{defaultMessage:"reads"})},write:{color:theme.eui.euiColorVis2,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.containerMetricsLayout.diskIoBytesSection.writeRateSeriesLabel",{defaultMessage:"writes"})}}})))))),awsEC2:Object(common_.withTheme)(({metrics:metrics,theme:theme,onChangeRangeTime:onChangeRangeTime})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(MetadataDetails,{fields:["cloud.instance.id","cloud.provider","cloud.availability_zone","cloud.machine.type","cloud.instance.name","cloud.project.id"]}),external_kbnSharedDeps_React_default.a.createElement(LayoutContent,null,external_kbnSharedDeps_React_default.a.createElement(Section,{navLabel:"AWS EC2",sectionLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.ec2MetricsLayout.overviewSection.sectionLabel",{defaultMessage:"Aws EC2 Overview"}),metrics:metrics,onChangeRangeTime:onChangeRangeTime},external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsEC2CpuUtilization",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.ec2MetricsLayout.cpuUsageSection.sectionLabel",{defaultMessage:"CPU Usage"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{stacked:!0,type:"area",formatter:"percent",seriesOverrides:{total:{color:theme.eui.euiColorVis1}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsEC2NetworkTraffic",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.ec2MetricsLayout.networkTrafficSection.sectionLabel",{defaultMessage:"Network Traffic"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{formatter:"bits",formatterTemplate:"{{value}}/s",type:"area",seriesOverrides:{rx:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.hostMetricsLayout.networkTrafficSection.networkRxRateSeriesLabel",{defaultMessage:"in"})},tx:{color:theme.eui.euiColorVis2,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.hostMetricsLayout.networkTrafficSection.networkTxRateSeriesLabel",{defaultMessage:"out"})}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsEC2DiskIOBytes",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.ec2MetricsLayout.diskIOBytesSection.sectionLabel",{defaultMessage:"Disk IO (Bytes)"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{formatter:"bytes",formatterTemplate:"{{value}}/s",type:"area",seriesOverrides:{write:{color:theme.eui.euiColorVis2,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.ec2MetricsLayout.diskIOBytesSection.writeLabel",{defaultMessage:"writes"})},read:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.ec2MetricsLayout.diskIOBytesSection.readLabel",{defaultMessage:"reads"})}}})))))),awsS3:Object(common_.withTheme)(({metrics:metrics,onChangeRangeTime:onChangeRangeTime,theme:theme})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(LayoutContent,null,external_kbnSharedDeps_React_default.a.createElement(Section,{navLabel:"AWS S3",sectionLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.s3MetricsLayout.overviewSection.sectionLabel",{defaultMessage:"Aws S3 Overview"}),metrics:metrics,onChangeRangeTime:onChangeRangeTime},external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsS3BucketSize",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.s3MetricsLayout.bucketSize.sectionLabel",{defaultMessage:"Bucket Size"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"bar",formatter:"bytes",seriesOverrides:{bytes:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.s3MetricsLayout.bucketSize.chartLabel",{defaultMessage:"Total Bytes"})}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsS3NumberOfObjects",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.s3MetricsLayout.numberOfObjects.sectionLabel",{defaultMessage:"Number of Objects"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"bar",formatter:"abbreviatedNumber",seriesOverrides:{objects:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.s3MetricsLayout.numberOfObjects.chartLabel",{defaultMessage:"Objects"})}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsS3TotalRequests",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.s3MetricsLayout.totalRequests.sectionLabel",{defaultMessage:"Total Requests"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"bar",formatter:"abbreviatedNumber",seriesOverrides:{total:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.s3MetricsLayout.totalRequests.chartLabel",{defaultMessage:"Requests"})}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsS3DownloadBytes",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.s3MetricsLayout.downloadBytes.sectionLabel",{defaultMessage:"Downloaded Bytes"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"bar",formatter:"bytes",seriesOverrides:{bytes:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.s3MetricsLayout.downloadBytes.chartLabel",{defaultMessage:"Bytes"})}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsS3UploadBytes",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.s3MetricsLayout.uploadBytes.sectionLabel",{defaultMessage:"Uploaded Bytes"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"bar",formatter:"bytes",seriesOverrides:{bytes:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.s3MetricsLayout.uploadBytes.chartLabel",{defaultMessage:"Bytes"})}}})))))),awsRDS:Object(common_.withTheme)(({metrics:metrics,onChangeRangeTime:onChangeRangeTime,theme:theme})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(LayoutContent,null,external_kbnSharedDeps_React_default.a.createElement(Section,{navLabel:"AWS RDS",sectionLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.rdsMetricsLayout.overviewSection.sectionLabel",{defaultMessage:"Aws RDS Overview"}),metrics:metrics,onChangeRangeTime:onChangeRangeTime},external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsRDSCpuTotal",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.rdsMetricsLayout.cpuTotal.sectionLabel",{defaultMessage:"Total CPU Usage"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"area",formatter:"percent",seriesOverrides:{cpu:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.rdsMetricsLayout.cpuTotal.chartLabel",{defaultMessage:"Total"})}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsRDSConnections",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.rdsMetricsLayout.connections.sectionLabel",{defaultMessage:"Connections"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"bar",formatter:"number",seriesOverrides:{connections:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.rdsMetricsLayout.connections.chartLabel",{defaultMessage:"Connections"})}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsRDSQueriesExecuted",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.rdsMetricsLayout.queriesExecuted.sectionLabel",{defaultMessage:"Queries Executed"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"bar",formatter:"number",seriesOverrides:{queries:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.rdsMetricsLayout.queriesExecuted.chartLabel",{defaultMessage:"Queries"})}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsRDSActiveTransactions",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.rdsMetricsLayout.activeTransactions.sectionLabel",{defaultMessage:"Transactions"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"bar",formatter:"number",seriesOverrides:{active:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.rdsMetricsLayout.active.chartLabel",{defaultMessage:"Active"})},blocked:{color:theme.eui.euiColorVis2,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.rdsMetricsLayout.blocked.chartLabel",{defaultMessage:"Blocked"})}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsRDSLatency",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.rdsMetricsLayout.latency.sectionLabel",{defaultMessage:"Latency"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"bar",stacked:!0,formatter:"highPercision",formatterTemplate:"{{value}} ms",seriesOverrides:{read:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.rdsMetricsLayout.latency.read.chartLabel",{defaultMessage:"Read"})},write:{color:theme.eui.euiColorVis2,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.rdsMetricsLayout.latency.write.chartLabel",{defaultMessage:"Write"})},insert:{color:theme.eui.euiColorVis0,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.rdsMetricsLayout.latency.insert.chartLabel",{defaultMessage:"Insert"})},update:{color:theme.eui.euiColorVis7,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.rdsMetricsLayout.latency.update.chartLabel",{defaultMessage:"Update"})},commit:{color:theme.eui.euiColorVis3,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.rdsMetricsLayout.latency.commit.chartLabel",{defaultMessage:"Commit"})}}})))))),awsSQS:Object(common_.withTheme)(({metrics:metrics,onChangeRangeTime:onChangeRangeTime,theme:theme})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(LayoutContent,null,external_kbnSharedDeps_React_default.a.createElement(Section,{navLabel:"AWS SQS",sectionLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.sqsMetricsLayout.overviewSection.sectionLabel",{defaultMessage:"Aws SQS Overview"}),metrics:metrics,onChangeRangeTime:onChangeRangeTime},external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsSQSMessagesVisible",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.sqsMetricsLayout.messagesVisible.sectionLabel",{defaultMessage:"Messages Available"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"bar",formatter:"abbreviatedNumber",seriesOverrides:{visible:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.sqsMetricsLayout.messagesVisible.chartLabel",{defaultMessage:"Available"})}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsSQSMessagesDelayed",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.sqsMetricsLayout.messagesDelayed.sectionLabel",{defaultMessage:"Messages Delayed"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"bar",formatter:"abbreviatedNumber",seriesOverrides:{delayed:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.sqsMetricsLayout.messagesDelayed.chartLabel",{defaultMessage:"Delayed"})}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsSQSMessagesSent",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.sqsMetricsLayout.messagesSent.sectionLabel",{defaultMessage:"Messages Added"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"bar",formatter:"abbreviatedNumber",seriesOverrides:{sent:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.sqsMetricsLayout.messagesSent.chartLabel",{defaultMessage:"Added"})}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsSQSMessagesEmpty",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.sqsMetricsLayout.messagesEmpty.sectionLabel",{defaultMessage:"Messages Empty"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"bar",formatter:"abbreviatedNumber",seriesOverrides:{sent:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.sqsMetricsLayout.messagesEmpty.chartLabel",{defaultMessage:"Empty"})}}})),external_kbnSharedDeps_React_default.a.createElement(SubSection,{id:"awsSQSOldestMessage",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.sqsMetricsLayout.oldestMessage.sectionLabel",{defaultMessage:"Oldest Message"})},external_kbnSharedDeps_React_default.a.createElement(ChartSectionVis,{type:"bar",formatter:"abbreviatedNumber",seriesOverrides:{oldest:{color:theme.eui.euiColorVis1,name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.sqsMetricsLayout.oldestMessage.chartLabel",{defaultMessage:"Age"})}}}))))))},PageBody=({loading:loading,refetch:refetch,type:type,metrics:metrics,onChangeRangeTime:onChangeRangeTime,isLiveStreaming:isLiveStreaming,stopLiveStreaming:stopLiveStreaming})=>{if(loading)return external_kbnSharedDeps_React_default.a.createElement(components_loading.a,{height:"100vh",width:"auto",text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.loadingNodeDataText",{defaultMessage:"Loading data"})});if(!loading&&metrics&&0===metrics.length)return external_kbnSharedDeps_React_default.a.createElement(empty_states.a,{titleText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.emptyViewTitle",{defaultMessage:"There is no data to display."}),bodyText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.emptyViewDescription",{defaultMessage:"Try adjusting your time or filter."}),refetchText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.refetchButtonLabel",{defaultMessage:"Check for new data"}),onRefetch:refetch,testString:"metricsEmptyViewState"});const Layout=(type=>{const Layout=null==layouts?void 0:layouts[type];if(!Layout)throw new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.inventoryModels.findLayout.error",{defaultMessage:"The layout you've attempted to find does not exist"}));return Layout})(type);return external_kbnSharedDeps_React_default.a.createElement(Layout,{metrics:metrics,onChangeRangeTime:onChangeRangeTime,isLiveStreaming:isLiveStreaming,stopLiveStreaming:stopLiveStreaming})};function invalid_node_extends(){return(invalid_node_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const InvalidNodeError=({nodeName:nodeName})=>{const tutorialLinkProps=Object(use_link_props.b)({app:"home",hash:"/tutorial_directory/metrics"});return external_kbnSharedDeps_React_default.a.createElement(CenteredEmptyPrompt,{title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.invalidNodeErrorTitle",defaultMessage:"Looks like {nodeName} isn't collecting any metrics data",values:{nodeName:nodeName}})),body:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.invalidNodeErrorDescription",defaultMessage:"Double check your configuration"})),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,invalid_node_extends({},tutorialLinkProps,{color:"primary",fill:!0}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.homePage.noMetricsIndicesInstructionsActionLabel",defaultMessage:"View setup instructions"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(view_source_configuration_button.a,{app:"metrics","data-test-subj":"configureSourceButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.configureSourceActionLabel",defaultMessage:"Change source configuration"}))))})},CenteredEmptyPrompt=Object(common_.euiStyled)(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt)`
  align-self: center;
`,PageError=({error:error,name:name})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(document_title.a,{title:previousTitle=>external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.documentTitleError",{defaultMessage:"{previousTitle} | Uh oh",values:{previousTitle:previousTitle}})}),error.body.statusCode=external_kbnSharedDeps_React_default.a.createElement(InvalidNodeError,{nodeName:name})),NodeDetailsPage=props=>{const{parsedTimeRange:parsedTimeRange}=props,{metrics:metrics,loading:loading,makeRequest:makeRequest,error:error}=function(metrics,nodeId,nodeType,sourceId,timerange,cloudId){const{error:error,loading:loading,response:response,makeRequest:makeRequest}=Object(use_http_request.a)("/api/metrics/node_details","POST",JSON.stringify({metrics:metrics,nodeId:nodeId,nodeType:nodeType,timerange:timerange,cloudId:cloudId,sourceId:sourceId}),response=>Object(pipeable.pipe)(NodeDetailsMetricDataResponseRT.decode(response),Object(Either.fold)(Object(runtime_types.c)(runtime_types.a),lib_function.identity)));return{error:error,loading:loading,metrics:response?response.metrics:[],makeRequest:makeRequest}}(props.requiredMetrics,props.nodeId,props.nodeType,props.sourceId,props.parsedTimeRange,props.cloudId),refetch=Object(external_kbnSharedDeps_React_.useCallback)(()=>{makeRequest()},[makeRequest]);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{makeRequest()},[makeRequest,parsedTimeRange]),error?external_kbnSharedDeps_React_default.a.createElement(PageError,{error:error,name:props.name}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPage,{style:{flex:"1 0 auto"}},external_kbnSharedDeps_React_default.a.createElement(MetricsSideNav,{loading:props.metadataLoading,name:props.name,items:props.sideNav}),external_kbnSharedDeps_React_default.a.createElement(auto_sizer.a,{content:!1,bounds:!0,detectAnyWindowResize:!0},({bounds:{width:width=0}})=>{const w=width?width+"px":"100%";return external_kbnSharedDeps_React_default.a.createElement(MetricsDetailsPageColumn,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageBody,{style:{width:w}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageHeader,{style:{flex:"0 0 auto"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageHeaderSection,{style:{width:"100%"}},external_kbnSharedDeps_React_default.a.createElement(MetricsTitleTimeRangeContainer,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiHideFor,{sizes:["xs","s"]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h1",null,props.name))),external_kbnSharedDeps_React_default.a.createElement(MetricsTimeControls,{currentTimeRange:props.timeRange,isLiveStreaming:props.isAutoReloading,refreshInterval:props.refreshInterval,setRefreshInterval:props.setRefreshInterval,onChangeTimeRange:props.setTimeRange,setAutoReload:props.setAutoReload,onRefresh:refetch})))),external_kbnSharedDeps_React_default.a.createElement(SideNavContext.Provider,{value:{items:props.sideNav,addNavItem:props.addNavItem}},external_kbnSharedDeps_React_default.a.createElement(MetadataContext.Provider,{value:props.metadata},external_kbnSharedDeps_React_default.a.createElement(PageBody,{loading:!(metrics.length>0&&props.isAutoReloading)&&loading,refetch:refetch,type:props.nodeType,metrics:metrics,onChangeRangeTime:props.setTimeRange,isLiveStreaming:props.isAutoReloading,stopLiveStreaming:()=>props.setAutoReload(!1)})))))}))},MetricsDetailsPageColumn=common_.euiStyled.div`
  flex: 1 0 0%;
  display: flex;
  flex-direction: column;
`,MetricsTitleTimeRangeContainer=common_.euiStyled.div`
  display: flex;
  flex-flow: row wrap;
  justify-content: space-between;
`,metric_detail_DetailPageContent=Object(common_.euiStyled)(components_page.c)`
  overflow: auto;
  background-color: ${props=>props.theme.eui.euiColorLightestShade};
`,MetricDetail=(Component=Object(common_.withTheme)(({match:match})=>{var _useKibana$services$a,_uiCapabilities$infra;const uiCapabilities=null===(_useKibana$services$a=Object(kibanaReact_public_.useKibana)().services.application)||void 0===_useKibana$services$a?void 0:_useKibana$services$a.capabilities,nodeId=match.params.node,nodeType=match.params.type,inventoryModel=Object(inventory_models.b)(nodeType),{sourceId:sourceId}=Object(external_kbnSharedDeps_React_.useContext)(metrics_source.a.Context),{timeRange:timeRange,parsedTimeRange:parsedTimeRange,setTimeRange:setTimeRange,refreshInterval:refreshInterval,setRefreshInterval:setRefreshInterval,isAutoReloading:isAutoReloading,setAutoReload:setAutoReload,triggerRefresh:triggerRefresh}=useMetricsTimeContext(),{name:name,filteredRequiredMetrics:filteredRequiredMetrics,loading:metadataLoading,cloudId:cloudId,metadata:metadata}=useMetadata(nodeId,nodeType,inventoryModel.requiredMetrics,sourceId,parsedTimeRange),[sideNav,setSideNav]=Object(external_kbnSharedDeps_React_.useState)([]),addNavItem=external_kbnSharedDeps_React_default.a.useCallback(item=>{sideNav.some(n=>n.id===item.id)||setSideNav([item,...sideNav])},[sideNav]),breadcrumbs=[{...Object(use_link_props.b)({app:"metrics",pathname:"/"}),text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.header.infrastructureTitle",{defaultMessage:"Metrics"})},{text:name}];return metadataLoading&&!filteredRequiredMetrics.length?external_kbnSharedDeps_React_default.a.createElement(components_loading.a,{height:"100vh",width:"100%",text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.loadingNodeDataText",{defaultMessage:"Loading data"})}):external_kbnSharedDeps_React_default.a.createElement(components_page.a,null,external_kbnSharedDeps_React_default.a.createElement(header.a,{breadcrumbs:breadcrumbs,readOnlyBadge:!(null!=uiCapabilities&&null!==(_uiCapabilities$infra=uiCapabilities.infrastructure)&&void 0!==_uiCapabilities$infra&&_uiCapabilities$infra.save)}),external_kbnSharedDeps_React_default.a.createElement(document_title.a,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metricDetailPage.documentTitle",{defaultMessage:"Infrastructure | Metrics | {name}",values:{name:name}})}),external_kbnSharedDeps_React_default.a.createElement(metric_detail_DetailPageContent,{"data-test-subj":"infraMetricsPage"},metadata?external_kbnSharedDeps_React_default.a.createElement(NodeDetailsPage,{name:name,requiredMetrics:filteredRequiredMetrics,sourceId:sourceId,timeRange:timeRange,parsedTimeRange:parsedTimeRange,nodeType:nodeType,nodeId:nodeId,cloudId:cloudId,metadataLoading:metadataLoading,isAutoReloading:isAutoReloading,refreshInterval:refreshInterval,sideNav:sideNav,metadata:metadata,addNavItem:addNavItem,setRefreshInterval:setRefreshInterval,setAutoReload:setAutoReload,triggerRefresh:triggerRefresh,setTimeRange:setTimeRange}):null))}),props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiErrorBoundary,null,external_kbnSharedDeps_React_default.a.createElement(metrics_source.a.Provider,{sourceId:"default"},external_kbnSharedDeps_React_default.a.createElement(MetricsTimeProvider,null,external_kbnSharedDeps_React_default.a.createElement(Component,props)))));var Component,redirect_with_query_params=__webpack_require__(246),common_providers=__webpack_require__(40);const renderApp=(core,plugins,{element:element,history:history,setHeaderActionMenu:setHeaderActionMenu})=>{const storage=new public_.Storage(window.localStorage);return Object(common_styles.b)(element),external_kbnSharedDeps_ReactDom_default.a.render(external_kbnSharedDeps_React_default.a.createElement(MetricsApp,{core:core,history:history,plugins:plugins,setHeaderActionMenu:setHeaderActionMenu,storage:storage}),element),()=>{external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(element)}},MetricsApp=({core:core,history:history,plugins:plugins,setHeaderActionMenu:setHeaderActionMenu,storage:storage})=>{var _uiCapabilities$infra,_uiCapabilities$infra2,_uiCapabilities$infra3,_uiCapabilities$infra4,_uiCapabilities$infra5;const uiCapabilities=core.application.capabilities;return external_kbnSharedDeps_React_default.a.createElement(common_providers.b,{core:core,plugins:plugins},external_kbnSharedDeps_React_default.a.createElement(common_providers.a,{appName:"Metrics UI",setHeaderActionMenu:setHeaderActionMenu,storage:storage,triggersActionsUI:plugins.triggersActionsUi},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Router,{history:history},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Switch,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:"/link-to",component:LinkToMetricsPage}),(null==uiCapabilities||null===(_uiCapabilities$infra=uiCapabilities.infrastructure)||void 0===_uiCapabilities$infra?void 0:_uiCapabilities$infra.show)&&external_kbnSharedDeps_React_default.a.createElement(redirect_with_query_params.a,{from:"/",exact:!0,to:"/inventory"}),(null==uiCapabilities||null===(_uiCapabilities$infra2=uiCapabilities.infrastructure)||void 0===_uiCapabilities$infra2?void 0:_uiCapabilities$infra2.show)&&external_kbnSharedDeps_React_default.a.createElement(redirect_with_query_params.a,{from:"/snapshot",exact:!0,to:"/inventory"}),(null==uiCapabilities||null===(_uiCapabilities$infra3=uiCapabilities.infrastructure)||void 0===_uiCapabilities$infra3?void 0:_uiCapabilities$infra3.show)&&external_kbnSharedDeps_React_default.a.createElement(redirect_with_query_params.a,{from:"/metrics-explorer",exact:!0,to:"/explorer"}),(null==uiCapabilities||null===(_uiCapabilities$infra4=uiCapabilities.infrastructure)||void 0===_uiCapabilities$infra4?void 0:_uiCapabilities$infra4.show)&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:"/detail/:type/:node",component:MetricDetail}),(null==uiCapabilities||null===(_uiCapabilities$infra5=uiCapabilities.infrastructure)||void 0===_uiCapabilities$infra5?void 0:_uiCapabilities$infra5.show)&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:"/",component:InfrastructurePage}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{component:_404.a})))))}}}]);