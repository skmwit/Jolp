/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.infra_bundle_jsonpfunction=window.infra_bundle_jsonpfunction||[]).push([[11],{139:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"i",(function(){return tooltipProps})),__webpack_require__.d(__webpack_exports__,"d",(function(){return NUM_BUCKETS})),__webpack_require__.d(__webpack_exports__,"f",(function(){return TIME_LABELS})),__webpack_require__.d(__webpack_exports__,"j",(function(){return useDateFormatter})),__webpack_require__.d(__webpack_exports__,"k",(function(){return yAxisFormatter})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getDomain})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getChartTheme})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ChartContainer})),__webpack_require__.d(__webpack_exports__,"e",(function(){return NoDataState})),__webpack_require__.d(__webpack_exports__,"c",(function(){return LoadingState})),__webpack_require__.d(__webpack_exports__,"b",(function(){return ErrorState}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_elastic_charts__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(61),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),moment__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(50),moment__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__),_kbn_i18n__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1),_elastic_eui__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10),_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(14),_common_formatters_number__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(9);const tooltipProps={headerFormatter:tooltipValue=>moment__WEBPACK_IMPORTED_MODULE_3___default()(tooltipValue.value).format("Y-MM-DD HH:mm:ss")},NUM_BUCKETS=20,TIME_LABELS={s:_kbn_i18n__WEBPACK_IMPORTED_MODULE_4__.i18n.translate("xpack.infra.alerts.timeLabels.seconds",{defaultMessage:"seconds"}),m:_kbn_i18n__WEBPACK_IMPORTED_MODULE_4__.i18n.translate("xpack.infra.alerts.timeLabels.minutes",{defaultMessage:"minutes"}),h:_kbn_i18n__WEBPACK_IMPORTED_MODULE_4__.i18n.translate("xpack.infra.alerts.timeLabels.hours",{defaultMessage:"hours"}),d:_kbn_i18n__WEBPACK_IMPORTED_MODULE_4__.i18n.translate("xpack.infra.alerts.timeLabels.days",{defaultMessage:"days"})},useDateFormatter=(xMin,xMax)=>Object(react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>"number"==typeof xMin&&"number"==typeof xMax?Object(_elastic_charts__WEBPACK_IMPORTED_MODULE_1__.niceTimeFormatter)([xMin,xMax]):value=>""+value,[xMin,xMax]),yAxisFormatter=_common_formatters_number__WEBPACK_IMPORTED_MODULE_7__.a,getDomain=(series,stacked=!1)=>{let min=null,max=null;const valuesByTimestamp=series.reduce((acc,serie)=>(serie.points.forEach(point=>{const valuesForTimestamp=acc[point.timestamp]||[];acc[point.timestamp]=[...valuesForTimestamp,point.value]}),acc),{});Object.values(valuesByTimestamp).forEach(results=>{const maxResult=stacked?Object(lodash__WEBPACK_IMPORTED_MODULE_2__.sum)(results):Object(lodash__WEBPACK_IMPORTED_MODULE_2__.max)(results),minResult=Object(lodash__WEBPACK_IMPORTED_MODULE_2__.min)(results);maxResult&&(!max||maxResult>max)&&(max=maxResult),minResult&&(!min||minResult<min)&&(min=minResult)});const timestampValues=Object.keys(valuesByTimestamp).map(Number),minTimestamp=Object(lodash__WEBPACK_IMPORTED_MODULE_2__.min)(timestampValues)||0,maxTimestamp=Object(lodash__WEBPACK_IMPORTED_MODULE_2__.max)(timestampValues)||0;return{yMin:min||0,yMax:max||0,xMin:minTimestamp,xMax:maxTimestamp}},getChartTheme=isDarkMode=>isDarkMode?_elastic_charts__WEBPACK_IMPORTED_MODULE_1__.DARK_THEME:_elastic_charts__WEBPACK_IMPORTED_MODULE_1__.LIGHT_THEME,EmptyContainer=({children:children})=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{style:{width:"100%",height:150,display:"flex",justifyContent:"center",alignItems:"center"}},children),ChartContainer=({children:children})=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{style:{width:"100%",height:150}},children),NoDataState=()=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(EmptyContainer,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_5__.EuiText,{color:"subdued","data-test-subj":"noChartData"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage,{id:"xpack.infra.alerts.charts.noDataMessage",defaultMessage:"No chart data available"}))),LoadingState=()=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(EmptyContainer,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_5__.EuiText,{color:"subdued","data-test-subj":"loadingData"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage,{id:"xpack.infra.alerts.charts.loadingMessage",defaultMessage:"Loading"}))),ErrorState=()=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(EmptyContainer,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_5__.EuiText,{color:"subdued","data-test-subj":"chartErrorState"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage,{id:"xpack.infra.alerts.charts.errorMessage",defaultMessage:"Uh oh, something went wrong"})))},204:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return MetricsExplorerGroupBy}));var _elastic_eui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10),_kbn_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);const MetricsExplorerGroupBy=({options:options,onChange:onChange,fields:fields})=>{const handleChange=Object(react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(selectedOptions=>{const groupBy=selectedOptions.map(option=>option.label);onChange(groupBy)},[onChange]),selectedOptions=Array.isArray(options.groupBy)?options.groupBy.map(field=>({label:field})):options.groupBy?[{label:options.groupBy}]:[];return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_0__.EuiComboBox,{placeholder:_kbn_i18n__WEBPACK_IMPORTED_MODULE_1__.i18n.translate("xpack.infra.metricsExplorer.groupByLabel",{defaultMessage:"Everything"}),"aria-label":_kbn_i18n__WEBPACK_IMPORTED_MODULE_1__.i18n.translate("xpack.infra.metricsExplorer.groupByAriaLabel",{defaultMessage:"Graph per"}),fullWidth:!0,singleSelection:!1,selectedOptions:selectedOptions,options:fields.filter(f=>f.aggregatable&&"string"===f.type).map(f=>({label:f.name})),onChange:handleChange,isClearable:!0})}},205:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return useMetricsExplorerData}));var _elastic_datemath__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),_elastic_datemath__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_elastic_datemath__WEBPACK_IMPORTED_MODULE_0__),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(24),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_common_http_api_metrics_explorer__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(98),_utils_kuery__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(117),_src_plugins_kibana_react_public__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3),_common_runtime_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(15),_utils_use_tracked_promise__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(79);function useMetricsExplorerData(options,source,derivedIndexPattern,timerange,afterKey,signal,shouldLoadImmediately=!0){var _kibana$services$http;const fetchFn=null===(_kibana$services$http=Object(_src_plugins_kibana_react_public__WEBPACK_IMPORTED_MODULE_5__.useKibana)().services.http)||void 0===_kibana$services$http?void 0:_kibana$services$http.fetch,[error,setError]=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(null),[loading,setLoading]=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(!0),[data,setData]=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(null),[lastOptions,setLastOptions]=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(null),[lastTimerange,setLastTimerange]=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(null),from=_elastic_datemath__WEBPACK_IMPORTED_MODULE_0___default.a.parse(timerange.from),to=_elastic_datemath__WEBPACK_IMPORTED_MODULE_0___default.a.parse(timerange.to,{roundUp:!0}),[,makeRequest]=Object(_utils_use_tracked_promise__WEBPACK_IMPORTED_MODULE_7__.c)({cancelPreviousOn:"creation",createPromise:()=>(setLoading(!0),from&&to?fetchFn?source?fetchFn?fetchFn("/api/infra/metrics_explorer",{method:"POST",body:JSON.stringify({forceInterval:options.forceInterval,dropLastBucket:null==options.dropLastBucket||options.dropLastBucket,metrics:"count"===options.aggregation?[{aggregation:"count"}]:options.metrics.map(metric=>({aggregation:metric.aggregation,field:metric.field})),groupBy:options.groupBy,afterKey:afterKey,limit:options.limit,indexPattern:source.metricAlias,filterQuery:options.filterQuery&&Object(_utils_kuery__WEBPACK_IMPORTED_MODULE_4__.a)(options.filterQuery,derivedIndexPattern)||void 0,timerange:{...timerange,field:source.fields.timestamp,from:from.valueOf(),to:to.valueOf()}})}):Promise.reject(new Error("HTTP service is unavailable")):Promise.reject(new Error("Source is unavailable")):Promise.reject(new Error("HTTP service is unavailable")):Promise.reject(new Error("Unalble to parse timerange"))),onResolve:resp=>{setLoading(!1);const response=Object(_common_runtime_types__WEBPACK_IMPORTED_MODULE_6__.b)(_common_http_api_metrics_explorer__WEBPACK_IMPORTED_MODULE_3__.e)(resp);if(response){if(data&&lastOptions&&data.pageInfo.afterKey!==response.pageInfo.afterKey&&(current=lastOptions,next=options,Object(lodash__WEBPACK_IMPORTED_MODULE_1__.isEqual)(current,next))&&Object(lodash__WEBPACK_IMPORTED_MODULE_1__.isEqual)(timerange,lastTimerange)&&afterKey){const{series:series}=data;setData({...response,series:[...series,...response.series]})}else setData(response);setLastOptions(options),setLastTimerange(timerange),setError(null)}var current,next},onReject:e=>{setError(e),setLoading(!1)}},[source,timerange,options,signal,afterKey]);return Object(react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{shouldLoadImmediately&&makeRequest()},[makeRequest,shouldLoadImmediately]),{error:error,loading:loading,data:data,loadData:makeRequest}}},207:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ThresholdAnnotations}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(24),_elastic_charts__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(61),_server_lib_alerting_metric_threshold_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(19),_common_color_palette__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(86);const ThresholdAnnotations=({threshold:threshold,sortedThresholds:sortedThresholds,comparator:comparator,color:color,id:id,firstTimestamp:firstTimestamp,lastTimestamp:lastTimestamp,domain:domain})=>{if(!comparator||!threshold)return null;const isAbove=[_server_lib_alerting_metric_threshold_types__WEBPACK_IMPORTED_MODULE_3__.a.GT,_server_lib_alerting_metric_threshold_types__WEBPACK_IMPORTED_MODULE_3__.a.GT_OR_EQ].includes(comparator),isBelow=[_server_lib_alerting_metric_threshold_types__WEBPACK_IMPORTED_MODULE_3__.a.LT,_server_lib_alerting_metric_threshold_types__WEBPACK_IMPORTED_MODULE_3__.a.LT_OR_EQ].includes(comparator);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_charts__WEBPACK_IMPORTED_MODULE_2__.LineAnnotation,{id:id+"-thresholds",domainType:_elastic_charts__WEBPACK_IMPORTED_MODULE_2__.AnnotationDomainType.YDomain,"data-test-subj":"threshold-line",dataValues:sortedThresholds.map(t=>({dataValue:t})),style:{line:{strokeWidth:2,stroke:Object(_common_color_palette__WEBPACK_IMPORTED_MODULE_4__.b)(color),opacity:1}}}),2===sortedThresholds.length&&comparator===_server_lib_alerting_metric_threshold_types__WEBPACK_IMPORTED_MODULE_3__.a.BETWEEN?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_charts__WEBPACK_IMPORTED_MODULE_2__.RectAnnotation,{id:id+"-lower-threshold","data-test-subj":"between-rect",style:{fill:Object(_common_color_palette__WEBPACK_IMPORTED_MODULE_4__.b)(color),opacity:.3},dataValues:[{coordinates:{x0:firstTimestamp,x1:lastTimestamp,y0:Object(lodash__WEBPACK_IMPORTED_MODULE_1__.first)(threshold),y1:Object(lodash__WEBPACK_IMPORTED_MODULE_1__.last)(threshold)}}]})):null,2===sortedThresholds.length&&comparator===_server_lib_alerting_metric_threshold_types__WEBPACK_IMPORTED_MODULE_3__.a.OUTSIDE_RANGE?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_charts__WEBPACK_IMPORTED_MODULE_2__.RectAnnotation,{id:id+"-lower-threshold","data-test-subj":"outside-range-lower-rect",style:{fill:Object(_common_color_palette__WEBPACK_IMPORTED_MODULE_4__.b)(color),opacity:.3},dataValues:[{coordinates:{x0:firstTimestamp,x1:lastTimestamp,y0:domain.min,y1:Object(lodash__WEBPACK_IMPORTED_MODULE_1__.first)(threshold)}}]}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_charts__WEBPACK_IMPORTED_MODULE_2__.RectAnnotation,{id:id+"-upper-threshold","data-test-subj":"outside-range-upper-rect",style:{fill:Object(_common_color_palette__WEBPACK_IMPORTED_MODULE_4__.b)(color),opacity:.3},dataValues:[{coordinates:{x0:firstTimestamp,x1:lastTimestamp,y0:Object(lodash__WEBPACK_IMPORTED_MODULE_1__.last)(threshold),y1:domain.max}}]})):null,isBelow&&null!=Object(lodash__WEBPACK_IMPORTED_MODULE_1__.first)(threshold)?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_charts__WEBPACK_IMPORTED_MODULE_2__.RectAnnotation,{id:id+"-upper-threshold","data-test-subj":"below-rect",style:{fill:Object(_common_color_palette__WEBPACK_IMPORTED_MODULE_4__.b)(color),opacity:.3},dataValues:[{coordinates:{x0:firstTimestamp,x1:lastTimestamp,y0:domain.min,y1:Object(lodash__WEBPACK_IMPORTED_MODULE_1__.first)(threshold)}}]}):null,isAbove&&null!=Object(lodash__WEBPACK_IMPORTED_MODULE_1__.first)(threshold)?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_charts__WEBPACK_IMPORTED_MODULE_2__.RectAnnotation,{id:id+"-upper-threshold","data-test-subj":"above-rect",style:{fill:Object(_common_color_palette__WEBPACK_IMPORTED_MODULE_4__.b)(color),opacity:.3},dataValues:[{coordinates:{x0:firstTimestamp,x1:lastTimestamp,y0:Object(lodash__WEBPACK_IMPORTED_MODULE_1__.first)(threshold),y1:domain.max}}]}):null)}},211:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AlertPreview}));var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),external_kbnSharedDeps_Lodash_=__webpack_require__(24),external_kbnSharedDeps_React_=__webpack_require__(2),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_ElasticEui_=__webpack_require__(10),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(14),public_=__webpack_require__(3),formatters=__webpack_require__(33),get_interval_in_seconds=__webpack_require__(206),metrics=__webpack_require__(131);const AlertPreview=props=>{var _previewError$body;const{alertParams:alertParams,alertInterval:alertInterval,alertThrottle:alertThrottle,alertNotifyWhen:alertNotifyWhen,alertType:alertType,validate:validate,showNoDataResults:showNoDataResults,groupByDisplayName:groupByDisplayName}=props,{http:http}=Object(public_.useKibana)().services,[previewLookbackInterval,setPreviewLookbackInterval]=Object(external_kbnSharedDeps_React_.useState)("h"),[isPreviewLoading,setIsPreviewLoading]=Object(external_kbnSharedDeps_React_.useState)(!1),[previewError,setPreviewError]=Object(external_kbnSharedDeps_React_.useState)(!1),[previewResult,setPreviewResult]=Object(external_kbnSharedDeps_React_.useState)(null),onSelectPreviewLookbackInterval=Object(external_kbnSharedDeps_React_.useCallback)(e=>{setPreviewLookbackInterval(e.target.value)},[]),onClickPreview=Object(external_kbnSharedDeps_React_.useCallback)(async()=>{setIsPreviewLoading(!0),setPreviewResult(null),setPreviewError(!1);try{const result=await async function({fetch:fetch,params:params,alertType:alertType}){return await fetch(""+metrics.c,{method:"POST",body:JSON.stringify({...params,alertType:alertType})})}({fetch:http.fetch,params:{...alertParams,lookback:previewLookbackInterval,alertInterval:alertInterval,alertThrottle:alertThrottle,alertNotifyWhen:alertNotifyWhen,alertOnNoData:null!=showNoDataResults&&showNoDataResults},alertType:alertType});setPreviewResult({...result,groupByDisplayName:groupByDisplayName,previewLookbackInterval:previewLookbackInterval,alertThrottle:alertThrottle})}catch(e){setPreviewError(e)}finally{setIsPreviewLoading(!1)}},[alertParams,alertInterval,alertType,alertNotifyWhen,groupByDisplayName,previewLookbackInterval,alertThrottle,showNoDataResults,http]),previewIntervalError=Object(external_kbnSharedDeps_React_.useMemo)(()=>Object(get_interval_in_seconds.a)(alertInterval)>=Object(get_interval_in_seconds.a)("1"+previewLookbackInterval),[previewLookbackInterval,alertInterval]),isPreviewDisabled=Object(external_kbnSharedDeps_React_.useMemo)(()=>{if(!alertParams.criteria)return!1;const validationResult=validate({criteria:alertParams.criteria});return Object.values(validationResult.errors).some(result=>Object.values(result).some(arr=>Array.isArray(arr)&&arr.length))||previewIntervalError},[alertParams.criteria,previewIntervalError,validate]),showNumberOfNotifications=Object(external_kbnSharedDeps_React_.useMemo)(()=>{if(!previewResult)return!1;if("onActiveAlert"===alertNotifyWhen)return!1;const{notifications:notifications,fired:fired,noData:noData,error:error}=previewResult.resultTotals;return fired+(showNoDataResults?noData+error:0)>notifications},[previewResult,showNoDataResults,alertNotifyWhen]),hasWarningThreshold=Object(external_kbnSharedDeps_React_.useMemo)(()=>{var _alertParams$criteria,_alertParams$criteria2;return null!==(_alertParams$criteria=null===(_alertParams$criteria2=alertParams.criteria)||void 0===_alertParams$criteria2?void 0:_alertParams$criteria2.some(c=>Reflect.has(c,"warningThreshold")))&&void 0!==_alertParams$criteria&&_alertParams$criteria},[alertParams]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.previewLabel",{defaultMessage:"Preview"}),fullWidth:!0,display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{id:"selectPreviewLookbackInterval",value:previewLookbackInterval,onChange:onSelectPreviewLookbackInterval,options:previewDOMOptions})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{isLoading:isPreviewLoading,isDisabled:isPreviewDisabled,onClick:onClickPreview},external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.testAlertCondition",{defaultMessage:"Test alert condition"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"})),previewResult&&!previewIntervalError&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{size:"s",title:external_kbnSharedDeps_React_default.a.createElement(PreviewTextString,{previewResult:previewResult,hasWarningThreshold:Boolean(hasWarningThreshold)})},showNoDataResults&&previewResult.resultTotals.noData?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.alertPreviewNoDataResult",defaultMessage:"There {wereWas} {boldedResultsNumber} of no data.",values:{wereWas:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.wereWas",defaultMessage:"{plurality, plural, one {was} other {were}}",values:{plurality:previewResult.resultTotals.noData}}),boldedResultsNumber:external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.alertPreviewNoDataResultNumber",{defaultMessage:"{noData, plural, one {# result} other {# results}}",values:{noData:previewResult.resultTotals.noData}}))}}):null," ",previewResult.resultTotals.error?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.alertPreviewErrorResult",defaultMessage:"An error occurred when trying to evaluate some of the data."}):null,showNumberOfNotifications?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.alertPreviewTotalNotifications",defaultMessage:'As a result, this alert would have sent {notifications} based on the selected "notify" setting of "{alertThrottle}."',values:{alertThrottle:"onThrottleInterval"===alertNotifyWhen?previewResult.alertThrottle:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.alertPreviewOnlyOnStatusChange",{defaultMessage:"Only on status change"}),notifications:external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.alertPreviewTotalNotificationsNumber",{defaultMessage:"{notifs, plural, one {# notification} other {# notifications}}",values:{notifs:previewResult.resultTotals.notifications}}))}})):null," ")),previewIntervalError&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{size:"s",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.previewIntervalTooShortTitle",defaultMessage:"Not enough data"}),color:"warning",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.previewIntervalTooShortDescription",defaultMessage:"Try selecting a longer preview length, or increase the amount of time in the {checkEvery} field.",values:{checkEvery:external_kbnSharedDeps_React_default.a.createElement("strong",null,"check every")}}))),previewError&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),508===(null===(_previewError$body=previewError.body)||void 0===_previewError$body?void 0:_previewError$body.statusCode)?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{size:"s",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.tooManyBucketsErrorTitle",defaultMessage:"Too much data (>{maxBuckets} results)",values:{maxBuckets:formatters.a.number(previewError.body.message)}}),color:"warning",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.tooManyBucketsErrorDescription",defaultMessage:"Try selecting a shorter preview length, or increase the amount of time in the {forTheLast} field.",values:{forTheLast:external_kbnSharedDeps_React_default.a.createElement("strong",null,"FOR THE LAST")}})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{size:"s",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.alertPreviewError",defaultMessage:"An error occurred when trying to preview this alert condition"}),color:"danger",iconType:"alert"},previewError.body&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.alertPreviewErrorDesc",defaultMessage:"Please try again later or see details for more information."}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiAccordion,{id:"alertErrorDetailsAccordion",buttonContent:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.errorDetails",defaultMessage:"Details"})))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCodeBlock,null,previewError.body.message)))))))},PreviewTextString=({previewResult:previewResult,hasWarningThreshold:hasWarningThreshold})=>{var _previewOptions$find;const instanceCount=hasWarningThreshold?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.alertPreviewResultWithSeverityLevels",defaultMessage:"There {wereWas} {criticalInstances} that satisfied the {boldCritical} conditions, and {warningInstances} that satisfied the {boldWarning} conditions of this alert",values:{wereWas:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.wereWas",defaultMessage:"{plurality, plural, one {was} other {were}}",values:{plurality:previewResult.resultTotals.fired}}),criticalInstances:external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.firedTimes",defaultMessage:"{fired, plural, one {# instance} other {# instances}}",values:{fired:previewResult.resultTotals.fired}})),warningInstances:external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.firedTimes",defaultMessage:"{fired, plural, one {# instance} other {# instances}}",values:{fired:previewResult.resultTotals.warning}})),boldCritical:external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.boldCritical",defaultMessage:"critical"})),boldWarning:external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.boldWarning",defaultMessage:"warning"}))}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.alertPreviewResultInstances",defaultMessage:"There {wereWas} {firedTimes} that satisfied the conditions of this alert",values:{wereWas:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.wereWas",defaultMessage:"{plurality, plural, one {was} other {were}}",values:{plurality:previewResult.resultTotals.fired}}),firedTimes:external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.firedTimes",defaultMessage:"{fired, plural, one {# instance} other {# instances}}",values:{fired:previewResult.resultTotals.fired}}))}}),groupByText=previewResult.groupByDisplayName?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.alertPreviewGroupBy",defaultMessage:"across {groups}",values:{groups:external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.alertPreviewGroups",defaultMessage:"{numberOfGroups, plural, one {# {groupName}} other {# {groupName}s}}",values:{numberOfGroups:previewResult.numberOfGroups,groupName:previewResult.groupByDisplayName}}))}})," "):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null),lookbackText=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.alertPreviewLookback",defaultMessage:"in the last {lookback}",values:{lookback:null===(_previewOptions$find=previewOptions.find(e=>e.value===previewResult.previewLookbackInterval))||void 0===_previewOptions$find?void 0:_previewOptions$find.shortText}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.alertPreviewResultText",defaultMessage:"{instanceCount} {groupByWithConditionalTrailingSpace}{lookbackText}.",values:{instanceCount:instanceCount,groupByWithConditionalTrailingSpace:groupByText,lookbackText:lookbackText}})},previewOptions=[{value:"h",text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.lastHourLabel",{defaultMessage:"Last hour"}),shortText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.hourLabel",{defaultMessage:"hour"})},{value:"d",text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.lastDayLabel",{defaultMessage:"Last day"}),shortText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.dayLabel",{defaultMessage:"day"})},{value:"w",text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.lastWeekLabel",{defaultMessage:"Last week"}),shortText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.weekLabel",{defaultMessage:"week"})},{value:"M",text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.lastMonthLabel",{defaultMessage:"Last month"}),shortText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.monthLabel",{defaultMessage:"month"})}],previewDOMOptions=previewOptions.map(o=>Object(external_kbnSharedDeps_Lodash_.omit)(o,"shortText"));external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.lastHourLabel",{defaultMessage:"Last hour"}),external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.hourLabel",{defaultMessage:"hour"}),external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.lastDayLabel",{defaultMessage:"Last day"}),external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.dayLabel",{defaultMessage:"day"}),external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.lastWeekLabel",{defaultMessage:"Last week"}),external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.weekLabel",{defaultMessage:"week"}),external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.lastMonthLabel",{defaultMessage:"Last month"}),external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.monthLabel",{defaultMessage:"month"})},563:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"defaultExpression",(function(){return defaultExpression})),__webpack_require__.d(__webpack_exports__,"Expressions",(function(){return Expressions}));var external_kbnSharedDeps_Lodash_=__webpack_require__(24),external_kbnSharedDeps_React_=__webpack_require__(2),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_ElasticEui_=__webpack_require__(10),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(14),external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),common=__webpack_require__(211),metrics=__webpack_require__(131),public_=__webpack_require__(68),kuery_bar=__webpack_require__(162),group_by=__webpack_require__(204),use_source_via_http=__webpack_require__(141),kuery=__webpack_require__(117);const correctedPctConvert=(v,decimalToPct)=>{const replacementPattern=decimalToPct?new RegExp(/0?\./):".",numberOfDigits=String(v).replace(replacementPattern,"").length;return parseFloat((decimalToPct?100*v:v/100).toPrecision(numberOfDigits))};var common_=__webpack_require__(13);let AGGREGATION_TYPES;!function(AGGREGATION_TYPES){AGGREGATION_TYPES.COUNT="count",AGGREGATION_TYPES.AVERAGE="avg",AGGREGATION_TYPES.SUM="sum",AGGREGATION_TYPES.MIN="min",AGGREGATION_TYPES.MAX="max",AGGREGATION_TYPES.RATE="rate",AGGREGATION_TYPES.CARDINALITY="cardinality",AGGREGATION_TYPES.P95="p95",AGGREGATION_TYPES.P99="p99"}(AGGREGATION_TYPES||(AGGREGATION_TYPES={}));var types=__webpack_require__(19);const customComparators={...public_.builtInComparators,[types.a.OUTSIDE_RANGE]:{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.outsideRangeLabel",{defaultMessage:"Is not between"}),value:types.a.OUTSIDE_RANGE,requiredValues:2}},StyledExpressionRow=Object(common_.euiStyled)(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup)`
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  margin: 0 -4px;
`,StyledExpression=common_.euiStyled.div`
  padding: 0 4px;
`,StyledHealth=Object(common_.euiStyled)(external_kbnSharedDeps_ElasticEui_.EuiHealth)`
  margin-left: 4px;
`,ExpressionRow=props=>{var _ref,_ref2;const[isExpanded,setRowState]=Object(external_kbnSharedDeps_React_.useState)(!0),toggleRowState=Object(external_kbnSharedDeps_React_.useCallback)(()=>setRowState(!isExpanded),[isExpanded]),{children:children,setAlertParams:setAlertParams,expression:expression,errors:errors,expressionId:expressionId,remove:remove,fields:fields,canDelete:canDelete}=props,{aggType:aggType=AGGREGATION_TYPES.MAX,metric:metric,comparator:comparator=types.a.GT,threshold:threshold=[],warningThreshold:warningThreshold=[],warningComparator:warningComparator}=expression,[displayWarningThreshold,setDisplayWarningThreshold]=Object(external_kbnSharedDeps_React_.useState)(Boolean(null==warningThreshold?void 0:warningThreshold.length)),isMetricPct=Object(external_kbnSharedDeps_React_.useMemo)(()=>Boolean(metric&&metric.endsWith(".pct")),[metric]),updateAggType=Object(external_kbnSharedDeps_React_.useCallback)(at=>{setAlertParams(expressionId,{...expression,aggType:at,metric:"count"===at?void 0:expression.metric})},[expressionId,expression,setAlertParams]),updateMetric=Object(external_kbnSharedDeps_React_.useCallback)(m=>{setAlertParams(expressionId,{...expression,metric:m})},[expressionId,expression,setAlertParams]),updateComparator=Object(external_kbnSharedDeps_React_.useCallback)(c=>{setAlertParams(expressionId,{...expression,comparator:c})},[expressionId,expression,setAlertParams]),updateWarningComparator=Object(external_kbnSharedDeps_React_.useCallback)(c=>{setAlertParams(expressionId,{...expression,warningComparator:c})},[expressionId,expression,setAlertParams]),convertThreshold=Object(external_kbnSharedDeps_React_.useCallback)(enteredThreshold=>isMetricPct?enteredThreshold.map(v=>(v=>correctedPctConvert(v,!1))(v)):enteredThreshold,[isMetricPct]),updateThreshold=Object(external_kbnSharedDeps_React_.useCallback)(enteredThreshold=>{const t=convertThreshold(enteredThreshold);t.join()!==expression.threshold.join()&&setAlertParams(expressionId,{...expression,threshold:t})},[expressionId,expression,convertThreshold,setAlertParams]),updateWarningThreshold=Object(external_kbnSharedDeps_React_.useCallback)(enteredThreshold=>{var _expression$warningTh;const t=convertThreshold(enteredThreshold);t.join()!==(null===(_expression$warningTh=expression.warningThreshold)||void 0===_expression$warningTh?void 0:_expression$warningTh.join())&&setAlertParams(expressionId,{...expression,warningThreshold:t})},[expressionId,expression,convertThreshold,setAlertParams]),toggleWarningThreshold=Object(external_kbnSharedDeps_React_.useCallback)(()=>{displayWarningThreshold?(setDisplayWarningThreshold(!1),setAlertParams(expressionId,Object(external_kbnSharedDeps_Lodash_.omit)(expression,"warningComparator","warningThreshold"))):(setDisplayWarningThreshold(!0),setAlertParams(expressionId,{...expression,warningComparator:comparator,warningThreshold:[]}))},[displayWarningThreshold,setDisplayWarningThreshold,setAlertParams,comparator,expression,expressionId]),criticalThresholdExpression=external_kbnSharedDeps_React_default.a.createElement(ThresholdElement,{comparator:comparator,threshold:threshold,updateComparator:updateComparator,updateThreshold:updateThreshold,errors:null!==(_ref=errors.critical)&&void 0!==_ref?_ref:{},isMetricPct:isMetricPct}),warningThresholdExpression=displayWarningThreshold&&external_kbnSharedDeps_React_default.a.createElement(ThresholdElement,{comparator:warningComparator||comparator,threshold:warningThreshold,updateComparator:updateWarningComparator,updateThreshold:updateWarningThreshold,errors:null!==(_ref2=errors.warning)&&void 0!==_ref2?_ref2:{},isMetricPct:isMetricPct});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{iconType:isExpanded?"arrowDown":"arrowRight",onClick:toggleRowState,"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.expandRowLabel",{defaultMessage:"Expand row."})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!0},external_kbnSharedDeps_React_default.a.createElement(StyledExpressionRow,null,external_kbnSharedDeps_React_default.a.createElement(StyledExpression,null,external_kbnSharedDeps_React_default.a.createElement(public_.WhenExpression,{customAggTypesOptions:aggregationType,aggType:aggType,onChangeSelectedAggType:updateAggType})),"count"!==aggType&&external_kbnSharedDeps_React_default.a.createElement(StyledExpression,null,external_kbnSharedDeps_React_default.a.createElement(public_.OfExpression,{customAggTypesOptions:aggregationType,aggField:metric,fields:fields.map(f=>({normalizedType:f.type,name:f.name})),aggType:aggType,errors:errors,onChangeSelectedAggField:updateMetric,helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.ofExpression.helpTextDetail",defaultMessage:"Can't find a metric? {documentationLink}.",values:{documentationLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:"https://www.elastic.co/guide/en/observability/current/configure-settings.html",target:"BLANK"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.ofExpression.popoverLinkLabel",defaultMessage:"Learn how to add more data"}))}}),"data-test-subj":"ofExpression"})),!displayWarningThreshold&&criticalThresholdExpression),displayWarningThreshold&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(StyledExpressionRow,null,criticalThresholdExpression,external_kbnSharedDeps_React_default.a.createElement(StyledHealth,{color:"danger"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.criticalThreshold",defaultMessage:"Alert"}))),external_kbnSharedDeps_React_default.a.createElement(StyledExpressionRow,null,warningThresholdExpression,external_kbnSharedDeps_React_default.a.createElement(StyledHealth,{color:"warning"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.warningThreshold",defaultMessage:"Warning"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.removeWarningThreshold",{defaultMessage:"Remove warningThreshold"}),iconSize:"s",color:"subdued",iconType:"crossInACircleFilled",onClick:toggleWarningThreshold}))),!displayWarningThreshold&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(StyledExpressionRow,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{color:"primary",flush:"left",size:"xs",iconType:"plusInCircleFilled",onClick:toggleWarningThreshold},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.addWarningThreshold",defaultMessage:"Add warning threshold"}))))),canDelete&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.removeCondition",{defaultMessage:"Remove condition"}),color:"danger",iconType:"trash",onClick:()=>remove(expressionId)}))),isExpanded?external_kbnSharedDeps_React_default.a.createElement("div",{style:{padding:"0 0 0 28px"}},children):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}))},ThresholdElement=({updateComparator:updateComparator,updateThreshold:updateThreshold,threshold:threshold,isMetricPct:isMetricPct,comparator:comparator,errors:errors})=>{const displayedThreshold=Object(external_kbnSharedDeps_React_.useMemo)(()=>isMetricPct?threshold.map(v=>(v=>correctedPctConvert(v,!0))(v)):threshold,[threshold,isMetricPct]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(StyledExpression,null,external_kbnSharedDeps_React_default.a.createElement(public_.ThresholdExpression,{thresholdComparator:comparator||types.a.GT,threshold:displayedThreshold,customComparators:customComparators,onChangeSelectedThresholdComparator:updateComparator,onChangeSelectedThreshold:updateThreshold,errors:errors})),isMetricPct&&external_kbnSharedDeps_React_default.a.createElement("div",{style:{alignSelf:"center"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},"%")))},aggregationType={avg:{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.avg",{defaultMessage:"Average"}),fieldRequired:!0,validNormalizedTypes:["number"],value:AGGREGATION_TYPES.AVERAGE},max:{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.max",{defaultMessage:"Max"}),fieldRequired:!0,validNormalizedTypes:["number","date"],value:AGGREGATION_TYPES.MAX},min:{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.min",{defaultMessage:"Min"}),fieldRequired:!0,validNormalizedTypes:["number","date"],value:AGGREGATION_TYPES.MIN},cardinality:{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.cardinality",{defaultMessage:"Cardinality"}),fieldRequired:!1,value:AGGREGATION_TYPES.CARDINALITY,validNormalizedTypes:["number"]},rate:{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.rate",{defaultMessage:"Rate"}),fieldRequired:!1,value:AGGREGATION_TYPES.RATE,validNormalizedTypes:["number"]},count:{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.count",{defaultMessage:"Document count"}),fieldRequired:!1,value:AGGREGATION_TYPES.COUNT,validNormalizedTypes:["number"]},sum:{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.sum",{defaultMessage:"Sum"}),fieldRequired:!1,value:AGGREGATION_TYPES.SUM,validNormalizedTypes:["number"]},p95:{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.p95",{defaultMessage:"95th Percentile"}),fieldRequired:!1,value:AGGREGATION_TYPES.P95,validNormalizedTypes:["number"]},p99:{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.p99",{defaultMessage:"99th Percentile"}),fieldRequired:!1,value:AGGREGATION_TYPES.P99,validNormalizedTypes:["number"]}};var external_kbnSharedDeps_ElasticCharts_=__webpack_require__(61),color_palette=__webpack_require__(86),series_chart=__webpack_require__(124),use_metrics_explorer_options=__webpack_require__(93),create_formatter_for_metric=__webpack_require__(138),calculate_domain=__webpack_require__(125),use_metrics_explorer_data=__webpack_require__(205);var get_metric_id=__webpack_require__(161),use_kibana=__webpack_require__(16),criterion_preview_chart=__webpack_require__(139),threshold_annotations=__webpack_require__(207);const ExpressionChart=({expression:expression,derivedIndexPattern:derivedIndexPattern,source:source,filterQuery:filterQuery,groupBy:groupBy})=>{var _expression$warningTh,_expression$warningTh2;const{loading:loading,data:data}=((expression,derivedIndexPattern,source,filterQuery,groupBy)=>{const{timeSize:timeSize,timeUnit:timeUnit}=expression||{timeSize:1,timeUnit:"m"},options=Object(external_kbnSharedDeps_React_.useMemo)(()=>({limit:1,forceInterval:!0,dropLastBucket:!1,groupBy:groupBy,filterQuery:filterQuery,metrics:[{field:expression.metric,aggregation:expression.aggType}],aggregation:expression.aggType||"avg"}),[expression.aggType,expression.metric,filterQuery,groupBy]),timerange=Object(external_kbnSharedDeps_React_.useMemo)(()=>({interval:`>=${timeSize||1}${timeUnit}`,from:`now-${20*(timeSize||1)}${timeUnit}`,to:"now"}),[timeSize,timeUnit]);return Object(use_metrics_explorer_data.a)(options,null==source?void 0:source.configuration,derivedIndexPattern,timerange,null,null)})(expression,derivedIndexPattern,source,filterQuery,groupBy),{uiSettings:uiSettings}=Object(use_kibana.b)().services,metric={field:expression.metric,aggregation:expression.aggType,color:color_palette.a.color0},isDarkMode=(null==uiSettings?void 0:uiSettings.get("theme:darkMode"))||!1,dateFormatter=Object(external_kbnSharedDeps_React_.useMemo)(()=>{var _first,_last;const firstSeries=Object(external_kbnSharedDeps_Lodash_.first)(null==data?void 0:data.series),firstTimestamp=null===(_first=Object(external_kbnSharedDeps_Lodash_.first)(null==firstSeries?void 0:firstSeries.rows))||void 0===_first?void 0:_first.timestamp,lastTimestamp=null===(_last=Object(external_kbnSharedDeps_Lodash_.last)(null==firstSeries?void 0:firstSeries.rows))||void 0===_last?void 0:_last.timestamp;return null==firstTimestamp||null==lastTimestamp?value=>""+value:Object(external_kbnSharedDeps_ElasticCharts_.niceTimeFormatter)([firstTimestamp,lastTimestamp])},[null==data?void 0:data.series]),yAxisFormater=Object(external_kbnSharedDeps_React_.useCallback)(Object(create_formatter_for_metric.a)(metric),[expression]);if(loading||!data)return external_kbnSharedDeps_React_default.a.createElement(criterion_preview_chart.c,null);const criticalThresholds=expression.threshold.slice().sort(),warningThresholds=null!==(_expression$warningTh=null===(_expression$warningTh2=expression.warningThreshold)||void 0===_expression$warningTh2?void 0:_expression$warningTh2.slice().sort())&&void 0!==_expression$warningTh?_expression$warningTh:[],thresholds=[...criticalThresholds,...warningThresholds].sort(),firstSeries=Object(external_kbnSharedDeps_Lodash_.first)(data.series);if(!firstSeries||!firstSeries.rows||0===firstSeries.rows.length)return external_kbnSharedDeps_React_default.a.createElement(criterion_preview_chart.e,null);const series={...firstSeries,rows:firstSeries.rows.map(row=>{const newRow={...row};return thresholds.forEach((thresholdValue,index)=>{newRow[Object(get_metric_id.a)(metric,"threshold_"+index)]=thresholdValue}),newRow})},firstTimestamp=Object(external_kbnSharedDeps_Lodash_.first)(firstSeries.rows).timestamp,lastTimestamp=Object(external_kbnSharedDeps_Lodash_.last)(firstSeries.rows).timestamp,dataDomain=Object(calculate_domain.a)(series,[metric],!1),domain={max:1.1*Math.max(dataDomain.max,Object(external_kbnSharedDeps_Lodash_.last)(thresholds)||dataDomain.max),min:.9*Math.min(dataDomain.min,Object(external_kbnSharedDeps_Lodash_.first)(thresholds)||dataDomain.min)};domain.min===Object(external_kbnSharedDeps_Lodash_.first)(expression.threshold)&&(domain.min=.9*domain.min);const{timeSize:timeSize,timeUnit:timeUnit}=expression,timeLabel=criterion_preview_chart.f[timeUnit];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(criterion_preview_chart.a,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Chart,null,external_kbnSharedDeps_React_default.a.createElement(series_chart.a,{type:use_metrics_explorer_options.b.bar,metric:metric,id:"0",series:series,stack:!1}),external_kbnSharedDeps_React_default.a.createElement(threshold_annotations.a,{comparator:expression.comparator,threshold:expression.threshold,sortedThresholds:criticalThresholds,color:color_palette.a.color1,id:"critical",firstTimestamp:firstTimestamp,lastTimestamp:lastTimestamp,domain:domain}),expression.warningComparator&&expression.warningThreshold&&external_kbnSharedDeps_React_default.a.createElement(threshold_annotations.a,{comparator:expression.warningComparator,threshold:expression.warningThreshold,sortedThresholds:warningThresholds,color:color_palette.a.color5,id:"warning",firstTimestamp:firstTimestamp,lastTimestamp:lastTimestamp,domain:domain}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Axis,{id:"timestamp",position:external_kbnSharedDeps_ElasticCharts_.Position.Bottom,showOverlappingTicks:!0,tickFormat:dateFormatter}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Axis,{id:"values",position:external_kbnSharedDeps_ElasticCharts_.Position.Left,tickFormat:yAxisFormater,domain:domain}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Settings,{tooltip:criterion_preview_chart.i,theme:Object(criterion_preview_chart.g)(isDarkMode)}))),external_kbnSharedDeps_React_default.a.createElement("div",{style:{textAlign:"center"}},"ALL"!==series.id?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alerts.dataTimeRangeLabelWithGrouping",defaultMessage:"Last {lookback} {timeLabel} of data for {id}",values:{id:series.id,timeLabel:timeLabel,lookback:20*timeSize}})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alerts.dataTimeRangeLabel",defaultMessage:"Last {lookback} {timeLabel}",values:{timeLabel:timeLabel,lookback:20*timeSize}}))))};var validation=__webpack_require__(42);const defaultExpression={aggType:metrics.a.AVERAGE,comparator:metrics.b.GT,threshold:[],timeSize:1,timeUnit:"m"},Expressions=props=>{const{setAlertParams:setAlertParams,alertParams:alertParams,errors:errors,alertInterval:alertInterval,alertThrottle:alertThrottle,metadata:metadata,alertNotifyWhen:alertNotifyWhen}=props,{http:http,notifications:notifications}=Object(use_kibana.b)().services,{source:source,createDerivedIndexPattern:createDerivedIndexPattern}=Object(use_source_via_http.a)({sourceId:"default",fetch:http.fetch,toastWarning:notifications.toasts.addWarning}),[timeSize,setTimeSize]=Object(external_kbnSharedDeps_React_.useState)(1),[timeUnit,setTimeUnit]=Object(external_kbnSharedDeps_React_.useState)("m"),derivedIndexPattern=Object(external_kbnSharedDeps_React_.useMemo)(()=>createDerivedIndexPattern(),[createDerivedIndexPattern]),options=Object(external_kbnSharedDeps_React_.useMemo)(()=>{var _metadata$currentOpti;return null!=metadata&&null!==(_metadata$currentOpti=metadata.currentOptions)&&void 0!==_metadata$currentOpti&&_metadata$currentOpti.metrics?metadata.currentOptions:{metrics:[],aggregation:"avg"}},[metadata]),updateParams=Object(external_kbnSharedDeps_React_.useCallback)((id,e)=>{const exp=alertParams.criteria?alertParams.criteria.slice():[];exp[id]=e,setAlertParams("criteria",exp)},[setAlertParams,alertParams.criteria]),addExpression=Object(external_kbnSharedDeps_React_.useCallback)(()=>{var _alertParams$criteria;const exp=(null===(_alertParams$criteria=alertParams.criteria)||void 0===_alertParams$criteria?void 0:_alertParams$criteria.slice())||[];exp.push({...defaultExpression,timeSize:null!=timeSize?timeSize:defaultExpression.timeSize,timeUnit:null!=timeUnit?timeUnit:defaultExpression.timeUnit}),setAlertParams("criteria",exp)},[setAlertParams,alertParams.criteria,timeSize,timeUnit]),removeExpression=Object(external_kbnSharedDeps_React_.useCallback)(id=>{var _alertParams$criteria2;const exp=(null===(_alertParams$criteria2=alertParams.criteria)||void 0===_alertParams$criteria2?void 0:_alertParams$criteria2.slice())||[];exp.length>1&&(exp.splice(id,1),setAlertParams("criteria",exp))},[setAlertParams,alertParams.criteria]),onFilterChange=Object(external_kbnSharedDeps_React_.useCallback)(filter=>{setAlertParams("filterQueryText",filter),setAlertParams("filterQuery",Object(kuery.a)(filter,derivedIndexPattern)||"")},[setAlertParams,derivedIndexPattern]),debouncedOnFilterChange=Object(external_kbnSharedDeps_React_.useCallback)(Object(external_kbnSharedDeps_Lodash_.debounce)(onFilterChange,500),[onFilterChange]),onGroupByChange=Object(external_kbnSharedDeps_React_.useCallback)(group=>{setAlertParams("groupBy",group&&group.length?group:"")},[setAlertParams]),emptyError=Object(external_kbnSharedDeps_React_.useMemo)(()=>({aggField:[],timeSizeUnit:[],timeWindowSize:[]}),[]),updateTimeSize=Object(external_kbnSharedDeps_React_.useCallback)(ts=>{var _alertParams$criteria3;const criteria=(null===(_alertParams$criteria3=alertParams.criteria)||void 0===_alertParams$criteria3?void 0:_alertParams$criteria3.map(c=>({...c,timeSize:ts})))||[];setTimeSize(ts||void 0),setAlertParams("criteria",criteria)},[alertParams.criteria,setAlertParams]),updateTimeUnit=Object(external_kbnSharedDeps_React_.useCallback)(tu=>{var _alertParams$criteria4;const criteria=(null===(_alertParams$criteria4=alertParams.criteria)||void 0===_alertParams$criteria4?void 0:_alertParams$criteria4.map(c=>({...c,timeUnit:tu})))||[];setTimeUnit(tu),setAlertParams("criteria",criteria)},[alertParams.criteria,setAlertParams]),preFillAlertCriteria=Object(external_kbnSharedDeps_React_.useCallback)(()=>{var _md$currentOptions,_md$currentOptions$me;const md=metadata;null!=md&&null!==(_md$currentOptions=md.currentOptions)&&void 0!==_md$currentOptions&&null!==(_md$currentOptions$me=_md$currentOptions.metrics)&&void 0!==_md$currentOptions$me&&_md$currentOptions$me.length?setAlertParams("criteria",md.currentOptions.metrics.map(metric=>({metric:metric.field,comparator:metrics.b.GT,threshold:[],timeSize:timeSize,timeUnit:timeUnit,aggType:metric.aggregation}))):setAlertParams("criteria",[defaultExpression])},[metadata,setAlertParams,timeSize,timeUnit]),preFillAlertFilter=Object(external_kbnSharedDeps_React_.useCallback)(()=>{var _md$currentOptions2,_md$currentOptions3;const md=metadata;if(md&&null!==(_md$currentOptions2=md.currentOptions)&&void 0!==_md$currentOptions2&&_md$currentOptions2.filterQuery)setAlertParams("filterQueryText",md.currentOptions.filterQuery),setAlertParams("filterQuery",Object(kuery.a)(md.currentOptions.filterQuery,derivedIndexPattern)||"");else if(md&&null!==(_md$currentOptions3=md.currentOptions)&&void 0!==_md$currentOptions3&&_md$currentOptions3.groupBy&&md.series){const{groupBy:groupBy}=md.currentOptions,filter=Array.isArray(groupBy)?groupBy.map((field,index)=>{var _md$series,_md$series$keys;return`${field}: "${null===(_md$series=md.series)||void 0===_md$series||null===(_md$series$keys=_md$series.keys)||void 0===_md$series$keys?void 0:_md$series$keys[index]}"`}).join(" and "):`${groupBy}: "${md.series.id}"`;setAlertParams("filterQueryText",filter),setAlertParams("filterQuery",Object(kuery.a)(filter,derivedIndexPattern)||"")}},[metadata,derivedIndexPattern,setAlertParams]),preFillAlertGroupBy=Object(external_kbnSharedDeps_React_.useCallback)(()=>{var _md$currentOptions4;const md=metadata;md&&null!==(_md$currentOptions4=md.currentOptions)&&void 0!==_md$currentOptions4&&_md$currentOptions4.groupBy&&!md.series&&setAlertParams("groupBy",md.currentOptions.groupBy)},[metadata,setAlertParams]);Object(external_kbnSharedDeps_React_.useEffect)(()=>{alertParams.criteria&&alertParams.criteria.length?(setTimeSize(alertParams.criteria[0].timeSize),setTimeUnit(alertParams.criteria[0].timeUnit)):preFillAlertCriteria(),alertParams.filterQuery||preFillAlertFilter(),alertParams.groupBy||preFillAlertGroupBy(),alertParams.sourceId||setAlertParams("sourceId",(null==source?void 0:source.id)||"default")},[metadata,source]);const handleFieldSearchChange=Object(external_kbnSharedDeps_React_.useCallback)(e=>onFilterChange(e.target.value),[onFilterChange]),groupByPreviewDisplayName=Object(external_kbnSharedDeps_React_.useMemo)(()=>Array.isArray(alertParams.groupBy)?alertParams.groupBy.join(", "):alertParams.groupBy,[alertParams.groupBy]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.conditions",defaultMessage:"Conditions"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xs"}),alertParams.criteria&&alertParams.criteria.map((e,idx)=>external_kbnSharedDeps_React_default.a.createElement(ExpressionRow,{canDelete:alertParams.criteria&&alertParams.criteria.length>1||!1,fields:derivedIndexPattern.fields,remove:removeExpression,addExpression:addExpression,key:idx,expressionId:idx,setAlertParams:updateParams,errors:errors[idx]||emptyError,expression:e||{}},external_kbnSharedDeps_React_default.a.createElement(ExpressionChart,{expression:e,derivedIndexPattern:derivedIndexPattern,source:source,filterQuery:alertParams.filterQueryText,groupBy:alertParams.groupBy}))),external_kbnSharedDeps_React_default.a.createElement("div",{style:{marginLeft:28}},external_kbnSharedDeps_React_default.a.createElement(public_.ForLastExpression,{timeWindowSize:timeSize,timeWindowUnit:timeUnit,errors:emptyError,onChangeWindowSize:updateTimeSize,onChangeWindowUnit:updateTimeUnit})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{color:"primary",iconSide:"left",flush:"left",iconType:"plusInCircleFilled",onClick:addExpression},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.addCondition",defaultMessage:"Add condition"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCheckbox,{id:"metrics-alert-no-data-toggle",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.alertOnNoData",{defaultMessage:"Alert me if there's no data"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.noDataHelpText",{defaultMessage:"Enable this to trigger the action if the metric(s) do not report any data over the expected time period, or if the alert fails to query Elasticsearch"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"questionInCircle",color:"subdued"}))),checked:alertParams.alertOnNoData,onChange:e=>setAlertParams("alertOnNoData",e.target.checked)}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.filterLabel",{defaultMessage:"Filter (optional)"}),helpText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.filterHelpText",{defaultMessage:"Use a KQL expression to limit the scope of your alert trigger."}),fullWidth:!0,display:"rowCompressed"},metadata&&external_kbnSharedDeps_React_default.a.createElement(kuery_bar.a,{derivedIndexPattern:derivedIndexPattern,onChange:debouncedOnFilterChange,onSubmit:onFilterChange,value:alertParams.filterQueryText})||external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldSearch,{onChange:handleFieldSearchChange,value:alertParams.filterQueryText,fullWidth:!0})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.createAlertPerText",{defaultMessage:"Create alert per (optional)"}),helpText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.infra.metrics.alertFlyout.createAlertPerHelpText",{defaultMessage:'Create an alert for every unique value. For example: "host.id" or "cloud.region".'}),fullWidth:!0,display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(group_by.a,{onChange:onGroupByChange,fields:derivedIndexPattern.fields,options:{...options,groupBy:alertParams.groupBy||void 0}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(common.a,{alertInterval:alertInterval,alertThrottle:alertThrottle,alertNotifyWhen:alertNotifyWhen,alertType:metrics.e,alertParams:Object(external_kbnSharedDeps_Lodash_.pick)(alertParams,"criteria","groupBy","filterQuery","sourceId"),showNoDataResults:alertParams.alertOnNoData,validate:validation.a,groupByDisplayName:groupByPreviewDisplayName}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}))};__webpack_exports__.default=Expressions},83:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return ItemTypeRT})),__webpack_require__.d(__webpack_exports__,"b",(function(){return InventoryVisTypeRT})),__webpack_require__.d(__webpack_exports__,"a",(function(){return InventoryMetricRT})),__webpack_require__.d(__webpack_exports__,"d",(function(){return MetricsUIAggregationRT})),__webpack_require__.d(__webpack_exports__,"e",(function(){return SnapshotMetricTypeKeys})),__webpack_require__.d(__webpack_exports__,"f",(function(){return SnapshotMetricTypeRT}));var io_ts__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);const ItemTypeRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.keyof({host:null,pod:null,container:null,awsEC2:null,awsS3:null,awsSQS:null,awsRDS:null}),InventoryVisTypeRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.keyof({line:null,area:null,bar:null}),InventoryMetricRT=(io_ts__WEBPACK_IMPORTED_MODULE_0__.keyof({abbreviatedNumber:null,bits:null,bytes:null,number:null,percent:null,highPercision:null}),io_ts__WEBPACK_IMPORTED_MODULE_0__.keyof({hostSystemOverview:null,hostCpuUsage:null,hostFilesystem:null,hostK8sOverview:null,hostK8sCpuCap:null,hostK8sDiskCap:null,hostK8sMemoryCap:null,hostK8sPodCap:null,hostLoad:null,hostMemoryUsage:null,hostNetworkTraffic:null,hostDockerOverview:null,hostDockerInfo:null,hostDockerTop5ByCpu:null,hostDockerTop5ByMemory:null,podOverview:null,podCpuUsage:null,podMemoryUsage:null,podLogUsage:null,podNetworkTraffic:null,containerOverview:null,containerCpuKernel:null,containerCpuUsage:null,containerDiskIOOps:null,containerDiskIOBytes:null,containerMemory:null,containerNetworkTraffic:null,nginxHits:null,nginxRequestRate:null,nginxActiveConnections:null,nginxRequestsPerConnection:null,awsOverview:null,awsCpuUtilization:null,awsNetworkBytes:null,awsNetworkPackets:null,awsDiskioBytes:null,awsDiskioOps:null,awsEC2CpuUtilization:null,awsEC2NetworkTraffic:null,awsEC2DiskIOBytes:null,awsS3TotalRequests:null,awsS3NumberOfObjects:null,awsS3BucketSize:null,awsS3DownloadBytes:null,awsS3UploadBytes:null,awsRDSCpuTotal:null,awsRDSConnections:null,awsRDSQueriesExecuted:null,awsRDSActiveTransactions:null,awsRDSLatency:null,awsSQSMessagesVisible:null,awsSQSMessagesDelayed:null,awsSQSMessagesSent:null,awsSQSMessagesEmpty:null,awsSQSOldestMessage:null,custom:null})),TSVBMetricTypeRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.keyof({avg:null,max:null,min:null,calculation:null,cardinality:null,series_agg:null,positive_only:null,derivative:null,count:null,sum:null,cumulative_sum:null}),TSVBMetricModelCountRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.type({id:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,type:io_ts__WEBPACK_IMPORTED_MODULE_0__.literal("count")}),TSVBMetricModelBasicMetricRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.intersection([io_ts__WEBPACK_IMPORTED_MODULE_0__.type({id:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,type:TSVBMetricTypeRT}),io_ts__WEBPACK_IMPORTED_MODULE_0__.partial({field:io_ts__WEBPACK_IMPORTED_MODULE_0__.string})]),TSVBMetricModelVariableRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.type({field:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,id:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,name:io_ts__WEBPACK_IMPORTED_MODULE_0__.string}),TSVBMetricModelBucketScriptRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.type({id:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,script:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,type:io_ts__WEBPACK_IMPORTED_MODULE_0__.literal("calculation"),variables:io_ts__WEBPACK_IMPORTED_MODULE_0__.array(TSVBMetricModelVariableRT)}),TSVBMetricModelDerivativeRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.type({id:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,field:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,unit:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,type:io_ts__WEBPACK_IMPORTED_MODULE_0__.literal("derivative")}),TSVBMetricModelSeriesAggRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.type({id:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,function:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,type:io_ts__WEBPACK_IMPORTED_MODULE_0__.literal("series_agg")}),TSVBPercentileItemRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.type({id:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,value:io_ts__WEBPACK_IMPORTED_MODULE_0__.number}),TSVBMetricModePercentileAggRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.intersection([io_ts__WEBPACK_IMPORTED_MODULE_0__.type({id:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,type:io_ts__WEBPACK_IMPORTED_MODULE_0__.literal("percentile"),percentiles:io_ts__WEBPACK_IMPORTED_MODULE_0__.array(TSVBPercentileItemRT)}),io_ts__WEBPACK_IMPORTED_MODULE_0__.partial({field:io_ts__WEBPACK_IMPORTED_MODULE_0__.string})]),TSVBMetricRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.union([TSVBMetricModelCountRT,TSVBMetricModelBasicMetricRT,TSVBMetricModelBucketScriptRT,TSVBMetricModelDerivativeRT,TSVBMetricModePercentileAggRT,TSVBMetricModelSeriesAggRT]),TSVBSeriesRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.intersection([io_ts__WEBPACK_IMPORTED_MODULE_0__.type({id:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,metrics:io_ts__WEBPACK_IMPORTED_MODULE_0__.array(TSVBMetricRT),split_mode:io_ts__WEBPACK_IMPORTED_MODULE_0__.string}),io_ts__WEBPACK_IMPORTED_MODULE_0__.partial({terms_field:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,terms_size:io_ts__WEBPACK_IMPORTED_MODULE_0__.number,terms_order_by:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,filter:io_ts__WEBPACK_IMPORTED_MODULE_0__.type({query:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,language:io_ts__WEBPACK_IMPORTED_MODULE_0__.keyof({lucene:null,kuery:null})})})]),ESBasicMetricAggRT=(io_ts__WEBPACK_IMPORTED_MODULE_0__.intersection([io_ts__WEBPACK_IMPORTED_MODULE_0__.type({id:InventoryMetricRT,requires:io_ts__WEBPACK_IMPORTED_MODULE_0__.array(io_ts__WEBPACK_IMPORTED_MODULE_0__.string),index_pattern:io_ts__WEBPACK_IMPORTED_MODULE_0__.union([io_ts__WEBPACK_IMPORTED_MODULE_0__.string,io_ts__WEBPACK_IMPORTED_MODULE_0__.array(io_ts__WEBPACK_IMPORTED_MODULE_0__.string)]),interval:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,time_field:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,type:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,series:io_ts__WEBPACK_IMPORTED_MODULE_0__.array(TSVBSeriesRT)}),io_ts__WEBPACK_IMPORTED_MODULE_0__.partial({filter:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,map_field_to:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,id_type:io_ts__WEBPACK_IMPORTED_MODULE_0__.keyof({cloud:null,node:null}),drop_last_bucket:io_ts__WEBPACK_IMPORTED_MODULE_0__.boolean})]),io_ts__WEBPACK_IMPORTED_MODULE_0__.record(io_ts__WEBPACK_IMPORTED_MODULE_0__.string,io_ts__WEBPACK_IMPORTED_MODULE_0__.union([io_ts__WEBPACK_IMPORTED_MODULE_0__[void 0],io_ts__WEBPACK_IMPORTED_MODULE_0__.type({field:io_ts__WEBPACK_IMPORTED_MODULE_0__.string})]))),ESPercentileAggRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.type({percentiles:io_ts__WEBPACK_IMPORTED_MODULE_0__.type({field:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,percents:io_ts__WEBPACK_IMPORTED_MODULE_0__.array(io_ts__WEBPACK_IMPORTED_MODULE_0__.number)})}),ESCaridnalityAggRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.type({cardinality:io_ts__WEBPACK_IMPORTED_MODULE_0__.partial({field:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,script:io_ts__WEBPACK_IMPORTED_MODULE_0__.string})}),ESBucketScriptAggRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.type({bucket_script:io_ts__WEBPACK_IMPORTED_MODULE_0__.intersection([io_ts__WEBPACK_IMPORTED_MODULE_0__.type({buckets_path:io_ts__WEBPACK_IMPORTED_MODULE_0__.record(io_ts__WEBPACK_IMPORTED_MODULE_0__.string,io_ts__WEBPACK_IMPORTED_MODULE_0__.union([io_ts__WEBPACK_IMPORTED_MODULE_0__[void 0],io_ts__WEBPACK_IMPORTED_MODULE_0__.string])),script:io_ts__WEBPACK_IMPORTED_MODULE_0__.type({source:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,lang:io_ts__WEBPACK_IMPORTED_MODULE_0__.keyof({painless:null,expression:null})})}),io_ts__WEBPACK_IMPORTED_MODULE_0__.partial({gap_policy:io_ts__WEBPACK_IMPORTED_MODULE_0__.keyof({skip:null,insert_zeros:null})})])}),ESCumulativeSumAggRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.type({cumulative_sum:io_ts__WEBPACK_IMPORTED_MODULE_0__.type({buckets_path:io_ts__WEBPACK_IMPORTED_MODULE_0__.string})}),ESDerivativeAggRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.type({derivative:io_ts__WEBPACK_IMPORTED_MODULE_0__.type({buckets_path:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,gap_policy:io_ts__WEBPACK_IMPORTED_MODULE_0__.keyof({skip:null,insert_zeros:null}),unit:io_ts__WEBPACK_IMPORTED_MODULE_0__.string})}),ESSumBucketAggRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.type({sum_bucket:io_ts__WEBPACK_IMPORTED_MODULE_0__.type({buckets_path:io_ts__WEBPACK_IMPORTED_MODULE_0__.string})}),ESTopMetricsAggRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.type({top_metrics:io_ts__WEBPACK_IMPORTED_MODULE_0__.type({metrics:io_ts__WEBPACK_IMPORTED_MODULE_0__.union([io_ts__WEBPACK_IMPORTED_MODULE_0__.array(io_ts__WEBPACK_IMPORTED_MODULE_0__.type({field:io_ts__WEBPACK_IMPORTED_MODULE_0__.string})),io_ts__WEBPACK_IMPORTED_MODULE_0__.type({field:io_ts__WEBPACK_IMPORTED_MODULE_0__.string})])})}),ESTermsWithAggregationRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.recursion("SnapshotModelRT",()=>io_ts__WEBPACK_IMPORTED_MODULE_0__.type({terms:io_ts__WEBPACK_IMPORTED_MODULE_0__.type({field:io_ts__WEBPACK_IMPORTED_MODULE_0__.string}),aggregations:MetricsUIAggregationRT})),ESAggregationRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.union([ESBasicMetricAggRT,ESPercentileAggRT,ESBucketScriptAggRT,ESCumulativeSumAggRT,ESDerivativeAggRT,ESSumBucketAggRT,ESTermsWithAggregationRT,ESCaridnalityAggRT,ESTopMetricsAggRT]),MetricsUIAggregationRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.record(io_ts__WEBPACK_IMPORTED_MODULE_0__.string,ESAggregationRT),SnapshotMetricTypeKeys={count:null,cpu:null,load:null,memory:null,tx:null,rx:null,logRate:null,diskIOReadBytes:null,diskIOWriteBytes:null,s3TotalRequests:null,s3NumberOfObjects:null,s3BucketSize:null,s3DownloadBytes:null,s3UploadBytes:null,rdsConnections:null,rdsQueriesExecuted:null,rdsActiveTransactions:null,rdsLatency:null,sqsMessagesVisible:null,sqsMessagesDelayed:null,sqsMessagesSent:null,sqsMessagesEmpty:null,sqsOldestMessage:null,custom:null},SnapshotMetricTypeRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.keyof(SnapshotMetricTypeKeys)},98:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return METRIC_EXPLORER_AGGREGATIONS})),__webpack_require__.d(__webpack_exports__,"c",(function(){return metricsExplorerAggregationRT})),__webpack_require__.d(__webpack_exports__,"d",(function(){return metricsExplorerMetricRT})),__webpack_require__.d(__webpack_exports__,"b",(function(){return afterKeyObjectRT})),__webpack_require__.d(__webpack_exports__,"e",(function(){return metricsExplorerResponseRT}));var io_ts__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);const METRIC_EXPLORER_AGGREGATIONS=["avg","max","min","cardinality","rate","count","sum","p95","p99"],metricsExplorerAggregationKeys=METRIC_EXPLORER_AGGREGATIONS.reduce((acc,agg)=>({...acc,[agg]:null}),{}),metricsExplorerAggregationRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.keyof(metricsExplorerAggregationKeys),metricsExplorerMetricRequiredFieldsRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.type({aggregation:metricsExplorerAggregationRT}),metricsExplorerMetricOptionalFieldsRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.partial({field:io_ts__WEBPACK_IMPORTED_MODULE_0__.union([io_ts__WEBPACK_IMPORTED_MODULE_0__.string,io_ts__WEBPACK_IMPORTED_MODULE_0__[void 0]])}),metricsExplorerMetricRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.intersection([metricsExplorerMetricRequiredFieldsRT,metricsExplorerMetricOptionalFieldsRT]),timeRangeRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.type({field:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,from:io_ts__WEBPACK_IMPORTED_MODULE_0__.number,to:io_ts__WEBPACK_IMPORTED_MODULE_0__.number,interval:io_ts__WEBPACK_IMPORTED_MODULE_0__.string}),metricsExplorerRequestBodyRequiredFieldsRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.type({timerange:timeRangeRT,indexPattern:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,metrics:io_ts__WEBPACK_IMPORTED_MODULE_0__.array(metricsExplorerMetricRT)}),groupByRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.union([io_ts__WEBPACK_IMPORTED_MODULE_0__.string,io_ts__WEBPACK_IMPORTED_MODULE_0__.null,io_ts__WEBPACK_IMPORTED_MODULE_0__[void 0]]),afterKeyObjectRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.record(io_ts__WEBPACK_IMPORTED_MODULE_0__.string,io_ts__WEBPACK_IMPORTED_MODULE_0__.union([io_ts__WEBPACK_IMPORTED_MODULE_0__.string,io_ts__WEBPACK_IMPORTED_MODULE_0__.null])),metricsExplorerRequestBodyOptionalFieldsRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.partial({groupBy:io_ts__WEBPACK_IMPORTED_MODULE_0__.union([groupByRT,io_ts__WEBPACK_IMPORTED_MODULE_0__.array(groupByRT)]),afterKey:io_ts__WEBPACK_IMPORTED_MODULE_0__.union([io_ts__WEBPACK_IMPORTED_MODULE_0__.string,io_ts__WEBPACK_IMPORTED_MODULE_0__.null,io_ts__WEBPACK_IMPORTED_MODULE_0__[void 0],afterKeyObjectRT]),limit:io_ts__WEBPACK_IMPORTED_MODULE_0__.union([io_ts__WEBPACK_IMPORTED_MODULE_0__.number,io_ts__WEBPACK_IMPORTED_MODULE_0__.null,io_ts__WEBPACK_IMPORTED_MODULE_0__[void 0]]),filterQuery:io_ts__WEBPACK_IMPORTED_MODULE_0__.union([io_ts__WEBPACK_IMPORTED_MODULE_0__.string,io_ts__WEBPACK_IMPORTED_MODULE_0__.null,io_ts__WEBPACK_IMPORTED_MODULE_0__[void 0]]),forceInterval:io_ts__WEBPACK_IMPORTED_MODULE_0__.boolean,dropLastBucket:io_ts__WEBPACK_IMPORTED_MODULE_0__.boolean}),metricsExplorerPageInfoRT=(io_ts__WEBPACK_IMPORTED_MODULE_0__.intersection([metricsExplorerRequestBodyRequiredFieldsRT,metricsExplorerRequestBodyOptionalFieldsRT]),io_ts__WEBPACK_IMPORTED_MODULE_0__.type({total:io_ts__WEBPACK_IMPORTED_MODULE_0__.number,afterKey:io_ts__WEBPACK_IMPORTED_MODULE_0__.union([io_ts__WEBPACK_IMPORTED_MODULE_0__.string,io_ts__WEBPACK_IMPORTED_MODULE_0__.null,afterKeyObjectRT])})),metricsExplorerColumnTypeRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.keyof({date:null,number:null,string:null}),metricsExplorerColumnRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.type({name:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,type:metricsExplorerColumnTypeRT}),metricsExplorerRowRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.intersection([io_ts__WEBPACK_IMPORTED_MODULE_0__.type({timestamp:io_ts__WEBPACK_IMPORTED_MODULE_0__.number}),io_ts__WEBPACK_IMPORTED_MODULE_0__.record(io_ts__WEBPACK_IMPORTED_MODULE_0__.string,io_ts__WEBPACK_IMPORTED_MODULE_0__.union([io_ts__WEBPACK_IMPORTED_MODULE_0__.string,io_ts__WEBPACK_IMPORTED_MODULE_0__.number,io_ts__WEBPACK_IMPORTED_MODULE_0__.null,io_ts__WEBPACK_IMPORTED_MODULE_0__[void 0],io_ts__WEBPACK_IMPORTED_MODULE_0__.array(io_ts__WEBPACK_IMPORTED_MODULE_0__.object)]))]),metricsExplorerSeriesRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.intersection([io_ts__WEBPACK_IMPORTED_MODULE_0__.type({id:io_ts__WEBPACK_IMPORTED_MODULE_0__.string,columns:io_ts__WEBPACK_IMPORTED_MODULE_0__.array(metricsExplorerColumnRT),rows:io_ts__WEBPACK_IMPORTED_MODULE_0__.array(metricsExplorerRowRT)}),io_ts__WEBPACK_IMPORTED_MODULE_0__.partial({keys:io_ts__WEBPACK_IMPORTED_MODULE_0__.array(io_ts__WEBPACK_IMPORTED_MODULE_0__.string)})]),metricsExplorerResponseRT=io_ts__WEBPACK_IMPORTED_MODULE_0__.type({series:io_ts__WEBPACK_IMPORTED_MODULE_0__.array(metricsExplorerSeriesRT),pageInfo:metricsExplorerPageInfoRT})}}]);