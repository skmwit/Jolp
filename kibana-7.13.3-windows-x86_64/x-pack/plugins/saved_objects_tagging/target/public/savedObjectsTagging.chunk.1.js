/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.savedObjectsTagging_bundle_jsonpfunction=window.savedObjectsTagging_bundle_jsonpfunction||[]).push([[1],{27:function(module,exports,__webpack_require__){"use strict";var memo,isOldIE=function(){return void 0===memo&&(memo=Boolean(window&&document&&document.all&&!window.atob)),memo},getTarget=function(){var memo={};return function(target){if(void 0===memo[target]){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}}(),stylesInDom=[];function getIndexByIdentifier(identifier){for(var result=-1,i=0;i<stylesInDom.length;i++)if(stylesInDom[i].identifier===identifier){result=i;break}return result}function modulesToDom(list,options){for(var idCountMap={},identifiers=[],i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],count=idCountMap[id]||0,identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier),obj={css:item[1],media:item[2],sourceMap:item[3]};-1!==index?(stylesInDom[index].references++,stylesInDom[index].updater(obj)):stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1}),identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style"),attributes=options.attributes||{};if(void 0===attributes.nonce){var nonce=__webpack_require__.nc;nonce&&(attributes.nonce=nonce)}if(Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])})),"function"==typeof options.insert)options.insert(style);else{var target=getTarget(options.insert||"head");if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");target.appendChild(style)}return style}var textStore,replaceText=(textStore=[],function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")});function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}function applyToTag(style,options,obj){var css=obj.css,media=obj.media,sourceMap=obj.sourceMap;if(media?style.setAttribute("media",media):style.removeAttribute("media"),sourceMap&&btoa&&(css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")),style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}var singleton=null,singletonCounter=0;function addStyle(obj,options){var style,update,remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else style=insertStyleElement(options),update=applyToTag.bind(null,style,options),remove=function(){!function(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style)}(style)};return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}module.exports=function(list,options){(options=options||{}).singleton||"boolean"==typeof options.singleton||(options.singleton=isOldIE());var lastIdentifiers=modulesToDom(list=list||[],options);return function(newList){if(newList=newList||[],"[object Array]"===Object.prototype.toString.call(newList)){for(var i=0;i<lastIdentifiers.length;i++){var index=getIndexByIdentifier(lastIdentifiers[i]);stylesInDom[index].references--}for(var newLastIdentifiers=modulesToDom(newList,options),_i=0;_i<lastIdentifiers.length;_i++){var _index=getIndexByIdentifier(lastIdentifiers[_i]);0===stylesInDom[_index].references&&(stylesInDom[_index].updater(),stylesInDom.splice(_index,1))}lastIdentifiers=newLastIdentifiers}}}},28:function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];return list.toString=function(){return this.map((function(item){var content=function(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=(sourceMap=cssMapping,base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64),"/*# ".concat(data," */")),sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}var sourceMap,base64,data;return[content].join("\n")}(item,useSourceMap);return item[2]?"@media ".concat(item[2]," {").concat(content,"}"):content})).join("")},list.i=function(modules,mediaQuery,dedupe){"string"==typeof modules&&(modules=[[null,modules,""]]);var alreadyImportedModules={};if(dedupe)for(var i=0;i<this.length;i++){var id=this[i][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);dedupe&&alreadyImportedModules[item[0]]||(mediaQuery&&(item[2]?item[2]="".concat(mediaQuery," and ").concat(item[2]):item[2]=mediaQuery),list.push(item))}},list}},31:function(module,exports){},32:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(33);case"v7light":return __webpack_require__(35);case"v8dark":return __webpack_require__(37);case"v8light":return __webpack_require__(39)}},33:function(module,exports,__webpack_require__){var api=__webpack_require__(27),content=__webpack_require__(34);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},34:function(module,exports,__webpack_require__){(exports=__webpack_require__(28)(!1)).push([module.i,".tagMgt__actionBar+.euiSpacer{display:none}.tagMgt__actionBarDivider{height:16px;border-right:1px solid #343741}.tagMgt__actionBar{border-bottom:1px solid #343741;padding-bottom:8px}.tagMgt__actionBarIcon{margin-left:4px}\n",""]),module.exports=exports},35:function(module,exports,__webpack_require__){var api=__webpack_require__(27),content=__webpack_require__(36);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},36:function(module,exports,__webpack_require__){(exports=__webpack_require__(28)(!1)).push([module.i,".tagMgt__actionBar+.euiSpacer{display:none}.tagMgt__actionBarDivider{height:16px;border-right:1px solid #D3DAE6}.tagMgt__actionBar{border-bottom:1px solid #D3DAE6;padding-bottom:8px}.tagMgt__actionBarIcon{margin-left:4px}\n",""]),module.exports=exports},37:function(module,exports,__webpack_require__){var api=__webpack_require__(27),content=__webpack_require__(38);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},38:function(module,exports,__webpack_require__){(exports=__webpack_require__(28)(!1)).push([module.i,".tagMgt__actionBar+.euiSpacer{display:none}.tagMgt__actionBarDivider{height:16px;border-right:1px solid #343741}.tagMgt__actionBar{border-bottom:1px solid #343741;padding-bottom:8px}.tagMgt__actionBarIcon{margin-left:4px}\n",""]),module.exports=exports},39:function(module,exports,__webpack_require__){var api=__webpack_require__(27),content=__webpack_require__(40);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},40:function(module,exports,__webpack_require__){(exports=__webpack_require__(28)(!1)).push([module.i,".tagMgt__actionBar+.euiSpacer{display:none}.tagMgt__actionBarDivider{height:16px;border-right:1px solid #D3DAE6}.tagMgt__actionBar{border-bottom:1px solid #D3DAE6;padding-bottom:8px}.tagMgt__actionBarIcon{margin-left:4px}\n",""]),module.exports=exports},41:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var useEffectOnce_1=__webpack_require__(21).__importDefault(__webpack_require__(42));exports.default=function(fn){useEffectOnce_1.default((function(){fn()}))}},42:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__webpack_require__(0);exports.default=function(effect){react_1.useEffect(effect,[])}},54:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"mountSection",(function(){return mountSection}));var external_kbnSharedDeps_React_=__webpack_require__(0),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_ReactDom_=__webpack_require__(26),external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(11),common=__webpack_require__(9),external_kbnSharedDeps_Rxjs_=__webpack_require__(12),useMount=__webpack_require__(41),useMount_default=__webpack_require__.n(useMount),external_kbnSharedDeps_ElasticEui_=__webpack_require__(1),external_kbnSharedDeps_KbnI18n_=__webpack_require__(5),edition_modal=__webpack_require__(17);const Header=({canCreate:canCreate,onCreate:onCreate})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"baseline"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,null,external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.savedObjectsTagging.management.header.title",defaultMessage:"Tags"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},canCreate&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{key:"createTag",iconType:"tag",color:"primary",fill:!0,"data-test-subj":"createTagButton",onClick:onCreate,isDisabled:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.savedObjectsTagging.management.actions.createTag",defaultMessage:"Create tag"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextColor,{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.savedObjectsTagging.management.header.description",defaultMessage:"Use tags to categorize and easily find your objects."})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}));var components=__webpack_require__(15);const tablePagination={initialPageSize:20,pageSizeOptions:[5,10,20,50]},sorting={sort:{field:"name",direction:"asc"}},TagTable=({loading:loading,capabilities:capabilities,tags:tags,initialQuery:initialQuery,allowSelection:allowSelection,onQueryChange:onQueryChange,selectedTags:selectedTags,onSelectionChange:onSelectionChange,onShowRelations:onShowRelations,getTagRelationUrl:getTagRelationUrl,actionBar:actionBar,actions:actions})=>{const tableRef=Object(external_kbnSharedDeps_React_.useRef)(null);Object(external_kbnSharedDeps_React_.useEffect)(()=>{tableRef.current&&tableRef.current.setSelection(selectedTags)},[selectedTags]);const columns=[{field:"name",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.management.table.columns.name",{defaultMessage:"Name"}),sortable:tag=>tag.name,"data-test-subj":"tagsTableRowName",render:(name,tag)=>external_kbnSharedDeps_React_default.a.createElement(components.a,{tag:tag})},{field:"description",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.management.table.columns.description",{defaultMessage:"Description"}),sortable:!0,"data-test-subj":"tagsTableRowDescription"},{field:"relationCount",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.management.table.columns.connections",{defaultMessage:"Connections"}),sortable:tag=>tag.relationCount,"data-test-subj":"tagsTableRowConnections",render:(relationCount,tag)=>{if(relationCount<1)return;const columnText=external_kbnSharedDeps_React_default.a.createElement("span",{"data-test-subj":"tagsTableRowConnectionsText"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.savedObjectsTagging.management.table.content.connectionCount",defaultMessage:"{relationCount, plural, one {1 saved object} other {# saved objects}}",values:{relationCount:relationCount}}));return capabilities.viewConnections?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{"data-test-subj":"tagsTableRowConnectionsLink",href:getTagRelationUrl(tag),onClick:e=>{var event;(event=e).metaKey||event.altKey||event.ctrlKey||event.shiftKey||event.defaultPrevented||0!==e.button||(e.preventDefault(),onShowRelations(tag))}},columnText):columnText}},...actions.length?[{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.management.table.columns.actions",{defaultMessage:"Actions"}),width:"100px",actions:actions}]:[]];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiInMemoryTable,{"data-test-subj":"tagsManagementTable",ref:tableRef,childrenBetween:actionBar,loading:loading,itemId:"id",columns:columns,items:tags,pagination:tablePagination,sorting:sorting,tableCaption:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.management.table.columns.caption",{defaultMessage:"Tags"}),rowHeader:"name",selection:allowSelection?{initialSelected:selectedTags,onSelectionChange:onSelectionChange}:void 0,search:{defaultQuery:initialQuery,onChange:({query:query})=>{onQueryChange(query||void 0)},box:{"data-test-subj":"tagsManagementSearchBar",incremental:!0,schema:{fields:{name:{type:"string"},description:{type:"string"}}}}},rowProps:item=>({"data-test-subj":"tagsTableRow"})})};__webpack_require__(32);const ActionBar=({actions:actions,onActionSelected:onActionSelected,selectedCount:selectedCount,totalCount:totalCount})=>{const[isPopoverOpened,setPopOverOpened]=Object(external_kbnSharedDeps_React_.useState)(!1),closePopover=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setPopOverOpened(!1)},[setPopOverOpened]),togglePopover=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setPopOverOpened(opened=>!opened)},[setPopOverOpened]),contextMenuPanels=Object(external_kbnSharedDeps_React_.useMemo)(()=>[{id:0,items:actions.map(action=>((action,onActionSelected,closePopover)=>({name:action.label,icon:action.icon,onClick:()=>{closePopover(),onActionSelected(action)},"data-test-subj":"actionBar-button-"+action.id}))(action,onActionSelected,closePopover))}],[actions,onActionSelected,closePopover]);return external_kbnSharedDeps_React_default.a.createElement("div",{className:"tagMgt__actionBar"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"flexStart",alignItems:"center",gutterSize:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.savedObjectsTagging.management.actionBar.totalTagsLabel",defaultMessage:"{count, plural, one {1 tag} other {# tags}}",values:{count:totalCount}}))),selectedCount>0&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement("div",{className:"tagMgt__actionBarDivider"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{isOpen:isPopoverOpened,closePopover:closePopover,panelPaddingSize:"none",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:togglePopover,"data-test-subj":"actionBar-contextMenuButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"xpack.savedObjectsTagging.management.actionBar.selectedTagsLabel",defaultMessage:"{count, plural, one {1 selected tag} other {# selected tags}}",values:{count:selectedCount}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{className:"tagMgt__actionBarIcon",type:"arrowDown",size:"s"})))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiContextMenu,{initialPanelId:0,panels:contextMenuPanels,"data-test-subj":"actionBar-contextMenu"}))))))};var external_kbnSharedDeps_RxjsOperators_=__webpack_require__(16),public_=__webpack_require__(14);const LoadingIndicator=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDelayRender,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingSpinner,null)),LazyAssignFlyout=external_kbnSharedDeps_React_default.a.lazy(()=>__webpack_require__.e(2).then(__webpack_require__.bind(null,55)).then(({AssignFlyout:AssignFlyout})=>({default:AssignFlyout}))),getAssignFlyoutOpener=({overlays:overlays,notifications:notifications,tagCache:tagCache,assignmentService:assignmentService,assignableTypes:assignableTypes})=>async({tagIds:tagIds})=>{const flyout=overlays.openFlyout(Object(public_.toMountPoint)(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Suspense,{fallback:external_kbnSharedDeps_React_default.a.createElement(LoadingIndicator,null)},external_kbnSharedDeps_React_default.a.createElement(LazyAssignFlyout,{tagIds:tagIds,tagCache:tagCache,notifications:notifications,allowedTypes:assignableTypes,assignmentService:assignmentService,onClose:()=>flyout.close()}))),{size:"m",maxWidth:600});return flyout};__webpack_require__(31);const getTableActions=({core:{notifications:notifications,overlays:overlays},capabilities:capabilities,tagClient:tagClient,tagCache:tagCache,assignmentService:assignmentService,setLoading:setLoading,assignableTypes:assignableTypes,fetchTags:fetchTags,canceled$:canceled$})=>{const actions=[];return capabilities.edit&&actions.push((({notifications:notifications,overlays:overlays,tagClient:tagClient,fetchTags:fetchTags})=>{const editModalOpener=Object(edition_modal.b)({overlays:overlays,tagClient:tagClient});return{id:"edit",name:({name:name})=>external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.management.table.actions.edit.title",{defaultMessage:"Edit {name} tag",values:{name:name}}),isPrimary:!0,description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.management.table.actions.edit.description",{defaultMessage:"Edit this tag"}),type:"icon",icon:"pencil",onClick:tag=>{editModalOpener({tagId:tag.id,onUpdate:updatedTag=>{fetchTags(),notifications.toasts.addSuccess({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.notifications.editTagSuccessTitle",{defaultMessage:'Saved changes to "{name}" tag',values:{name:updatedTag.name}})})}})},"data-test-subj":"tagsTableAction-edit"}})({notifications:notifications,overlays:overlays,tagClient:tagClient,fetchTags:fetchTags})),capabilities.assign&&assignableTypes.length>0&&actions.push((({notifications:notifications,overlays:overlays,assignableTypes:assignableTypes,assignmentService:assignmentService,tagCache:tagCache,fetchTags:fetchTags,canceled$:canceled$})=>{const openFlyout=getAssignFlyoutOpener({overlays:overlays,notifications:notifications,tagCache:tagCache,assignmentService:assignmentService,assignableTypes:assignableTypes});return{id:"assign",name:({name:name})=>external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.management.table.actions.assign.title",{defaultMessage:"Manage {name} assignments",values:{name:name}}),description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.management.table.actions.assign.description",{defaultMessage:"Manage assignments"}),type:"icon",icon:"tag",onClick:async tag=>{const flyout=await openFlyout({tagIds:[tag.id]});canceled$.pipe(Object(external_kbnSharedDeps_RxjsOperators_.takeUntil)(Object(external_kbnSharedDeps_Rxjs_.from)(flyout.onClose))).subscribe(()=>{flyout.close()}),await flyout.onClose,await fetchTags()},"data-test-subj":"tagsTableAction-assign"}})({tagCache:tagCache,assignmentService:assignmentService,assignableTypes:assignableTypes,fetchTags:fetchTags,notifications:notifications,overlays:overlays,canceled$:canceled$})),capabilities.delete&&actions.push((({notifications:notifications,overlays:overlays,tagClient:tagClient,fetchTags:fetchTags})=>({id:"delete",name:({name:name})=>external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.management.table.actions.delete.title",{defaultMessage:"Delete {name} tag",values:{name:name}}),description:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.management.table.actions.delete.description",{defaultMessage:"Delete this tag"}),type:"icon",icon:"trash",onClick:async tag=>{await overlays.openConfirm(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.modals.confirmDelete.text",{defaultMessage:"By deleting this tag, you will no longer be able to assign it to saved objects. This tag will be removed from any saved objects that currently use it."}),{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.modals.confirmDelete.title",{defaultMessage:'Delete "{name}" tag',values:{name:tag.name}}),confirmButtonText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.modals.confirmDelete.confirmButtonText",{defaultMessage:"Delete tag"}),buttonColor:"danger",maxWidth:560})&&(await tagClient.delete(tag.id),notifications.toasts.addSuccess({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.notifications.deleteTagSuccessTitle",{defaultMessage:'Deleted "{name}" tag',values:{name:tag.name}})}),await fetchTags())},"data-test-subj":"tagsTableAction-delete"}))({overlays:overlays,notifications:notifications,tagClient:tagClient,fetchTags:fetchTags})),actions},getBulkActions=({core:{notifications:notifications,overlays:overlays},capabilities:capabilities,tagClient:tagClient,tagCache:tagCache,assignmentService:assignmentService,clearSelection:clearSelection,setLoading:setLoading,assignableTypes:assignableTypes})=>{const actions=[];return capabilities.assign&&assignableTypes.length>0&&actions.push((({overlays:overlays,notifications:notifications,tagCache:tagCache,assignmentService:assignmentService,setLoading:setLoading,assignableTypes:assignableTypes})=>{const openFlyout=getAssignFlyoutOpener({overlays:overlays,notifications:notifications,tagCache:tagCache,assignmentService:assignmentService,assignableTypes:assignableTypes});return{id:"assign",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.management.actions.bulkAssign.label",{defaultMessage:"Manage tag assignments"}),icon:"tag",refreshAfterExecute:!0,execute:async(tagIds,{canceled$:canceled$})=>{const flyout=await openFlyout({tagIds:tagIds});return canceled$.pipe(Object(external_kbnSharedDeps_RxjsOperators_.takeUntil)(Object(external_kbnSharedDeps_Rxjs_.from)(flyout.onClose))).subscribe(()=>{flyout.close()}),flyout.onClose}}})({notifications:notifications,overlays:overlays,tagCache:tagCache,assignmentService:assignmentService,assignableTypes:assignableTypes,setLoading:setLoading})),capabilities.delete&&actions.push((({overlays:overlays,notifications:notifications,tagClient:tagClient,setLoading:setLoading})=>({id:"delete",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.management.actions.bulkDelete.label",{defaultMessage:"Delete"}),"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.management.actions.bulkDelete.ariaLabel",{defaultMessage:"Delete selected tags"}),icon:"trash",refreshAfterExecute:!0,execute:async tagIds=>{await overlays.openConfirm(external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.management.actions.bulkDelete.confirm.text",{defaultMessage:"By deleting {count, plural, one {this tag} other {these tags}}, you will no longer be able to assign {count, plural, one {it} other {them}} to saved objects. {count, plural, one {This tag} other {These tags}} will be removed from any saved objects that currently use {count, plural, one {it} other {them}}.",values:{count:tagIds.length}}),{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.management.actions.bulkDelete.confirm.title",{defaultMessage:"Delete {count, plural, one {1 tag} other {# tags}}",values:{count:tagIds.length}}),confirmButtonText:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.management.actions.bulkDelete.confirm.confirmButtonText",{defaultMessage:"Delete {count, plural, one {tag} other {tags}}",values:{count:tagIds.length}}),buttonColor:"danger",maxWidth:560})&&(setLoading(!0),await tagClient.bulkDelete(tagIds),setLoading(!1),notifications.toasts.addSuccess({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.management.actions.bulkDelete.notification.successTitle",{defaultMessage:"Deleted {count, plural, one {1 tag} other {# tags}}",values:{count:tagIds.length}})}))}}))({notifications:notifications,overlays:overlays,tagClient:tagClient,setLoading:setLoading})),actions.length>0&&actions.push((({clearSelection:clearSelection})=>({id:"clear_selection",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.management.actions.clearSelection.label",{defaultMessage:"Clear selection"}),icon:"cross",refreshAfterExecute:!0,execute:async()=>{clearSelection()}}))({clearSelection:clearSelection})),actions},TagManagementPage=({setBreadcrumbs:setBreadcrumbs,core:core,tagClient:tagClient,tagCache:tagCache,assignmentService:assignmentService,capabilities:capabilities,assignableTypes:assignableTypes})=>{const{overlays:overlays,notifications:notifications,application:application,http:http}=core,[loading,setLoading]=Object(external_kbnSharedDeps_React_.useState)(!1),[allTags,setAllTags]=Object(external_kbnSharedDeps_React_.useState)([]),[selectedTags,setSelectedTags]=Object(external_kbnSharedDeps_React_.useState)([]),[query,setQuery]=Object(external_kbnSharedDeps_React_.useState)(),filteredTags=Object(external_kbnSharedDeps_React_.useMemo)(()=>query?external_kbnSharedDeps_ElasticEui_.Query.execute(query,allTags):allTags,[allTags,query]),unmount$=Object(external_kbnSharedDeps_React_.useMemo)(()=>new external_kbnSharedDeps_Rxjs_.Subject,[]);Object(external_kbnSharedDeps_React_.useEffect)(()=>()=>{unmount$.next()},[unmount$]);const fetchTags=Object(external_kbnSharedDeps_React_.useCallback)(async()=>{setLoading(!0);const{tags:tags}=await tagClient.find({page:1,perPage:1e4});setAllTags(tags),setLoading(!1)},[tagClient]);useMount_default()(()=>{fetchTags()});const createModalOpener=Object(external_kbnSharedDeps_React_.useMemo)(()=>Object(edition_modal.a)({overlays:overlays,tagClient:tagClient}),[overlays,tagClient]),tableActions=Object(external_kbnSharedDeps_React_.useMemo)(()=>getTableActions({core:core,capabilities:capabilities,tagClient:tagClient,tagCache:tagCache,assignmentService:assignmentService,setLoading:setLoading,assignableTypes:assignableTypes,fetchTags:fetchTags,canceled$:unmount$}),[core,capabilities,tagClient,tagCache,assignmentService,setLoading,assignableTypes,fetchTags,unmount$]),bulkActions=Object(external_kbnSharedDeps_React_.useMemo)(()=>getBulkActions({core:core,capabilities:capabilities,tagClient:tagClient,tagCache:tagCache,assignmentService:assignmentService,setLoading:setLoading,assignableTypes:assignableTypes,clearSelection:()=>setSelectedTags([])}),[core,capabilities,tagClient,tagCache,assignmentService,assignableTypes]);Object(external_kbnSharedDeps_React_.useEffect)(()=>{setBreadcrumbs([{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.management.breadcrumb.index",{defaultMessage:"Tags"}),href:"/"}])},[setBreadcrumbs]);const openCreateModal=Object(external_kbnSharedDeps_React_.useCallback)(()=>{createModalOpener({onCreate:createdTag=>{fetchTags(),notifications.toasts.addSuccess({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.notifications.createTagSuccessTitle",{defaultMessage:'Created "{name}" tag',values:{name:createdTag.name}})})}})},[notifications,createModalOpener,fetchTags]),getTagRelationUrl=Object(external_kbnSharedDeps_React_.useCallback)(tag=>((tag,basePath)=>{const query=encodeURIComponent(`tag:("${tag.name}")`);return basePath.prepend("/app/management/kibana/objects?initialQuery="+query)})(tag,http.basePath),[http]),showTagRelations=Object(external_kbnSharedDeps_React_.useCallback)(tag=>{application.navigateToUrl(getTagRelationUrl(tag))},[application,getTagRelationUrl]),executeBulkAction=Object(external_kbnSharedDeps_React_.useCallback)(async action=>{try{await action.execute(selectedTags.map(({id:id})=>id),{canceled$:unmount$})}catch(e){notifications.toasts.addError(e,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("xpack.savedObjectsTagging.notifications.bulkActionError",{defaultMessage:"An error occurred"})})}finally{setLoading(!1)}action.refreshAfterExecute&&await fetchTags()},[selectedTags,fetchTags,notifications,unmount$]),actionBar=Object(external_kbnSharedDeps_React_.useMemo)(()=>external_kbnSharedDeps_React_default.a.createElement(ActionBar,{actions:bulkActions,totalCount:filteredTags.length,selectedCount:selectedTags.length,onActionSelected:executeBulkAction}),[selectedTags,filteredTags,bulkActions,executeBulkAction]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPageContent,{horizontalPosition:"center"},external_kbnSharedDeps_React_default.a.createElement(Header,{canCreate:capabilities.create,onCreate:openCreateModal}),external_kbnSharedDeps_React_default.a.createElement(TagTable,{loading:loading,tags:filteredTags,capabilities:capabilities,actionBar:actionBar,actions:tableActions,initialQuery:query,onQueryChange:newQuery=>{setQuery(newQuery),setSelectedTags([])},allowSelection:bulkActions.length>0,selectedTags:selectedTags,onSelectionChange:tags=>{setSelectedTags(tags)},getTagRelationUrl:getTagRelationUrl,onShowRelations:tag=>{showTagRelations(tag)}}))},RedirectToHomeIfUnauthorized=({applications:applications,children:children})=>{var _applications$capabil,_applications$capabil2,_applications$capabil3,_applications$capabil4;return null!==(_applications$capabil=null===(_applications$capabil2=applications.capabilities)||void 0===_applications$capabil2||null===(_applications$capabil3=_applications$capabil2.management)||void 0===_applications$capabil3||null===(_applications$capabil4=_applications$capabil3.kibana)||void 0===_applications$capabil4?void 0:_applications$capabil4.tags)&&void 0!==_applications$capabil&&_applications$capabil?children:(applications.navigateToApp("home"),null)},mountSection=async({tagClient:tagClient,tagCache:tagCache,assignmentService:assignmentService,core:core,mountParams:mountParams})=>{const[coreStart]=await core.getStartServices(),{element:element,setBreadcrumbs:setBreadcrumbs}=mountParams,capabilities=Object(common.b)(coreStart.application.capabilities),assignableTypes=await assignmentService.getAssignableTypes();return external_kbnSharedDeps_ReactDom_default.a.render(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.I18nProvider,null,external_kbnSharedDeps_React_default.a.createElement(RedirectToHomeIfUnauthorized,{applications:coreStart.application},external_kbnSharedDeps_React_default.a.createElement(TagManagementPage,{setBreadcrumbs:setBreadcrumbs,core:coreStart,tagClient:tagClient,tagCache:tagCache,assignmentService:assignmentService,capabilities:capabilities,assignableTypes:assignableTypes}))),element),()=>{external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(element)}}}}]);