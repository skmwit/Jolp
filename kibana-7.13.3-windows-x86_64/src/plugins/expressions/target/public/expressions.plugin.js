!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=73)}([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4);for(var __WEBPACK_IMPORT_KEY__ in _types__WEBPACK_IMPORTED_MODULE_0__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _types__WEBPACK_IMPORTED_MODULE_0__[key]}))}(__WEBPACK_IMPORT_KEY__);var _ast__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(17);for(var __WEBPACK_IMPORT_KEY__ in _ast__WEBPACK_IMPORTED_MODULE_1__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _ast__WEBPACK_IMPORTED_MODULE_1__[key]}))}(__WEBPACK_IMPORT_KEY__);var _fonts__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(19);__webpack_require__.d(__webpack_exports__,"americanTypewriter",(function(){return _fonts__WEBPACK_IMPORTED_MODULE_2__.americanTypewriter})),__webpack_require__.d(__webpack_exports__,"arial",(function(){return _fonts__WEBPACK_IMPORTED_MODULE_2__.arial})),__webpack_require__.d(__webpack_exports__,"baskerville",(function(){return _fonts__WEBPACK_IMPORTED_MODULE_2__.baskerville})),__webpack_require__.d(__webpack_exports__,"bookAntiqua",(function(){return _fonts__WEBPACK_IMPORTED_MODULE_2__.bookAntiqua})),__webpack_require__.d(__webpack_exports__,"brushScript",(function(){return _fonts__WEBPACK_IMPORTED_MODULE_2__.brushScript})),__webpack_require__.d(__webpack_exports__,"chalkboard",(function(){return _fonts__WEBPACK_IMPORTED_MODULE_2__.chalkboard})),__webpack_require__.d(__webpack_exports__,"didot",(function(){return _fonts__WEBPACK_IMPORTED_MODULE_2__.didot})),__webpack_require__.d(__webpack_exports__,"futura",(function(){return _fonts__WEBPACK_IMPORTED_MODULE_2__.futura})),__webpack_require__.d(__webpack_exports__,"gillSans",(function(){return _fonts__WEBPACK_IMPORTED_MODULE_2__.gillSans})),__webpack_require__.d(__webpack_exports__,"helveticaNeue",(function(){return _fonts__WEBPACK_IMPORTED_MODULE_2__.helveticaNeue})),__webpack_require__.d(__webpack_exports__,"hoeflerText",(function(){return _fonts__WEBPACK_IMPORTED_MODULE_2__.hoeflerText})),__webpack_require__.d(__webpack_exports__,"lucidaGrande",(function(){return _fonts__WEBPACK_IMPORTED_MODULE_2__.lucidaGrande})),__webpack_require__.d(__webpack_exports__,"myriad",(function(){return _fonts__WEBPACK_IMPORTED_MODULE_2__.myriad})),__webpack_require__.d(__webpack_exports__,"openSans",(function(){return _fonts__WEBPACK_IMPORTED_MODULE_2__.openSans})),__webpack_require__.d(__webpack_exports__,"optima",(function(){return _fonts__WEBPACK_IMPORTED_MODULE_2__.optima})),__webpack_require__.d(__webpack_exports__,"palatino",(function(){return _fonts__WEBPACK_IMPORTED_MODULE_2__.palatino})),__webpack_require__.d(__webpack_exports__,"fonts",(function(){return _fonts__WEBPACK_IMPORTED_MODULE_2__.fonts}));var _expression_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5);for(var __WEBPACK_IMPORT_KEY__ in _expression_types__WEBPACK_IMPORTED_MODULE_3__)["default","americanTypewriter","arial","baskerville","bookAntiqua","brushScript","chalkboard","didot","futura","gillSans","helveticaNeue","hoeflerText","lucidaGrande","myriad","openSans","optima","palatino","fonts"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _expression_types__WEBPACK_IMPORTED_MODULE_3__[key]}))}(__WEBPACK_IMPORT_KEY__);var _expression_functions__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(26);for(var __WEBPACK_IMPORT_KEY__ in _expression_functions__WEBPACK_IMPORTED_MODULE_4__)["default","americanTypewriter","arial","baskerville","bookAntiqua","brushScript","chalkboard","didot","futura","gillSans","helveticaNeue","hoeflerText","lucidaGrande","myriad","openSans","optima","palatino","fonts"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _expression_functions__WEBPACK_IMPORTED_MODULE_4__[key]}))}(__WEBPACK_IMPORT_KEY__);var _expression_renderers__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(28);for(var __WEBPACK_IMPORT_KEY__ in _expression_renderers__WEBPACK_IMPORTED_MODULE_5__)["default","americanTypewriter","arial","baskerville","bookAntiqua","brushScript","chalkboard","didot","futura","gillSans","helveticaNeue","hoeflerText","lucidaGrande","myriad","openSans","optima","palatino","fonts"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _expression_renderers__WEBPACK_IMPORTED_MODULE_5__[key]}))}(__WEBPACK_IMPORT_KEY__);var _executor__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(16);__webpack_require__.d(__webpack_exports__,"defaultState",(function(){return _executor__WEBPACK_IMPORTED_MODULE_6__.e})),__webpack_require__.d(__webpack_exports__,"pureTransitions",(function(){return _executor__WEBPACK_IMPORTED_MODULE_6__.g})),__webpack_require__.d(__webpack_exports__,"pureSelectors",(function(){return _executor__WEBPACK_IMPORTED_MODULE_6__.f})),__webpack_require__.d(__webpack_exports__,"createExecutorContainer",(function(){return _executor__WEBPACK_IMPORTED_MODULE_6__.d})),__webpack_require__.d(__webpack_exports__,"TypesRegistry",(function(){return _executor__WEBPACK_IMPORTED_MODULE_6__.c})),__webpack_require__.d(__webpack_exports__,"FunctionsRegistry",(function(){return _executor__WEBPACK_IMPORTED_MODULE_6__.b})),__webpack_require__.d(__webpack_exports__,"Executor",(function(){return _executor__WEBPACK_IMPORTED_MODULE_6__.a}));var _execution__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(66);for(var __WEBPACK_IMPORT_KEY__ in _execution__WEBPACK_IMPORTED_MODULE_7__)["default","americanTypewriter","arial","baskerville","bookAntiqua","brushScript","chalkboard","didot","futura","gillSans","helveticaNeue","hoeflerText","lucidaGrande","myriad","openSans","optima","palatino","fonts","defaultState","pureTransitions","pureSelectors","createExecutorContainer","TypesRegistry","FunctionsRegistry","Executor"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _execution__WEBPACK_IMPORTED_MODULE_7__[key]}))}(__WEBPACK_IMPORT_KEY__);var _service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(68);__webpack_require__.d(__webpack_exports__,"ExpressionsService",(function(){return _service__WEBPACK_IMPORTED_MODULE_8__.a}));var _util__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(8);__webpack_require__.d(__webpack_exports__,"createError",(function(){return _util__WEBPACK_IMPORTED_MODULE_9__.c})),__webpack_require__.d(__webpack_exports__,"getByAlias",(function(){return _util__WEBPACK_IMPORTED_MODULE_9__.e})),__webpack_require__.d(__webpack_exports__,"TablesAdapter",(function(){return _util__WEBPACK_IMPORTED_MODULE_9__.b})),__webpack_require__.d(__webpack_exports__,"ExpressionsInspectorAdapter",(function(){return _util__WEBPACK_IMPORTED_MODULE_9__.a})),__webpack_require__.d(__webpack_exports__,"createMockContext",(function(){return _util__WEBPACK_IMPORTED_MODULE_9__.d}))},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,exports){module.exports=__kbnSharedDeps__.Lodash},function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(13);__webpack_require__.d(__webpack_exports__,"TypeToString",(function(){return _common__WEBPACK_IMPORTED_MODULE_0__.TypeToString})),__webpack_require__.d(__webpack_exports__,"KnownTypeToString",(function(){return _common__WEBPACK_IMPORTED_MODULE_0__.KnownTypeToString})),__webpack_require__.d(__webpack_exports__,"TypeString",(function(){return _common__WEBPACK_IMPORTED_MODULE_0__.TypeString})),__webpack_require__.d(__webpack_exports__,"UnmappedTypeStrings",(function(){return _common__WEBPACK_IMPORTED_MODULE_0__.UnmappedTypeStrings})),__webpack_require__.d(__webpack_exports__,"SerializedFieldFormat",(function(){return _common__WEBPACK_IMPORTED_MODULE_0__.SerializedFieldFormat}));var _style__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(44);__webpack_require__.d(__webpack_exports__,"BackgroundRepeat",(function(){return _style__WEBPACK_IMPORTED_MODULE_1__.a})),__webpack_require__.d(__webpack_exports__,"BackgroundSize",(function(){return _style__WEBPACK_IMPORTED_MODULE_1__.b})),__webpack_require__.d(__webpack_exports__,"FontStyle",(function(){return _style__WEBPACK_IMPORTED_MODULE_1__.c})),__webpack_require__.d(__webpack_exports__,"FontWeight",(function(){return _style__WEBPACK_IMPORTED_MODULE_1__.d})),__webpack_require__.d(__webpack_exports__,"Overflow",(function(){return _style__WEBPACK_IMPORTED_MODULE_1__.e})),__webpack_require__.d(__webpack_exports__,"TextAlignment",(function(){return _style__WEBPACK_IMPORTED_MODULE_1__.f})),__webpack_require__.d(__webpack_exports__,"TextDecoration",(function(){return _style__WEBPACK_IMPORTED_MODULE_1__.g}));var _registry__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(45);for(var __WEBPACK_IMPORT_KEY__ in _registry__WEBPACK_IMPORTED_MODULE_2__)["default","TypeToString","KnownTypeToString","TypeString","UnmappedTypeStrings","SerializedFieldFormat","BackgroundRepeat","BackgroundSize","FontStyle","FontWeight","Overflow","TextAlignment","TextDecoration"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _registry__WEBPACK_IMPORTED_MODULE_2__[key]}))}(__WEBPACK_IMPORT_KEY__)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(51);for(var __WEBPACK_IMPORT_KEY__ in _types__WEBPACK_IMPORTED_MODULE_0__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _types__WEBPACK_IMPORTED_MODULE_0__[key]}))}(__WEBPACK_IMPORT_KEY__);var _get_type__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7);__webpack_require__.d(__webpack_exports__,"getType",(function(){return _get_type__WEBPACK_IMPORTED_MODULE_1__.a}));var _serialize_provider__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(52);__webpack_require__.d(__webpack_exports__,"serializeProvider",(function(){return _serialize_provider__WEBPACK_IMPORTED_MODULE_2__.a}));var _expression_type__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(25);__webpack_require__.d(__webpack_exports__,"ExpressionType",(function(){return _expression_type__WEBPACK_IMPORTED_MODULE_3__.a}));var _specs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(35);__webpack_require__.d(__webpack_exports__,"typeSpecs",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.q})),__webpack_require__.d(__webpack_exports__,"boolean",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.a})),__webpack_require__.d(__webpack_exports__,"isDatatable",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.f})),__webpack_require__.d(__webpack_exports__,"datatable",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.b})),__webpack_require__.d(__webpack_exports__,"isExpressionValueError",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.g})),__webpack_require__.d(__webpack_exports__,"error",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.c})),__webpack_require__.d(__webpack_exports__,"filter",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.d})),__webpack_require__.d(__webpack_exports__,"image",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.e})),__webpack_require__.d(__webpack_exports__,"nullType",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.h})),__webpack_require__.d(__webpack_exports__,"num",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.i})),__webpack_require__.d(__webpack_exports__,"number",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.j})),__webpack_require__.d(__webpack_exports__,"pointseries",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.k})),__webpack_require__.d(__webpack_exports__,"range",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.l})),__webpack_require__.d(__webpack_exports__,"render",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.m})),__webpack_require__.d(__webpack_exports__,"shape",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.n})),__webpack_require__.d(__webpack_exports__,"string",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.o})),__webpack_require__.d(__webpack_exports__,"style",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.p}));var _unbox_expression_value__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(53);__webpack_require__.d(__webpack_exports__,"unboxExpressionValue",(function(){return _unbox_expression_value__WEBPACK_IMPORTED_MODULE_5__.a}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getBucketIdentifier})),__webpack_require__.d(__webpack_exports__,"a",(function(){return buildResultColumns}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);function getBucketIdentifier(row,groupColumns){return(groupColumns||[]).map(groupColumnId=>null==row[groupColumnId]?"":String(row[groupColumnId])).join("|")}function buildResultColumns(input,outputColumnId,inputColumnId,outputColumnName,options={allowColumnOverwrite:!1}){if(!options.allowColumnOverwrite&&input.columns.some(column=>column.id===outputColumnId))throw new Error(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("expressions.functions.seriesCalculations.columnConflictMessage",{defaultMessage:"Specified outputColumnId {columnId} already exists. Please pick another column id.",values:{columnId:outputColumnId}}));const inputColumnDefinition=input.columns.find(column=>column.id===inputColumnId);if(!inputColumnDefinition)return;const outputColumnDefinition={...inputColumnDefinition,id:outputColumnId,name:outputColumnName||outputColumnId},resultColumns=[...input.columns];return resultColumns.splice(resultColumns.indexOf(inputColumnDefinition)+1,0,outputColumnDefinition),resultColumns}},function(module,__webpack_exports__,__webpack_require__){"use strict";function getType(node){if(null==node)return"null";if("object"==typeof node){if(!node.type)throw new Error("Objects must have a type property");return node.type}return typeof node}__webpack_require__.d(__webpack_exports__,"a",(function(){return getType}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return createError})),__webpack_require__.d(__webpack_exports__,"e",(function(){return get_by_alias.a})),__webpack_require__.d(__webpack_exports__,"b",(function(){return tables_adapter.a})),__webpack_require__.d(__webpack_exports__,"a",(function(){return expressions_inspector_adapter.a})),__webpack_require__.d(__webpack_exports__,"d",(function(){return createMockContext}));const createError=err=>({type:"error",error:{stack:void 0,message:"string"==typeof err?err:String(err.message),name:"object"==typeof err&&err.name||"Error",original:err instanceof Error?err:"object"==typeof err&&"original"in err&&err.original instanceof Error?err.original:void 0}});var get_by_alias=__webpack_require__(20),tables_adapter=__webpack_require__(32),expressions_inspector_adapter=__webpack_require__(33);const createMockContext=()=>({getSearchContext:()=>({}),getSearchSessionId:()=>{},types:{},variables:{},abortSignal:{},inspectorAdapters:{}})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return format}));const{toExpression:toExpression}=__webpack_require__(46);function format(ast,type){return toExpression(ast,type)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return isExpressionAstBuilder})),__webpack_require__.d(__webpack_exports__,"b",(function(){return isExpressionAst})),__webpack_require__.d(__webpack_exports__,"a",(function(){return buildExpression}));var _build_function__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(24),_format__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),_parse__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(14);function isExpressionAstBuilder(val){return"expression_builder"===(null==val?void 0:val.type)}function isExpressionAst(val){return"expression"===(null==val?void 0:val.type)}const generateExpressionAst=fns=>({type:"expression",chain:fns.map(fn=>fn.toAst())});function buildExpression(initialState){const chainToFunctionBuilder=chain=>chain.map(fn=>Object(_build_function__WEBPACK_IMPORTED_MODULE_0__.a)(fn.function,fn.arguments)),fns=initialState?"string"==typeof(state=initialState)?chainToFunctionBuilder(Object(_parse__WEBPACK_IMPORTED_MODULE_2__.a)(state,"expression").chain):Array.isArray(state)?state:chainToFunctionBuilder(state.chain):[];var state;return{type:"expression_builder",functions:fns,findFunction:fnName=>fns.reduce((found,currFn)=>(Object.values(currFn.arguments).forEach(values=>{values.forEach(value=>{isExpressionAstBuilder(value)&&(found=found.concat(value.findFunction(fnName)))})}),currFn.name===fnName&&found.push(currFn),found),[]),toAst(){if(fns.length<1)throw new Error("Functions have not been added to the expression builder");return generateExpressionAst(fns)},toString(){if(fns.length<1)throw new Error("Functions have not been added to the expression builder");return Object(_format__WEBPACK_IMPORTED_MODULE_1__.a)(generateExpressionAst(fns),"expression")}}}},function(module,exports){module.exports=__kbnSharedDeps__.RxjsOperators},function(module,exports){module.exports=__kbnSharedDeps__.Rxjs},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return parse}));const{parse:parseRaw}=__webpack_require__(46);function parse(expression,startRule){try{return parseRaw(String(expression),{startRule:startRule})}catch(e){throw new Error("Unable to parse expression: "+e.message)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return isExpressionValueError})),__webpack_require__.d(__webpack_exports__,"a",(function(){return error}));var _get_type__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);const isExpressionValueError=value=>"error"===Object(_get_type__WEBPACK_IMPORTED_MODULE_0__.a)(value),error={name:"error",to:{render:input=>({type:"render",as:"error",value:{error:input.error,info:input.info}})}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return defaultState})),__webpack_require__.d(__webpack_exports__,"g",(function(){return pureTransitions})),__webpack_require__.d(__webpack_exports__,"f",(function(){return pureSelectors})),__webpack_require__.d(__webpack_exports__,"d",(function(){return createExecutorContainer})),__webpack_require__.d(__webpack_exports__,"c",(function(){return TypesRegistry})),__webpack_require__.d(__webpack_exports__,"b",(function(){return FunctionsRegistry})),__webpack_require__.d(__webpack_exports__,"a",(function(){return executor_Executor}));var state_containers_=__webpack_require__(37);const defaultState={functions:{},types:{},context:{}},pureTransitions={addFunction:state=>fn=>({...state,functions:{...state.functions,[fn.name]:fn}}),addType:state=>type=>({...state,types:{...state.types,[type.name]:type}}),extendContext:state=>extraContext=>({...state,context:{...state.context,...extraContext}})},pureSelectors={getFunction:state=>id=>state.functions[id]||null,getType:state=>id=>state.types[id]||null,getContext:({context:context})=>()=>context},createExecutorContainer=(state=defaultState)=>Object(state_containers_.createStateContainer)(state,pureTransitions,pureSelectors);var external_kbnSharedDeps_Lodash_=__webpack_require__(2),expression_functions=__webpack_require__(26),execution_execution=__webpack_require__(30),expression_type=__webpack_require__(25),specs=__webpack_require__(35),expression_functions_specs=__webpack_require__(36),util=__webpack_require__(8);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class TypesRegistry{constructor(executor){this.executor=executor}register(typeDefinition){this.executor.registerType(typeDefinition)}get(id){return this.executor.state.selectors.getType(id)}toJS(){return this.executor.getTypes()}toArray(){return Object.values(this.toJS())}}class FunctionsRegistry{constructor(executor){this.executor=executor}register(functionDefinition){this.executor.registerFunction(functionDefinition)}get(id){return this.executor.state.selectors.getFunction(id)}toJS(){return this.executor.getFunctions()}toArray(){return Object.values(this.toJS())}}class executor_Executor{static createWithDefaults(state){const executor=new executor_Executor(state);for(const type of specs.q)executor.registerType(type);for(const func of expression_functions_specs.h)executor.registerFunction(func);return executor}constructor(state){_defineProperty(this,"state",void 0),_defineProperty(this,"functions",void 0),_defineProperty(this,"types",void 0),this.state=createExecutorContainer(state),this.functions=new FunctionsRegistry(this),this.types=new TypesRegistry(this)}registerFunction(functionDefinition){const fn=new expression_functions.ExpressionFunction("object"==typeof functionDefinition?functionDefinition:functionDefinition());this.state.transitions.addFunction(fn)}getFunction(name){return this.state.get().functions[name]}getFunctions(){return{...this.state.get().functions}}registerType(typeDefinition){const type=new expression_type.a("object"==typeof typeDefinition?typeDefinition:typeDefinition());this.state.transitions.addType(type)}getType(name){return this.state.get().types[name]}getTypes(){return{...this.state.get().types}}extendContext(extraContext){this.state.transitions.extendContext(extraContext)}get context(){return this.state.selectors.getContext()}async run(ast,input,params={}){const execution=this.createExecution(ast,params);return execution.start(input),await execution.result}createExecution(ast,params={}){const executionParams={executor:this,params:{...params,extraContext:this.context}};"string"==typeof ast?executionParams.expression=ast:executionParams.ast=ast;return new execution_execution.a(executionParams)}walkAst(ast,action){for(const link of ast.chain){const{function:fnName,arguments:fnArgs}=link,fn=Object(util.e)(this.state.get().functions,fnName);fn&&(link.arguments=Object(external_kbnSharedDeps_Lodash_.mapValues)(fnArgs,(asts,argName)=>asts.map(arg=>"object"==typeof arg?this.walkAst(arg,action):arg)),action(fn,link))}return ast}inject(ast,references){let linkId=0;return this.walkAst(Object(external_kbnSharedDeps_Lodash_.cloneDeep)(ast),(fn,link)=>{link.arguments=fn.inject(link.arguments,references.filter(r=>r.name.includes(`l${linkId}_`)).map(r=>({...r,name:r.name.replace(`l${linkId}_`,"")}))),linkId++})}extract(ast){let linkId=0;const allReferences=[];return{state:this.walkAst(Object(external_kbnSharedDeps_Lodash_.cloneDeep)(ast),(fn,link)=>{const{state:state,references:references}=fn.extract(link.arguments);link.arguments=state,allReferences.push(...references.map(r=>({...r,name:`l${linkId++}_${r.name}`})))}),references:allReferences}}telemetry(ast,telemetryData){return this.walkAst(Object(external_kbnSharedDeps_Lodash_.cloneDeep)(ast),(fn,link)=>{telemetryData=fn.telemetry(link.arguments,telemetryData)}),telemetryData}migrate(ast,version){return this.walkAst(Object(external_kbnSharedDeps_Lodash_.cloneDeep)(ast),(fn,link)=>{if(!fn.migrations[version])return link;const updatedAst=fn.migrations[version](link);link.arguments=updatedAst.arguments,link.type=updatedAst.type})}fork(){const initialState=this.state.get(),fork=new executor_Executor(initialState);return this.state.state$.subscribe(({types:types,functions:functions,context:context})=>{const state=fork.state.get();fork.state.set({...state,types:{...types,...state.types},functions:{...functions,...state.functions},context:{...context,...state.context}})}),fork}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _build_expression__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10);__webpack_require__.d(__webpack_exports__,"isExpressionAstBuilder",(function(){return _build_expression__WEBPACK_IMPORTED_MODULE_0__.c})),__webpack_require__.d(__webpack_exports__,"isExpressionAst",(function(){return _build_expression__WEBPACK_IMPORTED_MODULE_0__.b})),__webpack_require__.d(__webpack_exports__,"buildExpression",(function(){return _build_expression__WEBPACK_IMPORTED_MODULE_0__.a}));var _build_function__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(24);__webpack_require__.d(__webpack_exports__,"buildExpressionFunction",(function(){return _build_function__WEBPACK_IMPORTED_MODULE_1__.a}));var _format_expression__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(48);__webpack_require__.d(__webpack_exports__,"formatExpression",(function(){return _format_expression__WEBPACK_IMPORTED_MODULE_2__.a}));var _format__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9);__webpack_require__.d(__webpack_exports__,"format",(function(){return _format__WEBPACK_IMPORTED_MODULE_3__.a}));var _parse_expression__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(49);__webpack_require__.d(__webpack_exports__,"parseExpression",(function(){return _parse_expression__WEBPACK_IMPORTED_MODULE_4__.a}));var _parse__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(14);__webpack_require__.d(__webpack_exports__,"parse",(function(){return _parse__WEBPACK_IMPORTED_MODULE_5__.a}));var _types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(50);for(var __WEBPACK_IMPORT_KEY__ in _types__WEBPACK_IMPORTED_MODULE_6__)["default","isExpressionAstBuilder","isExpressionAst","buildExpression","buildExpressionFunction","formatExpression","format","parseExpression","parse"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _types__WEBPACK_IMPORTED_MODULE_6__[key]}))}(__WEBPACK_IMPORT_KEY__)},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaUtils/common");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"americanTypewriter",(function(){return americanTypewriter})),__webpack_require__.d(__webpack_exports__,"arial",(function(){return arial})),__webpack_require__.d(__webpack_exports__,"baskerville",(function(){return baskerville})),__webpack_require__.d(__webpack_exports__,"bookAntiqua",(function(){return bookAntiqua})),__webpack_require__.d(__webpack_exports__,"brushScript",(function(){return brushScript})),__webpack_require__.d(__webpack_exports__,"chalkboard",(function(){return chalkboard})),__webpack_require__.d(__webpack_exports__,"didot",(function(){return didot})),__webpack_require__.d(__webpack_exports__,"futura",(function(){return futura})),__webpack_require__.d(__webpack_exports__,"gillSans",(function(){return gillSans})),__webpack_require__.d(__webpack_exports__,"helveticaNeue",(function(){return helveticaNeue})),__webpack_require__.d(__webpack_exports__,"hoeflerText",(function(){return hoeflerText})),__webpack_require__.d(__webpack_exports__,"lucidaGrande",(function(){return lucidaGrande})),__webpack_require__.d(__webpack_exports__,"myriad",(function(){return myriad})),__webpack_require__.d(__webpack_exports__,"openSans",(function(){return openSans})),__webpack_require__.d(__webpack_exports__,"optima",(function(){return optima})),__webpack_require__.d(__webpack_exports__,"palatino",(function(){return palatino})),__webpack_require__.d(__webpack_exports__,"fonts",(function(){return fonts}));const americanTypewriter={label:"American Typewriter",value:"'American Typewriter', 'Courier New', Courier, Monaco, mono"},arial={label:"Arial",value:"Arial, sans-serif"},baskerville={label:"Baskerville",value:"Baskerville, Georgia, Garamond, 'Times New Roman', Times, serif"},bookAntiqua={label:"Book Antiqua",value:"'Book Antiqua', Georgia, Garamond, 'Times New Roman', Times, serif"},brushScript={label:"Brush Script",value:"'Brush Script MT', 'Comic Sans', sans-serif"},chalkboard={label:"Chalkboard",value:"Chalkboard, 'Comic Sans', sans-serif"},didot={label:"Didot",value:"Didot, Georgia, Garamond, 'Times New Roman', Times, serif"},futura={label:"Futura",value:"Futura, Impact, Helvetica, Arial, sans-serif"},gillSans={label:"Gill Sans",value:"'Gill Sans', 'Lucida Grande', 'Lucida Sans Unicode', Verdana, Helvetica, Arial, sans-serif"},helveticaNeue={label:"Helvetica Neue",value:"'Helvetica Neue', Helvetica, Arial, sans-serif"},hoeflerText={label:"Hoefler Text",value:"'Hoefler Text', Garamond, Georgia, 'Times New Roman', Times, serif"},lucidaGrande={label:"Lucida Grande",value:"'Lucida Grande', 'Lucida Sans Unicode', Lucida, Verdana, Helvetica, Arial, sans-serif"},myriad={label:"Myriad",value:"Myriad, Helvetica, Arial, sans-serif"},openSans={label:"Open Sans",value:"'Open Sans', Helvetica, Arial, sans-serif"},optima={label:"Optima",value:"Optima, 'Lucida Grande', 'Lucida Sans Unicode', Verdana, Helvetica, Arial, sans-serif"},palatino={label:"Palatino",value:"Palatino, 'Book Antiqua', Georgia, Garamond, 'Times New Roman', Times, serif"},fonts=[americanTypewriter,arial,baskerville,bookAntiqua,brushScript,chalkboard,didot,futura,gillSans,helveticaNeue,hoeflerText,lucidaGrande,myriad,openSans,optima,palatino]},function(module,__webpack_exports__,__webpack_require__){"use strict";function getByAlias(node,nodeName){const lowerCaseName=nodeName.toLowerCase();return Object.values(node).find(({name:name,aliases:aliases})=>!!name&&(name.toLowerCase()===lowerCaseName||(aliases||[]).some(alias=>alias.toLowerCase()===lowerCaseName)))}__webpack_require__.d(__webpack_exports__,"a",(function(){return getByAlias}))},function(module,exports,__webpack_require__){"use strict";var memo,isOldIE=function(){return void 0===memo&&(memo=Boolean(window&&document&&document.all&&!window.atob)),memo},getTarget=function(){var memo={};return function(target){if(void 0===memo[target]){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}}(),stylesInDom=[];function getIndexByIdentifier(identifier){for(var result=-1,i=0;i<stylesInDom.length;i++)if(stylesInDom[i].identifier===identifier){result=i;break}return result}function modulesToDom(list,options){for(var idCountMap={},identifiers=[],i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],count=idCountMap[id]||0,identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier),obj={css:item[1],media:item[2],sourceMap:item[3]};-1!==index?(stylesInDom[index].references++,stylesInDom[index].updater(obj)):stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1}),identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style"),attributes=options.attributes||{};if(void 0===attributes.nonce){var nonce=__webpack_require__.nc;nonce&&(attributes.nonce=nonce)}if(Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])})),"function"==typeof options.insert)options.insert(style);else{var target=getTarget(options.insert||"head");if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");target.appendChild(style)}return style}var textStore,replaceText=(textStore=[],function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")});function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}function applyToTag(style,options,obj){var css=obj.css,media=obj.media,sourceMap=obj.sourceMap;if(media?style.setAttribute("media",media):style.removeAttribute("media"),sourceMap&&btoa&&(css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")),style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}var singleton=null,singletonCounter=0;function addStyle(obj,options){var style,update,remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else style=insertStyleElement(options),update=applyToTag.bind(null,style,options),remove=function(){!function(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style)}(style)};return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}module.exports=function(list,options){(options=options||{}).singleton||"boolean"==typeof options.singleton||(options.singleton=isOldIE());var lastIdentifiers=modulesToDom(list=list||[],options);return function(newList){if(newList=newList||[],"[object Array]"===Object.prototype.toString.call(newList)){for(var i=0;i<lastIdentifiers.length;i++){var index=getIndexByIdentifier(lastIdentifiers[i]);stylesInDom[index].references--}for(var newLastIdentifiers=modulesToDom(newList,options),_i=0;_i<lastIdentifiers.length;_i++){var _index=getIndexByIdentifier(lastIdentifiers[_i]);0===stylesInDom[_index].references&&(stylesInDom[_index].updater(),stylesInDom.splice(_index,1))}lastIdentifiers=newLastIdentifiers}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];return list.toString=function(){return this.map((function(item){var content=function(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=(sourceMap=cssMapping,base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64),"/*# ".concat(data," */")),sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}var sourceMap,base64,data;return[content].join("\n")}(item,useSourceMap);return item[2]?"@media ".concat(item[2]," {").concat(content,"}"):content})).join("")},list.i=function(modules,mediaQuery,dedupe){"string"==typeof modules&&(modules=[[null,modules,""]]);var alreadyImportedModules={};if(dedupe)for(var i=0;i<this.length;i++){var id=this[i][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);dedupe&&alreadyImportedModules[item[0]]||(mediaQuery&&(item[2]?item[2]="".concat(mediaQuery," and ").concat(item[2]):item[2]=mediaQuery),list.push(item))}},list}},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return buildExpressionFunction}));var _build_expression__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10),_format__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9);function buildExpressionFunction(fnName,initialArgs){const args=Object.entries(initialArgs).reduce((acc,[key,value])=>(Array.isArray(value)?acc[key]=value.map(v=>Object(_build_expression__WEBPACK_IMPORTED_MODULE_0__.b)(v)?Object(_build_expression__WEBPACK_IMPORTED_MODULE_0__.a)(v):v):void 0!==value?acc[key]=Object(_build_expression__WEBPACK_IMPORTED_MODULE_0__.b)(value)?[Object(_build_expression__WEBPACK_IMPORTED_MODULE_0__.a)(value)]:[value]:delete acc[key],acc),initialArgs);return{type:"expression_function_builder",name:fnName,arguments:args,addArgument(key,value){return void 0!==value&&(args.hasOwnProperty(key)||(args[key]=[]),args[key].push(value)),this},getArgument(key){if(args.hasOwnProperty(key))return args[key]},replaceArgument(key,values){if(!args.hasOwnProperty(key))throw new Error("Argument to replace does not exist on this function");return args[key]=values,this},removeArgument(key){return delete args[key],this},toAst:()=>({type:"function",function:fnName,arguments:Object.entries(args).reduce((acc,[key,values])=>(acc[key]=values.map(val=>Object(_build_expression__WEBPACK_IMPORTED_MODULE_0__.c)(val)?val.toAst():val),acc),{})}),toString(){return Object(_format__WEBPACK_IMPORTED_MODULE_1__.a)({type:"expression",chain:[this.toAst()]},"expression")}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ExpressionType}));var _get_type__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class ExpressionType{constructor(definition){this.definition=definition,_defineProperty(this,"name",void 0),_defineProperty(this,"help",void 0),_defineProperty(this,"validate",void 0),_defineProperty(this,"create",void 0),_defineProperty(this,"serialize",void 0),_defineProperty(this,"deserialize",void 0),_defineProperty(this,"getToFn",typeName=>this.definition.to?this.definition.to[typeName]||this.definition.to["*"]:void 0),_defineProperty(this,"getFromFn",typeName=>this.definition.from?this.definition.from[typeName]||this.definition.from["*"]:void 0),_defineProperty(this,"castsTo",value=>"function"==typeof this.getToFn(value)),_defineProperty(this,"castsFrom",value=>"function"==typeof this.getFromFn(value)),_defineProperty(this,"to",(value,toTypeName,types)=>{const typeName=Object(_get_type__WEBPACK_IMPORTED_MODULE_0__.a)(value);if(typeName!==this.name)throw new Error(`Can not cast object of type '${typeName}' using '${this.name}'`);if(!this.castsTo(toTypeName))throw new Error(`Can not cast '${typeName}' to '${toTypeName}'`);return this.getToFn(toTypeName)(value,types)}),_defineProperty(this,"from",(value,types)=>{const typeName=Object(_get_type__WEBPACK_IMPORTED_MODULE_0__.a)(value);if(!this.castsFrom(typeName))throw new Error(`Can not cast '${this.name}' from ${typeName}`);return this.getFromFn(typeName)(value,types)});const{name:name,help:help,deserialize:deserialize,serialize:serialize,validate:validate}=definition;this.name=name,this.help=help||"",this.validate=validate||(()=>{}),this.create=definition.create,this.serialize=serialize,this.deserialize=deserialize}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(54);for(var __WEBPACK_IMPORT_KEY__ in _types__WEBPACK_IMPORTED_MODULE_0__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _types__WEBPACK_IMPORTED_MODULE_0__[key]}))}(__WEBPACK_IMPORT_KEY__);var _arguments__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(55);for(var __WEBPACK_IMPORT_KEY__ in _arguments__WEBPACK_IMPORTED_MODULE_1__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _arguments__WEBPACK_IMPORTED_MODULE_1__[key]}))}(__WEBPACK_IMPORT_KEY__);var _expression_function_parameter__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(27);__webpack_require__.d(__webpack_exports__,"ExpressionFunctionParameter",(function(){return _expression_function_parameter__WEBPACK_IMPORTED_MODULE_2__.a}));var _expression_function__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(56);__webpack_require__.d(__webpack_exports__,"ExpressionFunction",(function(){return _expression_function__WEBPACK_IMPORTED_MODULE_3__.a}));var _specs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(36);__webpack_require__.d(__webpack_exports__,"functionSpecs",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.h})),__webpack_require__.d(__webpack_exports__,"clog",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.d})),__webpack_require__.d(__webpack_exports__,"font",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.g})),__webpack_require__.d(__webpack_exports__,"variableSet",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.n})),__webpack_require__.d(__webpack_exports__,"variable",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.m})),__webpack_require__.d(__webpack_exports__,"theme",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.l})),__webpack_require__.d(__webpack_exports__,"cumulativeSum",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.e})),__webpack_require__.d(__webpack_exports__,"derivative",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.f})),__webpack_require__.d(__webpack_exports__,"movingAverage",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.k})),__webpack_require__.d(__webpack_exports__,"mapColumn",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.i})),__webpack_require__.d(__webpack_exports__,"MapColumnArguments",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.a})),__webpack_require__.d(__webpack_exports__,"math",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.j})),__webpack_require__.d(__webpack_exports__,"MathArguments",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.b})),__webpack_require__.d(__webpack_exports__,"MathInput",(function(){return _specs__WEBPACK_IMPORTED_MODULE_4__.c}));var _series_calculation_helpers__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6);__webpack_require__.d(__webpack_exports__,"getBucketIdentifier",(function(){return _series_calculation_helpers__WEBPACK_IMPORTED_MODULE_5__.b})),__webpack_require__.d(__webpack_exports__,"buildResultColumns",(function(){return _series_calculation_helpers__WEBPACK_IMPORTED_MODULE_5__.a}))},function(module,__webpack_exports__,__webpack_require__){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__webpack_require__.d(__webpack_exports__,"a",(function(){return ExpressionFunctionParameter}));class ExpressionFunctionParameter{constructor(name,arg){_defineProperty(this,"name",void 0),_defineProperty(this,"required",void 0),_defineProperty(this,"help",void 0),_defineProperty(this,"types",void 0),_defineProperty(this,"default",void 0),_defineProperty(this,"aliases",void 0),_defineProperty(this,"multi",void 0),_defineProperty(this,"resolve",void 0),_defineProperty(this,"options",void 0);const{required:required,help:help,types:types,aliases:aliases,multi:multi,resolve:resolve,options:options}=arg;if("_"===name)throw Error("Arg names must not be _. Use it in aliases instead.");this.name=name,this.required=!!required,this.help=help||"",this.types=types||[],this.default=arg.default,this.aliases=aliases||[],this.multi=!!multi,this.resolve=null==resolve||resolve,this.options=options||[]}accepts(type){return!this.types.length||this.types.indexOf(type)>-1}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(64);for(var __WEBPACK_IMPORT_KEY__ in _types__WEBPACK_IMPORTED_MODULE_0__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _types__WEBPACK_IMPORTED_MODULE_0__[key]}))}(__WEBPACK_IMPORT_KEY__);var _expression_renderer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(29);__webpack_require__.d(__webpack_exports__,"ExpressionRenderer",(function(){return _expression_renderer__WEBPACK_IMPORTED_MODULE_1__.a}));var _expression_renderer_registry__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(65);__webpack_require__.d(__webpack_exports__,"ExpressionRendererRegistry",(function(){return _expression_renderer_registry__WEBPACK_IMPORTED_MODULE_2__.a}))},function(module,__webpack_exports__,__webpack_require__){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__webpack_require__.d(__webpack_exports__,"a",(function(){return ExpressionRenderer}));class ExpressionRenderer{constructor(config){_defineProperty(this,"name",void 0),_defineProperty(this,"displayName",void 0),_defineProperty(this,"help",void 0),_defineProperty(this,"validate",void 0),_defineProperty(this,"reuseDomNode",void 0),_defineProperty(this,"render",void 0);const{name:name,displayName:displayName,help:help,validate:validate,reuseDomNode:reuseDomNode,render:render}=config;this.name=name,this.displayName=displayName||name,this.help=help||"",this.validate=validate||(()=>{}),this.reuseDomNode=Boolean(reuseDomNode),this.render=render}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Execution}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_container__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(31),_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_kibana_utils_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(18),_inspector_common__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(70),_expression_types_specs_error__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(15),_ast__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(17),_expression_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(5),_util_get_by_alias__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(20),_execution_contract__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(34),_util_tables_adapter__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(32),_util_expressions_inspector_adapter__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(33);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class Execution{race(promise){return Promise.race([this.abortRejection.promise,promise])}get result(){return this.firstResultFuture.promise}get inspectorAdapters(){return this.context.inspectorAdapters}constructor(execution){this.execution=execution,_defineProperty(this,"state",void 0),_defineProperty(this,"input",null),_defineProperty(this,"context",void 0),_defineProperty(this,"abortController",(()=>{try{return new AbortController}catch(error){return new(__webpack_require__(124).AbortController)}})()),_defineProperty(this,"abortRejection",Object(_kibana_utils_common__WEBPACK_IMPORTED_MODULE_4__.abortSignalToPromise)(this.abortController.signal)),_defineProperty(this,"hasStarted",!1),_defineProperty(this,"firstResultFuture",new _kibana_utils_common__WEBPACK_IMPORTED_MODULE_4__.Defer),_defineProperty(this,"childExecutions",[]),_defineProperty(this,"contract",new _execution_contract__WEBPACK_IMPORTED_MODULE_10__.a(this)),_defineProperty(this,"expression",void 0);const{executor:executor}=execution;if(!execution.ast&&!execution.expression)throw new TypeError("Execution params should contain at least .ast or .expression key.");if(execution.ast&&execution.expression)throw new TypeError("Execution params cannot contain both .ast and .expression key.");this.expression=execution.expression||Object(_ast__WEBPACK_IMPORTED_MODULE_7__.formatExpression)(execution.ast);const ast=execution.ast||Object(_ast__WEBPACK_IMPORTED_MODULE_7__.parseExpression)(this.expression);this.state=Object(_container__WEBPACK_IMPORTED_MODULE_2__.a)({...executor.state.get(),state:"not-started",ast:ast});const inspectorAdapters=execution.params.inspectorAdapters||{requests:new _inspector_common__WEBPACK_IMPORTED_MODULE_5__.RequestAdapter,tables:new _util_tables_adapter__WEBPACK_IMPORTED_MODULE_11__.a,expression:new _util_expressions_inspector_adapter__WEBPACK_IMPORTED_MODULE_12__.a};this.context={getSearchContext:()=>this.execution.params.searchContext||{},getSearchSessionId:()=>execution.params.searchSessionId,getKibanaRequest:execution.params.kibanaRequest?()=>execution.params.kibanaRequest:void 0,variables:execution.params.variables||{},types:executor.getTypes(),abortSignal:this.abortController.signal,inspectorAdapters:inspectorAdapters,logDatatable:(name,datatable)=>{inspectorAdapters.tables[name]=datatable},isSyncColorsEnabled:()=>execution.params.syncColors,...execution.params.extraContext}}cancel(){this.abortController.abort()}start(input=null){if(this.hasStarted)throw new Error("Execution already started.");this.hasStarted=!0,this.input=input,this.state.transitions.start();const{resolve:resolve,reject:reject}=this.firstResultFuture,chainPromise=this.invokeChain(this.state.get().ast.chain,input);this.race(chainPromise).then(resolve,error=>{this.abortController.signal.aborted?(this.childExecutions.forEach(ex=>ex.cancel()),resolve(Object(_util__WEBPACK_IMPORTED_MODULE_3__.c)({message:"The expression was aborted.",name:"AbortError"}))):reject(error)}),this.firstResultFuture.promise.then(result=>{this.context.inspectorAdapters.expression&&this.context.inspectorAdapters.expression.logAST(this.state.get().ast),this.state.transitions.setResult(result)},error=>{this.state.transitions.setError(error)}).finally(()=>{this.abortRejection.cleanup()})}async invokeChain(chainArr,input){if(!chainArr.length)return input;for(const link of chainArr){const{function:fnName,arguments:fnArgs}=link,fn=Object(_util_get_by_alias__WEBPACK_IMPORTED_MODULE_9__.a)(this.state.get().functions,fnName);if(!fn)return Object(_util__WEBPACK_IMPORTED_MODULE_3__.c)({name:"fn not found",message:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("expressions.execution.functionNotFound",{defaultMessage:"Function {fnName} could not be found.",values:{fnName:fnName}})});if(fn.disabled)return Object(_util__WEBPACK_IMPORTED_MODULE_3__.c)({name:"fn is disabled",message:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("expressions.execution.functionDisabled",{defaultMessage:"Function {fnName} is disabled.",values:{fnName:fnName}})});let timeStart,args={};try{const{resolvedArgs:resolvedArgs}=await this.race(this.resolveArgs(fn,input,fnArgs));args=resolvedArgs,timeStart=this.execution.params.debug?Object(_kibana_utils_common__WEBPACK_IMPORTED_MODULE_4__.now)():0;const output=await this.race(this.invokeFunction(fn,input,resolvedArgs));if(this.execution.params.debug){const timeEnd=Object(_kibana_utils_common__WEBPACK_IMPORTED_MODULE_4__.now)();link.debug={success:!0,fn:fn.name,input:input,args:resolvedArgs,output:output,duration:timeEnd-timeStart}}if("error"===Object(_expression_types__WEBPACK_IMPORTED_MODULE_8__.getType)(output))return output;input=output}catch(rawError){const timeEnd=this.execution.params.debug?Object(_kibana_utils_common__WEBPACK_IMPORTED_MODULE_4__.now)():0,error=Object(_util__WEBPACK_IMPORTED_MODULE_3__.c)(rawError);return error.error.message=`[${fnName}] > ${error.error.message}`,this.execution.params.debug&&(link.debug={success:!1,fn:fn.name,input:input,args:args,error:error,rawError:rawError,duration:timeStart?timeEnd-timeStart:void 0}),error}}return input}async invokeFunction(fn,input,args){const normalizedInput=this.cast(input,fn.inputTypes),output=await this.race(fn.fn(normalizedInput,args,this.context)),returnType=Object(_expression_types__WEBPACK_IMPORTED_MODULE_8__.getType)(output),expectedType=fn.type;if(expectedType&&returnType!==expectedType)throw new Error(`Function '${fn.name}' should return '${expectedType}', actually returned '${returnType}'`);const type=this.context.types[fn.type];if(type&&type.validate)try{type.validate(output)}catch(e){throw new Error(`Output of '${fn.name}' is not a valid type '${fn.type}': ${e}`)}return output}cast(value,toTypeNames){if(!toTypeNames||0===toTypeNames.length)return value;const fromTypeName=Object(_expression_types__WEBPACK_IMPORTED_MODULE_8__.getType)(value);if(toTypeNames.includes(fromTypeName))return value;const{types:types}=this.state.get(),fromTypeDef=types[fromTypeName];for(const toTypeName of toTypeNames){if(fromTypeDef&&fromTypeDef.castsTo(toTypeName))return fromTypeDef.to(value,toTypeName,types);const toTypeDef=types[toTypeName];if(toTypeDef&&toTypeDef.castsFrom(fromTypeName))return toTypeDef.from(value,types)}throw new Error(`Can not cast '${fromTypeName}' to any of '${toTypeNames.join(", ")}'`)}async resolveArgs(fnDef,input,argAsts){const argDefs=fnDef.args,dealiasedArgAsts=Object(lodash__WEBPACK_IMPORTED_MODULE_1__.reduce)(argAsts,(acc,argAst,argName)=>{const argDef=Object(_util_get_by_alias__WEBPACK_IMPORTED_MODULE_9__.a)(argDefs,argName);if(!argDef)throw new Error(`Unknown argument '${argName}' passed to function '${fnDef.name}'`);return acc[argDef.name]=(acc[argDef.name]||[]).concat(argAst),acc},{});for(const argDef of Object.values(argDefs)){const{aliases:aliases,default:argDefault,name:argName,required:required}=argDef;if(void 0!==argDefault||!required||void 0!==dealiasedArgAsts[argName])continue;if(!aliases||0===aliases.length)throw new Error(fnDef.name+" requires an argument");const errorArg="_"===argName?aliases[0]:argName;throw new Error(`${fnDef.name} requires an "${errorArg}" argument`)}const argAstsWithDefaults=Object(lodash__WEBPACK_IMPORTED_MODULE_1__.reduce)(argDefs,(acc,argDef,argName)=>(void 0===acc[argName]&&void 0!==argDef.default&&(acc[argName]=[Object(_ast__WEBPACK_IMPORTED_MODULE_7__.parse)(argDef.default,"argument")]),acc),dealiasedArgAsts),resolveArgFns=Object(lodash__WEBPACK_IMPORTED_MODULE_1__.mapValues)(argAstsWithDefaults,(asts,argName)=>asts.map(item=>async(subInput=input)=>{const output=await this.interpret(item,subInput);if(Object(_expression_types_specs_error__WEBPACK_IMPORTED_MODULE_6__.b)(output))throw output.error;return this.cast(output,argDefs[argName].types)})),argNames=Object(lodash__WEBPACK_IMPORTED_MODULE_1__.keys)(resolveArgFns),resolvedArgValues=await Promise.all(argNames.map(argName=>{const interpretFns=resolveArgFns[argName];return argDefs[argName].resolve?Promise.all(interpretFns.map(fn=>fn())):interpretFns})),resolvedMultiArgs=Object(lodash__WEBPACK_IMPORTED_MODULE_1__.zipObject)(argNames,resolvedArgValues);return{resolvedArgs:Object(lodash__WEBPACK_IMPORTED_MODULE_1__.mapValues)(resolvedMultiArgs,(argValues,argName)=>argDefs[argName].multi?argValues:Object(lodash__WEBPACK_IMPORTED_MODULE_1__.last)(argValues))}}async interpret(ast,input){switch(Object(_expression_types__WEBPACK_IMPORTED_MODULE_8__.getType)(ast)){case"expression":const execution=this.execution.executor.createExecution(ast,this.execution.params);return this.childExecutions.push(execution),execution.start(input),await execution.result;case"string":case"number":case"null":case"boolean":return ast;default:throw new Error("Unknown AST object: "+JSON.stringify(ast))}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return executionPureTransitions})),__webpack_require__.d(__webpack_exports__,"a",(function(){return createExecutionContainer}));var _kibana_utils_common_state_containers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(37);const executionDefaultState={...__webpack_require__(16).e,state:"not-started",ast:{type:"expression",chain:[]}},executionPureTransitions={start:state=>()=>({...state,state:"pending"}),setResult:state=>result=>({...state,state:"result",result:result}),setError:state=>error=>({...state,state:"error",error:error})},freeze=state=>state,createExecutionContainer=(state=executionDefaultState)=>Object(_kibana_utils_common_state_containers__WEBPACK_IMPORTED_MODULE_0__.createStateContainer)(state,executionPureTransitions,{},{freeze:freeze})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return TablesAdapter}));var events__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(38);class TablesAdapter extends events__WEBPACK_IMPORTED_MODULE_0__.EventEmitter{constructor(...args){var obj,key,value;super(...args),value={},(key="_tables")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}logDatatable(name,datatable){this._tables[name]=datatable,this.emit("change",this.tables)}get tables(){return this._tables}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ExpressionsInspectorAdapter}));var events__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(38);class ExpressionsInspectorAdapter extends events__WEBPACK_IMPORTED_MODULE_0__.EventEmitter{constructor(...args){var obj,key,value;super(...args),value={},(key="_ast")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}logAST(ast){this._ast=ast,this.emit("change",this._ast)}get ast(){return this._ast}}},function(module,__webpack_exports__,__webpack_require__){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__webpack_require__.d(__webpack_exports__,"a",(function(){return ExecutionContract}));class ExecutionContract{get isPending(){const state=this.execution.state.get().state;return!("error"===state||"result"===state)}constructor(execution){this.execution=execution,_defineProperty(this,"cancel",()=>{this.execution.cancel()}),_defineProperty(this,"getData",async()=>{try{return await this.execution.result}catch(e){return{type:"error",error:{name:e.name,message:e.message,stack:e.stack}}}}),_defineProperty(this,"getExpression",()=>this.execution.expression),_defineProperty(this,"getAst",()=>this.execution.state.get().ast),_defineProperty(this,"inspect",()=>this.execution.inspectorAdapters)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"q",(function(){return typeSpecs})),__webpack_require__.d(__webpack_exports__,"a",(function(){return boolean_boolean})),__webpack_require__.d(__webpack_exports__,"f",(function(){return isDatatable})),__webpack_require__.d(__webpack_exports__,"b",(function(){return datatable})),__webpack_require__.d(__webpack_exports__,"g",(function(){return error.b})),__webpack_require__.d(__webpack_exports__,"c",(function(){return error.a})),__webpack_require__.d(__webpack_exports__,"d",(function(){return filter})),__webpack_require__.d(__webpack_exports__,"e",(function(){return image_image})),__webpack_require__.d(__webpack_exports__,"h",(function(){return nullType})),__webpack_require__.d(__webpack_exports__,"i",(function(){return num})),__webpack_require__.d(__webpack_exports__,"j",(function(){return number})),__webpack_require__.d(__webpack_exports__,"k",(function(){return pointseries})),__webpack_require__.d(__webpack_exports__,"l",(function(){return range})),__webpack_require__.d(__webpack_exports__,"m",(function(){return render})),__webpack_require__.d(__webpack_exports__,"n",(function(){return shape})),__webpack_require__.d(__webpack_exports__,"o",(function(){return string})),__webpack_require__.d(__webpack_exports__,"p",(function(){return style}));const boolean_boolean={name:"boolean",from:{null:()=>!1,number:n=>Boolean(n),string:s=>Boolean(s)},to:{render:value=>({type:"render",as:"text",value:{text:""+value}}),datatable:value=>({type:"datatable",columns:[{id:"value",name:"value",meta:{type:"boolean"}}],rows:[{value:value}]})}};var external_kbnSharedDeps_Lodash_=__webpack_require__(2);const isDatatable=datatable=>!!datatable&&"object"==typeof datatable&&"datatable"===datatable.type,datatable={name:"datatable",validate:table=>{if(!table.columns)throw new Error("datatable must have a columns array, even if it is empty");if(!table.rows)throw new Error("datatable must have a rows array, even if it is empty")},serialize:table=>{const{columns:columns,rows:rows}=table;return{...table,rows:rows.map(row=>columns.map(column=>row[column.name]))}},deserialize:table=>{const{columns:columns,rows:rows}=table;return{...table,rows:rows.map(row=>Object(external_kbnSharedDeps_Lodash_.zipObject)(Object(external_kbnSharedDeps_Lodash_.map)(columns,"name"),row))}},from:{null:()=>({type:"datatable",meta:{},rows:[],columns:[]}),pointseries:value=>({type:"datatable",meta:{},rows:value.rows,columns:Object(external_kbnSharedDeps_Lodash_.map)(value.columns,(val,colName)=>({id:colName,name:colName,meta:{type:val.type}}))})},to:{render:table=>({type:"render",as:"table",value:{datatable:table,paginate:!0,perPage:10,showHeader:!0}}),pointseries:table=>{const validFields=["x","y","color","size","text"],columns=table.columns.filter(column=>validFields.includes(column.id)),rows=table.rows.map(row=>Object(external_kbnSharedDeps_Lodash_.pick)(row,validFields));return{type:"pointseries",columns:columns.reduce((acc,column)=>(acc[column.name]={type:column.meta.type,expression:column.name,role:"dimension"},acc),{}),rows:rows}}}};var error=__webpack_require__(15);const filter={name:"filter",from:{null:()=>({type:"filter",filterType:"filter",meta:{},and:[]})}},image_image={name:"image",to:{render:input=>({type:"render",as:"image",value:input})}},nullType={name:"null",from:{"*":()=>null}};var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);const num={name:"num",from:{null:()=>({type:"num",value:0}),boolean:b=>({type:"num",value:Number(b)}),string:n=>{const value=Number(n);if(Number.isNaN(value))throw new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.types.number.fromStringConversionErrorMessage",{defaultMessage:'Can\'t typecast "{string}" string to number',values:{string:n}}));return{type:"num",value:value}},"*":value=>({type:"num",value:Number(value)})},to:{render:({value:value})=>({type:"render",as:"text",value:{text:""+value}}),datatable:({value:value})=>({type:"datatable",columns:[{id:"value",name:"value",meta:{type:"number"}}],rows:[{value:value}]})}},number={name:"number",from:{null:()=>0,boolean:b=>Number(b),string:n=>{const value=Number(n);if(Number.isNaN(value))throw new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.types.number.fromStringConversionErrorMessage",{defaultMessage:'Can\'t typecast "{string}" string to number',values:{string:n}}));return value}},to:{render:value=>({type:"render",as:"text",value:{text:""+value}}),datatable:value=>({type:"datatable",columns:[{id:"value",name:"value",meta:{type:"number"}}],rows:[{value:value}]})}},pointseries={name:"pointseries",from:{null:()=>({type:"pointseries",rows:[],columns:{}})},to:{render:(pseries,types)=>({type:"render",as:"table",value:{datatable:types.datatable.from(pseries,types),showHeader:!0}})}},range={name:"range",from:{null:()=>({type:"range",from:0,to:0})},to:{render:value=>({type:"render",as:"text",value:{text:(null==value?void 0:value.label)||`from ${value.from} to ${value.to}`}})}},render={name:"render",from:{"*":v=>({type:"render",as:"debug",value:v})}},shape={name:"shape",to:{render:input=>({type:"render",as:"shape",value:input})}},string={name:"string",from:{null:()=>"",boolean:b=>String(b),number:n=>String(n)},to:{render:text=>({type:"render",as:"text",value:{text:text}}),datatable:value=>({type:"datatable",columns:[{id:"value",name:"value",meta:{type:"string"}}],rows:[{value:value}]})}},style={name:"style",from:{null:()=>({type:"style",spec:{},css:""})}},typeSpecs=[boolean_boolean,datatable,error.a,filter,image_image,nullType,num,number,pointseries,range,render,shape,string,style]},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"h",(function(){return functionSpecs})),__webpack_require__.d(__webpack_exports__,"d",(function(){return clog})),__webpack_require__.d(__webpack_exports__,"g",(function(){return font})),__webpack_require__.d(__webpack_exports__,"n",(function(){return variableSet})),__webpack_require__.d(__webpack_exports__,"m",(function(){return variable})),__webpack_require__.d(__webpack_exports__,"l",(function(){return theme})),__webpack_require__.d(__webpack_exports__,"e",(function(){return cumulativeSum})),__webpack_require__.d(__webpack_exports__,"f",(function(){return derivative})),__webpack_require__.d(__webpack_exports__,"k",(function(){return movingAverage})),__webpack_require__.d(__webpack_exports__,"i",(function(){return mapColumn})),__webpack_require__.d(__webpack_exports__,"a",(function(){})),__webpack_require__.d(__webpack_exports__,"j",(function(){return math})),__webpack_require__.d(__webpack_exports__,"b",(function(){})),__webpack_require__.d(__webpack_exports__,"c",(function(){}));const clog={name:"clog",args:{},help:"Outputs the context to the console",fn:input=>(console.log(input),input)};var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),fonts=__webpack_require__(19),types=__webpack_require__(4);const inlineStyle=obj=>{if(!obj)return"";return Object.keys(obj).map(key=>key.trim().replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\W/g,m=>/[À-ž]/.test(m)?m:"-").replace(/^-+|-+$/g,"").toLowerCase().concat(":").concat(String(obj[key]))).join(";")},font={name:"font",aliases:[],type:"style",help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.fontHelpText",{defaultMessage:"Create a font style."}),inputTypes:["null"],args:{align:{default:'{ theme "font.align" default="left" }',help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.font.args.alignHelpText",{defaultMessage:"The horizontal text alignment."}),options:Object.values(types.TextAlignment),types:["string"]},color:{default:'{ theme "font.color" }',help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.font.args.colorHelpText",{defaultMessage:"The text color."}),types:["string"]},family:{default:`{ theme "font.family" default="${fonts.openSans.value}" }`,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.font.args.familyHelpText",{defaultMessage:"An acceptable {css} web font string",values:{css:"CSS"}}),types:["string"]},italic:{default:'{ theme "font.italic" default=false }',help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.font.args.italicHelpText",{defaultMessage:"Italicize the text?"}),options:[!0,!1],types:["boolean"]},lHeight:{default:'{ theme "font.lHeight" }',aliases:["lineHeight"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.font.args.lHeightHelpText",{defaultMessage:"The line height in pixels"}),types:["number","null"]},size:{default:'{ theme "font.size" default=14 }',help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.font.args.sizeHelpText",{defaultMessage:"The font size in pixels"}),types:["number"]},underline:{default:'{ theme "font.underline" default=false }',help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.font.args.underlineHelpText",{defaultMessage:"Underline the text?"}),options:[!0,!1],types:["boolean"]},weight:{default:'{ theme "font.weight" default="normal" }',help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.font.args.weightHelpText",{defaultMessage:"The font weight. For example, {list}, or {end}.",values:{list:Object.values(types.FontWeight).slice(0,-1).map(weight=>`\`"${weight}"\``).join(", "),end:`\`"${Object.values(types.FontWeight).slice(-1)[0]}"\``}}),options:Object.values(types.FontWeight),types:["string"]}},fn:(input,args)=>{if(!Object.values(types.FontWeight).includes(args.weight))throw new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.font.invalidFontWeightErrorMessage",{defaultMessage:"Invalid font weight: '{weight}'",values:{weight:args.weight}}));if(!Object.values(types.TextAlignment).includes(args.align))throw new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.font.invalidTextAlignmentErrorMessage",{defaultMessage:"Invalid text alignment: '{align}'",values:{align:args.align}}));const lineHeight=null!=args.lHeight?args.lHeight+"px":"1",spec={fontFamily:args.family,fontWeight:args.weight,fontStyle:args.italic?types.FontStyle.ITALIC:types.FontStyle.NORMAL,textDecoration:args.underline?types.TextDecoration.UNDERLINE:types.TextDecoration.NONE,textAlign:args.align,fontSize:args.size+"px",lineHeight:lineHeight};return args.color&&(spec.color=args.color),{type:"style",spec:spec,css:inlineStyle(spec)}}},variableSet={name:"var_set",help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.varset.help",{defaultMessage:"Updates the Kibana global context."}),args:{name:{types:["string"],aliases:["_"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.varset.name.help",{defaultMessage:"Specify the name of the variable."})},value:{aliases:["val"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.varset.val.help",{defaultMessage:"Specify the value for the variable. When unspecified, the input context is used."})}},fn:(input,args,context)=>(context.variables[args.name]=void 0===args.value?input:args.value,input)},variable={name:"var",help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.var.help",{defaultMessage:"Updates the Kibana global context."}),args:{name:{types:["string"],aliases:["_"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.var.name.help",{defaultMessage:"Specify the name of the variable."})}},fn:(input,args,context)=>context.variables[args.name]};var external_kbnSharedDeps_Lodash_=__webpack_require__(2);const theme={name:"theme",aliases:[],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.themeHelpText",{defaultMessage:"Reads a theme setting."}),inputTypes:["null"],args:{variable:{aliases:["_"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.theme.args.variableHelpText",{defaultMessage:"Name of the theme variable to read."}),required:!0,types:["string"]},default:{help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.theme.args.defaultHelpText",{defaultMessage:"default value in case theming info is not available."})}},fn:(input,args,handlers)=>{const vars=handlers.variables.theme||{};return Object(external_kbnSharedDeps_Lodash_.get)(vars,args.variable,args.default)}};var series_calculation_helpers=__webpack_require__(6);const cumulativeSum={name:"cumulative_sum",type:"datatable",inputTypes:["datatable"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.cumulativeSum.help",{defaultMessage:"Calculates the cumulative sum of a column in a data table"}),args:{by:{help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.cumulativeSum.args.byHelpText",{defaultMessage:"Column to split the cumulative sum calculation by"}),multi:!0,types:["string"],required:!1},inputColumnId:{help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.cumulativeSum.args.inputColumnIdHelpText",{defaultMessage:"Column to calculate the cumulative sum of"}),types:["string"],required:!0},outputColumnId:{help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.cumulativeSum.args.outputColumnIdHelpText",{defaultMessage:"Column to store the resulting cumulative sum in"}),types:["string"],required:!0},outputColumnName:{help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.cumulativeSum.args.outputColumnNameHelpText",{defaultMessage:"Name of the column to store the resulting cumulative sum in"}),types:["string"],required:!1}},fn(input,{by:by,inputColumnId:inputColumnId,outputColumnId:outputColumnId,outputColumnName:outputColumnName}){const resultColumns=Object(series_calculation_helpers.a)(input,outputColumnId,inputColumnId,outputColumnName);if(!resultColumns)return input;const accumulators={};return{...input,columns:resultColumns,rows:input.rows.map(row=>{var _accumulators$bucketI;const newRow={...row},bucketIdentifier=Object(series_calculation_helpers.b)(row,by),accumulatorValue=null!==(_accumulators$bucketI=accumulators[bucketIdentifier])&&void 0!==_accumulators$bucketI?_accumulators$bucketI:0,currentValue=newRow[inputColumnId];return null!=currentValue?(newRow[outputColumnId]=Number(currentValue)+accumulatorValue,accumulators[bucketIdentifier]=newRow[outputColumnId]):newRow[outputColumnId]=accumulatorValue,newRow})}}},derivative={name:"derivative",type:"datatable",inputTypes:["datatable"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.derivative.help",{defaultMessage:"Calculates the derivative of a column in a data table"}),args:{by:{help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.derivative.args.byHelpText",{defaultMessage:"Column to split the derivative calculation by"}),multi:!0,types:["string"],required:!1},inputColumnId:{help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.derivative.args.inputColumnIdHelpText",{defaultMessage:"Column to calculate the derivative of"}),types:["string"],required:!0},outputColumnId:{help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.derivative.args.outputColumnIdHelpText",{defaultMessage:"Column to store the resulting derivative in"}),types:["string"],required:!0},outputColumnName:{help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.derivative.args.outputColumnNameHelpText",{defaultMessage:"Name of the column to store the resulting derivative in"}),types:["string"],required:!1}},fn(input,{by:by,inputColumnId:inputColumnId,outputColumnId:outputColumnId,outputColumnName:outputColumnName}){const resultColumns=Object(series_calculation_helpers.a)(input,outputColumnId,inputColumnId,outputColumnName);if(!resultColumns)return input;const previousValues={};return{...input,columns:resultColumns,rows:input.rows.map(row=>{const newRow={...row},bucketIdentifier=Object(series_calculation_helpers.b)(row,by),previousValue=previousValues[bucketIdentifier],currentValue=newRow[inputColumnId];return newRow[outputColumnId]=null!=currentValue&&null!=previousValue?Number(currentValue)-previousValue:void 0,previousValues[bucketIdentifier]=null!=currentValue?Number(currentValue):void 0,newRow})}}},movingAverage={name:"moving_average",type:"datatable",inputTypes:["datatable"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.movingAverage.help",{defaultMessage:"Calculates the moving average of a column in a data table"}),args:{by:{help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.movingAverage.args.byHelpText",{defaultMessage:"Column to split the moving average calculation by"}),multi:!0,types:["string"],required:!1},inputColumnId:{help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.movingAverage.args.inputColumnIdHelpText",{defaultMessage:"Column to calculate the moving average of"}),types:["string"],required:!0},outputColumnId:{help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.movingAverage.args.outputColumnIdHelpText",{defaultMessage:"Column to store the resulting moving average in"}),types:["string"],required:!0},outputColumnName:{help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.movingAverage.args.outputColumnNameHelpText",{defaultMessage:"Name of the column to store the resulting moving average in"}),types:["string"],required:!1},window:{help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.movingAverage.args.windowHelpText",{defaultMessage:'The size of window to "slide" across the histogram.'}),types:["number"],default:5}},fn(input,{by:by,inputColumnId:inputColumnId,outputColumnId:outputColumnId,outputColumnName:outputColumnName,window:window}){const resultColumns=Object(series_calculation_helpers.a)(input,outputColumnId,inputColumnId,outputColumnName);if(!resultColumns)return input;const lastNValuesByBucket={};return{...input,columns:resultColumns,rows:input.rows.map(row=>{const newRow={...row},bucketIdentifier=Object(series_calculation_helpers.b)(row,by),lastNValues=lastNValuesByBucket[bucketIdentifier],currentValue=newRow[inputColumnId];if(null!=lastNValues&&null!=currentValue){const sum=lastNValues.reduce((acc,current)=>acc+current,0);newRow[outputColumnId]=sum/lastNValues.length}else newRow[outputColumnId]=void 0;return null!=currentValue&&(lastNValuesByBucket[bucketIdentifier]=[...lastNValues||[],Number(currentValue)].slice(-window)),newRow})}}};var expression_types=__webpack_require__(5);const mapColumn={name:"mapColumn",aliases:["mc"],type:"datatable",inputTypes:["datatable"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.mapColumnHelpText",{defaultMessage:"Adds a column calculated as the result of other columns. Changes are made only when you provide arguments.See also {alterColumnFn} and {staticColumnFn}.",values:{alterColumnFn:"`alterColumn`",staticColumnFn:"`staticColumn`"}}),args:{id:{types:["string","null"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.mapColumn.args.idHelpText",{defaultMessage:"An optional id of the resulting column. When `null` the name/column argument is used as id."}),required:!1,default:null},name:{types:["string"],aliases:["_","column"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.mapColumn.args.nameHelpText",{defaultMessage:"The name of the resulting column."}),required:!0},expression:{types:["boolean","number","string","null"],resolve:!1,aliases:["exp","fn","function"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.mapColumn.args.expressionHelpText",{defaultMessage:"An expression that is executed on every row, provided with a single-row {DATATABLE} context and returning the cell value.",values:{DATATABLE:"`datatable`"}}),required:!0},copyMetaFrom:{types:["string","null"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.mapColumn.args.copyMetaFromHelpText",{defaultMessage:"If set, the meta object from the specified column id is copied over to the specified target column. If the column doesn't exist it silently fails."}),required:!1,default:null}},fn:(input,args)=>{const expression=args.expression||(()=>Promise.resolve(null)),columnId=null!=args.id?args.id:args.name,columns=[...input.columns],rowPromises=input.rows.map(row=>expression({type:"datatable",columns:columns,rows:[row]}).then(val=>({...row,[columnId]:val})));return Promise.all(rowPromises).then(rows=>{const existingColumnIndex=columns.findIndex(({name:name})=>name===args.name),type=rows.length?Object(expression_types.getType)(rows[0][columnId]):"null",newColumn={id:columnId,name:args.name,meta:{type:type}};if(args.copyMetaFrom){const metaSourceFrom=columns.find(({id:id})=>id===args.copyMetaFrom);newColumn.meta={...newColumn.meta,...(null==metaSourceFrom?void 0:metaSourceFrom.meta)||{}}}return-1===existingColumnIndex?columns.push(newColumn):columns[existingColumnIndex]=newColumn,{type:"datatable",columns:columns,rows:rows}})}};var src=__webpack_require__(69);const isString=val=>"string"==typeof val;const errors_emptyExpression=()=>new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.math.emptyExpressionErrorMessage",{defaultMessage:"Empty expression"})),errors_tooManyResults=()=>new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.math.tooManyResultsErrorMessage",{defaultMessage:"Expressions must return a single number. Try wrapping your expression in {mean} or {sum}",values:{mean:"mean()",sum:"sum()"}})),errors_executionFailed=()=>new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.math.executionFailedErrorMessage",{defaultMessage:"Failed to execute math expression. Check your column names"})),errors_emptyDatatable=()=>new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.math.emptyDatatableErrorMessage",{defaultMessage:"Empty datatable"})),fallbackValue={null:null,zero:0,false:!1},math={name:"math",type:void 0,inputTypes:["number","datatable"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.mathHelpText",{defaultMessage:"Interprets a {TINYMATH} math expression using a {TYPE_NUMBER} or {DATATABLE} as {CONTEXT}. The {DATATABLE} columns are available by their column name. If the {CONTEXT} is a number it is available as {value}.",values:{TINYMATH:"`TinyMath`",CONTEXT:"_context_",DATATABLE:"`datatable`",value:"`value`",TYPE_NUMBER:"`number`"}}),args:{expression:{aliases:["_"],types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.math.args.expressionHelpText",{defaultMessage:"An evaluated {TINYMATH} expression. See {TINYMATH_URL}.",values:{TINYMATH:"`TinyMath`",TINYMATH_URL:"https://www.elastic.co/guide/en/kibana/current/canvas-tinymath-functions.html"}})},onError:{types:["string"],options:["throw","false","zero","null"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.functions.math.args.onErrorHelpText",{defaultMessage:"In case the {TINYMATH} evaluation fails or returns NaN, the return value is specified by onError. When `'throw'`, it will throw an exception, terminating expression execution (default).",values:{TINYMATH:"`TinyMath`"}})}},fn:(input,args)=>{const{expression:expression,onError:onError}=args,onErrorValue=null!=onError?onError:"throw";if(!expression||""===expression.trim())throw errors_emptyExpression();const mathContext=Object(expression_types.isDatatable)(input)?function(rows,columns){const columnNames=columns||Object.keys(rows[0]);if(!columnNames.every(isString))throw new Error("Columns should be an array of strings");const columnValues=Object(external_kbnSharedDeps_Lodash_.map)(columnNames,name=>Object(external_kbnSharedDeps_Lodash_.map)(rows,name));return Object(external_kbnSharedDeps_Lodash_.zipObject)(columnNames,columnValues)}(input.rows,input.columns.map(col=>col.name)):{value:input};try{const result=Object(src.evaluate)(expression,mathContext);if(Array.isArray(result)){if(1===result.length)return result[0];throw errors_tooManyResults()}if(isNaN(result)){if("throw"!==onErrorValue&&onErrorValue in fallbackValue)return fallbackValue[onErrorValue];throw errors_executionFailed()}return result}catch(e){if("throw"!==onErrorValue&&onErrorValue in fallbackValue)return fallbackValue[onErrorValue];throw Object(expression_types.isDatatable)(input)&&0===input.rows.length?errors_emptyDatatable():e}}},functionSpecs=[clog,font,variableSet,variable,theme,cumulativeSum,derivative,movingAverage,mapColumn,math]},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaUtils/common/state_containers");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){"use strict";var ReflectOwnKeys,R="object"==typeof Reflect?Reflect:null,ReflectApply=R&&"function"==typeof R.apply?R.apply:function(target,receiver,args){return Function.prototype.apply.call(target,receiver,args)};ReflectOwnKeys=R&&"function"==typeof R.ownKeys?R.ownKeys:Object.getOwnPropertySymbols?function(target){return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))}:function(target){return Object.getOwnPropertyNames(target)};var NumberIsNaN=Number.isNaN||function(value){return value!=value};function EventEmitter(){EventEmitter.init.call(this)}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function $getMaxListeners(that){return void 0===that._maxListeners?EventEmitter.defaultMaxListeners:that._maxListeners}function _addListener(target,type,listener,prepend){var m,events,existing,warning;if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener);if(void 0===(events=target._events)?(events=target._events=Object.create(null),target._eventsCount=0):(void 0!==events.newListener&&(target.emit("newListener",type,listener.listener?listener.listener:listener),events=target._events),existing=events[type]),void 0===existing)existing=events[type]=listener,++target._eventsCount;else if("function"==typeof existing?existing=events[type]=prepend?[listener,existing]:[existing,listener]:prepend?existing.unshift(listener):existing.push(listener),(m=$getMaxListeners(target))>0&&existing.length>m&&!existing.warned){existing.warned=!0;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+" "+String(type)+" listeners added. Use emitter.setMaxListeners() to increase limit");w.name="MaxListenersExceededWarning",w.emitter=target,w.type=type,w.count=existing.length,warning=w,console&&console.warn&&console.warn(warning)}return target}function onceWrapper(){for(var args=[],i=0;i<arguments.length;i++)args.push(arguments[i]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,ReflectApply(this.listener,this.target,args))}function _onceWrap(target,type,listener){var state={fired:!1,wrapFn:void 0,target:target,type:type,listener:listener},wrapped=onceWrapper.bind(state);return wrapped.listener=listener,state.wrapFn=wrapped,wrapped}function _listeners(target,type,unwrap){var events=target._events;if(void 0===events)return[];var evlistener=events[type];return void 0===evlistener?[]:"function"==typeof evlistener?unwrap?[evlistener.listener||evlistener]:[evlistener]:unwrap?function(arr){for(var ret=new Array(arr.length),i=0;i<ret.length;++i)ret[i]=arr[i].listener||arr[i];return ret}(evlistener):arrayClone(evlistener,evlistener.length)}function listenerCount(type){var events=this._events;if(void 0!==events){var evlistener=events[type];if("function"==typeof evlistener)return 1;if(void 0!==evlistener)return evlistener.length}return 0}function arrayClone(arr,n){for(var copy=new Array(n),i=0;i<n;++i)copy[i]=arr[i];return copy}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(arg){if("number"!=typeof arg||arg<0||NumberIsNaN(arg))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+arg+".");defaultMaxListeners=arg}}),EventEmitter.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function(n){if("number"!=typeof n||n<0||NumberIsNaN(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this},EventEmitter.prototype.getMaxListeners=function(){return $getMaxListeners(this)},EventEmitter.prototype.emit=function(type){for(var args=[],i=1;i<arguments.length;i++)args.push(arguments[i]);var doError="error"===type,events=this._events;if(void 0!==events)doError=doError&&void 0===events.error;else if(!doError)return!1;if(doError){var er;if(args.length>0&&(er=args[0]),er instanceof Error)throw er;var err=new Error("Unhandled error."+(er?" ("+er.message+")":""));throw err.context=er,err}var handler=events[type];if(void 0===handler)return!1;if("function"==typeof handler)ReflectApply(handler,this,args);else{var len=handler.length,listeners=arrayClone(handler,len);for(i=0;i<len;++i)ReflectApply(listeners[i],this,args)}return!0},EventEmitter.prototype.addListener=function(type,listener){return _addListener(this,type,listener,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(type,listener){return _addListener(this,type,listener,!0)},EventEmitter.prototype.once=function(type,listener){if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener);return this.on(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.prependOnceListener=function(type,listener){if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener);return this.prependListener(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.removeListener=function(type,listener){var list,events,position,i,originalListener;if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener);if(void 0===(events=this._events))return this;if(void 0===(list=events[type]))return this;if(list===listener||list.listener===listener)0==--this._eventsCount?this._events=Object.create(null):(delete events[type],events.removeListener&&this.emit("removeListener",type,list.listener||listener));else if("function"!=typeof list){for(position=-1,i=list.length-1;i>=0;i--)if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener,position=i;break}if(position<0)return this;0===position?list.shift():function(list,index){for(;index+1<list.length;index++)list[index]=list[index+1];list.pop()}(list,position),1===list.length&&(events[type]=list[0]),void 0!==events.removeListener&&this.emit("removeListener",type,originalListener||listener)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function(type){var listeners,events,i;if(void 0===(events=this._events))return this;if(void 0===events.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==events[type]&&(0==--this._eventsCount?this._events=Object.create(null):delete events[type]),this;if(0===arguments.length){var key,keys=Object.keys(events);for(i=0;i<keys.length;++i)"removeListener"!==(key=keys[i])&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(listeners=events[type]))this.removeListener(type,listeners);else if(void 0!==listeners)for(i=listeners.length-1;i>=0;i--)this.removeListener(type,listeners[i]);return this},EventEmitter.prototype.listeners=function(type){return _listeners(this,type,!0)},EventEmitter.prototype.rawListeners=function(type){return _listeners(this,type,!1)},EventEmitter.listenerCount=function(emitter,type){return"function"==typeof emitter.listenerCount?emitter.listenerCount(type):listenerCount.call(emitter,type)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getType=function(node){if(null==node)return"null";if("object"==typeof node){if(!node.type)throw new Error("Objects must have a type property");return node.type}return typeof node}},function(module,exports){module.exports={pow:function(a,b){if(null==b)throw new Error("Missing exponent");if(Array.isArray(a))return a.map(a=>Math.pow(a,b));return Math.pow(a,b)}}},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=__webpack_require__(125),fast_shallow_equal_1=__webpack_require__(126),useCustomCompareEffect_1=tslib_1.__importDefault(__webpack_require__(127)),shallowEqualDepsList=function(prevDeps,nextDeps){return prevDeps.every((function(dep,index){return fast_shallow_equal_1.equal(dep,nextDeps[index])}))};exports.default=function(effect,deps){useCustomCompareEffect_1.default(effect,deps,shallowEqualDepsList)}},function(module,__webpack_exports__,__webpack_require__){"use strict";let BackgroundRepeat,BackgroundSize,FontStyle,FontWeight,Overflow,TextAlignment,TextDecoration;__webpack_require__.d(__webpack_exports__,"a",(function(){return BackgroundRepeat})),__webpack_require__.d(__webpack_exports__,"b",(function(){return BackgroundSize})),__webpack_require__.d(__webpack_exports__,"c",(function(){return FontStyle})),__webpack_require__.d(__webpack_exports__,"d",(function(){return FontWeight})),__webpack_require__.d(__webpack_exports__,"e",(function(){return Overflow})),__webpack_require__.d(__webpack_exports__,"f",(function(){return TextAlignment})),__webpack_require__.d(__webpack_exports__,"g",(function(){return TextDecoration})),function(BackgroundRepeat){BackgroundRepeat.REPEAT="repeat",BackgroundRepeat.REPEAT_NO="no-repeat",BackgroundRepeat.REPEAT_X="repeat-x",BackgroundRepeat.REPEAT_Y="repeat-y",BackgroundRepeat.ROUND="round",BackgroundRepeat.SPACE="space"}(BackgroundRepeat||(BackgroundRepeat={})),function(BackgroundSize){BackgroundSize.AUTO="auto",BackgroundSize.CONTAIN="contain",BackgroundSize.COVER="cover"}(BackgroundSize||(BackgroundSize={})),function(FontStyle){FontStyle.ITALIC="italic",FontStyle.NORMAL="normal"}(FontStyle||(FontStyle={})),function(FontWeight){FontWeight.NORMAL="normal",FontWeight.BOLD="bold",FontWeight.BOLDER="bolder",FontWeight.LIGHTER="lighter",FontWeight.ONE="100",FontWeight.TWO="200",FontWeight.THREE="300",FontWeight.FOUR="400",FontWeight.FIVE="500",FontWeight.SIX="600",FontWeight.SEVEN="700",FontWeight.EIGHT="800",FontWeight.NINE="900"}(FontWeight||(FontWeight={})),function(Overflow){Overflow.AUTO="auto",Overflow.HIDDEN="hidden",Overflow.SCROLL="scroll",Overflow.VISIBLE="visible"}(Overflow||(Overflow={})),function(TextAlignment){TextAlignment.CENTER="center",TextAlignment.JUSTIFY="justify",TextAlignment.LEFT="left",TextAlignment.RIGHT="right"}(TextAlignment||(TextAlignment={})),function(TextDecoration){TextDecoration.NONE="none",TextDecoration.UNDERLINE="underline"}(TextDecoration||(TextDecoration={}))},function(module,exports){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"fromExpression",{enumerable:!0,get:function(){return _ast.fromExpression}}),Object.defineProperty(exports,"toExpression",{enumerable:!0,get:function(){return _ast.toExpression}}),Object.defineProperty(exports,"safeElementFromExpression",{enumerable:!0,get:function(){return _ast.safeElementFromExpression}}),Object.defineProperty(exports,"Fn",{enumerable:!0,get:function(){return _fn.Fn}}),Object.defineProperty(exports,"getType",{enumerable:!0,get:function(){return _get_type.getType}}),Object.defineProperty(exports,"castProvider",{enumerable:!0,get:function(){return _cast.castProvider}}),Object.defineProperty(exports,"parse",{enumerable:!0,get:function(){return _grammar.parse}}),Object.defineProperty(exports,"getByAlias",{enumerable:!0,get:function(){return _get_by_alias.getByAlias}}),Object.defineProperty(exports,"Registry",{enumerable:!0,get:function(){return _registry.Registry}}),Object.defineProperty(exports,"addRegistries",{enumerable:!0,get:function(){return _registries.addRegistries}}),Object.defineProperty(exports,"register",{enumerable:!0,get:function(){return _registries.register}}),Object.defineProperty(exports,"registryFactory",{enumerable:!0,get:function(){return _registries.registryFactory}});var _ast=__webpack_require__(84),_fn=__webpack_require__(85),_get_type=__webpack_require__(40),_cast=__webpack_require__(87),_grammar=__webpack_require__(47),_get_by_alias=__webpack_require__(88),_registry=__webpack_require__(89),_registries=__webpack_require__(90)},function(module,exports,__webpack_require__){"use strict";function peg$SyntaxError(message,expected,found,location){this.message=message,this.expected=expected,this.found=found,this.location=location,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}!function(child,parent){function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor}(peg$SyntaxError,Error),peg$SyntaxError.buildMessage=function(expected,found){var DESCRIBE_EXPECTATION_FNS={literal:function(expectation){return'"'+literalEscape(expectation.text)+'"'},class:function(expectation){var i,escapedParts="";for(i=0;i<expectation.parts.length;i++)escapedParts+=expectation.parts[i]instanceof Array?classEscape(expectation.parts[i][0])+"-"+classEscape(expectation.parts[i][1]):classEscape(expectation.parts[i]);return"["+(expectation.inverted?"^":"")+escapedParts+"]"},any:function(expectation){return"any character"},end:function(expectation){return"end of input"},other:function(expectation){return expectation.description}};function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase()}function literalEscape(s){return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(ch){return"\\x0"+hex(ch)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(ch){return"\\x"+hex(ch)}))}function classEscape(s){return s.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(ch){return"\\x0"+hex(ch)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(ch){return"\\x"+hex(ch)}))}return"Expected "+function(expected){var i,j,expectation,descriptions=new Array(expected.length);for(i=0;i<expected.length;i++)descriptions[i]=(expectation=expected[i],DESCRIBE_EXPECTATION_FNS[expectation.type](expectation));if(descriptions.sort(),descriptions.length>0){for(i=1,j=1;i<descriptions.length;i++)descriptions[i-1]!==descriptions[i]&&(descriptions[j]=descriptions[i],j++);descriptions.length=j}switch(descriptions.length){case 1:return descriptions[0];case 2:return descriptions[0]+" or "+descriptions[1];default:return descriptions.slice(0,-1).join(", ")+", or "+descriptions[descriptions.length-1]}}(expected)+" but "+function(found){return found?'"'+literalEscape(found)+'"':"end of input"}(found)+" found."},module.exports={SyntaxError:peg$SyntaxError,parse:function(input,options){options=void 0!==options?options:{};var peg$result,peg$FAILED={},peg$startRuleFunctions={expression:peg$parseexpression,argument:peg$parseargument},peg$startRuleFunction=peg$parseexpression,peg$c1=peg$literalExpectation("|",!1),peg$c2=function(first,fn){return fn},peg$c4=peg$otherExpectation("function"),peg$c7=peg$literalExpectation("=",!1),peg$c11=peg$literalExpectation("$",!1),peg$c13=peg$literalExpectation("{",!1),peg$c15=peg$literalExpectation("}",!1),peg$c20=/^[a-zA-Z0-9_\-]/,peg$c21=peg$classExpectation([["a","z"],["A","Z"],["0","9"],"_","-"],!1,!1),peg$c23=peg$otherExpectation("literal"),peg$c25=peg$literalExpectation('"',!1),peg$c26=function(chars){return chars.join("")},peg$c28=peg$literalExpectation("'",!1),peg$c30=/^[ \t\r\n]/,peg$c31=peg$classExpectation([" ","\t","\r","\n"],!1,!1),peg$c33=peg$literalExpectation("\\",!1),peg$c34=/^["'(){}<>[\]$`|= \t\n\r]/,peg$c35=peg$classExpectation(['"',"'","(",")","{","}","<",">","[","]","$","`","|","="," ","\t","\n","\r"],!1,!1),peg$c37=/^[^"'(){}<>[\]$`|= \t\n\r]/,peg$c38=peg$classExpectation(['"',"'","(",")","{","}","<",">","[","]","$","`","|","="," ","\t","\n","\r"],!0,!1),peg$c39=/^[^"]/,peg$c40=peg$classExpectation(['"'],!0,!1),peg$c41=/^[^']/,peg$c42=peg$classExpectation(["'"],!0,!1),peg$currPos=0,peg$savedPos=0,peg$posDetailsCache=[{line:1,column:1}],peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions))throw new Error("Can't start parsing from rule \""+options.startRule+'".');peg$startRuleFunction=peg$startRuleFunctions[options.startRule]}function text(){return input.substring(peg$savedPos,peg$currPos)}function location(){return peg$computeLocation(peg$savedPos,peg$currPos)}function peg$literalExpectation(text,ignoreCase){return{type:"literal",text:text,ignoreCase:ignoreCase}}function peg$classExpectation(parts,inverted,ignoreCase){return{type:"class",parts:parts,inverted:inverted,ignoreCase:ignoreCase}}function peg$otherExpectation(description){return{type:"other",description:description}}function peg$computePosDetails(pos){var p,details=peg$posDetailsCache[pos];if(details)return details;for(p=pos-1;!peg$posDetailsCache[p];)p--;for(details={line:(details=peg$posDetailsCache[p]).line,column:details.column};p<pos;)10===input.charCodeAt(p)?(details.line++,details.column=1):details.column++,p++;return peg$posDetailsCache[pos]=details,details}function peg$computeLocation(startPos,endPos){var startPosDetails=peg$computePosDetails(startPos),endPosDetails=peg$computePosDetails(endPos);return{start:{offset:startPos,line:startPosDetails.line,column:startPosDetails.column},end:{offset:endPos,line:endPosDetails.line,column:endPosDetails.column}}}function peg$fail(expected){peg$currPos<peg$maxFailPos||(peg$currPos>peg$maxFailPos&&(peg$maxFailPos=peg$currPos,peg$maxFailExpected=[]),peg$maxFailExpected.push(expected))}function peg$buildStructuredError(expected,found,location){return new peg$SyntaxError(peg$SyntaxError.buildMessage(expected,found),expected,found,location)}function peg$parseexpression(){var s0,s1,s2,s3,s4,s5,s6,s7;if(s0=peg$currPos,(s1=peg$parsespace())===peg$FAILED&&(s1=null),s1!==peg$FAILED)if((s2=peg$parsefunction())!==peg$FAILED){for(s3=[],s4=peg$currPos,124===input.charCodeAt(peg$currPos)?(s5="|",peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c1)),s5!==peg$FAILED?((s6=peg$parsespace())===peg$FAILED&&(s6=null),s6!==peg$FAILED&&(s7=peg$parsefunction())!==peg$FAILED?(peg$savedPos=s4,s4=s5=peg$c2(0,s7)):(peg$currPos=s4,s4=peg$FAILED)):(peg$currPos=s4,s4=peg$FAILED);s4!==peg$FAILED;)s3.push(s4),s4=peg$currPos,124===input.charCodeAt(peg$currPos)?(s5="|",peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c1)),s5!==peg$FAILED?((s6=peg$parsespace())===peg$FAILED&&(s6=null),s6!==peg$FAILED&&(s7=peg$parsefunction())!==peg$FAILED?(peg$savedPos=s4,s4=s5=peg$c2(0,s7)):(peg$currPos=s4,s4=peg$FAILED)):(peg$currPos=s4,s4=peg$FAILED);s3!==peg$FAILED?(peg$savedPos=s0,s0=s1=addMeta({type:"expression",chain:[s2].concat(s3)},text(),location())):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parsefunction(){var s0,s1,s2;return peg$silentFails++,s0=peg$currPos,(s1=peg$parseidentifier())!==peg$FAILED&&(s2=function(){var s0,s1,s2,s4;s0=peg$currPos,s1=[],s2=peg$currPos,peg$parsespace()!==peg$FAILED&&(s4=peg$parseargument_assignment())!==peg$FAILED?(peg$savedPos=s2,s2=s4):(peg$currPos=s2,s2=peg$FAILED);for(;s2!==peg$FAILED;)s1.push(s2),s2=peg$currPos,peg$parsespace()!==peg$FAILED&&(s4=peg$parseargument_assignment())!==peg$FAILED?(peg$savedPos=s2,s2=s4):(peg$currPos=s2,s2=peg$FAILED);s1!==peg$FAILED?((s2=peg$parsespace())===peg$FAILED&&(s2=null),s2!==peg$FAILED?(peg$savedPos=s0,s1=s1.reduce((accumulator,{name:name,value:value})=>({...accumulator,[name]:(accumulator[name]||[]).concat(value)}),{}),s0=s1):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED);return s0}())!==peg$FAILED?(peg$savedPos=s0,s0=s1=addMeta({type:"function",function:s1,arguments:s2},text(),location())):(peg$currPos=s0,s0=peg$FAILED),peg$silentFails--,s0===peg$FAILED&&(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c4)),s0}function peg$parseargument_assignment(){var s0,s1,s2,s3,s4,s5;return s0=peg$currPos,(s1=peg$parseidentifier())!==peg$FAILED?((s2=peg$parsespace())===peg$FAILED&&(s2=null),s2!==peg$FAILED?(61===input.charCodeAt(peg$currPos)?(s3="=",peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c7)),s3!==peg$FAILED?((s4=peg$parsespace())===peg$FAILED&&(s4=null),s4!==peg$FAILED&&(s5=peg$parseargument())!==peg$FAILED?(peg$savedPos=s0,s0=s1={name:s1,value:s5}):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED&&(s0=peg$currPos,(s1=peg$parseargument())!==peg$FAILED&&(peg$savedPos=s0,s1=function(value){return{name:"_",value:value}}(s1)),s0=s1),s0}function peg$parseargument(){var s0,s1,s2,s3,s4;return s0=peg$currPos,36===input.charCodeAt(peg$currPos)?(s1="$",peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c11)),s1===peg$FAILED&&(s1=null),s1!==peg$FAILED?(123===input.charCodeAt(peg$currPos)?(s2="{",peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c13)),s2!==peg$FAILED&&(s3=peg$parseexpression())!==peg$FAILED?(125===input.charCodeAt(peg$currPos)?(s4="}",peg$currPos++):(s4=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c15)),s4!==peg$FAILED?(peg$savedPos=s0,s0=s1=s3):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED&&(s0=peg$currPos,(s1=function(){var s0;peg$silentFails++,(s0=function(){var s0,s1,s2,s3;s0=peg$currPos,34===input.charCodeAt(peg$currPos)?(s1='"',peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c25));if(s1!==peg$FAILED){for(s2=[],s3=peg$parsedq_char();s3!==peg$FAILED;)s2.push(s3),s3=peg$parsedq_char();s2!==peg$FAILED?(34===input.charCodeAt(peg$currPos)?(s3='"',peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c25)),s3!==peg$FAILED?(peg$savedPos=s0,s1=peg$c26(s2),s0=s1):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;if(s0===peg$FAILED)if(s0=peg$currPos,39===input.charCodeAt(peg$currPos)?(s1="'",peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c28)),s1!==peg$FAILED){for(s2=[],s3=peg$parsesq_char();s3!==peg$FAILED;)s2.push(s3),s3=peg$parsesq_char();s2!==peg$FAILED?(39===input.charCodeAt(peg$currPos)?(s3="'",peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c28)),s3!==peg$FAILED?(peg$savedPos=s0,s1=peg$c26(s2),s0=s1):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;return s0}())===peg$FAILED&&(s0=function(){var s0,s1,s2;if(s0=peg$currPos,s1=[],(s2=peg$parseunquoted())!==peg$FAILED)for(;s2!==peg$FAILED;)s1.push(s2),s2=peg$parseunquoted();else s1=peg$FAILED;s1!==peg$FAILED&&(peg$savedPos=s0,result=s1.join(""),s1="null"===result?null:"true"===result||"false"!==result&&(isNaN(Number(result))?result:Number(result)));var result;return s0=s1}());peg$silentFails--,s0===peg$FAILED&&(peg$FAILED,0===peg$silentFails&&peg$fail(peg$c23));return s0}())!==peg$FAILED&&(peg$savedPos=s0,s1=addMeta(s1,text(),location())),s0=s1),s0}function peg$parseidentifier(){var s0,s1,s2;if(s0=peg$currPos,s1=[],peg$c20.test(input.charAt(peg$currPos))?(s2=input.charAt(peg$currPos),peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c21)),s2!==peg$FAILED)for(;s2!==peg$FAILED;)s1.push(s2),peg$c20.test(input.charAt(peg$currPos))?(s2=input.charAt(peg$currPos),peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c21));else s1=peg$FAILED;return s1!==peg$FAILED&&(peg$savedPos=s0,s1=s1.join("")),s0=s1}function peg$parsespace(){var s0,s1;if(s0=[],peg$c30.test(input.charAt(peg$currPos))?(s1=input.charAt(peg$currPos),peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c31)),s1!==peg$FAILED)for(;s1!==peg$FAILED;)s0.push(s1),peg$c30.test(input.charAt(peg$currPos))?(s1=input.charAt(peg$currPos),peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c31));else s0=peg$FAILED;return s0}function peg$parseunquoted(){var s0,s1,s2;return s0=peg$currPos,92===input.charCodeAt(peg$currPos)?(s1="\\",peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c33)),s1!==peg$FAILED?(peg$c34.test(input.charAt(peg$currPos))?(s2=input.charAt(peg$currPos),peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c35)),s2===peg$FAILED&&(92===input.charCodeAt(peg$currPos)?(s2="\\",peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c33))),s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=s2):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED&&(peg$c37.test(input.charAt(peg$currPos))?(s0=input.charAt(peg$currPos),peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c38))),s0}function peg$parsedq_char(){var s0,s1,s2;return s0=peg$currPos,92===input.charCodeAt(peg$currPos)?(s1="\\",peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c33)),s1!==peg$FAILED?(34===input.charCodeAt(peg$currPos)?(s2='"',peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c25)),s2===peg$FAILED&&(92===input.charCodeAt(peg$currPos)?(s2="\\",peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c33))),s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=s2):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED&&(peg$c39.test(input.charAt(peg$currPos))?(s0=input.charAt(peg$currPos),peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c40))),s0}function peg$parsesq_char(){var s0,s1,s2;return s0=peg$currPos,92===input.charCodeAt(peg$currPos)?(s1="\\",peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c33)),s1!==peg$FAILED?(39===input.charCodeAt(peg$currPos)?(s2="'",peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c28)),s2===peg$FAILED&&(92===input.charCodeAt(peg$currPos)?(s2="\\",peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c33))),s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=s2):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED&&(peg$c41.test(input.charAt(peg$currPos))?(s0=input.charAt(peg$currPos),peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c42))),s0}function addMeta(node,text,{start:{offset:start},end:{offset:end}}){return options.addMeta?{node:node,text:text,start:start,end:end}:node}if((peg$result=peg$startRuleFunction())!==peg$FAILED&&peg$currPos===input.length)return peg$result;throw peg$result!==peg$FAILED&&peg$currPos<input.length&&peg$fail({type:"end"}),peg$buildStructuredError(peg$maxFailExpected,peg$maxFailPos<input.length?input.charAt(peg$maxFailPos):null,peg$maxFailPos<input.length?peg$computeLocation(peg$maxFailPos,peg$maxFailPos+1):peg$computeLocation(peg$maxFailPos,peg$maxFailPos))}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return formatExpression}));var _format__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9);function formatExpression(ast){return Object(_format__WEBPACK_IMPORTED_MODULE_0__.a)(ast,"expression")}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return parseExpression}));var _parse__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14);function parseExpression(expression){return Object(_parse__WEBPACK_IMPORTED_MODULE_0__.a)(expression,"expression")}},function(module,exports){},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return serializeProvider}));var _get_type__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);const identity=x=>x,serializeProvider=types=>({serialize:value=>(types[Object(_get_type__WEBPACK_IMPORTED_MODULE_0__.a)(value)].serialize||identity)(value),deserialize:value=>(types[Object(_get_type__WEBPACK_IMPORTED_MODULE_0__.a)(value)].deserialize||identity)(value)})},function(module,__webpack_exports__,__webpack_require__){"use strict";function unboxExpressionValue({type:type,...value}){return value}__webpack_require__.d(__webpack_exports__,"a",(function(){return unboxExpressionValue}))},function(module,exports){},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ExpressionFunction}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_expression_function_parameter__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(27);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class ExpressionFunction{constructor(functionDefinition){_defineProperty(this,"name",void 0),_defineProperty(this,"aliases",void 0),_defineProperty(this,"type",void 0),_defineProperty(this,"fn",void 0),_defineProperty(this,"help",void 0),_defineProperty(this,"args",{}),_defineProperty(this,"inputTypes",void 0),_defineProperty(this,"disabled",void 0),_defineProperty(this,"telemetry",void 0),_defineProperty(this,"extract",void 0),_defineProperty(this,"inject",void 0),_defineProperty(this,"migrations",void 0),_defineProperty(this,"accepts",type=>!this.inputTypes||this.inputTypes.indexOf(type)>-1);const{name:name,type:_type,aliases:aliases,fn:fn,help:help,args:args,inputTypes:inputTypes,context:context,disabled:disabled,telemetry:telemetry,inject:inject,extract:extract,migrations:migrations}=functionDefinition;this.name=name,this.type=_type,this.aliases=aliases||[],this.fn=(input,params,handlers)=>Promise.resolve(fn(input,params,handlers)),this.help=help||"",this.inputTypes=inputTypes||(null==context?void 0:context.types),this.disabled=disabled||!1,this.telemetry=telemetry||((s,c)=>c),this.inject=inject||lodash__WEBPACK_IMPORTED_MODULE_0__.identity,this.extract=extract||(s=>({state:s,references:[]})),this.migrations=migrations||{};for(const[key,arg]of Object.entries(args||{}))this.args[key]=new _expression_function_parameter__WEBPACK_IMPORTED_MODULE_1__.a(key,arg)}}},function(module,exports){module.exports={add:function(...args){if(1===args.length)return Array.isArray(args[0])?args[0].reduce((result,current)=>result+current):args[0];return args.reduce((result,current)=>{if(Array.isArray(result)&&Array.isArray(current)){if(current.length!==result.length)throw new Error("Array length mismatch");return result.map((val,i)=>val+current[i])}return Array.isArray(result)?result.map(val=>val+current):Array.isArray(current)?current.map(val=>val+result):result+current})}}},function(module,exports){function size(a){if(Array.isArray(a))return a.length;throw new Error("Must pass an array")}module.exports={size:size},size.skipNumberValidation=!0},function(module,exports){const changeOfBase=(a,b)=>Math.log(a)/Math.log(b);module.exports={log:function(a,b=Math.E){if(b<=0)throw new Error("Base out of range");if(Array.isArray(a))return a.map(a=>{if(a<0)throw new Error("Must be greater than 0");return changeOfBase(a,b)});if(a<0)throw new Error("Must be greater than 0");return changeOfBase(a,b)}}},function(module,exports){module.exports={max:function(...args){if(1===args.length)return Array.isArray(args[0])?args[0].reduce((result,current)=>Math.max(result,current)):args[0];return args.reduce((result,current)=>{if(Array.isArray(result)&&Array.isArray(current)){if(current.length!==result.length)throw new Error("Array length mismatch");return result.map((val,i)=>Math.max(val,current[i]))}return Array.isArray(result)?result.map(val=>Math.max(val,current)):Array.isArray(current)?current.map(val=>Math.max(val,result)):Math.max(result,current)})}}},function(module,exports){module.exports={transpose:function(args,index){const len=args[index].length;return args[index].map((col,i)=>args.map(row=>{if(Array.isArray(row)){if(row.length!==len)throw new Error("Array length mismatch");return row[i]}return row}))}}},function(module,exports){module.exports={min:function(...args){if(1===args.length)return Array.isArray(args[0])?args[0].reduce((result,current)=>Math.min(result,current)):args[0];return args.reduce((result,current)=>{if(Array.isArray(result)&&Array.isArray(current)){if(current.length!==result.length)throw new Error("Array length mismatch");return result.map((val,i)=>Math.min(val,current[i]))}return Array.isArray(result)?result.map(val=>Math.min(val,current)):Array.isArray(current)?current.map(val=>Math.min(val,result)):Math.min(result,current)})}}},function(module,exports){module.exports={subtract:function(a,b){if(Array.isArray(a)&&Array.isArray(b)){if(a.length!==b.length)throw new Error("Array length mismatch");return a.map((val,i)=>val-b[i])}return Array.isArray(a)?a.map(a=>a-b):Array.isArray(b)?b.map(b=>a-b):a-b}}},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ExpressionRendererRegistry}));var _expression_renderer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(29);class ExpressionRendererRegistry{constructor(){var obj,key,value;obj=this,key="renderers",value=new Map,key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}register(definition){"function"==typeof definition&&(definition=definition());const renderer=new _expression_renderer__WEBPACK_IMPORTED_MODULE_0__.a(definition);this.renderers.set(renderer.name,renderer)}get(id){return this.renderers.get(id)||null}toJS(){return this.toArray().reduce((acc,renderer)=>({...acc,[renderer.name]:renderer}),{})}toArray(){return[...this.renderers.values()]}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67);for(var __WEBPACK_IMPORT_KEY__ in _types__WEBPACK_IMPORTED_MODULE_0__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _types__WEBPACK_IMPORTED_MODULE_0__[key]}))}(__WEBPACK_IMPORT_KEY__);var _container__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(31);__webpack_require__.d(__webpack_exports__,"executionPureTransitions",(function(){return _container__WEBPACK_IMPORTED_MODULE_1__.b})),__webpack_require__.d(__webpack_exports__,"createExecutionContainer",(function(){return _container__WEBPACK_IMPORTED_MODULE_1__.a}));var _execution__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(30);__webpack_require__.d(__webpack_exports__,"Execution",(function(){return _execution__WEBPACK_IMPORTED_MODULE_2__.a}));var _execution_contract__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(34);__webpack_require__.d(__webpack_exports__,"ExecutionContract",(function(){return _execution_contract__WEBPACK_IMPORTED_MODULE_3__.a}))},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return expressions_services_ExpressionsService}));var executor=__webpack_require__(16),expression_renderers=__webpack_require__(28);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class expressions_services_ExpressionsService{constructor({executor:_executor=executor.a.createWithDefaults(),renderers:_renderers=new expression_renderers.ExpressionRendererRegistry}={}){_defineProperty(this,"executor",void 0),_defineProperty(this,"renderers",void 0),_defineProperty(this,"registerFunction",functionDefinition=>this.executor.registerFunction(functionDefinition)),_defineProperty(this,"registerType",typeDefinition=>this.executor.registerType(typeDefinition)),_defineProperty(this,"registerRenderer",definition=>this.renderers.register(definition)),_defineProperty(this,"run",(ast,input,params)=>this.executor.run(ast,input,params)),_defineProperty(this,"getFunction",name=>this.executor.getFunction(name)),_defineProperty(this,"getFunctions",()=>this.executor.getFunctions()),_defineProperty(this,"getRenderer",name=>this.renderers.get(name)),_defineProperty(this,"getRenderers",()=>this.renderers.toJS()),_defineProperty(this,"getType",name=>this.executor.getType(name)),_defineProperty(this,"getTypes",()=>this.executor.getTypes()),_defineProperty(this,"execute",(ast,input,params)=>{const execution=this.executor.createExecution(ast,params);return execution.start(input),execution.contract}),_defineProperty(this,"fork",()=>{const executor=this.executor.fork(),renderers=this.renderers;return new expressions_services_ExpressionsService({executor:executor,renderers:renderers})}),_defineProperty(this,"telemetry",(state,telemetryData={})=>this.executor.telemetry(state,telemetryData)),_defineProperty(this,"extract",state=>this.executor.extract(state)),_defineProperty(this,"inject",(state,references)=>this.executor.inject(state,references)),_defineProperty(this,"migrate",(state,version)=>this.executor.migrate(state,version)),this.executor=_executor,this.renderers=_renderers}setup(){return this}start(){return this}stop(){}}},function(module,exports,__webpack_require__){const{get:get}=__webpack_require__(2),{parse:parseFn}=__webpack_require__(91),{functions:includedFunctions}=__webpack_require__(92);function parse(input,options){if(null==input)throw new Error("Missing expression");if("string"!=typeof input)throw new Error("Expression must be a string");try{return parseFn(input,options)}catch(e){throw new Error("Failed to parse expression. "+e.message)}}function interpret(node,scope,injectedFunctions){const functions=Object.assign({},includedFunctions,injectedFunctions);return exec(node);function exec(node){if("number"==typeof node)return node;if("function"===node.type)return function(node){const{name:name,args:args}=node,fn=functions[name];if(!fn)throw new Error("No such function: "+name);const execOutput=args.map(exec);return fn.skipNumberValidation||function isOperable(args){return args.every(arg=>Array.isArray(arg)?isOperable(arg):"number"==typeof arg&&!isNaN(arg))}(execOutput)?fn(...execOutput):NaN}(node);if("variable"===node.type){const val=function(scope,node){const val=get(scope,node);return void 0!==val?val:scope[node]}(scope,node.value);if(void 0===val)throw new Error("Unknown variable: "+node.value);return val}if("namedArgument"===node.type)throw new Error("Named arguments are not supported in tinymath itself, at "+node.name)}}module.exports={parse:parse,evaluate:function(expression,scope={},injectedFunctions={}){return scope=scope||{},interpret(parse(expression),scope,injectedFunctions)},interpret:interpret}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/inspector/common");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){for(var classes=[],i=0;i<arguments.length;i++){var arg=arguments[i];if(arg){var argType=typeof arg;if("string"===argType||"number"===argType)classes.push(arg);else if(Array.isArray(arg)&&arg.length){var inner=classNames.apply(null,arg);inner&&classes.push(inner)}else if("object"===argType)for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&classes.push(key)}}return classes.join(" ")}module.exports?(classNames.default=classNames,module.exports=classNames):void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,[]))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},function(module,exports){module.exports=__kbnSharedDeps__.Theme.euiLightVars},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(74);__kbnBundles__.define("plugin/expressions/public",__webpack_require__,128),__kbnBundles__.define("plugin/expressions/common",__webpack_require__,0),__kbnBundles__.define("plugin/expressions/common/fonts",__webpack_require__,19)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__.expressions},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(76);case"v7light":return __webpack_require__(78);case"v8dark":return __webpack_require__(80);case"v8light":return __webpack_require__(82)}},function(module,exports,__webpack_require__){var api=__webpack_require__(21),content=__webpack_require__(77);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(22)(!1)).push([module.i,".expExpressionRenderer{position:relative;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.expExpressionRenderer__expression{width:100%;height:100%}.expExpressionRenderer-isEmpty .expExpressionRenderer__expression,.expExpressionRenderer-hasError .expExpressionRenderer__expression{display:none}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(21),content=__webpack_require__(79);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(22)(!1)).push([module.i,".expExpressionRenderer{position:relative;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.expExpressionRenderer__expression{width:100%;height:100%}.expExpressionRenderer-isEmpty .expExpressionRenderer__expression,.expExpressionRenderer-hasError .expExpressionRenderer__expression{display:none}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(21),content=__webpack_require__(81);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(22)(!1)).push([module.i,".expExpressionRenderer{position:relative;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.expExpressionRenderer__expression{width:100%;height:100%}.expExpressionRenderer-isEmpty .expExpressionRenderer__expression,.expExpressionRenderer-hasError .expExpressionRenderer__expression{display:none}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(21),content=__webpack_require__(83);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(22)(!1)).push([module.i,".expExpressionRenderer{position:relative;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.expExpressionRenderer__expression{width:100%;height:100%}.expExpressionRenderer-isEmpty .expExpressionRenderer__expression,.expExpressionRenderer-hasError .expExpressionRenderer__expression{display:none}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromExpression=fromExpression,exports.safeElementFromExpression=function(expression){try{return fromExpression(expression)}catch(e){return fromExpression("markdown\n\"## Crud.\nCanvas could not parse this element's expression. I am so sorry this error isn't more useful. I promise it will be soon.\n\nThanks for understanding,\n#### Management\n\"")}},exports.toExpression=function(astObj,type="expression"){if("argument"===type)return getArgumentString(astObj);if(!["expression","function"].includes((0,_get_type.getType)(astObj)))throw new Error("Expression must be an expression or argument function");if("expression"===(0,_get_type.getType)(astObj)){if(!Array.isArray(astObj.chain))throw new Error("Expressions must contain a chain");return getExpression(astObj.chain)}const expArgs=getExpressionArgs(astObj);return fnWithArgs(astObj.function,expArgs)};var _get_type=__webpack_require__(40),_grammar=__webpack_require__(47);function getArgumentString(arg,argKey,level=0){const type=(0,_get_type.getType)(arg);function maybeArgKey(argKey,argString){return null==argKey||"_"===argKey?argString:`${argKey}=${argString}`}if("string"===type){return maybeArgKey(argKey,`"${arg.replace(/[\\"]/g,"\\$&")}"`)}if("boolean"===type||"null"===type||"number"===type)return maybeArgKey(argKey,""+arg);if("expression"===type)return maybeArgKey(argKey,`{${getExpression(arg.chain,level+1)}}`);throw new Error("Invalid argument type in AST: "+type)}function getExpressionArgs(block,level=0){const args=block.arguments;if(!("object"==typeof args&&null!=args&&!Array.isArray(args)))throw new Error("Arguments can only be an object");const argKeys=Object.keys(args);return argKeys.map(argKey=>args[argKey].reduce((acc,arg)=>{const argString=getArgumentString(arg,argKey,level),lineLength=acc.split("\n").pop().length;return 0===level&&lineLength+argString.length>80?`${acc}\n  ${argString}`:lineLength>0?`${acc} ${argString}`:argString},""))}function fnWithArgs(fnName,args){return args&&0!==args.length?`${fnName} ${args.join(" ")}`:fnName}function getExpression(chain,level=0){if(!chain)throw new Error("Expressions must contain a chain");const separator=level>0?" | ":"\n| ";return chain.map(chainObj=>{if("function"===(0,_get_type.getType)(chainObj)){const fn=chainObj.function;if(!fn||0===fn.length)throw new Error("Functions must have a function name");return fnWithArgs(fn,getExpressionArgs(chainObj,level))}},[]).join(separator)}function fromExpression(expression,type="expression"){try{return(0,_grammar.parse)(String(expression),{startRule:type})}catch(e){throw new Error("Unable to parse expression: "+e.message)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Fn=function(config){this.name=config.name,this.type=config.type,this.aliases=config.aliases||[],this.fn=(...args)=>Promise.resolve(config.fn(...args)),this.help=config.help||"",this.args=(0,_lodash.mapValues)(config.args||{},(arg,name)=>new _arg.Arg({name:name,...arg})),this.context=config.context||{},this.accepts=type=>!this.context.types||(0,_lodash.includes)(this.context.types,type)};var _lodash=__webpack_require__(2),_arg=__webpack_require__(86)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Arg=function(config){if("_"===config.name)throw Error("Arg names must not be _. Use it in aliases instead.");this.name=config.name,this.required=config.required||!1,this.help=config.help||"",this.types=config.types||[],this.default=config.default,this.aliases=config.aliases||[],this.multi=null!=config.multi&&config.multi,this.resolve=null==config.resolve||config.resolve,this.options=config.options||[],this.accepts=type=>!this.types.length||(0,_lodash.includes)(config.types,type)};var _lodash=__webpack_require__(2)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.castProvider=function(types){return function(node,toTypeNames){if(!toTypeNames||0===toTypeNames.length)return node;const fromTypeName=(0,_get_type.getType)(node);if(toTypeNames.includes(fromTypeName))return node;const fromTypeDef=types[fromTypeName];for(let i=0;i<toTypeNames.length;i++){if(fromTypeDef&&fromTypeDef.castsTo(toTypeNames[i]))return fromTypeDef.to(node,toTypeNames[i],types);const toTypeDef=types[toTypeNames[i]];if(toTypeDef&&toTypeDef.castsFrom(fromTypeName))return toTypeDef.from(node,types)}throw new Error(`Can not cast '${fromTypeName}' to any of '${toTypeNames.join(", ")}'`)}};var _get_type=__webpack_require__(40)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getByAlias=function(specs,name){const lowerCaseName=name.toLowerCase();return Object.values(specs).find(({name:name,aliases:aliases})=>name.toLowerCase()===lowerCaseName||(aliases||[]).some(alias=>alias.toLowerCase()===lowerCaseName))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Registry=void 0;var _lodash=__webpack_require__(2);exports.Registry=class{constructor(prop="name"){if("string"!=typeof prop)throw new Error("Registry property name must be a string");this._prop=prop,this._indexed=new Object}wrapper(obj){return obj}register(fn){const obj="function"==typeof fn?fn():fn;if("object"!=typeof obj||!obj[this._prop])throw new Error(`Registered functions must return an object with a ${this._prop} property`);this._indexed[obj[this._prop].toLowerCase()]=this.wrapper(obj)}toJS(){return Object.keys(this._indexed).reduce((acc,key)=>(acc[key]=this.get(key),acc),{})}toArray(){return Object.keys(this._indexed).map(key=>this.get(key))}get(name){if(void 0===name)return null;const lowerCaseName=name.toLowerCase();return this._indexed[lowerCaseName]?(0,_lodash.clone)(this._indexed[lowerCaseName]):null}getProp(){return this._prop}reset(){this._indexed=new Object}}},function(module,exports,__webpack_require__){"use strict";function register(registries,specs){return Object.keys(specs).forEach(registryName=>{if(!registries[registryName])throw new Error(`There is no registry named "${registryName}".`);if(!registries[registryName].register)throw new Error(`Registry "${registryName}" must have a register function.`);specs[registryName].forEach(f=>registries[registryName].register(f))}),registries}Object.defineProperty(exports,"__esModule",{value:!0}),exports.addRegistries=function(registries,newRegistries){return Object.keys(newRegistries).forEach(registryName=>{if(registries[registryName])throw new Error(`There is already a registry named "${registryName}".`);registries[registryName]=newRegistries[registryName]}),registries},exports.register=register,exports.registryFactory=function(registries){return{registries:()=>registries,register:specs=>register(registries,specs)}}},function(module,exports,__webpack_require__){"use strict";function peg$SyntaxError(message,expected,found,location){this.message=message,this.expected=expected,this.found=found,this.location=location,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}!function(child,parent){function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor}(peg$SyntaxError,Error),peg$SyntaxError.buildMessage=function(expected,found){var DESCRIBE_EXPECTATION_FNS={literal:function(expectation){return'"'+literalEscape(expectation.text)+'"'},class:function(expectation){var i,escapedParts="";for(i=0;i<expectation.parts.length;i++)escapedParts+=expectation.parts[i]instanceof Array?classEscape(expectation.parts[i][0])+"-"+classEscape(expectation.parts[i][1]):classEscape(expectation.parts[i]);return"["+(expectation.inverted?"^":"")+escapedParts+"]"},any:function(expectation){return"any character"},end:function(expectation){return"end of input"},other:function(expectation){return expectation.description}};function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase()}function literalEscape(s){return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(ch){return"\\x0"+hex(ch)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(ch){return"\\x"+hex(ch)}))}function classEscape(s){return s.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(ch){return"\\x0"+hex(ch)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(ch){return"\\x"+hex(ch)}))}return"Expected "+function(expected){var i,j,expectation,descriptions=new Array(expected.length);for(i=0;i<expected.length;i++)descriptions[i]=(expectation=expected[i],DESCRIBE_EXPECTATION_FNS[expectation.type](expectation));if(descriptions.sort(),descriptions.length>0){for(i=1,j=1;i<descriptions.length;i++)descriptions[i-1]!==descriptions[i]&&(descriptions[j]=descriptions[i],j++);descriptions.length=j}switch(descriptions.length){case 1:return descriptions[0];case 2:return descriptions[0]+" or "+descriptions[1];default:return descriptions.slice(0,-1).join(", ")+", or "+descriptions[descriptions.length-1]}}(expected)+" but "+function(found){return found?'"'+literalEscape(found)+'"':"end of input"}(found)+" found."},module.exports={SyntaxError:peg$SyntaxError,parse:function(input,options){options=void 0!==options?options:{};var peg$result,peg$FAILED={},peg$startRuleFunctions={start:peg$parsestart},peg$startRuleFunction=peg$parsestart,peg$c0=peg$otherExpectation("whitespace"),peg$c1=/^[ \t\n\r]/,peg$c2=peg$classExpectation([" ","\t","\n","\r"],!1,!1),peg$c3=/^[ ]/,peg$c4=peg$classExpectation([" "],!1,!1),peg$c5=/^["']/,peg$c6=peg$classExpectation(['"',"'"],!1,!1),peg$c9=(peg$classExpectation([["A","Z"],["a","z"],"_","@",".","[","]","-"],!1,!1),/^[0-9A-Za-z._@[\]\-]/),peg$c10=peg$classExpectation([["0","9"],["A","Z"],["a","z"],".","_","@","[","]","-"],!1,!1),peg$c11=peg$otherExpectation("literal"),peg$c16=peg$literalExpectation("+",!1),peg$c18=peg$literalExpectation("-",!1),peg$c21=peg$literalExpectation("*",!1),peg$c23=peg$literalExpectation("/",!1),peg$c26=peg$literalExpectation("(",!1),peg$c28=peg$literalExpectation(")",!1),peg$c30=peg$otherExpectation("arguments"),peg$c32=peg$literalExpectation(",",!1),peg$c33=function(first,arg){return arg},peg$c35=/^["]/,peg$c36=peg$classExpectation(['"'],!1,!1),peg$c37=function(value){return value.join("")},peg$c38=/^[']/,peg$c39=peg$classExpectation(["'"],!1,!1),peg$c40=/^[a-zA-Z_]/,peg$c41=peg$classExpectation([["a","z"],["A","Z"],"_"],!1,!1),peg$c43=peg$literalExpectation("=",!1),peg$c45=peg$otherExpectation("function"),peg$c46=/^[a-zA-Z_\-]/,peg$c47=peg$classExpectation([["a","z"],["A","Z"],"_","-"],!1,!1),peg$c49=peg$otherExpectation("number"),peg$c51=/^[eE]/,peg$c52=peg$classExpectation(["e","E"],!1,!1),peg$c53=peg$otherExpectation("exponent"),peg$c55=peg$literalExpectation(".",!1),peg$c57=peg$literalExpectation("0",!1),peg$c58=/^[1-9]/,peg$c59=peg$classExpectation([["1","9"]],!1,!1),peg$c60=/^[0-9]/,peg$c61=peg$classExpectation([["0","9"]],!1,!1),peg$currPos=0,peg$savedPos=0,peg$posDetailsCache=[{line:1,column:1}],peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions))throw new Error("Can't start parsing from rule \""+options.startRule+'".');peg$startRuleFunction=peg$startRuleFunctions[options.startRule]}function text(){return input.substring(peg$savedPos,peg$currPos)}function location(){return peg$computeLocation(peg$savedPos,peg$currPos)}function peg$literalExpectation(text,ignoreCase){return{type:"literal",text:text,ignoreCase:ignoreCase}}function peg$classExpectation(parts,inverted,ignoreCase){return{type:"class",parts:parts,inverted:inverted,ignoreCase:ignoreCase}}function peg$otherExpectation(description){return{type:"other",description:description}}function peg$computePosDetails(pos){var p,details=peg$posDetailsCache[pos];if(details)return details;for(p=pos-1;!peg$posDetailsCache[p];)p--;for(details={line:(details=peg$posDetailsCache[p]).line,column:details.column};p<pos;)10===input.charCodeAt(p)?(details.line++,details.column=1):details.column++,p++;return peg$posDetailsCache[pos]=details,details}function peg$computeLocation(startPos,endPos){var startPosDetails=peg$computePosDetails(startPos),endPosDetails=peg$computePosDetails(endPos);return{start:{offset:startPos,line:startPosDetails.line,column:startPosDetails.column},end:{offset:endPos,line:endPosDetails.line,column:endPosDetails.column}}}function peg$fail(expected){peg$currPos<peg$maxFailPos||(peg$currPos>peg$maxFailPos&&(peg$maxFailPos=peg$currPos,peg$maxFailExpected=[]),peg$maxFailExpected.push(expected))}function peg$buildStructuredError(expected,found,location){return new peg$SyntaxError(peg$SyntaxError.buildMessage(expected,found),expected,found,location)}function peg$parsestart(){return peg$parseAddSubtract()}function peg$parse_(){var s0,s1;for(peg$silentFails++,s0=[],peg$c1.test(input.charAt(peg$currPos))?(s1=input.charAt(peg$currPos),peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c2));s1!==peg$FAILED;)s0.push(s1),peg$c1.test(input.charAt(peg$currPos))?(s1=input.charAt(peg$currPos),peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c2));return peg$silentFails--,s0===peg$FAILED&&(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c0)),s0}function peg$parseSpace(){var s0;return peg$c3.test(input.charAt(peg$currPos))?(s0=input.charAt(peg$currPos),peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c4)),s0}function peg$parseQuote(){var s0;return peg$c5.test(input.charAt(peg$currPos))?(s0=input.charAt(peg$currPos),peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c6)),s0}function peg$parseValidChar(){var s0;return peg$c9.test(input.charAt(peg$currPos))?(s0=input.charAt(peg$currPos),peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c10)),s0}function peg$parseLiteral(){var s0,s2;return peg$silentFails++,s0=peg$currPos,peg$parse_()!==peg$FAILED?((s2=peg$parseNumber())===peg$FAILED&&(s2=function(){var s0,s1,s2,s3,s4;if(s0=peg$currPos,(s1=peg$parse_())!==peg$FAILED)if((s2=peg$parseQuote())!==peg$FAILED){for(s3=[],(s4=peg$parseValidChar())===peg$FAILED&&(s4=peg$parseSpace());s4!==peg$FAILED;)s3.push(s4),(s4=peg$parseValidChar())===peg$FAILED&&(s4=peg$parseSpace());s3!==peg$FAILED&&(s4=peg$parseQuote())!==peg$FAILED&&peg$parse_()!==peg$FAILED?(peg$savedPos=s0,s1={type:"variable",value:s3.join(""),location:simpleLocation(location()),text:text()},s0=s1):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;if(s0===peg$FAILED)if(s0=peg$currPos,(s1=peg$parse_())!==peg$FAILED){if(s2=[],(s3=peg$parseValidChar())!==peg$FAILED)for(;s3!==peg$FAILED;)s2.push(s3),s3=peg$parseValidChar();else s2=peg$FAILED;s2!==peg$FAILED&&(s3=peg$parse_())!==peg$FAILED?(peg$savedPos=s0,s1={type:"variable",value:s2.join(""),location:simpleLocation(location()),text:text()},s0=s1):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;return s0}()),s2!==peg$FAILED&&peg$parse_()!==peg$FAILED?(peg$savedPos=s0,s0=s2):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),peg$silentFails--,s0===peg$FAILED&&(peg$FAILED,0===peg$silentFails&&peg$fail(peg$c11)),s0}function peg$parseAddSubtract(){var s0,s2,s3,s4,s5,s6,left;if(s0=peg$currPos,peg$parse_()!==peg$FAILED)if((s2=peg$parseMultiplyDivide())!==peg$FAILED){for(s3=[],s4=peg$currPos,43===input.charCodeAt(peg$currPos)?(s5="+",peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c16)),s5===peg$FAILED&&(45===input.charCodeAt(peg$currPos)?(s5="-",peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c18))),s5!==peg$FAILED&&(s6=peg$parseMultiplyDivide())!==peg$FAILED?s4=s5=[s5,s6]:(peg$currPos=s4,s4=peg$FAILED);s4!==peg$FAILED;)s3.push(s4),s4=peg$currPos,43===input.charCodeAt(peg$currPos)?(s5="+",peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c16)),s5===peg$FAILED&&(45===input.charCodeAt(peg$currPos)?(s5="-",peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c18))),s5!==peg$FAILED&&(s6=peg$parseMultiplyDivide())!==peg$FAILED?s4=s5=[s5,s6]:(peg$currPos=s4,s4=peg$FAILED);s3!==peg$FAILED&&(s4=peg$parse_())!==peg$FAILED?(peg$savedPos=s0,left=s2,s0=s3.reduce((acc,curr)=>({type:"function",name:"+"===curr[0]?"add":"subtract",args:[acc,curr[1]],location:simpleLocation(location()),text:text()}),left)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parseMultiplyDivide(){var s0,s2,s3,s4,s5,s6,left;if(s0=peg$currPos,peg$parse_()!==peg$FAILED)if((s2=peg$parseFactor())!==peg$FAILED){for(s3=[],s4=peg$currPos,42===input.charCodeAt(peg$currPos)?(s5="*",peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c21)),s5===peg$FAILED&&(47===input.charCodeAt(peg$currPos)?(s5="/",peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c23))),s5!==peg$FAILED&&(s6=peg$parseFactor())!==peg$FAILED?s4=s5=[s5,s6]:(peg$currPos=s4,s4=peg$FAILED);s4!==peg$FAILED;)s3.push(s4),s4=peg$currPos,42===input.charCodeAt(peg$currPos)?(s5="*",peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c21)),s5===peg$FAILED&&(47===input.charCodeAt(peg$currPos)?(s5="/",peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c23))),s5!==peg$FAILED&&(s6=peg$parseFactor())!==peg$FAILED?s4=s5=[s5,s6]:(peg$currPos=s4,s4=peg$FAILED);s3!==peg$FAILED&&(s4=peg$parse_())!==peg$FAILED?(peg$savedPos=s0,left=s2,s0=s3.reduce((acc,curr)=>({type:"function",name:"*"===curr[0]?"multiply":"divide",args:[acc,curr[1]],location:simpleLocation(location()),text:text()}),left)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parseFactor(){var s0;return(s0=function(){var s0,s2,s4,s6;s0=peg$currPos,peg$parse_()!==peg$FAILED?(40===input.charCodeAt(peg$currPos)?(s2="(",peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c26)),s2!==peg$FAILED&&peg$parse_()!==peg$FAILED&&(s4=peg$parseAddSubtract())!==peg$FAILED&&peg$parse_()!==peg$FAILED?(41===input.charCodeAt(peg$currPos)?(s6=")",peg$currPos++):(s6=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c28)),s6!==peg$FAILED&&peg$parse_()!==peg$FAILED?(peg$savedPos=s0,s0=s4):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED);return s0}())===peg$FAILED&&(s0=function(){var s0,s1,s2,s3,s5,s7;if(peg$silentFails++,s0=peg$currPos,(s1=peg$parse_())!==peg$FAILED){if(s2=[],peg$c46.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c47)),s3!==peg$FAILED)for(;s3!==peg$FAILED;)s2.push(s3),peg$c46.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c47));else s2=peg$FAILED;s2!==peg$FAILED?(40===input.charCodeAt(peg$currPos)?(s3="(",peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c26)),s3!==peg$FAILED&&peg$parse_()!==peg$FAILED?((s5=function(){var s0,s1,s2,s3,s4,s5,s7;if(peg$silentFails++,s0=peg$currPos,(s1=peg$parseArgument())!==peg$FAILED){for(s2=[],s3=peg$currPos,(s4=peg$parse_())!==peg$FAILED?(44===input.charCodeAt(peg$currPos)?(s5=",",peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c32)),s5!==peg$FAILED&&peg$parse_()!==peg$FAILED&&(s7=peg$parseArgument())!==peg$FAILED?(peg$savedPos=s3,s4=peg$c33(0,s7),s3=s4):(peg$currPos=s3,s3=peg$FAILED)):(peg$currPos=s3,s3=peg$FAILED);s3!==peg$FAILED;)s2.push(s3),s3=peg$currPos,(s4=peg$parse_())!==peg$FAILED?(44===input.charCodeAt(peg$currPos)?(s5=",",peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c32)),s5!==peg$FAILED&&peg$parse_()!==peg$FAILED&&(s7=peg$parseArgument())!==peg$FAILED?(peg$savedPos=s3,s4=peg$c33(0,s7),s3=s4):(peg$currPos=s3,s3=peg$FAILED)):(peg$currPos=s3,s3=peg$FAILED);s2!==peg$FAILED&&(s3=peg$parse_())!==peg$FAILED?(44===input.charCodeAt(peg$currPos)?(s4=",",peg$currPos++):(s4=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c32)),s4===peg$FAILED&&(s4=null),s4!==peg$FAILED?(peg$savedPos=s0,s1=[s1].concat(s2),s0=s1):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;peg$silentFails--,s0===peg$FAILED&&(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c30));return s0}())===peg$FAILED&&(s5=null),s5!==peg$FAILED&&peg$parse_()!==peg$FAILED?(41===input.charCodeAt(peg$currPos)?(s7=")",peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c28)),s7!==peg$FAILED&&peg$parse_()!==peg$FAILED?(peg$savedPos=s0,args=s5,s1={type:"function",name:s2.join(""),args:args||[],location:simpleLocation(location()),text:text()},s0=s1):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;var args;peg$silentFails--,s0===peg$FAILED&&(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c45));return s0}())===peg$FAILED&&(s0=peg$parseLiteral()),s0}function peg$parseArgument(){var s0,s1,s2,s3,s5,value;if(s0=peg$currPos,s1=[],peg$c40.test(input.charAt(peg$currPos))?(s2=input.charAt(peg$currPos),peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c41)),s2!==peg$FAILED)for(;s2!==peg$FAILED;)s1.push(s2),peg$c40.test(input.charAt(peg$currPos))?(s2=input.charAt(peg$currPos),peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c41));else s1=peg$FAILED;return s1!==peg$FAILED&&(s2=peg$parse_())!==peg$FAILED?(61===input.charCodeAt(peg$currPos)?(s3="=",peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c43)),s3!==peg$FAILED&&peg$parse_()!==peg$FAILED?((s5=peg$parseNumber())===peg$FAILED&&(s5=function(){var s0,s1,s2,s3;if(s0=peg$currPos,peg$c35.test(input.charAt(peg$currPos))?(s1=input.charAt(peg$currPos),peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c36)),s1!==peg$FAILED){if(s2=[],(s3=peg$parseValidChar())!==peg$FAILED)for(;s3!==peg$FAILED;)s2.push(s3),s3=peg$parseValidChar();else s2=peg$FAILED;s2!==peg$FAILED?(peg$c35.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c36)),s3!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c37(s2)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;if(s0===peg$FAILED){if(s0=peg$currPos,peg$c38.test(input.charAt(peg$currPos))?(s1=input.charAt(peg$currPos),peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c39)),s1!==peg$FAILED){if(s2=[],(s3=peg$parseValidChar())!==peg$FAILED)for(;s3!==peg$FAILED;)s2.push(s3),s3=peg$parseValidChar();else s2=peg$FAILED;s2!==peg$FAILED?(peg$c38.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c39)),s3!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c37(s2)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;if(s0===peg$FAILED){if(s0=peg$currPos,s1=[],(s2=peg$parseValidChar())!==peg$FAILED)for(;s2!==peg$FAILED;)s1.push(s2),s2=peg$parseValidChar();else s1=peg$FAILED;s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c37(s1)),s0=s1}}return s0}()),s5!==peg$FAILED&&peg$parse_()!==peg$FAILED?(peg$savedPos=s0,value=s5,s0=s1={type:"namedArgument",name:s1.join(""),value:value,location:simpleLocation(location()),text:text()}):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED&&(s0=peg$parseAddSubtract()),s0}function peg$parseNumber(){var s0,s1,s3,s4;return peg$silentFails++,s0=peg$currPos,45===input.charCodeAt(peg$currPos)?(s1="-",peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c18)),s1===peg$FAILED&&(s1=null),s1!==peg$FAILED&&function(){var s0,s1,s2,s3;48===input.charCodeAt(peg$currPos)?(s0="0",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c57));if(s0===peg$FAILED)if(s0=peg$currPos,peg$c58.test(input.charAt(peg$currPos))?(s1=input.charAt(peg$currPos),peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c59)),s1!==peg$FAILED){for(s2=[],s3=peg$parseDigit();s3!==peg$FAILED;)s2.push(s3),s3=peg$parseDigit();s2!==peg$FAILED?s0=s1=[s1,s2]:(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;return s0}()!==peg$FAILED?((s3=function(){var s0,s1,s2,s3;s0=peg$currPos,46===input.charCodeAt(peg$currPos)?(s1=".",peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c55));if(s1!==peg$FAILED){if(s2=[],(s3=peg$parseDigit())!==peg$FAILED)for(;s3!==peg$FAILED;)s2.push(s3),s3=peg$parseDigit();else s2=peg$FAILED;s2!==peg$FAILED?s0=s1=[s1,s2]:(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;return s0}())===peg$FAILED&&(s3=null),s3!==peg$FAILED?((s4=function(){var s0,s1,s2,s3,s4;if(peg$silentFails++,s0=peg$currPos,(s1=function(){var s0;peg$c51.test(input.charAt(peg$currPos))?(s0=input.charAt(peg$currPos),peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c52));return s0}())!==peg$FAILED)if(45===input.charCodeAt(peg$currPos)?(s2="-",peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c18)),s2===peg$FAILED&&(s2=null),s2!==peg$FAILED){if(s3=[],(s4=peg$parseDigit())!==peg$FAILED)for(;s4!==peg$FAILED;)s3.push(s4),s4=peg$parseDigit();else s3=peg$FAILED;s3!==peg$FAILED?s0=s1=[s1,s2,s3]:(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;peg$silentFails--,s0===peg$FAILED&&(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c53));return s0}())===peg$FAILED&&(s4=null),s4!==peg$FAILED?(peg$savedPos=s0,s0=s1=parseFloat(text())):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),peg$silentFails--,s0===peg$FAILED&&(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c49)),s0}function peg$parseDigit(){var s0;return peg$c60.test(input.charAt(peg$currPos))?(s0=input.charAt(peg$currPos),peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c61)),s0}function simpleLocation(location){return{min:location.start.offset,max:location.end.offset}}if((peg$result=peg$startRuleFunction())!==peg$FAILED&&peg$currPos===input.length)return peg$result;throw peg$result!==peg$FAILED&&peg$currPos<input.length&&peg$fail({type:"end"}),peg$buildStructuredError(peg$maxFailExpected,peg$maxFailPos<input.length?input.charAt(peg$maxFailPos):null,peg$maxFailPos<input.length?peg$computeLocation(peg$maxFailPos,peg$maxFailPos+1):peg$computeLocation(peg$maxFailPos,peg$maxFailPos))}}},function(module,exports,__webpack_require__){const{abs:abs}=__webpack_require__(93),{add:add}=__webpack_require__(57),{cbrt:cbrt}=__webpack_require__(94),{ceil:ceil}=__webpack_require__(95),{clamp:clamp}=__webpack_require__(96),{cos:cos}=__webpack_require__(97),{count:count}=__webpack_require__(98),{cube:cube}=__webpack_require__(99),{degtorad:degtorad}=__webpack_require__(100),{divide:divide}=__webpack_require__(101),{exp:exp}=__webpack_require__(102),{first:first}=__webpack_require__(103),{fix:fix}=__webpack_require__(104),{floor:floor}=__webpack_require__(105),{last:last}=__webpack_require__(106),{log:log}=__webpack_require__(59),{log10:log10}=__webpack_require__(107),{max:max}=__webpack_require__(60),{mean:mean}=__webpack_require__(108),{median:median}=__webpack_require__(109),{min:min}=__webpack_require__(62),{mod:mod}=__webpack_require__(110),{mode:mode}=__webpack_require__(111),{multiply:multiply}=__webpack_require__(112),{pi:pi}=__webpack_require__(113),{pow:pow}=__webpack_require__(41),{radtodeg:radtodeg}=__webpack_require__(114),{random:random}=__webpack_require__(115),{range:range}=__webpack_require__(116),{round:round}=__webpack_require__(117),{sin:sin}=__webpack_require__(118),{size:size}=__webpack_require__(58),{sqrt:sqrt}=__webpack_require__(119),{square:square}=__webpack_require__(120),{subtract:subtract}=__webpack_require__(63),{sum:sum}=__webpack_require__(121),{tan:tan}=__webpack_require__(122),{unique:unique}=__webpack_require__(123);module.exports={functions:{abs:abs,add:add,cbrt:cbrt,ceil:ceil,clamp:clamp,cos:cos,count:count,cube:cube,degtorad:degtorad,divide:divide,exp:exp,first:first,fix:fix,floor:floor,last:last,log:log,log10:log10,max:max,mean:mean,median:median,min:min,mod:mod,mode:mode,multiply:multiply,pi:pi,pow:pow,radtodeg:radtodeg,random:random,range:range,round:round,sin:sin,size:size,sqrt:sqrt,square:square,subtract:subtract,sum:sum,tan:tan,unique:unique}}},function(module,exports){module.exports={abs:function(a){if(Array.isArray(a))return a.map(a=>Math.abs(a));return Math.abs(a)}}},function(module,exports){module.exports={cbrt:function(a){if(Array.isArray(a))return a.map(a=>Math.cbrt(a));return Math.cbrt(a)}}},function(module,exports){module.exports={ceil:function(a){if(Array.isArray(a))return a.map(a=>Math.ceil(a));return Math.ceil(a)}}},function(module,exports){const findClamp=(a,min,max)=>{if(min>max)throw new Error("Min must be less than max");return Math.min(Math.max(a,min),max)};module.exports={clamp:function(a,min,max){if(null===max)throw new Error("Missing maximum value. You may want to use the 'min' function instead");if(null===min)throw new Error("Missing minimum value. You may want to use the 'max' function instead");if(Array.isArray(max)){if(Array.isArray(a)&&Array.isArray(min)){if(a.length!==max.length||a.length!==min.length)throw new Error("Array length mismatch");return max.map((max,i)=>findClamp(a[i],min[i],max))}if(Array.isArray(a)){if(a.length!==max.length)throw new Error("Array length mismatch");return max.map((max,i)=>findClamp(a[i],min,max))}if(Array.isArray(min)){if(min.length!==max.length)throw new Error("Array length mismatch");return max.map((max,i)=>findClamp(a,min[i],max))}return max.map(max=>findClamp(a,min,max))}if(Array.isArray(a)&&Array.isArray(min)){if(a.length!==min.length)throw new Error("Array length mismatch");return a.map((a,i)=>findClamp(a,min[i]))}if(Array.isArray(a))return a.map(a=>findClamp(a,min,max));if(Array.isArray(min))return min.map(min=>findClamp(a,min,max));return findClamp(a,min,max)}}},function(module,exports){module.exports={cos:function(a){if(Array.isArray(a))return a.map(a=>Math.cos(a));return Math.cos(a)}}},function(module,exports,__webpack_require__){const{size:size}=__webpack_require__(58);function count(a){return size(a)}module.exports={count:count},count.skipNumberValidation=!0},function(module,exports,__webpack_require__){const{pow:pow}=__webpack_require__(41);module.exports={cube:function(a){return pow(a,3)}}},function(module,exports){module.exports={degtorad:function(a){if(Array.isArray(a))return a.map(a=>a*Math.PI/180);return a*Math.PI/180}}},function(module,exports){module.exports={divide:function(a,b){if(Array.isArray(a)&&Array.isArray(b)){if(a.length!==b.length)throw new Error("Array length mismatch");return a.map((val,i)=>{if(0===b[i])throw new Error("Cannot divide by 0");return val/b[i]})}if(Array.isArray(b))return b.map(b=>a/b);if(0===b)throw new Error("Cannot divide by 0");return Array.isArray(a)?a.map(a=>a/b):a/b}}},function(module,exports){module.exports={exp:function(a){if(Array.isArray(a))return a.map(a=>Math.exp(a));return Math.exp(a)}}},function(module,exports){function first(a){return Array.isArray(a)?a[0]:a}module.exports={first:first},first.skipNumberValidation=!0},function(module,exports){const fixer=a=>a>0?Math.floor(a):Math.ceil(a);module.exports={fix:function(a){if(Array.isArray(a))return a.map(a=>fixer(a));return fixer(a)}}},function(module,exports){module.exports={floor:function(a){if(Array.isArray(a))return a.map(a=>Math.floor(a));return Math.floor(a)}}},function(module,exports){function last(a){return Array.isArray(a)?a[a.length-1]:a}module.exports={last:last},last.skipNumberValidation=!0},function(module,exports,__webpack_require__){const{log:log}=__webpack_require__(59);module.exports={log10:function(a){return log(a,10)}}},function(module,exports,__webpack_require__){const{add:add}=__webpack_require__(57);module.exports={mean:function(...args){if(1===args.length)return Array.isArray(args[0])?add(args[0])/args[0].length:args[0];const sum=add(...args);if(Array.isArray(sum))return sum.map(val=>val/args.length);return sum/args.length}}},function(module,exports,__webpack_require__){const{transpose:transpose}=__webpack_require__(61),findMedian=a=>{const len=a.length,half=Math.floor(len/2);return a.sort((a,b)=>b-a),len%2==0?(a[half]+a[half-1])/2:a[half]};module.exports={median:function(...args){if(1===args.length)return Array.isArray(args[0])?findMedian(args[0]):args[0];const firstArray=args.findIndex(element=>Array.isArray(element));if(-1!==firstArray){return transpose(args,firstArray).map(val=>findMedian(val))}return findMedian(args)}}},function(module,exports){module.exports={mod:function(a,b){if(Array.isArray(a)&&Array.isArray(b)){if(a.length!==b.length)throw new Error("Array length mismatch");return a.map((val,i)=>{if(0===b[i])throw new Error("Cannot divide by 0");return val%b[i]})}if(Array.isArray(b))return b.map(b=>a%b);if(0===b)throw new Error("Cannot divide by 0");return Array.isArray(a)?a.map(a=>a%b):a%b}}},function(module,exports,__webpack_require__){const{transpose:transpose}=__webpack_require__(61),findMode=a=>{let maxFreq=0;const mapping={};return a.map(val=>{void 0===mapping[val]&&(mapping[val]=0),mapping[val]+=1,mapping[val]>maxFreq&&(maxFreq=mapping[val])}),Object.keys(mapping).filter(key=>mapping[key]===maxFreq).map(val=>parseFloat(val)).sort((a,b)=>a-b)};module.exports={mode:function(...args){if(1===args.length)return Array.isArray(args[0])?findMode(args[0]):args[0];const firstArray=args.findIndex(element=>Array.isArray(element));if(-1!==firstArray){return transpose(args,firstArray).map(val=>findMode(val))}return findMode(args)}}},function(module,exports){module.exports={multiply:function(...args){return args.reduce((result,current)=>{if(Array.isArray(result)&&Array.isArray(current)){if(current.length!==result.length)throw new Error("Array length mismatch");return result.map((val,i)=>val*current[i])}return Array.isArray(result)?result.map(val=>val*current):Array.isArray(current)?current.map(val=>val*result):result*current})}}},function(module,exports){module.exports={pi:function(){return Math.PI}}},function(module,exports){module.exports={radtodeg:function(a){if(Array.isArray(a))return a.map(a=>180*a/Math.PI);return 180*a/Math.PI}}},function(module,exports){module.exports={random:function(a,b){if(null==a)return Math.random();if(null==b){if(a<0)throw new Error("Min is greater than max");return Math.random()*a}if(a>b)throw new Error("Min is greater than max");return Math.random()*(b-a)+a}}},function(module,exports,__webpack_require__){const{max:max}=__webpack_require__(60),{min:min}=__webpack_require__(62),{subtract:subtract}=__webpack_require__(63);module.exports={range:function(...args){return subtract(max(...args),min(...args))}}},function(module,exports){const rounder=(a,b)=>Math.round(a*Math.pow(10,b))/Math.pow(10,b);module.exports={round:function(a,b=0){if(Array.isArray(a))return a.map(a=>rounder(a,b));return rounder(a,b)}}},function(module,exports){module.exports={sin:function(a){if(Array.isArray(a))return a.map(a=>Math.sin(a));return Math.sin(a)}}},function(module,exports){module.exports={sqrt:function(a){if(Array.isArray(a))return a.map(a=>{if(a<0)throw new Error("Unable find the square root of a negative number");return Math.sqrt(a)});if(a<0)throw new Error("Unable find the square root of a negative number");return Math.sqrt(a)}}},function(module,exports,__webpack_require__){const{pow:pow}=__webpack_require__(41);module.exports={square:function(a){return pow(a,2)}}},function(module,exports){const findSum=(total,current)=>total+current;module.exports={sum:function(...args){return args.reduce((total,current)=>Array.isArray(current)?total+current.reduce(findSum,0):total+current,0)}}},function(module,exports){module.exports={tan:function(a){if(Array.isArray(a))return a.map(a=>Math.tan(a));return Math.tan(a)}}},function(module,exports){function unique(a){return Array.isArray(a)?a.filter((val,i)=>a.indexOf(val)===i).length:1}module.exports={unique:unique},unique.skipNumberValidation=!0},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _get(target,property,receiver){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(target,property,receiver){var base=function(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(receiver):desc.value}})(target,property,receiver||target)}Object.defineProperty(exports,"__esModule",{value:!0});var Emitter=function(){function Emitter(){_classCallCheck(this,Emitter),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return _createClass(Emitter,[{key:"addEventListener",value:function(type,callback){type in this.listeners||(this.listeners[type]=[]),this.listeners[type].push(callback)}},{key:"removeEventListener",value:function(type,callback){if(type in this.listeners)for(var stack=this.listeners[type],i=0,l=stack.length;i<l;i++)if(stack[i]===callback)return void stack.splice(i,1)}},{key:"dispatchEvent",value:function(event){var _this=this;if(event.type in this.listeners){for(var debounce=function(callback){setTimeout((function(){return callback.call(_this,event)}))},stack=this.listeners[event.type],i=0,l=stack.length;i<l;i++)debounce(stack[i]);return!event.defaultPrevented}}}]),Emitter}(),AbortSignal=function(_Emitter){function AbortSignal(){var _this2,self,call;return _classCallCheck(this,AbortSignal),self=this,(_this2=!(call=_getPrototypeOf(AbortSignal).call(this))||"object"!=typeof call&&"function"!=typeof call?_assertThisInitialized(self):call).listeners||Emitter.call(_assertThisInitialized(_this2)),Object.defineProperty(_assertThisInitialized(_this2),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(_assertThisInitialized(_this2),"onabort",{value:null,writable:!0,configurable:!0}),_this2}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(AbortSignal,_Emitter),_createClass(AbortSignal,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(event){"abort"===event.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,event)),_get(_getPrototypeOf(AbortSignal.prototype),"dispatchEvent",this).call(this,event)}}]),AbortSignal}(Emitter),AbortController=function(){function AbortController(){_classCallCheck(this,AbortController),Object.defineProperty(this,"signal",{value:new AbortSignal,writable:!0,configurable:!0})}return _createClass(AbortController,[{key:"abort",value:function(){var event;try{event=new Event("abort")}catch(e){"undefined"!=typeof document?document.createEvent?(event=document.createEvent("Event")).initEvent("abort",!1,!1):(event=document.createEventObject()).type="abort":event={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(event)}},{key:"toString",value:function(){return"[object AbortController]"}}]),AbortController}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(AbortController.prototype[Symbol.toStringTag]="AbortController",AbortSignal.prototype[Symbol.toStringTag]="AbortSignal"),exports.AbortController=AbortController,exports.AbortSignal=AbortSignal,exports.abortableFetch=function(patchTargets){"function"==typeof patchTargets&&(patchTargets={fetch:patchTargets});var self,_patchTargets=patchTargets,fetch=_patchTargets.fetch,_patchTargets$Request=_patchTargets.Request,NativeRequest=void 0===_patchTargets$Request?fetch.Request:_patchTargets$Request,NativeAbortController=_patchTargets.AbortController,_patchTargets$__FORCE=_patchTargets.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=void 0!==_patchTargets$__FORCE&&_patchTargets$__FORCE;if(!((self={fetch:fetch,Request:NativeRequest,AbortController:NativeAbortController,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL}).__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),1):"function"==typeof self.Request&&!self.Request.prototype.hasOwnProperty("signal")||!self.AbortController))return{fetch:fetch,Request:Request};var Request=NativeRequest;(Request&&!Request.prototype.hasOwnProperty("signal")||__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL)&&((Request=function(input,init){var signal;init&&init.signal&&(signal=init.signal,delete init.signal);var request=new NativeRequest(input,init);return signal&&Object.defineProperty(request,"signal",{writable:!1,enumerable:!1,configurable:!0,value:signal}),request}).prototype=NativeRequest.prototype);var realFetch=fetch;return{fetch:function(input,init){var signal=Request&&Request.prototype.isPrototypeOf(input)?input.signal:init?init.signal:void 0;if(signal){var abortError;try{abortError=new DOMException("Aborted","AbortError")}catch(err){(abortError=new Error("Aborted")).name="AbortError"}if(signal.aborted)return Promise.reject(abortError);var cancellation=new Promise((function(_,reject){signal.addEventListener("abort",(function(){return reject(abortError)}),{once:!0})}));return init&&init.signal&&delete init.signal,Promise.race([cancellation,realFetch(input,init)])}return realFetch(input,init)},Request:Request}}},function(module,exports){module.exports=__kbnSharedDeps__.TsLib},function(module,exports){var keyList=Object.keys;exports.equal=function(a,b){if(a===b)return!0;if(!(a instanceof Object&&b instanceof Object))return!1;for(var keys=keyList(a),length=keys.length,i=0;i<length;i++)if(!(keys[i]in b))return!1;for(i=0;i<length;i++)if(a[keys[i]]!==b[keys[i]])return!1;return length===keyList(b).length}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__webpack_require__(3);exports.default=function(effect,deps,depsEqual){var ref=react_1.useRef(void 0);ref.current&&depsEqual(deps,ref.current)||(ref.current=deps),react_1.useEffect(effect,ref.current)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Plugin",(function(){return plugin_ExpressionsPublicPlugin})),__webpack_require__.d(__webpack_exports__,"ExpressionsPublicPlugin",(function(){return plugin_ExpressionsPublicPlugin})),__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin})),__webpack_require__.d(__webpack_exports__,"ExpressionExecutor",(function(){return types.ExpressionExecutor})),__webpack_require__.d(__webpack_exports__,"IExpressionLoaderParams",(function(){return types.IExpressionLoaderParams})),__webpack_require__.d(__webpack_exports__,"ExpressionRenderError",(function(){return types.ExpressionRenderError})),__webpack_require__.d(__webpack_exports__,"ExpressionRendererComponent",(function(){})),__webpack_require__.d(__webpack_exports__,"ReactExpressionRenderer",(function(){return ReactExpressionRenderer})),__webpack_require__.d(__webpack_exports__,"ReactExpressionRendererProps",(function(){})),__webpack_require__.d(__webpack_exports__,"ReactExpressionRendererType",(function(){})),__webpack_require__.d(__webpack_exports__,"ExpressionRenderHandler",(function(){return render_ExpressionRenderHandler})),__webpack_require__.d(__webpack_exports__,"ExpressionRendererEvent",(function(){})),__webpack_require__.d(__webpack_exports__,"AnyExpressionFunctionDefinition",(function(){return common.AnyExpressionFunctionDefinition})),__webpack_require__.d(__webpack_exports__,"AnyExpressionTypeDefinition",(function(){return common.AnyExpressionTypeDefinition})),__webpack_require__.d(__webpack_exports__,"ArgumentType",(function(){return common.ArgumentType})),__webpack_require__.d(__webpack_exports__,"buildExpression",(function(){return common.buildExpression})),__webpack_require__.d(__webpack_exports__,"buildExpressionFunction",(function(){return common.buildExpressionFunction})),__webpack_require__.d(__webpack_exports__,"Datatable",(function(){return common.Datatable})),__webpack_require__.d(__webpack_exports__,"DatatableColumn",(function(){return common.DatatableColumn})),__webpack_require__.d(__webpack_exports__,"DatatableColumnType",(function(){return common.DatatableColumnType})),__webpack_require__.d(__webpack_exports__,"DatatableRow",(function(){return common.DatatableRow})),__webpack_require__.d(__webpack_exports__,"Execution",(function(){return common.Execution})),__webpack_require__.d(__webpack_exports__,"ExecutionContract",(function(){return common.ExecutionContract})),__webpack_require__.d(__webpack_exports__,"ExecutionContainer",(function(){return common.ExecutionContainer})),__webpack_require__.d(__webpack_exports__,"ExecutionContext",(function(){return common.ExecutionContext})),__webpack_require__.d(__webpack_exports__,"ExecutionParams",(function(){return common.ExecutionParams})),__webpack_require__.d(__webpack_exports__,"ExecutionState",(function(){return common.ExecutionState})),__webpack_require__.d(__webpack_exports__,"Executor",(function(){return common.Executor})),__webpack_require__.d(__webpack_exports__,"ExecutorContainer",(function(){return common.ExecutorContainer})),__webpack_require__.d(__webpack_exports__,"ExecutorState",(function(){return common.ExecutorState})),__webpack_require__.d(__webpack_exports__,"ExpressionAstArgument",(function(){return common.ExpressionAstArgument})),__webpack_require__.d(__webpack_exports__,"ExpressionAstExpression",(function(){return common.ExpressionAstExpression})),__webpack_require__.d(__webpack_exports__,"ExpressionAstExpressionBuilder",(function(){return common.ExpressionAstExpressionBuilder})),__webpack_require__.d(__webpack_exports__,"ExpressionAstFunction",(function(){return common.ExpressionAstFunction})),__webpack_require__.d(__webpack_exports__,"ExpressionAstFunctionBuilder",(function(){return common.ExpressionAstFunctionBuilder})),__webpack_require__.d(__webpack_exports__,"ExpressionAstNode",(function(){return common.ExpressionAstNode})),__webpack_require__.d(__webpack_exports__,"ExpressionFunction",(function(){return common.ExpressionFunction})),__webpack_require__.d(__webpack_exports__,"ExpressionFunctionDefinition",(function(){return common.ExpressionFunctionDefinition})),__webpack_require__.d(__webpack_exports__,"ExpressionFunctionDefinitions",(function(){return common.ExpressionFunctionDefinitions})),__webpack_require__.d(__webpack_exports__,"ExpressionFunctionParameter",(function(){return common.ExpressionFunctionParameter})),__webpack_require__.d(__webpack_exports__,"ExpressionImage",(function(){return common.ExpressionImage})),__webpack_require__.d(__webpack_exports__,"ExpressionRenderDefinition",(function(){return common.ExpressionRenderDefinition})),__webpack_require__.d(__webpack_exports__,"ExpressionRenderer",(function(){return common.ExpressionRenderer})),__webpack_require__.d(__webpack_exports__,"ExpressionRendererRegistry",(function(){return common.ExpressionRendererRegistry})),__webpack_require__.d(__webpack_exports__,"ExpressionType",(function(){return common.ExpressionType})),__webpack_require__.d(__webpack_exports__,"ExpressionTypeDefinition",(function(){return common.ExpressionTypeDefinition})),__webpack_require__.d(__webpack_exports__,"ExpressionTypeStyle",(function(){return common.ExpressionTypeStyle})),__webpack_require__.d(__webpack_exports__,"ExpressionValue",(function(){return common.ExpressionValue})),__webpack_require__.d(__webpack_exports__,"ExpressionValueBoxed",(function(){return common.ExpressionValueBoxed})),__webpack_require__.d(__webpack_exports__,"ExpressionValueConverter",(function(){return common.ExpressionValueConverter})),__webpack_require__.d(__webpack_exports__,"ExpressionValueError",(function(){return common.ExpressionValueError})),__webpack_require__.d(__webpack_exports__,"ExpressionValueNum",(function(){return common.ExpressionValueNum})),__webpack_require__.d(__webpack_exports__,"ExpressionValueRender",(function(){return common.ExpressionValueRender})),__webpack_require__.d(__webpack_exports__,"ExpressionValueUnboxed",(function(){return common.ExpressionValueUnboxed})),__webpack_require__.d(__webpack_exports__,"ExpressionValueFilter",(function(){return common.ExpressionValueFilter})),__webpack_require__.d(__webpack_exports__,"Font",(function(){return common.Font})),__webpack_require__.d(__webpack_exports__,"FontLabel",(function(){return common.FontLabel})),__webpack_require__.d(__webpack_exports__,"FontStyle",(function(){return common.FontStyle})),__webpack_require__.d(__webpack_exports__,"FontValue",(function(){return common.FontValue})),__webpack_require__.d(__webpack_exports__,"FontWeight",(function(){return common.FontWeight})),__webpack_require__.d(__webpack_exports__,"format",(function(){return common.format})),__webpack_require__.d(__webpack_exports__,"formatExpression",(function(){return common.formatExpression})),__webpack_require__.d(__webpack_exports__,"FunctionsRegistry",(function(){return common.FunctionsRegistry})),__webpack_require__.d(__webpack_exports__,"IInterpreterRenderHandlers",(function(){return common.IInterpreterRenderHandlers})),__webpack_require__.d(__webpack_exports__,"InterpreterErrorType",(function(){return common.InterpreterErrorType})),__webpack_require__.d(__webpack_exports__,"IRegistry",(function(){return common.IRegistry})),__webpack_require__.d(__webpack_exports__,"isExpressionAstBuilder",(function(){return common.isExpressionAstBuilder})),__webpack_require__.d(__webpack_exports__,"KnownTypeToString",(function(){return common.KnownTypeToString})),__webpack_require__.d(__webpack_exports__,"Overflow",(function(){return common.Overflow})),__webpack_require__.d(__webpack_exports__,"parse",(function(){return common.parse})),__webpack_require__.d(__webpack_exports__,"parseExpression",(function(){return common.parseExpression})),__webpack_require__.d(__webpack_exports__,"PointSeries",(function(){return common.PointSeries})),__webpack_require__.d(__webpack_exports__,"PointSeriesColumn",(function(){return common.PointSeriesColumn})),__webpack_require__.d(__webpack_exports__,"PointSeriesColumnName",(function(){return common.PointSeriesColumnName})),__webpack_require__.d(__webpack_exports__,"PointSeriesColumns",(function(){return common.PointSeriesColumns})),__webpack_require__.d(__webpack_exports__,"PointSeriesRow",(function(){return common.PointSeriesRow})),__webpack_require__.d(__webpack_exports__,"Range",(function(){return common.Range})),__webpack_require__.d(__webpack_exports__,"SerializedDatatable",(function(){return common.SerializedDatatable})),__webpack_require__.d(__webpack_exports__,"SerializedFieldFormat",(function(){return common.SerializedFieldFormat})),__webpack_require__.d(__webpack_exports__,"Style",(function(){return common.Style})),__webpack_require__.d(__webpack_exports__,"TextAlignment",(function(){return common.TextAlignment})),__webpack_require__.d(__webpack_exports__,"TextDecoration",(function(){return common.TextDecoration})),__webpack_require__.d(__webpack_exports__,"TypesRegistry",(function(){return common.TypesRegistry})),__webpack_require__.d(__webpack_exports__,"TypeString",(function(){return common.TypeString})),__webpack_require__.d(__webpack_exports__,"TypeToString",(function(){return common.TypeToString})),__webpack_require__.d(__webpack_exports__,"UnmappedTypeStrings",(function(){return common.UnmappedTypeStrings})),__webpack_require__.d(__webpack_exports__,"Render",(function(){return common.ExpressionValueRender})),__webpack_require__.d(__webpack_exports__,"ExpressionsService",(function(){return common.ExpressionsService})),__webpack_require__.d(__webpack_exports__,"ExpressionsServiceSetup",(function(){return common.ExpressionsServiceSetup})),__webpack_require__.d(__webpack_exports__,"ExpressionsServiceStart",(function(){return common.ExpressionsServiceStart})),__webpack_require__.d(__webpack_exports__,"TablesAdapter",(function(){return common.TablesAdapter})),__webpack_require__.d(__webpack_exports__,"ExpressionsInspectorAdapter",(function(){return common.ExpressionsInspectorAdapter}));__webpack_require__(75);var common=__webpack_require__(0),public_=__webpack_require__(39);const[getNotifications,setNotifications]=Object(public_.createGetterSetter)("Notifications"),[getRenderersRegistry,setRenderersRegistry]=Object(public_.createGetterSetter)("Renderers registry"),[getExpressionsService,setExpressionsService]=Object(public_.createGetterSetter)("ExpressionsService");var external_kbnSharedDeps_React_=__webpack_require__(3),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),classnames=__webpack_require__(71),classnames_default=__webpack_require__.n(classnames),external_kbnSharedDeps_RxjsOperators_=__webpack_require__(11),useShallowCompareEffect=__webpack_require__(43),useShallowCompareEffect_default=__webpack_require__.n(useShallowCompareEffect),external_kbnSharedDeps_ElasticEui_=__webpack_require__(42),external_kbnSharedDeps_Theme_euiLightVars_=__webpack_require__(72),external_kbnSharedDeps_Theme_euiLightVars_default=__webpack_require__.n(external_kbnSharedDeps_Theme_euiLightVars_),external_kbnSharedDeps_Rxjs_=__webpack_require__(12),external_kbnSharedDeps_Lodash_=__webpack_require__(2),external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);const renderErrorHandler=(element,error,handlers)=>{"AbortError"!==error.name?(getNotifications().toasts.addError(error,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("expressions.defaultErrorRenderer.errorTitle",{defaultMessage:"Error in visualisation"}),toastMessage:error.message}),handlers.done()):handlers.done()};function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class render_ExpressionRenderHandler{constructor(element,{onRenderError:onRenderError,renderMode:renderMode,syncColors:syncColors,hasCompatibleActions:hasCompatibleActions=(async()=>!1)}={}){_defineProperty(this,"render$",void 0),_defineProperty(this,"update$",void 0),_defineProperty(this,"events$",void 0),_defineProperty(this,"element",void 0),_defineProperty(this,"destroyFn",void 0),_defineProperty(this,"renderCount",0),_defineProperty(this,"renderSubject",void 0),_defineProperty(this,"eventsSubject",void 0),_defineProperty(this,"updateSubject",void 0),_defineProperty(this,"handlers",void 0),_defineProperty(this,"onRenderError",void 0),_defineProperty(this,"render",async(value,uiState)=>{if(!value||"object"!=typeof value)return this.handleRenderError(new Error("invalid data provided to the expression renderer"));if("render"!==value.type||!value.as)return"error"===value.type?this.handleRenderError(value.error):this.handleRenderError(new Error("invalid data provided to the expression renderer"));if(!getRenderersRegistry().get(value.as))return this.handleRenderError(new Error(`invalid renderer id '${value.as}'`));try{await getRenderersRegistry().get(value.as).render(this.element,value.value,{...this.handlers,uiState:uiState})}catch(e){return this.handleRenderError(e)}}),_defineProperty(this,"destroy",()=>{this.renderSubject.complete(),this.eventsSubject.complete(),this.updateSubject.complete(),this.destroyFn&&this.destroyFn()}),_defineProperty(this,"getElement",()=>this.element),_defineProperty(this,"handleRenderError",error=>{this.onRenderError(this.element,error,this.handlers)}),this.element=element,this.eventsSubject=new external_kbnSharedDeps_Rxjs_.Subject,this.events$=this.eventsSubject.asObservable(),this.onRenderError=onRenderError||renderErrorHandler,this.renderSubject=new external_kbnSharedDeps_Rxjs_.BehaviorSubject(null),this.render$=this.renderSubject.asObservable().pipe(Object(external_kbnSharedDeps_RxjsOperators_.filter)(_=>null!==_)),this.updateSubject=new external_kbnSharedDeps_Rxjs_.Subject,this.update$=this.updateSubject.asObservable(),this.handlers={onDestroy:fn=>{this.destroyFn=fn},done:()=>{this.renderCount++,this.renderSubject.next(this.renderCount)},reload:()=>{this.updateSubject.next(null)},update:params=>{this.updateSubject.next(params)},event:data=>{this.eventsSubject.next(data)},getRenderMode:()=>renderMode||"display",isSyncColorsEnabled:()=>syncColors||!1,hasCompatibleActions:hasCompatibleActions}}}function render(element,data,options){const handler=new render_ExpressionRenderHandler(element,options);return handler.render(data),handler}function loader_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class loader_ExpressionLoader{constructor(element,_expression,_params){loader_defineProperty(this,"data$",void 0),loader_defineProperty(this,"update$",void 0),loader_defineProperty(this,"render$",void 0),loader_defineProperty(this,"events$",void 0),loader_defineProperty(this,"loading$",void 0),loader_defineProperty(this,"execution",void 0),loader_defineProperty(this,"renderHandler",void 0),loader_defineProperty(this,"dataSubject",void 0),loader_defineProperty(this,"loadingSubject",void 0),loader_defineProperty(this,"data",void 0),loader_defineProperty(this,"params",{}),loader_defineProperty(this,"loadData",async(expression,params)=>{this.execution&&this.execution.isPending&&this.execution.cancel(),this.setParams(params),this.execution=getExpressionsService().execute(expression,params.context,{searchContext:params.searchContext,variables:params.variables||{},inspectorAdapters:params.inspectorAdapters,searchSessionId:params.searchSessionId,debug:params.debug,syncColors:params.syncColors});const prevDataHandler=this.execution,data=await prevDataHandler.getData();this.execution===prevDataHandler&&this.dataSubject.next(data)}),this.dataSubject=new external_kbnSharedDeps_Rxjs_.Subject,this.data$=this.dataSubject.asObservable(),this.loadingSubject=new external_kbnSharedDeps_Rxjs_.BehaviorSubject(!1),this.loading$=this.loadingSubject.asObservable().pipe(Object(external_kbnSharedDeps_RxjsOperators_.filter)(_=>!0===_),Object(external_kbnSharedDeps_RxjsOperators_.map)(()=>{})),this.renderHandler=new render_ExpressionRenderHandler(element,{onRenderError:_params&&_params.onRenderError,renderMode:null==_params?void 0:_params.renderMode,syncColors:null==_params?void 0:_params.syncColors,hasCompatibleActions:null==_params?void 0:_params.hasCompatibleActions}),this.render$=this.renderHandler.render$,this.update$=this.renderHandler.update$,this.events$=this.renderHandler.events$,this.update$.subscribe(value=>{if(value){const{newExpression:newExpression,newParams:newParams}=value;this.update(newExpression,newParams)}}),this.data$.subscribe(data=>{this.render(data)}),this.render$.subscribe(()=>{this.loadingSubject.next(!1)}),this.setParams(_params),_expression&&(this.loadingSubject.next(!0),this.loadData(_expression,this.params))}destroy(){this.dataSubject.complete(),this.loadingSubject.complete(),this.renderHandler.destroy(),this.execution&&this.execution.cancel()}cancel(){this.execution&&this.execution.cancel()}getExpression(){if(this.execution)return this.execution.getExpression()}getAst(){if(this.execution)return this.execution.getAst()}getElement(){return this.renderHandler.getElement()}inspect(){return this.execution?this.execution.inspect():void 0}async update(expression,params){this.setParams(params),this.loadingSubject.next(!0),expression?await this.loadData(expression,this.params):this.data&&this.render(this.data)}render(data){this.renderHandler.render(data,this.params.uiState)}setParams(params){var _this$execution;params&&Object.keys(params).length&&(params.searchContext&&(this.params.searchContext=Object(external_kbnSharedDeps_Lodash_.defaults)({},params.searchContext,this.params.searchContext||{})),params.uiState&&this.params&&(this.params.uiState=params.uiState),params.variables&&this.params&&(this.params.variables=params.variables),params.searchSessionId&&this.params&&(this.params.searchSessionId=params.searchSessionId),this.params.syncColors=params.syncColors,this.params.debug=Boolean(params.debug),this.params.inspectorAdapters=params.inspectorAdapters||(null===(_this$execution=this.execution)||void 0===_this$execution?void 0:_this$execution.inspect()))}}const loader=(element,expression,params)=>new loader_ExpressionLoader(element,expression,params);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const defaultState={isEmpty:!0,isLoading:!1,error:null},ReactExpressionRenderer=({className:className,dataAttrs:dataAttrs,padding:padding,renderError:renderError,expression:expression,onEvent:onEvent,onData$:onData$,reload$:reload$,debounce:debounce,...expressionLoaderOptions})=>{const mountpoint=Object(external_kbnSharedDeps_React_.useRef)(null),[state,setState]=Object(external_kbnSharedDeps_React_.useState)({...defaultState}),hasCustomRenderErrorHandler=!!renderError,expressionLoaderRef=Object(external_kbnSharedDeps_React_.useRef)(null),hasHandledErrorRef=Object(external_kbnSharedDeps_React_.useRef)(!1),errorRenderHandlerRef=Object(external_kbnSharedDeps_React_.useRef)(null),[debouncedExpression,setDebouncedExpression]=Object(external_kbnSharedDeps_React_.useState)(expression),[waitingForDebounceToComplete,setDebouncePending]=Object(external_kbnSharedDeps_React_.useState)(!1),firstRender=Object(external_kbnSharedDeps_React_.useRef)(!0);useShallowCompareEffect_default()(()=>{if(firstRender.current)return void(firstRender.current=!1);if(void 0===debounce)return;setDebouncePending(!0);const handler=setTimeout(()=>{setDebouncedExpression(expression),setDebouncePending(!1)},debounce);return()=>{clearTimeout(handler)}},[expression,expressionLoaderOptions,debounce]);const activeExpression=void 0!==debounce?debouncedExpression:expression;Object(external_kbnSharedDeps_React_.useEffect)(()=>{const subs=[];return expressionLoaderRef.current=new loader_ExpressionLoader(mountpoint.current,activeExpression,{...expressionLoaderOptions,onRenderError:hasCustomRenderErrorHandler?(domNode,error,handlers)=>{errorRenderHandlerRef.current=handlers,setState(()=>({...defaultState,isEmpty:!1,error:error})),expressionLoaderOptions.onRenderError&&expressionLoaderOptions.onRenderError(domNode,error,handlers)}:expressionLoaderOptions.onRenderError}),onEvent&&subs.push(expressionLoaderRef.current.events$.subscribe(event=>{onEvent(event)})),onData$&&subs.push(expressionLoaderRef.current.data$.subscribe(newData=>{var _expressionLoaderRef$;onData$(newData,null===(_expressionLoaderRef$=expressionLoaderRef.current)||void 0===_expressionLoaderRef$?void 0:_expressionLoaderRef$.inspect())})),subs.push(expressionLoaderRef.current.loading$.subscribe(()=>{hasHandledErrorRef.current=!1,setState(prevState=>({...prevState,isLoading:!0}))}),expressionLoaderRef.current.render$.pipe(Object(external_kbnSharedDeps_RxjsOperators_.filter)(()=>!hasHandledErrorRef.current)).subscribe(item=>{setState(()=>({...defaultState,isEmpty:!1}))})),()=>{subs.forEach(s=>s.unsubscribe()),expressionLoaderRef.current&&(expressionLoaderRef.current.destroy(),expressionLoaderRef.current=null),errorRenderHandlerRef.current=null}},[hasCustomRenderErrorHandler,onEvent,expressionLoaderOptions.renderMode,expressionLoaderOptions.syncColors]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{const subscription=null==reload$?void 0:reload$.subscribe(()=>{expressionLoaderRef.current&&expressionLoaderRef.current.update(activeExpression,expressionLoaderOptions)});return()=>null==subscription?void 0:subscription.unsubscribe()},[reload$,activeExpression,...Object.values(expressionLoaderOptions)]),useShallowCompareEffect_default()(()=>{expressionLoaderRef.current&&!waitingForDebounceToComplete&&expressionLoaderRef.current.update(activeExpression,expressionLoaderOptions)},void 0===debounce?[{activeExpression:activeExpression,...expressionLoaderOptions}]:[{waitingForDebounceToComplete:waitingForDebounceToComplete}]),Object(external_kbnSharedDeps_React_.useLayoutEffect)(()=>{state.error&&errorRenderHandlerRef.current&&(hasHandledErrorRef.current=!0,errorRenderHandlerRef.current.done(),errorRenderHandlerRef.current=null)},[state.error]);const classes=classnames_default()("expExpressionRenderer",className,{"expExpressionRenderer-isEmpty":state.isEmpty,"expExpressionRenderer-hasError":!!state.error}),expressionStyles={};return padding&&(expressionStyles.padding=external_kbnSharedDeps_Theme_euiLightVars_default.a.paddingSizes[padding]),external_kbnSharedDeps_React_default.a.createElement("div",_extends({},dataAttrs,{className:classes}),state.isEmpty&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLoadingChart,{mono:!0,size:"l"}),(state.isLoading||waitingForDebounceToComplete)&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiProgress,{size:"xs",color:"accent",position:"absolute"}),!state.isLoading&&state.error&&renderError&&renderError(state.error.message,state.error),external_kbnSharedDeps_React_default.a.createElement("div",{className:"expExpressionRenderer__expression",style:expressionStyles,ref:mountpoint}))};class plugin_ExpressionsPublicPlugin{constructor(initializerContext){var obj,key,value;obj=this,key="expressions",value=new common.ExpressionsService,key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}configureExecutor(core){const{executor:executor}=this.expressions;executor.extendContext({environment:"client"})}setup(core){this.configureExecutor(core);const{expressions:expressions}=this,{renderers:renderers}=expressions;setRenderersRegistry(renderers),setExpressionsService(expressions);const setup=expressions.setup();return Object.freeze(setup)}start(core){setNotifications(core.notifications);const{expressions:expressions}=this,start={...expressions.start(),ExpressionLoader:loader_ExpressionLoader,ExpressionRenderHandler:render_ExpressionRenderHandler,loader:loader,ReactExpressionRenderer:ReactExpressionRenderer,render:render};return Object.freeze(start)}stop(){this.expressions.stop()}}var types=__webpack_require__(23);function public_plugin(initializerContext){return new plugin_ExpressionsPublicPlugin(initializerContext)}}]);