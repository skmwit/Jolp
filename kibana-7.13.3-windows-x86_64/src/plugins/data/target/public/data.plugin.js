!function(modules){function webpackJsonpCallback(data){for(var moduleId,chunkId,chunkIds=data[0],moreModules=data[1],i=0,resolves=[];i<chunkIds.length;i++)chunkId=chunkIds[i],Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]&&resolves.push(installedChunks[chunkId][0]),installedChunks[chunkId]=0;for(moduleId in moreModules)Object.prototype.hasOwnProperty.call(moreModules,moduleId)&&(modules[moduleId]=moreModules[moduleId]);for(parentJsonpFunction&&parentJsonpFunction(data);resolves.length;)resolves.shift()()}var installedModules={},installedChunks={2:0};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.e=function(chunkId){var promises=[],installedChunkData=installedChunks[chunkId];if(0!==installedChunkData)if(installedChunkData)promises.push(installedChunkData[2]);else{var promise=new Promise((function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var onScriptComplete,script=document.createElement("script");script.charset="utf-8",script.timeout=120,__webpack_require__.nc&&script.setAttribute("nonce",__webpack_require__.nc),script.src=function(chunkId){return __webpack_require__.p+"data.chunk."+chunkId+".js"}(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null,clearTimeout(timeout);var chunk=installedChunks[chunkId];if(0!==chunk){if(chunk){var errorType=event&&("load"===event.type?"missing":event.type),realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")",error.name="ChunkLoadError",error.type=errorType,error.request=realSrc,chunk[1](error)}installedChunks[chunkId]=void 0}};var timeout=setTimeout((function(){onScriptComplete({type:"timeout",target:script})}),12e4);script.onerror=script.onload=onScriptComplete,document.head.appendChild(script)}return Promise.all(promises)},__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__.oe=function(err){throw console.error(err),err};var jsonpArray=window.data_bundle_jsonpfunction=window.data_bundle_jsonpfunction||[],oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback,jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;__webpack_require__(__webpack_require__.s=137)}([function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(26);__webpack_require__.d(__webpack_exports__,"DEFAULT_QUERY_LANGUAGE",(function(){return _constants__WEBPACK_IMPORTED_MODULE_0__.a})),__webpack_require__.d(__webpack_exports__,"KIBANA_USER_QUERY_LANGUAGE_KEY",(function(){return _constants__WEBPACK_IMPORTED_MODULE_0__.b})),__webpack_require__.d(__webpack_exports__,"UI_SETTINGS",(function(){return _constants__WEBPACK_IMPORTED_MODULE_0__.c}));var _es_query__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(60);for(var __WEBPACK_IMPORT_KEY__ in _es_query__WEBPACK_IMPORTED_MODULE_1__)["default","IndexPatternAttributes","DEFAULT_QUERY_LANGUAGE","KIBANA_USER_QUERY_LANGUAGE_KEY","UI_SETTINGS"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _es_query__WEBPACK_IMPORTED_MODULE_1__[key]}))}(__WEBPACK_IMPORT_KEY__);var _field_formats__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(13);__webpack_require__.d(__webpack_exports__,"FieldFormatsRegistry",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.n})),__webpack_require__.d(__webpack_exports__,"FieldFormat",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.g})),__webpack_require__.d(__webpack_exports__,"baseFormatters",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.C})),__webpack_require__.d(__webpack_exports__,"BoolFormat",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.a})),__webpack_require__.d(__webpack_exports__,"BytesFormat",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.b})),__webpack_require__.d(__webpack_exports__,"ColorFormat",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.c})),__webpack_require__.d(__webpack_exports__,"DurationFormat",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.e})),__webpack_require__.d(__webpack_exports__,"IpFormat",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.s})),__webpack_require__.d(__webpack_exports__,"NumberFormat",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.t})),__webpack_require__.d(__webpack_exports__,"PercentFormat",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.u})),__webpack_require__.d(__webpack_exports__,"RelativeDateFormat",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.v})),__webpack_require__.d(__webpack_exports__,"SourceFormat",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.w})),__webpack_require__.d(__webpack_exports__,"StaticLookupFormat",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.x})),__webpack_require__.d(__webpack_exports__,"UrlFormat",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.B})),__webpack_require__.d(__webpack_exports__,"StringFormat",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.y})),__webpack_require__.d(__webpack_exports__,"TruncateFormat",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.A})),__webpack_require__.d(__webpack_exports__,"HistogramFormat",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.q})),__webpack_require__.d(__webpack_exports__,"getHighlightRequest",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.D})),__webpack_require__.d(__webpack_exports__,"DEFAULT_CONVERTER_COLOR",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.d})),__webpack_require__.d(__webpack_exports__,"FIELD_FORMAT_IDS",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.f})),__webpack_require__.d(__webpack_exports__,"HTML_CONTEXT_TYPE",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.p})),__webpack_require__.d(__webpack_exports__,"TEXT_CONTEXT_TYPE",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.z})),__webpack_require__.d(__webpack_exports__,"FieldFormatsGetConfigFn",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.m})),__webpack_require__.d(__webpack_exports__,"FieldFormatsContentType",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.l})),__webpack_require__.d(__webpack_exports__,"FieldFormatConfig",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.h})),__webpack_require__.d(__webpack_exports__,"FieldFormatId",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.i})),__webpack_require__.d(__webpack_exports__,"FieldFormatInstanceType",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.j})),__webpack_require__.d(__webpack_exports__,"IFieldFormat",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.r})),__webpack_require__.d(__webpack_exports__,"FieldFormatsStartCommon",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.o})),__webpack_require__.d(__webpack_exports__,"FieldFormatNotFoundError",(function(){return _field_formats__WEBPACK_IMPORTED_MODULE_2__.k}));var _index_patterns__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(57);for(var __WEBPACK_IMPORT_KEY__ in _index_patterns__WEBPACK_IMPORTED_MODULE_3__)["default","IndexPatternAttributes","DEFAULT_QUERY_LANGUAGE","KIBANA_USER_QUERY_LANGUAGE_KEY","UI_SETTINGS","FieldFormatsRegistry","FieldFormat","baseFormatters","BoolFormat","BytesFormat","ColorFormat","DurationFormat","IpFormat","NumberFormat","PercentFormat","RelativeDateFormat","SourceFormat","StaticLookupFormat","UrlFormat","StringFormat","TruncateFormat","HistogramFormat","getHighlightRequest","DEFAULT_CONVERTER_COLOR","FIELD_FORMAT_IDS","HTML_CONTEXT_TYPE","TEXT_CONTEXT_TYPE","FieldFormatsGetConfigFn","FieldFormatsContentType","FieldFormatConfig","FieldFormatId","FieldFormatInstanceType","IFieldFormat","FieldFormatsStartCommon","FieldFormatNotFoundError"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _index_patterns__WEBPACK_IMPORTED_MODULE_3__[key]}))}(__WEBPACK_IMPORT_KEY__);var _kbn_field_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(34);__webpack_require__.d(__webpack_exports__,"KbnFieldType",(function(){return _kbn_field_types__WEBPACK_IMPORTED_MODULE_4__.a})),__webpack_require__.d(__webpack_exports__,"castEsToKbnFieldTypeName",(function(){return _kbn_field_types__WEBPACK_IMPORTED_MODULE_4__.b})),__webpack_require__.d(__webpack_exports__,"getKbnFieldType",(function(){return _kbn_field_types__WEBPACK_IMPORTED_MODULE_4__.d})),__webpack_require__.d(__webpack_exports__,"getKbnTypeNames",(function(){return _kbn_field_types__WEBPACK_IMPORTED_MODULE_4__.e})),__webpack_require__.d(__webpack_exports__,"getFilterableKbnTypeNames",(function(){return _kbn_field_types__WEBPACK_IMPORTED_MODULE_4__.c}));var _query__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(79);for(var __WEBPACK_IMPORT_KEY__ in _query__WEBPACK_IMPORTED_MODULE_5__)["default","IndexPatternAttributes","DEFAULT_QUERY_LANGUAGE","KIBANA_USER_QUERY_LANGUAGE_KEY","UI_SETTINGS","FieldFormatsRegistry","FieldFormat","baseFormatters","BoolFormat","BytesFormat","ColorFormat","DurationFormat","IpFormat","NumberFormat","PercentFormat","RelativeDateFormat","SourceFormat","StaticLookupFormat","UrlFormat","StringFormat","TruncateFormat","HistogramFormat","getHighlightRequest","DEFAULT_CONVERTER_COLOR","FIELD_FORMAT_IDS","HTML_CONTEXT_TYPE","TEXT_CONTEXT_TYPE","FieldFormatsGetConfigFn","FieldFormatsContentType","FieldFormatConfig","FieldFormatId","FieldFormatInstanceType","IFieldFormat","FieldFormatsStartCommon","FieldFormatNotFoundError","KbnFieldType","castEsToKbnFieldTypeName","getKbnFieldType","getKbnTypeNames","getFilterableKbnTypeNames"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _query__WEBPACK_IMPORTED_MODULE_5__[key]}))}(__WEBPACK_IMPORT_KEY__);var _search__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(10);for(var __WEBPACK_IMPORT_KEY__ in _search__WEBPACK_IMPORTED_MODULE_6__)["default","IndexPatternAttributes","DEFAULT_QUERY_LANGUAGE","KIBANA_USER_QUERY_LANGUAGE_KEY","UI_SETTINGS","FieldFormatsRegistry","FieldFormat","baseFormatters","BoolFormat","BytesFormat","ColorFormat","DurationFormat","IpFormat","NumberFormat","PercentFormat","RelativeDateFormat","SourceFormat","StaticLookupFormat","UrlFormat","StringFormat","TruncateFormat","HistogramFormat","getHighlightRequest","DEFAULT_CONVERTER_COLOR","FIELD_FORMAT_IDS","HTML_CONTEXT_TYPE","TEXT_CONTEXT_TYPE","FieldFormatsGetConfigFn","FieldFormatsContentType","FieldFormatConfig","FieldFormatId","FieldFormatInstanceType","IFieldFormat","FieldFormatsStartCommon","FieldFormatNotFoundError","KbnFieldType","castEsToKbnFieldTypeName","getKbnFieldType","getKbnTypeNames","getFilterableKbnTypeNames"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _search__WEBPACK_IMPORTED_MODULE_6__[key]}))}(__WEBPACK_IMPORT_KEY__);var _types__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(39);for(var __WEBPACK_IMPORT_KEY__ in _types__WEBPACK_IMPORTED_MODULE_7__)["default","IndexPatternAttributes","DEFAULT_QUERY_LANGUAGE","KIBANA_USER_QUERY_LANGUAGE_KEY","UI_SETTINGS","FieldFormatsRegistry","FieldFormat","baseFormatters","BoolFormat","BytesFormat","ColorFormat","DurationFormat","IpFormat","NumberFormat","PercentFormat","RelativeDateFormat","SourceFormat","StaticLookupFormat","UrlFormat","StringFormat","TruncateFormat","HistogramFormat","getHighlightRequest","DEFAULT_CONVERTER_COLOR","FIELD_FORMAT_IDS","HTML_CONTEXT_TYPE","TEXT_CONTEXT_TYPE","FieldFormatsGetConfigFn","FieldFormatsContentType","FieldFormatConfig","FieldFormatId","FieldFormatInstanceType","IFieldFormat","FieldFormatsStartCommon","FieldFormatNotFoundError","KbnFieldType","castEsToKbnFieldTypeName","getKbnFieldType","getKbnTypeNames","getFilterableKbnTypeNames"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _types__WEBPACK_IMPORTED_MODULE_7__[key]}))}(__WEBPACK_IMPORT_KEY__);var _utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(41);__webpack_require__.d(__webpack_exports__,"shortenDottedString",(function(){return _utils__WEBPACK_IMPORTED_MODULE_8__.a}));var _exports__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(128);__webpack_require__.d(__webpack_exports__,"datatableToCSV",(function(){return _exports__WEBPACK_IMPORTED_MODULE_9__.b})),__webpack_require__.d(__webpack_exports__,"CSV_MIME_TYPE",(function(){return _exports__WEBPACK_IMPORTED_MODULE_9__.a})),__webpack_require__.d(__webpack_exports__,"IndexPatternAttributes",(function(){return _types__WEBPACK_IMPORTED_MODULE_7__.IndexPatternAttributes}))},function(module,exports){module.exports=__kbnSharedDeps__.Lodash},function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,__webpack_exports__,__webpack_require__){"use strict";let ES_FIELD_TYPES,KBN_FIELD_TYPES;__webpack_require__.d(__webpack_exports__,"a",(function(){return ES_FIELD_TYPES})),__webpack_require__.d(__webpack_exports__,"b",(function(){return KBN_FIELD_TYPES})),function(ES_FIELD_TYPES){ES_FIELD_TYPES._ID="_id",ES_FIELD_TYPES._INDEX="_index",ES_FIELD_TYPES._SOURCE="_source",ES_FIELD_TYPES._TYPE="_type",ES_FIELD_TYPES.STRING="string",ES_FIELD_TYPES.TEXT="text",ES_FIELD_TYPES.KEYWORD="keyword",ES_FIELD_TYPES.BOOLEAN="boolean",ES_FIELD_TYPES.OBJECT="object",ES_FIELD_TYPES.DATE="date",ES_FIELD_TYPES.DATE_NANOS="date_nanos",ES_FIELD_TYPES.DATE_RANGE="date_range",ES_FIELD_TYPES.GEO_POINT="geo_point",ES_FIELD_TYPES.GEO_SHAPE="geo_shape",ES_FIELD_TYPES.FLOAT="float",ES_FIELD_TYPES.HALF_FLOAT="half_float",ES_FIELD_TYPES.SCALED_FLOAT="scaled_float",ES_FIELD_TYPES.DOUBLE="double",ES_FIELD_TYPES.INTEGER="integer",ES_FIELD_TYPES.LONG="long",ES_FIELD_TYPES.SHORT="short",ES_FIELD_TYPES.UNSIGNED_LONG="unsigned_long",ES_FIELD_TYPES.FLOAT_RANGE="float_range",ES_FIELD_TYPES.DOUBLE_RANGE="double_range",ES_FIELD_TYPES.INTEGER_RANGE="integer_range",ES_FIELD_TYPES.LONG_RANGE="long_range",ES_FIELD_TYPES.NESTED="nested",ES_FIELD_TYPES.BYTE="byte",ES_FIELD_TYPES.IP="ip",ES_FIELD_TYPES.IP_RANGE="ip_range",ES_FIELD_TYPES.ATTACHMENT="attachment",ES_FIELD_TYPES.TOKEN_COUNT="token_count",ES_FIELD_TYPES.MURMUR3="murmur3",ES_FIELD_TYPES.HISTOGRAM="histogram"}(ES_FIELD_TYPES||(ES_FIELD_TYPES={})),function(KBN_FIELD_TYPES){KBN_FIELD_TYPES._SOURCE="_source",KBN_FIELD_TYPES.ATTACHMENT="attachment",KBN_FIELD_TYPES.BOOLEAN="boolean",KBN_FIELD_TYPES.DATE="date",KBN_FIELD_TYPES.DATE_RANGE="date_range",KBN_FIELD_TYPES.GEO_POINT="geo_point",KBN_FIELD_TYPES.GEO_SHAPE="geo_shape",KBN_FIELD_TYPES.IP="ip",KBN_FIELD_TYPES.IP_RANGE="ip_range",KBN_FIELD_TYPES.MURMUR3="murmur3",KBN_FIELD_TYPES.NUMBER="number",KBN_FIELD_TYPES.NUMBER_RANGE="number_range",KBN_FIELD_TYPES.STRING="string",KBN_FIELD_TYPES.UNKNOWN="unknown",KBN_FIELD_TYPES.CONFLICT="conflict",KBN_FIELD_TYPES.OBJECT="object",KBN_FIELD_TYPES.NESTED="nested",KBN_FIELD_TYPES.HISTOGRAM="histogram",KBN_FIELD_TYPES.MISSING="missing"}(KBN_FIELD_TYPES||(KBN_FIELD_TYPES={}))},function(module,exports){module.exports=__kbnSharedDeps__.Moment},function(module,exports){module.exports=__kbnSharedDeps__.RxjsOperators},function(module,__webpack_exports__,__webpack_require__){"use strict";let FIELD_FORMAT_IDS;__webpack_require__.d(__webpack_exports__,"a",(function(){return FIELD_FORMAT_IDS})),function(FIELD_FORMAT_IDS){FIELD_FORMAT_IDS._SOURCE="_source",FIELD_FORMAT_IDS.BOOLEAN="boolean",FIELD_FORMAT_IDS.BYTES="bytes",FIELD_FORMAT_IDS.COLOR="color",FIELD_FORMAT_IDS.CUSTOM="custom",FIELD_FORMAT_IDS.DATE="date",FIELD_FORMAT_IDS.DATE_NANOS="date_nanos",FIELD_FORMAT_IDS.DURATION="duration",FIELD_FORMAT_IDS.IP="ip",FIELD_FORMAT_IDS.NUMBER="number",FIELD_FORMAT_IDS.PERCENT="percent",FIELD_FORMAT_IDS.RELATIVE_DATE="relative_date",FIELD_FORMAT_IDS.STATIC_LOOKUP="static_lookup",FIELD_FORMAT_IDS.STRING="string",FIELD_FORMAT_IDS.TRUNCATE="truncate",FIELD_FORMAT_IDS.URL="url",FIELD_FORMAT_IDS.HISTOGRAM="histogram"}(FIELD_FORMAT_IDS||(FIELD_FORMAT_IDS={}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"cleanFilter",(function(){return cleanFilter})),__webpack_require__.d(__webpack_exports__,"isFilterDisabled",(function(){return isFilterDisabled}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_build_filters__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(97);__webpack_require__.d(__webpack_exports__,"buildFilter",(function(){return _build_filters__WEBPACK_IMPORTED_MODULE_1__.b})),__webpack_require__.d(__webpack_exports__,"buildCustomFilter",(function(){return _build_filters__WEBPACK_IMPORTED_MODULE_1__.a}));var _custom_filter__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(98);for(var __WEBPACK_IMPORT_KEY__ in _custom_filter__WEBPACK_IMPORTED_MODULE_2__)["default","cleanFilter","isFilterDisabled","buildFilter","buildCustomFilter"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _custom_filter__WEBPACK_IMPORTED_MODULE_2__[key]}))}(__WEBPACK_IMPORT_KEY__);var _exists_filter__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(61);__webpack_require__.d(__webpack_exports__,"isExistsFilter",(function(){return _exists_filter__WEBPACK_IMPORTED_MODULE_3__.c})),__webpack_require__.d(__webpack_exports__,"getExistsFilterField",(function(){return _exists_filter__WEBPACK_IMPORTED_MODULE_3__.b})),__webpack_require__.d(__webpack_exports__,"buildExistsFilter",(function(){return _exists_filter__WEBPACK_IMPORTED_MODULE_3__.a}));var _geo_bounding_box_filter__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(62);__webpack_require__.d(__webpack_exports__,"isGeoBoundingBoxFilter",(function(){return _geo_bounding_box_filter__WEBPACK_IMPORTED_MODULE_4__.b})),__webpack_require__.d(__webpack_exports__,"getGeoBoundingBoxFilterField",(function(){return _geo_bounding_box_filter__WEBPACK_IMPORTED_MODULE_4__.a}));var _geo_polygon_filter__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(63);__webpack_require__.d(__webpack_exports__,"isGeoPolygonFilter",(function(){return _geo_polygon_filter__WEBPACK_IMPORTED_MODULE_5__.b})),__webpack_require__.d(__webpack_exports__,"getGeoPolygonFilterField",(function(){return _geo_polygon_filter__WEBPACK_IMPORTED_MODULE_5__.a}));var _get_display_value__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(99);__webpack_require__.d(__webpack_exports__,"getDisplayValueFromFilter",(function(){return _get_display_value__WEBPACK_IMPORTED_MODULE_6__.a}));var _get_filter_field__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(100);__webpack_require__.d(__webpack_exports__,"getFilterField",(function(){return _get_filter_field__WEBPACK_IMPORTED_MODULE_7__.a}));var _get_filter_params__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(101);__webpack_require__.d(__webpack_exports__,"getFilterParams",(function(){return _get_filter_params__WEBPACK_IMPORTED_MODULE_8__.a}));var _get_index_pattern_from_filter__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(78);__webpack_require__.d(__webpack_exports__,"getIndexPatternFromFilter",(function(){return _get_index_pattern_from_filter__WEBPACK_IMPORTED_MODULE_9__.a}));var _match_all_filter__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(102);__webpack_require__.d(__webpack_exports__,"isMatchAllFilter",(function(){return _match_all_filter__WEBPACK_IMPORTED_MODULE_10__.a}));var _meta_filter__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(103);__webpack_require__.d(__webpack_exports__,"FilterStateStore",(function(){return _meta_filter__WEBPACK_IMPORTED_MODULE_11__.a})),__webpack_require__.d(__webpack_exports__,"buildEmptyFilter",(function(){return _meta_filter__WEBPACK_IMPORTED_MODULE_11__.b})),__webpack_require__.d(__webpack_exports__,"isFilterPinned",(function(){return _meta_filter__WEBPACK_IMPORTED_MODULE_11__.f})),__webpack_require__.d(__webpack_exports__,"toggleFilterDisabled",(function(){return _meta_filter__WEBPACK_IMPORTED_MODULE_11__.i})),__webpack_require__.d(__webpack_exports__,"toggleFilterNegated",(function(){return _meta_filter__WEBPACK_IMPORTED_MODULE_11__.j})),__webpack_require__.d(__webpack_exports__,"toggleFilterPinned",(function(){return _meta_filter__WEBPACK_IMPORTED_MODULE_11__.k})),__webpack_require__.d(__webpack_exports__,"enableFilter",(function(){return _meta_filter__WEBPACK_IMPORTED_MODULE_11__.d})),__webpack_require__.d(__webpack_exports__,"disableFilter",(function(){return _meta_filter__WEBPACK_IMPORTED_MODULE_11__.c})),__webpack_require__.d(__webpack_exports__,"pinFilter",(function(){return _meta_filter__WEBPACK_IMPORTED_MODULE_11__.h})),__webpack_require__.d(__webpack_exports__,"unpinFilter",(function(){return _meta_filter__WEBPACK_IMPORTED_MODULE_11__.l})),__webpack_require__.d(__webpack_exports__,"isFilter",(function(){return _meta_filter__WEBPACK_IMPORTED_MODULE_11__.e})),__webpack_require__.d(__webpack_exports__,"isFilters",(function(){return _meta_filter__WEBPACK_IMPORTED_MODULE_11__.g}));var _missing_filter__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(66);__webpack_require__.d(__webpack_exports__,"isMissingFilter",(function(){return _missing_filter__WEBPACK_IMPORTED_MODULE_12__.b})),__webpack_require__.d(__webpack_exports__,"getMissingFilterField",(function(){return _missing_filter__WEBPACK_IMPORTED_MODULE_12__.a}));var _phrase_filter__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(43);__webpack_require__.d(__webpack_exports__,"isPhraseFilter",(function(){return _phrase_filter__WEBPACK_IMPORTED_MODULE_13__.g})),__webpack_require__.d(__webpack_exports__,"isScriptedPhraseFilter",(function(){return _phrase_filter__WEBPACK_IMPORTED_MODULE_13__.h})),__webpack_require__.d(__webpack_exports__,"getPhraseFilterField",(function(){return _phrase_filter__WEBPACK_IMPORTED_MODULE_13__.d})),__webpack_require__.d(__webpack_exports__,"getPhraseFilterValue",(function(){return _phrase_filter__WEBPACK_IMPORTED_MODULE_13__.e})),__webpack_require__.d(__webpack_exports__,"buildPhraseFilter",(function(){return _phrase_filter__WEBPACK_IMPORTED_MODULE_13__.b})),__webpack_require__.d(__webpack_exports__,"getPhraseScript",(function(){return _phrase_filter__WEBPACK_IMPORTED_MODULE_13__.f})),__webpack_require__.d(__webpack_exports__,"getConvertedValueForField",(function(){return _phrase_filter__WEBPACK_IMPORTED_MODULE_13__.c})),__webpack_require__.d(__webpack_exports__,"buildInlineScriptForPhraseFilter",(function(){return _phrase_filter__WEBPACK_IMPORTED_MODULE_13__.a}));var _phrases_filter__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(64);__webpack_require__.d(__webpack_exports__,"isPhrasesFilter",(function(){return _phrases_filter__WEBPACK_IMPORTED_MODULE_14__.c})),__webpack_require__.d(__webpack_exports__,"getPhrasesFilterField",(function(){return _phrases_filter__WEBPACK_IMPORTED_MODULE_14__.b})),__webpack_require__.d(__webpack_exports__,"buildPhrasesFilter",(function(){return _phrases_filter__WEBPACK_IMPORTED_MODULE_14__.a}));var _query_string_filter__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(104);__webpack_require__.d(__webpack_exports__,"isQueryStringFilter",(function(){return _query_string_filter__WEBPACK_IMPORTED_MODULE_15__.b})),__webpack_require__.d(__webpack_exports__,"buildQueryFilter",(function(){return _query_string_filter__WEBPACK_IMPORTED_MODULE_15__.a}));var _range_filter__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(65);__webpack_require__.d(__webpack_exports__,"isRangeFilter",(function(){return _range_filter__WEBPACK_IMPORTED_MODULE_16__.d})),__webpack_require__.d(__webpack_exports__,"isScriptedRangeFilter",(function(){return _range_filter__WEBPACK_IMPORTED_MODULE_16__.e})),__webpack_require__.d(__webpack_exports__,"getRangeFilterField",(function(){return _range_filter__WEBPACK_IMPORTED_MODULE_16__.b})),__webpack_require__.d(__webpack_exports__,"buildRangeFilter",(function(){return _range_filter__WEBPACK_IMPORTED_MODULE_16__.a})),__webpack_require__.d(__webpack_exports__,"getRangeScript",(function(){return _range_filter__WEBPACK_IMPORTED_MODULE_16__.c}));var _types__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(105);__webpack_require__.d(__webpack_exports__,"FILTERS",(function(){return _types__WEBPACK_IMPORTED_MODULE_17__.a}));const cleanFilter=filter=>Object(lodash__WEBPACK_IMPORTED_MODULE_0__.omit)(filter,["meta","$state"]),isFilterDisabled=filter=>Object(lodash__WEBPACK_IMPORTED_MODULE_0__.get)(filter,"meta.disabled",!1)},function(module,exports){module.exports=__kbnSharedDeps__.Rxjs},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _aggs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(30);__webpack_require__.d(__webpack_exports__,"AggConfig",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.a})),__webpack_require__.d(__webpack_exports__,"AggConfigs",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.c})),__webpack_require__.d(__webpack_exports__,"AggGroupNames",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.e})),__webpack_require__.d(__webpack_exports__,"AggGroupLabels",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.d})),__webpack_require__.d(__webpack_exports__,"AggType",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.i})),__webpack_require__.d(__webpack_exports__,"getAggTypes",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.gc})),__webpack_require__.d(__webpack_exports__,"getAggTypesFunctions",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.hc})),__webpack_require__.d(__webpack_exports__,"AggTypesRegistry",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.j})),__webpack_require__.d(__webpack_exports__,"aggsRequiredUiSettings",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Yb})),__webpack_require__.d(__webpack_exports__,"AggsCommonService",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.k})),__webpack_require__.d(__webpack_exports__,"autoInterval",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Zb})),__webpack_require__.d(__webpack_exports__,"isAutoInterval",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Wc})),__webpack_require__.d(__webpack_exports__,"intervalOptions",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Vc})),__webpack_require__.d(__webpack_exports__,"BucketAggType",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.n})),__webpack_require__.d(__webpack_exports__,"isBucketAggType",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Xc})),__webpack_require__.d(__webpack_exports__,"BUCKET_TYPES",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.l})),__webpack_require__.d(__webpack_exports__,"aggDateHistogramFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Z})),__webpack_require__.d(__webpack_exports__,"aggDateHistogram",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Y})),__webpack_require__.d(__webpack_exports__,"isDateHistogramBucketAggConfig",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Yc})),__webpack_require__.d(__webpack_exports__,"getDateHistogramBucketAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.rc})),__webpack_require__.d(__webpack_exports__,"aggDateRangeFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.bb})),__webpack_require__.d(__webpack_exports__,"aggDateRange",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.ab})),__webpack_require__.d(__webpack_exports__,"getDateRangeBucketAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.tc})),__webpack_require__.d(__webpack_exports__,"aggFilterFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.fb})),__webpack_require__.d(__webpack_exports__,"aggFilter",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.eb})),__webpack_require__.d(__webpack_exports__,"getFilterBucketAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.vc})),__webpack_require__.d(__webpack_exports__,"aggFiltersFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.jb})),__webpack_require__.d(__webpack_exports__,"aggFilters",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.ib})),__webpack_require__.d(__webpack_exports__,"getFiltersBucketAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.xc})),__webpack_require__.d(__webpack_exports__,"aggGeoHashFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.pb})),__webpack_require__.d(__webpack_exports__,"aggGeoHash",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.ob})),__webpack_require__.d(__webpack_exports__,"getGeoHashBucketAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Bc})),__webpack_require__.d(__webpack_exports__,"aggGeoTileFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.rb})),__webpack_require__.d(__webpack_exports__,"aggGeoTile",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.qb})),__webpack_require__.d(__webpack_exports__,"getGeoTitleBucketAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Cc})),__webpack_require__.d(__webpack_exports__,"aggHistogramFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.tb})),__webpack_require__.d(__webpack_exports__,"aggHistogram",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.sb})),__webpack_require__.d(__webpack_exports__,"getHistogramBucketAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Dc})),__webpack_require__.d(__webpack_exports__,"aggIpRangeFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.vb})),__webpack_require__.d(__webpack_exports__,"aggIpRange",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.ub})),__webpack_require__.d(__webpack_exports__,"IP_RANGE_TYPES",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.x})),__webpack_require__.d(__webpack_exports__,"getIpRangeBucketAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Ec})),__webpack_require__.d(__webpack_exports__,"CidrMask",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.o})),__webpack_require__.d(__webpack_exports__,"convertDateRangeToString",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.dc})),__webpack_require__.d(__webpack_exports__,"convertIPRangeToString",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.ec})),__webpack_require__.d(__webpack_exports__,"boundsDescendingRaw",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.ac})),__webpack_require__.d(__webpack_exports__,"calcAutoIntervalNear",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.cc})),__webpack_require__.d(__webpack_exports__,"calcAutoIntervalLessThan",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.bc})),__webpack_require__.d(__webpack_exports__,"isType",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.dd})),__webpack_require__.d(__webpack_exports__,"isNumberType",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.ad})),__webpack_require__.d(__webpack_exports__,"isStringType",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.cd})),__webpack_require__.d(__webpack_exports__,"isStringOrNumberType",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.bd})),__webpack_require__.d(__webpack_exports__,"migrateIncludeExcludeFormat",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.gd})),__webpack_require__.d(__webpack_exports__,"aggRangeFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Jb})),__webpack_require__.d(__webpack_exports__,"aggRange",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Ib})),__webpack_require__.d(__webpack_exports__,"getRangeBucketAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Mc})),__webpack_require__.d(__webpack_exports__,"aggSignificantTermsFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Nb})),__webpack_require__.d(__webpack_exports__,"aggSignificantTerms",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Mb})),__webpack_require__.d(__webpack_exports__,"getSignificantTermsBucketAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Oc})),__webpack_require__.d(__webpack_exports__,"aggTermsFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Vb})),__webpack_require__.d(__webpack_exports__,"aggTerms",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Ub})),__webpack_require__.d(__webpack_exports__,"termsAggFilter",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.pd})),__webpack_require__.d(__webpack_exports__,"getTermsBucketAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Sc})),__webpack_require__.d(__webpack_exports__,"aggAvgFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.J})),__webpack_require__.d(__webpack_exports__,"aggAvg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.I})),__webpack_require__.d(__webpack_exports__,"getAvgMetricAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.ic})),__webpack_require__.d(__webpack_exports__,"aggBucketAvgFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.L})),__webpack_require__.d(__webpack_exports__,"aggBucketAvg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.K})),__webpack_require__.d(__webpack_exports__,"getBucketAvgMetricAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.jc})),__webpack_require__.d(__webpack_exports__,"aggBucketMaxFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.N})),__webpack_require__.d(__webpack_exports__,"aggBucketMax",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.M})),__webpack_require__.d(__webpack_exports__,"getBucketMaxMetricAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.kc})),__webpack_require__.d(__webpack_exports__,"aggBucketMinFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.P})),__webpack_require__.d(__webpack_exports__,"aggBucketMin",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.O})),__webpack_require__.d(__webpack_exports__,"getBucketMinMetricAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.lc})),__webpack_require__.d(__webpack_exports__,"aggBucketSumFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.R})),__webpack_require__.d(__webpack_exports__,"aggBucketSum",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Q})),__webpack_require__.d(__webpack_exports__,"getBucketSumMetricAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.mc})),__webpack_require__.d(__webpack_exports__,"aggFilteredMetricFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.hb})),__webpack_require__.d(__webpack_exports__,"aggFilteredMetric",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.gb})),__webpack_require__.d(__webpack_exports__,"getFilteredMetricAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.wc})),__webpack_require__.d(__webpack_exports__,"aggCardinalityFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.T})),__webpack_require__.d(__webpack_exports__,"aggCardinality",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.S})),__webpack_require__.d(__webpack_exports__,"getCardinalityMetricAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.oc})),__webpack_require__.d(__webpack_exports__,"getCountMetricAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.pc})),__webpack_require__.d(__webpack_exports__,"aggCountFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.V})),__webpack_require__.d(__webpack_exports__,"aggCount",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.U})),__webpack_require__.d(__webpack_exports__,"aggCumulativeSumFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.X})),__webpack_require__.d(__webpack_exports__,"aggCumulativeSum",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.W})),__webpack_require__.d(__webpack_exports__,"getCumulativeSumMetricAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.qc})),__webpack_require__.d(__webpack_exports__,"aggDerivativeFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.db})),__webpack_require__.d(__webpack_exports__,"aggDerivative",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.cb})),__webpack_require__.d(__webpack_exports__,"getDerivativeMetricAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.uc})),__webpack_require__.d(__webpack_exports__,"aggGeoBoundsFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.lb})),__webpack_require__.d(__webpack_exports__,"aggGeoBounds",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.kb})),__webpack_require__.d(__webpack_exports__,"getGeoBoundsMetricAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.zc})),__webpack_require__.d(__webpack_exports__,"aggGeoCentroidFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.nb})),__webpack_require__.d(__webpack_exports__,"aggGeoCentroid",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.mb})),__webpack_require__.d(__webpack_exports__,"getGeoCentroidMetricAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Ac})),__webpack_require__.d(__webpack_exports__,"parentPipelineType",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.id})),__webpack_require__.d(__webpack_exports__,"parentPipelineAggHelper",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.hd})),__webpack_require__.d(__webpack_exports__,"siblingPipelineType",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.nd})),__webpack_require__.d(__webpack_exports__,"siblingPipelineAggHelper",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.md})),__webpack_require__.d(__webpack_exports__,"aggMaxFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.xb})),__webpack_require__.d(__webpack_exports__,"aggMax",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.wb})),__webpack_require__.d(__webpack_exports__,"getMaxMetricAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Fc})),__webpack_require__.d(__webpack_exports__,"aggMedianFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.zb})),__webpack_require__.d(__webpack_exports__,"aggMedian",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.yb})),__webpack_require__.d(__webpack_exports__,"getMedianMetricAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Gc})),__webpack_require__.d(__webpack_exports__,"aggSinglePercentileFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Pb})),__webpack_require__.d(__webpack_exports__,"aggSinglePercentile",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Ob})),__webpack_require__.d(__webpack_exports__,"getSinglePercentileMetricAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Pc})),__webpack_require__.d(__webpack_exports__,"MetricAggType",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.E})),__webpack_require__.d(__webpack_exports__,"isMetricAggType",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Zc})),__webpack_require__.d(__webpack_exports__,"METRIC_TYPES",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.D})),__webpack_require__.d(__webpack_exports__,"aggMinFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Bb})),__webpack_require__.d(__webpack_exports__,"aggMin",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Ab})),__webpack_require__.d(__webpack_exports__,"getMinMetricAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Hc})),__webpack_require__.d(__webpack_exports__,"aggMovingAvgFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Db})),__webpack_require__.d(__webpack_exports__,"aggMovingAvg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Cb})),__webpack_require__.d(__webpack_exports__,"getMovingAvgMetricAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Ic})),__webpack_require__.d(__webpack_exports__,"aggPercentileRanksFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Fb})),__webpack_require__.d(__webpack_exports__,"aggPercentileRanks",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Eb})),__webpack_require__.d(__webpack_exports__,"getPercentileRanksMetricAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Kc})),__webpack_require__.d(__webpack_exports__,"aggPercentilesFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Hb})),__webpack_require__.d(__webpack_exports__,"aggPercentiles",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Gb})),__webpack_require__.d(__webpack_exports__,"getPercentilesMetricAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Lc})),__webpack_require__.d(__webpack_exports__,"aggSerialDiffFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Lb})),__webpack_require__.d(__webpack_exports__,"aggSerialDiff",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Kb})),__webpack_require__.d(__webpack_exports__,"getSerialDiffMetricAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Nc})),__webpack_require__.d(__webpack_exports__,"aggStdDeviationFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Rb})),__webpack_require__.d(__webpack_exports__,"aggStdDeviation",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Qb})),__webpack_require__.d(__webpack_exports__,"getStdDeviationMetricAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Qc})),__webpack_require__.d(__webpack_exports__,"aggSumFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Tb})),__webpack_require__.d(__webpack_exports__,"aggSum",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Sb})),__webpack_require__.d(__webpack_exports__,"getSumMetricAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Rc})),__webpack_require__.d(__webpack_exports__,"aggTopHitFnName",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Xb})),__webpack_require__.d(__webpack_exports__,"aggTopHit",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Wb})),__webpack_require__.d(__webpack_exports__,"getTopHitMetricAgg",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Tc})),__webpack_require__.d(__webpack_exports__,"AggParamType",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.h})),__webpack_require__.d(__webpack_exports__,"BaseParamType",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.m})),__webpack_require__.d(__webpack_exports__,"FieldParamType",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.r})),__webpack_require__.d(__webpack_exports__,"JsonParamType",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.C})),__webpack_require__.d(__webpack_exports__,"OptionedParamType",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.F})),__webpack_require__.d(__webpack_exports__,"StringParamType",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.H})),__webpack_require__.d(__webpack_exports__,"IAggConfig",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.s})),__webpack_require__.d(__webpack_exports__,"AggConfigSerialized",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.b})),__webpack_require__.d(__webpack_exports__,"CreateAggConfigParams",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.p})),__webpack_require__.d(__webpack_exports__,"IAggConfigs",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.t})),__webpack_require__.d(__webpack_exports__,"IAggType",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.u})),__webpack_require__.d(__webpack_exports__,"AggParam",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.f})),__webpack_require__.d(__webpack_exports__,"AggParamOption",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.g})),__webpack_require__.d(__webpack_exports__,"IFieldParamType",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.v})),__webpack_require__.d(__webpack_exports__,"IMetricAggType",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.w})),__webpack_require__.d(__webpack_exports__,"DateRangeKey",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.q})),__webpack_require__.d(__webpack_exports__,"IpRangeKey",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.A})),__webpack_require__.d(__webpack_exports__,"OptionedValueProp",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.G})),__webpack_require__.d(__webpack_exports__,"getCalculateAutoTimeExpression",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.nc})),__webpack_require__.d(__webpack_exports__,"getNumberHistogramIntervalByDatatableColumn",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Jc})),__webpack_require__.d(__webpack_exports__,"getDateHistogramMetaDataByDatatableColumn",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.sc})),__webpack_require__.d(__webpack_exports__,"dateHistogramInterval",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.fc})),__webpack_require__.d(__webpack_exports__,"InvalidEsCalendarIntervalError",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.y})),__webpack_require__.d(__webpack_exports__,"InvalidEsIntervalFormatError",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.z})),__webpack_require__.d(__webpack_exports__,"isValidEsInterval",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.ed})),__webpack_require__.d(__webpack_exports__,"isValidInterval",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.fd})),__webpack_require__.d(__webpack_exports__,"splitStringInterval",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.od})),__webpack_require__.d(__webpack_exports__,"parseInterval",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.kd})),__webpack_require__.d(__webpack_exports__,"parseEsInterval",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.jd})),__webpack_require__.d(__webpack_exports__,"toAbsoluteDates",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.qd})),__webpack_require__.d(__webpack_exports__,"getFormatWithAggs",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.yc})),__webpack_require__.d(__webpack_exports__,"Ipv4Address",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.B})),__webpack_require__.d(__webpack_exports__,"propFilter",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.ld})),__webpack_require__.d(__webpack_exports__,"toAngularJSON",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.rd})),__webpack_require__.d(__webpack_exports__,"inferTimeZone",(function(){return _aggs__WEBPACK_IMPORTED_MODULE_0__.Uc}));var _es_search__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(129);__webpack_require__.d(__webpack_exports__,"ES_SEARCH_STRATEGY",(function(){return _es_search__WEBPACK_IMPORTED_MODULE_1__.a}));var _expressions__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(38);__webpack_require__.d(__webpack_exports__,"kibana",(function(){return _expressions__WEBPACK_IMPORTED_MODULE_2__.j})),__webpack_require__.d(__webpack_exports__,"getKibanaContextFn",(function(){return _expressions__WEBPACK_IMPORTED_MODULE_2__.h})),__webpack_require__.d(__webpack_exports__,"kqlFunction",(function(){return _expressions__WEBPACK_IMPORTED_MODULE_2__.n})),__webpack_require__.d(__webpack_exports__,"luceneFunction",(function(){return _expressions__WEBPACK_IMPORTED_MODULE_2__.o})),__webpack_require__.d(__webpack_exports__,"queryToAst",(function(){return _expressions__WEBPACK_IMPORTED_MODULE_2__.q})),__webpack_require__.d(__webpack_exports__,"timerangeToAst",(function(){return _expressions__WEBPACK_IMPORTED_MODULE_2__.t})),__webpack_require__.d(__webpack_exports__,"kibanaContext",(function(){return _expressions__WEBPACK_IMPORTED_MODULE_2__.k})),__webpack_require__.d(__webpack_exports__,"getEsaggsMeta",(function(){return _expressions__WEBPACK_IMPORTED_MODULE_2__.f})),__webpack_require__.d(__webpack_exports__,"handleEsaggsRequest",(function(){return _expressions__WEBPACK_IMPORTED_MODULE_2__.i})),__webpack_require__.d(__webpack_exports__,"functionWrapper",(function(){return _expressions__WEBPACK_IMPORTED_MODULE_2__.e})),__webpack_require__.d(__webpack_exports__,"rangeFunction",(function(){return _expressions__WEBPACK_IMPORTED_MODULE_2__.s})),__webpack_require__.d(__webpack_exports__,"fieldFunction",(function(){return _expressions__WEBPACK_IMPORTED_MODULE_2__.c})),__webpack_require__.d(__webpack_exports__,"phraseFilterFunction",(function(){return _expressions__WEBPACK_IMPORTED_MODULE_2__.p})),__webpack_require__.d(__webpack_exports__,"existsFilterFunction",(function(){return _expressions__WEBPACK_IMPORTED_MODULE_2__.b})),__webpack_require__.d(__webpack_exports__,"rangeFilterFunction",(function(){return _expressions__WEBPACK_IMPORTED_MODULE_2__.r})),__webpack_require__.d(__webpack_exports__,"kibanaFilterFunction",(function(){return _expressions__WEBPACK_IMPORTED_MODULE_2__.l})),__webpack_require__.d(__webpack_exports__,"filtersToAst",(function(){return _expressions__WEBPACK_IMPORTED_MODULE_2__.d})),__webpack_require__.d(__webpack_exports__,"kibanaTimerangeFunction",(function(){return _expressions__WEBPACK_IMPORTED_MODULE_2__.m})),__webpack_require__.d(__webpack_exports__,"esRawResponse",(function(){return _expressions__WEBPACK_IMPORTED_MODULE_2__.a})),__webpack_require__.d(__webpack_exports__,"getEsdslFn",(function(){return _expressions__WEBPACK_IMPORTED_MODULE_2__.g}));var _search_source__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(69);for(var __WEBPACK_IMPORT_KEY__ in _search_source__WEBPACK_IMPORTED_MODULE_3__)["default","AggConfig","AggConfigs","AggGroupNames","AggGroupLabels","AggType","getAggTypes","getAggTypesFunctions","AggTypesRegistry","aggsRequiredUiSettings","AggsCommonService","autoInterval","isAutoInterval","intervalOptions","BucketAggType","isBucketAggType","BUCKET_TYPES","aggDateHistogramFnName","aggDateHistogram","isDateHistogramBucketAggConfig","getDateHistogramBucketAgg","aggDateRangeFnName","aggDateRange","getDateRangeBucketAgg","aggFilterFnName","aggFilter","getFilterBucketAgg","aggFiltersFnName","aggFilters","getFiltersBucketAgg","aggGeoHashFnName","aggGeoHash","getGeoHashBucketAgg","aggGeoTileFnName","aggGeoTile","getGeoTitleBucketAgg","aggHistogramFnName","aggHistogram","getHistogramBucketAgg","aggIpRangeFnName","aggIpRange","IP_RANGE_TYPES","getIpRangeBucketAgg","CidrMask","convertDateRangeToString","convertIPRangeToString","boundsDescendingRaw","calcAutoIntervalNear","calcAutoIntervalLessThan","isType","isNumberType","isStringType","isStringOrNumberType","migrateIncludeExcludeFormat","aggRangeFnName","aggRange","getRangeBucketAgg","aggSignificantTermsFnName","aggSignificantTerms","getSignificantTermsBucketAgg","aggTermsFnName","aggTerms","termsAggFilter","getTermsBucketAgg","aggAvgFnName","aggAvg","getAvgMetricAgg","aggBucketAvgFnName","aggBucketAvg","getBucketAvgMetricAgg","aggBucketMaxFnName","aggBucketMax","getBucketMaxMetricAgg","aggBucketMinFnName","aggBucketMin","getBucketMinMetricAgg","aggBucketSumFnName","aggBucketSum","getBucketSumMetricAgg","aggFilteredMetricFnName","aggFilteredMetric","getFilteredMetricAgg","aggCardinalityFnName","aggCardinality","getCardinalityMetricAgg","getCountMetricAgg","aggCountFnName","aggCount","aggCumulativeSumFnName","aggCumulativeSum","getCumulativeSumMetricAgg","aggDerivativeFnName","aggDerivative","getDerivativeMetricAgg","aggGeoBoundsFnName","aggGeoBounds","getGeoBoundsMetricAgg","aggGeoCentroidFnName","aggGeoCentroid","getGeoCentroidMetricAgg","parentPipelineType","parentPipelineAggHelper","siblingPipelineType","siblingPipelineAggHelper","aggMaxFnName","aggMax","getMaxMetricAgg","aggMedianFnName","aggMedian","getMedianMetricAgg","aggSinglePercentileFnName","aggSinglePercentile","getSinglePercentileMetricAgg","MetricAggType","isMetricAggType","METRIC_TYPES","aggMinFnName","aggMin","getMinMetricAgg","aggMovingAvgFnName","aggMovingAvg","getMovingAvgMetricAgg","aggPercentileRanksFnName","aggPercentileRanks","getPercentileRanksMetricAgg","aggPercentilesFnName","aggPercentiles","getPercentilesMetricAgg","aggSerialDiffFnName","aggSerialDiff","getSerialDiffMetricAgg","aggStdDeviationFnName","aggStdDeviation","getStdDeviationMetricAgg","aggSumFnName","aggSum","getSumMetricAgg","aggTopHitFnName","aggTopHit","getTopHitMetricAgg","AggParamType","BaseParamType","FieldParamType","JsonParamType","OptionedParamType","StringParamType","IAggConfig","AggConfigSerialized","CreateAggConfigParams","IAggConfigs","IAggType","AggParam","AggParamOption","IFieldParamType","IMetricAggType","DateRangeKey","IpRangeKey","OptionedValueProp","getCalculateAutoTimeExpression","getNumberHistogramIntervalByDatatableColumn","getDateHistogramMetaDataByDatatableColumn","dateHistogramInterval","InvalidEsCalendarIntervalError","InvalidEsIntervalFormatError","isValidEsInterval","isValidInterval","splitStringInterval","parseInterval","parseEsInterval","toAbsoluteDates","getFormatWithAggs","Ipv4Address","propFilter","toAngularJSON","inferTimeZone","ES_SEARCH_STRATEGY","kibana","getKibanaContextFn","kqlFunction","luceneFunction","queryToAst","timerangeToAst","kibanaContext","getEsaggsMeta","handleEsaggsRequest","functionWrapper","rangeFunction","fieldFunction","phraseFilterFunction","existsFilterFunction","rangeFilterFunction","kibanaFilterFunction","filtersToAst","kibanaTimerangeFunction","esRawResponse","getEsdslFn"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _search_source__WEBPACK_IMPORTED_MODULE_3__[key]}))}(__WEBPACK_IMPORT_KEY__);var _tabify__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(88);__webpack_require__.d(__webpack_exports__,"tabifyDocs",(function(){return _tabify__WEBPACK_IMPORTED_MODULE_4__.b})),__webpack_require__.d(__webpack_exports__,"tabifyAggResponse",(function(){return _tabify__WEBPACK_IMPORTED_MODULE_4__.a})),__webpack_require__.d(__webpack_exports__,"tabifyGetColumns",(function(){return _tabify__WEBPACK_IMPORTED_MODULE_4__.c}));var _types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(120);for(var __WEBPACK_IMPORT_KEY__ in _types__WEBPACK_IMPORTED_MODULE_5__)["default","AggConfig","AggConfigs","AggGroupNames","AggGroupLabels","AggType","getAggTypes","getAggTypesFunctions","AggTypesRegistry","aggsRequiredUiSettings","AggsCommonService","autoInterval","isAutoInterval","intervalOptions","BucketAggType","isBucketAggType","BUCKET_TYPES","aggDateHistogramFnName","aggDateHistogram","isDateHistogramBucketAggConfig","getDateHistogramBucketAgg","aggDateRangeFnName","aggDateRange","getDateRangeBucketAgg","aggFilterFnName","aggFilter","getFilterBucketAgg","aggFiltersFnName","aggFilters","getFiltersBucketAgg","aggGeoHashFnName","aggGeoHash","getGeoHashBucketAgg","aggGeoTileFnName","aggGeoTile","getGeoTitleBucketAgg","aggHistogramFnName","aggHistogram","getHistogramBucketAgg","aggIpRangeFnName","aggIpRange","IP_RANGE_TYPES","getIpRangeBucketAgg","CidrMask","convertDateRangeToString","convertIPRangeToString","boundsDescendingRaw","calcAutoIntervalNear","calcAutoIntervalLessThan","isType","isNumberType","isStringType","isStringOrNumberType","migrateIncludeExcludeFormat","aggRangeFnName","aggRange","getRangeBucketAgg","aggSignificantTermsFnName","aggSignificantTerms","getSignificantTermsBucketAgg","aggTermsFnName","aggTerms","termsAggFilter","getTermsBucketAgg","aggAvgFnName","aggAvg","getAvgMetricAgg","aggBucketAvgFnName","aggBucketAvg","getBucketAvgMetricAgg","aggBucketMaxFnName","aggBucketMax","getBucketMaxMetricAgg","aggBucketMinFnName","aggBucketMin","getBucketMinMetricAgg","aggBucketSumFnName","aggBucketSum","getBucketSumMetricAgg","aggFilteredMetricFnName","aggFilteredMetric","getFilteredMetricAgg","aggCardinalityFnName","aggCardinality","getCardinalityMetricAgg","getCountMetricAgg","aggCountFnName","aggCount","aggCumulativeSumFnName","aggCumulativeSum","getCumulativeSumMetricAgg","aggDerivativeFnName","aggDerivative","getDerivativeMetricAgg","aggGeoBoundsFnName","aggGeoBounds","getGeoBoundsMetricAgg","aggGeoCentroidFnName","aggGeoCentroid","getGeoCentroidMetricAgg","parentPipelineType","parentPipelineAggHelper","siblingPipelineType","siblingPipelineAggHelper","aggMaxFnName","aggMax","getMaxMetricAgg","aggMedianFnName","aggMedian","getMedianMetricAgg","aggSinglePercentileFnName","aggSinglePercentile","getSinglePercentileMetricAgg","MetricAggType","isMetricAggType","METRIC_TYPES","aggMinFnName","aggMin","getMinMetricAgg","aggMovingAvgFnName","aggMovingAvg","getMovingAvgMetricAgg","aggPercentileRanksFnName","aggPercentileRanks","getPercentileRanksMetricAgg","aggPercentilesFnName","aggPercentiles","getPercentilesMetricAgg","aggSerialDiffFnName","aggSerialDiff","getSerialDiffMetricAgg","aggStdDeviationFnName","aggStdDeviation","getStdDeviationMetricAgg","aggSumFnName","aggSum","getSumMetricAgg","aggTopHitFnName","aggTopHit","getTopHitMetricAgg","AggParamType","BaseParamType","FieldParamType","JsonParamType","OptionedParamType","StringParamType","IAggConfig","AggConfigSerialized","CreateAggConfigParams","IAggConfigs","IAggType","AggParam","AggParamOption","IFieldParamType","IMetricAggType","DateRangeKey","IpRangeKey","OptionedValueProp","getCalculateAutoTimeExpression","getNumberHistogramIntervalByDatatableColumn","getDateHistogramMetaDataByDatatableColumn","dateHistogramInterval","InvalidEsCalendarIntervalError","InvalidEsIntervalFormatError","isValidEsInterval","isValidInterval","splitStringInterval","parseInterval","parseEsInterval","toAbsoluteDates","getFormatWithAggs","Ipv4Address","propFilter","toAngularJSON","inferTimeZone","ES_SEARCH_STRATEGY","kibana","getKibanaContextFn","kqlFunction","luceneFunction","queryToAst","timerangeToAst","kibanaContext","getEsaggsMeta","handleEsaggsRequest","functionWrapper","rangeFunction","fieldFunction","phraseFilterFunction","existsFilterFunction","rangeFilterFunction","kibanaFilterFunction","filtersToAst","kibanaTimerangeFunction","esRawResponse","getEsdslFn","tabifyDocs","tabifyAggResponse","tabifyGetColumns"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _types__WEBPACK_IMPORTED_MODULE_5__[key]}))}(__WEBPACK_IMPORT_KEY__);var _utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(121);__webpack_require__.d(__webpack_exports__,"isErrorResponse",(function(){return _utils__WEBPACK_IMPORTED_MODULE_6__.b})),__webpack_require__.d(__webpack_exports__,"isCompleteResponse",(function(){return _utils__WEBPACK_IMPORTED_MODULE_6__.a})),__webpack_require__.d(__webpack_exports__,"isPartialResponse",(function(){return _utils__WEBPACK_IMPORTED_MODULE_6__.c}));var _session__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(126);__webpack_require__.d(__webpack_exports__,"SearchSessionStatus",(function(){return _session__WEBPACK_IMPORTED_MODULE_7__.c})),__webpack_require__.d(__webpack_exports__,"SEARCH_SESSION_TYPE",(function(){return _session__WEBPACK_IMPORTED_MODULE_7__.b})),__webpack_require__.d(__webpack_exports__,"SEARCH_SESSIONS_TABLE_ID",(function(){return _session__WEBPACK_IMPORTED_MODULE_7__.a}))},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return field_format_FieldFormat}));var external_kbnSharedDeps_Lodash_=__webpack_require__(2),types=__webpack_require__(7);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const createCustomFieldFormat=convert=>{var _class,_temp;return _temp=_class=class extends field_format_FieldFormat{constructor(...args){super(...args),_defineProperty(this,"textConvert",convert)}},_defineProperty(_class,"id",types.a.CUSTOM),_temp};var content_types=__webpack_require__(46);function field_format_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const DEFAULT_CONTEXT_TYPE=content_types.b;class field_format_FieldFormat{constructor(_params={},getConfig){field_format_defineProperty(this,"convertObject",void 0),field_format_defineProperty(this,"htmlConvert",void 0),field_format_defineProperty(this,"textConvert",void 0),field_format_defineProperty(this,"type",this.constructor),field_format_defineProperty(this,"allowsNumericalAggregations",void 0),field_format_defineProperty(this,"_params",void 0),field_format_defineProperty(this,"getConfig",void 0),this._params=_params,getConfig&&(this.getConfig=getConfig)}convert(value,contentType=DEFAULT_CONTEXT_TYPE,options){const converter=this.getConverterFor(contentType);return converter?converter.call(this,value,options):value}getConverterFor(contentType=DEFAULT_CONTEXT_TYPE){return this.convertObject||(this.convertObject=this.setupContentType()),this.convertObject[contentType]}getParamDefaults(){return{}}param(name){const val=Object(external_kbnSharedDeps_Lodash_.get)(this._params,name);return val||!1===val||0===val?val:Object(external_kbnSharedDeps_Lodash_.get)(this.getParamDefaults(),name)}params(){return Object(external_kbnSharedDeps_Lodash_.cloneDeep)(Object(external_kbnSharedDeps_Lodash_.defaults)({},this._params,this.getParamDefaults()))}toJSON(){const id=Object(external_kbnSharedDeps_Lodash_.get)(this.type,"id"),defaultsParams=this.getParamDefaults()||{},params=Object(external_kbnSharedDeps_Lodash_.transform)(this._params,(uniqParams,val,param)=>{"parsedUrl"!==param&&param&&val!==Object(external_kbnSharedDeps_Lodash_.get)(defaultsParams,param)&&(uniqParams[param]=val)},{});return{id:id,params:Object(external_kbnSharedDeps_Lodash_.size)(params)?params:void 0}}static from(convertFn){return createCustomFieldFormat(convertFn)}setupContentType(){return{text:Object(content_types.d)(this,this.textConvert),html:Object(content_types.c)(this,this.htmlConvert)}}static isInstanceOfFieldFormat(fieldFormat){return Boolean(fieldFormat&&fieldFormat.convert)}}field_format_defineProperty(field_format_FieldFormat,"id",void 0),field_format_defineProperty(field_format_FieldFormat,"title",void 0),field_format_defineProperty(field_format_FieldFormat,"fieldType",void 0)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"n",(function(){return field_formats_registry_FieldFormatsRegistry})),__webpack_require__.d(__webpack_exports__,"g",(function(){return field_format.a})),__webpack_require__.d(__webpack_exports__,"C",(function(){return baseFormatters})),__webpack_require__.d(__webpack_exports__,"a",(function(){return boolean_BoolFormat})),__webpack_require__.d(__webpack_exports__,"b",(function(){return bytes_BytesFormat})),__webpack_require__.d(__webpack_exports__,"c",(function(){return color_ColorFormat})),__webpack_require__.d(__webpack_exports__,"e",(function(){return duration_DurationFormat})),__webpack_require__.d(__webpack_exports__,"s",(function(){return ip_IpFormat})),__webpack_require__.d(__webpack_exports__,"t",(function(){return number_NumberFormat})),__webpack_require__.d(__webpack_exports__,"u",(function(){return percent_PercentFormat})),__webpack_require__.d(__webpack_exports__,"v",(function(){return relative_date_RelativeDateFormat})),__webpack_require__.d(__webpack_exports__,"w",(function(){return source_SourceFormat})),__webpack_require__.d(__webpack_exports__,"x",(function(){return static_lookup_StaticLookupFormat})),__webpack_require__.d(__webpack_exports__,"B",(function(){return url_UrlFormat})),__webpack_require__.d(__webpack_exports__,"y",(function(){return string.a})),__webpack_require__.d(__webpack_exports__,"A",(function(){return truncate_TruncateFormat})),__webpack_require__.d(__webpack_exports__,"q",(function(){return histogram_HistogramFormat})),__webpack_require__.d(__webpack_exports__,"D",(function(){return utils.c})),__webpack_require__.d(__webpack_exports__,"d",(function(){return DEFAULT_CONVERTER_COLOR})),__webpack_require__.d(__webpack_exports__,"f",(function(){return types.a})),__webpack_require__.d(__webpack_exports__,"p",(function(){return content_types.a})),__webpack_require__.d(__webpack_exports__,"z",(function(){return content_types.b})),__webpack_require__.d(__webpack_exports__,"m",(function(){return types.FieldFormatsGetConfigFn})),__webpack_require__.d(__webpack_exports__,"l",(function(){return types.FieldFormatsContentType})),__webpack_require__.d(__webpack_exports__,"h",(function(){return types.FieldFormatConfig})),__webpack_require__.d(__webpack_exports__,"i",(function(){return types.FieldFormatId})),__webpack_require__.d(__webpack_exports__,"j",(function(){return types.FieldFormatInstanceType})),__webpack_require__.d(__webpack_exports__,"r",(function(){return types.IFieldFormat})),__webpack_require__.d(__webpack_exports__,"o",(function(){return types.FieldFormatsStartCommon})),__webpack_require__.d(__webpack_exports__,"k",(function(){return FieldFormatNotFoundError}));var external_kbnSharedDeps_Lodash_=__webpack_require__(2),types=__webpack_require__(7),external_kbnSharedDeps_KbnI18n_=__webpack_require__(0),utils=__webpack_require__(28),kbn_field_types_types=__webpack_require__(4),field_format=__webpack_require__(12);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const templateMatchRE=/{{([\s\S]+?)}}/g,allowedUrlSchemes=["http://","https://"],URL_TYPES=[{kind:"a",text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.url.types.link",{defaultMessage:"Link"})},{kind:"img",text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.url.types.img",{defaultMessage:"Image"})},{kind:"audio",text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.url.types.audio",{defaultMessage:"Audio"})}];class url_UrlFormat extends field_format.a{constructor(params){super(params),_defineProperty(this,"textConvert",value=>this.formatLabel(value)),_defineProperty(this,"htmlConvert",(rawValue,options={})=>{const{field:field,hit:hit}=options,{parsedUrl:parsedUrl}=this._params,{basePath:basePath,pathname:pathname,origin:origin}=parsedUrl||{},url=Object(external_kbnSharedDeps_Lodash_.escape)(this.formatUrl(rawValue)),label=Object(external_kbnSharedDeps_Lodash_.escape)(this.formatLabel(rawValue,url));switch(this.param("type")){case"audio":return`<audio controls preload="none" src="${url}">`;case"img":const imageLabel=label===url?"A dynamically-specified image located at "+url:label;return this.generateImgHtml(url,imageLabel);default:const allowed=allowedUrlSchemes.some(scheme=>0===url.indexOf(scheme));if(!allowed&&!parsedUrl)return url;let linkLabel,prefix="";if(!allowed)if("#"===url[0])prefix=`${origin}${pathname}`;else if(0===url.indexOf(basePath||"/"))prefix=""+origin;else{prefix=`${origin}${basePath||""}/app${"/"===url[0]?"":"/"}`}linkLabel=hit&&hit.highlight&&hit.highlight[field.name]?Object(utils.b)(label,hit.highlight[field.name]):label;const linkTarget=this.param("openLinkInCurrentTab")?"_self":"_blank";return`<a href="${prefix}${url}" target="${linkTarget}" rel="noopener noreferrer">${linkLabel}</a>`}}),this.compileTemplate=Object(external_kbnSharedDeps_Lodash_.memoize)(this.compileTemplate)}getParamDefaults(){return{type:"a",urlTemplate:null,labelTemplate:null,width:null,height:null}}formatLabel(value,url){const template=this.param("labelTemplate");return null==url&&(url=this.formatUrl(value)),template?this.compileTemplate(template)({value:value,url:url}):url}formatUrl(value){const template=this.param("urlTemplate");return template?this.compileTemplate(template)({value:encodeURIComponent(value),rawValue:value}):value}compileTemplate(template){const parts=template.split(templateMatchRE).map((part,i)=>i%2?part.trim():part);return function(locals){let output="",i=-1;for(;++i<parts.length;)if(i%2){if(locals.hasOwnProperty(parts[i])){const local=locals[parts[i]];output+=null==local?"":local}}else output+=parts[i];return output}}generateImgHtml(url,imageLabel){const isValidWidth=!isNaN(parseInt(this.param("width"),10)),isValidHeight=!isNaN(parseInt(this.param("height"),10));return`<img src="${url}" alt="${imageLabel}" style="width:auto; height:auto; max-width:${isValidWidth?this.param("width")+"px":"none"}; max-height:${isValidHeight?this.param("height")+"px":"none"};">`}}_defineProperty(url_UrlFormat,"id",types.a.URL),_defineProperty(url_UrlFormat,"title",external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.url.title",{defaultMessage:"Url"})),_defineProperty(url_UrlFormat,"fieldType",[kbn_field_types_types.b.NUMBER,kbn_field_types_types.b.BOOLEAN,kbn_field_types_types.b.DATE,kbn_field_types_types.b.IP,kbn_field_types_types.b.STRING,kbn_field_types_types.b.MURMUR3,kbn_field_types_types.b.UNKNOWN,kbn_field_types_types.b.CONFLICT]),_defineProperty(url_UrlFormat,"urlTypes",URL_TYPES);var external_kbnSharedDeps_ElasticNumeral_=__webpack_require__(56),external_kbnSharedDeps_ElasticNumeral_default=__webpack_require__.n(external_kbnSharedDeps_ElasticNumeral_),languages=__webpack_require__(131),languages_default=__webpack_require__.n(languages),constants=__webpack_require__(26);function numeral_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const numeralInst=external_kbnSharedDeps_ElasticNumeral_default()();languages_default.a.forEach(numeralLanguage=>{external_kbnSharedDeps_ElasticNumeral_default.a.language(numeralLanguage.id,numeralLanguage.lang)});class numeral_NumeralFormat extends field_format.a{constructor(...args){super(...args),numeral_defineProperty(this,"id",void 0),numeral_defineProperty(this,"title",void 0),numeral_defineProperty(this,"getParamDefaults",()=>({pattern:this.getConfig(`format:${this.id}:defaultPattern`)})),numeral_defineProperty(this,"textConvert",val=>this.getConvertedValue(val))}getConvertedValue(val){if(val===-1/0)return"-∞";if(val===1/0)return"+∞";if("number"!=typeof val&&(val=parseFloat(val)),isNaN(val))return"";const previousLocale=external_kbnSharedDeps_ElasticNumeral_default.a.language(),defaultLocale=this.getConfig&&this.getConfig(constants.c.FORMAT_NUMBER_DEFAULT_LOCALE)||"en";external_kbnSharedDeps_ElasticNumeral_default.a.language(defaultLocale);const formatted=numeralInst.set(val).format(this.param("pattern"));return external_kbnSharedDeps_ElasticNumeral_default.a.language(previousLocale),formatted}}function bytes_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}numeral_defineProperty(numeral_NumeralFormat,"fieldType",kbn_field_types_types.b.NUMBER);class bytes_BytesFormat extends numeral_NumeralFormat{constructor(...args){super(...args),bytes_defineProperty(this,"id",bytes_BytesFormat.id),bytes_defineProperty(this,"title",bytes_BytesFormat.title),bytes_defineProperty(this,"allowsNumericalAggregations",!0)}}bytes_defineProperty(bytes_BytesFormat,"id",types.a.BYTES),bytes_defineProperty(bytes_BytesFormat,"title",external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.bytes.title",{defaultMessage:"Bytes"}));var external_kbnSharedDeps_Moment_=__webpack_require__(5),external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);function relative_date_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class relative_date_RelativeDateFormat extends field_format.a{constructor(...args){super(...args),relative_date_defineProperty(this,"textConvert",val=>{if(null==val)return"-";const date=external_kbnSharedDeps_Moment_default()(val);return date.isValid()?date.fromNow():val})}}function duration_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}relative_date_defineProperty(relative_date_RelativeDateFormat,"id",types.a.RELATIVE_DATE),relative_date_defineProperty(relative_date_RelativeDateFormat,"title",external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.relative_date.title",{defaultMessage:"Relative date"})),relative_date_defineProperty(relative_date_RelativeDateFormat,"fieldType",kbn_field_types_types.b.DATE);const ratioToSeconds={picoseconds:1e-12,nanoseconds:1e-9,microseconds:1e-6},DEFAULT_INPUT_FORMAT={text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.duration.inputFormats.seconds",{defaultMessage:"Seconds"}),kind:"seconds"},inputFormats=[{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.duration.inputFormats.picoseconds",{defaultMessage:"Picoseconds"}),kind:"picoseconds"},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.duration.inputFormats.nanoseconds",{defaultMessage:"Nanoseconds"}),kind:"nanoseconds"},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.duration.inputFormats.microseconds",{defaultMessage:"Microseconds"}),kind:"microseconds"},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.duration.inputFormats.milliseconds",{defaultMessage:"Milliseconds"}),kind:"milliseconds"},{...DEFAULT_INPUT_FORMAT},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.duration.inputFormats.minutes",{defaultMessage:"Minutes"}),kind:"minutes"},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.duration.inputFormats.hours",{defaultMessage:"Hours"}),kind:"hours"},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.duration.inputFormats.days",{defaultMessage:"Days"}),kind:"days"},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.duration.inputFormats.weeks",{defaultMessage:"Weeks"}),kind:"weeks"},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.duration.inputFormats.months",{defaultMessage:"Months"}),kind:"months"},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.duration.inputFormats.years",{defaultMessage:"Years"}),kind:"years"}],DEFAULT_OUTPUT_FORMAT={text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.duration.outputFormats.humanize",{defaultMessage:"Human Readable"}),method:"humanize"},outputFormats=[{...DEFAULT_OUTPUT_FORMAT},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.duration.outputFormats.asMilliseconds",{defaultMessage:"Milliseconds"}),method:"asMilliseconds"},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.duration.outputFormats.asSeconds",{defaultMessage:"Seconds"}),method:"asSeconds"},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.duration.outputFormats.asMinutes",{defaultMessage:"Minutes"}),method:"asMinutes"},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.duration.outputFormats.asHours",{defaultMessage:"Hours"}),method:"asHours"},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.duration.outputFormats.asDays",{defaultMessage:"Days"}),method:"asDays"},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.duration.outputFormats.asWeeks",{defaultMessage:"Weeks"}),method:"asWeeks"},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.duration.outputFormats.asMonths",{defaultMessage:"Months"}),method:"asMonths"},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.duration.outputFormats.asYears",{defaultMessage:"Years"}),method:"asYears"}];class duration_DurationFormat extends field_format.a{constructor(...args){super(...args),duration_defineProperty(this,"allowsNumericalAggregations",!0),duration_defineProperty(this,"textConvert",val=>{const inputFormat=this.param("inputFormat"),outputFormat=this.param("outputFormat"),outputPrecision=this.param("outputPrecision"),showSuffix=Boolean(this.param("showSuffix")),human=this.isHuman(),prefix=val<0&&human?external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.duration.negativeLabel",{defaultMessage:"minus"})+" ":"",formatted=function(val,inputFormat){const ratio=ratioToSeconds[inputFormat]||1,kind=inputFormat in ratioToSeconds?"seconds":inputFormat;return external_kbnSharedDeps_Moment_default.a.duration(val*ratio,kind)}(val,inputFormat)[outputFormat](),precise=human?formatted:formatted.toFixed(outputPrecision),type=outputFormats.find(({method:method})=>method===outputFormat);return prefix+precise+(showSuffix&&type?" "+type.text:"")})}isHuman(){return"humanize"===this.param("outputFormat")}getParamDefaults(){return{inputFormat:DEFAULT_INPUT_FORMAT.kind,outputFormat:DEFAULT_OUTPUT_FORMAT.method,outputPrecision:2}}}function ip_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}duration_defineProperty(duration_DurationFormat,"id",types.a.DURATION),duration_defineProperty(duration_DurationFormat,"title",external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.duration.title",{defaultMessage:"Duration"})),duration_defineProperty(duration_DurationFormat,"fieldType",kbn_field_types_types.b.NUMBER),duration_defineProperty(duration_DurationFormat,"inputFormats",inputFormats),duration_defineProperty(duration_DurationFormat,"outputFormats",outputFormats);class ip_IpFormat extends field_format.a{constructor(...args){super(...args),ip_defineProperty(this,"textConvert",val=>null==val?"-":isFinite(val)?[val>>>24,val>>>16&255,val>>>8&255,255&val].join("."):val)}}function number_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}ip_defineProperty(ip_IpFormat,"id",types.a.IP),ip_defineProperty(ip_IpFormat,"title",external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.ip.title",{defaultMessage:"IP address"})),ip_defineProperty(ip_IpFormat,"fieldType",kbn_field_types_types.b.IP);class number_NumberFormat extends numeral_NumeralFormat{constructor(...args){super(...args),number_defineProperty(this,"id",number_NumberFormat.id),number_defineProperty(this,"title",number_NumberFormat.title),number_defineProperty(this,"allowsNumericalAggregations",!0)}}function percent_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}number_defineProperty(number_NumberFormat,"id",types.a.NUMBER),number_defineProperty(number_NumberFormat,"title",external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.number.title",{defaultMessage:"Number"}));class percent_PercentFormat extends numeral_NumeralFormat{constructor(...args){super(...args),percent_defineProperty(this,"id",percent_PercentFormat.id),percent_defineProperty(this,"title",percent_PercentFormat.title),percent_defineProperty(this,"allowsNumericalAggregations",!0),percent_defineProperty(this,"getParamDefaults",()=>({pattern:this.getConfig(constants.c.FORMAT_PERCENT_DEFAULT_PATTERN),fractional:!0})),percent_defineProperty(this,"textConvert",val=>{const formatted=super.getConvertedValue(val);return this.param("fractional")?formatted:String(Number(formatted)/100)})}}percent_defineProperty(percent_PercentFormat,"id",types.a.PERCENT),percent_defineProperty(percent_PercentFormat,"title",external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.percent.title",{defaultMessage:"Percentage"}));var string=__webpack_require__(107),external_kbnSharedDeps_React_=__webpack_require__(3),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_ReactDomServer_=__webpack_require__(92),external_kbnSharedDeps_ReactDomServer_default=__webpack_require__.n(external_kbnSharedDeps_ReactDomServer_),common_utils=__webpack_require__(41);function source_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const TemplateComponent=({defPairs:defPairs})=>external_kbnSharedDeps_React_default.a.createElement("dl",{className:"source truncate-by-height"},defPairs.map((pair,idx)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,{key:idx},external_kbnSharedDeps_React_default.a.createElement("dt",{dangerouslySetInnerHTML:{__html:Object(external_kbnSharedDeps_Lodash_.escape)(pair[0])+":"}}),external_kbnSharedDeps_React_default.a.createElement("dd",{dangerouslySetInnerHTML:{__html:""+pair[1]}})," ")));class source_SourceFormat extends field_format.a{constructor(...args){super(...args),source_defineProperty(this,"textConvert",value=>JSON.stringify(value)),source_defineProperty(this,"htmlConvert",(value,options={})=>{const{field:field,hit:hit,indexPattern:indexPattern}=options;if(!field){const converter=this.getConverterFor("text");return Object(external_kbnSharedDeps_Lodash_.escape)(converter(value))}const highlights=hit&&hit.highlight||{},formatted=indexPattern.formatHit(hit),highlightPairs=[],sourcePairs=[],isShortDots=this.getConfig(constants.c.SHORT_DOTS_ENABLE);return Object(external_kbnSharedDeps_Lodash_.keys)(formatted).forEach(key=>{const pairs=highlights[key]?highlightPairs:sourcePairs,newField=isShortDots?Object(common_utils.a)(key):key,val=formatted[key];pairs.push([newField,val])},[]),external_kbnSharedDeps_ReactDomServer_default.a.renderToStaticMarkup(external_kbnSharedDeps_React_default.a.createElement(TemplateComponent,{defPairs:highlightPairs.concat(sourcePairs)}))})}}source_defineProperty(source_SourceFormat,"id",types.a._SOURCE),source_defineProperty(source_SourceFormat,"title","_source"),source_defineProperty(source_SourceFormat,"fieldType",kbn_field_types_types.b._SOURCE);const DEFAULT_CONVERTER_COLOR={range:`${Number.NEGATIVE_INFINITY}:${Number.POSITIVE_INFINITY}`,regex:"<insert regex>",text:"#000000",background:"#ffffff"};function color_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class color_ColorFormat extends field_format.a{constructor(...args){super(...args),color_defineProperty(this,"htmlConvert",val=>{const color=this.findColorRuleForVal(val),displayVal=Object(external_kbnSharedDeps_Lodash_.escape)(Object(utils.a)(val));return color?external_kbnSharedDeps_ReactDomServer_default.a.renderToStaticMarkup(external_kbnSharedDeps_React_default.a.createElement("span",{style:{color:color.text,backgroundColor:color.background},dangerouslySetInnerHTML:{__html:displayVal}})):displayVal})}getParamDefaults(){return{fieldType:null,colors:[Object(external_kbnSharedDeps_Lodash_.cloneDeep)(DEFAULT_CONVERTER_COLOR)]}}findColorRuleForVal(val){switch(this.param("fieldType")){case"string":return Object(external_kbnSharedDeps_Lodash_.findLast)(this.param("colors"),colorParam=>new RegExp(colorParam.regex).test(val));case"number":return Object(external_kbnSharedDeps_Lodash_.findLast)(this.param("colors"),({range:range})=>{if(!range)return;const[start,end]=range.split(":");return val>=Number(start)&&val<=Number(end)});default:return null}}}function truncate_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}color_defineProperty(color_ColorFormat,"id",types.a.COLOR),color_defineProperty(color_ColorFormat,"title",external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.color.title",{defaultMessage:"Color"})),color_defineProperty(color_ColorFormat,"fieldType",[kbn_field_types_types.b.NUMBER,kbn_field_types_types.b.STRING]);class truncate_TruncateFormat extends field_format.a{constructor(...args){super(...args),truncate_defineProperty(this,"textConvert",val=>{const length=this.param("fieldLength");return length>0?Object(external_kbnSharedDeps_Lodash_.truncate)(val,{length:length+"...".length,omission:"..."}):val})}}function boolean_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}truncate_defineProperty(truncate_TruncateFormat,"id",types.a.TRUNCATE),truncate_defineProperty(truncate_TruncateFormat,"title",external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.truncated_string.title",{defaultMessage:"Truncated string"})),truncate_defineProperty(truncate_TruncateFormat,"fieldType",kbn_field_types_types.b.STRING);class boolean_BoolFormat extends field_format.a{constructor(...args){super(...args),boolean_defineProperty(this,"textConvert",value=>{switch("string"==typeof value&&(value=value.trim().toLowerCase()),value){case!1:case 0:case"false":case"no":return"false";case!0:case 1:case"true":case"yes":return"true";default:return Object(utils.a)(value)}})}}function static_lookup_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}boolean_defineProperty(boolean_BoolFormat,"id",types.a.BOOLEAN),boolean_defineProperty(boolean_BoolFormat,"title",external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.boolean.title",{defaultMessage:"Boolean"})),boolean_defineProperty(boolean_BoolFormat,"fieldType",[kbn_field_types_types.b.BOOLEAN,kbn_field_types_types.b.NUMBER,kbn_field_types_types.b.STRING]);class static_lookup_StaticLookupFormat extends field_format.a{constructor(...args){super(...args),static_lookup_defineProperty(this,"textConvert",val=>{const lookupEntries=this.param("lookupEntries"),unknownKeyValue=this.param("unknownKeyValue");return function(lookupEntries){return lookupEntries.reduce((lookupMap,lookupEntry)=>(lookupMap[lookupEntry.key]=lookupEntry.value,lookupMap),{})}(lookupEntries)[val]||unknownKeyValue||val})}getParamDefaults(){return{lookupEntries:[{}],unknownKeyValue:null}}}function histogram_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}static_lookup_defineProperty(static_lookup_StaticLookupFormat,"id",types.a.STATIC_LOOKUP),static_lookup_defineProperty(static_lookup_StaticLookupFormat,"title",external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.static_lookup.title",{defaultMessage:"Static lookup"})),static_lookup_defineProperty(static_lookup_StaticLookupFormat,"fieldType",[kbn_field_types_types.b.STRING,kbn_field_types_types.b.NUMBER,kbn_field_types_types.b.IP,kbn_field_types_types.b.BOOLEAN]);class histogram_HistogramFormat extends field_format.a{constructor(...args){super(...args),histogram_defineProperty(this,"id",histogram_HistogramFormat.id),histogram_defineProperty(this,"title",histogram_HistogramFormat.title),histogram_defineProperty(this,"allowsNumericalAggregations",!0),histogram_defineProperty(this,"textConvert",val=>{if("number"==typeof val){const subFormatId=this.param("id");return new("bytes"===subFormatId?bytes_BytesFormat:"percent"===subFormatId?percent_PercentFormat:number_NumberFormat)(this.param("params"),this.getConfig).textConvert(val)}return JSON.stringify(val)})}getParamDefaults(){return{id:"number",params:{}}}}histogram_defineProperty(histogram_HistogramFormat,"id",types.a.HISTOGRAM),histogram_defineProperty(histogram_HistogramFormat,"fieldType",kbn_field_types_types.b.HISTOGRAM),histogram_defineProperty(histogram_HistogramFormat,"title",external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.histogram.title",{defaultMessage:"Histogram"}));const baseFormatters=[boolean_BoolFormat,bytes_BytesFormat,color_ColorFormat,duration_DurationFormat,ip_IpFormat,number_NumberFormat,percent_PercentFormat,relative_date_RelativeDateFormat,source_SourceFormat,static_lookup_StaticLookupFormat,string.a,truncate_TruncateFormat,url_UrlFormat,histogram_HistogramFormat];function field_formats_registry_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class field_formats_registry_FieldFormatsRegistry{constructor(){field_formats_registry_defineProperty(this,"fieldFormats",new Map),field_formats_registry_defineProperty(this,"defaultMap",{}),field_formats_registry_defineProperty(this,"metaParamsOptions",{}),field_formats_registry_defineProperty(this,"getConfig",void 0),field_formats_registry_defineProperty(this,"deserialize",mapping=>{if(!mapping)return new(field_format.a.from(external_kbnSharedDeps_Lodash_.identity));const{id:id,params:params={}}=mapping;if(id){const Format=this.getType(id);if(Format)return new Format(params,this.getConfig)}return new(field_format.a.from(external_kbnSharedDeps_Lodash_.identity))}),field_formats_registry_defineProperty(this,"getDefaultConfig",(fieldType,esTypes)=>{const type=this.getDefaultTypeName(fieldType,esTypes);return this.defaultMap&&this.defaultMap[type]||{id:types.a.STRING,params:{}}}),field_formats_registry_defineProperty(this,"getType",formatId=>{const fieldFormat=this.fieldFormats.get(formatId);if(fieldFormat){const decoratedFieldFormat=this.fieldFormatMetaParamsDecorator(fieldFormat);if(decoratedFieldFormat)return decoratedFieldFormat}}),field_formats_registry_defineProperty(this,"getTypeWithoutMetaParams",formatId=>this.fieldFormats.get(formatId)),field_formats_registry_defineProperty(this,"getDefaultType",(fieldType,esTypes)=>{const config=this.getDefaultConfig(fieldType,esTypes);return this.getType(config.id)}),field_formats_registry_defineProperty(this,"getTypeNameByEsTypes",esTypes=>{if(Array.isArray(esTypes))return esTypes.find(type=>this.defaultMap[type]&&this.defaultMap[type].es)}),field_formats_registry_defineProperty(this,"getDefaultTypeName",(fieldType,esTypes)=>this.getTypeNameByEsTypes(esTypes)||fieldType),field_formats_registry_defineProperty(this,"getInstance",Object(external_kbnSharedDeps_Lodash_.memoize)((formatId,params={})=>{const ConcreteFieldFormat=this.getType(formatId);if(!ConcreteFieldFormat)throw new FieldFormatNotFoundError(`Field Format '${formatId}' not found!`,formatId);return new ConcreteFieldFormat(params,this.getConfig)},(formatId,params)=>JSON.stringify({formatId:formatId,...params}))),field_formats_registry_defineProperty(this,"getDefaultInstancePlain",(fieldType,esTypes,params={})=>{const conf=this.getDefaultConfig(fieldType,esTypes),instanceParams={...conf.params,...params};return this.getInstance(conf.id,instanceParams)}),field_formats_registry_defineProperty(this,"getDefaultInstance",Object(external_kbnSharedDeps_Lodash_.memoize)(this.getDefaultInstancePlain,this.getDefaultInstanceCacheResolver)),field_formats_registry_defineProperty(this,"fieldFormatMetaParamsDecorator",fieldFormat=>{const getMetaParams=customParams=>this.buildMetaParams(customParams);var _class,_temp;if(fieldFormat)return _temp=_class=class extends fieldFormat{constructor(params={},getConfig){super(getMetaParams(params),getConfig)}},field_formats_registry_defineProperty(_class,"id",fieldFormat.id),field_formats_registry_defineProperty(_class,"fieldType",fieldFormat.fieldType),_temp}),field_formats_registry_defineProperty(this,"buildMetaParams",customParams=>({...this.metaParamsOptions,...customParams}))}init(getConfig,metaParamsOptions={},defaultFieldConverters=baseFormatters){const defaultTypeMap=getConfig(constants.c.FORMAT_DEFAULT_TYPE_MAP);this.register(defaultFieldConverters),this.parseDefaultTypeMap(defaultTypeMap),this.getConfig=getConfig,this.metaParamsOptions=metaParamsOptions}getDefaultInstanceCacheResolver(fieldType,esTypes){return Array.isArray(esTypes)&&-1===esTypes.indexOf(fieldType)?[fieldType,...esTypes].join("-"):fieldType}getByFieldType(fieldType){return[...this.fieldFormats.values()].filter(format=>format&&-1!==format.fieldType.indexOf(fieldType)).map(format=>this.fieldFormatMetaParamsDecorator(format))}parseDefaultTypeMap(value){this.defaultMap=value,Object(external_kbnSharedDeps_Lodash_.forOwn)(this,fn=>{Object(external_kbnSharedDeps_Lodash_.isFunction)(fn)&&fn.cache&&(fn.cache=new external_kbnSharedDeps_Lodash_.memoize.Cache)})}register(fieldFormats){fieldFormats.forEach(fieldFormat=>this.fieldFormats.set(fieldFormat.id,fieldFormat))}}var content_types=__webpack_require__(46);class FieldFormatNotFoundError extends Error{constructor(message,formatId){var obj,key,value;super(message),value=void 0,(key="formatId")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this.name="FieldFormatNotFoundError",this.formatId=formatId}}},function(module,__webpack_exports__,__webpack_require__){"use strict";let BUCKET_TYPES;__webpack_require__.d(__webpack_exports__,"a",(function(){return BUCKET_TYPES})),function(BUCKET_TYPES){BUCKET_TYPES.FILTER="filter",BUCKET_TYPES.FILTERS="filters",BUCKET_TYPES.HISTOGRAM="histogram",BUCKET_TYPES.IP_RANGE="ip_range",BUCKET_TYPES.DATE_RANGE="date_range",BUCKET_TYPES.RANGE="range",BUCKET_TYPES.TERMS="terms",BUCKET_TYPES.SIGNIFICANT_TERMS="significant_terms",BUCKET_TYPES.GEOHASH_GRID="geohash_grid",BUCKET_TYPES.GEOTILE_GRID="geotile_grid",BUCKET_TYPES.DATE_HISTOGRAM="date_histogram"}(BUCKET_TYPES||(BUCKET_TYPES={}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"t",(function(){return fromUser})),__webpack_require__.d(__webpack_exports__,"v",(function(){return getDefaultQuery})),__webpack_require__.d(__webpack_exports__,"w",(function(){return getQueryLog})),__webpack_require__.d(__webpack_exports__,"y",(function(){return matchPairs})),__webpack_require__.d(__webpack_exports__,"B",(function(){return toUser})),__webpack_require__.d(__webpack_exports__,"d",(function(){return query_service_QueryService})),__webpack_require__.d(__webpack_exports__,"b",(function(){return filter_manager_FilterManager})),__webpack_require__.d(__webpack_exports__,"x",(function(){return mapAndFlattenFilters})),__webpack_require__.d(__webpack_exports__,"z",(function(){return onlyDisabledFiltersChanged})),__webpack_require__.d(__webpack_exports__,"u",(function(){return generateFilters})),__webpack_require__.d(__webpack_exports__,"m",(function(){})),__webpack_require__.d(__webpack_exports__,"a",(function(){})),__webpack_require__.d(__webpack_exports__,"k",(function(){return time_history_TimeHistory})),__webpack_require__.d(__webpack_exports__,"l",(function(){})),__webpack_require__.d(__webpack_exports__,"n",(function(){return changeTimeFilter})),__webpack_require__.d(__webpack_exports__,"p",(function(){return convertRangeFilterToTimeRangeString})),__webpack_require__.d(__webpack_exports__,"r",(function(){return extractTimeFilter})),__webpack_require__.d(__webpack_exports__,"s",(function(){return extractTimeRange})),__webpack_require__.d(__webpack_exports__,"h",(function(){return types.SavedQuery})),__webpack_require__.d(__webpack_exports__,"i",(function(){return types.SavedQueryService})),__webpack_require__.d(__webpack_exports__,"j",(function(){return types.SavedQueryTimeFilter})),__webpack_require__.d(__webpack_exports__,"q",(function(){return createSavedQueryService})),__webpack_require__.d(__webpack_exports__,"o",(function(){return connectToQueryState})),__webpack_require__.d(__webpack_exports__,"A",(function(){return syncQueryStateWithUrl})),__webpack_require__.d(__webpack_exports__,"f",(function(){return state_sync_types.QueryState})),__webpack_require__.d(__webpack_exports__,"g",(function(){return state_sync_types.QueryStateChange}));var external_kbnSharedDeps_Lodash_=__webpack_require__(2),external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_),external_kbnSharedDeps_Rxjs_=__webpack_require__(9),external_kbnSharedDeps_RxjsOperators_=__webpack_require__(6);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const defaultIsDuplicate=(oldItem,newItem)=>external_kbnSharedDeps_Lodash_default.a.isEqual(oldItem,newItem);class persisted_log_PersistedLog{constructor(name,options={},storage){_defineProperty(this,"name",void 0),_defineProperty(this,"maxLength",void 0),_defineProperty(this,"filterDuplicates",void 0),_defineProperty(this,"isDuplicate",void 0),_defineProperty(this,"storage",void 0),_defineProperty(this,"items",void 0),_defineProperty(this,"update$",new external_kbnSharedDeps_Rxjs_.BehaviorSubject(void 0)),this.name=name,this.maxLength="string"==typeof options.maxLength?this.maxLength=parseInt(options.maxLength,10):options.maxLength,this.filterDuplicates=options.filterDuplicates||!1,this.isDuplicate=options.isDuplicate||defaultIsDuplicate,this.storage=storage,this.items=this.storage.get(this.name)||[],void 0===this.maxLength||isNaN(this.maxLength)||(this.items=external_kbnSharedDeps_Lodash_default.a.take(this.items,this.maxLength))}add(val){return null==val||(this.filterDuplicates&&external_kbnSharedDeps_Lodash_default.a.remove(this.items,item=>this.isDuplicate(item,val)),this.items.unshift(val),this.maxLength&&!isNaN(this.maxLength)&&(this.items=external_kbnSharedDeps_Lodash_default.a.take(this.items,this.maxLength)),this.storage.set(this.name,this.items),this.update$.next(void 0)),this.items}get(){return external_kbnSharedDeps_Lodash_default.a.cloneDeep(this.items)}get$(){return this.update$.pipe(Object(external_kbnSharedDeps_RxjsOperators_.map)(()=>this.get()))}}var common=__webpack_require__(1);function getQueryLog(uiSettings,storage,appName,language){return new persisted_log_PersistedLog(`typeahead:${appName}-${language}`,{maxLength:uiSettings.get(common.UI_SETTINGS.HISTORY_LIMIT),filterDuplicates:!0},storage)}function createAddToQueryLog({storage:storage,uiSettings:uiSettings}){return function(appName,{language:language,query:query}){getQueryLog(uiSettings,storage,appName,language).add(query)}}function fromUser(userInput){if(external_kbnSharedDeps_Lodash_default.a.isEmpty(userInput))return"";if(external_kbnSharedDeps_Lodash_default.a.isObject(userInput))return userInput;if("string"==typeof(userInput=userInput||"")){const trimmedUserInput=userInput.trim();if(0===trimmedUserInput.length)return"";if("{"!==trimmedUserInput[0])return userInput;try{return JSON.parse(trimmedUserInput)}catch(e){return userInput}}}function getDefaultQuery(language="kuery"){return{query:"",language:language}}const pairs=["()","[]","{}","''",'""'],openers=pairs.map(pair=>pair[0]),closers=pairs.map(pair=>pair[1]);function matchPairs({value:value,selectionStart:selectionStart,selectionEnd:selectionEnd,key:key,metaKey:metaKey,updateQuery:updateQuery,preventDefault:preventDefault}){if(function(key,value,selectionStart,selectionEnd){if(!closers.includes(key))return!1;if(selectionStart!==selectionEnd)return!1;return value.charAt(selectionEnd)===key}(key,value,selectionStart,selectionEnd))preventDefault(),updateQuery(value,selectionStart+1,selectionEnd+1);else if(function(key,value,selectionStart,selectionEnd){if(!openers.includes(key))return!1;if(selectionStart!==selectionEnd)return!0;const precedingCharacter=value.charAt(selectionStart-1),followingCharacter=value.charAt(selectionStart+1);if("\\"===precedingCharacter)return!1;return!(['"',"'"].includes(key)&&(isAlphanumeric(precedingCharacter)||isAlphanumeric(followingCharacter)))}(key,value,selectionStart,selectionEnd)){preventDefault();updateQuery(value.substr(0,selectionStart)+key+value.substring(selectionStart,selectionEnd)+closers[openers.indexOf(key)]+value.substr(selectionEnd),selectionStart+1,selectionEnd+1)}else if(function(key,metaKey,value,selectionStart,selectionEnd){if("Backspace"!==key||metaKey)return!1;if(selectionStart!==selectionEnd)return!1;return pairs.includes(value.substr(selectionEnd-1,2))}(key,metaKey,value,selectionStart,selectionEnd)){preventDefault();updateQuery(value.substr(0,selectionEnd-1)+value.substr(selectionEnd+1),selectionStart-1,selectionEnd-1)}}function isAlphanumeric(value=""){return value.match(/[a-zA-Z0-9_]/)}function toUser(text){return null==text?"":"object"==typeof text?text.query_string?toUser(text.query_string.query):JSON.stringify(text):""+text}const sortFilters=({$state:a},{$state:b})=>a.store===b.store?0:a.store===common.FilterStateStore.GLOBAL_STATE&&b.store!==common.FilterStateStore.GLOBAL_STATE?-1:1,mapSpatialFilter=filter=>{if(filter.meta&&filter.meta.key&&filter.meta.alias&&filter.meta.type===common.FILTERS.SPATIAL_FILTER)return{key:filter.meta.key,type:filter.meta.type,value:""};throw filter},mapMatchAll=filter=>{if(Object(common.isMatchAllFilter)(filter))return{type:common.FILTERS.MATCH_ALL,key:filter.meta.field,value:filter.meta.formattedValue||"all"};throw filter},getParams=filter=>{const scriptedPhraseValue=(filter=>Object(external_kbnSharedDeps_Lodash_.get)(filter,["script","script","params","value"]))(filter),key=Boolean(scriptedPhraseValue)?filter.meta.field||"":Object(common.getPhraseFilterField)(filter),query=scriptedPhraseValue||Object(common.getPhraseFilterValue)(filter);return{key:key,params:{query:query},type:common.FILTERS.PHRASE,value:(value=query,formatter=>formatter?formatter.convert(value):value)};var value},mapPhrase=filter=>{if(!(filter=>Object(common.isPhraseFilter)(filter)||Object(common.isScriptedPhraseFilter)(filter))(filter))throw filter;return getParams(filter)},mapPhrases=filter=>{if(!Object(common.isPhrasesFilter)(filter))throw filter;const{type:type,key:key,value:value,params:params}=filter.meta;return{type:type,key:key,value:value,params:params}};function map_range_getParams(filter){const isScriptedRange=Object(common.isScriptedRangeFilter)(filter),key=(isScriptedRange?filter.meta.field:(filter=>filter.range&&Object.keys(filter.range)[0])(filter))||"",params=isScriptedRange?Object(external_kbnSharedDeps_Lodash_.get)(filter,"script.script.params"):((filter,key)=>Object(external_kbnSharedDeps_Lodash_.get)(filter,["range",key]))(filter,key);let left=Object(external_kbnSharedDeps_Lodash_.hasIn)(params,"gte")?params.gte:params.gt;null==left&&(left=-1/0);let right=Object(external_kbnSharedDeps_Lodash_.hasIn)(params,"lte")?params.lte:params.lt;null==right&&(right=1/0);const value=((left,right)=>formatter=>{let displayValue=`${left} to ${right}`;if(formatter){const convert=formatter.getConverterFor("text");displayValue=`${convert(left)} to ${convert(right)}`}return displayValue})(left,right);return{type:common.FILTERS.RANGE,key:key,value:value,params:params}}const mapRange=filter=>{if(!(filter=>Object(common.isRangeFilter)(filter)||Object(common.isScriptedRangeFilter)(filter))(filter))throw filter;return map_range_getParams(filter)},mapExists=filter=>{if(Object(common.isExistsFilter)(filter))return{type:common.FILTERS.EXISTS,value:common.FILTERS.EXISTS,key:Object(external_kbnSharedDeps_Lodash_.get)(filter,"exists.field")};throw filter},mapMissing=filter=>{if(Object(common.isMissingFilter)(filter))return{type:common.FILTERS.MISSING,value:common.FILTERS.MISSING,key:filter.missing.field};throw filter},mapQueryString=filter=>{if(Object(common.isQueryStringFilter)(filter))return{type:common.FILTERS.QUERY_STRING,key:"query",value:filter.query.query_string.query};throw filter},map_geo_bounding_box_getFormattedValueFn=params=>formatter=>{const corners=formatter?{topLeft:formatter.convert(params.top_left),bottomRight:formatter.convert(params.bottom_right)}:{topLeft:JSON.stringify(params.top_left),bottomRight:JSON.stringify(params.bottom_right)};return corners.topLeft+" to "+corners.bottomRight},mapGeoBoundingBox=filter=>{if(!Object(common.isGeoBoundingBoxFilter)(filter))throw filter;return(filter=>{const key=Object.keys(filter.geo_bounding_box).filter(k=>"ignore_unmapped"!==k)[0],params=filter.geo_bounding_box[key];return{key:key,params:params,type:common.FILTERS.GEO_BOUNDING_BOX,value:map_geo_bounding_box_getFormattedValueFn(params)}})(filter)};function mapGeoPolygon(filter){if(!Object(common.isGeoPolygonFilter)(filter))throw filter;return function(filter){const key=Object.keys(filter.geo_polygon).filter(k=>"ignore_unmapped"!==k)[0],params=filter.geo_polygon[key];return{key:key,params:params,type:common.FILTERS.GEO_POLYGON,value:(points=params.points||[],formatter=>points.map(point=>formatter?formatter.convert(point):JSON.stringify(point)).join(", "))};var points}(filter)}const mapDefault=filter=>{const metaProperty=/(^\$|meta)/,key=Object(external_kbnSharedDeps_Lodash_.find)(Object(external_kbnSharedDeps_Lodash_.keys)(filter),item=>!item.match(metaProperty));if(key){return{type:common.FILTERS.CUSTOM,key:key,value:JSON.stringify(Object(external_kbnSharedDeps_Lodash_.get)(filter,key,{}))}}throw filter},generate_mapping_chain_noop=()=>{throw new Error("No mappings have been found for filter.")},generateMappingChain=(fn,next=generate_mapping_chain_noop)=>filter=>{try{return fn(filter)}catch(result){if(result===filter)return next(filter);throw result}};const mapAndFlattenFilters=filters=>Object(external_kbnSharedDeps_Lodash_.compact)(Object(external_kbnSharedDeps_Lodash_.flatten)(filters)).map(item=>function(filter){const mappers=[mapSpatialFilter,mapMatchAll,mapRange,mapPhrase,mapPhrases,mapExists,mapMissing,mapQueryString,mapGeoBoundingBox,mapGeoPolygon,mapDefault],mapped=Object(external_kbnSharedDeps_Lodash_.reduceRight)(mappers,(memo,map)=>generateMappingChain(map,memo),()=>{throw new Error("No mappings have been found for filter.")})(filter);return filter.meta=filter.meta||{},filter.meta.type=mapped.type,filter.meta.key=mapped.key,filter.meta.value=mapped.value,filter.meta.params=mapped.params,filter.meta.disabled=Boolean(filter.meta.disabled),filter.meta.negate=Boolean(filter.meta.negate),filter.meta.alias=filter.meta.alias||null,filter}(item)),isEnabled=f=>f&&f.meta&&!f.meta.disabled,onlyDisabledFiltersChanged=(newFilters,oldFilters)=>{const newEnabledFilters=Object(external_kbnSharedDeps_Lodash_.filter)(newFilters||[],isEnabled),oldEnabledFilters=Object(external_kbnSharedDeps_Lodash_.filter)(oldFilters||[],isEnabled);return Object(common.compareFilters)(oldEnabledFilters,newEnabledFilters,common.COMPARE_ALL_OPTIONS)};function filter_manager_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class filter_manager_FilterManager{constructor(uiSettings){filter_manager_defineProperty(this,"filters",[]),filter_manager_defineProperty(this,"updated$",new external_kbnSharedDeps_Rxjs_.Subject),filter_manager_defineProperty(this,"fetch$",new external_kbnSharedDeps_Rxjs_.Subject),filter_manager_defineProperty(this,"uiSettings",void 0),this.uiSettings=uiSettings}mergeIncomingFilters(partitionedFilters){const globalFilters=partitionedFilters.globalFilters,appFilters=partitionedFilters.appFilters,cleanedAppFilters=[];return external_kbnSharedDeps_Lodash_default.a.each(appFilters,(function(filter,i){const match=external_kbnSharedDeps_Lodash_default.a.find(globalFilters,(function(globalFilter){return Object(common.compareFilters)(globalFilter,filter)}));if(!match)return cleanedAppFilters.push(filter);external_kbnSharedDeps_Lodash_default.a.assignIn(match.meta,filter.meta)})),filter_manager_FilterManager.mergeFilters(cleanedAppFilters,globalFilters)}static mergeFilters(appFilters,globalFilters){return Object(common.uniqFilters)(appFilters.reverse().concat(globalFilters.reverse())).reverse()}static partitionFilters(filters){const[globalFilters,appFilters]=external_kbnSharedDeps_Lodash_default.a.partition(filters,common.isFilterPinned);return{globalFilters:globalFilters,appFilters:appFilters}}handleStateUpdate(newFilters){newFilters.sort(sortFilters);const filtersUpdated=!Object(common.compareFilters)(this.filters,newFilters,common.COMPARE_ALL_OPTIONS),updatedOnlyDisabledFilters=onlyDisabledFiltersChanged(newFilters,this.filters);this.filters=newFilters,filtersUpdated&&(this.updated$.next(),updatedOnlyDisabledFilters||this.fetch$.next())}getFilters(){return external_kbnSharedDeps_Lodash_default.a.cloneDeep(this.filters)}getAppFilters(){const{appFilters:appFilters}=this.getPartitionedFilters();return appFilters}getGlobalFilters(){const{globalFilters:globalFilters}=this.getPartitionedFilters();return globalFilters}getPartitionedFilters(){return filter_manager_FilterManager.partitionFilters(this.getFilters())}getUpdates$(){return this.updated$.asObservable()}getFetches$(){return this.fetch$.asObservable()}addFilters(filters,pinFilterStatus=this.uiSettings.get(common.UI_SETTINGS.FILTERS_PINNED_BY_DEFAULT)){if(Array.isArray(filters)||(filters=[filters]),0===filters.length)return;const store=pinFilterStatus?common.FilterStateStore.GLOBAL_STATE:common.FilterStateStore.APP_STATE;filter_manager_FilterManager.setFiltersStore(filters,store);const mappedFilters=mapAndFlattenFilters(filters),newPartitionedFilters=filter_manager_FilterManager.partitionFilters(mappedFilters),currentFilters=this.getPartitionedFilters();currentFilters.appFilters.push(...newPartitionedFilters.appFilters),currentFilters.globalFilters.push(...newPartitionedFilters.globalFilters);const newFilters=this.mergeIncomingFilters(currentFilters);this.handleStateUpdate(newFilters)}setFilters(newFilters,pinFilterStatus=this.uiSettings.get(common.UI_SETTINGS.FILTERS_PINNED_BY_DEFAULT)){const store=pinFilterStatus?common.FilterStateStore.GLOBAL_STATE:common.FilterStateStore.APP_STATE;filter_manager_FilterManager.setFiltersStore(newFilters,store);const mappedFilters=mapAndFlattenFilters(newFilters),newPartitionedFilters=filter_manager_FilterManager.partitionFilters(mappedFilters),mergedFilters=this.mergeIncomingFilters(newPartitionedFilters);this.handleStateUpdate(mergedFilters)}setGlobalFilters(newGlobalFilters){newGlobalFilters=mapAndFlattenFilters(newGlobalFilters),filter_manager_FilterManager.setFiltersStore(newGlobalFilters,common.FilterStateStore.GLOBAL_STATE,!0);const{appFilters:appFilters}=this.getPartitionedFilters(),newFilters=this.mergeIncomingFilters({appFilters:appFilters,globalFilters:newGlobalFilters});this.handleStateUpdate(newFilters)}setAppFilters(newAppFilters){newAppFilters=mapAndFlattenFilters(newAppFilters),filter_manager_FilterManager.setFiltersStore(newAppFilters,common.FilterStateStore.APP_STATE,!0);const{globalFilters:globalFilters}=this.getPartitionedFilters(),newFilters=this.mergeIncomingFilters({globalFilters:globalFilters,appFilters:newAppFilters});this.handleStateUpdate(newFilters)}removeFilter(filter){const filterIndex=external_kbnSharedDeps_Lodash_default.a.findIndex(this.filters,item=>external_kbnSharedDeps_Lodash_default.a.isEqual(item.meta,filter.meta)&&external_kbnSharedDeps_Lodash_default.a.isEqual(item.query,filter.query));if(filterIndex>=0){const newFilters=external_kbnSharedDeps_Lodash_default.a.cloneDeep(this.filters);newFilters.splice(filterIndex,1),this.handleStateUpdate(newFilters)}}removeAll(){this.setFilters([])}static setFiltersStore(filters,store,shouldOverrideStore=!1){external_kbnSharedDeps_Lodash_default.a.map(filters,filter=>{(shouldOverrideStore||void 0===filter.$state)&&(filter.$state={store:store})})}}function generateFilters(filterManager,field,values,operation,index){values=Array.isArray(values)?values:[values];const fieldObj=external_kbnSharedDeps_Lodash_default.a.isObject(field)?field:{name:field},fieldName=fieldObj.name,newFilters=[],appFilters=filterManager.getAppFilters(),negate="-"===operation;let filter;return external_kbnSharedDeps_Lodash_default.a.each(values,(function(value){var _fieldObj$type;const existing=function(appFilters,fieldName,value){return external_kbnSharedDeps_Lodash_default.a.find(appFilters,(function(filter){if(filter)return"_exists_"===fieldName&&Object(common.isExistsFilter)(filter)?filter.exists.field===value:Object(common.isPhraseFilter)(filter)?Object(common.getPhraseFilterField)(filter)===fieldName&&Object(common.getPhraseFilterValue)(filter)===value:Object(common.isScriptedPhraseFilter)(filter)?filter.meta.field===fieldName&&filter.script.script.params.value===value:void 0}))}(appFilters,fieldName,value);if(existing)!function(existingFilter,negate){existingFilter.meta.disabled=!1,existingFilter.meta.negate!==negate&&(existingFilter.meta.negate=!existingFilter.meta.negate)}(existing,negate),filter=existing;else if(null!==(_fieldObj$type=fieldObj.type)&&void 0!==_fieldObj$type&&_fieldObj$type.includes("range")&&value&&"object"==typeof value){const tmpIndexPattern={id:index};filter=Object(common.buildFilter)(tmpIndexPattern,fieldObj,common.FILTERS.RANGE_FROM_VALUE,!1,!1,value,null,common.FilterStateStore.APP_STATE)}else{const tmpIndexPattern={id:index},filterType="_exists_"===fieldName?common.FILTERS.EXISTS:common.FILTERS.PHRASE,actualFieldObj="_exists_"===fieldName?{name:value}:fieldObj,isNullFilter=null==value;filter=Object(common.buildFilter)(tmpIndexPattern,actualFieldObj,isNullFilter?common.FILTERS.EXISTS:filterType,isNullFilter?!negate:negate,!1,value,null,common.FilterStateStore.APP_STATE)}newFilters.push(filter)})),newFilters}class timefilter_service_TimefilterService{constructor(nowProvider){this.nowProvider=nowProvider}setup({uiSettings:uiSettings,storage:storage}){const timefilterConfig={timeDefaults:uiSettings.get(common.UI_SETTINGS.TIMEPICKER_TIME_DEFAULTS),refreshIntervalDefaults:uiSettings.get(common.UI_SETTINGS.TIMEPICKER_REFRESH_INTERVAL_DEFAULTS)},history=new time_history_TimeHistory(storage);return{timefilter:new timefilter_Timefilter(timefilterConfig,history,this.nowProvider),history:history}}start(){}stop(){}}var external_kbnSharedDeps_Moment_=__webpack_require__(5),external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);const diff_time_picker_vals_valueOf=function(o){if(o)return o.valueOf()};function timefilter_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class timefilter_Timefilter{constructor(config,timeHistory,nowProvider){this.nowProvider=nowProvider,timefilter_defineProperty(this,"enabledUpdated$",new external_kbnSharedDeps_Rxjs_.BehaviorSubject(!1)),timefilter_defineProperty(this,"timeUpdate$",new external_kbnSharedDeps_Rxjs_.Subject),timefilter_defineProperty(this,"refreshIntervalUpdate$",new external_kbnSharedDeps_Rxjs_.Subject),timefilter_defineProperty(this,"fetch$",new external_kbnSharedDeps_Rxjs_.Subject),timefilter_defineProperty(this,"_time",void 0),timefilter_defineProperty(this,"_isTimeTouched",!1),timefilter_defineProperty(this,"_refreshInterval",void 0),timefilter_defineProperty(this,"_history",void 0),timefilter_defineProperty(this,"_isTimeRangeSelectorEnabled",!1),timefilter_defineProperty(this,"_isAutoRefreshSelectorEnabled",!1),timefilter_defineProperty(this,"timeDefaults",void 0),timefilter_defineProperty(this,"refreshIntervalDefaults",void 0),timefilter_defineProperty(this,"autoRefreshLoop",(()=>{let subscribersCount=0;const tick=new external_kbnSharedDeps_Rxjs_.Subject;let _timeoutHandle,_timeout=0;function start(){if(stop(),0===_timeout)return;const timeoutHandle=window.setTimeout(()=>{let pendingDoneCount=subscribersCount;tick.next(()=>{timeoutHandle===_timeoutHandle&&(pendingDoneCount--,0===pendingDoneCount&&start())})},_timeout);_timeoutHandle=timeoutHandle}function stop(){window.clearTimeout(_timeoutHandle),_timeoutHandle=-1}return{stop:()=>{_timeout=0,stop()},start:timeout=>{_timeout=timeout,subscribersCount>0&&start()},loop$:Object(external_kbnSharedDeps_Rxjs_.defer)(()=>(subscribersCount++,start(),tick.pipe(Object(external_kbnSharedDeps_RxjsOperators_.map)(doneCb=>Object(external_kbnSharedDeps_Lodash_.once)(doneCb))))).pipe(Object(external_kbnSharedDeps_RxjsOperators_.finalize)(()=>{subscribersCount--,0===subscribersCount?stop():start()}))}})()),timefilter_defineProperty(this,"getEnabledUpdated$",()=>this.enabledUpdated$.asObservable()),timefilter_defineProperty(this,"getTimeUpdate$",()=>this.timeUpdate$.asObservable()),timefilter_defineProperty(this,"getRefreshIntervalUpdate$",()=>this.refreshIntervalUpdate$.asObservable()),timefilter_defineProperty(this,"getAutoRefreshFetch$",()=>this.autoRefreshLoop.loop$),timefilter_defineProperty(this,"getFetch$",()=>this.fetch$.asObservable()),timefilter_defineProperty(this,"getTime",()=>{const{from:from,to:to}=this._time;return{...this._time,from:external_kbnSharedDeps_Moment_default.a.isMoment(from)?from.toISOString():from,to:external_kbnSharedDeps_Moment_default.a.isMoment(to)?to.toISOString():to}}),timefilter_defineProperty(this,"setTime",time=>{const newTime=Object.assign(this.getTime(),time);var rangeA,rangeB;rangeA=this.getTime(),rangeB=newTime,(rangeA&&rangeB&&external_kbnSharedDeps_Lodash_default.a.isObject(rangeA)&&external_kbnSharedDeps_Lodash_default.a.isObject(rangeB)?diff_time_picker_vals_valueOf(rangeA.to)===diff_time_picker_vals_valueOf(rangeB.to)&&diff_time_picker_vals_valueOf(rangeA.from)===diff_time_picker_vals_valueOf(rangeB.from):external_kbnSharedDeps_Lodash_default.a.isEqual(rangeA,rangeB))||(this._time={from:newTime.from,to:newTime.to},this._isTimeTouched=!0,this._history.add(this._time),this.timeUpdate$.next(),this.fetch$.next())}),timefilter_defineProperty(this,"getRefreshInterval",()=>external_kbnSharedDeps_Lodash_default.a.clone(this._refreshInterval)),timefilter_defineProperty(this,"setRefreshInterval",refreshInterval=>{const prevRefreshInterval=this.getRefreshInterval(),newRefreshInterval={...prevRefreshInterval,...refreshInterval};var rangeA,rangeB;newRefreshInterval.value<=0&&(newRefreshInterval.value=0,newRefreshInterval.pause=!0),this._refreshInterval={value:newRefreshInterval.value,pause:newRefreshInterval.pause},prevRefreshInterval&&(rangeA=prevRefreshInterval,rangeB=newRefreshInterval,external_kbnSharedDeps_Lodash_default.a.isObject(rangeA)&&external_kbnSharedDeps_Lodash_default.a.isObject(rangeB)?diff_time_picker_vals_valueOf(rangeA.value)!==diff_time_picker_vals_valueOf(rangeB.value)||diff_time_picker_vals_valueOf(rangeA.pause)!==diff_time_picker_vals_valueOf(rangeB.pause):!external_kbnSharedDeps_Lodash_default.a.isEqual(rangeA,rangeB))&&(this.refreshIntervalUpdate$.next(),newRefreshInterval.pause||0===newRefreshInterval.value||this.fetch$.next()),this.autoRefreshLoop.stop(),newRefreshInterval.pause||0===newRefreshInterval.value||this.autoRefreshLoop.start(newRefreshInterval.value)}),timefilter_defineProperty(this,"createFilter",(indexPattern,timeRange)=>Object(common.getTime)(indexPattern,timeRange||this._time,{forceNow:this.nowProvider.get()})),timefilter_defineProperty(this,"enableTimeRangeSelector",()=>{this._isTimeRangeSelectorEnabled=!0,this.enabledUpdated$.next(!0)}),timefilter_defineProperty(this,"disableTimeRangeSelector",()=>{this._isTimeRangeSelectorEnabled=!1,this.enabledUpdated$.next(!1)}),timefilter_defineProperty(this,"enableAutoRefreshSelector",()=>{this._isAutoRefreshSelectorEnabled=!0,this.enabledUpdated$.next(!0)}),timefilter_defineProperty(this,"disableAutoRefreshSelector",()=>{this._isAutoRefreshSelectorEnabled=!1,this.enabledUpdated$.next(!1)}),this._history=timeHistory,this.timeDefaults=config.timeDefaults,this.refreshIntervalDefaults=config.refreshIntervalDefaults,this._time=config.timeDefaults,this.setRefreshInterval(config.refreshIntervalDefaults)}isTimeRangeSelectorEnabled(){return this._isTimeRangeSelectorEnabled}isAutoRefreshSelectorEnabled(){return this._isAutoRefreshSelectorEnabled}isTimeTouched(){return this._isTimeTouched}getAbsoluteTime(){return Object(common.getAbsoluteTimeRange)(this._time,{forceNow:this.nowProvider.get()})}getBounds(){return this.calculateBounds(this._time)}calculateBounds(timeRange){return Object(common.calculateBounds)(timeRange,{forceNow:this.nowProvider.get()})}getActiveBounds(){if(this.isTimeRangeSelectorEnabled())return this.getBounds()}getTimeDefaults(){return external_kbnSharedDeps_Lodash_default.a.cloneDeep(this.timeDefaults)}getRefreshIntervalDefaults(){return external_kbnSharedDeps_Lodash_default.a.cloneDeep(this.refreshIntervalDefaults)}}class time_history_TimeHistory{constructor(storage){var obj,key,value;value=void 0,(key="history")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;this.history=new persisted_log_PersistedLog("kibana.timepicker.timeHistory",{maxLength:10,filterDuplicates:!0,isDuplicate:(oldItem,newItem)=>oldItem.from===newItem.from&&oldItem.to===newItem.to},storage)}add(time){if(!time||!time.from||!time.to)return;const justStringsTime={from:external_kbnSharedDeps_Moment_default.a.isMoment(time.from)?time.from.toISOString():time.from,to:external_kbnSharedDeps_Moment_default.a.isMoment(time.to)?time.to.toISOString():time.to};this.history.add(justStringsTime)}get(){return this.history.get()}}function convertRangeFilterToTimeRange(filter){const key=Object(external_kbnSharedDeps_Lodash_.keys)(filter.range)[0],values=filter.range[key];return{from:external_kbnSharedDeps_Moment_default()(values.gt||values.gte),to:external_kbnSharedDeps_Moment_default()(values.lt||values.lte)}}function convertRangeFilterToTimeRangeString(filter){const{from:from,to:to}=convertRangeFilterToTimeRange(filter);return{from:null==from?void 0:from.toISOString(),to:null==to?void 0:to.toISOString()}}function changeTimeFilter(timeFilter,filter){timeFilter.setTime(convertRangeFilterToTimeRange(filter))}function extractTimeFilter(timeFieldName,filters){const[timeRangeFilter,restOfFilters]=Object(external_kbnSharedDeps_Lodash_.partition)(filters,obj=>{let key;return Object(common.isRangeFilter)(obj)&&(key=Object(external_kbnSharedDeps_Lodash_.keys)(obj.range)[0]),Boolean(key&&key===timeFieldName)});return{restOfFilters:restOfFilters,timeRangeFilter:timeRangeFilter[0]}}function extractTimeRange(filters,timeFieldName){if(!timeFieldName)return{restOfFilters:filters,timeRange:void 0};const{timeRangeFilter:timeRangeFilter,restOfFilters:restOfFilters}=extractTimeFilter(timeFieldName,filters);return{restOfFilters:restOfFilters,timeRange:timeRangeFilter?convertRangeFilterToTimeRangeString(timeRangeFilter):void 0}}var target=__webpack_require__(18),target_default=__webpack_require__.n(target);const createSavedQueryService=savedObjectsClient=>{const parseSavedQueryObject=savedQuery=>{let queryString=savedQuery.attributes.query.query;try{const parsedQueryString=JSON.parse(savedQuery.attributes.query.query);Object(external_kbnSharedDeps_Lodash_.isObject)(parsedQueryString)&&(queryString=parsedQueryString)}catch(e){}const savedQueryItems={title:savedQuery.attributes.title||"",description:savedQuery.attributes.description||"",query:{query:queryString,language:savedQuery.attributes.query.language}};return savedQuery.attributes.filters&&(savedQueryItems.filters=savedQuery.attributes.filters),savedQuery.attributes.timefilter&&(savedQueryItems.timefilter=savedQuery.attributes.timefilter),{id:savedQuery.id,attributes:savedQueryItems}},getSavedQueryCount=async()=>(await savedObjectsClient.find({type:"query",perPage:0,page:1})).total;return{saveQuery:async(attributes,{overwrite:overwrite=!1}={})=>{if(!attributes.title.length)throw new Error("Cannot create saved query without a title");const query={query:"string"==typeof attributes.query.query?attributes.query.query:JSON.stringify(attributes.query.query),language:attributes.query.language},queryObject={title:attributes.title.trim(),description:attributes.description,query:query};let rawQueryResponse;if(attributes.filters&&(queryObject.filters=attributes.filters),attributes.timefilter&&(queryObject.timefilter=attributes.timefilter),rawQueryResponse=overwrite?await savedObjectsClient.create("query",queryObject,{id:attributes.title,overwrite:!0}):await savedObjectsClient.create("query",queryObject,{id:attributes.title}),rawQueryResponse.error)throw new Error(rawQueryResponse.error.message);return parseSavedQueryObject(rawQueryResponse)},getAllSavedQueries:async()=>{const count=await getSavedQueryCount();return(await savedObjectsClient.find({type:"query",perPage:count,page:1})).savedObjects.map(savedObject=>parseSavedQueryObject(savedObject))},findSavedQueries:async(searchText="",perPage=50,activePage=1)=>{const response=await savedObjectsClient.find({type:"query",search:searchText,searchFields:["title^5","description"],sortField:"_score",perPage:perPage,page:activePage});return{total:response.total,queries:response.savedObjects.map(savedObject=>parseSavedQueryObject(savedObject))}},getSavedQuery:async id=>{const savedObject=await savedObjectsClient.get("query",id);if(savedObject.error)throw new Error(savedObject.error.message);return parseSavedQueryObject(savedObject)},deleteSavedQuery:async id=>await savedObjectsClient.delete("query",id),getSavedQueryCount:getSavedQueryCount}};var public_=__webpack_require__(23);function query_string_manager_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class query_string_manager_QueryStringManager{constructor(storage,uiSettings){this.storage=storage,this.uiSettings=uiSettings,query_string_manager_defineProperty(this,"query$",void 0),query_string_manager_defineProperty(this,"getUpdates$",()=>this.query$.asObservable().pipe(Object(external_kbnSharedDeps_RxjsOperators_.skip)(1))),query_string_manager_defineProperty(this,"getQuery",()=>this.query$.getValue()),query_string_manager_defineProperty(this,"setQuery",query=>{const curQuery=this.query$.getValue();(null==query?void 0:query.language)===curQuery.language&&(null==query?void 0:query.query)===curQuery.query||this.query$.next(query)}),query_string_manager_defineProperty(this,"clearQuery",()=>{this.setQuery(this.getDefaultQuery())}),this.query$=new external_kbnSharedDeps_Rxjs_.BehaviorSubject(this.getDefaultQuery())}getDefaultLanguage(){return this.storage.get(common.KIBANA_USER_QUERY_LANGUAGE_KEY)||this.uiSettings.get(common.UI_SETTINGS.SEARCH_QUERY_LANGUAGE)}getDefaultQuery(){return{query:"",language:this.getDefaultLanguage()}}formatQuery(query){return query?"string"==typeof query?{query:query,language:this.getDefaultLanguage()}:query:this.getDefaultQuery()}}var services=__webpack_require__(19);function query_service_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class query_service_QueryService{constructor(){query_service_defineProperty(this,"filterManager",void 0),query_service_defineProperty(this,"timefilter",void 0),query_service_defineProperty(this,"queryStringManager",void 0),query_service_defineProperty(this,"state$",void 0)}setup({storage:storage,uiSettings:uiSettings,nowProvider:nowProvider}){this.filterManager=new filter_manager_FilterManager(uiSettings);const timefilterService=new timefilter_service_TimefilterService(nowProvider);return this.timefilter=timefilterService.setup({uiSettings:uiSettings,storage:storage}),this.queryStringManager=new query_string_manager_QueryStringManager(storage,uiSettings),this.state$=function({timefilter:{timefilter:timefilter},filterManager:filterManager,queryString:queryString}){return new external_kbnSharedDeps_Rxjs_.Observable(subscriber=>{const state=Object(public_.createStateContainer)({time:timefilter.getTime(),refreshInterval:timefilter.getRefreshInterval(),filters:filterManager.getFilters(),query:queryString.getQuery()});let currentChange={};const subs=[queryString.getUpdates$().subscribe(()=>{currentChange.query=!0,state.set({...state.get(),query:queryString.getQuery()})}),timefilter.getTimeUpdate$().subscribe(()=>{currentChange.time=!0,state.set({...state.get(),time:timefilter.getTime()})}),timefilter.getRefreshIntervalUpdate$().subscribe(()=>{currentChange.refreshInterval=!0,state.set({...state.get(),refreshInterval:timefilter.getRefreshInterval()})}),filterManager.getUpdates$().subscribe(()=>{currentChange.filters=!0;const{filters:filters}=state.get(),globalOld=null==filters?void 0:filters.filter(f=>Object(common.isFilterPinned)(f)),appOld=null==filters?void 0:filters.filter(f=>!Object(common.isFilterPinned)(f)),globalNew=filterManager.getGlobalFilters(),appNew=filterManager.getAppFilters();globalOld&&Object(common.compareFilters)(globalOld,globalNew,common.COMPARE_ALL_OPTIONS)||(currentChange.globalFilters=!0),appOld&&Object(common.compareFilters)(appOld,appNew,common.COMPARE_ALL_OPTIONS)||(currentChange.appFilters=!0),state.set({...state.get(),filters:filterManager.getFilters()})}),state.state$.pipe(Object(external_kbnSharedDeps_RxjsOperators_.map)(newState=>({state:newState,changes:currentChange})),Object(external_kbnSharedDeps_RxjsOperators_.tap)(()=>{currentChange={}})).subscribe(subscriber)];return()=>{subs.forEach(s=>s.unsubscribe())}})}({filterManager:this.filterManager,timefilter:this.timefilter,queryString:this.queryStringManager}).pipe(Object(external_kbnSharedDeps_RxjsOperators_.share)()),{filterManager:this.filterManager,timefilter:this.timefilter,queryString:this.queryStringManager,state$:this.state$}}start({savedObjectsClient:savedObjectsClient,storage:storage,uiSettings:uiSettings}){return{addToQueryLog:createAddToQueryLog({storage:storage,uiSettings:uiSettings}),filterManager:this.filterManager,queryString:this.queryStringManager,savedQueries:createSavedQueryService(savedObjectsClient),state$:this.state$,timefilter:this.timefilter,getEsQuery:(indexPattern,timeRange)=>{const timeFilter=this.timefilter.timefilter.createFilter(indexPattern,timeRange);return Object(common.buildEsQuery)(indexPattern,this.queryStringManager.getQuery(),[...this.filterManager.getFilters(),...timeFilter?[timeFilter]:[]],Object(common.getEsQueryConfig)(Object(services.e)()))}}}stop(){}}var types=__webpack_require__(58);const connectToQueryState=({timefilter:{timefilter:timefilter},filterManager:filterManager,queryString:queryString,state$:state$},stateContainer,syncConfig)=>{const syncKeys=[];if(syncConfig.time&&syncKeys.push("time"),syncConfig.query&&syncKeys.push("query"),syncConfig.refreshInterval&&syncKeys.push("refreshInterval"),syncConfig.filters)switch(syncConfig.filters){case!0:syncKeys.push("filters");break;case common.FilterStateStore.APP_STATE:syncKeys.push("appFilters");break;case common.FilterStateStore.GLOBAL_STATE:syncKeys.push("globalFilters")}const initialState={...stateContainer.get()};let initialDirty=!1;syncConfig.time&&!external_kbnSharedDeps_Lodash_default.a.isEqual(initialState.time,timefilter.getTime())&&(initialState.time=timefilter.getTime(),initialDirty=!0),syncConfig.refreshInterval&&!external_kbnSharedDeps_Lodash_default.a.isEqual(initialState.refreshInterval,timefilter.getRefreshInterval())&&(initialState.refreshInterval=timefilter.getRefreshInterval(),initialDirty=!0),syncConfig.filters&&(!0===syncConfig.filters?initialState.filters&&Object(common.compareFilters)(initialState.filters,filterManager.getFilters(),common.COMPARE_ALL_OPTIONS)||(initialState.filters=filterManager.getFilters(),initialDirty=!0):syncConfig.filters===common.FilterStateStore.GLOBAL_STATE?initialState.filters&&Object(common.compareFilters)(initialState.filters,filterManager.getGlobalFilters(),{...common.COMPARE_ALL_OPTIONS,state:!1})||(initialState.filters=filterManager.getGlobalFilters(),initialDirty=!0):syncConfig.filters===common.FilterStateStore.APP_STATE&&(initialState.filters&&Object(common.compareFilters)(initialState.filters,filterManager.getAppFilters(),{...common.COMPARE_ALL_OPTIONS,state:!1})||(initialState.filters=filterManager.getAppFilters(),initialDirty=!0))),initialDirty&&stateContainer.set({...stateContainer.get(),...initialState});let updateInProgress=!1;const subs=[state$.pipe(Object(external_kbnSharedDeps_RxjsOperators_.filter)(({changes:changes,state:state})=>!updateInProgress&&syncKeys.some(syncKey=>changes[syncKey])),Object(external_kbnSharedDeps_RxjsOperators_.map)(({changes:changes})=>{const newState={};return syncConfig.time&&changes.time&&(newState.time=timefilter.getTime()),syncConfig.query&&changes.query&&(newState.query=queryString.getQuery()),syncConfig.refreshInterval&&changes.refreshInterval&&(newState.refreshInterval=timefilter.getRefreshInterval()),syncConfig.filters&&(!0===syncConfig.filters&&changes.filters?newState.filters=filterManager.getFilters():syncConfig.filters===common.FilterStateStore.GLOBAL_STATE&&changes.globalFilters?newState.filters=filterManager.getGlobalFilters():syncConfig.filters===common.FilterStateStore.APP_STATE&&changes.appFilters&&(newState.filters=filterManager.getAppFilters())),newState})).subscribe(newState=>{stateContainer.set({...stateContainer.get(),...newState})}),stateContainer.state$.subscribe(state=>{if(updateInProgress=!0,syncConfig.time){const time=function(time){if(!time)return!1;const momentDateFrom=target_default.a.parse(time.from),momentDateTo=target_default.a.parse(time.to);return!!(momentDateFrom&&momentDateFrom.isValid()&&momentDateTo&&momentDateTo.isValid())}(state.time)?state.time:timefilter.getTimeDefaults();external_kbnSharedDeps_Lodash_default.a.isEqual(time,timefilter.getTime())||timefilter.setTime(external_kbnSharedDeps_Lodash_default.a.cloneDeep(time))}if(syncConfig.refreshInterval){const refreshInterval=state.refreshInterval||timefilter.getRefreshIntervalDefaults();external_kbnSharedDeps_Lodash_default.a.isEqual(refreshInterval,timefilter.getRefreshInterval())||timefilter.setRefreshInterval(external_kbnSharedDeps_Lodash_default.a.cloneDeep(refreshInterval))}if(syncConfig.query){const curQuery=state.query||queryString.getQuery();external_kbnSharedDeps_Lodash_default.a.isEqual(curQuery,queryString.getQuery())||queryString.setQuery(external_kbnSharedDeps_Lodash_default.a.cloneDeep(curQuery))}if(syncConfig.filters){const filters=state.filters||[];!0===syncConfig.filters?Object(common.compareFilters)(filters,filterManager.getFilters(),common.COMPARE_ALL_OPTIONS)||filterManager.setFilters(external_kbnSharedDeps_Lodash_default.a.cloneDeep(filters)):syncConfig.filters===common.FilterStateStore.APP_STATE?Object(common.compareFilters)(filters,filterManager.getAppFilters(),{...common.COMPARE_ALL_OPTIONS,state:!1})||filterManager.setAppFilters(external_kbnSharedDeps_Lodash_default.a.cloneDeep(filters)):syncConfig.filters===common.FilterStateStore.GLOBAL_STATE&&(Object(common.compareFilters)(filters,filterManager.getGlobalFilters(),{...common.COMPARE_ALL_OPTIONS,state:!1})||filterManager.setGlobalFilters(external_kbnSharedDeps_Lodash_default.a.cloneDeep(filters)))}updateInProgress=!1})];return()=>{subs.forEach(s=>s.unsubscribe())}};var es_query_filters=__webpack_require__(8);const syncQueryStateWithUrl=(query,kbnUrlStateStorage)=>{const{timefilter:{timefilter:timefilter},filterManager:filterManager}=query,defaultState={time:timefilter.getTime(),refreshInterval:timefilter.getRefreshInterval(),filters:filterManager.getGlobalFilters()},initialStateFromUrl=kbnUrlStateStorage.get("_g"),hasInheritedQueryFromUrl=Boolean(initialStateFromUrl&&Object.keys(initialStateFromUrl).length),initialState={...defaultState,...initialStateFromUrl},globalQueryStateContainer=Object(public_.createStateContainer)(initialState),stopSyncingWithStateContainer=connectToQueryState(query,globalQueryStateContainer,{refreshInterval:!0,time:!0,filters:es_query_filters.FilterStateStore.GLOBAL_STATE});initialStateFromUrl||kbnUrlStateStorage.set("_g",initialState,{replace:!0}),globalQueryStateContainer.set(initialState);const{start:start,stop:stopSyncingWithUrl}=Object(public_.syncState)({stateStorage:kbnUrlStateStorage,stateContainer:{...globalQueryStateContainer,set:state=>{state&&globalQueryStateContainer.set(state)}},storageKey:"_g"});return start(),{stop:()=>{stopSyncingWithStateContainer(),stopSyncingWithUrl()},hasInheritedQueryFromUrl:hasInheritedQueryFromUrl}};var state_sync_types=__webpack_require__(96)},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return BucketAggType})),__webpack_require__.d(__webpack_exports__,"b",(function(){return isBucketAggType}));var _agg_type__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(40);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class BucketAggType extends _agg_type__WEBPACK_IMPORTED_MODULE_0__.a{constructor(config){super(config),_defineProperty(this,"getKey",void 0),_defineProperty(this,"type","buckets"),this.getKey=config.getKey||((bucket,key)=>key||bucket.key)}}function isBucketAggType(aggConfig){return aggConfig&&"buckets"===aggConfig.type}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parse=exports.unitsAsc=exports.unitsDesc=exports.units=exports.unitsMap=void 0;const moment_1=__webpack_require__(144).__importDefault(__webpack_require__(5));exports.unitsMap={ms:{weight:1,type:"fixed",base:1},s:{weight:2,type:"fixed",base:1e3},m:{weight:3,type:"mixed",base:6e4},h:{weight:4,type:"mixed",base:36e5},d:{weight:5,type:"mixed",base:864e5},w:{weight:6,type:"calendar",base:NaN},M:{weight:7,type:"calendar",base:NaN},y:{weight:9,type:"calendar",base:NaN}},exports.units=Object.keys(exports.unitsMap).sort((a,b)=>exports.unitsMap[b].weight-exports.unitsMap[a].weight),exports.unitsDesc=[...exports.units],exports.unitsAsc=[...exports.units].reverse();const isDate=d=>"[object Date]"===Object.prototype.toString.call(d);function parse(input,options={}){const text=input,{roundUp:roundUp=!1,momentInstance:momentInstance=moment_1.default,forceNow:forceNow}=options;if(!text)return;if(momentInstance.isMoment(text))return text;if(isDate(text))return momentInstance(text);if(void 0!==forceNow&&(!isDate(d=forceNow)||isNaN(d.valueOf())))throw new Error("forceNow must be a valid Date");var d;let time,index,parseString,mathString="";return"now"===text.substring(0,3)?(time=momentInstance(forceNow),mathString=text.substring("now".length)):(index=text.indexOf("||"),-1===index?(parseString=text,mathString=""):(parseString=text.substring(0,index),mathString=text.substring(index+2)),time=momentInstance(parseString)),mathString.length?function(mathString,time,roundUp){const dateTime=time,len=mathString.length;let i=0;for(;i<len;){const c=mathString.charAt(i++);let type,num,unit;if("/"===c)type=0;else if("+"===c)type=1;else{if("-"!==c)return;type=2}if(isNaN(mathString.charAt(i)))num=1;else if(2===mathString.length)num=mathString.charAt(i);else{const numFrom=i;for(;!isNaN(mathString.charAt(i));)if(i++,i>=len)return;num=parseInt(mathString.substring(numFrom,i),10)}if(0===type&&1!==num)return;unit=mathString.charAt(i++);for(let j=i;j<len;j++){const unitChar=mathString.charAt(i);if(!/[a-z]/i.test(unitChar))break;unit+=unitChar,i++}if(-1===exports.units.indexOf(unit))return;0===type?roundUp?dateTime.endOf(unit):dateTime.startOf(unit):1===type?dateTime.add(num,unit):2===type&&dateTime.subtract(num,unit)}return dateTime}(mathString,time,roundUp):time}exports.parse=parse,exports.default={parse:parse,unitsMap:Object.freeze(exports.unitsMap),units:Object.freeze(exports.units),unitsAsc:Object.freeze(exports.unitsAsc),unitsDesc:Object.freeze(exports.unitsDesc)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getNotifications})),__webpack_require__.d(__webpack_exports__,"g",(function(){return setNotifications})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getUiSettings})),__webpack_require__.d(__webpack_exports__,"j",(function(){return setUiSettings})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getOverlays})),__webpack_require__.d(__webpack_exports__,"h",(function(){return setOverlays})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getIndexPatterns})),__webpack_require__.d(__webpack_exports__,"f",(function(){return setIndexPatterns})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getSearchService})),__webpack_require__.d(__webpack_exports__,"i",(function(){return setSearchService}));var _kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23);const[getNotifications,setNotifications]=Object(_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__.createGetterSetter)("Notifications"),[getUiSettings,setUiSettings]=Object(_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__.createGetterSetter)("UiSettings"),[getOverlays,setOverlays]=Object(_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__.createGetterSetter)("Overlays"),[getIndexPatterns,setIndexPatterns]=Object(_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__.createGetterSetter)("IndexPatterns"),[getSearchService,setSearchService]=Object(_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__.createGetterSetter)("Search")},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaUtils/common");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return getCalculateAutoTimeExpression})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getNumberHistogramIntervalByDatatableColumn})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getDateHistogramMetaDataByDatatableColumn})),__webpack_require__.d(__webpack_exports__,"d",(function(){return dateHistogramInterval})),__webpack_require__.d(__webpack_exports__,"a",(function(){return invalid_es_calendar_interval_error_InvalidEsCalendarIntervalError})),__webpack_require__.d(__webpack_exports__,"b",(function(){return invalid_es_interval_format_error_InvalidEsIntervalFormatError})),__webpack_require__.d(__webpack_exports__,"j",(function(){return isValidEsInterval})),__webpack_require__.d(__webpack_exports__,"k",(function(){return isValidInterval})),__webpack_require__.d(__webpack_exports__,"o",(function(){return splitStringInterval})),__webpack_require__.d(__webpack_exports__,"m",(function(){return parseInterval})),__webpack_require__.d(__webpack_exports__,"l",(function(){return parseEsInterval})),__webpack_require__.d(__webpack_exports__,"p",(function(){return toAbsoluteDates})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getFormatWithAggs})),__webpack_require__.d(__webpack_exports__,"c",(function(){return Ipv4Address})),__webpack_require__.d(__webpack_exports__,"n",(function(){return propFilter})),__webpack_require__.d(__webpack_exports__,"q",(function(){return toAngularJSON})),__webpack_require__.d(__webpack_exports__,"i",(function(){return inferTimeZone}));var external_kbnSharedDeps_Moment_=__webpack_require__(5),external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_),constants=__webpack_require__(26),time_buckets=__webpack_require__(93),target=__webpack_require__(18),target_default=__webpack_require__.n(target),external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);class invalid_es_calendar_interval_error_InvalidEsCalendarIntervalError extends Error{constructor(interval,value,unit,type){super(external_kbnSharedDeps_KbnI18n_.i18n.translate("data.parseEsInterval.invalidEsCalendarIntervalErrorMessage",{defaultMessage:"Invalid calendar interval: {interval}, value must be 1",values:{interval:interval}})),this.interval=interval,this.value=value,this.unit=unit,this.type=type,this.name="InvalidEsCalendarIntervalError",this.value=value,this.unit=unit,this.type=type,Error.captureStackTrace&&Error.captureStackTrace(this,invalid_es_calendar_interval_error_InvalidEsCalendarIntervalError),Object.setPrototypeOf(this,invalid_es_calendar_interval_error_InvalidEsCalendarIntervalError.prototype)}}class invalid_es_interval_format_error_InvalidEsIntervalFormatError extends Error{constructor(interval){super(external_kbnSharedDeps_KbnI18n_.i18n.translate("data.parseEsInterval.invalidEsIntervalFormatErrorMessage",{defaultMessage:"Invalid interval format: {interval}",values:{interval:interval}})),this.interval=interval,this.name="InvalidEsIntervalFormatError",Error.captureStackTrace&&Error.captureStackTrace(this,invalid_es_interval_format_error_InvalidEsIntervalFormatError),Object.setPrototypeOf(this,invalid_es_interval_format_error_InvalidEsIntervalFormatError.prototype)}}const ES_INTERVAL_STRING_REGEX=new RegExp("^([1-9][0-9]*)\\s*("+target_default.a.units.join("|")+")$");function parseEsInterval(interval){const matches=String(interval).trim().match(ES_INTERVAL_STRING_REGEX);if(!matches)throw new invalid_es_interval_format_error_InvalidEsIntervalFormatError(interval);const value=parseFloat(matches[1]),unit=matches[2],type=target_default.a.unitsMap[unit].type;if("calendar"===type&&1!==value)throw new invalid_es_calendar_interval_error_InvalidEsCalendarIntervalError(interval,value,unit,type);return{value:value,unit:unit,type:"mixed"===type&&1===value||"calendar"===type?"calendar":"fixed"}}function dateHistogramInterval(interval){const{type:type}=parseEsInterval(interval);return"calendar"===type?{calendar_interval:interval}:{fixed_interval:interval}}function isValidEsInterval(interval){try{return parseEsInterval(interval),!0}catch{return!1}}function leastCommonMultiple(a,b){return Math.abs(a*b/function greatestCommonDivisor(a,b){return 0===a?Math.abs(b):greatestCommonDivisor(b%a,a)}(a,b))}function parseWithBase(value,baseInterval){try{return function(a,b){const{unitsMap:unitsMap,unitsDesc:unitsDesc}=target_default.a,aInt=parseEsInterval(a),bInt=parseEsInterval(b);if(a===b)return a;const aUnit=unitsMap[aInt.unit],bUnit=unitsMap[bInt.unit];if(aInt.type!==bInt.type)throw Error(`Incompatible intervals: ${a} (${aInt.type}), ${b} (${bInt.type})`);if("calendar"===aInt.type||"calendar"===bInt.type)return aUnit.weight>bUnit.weight?`${aInt.value}${aInt.unit}`:`${bInt.value}${bInt.unit}`;const aMs=aInt.value*aUnit.base,bMs=bInt.value*bUnit.base,lcmMs=leastCommonMultiple(aMs,bMs);if(lcmMs===bMs)return b.replace(/\s/g,"");if(lcmMs===aMs)return a.replace(/\s/g,"");const lcmUnit=unitsDesc.find(unit=>{const unitInfo=unitsMap[unit];return!("calendar"===unitInfo.type||lcmMs%unitInfo.base!=0)});if(!lcmUnit)throw Error(`Unable to find common interval for: ${a}, ${b}`);return`${lcmMs/unitsMap[lcmUnit].base}${lcmUnit}`}(baseInterval,value)===value.replace(/\s/g,"")}catch(e){return!1}}function isValidInterval(value,baseInterval){return baseInterval?parseWithBase(value,baseInterval):isValidEsInterval(value)}var external_kbnSharedDeps_Lodash_=__webpack_require__(2);const INTERVAL_STRING_RE=new RegExp("^([0-9\\.]*)\\s*("+target_default.a.units.join("|")+")$"),splitStringInterval=interval=>{if(interval){const matches=interval.toString().trim().match(INTERVAL_STRING_RE);if(matches)return{value:parseFloat(matches[1])||1,unit:matches[2]}}return null};function parseInterval(interval){const parsedInterval=splitStringInterval(interval);if(!parsedInterval)return null;try{const{value:value,unit:unit}=parsedInterval,duration=external_kbnSharedDeps_Moment_default.a.duration(value,unit),selectedUnit=Object(external_kbnSharedDeps_Lodash_.find)(target_default.a.units,u=>Math.abs(duration.as(u))>=1);return target_default.a.units.indexOf(selectedUnit)<target_default.a.units.indexOf(unit)?duration:external_kbnSharedDeps_Moment_default.a.duration(duration.as(selectedUnit),selectedUnit)}catch(e){return null}}function toAbsoluteDates(range){const fromDate=target_default.a.parse(range.from),toDate=target_default.a.parse(range.to,{roundUp:!0});if(fromDate&&toDate)return{from:fromDate.toDate(),to:toDate.toDate()}}var _interval_options=__webpack_require__(22);function getCalculateAutoTimeExpression(getConfig){return function(range){const dates=toAbsoluteDates(range);if(!dates)return;const buckets=new time_buckets.a({"histogram:maxBars":getConfig(constants.c.HISTOGRAM_MAX_BARS),"histogram:barTarget":getConfig(constants.c.HISTOGRAM_BAR_TARGET),dateFormat:getConfig("dateFormat"),"dateFormat:scaled":getConfig("dateFormat:scaled")});return buckets.setInterval(_interval_options.a),buckets.setBounds({min:external_kbnSharedDeps_Moment_default()(dates.from),max:external_kbnSharedDeps_Moment_default()(dates.to)}),buckets.getInterval().expression}}var bucket_agg_types=__webpack_require__(14);const getNumberHistogramIntervalByDatatableColumn=column=>{var _column$meta$sourcePa;if("esaggs"!==column.meta.source)return;if((null===(_column$meta$sourcePa=column.meta.sourceParams)||void 0===_column$meta$sourcePa?void 0:_column$meta$sourcePa.type)!==bucket_agg_types.a.HISTOGRAM)return;const params=column.meta.sourceParams.params;return params.used_interval&&"string"!=typeof params.used_interval?params.used_interval:void 0},getDateHistogramMetaDataByDatatableColumn=column=>{var _column$meta$sourcePa;if("esaggs"!==column.meta.source)return;if((null===(_column$meta$sourcePa=column.meta.sourceParams)||void 0===_column$meta$sourcePa?void 0:_column$meta$sourcePa.type)!==bucket_agg_types.a.DATE_HISTOGRAM)return;const params=column.meta.sourceParams.params;let interval;return params.used_interval&&"auto"!==params.used_interval&&(interval=params.used_interval),{interval:interval,timeZone:params.used_time_zone,timeRange:column.meta.sourceParams.appliedTimeRange}};var field_formats=__webpack_require__(13),date_range=__webpack_require__(49),ip_range=__webpack_require__(50);function getFormatWithAggs(getFieldFormat){return mapping=>{const{id:id,params:params={}}=mapping,customFormats={range:()=>new(field_formats.g.from(range=>{if(range.label)return range.label;const nestedFormatter=params,format=getFieldFormat({id:nestedFormatter.id,params:nestedFormatter.params});let fromValue=format.convert(range.gte),toValue=format.convert(range.lt);if(params.replaceInfinity&&null==nestedFormatter.id){const FROM_PLACEHOLDER="−∞",TO_PLACEHOLDER="+∞";fromValue=isFinite(range.gte)?fromValue:FROM_PLACEHOLDER,toValue=isFinite(range.lt)?toValue:TO_PLACEHOLDER}return"arrow_right"===params.template?external_kbnSharedDeps_KbnI18n_.i18n.translate("data.aggTypes.buckets.ranges.rangesFormatMessageArrowRight",{defaultMessage:"{from} → {to}",values:{from:fromValue,to:toValue}}):external_kbnSharedDeps_KbnI18n_.i18n.translate("data.aggTypes.buckets.ranges.rangesFormatMessage",{defaultMessage:"{gte} {from} and {lt} {to}",values:{gte:"≥",from:fromValue,lt:"<",to:toValue}})})),date_range:()=>{const nestedFormatter=params;return new(field_formats.g.from(range=>{const format=getFieldFormat({id:nestedFormatter.id,params:nestedFormatter.params});return Object(date_range.b)(range,format.convert.bind(format))}))},ip_range:()=>{const nestedFormatter=params;return new(field_formats.g.from(range=>{const format=getFieldFormat({id:nestedFormatter.id,params:nestedFormatter.params});return Object(ip_range.b)(range,format.convert.bind(format))}))},terms:()=>{const convert=(val,type)=>{const format=getFieldFormat({id:params.id,params:params});return"__other__"===val?params.otherBucketLabel:"__missing__"===val?params.missingBucketLabel:format.convert(val,type)};return{convert:convert,getConverterFor:type=>val=>convert(val,type)}}};return id&&id in customFormats?customFormats[id]():getFieldFormat(mapping)}}function throwError(ipAddress){throw Error("Invalid IPv4 address: "+ipAddress)}function isIntegerInRange(integer,min,max){return!isNaN(integer)&&integer>=min&&integer<max&&integer%1==0}class Ipv4Address{constructor(ipAddress){var obj,key,value;if(value=void 0,(key="value")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,"string"==typeof ipAddress){this.value=0;const bytes=ipAddress.split(".");4!==bytes.length&&throwError(ipAddress);for(let i=0;i<bytes.length;i++){const byte=Number(bytes[i]);isIntegerInRange(byte,0,256)||throwError(ipAddress),this.value+=Math.pow(256,3-i)*byte}}else this.value=ipAddress;isIntegerInRange(this.value,0,Math.pow(256,4))||throwError(ipAddress)}toString(){let value=this.value;const bytes=[];for(let i=0;i<4;i++)bytes.unshift(value%256),value=Math.floor(value/256);return bytes.join(".")}valueOf(){return this.value}}function propFilter(prop){return function(list,filters=[]){if(Object(external_kbnSharedDeps_Lodash_.isFunction)(filters))return list.filter(item=>filters(item[prop]));if(Array.isArray(filters)||(filters=filters.split(",")),0===filters.length)return list;if(filters.includes("*"))return list;const options=filters.reduce((acc,filter)=>{let type="include",value=filter;return"!"===filter.charAt(0)&&(type="exclude",value=filter.substr(1)),acc[type]||(acc[type]=[]),acc[type].push(value),acc},{});return list.filter(item=>{const value=item[prop];if(options.exclude&&options.exclude.includes(value))return!1;return!(options.include&&!options.include.includes(value))})}}function toAngularJSON(obj,pretty){return void 0===obj?"":("number"==typeof pretty&&(pretty=pretty?2:null),JSON.stringify(obj,toJsonReplacer,pretty))}function toJsonReplacer(key,value){let val=value;var obj;return"string"==typeof key&&"$"===key.charAt(0)&&"$"===key.charAt(1)?val=void 0:(obj=value)&&obj.window===obj?val="$WINDOW":value&&window.document===value?val="$DOCUMENT":function(obj){return obj&&obj.$evalAsync&&obj.$watch}(value)&&(val="$SCOPE"),val}function inferTimeZone(params,indexPattern,isDefaultTimezone,getConfig){let tz=params.time_zone;if(!tz&&params.field){var _indexPattern$typeMet,_indexPattern$typeMet2,_indexPattern$typeMet3,_indexPattern$typeMet4;const fieldName="string"==typeof params.field?params.field:params.field.name;tz=null===(_indexPattern$typeMet=indexPattern.typeMeta)||void 0===_indexPattern$typeMet||null===(_indexPattern$typeMet2=_indexPattern$typeMet.aggs)||void 0===_indexPattern$typeMet2||null===(_indexPattern$typeMet3=_indexPattern$typeMet2.date_histogram)||void 0===_indexPattern$typeMet3||null===(_indexPattern$typeMet4=_indexPattern$typeMet3[fieldName])||void 0===_indexPattern$typeMet4?void 0:_indexPattern$typeMet4.time_zone}if(!tz){const detectedTimezone=external_kbnSharedDeps_Moment_default.a.tz.guess(),tzOffset=external_kbnSharedDeps_Moment_default()().format("Z");tz=isDefaultTimezone()?detectedTimezone||tzOffset:getConfig("dateFormat:tz")}return tz}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return autoInterval})),__webpack_require__.d(__webpack_exports__,"c",(function(){return isAutoInterval})),__webpack_require__.d(__webpack_exports__,"b",(function(){return intervalOptions}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);const autoInterval="auto",isAutoInterval=value=>value===autoInterval,intervalOptions=[{display:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.aggs.buckets.intervalOptions.autoDisplayName",{defaultMessage:"Auto"}),val:autoInterval,enabled:agg=>agg.fieldIsTimeField()},{display:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.aggs.buckets.intervalOptions.millisecondDisplayName",{defaultMessage:"Millisecond"}),val:"ms"},{display:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.aggs.buckets.intervalOptions.secondDisplayName",{defaultMessage:"Second"}),val:"s"},{display:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.aggs.buckets.intervalOptions.minuteDisplayName",{defaultMessage:"Minute"}),val:"m"},{display:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.aggs.buckets.intervalOptions.hourlyDisplayName",{defaultMessage:"Hour"}),val:"h"},{display:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.aggs.buckets.intervalOptions.dailyDisplayName",{defaultMessage:"Day"}),val:"d"},{display:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.aggs.buckets.intervalOptions.weeklyDisplayName",{defaultMessage:"Week"}),val:"w"},{display:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.aggs.buckets.intervalOptions.monthlyDisplayName",{defaultMessage:"Month"}),val:"M"},{display:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.aggs.buckets.intervalOptions.yearlyDisplayName",{defaultMessage:"Year"}),val:"y"}]},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/usageCollection/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DEFAULT_QUERY_LANGUAGE})),__webpack_require__.d(__webpack_exports__,"b",(function(){return KIBANA_USER_QUERY_LANGUAGE_KEY})),__webpack_require__.d(__webpack_exports__,"c",(function(){return UI_SETTINGS}));const DEFAULT_QUERY_LANGUAGE="kuery",KIBANA_USER_QUERY_LANGUAGE_KEY="kibana.userQueryLanguage",UI_SETTINGS={META_FIELDS:"metaFields",DOC_HIGHLIGHT:"doc_table:highlight",QUERY_STRING_OPTIONS:"query:queryString:options",QUERY_ALLOW_LEADING_WILDCARDS:"query:allowLeadingWildcards",SEARCH_QUERY_LANGUAGE:"search:queryLanguage",SORT_OPTIONS:"sort:options",COURIER_IGNORE_FILTER_IF_FIELD_NOT_IN_INDEX:"courier:ignoreFilterIfFieldNotInIndex",COURIER_SET_REQUEST_PREFERENCE:"courier:setRequestPreference",COURIER_CUSTOM_REQUEST_PREFERENCE:"courier:customRequestPreference",COURIER_MAX_CONCURRENT_SHARD_REQUESTS:"courier:maxConcurrentShardRequests",COURIER_BATCH_SEARCHES:"courier:batchSearches",SEARCH_INCLUDE_FROZEN:"search:includeFrozen",SEARCH_TIMEOUT:"search:timeout",HISTOGRAM_BAR_TARGET:"histogram:barTarget",HISTOGRAM_MAX_BARS:"histogram:maxBars",HISTORY_LIMIT:"history:limit",SHORT_DOTS_ENABLE:"shortDots:enable",FORMAT_DEFAULT_TYPE_MAP:"format:defaultTypeMap",FORMAT_NUMBER_DEFAULT_PATTERN:"format:number:defaultPattern",FORMAT_PERCENT_DEFAULT_PATTERN:"format:percent:defaultPattern",FORMAT_BYTES_DEFAULT_PATTERN:"format:bytes:defaultPattern",FORMAT_CURRENCY_DEFAULT_PATTERN:"format:currency:defaultPattern",FORMAT_NUMBER_DEFAULT_LOCALE:"format:number:defaultLocale",TIMEPICKER_REFRESH_INTERVAL_DEFAULTS:"timepicker:refreshIntervalDefaults",TIMEPICKER_QUICK_RANGES:"timepicker:quickRanges",TIMEPICKER_TIME_DEFAULTS:"timepicker:timeDefaults",INDEXPATTERN_PLACEHOLDER:"indexPattern:placeholder",FILTERS_PINNED_BY_DEFAULT:"filters:pinnedByDefault",FILTERS_EDITOR_SUGGEST_VALUES:"filterEditor:suggestValues",AUTOCOMPLETE_USE_TIMERANGE:"autocomplete:useTimeRange"}},function(module,__webpack_exports__,__webpack_require__){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__webpack_require__.d(__webpack_exports__,"a",(function(){return BaseParamType}));class BaseParamType{constructor(config){_defineProperty(this,"name",void 0),_defineProperty(this,"type",void 0),_defineProperty(this,"displayName",void 0),_defineProperty(this,"required",void 0),_defineProperty(this,"advanced",void 0),_defineProperty(this,"default",void 0),_defineProperty(this,"write",void 0),_defineProperty(this,"serialize",void 0),_defineProperty(this,"deserialize",void 0),_defineProperty(this,"toExpressionAst",void 0),_defineProperty(this,"options",void 0),_defineProperty(this,"valueType",void 0),_defineProperty(this,"modifyAggConfigOnSearchRequestStart",void 0),this.name=config.name,this.type=config.type,this.displayName=config.displayName||this.name,this.required=!0===config.required,this.advanced=config.advanced||!1,this.onChange=config.onChange,this.shouldShow=config.shouldShow,this.default=config.default;this.write=config.write||((aggConfig,output)=>{aggConfig.params[this.name]&&(output.params[this.name]=aggConfig.params[this.name]||this.default)}),this.serialize=config.serialize,this.deserialize=config.deserialize,this.toExpressionAst=config.toExpressionAst,this.options=config.options,this.modifyAggConfigOnSearchRequestStart=config.modifyAggConfigOnSearchRequestStart||function(){},this.valueType=config.valueType||config.type}}},function(module,__webpack_exports__,__webpack_require__){"use strict";function asPrettyString(val){if(null==val)return" - ";switch(typeof val){case"string":return val;case"object":return JSON.stringify(val,null,"  ");default:return""+val}}__webpack_require__.d(__webpack_exports__,"a",(function(){return asPrettyString})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getHighlightHtml})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getHighlightRequest}));var external_kbnSharedDeps_Lodash_=__webpack_require__(2),external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);const highlightTags_pre="@kibana-highlighted-field@",highlightTags_post="@/kibana-highlighted-field@",htmlTags_pre="<mark>",htmlTags_post="</mark>";function getHighlightHtml(fieldValue,highlights){let highlightHtml="object"==typeof fieldValue?JSON.stringify(fieldValue):fieldValue;return external_kbnSharedDeps_Lodash_default.a.each(highlights,(function(highlight){const escapedHighlight=external_kbnSharedDeps_Lodash_default.a.escape(highlight),untaggedHighlight=escapedHighlight.split(highlightTags_pre).join("").split(highlightTags_post).join(""),taggedHighlight=escapedHighlight.split(highlightTags_pre).join(htmlTags_pre).split(highlightTags_post).join(htmlTags_post);highlightHtml=highlightHtml.split(untaggedHighlight).join(taggedHighlight)})),highlightHtml}const FRAGMENT_SIZE=Math.pow(2,31)-1;function getHighlightRequest(query,shouldHighlight){if(shouldHighlight)return{pre_tags:[highlightTags_pre],post_tags:[highlightTags_post],fields:{"*":{}},fragment_size:FRAGMENT_SIZE}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return errors_IndexPatternMissingIndices})),__webpack_require__.d(__webpack_exports__,"f",(function(){return isDefault})),__webpack_require__.d(__webpack_exports__,"c",(function(){return ILLEGAL_CHARACTERS_KEY})),__webpack_require__.d(__webpack_exports__,"a",(function(){return CONTAINS_SPACES_KEY})),__webpack_require__.d(__webpack_exports__,"d",(function(){return ILLEGAL_CHARACTERS_VISIBLE})),__webpack_require__.d(__webpack_exports__,"b",(function(){return ILLEGAL_CHARACTERS})),__webpack_require__.d(__webpack_exports__,"g",(function(){return validateIndexPattern}));var common_=__webpack_require__(20);class errors_IndexPatternMissingIndices extends common_.KbnError{constructor(message){super(message&&message.length?"No matching indices found: "+message:"IndexPattern's configured pattern does not match any indices")}}const isDefault=indexPattern=>!indexPattern.type,ILLEGAL_CHARACTERS_KEY="ILLEGAL_CHARACTERS",CONTAINS_SPACES_KEY="CONTAINS_SPACES",ILLEGAL_CHARACTERS_VISIBLE=["\\","/","?",'"',"<",">","|"],ILLEGAL_CHARACTERS=ILLEGAL_CHARACTERS_VISIBLE.concat(" ");function validateIndexPattern(indexPattern){const errors={},illegalCharacters=function(indexPattern){return ILLEGAL_CHARACTERS_VISIBLE.reduce((chars,char)=>(indexPattern.includes(char)&&chars.push(char),chars),[])}(indexPattern);return illegalCharacters.length&&(errors[ILLEGAL_CHARACTERS_KEY]=illegalCharacters),function(indexPattern){return indexPattern.includes(" ")}(indexPattern)&&(errors[CONTAINS_SPACES_KEY]=!0),errors}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return agg_config.a})),__webpack_require__.d(__webpack_exports__,"c",(function(){return agg_configs_AggConfigs})),__webpack_require__.d(__webpack_exports__,"e",(function(){return AggGroupNames})),__webpack_require__.d(__webpack_exports__,"d",(function(){return AggGroupLabels})),__webpack_require__.d(__webpack_exports__,"i",(function(){return agg_type.a})),__webpack_require__.d(__webpack_exports__,"gc",(function(){return getAggTypes})),__webpack_require__.d(__webpack_exports__,"hc",(function(){return getAggTypesFunctions})),__webpack_require__.d(__webpack_exports__,"j",(function(){return AggTypesRegistry})),__webpack_require__.d(__webpack_exports__,"Yb",(function(){return aggsRequiredUiSettings})),__webpack_require__.d(__webpack_exports__,"k",(function(){return aggs_service_AggsCommonService})),__webpack_require__.d(__webpack_exports__,"Zb",(function(){return _interval_options.a})),__webpack_require__.d(__webpack_exports__,"Wc",(function(){return _interval_options.c})),__webpack_require__.d(__webpack_exports__,"Vc",(function(){return _interval_options.b})),__webpack_require__.d(__webpack_exports__,"n",(function(){return bucket_agg_type.a})),__webpack_require__.d(__webpack_exports__,"Xc",(function(){return bucket_agg_type.b})),__webpack_require__.d(__webpack_exports__,"l",(function(){return bucket_agg_types.a})),__webpack_require__.d(__webpack_exports__,"Z",(function(){return aggDateHistogramFnName})),__webpack_require__.d(__webpack_exports__,"Y",(function(){return aggDateHistogram})),__webpack_require__.d(__webpack_exports__,"Yc",(function(){return isDateHistogramBucketAggConfig})),__webpack_require__.d(__webpack_exports__,"rc",(function(){return getDateHistogramBucketAgg})),__webpack_require__.d(__webpack_exports__,"bb",(function(){return aggDateRangeFnName})),__webpack_require__.d(__webpack_exports__,"ab",(function(){return aggDateRange})),__webpack_require__.d(__webpack_exports__,"tc",(function(){return getDateRangeBucketAgg})),__webpack_require__.d(__webpack_exports__,"fb",(function(){return aggFilterFnName})),__webpack_require__.d(__webpack_exports__,"eb",(function(){return aggFilter})),__webpack_require__.d(__webpack_exports__,"vc",(function(){return getFilterBucketAgg})),__webpack_require__.d(__webpack_exports__,"jb",(function(){return aggFiltersFnName})),__webpack_require__.d(__webpack_exports__,"ib",(function(){return aggFilters})),__webpack_require__.d(__webpack_exports__,"xc",(function(){return getFiltersBucketAgg})),__webpack_require__.d(__webpack_exports__,"pb",(function(){return aggGeoHashFnName})),__webpack_require__.d(__webpack_exports__,"ob",(function(){return aggGeoHash})),__webpack_require__.d(__webpack_exports__,"Bc",(function(){return getGeoHashBucketAgg})),__webpack_require__.d(__webpack_exports__,"rb",(function(){return aggGeoTileFnName})),__webpack_require__.d(__webpack_exports__,"qb",(function(){return aggGeoTile})),__webpack_require__.d(__webpack_exports__,"Cc",(function(){return getGeoTitleBucketAgg})),__webpack_require__.d(__webpack_exports__,"tb",(function(){return aggHistogramFnName})),__webpack_require__.d(__webpack_exports__,"sb",(function(){return aggHistogram})),__webpack_require__.d(__webpack_exports__,"Dc",(function(){return getHistogramBucketAgg})),__webpack_require__.d(__webpack_exports__,"vb",(function(){return aggIpRangeFnName})),__webpack_require__.d(__webpack_exports__,"ub",(function(){return aggIpRange})),__webpack_require__.d(__webpack_exports__,"x",(function(){return IP_RANGE_TYPES})),__webpack_require__.d(__webpack_exports__,"Ec",(function(){return getIpRangeBucketAgg})),__webpack_require__.d(__webpack_exports__,"o",(function(){return cidr_mask_CidrMask})),__webpack_require__.d(__webpack_exports__,"dc",(function(){return date_range.b})),__webpack_require__.d(__webpack_exports__,"ec",(function(){return ip_range.b})),__webpack_require__.d(__webpack_exports__,"ac",(function(){return calc_auto_interval.a})),__webpack_require__.d(__webpack_exports__,"cc",(function(){return calc_auto_interval.c})),__webpack_require__.d(__webpack_exports__,"bc",(function(){return calc_auto_interval.b})),__webpack_require__.d(__webpack_exports__,"dd",(function(){return isType})),__webpack_require__.d(__webpack_exports__,"ad",(function(){return isNumberType})),__webpack_require__.d(__webpack_exports__,"cd",(function(){return isStringType})),__webpack_require__.d(__webpack_exports__,"bd",(function(){return isStringOrNumberType})),__webpack_require__.d(__webpack_exports__,"gd",(function(){return migrateIncludeExcludeFormat})),__webpack_require__.d(__webpack_exports__,"Jb",(function(){return aggRangeFnName})),__webpack_require__.d(__webpack_exports__,"Ib",(function(){return aggRange})),__webpack_require__.d(__webpack_exports__,"Mc",(function(){return getRangeBucketAgg})),__webpack_require__.d(__webpack_exports__,"Nb",(function(){return aggSignificantTermsFnName})),__webpack_require__.d(__webpack_exports__,"Mb",(function(){return aggSignificantTerms})),__webpack_require__.d(__webpack_exports__,"Oc",(function(){return getSignificantTermsBucketAgg})),__webpack_require__.d(__webpack_exports__,"Vb",(function(){return aggTermsFnName})),__webpack_require__.d(__webpack_exports__,"Ub",(function(){return aggTerms})),__webpack_require__.d(__webpack_exports__,"pd",(function(){return termsAggFilter})),__webpack_require__.d(__webpack_exports__,"Sc",(function(){return getTermsBucketAgg})),__webpack_require__.d(__webpack_exports__,"J",(function(){return aggAvgFnName})),__webpack_require__.d(__webpack_exports__,"I",(function(){return aggAvg})),__webpack_require__.d(__webpack_exports__,"ic",(function(){return getAvgMetricAgg})),__webpack_require__.d(__webpack_exports__,"L",(function(){return aggBucketAvgFnName})),__webpack_require__.d(__webpack_exports__,"K",(function(){return aggBucketAvg})),__webpack_require__.d(__webpack_exports__,"jc",(function(){return getBucketAvgMetricAgg})),__webpack_require__.d(__webpack_exports__,"N",(function(){return aggBucketMaxFnName})),__webpack_require__.d(__webpack_exports__,"M",(function(){return aggBucketMax})),__webpack_require__.d(__webpack_exports__,"kc",(function(){return getBucketMaxMetricAgg})),__webpack_require__.d(__webpack_exports__,"P",(function(){return aggBucketMinFnName})),__webpack_require__.d(__webpack_exports__,"O",(function(){return aggBucketMin})),__webpack_require__.d(__webpack_exports__,"lc",(function(){return getBucketMinMetricAgg})),__webpack_require__.d(__webpack_exports__,"R",(function(){return aggBucketSumFnName})),__webpack_require__.d(__webpack_exports__,"Q",(function(){return aggBucketSum})),__webpack_require__.d(__webpack_exports__,"mc",(function(){return getBucketSumMetricAgg})),__webpack_require__.d(__webpack_exports__,"hb",(function(){return aggFilteredMetricFnName})),__webpack_require__.d(__webpack_exports__,"gb",(function(){return aggFilteredMetric})),__webpack_require__.d(__webpack_exports__,"wc",(function(){return getFilteredMetricAgg})),__webpack_require__.d(__webpack_exports__,"T",(function(){return aggCardinalityFnName})),__webpack_require__.d(__webpack_exports__,"S",(function(){return aggCardinality})),__webpack_require__.d(__webpack_exports__,"oc",(function(){return getCardinalityMetricAgg})),__webpack_require__.d(__webpack_exports__,"pc",(function(){return getCountMetricAgg})),__webpack_require__.d(__webpack_exports__,"V",(function(){return aggCountFnName})),__webpack_require__.d(__webpack_exports__,"U",(function(){return aggCount})),__webpack_require__.d(__webpack_exports__,"X",(function(){return aggCumulativeSumFnName})),__webpack_require__.d(__webpack_exports__,"W",(function(){return aggCumulativeSum})),__webpack_require__.d(__webpack_exports__,"qc",(function(){return getCumulativeSumMetricAgg})),__webpack_require__.d(__webpack_exports__,"db",(function(){return aggDerivativeFnName})),__webpack_require__.d(__webpack_exports__,"cb",(function(){return aggDerivative})),__webpack_require__.d(__webpack_exports__,"uc",(function(){return getDerivativeMetricAgg})),__webpack_require__.d(__webpack_exports__,"lb",(function(){return aggGeoBoundsFnName})),__webpack_require__.d(__webpack_exports__,"kb",(function(){return aggGeoBounds})),__webpack_require__.d(__webpack_exports__,"zc",(function(){return getGeoBoundsMetricAgg})),__webpack_require__.d(__webpack_exports__,"nb",(function(){return aggGeoCentroidFnName})),__webpack_require__.d(__webpack_exports__,"mb",(function(){return aggGeoCentroid})),__webpack_require__.d(__webpack_exports__,"Ac",(function(){return getGeoCentroidMetricAgg})),__webpack_require__.d(__webpack_exports__,"id",(function(){return parentPipelineType})),__webpack_require__.d(__webpack_exports__,"hd",(function(){return parentPipelineAggHelper})),__webpack_require__.d(__webpack_exports__,"nd",(function(){return siblingPipelineType})),__webpack_require__.d(__webpack_exports__,"md",(function(){return siblingPipelineAggHelper})),__webpack_require__.d(__webpack_exports__,"xb",(function(){return aggMaxFnName})),__webpack_require__.d(__webpack_exports__,"wb",(function(){return aggMax})),__webpack_require__.d(__webpack_exports__,"Fc",(function(){return getMaxMetricAgg})),__webpack_require__.d(__webpack_exports__,"zb",(function(){return aggMedianFnName})),__webpack_require__.d(__webpack_exports__,"yb",(function(){return aggMedian})),__webpack_require__.d(__webpack_exports__,"Gc",(function(){return getMedianMetricAgg})),__webpack_require__.d(__webpack_exports__,"Pb",(function(){return aggSinglePercentileFnName})),__webpack_require__.d(__webpack_exports__,"Ob",(function(){return aggSinglePercentile})),__webpack_require__.d(__webpack_exports__,"Pc",(function(){return getSinglePercentileMetricAgg})),__webpack_require__.d(__webpack_exports__,"E",(function(){return metric_agg_type_MetricAggType})),__webpack_require__.d(__webpack_exports__,"Zc",(function(){return isMetricAggType})),__webpack_require__.d(__webpack_exports__,"D",(function(){return METRIC_TYPES})),__webpack_require__.d(__webpack_exports__,"Bb",(function(){return aggMinFnName})),__webpack_require__.d(__webpack_exports__,"Ab",(function(){return aggMin})),__webpack_require__.d(__webpack_exports__,"Hc",(function(){return getMinMetricAgg})),__webpack_require__.d(__webpack_exports__,"Db",(function(){return aggMovingAvgFnName})),__webpack_require__.d(__webpack_exports__,"Cb",(function(){return aggMovingAvg})),__webpack_require__.d(__webpack_exports__,"Ic",(function(){return getMovingAvgMetricAgg})),__webpack_require__.d(__webpack_exports__,"Fb",(function(){return aggPercentileRanksFnName})),__webpack_require__.d(__webpack_exports__,"Eb",(function(){return aggPercentileRanks})),__webpack_require__.d(__webpack_exports__,"Kc",(function(){return getPercentileRanksMetricAgg})),__webpack_require__.d(__webpack_exports__,"Hb",(function(){return aggPercentilesFnName})),__webpack_require__.d(__webpack_exports__,"Gb",(function(){return aggPercentiles})),__webpack_require__.d(__webpack_exports__,"Lc",(function(){return getPercentilesMetricAgg})),__webpack_require__.d(__webpack_exports__,"Lb",(function(){return aggSerialDiffFnName})),__webpack_require__.d(__webpack_exports__,"Kb",(function(){return aggSerialDiff})),__webpack_require__.d(__webpack_exports__,"Nc",(function(){return getSerialDiffMetricAgg})),__webpack_require__.d(__webpack_exports__,"Rb",(function(){return aggStdDeviationFnName})),__webpack_require__.d(__webpack_exports__,"Qb",(function(){return aggStdDeviation})),__webpack_require__.d(__webpack_exports__,"Qc",(function(){return getStdDeviationMetricAgg})),__webpack_require__.d(__webpack_exports__,"Tb",(function(){return aggSumFnName})),__webpack_require__.d(__webpack_exports__,"Sb",(function(){return aggSum})),__webpack_require__.d(__webpack_exports__,"Rc",(function(){return getSumMetricAgg})),__webpack_require__.d(__webpack_exports__,"Xb",(function(){return aggTopHitFnName})),__webpack_require__.d(__webpack_exports__,"Wb",(function(){return aggTopHit})),__webpack_require__.d(__webpack_exports__,"Tc",(function(){return getTopHitMetricAgg})),__webpack_require__.d(__webpack_exports__,"h",(function(){return param_types_agg.a})),__webpack_require__.d(__webpack_exports__,"m",(function(){return base.a})),__webpack_require__.d(__webpack_exports__,"r",(function(){return param_types_field.a})),__webpack_require__.d(__webpack_exports__,"C",(function(){return json.a})),__webpack_require__.d(__webpack_exports__,"F",(function(){return optioned.a})),__webpack_require__.d(__webpack_exports__,"H",(function(){return string.a})),__webpack_require__.d(__webpack_exports__,"s",(function(){return agg_config.IAggConfig})),__webpack_require__.d(__webpack_exports__,"b",(function(){return agg_config.AggConfigSerialized})),__webpack_require__.d(__webpack_exports__,"p",(function(){})),__webpack_require__.d(__webpack_exports__,"t",(function(){})),__webpack_require__.d(__webpack_exports__,"u",(function(){return agg_type.IAggType})),__webpack_require__.d(__webpack_exports__,"f",(function(){return agg_params.AggParam})),__webpack_require__.d(__webpack_exports__,"g",(function(){return agg_params.AggParamOption})),__webpack_require__.d(__webpack_exports__,"v",(function(){})),__webpack_require__.d(__webpack_exports__,"w",(function(){})),__webpack_require__.d(__webpack_exports__,"q",(function(){return date_range.DateRangeKey})),__webpack_require__.d(__webpack_exports__,"A",(function(){return ip_range.IpRangeKey})),__webpack_require__.d(__webpack_exports__,"G",(function(){return optioned.OptionedValueProp})),__webpack_require__.d(__webpack_exports__,"nc",(function(){return utils.e})),__webpack_require__.d(__webpack_exports__,"Jc",(function(){return utils.h})),__webpack_require__.d(__webpack_exports__,"sc",(function(){return utils.f})),__webpack_require__.d(__webpack_exports__,"fc",(function(){return utils.d})),__webpack_require__.d(__webpack_exports__,"y",(function(){return utils.a})),__webpack_require__.d(__webpack_exports__,"z",(function(){return utils.b})),__webpack_require__.d(__webpack_exports__,"ed",(function(){return utils.j})),__webpack_require__.d(__webpack_exports__,"fd",(function(){return utils.k})),__webpack_require__.d(__webpack_exports__,"od",(function(){return utils.o})),__webpack_require__.d(__webpack_exports__,"kd",(function(){return utils.m})),__webpack_require__.d(__webpack_exports__,"jd",(function(){return utils.l})),__webpack_require__.d(__webpack_exports__,"qd",(function(){return utils.p})),__webpack_require__.d(__webpack_exports__,"yc",(function(){return utils.g})),__webpack_require__.d(__webpack_exports__,"B",(function(){return utils.c})),__webpack_require__.d(__webpack_exports__,"ld",(function(){return utils.n})),__webpack_require__.d(__webpack_exports__,"rd",(function(){return utils.q})),__webpack_require__.d(__webpack_exports__,"Uc",(function(){return utils.i}));var agg_config=__webpack_require__(31),external_kbnSharedDeps_Lodash_=__webpack_require__(2),external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_),external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);const AggGroupNames=Object.freeze({Buckets:"buckets",Metrics:"metrics",None:"none"}),AggGroupLabels={[AggGroupNames.Buckets]:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.aggGroups.bucketsText",{defaultMessage:"Buckets"}),[AggGroupNames.Metrics]:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.aggGroups.metricsText",{defaultMessage:"Metrics"}),[AggGroupNames.None]:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.aggGroups.noneText",{defaultMessage:"None"})};function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function parseParentAggs(dslLvlCursor,dsl){dsl.parentAggs&&external_kbnSharedDeps_Lodash_default.a.each(dsl.parentAggs,(agg,key)=>{dslLvlCursor[key]=agg,parseParentAggs(dslLvlCursor,agg)})}class agg_configs_AggConfigs{constructor(indexPattern,configStates=[],opts){_defineProperty(this,"indexPattern",void 0),_defineProperty(this,"timeRange",void 0),_defineProperty(this,"timeFields",void 0),_defineProperty(this,"hierarchical",!1),_defineProperty(this,"typesRegistry",void 0),_defineProperty(this,"aggs",void 0),_defineProperty(this,"createAggConfig",(params,{addToAggConfigs:addToAggConfigs=!0}={})=>{const{type:type}=params,getType=t=>{const typeFromRegistry=this.typesRegistry.get(t);if(!typeFromRegistry)throw new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.error.aggNotFound",{defaultMessage:'Unable to find a registered agg type for "{type}".',values:{type:type}}));return typeFromRegistry};let aggConfig;return params instanceof agg_config.a?(aggConfig=params,params.parent=this):aggConfig=new agg_config.a(this,{...params,type:"string"==typeof type?getType(type):type}),addToAggConfigs&&this.aggs.push(aggConfig),aggConfig}),this.typesRegistry=opts.typesRegistry,configStates=agg_config.a.ensureIds(configStates),this.aggs=[],this.indexPattern=indexPattern,this.hierarchical=opts.hierarchical,configStates.forEach(params=>this.createAggConfig(params))}setTimeFields(timeFields){this.timeFields=timeFields}setTimeRange(timeRange){this.timeRange=timeRange;const updateAggTimeRange=agg=>{external_kbnSharedDeps_Lodash_default.a.each(agg.params,param=>{param instanceof agg_config.a&&updateAggTimeRange(param)}),"date_histogram"===external_kbnSharedDeps_Lodash_default.a.get(agg,"type.name")&&(agg.params.timeRange=timeRange)};this.aggs.forEach(updateAggTimeRange)}clone({enabledOnly:enabledOnly=!0}={}){return new agg_configs_AggConfigs(this.indexPattern,this.aggs.filter(agg=>!enabledOnly||agg.enabled),{typesRegistry:this.typesRegistry})}jsonDataEquals(aggConfigs){if(aggConfigs.length!==this.aggs.length)return!1;for(let i=0;i<this.aggs.length;i+=1)if(!external_kbnSharedDeps_Lodash_default.a.isEqual(aggConfigs[i].toJSON(),this.aggs[i].toJSON()))return!1;return!0}toDsl(){const dslTopLvl={};let dslLvlCursor,nestedMetrics;return this.hierarchical&&(nestedMetrics=this.aggs.filter((function(agg){return"metrics"===agg.type.type&&"count"!==agg.type.name})).map(agg=>({config:agg,dsl:agg.toDsl(this)}))),this.getRequestAggs().filter(config=>!config.type.hasNoDsl).forEach((config,i,list)=>{if(dslLvlCursor){const prevConfig=list[i-1],prevDsl=dslLvlCursor[prevConfig.id];dslLvlCursor=(null==prevDsl?void 0:prevDsl.aggs)||dslLvlCursor}else dslLvlCursor=dslTopLvl;const dsl=config.type.hasNoDslParams?config.toDsl(this):dslLvlCursor[config.id]=config.toDsl(this);let subAggs;parseParentAggs(dslLvlCursor,dsl),config.type.type===AggGroupNames.Buckets&&i<list.length-1&&(subAggs=dsl.aggs||(dsl.aggs={})),subAggs&&external_kbnSharedDeps_Lodash_default.a.each(subAggs,agg=>{parseParentAggs(subAggs,agg)}),subAggs&&nestedMetrics&&nestedMetrics.forEach(agg=>{subAggs[agg.config.id]=agg.dsl,agg.dsl.parentAggs&&Object.entries(agg.dsl.parentAggs).forEach(([parentAggId,parentAgg])=>{subAggs[parentAggId]=parentAgg})})}),function removeParentAggs(obj){for(const prop in obj)if("parentAggs"===prop)delete obj[prop];else if("object"==typeof obj[prop]){const hasParentAggsKey="parentAggs"in obj[prop];removeParentAggs(obj[prop]),hasParentAggsKey&&0===Object.keys(obj[prop]).length&&delete obj[prop]}}(dslTopLvl),dslTopLvl}getAll(){return[...this.aggs]}byIndex(index){return this.aggs[index]}byId(id){return this.aggs.find(agg=>agg.id===id)}byName(name){return this.aggs.filter(agg=>{var _agg$type;return(null===(_agg$type=agg.type)||void 0===_agg$type?void 0:_agg$type.name)===name})}byType(type){return this.aggs.filter(agg=>{var _agg$type2;return(null===(_agg$type2=agg.type)||void 0===_agg$type2?void 0:_agg$type2.type)===type})}byTypeName(type){return this.byName(type)}bySchemaName(schema){return this.aggs.filter(agg=>agg.schema===schema)}getRequestAggs(){const aggregations=this.aggs.filter(agg=>agg.enabled&&agg.type).reduce((requestValuesAggs,agg)=>{const aggs=agg.getRequestAggs();return aggs?requestValuesAggs.concat(aggs):requestValuesAggs},[]);return external_kbnSharedDeps_Lodash_default.a.sortBy(aggregations,agg=>agg.type.type===AggGroupNames.Metrics?1:0)}getRequestAggById(id){return this.aggs.find(agg=>agg.id===id)}getResponseAggs(){return this.getRequestAggs().reduce((function(responseValuesAggs,agg){const aggs=agg.getResponseAggs();return aggs?responseValuesAggs.concat(aggs):responseValuesAggs}),[])}getResponseAggById(id){id=String(id);const reqAgg=external_kbnSharedDeps_Lodash_default.a.find(this.getRequestAggs(),(function(agg){return id.substr(0,String(agg.id).length)===agg.id}));if(reqAgg)return external_kbnSharedDeps_Lodash_default.a.find(reqAgg.getResponseAggs(),{id:id})}onSearchRequestStart(searchSource,options){return Promise.all(this.getRequestAggs().map(agg=>agg.onSearchRequestStart(searchSource,options)))}}var agg_type=__webpack_require__(40),_interval_options=__webpack_require__(22),bucket_agg_type=__webpack_require__(17),bucket_agg_types=__webpack_require__(14);const getParsedValue=(data,key)=>{try{return data[key]?JSON.parse(data[key]):void 0}catch(e){throw new Error(`Unable to parse ${key} argument string`)}},aggDateHistogramFnName="aggDateHistogram",aggDateHistogram=()=>({name:aggDateHistogramFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.buckets.dateHistogram.help",{defaultMessage:"Generates a serialized agg config for a Histogram agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateHistogram.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateHistogram.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateHistogram.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateHistogram.field.help",{defaultMessage:"Field to use for this aggregation"})},useNormalizedEsInterval:{types:["boolean"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateHistogram.useNormalizedEsInterval.help",{defaultMessage:"Specifies whether to use useNormalizedEsInterval for this aggregation"})},time_zone:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateHistogram.timeZone.help",{defaultMessage:"Time zone to use for this aggregation"})},format:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateHistogram.format.help",{defaultMessage:"Format to use for this aggregation"})},scaleMetricValues:{types:["boolean"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateHistogram.scaleMetricValues.help",{defaultMessage:"Specifies whether to use scaleMetricValues for this aggregation"})},interval:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateHistogram.interval.help",{defaultMessage:"Interval to use for this aggregation"})},timeRange:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateHistogram.timeRange.help",{defaultMessage:"Time Range to use for this aggregation"})},min_doc_count:{types:["number"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateHistogram.minDocCount.help",{defaultMessage:"Minimum document count to use for this aggregation"})},drop_partials:{types:["boolean"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateHistogram.dropPartials.help",{defaultMessage:"Specifies whether to use drop_partials for this aggregation"})},extended_bounds:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateHistogram.extendedBounds.help",{defaultMessage:'With extended_bounds setting, you now can "force" the histogram aggregation to start building buckets on a specific min value and also keep on building buckets up to a max value '})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateHistogram.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateHistogram.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:bucket_agg_types.a.DATE_HISTOGRAM,params:{...rest,timeRange:getParsedValue(args,"timeRange"),extended_bounds:getParsedValue(args,"extended_bounds")}}}}});var external_kbnSharedDeps_MomentTimezone_=__webpack_require__(42),external_kbnSharedDeps_MomentTimezone_default=__webpack_require__.n(external_kbnSharedDeps_MomentTimezone_),common=__webpack_require__(1),external_kbnSharedDeps_Moment_=__webpack_require__(5),external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);const createFilterDateHistogram=(agg,key)=>{const start=external_kbnSharedDeps_Moment_default()(key),interval=agg.buckets.getInterval();return Object(common.buildRangeFilter)(agg.params.field,{gte:start.toISOString(),lt:start.add(interval).toISOString(),format:"strict_date_optional_time"},agg.getIndexPattern())};var time_buckets=__webpack_require__(93),agg_params=__webpack_require__(37);let METRIC_TYPES;function metric_agg_type_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}!function(METRIC_TYPES){METRIC_TYPES.AVG="avg",METRIC_TYPES.FILTERED_METRIC="filtered_metric",METRIC_TYPES.CARDINALITY="cardinality",METRIC_TYPES.AVG_BUCKET="avg_bucket",METRIC_TYPES.MAX_BUCKET="max_bucket",METRIC_TYPES.MIN_BUCKET="min_bucket",METRIC_TYPES.SUM_BUCKET="sum_bucket",METRIC_TYPES.COUNT="count",METRIC_TYPES.CUMULATIVE_SUM="cumulative_sum",METRIC_TYPES.DERIVATIVE="derivative",METRIC_TYPES.GEO_BOUNDS="geo_bounds",METRIC_TYPES.GEO_CENTROID="geo_centroid",METRIC_TYPES.MEDIAN="median",METRIC_TYPES.SINGLE_PERCENTILE="single_percentile",METRIC_TYPES.MIN="min",METRIC_TYPES.MAX="max",METRIC_TYPES.MOVING_FN="moving_avg",METRIC_TYPES.SERIAL_DIFF="serial_diff",METRIC_TYPES.SUM="sum",METRIC_TYPES.TOP_HITS="top_hits",METRIC_TYPES.PERCENTILES="percentiles",METRIC_TYPES.PERCENTILE_RANKS="percentile_ranks",METRIC_TYPES.STD_DEV="std_dev"}(METRIC_TYPES||(METRIC_TYPES={}));class metric_agg_type_MetricAggType extends agg_type.a{constructor(config){super(config),metric_agg_type_defineProperty(this,"subtype",void 0),metric_agg_type_defineProperty(this,"isScalable",void 0),metric_agg_type_defineProperty(this,"type","metrics"),metric_agg_type_defineProperty(this,"getKey",()=>{}),this.getValue=config.getValue||((agg,bucket)=>{const isSettableToZero=[METRIC_TYPES.CARDINALITY,METRIC_TYPES.SUM].includes(agg.type.name);return!bucket[agg.id]&&isSettableToZero?0:bucket[agg.id]&&bucket[agg.id].value}),this.subtype=config.subtype||external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.metricAggregationsSubtypeTitle",{defaultMessage:"Metric Aggregations"}),this.isScalable=config.isScalable||(()=>!1)}}function isMetricAggType(aggConfig){return aggConfig&&"metrics"===aggConfig.type}var utils=__webpack_require__(21);const updateTimeBuckets=(agg,calculateBounds,customBuckets)=>{const bounds=agg.params.timeRange&&(agg.fieldIsTimeField()||Object(_interval_options.c)(agg.params.interval))?calculateBounds(agg.params.timeRange):void 0,buckets=customBuckets||agg.buckets;buckets.setBounds(bounds),buckets.setInterval(agg.params.interval)};function isDateHistogramBucketAggConfig(agg){return Boolean(agg.buckets)}const getDateHistogramBucketAgg=({calculateBounds:calculateBounds,isDefaultTimezone:isDefaultTimezone,getConfig:getConfig})=>new bucket_agg_type.a({name:bucket_agg_types.a.DATE_HISTOGRAM,expressionName:aggDateHistogramFnName,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateHistogramTitle",{defaultMessage:"Date Histogram"}),ordered:{date:!0},makeLabel(agg){let output={};this.params&&(output=Object(agg_params.d)(this.params,agg));const field=agg.getFieldDisplayName();return external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateHistogramLabel",{defaultMessage:"{fieldName} per {intervalDescription}",values:{fieldName:field,intervalDescription:output.metricScaleText||output.bucketInterval.description}})},createFilter:createFilterDateHistogram,decorateAggConfig(){let buckets;return{buckets:{configurable:!0,get(){return buckets||(buckets=new time_buckets.a({"histogram:maxBars":getConfig(common.UI_SETTINGS.HISTOGRAM_MAX_BARS),"histogram:barTarget":getConfig(common.UI_SETTINGS.HISTOGRAM_BAR_TARGET),dateFormat:getConfig("dateFormat"),"dateFormat:scaled":getConfig("dateFormat:scaled")}),updateTimeBuckets(this,calculateBounds,buckets),buckets)}}}},getSerializedFormat:agg=>({id:"date",params:{pattern:agg.buckets.getScaledDateFormat()}}),params:[{name:"field",type:"field",filterFieldTypes:[common.KBN_FIELD_TYPES.DATE,common.KBN_FIELD_TYPES.DATE_RANGE],default(agg){var _agg$getIndexPattern$,_agg$getIndexPattern,_agg$getIndexPattern$2;return null===(_agg$getIndexPattern$=(_agg$getIndexPattern=agg.getIndexPattern()).getTimeField)||void 0===_agg$getIndexPattern$||null===(_agg$getIndexPattern$2=_agg$getIndexPattern$.call(_agg$getIndexPattern))||void 0===_agg$getIndexPattern$2?void 0:_agg$getIndexPattern$2.name},onChange(agg){Object(_interval_options.c)(Object(external_kbnSharedDeps_Lodash_.get)(agg,"params.interval"))&&!agg.fieldIsTimeField()&&delete agg.params.interval}},{name:"timeRange",default:null,write:external_kbnSharedDeps_Lodash_.noop},{name:"useNormalizedEsInterval",default:!0,write:external_kbnSharedDeps_Lodash_.noop},{name:"scaleMetricValues",default:!1,write:external_kbnSharedDeps_Lodash_.noop,advanced:!0},{name:"interval",deserialize(state,agg){if("custom"===state)return Object(external_kbnSharedDeps_Lodash_.get)(agg,"params.customInterval");return Object(external_kbnSharedDeps_Lodash_.find)(_interval_options.b,{val:state})||"year"!==state?state:"y"},default:_interval_options.a,options:_interval_options.b,write(agg,output,aggs){updateTimeBuckets(agg,calculateBounds);const{useNormalizedEsInterval:useNormalizedEsInterval,scaleMetricValues:scaleMetricValues}=agg.params,interval=agg.buckets.getInterval(useNormalizedEsInterval);if(output.bucketInterval=interval,"0ms"===interval.expression)return;output.params={...output.params,...Object(utils.d)(interval.expression)};if(scaleMetricValues&&interval.scaled&&interval.scale&&interval.scale<1&&aggs){const metrics=aggs.aggs.filter(a=>isMetricAggType(a.type));var _interval$preScaled;if(Object(external_kbnSharedDeps_Lodash_.every)(metrics,a=>{const{type:type}=a;if(isMetricAggType(type))return type.isScalable()}))output.metricScale=interval.scale,output.metricScaleText=(null===(_interval$preScaled=interval.preScaled)||void 0===_interval$preScaled?void 0:_interval$preScaled.description)||""}}},{name:"used_interval",default:_interval_options.a,shouldShow:()=>!1,write:()=>{},serialize(val,agg){if(!agg)return;const{useNormalizedEsInterval:useNormalizedEsInterval}=agg.params;return agg.buckets.getInterval(useNormalizedEsInterval).expression},toExpressionAst:()=>{}},{name:"time_zone",default:void 0,serialize:external_kbnSharedDeps_Lodash_.noop,write(agg,output){const tz=Object(utils.i)(agg.params,agg.getIndexPattern(),isDefaultTimezone,getConfig);output.params.time_zone=tz}},{name:"used_timezone",shouldShow:()=>!1,write:()=>{},serialize(val,agg){if(agg)return Object(utils.i)(agg.params,agg.getIndexPattern(),isDefaultTimezone,getConfig)},toExpressionAst:()=>{}},{name:"drop_partials",default:!1,write:external_kbnSharedDeps_Lodash_.noop,shouldShow:agg=>{const field=agg.params.field;return field&&field.name&&field.name===agg.getIndexPattern().timeFieldName}},{name:"format"},{name:"min_doc_count",default:1},{name:"extended_bounds",default:{},write(agg,output){const val=agg.params.extended_bounds;null==val.min&&null==val.max||(output.params.extended_bounds={min:external_kbnSharedDeps_MomentTimezone_default()(val.min).valueOf(),max:external_kbnSharedDeps_MomentTimezone_default()(val.max).valueOf()})}}]}),aggDateRangeFnName="aggDateRange",aggDateRange=()=>({name:aggDateRangeFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.buckets.dateRange.help",{defaultMessage:"Generates a serialized agg config for a Date Range agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateRange.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateRange.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateRange.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateRange.field.help",{defaultMessage:"Field to use for this aggregation"})},ranges:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateRange.ranges.help",{defaultMessage:"Serialized ranges to use for this aggregation."})},time_zone:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateRange.timeZone.help",{defaultMessage:"Time zone to use for this aggregation."})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateRange.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateRange.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:bucket_agg_types.a.DATE_RANGE,params:{...rest,ranges:getParsedValue(args,"ranges")}}}}}),createFilterDateRange=(agg,{from:from,to:to})=>{const filter={};return from&&(filter.gte=external_kbnSharedDeps_Moment_default()(from).toISOString()),to&&(filter.lt=external_kbnSharedDeps_Moment_default()(to).toISOString()),to&&from&&(filter.format="strict_date_optional_time"),Object(common.buildRangeFilter)(agg.params.field,filter,agg.getIndexPattern())};var types=__webpack_require__(4);const dateRangeTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.dateRangeTitle",{defaultMessage:"Date Range"}),getDateRangeBucketAgg=({isDefaultTimezone:isDefaultTimezone,getConfig:getConfig})=>new bucket_agg_type.a({name:bucket_agg_types.a.DATE_RANGE,expressionName:aggDateRangeFnName,title:dateRangeTitle,createFilter:createFilterDateRange,getKey:({from:from,to:to})=>({from:from,to:to}),getSerializedFormat:agg=>({id:"date_range",params:agg.params.field?agg.aggConfigs.indexPattern.getFormatterForField(agg.params.field).toJSON():{}}),makeLabel:aggConfig=>aggConfig.getFieldDisplayName()+" date ranges",params:[{name:"field",type:"field",filterFieldTypes:[types.b.DATE,types.b.DATE_RANGE],default:agg=>agg.getIndexPattern().timeFieldName},{name:"ranges",default:[{from:"now-1w/w",to:"now"}]},{name:"time_zone",default:void 0,serialize:()=>{},write:(agg,output)=>{const field=agg.getParam("field");let tz=agg.getParam("time_zone");if(!tz&&field&&(tz=Object(external_kbnSharedDeps_Lodash_.get)(agg.getIndexPattern(),["typeMeta","aggs","date_range",field.name,"time_zone"])),!tz){const detectedTimezone=external_kbnSharedDeps_MomentTimezone_default.a.tz.guess(),tzOffset=external_kbnSharedDeps_MomentTimezone_default()().format("Z");tz=isDefaultTimezone()?detectedTimezone||tzOffset:getConfig("dateFormat:tz")}output.params.time_zone=tz}}]}),aggFilterFnName="aggFilter",aggFilter=()=>({name:aggFilterFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.buckets.filter.help",{defaultMessage:"Generates a serialized agg config for a Filter agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.filter.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.filter.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.filter.schema.help",{defaultMessage:"Schema to use for this aggregation"})},geo_bounding_box:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.filter.geoBoundingBox.help",{defaultMessage:"Filter results based on a point location within a bounding box"})},filter:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.filter.filter.help",{defaultMessage:"Filter results based on a kql or lucene query. Do not use together with geo_bounding_box"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.filter.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.filter.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args,geoBoundingBox=getParsedValue(args,"geo_bounding_box"),filter=getParsedValue(args,"filter");if(geoBoundingBox&&filter)throw new Error("filter and geo_bounding_box can't be used together");return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:bucket_agg_types.a.FILTER,params:{...rest,geo_bounding_box:geoBoundingBox,filter:filter}}}}});var es_query=__webpack_require__(60);const filterTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.filterTitle",{defaultMessage:"Filter"}),getFilterBucketAgg=({getConfig:getConfig})=>new bucket_agg_type.a({name:bucket_agg_types.a.FILTER,expressionName:aggFilterFnName,title:filterTitle,makeLabel:()=>filterTitle,params:[{name:"geo_bounding_box"},{name:"filter",write(aggConfig,output){const filter=aggConfig.params.filter,input=Object(external_kbnSharedDeps_Lodash_.cloneDeep)(filter);if(!input)return;const esQueryConfigs=Object(es_query.getEsQueryConfig)({get:getConfig}),query=Object(es_query.buildEsQuery)(aggConfig.getIndexPattern(),[input],[],esQueryConfigs);query?output.params=query:console.log('malformed filter agg params, missing "query" on input')}}]}),aggFiltersFnName="aggFilters",aggFilters=()=>({name:aggFiltersFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.buckets.filters.help",{defaultMessage:"Generates a serialized agg config for a Filter agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.filters.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.filters.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.filters.schema.help",{defaultMessage:"Schema to use for this aggregation"})},filters:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.filters.filters.help",{defaultMessage:"Filters to use for this aggregation"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.filters.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:bucket_agg_types.a.FILTERS,params:{...rest,filters:getParsedValue(args,"filters")}}}}}),createFilterFilters=(aggConfig,key)=>{const filter=Object(external_kbnSharedDeps_Lodash_.get)(aggConfig.toDsl(),"filters.filters")[key],indexPattern=aggConfig.getIndexPattern();if(filter&&indexPattern&&indexPattern.id)return Object(common.buildQueryFilter)(filter,indexPattern.id,key)},filtersTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.filtersTitle",{defaultMessage:"Filters",description:"The name of an aggregation, that allows to specify multiple individual filters to group data by."}),getFiltersBucketAgg=({getConfig:getConfig})=>new bucket_agg_type.a({name:bucket_agg_types.a.FILTERS,expressionName:aggFiltersFnName,title:filtersTitle,createFilter:createFilterFilters,customLabels:!1,params:[{name:"filters",default:()=>[{input:{query:"",language:getConfig(common.UI_SETTINGS.SEARCH_QUERY_LANGUAGE)},label:""}],write(aggConfig,output){const inFilters=aggConfig.params.filters;if(!Object(external_kbnSharedDeps_Lodash_.size)(inFilters))return;const outFilters=Object(external_kbnSharedDeps_Lodash_.transform)(inFilters,(function(filters,filter){const input=Object(external_kbnSharedDeps_Lodash_.cloneDeep)(filter.input);if(!input)return void console.log('malformed filter agg params, missing "input" query');const esQueryConfigs=Object(common.getEsQueryConfig)({get:getConfig}),query=Object(common.buildEsQuery)(aggConfig.getIndexPattern(),[input],[],esQueryConfigs);if(!query)return void console.log('malformed filter agg params, missing "query" on input');const matchAllLabel=""===filter.input.query?"*":"";filters[filter.label||matchAllLabel||("string"==typeof filter.input.query?filter.input.query:Object(utils.q)(filter.input.query))]=query}),{});if(!Object(external_kbnSharedDeps_Lodash_.size)(outFilters))return;(output.params||(output.params={})).filters=outFilters}}]}),aggGeoHashFnName="aggGeoHash",aggGeoHash=()=>({name:aggGeoHashFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.buckets.geoHash.help",{defaultMessage:"Generates a serialized agg config for a Geo Hash agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.geoHash.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.geoHash.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.geoHash.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.geoHash.field.help",{defaultMessage:"Field to use for this aggregation"})},useGeocentroid:{types:["boolean"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.geoHash.useGeocentroid.help",{defaultMessage:"Specifies whether to use geocentroid for this aggregation"})},autoPrecision:{types:["boolean"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.geoHash.autoPrecision.help",{defaultMessage:"Specifies whether to use auto precision for this aggregation"})},isFilteredByCollar:{types:["boolean"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.geoHash.isFilteredByCollar.help",{defaultMessage:"Specifies whether to filter by collar"})},boundingBox:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.geoHash.boundingBox.help",{defaultMessage:"Filter results based on a point location within a bounding box"})},precision:{types:["number"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.geoHash.precision.help",{defaultMessage:"Precision to use for this aggregation."})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.geoHash.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.geoHash.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:bucket_agg_types.a.GEOHASH_GRID,params:{...rest,boundingBox:getParsedValue(args,"boundingBox")}}}}}),defaultBoundingBox={top_left:{lat:1,lon:1},bottom_right:{lat:0,lon:0}},geohashGridTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.geohashGridTitle",{defaultMessage:"Geohash"}),getGeoHashBucketAgg=()=>new bucket_agg_type.a({name:bucket_agg_types.a.GEOHASH_GRID,expressionName:aggGeoHashFnName,title:geohashGridTitle,makeLabel:()=>geohashGridTitle,params:[{name:"field",type:"field",filterFieldTypes:common.KBN_FIELD_TYPES.GEO_POINT},{name:"autoPrecision",default:!0,write:()=>{}},{name:"precision",default:2,write(aggConfig,output){output.params.precision=aggConfig.params.precision}},{name:"useGeocentroid",default:!0,write:()=>{}},{name:"isFilteredByCollar",default:!0,write:()=>{}},{name:"boundingBox",default:null,write:()=>{}}],getRequestAggs(agg){const aggs=[],params=agg.params;return params.isFilteredByCollar&&agg.getField()&&aggs.push(agg.aggConfigs.createAggConfig({type:"filter",id:"filter_agg",enabled:!0,params:{geo_bounding_box:{ignore_unmapped:!0,[agg.getField().name]:params.boundingBox||defaultBoundingBox}}},{addToAggConfigs:!1})),aggs.push(agg),params.useGeocentroid&&aggs.push(agg.aggConfigs.createAggConfig({type:"geo_centroid",enabled:!0,params:{field:agg.getField()}},{addToAggConfigs:!1})),aggs}}),aggGeoTileFnName="aggGeoTile",aggGeoTile=()=>({name:aggGeoTileFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.buckets.geoTile.help",{defaultMessage:"Generates a serialized agg config for a Geo Tile agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.geoTile.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.geoTile.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.geoTile.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.geoTile.field.help",{defaultMessage:"Field to use for this aggregation"})},useGeocentroid:{types:["boolean"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.geoTile.useGeocentroid.help",{defaultMessage:"Specifies whether to use geocentroid for this aggregation"})},precision:{types:["number"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.geoTile.precision.help",{defaultMessage:"Precision to use for this aggregation."})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.geoTile.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.geoTile.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:bucket_agg_types.a.GEOTILE_GRID,params:{...rest}}}}}),geotileGridTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.geotileGridTitle",{defaultMessage:"Geotile"}),getGeoTitleBucketAgg=()=>new bucket_agg_type.a({name:bucket_agg_types.a.GEOTILE_GRID,expressionName:aggGeoTileFnName,title:geotileGridTitle,params:[{name:"field",type:"field",filterFieldTypes:common.KBN_FIELD_TYPES.GEO_POINT},{name:"useGeocentroid",default:!0,write:external_kbnSharedDeps_Lodash_.noop},{name:"precision",default:0}],getRequestAggs(agg){const aggs=[],useGeocentroid=agg.getParam("useGeocentroid");if(aggs.push(agg),useGeocentroid){const aggConfig={type:METRIC_TYPES.GEO_CENTROID,enabled:!0,params:{field:agg.getField()}};aggs.push(agg.aggConfigs.createAggConfig(aggConfig,{addToAggConfigs:!1}))}return aggs}}),aggHistogramFnName="aggHistogram",aggHistogram=()=>({name:aggHistogramFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.buckets.histogram.help",{defaultMessage:"Generates a serialized agg config for a Histogram agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.histogram.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.histogram.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.histogram.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.histogram.field.help",{defaultMessage:"Field to use for this aggregation"})},interval:{types:["number","string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.histogram.interval.help",{defaultMessage:"Interval to use for this aggregation"})},intervalBase:{types:["number"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.histogram.intervalBase.help",{defaultMessage:"IntervalBase to use for this aggregation"})},min_doc_count:{types:["boolean"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.histogram.minDocCount.help",{defaultMessage:"Specifies whether to use min_doc_count for this aggregation"})},maxBars:{types:["number"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.histogram.maxBars.help",{defaultMessage:"Calculate interval to get approximately this many bars"})},has_extended_bounds:{types:["boolean"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.histogram.hasExtendedBounds.help",{defaultMessage:"Specifies whether to use has_extended_bounds for this aggregation"})},extended_bounds:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.histogram.extendedBounds.help",{defaultMessage:'With extended_bounds setting, you now can "force" the histogram aggregation to start building buckets on a specific min value and also keep on building buckets up to a max value '})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.histogram.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.histogram.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:bucket_agg_types.a.HISTOGRAM,params:{...rest,extended_bounds:getParsedValue(args,"extended_bounds")}}}}}),createFilterHistogram=getFieldFormatsStart=>(aggConfig,key)=>{const{deserialize:deserialize}=getFieldFormatsStart(),value=parseInt(key,10),params={gte:value,lt:value+aggConfig.params.interval};return Object(common.buildRangeFilter)(aggConfig.params.field,params,aggConfig.getIndexPattern(),deserialize(aggConfig.toSerializedFieldFormat()).convert(key))};var common_types=__webpack_require__(39);const calculateForGivenInterval=(diff,interval,maxBucketsUiSettings)=>{if(diff/interval>maxBucketsUiSettings){return(minInterval=>{const orderOfMagnitude=Math.pow(10,Math.floor(Math.log10(minInterval)));let interval=orderOfMagnitude;for(;interval<minInterval;)interval+=orderOfMagnitude;return interval})(diff/maxBucketsUiSettings)}return interval},calculateHistogramInterval=({interval:interval,maxBucketsUiSettings:maxBucketsUiSettings,maxBucketsUserInput:maxBucketsUserInput,intervalBase:intervalBase,values:values,esTypes:esTypes})=>{const isAuto=Object(_interval_options.c)(interval);let calculatedInterval=isAuto?0:"number"!=typeof interval?parseFloat(interval):interval;if(Number.isNaN(calculatedInterval))return calculatedInterval;if(values){const diff=values.max-values.min;diff&&(calculatedInterval=isAuto?((diff,maxBars,esTypes)=>{const exactInterval=diff/maxBars;if(diff<maxBars&&esTypes.every(esType=>[common_types.ES_FIELD_TYPES.INTEGER,common_types.ES_FIELD_TYPES.LONG,common_types.ES_FIELD_TYPES.SHORT,common_types.ES_FIELD_TYPES.BYTE].includes(esType)))return 1;const lowerPower=Math.pow(10,Math.floor(Math.log10(exactInterval))),autoBuckets=diff/lowerPower;return autoBuckets>maxBars?autoBuckets/2<=maxBars?2*lowerPower:autoBuckets/5<=maxBars?5*lowerPower:10*lowerPower:lowerPower})(diff,Math.min(maxBucketsUiSettings,maxBucketsUserInput||maxBucketsUiSettings),esTypes):calculateForGivenInterval(diff,calculatedInterval,maxBucketsUiSettings))}intervalBase&&(calculatedInterval<intervalBase?calculatedInterval=intervalBase:calculatedInterval%intervalBase!=0&&(calculatedInterval=Math.round(calculatedInterval/intervalBase)*intervalBase));return calculatedInterval||1},getHistogramBucketAgg=({getConfig:getConfig,getFieldFormatsStart:getFieldFormatsStart})=>new bucket_agg_type.a({name:bucket_agg_types.a.HISTOGRAM,expressionName:aggHistogramFnName,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.histogramTitle",{defaultMessage:"Histogram"}),ordered:{},makeLabel:aggConfig=>aggConfig.getFieldDisplayName(),createFilter:createFilterHistogram(getFieldFormatsStart),decorateAggConfig(){let autoBounds;return{setAutoBounds:{configurable:!0,value(newValue){autoBounds=newValue}},getAutoBounds:{configurable:!0,value:()=>autoBounds}}},params:[{name:"field",type:"field",filterFieldTypes:[common.KBN_FIELD_TYPES.NUMBER,common.KBN_FIELD_TYPES.NUMBER_RANGE]},{name:"intervalBase",default:null,write:()=>{}},{name:"interval",default:_interval_options.a,modifyAggConfigOnSearchRequestStart(aggConfig,searchSource,options){const field=aggConfig.getField();if("number_range"===(null==field?void 0:field.type))return;const aggBody=field.scripted?{script:{source:field.script,lang:field.lang}}:{field:field.name};return searchSource.createChild().setField("size",0).setField("aggs",{maxAgg:{max:aggBody},minAgg:{min:aggBody}}).fetch(options).then(resp=>{var _resp$aggregations$mi,_resp$aggregations,_resp$aggregations$mi2,_resp$aggregations$ma,_resp$aggregations2,_resp$aggregations2$m;const min=null!==(_resp$aggregations$mi=null===(_resp$aggregations=resp.aggregations)||void 0===_resp$aggregations||null===(_resp$aggregations$mi2=_resp$aggregations.minAgg)||void 0===_resp$aggregations$mi2?void 0:_resp$aggregations$mi2.value)&&void 0!==_resp$aggregations$mi?_resp$aggregations$mi:0,max=null!==(_resp$aggregations$ma=null===(_resp$aggregations2=resp.aggregations)||void 0===_resp$aggregations2||null===(_resp$aggregations2$m=_resp$aggregations2.maxAgg)||void 0===_resp$aggregations2$m?void 0:_resp$aggregations2$m.value)&&void 0!==_resp$aggregations$ma?_resp$aggregations$ma:0;aggConfig.setAutoBounds({min:min,max:max})}).catch(e=>{if("AbortError"!==e.name)throw new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.histogram.missingMaxMinValuesWarning",{defaultMessage:"Unable to retrieve max and min values to auto-scale histogram buckets. This may lead to poor visualization performance."}))})},write(aggConfig,output){output.params.interval=calculateInterval(aggConfig,getConfig)}},{name:"used_interval",default:_interval_options.a,shouldShow:()=>!1,write:()=>{},serialize(val,aggConfig){if(aggConfig)return calculateInterval(aggConfig,getConfig)},toExpressionAst:()=>{}},{name:"maxBars",shouldShow(agg){const field=agg.getField();return"number_range"!==(null==field?void 0:field.type)&&Object(_interval_options.c)(Object(external_kbnSharedDeps_Lodash_.get)(agg,"params.interval"))},write:()=>{}},{name:"min_doc_count",default:!1,write(aggConfig,output){aggConfig.params.min_doc_count?output.params.min_doc_count=0:output.params.min_doc_count=1}},{name:"has_extended_bounds",default:!1,write:()=>{}},{name:"extended_bounds",default:{min:"",max:""},write(aggConfig,output){const{min:min,max:max}=aggConfig.params.extended_bounds;!aggConfig.params.has_extended_bounds||!min&&0!==min||!max&&0!==max||(output.params.extended_bounds={min:min,max:max})},shouldShow:aggConfig=>aggConfig.params.has_extended_bounds}]});function calculateInterval(aggConfig,getConfig){var _aggConfig$params$fie,_aggConfig$params$fie2;const values=aggConfig.getAutoBounds();return calculateHistogramInterval({values:values,interval:aggConfig.params.interval,maxBucketsUiSettings:getConfig(common.UI_SETTINGS.HISTOGRAM_MAX_BARS),maxBucketsUserInput:aggConfig.params.maxBars,intervalBase:aggConfig.params.intervalBase,esTypes:(null===(_aggConfig$params$fie=aggConfig.params.field)||void 0===_aggConfig$params$fie||null===(_aggConfig$params$fie2=_aggConfig$params$fie.spec)||void 0===_aggConfig$params$fie2?void 0:_aggConfig$params$fie2.esTypes)||[]})}const aggIpRangeFnName="aggIpRange",aggIpRange=()=>({name:aggIpRangeFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.buckets.ipRange.help",{defaultMessage:"Generates a serialized agg config for a Ip Range agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.ipRange.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.ipRange.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.ipRange.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.ipRange.field.help",{defaultMessage:"Field to use for this aggregation"})},ipRangeType:{types:["string"],options:["mask","fromTo"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.ipRange.ipRangeType.help",{defaultMessage:"IP range type to use for this aggregation. Takes one of the following values: mask, fromTo."})},ranges:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.ipRange.ranges.help",{defaultMessage:"Serialized ranges to use for this aggregation."})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.ipRange.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.ipRange.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:bucket_agg_types.a.IP_RANGE,params:{...rest,ranges:getParsedValue(args,"ranges")}}}}});function cidr_mask_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function throwError(mask){throw Error("Invalid CIDR mask: "+mask)}class cidr_mask_CidrMask{constructor(mask){cidr_mask_defineProperty(this,"initialAddress",void 0),cidr_mask_defineProperty(this,"prefixLength",void 0);const splits=mask.split("/");2!==splits.length&&throwError(mask),this.initialAddress=new utils.c(splits[0]),this.prefixLength=Number(splits[1]),(isNaN(this.prefixLength)||this.prefixLength<1||this.prefixLength>32)&&throwError(mask)}getRange(){const variableBits=32-this.prefixLength,fromAddress=this.initialAddress.valueOf()>>variableBits<<variableBits>>>0,numAddresses=Math.pow(2,variableBits);return{from:new utils.c(fromAddress).toString(),to:new utils.c(fromAddress+numAddresses-1).toString()}}toString(){return this.initialAddress.toString()+"/"+this.prefixLength}}const createFilterIpRange=(aggConfig,key)=>{let range;return range="mask"===key.type?new cidr_mask_CidrMask(key.mask).getRange():{from:key.from?key.from:-1/0,to:key.to?key.to:1/0},Object(common.buildRangeFilter)(aggConfig.params.field,{gte:range.from,lte:range.to},aggConfig.getIndexPattern())},ipRangeTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.ipRangeTitle",{defaultMessage:"IPv4 Range"});let IP_RANGE_TYPES;!function(IP_RANGE_TYPES){IP_RANGE_TYPES.FROM_TO="fromTo",IP_RANGE_TYPES.MASK="mask"}(IP_RANGE_TYPES||(IP_RANGE_TYPES={}));const getIpRangeBucketAgg=()=>new bucket_agg_type.a({name:bucket_agg_types.a.IP_RANGE,expressionName:aggIpRangeFnName,title:ipRangeTitle,createFilter:createFilterIpRange,getKey:(bucket,key,agg)=>agg.params.ipRangeType===IP_RANGE_TYPES.MASK?{type:"mask",mask:key}:{type:"range",from:bucket.from,to:bucket.to},getSerializedFormat:agg=>({id:"ip_range",params:agg.params.field?agg.aggConfigs.indexPattern.getFormatterForField(agg.params.field).toJSON():{}}),makeLabel:aggConfig=>external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.ipRangeLabel",{defaultMessage:"{fieldName} IP ranges",values:{fieldName:aggConfig.getFieldDisplayName()}}),params:[{name:"field",type:"field",filterFieldTypes:common.KBN_FIELD_TYPES.IP},{name:"ipRangeType",default:IP_RANGE_TYPES.FROM_TO,write:external_kbnSharedDeps_Lodash_.noop},{name:"ranges",default:{fromTo:[{from:"0.0.0.0",to:"127.255.255.255"},{from:"128.0.0.0",to:"191.255.255.255"}],mask:[{mask:"0.0.0.0/1"},{mask:"128.0.0.0/2"}]},write(aggConfig,output){const ipRangeType=aggConfig.params.ipRangeType;let ranges=aggConfig.params.ranges[ipRangeType];ipRangeType===IP_RANGE_TYPES.FROM_TO&&(ranges=Object(external_kbnSharedDeps_Lodash_.map)(ranges,range=>Object(external_kbnSharedDeps_Lodash_.omitBy)(range,external_kbnSharedDeps_Lodash_.isNull))),output.params.ranges=ranges}}]});var date_range=__webpack_require__(49),ip_range=__webpack_require__(50),calc_auto_interval=__webpack_require__(68);const isType=(...types)=>agg=>{const field=agg.params.field;return types.some(type=>field&&field.type===type)},isNumberType=isType("number"),isStringType=isType("string"),isStringOrNumberType=isType("string","number"),migrateIncludeExcludeFormat={serialize(value,agg){if(!this.shouldShow||this.shouldShow(agg))return!value||Object(external_kbnSharedDeps_Lodash_.isString)(value)||Array.isArray(value)?value:value.pattern},write(aggConfig,output){const value=aggConfig.getParam(this.name);if(Array.isArray(value)&&value.length>0&&isNumberType(aggConfig)){const parsedValue=value.filter(val=>Number.isFinite(val));parsedValue.length&&(output.params[this.name]=parsedValue)}else Object(external_kbnSharedDeps_Lodash_.isObject)(value)?output.params[this.name]=value.pattern:value&&isStringType(aggConfig)&&(output.params[this.name]=value)}},aggRangeFnName="aggRange",aggRange=()=>({name:aggRangeFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.buckets.range.help",{defaultMessage:"Generates a serialized agg config for a Range agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.range.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.range.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.range.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.range.field.help",{defaultMessage:"Field to use for this aggregation"})},ranges:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.range.ranges.help",{defaultMessage:"Serialized ranges to use for this aggregation."})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.range.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.range.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:bucket_agg_types.a.RANGE,params:{...rest,ranges:getParsedValue(args,"ranges")}}}}});function range_key_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const range_key_id=Symbol("id");class RangeKey{findCustomLabel(from,to,ranges){var _find;return null===(_find=(ranges||[]).find(range=>(null==from&&null==range.from||range.from===from)&&(null==to&&null==range.to||range.to===to)))||void 0===_find?void 0:_find.label}constructor(bucket,allRanges){range_key_defineProperty(this,range_key_id,void 0),range_key_defineProperty(this,"gte",void 0),range_key_defineProperty(this,"lt",void 0),range_key_defineProperty(this,"label",void 0),this.gte=null==bucket.from?-1/0:bucket.from,this.lt=null==bucket.to?1/0:bucket.to,this.label=this.findCustomLabel(bucket.from,bucket.to,allRanges),this[range_key_id]=RangeKey.idBucket(bucket)}static idBucket(bucket){return`from:${bucket.from},to:${bucket.to}`}toString(){return this[range_key_id]}}const createFilterRange=getFieldFormatsStart=>(aggConfig,{label:label,...params})=>{const{deserialize:deserialize}=getFieldFormatsStart();return Object(common.buildRangeFilter)(aggConfig.params.field,params,aggConfig.getIndexPattern(),deserialize(aggConfig.toSerializedFieldFormat()).convert(params))},rangeTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.rangeTitle",{defaultMessage:"Range"}),getRangeBucketAgg=({getFieldFormatsStart:getFieldFormatsStart})=>{const keyCaches=new WeakMap;return new bucket_agg_type.a({name:bucket_agg_types.a.RANGE,expressionName:aggRangeFnName,title:rangeTitle,createFilter:createFilterRange(getFieldFormatsStart),makeLabel:aggConfig=>external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.aggTypesLabel",{defaultMessage:"{fieldName} ranges",values:{fieldName:aggConfig.getFieldDisplayName()}}),getKey(bucket,key,agg){let keys=keyCaches.get(agg);keys||(keys=new Map,keyCaches.set(agg,keys));const id=RangeKey.idBucket(bucket);return(key=keys.get(id))||(key=new RangeKey(bucket,agg.params.ranges),keys.set(id,key)),key},getSerializedFormat(agg){const format=agg.params.field?agg.aggConfigs.indexPattern.getFormatterForField(agg.params.field).toJSON():{id:void 0,params:void 0};return{id:"range",params:{id:format.id,params:format.params}}},params:[{name:"field",type:"field",filterFieldTypes:[common.KBN_FIELD_TYPES.NUMBER]},{name:"ranges",default:[{from:0,to:1e3},{from:1e3,to:2e3}],write(aggConfig,output){var _ranges;output.params.ranges=null===(_ranges=aggConfig.params.ranges)||void 0===_ranges?void 0:_ranges.map(range=>({to:range.to,from:range.from})),output.params.keyed=!0}}]})},aggSignificantTermsFnName="aggSignificantTerms",aggSignificantTerms=()=>({name:aggSignificantTermsFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.buckets.significantTerms.help",{defaultMessage:"Generates a serialized agg config for a Significant Terms agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.significantTerms.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.significantTerms.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.significantTerms.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.significantTerms.field.help",{defaultMessage:"Field to use for this aggregation"})},size:{types:["number"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.significantTerms.size.help",{defaultMessage:"Max number of buckets to retrieve"})},exclude:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.significantTerms.exclude.help",{defaultMessage:"Specific bucket values to exclude from results"})},include:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.significantTerms.include.help",{defaultMessage:"Specific bucket values to include in results"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.significantTerms.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.significantTerms.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:bucket_agg_types.a.SIGNIFICANT_TERMS,params:{...rest}}}}}),createFilterTerms=(aggConfig,key,params)=>{const field=aggConfig.params.field,indexPattern=aggConfig.aggConfigs.indexPattern;if("__other__"===key){const terms=params.terms,phraseFilter=Object(common.buildPhrasesFilter)(field,terms,indexPattern);phraseFilter.meta.negate=!0;const filters=[phraseFilter];return terms.some(term=>"__missing__"===term)&&filters.push(Object(common.buildExistsFilter)(field,indexPattern)),filters}if("__missing__"===key){const existsFilter=Object(common.buildExistsFilter)(field,indexPattern);return existsFilter.meta.negate=!0,existsFilter}return Object(common.buildPhraseFilter)(field,key,indexPattern)},significantTermsTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.significantTermsTitle",{defaultMessage:"Significant Terms"}),getSignificantTermsBucketAgg=()=>new bucket_agg_type.a({name:bucket_agg_types.a.SIGNIFICANT_TERMS,expressionName:aggSignificantTermsFnName,title:significantTermsTitle,makeLabel:aggConfig=>external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.significantTermsLabel",{defaultMessage:"Top {size} unusual terms in {fieldName}",values:{size:aggConfig.params.size,fieldName:aggConfig.getFieldDisplayName()}}),createFilter:createFilterTerms,params:[{name:"field",type:"field",scriptable:!1,filterFieldTypes:common.KBN_FIELD_TYPES.STRING},{name:"size",default:""},{name:"exclude",displayName:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.significantTerms.excludeLabel",{defaultMessage:"Exclude"}),type:"string",advanced:!0,shouldShow:isStringType,...migrateIncludeExcludeFormat},{name:"include",displayName:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.significantTerms.includeLabel",{defaultMessage:"Include"}),type:"string",advanced:!0,shouldShow:isStringType,...migrateIncludeExcludeFormat}]}),aggTermsFnName="aggTerms",aggTerms=()=>({name:aggTermsFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.buckets.terms.help",{defaultMessage:"Generates a serialized agg config for a Terms agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.field.help",{defaultMessage:"Field to use for this aggregation"})},order:{types:["string"],options:["asc","desc"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.order.help",{defaultMessage:"Order in which to return the results: asc or desc"})},orderBy:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.orderBy.help",{defaultMessage:"Field to order results by"})},orderAgg:{types:["agg_type"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.orderAgg.help",{defaultMessage:"Agg config to use for ordering results"})},size:{types:["number"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.size.help",{defaultMessage:"Max number of buckets to retrieve"})},missingBucket:{types:["boolean"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.missingBucket.help",{defaultMessage:"When set to true, groups together any buckets with missing fields"})},missingBucketLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.missingBucketLabel.help",{defaultMessage:"Default label used in charts when documents are missing a field."})},otherBucket:{types:["boolean"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.otherBucket.help",{defaultMessage:"When set to true, groups together any buckets beyond the allowed size"})},otherBucketLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.otherBucketLabel.help",{defaultMessage:"Default label used in charts for documents in the Other bucket"})},exclude:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.exclude.help",{defaultMessage:"Specific bucket values to exclude from results"})},include:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.include.help",{defaultMessage:"Specific bucket values to include in results"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{var _args$orderAgg;const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:bucket_agg_types.a.TERMS,params:{...rest,orderAgg:null===(_args$orderAgg=args.orderAgg)||void 0===_args$orderAgg?void 0:_args$orderAgg.value}}}}}),getNestedAggDSL=(aggNestedDsl,startFromAggId)=>{if(aggNestedDsl[startFromAggId])return aggNestedDsl[startFromAggId];const nestedAggs=Object(external_kbnSharedDeps_Lodash_.values)(aggNestedDsl);let aggs;for(let i=0;i<nestedAggs.length;i++)if(nestedAggs[i].aggs&&(aggs=getNestedAggDSL(nestedAggs[i].aggs,startFromAggId)))return aggs},getAggConfigResultMissingBuckets=(responseAggs,aggId)=>{let resultBuckets=[];if(responseAggs[aggId]){const matchingBucket=responseAggs[aggId].buckets.find(bucket=>"__missing__"===bucket.key);return matchingBucket&&resultBuckets.push(matchingBucket),resultBuckets}return Object(external_kbnSharedDeps_Lodash_.each)(responseAggs,agg=>{agg.buckets&&Object(external_kbnSharedDeps_Lodash_.each)(agg.buckets,bucket=>{resultBuckets=[...resultBuckets,...getAggConfigResultMissingBuckets(bucket,aggId)]})}),resultBuckets},mergeOtherBucketAggResponse=(aggsConfig,response,otherResponse,otherAgg,requestAgg)=>{const updatedResponse=Object(external_kbnSharedDeps_Lodash_.cloneDeep)(response);return Object(external_kbnSharedDeps_Lodash_.each)(otherResponse.aggregations["other-filter"].buckets,(bucket,key)=>{if(!bucket.doc_count||void 0===key)return;const bucketKey=key.replace(new RegExp("^╰┄►"),""),aggResultBuckets=((aggConfigs,response,aggWithOtherBucket,key)=>{var _responseAgg;const keyParts=key.split("╰┄►");let responseAgg=response;for(const i in keyParts)if(keyParts[i]){const responseAggs=Object(external_kbnSharedDeps_Lodash_.values)(responseAgg);for(let aggId=0;aggId<responseAggs.length;aggId++){const aggById=responseAggs[aggId],aggKey=Object(external_kbnSharedDeps_Lodash_.keys)(responseAgg)[aggId],aggConfig=Object(external_kbnSharedDeps_Lodash_.find)(aggConfigs.aggs,agg=>agg.id===aggKey);if(aggConfig){const aggResultBucket=Object(external_kbnSharedDeps_Lodash_.find)(aggById.buckets,(bucket,bucketObjKey)=>aggConfig.getKey(bucket,Object(external_kbnSharedDeps_Lodash_.isNumber)(bucketObjKey)?void 0:bucketObjKey).toString()===keyParts[i]);if(aggResultBucket){responseAgg=aggResultBucket;break}}}}return null!==(_responseAgg=responseAgg)&&void 0!==_responseAgg&&_responseAgg[aggWithOtherBucket.id]?responseAgg[aggWithOtherBucket.id].buckets:[]})(aggsConfig,updatedResponse.aggregations,otherAgg,bucketKey),requestFilterTerms=((requestAgg,key,otherAgg)=>requestAgg["other-filter"].filters.filters[key].bool.must_not.filter(filter=>filter.match_phrase&&filter.match_phrase[otherAgg.params.field.name]).map(filter=>filter.match_phrase[otherAgg.params.field.name]))(requestAgg,key,otherAgg),phraseFilter=Object(common.buildPhrasesFilter)(otherAgg.params.field,requestFilterTerms,otherAgg.aggConfigs.indexPattern);phraseFilter.meta.negate=!0,bucket.filters=[phraseFilter],bucket.key="__other__",aggResultBuckets.some(aggResultBucket=>"__missing__"===aggResultBucket.key)&&bucket.filters.push(Object(common.buildExistsFilter)(otherAgg.params.field,otherAgg.aggConfigs.indexPattern)),aggResultBuckets.push(bucket)}),updatedResponse},termsAggFilter=["!top_hits","!percentiles","!std_dev","!derivative","!moving_avg","!serial_diff","!cumulative_sum","!avg_bucket","!max_bucket","!min_bucket","!sum_bucket"],termsTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.termsTitle",{defaultMessage:"Terms"}),getTermsBucketAgg=()=>new bucket_agg_type.a({name:bucket_agg_types.a.TERMS,expressionName:aggTermsFnName,title:termsTitle,makeLabel(agg){const params=agg.params;return agg.getFieldDisplayName()+": "+params.order.text},getSerializedFormat(agg){const format=agg.params.field?agg.aggConfigs.indexPattern.getFormatterForField(agg.params.field).toJSON():{id:void 0,params:void 0};return{id:"terms",params:{id:format.id,otherBucketLabel:agg.params.otherBucketLabel,missingBucketLabel:agg.params.missingBucketLabel,...format.params}}},createFilter:createFilterTerms,postFlightRequest:async(resp,aggConfigs,aggConfig,searchSource,inspectorRequestAdapter,abortSignal,searchSessionId)=>{if(!resp.aggregations)return resp;const nestedSearchSource=searchSource.createChild();if(aggConfig.params.otherBucket){const filterAgg=((aggConfigs,aggWithOtherBucket,response)=>{const bucketAggs=aggConfigs.aggs.filter(agg=>agg.type.type===AggGroupNames.Buckets),index=bucketAggs.findIndex(agg=>agg.id===aggWithOtherBucket.id),aggs=aggConfigs.toDsl(),indexPattern=aggWithOtherBucket.aggConfigs.indexPattern,filterAgg=aggConfigs.createAggConfig({type:"filters",id:"other",params:{filters:[]},enabled:!1},{addToAggConfigs:!1}),resultAgg={aggs:getNestedAggDSL(aggs,aggWithOtherBucket.id).aggs,filters:filterAgg.toDsl()};let noAggBucketResults=!1;const walkBucketTree=(aggIndex,aggregations,aggId,filters,key)=>{if(aggregations[aggId].buckets.length<1)return void(noAggBucketResults=!0);const agg=aggregations[aggId],newAggIndex=aggIndex+1,newAgg=bucketAggs[newAggIndex],currentAgg=bucketAggs[aggIndex];if(aggIndex<index)return void Object(external_kbnSharedDeps_Lodash_.each)(agg.buckets,(bucket,bucketObjKey)=>{const bucketKey=currentAgg.getKey(bucket,Object(external_kbnSharedDeps_Lodash_.isNumber)(bucketObjKey)?void 0:bucketObjKey),filter=Object(external_kbnSharedDeps_Lodash_.cloneDeep)(bucket.filters)||currentAgg.createFilter(bucketKey),newFilters=Object(external_kbnSharedDeps_Lodash_.flatten)([...filters,filter]);walkBucketTree(newAggIndex,bucket,newAgg.id,newFilters,`${key}╰┄►${bucketKey.toString()}`)});const hasScriptedField=!!aggWithOtherBucket.params.field.scripted,hasMissingBucket=!!aggWithOtherBucket.params.missingBucket,hasMissingBucketKey=agg.buckets.some(bucket=>"__missing__"===bucket.key);hasScriptedField||hasMissingBucket&&!hasMissingBucketKey||filters.push(Object(common.buildExistsFilter)(aggWithOtherBucket.params.field,aggWithOtherBucket.aggConfigs.indexPattern)),Object(external_kbnSharedDeps_Lodash_.each)(agg.buckets,bucket=>{if("__missing__"===bucket.key)return;const filter=currentAgg.createFilter(bucket.key);filter.meta.negate=!0,filters.push(filter)}),resultAgg.filters.filters[key]={bool:Object(common.buildQueryFromFilters)(filters,indexPattern)}};return walkBucketTree(0,response.aggregations,bucketAggs[0].id,[],""),!noAggBucketResults&&(()=>({"other-filter":resultAgg}))})(aggConfigs,aggConfig,resp);if(!filterAgg)return resp;nestedSearchSource.setField("aggs",filterAgg);const response=await nestedSearchSource.fetch$({abortSignal:abortSignal,sessionId:searchSessionId,inspector:{adapter:inspectorRequestAdapter,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.otherBucketTitle",{defaultMessage:"Other bucket"}),description:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.otherBucketDescription",{defaultMessage:"This request counts the number of documents that fall outside the criterion of the data buckets."})}}).toPromise();resp=mergeOtherBucketAggResponse(aggConfigs,resp,response,aggConfig,filterAgg())}return aggConfig.params.missingBucket&&(resp=((response,aggConfigs,agg)=>{const updatedResponse=Object(external_kbnSharedDeps_Lodash_.cloneDeep)(response);return getAggConfigResultMissingBuckets(updatedResponse.aggregations,agg.id).forEach(bucket=>{bucket.key="__missing__"}),updatedResponse})(resp,0,aggConfig)),resp},params:[{name:"field",type:"field",filterFieldTypes:[common.KBN_FIELD_TYPES.NUMBER,common.KBN_FIELD_TYPES.BOOLEAN,common.KBN_FIELD_TYPES.DATE,common.KBN_FIELD_TYPES.IP,common.KBN_FIELD_TYPES.STRING]},{name:"orderBy",write:external_kbnSharedDeps_Lodash_.noop},{name:"orderAgg",type:"agg",allowedAggs:termsAggFilter,default:null,makeAgg(termsAgg,state={type:"count"}){state.schema="orderAgg";const orderAgg=termsAgg.aggConfigs.createAggConfig(state,{addToAggConfigs:!1});return orderAgg.id=termsAgg.id+"-orderAgg",orderAgg},write(agg,output,aggs){const dir=agg.params.order.value,order=output.params.order={};let orderAgg=agg.params.orderAgg||aggs.getResponseAggById(agg.params.orderBy);if(output.params.script&&(output.params.value_type="number"===agg.getField().type?"float":agg.getField().type),agg.params.missingBucket&&"string"===agg.params.field.type&&(output.params.missing="__missing__"),!orderAgg)return void(order[agg.params.orderBy||"_count"]=dir);if("count"===orderAgg.type.name)return void(order._count=dir);const orderAggPath=orderAgg.getValueBucketPath();orderAgg.parentId&&aggs&&(orderAgg=aggs.byId(orderAgg.parentId)),output.subAggs=(output.subAggs||[]).concat(orderAgg),order[orderAggPath]=dir}},{name:"order",type:"optioned",default:"desc",options:[{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.orderDescendingTitle",{defaultMessage:"Descending"}),value:"desc"},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.orderAscendingTitle",{defaultMessage:"Ascending"}),value:"asc"}],write:external_kbnSharedDeps_Lodash_.noop},{name:"size",default:5},{name:"otherBucket",default:!1,write:external_kbnSharedDeps_Lodash_.noop},{name:"otherBucketLabel",type:"string",default:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.otherBucketLabel",{defaultMessage:"Other"}),displayName:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.otherBucket.labelForOtherBucketLabel",{defaultMessage:"Label for other bucket"}),shouldShow:agg=>agg.getParam("otherBucket"),write:external_kbnSharedDeps_Lodash_.noop},{name:"missingBucket",default:!1,write:external_kbnSharedDeps_Lodash_.noop},{name:"missingBucketLabel",default:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.missingBucketLabel",{defaultMessage:"Missing",description:'Default label used in charts when documents are missing a field.\n          Visible when you create a chart with a terms aggregation and enable "Show missing values"'}),type:"string",displayName:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.otherBucket.labelForMissingValuesLabel",{defaultMessage:"Label for missing values"}),shouldShow:agg=>agg.getParam("missingBucket"),write:external_kbnSharedDeps_Lodash_.noop},{name:"exclude",displayName:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.excludeLabel",{defaultMessage:"Exclude"}),type:"string",advanced:!0,shouldShow:isStringOrNumberType,...migrateIncludeExcludeFormat},{name:"include",displayName:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.terms.includeLabel",{defaultMessage:"Include"}),type:"string",advanced:!0,shouldShow:isStringOrNumberType,...migrateIncludeExcludeFormat}]}),aggAvgFnName="aggAvg",aggAvg=()=>({name:aggAvgFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.metrics.avg.help",{defaultMessage:"Generates a serialized agg config for a Avg agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.avg.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.avg.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.avg.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.avg.field.help",{defaultMessage:"Field to use for this aggregation"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.avg.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.avg.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:METRIC_TYPES.AVG,params:{...rest}}}}}),averageTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.averageTitle",{defaultMessage:"Average"}),getAvgMetricAgg=()=>new metric_agg_type_MetricAggType({name:METRIC_TYPES.AVG,expressionName:aggAvgFnName,title:averageTitle,valueType:"number",makeLabel:aggConfig=>external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.averageLabel",{defaultMessage:"Average {field}",values:{field:aggConfig.getFieldDisplayName()}}),params:[{name:"field",type:"field",filterFieldTypes:[common.KBN_FIELD_TYPES.NUMBER,common.KBN_FIELD_TYPES.HISTOGRAM]}]}),aggBucketAvgFnName="aggBucketAvg",aggBucketAvg=()=>({name:aggBucketAvgFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.metrics.bucket_avg.help",{defaultMessage:"Generates a serialized agg config for a Avg Bucket agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_avg.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_avg.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_avg.schema.help",{defaultMessage:"Schema to use for this aggregation"})},customBucket:{types:["agg_type"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_avg.customBucket.help",{defaultMessage:"Agg config to use for building sibling pipeline aggregations"})},customMetric:{types:["agg_type"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_avg.customMetric.help",{defaultMessage:"Agg config to use for building sibling pipeline aggregations"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_avg.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_avg.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{var _args$customBucket,_args$customMetric;const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:METRIC_TYPES.AVG_BUCKET,params:{...rest,customBucket:null===(_args$customBucket=args.customBucket)||void 0===_args$customBucket?void 0:_args$customBucket.value,customMetric:null===(_args$customMetric=args.customMetric)||void 0===_args$customMetric?void 0:_args$customMetric.value}}}}}),makeNestedLabel=(aggConfig,label)=>{const uppercaseLabel=Object(external_kbnSharedDeps_Lodash_.startCase)(label),customMetric=aggConfig.getParam("customMetric"),metricAgg=aggConfig.getParam("metricAgg");if(customMetric){let metricLabel=customMetric.makeLabel();return metricLabel.includes(uppercaseLabel+" of ")?(metricLabel=metricLabel.substring((uppercaseLabel+" of ").length),metricLabel=`2. ${label} of ${metricLabel}`):metricLabel=metricLabel.includes(label+" of ")?parseInt(metricLabel.substring(0,1),10)+1+metricLabel.substring(1):`${uppercaseLabel} of ${metricLabel}`,metricLabel}const metric=aggConfig.aggConfigs.byId(metricAgg);return metric?`${uppercaseLabel} of ${metric.makeLabel()}`:""},forwardModifyAggConfigOnSearchRequestStart=paramName=>(aggConfig,searchSource,request)=>{if(!aggConfig||!aggConfig.params)return;const nestedAggConfig=aggConfig.getParam(paramName);nestedAggConfig&&nestedAggConfig.type&&nestedAggConfig.type.params&&nestedAggConfig.type.params.forEach(param=>{param.modifyAggConfigOnSearchRequestStart&&param.modifyAggConfigOnSearchRequestStart(nestedAggConfig,searchSource,request)})},metricAggFilter=["!top_hits","!percentiles","!percentile_ranks","!median","!std_dev","!sum_bucket","!avg_bucket","!min_bucket","!max_bucket","!derivative","!moving_avg","!serial_diff","!cumulative_sum","!geo_bounds","!geo_centroid","!filtered_metric","!single_percentile"],bucketAggFilter=[],siblingPipelineType=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.siblingPipelineAggregationsSubtypeTitle",{defaultMessage:"Sibling pipeline aggregations"}),siblingPipelineAggHelper={subtype:siblingPipelineType,params:(bucketFilter=bucketAggFilter)=>[{name:"customBucket",type:"agg",allowedAggs:bucketFilter,default:null,makeAgg(agg,state={type:"date_histogram"}){const orderAgg=agg.aggConfigs.createAggConfig(state,{addToAggConfigs:!1});return orderAgg.id=agg.id+"-bucket",orderAgg},modifyAggConfigOnSearchRequestStart:forwardModifyAggConfigOnSearchRequestStart("customBucket"),write:()=>{}},{name:"customMetric",type:"agg",allowedAggs:metricAggFilter,default:null,makeAgg(agg,state={type:"count"}){const orderAgg=agg.aggConfigs.createAggConfig(state,{addToAggConfigs:!1});return orderAgg.id=agg.id+"-metric",orderAgg},modifyAggConfigOnSearchRequestStart:forwardModifyAggConfigOnSearchRequestStart("customMetric"),write:(agg,output)=>((agg,output)=>{const customMetric=agg.getParam("customMetric");if(!customMetric)return;const metricAgg=customMetric,bucketAgg=agg.getParam("customBucket");metricAgg.type.name!==METRIC_TYPES.COUNT?(bucketAgg.subAggs=(output.subAggs||[]).concat(metricAgg),output.params.buckets_path=`${bucketAgg.id}>${metricAgg.id}`):output.params.buckets_path=bucketAgg.id+">_count",output.parentAggs=(output.parentAggs||[]).concat(bucketAgg)})(agg,output)}],getSerializedFormat(agg){const customMetric=agg.getParam("customMetric");return customMetric?customMetric.type.getSerializedFormat(customMetric):{}}},overallAverageLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.overallAverageLabel",{defaultMessage:"overall average"}),averageBucketTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.averageBucketTitle",{defaultMessage:"Average Bucket"}),getBucketAvgMetricAgg=()=>{const{subtype:subtype,params:params,getSerializedFormat:getSerializedFormat}=siblingPipelineAggHelper;return new metric_agg_type_MetricAggType({name:METRIC_TYPES.AVG_BUCKET,expressionName:aggBucketAvgFnName,title:averageBucketTitle,makeLabel:agg=>makeNestedLabel(agg,overallAverageLabel),subtype:subtype,params:[...params()],getSerializedFormat:getSerializedFormat,getValue(agg,bucket){const customMetric=agg.getParam("customMetric"),customBucket=agg.getParam("customBucket"),scaleMetrics=customMetric.type&&customMetric.type.isScalable();let value=bucket[agg.id]&&bucket[agg.id].value;if(scaleMetrics&&"date_histogram"===customBucket.type.name){const aggInfo=customBucket.write();value*=Object(external_kbnSharedDeps_Lodash_.get)(aggInfo,"bucketInterval.scale",1)}return value}})},aggBucketMaxFnName="aggBucketMax",aggBucketMax=()=>({name:aggBucketMaxFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.metrics.bucket_max.help",{defaultMessage:"Generates a serialized agg config for a Max Bucket agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_max.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_max.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_max.schema.help",{defaultMessage:"Schema to use for this aggregation"})},customBucket:{types:["agg_type"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_max.customBucket.help",{defaultMessage:"Agg config to use for building sibling pipeline aggregations"})},customMetric:{types:["agg_type"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_max.customMetric.help",{defaultMessage:"Agg config to use for building sibling pipeline aggregations"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_max.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_max.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{var _args$customBucket,_args$customMetric;const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:METRIC_TYPES.MAX_BUCKET,params:{...rest,customBucket:null===(_args$customBucket=args.customBucket)||void 0===_args$customBucket?void 0:_args$customBucket.value,customMetric:null===(_args$customMetric=args.customMetric)||void 0===_args$customMetric?void 0:_args$customMetric.value}}}}}),overallMaxLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.overallMaxLabel",{defaultMessage:"overall max"}),maxBucketTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.maxBucketTitle",{defaultMessage:"Max Bucket"}),getBucketMaxMetricAgg=()=>{const{subtype:subtype,params:params,getSerializedFormat:getSerializedFormat}=siblingPipelineAggHelper;return new metric_agg_type_MetricAggType({name:METRIC_TYPES.MAX_BUCKET,expressionName:aggBucketMaxFnName,title:maxBucketTitle,makeLabel:agg=>makeNestedLabel(agg,overallMaxLabel),subtype:subtype,params:[...params()],getSerializedFormat:getSerializedFormat})},aggBucketMinFnName="aggBucketMin",aggBucketMin=()=>({name:aggBucketMinFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.metrics.bucket_min.help",{defaultMessage:"Generates a serialized agg config for a Min Bucket agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_min.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_min.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_min.schema.help",{defaultMessage:"Schema to use for this aggregation"})},customBucket:{types:["agg_type"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_min.customBucket.help",{defaultMessage:"Agg config to use for building sibling pipeline aggregations"})},customMetric:{types:["agg_type"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_min.customMetric.help",{defaultMessage:"Agg config to use for building sibling pipeline aggregations"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_min.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_min.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{var _args$customBucket,_args$customMetric;const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:METRIC_TYPES.MIN_BUCKET,params:{...rest,customBucket:null===(_args$customBucket=args.customBucket)||void 0===_args$customBucket?void 0:_args$customBucket.value,customMetric:null===(_args$customMetric=args.customMetric)||void 0===_args$customMetric?void 0:_args$customMetric.value}}}}}),overallMinLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.overallMinLabel",{defaultMessage:"overall min"}),minBucketTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.minBucketTitle",{defaultMessage:"Min Bucket"}),getBucketMinMetricAgg=()=>{const{subtype:subtype,params:params,getSerializedFormat:getSerializedFormat}=siblingPipelineAggHelper;return new metric_agg_type_MetricAggType({name:METRIC_TYPES.MIN_BUCKET,expressionName:aggBucketMinFnName,title:minBucketTitle,makeLabel:agg=>makeNestedLabel(agg,overallMinLabel),subtype:subtype,params:[...params()],getSerializedFormat:getSerializedFormat})},aggBucketSumFnName="aggBucketSum",aggBucketSum=()=>({name:aggBucketSumFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.metrics.bucket_sum.help",{defaultMessage:"Generates a serialized agg config for a Sum Bucket agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_sum.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_sum.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_sum.schema.help",{defaultMessage:"Schema to use for this aggregation"})},customBucket:{types:["agg_type"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_sum.customBucket.help",{defaultMessage:"Agg config to use for building sibling pipeline aggregations"})},customMetric:{types:["agg_type"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_sum.customMetric.help",{defaultMessage:"Agg config to use for building sibling pipeline aggregations"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_sum.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.bucket_sum.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{var _args$customBucket,_args$customMetric;const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:METRIC_TYPES.SUM_BUCKET,params:{...rest,customBucket:null===(_args$customBucket=args.customBucket)||void 0===_args$customBucket?void 0:_args$customBucket.value,customMetric:null===(_args$customMetric=args.customMetric)||void 0===_args$customMetric?void 0:_args$customMetric.value}}}}}),overallSumLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.overallSumLabel",{defaultMessage:"overall sum"}),sumBucketTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.sumBucketTitle",{defaultMessage:"Sum Bucket"}),getBucketSumMetricAgg=()=>{const{subtype:subtype,params:params,getSerializedFormat:getSerializedFormat}=siblingPipelineAggHelper;return new metric_agg_type_MetricAggType({name:METRIC_TYPES.SUM_BUCKET,expressionName:aggBucketSumFnName,title:sumBucketTitle,makeLabel:agg=>makeNestedLabel(agg,overallSumLabel),subtype:subtype,params:[...params()],getSerializedFormat:getSerializedFormat})},aggFilteredMetricFnName="aggFilteredMetric",aggFilteredMetric=()=>({name:aggFilteredMetricFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.metrics.filtered_metric.help",{defaultMessage:"Generates a serialized agg config for a filtered metric agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.filtered_metric.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.filtered_metric.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.filtered_metric.schema.help",{defaultMessage:"Schema to use for this aggregation"})},customBucket:{types:["agg_type"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.filtered_metric.customBucket.help",{defaultMessage:"Agg config to use for building sibling pipeline aggregations. Has to be a filter aggregation"})},customMetric:{types:["agg_type"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.filtered_metric.customMetric.help",{defaultMessage:"Agg config to use for building sibling pipeline aggregations"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.filtered_metric.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{var _args$customBucket,_args$customMetric;const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:METRIC_TYPES.FILTERED_METRIC,params:{...rest,customBucket:null===(_args$customBucket=args.customBucket)||void 0===_args$customBucket?void 0:_args$customBucket.value,customMetric:null===(_args$customMetric=args.customMetric)||void 0===_args$customMetric?void 0:_args$customMetric.value}}}}}),filteredMetricLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.filteredMetricLabel",{defaultMessage:"filtered"}),filteredMetricTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.filteredMetricTitle",{defaultMessage:"Filtered metric"}),getFilteredMetricAgg=()=>{const{subtype:subtype,params:params,getSerializedFormat:getSerializedFormat}=siblingPipelineAggHelper;return new metric_agg_type_MetricAggType({name:METRIC_TYPES.FILTERED_METRIC,expressionName:aggFilteredMetricFnName,title:filteredMetricTitle,makeLabel:agg=>makeNestedLabel(agg,filteredMetricLabel),subtype:subtype,params:[...params(["filter"])],hasNoDslParams:!0,getSerializedFormat:getSerializedFormat,getValue(agg,bucket){const customMetric=agg.getParam("customMetric"),customBucket=agg.getParam("customBucket");return customMetric.getValue(bucket[customBucket.id])},getValueBucketPath(agg){const customBucket=agg.getParam("customBucket"),customMetric=agg.getParam("customMetric");return"count"===customMetric.type.name?customBucket.getValueBucketPath():`${customBucket.getValueBucketPath()}>${customMetric.getValueBucketPath()}`}})},aggCardinalityFnName="aggCardinality",aggCardinality=()=>({name:aggCardinalityFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.metrics.cardinality.help",{defaultMessage:"Generates a serialized agg config for a Cardinality agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.cardinality.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.cardinality.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.cardinality.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.cardinality.field.help",{defaultMessage:"Field to use for this aggregation"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.cardinality.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.cardinality.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:METRIC_TYPES.CARDINALITY,params:{...rest}}}}}),uniqueCountTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.uniqueCountTitle",{defaultMessage:"Unique Count"}),getCardinalityMetricAgg=()=>new metric_agg_type_MetricAggType({name:METRIC_TYPES.CARDINALITY,valueType:"number",expressionName:aggCardinalityFnName,title:uniqueCountTitle,makeLabel:aggConfig=>external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.uniqueCountLabel",{defaultMessage:"Unique count of {field}",values:{field:aggConfig.getFieldDisplayName()}}),getSerializedFormat:agg=>({id:"number"}),params:[{name:"field",type:"field",filterFieldTypes:Object.values(common.KBN_FIELD_TYPES).filter(type=>type!==common.KBN_FIELD_TYPES.HISTOGRAM)}]}),aggCountFnName="aggCount",aggCount=()=>({name:aggCountFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.metrics.count.help",{defaultMessage:"Generates a serialized agg config for a Count agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.count.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.count.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.count.schema.help",{defaultMessage:"Schema to use for this aggregation"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.count.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:METRIC_TYPES.COUNT,params:rest}}}}),getCountMetricAgg=()=>new metric_agg_type_MetricAggType({name:METRIC_TYPES.COUNT,expressionName:aggCountFnName,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.countTitle",{defaultMessage:"Count"}),hasNoDsl:!0,json:!1,makeLabel:()=>external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.countLabel",{defaultMessage:"Count"}),getSerializedFormat:agg=>({id:"number"}),getValue:(agg,bucket)=>bucket.doc_count,isScalable:()=>!0}),aggCumulativeSumFnName="aggCumulativeSum",aggCumulativeSum=()=>({name:aggCumulativeSumFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.metrics.cumulative_sum.help",{defaultMessage:"Generates a serialized agg config for a Cumulative Sum agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.cumulative_sum.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.cumulative_sum.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.cumulative_sum.schema.help",{defaultMessage:"Schema to use for this aggregation"})},metricAgg:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.cumulative_sum.metricAgg.help",{defaultMessage:"Id for finding agg config to use for building parent pipeline aggregations"})},customMetric:{types:["agg_type"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.cumulative_sum.customMetric.help",{defaultMessage:"Agg config to use for building parent pipeline aggregations"})},buckets_path:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.cumulative_sum.buckets_path.help",{defaultMessage:"Path to the metric of interest"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.cumulative_sum.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.cumulative_sum.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{var _args$customMetric;const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:METRIC_TYPES.CUMULATIVE_SUM,params:{...rest,customMetric:null===(_args$customMetric=args.customMetric)||void 0===_args$customMetric?void 0:_args$customMetric.value}}}}}),parentPipelineAggWriter=(agg,output,aggConfigs)=>{const customMetric=agg.getParam("customMetric"),metricAgg=agg.getParam("metricAgg"),selectedMetric=customMetric||aggConfigs&&aggConfigs.getResponseAggById(metricAgg);customMetric&&"count"!==customMetric.type.name&&(output.parentAggs=(output.parentAggs||[]).concat(selectedMetric)),output.params={buckets_path:"count"===selectedMetric.type.name?"_count":selectedMetric.id}},parent_pipeline_agg_helper_metricAggFilter=["!top_hits","!percentiles","!percentile_ranks","!median","!std_dev","!geo_bounds","!geo_centroid","!filtered_metric","!single_percentile"],parentPipelineType=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.parentPipelineAggregationsSubtypeTitle",{defaultMessage:"Parent Pipeline Aggregations"}),parentPipelineAggHelper={subtype:parentPipelineType,params:()=>[{name:"metricAgg",default:"custom",write:parentPipelineAggWriter},{name:"customMetric",type:"agg",allowedAggs:parent_pipeline_agg_helper_metricAggFilter,makeAgg(termsAgg,state={type:"count"}){const metricAgg=termsAgg.aggConfigs.createAggConfig(state,{addToAggConfigs:!1});return metricAgg.id=termsAgg.id+"-metric",metricAgg},modifyAggConfigOnSearchRequestStart:forwardModifyAggConfigOnSearchRequestStart("customMetric"),write:external_kbnSharedDeps_Lodash_.noop},{name:"buckets_path",write:external_kbnSharedDeps_Lodash_.noop}],getSerializedFormat(agg){let subAgg;const customMetric=agg.getParam("customMetric");return subAgg=customMetric||agg.aggConfigs.byId(agg.getParam("metricAgg")),subAgg?subAgg.type.getSerializedFormat(subAgg):{}}},cumulativeSumLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.cumulativeSumLabel",{defaultMessage:"cumulative sum"}),cumulativeSumTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.cumulativeSumTitle",{defaultMessage:"Cumulative Sum"}),getCumulativeSumMetricAgg=()=>{const{subtype:subtype,params:params,getSerializedFormat:getSerializedFormat}=parentPipelineAggHelper;return new metric_agg_type_MetricAggType({name:METRIC_TYPES.CUMULATIVE_SUM,expressionName:aggCumulativeSumFnName,title:cumulativeSumTitle,makeLabel:agg=>makeNestedLabel(agg,cumulativeSumLabel),subtype:subtype,params:[...params()],getSerializedFormat:getSerializedFormat})},aggDerivativeFnName="aggDerivative",aggDerivative=()=>({name:aggDerivativeFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.metrics.derivative.help",{defaultMessage:"Generates a serialized agg config for a Derivative agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.derivative.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.derivative.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.derivative.schema.help",{defaultMessage:"Schema to use for this aggregation"})},metricAgg:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.derivative.metricAgg.help",{defaultMessage:"Id for finding agg config to use for building parent pipeline aggregations"})},customMetric:{types:["agg_type"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.derivative.customMetric.help",{defaultMessage:"Agg config to use for building parent pipeline aggregations"})},buckets_path:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.derivative.buckets_path.help",{defaultMessage:"Path to the metric of interest"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.derivative.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.derivative.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{var _args$customMetric;const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:METRIC_TYPES.DERIVATIVE,params:{...rest,customMetric:null===(_args$customMetric=args.customMetric)||void 0===_args$customMetric?void 0:_args$customMetric.value}}}}}),derivativeLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.derivativeLabel",{defaultMessage:"derivative"}),derivativeTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.derivativeTitle",{defaultMessage:"Derivative"}),getDerivativeMetricAgg=()=>{const{subtype:subtype,params:params,getSerializedFormat:getSerializedFormat}=parentPipelineAggHelper;return new metric_agg_type_MetricAggType({name:METRIC_TYPES.DERIVATIVE,expressionName:aggDerivativeFnName,title:derivativeTitle,makeLabel:agg=>makeNestedLabel(agg,derivativeLabel),subtype:subtype,params:[...params()],getSerializedFormat:getSerializedFormat})},aggGeoBoundsFnName="aggGeoBounds",aggGeoBounds=()=>({name:aggGeoBoundsFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.metrics.geo_bounds.help",{defaultMessage:"Generates a serialized agg config for a Geo Bounds agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.geo_bounds.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.geo_bounds.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.geo_bounds.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.geo_bounds.field.help",{defaultMessage:"Field to use for this aggregation"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.geo_bounds.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.geo_bounds.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:METRIC_TYPES.GEO_BOUNDS,params:{...rest}}}}}),geoBoundsTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.geoBoundsTitle",{defaultMessage:"Geo Bounds"}),geoBoundsLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.geoBoundsLabel",{defaultMessage:"Geo Bounds"}),getGeoBoundsMetricAgg=()=>new metric_agg_type_MetricAggType({name:METRIC_TYPES.GEO_BOUNDS,expressionName:aggGeoBoundsFnName,title:geoBoundsTitle,makeLabel:()=>geoBoundsLabel,params:[{name:"field",type:"field",filterFieldTypes:common.KBN_FIELD_TYPES.GEO_POINT}]}),aggGeoCentroidFnName="aggGeoCentroid",aggGeoCentroid=()=>({name:aggGeoCentroidFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.metrics.geo_centroid.help",{defaultMessage:"Generates a serialized agg config for a Geo Centroid agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.geo_centroid.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.geo_centroid.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.geo_centroid.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.geo_centroid.field.help",{defaultMessage:"Field to use for this aggregation"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.geo_centroid.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.geo_centroid.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:METRIC_TYPES.GEO_CENTROID,params:{...rest}}}}}),geoCentroidTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.geoCentroidTitle",{defaultMessage:"Geo Centroid"}),geoCentroidLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.geoCentroidLabel",{defaultMessage:"Geo Centroid"}),getGeoCentroidMetricAgg=()=>new metric_agg_type_MetricAggType({name:METRIC_TYPES.GEO_CENTROID,expressionName:aggGeoCentroidFnName,title:geoCentroidTitle,makeLabel:()=>geoCentroidLabel,params:[{name:"field",type:"field",filterFieldTypes:common.KBN_FIELD_TYPES.GEO_POINT}],getValue:(agg,bucket)=>bucket[agg.id]&&bucket[agg.id].location}),aggMaxFnName="aggMax",aggMax=()=>({name:aggMaxFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.metrics.max.help",{defaultMessage:"Generates a serialized agg config for a Max agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.max.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.max.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.max.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.max.field.help",{defaultMessage:"Field to use for this aggregation"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.max.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.max.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:METRIC_TYPES.MAX,params:{...rest}}}}}),maxTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.maxTitle",{defaultMessage:"Max"}),getMaxMetricAgg=()=>new metric_agg_type_MetricAggType({name:METRIC_TYPES.MAX,expressionName:aggMaxFnName,title:maxTitle,valueType:"number",makeLabel:aggConfig=>external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.maxLabel",{defaultMessage:"Max {field}",values:{field:aggConfig.getFieldDisplayName()}}),params:[{name:"field",type:"field",filterFieldTypes:[common.KBN_FIELD_TYPES.NUMBER,common.KBN_FIELD_TYPES.DATE,common.KBN_FIELD_TYPES.HISTOGRAM]}]}),aggMedianFnName="aggMedian",aggMedian=()=>({name:aggMedianFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.metrics.median.help",{defaultMessage:"Generates a serialized agg config for a Median agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.median.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.median.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.median.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.median.field.help",{defaultMessage:"Field to use for this aggregation"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.median.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.median.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:METRIC_TYPES.MEDIAN,params:{...rest}}}}}),medianTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.medianTitle",{defaultMessage:"Median"}),getMedianMetricAgg=()=>new metric_agg_type_MetricAggType({name:METRIC_TYPES.MEDIAN,expressionName:aggMedianFnName,dslName:"percentiles",title:medianTitle,valueType:"number",makeLabel:aggConfig=>external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.medianLabel",{defaultMessage:"Median {field}",values:{field:aggConfig.getFieldDisplayName()}}),getValueBucketPath:aggConfig=>aggConfig.id+".50",params:[{name:"field",type:"field",filterFieldTypes:[common.KBN_FIELD_TYPES.NUMBER,common.KBN_FIELD_TYPES.DATE,common.KBN_FIELD_TYPES.HISTOGRAM]},{name:"percents",default:[50],shouldShow:()=>!1,serialize:()=>{}}],getValue:(agg,bucket)=>bucket[agg.id].values["50.0"]}),aggSinglePercentileFnName="aggSinglePercentile",aggSinglePercentile=()=>({name:aggSinglePercentileFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.metrics.singlePercentile.help",{defaultMessage:"Generates a serialized agg config for a single percentile agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.singlePercentile.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.singlePercentile.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.singlePercentile.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.singlePercentile.field.help",{defaultMessage:"Field to use for this aggregation"})},percentile:{types:["number"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.singlePercentile.percentile.help",{defaultMessage:"Percentile to fetch"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.singlePercentile.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.singlePercentile.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:METRIC_TYPES.SINGLE_PERCENTILE,params:{...rest}}}}}),singlePercentileTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.singlePercentileTitle",{defaultMessage:"Percentile"}),getSinglePercentileMetricAgg=()=>new metric_agg_type_MetricAggType({name:METRIC_TYPES.SINGLE_PERCENTILE,expressionName:aggSinglePercentileFnName,dslName:"percentiles",title:singlePercentileTitle,valueType:"number",makeLabel:aggConfig=>external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.singlePercentileLabel",{defaultMessage:"Percentile {field}",values:{field:aggConfig.getFieldDisplayName()}}),getValueBucketPath:aggConfig=>`${aggConfig.id}.${aggConfig.params.percentile}`,params:[{name:"field",type:"field",filterFieldTypes:[common.KBN_FIELD_TYPES.NUMBER,common.KBN_FIELD_TYPES.DATE,common.KBN_FIELD_TYPES.HISTOGRAM]},{name:"percentile",default:95,write:(agg,output)=>{output.params.percents=[agg.params.percentile]}}],getValue(agg,bucket){let valueKey=String(agg.params.percentile);return Number.isInteger(agg.params.percentile)&&(valueKey+=".0"),bucket[agg.id].values[valueKey]}}),aggMinFnName="aggMin",aggMin=()=>({name:aggMinFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.metrics.min.help",{defaultMessage:"Generates a serialized agg config for a Min agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.min.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.min.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.min.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.min.field.help",{defaultMessage:"Field to use for this aggregation"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.min.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.min.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:METRIC_TYPES.MIN,params:{...rest}}}}}),minTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.minTitle",{defaultMessage:"Min"}),getMinMetricAgg=()=>new metric_agg_type_MetricAggType({name:METRIC_TYPES.MIN,expressionName:aggMinFnName,title:minTitle,valueType:"number",makeLabel:aggConfig=>external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.minLabel",{defaultMessage:"Min {field}",values:{field:aggConfig.getFieldDisplayName()}}),params:[{name:"field",type:"field",filterFieldTypes:[common.KBN_FIELD_TYPES.NUMBER,common.KBN_FIELD_TYPES.DATE,common.KBN_FIELD_TYPES.HISTOGRAM]}]}),aggMovingAvgFnName="aggMovingAvg",aggMovingAvg=()=>({name:aggMovingAvgFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.metrics.moving_avg.help",{defaultMessage:"Generates a serialized agg config for a Moving Average agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.moving_avg.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.moving_avg.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.moving_avg.schema.help",{defaultMessage:"Schema to use for this aggregation"})},metricAgg:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.moving_avg.metricAgg.help",{defaultMessage:"Id for finding agg config to use for building parent pipeline aggregations"})},customMetric:{types:["agg_type"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.moving_avg.customMetric.help",{defaultMessage:"Agg config to use for building parent pipeline aggregations"})},window:{types:["number"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.moving_avg.window.help",{defaultMessage:'The size of window to "slide" across the histogram.'})},buckets_path:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.derivative.buckets_path.help",{defaultMessage:"Path to the metric of interest"})},script:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.moving_avg.script.help",{defaultMessage:"Id for finding agg config to use for building parent pipeline aggregations"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.moving_avg.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.moving_avg.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{var _args$customMetric;const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:METRIC_TYPES.MOVING_FN,params:{...rest,customMetric:null===(_args$customMetric=args.customMetric)||void 0===_args$customMetric?void 0:_args$customMetric.value}}}}}),movingAvgTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.movingAvgTitle",{defaultMessage:"Moving Avg"}),movingAvgLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.movingAvgLabel",{defaultMessage:"moving avg"}),getMovingAvgMetricAgg=()=>{const{subtype:subtype,params:params,getSerializedFormat:getSerializedFormat}=parentPipelineAggHelper;return new metric_agg_type_MetricAggType({name:METRIC_TYPES.MOVING_FN,expressionName:aggMovingAvgFnName,dslName:"moving_fn",title:movingAvgTitle,makeLabel:agg=>makeNestedLabel(agg,movingAvgLabel),subtype:subtype,getSerializedFormat:getSerializedFormat,params:[...params(),{name:"window",default:5},{name:"script",default:"MovingFunctions.unweightedAvg(values)"}],getValue:(agg,bucket)=>bucket[agg.id]?bucket[agg.id].value:null})},aggPercentileRanksFnName="aggPercentileRanks",aggPercentileRanks=()=>({name:aggPercentileRanksFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.metrics.percentile_ranks.help",{defaultMessage:"Generates a serialized agg config for a Percentile Ranks agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.percentile_ranks.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.percentile_ranks.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.percentile_ranks.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.percentile_ranks.field.help",{defaultMessage:"Field to use for this aggregation"})},values:{types:["number"],multi:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.percentile_ranks.values.help",{defaultMessage:"Range of percentiles ranks"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.percentile_ranks.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.percentile_ranks.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:METRIC_TYPES.PERCENTILE_RANKS,params:{...rest}}}}}),getResponseAggConfigClass=(agg,props)=>agg.$$_ResponseAggConfigClass?agg.$$_ResponseAggConfigClass:agg.$$_ResponseAggConfigClass=create(agg,props),create=(parentAgg,props)=>{function ResponseAggConfig(key){const parentId=parentAgg.id;let id;const subId=String(key);id=subId.indexOf(".")>-1?parentId+"['"+subId.replace(/'/g,"\\'")+"']":parentId+"."+subId,this.id=id,this.key=key,this.parentId=parentId}return ResponseAggConfig.prototype=Object.create(parentAgg),ResponseAggConfig.prototype.constructor=ResponseAggConfig,Object(external_kbnSharedDeps_Lodash_.assignIn)(ResponseAggConfig.prototype,props),ResponseAggConfig},getPercentileValue=(agg,bucket)=>{const{values:values}=bucket[agg.parentId],percentile=Object(external_kbnSharedDeps_Lodash_.find)(values,({key:key})=>key===agg.key);return percentile?percentile.value:NaN},getValueProps=getFieldFormatsStart=>({makeLabel(){const{getDefaultInstance:getDefaultInstance}=getFieldFormatsStart(),field=this.getField(),format=field&&field.format||getDefaultInstance(common.KBN_FIELD_TYPES.NUMBER),label=this.getParam("customLabel")||this.getFieldDisplayName();return external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.percentileRanks.valuePropsLabel",{defaultMessage:'Percentile rank {format} of "{label}"',values:{format:format.convert(this.key,"text"),label:label}})}}),getPercentileRanksMetricAgg=({getFieldFormatsStart:getFieldFormatsStart})=>new metric_agg_type_MetricAggType({name:METRIC_TYPES.PERCENTILE_RANKS,expressionName:aggPercentileRanksFnName,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.percentileRanksTitle",{defaultMessage:"Percentile Ranks"}),makeLabel:agg=>external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.percentileRanksLabel",{defaultMessage:"Percentile ranks of {field}",values:{field:agg.getFieldDisplayName()}}),params:[{name:"field",type:"field",filterFieldTypes:[common.KBN_FIELD_TYPES.NUMBER,common.KBN_FIELD_TYPES.HISTOGRAM]},{name:"values",default:[]},{write(agg,output){output.params.keyed=!1}}],getResponseAggs(agg){const ValueAggConfig=getResponseAggConfigClass(agg,getValueProps(getFieldFormatsStart));return agg.getParam("values").map(value=>new ValueAggConfig(value))},getSerializedFormat:agg=>({id:"percent"}),getValue:(agg,bucket)=>getPercentileValue(agg,bucket)/100}),aggPercentilesFnName="aggPercentiles",aggPercentiles=()=>({name:aggPercentilesFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.metrics.percentiles.help",{defaultMessage:"Generates a serialized agg config for a Percentiles agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.percentiles.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.percentiles.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.percentiles.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.percentiles.field.help",{defaultMessage:"Field to use for this aggregation"})},percents:{types:["number"],multi:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.percentiles.percents.help",{defaultMessage:"Range of percentiles ranks"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.percentiles.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.percentiles.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:METRIC_TYPES.PERCENTILES,params:{...rest}}}}});function ordinalSuffix(num){return num+""+function(num){const int=Math.floor(parseFloat(num)),hunth=int%100;if(hunth>=11&&hunth<=13)return"th";const tenth=int%10;return 1===tenth?"st":2===tenth?"nd":3===tenth?"rd":"th"}(num)}const valueProps={makeLabel(){const label=this.getParam("customLabel")||this.getFieldDisplayName();return external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.percentiles.valuePropsLabel",{defaultMessage:"{percentile} percentile of {label}",values:{percentile:ordinalSuffix(this.key),label:label}})}},getPercentilesMetricAgg=()=>new metric_agg_type_MetricAggType({name:METRIC_TYPES.PERCENTILES,expressionName:aggPercentilesFnName,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.percentilesTitle",{defaultMessage:"Percentiles"}),valueType:"number",makeLabel:agg=>external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.percentilesLabel",{defaultMessage:"Percentiles of {field}",values:{field:agg.getFieldDisplayName()}}),params:[{name:"field",type:"field",filterFieldTypes:[common.KBN_FIELD_TYPES.NUMBER,common.KBN_FIELD_TYPES.DATE,common.KBN_FIELD_TYPES.HISTOGRAM]},{name:"percents",default:[1,5,25,50,75,95,99]},{write(agg,output){output.params.keyed=!1}}],getResponseAggs(agg){const ValueAggConfig=getResponseAggConfigClass(agg,valueProps);return agg.getParam("percents").map(percent=>new ValueAggConfig(percent))},getValue:getPercentileValue}),aggSerialDiffFnName="aggSerialDiff",aggSerialDiff=()=>({name:aggSerialDiffFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.metrics.serial_diff.help",{defaultMessage:"Generates a serialized agg config for a Serial Differencing agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.serial_diff.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.serial_diff.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.serial_diff.schema.help",{defaultMessage:"Schema to use for this aggregation"})},metricAgg:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.serial_diff.metricAgg.help",{defaultMessage:"Id for finding agg config to use for building parent pipeline aggregations"})},customMetric:{types:["agg_type"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.serial_diff.customMetric.help",{defaultMessage:"Agg config to use for building parent pipeline aggregations"})},buckets_path:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.serial_diff.buckets_path.help",{defaultMessage:"Path to the metric of interest"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.serial_diff.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.serial_diff.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{var _args$customMetric;const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:METRIC_TYPES.SERIAL_DIFF,params:{...rest,customMetric:null===(_args$customMetric=args.customMetric)||void 0===_args$customMetric?void 0:_args$customMetric.value}}}}}),serialDiffTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.serialDiffTitle",{defaultMessage:"Serial Diff"}),serialDiffLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.serialDiffLabel",{defaultMessage:"serial diff"}),getSerialDiffMetricAgg=()=>{const{subtype:subtype,params:params,getSerializedFormat:getSerializedFormat}=parentPipelineAggHelper;return new metric_agg_type_MetricAggType({name:METRIC_TYPES.SERIAL_DIFF,expressionName:aggSerialDiffFnName,title:serialDiffTitle,makeLabel:agg=>makeNestedLabel(agg,serialDiffLabel),subtype:subtype,params:[...params()],getSerializedFormat:getSerializedFormat})},aggStdDeviationFnName="aggStdDeviation",aggStdDeviation=()=>({name:aggStdDeviationFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.metrics.std_deviation.help",{defaultMessage:"Generates a serialized agg config for a Standard Deviation agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.std_deviation.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.std_deviation.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.std_deviation.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.std_deviation.field.help",{defaultMessage:"Field to use for this aggregation"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.std_deviation.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.std_deviation.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:METRIC_TYPES.STD_DEV,params:{...rest}}}}}),responseAggConfigProps={valProp(){const customLabel=this.getParam("customLabel");return this.keyedDetails(customLabel)[this.key].valProp},makeLabel(){const fieldDisplayName=this.getFieldDisplayName(),customLabel=this.getParam("customLabel"),details=this.keyedDetails(customLabel,fieldDisplayName);return Object(external_kbnSharedDeps_Lodash_.get)(details,[this.key,"title"])},keyedDetails(customLabel,fieldDisplayName){const label=customLabel||external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.standardDeviation.keyDetailsLabel",{defaultMessage:"Standard Deviation of {fieldDisplayName}",values:{fieldDisplayName:fieldDisplayName}});return{std_lower:{valProp:["std_deviation_bounds","lower"],title:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.standardDeviation.lowerKeyDetailsTitle",{defaultMessage:"Lower {label}",values:{label:label}})},std_upper:{valProp:["std_deviation_bounds","upper"],title:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.standardDeviation.upperKeyDetailsTitle",{defaultMessage:"Upper {label}",values:{label:label}})}}}},getStdDeviationMetricAgg=()=>new metric_agg_type_MetricAggType({name:METRIC_TYPES.STD_DEV,expressionName:aggStdDeviationFnName,dslName:"extended_stats",title:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.standardDeviationTitle",{defaultMessage:"Standard Deviation"}),makeLabel:agg=>external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.standardDeviationLabel",{defaultMessage:"Standard Deviation of {field}",values:{field:agg.getFieldDisplayName()}}),params:[{name:"field",type:"field",filterFieldTypes:common.KBN_FIELD_TYPES.NUMBER}],getResponseAggs(agg){const ValueAggConfig=getResponseAggConfigClass(agg,responseAggConfigProps);return[new ValueAggConfig("std_lower"),new ValueAggConfig("std_upper")]},getValue:(agg,bucket)=>Object(external_kbnSharedDeps_Lodash_.get)(bucket[agg.parentId],agg.valProp())}),aggSumFnName="aggSum",aggSum=()=>({name:aggSumFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.metrics.sum.help",{defaultMessage:"Generates a serialized agg config for a Sum agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.sum.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.sum.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.sum.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.sum.field.help",{defaultMessage:"Field to use for this aggregation"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.sum.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.sum.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:METRIC_TYPES.SUM,params:{...rest}}}}}),sumTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.sumTitle",{defaultMessage:"Sum"}),getSumMetricAgg=()=>new metric_agg_type_MetricAggType({name:METRIC_TYPES.SUM,expressionName:aggSumFnName,title:sumTitle,valueType:"number",makeLabel:aggConfig=>external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.sumLabel",{defaultMessage:"Sum of {field}",values:{field:aggConfig.getFieldDisplayName()}}),isScalable:()=>!0,params:[{name:"field",type:"field",filterFieldTypes:[common.KBN_FIELD_TYPES.NUMBER,common.KBN_FIELD_TYPES.HISTOGRAM]}]}),aggTopHitFnName="aggTopHit",aggTopHit=()=>({name:aggTopHitFnName,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.metrics.top_hit.help",{defaultMessage:"Generates a serialized agg config for a Top Hit agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.top_hit.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.top_hit.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.top_hit.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.top_hit.field.help",{defaultMessage:"Field to use for this aggregation"})},aggregate:{types:["string"],required:!0,options:["min","max","sum","average","concat"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.top_hit.aggregate.help",{defaultMessage:"Aggregate type"})},size:{types:["number"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.top_hit.size.help",{defaultMessage:"Max number of buckets to retrieve"})},sortOrder:{types:["string"],options:["desc","asc"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.top_hit.sortOrder.help",{defaultMessage:"Order in which to return the results: asc or desc"})},sortField:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.top_hit.sortField.help",{defaultMessage:"Field to order results by"})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.top_hit.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.top_hit.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:METRIC_TYPES.TOP_HITS,params:{...rest}}}}}),isNumericFieldSelected=agg=>{const field=agg.getParam("field");return field&&field.type&&field.type===common.KBN_FIELD_TYPES.NUMBER},getTopHitMetricAgg=()=>new metric_agg_type_MetricAggType({name:METRIC_TYPES.TOP_HITS,expressionName:aggTopHitFnName,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.topHitTitle",{defaultMessage:"Top Hit"}),makeLabel(aggConfig){const lastPrefixLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.topHit.lastPrefixLabel",{defaultMessage:"Last"}),firstPrefixLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.topHit.firstPrefixLabel",{defaultMessage:"First"});let prefix="desc"===aggConfig.getParam("sortOrder").value?lastPrefixLabel:firstPrefixLabel;const size=aggConfig.getParam("size");1!==size&&(prefix+=" "+size);const field=aggConfig.getParam("field");return`${prefix} ${field?field.displayName:""}`},params:[{name:"field",type:"field",onlyAggregatable:!1,filterFieldTypes:Object.values(common.KBN_FIELD_TYPES).filter(type=>type!==common.KBN_FIELD_TYPES.HISTOGRAM),write(agg,output){const field=agg.getParam("field");output.params={},field.scripted?output.params.script_fields={[field.name]:{script:{source:field.script,lang:field.lang}}}:(field.readFromDocValues&&(output.params.docvalue_fields=[{field:field.name,...field.type===common.KBN_FIELD_TYPES.DATE&&{format:"date_time"}}]),output.params._source="_source"===field.name||field.name)}},{name:"aggregate",type:"optioned",options:[{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.topHit.minLabel",{defaultMessage:"Min"}),isCompatible:isNumericFieldSelected,disabled:!0,value:"min"},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.topHit.maxLabel",{defaultMessage:"Max"}),isCompatible:isNumericFieldSelected,disabled:!0,value:"max"},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.topHit.sumLabel",{defaultMessage:"Sum"}),isCompatible:isNumericFieldSelected,disabled:!0,value:"sum"},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.topHit.averageLabel",{defaultMessage:"Average"}),isCompatible:isNumericFieldSelected,disabled:!0,value:"average"},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.topHit.concatenateLabel",{defaultMessage:"Concatenate"}),isCompatible:aggConfig=>"*"===external_kbnSharedDeps_Lodash_default.a.get(aggConfig.params,"field.filterFieldTypes","*"),disabled:!0,value:"concat"}],write:external_kbnSharedDeps_Lodash_default.a.noop},{name:"size",default:1},{name:"sortField",type:"field",filterFieldTypes:[common.KBN_FIELD_TYPES.NUMBER,common.KBN_FIELD_TYPES.DATE,common.KBN_FIELD_TYPES.IP,common.KBN_FIELD_TYPES.STRING],default:agg=>agg.getIndexPattern().timeFieldName,write:external_kbnSharedDeps_Lodash_default.a.noop},{name:"sortOrder",type:"optioned",default:"desc",options:[{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.topHit.descendingLabel",{defaultMessage:"Descending"}),value:"desc"},{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.metrics.topHit.ascendingLabel",{defaultMessage:"Ascending"}),value:"asc"}],write(agg,output){const sortField=agg.params.sortField,sortOrder=agg.params.sortOrder;sortField.scripted?output.params.sort=[{_script:{script:{source:sortField.script,lang:sortField.lang},type:sortField.type,order:sortOrder.value}}]:output.params.sort=[{[sortField.name]:{order:sortOrder.value}}]}}],getValue(agg,bucket){const hits=external_kbnSharedDeps_Lodash_default.a.get(bucket,agg.id+".hits.hits");if(!hits||!hits.length)return null;const path=agg.getParam("field").name;let values=external_kbnSharedDeps_Lodash_default.a.flatten(hits.map(hit=>"_source"===path?hit._source:agg.getIndexPattern().flattenHit(hit,!0)[path]));if(1===values.length&&(values=values[0]),Array.isArray(values)){if(!external_kbnSharedDeps_Lodash_default.a.compact(values).length)return null;switch(agg.getParam("aggregate").value){case"max":return external_kbnSharedDeps_Lodash_default.a.max(values);case"min":return external_kbnSharedDeps_Lodash_default.a.min(values);case"sum":return external_kbnSharedDeps_Lodash_default.a.sum(values);case"average":return external_kbnSharedDeps_Lodash_default.a.sum(values)/values.length}}return values}}),getAggTypes=()=>({metrics:[{name:METRIC_TYPES.COUNT,fn:getCountMetricAgg},{name:METRIC_TYPES.AVG,fn:getAvgMetricAgg},{name:METRIC_TYPES.SUM,fn:getSumMetricAgg},{name:METRIC_TYPES.MEDIAN,fn:getMedianMetricAgg},{name:METRIC_TYPES.SINGLE_PERCENTILE,fn:getSinglePercentileMetricAgg},{name:METRIC_TYPES.MIN,fn:getMinMetricAgg},{name:METRIC_TYPES.MAX,fn:getMaxMetricAgg},{name:METRIC_TYPES.STD_DEV,fn:getStdDeviationMetricAgg},{name:METRIC_TYPES.CARDINALITY,fn:getCardinalityMetricAgg},{name:METRIC_TYPES.PERCENTILES,fn:getPercentilesMetricAgg},{name:METRIC_TYPES.PERCENTILE_RANKS,fn:getPercentileRanksMetricAgg},{name:METRIC_TYPES.TOP_HITS,fn:getTopHitMetricAgg},{name:METRIC_TYPES.DERIVATIVE,fn:getDerivativeMetricAgg},{name:METRIC_TYPES.CUMULATIVE_SUM,fn:getCumulativeSumMetricAgg},{name:METRIC_TYPES.MOVING_FN,fn:getMovingAvgMetricAgg},{name:METRIC_TYPES.SERIAL_DIFF,fn:getSerialDiffMetricAgg},{name:METRIC_TYPES.AVG_BUCKET,fn:getBucketAvgMetricAgg},{name:METRIC_TYPES.SUM_BUCKET,fn:getBucketSumMetricAgg},{name:METRIC_TYPES.MIN_BUCKET,fn:getBucketMinMetricAgg},{name:METRIC_TYPES.MAX_BUCKET,fn:getBucketMaxMetricAgg},{name:METRIC_TYPES.FILTERED_METRIC,fn:getFilteredMetricAgg},{name:METRIC_TYPES.GEO_BOUNDS,fn:getGeoBoundsMetricAgg},{name:METRIC_TYPES.GEO_CENTROID,fn:getGeoCentroidMetricAgg}],buckets:[{name:bucket_agg_types.a.DATE_HISTOGRAM,fn:getDateHistogramBucketAgg},{name:bucket_agg_types.a.HISTOGRAM,fn:getHistogramBucketAgg},{name:bucket_agg_types.a.RANGE,fn:getRangeBucketAgg},{name:bucket_agg_types.a.DATE_RANGE,fn:getDateRangeBucketAgg},{name:bucket_agg_types.a.IP_RANGE,fn:getIpRangeBucketAgg},{name:bucket_agg_types.a.TERMS,fn:getTermsBucketAgg},{name:bucket_agg_types.a.FILTER,fn:getFilterBucketAgg},{name:bucket_agg_types.a.FILTERS,fn:getFiltersBucketAgg},{name:bucket_agg_types.a.SIGNIFICANT_TERMS,fn:getSignificantTermsBucketAgg},{name:bucket_agg_types.a.GEOHASH_GRID,fn:getGeoHashBucketAgg},{name:bucket_agg_types.a.GEOTILE_GRID,fn:getGeoTitleBucketAgg}]}),getAggTypesFunctions=()=>[aggFilter,aggFilters,aggSignificantTerms,aggIpRange,aggDateRange,aggRange,aggGeoTile,aggGeoHash,aggHistogram,aggDateHistogram,aggTerms,aggAvg,aggBucketAvg,aggBucketMax,aggBucketMin,aggBucketSum,aggFilteredMetric,aggCardinality,aggCount,aggCumulativeSum,aggDerivative,aggGeoBounds,aggGeoCentroid,aggMax,aggMedian,aggSinglePercentile,aggMin,aggMovingAvg,aggPercentileRanks,aggPercentiles,aggSerialDiff,aggStdDeviation,aggSum,aggTopHit];function agg_types_registry_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class AggTypesRegistry{constructor(){agg_types_registry_defineProperty(this,"bucketAggs",new Map),agg_types_registry_defineProperty(this,"metricAggs",new Map),agg_types_registry_defineProperty(this,"setup",()=>({registerBucket:(name,type)=>{if(this.bucketAggs.get(name)||this.metricAggs.get(name))throw new Error("Agg has already been registered with name: "+name);this.bucketAggs.set(name,type)},registerMetric:(name,type)=>{if(this.bucketAggs.get(name)||this.metricAggs.get(name))throw new Error("Agg has already been registered with name: "+name);this.metricAggs.set(name,type)}})),agg_types_registry_defineProperty(this,"start",()=>({get:name=>this.bucketAggs.get(name)||this.metricAggs.get(name),getAll:()=>({buckets:Array.from(this.bucketAggs.values()),metrics:Array.from(this.metricAggs.values())})}))}}const getDatatableColumnUtilities=deps=>{const{getIndexPattern:getIndexPattern,createAggConfigs:createAggConfigs,aggTypesStart:aggTypesStart}=deps,getIndexPatternFromDatatableColumn=async column=>{if(column.meta.index)return await getIndexPattern(column.meta.index)};return{getIndexPattern:getIndexPatternFromDatatableColumn,getAggConfig:async column=>{const indexPattern=await getIndexPatternFromDatatableColumn(column);if(!indexPattern)return;return(await createAggConfigs(indexPattern,[column.meta.sourceParams])).aggs[0]},isFilterable:column=>{var _column$meta$sourcePa;if("esaggs"!==column.meta.source)return!1;const aggType=aggTypesStart.get(null===(_column$meta$sourcePa=column.meta.sourceParams)||void 0===_column$meta$sourcePa?void 0:_column$meta$sourcePa.type)({});return Boolean(aggType.createFilter)}}};const aggsRequiredUiSettings=["dateFormat","dateFormat:scaled","dateFormat:tz",common.UI_SETTINGS.HISTOGRAM_BAR_TARGET,common.UI_SETTINGS.HISTOGRAM_MAX_BARS,common.UI_SETTINGS.SEARCH_QUERY_LANGUAGE,common.UI_SETTINGS.QUERY_ALLOW_LEADING_WILDCARDS,common.UI_SETTINGS.QUERY_STRING_OPTIONS,common.UI_SETTINGS.COURIER_IGNORE_FILTER_IF_FIELD_NOT_IN_INDEX];class aggs_service_AggsCommonService{constructor(){var obj,key,value;obj=this,key="aggTypesRegistry",value=new AggTypesRegistry,key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}setup({registerFunction:registerFunction}){const aggTypesSetup=this.aggTypesRegistry.setup(),aggTypes=getAggTypes();aggTypes.buckets.forEach(({name:name,fn:fn})=>aggTypesSetup.registerBucket(name,fn)),aggTypes.metrics.forEach(({name:name,fn:fn})=>aggTypesSetup.registerMetric(name,fn));return getAggTypesFunctions().forEach(fn=>registerFunction(fn)),{types:aggTypesSetup}}start({getConfig:getConfig,getIndexPattern:getIndexPattern,isDefaultTimezone:isDefaultTimezone}){const aggTypesStart=this.aggTypesRegistry.start(),createAggConfigs=(indexPattern,configStates)=>new agg_configs_AggConfigs(indexPattern,configStates,{typesRegistry:aggTypesStart});return{calculateAutoTimeExpression:Object(utils.e)(getConfig),datatableUtilities:getDatatableColumnUtilities({getIndexPattern:getIndexPattern,createAggConfigs:createAggConfigs,aggTypesStart:aggTypesStart}),createAggConfigs:createAggConfigs,types:aggTypesStart}}}var param_types_agg=__webpack_require__(80),base=__webpack_require__(27),param_types_field=__webpack_require__(81),json=__webpack_require__(83),optioned=__webpack_require__(51),string=__webpack_require__(82)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AggConfig}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__),_kbn_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_agg_params__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(37);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class AggConfig{static ensureIds(list){const have=[],haveNot=[];list.forEach((function(obj){(obj.id?have:haveNot).push(obj)}));let nextId=AggConfig.nextId(have);return haveNot.forEach((function(obj){obj.id=String(nextId++)})),list}static nextId(list){return 1+list.reduce((function(max,obj){return Math.max(max,+obj.id||0)}),0)}constructor(aggConfigs,opts){_defineProperty(this,"aggConfigs",void 0),_defineProperty(this,"id",void 0),_defineProperty(this,"enabled",void 0),_defineProperty(this,"params",void 0),_defineProperty(this,"parent",void 0),_defineProperty(this,"brandNew",void 0),_defineProperty(this,"schema",void 0),_defineProperty(this,"__type",void 0),_defineProperty(this,"__typeDecorations",void 0),_defineProperty(this,"subAggs",[]),this.aggConfigs=aggConfigs,this.id=String(opts.id||AggConfig.nextId(aggConfigs.aggs)),this.enabled="boolean"!=typeof opts.enabled||opts.enabled,this.params={},this.setType(opts.type),opts.schema&&(this.schema=opts.schema),this.setParams(opts.params||{}),this.__type=this.__type}setParams(from){from=from||this.params||{};const to=this.params={};this.getAggParams().forEach(aggParam=>{let val=from[aggParam.name];if(null==val){if(null==aggParam.default)return;if(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isFunction(aggParam.default)){if(val=aggParam.default(this),null==val)return}else val=aggParam.default}if(aggParam.deserialize){const isTyped=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isFunction(aggParam.valueType),isType=isTyped&&val instanceof aggParam.valueType,isObject=!isTyped&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isObject(val);return isType||isObject||(val=aggParam.deserialize(val,this)),void(to[aggParam.name]=val)}to[aggParam.name]=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.cloneDeep(val)})}getParam(key){return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.params,key)}write(aggs){return Object(_agg_params__WEBPACK_IMPORTED_MODULE_2__.d)(this.type.params,this,aggs)}isFilterable(){return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isFunction(this.type.createFilter)}createFilter(key,params={}){const createFilter=this.type.createFilter;if(!createFilter)throw new TypeError(`The "${this.type.title}" aggregation does not support filtering.`);const field=this.getField(),label=this.getFieldDisplayName();if(field&&!field.filterable){let message=`The "${label}" field can not be used for filtering.`;throw field.scripted&&(message=`The "${label}" field is scripted and can not be used for filtering.`),new TypeError(message)}return createFilter(this,key,params)}onSearchRequestStart(searchSource,options){return this.type?Promise.all(this.type.params.map(param=>param.modifyAggConfigOnSearchRequestStart(this,searchSource,options))):Promise.resolve()}toDsl(aggConfigs){if(this.type.hasNoDsl)return;const output=this.write(aggConfigs),configDsl={};if(this.type.hasNoDslParams||(configDsl[this.type.dslName||this.type.name]=output.params),this.subAggs.length&&(output.subAggs?output.subAggs.push(...this.subAggs):output.subAggs=this.subAggs),output.subAggs){const subDslLvl=configDsl.aggs||(configDsl.aggs={});output.subAggs.forEach((function(subAggConfig){subDslLvl[subAggConfig.id]=subAggConfig.toDsl(aggConfigs)}))}if(output.parentAggs){const subDslLvl=configDsl.parentAggs||(configDsl.parentAggs={});output.parentAggs.forEach((function(subAggConfig){subDslLvl[subAggConfig.id]=subAggConfig.toDsl(aggConfigs)}))}return configDsl}serialize(){const params=this.params,outParams=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.transform(this.getAggParams(),(out,aggParam)=>{let val=params[aggParam.name];null!=val&&(aggParam.serialize&&(val=aggParam.serialize(val,this)),null!=val&&(out[aggParam.name]=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.cloneDeep(val)))},{});return{id:this.id,enabled:this.enabled,type:this.type&&this.type.name,params:outParams,...this.schema&&{schema:this.schema}}}toJSON(){return this.serialize()}toSerializedFieldFormat(){return this.type?this.type.getSerializedFormat(this):{}}toExpressionAst(){const functionName=this.type&&this.type.expressionName,{type:type,...rest}=this.serialize();if(!functionName||!rest.params)return;return{type:"expression",chain:[{type:"function",function:functionName,arguments:{...Object.entries(rest.params).reduce((acc,[key,value])=>{const deserializedParam=this.getAggParams().find(p=>p.name===key);if(deserializedParam&&deserializedParam.toExpressionAst){const paramExpressionAst=deserializedParam.toExpressionAst(this.getParam(key));paramExpressionAst&&(acc[key]=[paramExpressionAst])}else if(value&&Array.isArray(value)){const definedValues=value.filter(v=>null!=v);acc[key]="object"==typeof definedValues[0]?[JSON.stringify(definedValues)]:definedValues}else"object"==typeof value?acc[key]=[JSON.stringify(value)]:void 0!==value&&(acc[key]=[value]);return acc},{}),id:[this.id],enabled:[this.enabled],...this.schema?{schema:[this.schema]}:{}}}]}}getAggParams(){return[...lodash__WEBPACK_IMPORTED_MODULE_0___default.a.hasIn(this,"type.params")?this.type.params:[]]}getRequestAggs(){return this.type&&this.type.getRequestAggs(this)||[this]}getResponseAggs(){return this.type&&this.type.getResponseAggs(this)||[this]}getValue(bucket){return this.type.getValue(this,bucket)}getKey(bucket,key){return this.type.getKey?this.type.getKey(bucket,key,this):""}getFieldDisplayName(){const field=this.getField();return field?field.displayName||this.fieldName():""}getField(){return this.params.field}getValueBucketPath(){return this.type.getValueBucketPath(this)}makeLabel(percentageMode=!1){return this.params.customLabel?this.params.customLabel:this.type?percentageMode?_kbn_i18n__WEBPACK_IMPORTED_MODULE_1__.i18n.translate("data.search.aggs.percentageOfLabel",{defaultMessage:"Percentage of {label}",values:{label:this.type.makeLabel(this)}}):""+this.type.makeLabel(this):""}getIndexPattern(){return this.aggConfigs.indexPattern}getTimeRange(){return this.aggConfigs.timeRange}fieldName(){const field=this.getField();return field?field.name:""}fieldIsTimeField(){var _this$getIndexPattern,_this$getIndexPattern2,_this$getIndexPattern3;const defaultTimeField=null===(_this$getIndexPattern=this.getIndexPattern())||void 0===_this$getIndexPattern||null===(_this$getIndexPattern2=_this$getIndexPattern.getTimeField)||void 0===_this$getIndexPattern2||null===(_this$getIndexPattern3=_this$getIndexPattern2.call(_this$getIndexPattern))||void 0===_this$getIndexPattern3?void 0:_this$getIndexPattern3.name,defaultTimeFields=defaultTimeField?[defaultTimeField]:[],allTimeFields=this.aggConfigs.timeFields&&this.aggConfigs.timeFields.length>0?this.aggConfigs.timeFields:defaultTimeFields,currentFieldName=this.fieldName();return allTimeFields.includes(currentFieldName)}get type(){return this.__type}set type(type){this.__typeDecorations&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forOwn(this.__typeDecorations,(prop,name)=>{delete this[name]}),type&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isFunction(type.decorateAggConfig)&&(this.__typeDecorations=type.decorateAggConfig(),Object.defineProperties(this,this.__typeDecorations)),this.__type=type;let availableFields=[];const fieldParam=this.type&&this.type.params.find(p=>"field"===p.type);fieldParam&&(availableFields=fieldParam.getAvailableFields(this)),this.setParams({field:availableFields.find(field=>field.name===this.getField())})}setType(type){this.type=type}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"esFilters",(function(){return esFilters})),__webpack_require__.d(__webpack_exports__,"esKuery",(function(){return esKuery})),__webpack_require__.d(__webpack_exports__,"esQuery",(function(){return esQuery})),__webpack_require__.d(__webpack_exports__,"EsQueryConfig",(function(){return common.EsQueryConfig})),__webpack_require__.d(__webpack_exports__,"KueryNode",(function(){return common.KueryNode})),__webpack_require__.d(__webpack_exports__,"baseFormattersPublic",(function(){return baseFormattersPublic})),__webpack_require__.d(__webpack_exports__,"FieldFormatsStart",(function(){})),__webpack_require__.d(__webpack_exports__,"fieldFormats",(function(){return public_fieldFormats})),__webpack_require__.d(__webpack_exports__,"IFieldFormat",(function(){return common.IFieldFormat})),__webpack_require__.d(__webpack_exports__,"FieldFormatInstanceType",(function(){return common.FieldFormatInstanceType})),__webpack_require__.d(__webpack_exports__,"IFieldFormatsRegistry",(function(){return common.IFieldFormatsRegistry})),__webpack_require__.d(__webpack_exports__,"FieldFormatsContentType",(function(){return common.FieldFormatsContentType})),__webpack_require__.d(__webpack_exports__,"FieldFormatsGetConfigFn",(function(){return common.FieldFormatsGetConfigFn})),__webpack_require__.d(__webpack_exports__,"FieldFormatConfig",(function(){return common.FieldFormatConfig})),__webpack_require__.d(__webpack_exports__,"FieldFormatId",(function(){return common.FieldFormatId})),__webpack_require__.d(__webpack_exports__,"FieldFormat",(function(){return common.FieldFormat})),__webpack_require__.d(__webpack_exports__,"exporters",(function(){return exporters})),__webpack_require__.d(__webpack_exports__,"indexPatterns",(function(){return public_indexPatterns})),__webpack_require__.d(__webpack_exports__,"IndexPatternsContract",(function(){})),__webpack_require__.d(__webpack_exports__,"IndexPattern",(function(){return index_patterns.a})),__webpack_require__.d(__webpack_exports__,"IIndexPatternFieldList",(function(){return common_index_patterns.IIndexPatternFieldList})),__webpack_require__.d(__webpack_exports__,"IndexPatternField",(function(){return common_index_patterns.IndexPatternField})),__webpack_require__.d(__webpack_exports__,"IIndexPattern",(function(){return common.IIndexPattern})),__webpack_require__.d(__webpack_exports__,"IFieldType",(function(){return common.IFieldType})),__webpack_require__.d(__webpack_exports__,"IFieldSubType",(function(){return common.IFieldSubType})),__webpack_require__.d(__webpack_exports__,"ES_FIELD_TYPES",(function(){return common.ES_FIELD_TYPES})),__webpack_require__.d(__webpack_exports__,"KBN_FIELD_TYPES",(function(){return common.KBN_FIELD_TYPES})),__webpack_require__.d(__webpack_exports__,"IndexPatternAttributes",(function(){return common.IndexPatternAttributes})),__webpack_require__.d(__webpack_exports__,"UI_SETTINGS",(function(){return common.UI_SETTINGS})),__webpack_require__.d(__webpack_exports__,"IndexPatternTypeMeta",(function(){return common.TypeMeta})),__webpack_require__.d(__webpack_exports__,"IndexPatternAggRestrictions",(function(){return common.AggregationRestrictions})),__webpack_require__.d(__webpack_exports__,"IndexPatternSpec",(function(){return common.IndexPatternSpec})),__webpack_require__.d(__webpack_exports__,"IndexPatternLoadExpressionFunctionDefinition",(function(){return common.IndexPatternLoadExpressionFunctionDefinition})),__webpack_require__.d(__webpack_exports__,"fieldList",(function(){return common.fieldList})),__webpack_require__.d(__webpack_exports__,"DuplicateIndexPatternError",(function(){return errors.a})),__webpack_require__.d(__webpack_exports__,"QuerySuggestion",(function(){return autocomplete.c})),__webpack_require__.d(__webpack_exports__,"QuerySuggestionTypes",(function(){return autocomplete.h})),__webpack_require__.d(__webpack_exports__,"QuerySuggestionGetFn",(function(){return autocomplete.f})),__webpack_require__.d(__webpack_exports__,"QuerySuggestionGetFnArgs",(function(){return autocomplete.g})),__webpack_require__.d(__webpack_exports__,"QuerySuggestionBasic",(function(){return autocomplete.d})),__webpack_require__.d(__webpack_exports__,"QuerySuggestionField",(function(){return autocomplete.e})),__webpack_require__.d(__webpack_exports__,"AutocompleteStart",(function(){return autocomplete.b})),__webpack_require__.d(__webpack_exports__,"AggConfigSerialized",(function(){return common.AggConfigSerialized})),__webpack_require__.d(__webpack_exports__,"AggGroupLabels",(function(){return common.AggGroupLabels})),__webpack_require__.d(__webpack_exports__,"AggGroupName",(function(){return common.AggGroupName})),__webpack_require__.d(__webpack_exports__,"AggGroupNames",(function(){return common.AggGroupNames})),__webpack_require__.d(__webpack_exports__,"AggFunctionsMapping",(function(){return common.AggFunctionsMapping})),__webpack_require__.d(__webpack_exports__,"AggParam",(function(){return common.AggParam})),__webpack_require__.d(__webpack_exports__,"AggParamOption",(function(){return common.AggParamOption})),__webpack_require__.d(__webpack_exports__,"AggParamType",(function(){return common.AggParamType})),__webpack_require__.d(__webpack_exports__,"AggConfigOptions",(function(){return common.AggConfigOptions})),__webpack_require__.d(__webpack_exports__,"BUCKET_TYPES",(function(){return common.BUCKET_TYPES})),__webpack_require__.d(__webpack_exports__,"EsaggsExpressionFunctionDefinition",(function(){return common.EsaggsExpressionFunctionDefinition})),__webpack_require__.d(__webpack_exports__,"IAggConfig",(function(){return common.IAggConfig})),__webpack_require__.d(__webpack_exports__,"IAggConfigs",(function(){return common.IAggConfigs})),__webpack_require__.d(__webpack_exports__,"IAggType",(function(){return common.IAggType})),__webpack_require__.d(__webpack_exports__,"IFieldParamType",(function(){return common.IFieldParamType})),__webpack_require__.d(__webpack_exports__,"IMetricAggType",(function(){return common.IMetricAggType})),__webpack_require__.d(__webpack_exports__,"METRIC_TYPES",(function(){return common.METRIC_TYPES})),__webpack_require__.d(__webpack_exports__,"OptionedParamType",(function(){return common.OptionedParamType})),__webpack_require__.d(__webpack_exports__,"OptionedValueProp",(function(){return common.OptionedValueProp})),__webpack_require__.d(__webpack_exports__,"ParsedInterval",(function(){return common.ParsedInterval})),__webpack_require__.d(__webpack_exports__,"ExecutionContextSearch",(function(){return common.ExecutionContextSearch})),__webpack_require__.d(__webpack_exports__,"ExpressionFunctionKibana",(function(){return common.ExpressionFunctionKibana})),__webpack_require__.d(__webpack_exports__,"ExpressionFunctionKibanaContext",(function(){return common.ExpressionFunctionKibanaContext})),__webpack_require__.d(__webpack_exports__,"ExpressionValueSearchContext",(function(){return common.ExpressionValueSearchContext})),__webpack_require__.d(__webpack_exports__,"KibanaContext",(function(){return common.KibanaContext})),__webpack_require__.d(__webpack_exports__,"ES_SEARCH_STRATEGY",(function(){return common_search.ES_SEARCH_STRATEGY})),__webpack_require__.d(__webpack_exports__,"EsQuerySortValue",(function(){return common_search.EsQuerySortValue})),__webpack_require__.d(__webpack_exports__,"extractSearchSourceReferences",(function(){return common_search.extractReferences})),__webpack_require__.d(__webpack_exports__,"getEsPreference",(function(){return getEsPreference})),__webpack_require__.d(__webpack_exports__,"getSearchParamsFromRequest",(function(){return common_search.getSearchParamsFromRequest})),__webpack_require__.d(__webpack_exports__,"IEsSearchRequest",(function(){return common_search.IEsSearchRequest})),__webpack_require__.d(__webpack_exports__,"IEsSearchResponse",(function(){return common_search.IEsSearchResponse})),__webpack_require__.d(__webpack_exports__,"IKibanaSearchRequest",(function(){return common_search.IKibanaSearchRequest})),__webpack_require__.d(__webpack_exports__,"IKibanaSearchResponse",(function(){return common_search.IKibanaSearchResponse})),__webpack_require__.d(__webpack_exports__,"injectSearchSourceReferences",(function(){return common_search.injectReferences})),__webpack_require__.d(__webpack_exports__,"ISearchSetup",(function(){})),__webpack_require__.d(__webpack_exports__,"ISearchStart",(function(){})),__webpack_require__.d(__webpack_exports__,"ISearchStartSearchSource",(function(){return common_search.ISearchStartSearchSource})),__webpack_require__.d(__webpack_exports__,"ISearchGeneric",(function(){return common_search.ISearchGeneric})),__webpack_require__.d(__webpack_exports__,"ISearchSource",(function(){return common_search.ISearchSource})),__webpack_require__.d(__webpack_exports__,"parseSearchSourceJSON",(function(){return common_search.parseSearchSourceJSON})),__webpack_require__.d(__webpack_exports__,"SearchInterceptor",(function(){return search_interceptor_SearchInterceptor})),__webpack_require__.d(__webpack_exports__,"SearchInterceptorDeps",(function(){})),__webpack_require__.d(__webpack_exports__,"SearchRequest",(function(){return common_search.SearchRequest})),__webpack_require__.d(__webpack_exports__,"SearchSourceFields",(function(){return common_search.SearchSourceFields})),__webpack_require__.d(__webpack_exports__,"SortDirection",(function(){return common_search.SortDirection})),__webpack_require__.d(__webpack_exports__,"SearchSessionState",(function(){return SearchSessionState})),__webpack_require__.d(__webpack_exports__,"EsdslExpressionFunctionDefinition",(function(){})),__webpack_require__.d(__webpack_exports__,"EsRawResponseExpressionTypeDefinition",(function(){})),__webpack_require__.d(__webpack_exports__,"IEsError",(function(){})),__webpack_require__.d(__webpack_exports__,"SearchError",(function(){return common_search.SearchError})),__webpack_require__.d(__webpack_exports__,"SearchTimeoutError",(function(){return timeout_error_SearchTimeoutError})),__webpack_require__.d(__webpack_exports__,"TimeoutErrorMode",(function(){return TimeoutErrorMode})),__webpack_require__.d(__webpack_exports__,"PainlessError",(function(){return painless_error_PainlessError})),__webpack_require__.d(__webpack_exports__,"Reason",(function(){})),__webpack_require__.d(__webpack_exports__,"noSearchSessionStorageCapabilityMessage",(function(){return noSearchSessionStorageCapabilityMessage})),__webpack_require__.d(__webpack_exports__,"SEARCH_SESSIONS_MANAGEMENT_ID",(function(){return SEARCH_SESSIONS_MANAGEMENT_ID})),__webpack_require__.d(__webpack_exports__,"waitUntilNextSessionCompletes$",(function(){return waitUntilNextSessionCompletes$})),__webpack_require__.d(__webpack_exports__,"WaitUntilNextSessionCompletesOptions",(function(){})),__webpack_require__.d(__webpack_exports__,"isEsError",(function(){return isEsError})),__webpack_require__.d(__webpack_exports__,"ISearchOptions",(function(){return common.ISearchOptions})),__webpack_require__.d(__webpack_exports__,"isErrorResponse",(function(){return common.isErrorResponse})),__webpack_require__.d(__webpack_exports__,"isCompleteResponse",(function(){return common.isCompleteResponse})),__webpack_require__.d(__webpack_exports__,"isPartialResponse",(function(){return common.isPartialResponse})),__webpack_require__.d(__webpack_exports__,"search",(function(){return public_search})),__webpack_require__.d(__webpack_exports__,"SearchBar",(function(){return ui.e})),__webpack_require__.d(__webpack_exports__,"SearchBarProps",(function(){return ui.f})),__webpack_require__.d(__webpack_exports__,"StatefulSearchBarProps",(function(){return ui.g})),__webpack_require__.d(__webpack_exports__,"IndexPatternSelectProps",(function(){return ui.b})),__webpack_require__.d(__webpack_exports__,"QueryStringInput",(function(){return ui.c})),__webpack_require__.d(__webpack_exports__,"QueryStringInputProps",(function(){return ui.d})),__webpack_require__.d(__webpack_exports__,"Filter",(function(){return common.Filter})),__webpack_require__.d(__webpack_exports__,"Query",(function(){return common.Query})),__webpack_require__.d(__webpack_exports__,"RefreshInterval",(function(){return common.RefreshInterval})),__webpack_require__.d(__webpack_exports__,"TimeRange",(function(){return common.TimeRange})),__webpack_require__.d(__webpack_exports__,"createSavedQueryService",(function(){return public_query.q})),__webpack_require__.d(__webpack_exports__,"connectToQueryState",(function(){return public_query.o})),__webpack_require__.d(__webpack_exports__,"syncQueryStateWithUrl",(function(){return public_query.A})),__webpack_require__.d(__webpack_exports__,"QueryState",(function(){return public_query.f})),__webpack_require__.d(__webpack_exports__,"getDefaultQuery",(function(){return public_query.v})),__webpack_require__.d(__webpack_exports__,"FilterManager",(function(){return public_query.b})),__webpack_require__.d(__webpack_exports__,"SavedQuery",(function(){return public_query.h})),__webpack_require__.d(__webpack_exports__,"SavedQueryService",(function(){return public_query.i})),__webpack_require__.d(__webpack_exports__,"SavedQueryTimeFilter",(function(){return public_query.j})),__webpack_require__.d(__webpack_exports__,"InputTimeRange",(function(){return public_query.InputTimeRange})),__webpack_require__.d(__webpack_exports__,"TimeHistory",(function(){return public_query.k})),__webpack_require__.d(__webpack_exports__,"TimefilterContract",(function(){return public_query.m})),__webpack_require__.d(__webpack_exports__,"TimeHistoryContract",(function(){return public_query.l})),__webpack_require__.d(__webpack_exports__,"QueryStateChange",(function(){return public_query.g})),__webpack_require__.d(__webpack_exports__,"QueryStart",(function(){return public_query.QueryStart})),__webpack_require__.d(__webpack_exports__,"AutoRefreshDoneFn",(function(){return public_query.a})),__webpack_require__.d(__webpack_exports__,"AggsStart",(function(){return common.AggsStart})),__webpack_require__.d(__webpack_exports__,"getTime",(function(){return common.getTime})),__webpack_require__.d(__webpack_exports__,"castEsToKbnFieldTypeName",(function(){return common.castEsToKbnFieldTypeName})),__webpack_require__.d(__webpack_exports__,"getKbnTypeNames",(function(){return common.getKbnTypeNames})),__webpack_require__.d(__webpack_exports__,"isTimeRange",(function(){return common.isTimeRange})),__webpack_require__.d(__webpack_exports__,"isQuery",(function(){return common.isQuery})),__webpack_require__.d(__webpack_exports__,"isFilter",(function(){return common.isFilter})),__webpack_require__.d(__webpack_exports__,"isFilters",(function(){return common.isFilters})),__webpack_require__.d(__webpack_exports__,"ACTION_GLOBAL_APPLY_FILTER",(function(){return ACTION_GLOBAL_APPLY_FILTER})),__webpack_require__.d(__webpack_exports__,"ApplyGlobalFilterActionContext",(function(){})),__webpack_require__.d(__webpack_exports__,"APPLY_FILTER_TRIGGER",(function(){return APPLY_FILTER_TRIGGER})),__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin})),__webpack_require__.d(__webpack_exports__,"DataPublicPluginSetup",(function(){return public_types.DataPublicPluginSetup})),__webpack_require__.d(__webpack_exports__,"DataPublicPluginStart",(function(){return public_types.DataPublicPluginStart})),__webpack_require__.d(__webpack_exports__,"IDataPluginServices",(function(){return public_types.IDataPluginServices})),__webpack_require__.d(__webpack_exports__,"DataPublicPluginStartUi",(function(){return public_types.DataPublicPluginStartUi})),__webpack_require__.d(__webpack_exports__,"DataPublicPluginStartActions",(function(){return public_types.DataPublicPluginStartActions})),__webpack_require__.d(__webpack_exports__,"Plugin",(function(){return plugin_DataPublicPlugin}));var common=__webpack_require__(1),ui=__webpack_require__(36),filter_bar=__webpack_require__(72),public_query=__webpack_require__(15),field_formats=__webpack_require__(13),external_kbnSharedDeps_Lodash_=__webpack_require__(2),search_aggs=__webpack_require__(30),services=__webpack_require__(19);const deserialize_getConfig=(key,defaultOverride)=>Object(services.e)().get(key,defaultOverride),DefaultFieldFormat=common.FieldFormat.from(external_kbnSharedDeps_Lodash_.identity),deserializeFieldFormat=function(serializedFieldFormat){if(!serializedFieldFormat)return new DefaultFieldFormat;return Object(search_aggs.yc)(mapping=>{const{id:id,params:params={}}=mapping;if(id){const Format=this.getType(id);if(Format)return new Format(params,deserialize_getConfig)}return new DefaultFieldFormat})(serializedFieldFormat)};var external_kbnSharedDeps_KbnI18n_=__webpack_require__(0),external_kbnSharedDeps_Moment_=__webpack_require__(5),external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class date_DateFormat extends common.FieldFormat{constructor(...args){super(...args),_defineProperty(this,"memoizedConverter",external_kbnSharedDeps_Lodash_.noop),_defineProperty(this,"memoizedPattern",""),_defineProperty(this,"timeZone",""),_defineProperty(this,"textConvert",val=>{const pattern=this.param("pattern"),timezone=this.param("timezone"),timezoneChanged=this.timeZone!==timezone,datePatternChanged=this.memoizedPattern!==pattern;return(timezoneChanged||datePatternChanged)&&(this.timeZone=timezone,this.memoizedPattern=pattern,this.memoizedConverter=Object(external_kbnSharedDeps_Lodash_.memoize)((function(value){if(null==value)return"-";const date=external_kbnSharedDeps_Moment_default()(value);return date.isValid()?date.format(pattern):value}))),this.memoizedConverter(val)})}getParamDefaults(){return{pattern:this.getConfig("dateFormat"),timezone:this.getConfig("dateFormat:tz")}}}function date_nanos_shared_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}_defineProperty(date_DateFormat,"id",common.FIELD_FORMAT_IDS.DATE),_defineProperty(date_DateFormat,"title",external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.date.title",{defaultMessage:"Date"})),_defineProperty(date_DateFormat,"fieldType",common.KBN_FIELD_TYPES.DATE);class date_nanos_shared_DateNanosFormat extends common.FieldFormat{constructor(...args){super(...args),date_nanos_shared_defineProperty(this,"memoizedConverter",external_kbnSharedDeps_Lodash_.noop),date_nanos_shared_defineProperty(this,"memoizedPattern",""),date_nanos_shared_defineProperty(this,"timeZone",""),date_nanos_shared_defineProperty(this,"textConvert",val=>{const pattern=this.param("pattern"),timezone=this.param("timezone"),fractPattern=function(pattern){const fracSecMatch=pattern.match("S+"),fracSecMatchStr=fracSecMatch?fracSecMatch[0]:"";return{length:fracSecMatchStr.length,patternNanos:fracSecMatchStr,pattern:pattern,patternEscaped:fracSecMatchStr?pattern.replace(fracSecMatch,`[${fracSecMatch}]`):""}}(pattern),fallbackPattern=this.param("patternFallback"),timezoneChanged=this.timeZone!==timezone,datePatternChanged=this.memoizedPattern!==pattern;return(timezoneChanged||datePatternChanged)&&(this.timeZone=timezone,this.memoizedPattern=pattern,this.memoizedConverter=Object(external_kbnSharedDeps_Lodash_.memoize)((function(value){if(null==value)return"-";const date=external_kbnSharedDeps_Moment_default()(value);return"string"!=typeof value&&date.isValid()?date.format(fallbackPattern):date.isValid()?function(dateMomentObj,valRaw,fracPatternObj){if(fracPatternObj.length<=3)return dateMomentObj.format(fracPatternObj.pattern);{const valFormatted=dateMomentObj.format(fracPatternObj.patternEscaped),valNanos=valRaw.substr(20,valRaw.length-21).padEnd(9,"0").substr(0,fracPatternObj.patternNanos.length);return valFormatted.replace(fracPatternObj.patternNanos,valNanos)}}(date,value,fractPattern):value}))),this.memoizedConverter(val)})}getParamDefaults(){return{pattern:this.getConfig("dateNanosFormat"),fallbackPattern:this.getConfig("dateFormat"),timezone:this.getConfig("dateFormat:tz")}}}date_nanos_shared_defineProperty(date_nanos_shared_DateNanosFormat,"id",common.FIELD_FORMAT_IDS.DATE_NANOS),date_nanos_shared_defineProperty(date_nanos_shared_DateNanosFormat,"title",external_kbnSharedDeps_KbnI18n_.i18n.translate("data.fieldFormats.date_nanos.title",{defaultMessage:"Date nanos"})),date_nanos_shared_defineProperty(date_nanos_shared_DateNanosFormat,"fieldType",common.KBN_FIELD_TYPES.DATE);const baseFormattersPublic=[date_DateFormat,date_nanos_shared_DateNanosFormat,...common.baseFormatters];class field_formats_service_FieldFormatsService{constructor(){var obj,key,value;obj=this,key="fieldFormatsRegistry",value=new common.FieldFormatsRegistry,key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}setup(core){core.uiSettings.getUpdate$().subscribe(({key:key,newValue:newValue})=>{key===common.UI_SETTINGS.FORMAT_DEFAULT_TYPE_MAP&&this.fieldFormatsRegistry.parseDefaultTypeMap(newValue)});const getConfig=core.uiSettings.get.bind(core.uiSettings);return this.fieldFormatsRegistry.init(getConfig,{parsedUrl:{origin:window.location.origin,pathname:window.location.pathname,basePath:core.http.basePath.get()}},baseFormattersPublic),this.fieldFormatsRegistry}start(){return this.fieldFormatsRegistry.deserialize=deserializeFieldFormat.bind(this.fieldFormatsRegistry),this.fieldFormatsRegistry}}var lib=__webpack_require__(29),index_patterns=__webpack_require__(59),external_kbnSharedDeps_ElasticEui_=__webpack_require__(11),external_kbnSharedDeps_React_=__webpack_require__(3),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),public_=__webpack_require__(25);let bannerId;const onRedirectNoIndexPattern=(capabilities,navigateToApp,overlays)=>()=>{const redirectTarget=capabilities.management.kibana.indexPatterns?"/management/kibana/indexPatterns":"/home";let timeoutId;timeoutId&&clearTimeout(timeoutId);const bannerMessage=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.indexPatterns.ensureDefaultIndexPattern.bannerLabel",{defaultMessage:"To visualize and explore data in Kibana, you must create an index pattern to retrieve data from Elasticsearch."});return bannerId=overlays.banners.replace(bannerId,Object(public_.toMountPoint)(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{color:"warning",iconType:"iInCircle",title:bannerMessage}))),timeoutId=setTimeout(()=>{overlays.banners.remove(bannerId),timeoutId=void 0},15e3),"/home"===redirectTarget?navigateToApp("home"):navigateToApp("management",{path:"/kibana/indexPatterns?bannerMessage="+bannerMessage}),new Promise(()=>{})};var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(16);class index_patterns_api_client_IndexPatternsApiClient{constructor(http){var obj,key,value;value=void 0,(key="http")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this.http=http}_request(url,query){return this.http.fetch(url,{query:query}).catch(resp=>{var _resp$body$attributes;if(404===resp.body.statusCode&&"no_matching_indices"===(null===(_resp$body$attributes=resp.body.attributes)||void 0===_resp$body$attributes?void 0:_resp$body$attributes.code))throw new lib.e(resp.body.message);throw new Error(resp.body.message||resp.body.error||resp.body.statusCode+" Response")})}_getUrl(path){return"/api/index_patterns/"+path.filter(Boolean).map(encodeURIComponent).join("/")}getFieldsForTimePattern(options){const{pattern:pattern,lookBack:lookBack,metaFields:metaFields}=options,url=this._getUrl(["_fields_for_time_pattern"]);return this._request(url,{pattern:pattern,look_back:lookBack,meta_fields:metaFields}).then(resp=>resp.fields)}getFieldsForWildcard({pattern:pattern,metaFields:metaFields,type:type,rollupIndex:rollupIndex,allowNoIndex:allowNoIndex}){return this._request(this._getUrl(["_fields_for_wildcard"]),{pattern:pattern,meta_fields:metaFields,type:type,rollup_index:rollupIndex,allow_no_index:allowNoIndex}).then(resp=>resp.fields||[])}}var common_index_patterns=__webpack_require__(57);class UiSettingsPublicToCommon{constructor(uiSettings){var obj,key,value;value=void 0,(key="uiSettings")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this.uiSettings=uiSettings}get(key){return Promise.resolve(this.uiSettings.get(key))}getAll(){return Promise.resolve(this.uiSettings.getAll())}set(key,value){return this.uiSettings.set(key,value),Promise.resolve()}remove(key){return this.uiSettings.remove(key),Promise.resolve()}}const simpleSavedObjectToSavedObject=simpleSavedObject=>({version:simpleSavedObject._version,...Object(external_kbnSharedDeps_Lodash_.omit)(simpleSavedObject,"_version")});class SavedObjectsClientPublicToCommon{constructor(savedObjectClient){var obj,key,value;value=void 0,(key="savedObjectClient")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this.savedObjectClient=savedObjectClient}async find(options){return(await this.savedObjectClient.find(options)).savedObjects.map(simpleSavedObjectToSavedObject)}async get(type,id){const response=await this.savedObjectClient.get(type,id);return simpleSavedObjectToSavedObject(response)}async update(type,id,attributes,options){const response=await this.savedObjectClient.update(type,id,attributes,options);return simpleSavedObjectToSavedObject(response)}async create(type,attributes,options){const response=await this.savedObjectClient.create(type,attributes,options);return simpleSavedObjectToSavedObject(response)}delete(type,id){return this.savedObjectClient.delete(type,id)}}var errors=__webpack_require__(53),autocomplete=__webpack_require__(35),search_expressions=__webpack_require__(38);function getEsaggs({getStartServices:getStartServices}){return function({getStartDependencies:getStartDependencies}){return()=>({...Object(search_expressions.f)(),async fn(input,args,{inspectorAdapters:inspectorAdapters,abortSignal:abortSignal,getSearchSessionId:getSearchSessionId}){const{aggs:aggs,indexPatterns:indexPatterns,searchSource:searchSource,getNow:getNow}=await getStartDependencies(),indexPattern=await indexPatterns.create(args.index.value,!0),aggConfigs=aggs.createAggConfigs(indexPattern,args.aggs.map(agg=>agg.value));return aggConfigs.hierarchical=args.metricsAtAllLevels,await Object(search_expressions.i)({abortSignal:abortSignal,aggs:aggConfigs,filters:Object(external_kbnSharedDeps_Lodash_.get)(input,"filters",void 0),indexPattern:indexPattern,inspectorAdapters:inspectorAdapters,partialRows:args.partialRows,query:Object(external_kbnSharedDeps_Lodash_.get)(input,"query",void 0),searchSessionId:getSearchSessionId(),searchSourceService:searchSource,timeFields:args.timeFields,timeRange:Object(external_kbnSharedDeps_Lodash_.get)(input,"timeRange",void 0),getNow:getNow})}})}({getStartDependencies:async()=>{const[,,self]=await getStartServices(),{indexPatterns:indexPatterns,search:search,nowProvider:nowProvider}=self;return{aggs:search.aggs,indexPatterns:indexPatterns,searchSource:search.searchSource,getNow:()=>nowProvider.get()}}})}var esdsl=__webpack_require__(84);var external_kbnSharedDeps_RxjsOperators_=__webpack_require__(6),usageCollection_public_=__webpack_require__(24);let SEARCH_EVENT_TYPE;!function(SEARCH_EVENT_TYPE){SEARCH_EVENT_TYPE.QUERY_TIMED_OUT="queryTimedOut",SEARCH_EVENT_TYPE.SESSION_INDICATOR_TOUR_LOADING="sessionIndicatorTourLoading",SEARCH_EVENT_TYPE.SESSION_INDICATOR_TOUR_RESTORED="sessionIndicatorTourRestored",SEARCH_EVENT_TYPE.SESSION_INDICATOR_SAVE_DISABLED="sessionIndicatorSaveDisabled",SEARCH_EVENT_TYPE.SESSION_SENT_TO_BACKGROUND="sessionSentToBackground",SEARCH_EVENT_TYPE.SESSION_SAVED_RESULTS="sessionSavedResults",SEARCH_EVENT_TYPE.SESSION_VIEW_RESTORED="sessionViewRestored",SEARCH_EVENT_TYPE.SESSION_IS_RESTORED="sessionIsRestored",SEARCH_EVENT_TYPE.SESSION_RELOADED="sessionReloaded",SEARCH_EVENT_TYPE.SESSION_EXTENDED="sessionExtended",SEARCH_EVENT_TYPE.SESSION_CANCELLED="sessionCancelled",SEARCH_EVENT_TYPE.SESSION_DELETED="sessionDeleted",SEARCH_EVENT_TYPE.SESSION_VIEW_LIST="sessionViewList",SEARCH_EVENT_TYPE.SESSIONS_LIST_LOADED="sessionsListLoaded"}(SEARCH_EVENT_TYPE||(SEARCH_EVENT_TYPE={}));const createUsageCollector=(getStartServices,usageCollection)=>{const getCollector=(metricType,eventType)=>async()=>{const currentApp=await(async()=>{const[{application:application}]=await getStartServices();return application.currentAppId$.pipe(Object(external_kbnSharedDeps_RxjsOperators_.first)()).toPromise()})();return null==usageCollection?void 0:usageCollection.reportUiCounter(currentApp,metricType,eventType)};return{trackQueryTimedOut:getCollector(usageCollection_public_.METRIC_TYPE.LOADED,SEARCH_EVENT_TYPE.QUERY_TIMED_OUT),trackSessionIndicatorTourLoading:getCollector(usageCollection_public_.METRIC_TYPE.LOADED,SEARCH_EVENT_TYPE.SESSION_INDICATOR_TOUR_LOADING),trackSessionIndicatorTourRestored:getCollector(usageCollection_public_.METRIC_TYPE.LOADED,SEARCH_EVENT_TYPE.SESSION_INDICATOR_TOUR_RESTORED),trackSessionIndicatorSaveDisabled:getCollector(usageCollection_public_.METRIC_TYPE.LOADED,SEARCH_EVENT_TYPE.SESSION_INDICATOR_SAVE_DISABLED),trackSessionSentToBackground:getCollector(usageCollection_public_.METRIC_TYPE.CLICK,SEARCH_EVENT_TYPE.SESSION_SENT_TO_BACKGROUND),trackSessionSavedResults:getCollector(usageCollection_public_.METRIC_TYPE.CLICK,SEARCH_EVENT_TYPE.SESSION_SAVED_RESULTS),trackSessionViewRestored:getCollector(usageCollection_public_.METRIC_TYPE.CLICK,SEARCH_EVENT_TYPE.SESSION_VIEW_RESTORED),trackSessionIsRestored:getCollector(usageCollection_public_.METRIC_TYPE.CLICK,SEARCH_EVENT_TYPE.SESSION_IS_RESTORED),trackSessionReloaded:getCollector(usageCollection_public_.METRIC_TYPE.CLICK,SEARCH_EVENT_TYPE.SESSION_RELOADED),trackSessionExtended:getCollector(usageCollection_public_.METRIC_TYPE.CLICK,SEARCH_EVENT_TYPE.SESSION_EXTENDED),trackSessionCancelled:getCollector(usageCollection_public_.METRIC_TYPE.CLICK,SEARCH_EVENT_TYPE.SESSION_CANCELLED),trackSessionDeleted:getCollector(usageCollection_public_.METRIC_TYPE.CLICK,SEARCH_EVENT_TYPE.SESSION_DELETED),trackViewSessionsList:getCollector(usageCollection_public_.METRIC_TYPE.CLICK,SEARCH_EVENT_TYPE.SESSION_VIEW_LIST),trackSessionsListLoaded:getCollector(usageCollection_public_.METRIC_TYPE.LOADED,SEARCH_EVENT_TYPE.SESSIONS_LIST_LOADED)}};var common_search=__webpack_require__(10),external_kbnSharedDeps_Rxjs_=__webpack_require__(9),uuid=__webpack_require__(134),uuid_default=__webpack_require__.n(uuid),fast_deep_equal=__webpack_require__(135),fast_deep_equal_default=__webpack_require__.n(fast_deep_equal),kibanaUtils_public_=__webpack_require__(23);let SearchSessionState;!function(SearchSessionState){SearchSessionState.None="none",SearchSessionState.Loading="loading",SearchSessionState.Completed="completed",SearchSessionState.BackgroundLoading="backgroundLoading",SearchSessionState.BackgroundCompleted="backgroundCompleted",SearchSessionState.Restored="restored",SearchSessionState.Canceled="canceled"}(SearchSessionState||(SearchSessionState={}));const sessionPureTransitions={start:state=>({appName:appName})=>({sessionId:void 0,appName:void 0,isStored:!1,isRestore:!1,isCanceled:!1,isStarted:!1,pendingSearches:[],sessionId:uuid_default.a.v4(),startTime:new Date,appName:appName}),restore:state=>sessionId=>({sessionId:void 0,appName:void 0,isStored:!1,isRestore:!1,isCanceled:!1,isStarted:!1,pendingSearches:[],sessionId:sessionId,isRestore:!0,isStored:!0}),clear:state=>()=>({sessionId:void 0,appName:void 0,isStored:!1,isRestore:!1,isCanceled:!1,isStarted:!1,pendingSearches:[]}),store:state=>searchSessionSavedObject=>{if(!state.sessionId)throw new Error("Can't store session. Missing sessionId");if(state.isStored||state.isRestore)throw new Error("Can't store because current session is already stored\"");return{...state,isStored:!0,searchSessionSavedObject:searchSessionSavedObject}},trackSearch:state=>search=>{if(!state.sessionId)throw new Error("Can't track search. Missing sessionId");return{...state,isStarted:!0,pendingSearches:state.pendingSearches.concat(search),completedTime:void 0}},unTrackSearch:state=>search=>{const pendingSearches=state.pendingSearches.filter(s=>s!==search);return{...state,pendingSearches:pendingSearches,completedTime:0===pendingSearches.length?new Date:state.completedTime}},cancel:state=>()=>{if(!state.sessionId)throw new Error("Can't cancel searches. Missing sessionId");if(state.isRestore)throw new Error("Can't cancel searches when restoring older searches");return{...state,pendingSearches:[],isCanceled:!0,canceledTime:new Date,isStored:!1,searchSessionSavedObject:void 0}},setSearchSessionSavedObject:state=>searchSessionSavedObject=>{if(!state.sessionId)throw new Error("Can't add search session saved object session into the state. Missing sessionId");if(state.sessionId!==searchSessionSavedObject.attributes.sessionId)throw new Error("Can't add search session saved object session into the state. SessionIds don't match.");return{...state,searchSessionSavedObject:searchSessionSavedObject}}},sessionPureSelectors={getState:state=>()=>{if(!state.sessionId)return SearchSessionState.None;if(!state.isStarted)return SearchSessionState.None;if(state.isCanceled)return SearchSessionState.Canceled;switch(!0){case state.isRestore:return state.pendingSearches.length>0?SearchSessionState.BackgroundLoading:SearchSessionState.Restored;case state.isStored:return state.pendingSearches.length>0?SearchSessionState.BackgroundLoading:SearchSessionState.BackgroundCompleted;default:return state.pendingSearches.length>0?SearchSessionState.Loading:SearchSessionState.Completed}return SearchSessionState.None},getMeta(state){const sessionState=this.getState(state)();return()=>{var _state$searchSessionS,_state$searchSessionS2,_state$searchSessionS3,_state$searchSessionS4,_state$searchSessionS5;return{state:sessionState,name:null===(_state$searchSessionS=state.searchSessionSavedObject)||void 0===_state$searchSessionS?void 0:_state$searchSessionS.attributes.name,startTime:null!==(_state$searchSessionS2=state.searchSessionSavedObject)&&void 0!==_state$searchSessionS2&&_state$searchSessionS2.attributes.created?new Date(null===(_state$searchSessionS3=state.searchSessionSavedObject)||void 0===_state$searchSessionS3?void 0:_state$searchSessionS3.attributes.created):state.startTime,completedTime:null!==(_state$searchSessionS4=state.searchSessionSavedObject)&&void 0!==_state$searchSessionS4&&_state$searchSessionS4.attributes.completed?new Date(null===(_state$searchSessionS5=state.searchSessionSavedObject)||void 0===_state$searchSessionS5?void 0:_state$searchSessionS5.attributes.completed):state.completedTime,canceledTime:state.canceledTime}}}},SEARCH_SESSIONS_MANAGEMENT_ID="search_sessions";function formatSessionName(sessionName,opts){return opts.sessionStartTime&&opts.appendStartTime&&(sessionName=function(sessionName,sessionStartTime){return`${sessionName} - ${external_kbnSharedDeps_Moment_default()(sessionStartTime).format("L @ LT")}`}(sessionName,opts.sessionStartTime)),sessionName}function session_service_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class session_service_SessionService{constructor(initializerContext,getStartServices,sessionsClient,nowProvider,{freezeState:freezeState=!0}={freezeState:!0}){this.sessionsClient=sessionsClient,this.nowProvider=nowProvider,session_service_defineProperty(this,"state$",void 0),session_service_defineProperty(this,"state",void 0),session_service_defineProperty(this,"sessionMeta$",void 0),session_service_defineProperty(this,"searchSessionInfoProvider",void 0),session_service_defineProperty(this,"searchSessionIndicatorUiConfig",void 0),session_service_defineProperty(this,"subscription",new external_kbnSharedDeps_Rxjs_.Subscription),session_service_defineProperty(this,"currentApp",void 0),session_service_defineProperty(this,"hasAccessToSearchSessions",!1),session_service_defineProperty(this,"toastService",void 0);const{stateContainer:stateContainer,sessionState$:sessionState$,sessionMeta$:sessionMeta$}=(({freeze:freeze=!0}={freeze:!0})=>{const stateContainer=Object(kibanaUtils_public_.createStateContainer)({sessionId:void 0,appName:void 0,isStored:!1,isRestore:!1,isCanceled:!1,isStarted:!1,pendingSearches:[]},sessionPureTransitions,sessionPureSelectors,freeze?void 0:{freeze:s=>s}),sessionMeta$=stateContainer.state$.pipe(Object(external_kbnSharedDeps_RxjsOperators_.map)(()=>stateContainer.selectors.getMeta()),Object(external_kbnSharedDeps_RxjsOperators_.distinctUntilChanged)(fast_deep_equal_default.a),Object(external_kbnSharedDeps_RxjsOperators_.shareReplay)(1)),sessionState$=sessionMeta$.pipe(Object(external_kbnSharedDeps_RxjsOperators_.map)(meta=>meta.state),Object(external_kbnSharedDeps_RxjsOperators_.distinctUntilChanged)());return{stateContainer:stateContainer,sessionState$:sessionState$,sessionMeta$:sessionMeta$}})({freeze:freezeState});this.state$=sessionState$,this.state=stateContainer,this.sessionMeta$=sessionMeta$,this.subscription.add(sessionMeta$.pipe(Object(external_kbnSharedDeps_RxjsOperators_.map)(meta=>meta.startTime),Object(external_kbnSharedDeps_RxjsOperators_.distinctUntilChanged)()).subscribe(startTime=>{startTime?this.nowProvider.set(startTime):this.nowProvider.reset()})),getStartServices().then(([coreStart])=>{var _coreStart$applicatio,_coreStart$applicatio2;this.hasAccessToSearchSessions=null===(_coreStart$applicatio=coreStart.application.capabilities.management)||void 0===_coreStart$applicatio||null===(_coreStart$applicatio2=_coreStart$applicatio.kibana)||void 0===_coreStart$applicatio2?void 0:_coreStart$applicatio2[SEARCH_SESSIONS_MANAGEMENT_ID],this.toastService=coreStart.notifications.toasts,this.subscription.add(coreStart.application.currentAppId$.subscribe(newAppName=>{if(this.currentApp=newAppName,!this.getSessionId())return;const message=`Application '${this.state.get().appName}' had an open session while navigating`;initializerContext.env.mode.dev?coreStart.fatalErrors.add(message):console.warn(message)}))})}hasAccess(){return this.hasAccessToSearchSessions}trackSearch(searchDescriptor){return this.state.transitions.trackSearch(searchDescriptor),()=>{this.state.transitions.unTrackSearch(searchDescriptor)}}destroy(){this.subscription.unsubscribe(),this.clear()}getSessionId(){return this.state.get().sessionId}getSession$(){return this.state.state$.pipe(Object(external_kbnSharedDeps_RxjsOperators_.startWith)(this.state.get()),Object(external_kbnSharedDeps_RxjsOperators_.map)(s=>s.sessionId),Object(external_kbnSharedDeps_RxjsOperators_.distinctUntilChanged)())}isStored(){return this.state.get().isStored}isRestore(){return this.state.get().isRestore}start(){if(!this.currentApp)throw new Error("this.currentApp is missing");return this.state.transitions.start({appName:this.currentApp}),this.getSessionId()}restore(sessionId){this.state.transitions.restore(sessionId),this.refreshSearchSessionSavedObject()}clear(){const currentSessionApp=this.state.get().appName;currentSessionApp&&currentSessionApp!==this.currentApp?console.warn(`Skip clearing session "${this.getSessionId()}" because it belongs to a different app. current: "${this.currentApp}", owner: "${currentSessionApp}"`):(this.state.transitions.clear(),this.searchSessionInfoProvider=void 0,this.searchSessionIndicatorUiConfig=void 0)}async cancel(){const isStoredSession=this.state.get().isStored;this.state.get().pendingSearches.forEach(s=>{s.abort()}),this.state.transitions.cancel(),isStoredSession&&await this.sessionsClient.delete(this.state.get().sessionId)}async save(){const sessionId=this.getSessionId();if(!sessionId)throw new Error("No current session");const currentSessionApp=this.state.get().appName;if(!currentSessionApp)throw new Error("No current session app");if(!this.hasAccess())throw new Error("No access to search sessions");const currentSessionInfoProvider=this.searchSessionInfoProvider;if(!currentSessionInfoProvider)throw new Error("No info provider for current session");const[name,{initialState:initialState,restoreState:restoreState,urlGeneratorId:urlGeneratorId}]=await Promise.all([currentSessionInfoProvider.getName(),currentSessionInfoProvider.getUrlGeneratorData()]),formattedName=formatSessionName(name,{sessionStartTime:this.state.get().startTime,appendStartTime:currentSessionInfoProvider.appendSessionStartTimeToName}),searchSessionSavedObject=await this.sessionsClient.create({name:formattedName,appId:currentSessionApp,restoreState:restoreState,initialState:initialState,urlGeneratorId:urlGeneratorId,sessionId:sessionId});this.getSessionId()===sessionId&&this.state.transitions.store(searchSessionSavedObject)}async renameCurrentSession(newName){const sessionId=this.getSessionId();if(sessionId&&this.state.get().isStored){let renamed=!1;try{await this.sessionsClient.rename(sessionId,newName),renamed=!0}catch(e){var _this$toastService;null===(_this$toastService=this.toastService)||void 0===_this$toastService||_this$toastService.addError(e,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.searchSessions.sessionService.sessionEditNameError",{defaultMessage:"Failed to edit name of the search session"})})}renamed&&sessionId===this.getSessionId()&&await this.refreshSearchSessionSavedObject()}}isCurrentSession(sessionId){return!!sessionId&&this.getSessionId()===sessionId}getSearchOptions(sessionId){if(!sessionId)return null;if(!this.hasAccessToSearchSessions)return null;const isCurrentSession=this.isCurrentSession(sessionId);return{sessionId:sessionId,isRestore:!!isCurrentSession&&this.isRestore(),isStored:!!isCurrentSession&&this.isStored()}}enableStorage(searchSessionInfoProvider,searchSessionIndicatorUiConfig){this.searchSessionInfoProvider={appendSessionStartTimeToName:!0,...searchSessionInfoProvider},this.searchSessionIndicatorUiConfig=searchSessionIndicatorUiConfig}isSessionStorageReady(){return!!this.searchSessionInfoProvider}getSearchSessionIndicatorUiConfig(){return{isDisabled:()=>({disabled:!1}),...this.searchSessionIndicatorUiConfig}}async refreshSearchSessionSavedObject(){const sessionId=this.getSessionId();if(sessionId&&this.state.get().isStored)try{const savedObject=await this.sessionsClient.get(sessionId);this.getSessionId()===sessionId&&this.state.transitions.setSearchSessionSavedObject(savedObject)}catch(e){var _this$toastService2;null===(_this$toastService2=this.toastService)||void 0===_this$toastService2||_this$toastService2.addError(e,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.searchSessions.sessionService.sessionObjectFetchError",{defaultMessage:"Failed to fetch search session info"})})}}}class SessionsClient{constructor(deps){var obj,key,value;value=void 0,(key="http")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this.http=deps.http}get(sessionId){return this.http.get("/internal/session/"+encodeURIComponent(sessionId))}create({name:name,appId:appId,urlGeneratorId:urlGeneratorId,initialState:initialState,restoreState:restoreState,sessionId:sessionId}){return this.http.post("/internal/session",{body:JSON.stringify({name:name,initialState:initialState,restoreState:restoreState,sessionId:sessionId,appId:appId,urlGeneratorId:urlGeneratorId})})}find(options){return this.http.post("/internal/session/_find",{body:JSON.stringify(options)})}update(sessionId,attributes){return this.http.put("/internal/session/"+encodeURIComponent(sessionId),{body:JSON.stringify(attributes)})}rename(sessionId,newName){return this.update(sessionId,{name:newName})}extend(sessionId,expires){return this.http.post(`/internal/session/${encodeURIComponent(sessionId)}/_extend`,{body:JSON.stringify({expires:expires})})}delete(sessionId){return this.http.delete("/internal/session/"+encodeURIComponent(sessionId))}}const noSearchSessionStorageCapabilityMessage=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.searchSessionIndicator.noCapability",{defaultMessage:"You don't have permissions to create search sessions."});function waitUntilNextSessionCompletes$(sessionService,{waitForIdle:waitForIdle=1e3}={waitForIdle:1e3}){return sessionService.state$.pipe(Object(external_kbnSharedDeps_RxjsOperators_.skipUntil)(sessionService.state$.pipe(Object(external_kbnSharedDeps_RxjsOperators_.first)(state=>state===SearchSessionState.None))),Object(external_kbnSharedDeps_RxjsOperators_.skipUntil)(sessionService.state$.pipe(Object(external_kbnSharedDeps_RxjsOperators_.first)(state=>state===SearchSessionState.Loading))),Object(external_kbnSharedDeps_RxjsOperators_.debounceTime)(waitForIdle),Object(external_kbnSharedDeps_RxjsOperators_.first)(state=>state===SearchSessionState.Completed||state===SearchSessionState.BackgroundCompleted))}const defaultSessionId=""+Date.now();function getEsPreference(uiSettings,sessionId=defaultSessionId){const setPreference=uiSettings.get(common.UI_SETTINGS.COURIER_SET_REQUEST_PREFERENCE);if("sessionId"===setPreference)return""+sessionId;const customPreference=uiSettings.get(common.UI_SETTINGS.COURIER_CUSTOM_REQUEST_PREFERENCE);return"custom"===setPreference?customPreference:void 0}var common_=__webpack_require__(20);function getRootCause(err){var _getFailedShards;return null===(_getFailedShards=function(err){var _errorInfo$caused_by;const errorInfo=err.attributes,failedShards=(null==errorInfo?void 0:errorInfo.failed_shards)||(null==errorInfo||null===(_errorInfo$caused_by=errorInfo.caused_by)||void 0===_errorInfo$caused_by?void 0:_errorInfo$caused_by.failed_shards);return failedShards?failedShards[0]:void 0}(err))||void 0===_getFailedShards?void 0:_getFailedShards.reason}class es_error_EsError extends common_.KbnError{constructor(err){var obj,key,value;super("EsError"),this.err=err,value=void 0,(key="attributes")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this.attributes=err.attributes}getErrorMessage(application){var _getRootCause,_this$attributes;const rootCause=null===(_getRootCause=getRootCause(this.err))||void 0===_getRootCause?void 0:_getRootCause.reason,topLevelCause=null===(_this$attributes=this.attributes)||void 0===_this$attributes?void 0:_this$attributes.reason,cause=null!=rootCause?rootCause:topLevelCause;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),cause?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCodeBlock,{"data-test-subj":"errMessage",isCopyable:!0,paddingSize:"s"},cause):null)}}function isEsError(e){return!!e.attributes}function painless_error_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class painless_error_PainlessError extends es_error_EsError{constructor(err,indexPattern){super(err),painless_error_defineProperty(this,"painlessStack",void 0),painless_error_defineProperty(this,"indexPattern",void 0),this.indexPattern=indexPattern}getErrorMessage(application){var _rootCause$script_sta,_rootCause$script_sta2,_rootCause$script_sta3,_rootCause$caused_by,_this$indexPattern,_this$indexPattern2;const rootCause=getRootCause(this.err),scriptFromStackTrace=null!=rootCause&&rootCause.script_stack?null==rootCause||null===(_rootCause$script_sta=rootCause.script_stack)||void 0===_rootCause$script_sta?void 0:_rootCause$script_sta.slice(-2).join("\n"):void 0,hasScript=(null==rootCause||null===(_rootCause$script_sta2=rootCause.script_stack)||void 0===_rootCause$script_sta2||null===(_rootCause$script_sta3=_rootCause$script_sta2.slice(-1)[0])||void 0===_rootCause$script_sta3?void 0:_rootCause$script_sta3.indexOf("HERE"))||!1,humanReadableError=null==rootCause||null===(_rootCause$caused_by=rootCause.caused_by)||void 0===_rootCause$caused_by?void 0:_rootCause$caused_by.reason,painlessStack=null!=rootCause&&rootCause.script_stack?null==rootCause?void 0:rootCause.script_stack.join("\n"):void 0,indexPatternId=null==this||null===(_this$indexPattern=this.indexPattern)||void 0===_this$indexPattern?void 0:_this$indexPattern.id;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s","data-test-subj":"painlessScript"},external_kbnSharedDeps_KbnI18n_.i18n.translate("data.painlessError.painlessScriptedFieldErrorMessage",{defaultMessage:"Error executing runtime field or scripted field on index pattern {indexPatternName}",values:{indexPatternName:null==this||null===(_this$indexPattern2=this.indexPattern)||void 0===_this$indexPattern2?void 0:_this$indexPattern2.title}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),scriptFromStackTrace||painlessStack?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCodeBlock,{"data-test-subj":"painlessStackTrace",isCopyable:!0,paddingSize:"s"},hasScript?scriptFromStackTrace:painlessStack):null,humanReadableError?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{"data-test-subj":"painlessHumanReadableError"},humanReadableError):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{textAlign:"right"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{color:"danger",onClick:()=>function(indexPatternId){application.navigateToApp("management",{path:"/kibana/indexPatterns"+(indexPatternId?"/patterns/"+indexPatternId:"")})}(indexPatternId),size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"data.painlessError.buttonTxt",defaultMessage:"Edit script"}))))}}let TimeoutErrorMode;!function(TimeoutErrorMode){TimeoutErrorMode[TimeoutErrorMode.UPGRADE=0]="UPGRADE",TimeoutErrorMode[TimeoutErrorMode.CONTACT=1]="CONTACT",TimeoutErrorMode[TimeoutErrorMode.CHANGE=2]="CHANGE"}(TimeoutErrorMode||(TimeoutErrorMode={}));class timeout_error_SearchTimeoutError extends common_.KbnError{constructor(err,mode){var obj,key,value;super("Request timeout: "+JSON.stringify(null==err?void 0:err.message)),value=void 0,(key="mode")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this.mode=mode}getMessage(){switch(this.mode){case TimeoutErrorMode.UPGRADE:return external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.upgradeLicense",{defaultMessage:"Your query has timed out. With our free Basic tier, your queries never time out."});case TimeoutErrorMode.CONTACT:return external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.timeoutContactAdmin",{defaultMessage:"Your query has timed out. Contact your system administrator to increase the run time."});case TimeoutErrorMode.CHANGE:return external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.timeoutIncreaseSetting",{defaultMessage:"Your query has timed out. Increase run time with the search timeout advanced setting."})}}getActionText(){switch(this.mode){case TimeoutErrorMode.UPGRADE:return external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.upgradeLicenseActionText",{defaultMessage:"Upgrade now"});case TimeoutErrorMode.CHANGE:return external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.timeoutIncreaseSettingActionText",{defaultMessage:"Edit setting"})}}onClick(application){switch(this.mode){case TimeoutErrorMode.UPGRADE:application.navigateToUrl("https://www.elastic.co/subscriptions");break;case TimeoutErrorMode.CHANGE:application.navigateToApp("management",{path:"/kibana/settings"})}}getErrorMessage(application){const actionText=this.getActionText();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,this.getMessage(),actionText&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{textAlign:"right"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{color:"danger",onClick:()=>this.onClick(application),size:"s","data-test-subj":"searchTimeoutError"},actionText))))}}function search_interceptor_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class search_interceptor_SearchInterceptor{constructor(deps){this.deps=deps,search_interceptor_defineProperty(this,"pendingCount$",new external_kbnSharedDeps_Rxjs_.BehaviorSubject(0)),search_interceptor_defineProperty(this,"application",void 0),search_interceptor_defineProperty(this,"batchedFetch",void 0),search_interceptor_defineProperty(this,"showTimeoutErrorToast",(e,sessionId)=>{this.deps.toasts.addDanger({title:"Timed out",text:Object(public_.toMountPoint)(e.getErrorMessage(this.application))})}),search_interceptor_defineProperty(this,"showTimeoutErrorMemoized",Object(external_kbnSharedDeps_Lodash_.memoize)(this.showTimeoutErrorToast,(_,sessionId)=>sessionId)),search_interceptor_defineProperty(this,"showTimeoutError",(e,sessionId)=>{sessionId?this.showTimeoutErrorMemoized(e,sessionId):this.showTimeoutErrorToast(e,sessionId)}),this.deps.http.addLoadingCountSource(this.pendingCount$),this.deps.startServices.then(([coreStart])=>{this.application=coreStart.application}),this.batchedFetch=deps.bfetch.batchedFunction({url:"/internal/bsearch"})}getTimeoutMode(){return TimeoutErrorMode.UPGRADE}handleSearchError(e,options,isTimeout){if(isTimeout||"Request timed out"===e.message){const err=new timeout_error_SearchTimeoutError(e,this.getTimeoutMode());return this.showTimeoutError(err,null==options?void 0:options.sessionId),err}return e instanceof kibanaUtils_public_.AbortError?e:isEsError(e)?function(err){if(!isEsError(err))return!1;const rootCause=getRootCause(err);if(!rootCause)return!1;const{lang:lang}=rootCause;return"painless"===lang}(e)?new painless_error_PainlessError(e,null==options?void 0:options.indexPattern):new es_error_EsError(e):e instanceof Error?e:new Error(e.message)}getSerializableOptions(options){const{sessionId:sessionId,...requestOptions}=options||{},serializableOptions={},combined={...requestOptions,...this.deps.session.getSearchOptions(sessionId)};return void 0!==combined.sessionId&&(serializableOptions.sessionId=combined.sessionId),void 0!==combined.isRestore&&(serializableOptions.isRestore=combined.isRestore),void 0!==combined.legacyHitsTotal&&(serializableOptions.legacyHitsTotal=combined.legacyHitsTotal),void 0!==combined.strategy&&(serializableOptions.strategy=combined.strategy),void 0!==combined.isStored&&(serializableOptions.isStored=combined.isStored),serializableOptions}runSearch(request,options){const{abortSignal:abortSignal}=options||{};return this.batchedFetch({request:request,options:this.getSerializableOptions(options)},abortSignal)}search(request,options={}){return Object(external_kbnSharedDeps_Rxjs_.defer)(()=>{var _options$abortSignal;return null!==(_options$abortSignal=options.abortSignal)&&void 0!==_options$abortSignal&&_options$abortSignal.aborted?Object(external_kbnSharedDeps_Rxjs_.throwError)(new kibanaUtils_public_.AbortError):(this.pendingCount$.next(this.pendingCount$.getValue()+1),Object(external_kbnSharedDeps_Rxjs_.from)(this.runSearch(request,options)).pipe(Object(external_kbnSharedDeps_RxjsOperators_.catchError)(e=>Object(external_kbnSharedDeps_Rxjs_.throwError)(this.handleSearchError(e,options))),Object(external_kbnSharedDeps_RxjsOperators_.finalize)(()=>{this.pendingCount$.next(this.pendingCount$.getValue()-1)})))})}showError(e){var message;e instanceof kibanaUtils_public_.AbortError||e instanceof timeout_error_SearchTimeoutError||(e instanceof es_error_EsError?this.deps.toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.esErrorTitle",{defaultMessage:"Cannot retrieve search results"}),text:Object(public_.toMountPoint)(e.getErrorMessage(this.application))}):"HttpFetchError"===e.constructor.name?this.deps.toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.httpErrorTitle",{defaultMessage:"Cannot retrieve your data"}),text:Object(public_.toMountPoint)((message=e.message,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_KbnI18n_.i18n.translate("data.errors.fetchError",{defaultMessage:"Check your network and proxy configuration. If the problem persists, contact your network administrator."}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCodeBlock,{"data-test-subj":"errMessage",isCopyable:!0,paddingSize:"s"},message))))}):this.deps.toasts.addError(e,{title:"Search Error"}))}}function aggs_service_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class aggs_service_AggsService{constructor(){aggs_service_defineProperty(this,"aggsCommonService",new search_aggs.k),aggs_service_defineProperty(this,"initializedAggTypes",new Map),aggs_service_defineProperty(this,"getConfig",void 0),aggs_service_defineProperty(this,"subscriptions",[]),aggs_service_defineProperty(this,"nowProvider",void 0),aggs_service_defineProperty(this,"calculateBounds",timeRange=>Object(common.calculateBounds)(timeRange,{forceNow:this.nowProvider.get()}))}setup({registerFunction:registerFunction,uiSettings:uiSettings,nowProvider:nowProvider}){return this.nowProvider=nowProvider,this.getConfig=function(uiSettings,requiredSettings,subscriptions){const settingsCache={};return requiredSettings.forEach(setting=>{subscriptions.push(uiSettings.get$(setting).subscribe(value=>{settingsCache[setting]=value}))}),key=>settingsCache[key]}(uiSettings,search_aggs.Yb,this.subscriptions),this.aggsCommonService.setup({registerFunction:registerFunction})}start({fieldFormats:fieldFormats,uiSettings:uiSettings,indexPatterns:indexPatterns}){const isDefaultTimezone=()=>uiSettings.isDefault("dateFormat:tz"),{calculateAutoTimeExpression:calculateAutoTimeExpression,datatableUtilities:datatableUtilities,types:types}=this.aggsCommonService.start({getConfig:this.getConfig,getIndexPattern:indexPatterns.get,isDefaultTimezone:isDefaultTimezone}),aggTypesDependencies={calculateBounds:this.calculateBounds,getConfig:this.getConfig,getFieldFormatsStart:()=>({deserialize:fieldFormats.deserialize,getDefaultInstance:fieldFormats.getDefaultInstance}),isDefaultTimezone:isDefaultTimezone};types.getAll().buckets.forEach(type=>{const agg=type(aggTypesDependencies);this.initializedAggTypes.set(agg.name,agg)}),types.getAll().metrics.forEach(type=>{const agg=type(aggTypesDependencies);this.initializedAggTypes.set(agg.name,agg)});const typesRegistry={get:name=>this.initializedAggTypes.get(name),getAll:()=>({buckets:Array.from(this.initializedAggTypes.values()).filter(agg=>"buckets"===agg.type),metrics:Array.from(this.initializedAggTypes.values()).filter(agg=>"metrics"===agg.type)})};return{calculateAutoTimeExpression:calculateAutoTimeExpression,datatableUtilities:datatableUtilities,createAggConfigs:(indexPattern,configStates=[])=>new search_aggs.c(indexPattern,configStates,{typesRegistry:typesRegistry}),types:typesRegistry}}stop(){this.subscriptions.forEach(s=>s.unsubscribe()),this.subscriptions=[]}}var uiActions_public_=__webpack_require__(47);const Fallback=()=>external_kbnSharedDeps_React_default.a.createElement("div",null),LazyApplyFiltersPopoverContent=external_kbnSharedDeps_React_default.a.lazy(()=>__webpack_require__.e(6).then(__webpack_require__.bind(null,173))),ACTION_GLOBAL_APPLY_FILTER="ACTION_GLOBAL_APPLY_FILTER";async function isCompatible(context){return void 0!==context.filters}function createFilterAction(filterManager,timeFilter){return Object(uiActions_public_.createAction)({type:ACTION_GLOBAL_APPLY_FILTER,id:ACTION_GLOBAL_APPLY_FILTER,order:100,getIconType:()=>"filter",getDisplayName:()=>external_kbnSharedDeps_KbnI18n_.i18n.translate("data.filter.applyFilterActionTitle",{defaultMessage:"Apply filter to current view"}),isCompatible:isCompatible,execute:async({filters:filters,timeFieldName:timeFieldName})=>{if(!filters)throw new Error("Applying a filter requires a filter");if(!await isCompatible({filters:filters}))throw new uiActions_public_.IncompatibleActionError;let selectedFilters=filters;if(selectedFilters.length>1){const indexPatterns=await Promise.all(filters.map(filter=>Object(services.a)().get(filter.meta.index))),filterSelectionPromise=new Promise(resolve=>{const overlay=Object(services.c)().openModal(Object(public_.toMountPoint)(((filters,indexPatterns,onCancel,onSubmit)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Suspense,{fallback:external_kbnSharedDeps_React_default.a.createElement(Fallback,null)},external_kbnSharedDeps_React_default.a.createElement(LazyApplyFiltersPopoverContent,{indexPatterns:indexPatterns,filters:filters,onCancel:onCancel,onSubmit:onSubmit})))(filters,indexPatterns,()=>{overlay.close(),resolve([])},filterSelection=>{overlay.close(),resolve(filterSelection)})),{"data-test-subj":"test"})});selectedFilters=await filterSelectionPromise}if(timeFieldName){const{timeRangeFilter:timeRangeFilter,restOfFilters:restOfFilters}=esFilters.extractTimeFilter(timeFieldName,selectedFilters);filterManager.addFilters(restOfFilters),timeRangeFilter&&esFilters.changeTimeFilter(timeFilter,timeRangeFilter)}else filterManager.addFilters(selectedFilters)}})}const createFilter=async(table,columnIndex,rowIndex)=>{var _table$columns$column;if(!(table&&table.columns&&table.columns[columnIndex]&&table.columns[columnIndex].meta&&"esaggs"===table.columns[columnIndex].meta.source&&null!==(_table$columns$column=table.columns[columnIndex].meta.sourceParams)&&void 0!==_table$columns$column&&_table$columns$column.indexPatternId))return;const column=table.columns[columnIndex],{indexPatternId:indexPatternId,...aggConfigParams}=table.columns[columnIndex].meta.sourceParams,aggConfig=Object(services.d)().aggs.createAggConfigs(await Object(services.a)().get(indexPatternId),[aggConfigParams]).aggs[0];let filter=[];const value=rowIndex>-1?table.rows[rowIndex][column.id]:null;if(null!=value&&aggConfig.isFilterable()){if("terms"===aggConfig.type.name&&aggConfig.params.otherBucket){const terms=((table,columnIndex,rowIndex)=>{if(-1===rowIndex)return[];const terms=table.rows.filter(row=>table.columns.every((column,i)=>row[column.id]===table.rows[rowIndex][column.id]||i>=columnIndex)).map(row=>row[table.columns[columnIndex].id]);return[...new Set(terms.filter(term=>"__other__"!==term&&"__missing__"!==term))]})(table,columnIndex,rowIndex);filter=aggConfig.createFilter(value,{terms:terms})}else filter=aggConfig.createFilter(value);if(filter)return Array.isArray(filter)||(filter=[filter]),filter}},createFiltersFromValueClickAction=async({data:data,negate:negate})=>{const filters=[];return await Promise.all(data.filter(point=>point).map(async val=>{const{table:table,column:column,row:row}=val,filter=await createFilter(table,column,row)||[];filter&&filter.forEach(f=>{negate&&(f=esFilters.toggleFilterNegated(f)),filters.push(f)})})),esFilters.mapAndFlattenFilters(filters)};async function createFiltersFromRangeSelectAction(event){const column=event.table.columns[event.column];if(!column||!column.meta)return[];const{indexPatternId:indexPatternId,...aggConfigs}=column.meta.sourceParams,indexPattern=await Object(services.a)().get(indexPatternId),field=Object(services.d)().aggs.createAggConfigs(indexPattern,[aggConfigs]).aggs[0].params.field;if(!field||event.range.length<=1)return[];const min=event.range[0],max=Object(external_kbnSharedDeps_Lodash_.last)(event.range);if(min===max)return[];const isDate="date"===field.type,range={gte:isDate?external_kbnSharedDeps_Moment_default()(min).toISOString():min,lt:isDate?external_kbnSharedDeps_Moment_default()(max).toISOString():max};return isDate&&(range.format="strict_date_optional_time"),esFilters.mapAndFlattenFilters([esFilters.buildRangeFilter(field,range,indexPattern)])}const APPLY_FILTER_TRIGGER="FILTER_TRIGGER",applyFilterTrigger={id:APPLY_FILTER_TRIGGER,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.triggers.applyFilterTitle",{defaultMessage:"Apply filter"}),description:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.triggers.applyFilterDescription",{defaultMessage:"When kibana filter is applied. Could be a single value or a range filter."})};__webpack_require__(147);const shard_failure_modal_Fallback=()=>external_kbnSharedDeps_React_default.a.createElement("div",null),LazyShardFailureOpenModalButton=external_kbnSharedDeps_React_default.a.lazy(()=>__webpack_require__.e(9).then(__webpack_require__.bind(null,174))),ShardFailureOpenModalButton=props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Suspense,{fallback:external_kbnSharedDeps_React_default.a.createElement(shard_failure_modal_Fallback,null)},external_kbnSharedDeps_React_default.a.createElement(LazyShardFailureOpenModalButton,props));function handleResponse(request,response){if(response.timed_out&&Object(services.b)().toasts.addWarning({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.searchSource.fetch.requestTimedOutNotificationMessage",{defaultMessage:"Data might be incomplete because your request timed out"})}),response._shards&&response._shards.failed){const title=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.searchSource.fetch.shardsFailedNotificationMessage",{defaultMessage:"{shardsFailed} of {shardsTotal} shards failed",values:{shardsFailed:response._shards.failed,shardsTotal:response._shards.total}}),description=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.searchSource.fetch.shardsFailedNotificationDescription",{defaultMessage:"The data you are seeing might be incomplete or wrong."}),text=Object(public_.toMountPoint)(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,description,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(ShardFailureOpenModalButton,{request:request.body,response:response,title:title})));Object(services.b)().toasts.addWarning({title:title,text:text})}return response}function getCallMsearch({http:http}){return async({body:body,signal:signal})=>http.post("/internal/_msearch",{body:JSON.stringify(body),signal:signal})}var bucket_agg_type=__webpack_require__(17);const aggShardDelay=()=>({name:"aggShardDelay",help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.function.buckets.shardDelay.help",{defaultMessage:"Generates a serialized agg config for a Shard Delay agg"}),type:"agg_type",args:{id:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.shardDelay.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.shardDelay.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.shardDelay.schema.help",{defaultMessage:"Schema to use for this aggregation"})},delay:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.shardDelay.delay.help",{defaultMessage:'Delay between shards to process. Example: "5s".'})},json:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.shardDelay.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.aggs.buckets.shardDelay.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(input,args)=>{const{id:id,enabled:enabled,schema:schema,...rest}=args;return{type:"agg_type",value:{id:id,enabled:enabled,schema:schema,type:SHARD_DELAY_AGG_NAME,params:{...rest}}}}}),SHARD_DELAY_AGG_NAME="shard_delay",getShardDelayBucketAgg=()=>new bucket_agg_type.a({name:SHARD_DELAY_AGG_NAME,title:"Shard Delay",expressionName:"aggShardDelay",createFilter:()=>({match_all:{}}),customLabels:!1,params:[{name:"delay",type:"string",default:"5s",write(aggConfig,output){output.params={...output.params,value:aggConfig.params.delay}}}]});function search_service_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class search_service_SearchService{constructor(initializerContext){this.initializerContext=initializerContext,search_service_defineProperty(this,"aggsService",new aggs_service_AggsService),search_service_defineProperty(this,"searchSourceService",new common_search.SearchSourceService),search_service_defineProperty(this,"searchInterceptor",void 0),search_service_defineProperty(this,"usageCollector",void 0),search_service_defineProperty(this,"sessionService",void 0),search_service_defineProperty(this,"sessionsClient",void 0)}setup({http:http,getStartServices:getStartServices,notifications:notifications,uiSettings:uiSettings},{bfetch:bfetch,expressions:expressions,usageCollection:usageCollection,nowProvider:nowProvider}){this.usageCollector=createUsageCollector(getStartServices,usageCollection),this.sessionsClient=new SessionsClient({http:http}),this.sessionService=new session_service_SessionService(this.initializerContext,getStartServices,this.sessionsClient,nowProvider),this.searchInterceptor=new search_interceptor_SearchInterceptor({bfetch:bfetch,toasts:notifications.toasts,http:http,uiSettings:uiSettings,startServices:getStartServices(),usageCollector:this.usageCollector,session:this.sessionService}),expressions.registerFunction(getEsaggs({getStartServices:getStartServices})),expressions.registerFunction(common_search.kibana),expressions.registerFunction(function({getStartServices:getStartServices}){return Object(search_expressions.h)(async()=>{const[core]=await getStartServices();return{savedObjectsClient:core.savedObjects.client}})}({getStartServices:getStartServices})),expressions.registerFunction(common_search.luceneFunction),expressions.registerFunction(common_search.kqlFunction),expressions.registerFunction(common_search.kibanaTimerangeFunction),expressions.registerFunction(common_search.fieldFunction),expressions.registerFunction(common_search.rangeFunction),expressions.registerFunction(common_search.kibanaFilterFunction),expressions.registerFunction(common_search.existsFilterFunction),expressions.registerFunction(common_search.rangeFilterFunction),expressions.registerFunction(common_search.phraseFilterFunction),expressions.registerType(common_search.kibanaContext),expressions.registerFunction(function({getStartServices:getStartServices}){return Object(esdsl.a)({getStartDependencies:async()=>{const[core,,{search:search}]=await getStartServices();return{uiSettingsClient:core.uiSettings,search:search.search}}})}({getStartServices:getStartServices})),expressions.registerType(common_search.esRawResponse);const aggs=this.aggsService.setup({registerFunction:expressions.registerFunction,uiSettings:uiSettings,nowProvider:nowProvider});return this.initializerContext.config.get().search.aggs.shardDelay.enabled&&(aggs.types.registerBucket(SHARD_DELAY_AGG_NAME,getShardDelayBucketAgg),expressions.registerFunction(aggShardDelay)),{aggs:aggs,usageCollector:this.usageCollector,__enhance:enhancements=>{this.searchInterceptor=enhancements.searchInterceptor},session:this.sessionService,sessionsClient:this.sessionsClient}}start({application:application,http:http,notifications:notifications,uiSettings:uiSettings},{fieldFormats:fieldFormats,indexPatterns:indexPatterns}){const search=(request,options)=>this.searchInterceptor.search(request,options),loadingCount$=new external_kbnSharedDeps_Rxjs_.BehaviorSubject(0);http.addLoadingCountSource(loadingCount$);const searchSourceDependencies={getConfig:uiSettings.get.bind(uiSettings),search:search,onResponse:handleResponse,legacy:{callMsearch:getCallMsearch({http:http}),loadingCount$:loadingCount$}};return{aggs:this.aggsService.start({fieldFormats:fieldFormats,uiSettings:uiSettings,indexPatterns:indexPatterns}),search:search,showError:e=>{this.searchInterceptor.showError(e)},session:this.sessionService,sessionsClient:this.sessionsClient,searchSource:this.searchSourceService.start(indexPatterns,searchSourceDependencies)}}stop(){this.aggsService.stop(),this.searchSourceService.stop()}}var index_pattern_select=__webpack_require__(90),create_search_bar=__webpack_require__(87),index_patterns_expressions=__webpack_require__(89);function getIndexPatternLoad({getStartServices:getStartServices}){return function({getStartDependencies:getStartDependencies}){return()=>({...Object(index_patterns_expressions.a)(),async fn(input,args){const{indexPatterns:indexPatterns}=await getStartDependencies();return{type:"index_pattern",value:(await indexPatterns.get(args.id)).toSpec()}}})}({getStartDependencies:async()=>{const[,,{indexPatterns:indexPatterns}]=await getStartServices();return{indexPatterns:indexPatterns}}})}const DataViewComponent=Object(external_kbnSharedDeps_React_.lazy)(()=>__webpack_require__.e(10).then(__webpack_require__.bind(null,175))),getDataViewComponentWrapper=getStartServices=>props=>external_kbnSharedDeps_React_default.a.createElement(DataViewComponent,{adapters:props.adapters,title:props.title,uiSettings:getStartServices().uiSettings,fieldFormats:getStartServices().fieldFormats,uiActions:getStartServices().uiActions,isFilterable:getStartServices().isFilterable,options:props.options});var query_string=__webpack_require__(136);function getForceNowFromUrl(){const forceNow=function(){const hrefSplit=window.location.href.split("?");if(hrefSplit.length<=1)return{};return Object(query_string.parse)(hrefSplit[1],{sort:!1})}().forceNow;if(!forceNow)return;const ts=Date.parse(forceNow);if(isNaN(ts))throw new Error(`forceNow query parameter, ${forceNow}, can't be parsed by Date.parse`);return new Date(ts)}function now_provider_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class now_provider_NowProvider{constructor(){now_provider_defineProperty(this,"nowFromUrl",getForceNowFromUrl()),now_provider_defineProperty(this,"now",void 0)}get(){return this.nowFromUrl?this.nowFromUrl:this.now?this.now:new Date}set(now){this.now=now}reset(){this.now=void 0}}function plugin_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class plugin_DataPublicPlugin{constructor(initializerContext){plugin_defineProperty(this,"autocomplete",void 0),plugin_defineProperty(this,"searchService",void 0),plugin_defineProperty(this,"fieldFormatsService",void 0),plugin_defineProperty(this,"queryService",void 0),plugin_defineProperty(this,"storage",void 0),plugin_defineProperty(this,"usageCollection",void 0),plugin_defineProperty(this,"nowProvider",void 0),this.searchService=new search_service_SearchService(initializerContext),this.queryService=new public_query.d,this.fieldFormatsService=new field_formats_service_FieldFormatsService,this.autocomplete=new autocomplete.a(initializerContext),this.storage=new kibanaUtils_public_.Storage(window.localStorage),this.nowProvider=new now_provider_NowProvider}setup(core,{bfetch:bfetch,expressions:expressions,uiActions:uiActions,usageCollection:usageCollection,inspector:inspector}){const startServices=Object(kibanaUtils_public_.createStartServicesGetter)(core.getStartServices);expressions.registerFunction(getIndexPatternLoad({getStartServices:core.getStartServices})),this.usageCollection=usageCollection;const searchService=this.searchService.setup(core,{bfetch:bfetch,usageCollection:usageCollection,expressions:expressions,nowProvider:this.nowProvider}),queryService=this.queryService.setup({uiSettings:core.uiSettings,storage:this.storage,nowProvider:this.nowProvider});var getStartServices;return uiActions.registerTrigger(applyFilterTrigger),uiActions.registerAction(createFilterAction(queryService.filterManager,queryService.timefilter.timefilter)),inspector.registerView((getStartServices=()=>({uiActions:startServices().plugins.uiActions,uiSettings:startServices().core.uiSettings,fieldFormats:startServices().self.fieldFormats,isFilterable:startServices().self.search.aggs.datatableUtilities.isFilterable}),{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.inspector.table.dataTitle",{defaultMessage:"Data"}),order:10,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.inspector.table..dataDescriptionTooltip",{defaultMessage:"View the data behind the visualization"}),shouldShow:adapters=>Boolean(adapters.tables),component:getDataViewComponentWrapper(getStartServices)})),{autocomplete:this.autocomplete.setup(core,{timefilter:queryService.timefilter,usageCollection:usageCollection}),search:searchService,fieldFormats:this.fieldFormatsService.setup(core),query:queryService,__enhance:enhancements=>{searchService.__enhance(enhancements.search)}}}start(core,{uiActions:uiActions}){const{uiSettings:uiSettings,http:http,notifications:notifications,savedObjects:savedObjects,overlays:overlays,application:application}=core;Object(services.g)(notifications),Object(services.h)(overlays),Object(services.j)(uiSettings);const fieldFormats=this.fieldFormatsService.start(),indexPatterns=new index_patterns.c({uiSettings:new UiSettingsPublicToCommon(uiSettings),savedObjectsClient:new SavedObjectsClientPublicToCommon(savedObjects.client),apiClient:new index_patterns_api_client_IndexPatternsApiClient(http),fieldFormats:fieldFormats,onNotification:toastInputFields=>{notifications.toasts.add(toastInputFields)},onError:notifications.toasts.addError.bind(notifications.toasts),onRedirectNoIndexPattern:onRedirectNoIndexPattern(application.capabilities,application.navigateToApp,overlays),onUnsupportedTimePattern:(toasts=notifications.toasts,navigateToApp=application.navigateToApp,({id:id,title:title,index:index})=>{const warningTitle=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.indexPatterns.warningTitle",{defaultMessage:"Support for time interval index patterns removed"}),warningText=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.indexPatterns.warningText",{defaultMessage:"Currently querying all indices matching {index}. {title} should be migrated to a wildcard-based index pattern.",values:{title:title,index:index}});toasts.addWarning({title:warningTitle,text:Object(public_.toMountPoint)(external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement("p",null,warningText),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{size:"s",onClick:()=>navigateToApp("management",{path:"/kibana/index_patterns/index_pattern/"+(id||"")})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"data.indexPatterns.editIndexPattern",defaultMessage:"Edit index pattern"}))))))})})});var toasts,navigateToApp;Object(services.f)(indexPatterns);const query=this.queryService.start({storage:this.storage,savedObjectsClient:savedObjects.client,uiSettings:uiSettings}),search=this.searchService.start(core,{fieldFormats:fieldFormats,indexPatterns:indexPatterns});var getStartServices;Object(services.i)(search),uiActions.addTriggerAction("SELECT_RANGE_TRIGGER",(getStartServices=()=>({uiActions:uiActions}),Object(uiActions_public_.createAction)({type:"ACTION_SELECT_RANGE",id:"ACTION_SELECT_RANGE",shouldAutoExecute:async()=>!0,execute:async context=>{try{const filters=await createFiltersFromRangeSelectAction(context.data);filters.length>0&&await getStartServices().uiActions.getTrigger(APPLY_FILTER_TRIGGER).exec({filters:filters,embeddable:context.embeddable,timeFieldName:context.data.timeFieldName})}catch(e){console.warn("Error [ACTION_SELECT_RANGE]: can't extract filters from action context")}}}))),uiActions.addTriggerAction("VALUE_CLICK_TRIGGER",function(getStartServices){return Object(uiActions_public_.createAction)({type:"ACTION_VALUE_CLICK",id:"ACTION_VALUE_CLICK",shouldAutoExecute:async()=>!0,execute:async context=>{try{const filters=await createFiltersFromValueClickAction(context.data);filters.length>0&&await getStartServices().uiActions.getTrigger(APPLY_FILTER_TRIGGER).exec({filters:filters,embeddable:context.embeddable,timeFieldName:context.data.timeFieldName})}catch(e){console.warn("Error [ACTION_EMIT_APPLY_FILTER_TRIGGER]: can't extract filters from action context")}}})}(()=>({uiActions:uiActions}))),uiActions.addTriggerAction(APPLY_FILTER_TRIGGER,uiActions.getAction(ACTION_GLOBAL_APPLY_FILTER));const dataServices={actions:{createFiltersFromValueClickAction:createFiltersFromValueClickAction,createFiltersFromRangeSelectAction:createFiltersFromRangeSelectAction},autocomplete:this.autocomplete.start(),fieldFormats:fieldFormats,indexPatterns:indexPatterns,query:query,search:search,nowProvider:this.nowProvider},SearchBar=Object(create_search_bar.b)({core:core,data:dataServices,storage:this.storage,usageCollection:this.usageCollection});return{...dataServices,ui:{IndexPatternSelect:Object(index_pattern_select.c)(indexPatterns),SearchBar:SearchBar}}}stop(){this.autocomplete.clearProviders(),this.queryService.stop(),this.searchService.stop()}}var public_types=__webpack_require__(48);const esFilters={FilterLabel:ui.a,FilterItem:filter_bar.a,FILTERS:common.FILTERS,FilterStateStore:common.FilterStateStore,buildEmptyFilter:common.buildEmptyFilter,buildPhrasesFilter:common.buildPhrasesFilter,buildExistsFilter:common.buildExistsFilter,buildPhraseFilter:common.buildPhraseFilter,buildQueryFilter:common.buildQueryFilter,buildRangeFilter:common.buildRangeFilter,isPhraseFilter:common.isPhraseFilter,isExistsFilter:common.isExistsFilter,isPhrasesFilter:common.isPhrasesFilter,isRangeFilter:common.isRangeFilter,isMatchAllFilter:common.isMatchAllFilter,isMissingFilter:common.isMissingFilter,isQueryStringFilter:common.isQueryStringFilter,isFilterPinned:common.isFilterPinned,toggleFilterNegated:common.toggleFilterNegated,disableFilter:common.disableFilter,getPhraseFilterField:common.getPhraseFilterField,getPhraseFilterValue:common.getPhraseFilterValue,getDisplayValueFromFilter:common.getDisplayValueFromFilter,compareFilters:common.compareFilters,COMPARE_ALL_OPTIONS:common.COMPARE_ALL_OPTIONS,generateFilters:public_query.u,onlyDisabledFiltersChanged:public_query.z,changeTimeFilter:public_query.n,convertRangeFilterToTimeRangeString:public_query.p,mapAndFlattenFilters:public_query.x,extractTimeFilter:public_query.r,extractTimeRange:public_query.s},esKuery={nodeTypes:common.nodeTypes,fromKueryExpression:common.fromKueryExpression,toElasticsearchQuery:common.toElasticsearchQuery},esQuery={buildEsQuery:common.buildEsQuery,getEsQueryConfig:common.getEsQueryConfig,buildQueryFromFilters:common.buildQueryFromFilters,luceneStringToDsl:common.luceneStringToDsl,decorateQuery:common.decorateQuery},public_fieldFormats={FieldFormat:field_formats.g,FieldFormatsRegistry:field_formats.n,DEFAULT_CONVERTER_COLOR:field_formats.d,HTML_CONTEXT_TYPE:field_formats.p,TEXT_CONTEXT_TYPE:field_formats.z,FIELD_FORMAT_IDS:field_formats.f,BoolFormat:field_formats.a,BytesFormat:field_formats.b,ColorFormat:field_formats.c,DateFormat:date_DateFormat,DateNanosFormat:date_nanos_shared_DateNanosFormat,DurationFormat:field_formats.e,IpFormat:field_formats.s,NumberFormat:field_formats.t,PercentFormat:field_formats.u,RelativeDateFormat:field_formats.v,SourceFormat:field_formats.w,StaticLookupFormat:field_formats.x,UrlFormat:field_formats.B,StringFormat:field_formats.y,TruncateFormat:field_formats.A,HistogramFormat:field_formats.q},exporters={datatableToCSV:common.datatableToCSV,CSV_MIME_TYPE:common.CSV_MIME_TYPE},public_indexPatterns={ILLEGAL_CHARACTERS_KEY:lib.c,CONTAINS_SPACES_KEY:lib.a,ILLEGAL_CHARACTERS_VISIBLE:lib.d,ILLEGAL_CHARACTERS:lib.b,isDefault:lib.f,isFilterable:common.isFilterable,isNestedField:common.isNestedField,validate:lib.g,flattenHitWrapper:index_patterns.e,formatHitProvider:index_patterns.f},public_search={aggs:{CidrMask:common.CidrMask,dateHistogramInterval:common.dateHistogramInterval,intervalOptions:common.intervalOptions,InvalidEsCalendarIntervalError:common.InvalidEsCalendarIntervalError,InvalidEsIntervalFormatError:common.InvalidEsIntervalFormatError,Ipv4Address:common.Ipv4Address,isDateHistogramBucketAggConfig:common.isDateHistogramBucketAggConfig,isNumberType:common.isNumberType,isStringType:common.isStringType,isType:common.isType,isValidEsInterval:common.isValidEsInterval,isValidInterval:common.isValidInterval,parentPipelineType:common.parentPipelineType,parseEsInterval:common.parseEsInterval,parseInterval:common.parseInterval,propFilter:common.propFilter,siblingPipelineType:common.siblingPipelineType,termsAggFilter:common.termsAggFilter,toAbsoluteDates:common.toAbsoluteDates,boundsDescendingRaw:common.boundsDescendingRaw,getNumberHistogramIntervalByDatatableColumn:common.getNumberHistogramIntervalByDatatableColumn,getDateHistogramMetaDataByDatatableColumn:common.getDateHistogramMetaDataByDatatableColumn},getResponseInspectorStats:common.getResponseInspectorStats,tabifyAggResponse:common.tabifyAggResponse,tabifyGetColumns:common.tabifyGetColumns};function public_plugin(initializerContext){return new plugin_DataPublicPlugin(initializerContext)}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/expressions/common");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return kbn_field_type_KbnFieldType})),__webpack_require__.d(__webpack_exports__,"b",(function(){return castEsToKbnFieldTypeName})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getKbnFieldType})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getKbnTypeNames})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getFilterableKbnTypeNames}));var types=__webpack_require__(4);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class kbn_field_type_KbnFieldType{constructor(options={}){_defineProperty(this,"name",void 0),_defineProperty(this,"sortable",void 0),_defineProperty(this,"filterable",void 0),_defineProperty(this,"esTypes",void 0),this.name=options.name||types.b.UNKNOWN,this.sortable=options.sortable||!1,this.filterable=options.filterable||!1,this.esTypes=Object.freeze((options.esTypes||[]).slice())}}const kbnFieldTypeUnknown=new kbn_field_type_KbnFieldType({name:types.b.UNKNOWN}),registeredKbnTypes=[new kbn_field_type_KbnFieldType({name:types.b.STRING,sortable:!0,filterable:!0,esTypes:[types.a.STRING,types.a.TEXT,types.a.KEYWORD,types.a._TYPE,types.a._ID]}),new kbn_field_type_KbnFieldType({name:types.b.NUMBER,sortable:!0,filterable:!0,esTypes:[types.a.FLOAT,types.a.HALF_FLOAT,types.a.SCALED_FLOAT,types.a.DOUBLE,types.a.INTEGER,types.a.LONG,types.a.UNSIGNED_LONG,types.a.SHORT,types.a.BYTE,types.a.TOKEN_COUNT]}),new kbn_field_type_KbnFieldType({name:types.b.NUMBER_RANGE,sortable:!0,filterable:!0,esTypes:[types.a.FLOAT_RANGE,types.a.DOUBLE_RANGE,types.a.INTEGER_RANGE,types.a.LONG_RANGE]}),new kbn_field_type_KbnFieldType({name:types.b.DATE,sortable:!0,filterable:!0,esTypes:[types.a.DATE,types.a.DATE_NANOS]}),new kbn_field_type_KbnFieldType({name:types.b.DATE_RANGE,sortable:!0,filterable:!0,esTypes:[types.a.DATE_RANGE]}),new kbn_field_type_KbnFieldType({name:types.b.IP,sortable:!0,filterable:!0,esTypes:[types.a.IP]}),new kbn_field_type_KbnFieldType({name:types.b.IP_RANGE,sortable:!0,filterable:!0,esTypes:[types.a.IP_RANGE]}),new kbn_field_type_KbnFieldType({name:types.b.BOOLEAN,sortable:!0,filterable:!0,esTypes:[types.a.BOOLEAN]}),new kbn_field_type_KbnFieldType({name:types.b.OBJECT,esTypes:[types.a.OBJECT]}),new kbn_field_type_KbnFieldType({name:types.b.NESTED,esTypes:[types.a.NESTED]}),new kbn_field_type_KbnFieldType({name:types.b.GEO_POINT,esTypes:[types.a.GEO_POINT]}),new kbn_field_type_KbnFieldType({name:types.b.GEO_SHAPE,esTypes:[types.a.GEO_SHAPE]}),new kbn_field_type_KbnFieldType({name:types.b.ATTACHMENT,esTypes:[types.a.ATTACHMENT]}),new kbn_field_type_KbnFieldType({name:types.b.MURMUR3,esTypes:[types.a.MURMUR3]}),new kbn_field_type_KbnFieldType({name:types.b._SOURCE,esTypes:[types.a._SOURCE]}),new kbn_field_type_KbnFieldType({name:types.b.HISTOGRAM,filterable:!0,esTypes:[types.a.HISTOGRAM]}),new kbn_field_type_KbnFieldType({name:types.b.CONFLICT}),kbnFieldTypeUnknown],getKbnFieldType=typeName=>registeredKbnTypes.find(t=>t.name===typeName)||kbnFieldTypeUnknown,getKbnTypeNames=()=>registeredKbnTypes.filter(type=>type.name).map(type=>type.name),castEsToKbnFieldTypeName=esType=>{const type=registeredKbnTypes.find(t=>t.esTypes.includes(esType));return type&&type.name?type.name:types.b.UNKNOWN},getFilterableKbnTypeNames=()=>registeredKbnTypes.filter(type=>type.filterable).map(type=>type.name)},function(module,__webpack_exports__,__webpack_require__){"use strict";let QuerySuggestionTypes;__webpack_require__.d(__webpack_exports__,"c",(function(){})),__webpack_require__.d(__webpack_exports__,"h",(function(){return QuerySuggestionTypes})),__webpack_require__.d(__webpack_exports__,"f",(function(){})),__webpack_require__.d(__webpack_exports__,"g",(function(){})),__webpack_require__.d(__webpack_exports__,"d",(function(){})),__webpack_require__.d(__webpack_exports__,"e",(function(){})),__webpack_require__.d(__webpack_exports__,"a",(function(){return autocomplete_service_AutocompleteService})),__webpack_require__.d(__webpack_exports__,"b",(function(){})),function(QuerySuggestionTypes){QuerySuggestionTypes.Field="field",QuerySuggestionTypes.Value="value",QuerySuggestionTypes.Operator="operator",QuerySuggestionTypes.Conjunction="conjunction",QuerySuggestionTypes.RecentSearch="recentSearch"}(QuerySuggestionTypes||(QuerySuggestionTypes={}));var target=__webpack_require__(18),target_default=__webpack_require__.n(target),external_kbnSharedDeps_Lodash_=__webpack_require__(2),common=__webpack_require__(1);const getEmptyValueSuggestions=()=>Promise.resolve([]),setupValueSuggestionProvider=(core,{timefilter:timefilter,usageCollector:usageCollector})=>{function resolver(title,field,query,filters){return[Math.floor(Date.now()/1e3/60),query,title,field.name,JSON.stringify(filters)].join("|")}const requestSuggestions=Object(external_kbnSharedDeps_Lodash_.memoize)((index,field,query,filters=[],signal)=>{var _field$toSpec;return null==usageCollector||usageCollector.trackRequest(),core.http.fetch("/api/kibana/suggestions/values/"+index,{method:"POST",body:JSON.stringify({query:query,field:field.name,fieldMeta:null==field||null===(_field$toSpec=field.toSpec)||void 0===_field$toSpec?void 0:_field$toSpec.call(field),filters:filters}),signal:signal}).then(r=>(null==usageCollector||usageCollector.trackResult(),r))},resolver);return async({indexPattern:indexPattern,field:field,query:query,useTimeRange:useTimeRange,boolFilter:boolFilter,signal:signal})=>{var _useTimeRange;const shouldSuggestValues=core.uiSettings.get(common.UI_SETTINGS.FILTERS_EDITOR_SUGGEST_VALUES);useTimeRange=null!==(_useTimeRange=useTimeRange)&&void 0!==_useTimeRange?_useTimeRange:core.uiSettings.get(common.UI_SETTINGS.AUTOCOMPLETE_USE_TIMERANGE);const{title:title}=indexPattern;if("boolean"===field.type)return[!0,!1];if(!shouldSuggestValues||!field.aggregatable||"string"!==field.type)return[];const timeFilter=useTimeRange?(({timefilter:timefilter},indexPattern)=>{const timeRange=timefilter.getTime(),roundedTimerange={from:target_default.a.parse(timeRange.from).startOf("minute").toISOString(),to:target_default.a.parse(timeRange.to).endOf("minute").toISOString()};return timefilter.createFilter(indexPattern,roundedTimerange)})(timefilter,indexPattern):void 0,filters=[...boolFilter||[],...timeFilter?Object(common.buildQueryFromFilters)([timeFilter],indexPattern).filter:[]];try{return null==usageCollector||usageCollector.trackCall(),await requestSuggestions(title,field,query,filters,signal)}catch(e){return null!=signal&&signal.aborted||null==usageCollector||usageCollector.trackError(),requestSuggestions.cache.delete(resolver(title,field,query,filters)),[]}}};var external_kbnSharedDeps_RxjsOperators_=__webpack_require__(6),public_=__webpack_require__(24);let AUTOCOMPLETE_EVENT_TYPE;!function(AUTOCOMPLETE_EVENT_TYPE){AUTOCOMPLETE_EVENT_TYPE.CALL="autocomplete:call",AUTOCOMPLETE_EVENT_TYPE.REQUEST="autocomplete:req",AUTOCOMPLETE_EVENT_TYPE.RESULT="autocomplete:res",AUTOCOMPLETE_EVENT_TYPE.ERROR="autocomplete:err"}(AUTOCOMPLETE_EVENT_TYPE||(AUTOCOMPLETE_EVENT_TYPE={}));var external_kbnSharedDeps_React_=__webpack_require__(3),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(16);const escapeKuery=Object(external_kbnSharedDeps_Lodash_.flow)((function(str){return str.replace(/[\\():<>"*]/g,"\\$&")}),(function(str){return str.replace(/(\s+)(and|or)(\s+)/gi,"$1\\$2$3")}),(function(str){return str.replace(/not(\s+)/gi,"\\$&")}),(function(str){return str.replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n")}));var public_0=__webpack_require__(32);const keywordComparator=(first,second)=>{const extensions=["raw","keyword"];return extensions.map(ext=>`${first.name}.${ext}`).includes(second.name)?1:extensions.map(ext=>`${second.name}.${ext}`).includes(first.name)?-1:first.name.localeCompare(second.name)},setupGetFieldSuggestions=core=>({indexPatterns:indexPatterns},{start:start,end:end,prefix:prefix,suffix:suffix,nestedPath:nestedPath=""})=>{const allFields=Object(external_kbnSharedDeps_Lodash_.flatten)(indexPatterns.map(indexPattern=>indexPattern.fields.filter(public_0.indexPatterns.isFilterable))),search=`${prefix}${suffix}`.trim().toLowerCase(),suggestions=function(array,prefix,property){if(!prefix)return array;const lowerCasePrefix=(""+prefix).toLowerCase(),partitions=Object(external_kbnSharedDeps_Lodash_.partition)(array,entry=>(""+(property?entry[property]:entry)).toLowerCase().startsWith(lowerCasePrefix));return[...partitions[0],...partitions[1]]}(allFields.filter(field=>(!nestedPath||nestedPath&&field.subType&&field.subType.nested&&field.subType.nested.path.includes(nestedPath))&&field.name.toLowerCase().includes(search)).sort(keywordComparator),search,"name").map(field=>{const remainingPath=field.subType&&field.subType.nested?field.subType.nested.path.slice(nestedPath?nestedPath.length+1:0):"",text=field.subType&&field.subType.nested&&remainingPath.length>0?`${escapeKuery(remainingPath)}:{ ${escapeKuery(field.name.slice(field.subType.nested.path.length+1))}  }`:escapeKuery(field.name.slice(nestedPath?nestedPath.length+1:0))+" ",description=(field=>external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"data.kueryAutocomplete.filterResultsDescription",defaultMessage:"Filter results that contain {fieldName}",values:{fieldName:external_kbnSharedDeps_React_default.a.createElement("span",{className:"kbnSuggestionItem__callout"},field.name)}})))(field),cursorIndex=field.subType&&field.subType.nested&&remainingPath.length>0?text.length-2:text.length;return{type:public_0.QuerySuggestionTypes.Field,text:text,description:description,start:start,end:end,cursorIndex:cursorIndex,field:field}});return Promise.resolve(suggestions)},setupGetValueSuggestions=core=>{const autoCompleteServicePromise=core.getStartServices().then(([_,__,dataStart])=>dataStart.autocomplete);return async({indexPatterns:indexPatterns,boolFilter:boolFilter,useTimeRange:useTimeRange,signal:signal},{start:start,end:end,prefix:prefix,suffix:suffix,fieldName:fieldName,nestedPath:nestedPath})=>{const fullFieldName=nestedPath?`${nestedPath}.${fieldName}`:fieldName,indexPatternFieldEntries=[];indexPatterns.forEach(indexPattern=>{indexPattern.fields.filter(field=>field.name===fullFieldName).forEach(field=>indexPatternFieldEntries.push([indexPattern,field]))});const query=`${prefix}${suffix}`.trim(),{getValueSuggestions:getValueSuggestions}=await autoCompleteServicePromise,data=await Promise.all(indexPatternFieldEntries.map(([indexPattern,field])=>getValueSuggestions({indexPattern:indexPattern,field:field,query:query,boolFilter:boolFilter,useTimeRange:useTimeRange,signal:signal}).then(valueSuggestions=>{const quotedValues=valueSuggestions.map(value=>{return"string"==typeof value?`"${str=value,str.replace(/[\\"]/g,"\\$&")}"`:""+value;var str});return((start,end,query,values)=>values.filter(value=>value.toLowerCase().includes(query.toLowerCase())).map(value=>({type:public_0.QuerySuggestionTypes.Value,text:value+" ",start:start,end:end})))(start,end,query,quotedValues)})));return Object(external_kbnSharedDeps_Lodash_.flatten)(data)}},equalsText=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"data.kueryAutocomplete.equalOperatorDescription.equalsText",defaultMessage:"equals",description:"Part of data.kueryAutocomplete.equalOperatorDescription. Full text: 'equals some value'"}),lessThanOrEqualToText=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"data.kueryAutocomplete.lessThanOrEqualOperatorDescription.lessThanOrEqualToText",defaultMessage:"less than or equal to",description:"Part of data.kueryAutocomplete.lessThanOrEqualOperatorDescription. Full text: 'is less than or equal to some value'"}),greaterThanOrEqualToText=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"data.kueryAutocomplete.greaterThanOrEqualOperatorDescription.greaterThanOrEqualToText",defaultMessage:"greater than or equal to",description:"Part of data.kueryAutocomplete.greaterThanOrEqualOperatorDescription. Full text: 'is greater than or equal to some value'"}),lessThanText=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"data.kueryAutocomplete.lessThanOperatorDescription.lessThanText",defaultMessage:"less than",description:"Part of data.kueryAutocomplete.lessThanOperatorDescription. Full text: 'is less than some value'"}),greaterThanText=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"data.kueryAutocomplete.greaterThanOperatorDescription.greaterThanText",defaultMessage:"greater than",description:"Part of data.kueryAutocomplete.greaterThanOperatorDescription. Full text: 'is greater than some value'"}),existsText=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"data.kueryAutocomplete.existOperatorDescription.existsText",defaultMessage:"exists",description:"Part of data.kueryAutocomplete.existOperatorDescription. Full text: 'exists in any form'"}),operators={":":{description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"data.kueryAutocomplete.equalOperatorDescription",defaultMessage:"{equals} some value",values:{equals:external_kbnSharedDeps_React_default.a.createElement("span",{className:"kbnSuggestionItem__callout"},equalsText)},description:"Full text: 'equals some value'. See 'data.kueryAutocomplete.equalOperatorDescription.equalsText' for 'equals' part."}),fieldTypes:["string","number","number_range","date","date_range","ip","ip_range","geo_point","geo_shape","boolean"]},"<=":{description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"data.kueryAutocomplete.lessThanOrEqualOperatorDescription",defaultMessage:"is {lessThanOrEqualTo} some value",values:{lessThanOrEqualTo:external_kbnSharedDeps_React_default.a.createElement("span",{className:"kbnSuggestionItem__callout"},lessThanOrEqualToText)},description:"Full text: 'is less than or equal to some value'. See 'data.kueryAutocomplete.lessThanOrEqualOperatorDescription.lessThanOrEqualToText' for 'less than or equal to' part."}),fieldTypes:["number","number_range","date","date_range","ip","ip_range"]},">=":{description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"data.kueryAutocomplete.greaterThanOrEqualOperatorDescription",defaultMessage:"is {greaterThanOrEqualTo} some value",values:{greaterThanOrEqualTo:external_kbnSharedDeps_React_default.a.createElement("span",{className:"kbnSuggestionItem__callout"},greaterThanOrEqualToText)},description:"Full text: 'is greater than or equal to some value'. See 'data.kueryAutocomplete.greaterThanOrEqualOperatorDescription.greaterThanOrEqualToText' for 'greater than or equal to' part."}),fieldTypes:["number","number_range","date","date_range","ip","ip_range"]},"<":{description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"data.kueryAutocomplete.lessThanOperatorDescription",defaultMessage:"is {lessThan} some value",values:{lessThan:external_kbnSharedDeps_React_default.a.createElement("span",{className:"kbnSuggestionItem__callout"},lessThanText)},description:"Full text: 'is less than some value'. See 'data.kueryAutocomplete.lessThanOperatorDescription.lessThanText' for 'less than' part."}),fieldTypes:["number","number_range","date","date_range","ip","ip_range"]},">":{description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"data.kueryAutocomplete.greaterThanOperatorDescription",defaultMessage:"is {greaterThan} some value",values:{greaterThan:external_kbnSharedDeps_React_default.a.createElement("span",{className:"kbnSuggestionItem__callout"},greaterThanText)},description:"Full text: 'is greater than some value'. See 'data.kueryAutocomplete.greaterThanOperatorDescription.greaterThanText' for 'greater than' part."}),fieldTypes:["number","number_range","date","date_range","ip","ip_range"]},": *":{description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"data.kueryAutocomplete.existOperatorDescription",defaultMessage:"{exists} in any form",values:{exists:external_kbnSharedDeps_React_default.a.createElement("span",{className:"kbnSuggestionItem__callout"},existsText)},description:"Full text: 'exists in any form'. See 'data.kueryAutocomplete.existOperatorDescription.existsText' for 'exists' part."}),fieldTypes:void 0}},getOperatorByName=operator=>operators[operator],operator_getDescription=operator=>external_kbnSharedDeps_React_default.a.createElement("p",null,getOperatorByName(operator).description),bothArgumentsText=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"data.kueryAutocomplete.andOperatorDescription.bothArgumentsText",defaultMessage:"both arguments",description:"Part of data.kueryAutocomplete.andOperatorDescription. Full text: 'Requires both arguments to be true'"}),oneOrMoreArgumentsText=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"data.kueryAutocomplete.orOperatorDescription.oneOrMoreArgumentsText",defaultMessage:"one or more arguments",description:"Part of data.kueryAutocomplete.orOperatorDescription. Full text: 'Requires one or more arguments to be true'"}),conjunctions={and:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"data.kueryAutocomplete.andOperatorDescription",defaultMessage:"Requires {bothArguments} to be true",values:{bothArguments:external_kbnSharedDeps_React_default.a.createElement("span",{className:"kbnSuggestionItem__callout"},bothArgumentsText)},description:"Full text: ' Requires both arguments to be true'. See 'data.kueryAutocomplete.andOperatorDescription.bothArgumentsText' for 'both arguments' part."})),or:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"data.kueryAutocomplete.orOperatorDescription",defaultMessage:"Requires {oneOrMoreArguments} to be true",values:{oneOrMoreArguments:external_kbnSharedDeps_React_default.a.createElement("span",{className:"kbnSuggestionItem__callout"},oneOrMoreArgumentsText)},description:"Full text: 'Requires one or more arguments to be true'. See 'data.kueryAutocomplete.orOperatorDescription.oneOrMoreArgumentsText' for 'one or more arguments' part."}))},setupKqlQuerySuggestionProvider=core=>{const providers={field:setupGetFieldSuggestions(),value:setupGetValueSuggestions(core),operator:({indexPatterns:indexPatterns},{end:end,fieldName:fieldName,nestedPath:nestedPath})=>{const allFields=Object(external_kbnSharedDeps_Lodash_.flatten)(indexPatterns.map(indexPattern=>indexPattern.fields.slice())),fullFieldName=nestedPath?`${nestedPath}.${fieldName}`:fieldName,fields=allFields.filter(field=>field.name===fullFieldName).map(field=>Object.keys(operators).filter(operator=>{const{fieldTypes:fieldTypes}=getOperatorByName(operator);return!fieldTypes||fieldTypes.includes(field.type)}).map(operator=>({type:public_0.QuerySuggestionTypes.Operator,text:operator+" ",description:operator_getDescription(operator),start:end,end:end})));return Promise.resolve(Object(external_kbnSharedDeps_Lodash_.flatten)(fields))},conjunction:(querySuggestionsArgs,{text:text,end:end})=>{let suggestions=[];return text.endsWith(" ")&&(suggestions=Object.keys(conjunctions).map(key=>({type:public_0.QuerySuggestionTypes.Conjunction,text:key+" ",description:conjunctions[key],start:end,end:end}))),Promise.resolve(suggestions)}};return querySuggestionsArgs=>{const{query:query,selectionStart:selectionStart,selectionEnd:selectionEnd}=querySuggestionsArgs,cursoredQuery=`${query.substr(0,selectionStart)}@kuery-cursor@${query.substr(selectionEnd)}`;return Promise.all(((cursoredQuery,querySuggestionsArgs)=>{try{const cursorNode=public_0.esKuery.fromKueryExpression(cursoredQuery,{cursorSymbol:"@kuery-cursor@",parseCursor:!0});return cursorNode.suggestionTypes.map(type=>providers[type](querySuggestionsArgs,cursorNode))}catch(e){return[]}})(cursoredQuery,querySuggestionsArgs)).then(suggestionsByType=>{return suggestions=Object(external_kbnSharedDeps_Lodash_.flatten)(suggestionsByType),Object(external_kbnSharedDeps_Lodash_.uniqBy)(suggestions,({type:type,text:text,start:start,end:end})=>[type,text,start,end].join("|"));var suggestions})}};function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class autocomplete_service_AutocompleteService{constructor(initializerContext){_defineProperty(this,"autocompleteConfig",void 0),_defineProperty(this,"querySuggestionProviders",new Map),_defineProperty(this,"getValueSuggestions",void 0),_defineProperty(this,"getQuerySuggestions",args=>{const{language:language}=args,provider=this.querySuggestionProviders.get(language);if(provider)return provider(args)}),_defineProperty(this,"hasQuerySuggestions",language=>this.querySuggestionProviders.has(language));const{autocomplete:autocomplete}=initializerContext.config.get();this.autocompleteConfig=autocomplete}setup(core,{timefilter:timefilter,usageCollection:usageCollection}){const usageCollector=((getStartServices,usageCollection)=>{const getCurrentApp=async()=>{const[{application:application}]=await getStartServices();return application.currentAppId$.pipe(Object(external_kbnSharedDeps_RxjsOperators_.first)()).toPromise()};return{trackCall:async()=>{const currentApp=await getCurrentApp();return null==usageCollection?void 0:usageCollection.reportUiCounter(currentApp,public_.METRIC_TYPE.LOADED,AUTOCOMPLETE_EVENT_TYPE.CALL)},trackRequest:async()=>{const currentApp=await getCurrentApp();return null==usageCollection?void 0:usageCollection.reportUiCounter(currentApp,public_.METRIC_TYPE.LOADED,AUTOCOMPLETE_EVENT_TYPE.REQUEST)},trackResult:async()=>{const currentApp=await getCurrentApp();return null==usageCollection?void 0:usageCollection.reportUiCounter(currentApp,public_.METRIC_TYPE.LOADED,AUTOCOMPLETE_EVENT_TYPE.RESULT)},trackError:async()=>{const currentApp=await getCurrentApp();return null==usageCollection?void 0:usageCollection.reportUiCounter(currentApp,public_.METRIC_TYPE.LOADED,AUTOCOMPLETE_EVENT_TYPE.ERROR)}}})(core.getStartServices,usageCollection);return this.getValueSuggestions=this.autocompleteConfig.valueSuggestions.enabled?setupValueSuggestionProvider(core,{timefilter:timefilter,usageCollector:usageCollector}):getEmptyValueSuggestions,this.autocompleteConfig.querySuggestions.enabled&&this.querySuggestionProviders.set("kuery",setupKqlQuerySuggestionProvider(core)),{getQuerySuggestions:this.getQuerySuggestions}}start(){return{getQuerySuggestions:this.getQuerySuggestions,hasQuerySuggestions:this.hasQuerySuggestions,getValueSuggestions:this.getValueSuggestions}}clearProviders(){this.querySuggestionProviders.clear()}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return index_pattern_select.IndexPatternSelectProps})),__webpack_require__.d(__webpack_exports__,"a",(function(){return filter_bar.b})),__webpack_require__.d(__webpack_exports__,"c",(function(){return QueryStringInput})),__webpack_require__.d(__webpack_exports__,"d",(function(){})),__webpack_require__.d(__webpack_exports__,"e",(function(){return search_bar.a})),__webpack_require__.d(__webpack_exports__,"f",(function(){return search_bar.SearchBarProps})),__webpack_require__.d(__webpack_exports__,"g",(function(){return search_bar.c})),__webpack_require__.d(__webpack_exports__,"h",(function(){return SuggestionsComponent}));var index_pattern_select=__webpack_require__(90),filter_bar=__webpack_require__(72),external_kbnSharedDeps_React_=__webpack_require__(3),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),public_=__webpack_require__(25);const Fallback=()=>external_kbnSharedDeps_React_default.a.createElement("div",null),LazyQueryStringInputUI=Object(public_.withKibana)(external_kbnSharedDeps_React_default.a.lazy(()=>__webpack_require__.e(0).then(__webpack_require__.bind(null,170)))),QueryStringInput=props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Suspense,{fallback:external_kbnSharedDeps_React_default.a.createElement(Fallback,null)},external_kbnSharedDeps_React_default.a.createElement(LazyQueryStringInputUI,props));var search_bar=__webpack_require__(52);const typeahead_Fallback=()=>external_kbnSharedDeps_React_default.a.createElement("div",null),LazySuggestionsComponent=external_kbnSharedDeps_React_default.a.lazy(()=>__webpack_require__.e(5).then(__webpack_require__.bind(null,176))),SuggestionsComponent=props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Suspense,{fallback:external_kbnSharedDeps_React_default.a.createElement(typeahead_Fallback,null)},external_kbnSharedDeps_React_default.a.createElement(LazySuggestionsComponent,props))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return initParams})),__webpack_require__.d(__webpack_exports__,"d",(function(){return writeParams}));var _param_types_agg__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(80),_param_types_field__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(81),_param_types_optioned__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(51),_param_types_string__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(82),_param_types_json__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(83),_param_types_base__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(27);const paramTypeMap={field:_param_types_field__WEBPACK_IMPORTED_MODULE_1__.a,optioned:_param_types_optioned__WEBPACK_IMPORTED_MODULE_2__.a,string:_param_types_string__WEBPACK_IMPORTED_MODULE_3__.a,json:_param_types_json__WEBPACK_IMPORTED_MODULE_4__.a,agg:_param_types_agg__WEBPACK_IMPORTED_MODULE_0__.a,_default:_param_types_base__WEBPACK_IMPORTED_MODULE_5__.a},initParams=params=>params.map(config=>new(paramTypeMap[config.type]||paramTypeMap._default)(config)),writeParams=(params=[],aggConfig,aggs,locals)=>{const output={params:{}};return locals=locals||{},params.forEach(param=>{param.write?param.write(aggConfig,output,aggs,locals):param&&param.name&&(output.params[param.name]=aggConfig.params[param.name])}),output}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"j",(function(){return kibana})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getKibanaContextFn})),__webpack_require__.d(__webpack_exports__,"n",(function(){return kqlFunction})),__webpack_require__.d(__webpack_exports__,"o",(function(){return luceneFunction})),__webpack_require__.d(__webpack_exports__,"q",(function(){return queryToAst})),__webpack_require__.d(__webpack_exports__,"t",(function(){return timerangeToAst})),__webpack_require__.d(__webpack_exports__,"k",(function(){return kibanaContext})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getEsaggsMeta})),__webpack_require__.d(__webpack_exports__,"i",(function(){return handleRequest})),__webpack_require__.d(__webpack_exports__,"e",(function(){return functionWrapper})),__webpack_require__.d(__webpack_exports__,"s",(function(){return rangeFunction})),__webpack_require__.d(__webpack_exports__,"c",(function(){return fieldFunction})),__webpack_require__.d(__webpack_exports__,"p",(function(){return phraseFilterFunction})),__webpack_require__.d(__webpack_exports__,"b",(function(){return existsFilterFunction})),__webpack_require__.d(__webpack_exports__,"r",(function(){return rangeFilterFunction})),__webpack_require__.d(__webpack_exports__,"l",(function(){return kibanaFilterFunction})),__webpack_require__.d(__webpack_exports__,"d",(function(){return filtersToAst})),__webpack_require__.d(__webpack_exports__,"m",(function(){return kibanaTimerangeFunction})),__webpack_require__.d(__webpack_exports__,"a",(function(){return esRawResponse})),__webpack_require__.d(__webpack_exports__,"g",(function(){return esdsl.a}));var external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);const toArray=query=>query?Array.isArray(query)?query:[query]:[],kibana={name:"kibana",type:"kibana_context",inputTypes:["kibana_context","null"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.kibana.help",{defaultMessage:"Gets kibana global context"}),args:{},fn:(input,_,{getSearchContext:getSearchContext})=>({...input,type:"kibana_context",query:[...toArray(getSearchContext().query),...toArray((input||{}).query)],filters:[...getSearchContext().filters||[],...(input||{}).filters||[]],timeRange:getSearchContext().timeRange||(input?input.timeRange:void 0)})};var external_kbnSharedDeps_Lodash_=__webpack_require__(2),common_=__webpack_require__(33),common_query=__webpack_require__(79);const mergeQueries=(first=[],second)=>Object(external_kbnSharedDeps_Lodash_.uniqBy)([...Array.isArray(first)?first:[first],...Array.isArray(second)?second:[second]],n=>JSON.stringify(n.query)),getKibanaContextFn=getStartDependencies=>({name:"kibana_context",type:"kibana_context",inputTypes:["kibana_context","null"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.kibana_context.help",{defaultMessage:"Updates kibana global context"}),args:{q:{types:["kibana_query","null"],aliases:["query","_"],default:null,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.kibana_context.q.help",{defaultMessage:"Specify Kibana free form text query"})},filters:{types:["kibana_filter","null"],multi:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.kibana_context.filters.help",{defaultMessage:"Specify Kibana generic filters"})},timeRange:{types:["timerange","null"],default:null,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.kibana_context.timeRange.help",{defaultMessage:"Specify Kibana time range filter"})},savedSearchId:{types:["string","null"],default:null,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.kibana_context.savedSearchId.help",{defaultMessage:"Specify saved search ID to be used for queries and filters"})}},extract(state){const references=[];if(state.savedSearchId.length&&"string"==typeof state.savedSearchId[0]){const refName="kibana_context.savedSearchId";return references.push({name:refName,type:"search",id:state.savedSearchId[0]}),{state:{...state,savedSearchId:[refName]},references:references}}return{state:state,references:references}},inject(state,references){const reference=references.find(r=>"kibana_context.savedSearchId"===r.name);return reference&&(state.savedSearchId[0]=reference.id),state},async fn(input,args,{getKibanaRequest:getKibanaRequest}){var _args$filters;const{savedObjectsClient:savedObjectsClient}=await getStartDependencies(getKibanaRequest),timeRange=args.timeRange||(null==input?void 0:input.timeRange);let queries=mergeQueries(null==input?void 0:input.query,(null==args?void 0:args.q)||[]),filters=[...(null==input?void 0:input.filters)||[],...(null==args||null===(_args$filters=args.filters)||void 0===_args$filters?void 0:_args$filters.map(common_.unboxExpressionValue))||[]];if(args.savedSearchId){const search=(await savedObjectsClient.get("search",args.savedSearchId)).attributes.kibanaSavedObjectMeta.searchSourceJSON,{query:query,filter:filter}=(defaultValue={},"string"==typeof(data=search)&&data.length&&JSON.parse(data)||defaultValue);query&&(queries=mergeQueries(queries,query)),filter&&(filters=[...filters,...Array.isArray(filter)?filter:[filter]])}var data,defaultValue;return{type:"kibana_context",query:queries,filters:Object(common_query.uniqFilters)(filters).filter(f=>{var _f$meta;return!(null!==(_f$meta=f.meta)&&void 0!==_f$meta&&_f$meta.disabled)}),timeRange:timeRange}}}),kqlFunction={name:"kql",type:"kibana_query",inputTypes:["null"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.kql.help",{defaultMessage:"Create kibana kql query"}),args:{q:{types:["string"],required:!0,aliases:["query","_"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.kql.q.help",{defaultMessage:"Specify Kibana KQL free form text query"})}},fn:(input,args)=>({type:"kibana_query",language:"kuery",query:args.q})},luceneFunction={name:"lucene",type:"kibana_query",inputTypes:["null"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.lucene.help",{defaultMessage:"Create kibana lucene query"}),args:{q:{types:["string"],required:!0,aliases:["query","_"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.lucene.q.help",{defaultMessage:"Specify Lucene free form text query"})}},fn:(input,args)=>({type:"kibana_query",language:"lucene",query:JSON.parse(args.q)})},queryToAst=query=>"kuery"===query.language?Object(common_.buildExpression)([Object(common_.buildExpressionFunction)("kql",{q:query.query})]):Object(common_.buildExpression)([Object(common_.buildExpressionFunction)("lucene",{q:JSON.stringify(query.query)})]),timerangeToAst=timerange=>Object(common_.buildExpressionFunction)("timerange",{from:timerange.from,to:timerange.to,mode:timerange.mode}),kibanaContext={name:"kibana_context",from:{null:()=>({type:"kibana_context"})},to:{null:()=>({type:"null"})}};var common=__webpack_require__(1),tabify=__webpack_require__(88);const handleRequest=async({abortSignal:abortSignal,aggs:aggs,filters:filters,indexPattern:indexPattern,inspectorAdapters:inspectorAdapters,partialRows:partialRows,query:query,searchSessionId:searchSessionId,searchSourceService:searchSourceService,timeFields:timeFields,timeRange:timeRange,getNow:getNow})=>{var _indexPattern$getTime,_inspectorAdapters$re;const forceNow=null==getNow?void 0:getNow(),searchSource=await searchSourceService.create();searchSource.setField("index",indexPattern),searchSource.setField("size",0);const timeFilterSearchSource=searchSource.createChild({callParentStartHandlers:!0}),requestSearchSource=timeFilterSearchSource.createChild({callParentStartHandlers:!0});aggs.setTimeRange(timeRange),aggs.setTimeFields(timeFields),Object.defineProperty(requestSearchSource,"history",{get:()=>searchSource.history,set:history=>searchSource.history=history}),requestSearchSource.setField("aggs",aggs),requestSearchSource.onRequestStart((paramSearchSource,options)=>aggs.onSearchRequestStart(paramSearchSource,options));const defaultTimeField=null==indexPattern||null===(_indexPattern$getTime=indexPattern.getTimeField)||void 0===_indexPattern$getTime?void 0:_indexPattern$getTime.call(indexPattern),defaultTimeFields=defaultTimeField?[defaultTimeField.name]:[],allTimeFields=timeFields&&timeFields.length>0?timeFields:defaultTimeFields;timeRange&&allTimeFields.length>0&&timeFilterSearchSource.setField("filter",()=>allTimeFields.map(fieldName=>Object(common.getTime)(indexPattern,timeRange,{fieldName:fieldName,forceNow:forceNow})).filter(common.isRangeFilter)),requestSearchSource.setField("filter",filters),requestSearchSource.setField("query",query),null===(_inspectorAdapters$re=inspectorAdapters.requests)||void 0===_inspectorAdapters$re||_inspectorAdapters$re.reset();const response=await requestSearchSource.fetch$({abortSignal:abortSignal,sessionId:searchSessionId,inspector:{adapter:inspectorAdapters.requests,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.functions.esaggs.inspector.dataRequest.title",{defaultMessage:"Data"}),description:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.functions.esaggs.inspector.dataRequest.description",{defaultMessage:"This request queries Elasticsearch to fetch the data for the visualization."})}}).toPromise(),parsedTimeRange=timeRange?Object(common.calculateBounds)(timeRange,{forceNow:forceNow}):null,tabifyParams={metricsAtAllLevels:aggs.hierarchical,partialRows:partialRows,timeRange:parsedTimeRange?{from:parsedTimeRange.min,to:parsedTimeRange.max,timeFields:allTimeFields}:void 0};return Object(tabify.a)(aggs,response,tabifyParams)},getEsaggsMeta=()=>({name:"esaggs",type:"datatable",inputTypes:["kibana_context","null"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.functions.esaggs.help",{defaultMessage:"Run AggConfig aggregation"}),args:{index:{types:["index_pattern"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.esaggs.index.help",{defaultMessage:"Index pattern retrieved with indexPatternLoad"})},aggs:{types:["agg_type"],multi:!0,default:[],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.esaggs.aggConfigs.help",{defaultMessage:"List of aggs configured with agg_type functions"})},metricsAtAllLevels:{types:["boolean"],default:!1,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.esaggs.metricsAtAllLevels.help",{defaultMessage:"Whether to include columns with metrics for each bucket level"})},partialRows:{types:["boolean"],default:!1,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.esaggs.partialRows.help",{defaultMessage:"Whether to return rows that only contain partial data"})},timeFields:{types:["string"],multi:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.esaggs.timeFields.help",{defaultMessage:"Provide time fields to get the resolved time ranges for the query"})}}}),functionWrapper=spec=>{const defaultArgs=Object(external_kbnSharedDeps_Lodash_.mapValues)(spec.args,argSpec=>argSpec.default);return(context,args={},handlers={})=>spec.fn(context,{...defaultArgs,...args},handlers)},rangeFunction={name:"range",type:"kibana_range",inputTypes:["null"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.range.help",{defaultMessage:"Create kibana range filter"}),args:{gt:{types:["string","number"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.range.gt.help",{defaultMessage:"Greater than"})},lt:{types:["string","number"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.range.lt.help",{defaultMessage:"Less than"})},gte:{types:["string","number"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.range.gte.help",{defaultMessage:"Greater or equal than"})},lte:{types:["string","number"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.range.lte.help",{defaultMessage:"Less or equal than"})}},fn(input,args){if(void 0===args.lt&&void 0===args.lte)throw new Error("lt or lte must be provided");if(void 0===args.gt&&void 0===args.gte)throw new Error("gt or gte must be provided");return{type:"kibana_range",...args}}},fieldFunction={name:"field",type:"kibana_field",inputTypes:["null"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.field.help",{defaultMessage:"Create a Kibana field."}),args:{name:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.field.name.help",{defaultMessage:"Name of the field"})},type:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.field.type.help",{defaultMessage:"Type of the field"})},script:{types:["string"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.field.script.help",{defaultMessage:"A field script, in case the field is scripted."})}},fn:(input,args)=>({type:"kibana_field",spec:{name:args.name,type:args.type,scripted:!!args.script,script:args.script}})};var es_query_filters=__webpack_require__(8);const phraseFilterFunction={name:"rangeFilter",type:"kibana_filter",inputTypes:["null"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.phraseFilter.help",{defaultMessage:"Create kibana phrase or phrases filter"}),args:{field:{types:["kibana_field"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.phraseFilter.field.help",{defaultMessage:"Specify the field you want to filter on. Use `field` function."})},phrase:{types:["string"],multi:!0,required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.phraseFilter.phrase.help",{defaultMessage:"Specify the phrases"})},negate:{types:["boolean"],default:!1,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.phraseFilter.negate.help",{defaultMessage:"Should the filter be negated"})}},fn:(input,args)=>1===args.phrase.length?{type:"kibana_filter",...Object(es_query_filters.buildFilter)({},args.field.spec,es_query_filters.FILTERS.PHRASE,args.negate||!1,!1,args.phrase[0],null)}:{type:"kibana_filter",...Object(es_query_filters.buildFilter)({},args.field.spec,es_query_filters.FILTERS.PHRASES,args.negate||!1,!1,args.phrase,null)}},existsFilterFunction={name:"existsFilter",type:"kibana_filter",inputTypes:["null"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.existsFilter.help",{defaultMessage:"Create kibana exists filter"}),args:{field:{types:["kibana_field"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.existsFilter.field.help",{defaultMessage:"Specify the field you want to filter on. Use `field` function."})},negate:{types:["boolean"],default:!1,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.existsFilter.negate.help",{defaultMessage:"Should the filter be negated."})}},fn:(input,args)=>({type:"kibana_filter",...Object(es_query_filters.buildFilter)({},args.field.spec,es_query_filters.FILTERS.EXISTS,args.negate||!1,!1,{},null)})},rangeFilterFunction={name:"rangeFilter",type:"kibana_filter",inputTypes:["null"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.rangeFilter.help",{defaultMessage:"Create kibana range filter"}),args:{field:{types:["kibana_field"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.rangeFilter.field.help",{defaultMessage:"Specify the field you want to filter on. Use `field` function."})},range:{types:["kibana_range"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.rangeFilter.range.help",{defaultMessage:"Specify the range, use `range` function."})},negate:{types:["boolean"],default:!1,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.rangeFilter.negate.help",{defaultMessage:"Should the filter be negated"})}},fn:(input,args)=>({type:"kibana_filter",...Object(es_query_filters.buildFilter)({},args.field.spec,es_query_filters.FILTERS.RANGE,args.negate||!1,!1,{from:args.range.gt||args.range.gte,to:args.range.lt||args.range.lte},null)})},kibanaFilterFunction={name:"kibanaFilter",type:"kibana_filter",inputTypes:["null"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.kibanaFilter.help",{defaultMessage:"Create kibana filter"}),args:{query:{types:["string"],aliases:["q","_"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.kibanaFilter.field.help",{defaultMessage:"Specify free form esdsl query"})},negate:{types:["boolean"],default:!1,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.kibanaFilter.negate.help",{defaultMessage:"Should the filter be negated"})},disabled:{types:["boolean"],default:!1,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.kibanaFilter.disabled.help",{defaultMessage:"Should the filter be disabled"})}},fn:(input,args)=>({type:"kibana_filter",meta:{negate:args.negate||!1,alias:"",disabled:args.disabled||!1},...JSON.parse(args.query)})},filtersToAst=filters=>(Array.isArray(filters)?filters:[filters]).map(filter=>{const{meta:meta,$state:$state,...restOfFilter}=filter;return Object(common_.buildExpression)([Object(common_.buildExpressionFunction)("kibanaFilter",{query:JSON.stringify(restOfFilter),negate:filter.meta.negate,disabled:filter.meta.disabled})])}),kibanaTimerangeFunction={name:"timerange",type:"timerange",inputTypes:["null"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.timerange.help",{defaultMessage:"Create kibana timerange"}),args:{from:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.timerange.from.help",{defaultMessage:"Specify the start date"})},to:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.timerange.to.help",{defaultMessage:"Specify the end date"})},mode:{types:["string"],options:["absolute","relative"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.functions.timerange.mode.help",{defaultMessage:"Specify the mode (absolute or relative)"})}},fn:(input,args)=>({type:"timerange",from:args.from,to:args.to,mode:args.mode})};const convertResult=body=>body.aggregations?function flatten(obj,keyPrefix=""){let topLevelKeys={};const nestedRows=[],prefix=keyPrefix?keyPrefix+".":"";return Object.keys(obj).forEach(key=>{if(Array.isArray(obj[key]))nestedRows.push(...obj[key].map(nestedRow=>flatten(nestedRow,prefix+key)).reduce((acc,object)=>[...acc,...object],[]));else if("object"==typeof obj[key]&&null!==obj[key]){const subRows=flatten(obj[key],prefix+key);1===subRows.length?topLevelKeys={...topLevelKeys,...subRows[0]}:nestedRows.push(...subRows)}else topLevelKeys[prefix+key]=obj[key]}),0===nestedRows.length?[topLevelKeys]:nestedRows.map(nestedRow=>({...nestedRow,...topLevelKeys}))}(body.aggregations):body.hits.hits.map(hit=>hit.fields||hit._source).filter(hit=>hit),esRawResponse={name:"es_raw_response",to:{datatable:context=>{const rows=convertResult(context.body);return{type:"datatable",meta:{type:"esdsl",source:"*"},columns:rows.length?Object.keys(rows[0]).map(key=>({id:key,name:key,meta:{type:typeof rows[0][key],field:key,params:{}}})):[],rows:rows}}}};var esdsl=__webpack_require__(84)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _query_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(74);for(var __WEBPACK_IMPORT_KEY__ in _query_types__WEBPACK_IMPORTED_MODULE_0__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _query_types__WEBPACK_IMPORTED_MODULE_0__[key]}))}(__WEBPACK_IMPORT_KEY__);var _kbn_field_types_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4);__webpack_require__.d(__webpack_exports__,"ES_FIELD_TYPES",(function(){return _kbn_field_types_types__WEBPACK_IMPORTED_MODULE_1__.a})),__webpack_require__.d(__webpack_exports__,"KBN_FIELD_TYPES",(function(){return _kbn_field_types_types__WEBPACK_IMPORTED_MODULE_1__.b}));var _index_patterns_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(73);for(var __WEBPACK_IMPORT_KEY__ in _index_patterns_types__WEBPACK_IMPORTED_MODULE_2__)["default","ES_FIELD_TYPES","KBN_FIELD_TYPES"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _index_patterns_types__WEBPACK_IMPORTED_MODULE_2__[key]}))}(__WEBPACK_IMPORT_KEY__)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AggType}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_kbn_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_agg_params__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(37),_param_types_base__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(27);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class AggType{constructor(config){if(_defineProperty(this,"name",void 0),_defineProperty(this,"type",void 0),_defineProperty(this,"subtype",void 0),_defineProperty(this,"dslName",void 0),_defineProperty(this,"expressionName",void 0),_defineProperty(this,"title",void 0),_defineProperty(this,"valueType",void 0),_defineProperty(this,"makeLabel",void 0),_defineProperty(this,"ordered",void 0),_defineProperty(this,"hasNoDsl",void 0),_defineProperty(this,"hasNoDslParams",void 0),_defineProperty(this,"createFilter",void 0),_defineProperty(this,"params",void 0),_defineProperty(this,"getRequestAggs",void 0),_defineProperty(this,"getResponseAggs",void 0),_defineProperty(this,"decorateAggConfig",void 0),_defineProperty(this,"postFlightRequest",void 0),_defineProperty(this,"getSerializedFormat",void 0),_defineProperty(this,"getValue",void 0),_defineProperty(this,"getKey",void 0),_defineProperty(this,"paramByName",name=>this.params.find(p=>p.name===name)),_defineProperty(this,"getValueBucketPath",agg=>agg.id),this.name=config.name,this.type=config.type||"metrics",this.dslName=config.dslName||config.name,this.expressionName=config.expressionName,this.title=config.title,this.valueType=config.valueType,this.makeLabel=config.makeLabel||Object(lodash__WEBPACK_IMPORTED_MODULE_0__.constant)(this.name),this.ordered=config.ordered,this.hasNoDsl=!!config.hasNoDsl,this.hasNoDslParams=!!config.hasNoDslParams,config.createFilter&&(this.createFilter=config.createFilter),config.getValueBucketPath&&(this.getValueBucketPath=config.getValueBucketPath),config.params&&config.params.length&&config.params[0]instanceof _param_types_base__WEBPACK_IMPORTED_MODULE_3__.a)this.params=config.params;else{const params=config.params?[...config.params]:[];!1!==config.json&&params.push({name:"json",type:"json",advanced:!0}),!1!==config.customLabels&&params.push({name:"customLabel",displayName:_kbn_i18n__WEBPACK_IMPORTED_MODULE_1__.i18n.translate("data.search.aggs.string.customLabel",{defaultMessage:"Custom label"}),type:"string",write:lodash__WEBPACK_IMPORTED_MODULE_0__.noop}),this.params=Object(_agg_params__WEBPACK_IMPORTED_MODULE_2__.c)(params)}this.getRequestAggs=config.getRequestAggs||lodash__WEBPACK_IMPORTED_MODULE_0__.noop,this.getResponseAggs=config.getResponseAggs||(()=>{}),this.decorateAggConfig=config.decorateAggConfig||(()=>({})),this.postFlightRequest=config.postFlightRequest||lodash__WEBPACK_IMPORTED_MODULE_0__.identity,this.getSerializedFormat=config.getSerializedFormat||(agg=>agg.params.field?agg.aggConfigs.indexPattern.getFormatterForField(agg.params.field).toJSON():{}),this.getValue=config.getValue||((agg,bucket)=>{})}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return shortenDottedString}));const DOT_PREFIX_RE=/(.).+?\./g;function shortenDottedString(input){return"string"!=typeof input?input:input.replace(DOT_PREFIX_RE,"$1.")}},function(module,exports){module.exports=__kbnSharedDeps__.MomentTimezone},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"g",(function(){return isPhraseFilter})),__webpack_require__.d(__webpack_exports__,"h",(function(){return isScriptedPhraseFilter})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getPhraseFilterField})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getPhraseFilterValue})),__webpack_require__.d(__webpack_exports__,"b",(function(){return buildPhraseFilter})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getPhraseScript})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getConvertedValueForField})),__webpack_require__.d(__webpack_exports__,"a",(function(){return buildInlineScriptForPhraseFilter}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);const isPhraseFilter=filter=>{const isMatchPhraseQuery=filter&&filter.query&&filter.query.match_phrase,isDeprecatedMatchPhraseQuery=filter&&filter.query&&filter.query.match&&Object.values(filter.query.match).find(params=>"phrase"===params.type);return Boolean(isMatchPhraseQuery||isDeprecatedMatchPhraseQuery)},isScriptedPhraseFilter=filter=>Boolean(Object(lodash__WEBPACK_IMPORTED_MODULE_0__.get)(filter,"script.script.params.value")),getPhraseFilterField=filter=>{const queryConfig=filter.query.match_phrase||filter.query.match;return Object.keys(queryConfig)[0]},getPhraseFilterValue=filter=>{const queryConfig=filter.query.match_phrase||filter.query.match,queryValue=Object.values(queryConfig)[0];return Object(lodash__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(queryValue)?queryValue.query:queryValue},buildPhraseFilter=(field,value,indexPattern)=>{const convertedValue=getConvertedValueForField(field,value);return field.scripted?{meta:{index:indexPattern.id,field:field.name},script:getPhraseScript(field,value)}:{meta:{index:indexPattern.id},query:{match_phrase:{[field.name]:convertedValue}}}},getPhraseScript=(field,value)=>{const convertedValue=getConvertedValueForField(field,value);return{script:{source:buildInlineScriptForPhraseFilter(field),lang:field.lang,params:{value:convertedValue}}}},getConvertedValueForField=(field,value)=>{if("boolean"!=typeof value&&"boolean"===field.type){if([1,"true"].includes(value))return!0;if([0,"false"].includes(value))return!1;throw new Error(`${value} is not a valid boolean value for boolean field ${field.name}`)}return"number"!=typeof value&&"number"===field.type?Number(value):value},buildInlineScriptForPhraseFilter=scriptedField=>"painless"===scriptedField.lang?`boolean compare(Supplier s, def v) {return s.get() == v;}compare(() -> { ${scriptedField.script} }, params.value);`:`(${scriptedField.script}) == value`},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(108);for(var __WEBPACK_IMPORT_KEY__ in _types__WEBPACK_IMPORTED_MODULE_0__)["default","isFilterable","isNestedField"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _types__WEBPACK_IMPORTED_MODULE_0__[key]}))}(__WEBPACK_IMPORT_KEY__);var _utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(95);__webpack_require__.d(__webpack_exports__,"isFilterable",(function(){return _utils__WEBPACK_IMPORTED_MODULE_1__.a})),__webpack_require__.d(__webpack_exports__,"isNestedField",(function(){return _utils__WEBPACK_IMPORTED_MODULE_1__.b}));var _field_list__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(109);__webpack_require__.d(__webpack_exports__,"fieldList",(function(){return _field_list__WEBPACK_IMPORTED_MODULE_2__.a}));var _index_pattern_field__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(67);__webpack_require__.d(__webpack_exports__,"IndexPatternField",(function(){return _index_pattern_field__WEBPACK_IMPORTED_MODULE_3__.a}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _get_search_params__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(75);__webpack_require__.d(__webpack_exports__,"getSearchParams",(function(){return _get_search_params__WEBPACK_IMPORTED_MODULE_0__.b})),__webpack_require__.d(__webpack_exports__,"getSearchParamsFromRequest",(function(){return _get_search_params__WEBPACK_IMPORTED_MODULE_0__.c})),__webpack_require__.d(__webpack_exports__,"getPreference",(function(){return _get_search_params__WEBPACK_IMPORTED_MODULE_0__.a}));var _request_error__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(113);__webpack_require__.d(__webpack_exports__,"RequestFailure",(function(){return _request_error__WEBPACK_IMPORTED_MODULE_1__.a}));var _types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(114);for(var __WEBPACK_IMPORT_KEY__ in _types__WEBPACK_IMPORTED_MODULE_2__)["default","getSearchParams","getSearchParamsFromRequest","getPreference","RequestFailure"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _types__WEBPACK_IMPORTED_MODULE_2__[key]}))}(__WEBPACK_IMPORT_KEY__)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return setup})),__webpack_require__.d(__webpack_exports__,"b",(function(){return TEXT_CONTEXT_TYPE})),__webpack_require__.d(__webpack_exports__,"c",(function(){return html_content_type_setup})),__webpack_require__.d(__webpack_exports__,"a",(function(){return HTML_CONTEXT_TYPE}));var external_kbnSharedDeps_Lodash_=__webpack_require__(2),utils=__webpack_require__(28);const TEXT_CONTEXT_TYPE="text",setup=(format,convert=utils.a)=>{const recurse=value=>value&&Object(external_kbnSharedDeps_Lodash_.isFunction)(value.map)?JSON.stringify(value.map(recurse)):convert.call(format,value);return recurse},HTML_CONTEXT_TYPE="html",html_content_type_setup=(format,htmlContextTypeConvert)=>{const convert=((format,convert)=>convert||((value,options={})=>{const{field:field,hit:hit}=options,formatted=Object(external_kbnSharedDeps_Lodash_.escape)(format.convert(value,"text"));return field&&hit&&hit.highlight&&hit.highlight[field.name]?Object(utils.b)(formatted,hit.highlight[field.name]):formatted}))(format,htmlContextTypeConvert),recurse=(value,options={})=>{if(null==value)return Object(utils.a)(value);if(!value||!Object(external_kbnSharedDeps_Lodash_.isFunction)(value.map))return convert.call(format,value,options);const subValues=value.map(v=>recurse(v,options)),useMultiLine=subValues.some(sub=>sub.indexOf("\n")>-1);return subValues.join(","+(useMultiLine?"\n":" "))};return(value,options)=>`<span ng-non-bindable>${recurse(value,options)}</span>`}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/uiActions/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";function convertDateRangeToString({from:from,to:to},format){return from?to?format(from)+" to "+format(to):"After "+format(from):"Before "+format(to)}__webpack_require__.d(__webpack_exports__,"b",(function(){return convertDateRangeToString}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return convertIPRangeToString}));const convertIPRangeToString=(range,format)=>{if("mask"===range.type)return format(range.mask);return`${range.from?format(range.from):"-Infinity"} to ${range.to?format(range.to):"Infinity"}`}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return OptionedParamType}));var _base__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(27);class OptionedParamType extends _base__WEBPACK_IMPORTED_MODULE_0__.a{constructor(config){var obj,key,value;super(config),value=void 0,(key="options")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,config.write||(this.write=(aggConfig,output)=>{output.params[this.name]=aggConfig.params[this.name].value}),config.serialize||(this.serialize=selected=>selected.value),config.deserialize||(this.deserialize=value=>this.options.find(option=>option.value===value)),this.options=config.options||[]}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SearchBar}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(16),_kibana_react_public__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(25),_create_search_bar__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(87);__webpack_require__.d(__webpack_exports__,"c",(function(){return _create_search_bar__WEBPACK_IMPORTED_MODULE_3__.StatefulSearchBarProps}));const Fallback=()=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null),LazySearchBar=react__WEBPACK_IMPORTED_MODULE_0___default.a.lazy(()=>Promise.all([__webpack_require__.e(0),__webpack_require__.e(1),__webpack_require__.e(4)]).then(__webpack_require__.bind(null,166))),SearchBar=Object(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_1__.injectI18n)(Object(_kibana_react_public__WEBPACK_IMPORTED_MODULE_2__.withKibana)(props=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Suspense,{fallback:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Fallback,null)},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(LazySearchBar,props))))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DuplicateIndexPatternError}));class DuplicateIndexPatternError extends Error{constructor(message){super(message),this.name="DuplicateIndexPatternError"}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getTimeZoneFromSettings}));var moment_timezone__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(42),moment_timezone__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(moment_timezone__WEBPACK_IMPORTED_MODULE_0__);function getTimeZoneFromSettings(dateFormatTZ){const detectedTimezone=moment_timezone__WEBPACK_IMPORTED_MODULE_0___default.a.tz.guess();return"Browser"===dateFormatTZ?detectedTimezone:dateFormatTZ}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return kuery_syntax_error_KQLSyntaxError})),__webpack_require__.d(__webpack_exports__,"e",(function(){return nodeTypes})),__webpack_require__.d(__webpack_exports__,"d",(function(){return nodeBuilder})),__webpack_require__.d(__webpack_exports__,"c",(function(){return fromLiteralExpression})),__webpack_require__.d(__webpack_exports__,"b",(function(){return fromKueryExpression})),__webpack_require__.d(__webpack_exports__,"f",(function(){return ast_toElasticsearchQuery}));var literal_namespaceObject={};__webpack_require__.r(literal_namespaceObject),__webpack_require__.d(literal_namespaceObject,"buildNode",(function(){return buildNode})),__webpack_require__.d(literal_namespaceObject,"toElasticsearchQuery",(function(){return toElasticsearchQuery}));var wildcard_namespaceObject={};__webpack_require__.r(wildcard_namespaceObject),__webpack_require__.d(wildcard_namespaceObject,"wildcardSymbol",(function(){return wildcardSymbol})),__webpack_require__.d(wildcard_namespaceObject,"buildNode",(function(){return wildcard_buildNode})),__webpack_require__.d(wildcard_namespaceObject,"test",(function(){return test})),__webpack_require__.d(wildcard_namespaceObject,"toElasticsearchQuery",(function(){return wildcard_toElasticsearchQuery})),__webpack_require__.d(wildcard_namespaceObject,"toQueryStringQuery",(function(){return toQueryStringQuery})),__webpack_require__.d(wildcard_namespaceObject,"hasLeadingWildcard",(function(){return hasLeadingWildcard}));var is_namespaceObject={};__webpack_require__.r(is_namespaceObject),__webpack_require__.d(is_namespaceObject,"buildNodeParams",(function(){return buildNodeParams})),__webpack_require__.d(is_namespaceObject,"toElasticsearchQuery",(function(){return is_toElasticsearchQuery}));var and_namespaceObject={};__webpack_require__.r(and_namespaceObject),__webpack_require__.d(and_namespaceObject,"buildNodeParams",(function(){return and_buildNodeParams})),__webpack_require__.d(and_namespaceObject,"toElasticsearchQuery",(function(){return and_toElasticsearchQuery}));var or_namespaceObject={};__webpack_require__.r(or_namespaceObject),__webpack_require__.d(or_namespaceObject,"buildNodeParams",(function(){return or_buildNodeParams})),__webpack_require__.d(or_namespaceObject,"toElasticsearchQuery",(function(){return or_toElasticsearchQuery}));var not_namespaceObject={};__webpack_require__.r(not_namespaceObject),__webpack_require__.d(not_namespaceObject,"buildNodeParams",(function(){return not_buildNodeParams})),__webpack_require__.d(not_namespaceObject,"toElasticsearchQuery",(function(){return not_toElasticsearchQuery}));var range_namespaceObject={};__webpack_require__.r(range_namespaceObject),__webpack_require__.d(range_namespaceObject,"buildNodeParams",(function(){return range_buildNodeParams})),__webpack_require__.d(range_namespaceObject,"toElasticsearchQuery",(function(){return range_toElasticsearchQuery}));var exists_namespaceObject={};__webpack_require__.r(exists_namespaceObject),__webpack_require__.d(exists_namespaceObject,"buildNodeParams",(function(){return exists_buildNodeParams})),__webpack_require__.d(exists_namespaceObject,"toElasticsearchQuery",(function(){return exists_toElasticsearchQuery}));var geo_bounding_box_namespaceObject={};__webpack_require__.r(geo_bounding_box_namespaceObject),__webpack_require__.d(geo_bounding_box_namespaceObject,"buildNodeParams",(function(){return geo_bounding_box_buildNodeParams})),__webpack_require__.d(geo_bounding_box_namespaceObject,"toElasticsearchQuery",(function(){return geo_bounding_box_toElasticsearchQuery}));var geo_polygon_namespaceObject={};__webpack_require__.r(geo_polygon_namespaceObject),__webpack_require__.d(geo_polygon_namespaceObject,"buildNodeParams",(function(){return geo_polygon_buildNodeParams})),__webpack_require__.d(geo_polygon_namespaceObject,"toElasticsearchQuery",(function(){return geo_polygon_toElasticsearchQuery}));var nested_namespaceObject={};__webpack_require__.r(nested_namespaceObject),__webpack_require__.d(nested_namespaceObject,"buildNodeParams",(function(){return nested_buildNodeParams})),__webpack_require__.d(nested_namespaceObject,"toElasticsearchQuery",(function(){return nested_toElasticsearchQuery}));var function_namespaceObject={};__webpack_require__.r(function_namespaceObject),__webpack_require__.d(function_namespaceObject,"buildNode",(function(){return function_buildNode})),__webpack_require__.d(function_namespaceObject,"buildNodeWithArgumentNodes",(function(){return buildNodeWithArgumentNodes})),__webpack_require__.d(function_namespaceObject,"toElasticsearchQuery",(function(){return function_toElasticsearchQuery}));var named_arg_namespaceObject={};__webpack_require__.r(named_arg_namespaceObject),__webpack_require__.d(named_arg_namespaceObject,"buildNode",(function(){return named_arg_buildNode})),__webpack_require__.d(named_arg_namespaceObject,"toElasticsearchQuery",(function(){return named_arg_toElasticsearchQuery}));var external_kbnSharedDeps_Lodash_=__webpack_require__(2),external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_),external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);const endOfInputText=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.common.kql.errors.endOfInputText",{defaultMessage:"end of input"}),grammarRuleTranslations={fieldName:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.common.kql.errors.fieldNameText",{defaultMessage:"field name"}),value:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.common.kql.errors.valueText",{defaultMessage:"value"}),literal:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.common.kql.errors.literalText",{defaultMessage:"literal"}),whitespace:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.common.kql.errors.whitespaceText",{defaultMessage:"whitespace"})};class kuery_syntax_error_KQLSyntaxError extends Error{constructor(error,expression){let message=error.message;if(error.expected){const translatedExpectationText=error.expected.map(expected=>grammarRuleTranslations[expected.description]||expected.description).join(", ");message=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.common.kql.errors.syntaxError",{defaultMessage:"Expected {expectedList} but {foundInput} found.",values:{expectedList:translatedExpectationText,foundInput:error.found?`"${error.found}"`:endOfInputText}})}var obj,key,value;super([message,expression,Object(external_kbnSharedDeps_Lodash_.repeat)("-",error.location.start.offset)+"^"].join("\n")),value=void 0,(key="shortMessage")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this.name="KQLSyntaxError",this.shortMessage=message}}var filters=__webpack_require__(8);function buildNode(value){return{type:"literal",value:value}}function toElasticsearchQuery(node){return node.value}var kuery=__webpack_require__(94);const fromExpression=(expression,parseOptions={},parse=kuery.parse)=>{if(void 0===expression)throw new Error("expression must be a string, got undefined instead");return parse(expression,{...parseOptions,helpers:{nodeTypes:nodeTypes}})},fromLiteralExpression=(expression,parseOptions={})=>fromExpression(expression,{...parseOptions,startRule:"Literal"},kuery.parse),fromKueryExpression=(expression,parseOptions={})=>{try{return fromExpression(expression,parseOptions,kuery.parse)}catch(error){throw"SyntaxError"===error.name?new kuery_syntax_error_KQLSyntaxError(error,expression):error}},ast_toElasticsearchQuery=(node,indexPattern,config,context)=>{if(!node||!node.type||!nodeTypes[node.type])return ast_toElasticsearchQuery(nodeTypes.function.buildNode("and",[]),indexPattern);return nodeTypes[node.type].toElasticsearchQuery(node,indexPattern,config,context)},wildcardSymbol="@kuery-wildcard@";function escapeRegExp(str){return str.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function escapeQueryString(str){return str.replace(/[+-=&|><!(){}[\]^"~*?:\\/]/g,"\\$&")}function wildcard_buildNode(value){return value.includes(wildcardSymbol)?{type:"wildcard",value:value}:fromLiteralExpression(value)}function test(node,str){const{value:value}=node,regex=value.split(wildcardSymbol).map(escapeRegExp).join("[\\s\\S]*");return new RegExp(`^${regex}$`).test(str)}function wildcard_toElasticsearchQuery(node){const{value:value}=node;return value.split(wildcardSymbol).join("*")}function toQueryStringQuery(node){const{value:value}=node;return value.split(wildcardSymbol).map(escapeQueryString).join("*")}function hasLeadingWildcard(node){const{value:value}=node;return value.startsWith(wildcardSymbol)&&value.replace(wildcardSymbol,"").length>0}function getFields(node,indexPattern){if(!indexPattern)return[];if("literal"===node.type){const fieldName=toElasticsearchQuery(node),field=indexPattern.fields.find(fld=>fld.name===fieldName);return field?[field]:[]}if("wildcard"===node.type){return indexPattern.fields.filter(fld=>test(node,fld.name))}}var utils=__webpack_require__(54);function getFullFieldNameNode(rootNameNode,indexPattern,nestedPath){const fullFieldNameNode={...rootNameNode,value:nestedPath?`${nestedPath}.${rootNameNode.value}`:rootNameNode.value};if(!indexPattern||"wildcard"===fullFieldNameNode.type&&!nestedPath)return fullFieldNameNode;const errors=getFields(fullFieldNameNode,indexPattern).reduce((acc,field)=>{const nestedPathFromField=field.subType&&field.subType.nested?field.subType.nested.path:void 0;return nestedPath&&!nestedPathFromField?[...acc,`${field.name} is not a nested field but is in nested group "${nestedPath}" in the KQL expression.`]:nestedPathFromField&&!nestedPath?[...acc,field.name+" is a nested field, but is not in a nested group in the KQL expression."]:nestedPathFromField!==nestedPath?[...acc,`Nested field ${field.name} is being queried with the incorrect nested path. The correct path is ${field.subType.nested.path}.`]:acc},[]);if(errors.length>0)throw new Error(errors.join("\n"));return fullFieldNameNode}function buildNodeParams(fieldName,value,isPhrase=!1){if(Object(external_kbnSharedDeps_Lodash_.isUndefined)(fieldName))throw new Error("fieldName is a required argument");if(Object(external_kbnSharedDeps_Lodash_.isUndefined)(value))throw new Error("value is a required argument");return{arguments:["string"==typeof fieldName?fromLiteralExpression(fieldName):buildNode(fieldName),"string"==typeof value?fromLiteralExpression(value):buildNode(value),buildNode(isPhrase)]}}function is_toElasticsearchQuery(node,indexPattern,config={},context={}){const{arguments:[fieldNameArg,valueArg,isPhraseArg]}=node,isExistsQuery="wildcard"===valueArg.type&&valueArg.value===wildcardSymbol,isAllFieldsQuery="wildcard"===fieldNameArg.type&&fieldNameArg.value===wildcardSymbol;if(isExistsQuery&&isAllFieldsQuery)return{match_all:{}};const fullFieldNameArg=getFullFieldNameNode(fieldNameArg,indexPattern,null!=context&&context.nested?context.nested.path:void 0),value=Object(external_kbnSharedDeps_Lodash_.isUndefined)(valueArg)?valueArg:ast_toElasticsearchQuery(valueArg),type=isPhraseArg.value?"phrase":"best_fields";if(null===fullFieldNameArg.value)return"wildcard"===valueArg.type?{query_string:{query:toQueryStringQuery(valueArg)}}:{multi_match:{type:type,query:value,lenient:!0}};const fields=indexPattern?getFields(fullFieldNameArg,indexPattern):[];if(fields&&0===fields.length&&fields.push({name:ast_toElasticsearchQuery(fullFieldNameArg),scripted:!1,type:""}),isExistsQuery&&(null==fields||!fields.length||(null==fields?void 0:fields.length)===(null==indexPattern?void 0:indexPattern.fields.length)))return{match_all:{}};return{bool:{should:fields.reduce((accumulator,field)=>{const wrapWithNestedQuery=query=>"wildcard"!==fullFieldNameArg.type||!Object(external_kbnSharedDeps_Lodash_.get)(field,"subType.nested")||null!=context&&context.nested?query:{nested:{path:field.subType.nested.path,query:query,score_mode:"none"}};if(!field.scripted){if(isExistsQuery)return[...accumulator,wrapWithNestedQuery({exists:{field:field.name}})];if("wildcard"===valueArg.type)return[...accumulator,wrapWithNestedQuery({query_string:{fields:[field.name],query:toQueryStringQuery(valueArg)}})];if("date"===field.type){const timeZoneParam=config.dateFormatTZ?{time_zone:Object(utils.a)(config.dateFormatTZ)}:{};return[...accumulator,wrapWithNestedQuery({range:{[field.name]:{gte:value,lte:value,...timeZoneParam}}})]}{const queryType="phrase"===type?"match_phrase":"match";return[...accumulator,wrapWithNestedQuery({[queryType]:{[field.name]:value}})]}}if(!isExistsQuery)return[...accumulator,{script:{...Object(filters.getPhraseScript)(field,value)}}]},[])||[],minimum_should_match:1}}}function and_buildNodeParams(children){return{arguments:children}}function and_toElasticsearchQuery(node,indexPattern,config={},context={}){return{bool:{filter:(node.arguments||[]).map(child=>ast_toElasticsearchQuery(child,indexPattern,config,context))}}}function or_buildNodeParams(children){return{arguments:children}}function or_toElasticsearchQuery(node,indexPattern,config={},context={}){return{bool:{should:(node.arguments||[]).map(child=>ast_toElasticsearchQuery(child,indexPattern,config,context)),minimum_should_match:1}}}function not_buildNodeParams(child){return{arguments:[child]}}function not_toElasticsearchQuery(node,indexPattern,config={},context={}){const[argument]=node.arguments;return{bool:{must_not:ast_toElasticsearchQuery(argument,indexPattern,config,context)}}}function range_buildNodeParams(fieldName,params){const paramsToMap=external_kbnSharedDeps_Lodash_default.a.pick(params,"gt","lt","gte","lte","format");return{arguments:["string"==typeof fieldName?fromLiteralExpression(fieldName):nodeTypes.literal.buildNode(fieldName),...external_kbnSharedDeps_Lodash_default.a.map(paramsToMap,(value,key)=>nodeTypes.namedArg.buildNode(key,value))]}}function range_toElasticsearchQuery(node,indexPattern,config={},context={}){const[fieldNameArg,...args]=node.arguments,fullFieldNameArg=getFullFieldNameNode(fieldNameArg,indexPattern,null!=context&&context.nested?context.nested.path:void 0),fields=indexPattern?getFields(fullFieldNameArg,indexPattern):[],namedArgs=function(args){if(args.gt&&args.gte||args.lt&&args.lte)throw new Error("range ends cannot be both inclusive and exclusive");const unnamedArgOrder=["gte","lte","format"];return args.reduce((acc,arg,index)=>("namedArg"===arg.type?acc[arg.name]=arg.value:acc[unnamedArgOrder[index]]=arg,acc),{})}(args),queryParams=external_kbnSharedDeps_Lodash_default.a.mapValues(namedArgs,arg=>ast_toElasticsearchQuery(arg));fields&&0===fields.length&&fields.push({name:ast_toElasticsearchQuery(fullFieldNameArg),scripted:!1,type:""});return{bool:{should:fields.map(field=>{const wrapWithNestedQuery=query=>"wildcard"!==fullFieldNameArg.type||!external_kbnSharedDeps_Lodash_default.a.get(field,"subType.nested")||context.nested?query:{nested:{path:field.subType.nested.path,query:query,score_mode:"none"}};if(field.scripted)return{script:Object(filters.getRangeScript)(field,queryParams)};if("date"===field.type){const timeZoneParam=config.dateFormatTZ?{time_zone:Object(utils.a)(config.dateFormatTZ)}:{};return wrapWithNestedQuery({range:{[field.name]:{...queryParams,...timeZoneParam}}})}return wrapWithNestedQuery({range:{[field.name]:queryParams}})}),minimum_should_match:1}}}function exists_buildNodeParams(fieldName){return{arguments:[buildNode(fieldName)]}}function exists_toElasticsearchQuery(node,indexPattern,config={},context={}){const{arguments:[fieldNameArg]}=node,fieldName=toElasticsearchQuery({...fieldNameArg,value:null!=context&&context.nested?`${context.nested.path}.${fieldNameArg.value}`:fieldNameArg.value}),field=Object(external_kbnSharedDeps_Lodash_.get)(indexPattern,"fields",[]).find(fld=>fld.name===fieldName);if(field&&field.scripted)throw new Error("Exists query does not support scripted fields");return{exists:{field:fieldName}}}function geo_bounding_box_buildNodeParams(fieldName,params){params=external_kbnSharedDeps_Lodash_default.a.pick(params,"topLeft","bottomRight");return{arguments:[nodeTypes.literal.buildNode(fieldName),...external_kbnSharedDeps_Lodash_default.a.map(params,(value,key)=>{const latLon=`${value.lat}, ${value.lon}`;return nodeTypes.namedArg.buildNode(key,latLon)})]}}function geo_bounding_box_toElasticsearchQuery(node,indexPattern,config={},context={}){var _indexPattern$fields;const[fieldNameArg,...args]=node.arguments,fullFieldNameArg={...fieldNameArg,value:null!=context&&context.nested?`${context.nested.path}.${fieldNameArg.value}`:fieldNameArg.value},fieldName=nodeTypes.literal.toElasticsearchQuery(fullFieldNameArg),field=(null!==(_indexPattern$fields=null==indexPattern?void 0:indexPattern.fields)&&void 0!==_indexPattern$fields?_indexPattern$fields:[]).find(fld=>fld.name===fieldName),queryParams=args.reduce((acc,arg)=>({...acc,[external_kbnSharedDeps_Lodash_default.a.snakeCase(arg.name)]:ast_toElasticsearchQuery(arg)}),{});if(null!=field&&field.scripted)throw new Error("Geo bounding box query does not support scripted fields");return{geo_bounding_box:{[fieldName]:queryParams,ignore_unmapped:!0}}}function geo_polygon_buildNodeParams(fieldName,points){return{arguments:[nodeTypes.literal.buildNode(fieldName),...points.map(point=>{const latLon=`${point.lat}, ${point.lon}`;return nodeTypes.literal.buildNode(latLon)})]}}function geo_polygon_toElasticsearchQuery(node,indexPattern,config={},context={}){var _indexPattern$fields;const[fieldNameArg,...points]=node.arguments,fullFieldNameArg={...fieldNameArg,value:null!=context&&context.nested?`${context.nested.path}.${fieldNameArg.value}`:fieldNameArg.value},fieldName=nodeTypes.literal.toElasticsearchQuery(fullFieldNameArg),field=(null!==(_indexPattern$fields=null==indexPattern?void 0:indexPattern.fields)&&void 0!==_indexPattern$fields?_indexPattern$fields:[]).find(fld=>fld.name===fieldName),queryParams={points:points.map(point=>ast_toElasticsearchQuery(point,indexPattern,config,context))};if(null!=field&&field.scripted)throw new Error("Geo polygon query does not support scripted fields");return{geo_polygon:{[fieldName]:queryParams,ignore_unmapped:!0}}}function nested_buildNodeParams(path,child){return{arguments:["string"==typeof path?fromLiteralExpression(path):buildNode(path),child]}}function nested_toElasticsearchQuery(node,indexPattern,config={},context={}){var _context$nested;const[path,child]=node.arguments,stringPath=ast_toElasticsearchQuery(path),fullPath=null!=context&&null!==(_context$nested=context.nested)&&void 0!==_context$nested&&_context$nested.path?`${context.nested.path}.${stringPath}`:stringPath;return{nested:{path:fullPath,query:ast_toElasticsearchQuery(child,indexPattern,config,{...context,nested:{path:fullPath}}),score_mode:"none"}}}const functions={is:is_namespaceObject,and:and_namespaceObject,or:or_namespaceObject,not:not_namespaceObject,range:range_namespaceObject,exists:exists_namespaceObject,geoBoundingBox:geo_bounding_box_namespaceObject,geoPolygon:geo_polygon_namespaceObject,nested:nested_namespaceObject};function function_buildNode(functionName,...args){const kueryFunction=functions[functionName];if(external_kbnSharedDeps_Lodash_default.a.isUndefined(kueryFunction))throw new Error(`Unknown function "${functionName}"`);return{type:"function",function:functionName,...kueryFunction.buildNodeParams(...args)}}function buildNodeWithArgumentNodes(functionName,args){if(external_kbnSharedDeps_Lodash_default.a.isUndefined(functions[functionName]))throw new Error(`Unknown function "${functionName}"`);return{type:"function",function:functionName,arguments:args}}function function_toElasticsearchQuery(node,indexPattern,config,context){return functions[node.function].toElasticsearchQuery(node,indexPattern,config,context)}function named_arg_buildNode(name,value){return{type:"namedArg",name:name,value:"literal"===external_kbnSharedDeps_Lodash_default.a.get(value,"type")?value:nodeTypes.literal.buildNode(value)}}function named_arg_toElasticsearchQuery(node){return ast_toElasticsearchQuery(node.value)}__webpack_require__(106);const nodeBuilder={is:(fieldName,value)=>nodeTypes.function.buildNodeWithArgumentNodes("is",[nodeTypes.literal.buildNode(fieldName),"string"==typeof value?nodeTypes.literal.buildNode(value):value,nodeTypes.literal.buildNode(!1)]),or:nodes=>nodes.length>1?nodeTypes.function.buildNode("or",nodes):nodes[0],and:nodes=>nodes.length>1?nodeTypes.function.buildNode("and",nodes):nodes[0]},nodeTypes={function:function_namespaceObject,literal:literal_namespaceObject,namedArg:named_arg_namespaceObject,wildcard:wildcard_namespaceObject}},function(module,exports){module.exports=__kbnSharedDeps__.ElasticNumeral},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _fields__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(44);for(var __WEBPACK_IMPORT_KEY__ in _fields__WEBPACK_IMPORTED_MODULE_0__)["default","IndexPatternsService","IndexPatternsContract"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _fields__WEBPACK_IMPORTED_MODULE_0__[key]}))}(__WEBPACK_IMPORT_KEY__);var _types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(73);for(var __WEBPACK_IMPORT_KEY__ in _types__WEBPACK_IMPORTED_MODULE_1__)["default","IndexPatternsService","IndexPatternsContract"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _types__WEBPACK_IMPORTED_MODULE_1__[key]}))}(__WEBPACK_IMPORT_KEY__);var _index_patterns__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(59);__webpack_require__.d(__webpack_exports__,"IndexPatternsService",(function(){return _index_patterns__WEBPACK_IMPORTED_MODULE_2__.c})),__webpack_require__.d(__webpack_exports__,"IndexPatternsContract",(function(){return _index_patterns__WEBPACK_IMPORTED_MODULE_2__.IndexPatternsContract}));var _errors__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(53);__webpack_require__.d(__webpack_exports__,"DuplicateIndexPatternError",(function(){return _errors__WEBPACK_IMPORTED_MODULE_3__.a}));var _expressions__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(89);__webpack_require__.d(__webpack_exports__,"getIndexPatternLoadMeta",(function(){return _expressions__WEBPACK_IMPORTED_MODULE_4__.a}));var _constants__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(110);__webpack_require__.d(__webpack_exports__,"RUNTIME_FIELD_TYPES",(function(){return _constants__WEBPACK_IMPORTED_MODULE_5__.a}))},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";function createIndexPatternCache(){const vals={};return{get:id=>vals[id],set:(id,prom)=>(vals[id]=prom,prom),clear:id=>{delete vals[id]},clearAll:()=>{for(const id in vals)vals.hasOwnProperty(id)&&delete vals[id]}}}__webpack_require__.d(__webpack_exports__,"d",(function(){return createIndexPatternCache})),__webpack_require__.d(__webpack_exports__,"e",(function(){return flattenHitWrapper})),__webpack_require__.d(__webpack_exports__,"f",(function(){return formatHitProvider})),__webpack_require__.d(__webpack_exports__,"a",(function(){return index_pattern_IndexPattern})),__webpack_require__.d(__webpack_exports__,"c",(function(){return index_patterns_IndexPatternsService}));var external_kbnSharedDeps_Lodash_=__webpack_require__(2),external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);function flattenHitWrapper(indexPattern,metaFields={},cache=new WeakMap){return function(hit,deep=!1){const decorateFlattened=function(hit,metaFields){return function(flattened){return external_kbnSharedDeps_Lodash_default.a.each(metaFields,(function(meta){"_source"!==meta&&(flattened[meta]=hit[meta])})),external_kbnSharedDeps_Lodash_default.a.forOwn(hit.fields,(function(val,key){("_"!==key[0]||external_kbnSharedDeps_Lodash_default.a.includes(metaFields,key))&&(Array.isArray(val)&&val.length<=1?flattened[key]=val[0]:flattened[key]=val)})),new Proxy(flattened,{ownKeys:target=>Reflect.ownKeys(target).sort((a,b)=>{const aIsMeta=external_kbnSharedDeps_Lodash_default.a.includes(metaFields,a),bIsMeta=external_kbnSharedDeps_Lodash_default.a.includes(metaFields,b);return aIsMeta&&bIsMeta?String(a).localeCompare(String(b)):aIsMeta?1:bIsMeta?-1:String(a).localeCompare(String(b))})})}}(hit,metaFields),cached=cache.get(hit),flattened=cached||function(indexPattern,hit,deep){const flat={},fields=indexPattern.fields.getByName;return function flatten(obj,keyPrefix=""){keyPrefix=keyPrefix?keyPrefix+".":"",external_kbnSharedDeps_Lodash_default.a.forOwn(obj,(function(val,key){if(key=keyPrefix+key,deep){const field=fields(key),isNestedField=field&&"nested"===field.type;if(Array.isArray(val)&&external_kbnSharedDeps_Lodash_default.a.isPlainObject(external_kbnSharedDeps_Lodash_default.a.first(val))&&!isNestedField)return void external_kbnSharedDeps_Lodash_default.a.each(val,v=>flatten(v,key))}else if(void 0!==flat[key])return;const field=fields(key),hasValidMapping=field&&"conflict"!==field.type,isValue=!external_kbnSharedDeps_Lodash_default.a.isPlainObject(val);hasValidMapping||isValue?flat[key]?Array.isArray(flat[key])?flat[key].push(val):flat[key]=[flat[key],val]:flat[key]=val:flatten(val,key)}))}(hit._source),flat}(indexPattern,hit,deep);return cached||cache.set(hit,{...flattened}),decorateFlattened(flattened)}}const formattedCache=new WeakMap,partialFormattedCache=new WeakMap;function formatHitProvider(indexPattern,defaultFormat){function convert(hit,val,fieldName,type="html"){const field=indexPattern.fields.getByName(fieldName);return(field?indexPattern.getFormatterForField(field):defaultFormat).convert(val,type,{field:field,hit:hit,indexPattern:indexPattern})}function formatHit(hit,type="html"){if("text"===type){const flattened=indexPattern.flattenHit(hit),result={};for(const[key,value]of Object.entries(flattened))result[key]=convert(hit,value,key,type);return result}const cached=formattedCache.get(hit);if(cached)return cached;const partials=partialFormattedCache.get(hit)||{};partialFormattedCache.set(hit,partials);const cache={};return formattedCache.set(hit,cache),external_kbnSharedDeps_Lodash_default.a.forOwn(indexPattern.flattenHit(hit),(function(val,fieldName){if(!fieldName)return;const formatted=null==partials[fieldName]?convert(hit,val,fieldName):partials[fieldName];cache[fieldName]=partials[fieldName]=formatted})),cache}return formatHit.formatField=function(hit,fieldName){let partials=partialFormattedCache.get(hit);if(partials&&null!=partials[fieldName])return partials[fieldName];partials||(partials={},partialFormattedCache.set(hit,partials));return convert(hit,"_source"===fieldName?hit._source:indexPattern.flattenHit(hit)[fieldName],fieldName)},formatHit}var common_=__webpack_require__(20),common=__webpack_require__(1),index_patterns_fields=__webpack_require__(44),kbn_field_types=__webpack_require__(34);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class index_pattern_IndexPattern{constructor({spec:spec={},fieldFormats:fieldFormats,shortDotsEnable:shortDotsEnable=!1,metaFields:metaFields=[]}){_defineProperty(this,"id",void 0),_defineProperty(this,"title",""),_defineProperty(this,"fieldFormatMap",void 0),_defineProperty(this,"typeMeta",void 0),_defineProperty(this,"fields",void 0),_defineProperty(this,"timeFieldName",void 0),_defineProperty(this,"intervalName",void 0),_defineProperty(this,"type",void 0),_defineProperty(this,"formatHit",void 0),_defineProperty(this,"formatField",void 0),_defineProperty(this,"flattenHit",void 0),_defineProperty(this,"metaFields",void 0),_defineProperty(this,"version",void 0),_defineProperty(this,"sourceFilters",void 0),_defineProperty(this,"originalSavedObjectBody",{}),_defineProperty(this,"shortDotsEnable",!1),_defineProperty(this,"fieldFormats",void 0),_defineProperty(this,"fieldAttrs",void 0),_defineProperty(this,"runtimeFieldMap",void 0),_defineProperty(this,"allowNoIndex",!1),_defineProperty(this,"getOriginalSavedObjectBody",()=>({...this.originalSavedObjectBody})),_defineProperty(this,"resetOriginalSavedObjectBody",()=>{this.originalSavedObjectBody=this.getAsSavedObjectBody()}),_defineProperty(this,"getFieldAttrs",()=>{const newFieldAttrs={...this.fieldAttrs};return this.fields.forEach(field=>{const attrs={};let hasAttr=!1;field.customLabel&&(attrs.customLabel=field.customLabel,hasAttr=!0),field.count&&(attrs.count=field.count,hasAttr=!0),hasAttr?newFieldAttrs[field.name]=attrs:delete newFieldAttrs[field.name]}),newFieldAttrs}),_defineProperty(this,"setFieldFormat",(fieldName,format)=>{this.fieldFormatMap[fieldName]=format}),_defineProperty(this,"deleteFieldFormat",fieldName=>{delete this.fieldFormatMap[fieldName]}),this.fieldFormats=fieldFormats,this.shortDotsEnable=shortDotsEnable,this.metaFields=metaFields,this.fields=Object(index_patterns_fields.fieldList)([],this.shortDotsEnable),this.flattenHit=flattenHitWrapper(this,metaFields),this.formatHit=formatHitProvider(this,fieldFormats.getDefaultInstance(common.KBN_FIELD_TYPES.STRING)),this.formatField=this.formatHit.formatField,this.id=spec.id,this.fieldFormatMap=spec.fieldFormats||{},this.version=spec.version,this.title=spec.title||"",this.timeFieldName=spec.timeFieldName,this.sourceFilters=spec.sourceFilters,this.fields.replaceAll(Object.values(spec.fields||{})),this.type=spec.type,this.typeMeta=spec.typeMeta,this.fieldAttrs=spec.fieldAttrs||{},this.intervalName=spec.intervalName,this.allowNoIndex=spec.allowNoIndex||!1,this.runtimeFieldMap=spec.runtimeFieldMap||{}}getComputedFields(){const scriptFields={};if(!this.fields)return{storedFields:["*"],scriptFields:scriptFields,docvalueFields:[],runtimeFields:{}};const docvalueFields=Object(external_kbnSharedDeps_Lodash_.reject)(this.fields.getByType("date"),"scripted").map(dateField=>({field:dateField.name,format:dateField.esTypes&&-1!==dateField.esTypes.indexOf("date_nanos")?"strict_date_time":"date_time"}));return Object(external_kbnSharedDeps_Lodash_.each)(this.getScriptedFields(),(function(field){scriptFields[field.name]={script:{source:field.script,lang:field.lang}}})),{storedFields:["*"],scriptFields:scriptFields,docvalueFields:docvalueFields,runtimeFields:this.runtimeFieldMap}}toSpec(){return{id:this.id,version:this.version,title:this.title,timeFieldName:this.timeFieldName,sourceFilters:this.sourceFilters,fields:this.fields.toSpec({getFormatterForField:this.getFormatterForField.bind(this)}),typeMeta:this.typeMeta,type:this.type,fieldFormats:this.fieldFormatMap,runtimeFieldMap:this.runtimeFieldMap,fieldAttrs:this.fieldAttrs,intervalName:this.intervalName,allowNoIndex:this.allowNoIndex}}getSourceFiltering(){return{excludes:this.sourceFilters&&this.sourceFilters.map(filter=>filter.value)||[]}}async addScriptedField(name,script,fieldType="string"){const scriptedFields=this.getScriptedFields(),names=external_kbnSharedDeps_Lodash_default.a.map(scriptedFields,"name");if(external_kbnSharedDeps_Lodash_default.a.includes(names,name))throw new common_.DuplicateField(name);this.fields.add({name:name,script:script,type:fieldType,scripted:!0,lang:"painless",aggregatable:!0,searchable:!0,count:0,readFromDocValues:!1})}removeScriptedField(fieldName){const field=this.fields.getByName(fieldName);field&&this.fields.remove(field)}getNonScriptedFields(){return[...this.fields.getAll().filter(field=>!field.scripted)]}getScriptedFields(){return[...this.fields.getAll().filter(field=>field.scripted)]}getIndex(){if(!this.isUnsupportedTimePattern())return this.title;const regex=/\[[^\]]*]/g,splits=this.title.split(regex),matches=this.title.match(regex)||[];return splits.map((split,i)=>{const match=i>=matches.length?"":matches[i].replace(/[\[\]]/g,"");return`${split.length?"*":""}${match}`}).join("")}isUnsupportedTimePattern(){return!!this.intervalName}isTimeBased(){return!(!this.timeFieldName||this.fields&&!this.getTimeField())}isTimeNanosBased(){const timeField=this.getTimeField();return timeField&&timeField.esTypes&&-1!==timeField.esTypes.indexOf("date_nanos")}getTimeField(){if(this.timeFieldName&&this.fields&&this.fields.getByName)return this.fields.getByName(this.timeFieldName)}getFieldByName(name){if(this.fields&&this.fields.getByName)return this.fields.getByName(name)}getAggregationRestrictions(){var _this$typeMeta;return null===(_this$typeMeta=this.typeMeta)||void 0===_this$typeMeta?void 0:_this$typeMeta.aggs}getAsSavedObjectBody(){const fieldFormatMap=external_kbnSharedDeps_Lodash_default.a.isEmpty(this.fieldFormatMap)?void 0:JSON.stringify(this.fieldFormatMap),fieldAttrs=this.getFieldAttrs(),runtimeFieldMap=this.runtimeFieldMap;return{fieldAttrs:fieldAttrs?JSON.stringify(fieldAttrs):void 0,title:this.title,timeFieldName:this.timeFieldName,intervalName:this.intervalName,sourceFilters:this.sourceFilters?JSON.stringify(this.sourceFilters):void 0,fields:this.fields?JSON.stringify(this.fields.filter(field=>field.scripted)):void 0,fieldFormatMap:fieldFormatMap,type:this.type,typeMeta:this.typeMeta?JSON.stringify(this.typeMeta):void 0,allowNoIndex:this.allowNoIndex?this.allowNoIndex:void 0,runtimeFieldMap:runtimeFieldMap?JSON.stringify(runtimeFieldMap):void 0}}getFormatterForField(field){const fieldFormat=this.getFormatterForFieldNoDefault(field.name);return fieldFormat||this.fieldFormats.getDefaultInstance(field.type,field.esTypes)}addRuntimeField(name,runtimeField){const existingField=this.getFieldByName(name);existingField?existingField.runtimeField=runtimeField:this.fields.add({name:name,runtimeField:runtimeField,type:Object(kbn_field_types.b)(runtimeField.type),aggregatable:!0,searchable:!0,count:0,readFromDocValues:!1}),this.runtimeFieldMap[name]=runtimeField}removeRuntimeField(name){const existingField=this.getFieldByName(name);existingField&&(existingField.isMapped?existingField.runtimeField=void 0:(this.setFieldCustomLabel(name,null),this.deleteFieldFormat(name),this.fields.remove(existingField))),delete this.runtimeFieldMap[name]}getFormatterForFieldNoDefault(fieldname){const formatSpec=this.fieldFormatMap[fieldname];if(null!=formatSpec&&formatSpec.id)return this.fieldFormats.getInstance(formatSpec.id,formatSpec.params)}setFieldAttrs(fieldName,attrName,value){this.fieldAttrs[fieldName]||(this.fieldAttrs[fieldName]={}),this.fieldAttrs[fieldName][attrName]=value}setFieldCustomLabel(fieldName,customLabel){const fieldObject=this.fields.getByName(fieldName),newCustomLabel=null===customLabel?void 0:customLabel;fieldObject&&(fieldObject.customLabel=newCustomLabel),this.setFieldAttrs(fieldName,"customLabel",newCustomLabel)}setFieldCount(fieldName,count){const fieldObject=this.fields.getByName(fieldName),newCount=null===count?void 0:count;fieldObject?newCount?fieldObject.count=newCount:fieldObject.deleteCount():this.setFieldAttrs(fieldName,"count",newCount)}}var external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);const createEnsureDefaultIndexPattern=(uiSettings,onRedirectNoIndexPattern)=>async function(){const patterns=await this.getIds();let defaultId=await uiSettings.get("defaultIndex"),defined=!!defaultId;const exists=Object(external_kbnSharedDeps_Lodash_.includes)(patterns,defaultId);if(defined&&!exists&&(await uiSettings.remove("defaultIndex"),defaultId=defined=!1),!defined)return patterns.length>=1?(defaultId=patterns[0],void await uiSettings.set("defaultIndex",defaultId)):onRedirectNoIndexPattern()};var lib=__webpack_require__(29);var errors=__webpack_require__(53);function index_patterns_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class index_patterns_IndexPatternsService{constructor({uiSettings:uiSettings,savedObjectsClient:savedObjectsClient,apiClient:apiClient,fieldFormats:fieldFormats,onNotification:onNotification,onError:onError,onUnsupportedTimePattern:onUnsupportedTimePattern,onRedirectNoIndexPattern:onRedirectNoIndexPattern=(()=>{})}){index_patterns_defineProperty(this,"config",void 0),index_patterns_defineProperty(this,"savedObjectsClient",void 0),index_patterns_defineProperty(this,"savedObjectsCache",void 0),index_patterns_defineProperty(this,"apiClient",void 0),index_patterns_defineProperty(this,"fieldFormats",void 0),index_patterns_defineProperty(this,"onNotification",void 0),index_patterns_defineProperty(this,"onError",void 0),index_patterns_defineProperty(this,"onUnsupportedTimePattern",void 0),index_patterns_defineProperty(this,"indexPatternCache",void 0),index_patterns_defineProperty(this,"ensureDefaultIndexPattern",void 0),index_patterns_defineProperty(this,"getIds",async(refresh=!1)=>(this.savedObjectsCache&&!refresh||await this.refreshSavedObjectsCache(),this.savedObjectsCache?this.savedObjectsCache.map(obj=>null==obj?void 0:obj.id):[])),index_patterns_defineProperty(this,"getTitles",async(refresh=!1)=>(this.savedObjectsCache&&!refresh||await this.refreshSavedObjectsCache(),this.savedObjectsCache?this.savedObjectsCache.map(obj=>{var _obj$attributes;return null==obj||null===(_obj$attributes=obj.attributes)||void 0===_obj$attributes?void 0:_obj$attributes.title}):[])),index_patterns_defineProperty(this,"find",async(search,size=10)=>{const getIndexPatternPromises=(await this.savedObjectsClient.find({type:"index-pattern",fields:["title"],search:search,searchFields:["title"],perPage:size})).map(async savedObject=>await this.get(savedObject.id));return await Promise.all(getIndexPatternPromises)}),index_patterns_defineProperty(this,"getIdsWithTitle",async(refresh=!1)=>(this.savedObjectsCache&&!refresh||await this.refreshSavedObjectsCache(),this.savedObjectsCache?this.savedObjectsCache.map(obj=>{var _obj$attributes2;return{id:null==obj?void 0:obj.id,title:null==obj||null===(_obj$attributes2=obj.attributes)||void 0===_obj$attributes2?void 0:_obj$attributes2.title}}):[])),index_patterns_defineProperty(this,"clearCache",id=>{this.savedObjectsCache=null,id?this.indexPatternCache.clear(id):this.indexPatternCache.clearAll()}),index_patterns_defineProperty(this,"getCache",async()=>(this.savedObjectsCache||await this.refreshSavedObjectsCache(),this.savedObjectsCache)),index_patterns_defineProperty(this,"getDefault",async()=>{const defaultIndexPatternId=await this.config.get("defaultIndex");return defaultIndexPatternId?await this.get(defaultIndexPatternId):null}),index_patterns_defineProperty(this,"setDefault",async(id,force=!1)=>{!force&&this.config.get("defaultIndex")||await this.config.set("defaultIndex",id)}),index_patterns_defineProperty(this,"getFieldsForWildcard",async options=>{const metaFields=await this.config.get(common.UI_SETTINGS.META_FIELDS);return this.apiClient.getFieldsForWildcard({pattern:options.pattern,metaFields:metaFields,type:options.type,rollupIndex:options.rollupIndex,allowNoIndex:options.allowNoIndex})}),index_patterns_defineProperty(this,"getFieldsForIndexPattern",async(indexPattern,options)=>{var _indexPattern$typeMet,_indexPattern$typeMet2;return this.getFieldsForWildcard({type:indexPattern.type,rollupIndex:null==indexPattern||null===(_indexPattern$typeMet=indexPattern.typeMeta)||void 0===_indexPattern$typeMet||null===(_indexPattern$typeMet2=_indexPattern$typeMet.params)||void 0===_indexPattern$typeMet2?void 0:_indexPattern$typeMet2.rollup_index,...options,pattern:indexPattern.title})}),index_patterns_defineProperty(this,"refreshFields",async indexPattern=>{try{const fields=await this.getFieldsForIndexPattern(indexPattern);fields.forEach(field=>field.isMapped=!0);const scripted=indexPattern.getScriptedFields().map(field=>field.spec),fieldAttrs=indexPattern.getFieldAttrs(),fieldsWithSavedAttrs=Object.values(this.fieldArrayToMap([...fields,...scripted],fieldAttrs));indexPattern.fields.replaceAll(fieldsWithSavedAttrs)}catch(err){err instanceof lib.e&&this.onNotification({title:err.message,color:"danger",iconType:"alert"}),this.onError(err,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.indexPatterns.fetchFieldErrorTitle",{defaultMessage:"Error fetching fields for index pattern {title} (ID: {id})",values:{id:indexPattern.id,title:indexPattern.title}})})}}),index_patterns_defineProperty(this,"refreshFieldSpecMap",async(fields,id,title,options,fieldAttrs={})=>{const fieldsAsArr=Object.values(fields),scriptedFields=fieldsAsArr.filter(field=>field.scripted);try{let updatedFieldList;const newFields=await this.getFieldsForWildcard(options);return newFields.forEach(field=>field.isMapped=!0),updatedFieldList=!options.allowNoIndex||newFields&&newFields.length>5?[...newFields,...scriptedFields]:fieldsAsArr,this.fieldArrayToMap(updatedFieldList,fieldAttrs)}catch(err){if(err instanceof lib.e)return this.onNotification({title:err.message,color:"danger",iconType:"alert"}),{};throw this.onError(err,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.indexPatterns.fetchFieldErrorTitle",{defaultMessage:"Error fetching fields for index pattern {title} (ID: {id})",values:{id:id,title:title}})}),err}}),index_patterns_defineProperty(this,"fieldArrayToMap",(fields,fieldAttrs)=>fields.reduce((collector,field)=>{var _fieldAttrs$field$nam,_fieldAttrs$field$nam2;return collector[field.name]={...field,customLabel:null==fieldAttrs||null===(_fieldAttrs$field$nam=fieldAttrs[field.name])||void 0===_fieldAttrs$field$nam?void 0:_fieldAttrs$field$nam.customLabel,count:null==fieldAttrs||null===(_fieldAttrs$field$nam2=fieldAttrs[field.name])||void 0===_fieldAttrs$field$nam2?void 0:_fieldAttrs$field$nam2.count},collector},{})),index_patterns_defineProperty(this,"savedObjectToSpec",savedObject=>{const{id:id,version:version,attributes:{title:title,timeFieldName:timeFieldName,intervalName:intervalName,fields:fields,sourceFilters:sourceFilters,fieldFormatMap:fieldFormatMap,runtimeFieldMap:runtimeFieldMap,typeMeta:typeMeta,type:type,fieldAttrs:fieldAttrs,allowNoIndex:allowNoIndex}}=savedObject,parsedSourceFilters=sourceFilters?JSON.parse(sourceFilters):void 0,parsedTypeMeta=typeMeta?JSON.parse(typeMeta):void 0,parsedFieldFormatMap=fieldFormatMap?JSON.parse(fieldFormatMap):{},parsedFields=fields?JSON.parse(fields):[],parsedFieldAttrs=fieldAttrs?JSON.parse(fieldAttrs):{},parsedRuntimeFieldMap=runtimeFieldMap?JSON.parse(runtimeFieldMap):{};return{id:id,version:version,title:title,intervalName:intervalName,timeFieldName:timeFieldName,sourceFilters:parsedSourceFilters,fields:this.fieldArrayToMap(parsedFields,parsedFieldAttrs),typeMeta:parsedTypeMeta,type:type,fieldFormats:parsedFieldFormatMap,fieldAttrs:parsedFieldAttrs,allowNoIndex:allowNoIndex,runtimeFieldMap:parsedRuntimeFieldMap}}),index_patterns_defineProperty(this,"getSavedObjectAndInit",async id=>{const savedObject=await this.savedObjectsClient.get("index-pattern",id);if(!savedObject.version)throw new common_.SavedObjectNotFound("index-pattern",id,"management/kibana/indexPatterns");const spec=this.savedObjectToSpec(savedObject),{title:title,type:type,typeMeta:typeMeta,runtimeFieldMap:runtimeFieldMap}=spec;spec.fieldAttrs=savedObject.attributes.fieldAttrs?JSON.parse(savedObject.attributes.fieldAttrs):{};try{var _typeMeta$params;spec.fields=await this.refreshFieldSpecMap(spec.fields||{},id,spec.title,{pattern:title,metaFields:await this.config.get(common.UI_SETTINGS.META_FIELDS),type:type,rollupIndex:null==typeMeta||null===(_typeMeta$params=typeMeta.params)||void 0===_typeMeta$params?void 0:_typeMeta$params.rollup_index,allowNoIndex:spec.allowNoIndex},spec.fieldAttrs);for(const[key,value]of Object.entries(runtimeFieldMap||{})){var _spec$fieldAttrs,_spec$fieldAttrs$key,_spec$fieldAttrs2,_spec$fieldAttrs2$key;if(!spec.fields[key])spec.fields[key]={name:key,type:Object(kbn_field_types.b)(value.type),runtimeField:value,aggregatable:!0,searchable:!0,readFromDocValues:!1,customLabel:null===(_spec$fieldAttrs=spec.fieldAttrs)||void 0===_spec$fieldAttrs||null===(_spec$fieldAttrs$key=_spec$fieldAttrs[key])||void 0===_spec$fieldAttrs$key?void 0:_spec$fieldAttrs$key.customLabel,count:null===(_spec$fieldAttrs2=spec.fieldAttrs)||void 0===_spec$fieldAttrs2||null===(_spec$fieldAttrs2$key=_spec$fieldAttrs2[key])||void 0===_spec$fieldAttrs2$key?void 0:_spec$fieldAttrs2$key.count}}}catch(err){err instanceof lib.e?this.onNotification({title:err.message,color:"danger",iconType:"alert"}):this.onError(err,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.indexPatterns.fetchFieldErrorTitle",{defaultMessage:"Error fetching fields for index pattern {title} (ID: {id})",values:{id:id,title:title}})})}spec.fieldFormats=savedObject.attributes.fieldFormatMap?JSON.parse(savedObject.attributes.fieldFormatMap):{};const indexPattern=await this.create(spec,!0);return indexPattern.isUnsupportedTimePattern()&&this.onUnsupportedTimePattern({id:indexPattern.id,title:indexPattern.title,index:indexPattern.getIndex()}),indexPattern.resetOriginalSavedObjectBody(),indexPattern}),index_patterns_defineProperty(this,"get",async id=>{const indexPatternPromise=this.indexPatternCache.get(id)||this.indexPatternCache.set(id,this.getSavedObjectAndInit(id));return indexPatternPromise.catch(()=>{this.indexPatternCache.clear(id)}),indexPatternPromise}),this.apiClient=apiClient,this.config=uiSettings,this.savedObjectsClient=savedObjectsClient,this.fieldFormats=fieldFormats,this.onNotification=onNotification,this.onError=onError,this.onUnsupportedTimePattern=onUnsupportedTimePattern,this.ensureDefaultIndexPattern=createEnsureDefaultIndexPattern(uiSettings,onRedirectNoIndexPattern),this.indexPatternCache=createIndexPatternCache()}async refreshSavedObjectsCache(){const so=await this.savedObjectsClient.find({type:"index-pattern",fields:["title"],perPage:1e4});this.savedObjectsCache=so}migrate(indexPattern,newTitle){return this.savedObjectsClient.update("index-pattern",indexPattern.id,{title:newTitle,intervalName:null},{version:indexPattern.version}).then(({attributes:{title:title,intervalName:intervalName}})=>{indexPattern.title=title,indexPattern.intervalName=intervalName}).then(()=>this)}async create(spec,skipFetchFields=!1){const shortDotsEnable=await this.config.get(common.UI_SETTINGS.SHORT_DOTS_ENABLE),metaFields=await this.config.get(common.UI_SETTINGS.META_FIELDS),indexPattern=new index_pattern_IndexPattern({spec:spec,fieldFormats:this.fieldFormats,shortDotsEnable:shortDotsEnable,metaFields:metaFields});return skipFetchFields||await this.refreshFields(indexPattern),indexPattern}async createAndSave(spec,override=!1,skipFetchFields=!1){const indexPattern=await this.create(spec,skipFetchFields);return await this.createSavedObject(indexPattern,override),await this.setDefault(indexPattern.id),indexPattern}async createSavedObject(indexPattern,override=!1){const dupe=await async function(client,title){if(title){return(await client.find({type:"index-pattern",perPage:10,search:`"${title}"`,searchFields:["title"],fields:["title"]})).find(obj=>obj.attributes.title.toLowerCase()===title.toLowerCase())}}(this.savedObjectsClient,indexPattern.title);if(dupe){if(!override)throw new errors.a("Duplicate index pattern: "+indexPattern.title);await this.delete(dupe.id)}const body=indexPattern.getAsSavedObjectBody(),response=await this.savedObjectsClient.create("index-pattern",body,{id:indexPattern.id});return indexPattern.id=response.id,this.indexPatternCache.set(indexPattern.id,Promise.resolve(indexPattern)),this.savedObjectsCache&&this.savedObjectsCache.push(response),indexPattern}async updateSavedObject(indexPattern,saveAttempts=0,ignoreErrors=!1){if(!indexPattern.id)return;const body=indexPattern.getAsSavedObjectBody(),originalBody=indexPattern.getOriginalSavedObjectBody(),originalChangedKeys=[];return Object.entries(body).forEach(([key,value])=>{value!==originalBody[key]&&originalChangedKeys.push(key)}),this.savedObjectsClient.update("index-pattern",indexPattern.id,body,{version:indexPattern.version}).then(resp=>{indexPattern.id=resp.id,indexPattern.version=resp.version}).catch(async err=>{var _err$res;if(409===(null==err||null===(_err$res=err.res)||void 0===_err$res?void 0:_err$res.status)&&saveAttempts++<3){const samePattern=await this.get(indexPattern.id),updatedBody=samePattern.getAsSavedObjectBody(),serverChangedKeys=[];Object.entries(updatedBody).forEach(([key,value])=>{value!==body[key]&&value!==originalBody[key]&&serverChangedKeys.push(key)});let unresolvedCollision=!1;for(const originalKey of originalChangedKeys)for(const serverKey of serverChangedKeys)if(originalKey===serverKey){unresolvedCollision=!0;break}if(unresolvedCollision){if(ignoreErrors)return;const title=external_kbnSharedDeps_KbnI18n_.i18n.translate("data.indexPatterns.unableWriteLabel",{defaultMessage:"Unable to write index pattern! Refresh the page to get the most up to date changes for this index pattern."});throw this.onNotification({title:title,color:"danger"}),err}return serverChangedKeys.forEach(key=>{indexPattern[key]=samePattern[key]}),indexPattern.version=samePattern.version,this.indexPatternCache.clear(indexPattern.id),this.updateSavedObject(indexPattern,saveAttempts,ignoreErrors)}throw err})}async delete(indexPatternId){return this.indexPatternCache.clear(indexPatternId),this.savedObjectsClient.delete("index-pattern",indexPatternId)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _es_query__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(70);__webpack_require__.d(__webpack_exports__,"buildEsQuery",(function(){return _es_query__WEBPACK_IMPORTED_MODULE_0__.b})),__webpack_require__.d(__webpack_exports__,"EsQueryConfig",(function(){return _es_query__WEBPACK_IMPORTED_MODULE_0__.a})),__webpack_require__.d(__webpack_exports__,"buildQueryFromFilters",(function(){return _es_query__WEBPACK_IMPORTED_MODULE_0__.c})),__webpack_require__.d(__webpack_exports__,"luceneStringToDsl",(function(){return _es_query__WEBPACK_IMPORTED_MODULE_0__.f})),__webpack_require__.d(__webpack_exports__,"decorateQuery",(function(){return _es_query__WEBPACK_IMPORTED_MODULE_0__.d})),__webpack_require__.d(__webpack_exports__,"getEsQueryConfig",(function(){return _es_query__WEBPACK_IMPORTED_MODULE_0__.e}));var _filters__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8);for(var __WEBPACK_IMPORT_KEY__ in _filters__WEBPACK_IMPORTED_MODULE_1__)["default","buildEsQuery","EsQueryConfig","buildQueryFromFilters","luceneStringToDsl","decorateQuery","getEsQueryConfig"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _filters__WEBPACK_IMPORTED_MODULE_1__[key]}))}(__WEBPACK_IMPORT_KEY__);var _kuery__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(55);__webpack_require__.d(__webpack_exports__,"KQLSyntaxError",(function(){return _kuery__WEBPACK_IMPORTED_MODULE_2__.a})),__webpack_require__.d(__webpack_exports__,"nodeTypes",(function(){return _kuery__WEBPACK_IMPORTED_MODULE_2__.e})),__webpack_require__.d(__webpack_exports__,"nodeBuilder",(function(){return _kuery__WEBPACK_IMPORTED_MODULE_2__.d})),__webpack_require__.d(__webpack_exports__,"fromLiteralExpression",(function(){return _kuery__WEBPACK_IMPORTED_MODULE_2__.c})),__webpack_require__.d(__webpack_exports__,"fromKueryExpression",(function(){return _kuery__WEBPACK_IMPORTED_MODULE_2__.b})),__webpack_require__.d(__webpack_exports__,"toElasticsearchQuery",(function(){return _kuery__WEBPACK_IMPORTED_MODULE_2__.f}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return isExistsFilter})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getExistsFilterField})),__webpack_require__.d(__webpack_exports__,"a",(function(){return buildExistsFilter}));const isExistsFilter=filter=>filter&&filter.exists,getExistsFilterField=filter=>filter.exists&&filter.exists.field,buildExistsFilter=(field,indexPattern)=>({meta:{index:indexPattern.id},exists:{field:field.name}})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return isGeoBoundingBoxFilter})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getGeoBoundingBoxFilterField}));const isGeoBoundingBoxFilter=filter=>filter&&filter.geo_bounding_box,getGeoBoundingBoxFilterField=filter=>filter.geo_bounding_box&&Object.keys(filter.geo_bounding_box).find(key=>"ignore_unmapped"!==key)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return isGeoPolygonFilter})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getGeoPolygonFilterField}));const isGeoPolygonFilter=filter=>filter&&filter.geo_polygon,getGeoPolygonFilterField=filter=>filter.geo_polygon&&Object.keys(filter.geo_polygon).find(key=>"ignore_unmapped"!==key)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return isPhrasesFilter})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getPhrasesFilterField})),__webpack_require__.d(__webpack_exports__,"a",(function(){return buildPhrasesFilter}));var _phrase_filter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(43),_index__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8);const isPhrasesFilter=filter=>{var _filter$meta;return(null==filter||null===(_filter$meta=filter.meta)||void 0===_filter$meta?void 0:_filter$meta.type)===_index__WEBPACK_IMPORTED_MODULE_1__.FILTERS.PHRASES},getPhrasesFilterField=filter=>filter.meta.key,buildPhrasesFilter=(field,params,indexPattern)=>{const index=indexPattern.id,type=_index__WEBPACK_IMPORTED_MODULE_1__.FILTERS.PHRASES,key=field.name,value=params.map(v=>((f,value)=>f&&f.format&&f.format.convert?f.format.convert(value):value)(field,v)).join(", ");let should;return should=field.scripted?params.map(v=>({script:Object(_phrase_filter__WEBPACK_IMPORTED_MODULE_0__.f)(field,v)})):params.map(v=>({match_phrase:{[field.name]:v}})),{meta:{index:index,type:type,key:key,value:value,params:params},query:{bool:{should:should,minimum_should_match:1}}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return isRangeFilter})),__webpack_require__.d(__webpack_exports__,"e",(function(){return isScriptedRangeFilter})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getRangeFilterField})),__webpack_require__.d(__webpack_exports__,"a",(function(){return buildRangeFilter})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getRangeScript}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);const operators={gt:">",gte:">=",lte:"<=",lt:"<"},comparators={gt:"boolean gt(Supplier s, def v) {return s.get() > v}",gte:"boolean gte(Supplier s, def v) {return s.get() >= v}",lte:"boolean lte(Supplier s, def v) {return s.get() <= v}",lt:"boolean lt(Supplier s, def v) {return s.get() < v}"},dateComparators={gt:"boolean gt(Supplier s, def v) {return s.get().toInstant().isAfter(Instant.parse(v))}",gte:"boolean gte(Supplier s, def v) {return !s.get().toInstant().isBefore(Instant.parse(v))}",lte:"boolean lte(Supplier s, def v) {return !s.get().toInstant().isAfter(Instant.parse(v))}",lt:"boolean lt(Supplier s, def v) {return s.get().toInstant().isBefore(Instant.parse(v))}"},isRangeFilter=filter=>filter&&filter.range,isScriptedRangeFilter=filter=>(params=>Boolean(Object(lodash__WEBPACK_IMPORTED_MODULE_0__.keys)(params).find(key=>["gte","gt","lte","lt","from","to"].includes(key))))(Object(lodash__WEBPACK_IMPORTED_MODULE_0__.get)(filter,"script.script.params",{})),getRangeFilterField=filter=>filter.range&&Object.keys(filter.range)[0],format=(field,value)=>field&&field.format&&field.format.convert?field.format.convert(value):value,buildRangeFilter=(field,params,indexPattern,formattedValue)=>{const filter={meta:{index:indexPattern.id,params:{}}};if(formattedValue&&(filter.meta.formattedValue=formattedValue),"gte"in(params=Object(lodash__WEBPACK_IMPORTED_MODULE_0__.mapValues)(params,value=>"number"===field.type?parseFloat(value):value))&&"gt"in params)throw new Error("gte and gt are mutually exclusive");if("lte"in params&&"lt"in params)throw new Error("lte and lt are mutually exclusive");return 2===["gt","lt"].reduce((acc,op)=>{const key=op in params?op:op+"e";return Math.abs(Object(lodash__WEBPACK_IMPORTED_MODULE_0__.get)(params,key))===1/0&&(acc++,delete params[key]),acc},0)?(filter.match_all={},filter.meta.field=field.name):field.scripted?(filter.script=getRangeScript(field,params),filter.script.script.params.value=((field,params)=>Object(lodash__WEBPACK_IMPORTED_MODULE_0__.map)(params,(val,key)=>Object(lodash__WEBPACK_IMPORTED_MODULE_0__.get)(operators,key)+format(field,val)).join(" "))(field,filter.script.script.params),filter.meta.field=field.name):(filter.range={},filter.range[field.name]=params),filter},getRangeScript=(field,params)=>{const knownParams=Object(lodash__WEBPACK_IMPORTED_MODULE_0__.mapValues)(Object(lodash__WEBPACK_IMPORTED_MODULE_0__.pickBy)(params,(val,key)=>key in operators),value=>"number"===field.type&&"string"==typeof value?parseFloat(value):value);let script=Object(lodash__WEBPACK_IMPORTED_MODULE_0__.map)(knownParams,(val,key)=>"("+field.script+")"+Object(lodash__WEBPACK_IMPORTED_MODULE_0__.get)(operators,key)+key).join(" && ");if("painless"===field.lang){const comp="date"===field.type?dateComparators:comparators;script=`${Object(lodash__WEBPACK_IMPORTED_MODULE_0__.reduce)(knownParams,(acc,val,key)=>acc.concat(Object(lodash__WEBPACK_IMPORTED_MODULE_0__.get)(comp,key)),[]).join(" ")}${Object(lodash__WEBPACK_IMPORTED_MODULE_0__.map)(knownParams,(val,key)=>`${key}(() -> { ${field.script} }, params.${key})`).join(" && ")}`}return{script:{source:script,params:knownParams,lang:field.lang}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return isMissingFilter})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getMissingFilterField}));const isMissingFilter=filter=>filter&&filter.missing,getMissingFilterField=filter=>filter.missing&&filter.missing.field},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return IndexPatternField}));var _kbn_field_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(34),_kbn_field_types_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4),_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(41);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class IndexPatternField{constructor(spec){_defineProperty(this,"spec",void 0),_defineProperty(this,"kbnFieldType",void 0),this.spec={...spec,type:"_source"===spec.name?"_source":spec.type},this.kbnFieldType=Object(_kbn_field_types__WEBPACK_IMPORTED_MODULE_0__.d)(spec.type)}get count(){return this.spec.count||0}set count(count){this.spec.count=count}get runtimeField(){return this.spec.runtimeField}set runtimeField(runtimeField){this.spec.runtimeField=runtimeField}get script(){return this.spec.script}set script(script){this.spec.script=script}get lang(){return this.spec.lang}set lang(lang){this.spec.lang=lang}get customLabel(){return this.spec.customLabel}set customLabel(customLabel){this.spec.customLabel=customLabel}get conflictDescriptions(){return this.spec.conflictDescriptions}set conflictDescriptions(conflictDescriptions){this.spec.conflictDescriptions=conflictDescriptions}get name(){return this.spec.name}get displayName(){return this.spec.customLabel?this.spec.customLabel:this.spec.shortDotsEnable?Object(_utils__WEBPACK_IMPORTED_MODULE_2__.a)(this.spec.name):this.spec.name}get type(){var _this$runtimeField,_this$runtimeField2;return null!==(_this$runtimeField=this.runtimeField)&&void 0!==_this$runtimeField&&_this$runtimeField.type?Object(_kbn_field_types__WEBPACK_IMPORTED_MODULE_0__.b)(null===(_this$runtimeField2=this.runtimeField)||void 0===_this$runtimeField2?void 0:_this$runtimeField2.type):this.spec.type}get esTypes(){var _this$runtimeField3,_this$runtimeField4;return null!==(_this$runtimeField3=this.runtimeField)&&void 0!==_this$runtimeField3&&_this$runtimeField3.type?[null===(_this$runtimeField4=this.runtimeField)||void 0===_this$runtimeField4?void 0:_this$runtimeField4.type]:this.spec.esTypes}get scripted(){return!!this.spec.scripted}get searchable(){return!(!this.spec.searchable&&!this.scripted)}get aggregatable(){return!(!this.spec.aggregatable&&!this.scripted)}get readFromDocValues(){return!(!this.spec.readFromDocValues||this.scripted)}get subType(){return this.spec.subType}get isMapped(){return this.spec.isMapped}get sortable(){return"_score"===this.name||(this.spec.indexed||this.aggregatable)&&this.kbnFieldType.sortable}get filterable(){return"_id"===this.name||this.scripted||(this.spec.indexed||this.searchable)&&this.kbnFieldType.filterable}get visualizable(){const notVisualizableFieldTypes=[_kbn_field_types_types__WEBPACK_IMPORTED_MODULE_1__.b.UNKNOWN,_kbn_field_types_types__WEBPACK_IMPORTED_MODULE_1__.b.CONFLICT];return this.aggregatable&&!notVisualizableFieldTypes.includes(this.spec.type)}deleteCount(){delete this.spec.count}toJSON(){return{count:this.count,script:this.script,lang:this.lang,conflictDescriptions:this.conflictDescriptions,name:this.name,type:this.type,esTypes:this.esTypes,scripted:this.scripted,searchable:this.searchable,aggregatable:this.aggregatable,readFromDocValues:this.readFromDocValues,subType:this.subType,customLabel:this.customLabel}}toSpec({getFormatterForField:getFormatterForField}={}){return{count:this.count,script:this.script,lang:this.lang,conflictDescriptions:this.conflictDescriptions,name:this.name,type:this.type,esTypes:this.esTypes,scripted:this.scripted,searchable:this.searchable,aggregatable:this.aggregatable,readFromDocValues:this.readFromDocValues,subType:this.subType,format:getFormatterForField?getFormatterForField(this).toJSON():void 0,customLabel:this.customLabel,shortDotsEnable:this.spec.shortDotsEnable,runtimeField:this.runtimeField,isMapped:this.isMapped}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return boundsDescendingRaw})),__webpack_require__.d(__webpack_exports__,"c",(function(){return calcAutoIntervalNear})),__webpack_require__.d(__webpack_exports__,"b",(function(){return calcAutoIntervalLessThan}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),moment__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),moment__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);const boundsDescendingRaw=[{bound:1/0,interval:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(1,"year"),boundLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.infinityLabel",{defaultMessage:"More than a year"}),intervalLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.yearLabel",{defaultMessage:"a year"})},{bound:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(1,"year"),interval:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(1,"month"),boundLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.yearLabel",{defaultMessage:"a year"}),intervalLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.monthLabel",{defaultMessage:"a month"})},{bound:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(3,"week"),interval:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(1,"week"),boundLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.dayLabel",{defaultMessage:"{amount, plural, one {a day} other {# days}}",values:{amount:21}}),intervalLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.dayLabel",{defaultMessage:"{amount, plural, one {a day} other {# days}}",values:{amount:7}})},{bound:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(1,"week"),interval:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(1,"d"),boundLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.dayLabel",{defaultMessage:"{amount, plural, one {a day} other {# days}}",values:{amount:7}}),intervalLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.dayLabel",{defaultMessage:"{amount, plural, one {a day} other {# days}}",values:{amount:1}})},{bound:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(24,"hour"),interval:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(12,"hour"),boundLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.dayLabel",{defaultMessage:"{amount, plural, one {a day} other {# days}}",values:{amount:1}}),intervalLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.hourLabel",{defaultMessage:"{amount, plural, one {an hour} other {# hours}}",values:{amount:12}})},{bound:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(6,"hour"),interval:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(3,"hour"),boundLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.hourLabel",{defaultMessage:"{amount, plural, one {an hour} other {# hours}}",values:{amount:6}}),intervalLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.hourLabel",{defaultMessage:"{amount, plural, one {an hour} other {# hours}}",values:{amount:3}})},{bound:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(2,"hour"),interval:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(1,"hour"),boundLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.hourLabel",{defaultMessage:"{amount, plural, one {an hour} other {# hours}}",values:{amount:2}}),intervalLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.hourLabel",{defaultMessage:"{amount, plural, one {an hour} other {# hours}}",values:{amount:1}})},{bound:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(45,"minute"),interval:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(30,"minute"),boundLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.minuteLabel",{defaultMessage:"{amount, plural, one {a minute} other {# minutes}}",values:{amount:45}}),intervalLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.minuteLabel",{defaultMessage:"{amount, plural, one {a minute} other {# minutes}}",values:{amount:30}})},{bound:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(20,"minute"),interval:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(10,"minute"),boundLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.minuteLabel",{defaultMessage:"{amount, plural, one {a minute} other {# minutes}}",values:{amount:20}}),intervalLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.minuteLabel",{defaultMessage:"{amount, plural, one {a minute} other {# minutes}}",values:{amount:10}})},{bound:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(9,"minute"),interval:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(5,"minute"),boundLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.minuteLabel",{defaultMessage:"{amount, plural, one {a minute} other {# minutes}}",values:{amount:9}}),intervalLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.minuteLabel",{defaultMessage:"{amount, plural, one {a minute} other {# minutes}}",values:{amount:5}})},{bound:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(3,"minute"),interval:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(1,"minute"),boundLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.minuteLabel",{defaultMessage:"{amount, plural, one {a minute} other {# minutes}}",values:{amount:3}}),intervalLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.minuteLabel",{defaultMessage:"{amount, plural, one {a minute} other {# minutes}}",values:{amount:1}})},{bound:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(45,"second"),interval:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(30,"second"),boundLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.secondLabel",{defaultMessage:"{amount, plural, one {a second} other {# seconds}}",values:{amount:45}}),intervalLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.secondLabel",{defaultMessage:"{amount, plural, one {a second} other {# seconds}}",values:{amount:30}})},{bound:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(15,"second"),interval:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(10,"second"),boundLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.secondLabel",{defaultMessage:"{amount, plural, one {a second} other {# seconds}}",values:{amount:15}}),intervalLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.secondLabel",{defaultMessage:"{amount, plural, one {a second} other {# seconds}}",values:{amount:10}})},{bound:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(7.5,"second"),interval:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(5,"second"),boundLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.secondLabel",{defaultMessage:"{amount, plural, one {a second} other {# seconds}}",values:{amount:7.5}}),intervalLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.secondLabel",{defaultMessage:"{amount, plural, one {a second} other {# seconds}}",values:{amount:5}})},{bound:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(5,"second"),interval:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(1,"second"),boundLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.secondLabel",{defaultMessage:"{amount, plural, one {a second} other {# seconds}}",values:{amount:5}}),intervalLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.secondLabel",{defaultMessage:"{amount, plural, one {a second} other {# seconds}}",values:{amount:1}})},{bound:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(500,"ms"),interval:moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(100,"ms"),boundLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.millisecondLabel",{defaultMessage:"{amount, plural, one {a millisecond} other {# milliseconds}}",values:{amount:500}}),intervalLabel:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.timeBuckets.millisecondLabel",{defaultMessage:"{amount, plural, one {a millisecond} other {# milliseconds}}",values:{amount:100}})}],boundsDescending=boundsDescendingRaw.map(({bound:bound,interval:interval})=>({bound:Number(bound),interval:Number(interval)}));function getPerBucketMs(count,duration){const ms=duration/count;return isFinite(ms)?ms:NaN}function normalizeMinimumInterval(targetMs){const value=isNaN(targetMs)?0:Math.max(Math.floor(targetMs),1);return moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(value)}function calcAutoIntervalNear(targetBucketCount,duration){const targetPerBucketMs=getPerBucketMs(targetBucketCount,duration),lowerBoundIndex=boundsDescending.findIndex(({bound:bound})=>Number(bound)<=targetPerBucketMs);if(-1!==lowerBoundIndex){const nearestInterval=boundsDescending[lowerBoundIndex-1].interval;return moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(nearestInterval)}return normalizeMinimumInterval(targetPerBucketMs)}function calcAutoIntervalLessThan(maxBucketCount,duration){const maxPerBucketMs=getPerBucketMs(maxBucketCount,duration);for(const{interval:interval}of boundsDescending)if(interval<=maxPerBucketMs)return moment__WEBPACK_IMPORTED_MODULE_1___default.a.duration(interval);return normalizeMinimumInterval(maxPerBucketMs)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _create_search_source__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(130);__webpack_require__.d(__webpack_exports__,"createSearchSource",(function(){return _create_search_source__WEBPACK_IMPORTED_MODULE_0__.a}));var _inject_references__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(116);__webpack_require__.d(__webpack_exports__,"injectReferences",(function(){return _inject_references__WEBPACK_IMPORTED_MODULE_1__.a}));var _extract_references__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(86);__webpack_require__.d(__webpack_exports__,"extractReferences",(function(){return _extract_references__WEBPACK_IMPORTED_MODULE_2__.a}));var _parse_json__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(117);__webpack_require__.d(__webpack_exports__,"parseSearchSourceJSON",(function(){return _parse_json__WEBPACK_IMPORTED_MODULE_3__.a}));var _inspect__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(71);__webpack_require__.d(__webpack_exports__,"getResponseInspectorStats",(function(){return _inspect__WEBPACK_IMPORTED_MODULE_4__.b}));var _fetch__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(45);for(var __WEBPACK_IMPORT_KEY__ in _fetch__WEBPACK_IMPORTED_MODULE_5__)["default","createSearchSource","injectReferences","extractReferences","parseSearchSourceJSON","getResponseInspectorStats"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _fetch__WEBPACK_IMPORTED_MODULE_5__[key]}))}(__WEBPACK_IMPORT_KEY__);var _legacy__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(85);for(var __WEBPACK_IMPORT_KEY__ in _legacy__WEBPACK_IMPORTED_MODULE_6__)["default","createSearchSource","injectReferences","extractReferences","parseSearchSourceJSON","getResponseInspectorStats"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _legacy__WEBPACK_IMPORTED_MODULE_6__[key]}))}(__WEBPACK_IMPORT_KEY__);var _search_source__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(91);__webpack_require__.d(__webpack_exports__,"searchSourceRequiredUiSettings",(function(){return _search_source__WEBPACK_IMPORTED_MODULE_7__.b})),__webpack_require__.d(__webpack_exports__,"SearchSource",(function(){return _search_source__WEBPACK_IMPORTED_MODULE_7__.a}));var _search_source_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(118);__webpack_require__.d(__webpack_exports__,"SearchSourceService",(function(){return _search_source_service__WEBPACK_IMPORTED_MODULE_8__.a}));var _types__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(119);__webpack_require__.d(__webpack_exports__,"SortDirection",(function(){return _types__WEBPACK_IMPORTED_MODULE_9__.a}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return buildEsQuery})),__webpack_require__.d(__webpack_exports__,"a",(function(){})),__webpack_require__.d(__webpack_exports__,"c",(function(){return buildQueryFromFilters})),__webpack_require__.d(__webpack_exports__,"f",(function(){return luceneStringToDsl})),__webpack_require__.d(__webpack_exports__,"d",(function(){return decorateQuery})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getEsQueryConfig}));var external_kbnSharedDeps_Lodash_=__webpack_require__(2),kuery=__webpack_require__(55);function buildQueryFromKuery(indexPattern,queries=[],allowLeadingWildcards=!1,dateFormatTZ){return function(indexPattern,queryASTs,config={}){const compoundQueryAST=kuery.e.function.buildNode("and",queryASTs),kueryQuery=Object(kuery.f)(compoundQueryAST,indexPattern,config);return Object.assign({must:[],filter:[],should:[],must_not:[]},kueryQuery.bool)}(indexPattern,queries.map(query=>Object(kuery.b)(query.query,{allowLeadingWildcards:allowLeadingWildcards})),{dateFormatTZ:dateFormatTZ})}var es_query_filters=__webpack_require__(8);function migrateFilter(filter,indexPattern){if(function(filter){const fieldName=filter.query&&filter.query.match&&Object.keys(filter.query.match)[0];return Boolean(fieldName&&"phrase"===Object(external_kbnSharedDeps_Lodash_.get)(filter,["query","match",fieldName,"type"]))}(filter)){const fieldName=Object.keys(filter.query.match)[0],params=Object(external_kbnSharedDeps_Lodash_.get)(filter,["query","match",fieldName]);let query=params.query;if(indexPattern){const field=indexPattern.fields.find(f=>f.name===fieldName);field&&(query=Object(es_query_filters.getConvertedValueForField)(field,params.query))}return{...filter,query:{match_phrase:{[fieldName]:Object(external_kbnSharedDeps_Lodash_.omit)({...params,query:query},"type")}}}}return filter}const translateToQuery=filter=>{if(filter)return filter.query?filter.query:filter},buildQueryFromFilters=(filters=[],indexPattern,ignoreFilterIfFieldNotInIndex=!1)=>{filters=filters.filter(filter=>filter&&!Object(es_query_filters.isFilterDisabled)(filter));const filtersToESQueries=negate=>{return filters.filter((reverse=negate,filter=>Object(external_kbnSharedDeps_Lodash_.isUndefined)(filter.meta)||Object(external_kbnSharedDeps_Lodash_.isUndefined)(filter.meta.negate)?!reverse:filter.meta&&filter.meta.negate===reverse)).filter(filter=>!ignoreFilterIfFieldNotInIndex||function(filter,indexPattern){var _filter$meta,_filter$meta2;return null===(_filter$meta=filter.meta)||void 0===_filter$meta||!_filter$meta.key||!indexPattern||("custom"===(null===(_filter$meta2=filter.meta)||void 0===_filter$meta2?void 0:_filter$meta2.type)?filter.meta.index===indexPattern.id:indexPattern.fields.some(field=>field.name===filter.meta.key))}(filter,indexPattern)).map(filter=>migrateFilter(filter,indexPattern)).map(filter=>((filter,indexPattern)=>{if(!indexPattern)return filter;const fieldName=Object(es_query_filters.getFilterField)(filter);if(!fieldName)return filter;const field=indexPattern.fields.find(indexPatternField=>indexPatternField.name===fieldName);if(!(field&&field.subType&&field.subType.nested&&field.subType.nested.path))return filter;const query=Object(es_query_filters.cleanFilter)(filter);return{meta:filter.meta,nested:{path:field.subType.nested.path,query:query.query||query}}})(filter,indexPattern)).map(translateToQuery).map(es_query_filters.cleanFilter);var reverse};return{must:[],filter:filtersToESQueries(!1),should:[],must_not:filtersToESQueries(!0)}};var utils=__webpack_require__(54);function decorateQuery(query,queryStringOptions,dateFormatTZ){return(query=>Object(external_kbnSharedDeps_Lodash_.has)(query,"query_string.query"))(query)&&("string"==typeof queryStringOptions&&(queryStringOptions=JSON.parse(queryStringOptions)),Object(external_kbnSharedDeps_Lodash_.extend)(query.query_string,queryStringOptions),dateFormatTZ&&Object(external_kbnSharedDeps_Lodash_.defaults)(query.query_string,{time_zone:Object(utils.a)(dateFormatTZ)})),query}function luceneStringToDsl(query){return Object(external_kbnSharedDeps_Lodash_.isString)(query)?""===query.trim()?{match_all:{}}:{query_string:{query:query}}:query}function buildEsQuery(indexPattern,queries,filters,config={allowLeadingWildcards:!1,queryStringOptions:{},ignoreFilterIfFieldNotInIndex:!1}){queries=Array.isArray(queries)?queries:[queries],filters=Array.isArray(filters)?filters:[filters];const validQueries=queries.filter(query=>Object(external_kbnSharedDeps_Lodash_.has)(query,"query")),queriesByLanguage=Object(external_kbnSharedDeps_Lodash_.groupBy)(validQueries,"language"),kueryQuery=buildQueryFromKuery(indexPattern,queriesByLanguage.kuery,config.allowLeadingWildcards,config.dateFormatTZ),luceneQuery=function(queries,queryStringOptions,dateFormatTZ){return{must:(queries||[]).map(query=>decorateQuery(luceneStringToDsl(query.query),queryStringOptions,dateFormatTZ)),filter:[],should:[],must_not:[]}}(queriesByLanguage.lucene,config.queryStringOptions,config.dateFormatTZ),filterQuery=buildQueryFromFilters(filters,indexPattern,config.ignoreFilterIfFieldNotInIndex);return{bool:{must:[...kueryQuery.must,...luceneQuery.must,...filterQuery.must],filter:[...kueryQuery.filter,...luceneQuery.filter,...filterQuery.filter],should:[...kueryQuery.should,...luceneQuery.should,...filterQuery.should],must_not:[...kueryQuery.must_not,...luceneQuery.must_not,...filterQuery.must_not]}}}var common=__webpack_require__(1);function getEsQueryConfig(config){return{allowLeadingWildcards:config.get(common.UI_SETTINGS.QUERY_ALLOW_LEADING_WILDCARDS),queryStringOptions:config.get(common.UI_SETTINGS.QUERY_STRING_OPTIONS),ignoreFilterIfFieldNotInIndex:config.get(common.UI_SETTINGS.COURIER_IGNORE_FILTER_IF_FIELD_NOT_IN_INDEX),dateFormatTZ:config.get("dateFormat:tz")}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getRequestInspectorStats})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getResponseInspectorStats}));var external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);function getRequestInspectorStats(searchSource){const stats={},index=searchSource.getField("index");return index&&(stats.indexPattern={label:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.searchSource.indexPatternLabel",{defaultMessage:"Index pattern"}),value:index.title,description:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.searchSource.indexPatternDescription",{defaultMessage:"The index pattern that connected to the Elasticsearch indices."})},stats.indexPatternId={label:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.searchSource.indexPatternIdLabel",{defaultMessage:"Index pattern ID"}),value:index.id,description:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.searchSource.indexPatternIdDescription",{defaultMessage:"The ID in the {kibanaIndexPattern} index.",values:{kibanaIndexPattern:".kibana"}})}),stats}function getResponseInspectorStats(resp,searchSource){var _resp$hits;const lastRequest=(null==searchSource?void 0:searchSource.history)&&searchSource.history[searchSource.history.length-1],stats={};if(resp&&resp.took&&(stats.queryTime={label:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.searchSource.queryTimeLabel",{defaultMessage:"Query time"}),value:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.searchSource.queryTimeValue",{defaultMessage:"{queryTime}ms",values:{queryTime:resp.took}}),description:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.searchSource.queryTimeDescription",{defaultMessage:"The time it took to process the query. Does not include the time to send the request or parse it in the browser."})}),resp&&void 0!==(null===(_resp$hits=resp.hits)||void 0===_resp$hits?void 0:_resp$hits.total)){let value;if("number"==typeof resp.hits.total)value=""+resp.hits.total;else{const total=resp.hits.total;value="eq"===total.relation?""+total.value:"> "+total.value}stats.hitsTotal={label:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.searchSource.hitsTotalLabel",{defaultMessage:"Hits (total)"}),value:value,description:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.searchSource.hitsTotalDescription",{defaultMessage:"The number of documents that match the query."})}}return resp&&resp.hits&&(stats.hits={label:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.searchSource.hitsLabel",{defaultMessage:"Hits"}),value:""+resp.hits.hits.length,description:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.searchSource.hitsDescription",{defaultMessage:"The number of documents returned by the query."})}),lastRequest&&(0===lastRequest.ms||lastRequest.ms)&&(stats.requestTime={label:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.searchSource.requestTimeLabel",{defaultMessage:"Request time"}),value:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.searchSource.requestTimeValue",{defaultMessage:"{requestTime}ms",values:{requestTime:lastRequest.ms}}),description:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.searchSource.requestTimeDescription",{defaultMessage:"The time of the request from the browser to Elasticsearch and back. Does not include the time the requested waited in the queue."})}),stats}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return FilterLabel})),__webpack_require__.d(__webpack_exports__,"a",(function(){return FilterItem}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);const Fallback=()=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null),LazyFilterLabel=react__WEBPACK_IMPORTED_MODULE_0___default.a.lazy(()=>__webpack_require__.e(3).then(__webpack_require__.bind(null,161))),FilterLabel=props=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Suspense,{fallback:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Fallback,null)},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(LazyFilterLabel,props)),LazyFilterItem=react__WEBPACK_IMPORTED_MODULE_0___default.a.lazy(()=>Promise.all([__webpack_require__.e(1),__webpack_require__.e(11)]).then(__webpack_require__.bind(null,160))),FilterItem=props=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Suspense,{fallback:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Fallback,null)},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(LazyFilterItem,props))},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _timefilter_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(111);for(var __WEBPACK_IMPORT_KEY__ in _timefilter_types__WEBPACK_IMPORTED_MODULE_0__)["default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _timefilter_types__WEBPACK_IMPORTED_MODULE_0__[key]}))}(__WEBPACK_IMPORT_KEY__)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getSearchParams})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getPreference})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getSearchParamsFromRequest}));var _constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(26);const sessionId=Date.now();function getSearchParams(getConfig){return{preference:getPreference(getConfig)}}function getPreference(getConfig){const setRequestPreference=getConfig(_constants__WEBPACK_IMPORTED_MODULE_0__.c.COURIER_SET_REQUEST_PREFERENCE);return"sessionId"===setRequestPreference?sessionId:"custom"===setRequestPreference?getConfig(_constants__WEBPACK_IMPORTED_MODULE_0__.c.COURIER_CUSTOM_REQUEST_PREFERENCE):void 0}function getSearchParamsFromRequest(searchRequest,dependencies){const{getConfig:getConfig}=dependencies,searchParams=getSearchParams(getConfig),{track_total_hits:track_total_hits,...body}=searchRequest.body;return{index:searchRequest.index.title||searchRequest.index,body:body,track_total_hits:track_total_hits,...searchParams}}},function(module,exports,__webpack_require__){"use strict";var memo,isOldIE=function(){return void 0===memo&&(memo=Boolean(window&&document&&document.all&&!window.atob)),memo},getTarget=function(){var memo={};return function(target){if(void 0===memo[target]){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}}(),stylesInDom=[];function getIndexByIdentifier(identifier){for(var result=-1,i=0;i<stylesInDom.length;i++)if(stylesInDom[i].identifier===identifier){result=i;break}return result}function modulesToDom(list,options){for(var idCountMap={},identifiers=[],i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],count=idCountMap[id]||0,identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier),obj={css:item[1],media:item[2],sourceMap:item[3]};-1!==index?(stylesInDom[index].references++,stylesInDom[index].updater(obj)):stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1}),identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style"),attributes=options.attributes||{};if(void 0===attributes.nonce){var nonce=__webpack_require__.nc;nonce&&(attributes.nonce=nonce)}if(Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])})),"function"==typeof options.insert)options.insert(style);else{var target=getTarget(options.insert||"head");if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");target.appendChild(style)}return style}var textStore,replaceText=(textStore=[],function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")});function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}function applyToTag(style,options,obj){var css=obj.css,media=obj.media,sourceMap=obj.sourceMap;if(media?style.setAttribute("media",media):style.removeAttribute("media"),sourceMap&&btoa&&(css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")),style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}var singleton=null,singletonCounter=0;function addStyle(obj,options){var style,update,remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else style=insertStyleElement(options),update=applyToTag.bind(null,style,options),remove=function(){!function(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style)}(style)};return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}module.exports=function(list,options){(options=options||{}).singleton||"boolean"==typeof options.singleton||(options.singleton=isOldIE());var lastIdentifiers=modulesToDom(list=list||[],options);return function(newList){if(newList=newList||[],"[object Array]"===Object.prototype.toString.call(newList)){for(var i=0;i<lastIdentifiers.length;i++){var index=getIndexByIdentifier(lastIdentifiers[i]);stylesInDom[index].references--}for(var newLastIdentifiers=modulesToDom(newList,options),_i=0;_i<lastIdentifiers.length;_i++){var _index=getIndexByIdentifier(lastIdentifiers[_i]);0===stylesInDom[_index].references&&(stylesInDom[_index].updater(),stylesInDom.splice(_index,1))}lastIdentifiers=newLastIdentifiers}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];return list.toString=function(){return this.map((function(item){var content=function(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=(sourceMap=cssMapping,base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64),"/*# ".concat(data," */")),sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}var sourceMap,base64,data;return[content].join("\n")}(item,useSourceMap);return item[2]?"@media ".concat(item[2]," {").concat(content,"}"):content})).join("")},list.i=function(modules,mediaQuery,dedupe){"string"==typeof modules&&(modules=[[null,modules,""]]);var alreadyImportedModules={};if(dedupe)for(var i=0;i<this.length;i++){var id=this[i][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);dedupe&&alreadyImportedModules[item[0]]||(mediaQuery&&(item[2]?item[2]="".concat(mediaQuery," and ").concat(item[2]):item[2]=mediaQuery),list.push(item))}},list}},function(module,__webpack_exports__,__webpack_require__){"use strict";function getIndexPatternFromFilter(filter,indexPatterns){return indexPatterns.find(indexPattern=>indexPattern.id===filter.meta.index)}__webpack_require__.d(__webpack_exports__,"a",(function(){return getIndexPatternFromFilter}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _filter_manager__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(124);__webpack_require__.d(__webpack_exports__,"dedupFilters",(function(){return _filter_manager__WEBPACK_IMPORTED_MODULE_0__.d})),__webpack_require__.d(__webpack_exports__,"uniqFilters",(function(){return _filter_manager__WEBPACK_IMPORTED_MODULE_0__.e})),__webpack_require__.d(__webpack_exports__,"compareFilters",(function(){return _filter_manager__WEBPACK_IMPORTED_MODULE_0__.c})),__webpack_require__.d(__webpack_exports__,"COMPARE_ALL_OPTIONS",(function(){return _filter_manager__WEBPACK_IMPORTED_MODULE_0__.a})),__webpack_require__.d(__webpack_exports__,"FilterCompareOptions",(function(){return _filter_manager__WEBPACK_IMPORTED_MODULE_0__.b}));var _timefilter__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(125);__webpack_require__.d(__webpack_exports__,"calculateBounds",(function(){return _timefilter__WEBPACK_IMPORTED_MODULE_1__.a})),__webpack_require__.d(__webpack_exports__,"getAbsoluteTimeRange",(function(){return _timefilter__WEBPACK_IMPORTED_MODULE_1__.b})),__webpack_require__.d(__webpack_exports__,"getTime",(function(){return _timefilter__WEBPACK_IMPORTED_MODULE_1__.c})),__webpack_require__.d(__webpack_exports__,"isTimeRange",(function(){return _timefilter__WEBPACK_IMPORTED_MODULE_1__.d}));var _types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(74);for(var __WEBPACK_IMPORT_KEY__ in _types__WEBPACK_IMPORTED_MODULE_2__)["default","dedupFilters","uniqFilters","compareFilters","COMPARE_ALL_OPTIONS","FilterCompareOptions","calculateBounds","getAbsoluteTimeRange","getTime","isTimeRange"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _types__WEBPACK_IMPORTED_MODULE_2__[key]}))}(__WEBPACK_IMPORT_KEY__);var _is_query__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(112);__webpack_require__.d(__webpack_exports__,"isQuery",(function(){return _is_query__WEBPACK_IMPORTED_MODULE_3__.a}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AggParamType}));var _agg_config__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(31),_base__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(27);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class AggParamType extends _base__WEBPACK_IMPORTED_MODULE_1__.a{constructor(config){super(config),_defineProperty(this,"makeAgg",void 0),_defineProperty(this,"allowedAggs",[]),config.allowedAggs&&(this.allowedAggs=config.allowedAggs),config.write||(this.write=(aggConfig,output)=>{aggConfig.params[this.name]&&aggConfig.params[this.name].length&&(output.params[this.name]=aggConfig.params[this.name])}),config.serialize||(this.serialize=agg=>agg.serialize()),config.deserialize||(this.deserialize=(state,agg)=>{if(!agg)throw new Error("aggConfig was not provided to AggParamType deserialize function");return this.makeAgg(agg,state)}),config.toExpressionAst||(this.toExpressionAst=agg=>{if(!agg||!agg.toExpressionAst)throw new Error("aggConfig was not provided to AggParamType toExpressionAst function");return agg.toExpressionAst()}),this.makeAgg=config.makeAgg,this.valueType=_agg_config__WEBPACK_IMPORTED_MODULE_0__.a}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return FieldParamType}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_plugins_kibana_utils_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(20),_base__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(27),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(21),_kbn_field_types_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4),_index_patterns_fields__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(44);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const filterByType=Object(_utils__WEBPACK_IMPORTED_MODULE_3__.n)("type");class FieldParamType extends _base__WEBPACK_IMPORTED_MODULE_2__.a{constructor(config){super(config),_defineProperty(this,"required",!0),_defineProperty(this,"scriptable",!0),_defineProperty(this,"filterFieldTypes",void 0),_defineProperty(this,"onlyAggregatable",void 0),_defineProperty(this,"getAvailableFields",aggConfig=>aggConfig.getIndexPattern().fields.filter(field=>{const{onlyAggregatable:onlyAggregatable,scriptable:scriptable,filterFieldTypes:filterFieldTypes}=this;return!(onlyAggregatable&&(!field.aggregatable||Object(_index_patterns_fields__WEBPACK_IMPORTED_MODULE_5__.isNestedField)(field))||!scriptable&&field.scripted)&&0!==filterByType([field],filterFieldTypes).length})),this.filterFieldTypes=config.filterFieldTypes||"*",this.onlyAggregatable=!1!==config.onlyAggregatable,config.write||(this.write=(aggConfig,output)=>{const field=aggConfig.getField();if(!field)throw new TypeError(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.aggs.paramTypes.field.requiredFieldParameterErrorMessage",{defaultMessage:"{fieldParameter} is a required parameter",values:{fieldParameter:'"field"'}}));if(field.type===_kbn_field_types_types__WEBPACK_IMPORTED_MODULE_4__.b.MISSING)throw new _plugins_kibana_utils_common__WEBPACK_IMPORTED_MODULE_1__.SavedFieldNotFound(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.aggs.paramTypes.field.notFoundSavedFieldParameterErrorMessage",{defaultMessage:'The field "{fieldParameter}" associated with this object no longer exists in the index pattern. Please use another field.',values:{fieldParameter:field.name}}));const validField=this.getAvailableFields(aggConfig).find(f=>f.name===field.name);var _aggConfig$type;if(!validField)throw new _plugins_kibana_utils_common__WEBPACK_IMPORTED_MODULE_1__.SavedFieldTypeInvalidForAgg(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.aggs.paramTypes.field.invalidSavedFieldParameterErrorMessage",{defaultMessage:'Saved field "{fieldParameter}" of index pattern "{indexPatternTitle}" is invalid for use with the "{aggType}" aggregation. Please select a new field.',values:{fieldParameter:field.name,aggType:null==aggConfig||null===(_aggConfig$type=aggConfig.type)||void 0===_aggConfig$type?void 0:_aggConfig$type.title,indexPatternTitle:aggConfig.getIndexPattern().title}}));validField.scripted?output.params.script={source:validField.script,lang:validField.lang}:output.params.field=validField.name}),this.serialize=field=>field.name,this.deserialize=(fieldName,aggConfig)=>{if(!aggConfig)throw new Error("aggConfig was not provided to FieldParamType deserialize function");const field=aggConfig.getIndexPattern().fields.getByName(fieldName);return field||new _index_patterns_fields__WEBPACK_IMPORTED_MODULE_5__.IndexPatternField({type:_kbn_field_types_types__WEBPACK_IMPORTED_MODULE_4__.b.MISSING,name:fieldName,searchable:!1,aggregatable:!1})}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return StringParamType}));var _base__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(27);class StringParamType extends _base__WEBPACK_IMPORTED_MODULE_0__.a{constructor(config){super(config),config.write||(this.write=(aggConfig,output)=>{aggConfig.params[this.name]&&aggConfig.params[this.name].length&&(output.params[this.name]=aggConfig.params[this.name])})}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return JsonParamType}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__),_base__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(27);class JsonParamType extends _base__WEBPACK_IMPORTED_MODULE_1__.a{constructor(config){super(config),this.name=config.name||"json",config.write||(this.write=(aggConfig,output)=>{let paramJson;const param=aggConfig.params[this.name];if(param){try{paramJson=JSON.parse(param)}catch(err){return}output.params=function(srcA,srcB){function compare(a,b){return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isPlainObject(a)&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isPlainObject(b)?function(a,b){return lodash__WEBPACK_IMPORTED_MODULE_0___default()(a).keys().union(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.keys(b)).transform((function(dest,key){const val=compare(a[key],b[key]);void 0!==val&&(dest[key]=val)}),{}).value()}(a,b):Array.isArray(a)&&Array.isArray(b)?function(a,b){return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.times(Math.max(a.length,b.length),(function(i){return compare(a[i],b[i])}))}(a,b):null!==b?void 0!==b?b:a:void 0}return compare(srcA,srcB)}(output.params,paramJson)}})}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getEsdslFn}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_inspector_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(132),_es_query_es_query__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(70);const getEsdslFn=({getStartDependencies:getStartDependencies})=>({name:"esdsl",type:"es_raw_response",inputTypes:["kibana_context","null"],help:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.esdsl.help",{defaultMessage:"Run Elasticsearch request"}),args:{dsl:{types:["string"],aliases:["_","q","query"],help:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.esdsl.q.help",{defaultMessage:"Query DSL"}),required:!0},index:{types:["string"],help:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.esdsl.index.help",{defaultMessage:"ElasticSearch index to query"}),required:!0},size:{types:["number"],help:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.esdsl.size.help",{defaultMessage:"ElasticSearch searchAPI size parameter"}),default:10}},async fn(input,args,{inspectorAdapters:inspectorAdapters,abortSignal:abortSignal,getKibanaRequest:getKibanaRequest}){const{search:search,uiSettingsClient:uiSettingsClient}=await getStartDependencies(getKibanaRequest),dsl=JSON.parse(args.dsl);if(input){const esQueryConfigs=Object(_es_query_es_query__WEBPACK_IMPORTED_MODULE_2__.e)(uiSettingsClient),query=Object(_es_query_es_query__WEBPACK_IMPORTED_MODULE_2__.b)(void 0,input.query||[],input.filters||[],esQueryConfigs);dsl.query&&query.bool.must.push(dsl.query),dsl.query=query}inspectorAdapters.requests||(inspectorAdapters.requests=new _inspector_common__WEBPACK_IMPORTED_MODULE_1__.RequestAdapter);const request=inspectorAdapters.requests.start(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.dataRequest.title",{defaultMessage:"Data"}),{description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.es_search.dataRequest.description",{defaultMessage:"This request queries Elasticsearch to fetch the data for the visualization."})});request.stats({indexPattern:{label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.es_search.indexPatternLabel",{defaultMessage:"Index pattern"}),value:args.index,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.es_search.indexPatternDescription",{defaultMessage:"The index pattern that connected to the Elasticsearch indices."})}});try{const{rawResponse:rawResponse}=await search({params:{index:args.index,size:args.size,body:dsl}},{abortSignal:abortSignal}).toPromise(),stats={};return null!=rawResponse&&rawResponse.took&&(stats.queryTime={label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.es_search.queryTimeLabel",{defaultMessage:"Query time"}),value:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.es_search.queryTimeValue",{defaultMessage:"{queryTime}ms",values:{queryTime:rawResponse.took}}),description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.es_search.queryTimeDescription",{defaultMessage:"The time it took to process the query. Does not include the time to send the request or parse it in the browser."})}),null!=rawResponse&&rawResponse.hits&&(stats.hitsTotal={label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.es_search.hitsTotalLabel",{defaultMessage:"Hits (total)"}),value:""+rawResponse.hits.total,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.es_search.hitsTotalDescription",{defaultMessage:"The number of documents that match the query."})},stats.hits={label:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.es_search.hitsLabel",{defaultMessage:"Hits"}),value:""+rawResponse.hits.hits.length,description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.search.es_search.hitsDescription",{defaultMessage:"The number of documents returned by the query."})}),request.stats(stats).ok({json:rawResponse}),request.json(dsl),{type:"es_raw_response",body:rawResponse}}catch(e){throw request.error({json:e}),e}}})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _fetch_soon__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(127);__webpack_require__.d(__webpack_exports__,"fetchSoon",(function(){return _fetch_soon__WEBPACK_IMPORTED_MODULE_0__.a}));var _types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(115);for(var __WEBPACK_IMPORT_KEY__ in _types__WEBPACK_IMPORTED_MODULE_1__)["default","fetchSoon"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _types__WEBPACK_IMPORTED_MODULE_1__[key]}))}(__WEBPACK_IMPORT_KEY__)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return extractReferences}));const extractReferences=state=>{let searchSourceFields={...state};const references=[];if(searchSourceFields.index){const indexId=searchSourceFields.index.id||searchSourceFields.index,refName="kibanaSavedObjectMeta.searchSourceJSON.index";references.push({name:refName,type:"index-pattern",id:indexId}),searchSourceFields={...searchSourceFields,indexRefName:refName,index:void 0}}return searchSourceFields.filter&&(searchSourceFields={...searchSourceFields,filter:searchSourceFields.filter.map((filterRow,i)=>{if(!filterRow.meta||!filterRow.meta.index)return filterRow;const refName=`kibanaSavedObjectMeta.searchSourceJSON.filter[${i}].meta.index`;return references.push({name:refName,type:"index-pattern",id:filterRow.meta.index}),{...filterRow,meta:{...filterRow.meta,indexRefName:refName,index:void 0}}})}),[searchSourceFields,references]}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return createSearchBar}));var external_kbnSharedDeps_Lodash_=__webpack_require__(2),external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_),external_kbnSharedDeps_React_=__webpack_require__(3),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),public_=__webpack_require__(25),search_bar=__webpack_require__(52),external_kbnSharedDeps_Rxjs_=__webpack_require__(9);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);const populateStateFromSavedQuery=(queryService,savedQuery)=>{const{timefilter:{timefilter:timefilter},filterManager:filterManager,queryString:queryString}=queryService;savedQuery.attributes.timefilter&&(timefilter.setTime({from:savedQuery.attributes.timefilter.from,to:savedQuery.attributes.timefilter.to}),savedQuery.attributes.timefilter.refreshInterval&&timefilter.setRefreshInterval(savedQuery.attributes.timefilter.refreshInterval)),queryString.setQuery(savedQuery.attributes.query);const savedQueryFilters=savedQuery.attributes.filters||[],globalFilters=filterManager.getGlobalFilters();filterManager.setFilters([...globalFilters,...savedQueryFilters])},clearStateFromSavedQuery=queryService=>{queryService.filterManager.removeAll(),queryService.queryString.clearQuery()};function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const defaultOnRefreshChange=queryService=>{const{timefilter:timefilter}=queryService.timefilter;return options=>{timefilter.setRefreshInterval({value:options.refreshInterval,pause:options.isPaused})}},defaultOnQuerySubmit=(props,queryService,currentQuery)=>{if(!props.useDefaultBehaviors)return props.onQuerySubmit;const{timefilter:timefilter}=queryService.timefilter;return payload=>{!external_kbnSharedDeps_Lodash_default.a.isEqual(timefilter.getTime(),payload.dateRange)||!external_kbnSharedDeps_Lodash_default.a.isEqual(payload.query,currentQuery)?(timefilter.setTime(payload.dateRange),payload.query?queryService.queryString.setQuery(payload.query):queryService.queryString.clearQuery()):props.onQuerySubmit&&props.onQuerySubmit({dateRange:timefilter.getTime(),query:currentQuery},!1)}},defaultOnClearSavedQuery=(props,clearSavedQuery)=>props.useDefaultBehaviors?()=>{clearSavedQuery(),props.onSavedQueryIdChange&&props.onSavedQueryIdChange()}:props.onClearSavedQuery,defaultOnSavedQueryUpdated=(props,setSavedQuery)=>props.useDefaultBehaviors?savedQuery=>{setSavedQuery(savedQuery),props.onSavedQueryIdChange&&props.onSavedQueryIdChange(savedQuery.id)}:props.onSavedQueryUpdated;function createSearchBar({core:core,storage:storage,data:data,usageCollection:usageCollection}){return props=>{const{useDefaultBehaviors:useDefaultBehaviors}=props,onQuerySubmitRef=Object(external_kbnSharedDeps_React_.useRef)(props.onQuerySubmit),{filters:filters}=(props=>{const[filters,setFilters]=Object(external_kbnSharedDeps_React_.useState)(props.filters||props.filterManager.getFilters());return Object(external_kbnSharedDeps_React_.useEffect)(()=>{const subscriptions=new external_kbnSharedDeps_Rxjs_.Subscription;return subscriptions.add(props.filterManager.getUpdates$().subscribe({next:()=>{const newFilters=props.filterManager.getFilters();setFilters(newFilters)}})),()=>{subscriptions.unsubscribe()}},[props.filterManager]),{filters:filters}})({filters:props.filters,filterManager:data.query.filterManager}),{query:query}=(props=>{const[query,setQuery]=Object(external_kbnSharedDeps_React_.useState)(props.query||props.queryStringManager.getQuery());return Object(external_kbnSharedDeps_React_.useEffect)(()=>{const subscriptions=new external_kbnSharedDeps_Rxjs_.Subscription;return subscriptions.add(props.queryStringManager.getUpdates$().subscribe({next:()=>{const newQuery=props.queryStringManager.getQuery();setQuery(newQuery)}})),()=>{subscriptions.unsubscribe()}},[props.queryStringManager]),{query:query}})({query:props.query,queryStringManager:data.query.queryString}),{timeRange:timeRange,refreshInterval:refreshInterval}=(props=>{const initialTimeRange={from:props.dateRangeFrom||props.timefilter.getTime().from,to:props.dateRangeTo||props.timefilter.getTime().to},initialRefreshInterval={value:props.refreshInterval||props.timefilter.getRefreshInterval().value,pause:props.isRefreshPaused||props.timefilter.getRefreshInterval().pause},[timeRange,setTimerange]=Object(external_kbnSharedDeps_React_.useState)(initialTimeRange),[refreshInterval,setRefreshInterval]=Object(external_kbnSharedDeps_React_.useState)(initialRefreshInterval);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{const subscriptions=new external_kbnSharedDeps_Rxjs_.Subscription;return subscriptions.add(props.timefilter.getRefreshIntervalUpdate$().subscribe({next:()=>{const newRefreshInterval=props.timefilter.getRefreshInterval();setRefreshInterval(newRefreshInterval)}})),subscriptions.add(props.timefilter.getTimeUpdate$().subscribe({next:()=>{setTimerange(props.timefilter.getTime())}})),()=>{subscriptions.unsubscribe()}},[props.timefilter]),{refreshInterval:refreshInterval,timeRange:timeRange}})({dateRangeFrom:props.dateRangeFrom,dateRangeTo:props.dateRangeTo,refreshInterval:props.refreshInterval,isRefreshPaused:props.isRefreshPaused,timefilter:data.query.timefilter.timefilter}),{savedQuery:savedQuery,setSavedQuery:setSavedQuery,clearSavedQuery:clearSavedQuery}=(props=>{const[savedQuery,setSavedQuery]=Object(external_kbnSharedDeps_React_.useState)();return Object(external_kbnSharedDeps_React_.useEffect)(()=>{props.savedQueryId?(async savedQueryId=>{try{const newSavedQuery=await props.queryService.savedQueries.getSavedQuery(savedQueryId);newSavedQuery&&newSavedQuery.id===savedQueryId&&(setSavedQuery(newSavedQuery),populateStateFromSavedQuery(props.queryService,newSavedQuery))}catch(error){setSavedQuery(void 0),clearStateFromSavedQuery(props.queryService),props.notifications.toasts.addWarning({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.search.unableToGetSavedQueryToastTitle",{defaultMessage:"Unable to load saved query {savedQueryId}",values:{savedQueryId:savedQueryId}}),text:""+error.message})}})(props.savedQueryId):setSavedQuery(void 0)},[props.notifications.toasts,props.queryService,props.queryService.savedQueries,props.savedQueryId]),{savedQuery:savedQuery,setSavedQuery:q=>{setSavedQuery(q),populateStateFromSavedQuery(props.queryService,q)},clearSavedQuery:()=>{setSavedQuery(void 0),clearStateFromSavedQuery(props.queryService)}}})({queryService:data.query,savedQueryId:props.savedQueryId,notifications:core.notifications});return Object(external_kbnSharedDeps_React_.useEffect)(()=>{useDefaultBehaviors&&onQuerySubmitRef.current&&onQuerySubmitRef.current({dateRange:timeRange,query:query},!0)},[query,timeRange,useDefaultBehaviors]),external_kbnSharedDeps_React_default.a.createElement(public_.KibanaContextProvider,{services:{appName:props.appName,data:data,storage:storage,usageCollection:usageCollection,...core}},external_kbnSharedDeps_React_default.a.createElement(search_bar.a,_extends({showAutoRefreshOnly:props.showAutoRefreshOnly,showDatePicker:props.showDatePicker,showFilterBar:props.showFilterBar,showQueryBar:props.showQueryBar,showQueryInput:props.showQueryInput,showSaveQuery:props.showSaveQuery,screenTitle:props.screenTitle,indexPatterns:props.indexPatterns,indicateNoData:props.indicateNoData,timeHistory:data.query.timefilter.history,dateRangeFrom:timeRange.from,dateRangeTo:timeRange.to,refreshInterval:refreshInterval.value,isRefreshPaused:refreshInterval.pause,filters:filters,query:query,onFiltersUpdated:(queryService=data.query,filters=>{queryService.filterManager.setFilters(filters)}),onRefreshChange:defaultOnRefreshChange(data.query),savedQuery:savedQuery,onQuerySubmit:defaultOnQuerySubmit(props,data.query,query),onClearSavedQuery:defaultOnClearSavedQuery(props,clearSavedQuery),onSavedQueryUpdated:defaultOnSavedQueryUpdated(props,setSavedQuery),onSaved:defaultOnSavedQueryUpdated(props,setSavedQuery),iconType:props.iconType,nonKqlMode:props.nonKqlMode,nonKqlModeHelpText:props.nonKqlModeHelpText,customSubmitButton:props.customSubmitButton,isClearable:props.isClearable,placeholder:props.placeholder},(props=>props.useDefaultBehaviors?{}:props)(props))));var queryService}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return tabifyDocs})),__webpack_require__.d(__webpack_exports__,"a",(function(){return tabifyAggResponse})),__webpack_require__.d(__webpack_exports__,"c",(function(){return tabifyGetColumns}));var external_kbnSharedDeps_Lodash_=__webpack_require__(2);const tabifyDocs=(esResponse,index,params={})=>{const columns=[],rows=esResponse.hits.hits.map(hit=>{const flat=function(hit,indexPattern,params){const flat={};function flatten(obj,keyPrefix=""){for(const[k,val]of Object.entries(obj)){const key=keyPrefix+k,field=null==indexPattern?void 0:indexPattern.fields.getByName(key);if(!1===(null==params?void 0:params.shallow)){const isNestedField="nested"===(null==field?void 0:field.type);if(Array.isArray(val)&&!isNestedField){val.forEach(v=>Object(external_kbnSharedDeps_Lodash_.isPlainObject)(v)&&flatten(v,key+"."));continue}}else if(void 0!==flat[key])continue;const hasValidMapping="conflict"!==(null==field?void 0:field.type),isValue=!Object(external_kbnSharedDeps_Lodash_.isPlainObject)(val);hasValidMapping||isValue?flat[key]?Array.isArray(flat[key])?flat[key].push(val):flat[key]=[flat[key],val]:flat[key]=val:flatten(val,key+".")}}if(flatten(hit.fields),!1!==(null==params?void 0:params.source)&&hit._source&&flatten(hit._source),!1!==(null==params?void 0:params.meta)){const{_id:_id,_index:_index,_type:_type,_score:_score}=hit;flatten({_id:_id,_index:_index,_score:_score,_type:_type})}return flat}(hit,index,params);for(const[key,value]of Object.entries(flat)){const field=null==index?void 0:index.fields.getByName(key),fieldName=(null==field?void 0:field.name)||key;if(!columns.find(c=>c.id===fieldName)){const fieldType=(null==field?void 0:field.type)||typeof value,formatter=field&&(null==index?void 0:index.getFormatterForField(field));columns.push({id:fieldName,name:fieldName,meta:{type:fieldType,field:fieldName,index:null==index?void 0:index.id,params:formatter?formatter.toJSON():void 0}})}}return flat}).filter(hit=>hit);return{type:"datatable",columns:columns,rows:rows}},getColumn=(agg,i)=>{let name="";try{name=agg.makeLabel()}catch(e){}return{aggConfig:agg,id:`col-${i}-${agg.id}`,name:name}};function tabifyGetColumns(aggs,minimalColumns){if(minimalColumns)return aggs.map((agg,i)=>getColumn(agg,i));const columns=[],grouped=Object(external_kbnSharedDeps_Lodash_.groupBy)(aggs,agg=>agg.type.type);if(!grouped.buckets)return grouped.metrics.map((agg,i)=>getColumn(agg,i));let columnIndex=0;return grouped.buckets.forEach(agg=>{columns.push(getColumn(agg,columnIndex++)),grouped.metrics.forEach(metric=>{columns.push(getColumn(metric,columnIndex++))})}),columns}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class response_writer_TabbedAggResponseWriter{constructor(aggs,params){_defineProperty(this,"columns",void 0),_defineProperty(this,"rows",[]),_defineProperty(this,"bucketBuffer",[]),_defineProperty(this,"metricBuffer",[]),_defineProperty(this,"partialRows",void 0),_defineProperty(this,"params",void 0),this.partialRows=params.partialRows||!1,this.params=params,this.columns=tabifyGetColumns(aggs.getResponseAggs(),!params.metricsAtAllLevels),this.rows=[]}row(){const rowBuffer={};this.bucketBuffer.forEach(bucket=>{rowBuffer[bucket.id]=bucket.value}),this.metricBuffer.forEach(metric=>{rowBuffer[metric.id]=metric.value});const removePartial=!this.columns.every(column=>rowBuffer.hasOwnProperty(column.id))&&!this.partialRows;Object(external_kbnSharedDeps_Lodash_.isEmpty)(rowBuffer)||removePartial||this.rows.push(rowBuffer)}response(){return{type:"datatable",columns:this.columns.map(column=>{var _column$aggConfig$par,_column$aggConfig$par2,_column$aggConfig$get,_column$aggConfig$get2,_column$aggConfig$par3,_column$aggConfig$par4,_this$params$timeRang,_this$params$timeRang2,_this$params$timeRang3,_this$params$timeRang4;return{id:column.id,name:column.name,meta:{type:column.aggConfig.type.valueType||(null===(_column$aggConfig$par=column.aggConfig.params.field)||void 0===_column$aggConfig$par?void 0:_column$aggConfig$par.type)||"number",field:null===(_column$aggConfig$par2=column.aggConfig.params.field)||void 0===_column$aggConfig$par2?void 0:_column$aggConfig$par2.name,index:null===(_column$aggConfig$get=column.aggConfig.getIndexPattern())||void 0===_column$aggConfig$get?void 0:_column$aggConfig$get.title,params:column.aggConfig.toSerializedFieldFormat(),source:"esaggs",sourceParams:{indexPatternId:null===(_column$aggConfig$get2=column.aggConfig.getIndexPattern())||void 0===_column$aggConfig$get2?void 0:_column$aggConfig$get2.id,appliedTimeRange:null!==(_column$aggConfig$par3=column.aggConfig.params.field)&&void 0!==_column$aggConfig$par3&&_column$aggConfig$par3.name&&this.params.timeRange&&this.params.timeRange.timeFields&&this.params.timeRange.timeFields.includes(null===(_column$aggConfig$par4=column.aggConfig.params.field)||void 0===_column$aggConfig$par4?void 0:_column$aggConfig$par4.name)?{from:null===(_this$params$timeRang=this.params.timeRange)||void 0===_this$params$timeRang||null===(_this$params$timeRang2=_this$params$timeRang.from)||void 0===_this$params$timeRang2?void 0:_this$params$timeRang2.toISOString(),to:null===(_this$params$timeRang3=this.params.timeRange)||void 0===_this$params$timeRang3||null===(_this$params$timeRang4=_this$params$timeRang3.to)||void 0===_this$params$timeRang4?void 0:_this$params$timeRang4.toISOString()}:void 0,...column.aggConfig.serialize()}}}}),rows:this.rows}}}var external_kbnSharedDeps_Moment_=__webpack_require__(5),external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);function buckets_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const isRangeEqual=(range1,range2)=>(null==range1?void 0:range1.from)===(null==range2?void 0:range2.from)&&(null==range1?void 0:range1.to)===(null==range2?void 0:range2.to);class buckets_TabifyBuckets{constructor(aggResp,aggParams,timeRange){buckets_defineProperty(this,"length",void 0),buckets_defineProperty(this,"objectMode",void 0),buckets_defineProperty(this,"buckets",void 0),buckets_defineProperty(this,"_keys",[]),aggResp&&aggResp.buckets?this.buckets=aggResp.buckets:this.buckets=aggResp?[aggResp]:[],this.objectMode=Object(external_kbnSharedDeps_Lodash_.isPlainObject)(this.buckets),this.objectMode?(this._keys=Object(external_kbnSharedDeps_Lodash_.keys)(this.buckets),this.length=this._keys.length):this.length=this.buckets.length,this.length&&aggParams&&(this.orderBucketsAccordingToParams(aggParams),aggParams.drop_partials&&this.dropPartials(aggParams,timeRange))}forEach(fn){const buckets=this.buckets;this.objectMode?this._keys.forEach(key=>{fn(buckets[key],key)}):buckets.forEach(bucket=>{fn(bucket,bucket.key)})}orderBucketsAccordingToParams(params){if(params.filters&&this.objectMode)this._keys=params.filters.map(filter=>{const query=Object(external_kbnSharedDeps_Lodash_.get)(filter,"input.query.query_string.query",filter.input.query),queryString="string"==typeof query?query:JSON.stringify(query);return filter.label||queryString||"*"});else if(params.ranges&&this.objectMode)this._keys=params.ranges.map(range=>Object(external_kbnSharedDeps_Lodash_.findKey)(this.buckets,el=>isRangeEqual(el,range)));else if(params.ranges&&"date"!==params.field.type){let ranges=params.ranges;params.ipRangeType&&(ranges="mask"===params.ipRangeType?ranges.mask:ranges.fromTo),this.buckets=ranges.map(range=>range.mask?this.buckets.find(el=>el.key===range.mask):this.buckets.find(el=>isRangeEqual(el,range)))}}dropPartials(params,timeRange){if(!timeRange||this.buckets.length<=1||this.objectMode||!timeRange.timeFields.includes(params.field.name))return;const interval=this.buckets[1].key-this.buckets[0].key;this.buckets=this.buckets.filter(bucket=>!external_kbnSharedDeps_Moment_default()(bucket.key).isBefore(timeRange.from)&&!external_kbnSharedDeps_Moment_default()(bucket.key+interval).isAfter(timeRange.to)),this.length=this.buckets.length}}var search_aggs=__webpack_require__(30);function tabifyAggResponse(aggConfigs,esResponse,respOpts){var _esResponse$hits;function collectBucket(aggs,write,bucket,key,aggScale){const column=write.columns.shift();if(column){const agg=column.aggConfig,aggInfo=agg.write(aggs);switch(aggScale*=aggInfo.metricScale||1,agg.type.type){case search_aggs.e.Buckets:const aggBucket=Object(external_kbnSharedDeps_Lodash_.get)(bucket,agg.id),tabifyBuckets=new buckets_TabifyBuckets(aggBucket,agg.params,null==respOpts?void 0:respOpts.timeRange);tabifyBuckets.length?tabifyBuckets.forEach((subBucket,tabifyBucketKey)=>{const bucketValue=agg.getKey(subBucket,tabifyBucketKey),hasBucketValue=void 0!==bucketValue;hasBucketValue&&write.bucketBuffer.push({id:column.id,value:bucketValue}),collectBucket(aggs,write,subBucket,agg.getKey(subBucket,tabifyBucketKey),aggScale),hasBucketValue&&write.bucketBuffer.pop()}):null!=respOpts&&respOpts.partialRows?(write.columns.unshift(column),function passEmptyBuckets(aggs,write,bucket,key,aggScale){const column=write.columns.shift();if(column){switch(column.aggConfig.type.type){case search_aggs.e.Metrics:return write.columns.unshift(column),void collectBucket(aggs,write,bucket,key,aggScale);case search_aggs.e.Buckets:passEmptyBuckets(aggs,write,bucket,key,aggScale)}write.columns.unshift(column)}}(aggs,write,bucket,key,aggScale),write.columns.shift()):write.row();break;case search_aggs.e.Metrics:let value=agg.getValue(bucket);1!==aggScale&&(value*=aggScale),write.metricBuffer.push({id:column.id,value:value}),write.columns.length?collectBucket(aggs,write,bucket,key,aggScale):write.row(),write.metricBuffer.pop()}write.columns.unshift(column)}}const write=new response_writer_TabbedAggResponseWriter(aggConfigs,respOpts||{});return collectBucket(aggConfigs,write,{...esResponse.aggregations,doc_count:null===(_esResponse$hits=esResponse.hits)||void 0===_esResponse$hits?void 0:_esResponse$hits.total},"",1),write.response()}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getIndexPatternLoadMeta}));var external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);const getIndexPatternLoadMeta=()=>({name:"indexPatternLoad",type:"index_pattern",inputTypes:["null"],help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.functions.indexPatternLoad.help",{defaultMessage:"Loads an index pattern"}),args:{id:{types:["string"],required:!0,help:external_kbnSharedDeps_KbnI18n_.i18n.translate("data.functions.indexPatternLoad.id.help",{defaultMessage:"index pattern id to load"})}},extract(state){const references=[{name:"indexPatternLoad.id",type:"search",id:state.id[0]}];return{state:{...state,id:["indexPatternLoad.id"]},references:references}},inject(state,references){const reference=references.find(ref=>"indexPatternLoad.id"===ref.name);return reference&&(state.id[0]=reference.id),state}})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return IndexPatternSelect})),__webpack_require__.d(__webpack_exports__,"c",(function(){return createIndexPatternSelect}));var external_kbnSharedDeps_React_=__webpack_require__(3),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function createIndexPatternSelect(indexPatternService){return props=>external_kbnSharedDeps_React_default.a.createElement(IndexPatternSelect,_extends({},props,{indexPatternService:indexPatternService}))}const Fallback=()=>external_kbnSharedDeps_React_default.a.createElement("div",null),LazyIndexPatternSelect=external_kbnSharedDeps_React_default.a.lazy(()=>__webpack_require__.e(7).then(__webpack_require__.bind(null,172))),IndexPatternSelect=props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Suspense,{fallback:external_kbnSharedDeps_React_default.a.createElement(Fallback,null)},external_kbnSharedDeps_React_default.a.createElement(LazyIndexPatternSelect,props))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return searchSourceRequiredUiSettings})),__webpack_require__.d(__webpack_exports__,"a",(function(){return search_source_SearchSource}));var external_kbnSharedDeps_SaferLodashSet_=__webpack_require__(133),external_kbnSharedDeps_Lodash_=__webpack_require__(2),external_kbnSharedDeps_RxjsOperators_=__webpack_require__(6),external_kbnSharedDeps_Rxjs_=__webpack_require__(9);function normalizeSortRequest(sortObject,indexPattern,defaultSortOptions={}){return(Array.isArray(sortObject)?sortObject:[sortObject]).map((function(sortable){return function(sortable,indexPattern,defaultSortOptions){const[[sortField,sortOrder]]=Object.entries(sortable),order="object"==typeof sortOrder?sortOrder:{order:sortOrder};if(indexPattern&&"string"!=typeof indexPattern){const indexField=indexPattern.fields.find(({name:name})=>name===sortField);if(indexField&&indexField.scripted&&indexField.sortable)return{_script:{script:{source:indexField.script,lang:indexField.lang},type:castSortType(indexField.type),...order}}}"string"==typeof defaultSortOptions&&(defaultSortOptions=JSON.parse(defaultSortOptions));const{unmapped_type:unmapped_type,...otherSortOptions}=defaultSortOptions;return{[sortField]:{...order,..."_score"===sortField?otherSortOptions:defaultSortOptions}}}(sortable,indexPattern,defaultSortOptions)}))}function castSortType(type){if(["number"].includes(type))return"number";if(["string","boolean"].includes(type))return"string";throw new Error("Unsupported script sort type: "+type)}var common_=__webpack_require__(20),common=__webpack_require__(1),fetch=__webpack_require__(45),inspect=__webpack_require__(71),field_formats=__webpack_require__(13),search_source_legacy=__webpack_require__(85),extract_references=__webpack_require__(86);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const searchSourceRequiredUiSettings=["dateFormat:tz",common.UI_SETTINGS.COURIER_BATCH_SEARCHES,common.UI_SETTINGS.COURIER_CUSTOM_REQUEST_PREFERENCE,common.UI_SETTINGS.COURIER_IGNORE_FILTER_IF_FIELD_NOT_IN_INDEX,common.UI_SETTINGS.COURIER_MAX_CONCURRENT_SHARD_REQUESTS,common.UI_SETTINGS.COURIER_SET_REQUEST_PREFERENCE,common.UI_SETTINGS.DOC_HIGHLIGHT,common.UI_SETTINGS.META_FIELDS,common.UI_SETTINGS.QUERY_ALLOW_LEADING_WILDCARDS,common.UI_SETTINGS.QUERY_STRING_OPTIONS,common.UI_SETTINGS.SEARCH_INCLUDE_FROZEN,common.UI_SETTINGS.SORT_OPTIONS];class search_source_SearchSource{constructor(fields={},dependencies){_defineProperty(this,"id",Object(external_kbnSharedDeps_Lodash_.uniqueId)("data_source")),_defineProperty(this,"searchStrategyId",void 0),_defineProperty(this,"parent",void 0),_defineProperty(this,"requestStartHandlers",[]),_defineProperty(this,"inheritOptions",{}),_defineProperty(this,"history",[]),_defineProperty(this,"fields",void 0),_defineProperty(this,"dependencies",void 0),_defineProperty(this,"getFieldName",fld=>"string"==typeof fld?fld:fld.field);const{parent:parent,...currentFields}=fields;this.fields=currentFields,this.dependencies=dependencies,parent&&this.setParent(new search_source_SearchSource(parent,dependencies))}setPreferredSearchStrategyId(searchStrategyId){this.searchStrategyId=searchStrategyId}setField(field,value){return null==value?this.removeField(field):(this.fields[field]=value,this)}removeField(field){return delete this.fields[field],this}setFields(newFields){return this.fields=newFields,this}getId(){return this.id}getFields(){return{...this.fields}}getField(field,recurse=!0){if(!recurse||void 0!==this.fields[field])return this.fields[field];const parent=this.getParent();return parent&&parent.getField(field)}getOwnField(field){return this.getField(field,!1)}create(){return new search_source_SearchSource({},this.dependencies)}createCopy(){const newSearchSource=new search_source_SearchSource({},this.dependencies);return newSearchSource.setFields({...this.fields}),newSearchSource.setField("index",this.getField("index")),newSearchSource.setParent(this.getParent()),newSearchSource}createChild(options={}){const childSearchSource=new search_source_SearchSource({},this.dependencies);return childSearchSource.setParent(this,options),childSearchSource}setParent(parent,options={}){return this.parent=parent,this.inheritOptions=options,this}getParent(){return this.parent}fetch$(options={}){const{getConfig:getConfig}=this.dependencies,s$=Object(external_kbnSharedDeps_Rxjs_.defer)(()=>this.requestIsStarting(options)).pipe(Object(external_kbnSharedDeps_RxjsOperators_.switchMap)(()=>{const searchRequest=this.flatten();return this.history=[searchRequest],searchRequest.index&&(options.indexPattern=searchRequest.index),getConfig(common.UI_SETTINGS.COURIER_BATCH_SEARCHES)?Object(external_kbnSharedDeps_Rxjs_.from)(this.legacyFetch(searchRequest,options)):this.fetchSearch$(searchRequest,options)}),Object(external_kbnSharedDeps_RxjsOperators_.tap)(response=>{if(!response||response.error)throw new fetch.RequestFailure(null,response)}),Object(external_kbnSharedDeps_RxjsOperators_.shareReplay)());return this.inspectSearch(s$,options)}fetch(options={}){return this.fetch$(options).toPromise()}onRequestStart(handler){this.requestStartHandlers.push(handler)}getSearchRequestBody(){return this.flatten().body}destroy(){this.requestStartHandlers.length=0}inspectSearch(s$,options){const{id:id,title:title,description:description,adapter:adapter}=options.inspector||{title:""},requestResponder=null==adapter?void 0:adapter.start(title,{id:id,description:description,searchSessionId:options.sessionId}),trackRequestBody=()=>{try{null==requestResponder||requestResponder.json(this.getSearchRequestBody())}catch(e){}},first$=s$.pipe(Object(external_kbnSharedDeps_RxjsOperators_.first)(void 0,null),Object(external_kbnSharedDeps_RxjsOperators_.tap)(()=>{null==requestResponder||requestResponder.stats(Object(inspect.a)(this)),trackRequestBody()}),Object(external_kbnSharedDeps_RxjsOperators_.catchError)(()=>(trackRequestBody(),external_kbnSharedDeps_Rxjs_.EMPTY)),Object(external_kbnSharedDeps_RxjsOperators_.finalize)(()=>{first$.unsubscribe()})).subscribe(),last$=s$.pipe(Object(external_kbnSharedDeps_RxjsOperators_.catchError)(e=>(null==requestResponder||requestResponder.error({json:e}),external_kbnSharedDeps_Rxjs_.EMPTY)),Object(external_kbnSharedDeps_RxjsOperators_.last)(void 0,null),Object(external_kbnSharedDeps_RxjsOperators_.tap)(finalResponse=>{finalResponse&&(null==requestResponder||requestResponder.stats(Object(inspect.b)(finalResponse,this)),null==requestResponder||requestResponder.ok({json:finalResponse}))}),Object(external_kbnSharedDeps_RxjsOperators_.finalize)(()=>{last$.unsubscribe()})).subscribe();return s$}hasPostFlightRequests(){const aggs=this.getField("aggs");return aggs instanceof common.AggConfigs&&aggs.aggs.some(agg=>agg.enabled&&"function"==typeof agg.type.postFlightRequest)}async fetchOthers(response,options){const aggs=this.getField("aggs");if(aggs instanceof common.AggConfigs){for(const agg of aggs.aggs){var _options$inspector;if(agg.enabled&&"function"==typeof agg.type.postFlightRequest)response=await agg.type.postFlightRequest(response,aggs,agg,this,null===(_options$inspector=options.inspector)||void 0===_options$inspector?void 0:_options$inspector.adapter,options.abortSignal,options.sessionId)}return response}}fetchSearch$(searchRequest,options){const{search:search,getConfig:getConfig,onResponse:onResponse}=this.dependencies;return search({params:Object(fetch.getSearchParamsFromRequest)(searchRequest,{getConfig:getConfig}),indexType:searchRequest.indexType},options).pipe(Object(external_kbnSharedDeps_RxjsOperators_.switchMap)(response=>new external_kbnSharedDeps_Rxjs_.Observable(obs=>{if(Object(common.isErrorResponse)(response))obs.error(response);else if(Object(common.isPartialResponse)(response))obs.next(response);else if(this.hasPostFlightRequests()){obs.next({...response,isPartial:!0,isRunning:!0});const sub=Object(external_kbnSharedDeps_Rxjs_.from)(this.fetchOthers(response.rawResponse,options)).subscribe({next:responseWithOther=>{obs.next({...response,rawResponse:responseWithOther})},error:e=>{obs.error(e),sub.unsubscribe()},complete:()=>{obs.complete(),sub.unsubscribe()}})}else obs.next(response),obs.complete()})),Object(external_kbnSharedDeps_RxjsOperators_.map)(({rawResponse:rawResponse})=>onResponse(searchRequest,rawResponse)))}async legacyFetch(searchRequest,options){const{getConfig:getConfig,legacy:legacy,onResponse:onResponse}=this.dependencies;return await Object(search_source_legacy.fetchSoon)(searchRequest,{...this.searchStrategyId&&{searchStrategyId:this.searchStrategyId},...options},{getConfig:getConfig,onResponse:onResponse,legacy:legacy})}requestIsStarting(options={}){const handlers=[...this.requestStartHandlers];if(this.inheritOptions.callParentStartHandlers){let searchSource=this.getParent();for(;searchSource;)handlers.push(...searchSource.requestStartHandlers),searchSource=searchSource.getParent()}return Promise.all(handlers.map(fn=>fn(this,options)))}mergeProp(data,val,key){if(null==(val="function"==typeof val?val(this):val)||!key)return;const addToRoot=(rootKey,value)=>{data[rootKey]=value},addToBody=(bodyKey,value)=>{null==data.body[bodyKey]&&(data.body[bodyKey]=value)},{getConfig:getConfig}=this.dependencies;switch(key){case"filter":return addToRoot("filters",(data.filters||[]).concat(val));case"query":return addToRoot(key,(data[key]||[]).concat(val));case"fields":return addToBody("fields",val);case"fieldsFromSource":return addToRoot(key,[...new Set((data[key]||[]).concat(val))]);case"index":case"type":case"highlightAll":return key&&null==data[key]&&addToRoot(key,val);case"searchAfter":return addToBody("search_after",val);case"trackTotalHits":return addToBody("track_total_hits",val);case"source":return addToBody("_source",val);case"sort":return addToBody(key,normalizeSortRequest(val,this.getField("index"),getConfig(common.UI_SETTINGS.SORT_OPTIONS)));case"aggs":return val instanceof common.AggConfigs?addToBody("aggs",val.toDsl()):addToBody("aggs",val);default:return addToBody(key,val)}}mergeProps(root=this,searchRequest={body:{}}){return Object.entries(this.fields).forEach(([key,value])=>{this.mergeProp(searchRequest,value,key)}),this.parent&&this.parent.mergeProps(root,searchRequest),searchRequest}getIndexType(index){return this.searchStrategyId?"default"===this.searchStrategyId?void 0:this.searchStrategyId:null==index?void 0:index.type}getFieldsWithoutSourceFilters(index,bodyFields){var _sourceFilters$exclud;if(!index)return bodyFields;const{fields:fields}=index,sourceFilters=index.getSourceFiltering();if(!sourceFilters||0===(null===(_sourceFilters$exclud=sourceFilters.excludes)||void 0===_sourceFilters$exclud?void 0:_sourceFilters$exclud.length)||0===bodyFields.length)return bodyFields;const sourceFiltersValues=sourceFilters.excludes,wildcardField=bodyFields.find(el=>"*"===el||"*"===el.field),filter=Object(common_.fieldWildcardFilter)(sourceFiltersValues,this.dependencies.getConfig(common.UI_SETTINGS.META_FIELDS)),filterSourceFields=fieldName=>fieldName&&filter(fieldName);return wildcardField?fields.filter(fld=>filterSourceFields(fld.name)).map(fld=>({field:fld.name})):bodyFields.filter(fld=>filterSourceFields(this.getFieldName(fld)))}getFieldFromDocValueFieldsOrIndexPattern(docvaluesIndex,fld,index){if("string"==typeof fld)return fld;const fieldName=this.getFieldName(fld),field={...docvaluesIndex[fieldName],...fld};if(!index)return field;const{fields:fields}=index,dateField=fields.getByType("date").find(indexPatternField=>indexPatternField.name===fieldName);if(!dateField)return field;const{esTypes:esTypes}=dateField;return null!=esTypes&&esTypes.includes("date_nanos")?field.format="strict_date_optional_time_nanos":null!=esTypes&&esTypes.includes("date")&&(field.format="strict_date_optional_time"),field}flatten(){const{getConfig:getConfig}=this.dependencies,searchRequest=this.mergeProps();searchRequest.body=searchRequest.body||{};const{body:body,index:index,query:query,filters:filters,highlightAll:highlightAll}=searchRequest;searchRequest.indexType=this.getIndexType(index);const metaFields=getConfig(common.UI_SETTINGS.META_FIELDS),{docvalueFields:docvalueFields,scriptFields:scriptFields,storedFields:storedFields,runtimeFields:runtimeFields}=index?index.getComputedFields():{docvalueFields:[],scriptFields:{},storedFields:["*"],runtimeFields:{}},fieldListProvided=!!body.fields;let fieldsFromSource=searchRequest.fieldsFromSource||[];body.fields=body.fields||[],body.script_fields={...body.script_fields,...scriptFields},body.stored_fields=storedFields,body.runtime_mappings=runtimeFields||{};let filteredDocvalueFields=docvalueFields;if(index){const sourceFilters=index.getSourceFiltering();body.hasOwnProperty("_source")||(body._source=sourceFilters);const filter=Object(common_.fieldWildcardFilter)(body._source.excludes,metaFields);body.fields=body.fields.filter(fld=>filter(this.getFieldName(fld))),fieldsFromSource=fieldsFromSource.filter(fld=>filter(this.getFieldName(fld))),filteredDocvalueFields=filteredDocvalueFields.filter(fld=>filter(this.getFieldName(fld)))}if(fieldListProvided||fieldsFromSource.length){const bodyFieldNames=body.fields.map(field=>this.getFieldName(field)),uniqFieldNames=[...new Set([...bodyFieldNames,...fieldsFromSource])];uniqFieldNames.includes("*")||(body.script_fields=Object(external_kbnSharedDeps_Lodash_.pick)(body.script_fields,Object.keys(body.script_fields).filter(f=>uniqFieldNames.includes(f))),body.runtime_mappings=Object(external_kbnSharedDeps_Lodash_.pick)(body.runtime_mappings,Object.keys(body.runtime_mappings).filter(f=>uniqFieldNames.includes(f))));const remainingFields=Object(external_kbnSharedDeps_Lodash_.difference)(uniqFieldNames,[...Object.keys(body.script_fields),...Object.keys(body.runtime_mappings)]).filter(remainingField=>!!remainingField&&(!body._source||!body._source.excludes||!body._source.excludes.includes(remainingField)));if(body.stored_fields=[...new Set(remainingFields)],fieldsFromSource.length)Object(external_kbnSharedDeps_Lodash_.isEqual)(remainingFields,fieldsFromSource)||Object(external_kbnSharedDeps_SaferLodashSet_.setWith)(body,"_source.includes",remainingFields,nsValue=>Object(external_kbnSharedDeps_Lodash_.isObject)(nsValue)?{}:nsValue),body.fields=[...body.fields,...filteredDocvalueFields.filter(fld=>fieldsFromSource.includes(this.getFieldName(fld))&&!(body.docvalue_fields||[]).map(d=>this.getFieldName(d)).includes(this.getFieldName(fld)))],fieldListProvided||0!==body.fields.length||delete body.fields;else{body._source=!1;const docvaluesIndex=Object(external_kbnSharedDeps_Lodash_.keyBy)(filteredDocvalueFields,"field"),bodyFields=this.getFieldsWithoutSourceFilters(index,body.fields);body.fields=Object(external_kbnSharedDeps_Lodash_.uniqWith)(bodyFields.concat(filteredDocvalueFields),(fld1,fld2)=>this.getFieldName(fld1)===this.getFieldName(fld2)).filter(fld=>!metaFields.includes(this.getFieldName(fld))).map(fld=>{const fieldName=this.getFieldName(fld);return Object.keys(docvaluesIndex).includes(fieldName)?"string"==typeof fld?docvaluesIndex[fld]:this.getFieldFromDocValueFieldsOrIndexPattern(docvaluesIndex,fld,index):fld})}}else body.fields=filteredDocvalueFields;const esQueryConfigs=Object(common.getEsQueryConfig)({get:getConfig});return body.query=Object(common.buildEsQuery)(index,query,filters,esQueryConfigs),highlightAll&&body.query&&(body.highlight=Object(field_formats.D)(body.query,getConfig(common.UI_SETTINGS.DOC_HIGHLIGHT)),delete searchRequest.highlightAll),searchRequest}getSerializedFields(recurse=!1){const{filter:originalFilters,size:omit,...searchSourceFields}=this.getFields();let serializedSearchSourceFields={...searchSourceFields,index:searchSourceFields.index?searchSourceFields.index.id:void 0};if(originalFilters){const filters=this.getFilters(originalFilters);serializedSearchSourceFields={...serializedSearchSourceFields,filter:filters}}return recurse&&this.getParent()&&(serializedSearchSourceFields.parent=this.getParent().getSerializedFields(recurse)),serializedSearchSourceFields}serialize(){const[searchSourceFields,references]=Object(extract_references.a)(this.getSerializedFields());return{searchSourceJSON:JSON.stringify(searchSourceFields),references:references}}getFilters(filterField){return filterField?Array.isArray(filterField)?filterField:Object(external_kbnSharedDeps_Lodash_.isFunction)(filterField)?this.getFilters(filterField()):[filterField]:[]}}},function(module,exports){module.exports=__kbnSharedDeps__.ReactDomServer},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return time_buckets_TimeBuckets}));var external_kbnSharedDeps_Lodash_=__webpack_require__(2),external_kbnSharedDeps_Moment_=__webpack_require__(5),external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_),utils=__webpack_require__(21),calc_auto_interval=__webpack_require__(68),target=__webpack_require__(18);const unitsDesc=__webpack_require__.n(target).a.unitsDesc,largeMax=unitsDesc.indexOf("w");var _interval_options=__webpack_require__(22);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function isValidMoment(m){return m&&"isValid"in m&&m.isValid()}function isDurationInterval(i){return external_kbnSharedDeps_Moment_default.a.isDuration(i)&&Boolean(+i)}class time_buckets_TimeBuckets{constructor(timeBucketConfig){_defineProperty(this,"_timeBucketConfig",void 0),_defineProperty(this,"_lb",void 0),_defineProperty(this,"_ub",void 0),_defineProperty(this,"_originalInterval",null),_defineProperty(this,"_i",void 0),this._timeBucketConfig=timeBucketConfig}getDuration(){if(void 0===this._ub||void 0===this._lb||!this.hasBounds())return;const difference=this._ub.valueOf()-this._lb.valueOf();return external_kbnSharedDeps_Moment_default.a.duration(difference,"ms")}setBounds(input){if(!input)return this.clearBounds();let bounds;bounds=Object(external_kbnSharedDeps_Lodash_.isPlainObject)(input)&&!Array.isArray(input)?[input.min,input.max]:Array.isArray(input)?input:[];const moments=Object(external_kbnSharedDeps_Lodash_.sortBy)(bounds,Number);if(!(2===moments.length&&moments.every(isValidMoment)))throw this.clearBounds(),new Error("invalid bounds set: "+input);this._lb=moments.shift(),this._ub=moments.pop();const duration=this.getDuration();if(!duration||duration.asSeconds()<0)throw new TypeError("Intervals must be positive")}clearBounds(){this._lb=this._ub=void 0}hasBounds(){return isValidMoment(this._ub)&&isValidMoment(this._lb)}getBounds(){if(this.hasBounds())return{min:this._lb,max:this._ub}}setInterval(input){var o;if(this._originalInterval=null,this._i=(o=input,Object(external_kbnSharedDeps_Lodash_.isObject)(o)?input.val:input),this._i&&this._i!==_interval_options.a){if(Object(external_kbnSharedDeps_Lodash_.isString)(this._i)){const parsedInterval=Object(utils.m)(this._i);isDurationInterval(parsedInterval)&&(this._originalInterval=this._i,this._i=parsedInterval)}if(!isDurationInterval(this._i))throw new TypeError('"'+this._i+'" is not a valid interval.')}else this._i=_interval_options.a}getInterval(useNormalizedEsInterval=!0){const duration=this.getDuration(),parsedInterval=isDurationInterval(this._i)?this._i:Object(calc_auto_interval.c)(this._timeBucketConfig["histogram:barTarget"],Number(duration)),maybeScaleInterval=interval=>{if(!this.hasBounds()||!duration)return interval;const maxLength=this._timeBucketConfig["histogram:maxBars"],minInterval=Object(calc_auto_interval.b)(maxLength,Number(duration));let scaled;return interval<minInterval?(scaled=minInterval,interval=decorateInterval(interval),Object.assign(scaled,{preScaled:interval,scale:Number(interval)/Number(scaled),scaled:!0})):interval},decorateInterval=interval=>{let originalUnit;var _splitStringInterval;!interval.scaled&&this._originalInterval&&(originalUnit=null===(_splitStringInterval=Object(utils.o)(this._originalInterval))||void 0===_splitStringInterval?void 0:_splitStringInterval.unit);const esInterval=useNormalizedEsInterval||!this._originalInterval?function(duration,targetUnit){for(let i=0;i<unitsDesc.length;i++){const unit=unitsDesc[i],val=duration.as(unit);if(val>=1&&Math.floor(val)===val){if(1===val&&targetUnit&&unit!==targetUnit)continue;if(i<=largeMax&&1!==val)continue;return{value:val,unit:unit,expression:val+unit}}}const ms=duration.as("ms");return{value:ms,unit:"ms",expression:ms+"ms"}}(interval,originalUnit):function(interval){const{value:value,unit:unit}=Object(utils.l)(interval);return{value:value,unit:unit,expression:interval}}(this._originalInterval),prettyUnits=external_kbnSharedDeps_Moment_default.a.normalizeUnits(esInterval.unit);return Object.assign(interval,{description:1===esInterval.value?prettyUnits:esInterval.value+" "+prettyUnits+"s",esValue:esInterval.value,esUnit:esInterval.unit,expression:esInterval.expression})};return decorateInterval(useNormalizedEsInterval?maybeScaleInterval(parsedInterval):parsedInterval)}getScaledDateFormat(){const interval=this.getInterval(),rules=this._timeBucketConfig["dateFormat:scaled"];for(let i=rules.length-1;i>=0;i--){const rule=rules[i];if(!rule[0]||interval&&interval>=external_kbnSharedDeps_Moment_default.a.duration(rule[0]))return rule[1]}return this._timeBucketConfig.dateFormat}}},function(module,exports){module.exports=function(){"use strict";function peg$SyntaxError(message,expected,found,location){this.message=message,this.expected=expected,this.found=found,this.location=location,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}return function(child,parent){function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor}(peg$SyntaxError,Error),{SyntaxError:peg$SyntaxError,parse:function(input){var peg$result,options=arguments.length>1?arguments[1]:{},peg$FAILED={},peg$startRuleFunctions={start:peg$parsestart,Literal:peg$parseLiteral},peg$startRuleFunction=peg$parsestart,peg$c0=function(query,trailing){return"cursor"===trailing.type?{...trailing,suggestionTypes:["conjunction"]}:null!==query?query:nodeTypes.function.buildNode("is","*","*")},peg$c1=function(head,query){return query},peg$c2=function(head,tail){const nodes=[head,...tail],cursor=parseCursor&&nodes.find(node=>"cursor"===node.type);return cursor||buildFunctionNode("or",nodes)},peg$c3=function(head,tail){const nodes=[head,...tail],cursor=parseCursor&&nodes.find(node=>"cursor"===node.type);return cursor||buildFunctionNode("and",nodes)},peg$c4=function(query){return"cursor"===query.type?query:buildFunctionNode("not",[query])},peg$c5="(",peg$c6={type:"literal",value:"(",description:'"("'},peg$c7=")",peg$c8={type:"literal",value:")",description:'")"'},peg$c9=function(query,trailing){return"cursor"===trailing.type?{...trailing,suggestionTypes:["conjunction"]}:query},peg$c10=":",peg$c11={type:"literal",value:":",description:'":"'},peg$c12="{",peg$c13={type:"literal",value:"{",description:'"{"'},peg$c14="}",peg$c15={type:"literal",value:"}",description:'"}"'},peg$c16=function(field,query,trailing){return"cursor"===query.type?{...query,nestedPath:query.nestedPath?`${field.value}.${query.nestedPath}`:field.value}:"cursor"===trailing.type?{...trailing,suggestionTypes:["conjunction"]}:buildFunctionNode("nested",[field,query])},peg$c17={type:"other",description:"fieldName"},peg$c18=function(field,operator,value){if("cursor"===value.type)return{...value,suggestionTypes:["conjunction"]};const range=buildNamedArgNode(operator,value);return buildFunctionNode("range",[field,range])},peg$c19=function(field,partial){return"cursor"===partial.type?{...partial,fieldName:field.value,suggestionTypes:["value","conjunction"]}:partial(field)},peg$c20=function(partial){if("cursor"===partial.type){const fieldName=`${partial.prefix}${partial.suffix}`.trim();return{...partial,fieldName:fieldName,suggestionTypes:["field","operator","conjunction"]}}return partial(buildLiteralNode(null))},peg$c21=function(partial,trailing){return"cursor"===trailing.type?{...trailing,suggestionTypes:["conjunction"]}:partial},peg$c22=function(head,partial){return partial},peg$c23=function(head,tail){const nodes=[head,...tail],cursor=parseCursor&&nodes.find(node=>"cursor"===node.type);return cursor?{...cursor,suggestionTypes:["value"]}:field=>buildFunctionNode("or",nodes.map(partial=>partial(field)))},peg$c24=function(head,tail){const nodes=[head,...tail],cursor=parseCursor&&nodes.find(node=>"cursor"===node.type);return cursor?{...cursor,suggestionTypes:["value"]}:field=>buildFunctionNode("and",nodes.map(partial=>partial(field)))},peg$c25=function(partial){return"cursor"===partial.type?{...list,suggestionTypes:["value"]}:field=>buildFunctionNode("not",[partial(field)])},peg$c26={type:"other",description:"value"},peg$c27=function(value){if("cursor"===value.type)return value;const isPhrase=buildLiteralNode(!0);return field=>buildFunctionNode("is",[field,value,isPhrase])},peg$c28=function(value){if("cursor"===value.type)return value;!allowLeadingWildcards&&"wildcard"===value.type&&nodeTypes.wildcard.hasLeadingWildcard(value)&&error("Leading wildcards are disabled. See query:allowLeadingWildcards in Advanced Settings.");const isPhrase=buildLiteralNode(!1);return field=>buildFunctionNode("is",[field,value,isPhrase])},peg$c29={type:"other",description:"OR"},peg$c30="or",peg$c31={type:"literal",value:"or",description:'"or"'},peg$c32={type:"other",description:"AND"},peg$c33="and",peg$c34={type:"literal",value:"and",description:'"and"'},peg$c35={type:"other",description:"NOT"},peg$c36="not",peg$c37={type:"literal",value:"not",description:'"not"'},peg$c38={type:"other",description:"literal"},peg$c39=function(){return parseCursor},peg$c40='"',peg$c41={type:"literal",value:'"',description:'"\\""'},peg$c42=function(prefix,cursor,suffix){const{start:start,end:end}=location();return{type:"cursor",start:start.offset,end:end.offset-cursor.length,prefix:prefix.join(""),suffix:suffix.join(""),text:text().replace(cursor,"")}},peg$c43=function(chars){return buildLiteralNode(chars.join(""))},peg$c44="\\",peg$c45={type:"literal",value:"\\",description:'"\\\\"'},peg$c46=/^[\\"]/,peg$c47={type:"class",value:'[\\\\"]',description:'[\\\\"]'},peg$c48=function(char){return char},peg$c49=/^[^"]/,peg$c50={type:"class",value:'[^"]',description:'[^"]'},peg$c51=function(chars){const sequence=chars.join("").trim();return"null"===sequence?buildLiteralNode(null):"true"===sequence?buildLiteralNode(!0):"false"===sequence?buildLiteralNode(!1):chars.includes(wildcardSymbol)?buildWildcardNode(sequence):buildLiteralNode(sequence)},peg$c52={type:"any",description:"any character"},peg$c53="*",peg$c54={type:"literal",value:"*",description:'"*"'},peg$c55=function(){return wildcardSymbol},peg$c56="\\t",peg$c57={type:"literal",value:"\\t",description:'"\\\\t"'},peg$c58=function(){return"\t"},peg$c59="\\r",peg$c60={type:"literal",value:"\\r",description:'"\\\\r"'},peg$c61=function(){return"\r"},peg$c62="\\n",peg$c63={type:"literal",value:"\\n",description:'"\\\\n"'},peg$c64=function(){return"\n"},peg$c65=function(keyword){return keyword},peg$c66=/^[\\():<>"*{}]/,peg$c67={type:"class",value:'[\\\\():<>"*{}]',description:'[\\\\():<>"*{}]'},peg$c68=function(sequence){return sequence},peg$c69="u",peg$c70={type:"literal",value:"u",description:'"u"'},peg$c71=function(digits){return String.fromCharCode(parseInt(digits,16))},peg$c72=/^[0-9a-f]/i,peg$c73={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},peg$c74="<=",peg$c75={type:"literal",value:"<=",description:'"<="'},peg$c76=function(){return"lte"},peg$c77=">=",peg$c78={type:"literal",value:">=",description:'">="'},peg$c79=function(){return"gte"},peg$c80="<",peg$c81={type:"literal",value:"<",description:'"<"'},peg$c82=function(){return"lt"},peg$c83=">",peg$c84={type:"literal",value:">",description:'">"'},peg$c85=function(){return"gt"},peg$c86={type:"other",description:"whitespace"},peg$c87=/^[ \t\r\n\xA0]/,peg$c88={type:"class",value:"[\\ \\t\\r\\n\\u00A0]",description:"[\\ \\t\\r\\n\\u00A0]"},peg$c89="@kuery-cursor@",peg$c90={type:"literal",value:"@kuery-cursor@",description:'"@kuery-cursor@"'},peg$c91=function(){return cursorSymbol},peg$currPos=0,peg$savedPos=0,peg$posDetailsCache=[{line:1,column:1,seenCR:!1}],peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0,peg$resultsCache={};if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions))throw new Error("Can't start parsing from rule \""+options.startRule+'".');peg$startRuleFunction=peg$startRuleFunctions[options.startRule]}function text(){return input.substring(peg$savedPos,peg$currPos)}function location(){return peg$computeLocation(peg$savedPos,peg$currPos)}function error(message){throw peg$buildException(message,null,input.substring(peg$savedPos,peg$currPos),peg$computeLocation(peg$savedPos,peg$currPos))}function peg$computePosDetails(pos){var p,ch,details=peg$posDetailsCache[pos];if(details)return details;for(p=pos-1;!peg$posDetailsCache[p];)p--;for(details={line:(details=peg$posDetailsCache[p]).line,column:details.column,seenCR:details.seenCR};p<pos;)"\n"===(ch=input.charAt(p))?(details.seenCR||details.line++,details.column=1,details.seenCR=!1):"\r"===ch||"\u2028"===ch||"\u2029"===ch?(details.line++,details.column=1,details.seenCR=!0):(details.column++,details.seenCR=!1),p++;return peg$posDetailsCache[pos]=details,details}function peg$computeLocation(startPos,endPos){var startPosDetails=peg$computePosDetails(startPos),endPosDetails=peg$computePosDetails(endPos);return{start:{offset:startPos,line:startPosDetails.line,column:startPosDetails.column},end:{offset:endPos,line:endPosDetails.line,column:endPosDetails.column}}}function peg$fail(expected){peg$currPos<peg$maxFailPos||(peg$currPos>peg$maxFailPos&&(peg$maxFailPos=peg$currPos,peg$maxFailExpected=[]),peg$maxFailExpected.push(expected))}function peg$buildException(message,expected,found,location){return null!==expected&&function(expected){var i=1;for(expected.sort((function(a,b){return a.description<b.description?-1:a.description>b.description?1:0}));i<expected.length;)expected[i-1]===expected[i]?expected.splice(i,1):i++}(expected),new peg$SyntaxError(null!==message?message:function(expected,found){var i,expectedDescs=new Array(expected.length);for(i=0;i<expected.length;i++)expectedDescs[i]=expected[i].description;return"Expected "+(expected.length>1?expectedDescs.slice(0,-1).join(", ")+" or "+expectedDescs[expected.length-1]:expectedDescs[0])+" but "+(found?'"'+function(s){function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase()}return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(ch){return"\\x0"+hex(ch)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(ch){return"\\x"+hex(ch)})).replace(/[\u0100-\u0FFF]/g,(function(ch){return"\\u0"+hex(ch)})).replace(/[\u1000-\uFFFF]/g,(function(ch){return"\\u"+hex(ch)}))}(found)+'"':"end of input")+" found."}(expected,found),expected,found,location)}function peg$parsestart(){var s0,s1,s2,s3,key=37*peg$currPos+0,cached=peg$resultsCache[key];if(cached)return peg$currPos=cached.nextPos,cached.result;for(s0=peg$currPos,s1=[],s2=peg$parseSpace();s2!==peg$FAILED;)s1.push(s2),s2=peg$parseSpace();return s1!==peg$FAILED?((s2=peg$parseOrQuery())===peg$FAILED&&(s2=null),s2!==peg$FAILED&&(s3=peg$parseOptionalSpace())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c0(s2,s3)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0}function peg$parseOrQuery(){var s0,s1,s2,s3,s5,key=37*peg$currPos+1,cached=peg$resultsCache[key];if(cached)return peg$currPos=cached.nextPos,cached.result;if(s0=peg$currPos,(s1=peg$parseAndQuery())!==peg$FAILED){if(s2=[],s3=peg$currPos,peg$parseOr()!==peg$FAILED&&(s5=peg$parseAndQuery())!==peg$FAILED?(peg$savedPos=s3,s3=peg$c1(s1,s5)):(peg$currPos=s3,s3=peg$FAILED),s3!==peg$FAILED)for(;s3!==peg$FAILED;)s2.push(s3),s3=peg$currPos,peg$parseOr()!==peg$FAILED&&(s5=peg$parseAndQuery())!==peg$FAILED?(peg$savedPos=s3,s3=peg$c1(s1,s5)):(peg$currPos=s3,s3=peg$FAILED);else s2=peg$FAILED;s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c2(s1,s2)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;return s0===peg$FAILED&&(s0=peg$parseAndQuery()),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0}function peg$parseAndQuery(){var s0,s1,s2,s3,s5,key=37*peg$currPos+2,cached=peg$resultsCache[key];if(cached)return peg$currPos=cached.nextPos,cached.result;if(s0=peg$currPos,(s1=peg$parseNotQuery())!==peg$FAILED){if(s2=[],s3=peg$currPos,peg$parseAnd()!==peg$FAILED&&(s5=peg$parseNotQuery())!==peg$FAILED?(peg$savedPos=s3,s3=peg$c1(s1,s5)):(peg$currPos=s3,s3=peg$FAILED),s3!==peg$FAILED)for(;s3!==peg$FAILED;)s2.push(s3),s3=peg$currPos,peg$parseAnd()!==peg$FAILED&&(s5=peg$parseNotQuery())!==peg$FAILED?(peg$savedPos=s3,s3=peg$c1(s1,s5)):(peg$currPos=s3,s3=peg$FAILED);else s2=peg$FAILED;s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c3(s1,s2)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;return s0===peg$FAILED&&(s0=peg$parseNotQuery()),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0}function peg$parseNotQuery(){var s0,s2,key=37*peg$currPos+3,cached=peg$resultsCache[key];return cached?(peg$currPos=cached.nextPos,cached.result):(s0=peg$currPos,peg$parseNot()!==peg$FAILED&&(s2=peg$parseSubQuery())!==peg$FAILED?(peg$savedPos=s0,s0=peg$c4(s2)):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED&&(s0=peg$parseSubQuery()),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0)}function peg$parseSubQuery(){var s0,s1,s2,s3,s4,s5,key=37*peg$currPos+4,cached=peg$resultsCache[key];if(cached)return peg$currPos=cached.nextPos,cached.result;if(s0=peg$currPos,40===input.charCodeAt(peg$currPos)?(s1=peg$c5,peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c6)),s1!==peg$FAILED){for(s2=[],s3=peg$parseSpace();s3!==peg$FAILED;)s2.push(s3),s3=peg$parseSpace();s2!==peg$FAILED&&(s3=peg$parseOrQuery())!==peg$FAILED&&(s4=peg$parseOptionalSpace())!==peg$FAILED?(41===input.charCodeAt(peg$currPos)?(s5=peg$c7,peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c8)),s5!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c9(s3,s4)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;return s0===peg$FAILED&&(s0=peg$parseNestedQuery()),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0}function peg$parseNestedQuery(){var s0,s1,s2,s3,s4,s5,s6,s7,s8,s9,key=37*peg$currPos+5,cached=peg$resultsCache[key];if(cached)return peg$currPos=cached.nextPos,cached.result;if(s0=peg$currPos,(s1=peg$parseField())!==peg$FAILED){for(s2=[],s3=peg$parseSpace();s3!==peg$FAILED;)s2.push(s3),s3=peg$parseSpace();if(s2!==peg$FAILED)if(58===input.charCodeAt(peg$currPos)?(s3=peg$c10,peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c11)),s3!==peg$FAILED){for(s4=[],s5=peg$parseSpace();s5!==peg$FAILED;)s4.push(s5),s5=peg$parseSpace();if(s4!==peg$FAILED)if(123===input.charCodeAt(peg$currPos)?(s5=peg$c12,peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c13)),s5!==peg$FAILED){for(s6=[],s7=peg$parseSpace();s7!==peg$FAILED;)s6.push(s7),s7=peg$parseSpace();s6!==peg$FAILED&&(s7=peg$parseOrQuery())!==peg$FAILED&&(s8=peg$parseOptionalSpace())!==peg$FAILED?(125===input.charCodeAt(peg$currPos)?(s9=peg$c14,peg$currPos++):(s9=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c15)),s9!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c16(s1,s7,s8)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;return s0===peg$FAILED&&(s0=peg$parseExpression()),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0}function peg$parseExpression(){var s0,key=37*peg$currPos+6,cached=peg$resultsCache[key];return cached?(peg$currPos=cached.nextPos,cached.result):((s0=peg$parseFieldRangeExpression())===peg$FAILED&&(s0=peg$parseFieldValueExpression())===peg$FAILED&&(s0=peg$parseValueExpression()),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0)}function peg$parseField(){var s0,key=37*peg$currPos+7,cached=peg$resultsCache[key];return cached?(peg$currPos=cached.nextPos,cached.result):(peg$silentFails++,s0=peg$parseLiteral(),peg$silentFails--,s0===peg$FAILED&&(peg$FAILED,0===peg$silentFails&&peg$fail(peg$c17)),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0)}function peg$parseFieldRangeExpression(){var s0,s1,s2,s3,s4,s5,key=37*peg$currPos+8,cached=peg$resultsCache[key];if(cached)return peg$currPos=cached.nextPos,cached.result;if(s0=peg$currPos,(s1=peg$parseField())!==peg$FAILED){for(s2=[],s3=peg$parseSpace();s3!==peg$FAILED;)s2.push(s3),s3=peg$parseSpace();if(s2!==peg$FAILED)if((s3=peg$parseRangeOperator())!==peg$FAILED){for(s4=[],s5=peg$parseSpace();s5!==peg$FAILED;)s4.push(s5),s5=peg$parseSpace();s4!==peg$FAILED&&(s5=peg$parseLiteral())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c18(s1,s3,s5)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;return peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0}function peg$parseFieldValueExpression(){var s0,s1,s2,s3,s4,s5,key=37*peg$currPos+9,cached=peg$resultsCache[key];if(cached)return peg$currPos=cached.nextPos,cached.result;if(s0=peg$currPos,(s1=peg$parseField())!==peg$FAILED){for(s2=[],s3=peg$parseSpace();s3!==peg$FAILED;)s2.push(s3),s3=peg$parseSpace();if(s2!==peg$FAILED)if(58===input.charCodeAt(peg$currPos)?(s3=peg$c10,peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c11)),s3!==peg$FAILED){for(s4=[],s5=peg$parseSpace();s5!==peg$FAILED;)s4.push(s5),s5=peg$parseSpace();s4!==peg$FAILED&&(s5=peg$parseListOfValues())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c19(s1,s5)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;return peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0}function peg$parseValueExpression(){var s0,s1,key=37*peg$currPos+10,cached=peg$resultsCache[key];return cached?(peg$currPos=cached.nextPos,cached.result):(s0=peg$currPos,(s1=peg$parseValue())!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c20(s1)),s0=s1,peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0)}function peg$parseListOfValues(){var s0,s1,s2,s3,s4,s5,key=37*peg$currPos+11,cached=peg$resultsCache[key];if(cached)return peg$currPos=cached.nextPos,cached.result;if(s0=peg$currPos,40===input.charCodeAt(peg$currPos)?(s1=peg$c5,peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c6)),s1!==peg$FAILED){for(s2=[],s3=peg$parseSpace();s3!==peg$FAILED;)s2.push(s3),s3=peg$parseSpace();s2!==peg$FAILED&&(s3=peg$parseOrListOfValues())!==peg$FAILED&&(s4=peg$parseOptionalSpace())!==peg$FAILED?(41===input.charCodeAt(peg$currPos)?(s5=peg$c7,peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c8)),s5!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c21(s3,s4)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;return s0===peg$FAILED&&(s0=peg$parseValue()),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0}function peg$parseOrListOfValues(){var s0,s1,s2,s3,s5,key=37*peg$currPos+12,cached=peg$resultsCache[key];if(cached)return peg$currPos=cached.nextPos,cached.result;if(s0=peg$currPos,(s1=peg$parseAndListOfValues())!==peg$FAILED){if(s2=[],s3=peg$currPos,peg$parseOr()!==peg$FAILED&&(s5=peg$parseAndListOfValues())!==peg$FAILED?(peg$savedPos=s3,s3=peg$c22(s1,s5)):(peg$currPos=s3,s3=peg$FAILED),s3!==peg$FAILED)for(;s3!==peg$FAILED;)s2.push(s3),s3=peg$currPos,peg$parseOr()!==peg$FAILED&&(s5=peg$parseAndListOfValues())!==peg$FAILED?(peg$savedPos=s3,s3=peg$c22(s1,s5)):(peg$currPos=s3,s3=peg$FAILED);else s2=peg$FAILED;s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c23(s1,s2)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;return s0===peg$FAILED&&(s0=peg$parseAndListOfValues()),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0}function peg$parseAndListOfValues(){var s0,s1,s2,s3,s5,key=37*peg$currPos+13,cached=peg$resultsCache[key];if(cached)return peg$currPos=cached.nextPos,cached.result;if(s0=peg$currPos,(s1=peg$parseNotListOfValues())!==peg$FAILED){if(s2=[],s3=peg$currPos,peg$parseAnd()!==peg$FAILED&&(s5=peg$parseNotListOfValues())!==peg$FAILED?(peg$savedPos=s3,s3=peg$c22(s1,s5)):(peg$currPos=s3,s3=peg$FAILED),s3!==peg$FAILED)for(;s3!==peg$FAILED;)s2.push(s3),s3=peg$currPos,peg$parseAnd()!==peg$FAILED&&(s5=peg$parseNotListOfValues())!==peg$FAILED?(peg$savedPos=s3,s3=peg$c22(s1,s5)):(peg$currPos=s3,s3=peg$FAILED);else s2=peg$FAILED;s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c24(s1,s2)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;return s0===peg$FAILED&&(s0=peg$parseNotListOfValues()),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0}function peg$parseNotListOfValues(){var s0,s2,key=37*peg$currPos+14,cached=peg$resultsCache[key];return cached?(peg$currPos=cached.nextPos,cached.result):(s0=peg$currPos,peg$parseNot()!==peg$FAILED&&(s2=peg$parseListOfValues())!==peg$FAILED?(peg$savedPos=s0,s0=peg$c25(s2)):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED&&(s0=peg$parseListOfValues()),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0)}function peg$parseValue(){var s0,s1,key=37*peg$currPos+15,cached=peg$resultsCache[key];return cached?(peg$currPos=cached.nextPos,cached.result):(peg$silentFails++,s0=peg$currPos,(s1=peg$parseQuotedString())!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c27(s1)),(s0=s1)===peg$FAILED&&(s0=peg$currPos,(s1=peg$parseUnquotedLiteral())!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c28(s1)),s0=s1),peg$silentFails--,s0===peg$FAILED&&(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c26)),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0)}function peg$parseOr(){var s0,s1,s2,s3,s4,key=37*peg$currPos+16,cached=peg$resultsCache[key];if(cached)return peg$currPos=cached.nextPos,cached.result;if(peg$silentFails++,s0=peg$currPos,s1=[],(s2=peg$parseSpace())!==peg$FAILED)for(;s2!==peg$FAILED;)s1.push(s2),s2=peg$parseSpace();else s1=peg$FAILED;if(s1!==peg$FAILED)if(input.substr(peg$currPos,2).toLowerCase()===peg$c30?(s2=input.substr(peg$currPos,2),peg$currPos+=2):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c31)),s2!==peg$FAILED){if(s3=[],(s4=peg$parseSpace())!==peg$FAILED)for(;s4!==peg$FAILED;)s3.push(s4),s4=peg$parseSpace();else s3=peg$FAILED;s3!==peg$FAILED?s0=s1=[s1,s2,s3]:(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;return peg$silentFails--,s0===peg$FAILED&&(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c29)),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0}function peg$parseAnd(){var s0,s1,s2,s3,s4,key=37*peg$currPos+17,cached=peg$resultsCache[key];if(cached)return peg$currPos=cached.nextPos,cached.result;if(peg$silentFails++,s0=peg$currPos,s1=[],(s2=peg$parseSpace())!==peg$FAILED)for(;s2!==peg$FAILED;)s1.push(s2),s2=peg$parseSpace();else s1=peg$FAILED;if(s1!==peg$FAILED)if(input.substr(peg$currPos,3).toLowerCase()===peg$c33?(s2=input.substr(peg$currPos,3),peg$currPos+=3):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c34)),s2!==peg$FAILED){if(s3=[],(s4=peg$parseSpace())!==peg$FAILED)for(;s4!==peg$FAILED;)s3.push(s4),s4=peg$parseSpace();else s3=peg$FAILED;s3!==peg$FAILED?s0=s1=[s1,s2,s3]:(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;return peg$silentFails--,s0===peg$FAILED&&(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c32)),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0}function peg$parseNot(){var s0,s1,s2,s3,key=37*peg$currPos+18,cached=peg$resultsCache[key];if(cached)return peg$currPos=cached.nextPos,cached.result;if(peg$silentFails++,s0=peg$currPos,input.substr(peg$currPos,3).toLowerCase()===peg$c36?(s1=input.substr(peg$currPos,3),peg$currPos+=3):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c37)),s1!==peg$FAILED){if(s2=[],(s3=peg$parseSpace())!==peg$FAILED)for(;s3!==peg$FAILED;)s2.push(s3),s3=peg$parseSpace();else s2=peg$FAILED;s2!==peg$FAILED?s0=s1=[s1,s2]:(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;return peg$silentFails--,s0===peg$FAILED&&(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c35)),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0}function peg$parseLiteral(){var s0,key=37*peg$currPos+19,cached=peg$resultsCache[key];return cached?(peg$currPos=cached.nextPos,cached.result):(peg$silentFails++,(s0=peg$parseQuotedString())===peg$FAILED&&(s0=peg$parseUnquotedLiteral()),peg$silentFails--,s0===peg$FAILED&&(peg$FAILED,0===peg$silentFails&&peg$fail(peg$c38)),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0)}function peg$parseQuotedString(){var s0,s1,s2,s3,s4,s5,s6,key=37*peg$currPos+20,cached=peg$resultsCache[key];if(cached)return peg$currPos=cached.nextPos,cached.result;if(s0=peg$currPos,peg$savedPos=peg$currPos,(s1=(s1=peg$c39())?void 0:peg$FAILED)!==peg$FAILED)if(34===input.charCodeAt(peg$currPos)?(s2=peg$c40,peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c41)),s2!==peg$FAILED){for(s3=[],s4=peg$parseQuotedCharacter();s4!==peg$FAILED;)s3.push(s4),s4=peg$parseQuotedCharacter();if(s3!==peg$FAILED)if((s4=peg$parseCursor())!==peg$FAILED){for(s5=[],s6=peg$parseQuotedCharacter();s6!==peg$FAILED;)s5.push(s6),s6=peg$parseQuotedCharacter();s5!==peg$FAILED?(34===input.charCodeAt(peg$currPos)?(s6=peg$c40,peg$currPos++):(s6=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c41)),s6!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c42(s3,s4,s5)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;if(s0===peg$FAILED)if(s0=peg$currPos,34===input.charCodeAt(peg$currPos)?(s1=peg$c40,peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c41)),s1!==peg$FAILED){for(s2=[],s3=peg$parseQuotedCharacter();s3!==peg$FAILED;)s2.push(s3),s3=peg$parseQuotedCharacter();s2!==peg$FAILED?(34===input.charCodeAt(peg$currPos)?(s3=peg$c40,peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c41)),s3!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c43(s2)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;return peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0}function peg$parseQuotedCharacter(){var s0,s1,s2,key=37*peg$currPos+21,cached=peg$resultsCache[key];return cached?(peg$currPos=cached.nextPos,cached.result):((s0=peg$parseEscapedWhitespace())===peg$FAILED&&(s0=peg$parseEscapedUnicodeSequence())===peg$FAILED&&(s0=peg$currPos,92===input.charCodeAt(peg$currPos)?(s1=peg$c44,peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c45)),s1!==peg$FAILED?(peg$c46.test(input.charAt(peg$currPos))?(s2=input.charAt(peg$currPos),peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c47)),s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c48(s2)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED&&(s0=peg$currPos,s1=peg$currPos,peg$silentFails++,s2=peg$parseCursor(),peg$silentFails--,s2===peg$FAILED?s1=void 0:(peg$currPos=s1,s1=peg$FAILED),s1!==peg$FAILED?(peg$c49.test(input.charAt(peg$currPos))?(s2=input.charAt(peg$currPos),peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c50)),s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c48(s2)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED))),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0)}function peg$parseUnquotedLiteral(){var s0,s1,s2,s3,s4,s5,key=37*peg$currPos+22,cached=peg$resultsCache[key];if(cached)return peg$currPos=cached.nextPos,cached.result;if(s0=peg$currPos,peg$savedPos=peg$currPos,(s1=(s1=peg$c39())?void 0:peg$FAILED)!==peg$FAILED){for(s2=[],s3=peg$parseUnquotedCharacter();s3!==peg$FAILED;)s2.push(s3),s3=peg$parseUnquotedCharacter();if(s2!==peg$FAILED)if((s3=peg$parseCursor())!==peg$FAILED){for(s4=[],s5=peg$parseUnquotedCharacter();s5!==peg$FAILED;)s4.push(s5),s5=peg$parseUnquotedCharacter();s4!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c42(s2,s3,s4)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;if(s0===peg$FAILED){if(s0=peg$currPos,s1=[],(s2=peg$parseUnquotedCharacter())!==peg$FAILED)for(;s2!==peg$FAILED;)s1.push(s2),s2=peg$parseUnquotedCharacter();else s1=peg$FAILED;s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c51(s1)),s0=s1}return peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0}function peg$parseUnquotedCharacter(){var s0,s1,s2,s3,s4,key=37*peg$currPos+23,cached=peg$resultsCache[key];return cached?(peg$currPos=cached.nextPos,cached.result):((s0=peg$parseEscapedWhitespace())===peg$FAILED&&(s0=peg$parseEscapedSpecialCharacter())===peg$FAILED&&(s0=peg$parseEscapedUnicodeSequence())===peg$FAILED&&(s0=peg$parseEscapedKeyword())===peg$FAILED&&(s0=peg$parseWildcard())===peg$FAILED&&(s0=peg$currPos,s1=peg$currPos,peg$silentFails++,s2=peg$parseSpecialCharacter(),peg$silentFails--,s2===peg$FAILED?s1=void 0:(peg$currPos=s1,s1=peg$FAILED),s1!==peg$FAILED?(s2=peg$currPos,peg$silentFails++,s3=peg$parseKeyword(),peg$silentFails--,s3===peg$FAILED?s2=void 0:(peg$currPos=s2,s2=peg$FAILED),s2!==peg$FAILED?(s3=peg$currPos,peg$silentFails++,s4=peg$parseCursor(),peg$silentFails--,s4===peg$FAILED?s3=void 0:(peg$currPos=s3,s3=peg$FAILED),s3!==peg$FAILED?(input.length>peg$currPos?(s4=input.charAt(peg$currPos),peg$currPos++):(s4=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c52)),s4!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c48(s4)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0)}function peg$parseWildcard(){var s0,s1,key=37*peg$currPos+24,cached=peg$resultsCache[key];return cached?(peg$currPos=cached.nextPos,cached.result):(s0=peg$currPos,42===input.charCodeAt(peg$currPos)?(s1=peg$c53,peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c54)),s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c55()),s0=s1,peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0)}function peg$parseOptionalSpace(){var s0,s1,s2,s3,s4,s5,key=37*peg$currPos+25,cached=peg$resultsCache[key];if(cached)return peg$currPos=cached.nextPos,cached.result;if(s0=peg$currPos,peg$savedPos=peg$currPos,(s1=(s1=peg$c39())?void 0:peg$FAILED)!==peg$FAILED){for(s2=[],s3=peg$parseSpace();s3!==peg$FAILED;)s2.push(s3),s3=peg$parseSpace();if(s2!==peg$FAILED)if((s3=peg$parseCursor())!==peg$FAILED){for(s4=[],s5=peg$parseSpace();s5!==peg$FAILED;)s4.push(s5),s5=peg$parseSpace();s4!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c42(s2,s3,s4)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;if(s0===peg$FAILED)for(s0=[],s1=peg$parseSpace();s1!==peg$FAILED;)s0.push(s1),s1=peg$parseSpace();return peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0}function peg$parseEscapedWhitespace(){var s0,s1,key=37*peg$currPos+26,cached=peg$resultsCache[key];return cached?(peg$currPos=cached.nextPos,cached.result):(s0=peg$currPos,input.substr(peg$currPos,2)===peg$c56?(s1=peg$c56,peg$currPos+=2):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c57)),s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c58()),(s0=s1)===peg$FAILED&&(s0=peg$currPos,input.substr(peg$currPos,2)===peg$c59?(s1=peg$c59,peg$currPos+=2):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c60)),s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c61()),(s0=s1)===peg$FAILED&&(s0=peg$currPos,input.substr(peg$currPos,2)===peg$c62?(s1=peg$c62,peg$currPos+=2):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c63)),s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c64()),s0=s1)),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0)}function peg$parseEscapedSpecialCharacter(){var s0,s1,s2,key=37*peg$currPos+27,cached=peg$resultsCache[key];return cached?(peg$currPos=cached.nextPos,cached.result):(s0=peg$currPos,92===input.charCodeAt(peg$currPos)?(s1=peg$c44,peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c45)),s1!==peg$FAILED&&(s2=peg$parseSpecialCharacter())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c48(s2)):(peg$currPos=s0,s0=peg$FAILED),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0)}function peg$parseEscapedKeyword(){var s0,s1,s2,key=37*peg$currPos+28,cached=peg$resultsCache[key];return cached?(peg$currPos=cached.nextPos,cached.result):(s0=peg$currPos,92===input.charCodeAt(peg$currPos)?(s1=peg$c44,peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c45)),s1!==peg$FAILED?(input.substr(peg$currPos,2).toLowerCase()===peg$c30?(s2=input.substr(peg$currPos,2),peg$currPos+=2):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c31)),s2===peg$FAILED&&(input.substr(peg$currPos,3).toLowerCase()===peg$c33?(s2=input.substr(peg$currPos,3),peg$currPos+=3):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c34)),s2===peg$FAILED&&(input.substr(peg$currPos,3).toLowerCase()===peg$c36?(s2=input.substr(peg$currPos,3),peg$currPos+=3):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c37)))),s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c65(s2)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0)}function peg$parseKeyword(){var s0,key=37*peg$currPos+29,cached=peg$resultsCache[key];return cached?(peg$currPos=cached.nextPos,cached.result):((s0=peg$parseOr())===peg$FAILED&&(s0=peg$parseAnd())===peg$FAILED&&(s0=peg$parseNot()),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0)}function peg$parseSpecialCharacter(){var s0,key=37*peg$currPos+30,cached=peg$resultsCache[key];return cached?(peg$currPos=cached.nextPos,cached.result):(peg$c66.test(input.charAt(peg$currPos))?(s0=input.charAt(peg$currPos),peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c67)),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0)}function peg$parseEscapedUnicodeSequence(){var s0,s1,s2,key=37*peg$currPos+31,cached=peg$resultsCache[key];return cached?(peg$currPos=cached.nextPos,cached.result):(s0=peg$currPos,92===input.charCodeAt(peg$currPos)?(s1=peg$c44,peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c45)),s1!==peg$FAILED&&(s2=peg$parseUnicodeSequence())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c68(s2)):(peg$currPos=s0,s0=peg$FAILED),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0)}function peg$parseUnicodeSequence(){var s0,s1,s2,s3,s4,s5,s6,s7,key=37*peg$currPos+32,cached=peg$resultsCache[key];return cached?(peg$currPos=cached.nextPos,cached.result):(s0=peg$currPos,117===input.charCodeAt(peg$currPos)?(s1=peg$c69,peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c70)),s1!==peg$FAILED?(s2=peg$currPos,s3=peg$currPos,(s4=peg$parseHexDigit())!==peg$FAILED&&(s5=peg$parseHexDigit())!==peg$FAILED&&(s6=peg$parseHexDigit())!==peg$FAILED&&(s7=peg$parseHexDigit())!==peg$FAILED?s3=s4=[s4,s5,s6,s7]:(peg$currPos=s3,s3=peg$FAILED),(s2=s3!==peg$FAILED?input.substring(s2,peg$currPos):s3)!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c71(s2)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0)}function peg$parseHexDigit(){var s0,key=37*peg$currPos+33,cached=peg$resultsCache[key];return cached?(peg$currPos=cached.nextPos,cached.result):(peg$c72.test(input.charAt(peg$currPos))?(s0=input.charAt(peg$currPos),peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c73)),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0)}function peg$parseRangeOperator(){var s0,s1,key=37*peg$currPos+34,cached=peg$resultsCache[key];return cached?(peg$currPos=cached.nextPos,cached.result):(s0=peg$currPos,input.substr(peg$currPos,2)===peg$c74?(s1=peg$c74,peg$currPos+=2):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c75)),s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c76()),(s0=s1)===peg$FAILED&&(s0=peg$currPos,input.substr(peg$currPos,2)===peg$c77?(s1=peg$c77,peg$currPos+=2):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c78)),s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c79()),(s0=s1)===peg$FAILED&&(s0=peg$currPos,60===input.charCodeAt(peg$currPos)?(s1=peg$c80,peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c81)),s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c82()),(s0=s1)===peg$FAILED&&(s0=peg$currPos,62===input.charCodeAt(peg$currPos)?(s1=peg$c83,peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c84)),s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c85()),s0=s1))),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0)}function peg$parseSpace(){var s0,key=37*peg$currPos+35,cached=peg$resultsCache[key];return cached?(peg$currPos=cached.nextPos,cached.result):(peg$silentFails++,peg$c87.test(input.charAt(peg$currPos))?(s0=input.charAt(peg$currPos),peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c88)),peg$silentFails--,s0===peg$FAILED&&(peg$FAILED,0===peg$silentFails&&peg$fail(peg$c86)),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0)}function peg$parseCursor(){var s0,s2,key=37*peg$currPos+36,cached=peg$resultsCache[key];return cached?(peg$currPos=cached.nextPos,cached.result):(s0=peg$currPos,peg$savedPos=peg$currPos,(peg$c39()?void 0:peg$FAILED)!==peg$FAILED?(input.substr(peg$currPos,14)===peg$c89?(s2=peg$c89,peg$currPos+=14):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c90)),s2!==peg$FAILED?(peg$savedPos=s0,s0=peg$c91()):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),peg$resultsCache[key]={nextPos:peg$currPos,result:s0},s0)}const{parseCursor:parseCursor,cursorSymbol:cursorSymbol,allowLeadingWildcards:allowLeadingWildcards=!0,helpers:{nodeTypes:nodeTypes}}=options,buildFunctionNode=nodeTypes.function.buildNodeWithArgumentNodes,buildLiteralNode=nodeTypes.literal.buildNode,buildWildcardNode=nodeTypes.wildcard.buildNode,buildNamedArgNode=nodeTypes.namedArg.buildNode,{wildcardSymbol:wildcardSymbol}=nodeTypes.wildcard;if((peg$result=peg$startRuleFunction())!==peg$FAILED&&peg$currPos===input.length)return peg$result;throw peg$result!==peg$FAILED&&peg$currPos<input.length&&peg$fail({type:"end",description:"end of input"}),peg$buildException(null,peg$maxFailExpected,peg$maxFailPos<input.length?input.charAt(peg$maxFailPos):null,peg$maxFailPos<input.length?peg$computeLocation(peg$maxFailPos,peg$maxFailPos+1):peg$computeLocation(peg$maxFailPos,peg$maxFailPos))}}}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return isFilterable})),__webpack_require__.d(__webpack_exports__,"b",(function(){return isNestedField}));var _kbn_field_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(34);const filterableTypes=Object(_kbn_field_types__WEBPACK_IMPORTED_MODULE_0__.c)();function isFilterable(field){return"_id"===field.name||field.scripted||Boolean(field.searchable&&filterableTypes.includes(field.type))}function isNestedField(field){var _field$subType;return!(null===(_field$subType=field.subType)||void 0===_field$subType||!_field$subType.nested)}},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return buildFilter})),__webpack_require__.d(__webpack_exports__,"a",(function(){return buildCustomFilter}));var ___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8);function buildFilter(indexPattern,field,type,negate,disabled,params,alias,store){const filter=function(indexPattern,field,type,params){switch(type){case"phrase":return Object(___WEBPACK_IMPORTED_MODULE_0__.buildPhraseFilter)(field,params,indexPattern);case"phrases":return Object(___WEBPACK_IMPORTED_MODULE_0__.buildPhrasesFilter)(field,params,indexPattern);case"range":const newParams={gte:params.from,lt:params.to};return Object(___WEBPACK_IMPORTED_MODULE_0__.buildRangeFilter)(field,newParams,indexPattern);case"range_from_value":return Object(___WEBPACK_IMPORTED_MODULE_0__.buildRangeFilter)(field,params,indexPattern);case"exists":return Object(___WEBPACK_IMPORTED_MODULE_0__.buildExistsFilter)(field,indexPattern);default:throw new Error("Unknown filter type: "+type)}}(indexPattern,field,type,params);return filter.meta.alias=alias,filter.meta.negate=negate,filter.meta.disabled=disabled,store&&(filter.$state={store:store}),filter}function buildCustomFilter(indexPatternString,queryDsl,disabled,negate,alias,store){const filter={...queryDsl,meta:{index:indexPatternString,type:___WEBPACK_IMPORTED_MODULE_0__.FILTERS.CUSTOM,disabled:disabled,negate:negate,alias:alias}};return filter.$state={store:store},filter}},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getDisplayValueFromFilter}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_get_index_pattern_from_filter__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(78);function getDisplayValueFromFilter(filter,indexPatterns){if("function"==typeof filter.meta.value){const valueFormatter=function(indexPattern,key){if(!indexPattern||!indexPattern.getFormatterForField||!key)return;const field=indexPattern.fields.find(f=>f.name===key);if(!field)throw new Error(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.filter.filterBar.fieldNotFound",{defaultMessage:"Field {key} not found in index pattern {indexPattern}",values:{key:key,indexPattern:indexPattern.title}}));return indexPattern.getFormatterForField(field)}(Object(_get_index_pattern_from_filter__WEBPACK_IMPORTED_MODULE_1__.a)(filter,indexPatterns),filter.meta.key);return filter.meta.value(valueFormatter)}return filter.meta.value||""}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getFilterField}));var _exists_filter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(61),_geo_bounding_box_filter__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(62),_geo_polygon_filter__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(63),_phrase_filter__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(43),_phrases_filter__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(64),_range_filter__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(65),_missing_filter__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(66);const getFilterField=filter=>Object(_exists_filter__WEBPACK_IMPORTED_MODULE_0__.c)(filter)?Object(_exists_filter__WEBPACK_IMPORTED_MODULE_0__.b)(filter):Object(_geo_bounding_box_filter__WEBPACK_IMPORTED_MODULE_1__.b)(filter)?Object(_geo_bounding_box_filter__WEBPACK_IMPORTED_MODULE_1__.a)(filter):Object(_geo_polygon_filter__WEBPACK_IMPORTED_MODULE_2__.b)(filter)?Object(_geo_polygon_filter__WEBPACK_IMPORTED_MODULE_2__.a)(filter):Object(_phrase_filter__WEBPACK_IMPORTED_MODULE_3__.g)(filter)?Object(_phrase_filter__WEBPACK_IMPORTED_MODULE_3__.d)(filter):Object(_phrases_filter__WEBPACK_IMPORTED_MODULE_4__.c)(filter)?Object(_phrases_filter__WEBPACK_IMPORTED_MODULE_4__.b)(filter):Object(_range_filter__WEBPACK_IMPORTED_MODULE_5__.d)(filter)?Object(_range_filter__WEBPACK_IMPORTED_MODULE_5__.b)(filter):Object(_missing_filter__WEBPACK_IMPORTED_MODULE_6__.b)(filter)?Object(_missing_filter__WEBPACK_IMPORTED_MODULE_6__.a)(filter):void 0},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getFilterParams}));var ___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8);function getFilterParams(filter){switch(filter.meta.type){case ___WEBPACK_IMPORTED_MODULE_0__.FILTERS.PHRASE:return filter.meta.params.query;case ___WEBPACK_IMPORTED_MODULE_0__.FILTERS.PHRASES:return filter.meta.params;case ___WEBPACK_IMPORTED_MODULE_0__.FILTERS.RANGE:const{gte:gte,gt:gt,lte:lte,lt:lt}=filter.meta.params;return{from:null!=gte?gte:gt,to:null!=lt?lt:lte}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return isMatchAllFilter}));const isMatchAllFilter=filter=>filter&&filter.match_all},function(module,__webpack_exports__,__webpack_require__){"use strict";let FilterStateStore;__webpack_require__.d(__webpack_exports__,"a",(function(){return FilterStateStore})),__webpack_require__.d(__webpack_exports__,"b",(function(){return buildEmptyFilter})),__webpack_require__.d(__webpack_exports__,"f",(function(){return isFilterPinned})),__webpack_require__.d(__webpack_exports__,"i",(function(){return toggleFilterDisabled})),__webpack_require__.d(__webpack_exports__,"j",(function(){return toggleFilterNegated})),__webpack_require__.d(__webpack_exports__,"k",(function(){return toggleFilterPinned})),__webpack_require__.d(__webpack_exports__,"d",(function(){return enableFilter})),__webpack_require__.d(__webpack_exports__,"c",(function(){return disableFilter})),__webpack_require__.d(__webpack_exports__,"h",(function(){return pinFilter})),__webpack_require__.d(__webpack_exports__,"l",(function(){return unpinFilter})),__webpack_require__.d(__webpack_exports__,"e",(function(){return isFilter})),__webpack_require__.d(__webpack_exports__,"g",(function(){return isFilters})),function(FilterStateStore){FilterStateStore.APP_STATE="appState",FilterStateStore.GLOBAL_STATE="globalState"}(FilterStateStore||(FilterStateStore={}));const buildEmptyFilter=(isPinned,index)=>({meta:{disabled:!1,negate:!1,alias:null,index:index},$state:{store:isPinned?FilterStateStore.GLOBAL_STATE:FilterStateStore.APP_STATE}}),isFilterPinned=filter=>filter.$state&&filter.$state.store===FilterStateStore.GLOBAL_STATE,toggleFilterDisabled=filter=>{const disabled=!filter.meta.disabled,meta={...filter.meta,disabled:disabled};return{...filter,meta:meta}},toggleFilterNegated=filter=>{const negate=!filter.meta.negate,meta={...filter.meta,negate:negate};return{...filter,meta:meta}},toggleFilterPinned=filter=>{const store=isFilterPinned(filter)?FilterStateStore.APP_STATE:FilterStateStore.GLOBAL_STATE,$state={...filter.$state,store:store};return{...filter,$state:$state}},enableFilter=filter=>filter.meta.disabled?toggleFilterDisabled(filter):filter,disableFilter=filter=>filter.meta.disabled?filter:toggleFilterDisabled(filter),pinFilter=filter=>isFilterPinned(filter)?filter:toggleFilterPinned(filter),unpinFilter=filter=>isFilterPinned(filter)?toggleFilterPinned(filter):filter,isFilter=x=>!!x&&"object"==typeof x&&!!x.meta&&"object"==typeof x.meta&&"boolean"==typeof x.meta.disabled,isFilters=x=>Array.isArray(x)&&!x.find(y=>!isFilter(y))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return isQueryStringFilter})),__webpack_require__.d(__webpack_exports__,"a",(function(){return buildQueryFilter}));const isQueryStringFilter=filter=>filter&&filter.query&&filter.query.query_string,buildQueryFilter=(query,index,alias)=>({query:query,meta:{index:index,alias:alias}})},function(module,__webpack_exports__,__webpack_require__){"use strict";let FILTERS;__webpack_require__.d(__webpack_exports__,"a",(function(){return FILTERS})),function(FILTERS){FILTERS.CUSTOM="custom",FILTERS.PHRASES="phrases",FILTERS.PHRASE="phrase",FILTERS.EXISTS="exists",FILTERS.MATCH_ALL="match_all",FILTERS.MISSING="missing",FILTERS.QUERY_STRING="query_string",FILTERS.RANGE="range",FILTERS.RANGE_FROM_VALUE="range_from_value",FILTERS.GEO_BOUNDING_BOX="geo_bounding_box",FILTERS.GEO_POLYGON="geo_polygon",FILTERS.SPATIAL_FILTER="spatial_filter"}(FILTERS||(FILTERS={}))},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){__webpack_require__.d(__webpack_exports__,"a",(function(){return StringFormat}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(28),_kbn_field_types_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4),_field_format__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(12),_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(7),_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(41);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const TRANSFORM_OPTIONS=[{kind:!1,text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.fieldFormats.string.transformOptions.none",{defaultMessage:"- None -"})},{kind:"lower",text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.fieldFormats.string.transformOptions.lower",{defaultMessage:"Lower Case"})},{kind:"upper",text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.fieldFormats.string.transformOptions.upper",{defaultMessage:"Upper Case"})},{kind:"title",text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.fieldFormats.string.transformOptions.title",{defaultMessage:"Title Case"})},{kind:"short",text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.fieldFormats.string.transformOptions.short",{defaultMessage:"Short Dots"})},{kind:"base64",text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.fieldFormats.string.transformOptions.base64",{defaultMessage:"Base64 Decode"})},{kind:"urlparam",text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.fieldFormats.string.transformOptions.url",{defaultMessage:"URL Param Decode"})}];class StringFormat extends _field_format__WEBPACK_IMPORTED_MODULE_3__.a{constructor(...args){super(...args),_defineProperty(this,"textConvert",val=>{switch(this.param("transform")){case"lower":return String(val).toLowerCase();case"upper":return String(val).toUpperCase();case"title":return this.toTitleCase(val);case"short":return Object(_utils__WEBPACK_IMPORTED_MODULE_5__.a)(val);case"base64":return this.base64Decode(val);case"urlparam":return decodeURIComponent(val);default:return Object(_utils__WEBPACK_IMPORTED_MODULE_1__.a)(val)}})}getParamDefaults(){return{transform:!1}}base64Decode(val){try{return Buffer.from(val,"base64").toString("utf8")}catch(e){return Object(_utils__WEBPACK_IMPORTED_MODULE_1__.a)(val)}}toTitleCase(val){return val.replace(/\w\S*/g,txt=>txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase())}}_defineProperty(StringFormat,"id",_types__WEBPACK_IMPORTED_MODULE_4__.a.STRING),_defineProperty(StringFormat,"title",_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("data.fieldFormats.string.title",{defaultMessage:"String"})),_defineProperty(StringFormat,"fieldType",[_kbn_field_types_types__WEBPACK_IMPORTED_MODULE_2__.b.NUMBER,_kbn_field_types_types__WEBPACK_IMPORTED_MODULE_2__.b.NUMBER_RANGE,_kbn_field_types_types__WEBPACK_IMPORTED_MODULE_2__.b.BOOLEAN,_kbn_field_types_types__WEBPACK_IMPORTED_MODULE_2__.b.DATE,_kbn_field_types_types__WEBPACK_IMPORTED_MODULE_2__.b.DATE_RANGE,_kbn_field_types_types__WEBPACK_IMPORTED_MODULE_2__.b.IP,_kbn_field_types_types__WEBPACK_IMPORTED_MODULE_2__.b.IP_RANGE,_kbn_field_types_types__WEBPACK_IMPORTED_MODULE_2__.b.ATTACHMENT,_kbn_field_types_types__WEBPACK_IMPORTED_MODULE_2__.b.GEO_POINT,_kbn_field_types_types__WEBPACK_IMPORTED_MODULE_2__.b.GEO_SHAPE,_kbn_field_types_types__WEBPACK_IMPORTED_MODULE_2__.b.STRING,_kbn_field_types_types__WEBPACK_IMPORTED_MODULE_2__.b.MURMUR3,_kbn_field_types_types__WEBPACK_IMPORTED_MODULE_2__.b.UNKNOWN,_kbn_field_types_types__WEBPACK_IMPORTED_MODULE_2__.b.CONFLICT]),_defineProperty(StringFormat,"transformOptions",TRANSFORM_OPTIONS)}).call(this,__webpack_require__(139).Buffer)},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return fieldList}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_index_pattern_field__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(67);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const fieldList=(specs=[],shortDotsEnable=!1)=>new class extends Array{constructor(){super(),_defineProperty(this,"byName",new Map),_defineProperty(this,"groups",new Map),_defineProperty(this,"setByName",field=>this.byName.set(field.name,field)),_defineProperty(this,"setByGroup",field=>{void 0===this.groups.get(field.type)&&this.groups.set(field.type,new Map),this.groups.get(field.type).set(field.name,field)}),_defineProperty(this,"removeByGroup",field=>this.groups.get(field.type).delete(field.name)),_defineProperty(this,"getAll",()=>[...this.byName.values()]),_defineProperty(this,"getByName",name=>this.byName.get(name)),_defineProperty(this,"getByType",type=>[...(this.groups.get(type)||new Map).values()]),_defineProperty(this,"add",field=>{const newField=new _index_pattern_field__WEBPACK_IMPORTED_MODULE_1__.a({...field,shortDotsEnable:shortDotsEnable});this.push(newField),this.setByName(newField),this.setByGroup(newField)}),_defineProperty(this,"remove",field=>{this.removeByGroup(field),this.byName.delete(field.name);const fieldIndex=Object(lodash__WEBPACK_IMPORTED_MODULE_0__.findIndex)(this,{name:field.name});this.splice(fieldIndex,1)}),_defineProperty(this,"update",field=>{const newField=new _index_pattern_field__WEBPACK_IMPORTED_MODULE_1__.a(field),index=this.findIndex(f=>f.name===newField.name);this.splice(index,1,newField),this.setByName(newField),this.removeByGroup(newField),this.setByGroup(newField)}),_defineProperty(this,"removeAll",()=>{this.length=0,this.byName.clear(),this.groups.clear()}),_defineProperty(this,"replaceAll",(spcs=[])=>{this.removeAll(),spcs.forEach(this.add)}),specs.map(field=>this.add(field))}toSpec({getFormatterForField:getFormatterForField}={}){return{...this.reduce((collector,field)=>(collector[field.name]=field.toSpec({getFormatterForField:getFormatterForField}),collector),{})}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return RUNTIME_FIELD_TYPES}));const RUNTIME_FIELD_TYPES=["keyword","long","double","date","ip","boolean"]},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return isQuery}));const isQuery=x=>!!x&&"object"==typeof x&&"string"==typeof x.language&&("string"==typeof x.query||"object"==typeof x.query&&!!x.query)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return RequestFailure}));var _kibana_utils_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(20);class RequestFailure extends _kibana_utils_common__WEBPACK_IMPORTED_MODULE_0__.KbnError{constructor(err=null,resp){var obj,key,value;super("Request to Elasticsearch failed: "+JSON.stringify(resp||(null==err?void 0:err.message))),value=void 0,(key="resp")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this.resp=resp}}},function(module,exports){},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return injectReferences}));const injectReferences=(searchSourceFields,references)=>{const searchSourceReturnFields={...searchSourceFields};if(searchSourceFields.indexRefName){const reference=references.find(ref=>ref.name===searchSourceFields.indexRefName);if(!reference)throw new Error("Could not find reference for "+searchSourceFields.indexRefName);searchSourceReturnFields.index=reference.id,delete searchSourceReturnFields.indexRefName}return searchSourceReturnFields.filter&&Array.isArray(searchSourceReturnFields.filter)&&searchSourceReturnFields.filter.forEach(filterRow=>{if(!filterRow.meta||!filterRow.meta.indexRefName)return;const reference=references.find(ref=>ref.name===filterRow.meta.indexRefName);if(!reference)throw new Error("Could not find reference for "+filterRow.meta.indexRefName);filterRow.meta.index=reference.id,delete filterRow.meta.indexRefName}),searchSourceReturnFields}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return parseSearchSourceJSON}));var _kibana_utils_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(20);const parseSearchSourceJSON=searchSourceJSON=>{let searchSourceValues;try{searchSourceValues=JSON.parse(searchSourceJSON)}catch(e){throw new _kibana_utils_common__WEBPACK_IMPORTED_MODULE_0__.InvalidJSONProperty(`Invalid JSON in search source. ${e.message} JSON: ${searchSourceJSON}`)}if(!searchSourceValues||"object"!=typeof searchSourceValues)throw new _kibana_utils_common__WEBPACK_IMPORTED_MODULE_0__.InvalidJSONProperty("Invalid JSON in search source.");return searchSourceValues}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SearchSourceService}));var ___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(69);class SearchSourceService{setup(){}start(indexPatterns,dependencies){return{create:Object(___WEBPACK_IMPORTED_MODULE_0__.createSearchSource)(indexPatterns,dependencies),createEmpty:()=>new ___WEBPACK_IMPORTED_MODULE_0__.SearchSource({},dependencies)}}stop(){}}},function(module,__webpack_exports__,__webpack_require__){"use strict";let SortDirection;__webpack_require__.d(__webpack_exports__,"a",(function(){return SortDirection})),function(SortDirection){SortDirection.asc="asc",SortDirection.desc="desc"}(SortDirection||(SortDirection={}))},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return isErrorResponse})),__webpack_require__.d(__webpack_exports__,"a",(function(){return isCompleteResponse})),__webpack_require__.d(__webpack_exports__,"c",(function(){return isPartialResponse}));const isErrorResponse=response=>!response||!response.isRunning&&!!response.isPartial,isCompleteResponse=response=>Boolean(response&&!response.isRunning&&!response.isPartial),isPartialResponse=response=>Boolean(response&&response.isRunning&&response.isPartial)},function(module,exports){var getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues){var rnds8=new Uint8Array(16);module.exports=function(){return getRandomValues(rnds8),rnds8}}else{var rnds=new Array(16);module.exports=function(){for(var r,i=0;i<16;i++)0==(3&i)&&(r=4294967296*Math.random()),rnds[i]=r>>>((3&i)<<3)&255;return rnds}}},function(module,exports){for(var byteToHex=[],i=0;i<256;++i)byteToHex[i]=(i+256).toString(16).substr(1);module.exports=function(buf,offset){var i=offset||0,bth=byteToHex;return[bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]]].join("")}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return dedupFilters})),__webpack_require__.d(__webpack_exports__,"e",(function(){return uniqFilters})),__webpack_require__.d(__webpack_exports__,"c",(function(){return compareFilters})),__webpack_require__.d(__webpack_exports__,"a",(function(){return COMPARE_ALL_OPTIONS})),__webpack_require__.d(__webpack_exports__,"b",(function(){}));var external_kbnSharedDeps_Lodash_=__webpack_require__(2);const COMPARE_ALL_OPTIONS={index:!0,disabled:!0,negate:!0,state:!0,alias:!0},mapFilter=(filter,comparators,excludedAttributes)=>{var _filter$meta,_filter$meta2;const cleaned=Object(external_kbnSharedDeps_Lodash_.omit)(filter,excludedAttributes);return comparators.index&&(cleaned.index=null===(_filter$meta=filter.meta)||void 0===_filter$meta?void 0:_filter$meta.index),comparators.negate&&(cleaned.negate=filter.meta&&Boolean(filter.meta.negate)),comparators.disabled&&(cleaned.disabled=filter.meta&&Boolean(filter.meta.disabled)),comparators.alias&&(cleaned.alias=null===(_filter$meta2=filter.meta)||void 0===_filter$meta2?void 0:_filter$meta2.alias),cleaned},mapFilterArray=(filters,comparators,excludedAttributes)=>Object(external_kbnSharedDeps_Lodash_.map)(filters,filter=>mapFilter(filter,comparators,excludedAttributes)),compareFilters=(first,second,comparatorOptions={})=>{if(!first||!second)return!1;let comparators={};const excludedAttributes=["$$hashKey","meta"];return comparators=Object(external_kbnSharedDeps_Lodash_.defaults)(comparatorOptions||{},{index:!1,state:!1,negate:!1,disabled:!1,alias:!1}),comparators.state||excludedAttributes.push("$state"),Array.isArray(first)&&Array.isArray(second)?Object(external_kbnSharedDeps_Lodash_.isEqual)(mapFilterArray(first,comparators,excludedAttributes),mapFilterArray(second,comparators,excludedAttributes)):!Array.isArray(first)&&!Array.isArray(second)&&Object(external_kbnSharedDeps_Lodash_.isEqual)(mapFilter(first,comparators,excludedAttributes),mapFilter(second,comparators,excludedAttributes))},dedupFilters=(existingFilters,filters,comparatorOptions={})=>(Array.isArray(filters)||(filters=[filters]),Object(external_kbnSharedDeps_Lodash_.filter)(filters,f=>!Object(external_kbnSharedDeps_Lodash_.find)(existingFilters,existingFilter=>compareFilters(existingFilter,f,comparatorOptions)))),uniqFilters=(filters,comparatorOptions={})=>{let results=[];return Object(external_kbnSharedDeps_Lodash_.each)(filters,filter=>{results=Object(external_kbnSharedDeps_Lodash_.union)(results,dedupFilters(results,[filter]),comparatorOptions)}),results}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return calculateBounds})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getAbsoluteTimeRange})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getTime})),__webpack_require__.d(__webpack_exports__,"d",(function(){return isTimeRange}));var target=__webpack_require__(18),target_default=__webpack_require__.n(target),common=__webpack_require__(1);function calculateBounds(timeRange,options={}){return{min:target_default.a.parse(timeRange.from,{forceNow:options.forceNow}),max:target_default.a.parse(timeRange.to,{roundUp:!0,forceNow:options.forceNow})}}function getAbsoluteTimeRange(timeRange,{forceNow:forceNow}={}){const{min:min,max:max}=calculateBounds(timeRange,{forceNow:forceNow});return{from:min?min.toISOString():timeRange.from,to:max?max.toISOString():timeRange.to}}function getTime(indexPattern,timeRange,options){return function(indexPattern,timeRange,fieldName,forceNow){if(!indexPattern)return;const field=indexPattern.fields.find(f=>f.name===(fieldName||indexPattern.timeFieldName));if(!field)return;const bounds=calculateBounds(timeRange,{forceNow:forceNow});if(!bounds)return;return Object(common.buildRangeFilter)(field,{...bounds.min&&{gte:bounds.min.toISOString()},...bounds.max&&{lte:bounds.max.toISOString()},format:"strict_date_optional_time"},indexPattern)}(indexPattern,timeRange,(null==options?void 0:options.fieldName)||(null==indexPattern?void 0:indexPattern.timeFieldName),null==options?void 0:options.forceNow)}const isTimeRange=x=>!!x&&"object"==typeof x&&"string"==typeof x.from&&"string"==typeof x.to},function(module,__webpack_exports__,__webpack_require__){"use strict";let SearchSessionStatus;__webpack_require__.d(__webpack_exports__,"c",(function(){return SearchSessionStatus})),__webpack_require__.d(__webpack_exports__,"b",(function(){return SEARCH_SESSION_TYPE})),__webpack_require__.d(__webpack_exports__,"a",(function(){return SEARCH_SESSIONS_TABLE_ID})),function(SearchSessionStatus){SearchSessionStatus.IN_PROGRESS="in_progress",SearchSessionStatus.ERROR="error",SearchSessionStatus.COMPLETE="complete",SearchSessionStatus.CANCELLED="cancelled",SearchSessionStatus.EXPIRED="expired"}(SearchSessionStatus||(SearchSessionStatus={}));const SEARCH_SESSION_TYPE="search-session",SEARCH_SESSIONS_TABLE_ID="searchSessionsMgmtUiTable"},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return fetchSoon}));var constants=__webpack_require__(26),fetch=__webpack_require__(45);const defaultSearchStrategy_search=params=>function({searchRequests:searchRequests,getConfig:getConfig,legacy:legacy}){const{callMsearch:callMsearch,loadingCount$:loadingCount$}=legacy,requests=searchRequests.map(({index:index,body:body})=>({header:{index:index.title||index,preference:Object(fetch.getPreference)(getConfig)},body:body})),abortController=new AbortController;let resolved=!1;loadingCount$.next(loadingCount$.getValue()+1);const cleanup=()=>{resolved||(resolved=!0,loadingCount$.next(loadingCount$.getValue()-1),loadingCount$.complete())};return{abort:()=>{abortController.abort(),cleanup()},searching:callMsearch({body:{searches:requests},signal:abortController.signal}).then(res=>{var _res$body;return null==res||null===(_res$body=res.body)||void 0===_res$body?void 0:_res$body.responses}).finally(()=>cleanup())}}(params);function callClient(searchRequests,requestsOptions=[],fetchHandlers){const requestOptionEntries=searchRequests.map((request,i)=>[request,requestsOptions[i]]),requestOptionsMap=new Map(requestOptionEntries),requestResponseMap=new Map,{searching:searching,abort:abort}=defaultSearchStrategy_search({searchRequests:searchRequests,...fetchHandlers});return searchRequests.forEach((request,i)=>{const response=searching.then(results=>fetchHandlers.onResponse(request,results[i])),{abortSignal:abortSignal=null}=requestOptionsMap.get(request)||{};abortSignal&&abortSignal.addEventListener("abort",abort),requestResponseMap.set(request,response)}),searchRequests.map(request=>requestResponseMap.get(request))}async function fetchSoon(request,options,fetchHandlers){const msToDelay=fetchHandlers.getConfig(constants.c.COURIER_BATCH_SEARCHES)?50:0;return async function(request,options,fetchHandlers,ms){if(0===ms)return callClient([request],[options],fetchHandlers)[0];const i=requestsToFetch.length;requestsToFetch=[...requestsToFetch,request],requestOptions=[...requestOptions,options];return(await(fetchInProgress=fetchInProgress||function(fn,ms){return new Promise(resolve=>{setTimeout(()=>resolve(fn()),ms)})}(()=>{const response=callClient(requestsToFetch,requestOptions,fetchHandlers);return requestsToFetch=[],requestOptions=[],fetchInProgress=null,response},ms)))[i]}(request,options,fetchHandlers,msToDelay)}let requestsToFetch=[],requestOptions=[],fetchInProgress=null},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return datatableToCSV})),__webpack_require__.d(__webpack_exports__,"a",(function(){return CSV_MIME_TYPE}));const nonAlphaNumRE=/[^a-zA-Z0-9]/,allDoubleQuoteRE=/"/g,CSV_MIME_TYPE="text/plain;charset=utf-8";function export_csv_escape(val,quoteValues){return null!=val&&"object"==typeof val&&(val=val.valueOf()),val=String(val),quoteValues&&nonAlphaNumRE.test(val)&&(val=`"${val.replace(allDoubleQuoteRE,'""')}"`),val}function datatableToCSV({columns:columns,rows:rows},{csvSeparator:csvSeparator,quoteValues:quoteValues,formatFactory:formatFactory,raw:raw}){const header=columns.map(col=>export_csv_escape(col.name,quoteValues)),formatters=columns.reduce((memo,{id:id,meta:meta})=>(memo[id]=formatFactory(null==meta?void 0:meta.params),memo),{}),csvRows=rows.map(row=>columns.map(column=>export_csv_escape(raw?row[column.id]:formatters[column.id].convert(row[column.id]),quoteValues)));return 0===header.length?"":[header,...csvRows].map(row=>row.join(csvSeparator)).join("\r\n")+"\r\n"}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ES_SEARCH_STRATEGY}));const ES_SEARCH_STRATEGY="es"},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createSearchSource}));var external_kbnSharedDeps_Lodash_=__webpack_require__(2);var search_source=__webpack_require__(91);const createSearchSource=(indexPatterns,searchSourceDependencies)=>async(searchSourceFields={})=>{const fields={...searchSourceFields};fields.index&&"string"==typeof fields.index&&(fields.index=await indexPatterns.get(searchSourceFields.index));const searchSource=new search_source.a(fields,searchSourceDependencies),query=searchSource.getOwnField("query");return void 0!==query&&searchSource.setField("query",function(query){return Object(external_kbnSharedDeps_Lodash_.has)(query,"language")?query:{query:query,language:"lucene"}}(query)),searchSource}},function(module,exports){var suffixes;module.exports=[{id:"be-nl",name:"Dutch (Belgium)",lang:{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:" mln",billion:" mld",trillion:" bln"},ordinal:function(number){var remainder=number%100;return 0!==number&&remainder<=1||8===remainder||remainder>=20?"ste":"de"},currency:{symbol:"€ "}}},{id:"chs",name:"Simplified Chinese",lang:{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"千",million:"百万",billion:"十亿",trillion:"兆"},ordinal:function(number){return"."},currency:{symbol:"¥"}}},{id:"cs",name:"Czech",lang:{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"tis.",million:"mil.",billion:"b",trillion:"t"},ordinal:function(){return"."},currency:{symbol:"Kč"}}},{id:"da-dk",name:"Danish (Denmark)",lang:{delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"k",million:"mio",billion:"mia",trillion:"b"},ordinal:function(number){return"."},currency:{symbol:"DKK"}}},{id:"de-ch",name:"German (Switzerland)",lang:{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(number){return"."},currency:{symbol:"CHF"}}},{id:"de",name:"German",lang:{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(number){return"."},currency:{symbol:"€"}}},{id:"en-gb",name:"English (UK)",lang:{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(number){var b=number%10;return 1==~~(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"},currency:{symbol:"£"}}},{id:"es-ES",name:"Spanish (Spain)",lang:{delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"k",million:"mm",billion:"b",trillion:"t"},ordinal:function(number){var b=number%10;return 1===b||3===b?"er":2===b?"do":7===b||0===b?"mo":8===b?"vo":9===b?"no":"to"},currency:{symbol:"€"}}},{id:"es",name:"Spanish",lang:{delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"k",million:"mm",billion:"b",trillion:"t"},ordinal:function(number){var b=number%10;return 1===b||3===b?"er":2===b?"do":7===b||0===b?"mo":8===b?"vo":9===b?"no":"to"},currency:{symbol:"$"}}},{id:"et",name:"Estonian",lang:{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:" tuh",million:" mln",billion:" mld",trillion:" trl"},ordinal:function(number){return"."},currency:{symbol:"€"}}},{id:"fi",name:"Finnish",lang:{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"M",billion:"G",trillion:"T"},ordinal:function(number){return"."},currency:{symbol:"€"}}},{id:"fr-CA",name:"French (Canada)",lang:{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"M",billion:"G",trillion:"T"},ordinal:function(number){return 1===number?"er":"e"},currency:{symbol:"$"}}},{id:"fr-ch",name:"French (Switzerland)",lang:{delimiters:{thousands:"'",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(number){return 1===number?"er":"e"},currency:{symbol:"CHF"}}},{id:"fr",name:"French",lang:{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(number){return 1===number?"er":"e"},currency:{symbol:"€"}}},{id:"hu",name:"Hungarian",lang:{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"E",million:"M",billion:"Mrd",trillion:"T"},ordinal:function(number){return"."},currency:{symbol:" Ft"}}},{id:"it",name:"Italian",lang:{delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"mila",million:"mil",billion:"b",trillion:"t"},ordinal:function(number){return"º"},currency:{symbol:"€"}}},{id:"ja",name:"Japanese",lang:{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"千",million:"百万",billion:"十億",trillion:"兆"},ordinal:function(number){return"."},currency:{symbol:"¥"}}},{id:"nl-nl",name:"Dutch (Netherlands)",lang:{delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"k",million:"mln",billion:"mrd",trillion:"bln"},ordinal:function(number){var remainder=number%100;return 0!==number&&remainder<=1||8===remainder||remainder>=20?"ste":"de"},currency:{symbol:"€ "}}},{id:"pl",name:"Polish",lang:{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"tys.",million:"mln",billion:"mld",trillion:"bln"},ordinal:function(number){return"."},currency:{symbol:"PLN"}}},{id:"pt-br",name:"Portuguese (Brazil)",lang:{delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"mil",million:"milhões",billion:"b",trillion:"t"},ordinal:function(number){return"º"},currency:{symbol:"R$"}}},{id:"pt-pt",name:"Portuguese",lang:{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(number){return"º"},currency:{symbol:"€"}}},{id:"ru-UA",name:"Russian (Ukraine)",lang:{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"тыс.",million:"млн",billion:"b",trillion:"t"},ordinal:function(){return"."},currency:{symbol:"₴"}}},{id:"ru",name:"Russian",lang:{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"тыс.",million:"млн",billion:"b",trillion:"t"},ordinal:function(){return"."},currency:{symbol:"руб."}}},{id:"sk",name:"Slovak",lang:{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"tis.",million:"mil.",billion:"b",trillion:"t"},ordinal:function(){return"."},currency:{symbol:"€"}}},{id:"th",name:"Thai",lang:{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"พัน",million:"ล้าน",billion:"พันล้าน",trillion:"ล้านล้าน"},ordinal:function(number){return"."},currency:{symbol:"฿"}}},{id:"tr",name:"Turkish",lang:{delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"bin",million:"milyon",billion:"milyar",trillion:"trilyon"},ordinal:(suffixes={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"},function(number){if(0===number)return"'ıncı";var a=number%10;return suffixes[a]||suffixes[number%100-a]||suffixes[number>=100?100:null]}),currency:{symbol:"₺"}}},{id:"uk-UA",name:"Ukrainian",lang:{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"тис.",million:"млн",billion:"млрд",trillion:"блн"},ordinal:function(){return""},currency:{symbol:"₴"}}}]},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/inspector/common");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.SaferLodashSet},function(module,exports,__webpack_require__){var v1=__webpack_require__(145),v4=__webpack_require__(146),uuid=v4;uuid.v1=v1,uuid.v4=v4,module.exports=uuid},function(module,exports,__webpack_require__){"use strict";module.exports=function equal(a,b){if(a===b)return!0;if(a&&b&&"object"==typeof a&&"object"==typeof b){if(a.constructor!==b.constructor)return!1;var length,i,keys;if(Array.isArray(a)){if((length=a.length)!=b.length)return!1;for(i=length;0!=i--;)if(!equal(a[i],b[i]))return!1;return!0}if(a.constructor===RegExp)return a.source===b.source&&a.flags===b.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===b.toString();if((length=(keys=Object.keys(a)).length)!==Object.keys(b).length)return!1;for(i=length;0!=i--;)if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return!1;for(i=length;0!=i--;){var key=keys[i];if(!equal(a[key],b[key]))return!1}return!0}return a!=a&&b!=b}},function(module,exports,__webpack_require__){"use strict";const strictUriEncode=__webpack_require__(156),decodeComponent=__webpack_require__(157),splitOnFirst=__webpack_require__(158);function validateArrayFormatSeparator(value){if("string"!=typeof value||1!==value.length)throw new TypeError("arrayFormatSeparator must be single character string")}function encode(value,options){return options.encode?options.strict?strictUriEncode(value):encodeURIComponent(value):value}function decode(value,options){return options.decode?decodeComponent(value):value}function removeHash(input){const hashStart=input.indexOf("#");return-1!==hashStart&&(input=input.slice(0,hashStart)),input}function extract(input){const queryStart=(input=removeHash(input)).indexOf("?");return-1===queryStart?"":input.slice(queryStart+1)}function parseValue(value,options){return options.parseNumbers&&!Number.isNaN(Number(value))&&"string"==typeof value&&""!==value.trim()?value=Number(value):!options.parseBooleans||null===value||"true"!==value.toLowerCase()&&"false"!==value.toLowerCase()||(value="true"===value.toLowerCase()),value}function parse(input,options){validateArrayFormatSeparator((options=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},options)).arrayFormatSeparator);const formatter=function(options){let result;switch(options.arrayFormat){case"index":return(key,value,accumulator)=>{result=/\[(\d*)\]$/.exec(key),key=key.replace(/\[\d*\]$/,""),result?(void 0===accumulator[key]&&(accumulator[key]={}),accumulator[key][result[1]]=value):accumulator[key]=value};case"bracket":return(key,value,accumulator)=>{result=/(\[\])$/.exec(key),key=key.replace(/\[\]$/,""),result?void 0!==accumulator[key]?accumulator[key]=[].concat(accumulator[key],value):accumulator[key]=[value]:accumulator[key]=value};case"comma":case"separator":return(key,value,accumulator)=>{const newValue="string"==typeof value&&value.split("").indexOf(options.arrayFormatSeparator)>-1?value.split(options.arrayFormatSeparator).map(item=>decode(item,options)):null===value?value:decode(value,options);accumulator[key]=newValue};default:return(key,value,accumulator)=>{void 0!==accumulator[key]?accumulator[key]=[].concat(accumulator[key],value):accumulator[key]=value}}}(options),ret=Object.create(null);if("string"!=typeof input)return ret;if(!(input=input.trim().replace(/^[?#&]/,"")))return ret;for(const param of input.split("&")){let[key,value]=splitOnFirst(options.decode?param.replace(/\+/g," "):param,"=");value=void 0===value?null:["comma","separator"].includes(options.arrayFormat)?value:decode(value,options),formatter(decode(key,options),value,ret)}for(const key of Object.keys(ret)){const value=ret[key];if("object"==typeof value&&null!==value)for(const k of Object.keys(value))value[k]=parseValue(value[k],options);else ret[key]=parseValue(value,options)}return!1===options.sort?ret:(!0===options.sort?Object.keys(ret).sort():Object.keys(ret).sort(options.sort)).reduce((result,key)=>{const value=ret[key];return Boolean(value)&&"object"==typeof value&&!Array.isArray(value)?result[key]=function keysSorter(input){return Array.isArray(input)?input.sort():"object"==typeof input?keysSorter(Object.keys(input)).sort((a,b)=>Number(a)-Number(b)).map(key=>input[key]):input}(value):result[key]=value,result},Object.create(null))}exports.extract=extract,exports.parse=parse,exports.stringify=(object,options)=>{if(!object)return"";validateArrayFormatSeparator((options=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},options)).arrayFormatSeparator);const shouldFilter=key=>options.skipNull&&null==object[key]||options.skipEmptyString&&""===object[key],formatter=function(options){switch(options.arrayFormat){case"index":return key=>(result,value)=>{const index=result.length;return void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,[encode(key,options),"[",index,"]"].join("")]:[...result,[encode(key,options),"[",encode(index,options),"]=",encode(value,options)].join("")]};case"bracket":return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,[encode(key,options),"[]"].join("")]:[...result,[encode(key,options),"[]=",encode(value,options)].join("")];case"comma":case"separator":return key=>(result,value)=>null==value||0===value.length?result:0===result.length?[[encode(key,options),"=",encode(value,options)].join("")]:[[result,encode(value,options)].join(options.arrayFormatSeparator)];default:return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,encode(key,options)]:[...result,[encode(key,options),"=",encode(value,options)].join("")]}}(options),objectCopy={};for(const key of Object.keys(object))shouldFilter(key)||(objectCopy[key]=object[key]);const keys=Object.keys(objectCopy);return!1!==options.sort&&keys.sort(options.sort),keys.map(key=>{const value=object[key];return void 0===value?"":null===value?encode(key,options):Array.isArray(value)?value.reduce(formatter(key),[]).join("&"):encode(key,options)+"="+encode(value,options)}).filter(x=>x.length>0).join("&")},exports.parseUrl=(input,options)=>{options=Object.assign({decode:!0},options);const[url,hash]=splitOnFirst(input,"#");return Object.assign({url:url.split("?")[0]||"",query:parse(extract(input),options)},options&&options.parseFragmentIdentifier&&hash?{fragmentIdentifier:decode(hash,options)}:{})},exports.stringifyUrl=(input,options)=>{options=Object.assign({encode:!0,strict:!0},options);const url=removeHash(input.url).split("?")[0]||"",queryFromUrl=exports.extract(input.url),parsedQueryFromUrl=exports.parse(queryFromUrl,{sort:!1}),query=Object.assign(parsedQueryFromUrl,input.query);let queryString=exports.stringify(query,options);queryString&&(queryString="?"+queryString);let hash=function(url){let hash="";const hashStart=url.indexOf("#");return-1!==hashStart&&(hash=url.slice(hashStart)),hash}(input.url);return input.fragmentIdentifier&&(hash="#"+encode(input.fragmentIdentifier,options)),`${url}${queryString}${hash}`}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(138);__kbnBundles__.define("plugin/data/public",__webpack_require__,32),__kbnBundles__.define("plugin/data/common",__webpack_require__,1)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__.data},function(module,exports,__webpack_require__){"use strict";(function(global){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var base64=__webpack_require__(141),ieee754=__webpack_require__(142),isArray=__webpack_require__(143);function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(that,length){if(kMaxLength()<length)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(that=new Uint8Array(length)).__proto__=Buffer.prototype:(null===that&&(that=new Buffer(length)),that.length=length),that}function Buffer(arg,encodingOrOffset,length){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(arg,encodingOrOffset,length);if("number"==typeof arg){if("string"==typeof encodingOrOffset)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,arg)}return from(this,arg,encodingOrOffset,length)}function from(that,value,encodingOrOffset,length){if("number"==typeof value)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&value instanceof ArrayBuffer?function(that,array,byteOffset,length){if(array.byteLength,byteOffset<0||array.byteLength<byteOffset)throw new RangeError("'offset' is out of bounds");if(array.byteLength<byteOffset+(length||0))throw new RangeError("'length' is out of bounds");array=void 0===byteOffset&&void 0===length?new Uint8Array(array):void 0===length?new Uint8Array(array,byteOffset):new Uint8Array(array,byteOffset,length);Buffer.TYPED_ARRAY_SUPPORT?(that=array).__proto__=Buffer.prototype:that=fromArrayLike(that,array);return that}(that,value,encodingOrOffset,length):"string"==typeof value?function(that,string,encoding){"string"==typeof encoding&&""!==encoding||(encoding="utf8");if(!Buffer.isEncoding(encoding))throw new TypeError('"encoding" must be a valid string encoding');var length=0|byteLength(string,encoding),actual=(that=createBuffer(that,length)).write(string,encoding);actual!==length&&(that=that.slice(0,actual));return that}(that,value,encodingOrOffset):function(that,obj){if(Buffer.isBuffer(obj)){var len=0|checked(obj.length);return 0===(that=createBuffer(that,len)).length||obj.copy(that,0,0,len),that}if(obj){if("undefined"!=typeof ArrayBuffer&&obj.buffer instanceof ArrayBuffer||"length"in obj)return"number"!=typeof obj.length||(val=obj.length)!=val?createBuffer(that,0):fromArrayLike(that,obj);if("Buffer"===obj.type&&isArray(obj.data))return fromArrayLike(that,obj.data)}var val;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(that,value)}function assertSize(size){if("number"!=typeof size)throw new TypeError('"size" argument must be a number');if(size<0)throw new RangeError('"size" argument must not be negative')}function allocUnsafe(that,size){if(assertSize(size),that=createBuffer(that,size<0?0:0|checked(size)),!Buffer.TYPED_ARRAY_SUPPORT)for(var i=0;i<size;++i)that[i]=0;return that}function fromArrayLike(that,array){var length=array.length<0?0:0|checked(array.length);that=createBuffer(that,length);for(var i=0;i<length;i+=1)that[i]=255&array[i];return that}function checked(length){if(length>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|length}function byteLength(string,encoding){if(Buffer.isBuffer(string))return string.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(string)||string instanceof ArrayBuffer))return string.byteLength;"string"!=typeof string&&(string=""+string);var len=string.length;if(0===len)return 0;for(var loweredCase=!1;;)switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":case void 0:return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*len;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase(),loweredCase=!0}}function slowToString(encoding,start,end){var loweredCase=!1;if((void 0===start||start<0)&&(start=0),start>this.length)return"";if((void 0===end||end>this.length)&&(end=this.length),end<=0)return"";if((end>>>=0)<=(start>>>=0))return"";for(encoding||(encoding="utf8");;)switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase(),loweredCase=!0}}function swap(b,n,m){var i=b[n];b[n]=b[m],b[m]=i}function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(0===buffer.length)return-1;if("string"==typeof byteOffset?(encoding=byteOffset,byteOffset=0):byteOffset>2147483647?byteOffset=2147483647:byteOffset<-2147483648&&(byteOffset=-2147483648),byteOffset=+byteOffset,isNaN(byteOffset)&&(byteOffset=dir?0:buffer.length-1),byteOffset<0&&(byteOffset=buffer.length+byteOffset),byteOffset>=buffer.length){if(dir)return-1;byteOffset=buffer.length-1}else if(byteOffset<0){if(!dir)return-1;byteOffset=0}if("string"==typeof val&&(val=Buffer.from(val,encoding)),Buffer.isBuffer(val))return 0===val.length?-1:arrayIndexOf(buffer,val,byteOffset,encoding,dir);if("number"==typeof val)return val&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?dir?Uint8Array.prototype.indexOf.call(buffer,val,byteOffset):Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset):arrayIndexOf(buffer,[val],byteOffset,encoding,dir);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var i,indexSize=1,arrLength=arr.length,valLength=val.length;if(void 0!==encoding&&("ucs2"===(encoding=String(encoding).toLowerCase())||"ucs-2"===encoding||"utf16le"===encoding||"utf-16le"===encoding)){if(arr.length<2||val.length<2)return-1;indexSize=2,arrLength/=2,valLength/=2,byteOffset/=2}function read(buf,i){return 1===indexSize?buf[i]:buf.readUInt16BE(i*indexSize)}if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++)if(read(arr,i)===read(val,-1===foundIndex?0:i-foundIndex)){if(-1===foundIndex&&(foundIndex=i),i-foundIndex+1===valLength)return foundIndex*indexSize}else-1!==foundIndex&&(i-=i-foundIndex),foundIndex=-1}else for(byteOffset+valLength>arrLength&&(byteOffset=arrLength-valLength),i=byteOffset;i>=0;i--){for(var found=!0,j=0;j<valLength;j++)if(read(arr,i+j)!==read(val,j)){found=!1;break}if(found)return i}return-1}function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;length?(length=Number(length))>remaining&&(length=remaining):length=remaining;var strLen=string.length;if(strLen%2!=0)throw new TypeError("Invalid hex string");length>strLen/2&&(length=strLen/2);for(var i=0;i<length;++i){var parsed=parseInt(string.substr(2*i,2),16);if(isNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(function(str){for(var byteArray=[],i=0;i<str.length;++i)byteArray.push(255&str.charCodeAt(i));return byteArray}(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(function(str,units){for(var c,hi,lo,byteArray=[],i=0;i<str.length&&!((units-=2)<0);++i)c=str.charCodeAt(i),hi=c>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}(string,buf.length-offset),buf,offset,length)}function base64Slice(buf,start,end){return 0===start&&end===buf.length?base64.fromByteArray(buf):base64.fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);for(var res=[],i=start;i<end;){var secondByte,thirdByte,fourthByte,tempCodePoint,firstByte=buf[i],codePoint=null,bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end)switch(bytesPerSequence){case 1:firstByte<128&&(codePoint=firstByte);break;case 2:128==(192&(secondByte=buf[i+1]))&&(tempCodePoint=(31&firstByte)<<6|63&secondByte)>127&&(codePoint=tempCodePoint);break;case 3:secondByte=buf[i+1],thirdByte=buf[i+2],128==(192&secondByte)&&128==(192&thirdByte)&&(tempCodePoint=(15&firstByte)<<12|(63&secondByte)<<6|63&thirdByte)>2047&&(tempCodePoint<55296||tempCodePoint>57343)&&(codePoint=tempCodePoint);break;case 4:secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],128==(192&secondByte)&&128==(192&thirdByte)&&128==(192&fourthByte)&&(tempCodePoint=(15&firstByte)<<18|(63&secondByte)<<12|(63&thirdByte)<<6|63&fourthByte)>65535&&tempCodePoint<1114112&&(codePoint=tempCodePoint)}null===codePoint?(codePoint=65533,bytesPerSequence=1):codePoint>65535&&(codePoint-=65536,res.push(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint),res.push(codePoint),i+=bytesPerSequence}return function(codePoints){var len=codePoints.length;if(len<=4096)return String.fromCharCode.apply(String,codePoints);var res="",i=0;for(;i<len;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=4096));return res}(res)}exports.Buffer=Buffer,exports.SlowBuffer=function(length){+length!=length&&(length=0);return Buffer.alloc(+length)},exports.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:function(){try{var arr=new Uint8Array(1);return arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===arr.foo()&&"function"==typeof arr.subarray&&0===arr.subarray(1,1).byteLength}catch(e){return!1}}(),exports.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(arr){return arr.__proto__=Buffer.prototype,arr},Buffer.from=function(value,encodingOrOffset,length){return from(null,value,encodingOrOffset,length)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(size,fill,encoding){return function(that,size,fill,encoding){return assertSize(size),size<=0?createBuffer(that,size):void 0!==fill?"string"==typeof encoding?createBuffer(that,size).fill(fill,encoding):createBuffer(that,size).fill(fill):createBuffer(that,size)}(null,size,fill,encoding)},Buffer.allocUnsafe=function(size){return allocUnsafe(null,size)},Buffer.allocUnsafeSlow=function(size){return allocUnsafe(null,size)},Buffer.isBuffer=function(b){return!(null==b||!b._isBuffer)},Buffer.compare=function(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);i<len;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return x<y?-1:y<x?1:0},Buffer.isEncoding=function(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(list,length){if(!isArray(list))throw new TypeError('"list" argument must be an Array of Buffers');if(0===list.length)return Buffer.alloc(0);var i;if(void 0===length)for(length=0,i=0;i<list.length;++i)length+=list[i].length;var buffer=Buffer.allocUnsafe(length),pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(!Buffer.isBuffer(buf))throw new TypeError('"list" argument must be an Array of Buffers');buf.copy(buffer,pos),pos+=buf.length}return buffer},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var len=this.length;if(len%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<len;i+=2)swap(this,i,i+1);return this},Buffer.prototype.swap32=function(){var len=this.length;if(len%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<len;i+=4)swap(this,i,i+3),swap(this,i+1,i+2);return this},Buffer.prototype.swap64=function(){var len=this.length;if(len%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<len;i+=8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this},Buffer.prototype.toString=function(){var length=0|this.length;return 0===length?"":0===arguments.length?utf8Slice(this,0,length):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===Buffer.compare(this,b)},Buffer.prototype.inspect=function(){var str="",max=exports.INSPECT_MAX_BYTES;return this.length>0&&(str=this.toString("hex",0,max).match(/.{2}/g).join(" "),this.length>max&&(str+=" ... ")),"<Buffer "+str+">"},Buffer.prototype.compare=function(target,start,end,thisStart,thisEnd){if(!Buffer.isBuffer(target))throw new TypeError("Argument must be a Buffer");if(void 0===start&&(start=0),void 0===end&&(end=target?target.length:0),void 0===thisStart&&(thisStart=0),void 0===thisEnd&&(thisEnd=this.length),start<0||end>target.length||thisStart<0||thisEnd>this.length)throw new RangeError("out of range index");if(thisStart>=thisEnd&&start>=end)return 0;if(thisStart>=thisEnd)return-1;if(start>=end)return 1;if(this===target)return 0;for(var x=(thisEnd>>>=0)-(thisStart>>>=0),y=(end>>>=0)-(start>>>=0),len=Math.min(x,y),thisCopy=this.slice(thisStart,thisEnd),targetCopy=target.slice(start,end),i=0;i<len;++i)if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i],y=targetCopy[i];break}return x<y?-1:y<x?1:0},Buffer.prototype.includes=function(val,byteOffset,encoding){return-1!==this.indexOf(val,byteOffset,encoding)},Buffer.prototype.indexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!0)},Buffer.prototype.lastIndexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!1)},Buffer.prototype.write=function(string,offset,length,encoding){if(void 0===offset)encoding="utf8",length=this.length,offset=0;else if(void 0===length&&"string"==typeof offset)encoding=offset,length=this.length,offset=0;else{if(!isFinite(offset))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");offset|=0,isFinite(length)?(length|=0,void 0===encoding&&(encoding="utf8")):(encoding=length,length=void 0)}var remaining=this.length-offset;if((void 0===length||length>remaining)&&(length=remaining),string.length>0&&(length<0||offset<0)||offset>this.length)throw new RangeError("Attempt to write outside buffer bounds");encoding||(encoding="utf8");for(var loweredCase=!1;;)switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase(),loweredCase=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(127&buf[i]);return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(buf[i]);return ret}function hexSlice(buf,start,end){var len=buf.length;(!start||start<0)&&(start=0),(!end||end<0||end>len)&&(end=len);for(var out="",i=start;i<end;++i)out+=toHex(buf[i]);return out}function utf16leSlice(buf,start,end){for(var bytes=buf.slice(start,end),res="",i=0;i<bytes.length;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}function checkOffset(offset,ext,length){if(offset%1!=0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}function objectWriteUInt16(buf,value,offset,littleEndian){value<0&&(value=65535+value+1);for(var i=0,j=Math.min(buf.length-offset,2);i<j;++i)buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>8*(littleEndian?i:1-i)}function objectWriteUInt32(buf,value,offset,littleEndian){value<0&&(value=4294967295+value+1);for(var i=0,j=Math.min(buf.length-offset,4);i<j;++i)buf[offset+i]=value>>>8*(littleEndian?i:3-i)&255}function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,0,offset,4),ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,0,offset,8),ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}Buffer.prototype.slice=function(start,end){var newBuf,len=this.length;if((start=~~start)<0?(start+=len)<0&&(start=0):start>len&&(start=len),(end=void 0===end?len:~~end)<0?(end+=len)<0&&(end=0):end>len&&(end=len),end<start&&(end=start),Buffer.TYPED_ARRAY_SUPPORT)(newBuf=this.subarray(start,end)).__proto__=Buffer.prototype;else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,void 0);for(var i=0;i<sliceLen;++i)newBuf[i]=this[i+start]}return newBuf},Buffer.prototype.readUIntLE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val},Buffer.prototype.readUIntBE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset+--byteLength],mul=1;byteLength>0&&(mul*=256);)val+=this[offset+--byteLength]*mul;return val},Buffer.prototype.readUInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),this[offset]},Buffer.prototype.readUInt16LE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8},Buffer.prototype.readUInt16BE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]},Buffer.prototype.readUInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+16777216*this[offset+3]},Buffer.prototype.readUInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),16777216*this[offset]+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])},Buffer.prototype.readIntLE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val>=(mul*=128)&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readIntBE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var i=byteLength,mul=1,val=this[offset+--i];i>0&&(mul*=256);)val+=this[offset+--i]*mul;return val>=(mul*=128)&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),128&this[offset]?-1*(255-this[offset]+1):this[offset]},Buffer.prototype.readInt16LE=function(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt16BE=function(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24},Buffer.prototype.readInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]},Buffer.prototype.readFloatLE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!0,23,4)},Buffer.prototype.readFloatBE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!1,23,4)},Buffer.prototype.readDoubleLE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!0,52,8)},Buffer.prototype.readDoubleBE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!1,52,8)},Buffer.prototype.writeUIntLE=function(value,offset,byteLength,noAssert){(value=+value,offset|=0,byteLength|=0,noAssert)||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var mul=1,i=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUIntBE=function(value,offset,byteLength,noAssert){(value=+value,offset|=0,byteLength|=0,noAssert)||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var i=byteLength-1,mul=1;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUInt8=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),this[offset]=255&value,offset+1},Buffer.prototype.writeUInt16LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeUInt16BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeUInt32LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=255&value):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeUInt32BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeIntLE=function(value,offset,byteLength,noAssert){if(value=+value,offset|=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0,mul=1,sub=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i-1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeIntBE=function(value,offset,byteLength,noAssert){if(value=+value,offset|=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1,mul=1,sub=0;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i+1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeInt8=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),value<0&&(value=255+value+1),this[offset]=255&value,offset+1},Buffer.prototype.writeInt16LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeInt16BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeInt32LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeInt32BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),value<0&&(value=4294967295+value+1),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeFloatLE=function(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.copy=function(target,targetStart,start,end){if(start||(start=0),end||0===end||(end=this.length),targetStart>=target.length&&(targetStart=target.length),targetStart||(targetStart=0),end>0&&end<start&&(end=start),end===start)return 0;if(0===target.length||0===this.length)return 0;if(targetStart<0)throw new RangeError("targetStart out of bounds");if(start<0||start>=this.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");end>this.length&&(end=this.length),target.length-targetStart<end-start&&(end=target.length-targetStart+start);var i,len=end-start;if(this===target&&start<targetStart&&targetStart<end)for(i=len-1;i>=0;--i)target[i+targetStart]=this[i+start];else if(len<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;i<len;++i)target[i+targetStart]=this[i+start];else Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart);return len},Buffer.prototype.fill=function(val,start,end,encoding){if("string"==typeof val){if("string"==typeof start?(encoding=start,start=0,end=this.length):"string"==typeof end&&(encoding=end,end=this.length),1===val.length){var code=val.charCodeAt(0);code<256&&(val=code)}if(void 0!==encoding&&"string"!=typeof encoding)throw new TypeError("encoding must be a string");if("string"==typeof encoding&&!Buffer.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding)}else"number"==typeof val&&(val&=255);if(start<0||this.length<start||this.length<end)throw new RangeError("Out of range index");if(end<=start)return this;var i;if(start>>>=0,end=void 0===end?this.length:end>>>0,val||(val=0),"number"==typeof val)for(i=start;i<end;++i)this[i]=val;else{var bytes=Buffer.isBuffer(val)?val:utf8ToBytes(new Buffer(val,encoding).toString()),len=bytes.length;for(i=0;i<end-start;++i)this[i+start]=bytes[i%len]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function toHex(n){return n<16?"0"+n.toString(16):n.toString(16)}function utf8ToBytes(string,units){var codePoint;units=units||1/0;for(var length=string.length,leadSurrogate=null,bytes=[],i=0;i<length;++i){if((codePoint=string.charCodeAt(i))>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){(units-=3)>-1&&bytes.push(239,191,189);continue}if(i+1===length){(units-=3)>-1&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){(units-=3)>-1&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=65536+(leadSurrogate-55296<<10|codePoint-56320)}else leadSurrogate&&(units-=3)>-1&&bytes.push(239,191,189);if(leadSurrogate=null,codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,63&codePoint|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,63&codePoint|128)}else{if(!(codePoint<1114112))throw new Error("Invalid code point");if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,63&codePoint|128)}}return bytes}function base64ToBytes(str){return base64.toByteArray(function(str){if((str=function(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")}(str).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;str.length%4!=0;)str+="=";return str}(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length&&!(i+offset>=dst.length||i>=src.length);++i)dst[i+offset]=src[i];return i}}).call(this,__webpack_require__(140))},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,exports,__webpack_require__){"use strict";exports.byteLength=function(b64){var lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1];return 3*(validLen+placeHoldersLen)/4-placeHoldersLen},exports.toByteArray=function(b64){var tmp,i,lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1],arr=new Arr(function(b64,validLen,placeHoldersLen){return 3*(validLen+placeHoldersLen)/4-placeHoldersLen}(0,validLen,placeHoldersLen)),curByte=0,len=placeHoldersLen>0?validLen-4:validLen;for(i=0;i<len;i+=4)tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)],arr[curByte++]=tmp>>16&255,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp;2===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4,arr[curByte++]=255&tmp);1===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp);return arr},exports.fromByteArray=function(uint8){for(var tmp,len=uint8.length,extraBytes=len%3,parts=[],i=0,len2=len-extraBytes;i<len2;i+=16383)parts.push(encodeChunk(uint8,i,i+16383>len2?len2:i+16383));1===extraBytes?(tmp=uint8[len-1],parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")):2===extraBytes&&(tmp=(uint8[len-2]<<8)+uint8[len-1],parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"="));return parts.join("")};for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(b64){var len=b64.length;if(len%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var validLen=b64.indexOf("=");return-1===validLen&&(validLen=len),[validLen,validLen===len?0:4-validLen%4]}function encodeChunk(uint8,start,end){for(var tmp,num,output=[],i=start;i<end;i+=3)tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(255&uint8[i+2]),output.push(lookup[(num=tmp)>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[63&num]);return output.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63},function(module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:1/0*(s?-1:1);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)},exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=value<0||0===value&&1/value<0?1:0;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),(value+=e+eBias>=1?rt/c:rt*Math.pow(2,1-eBias))*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));mLen>=8;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}},function(module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},function(module,exports){module.exports=__kbnSharedDeps__.TsLib},function(module,exports,__webpack_require__){var _nodeId,_clockseq,rng=__webpack_require__(122),bytesToUuid=__webpack_require__(123),_lastMSecs=0,_lastNSecs=0;module.exports=function(options,buf,offset){var i=buf&&offset||0,b=buf||[],node=(options=options||{}).node||_nodeId,clockseq=void 0!==options.clockseq?options.clockseq:_clockseq;if(null==node||null==clockseq){var seedBytes=rng();null==node&&(node=_nodeId=[1|seedBytes[0],seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]]),null==clockseq&&(clockseq=_clockseq=16383&(seedBytes[6]<<8|seedBytes[7]))}var msecs=void 0!==options.msecs?options.msecs:(new Date).getTime(),nsecs=void 0!==options.nsecs?options.nsecs:_lastNSecs+1,dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&void 0===options.clockseq&&(clockseq=clockseq+1&16383),(dt<0||msecs>_lastMSecs)&&void 0===options.nsecs&&(nsecs=0),nsecs>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=msecs,_lastNSecs=nsecs,_clockseq=clockseq;var tl=(1e4*(268435455&(msecs+=122192928e5))+nsecs)%4294967296;b[i++]=tl>>>24&255,b[i++]=tl>>>16&255,b[i++]=tl>>>8&255,b[i++]=255&tl;var tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255,b[i++]=255&tmh,b[i++]=tmh>>>24&15|16,b[i++]=tmh>>>16&255,b[i++]=clockseq>>>8|128,b[i++]=255&clockseq;for(var n=0;n<6;++n)b[i+n]=node[n];return buf||bytesToUuid(b)}},function(module,exports,__webpack_require__){var rng=__webpack_require__(122),bytesToUuid=__webpack_require__(123);module.exports=function(options,buf,offset){var i=buf&&offset||0;"string"==typeof options&&(buf="binary"===options?new Array(16):null,options=null);var rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf)for(var ii=0;ii<16;++ii)buf[i+ii]=rnds[ii];return buf||bytesToUuid(rnds)}},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(148);case"v7light":return __webpack_require__(150);case"v8dark":return __webpack_require__(152);case"v8light":return __webpack_require__(154)}},function(module,exports,__webpack_require__){var api=__webpack_require__(76),content=__webpack_require__(149);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(77)(!1)).push([module.i,".globalQueryBar{padding:0 8px 8px 8px}.globalQueryBar:first-child{padding-top:8px}.globalQueryBar:not(:empty){padding-bottom:8px}.globalFilterGroup__filterBar{margin-top:4px}.globalFilterBar__addButton{min-height:28px}.globalFilterGroup__branch{padding:8px 12px 0 0;background-repeat:no-repeat;background-position:12px -8px;background-image:url(\"data:image/svg+xml,%0A%3Csvg width='28px' height='28px' viewBox='0 0 28 28' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='rgb%2852, 55, 65%29'%3E%3Crect x='14' y='27' width='14' height='1'%3E%3C/rect%3E%3C/g%3E%3C/svg%3E\")}.globalFilterGroup__wrapper{line-height:1;overflow:hidden;transition:height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.globalFilterGroup__filterFlexItem{overflow:hidden;padding-bottom:2px}.globalFilterBar__flexItem{max-width:calc(100% - 4px)}@media only screen and (max-width: 574px){.globalFilterGroup__wrapper-isVisible{margin-top:-16px}}@media only screen and (min-width: 575px) and (max-width: 767px){.globalFilterGroup__wrapper-isVisible{margin-top:-16px}}.globalFilterItem{line-height:16px;border:none;color:#DFE5EF;padding-top:6px;padding-bottom:6px;white-space:normal}.globalFilterItem .euiBadge__childButton{flex-shrink:1}.globalFilterItem .euiBadge__iconButton:focus{background-color:rgba(27,169,245,0.1)}.globalFilterItem:not(.globalFilterItem-isDisabled){background-color:#16171c;background-repeat:no-repeat;background-size:0% 100%;box-shadow:0 1px 1px -1px rgba(0,0,0,0.2),0 3px 2px -2px rgba(0,0,0,0.2),inset 0 0 0 1px rgba(255,255,255,0.1);transition:box-shadow 150ms ease-in,background-image 150ms ease-in,background-size 150ms ease-in,background-color 150ms ease-in;box-shadow:0 1px 1px -1px rgba(0,0,0,0.2),0 3px 2px -2px rgba(0,0,0,0.2),inset 0 0 0 1px #424752}@supports (-moz-appearance: none){.globalFilterItem:not(.globalFilterItem-isDisabled){transition-property:box-shadow, background-image, background-size}}.globalFilterItem:focus-within{animation:none !important}.globalFilterItem-isDisabled{color:#98A2B3;background-color:rgba(52,55,65,0.5);text-decoration:line-through;font-weight:400;font-style:italic}.globalFilterItem-isError .globalFilterLabel__value,.globalFilterItem-isWarning .globalFilterLabel__value{font-weight:700}.globalFilterItem-isError .globalFilterLabel__value{color:#ff7575}.globalFilterItem-isWarning .globalFilterLabel__value{color:#FFCE7A}.globalFilterItem-isPinned{position:relative}.globalFilterItem-isPinned::before{content:'';position:absolute;top:0;bottom:0;left:0;width:4px;background-color:#424752;border-top-left-radius:2px;border-bottom-left-radius:2px}.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled){box-shadow:0 1px 1px -1px rgba(0,0,0,0.2),0 3px 2px -2px rgba(0,0,0,0.2),inset 0 0 0 1px #803333}.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled)::before{background-color:#cc5252}.globalFilterItem__editorForm{padding:12px}.globalFilterItem__popover,.globalFilterItem__popoverAnchor{display:block}.kbnTypeahead.kbnTypeahead--small{max-height:20vh}.kbnTypeahead__popover--top{box-shadow:0 0 12px -1px rgba(0,0,0,0.2),0 0 4px -1px rgba(0,0,0,0.2),0 0 2px 0 rgba(0,0,0,0.2);border-top-left-radius:4px;border-top-right-radius:4px}.kbnTypeahead__popover--bottom{box-shadow:0 12px 24px 0 rgba(0,0,0,0.1),0 6px 12px 0 rgba(0,0,0,0.1),0 4px 4px 0 rgba(0,0,0,0.1),0 2px 2px 0 rgba(0,0,0,0.1);border-bottom-left-radius:4px;border-bottom-right-radius:4px}.kbnTypeahead{max-height:60vh}.kbnTypeahead .kbnTypeahead__popover{max-height:inherit;scrollbar-width:thin;border:1px solid;border-color:#343741;color:#DFE5EF;background-color:#1D1E24;position:relative;z-index:2000;width:100%;overflow-y:auto}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar{width:16px;height:16px}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-corner,.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item{height:32px;white-space:nowrap;font-size:12px;vertical-align:middle;padding:0;border-bottom:none;line-height:normal}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:hover{cursor:pointer}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:last-child{border-bottom:none;border-radius:0 0 4px 4px}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:first-child{border-bottom:none;border-radius:4px 4px 0 0}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active{background-color:#25262E}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__callout{background:#1D1E24}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__text{color:#fff}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__type{color:#fff}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--field .kbnSuggestionItem__type{background-color:#665231}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--value .kbnSuggestionItem__type{background-color:#325a54}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--operator .kbnSuggestionItem__type{background-color:#0b4462}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--conjunction .kbnSuggestionItem__type{background-color:#3a2d4a}.kbnSuggestionItem{display:flex;flex-grow:1;align-items:center;font-size:12px;white-space:nowrap}.kbnSuggestionItem.kbnSuggestionItem--field .kbnSuggestionItem__type{background-color:#80673d;color:#ffe9c7}.kbnSuggestionItem.kbnSuggestionItem--value .kbnSuggestionItem__type{background-color:#3f7169;color:#c3f1e9}.kbnSuggestionItem.kbnSuggestionItem--operator .kbnSuggestionItem__type{background-color:#0e557b;color:#76ccf6}.kbnSuggestionItem.kbnSuggestionItem--conjunction .kbnSuggestionItem__type{background-color:#49385c;color:#baa5d2}.kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__type{background-color:#343741;color:#535966}.kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__text{width:auto}.kbnSuggestionItem__text,.kbnSuggestionItem__type,.kbnSuggestionItem__description{flex-grow:1;flex-basis:0%;display:flex;flex-direction:column}.kbnSuggestionItem__type{flex-grow:0;flex-shrink:0;flex-basis:auto;width:32px;height:32px;text-align:center;overflow:hidden;padding:4px;justify-content:center;align-items:center}.kbnSuggestionItem__text{flex-grow:0;flex-basis:auto;font-family:\"Roboto Mono\",Consolas,Menlo,Courier,monospace;width:250px;overflow:hidden;text-overflow:ellipsis;padding:4px 8px;color:#DFE5EF}.kbnSuggestionItem__description{color:#98A2B3;overflow:hidden;text-overflow:ellipsis;margin-left:32px}.kbnSuggestionItem__description:empty{flex-grow:0;margin-left:0}.kbnSuggestionItem__callout{font-family:\"Roboto Mono\",Consolas,Menlo,Courier,monospace;background:#25262E;color:#fff;padding:0 4px;display:inline-block}.kbnSuggestionItem--value .kbnSuggestionItem__text{flex-basis:50%;flex-grow:1}.kbnSavedQueryManagement__popover{max-width:400px}.kbnSavedQueryManagement__listWrapper{max-height:416px;overflow-y:hidden}.kbnSavedQueryManagement__pagination{justify-content:center;padding:6px 12px 12px}.kbnSavedQueryManagement__text{padding:12px 12px 6px 12px}.kbnSavedQueryManagement__list{scrollbar-width:thin;height:100%;overflow-y:auto;overflow-x:hidden;-webkit-mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);max-height:inherit;padding:6px 4px !important}.kbnSavedQueryManagement__list::-webkit-scrollbar{width:16px;height:16px}.kbnSavedQueryManagement__list::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.kbnSavedQueryManagement__list::-webkit-scrollbar-corner,.kbnSavedQueryManagement__list::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnSavedQueryManagement__list:focus{outline:none}.kbnSavedQueryListItem{margin-top:0;color:#1BA9F5}.kbnSavedQueryListItem-selected button{font-weight:700}.kbnSavedQueryListItem__label{display:flex;align-items:center}.kbnSavedQueryListItem__labelText{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important;margin-right:4px}.kbnQueryBar__wrap{max-width:100%;z-index:2000}.kqlQueryBar__languageSwitcherButton{border-right:none !important;border-left:1px solid #282a30}.kbnQueryBar__textareaWrap{overflow:visible !important;display:flex;flex:1 1 100%;position:relative}.kbnQueryBar__textarea{z-index:2000;resize:none !important;height:38px;padding:8px;box-shadow:0 0 0 1px rgba(255,255,255,0.1);padding-top:10px}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid){scrollbar-width:thin;height:100%;overflow-y:auto;overflow-x:hidden;-webkit-mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%)}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar{width:16px;height:16px}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-corner,.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid):focus{outline:none}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight){white-space:nowrap;overflow-y:hidden;overflow-x:hidden}.kbnQueryBar__textarea.kbnQueryBar__textarea--autoHeight{overflow-x:auto;overflow-y:auto;white-space:normal;box-shadow:0 0 0 1px rgba(255,255,255,0.1)}.kbnQueryBar__textarea--withIcon{padding-left:40px}.kbnQueryBar__textarea ~ .euiFormControlLayoutIcons{z-index:2001;top:11px;bottom:unset}.kbnQueryBar__datePickerWrapper .euiDatePopoverButton-isInvalid{background-image:linear-gradient(to top, #F66, #F66 2px, transparent 2px, transparent 100%)}.kbnQueryBar__datePickerWrapper .euiDatePopoverButton-isInvalid:focus{color:#DFE5EF;background-color:#16171c;background-image:linear-gradient(to top, #1BA9F5, #1BA9F5 2px, transparent 2px, transparent 100%)}@media only screen and (max-width: 574px){.kbnQueryBar--withDatePicker>:first-child{order:1;margin-top:-8px}}@media only screen and (min-width: 575px) and (max-width: 767px){.kbnQueryBar--withDatePicker>:first-child{order:1;margin-top:-8px}}@media only screen and (min-width: 768px) and (max-width: 991px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}@media only screen and (min-width: 992px) and (max-width: 1199px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}@media only screen and (min-width: 1200px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}.shardFailureModal{min-height:75vh;width:768px}.shardFailureModal__desc{max-width:686px}.shardFailureModal__descTitle{width:20% !important;margin-top:8px}.shardFailureModal__descValue{width:80% !important;margin-top:8px}.shardFailureModal__keyValueTitle{padding-right:8px}@media only screen and (max-width: 574px){.shardFailureModal__keyValueTitle{display:block;width:100%}.shardFailureModal__descTitle{display:block;width:100% !important}.shardFailureModal__descValue{display:block;width:100% !important}}@media only screen and (min-width: 575px) and (max-width: 767px){.shardFailureModal__keyValueTitle{display:block;width:100%}.shardFailureModal__descTitle{display:block;width:100% !important}.shardFailureModal__descValue{display:block;width:100% !important}}.insDataTableFormat__filter{opacity:0}.insDataTableFormat__table tr:hover .insDataTableFormat__filter,.insDataTableFormat__filter:focus{opacity:1}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(76),content=__webpack_require__(151);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(77)(!1)).push([module.i,".globalQueryBar{padding:0 8px 8px 8px}.globalQueryBar:first-child{padding-top:8px}.globalQueryBar:not(:empty){padding-bottom:8px}.globalFilterGroup__filterBar{margin-top:4px}.globalFilterBar__addButton{min-height:28px}.globalFilterGroup__branch{padding:8px 12px 0 0;background-repeat:no-repeat;background-position:12px -8px;background-image:url(\"data:image/svg+xml,%0A%3Csvg width='28px' height='28px' viewBox='0 0 28 28' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='rgb%28211, 218, 230%29'%3E%3Crect x='14' y='27' width='14' height='1'%3E%3C/rect%3E%3C/g%3E%3C/svg%3E\")}.globalFilterGroup__wrapper{line-height:1;overflow:hidden;transition:height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.globalFilterGroup__filterFlexItem{overflow:hidden;padding-bottom:2px}.globalFilterBar__flexItem{max-width:calc(100% - 4px)}@media only screen and (max-width: 574px){.globalFilterGroup__wrapper-isVisible{margin-top:-16px}}@media only screen and (min-width: 575px) and (max-width: 767px){.globalFilterGroup__wrapper-isVisible{margin-top:-16px}}.globalFilterItem{line-height:16px;border:none;color:#343741;padding-top:6px;padding-bottom:6px;white-space:normal}.globalFilterItem .euiBadge__childButton{flex-shrink:1}.globalFilterItem .euiBadge__iconButton:focus{background-color:rgba(0,107,180,0.1)}.globalFilterItem:not(.globalFilterItem-isDisabled){background-color:#fbfcfd;background-repeat:no-repeat;background-size:0% 100%;box-shadow:0 1px 1px -1px rgba(152,162,179,0.2),0 3px 2px -2px rgba(152,162,179,0.2),inset 0 0 0 1px rgba(15,39,118,0.1);transition:box-shadow 150ms ease-in,background-image 150ms ease-in,background-size 150ms ease-in,background-color 150ms ease-in;box-shadow:0 1px 1px -1px rgba(152,162,179,0.2),0 3px 2px -2px rgba(152,162,179,0.2),inset 0 0 0 1px #bcc3ce}@supports (-moz-appearance: none){.globalFilterItem:not(.globalFilterItem-isDisabled){transition-property:box-shadow, background-image, background-size}}.globalFilterItem:focus-within{animation:none !important}.globalFilterItem-isDisabled{color:#69707D;background-color:rgba(211,218,230,0.5);text-decoration:line-through;font-weight:400;font-style:italic}.globalFilterItem-isError .globalFilterLabel__value,.globalFilterItem-isWarning .globalFilterLabel__value{font-weight:700}.globalFilterItem-isError .globalFilterLabel__value{color:#b4251d}.globalFilterItem-isWarning .globalFilterLabel__value{color:#7e5600}.globalFilterItem-isPinned{position:relative}.globalFilterItem-isPinned::before{content:'';position:absolute;top:0;bottom:0;left:0;width:4px;background-color:#bcc3ce;border-top-left-radius:2px;border-bottom-left-radius:2px}.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled){box-shadow:0 1px 1px -1px rgba(152,162,179,0.2),0 3px 2px -2px rgba(152,162,179,0.2),inset 0 0 0 1px #ebbebc}.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled)::before{background-color:#d16862}.globalFilterItem__editorForm{padding:12px}.globalFilterItem__popover,.globalFilterItem__popoverAnchor{display:block}.kbnTypeahead.kbnTypeahead--small{max-height:20vh}.kbnTypeahead__popover--top{box-shadow:0 0 12px -1px rgba(152,162,179,0.2),0 0 4px -1px rgba(152,162,179,0.2),0 0 2px 0 rgba(152,162,179,0.2);border-top-left-radius:4px;border-top-right-radius:4px}.kbnTypeahead__popover--bottom{box-shadow:0 12px 24px 0 rgba(65,78,101,0.1),0 6px 12px 0 rgba(65,78,101,0.1),0 4px 4px 0 rgba(65,78,101,0.1),0 2px 2px 0 rgba(65,78,101,0.1);border-color:#d0d3d9;border-top-color:#d9dce0;border-bottom-color:#aaafba;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.kbnTypeahead{max-height:60vh}.kbnTypeahead .kbnTypeahead__popover{max-height:inherit;scrollbar-width:thin;border:1px solid;border-color:#D3DAE6;color:#343741;background-color:#fff;position:relative;z-index:2000;width:100%;overflow-y:auto}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar{width:16px;height:16px}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-corner,.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item{height:32px;white-space:nowrap;font-size:12px;vertical-align:middle;padding:0;border-bottom:none;line-height:normal}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:hover{cursor:pointer}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:last-child{border-bottom:none;border-radius:0 0 4px 4px}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:first-child{border-bottom:none;border-radius:4px 4px 0 0}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active{background-color:#F5F7FA}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__callout{background:#fff}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__text{color:#000}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__type{color:#000}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--field .kbnSuggestionItem__type{background-color:#fdedcc}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--value .kbnSuggestionItem__type{background-color:#cce5e3}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--operator .kbnSuggestionItem__type{background-color:#cce1f0}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--conjunction .kbnSuggestionItem__type{background-color:#e9e2f1}.kbnSuggestionItem{display:flex;flex-grow:1;align-items:center;font-size:12px;white-space:nowrap}.kbnSuggestionItem.kbnSuggestionItem--field .kbnSuggestionItem__type{background-color:#fef6e6;color:#936400}.kbnSuggestionItem.kbnSuggestionItem--value .kbnSuggestionItem__type{background-color:#e6f2f1;color:#01776d}.kbnSuggestionItem.kbnSuggestionItem--operator .kbnSuggestionItem__type{background-color:#e6f0f8;color:#006BB4}.kbnSuggestionItem.kbnSuggestionItem--conjunction .kbnSuggestionItem__type{background-color:#f4f1f8;color:#7c609e}.kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__type{background-color:#D3DAE6;color:#98A2B3}.kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__text{width:auto}.kbnSuggestionItem__text,.kbnSuggestionItem__type,.kbnSuggestionItem__description{flex-grow:1;flex-basis:0%;display:flex;flex-direction:column}.kbnSuggestionItem__type{flex-grow:0;flex-shrink:0;flex-basis:auto;width:32px;height:32px;text-align:center;overflow:hidden;padding:4px;justify-content:center;align-items:center}.kbnSuggestionItem__text{flex-grow:0;flex-basis:auto;font-family:\"Roboto Mono\",Consolas,Menlo,Courier,monospace;width:250px;overflow:hidden;text-overflow:ellipsis;padding:4px 8px;color:#343741}.kbnSuggestionItem__description{color:#69707D;overflow:hidden;text-overflow:ellipsis;margin-left:32px}.kbnSuggestionItem__description:empty{flex-grow:0;margin-left:0}.kbnSuggestionItem__callout{font-family:\"Roboto Mono\",Consolas,Menlo,Courier,monospace;background:#F5F7FA;color:#000;padding:0 4px;display:inline-block}.kbnSuggestionItem--value .kbnSuggestionItem__text{flex-basis:50%;flex-grow:1}.kbnSavedQueryManagement__popover{max-width:400px}.kbnSavedQueryManagement__listWrapper{max-height:416px;overflow-y:hidden}.kbnSavedQueryManagement__pagination{justify-content:center;padding:6px 12px 12px}.kbnSavedQueryManagement__text{padding:12px 12px 6px 12px}.kbnSavedQueryManagement__list{scrollbar-width:thin;height:100%;overflow-y:auto;overflow-x:hidden;-webkit-mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);max-height:inherit;padding:6px 4px !important}.kbnSavedQueryManagement__list::-webkit-scrollbar{width:16px;height:16px}.kbnSavedQueryManagement__list::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.kbnSavedQueryManagement__list::-webkit-scrollbar-corner,.kbnSavedQueryManagement__list::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnSavedQueryManagement__list:focus{outline:none}.kbnSavedQueryListItem{margin-top:0;color:#006BB4}.kbnSavedQueryListItem-selected button{font-weight:700}.kbnSavedQueryListItem__label{display:flex;align-items:center}.kbnSavedQueryListItem__labelText{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important;margin-right:4px}.kbnQueryBar__wrap{max-width:100%;z-index:2000}.kqlQueryBar__languageSwitcherButton{border-right:none !important;border-left:1px solid #e4e8ee}.kbnQueryBar__textareaWrap{overflow:visible !important;display:flex;flex:1 1 100%;position:relative}.kbnQueryBar__textarea{z-index:2000;resize:none !important;height:38px;padding:8px;box-shadow:0 0 0 1px rgba(15,39,118,0.1);padding-top:10px}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid){scrollbar-width:thin;height:100%;overflow-y:auto;overflow-x:hidden;-webkit-mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%)}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar{width:16px;height:16px}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-corner,.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid):focus{outline:none}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight){white-space:nowrap;overflow-y:hidden;overflow-x:hidden}.kbnQueryBar__textarea.kbnQueryBar__textarea--autoHeight{overflow-x:auto;overflow-y:auto;white-space:normal;box-shadow:0 0 0 1px rgba(15,39,118,0.1)}.kbnQueryBar__textarea--withIcon{padding-left:40px}.kbnQueryBar__textarea ~ .euiFormControlLayoutIcons{z-index:2001;top:11px;bottom:unset}.kbnQueryBar__datePickerWrapper .euiDatePopoverButton-isInvalid{background-image:linear-gradient(to top, #BD271E, #BD271E 2px, transparent 2px, transparent 100%)}.kbnQueryBar__datePickerWrapper .euiDatePopoverButton-isInvalid:focus{color:#343741;background-color:#fbfcfd;background-image:linear-gradient(to top, #006BB4, #006BB4 2px, transparent 2px, transparent 100%)}@media only screen and (max-width: 574px){.kbnQueryBar--withDatePicker>:first-child{order:1;margin-top:-8px}}@media only screen and (min-width: 575px) and (max-width: 767px){.kbnQueryBar--withDatePicker>:first-child{order:1;margin-top:-8px}}@media only screen and (min-width: 768px) and (max-width: 991px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}@media only screen and (min-width: 992px) and (max-width: 1199px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}@media only screen and (min-width: 1200px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}.shardFailureModal{min-height:75vh;width:768px}.shardFailureModal__desc{max-width:686px}.shardFailureModal__descTitle{width:20% !important;margin-top:8px}.shardFailureModal__descValue{width:80% !important;margin-top:8px}.shardFailureModal__keyValueTitle{padding-right:8px}@media only screen and (max-width: 574px){.shardFailureModal__keyValueTitle{display:block;width:100%}.shardFailureModal__descTitle{display:block;width:100% !important}.shardFailureModal__descValue{display:block;width:100% !important}}@media only screen and (min-width: 575px) and (max-width: 767px){.shardFailureModal__keyValueTitle{display:block;width:100%}.shardFailureModal__descTitle{display:block;width:100% !important}.shardFailureModal__descValue{display:block;width:100% !important}}.insDataTableFormat__filter{opacity:0}.insDataTableFormat__table tr:hover .insDataTableFormat__filter,.insDataTableFormat__filter:focus{opacity:1}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(76),content=__webpack_require__(153);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(77)(!1)).push([module.i,".globalQueryBar{padding:0 8px 8px 8px}.globalQueryBar:first-child{padding-top:8px}.globalQueryBar:not(:empty){padding-bottom:8px}.globalFilterGroup__filterBar{margin-top:4px}.globalFilterBar__addButton{min-height:28px}.globalFilterGroup__branch{padding:8px 12px 0 0;background-repeat:no-repeat;background-position:12px -8px;background-image:url(\"data:image/svg+xml,%0A%3Csvg width='28px' height='28px' viewBox='0 0 28 28' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='rgb%2852, 55, 65%29'%3E%3Crect x='14' y='27' width='14' height='1'%3E%3C/rect%3E%3C/g%3E%3C/svg%3E\")}.globalFilterGroup__wrapper{line-height:1;overflow:hidden;transition:height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.globalFilterGroup__filterFlexItem{overflow:hidden;padding-bottom:2px}.globalFilterBar__flexItem{max-width:calc(100% - 4px)}@media only screen and (max-width: 574px){.globalFilterGroup__wrapper-isVisible{margin-top:-16px}}@media only screen and (min-width: 575px) and (max-width: 767px){.globalFilterGroup__wrapper-isVisible{margin-top:-16px}}.globalFilterItem{line-height:16px;border:none;color:#DFE5EF;padding-top:6px;padding-bottom:6px;white-space:normal}.globalFilterItem .euiBadge__childButton{flex-shrink:1}.globalFilterItem .euiBadge__iconButton:focus{background-color:rgba(54,162,239,0.1)}.globalFilterItem:not(.globalFilterItem-isDisabled){background-color:#16171c;background-repeat:no-repeat;background-size:0% 100%;box-shadow:0 0 transparent,inset 0 0 0 1px rgba(255,255,255,0.1);transition:box-shadow 150ms ease-in,background-image 150ms ease-in,background-size 150ms ease-in,background-color 150ms ease-in;box-shadow:0 0 transparent,inset 0 0 0 1px #424752}@supports (-moz-appearance: none){.globalFilterItem:not(.globalFilterItem-isDisabled){transition-property:box-shadow, background-image, background-size}}.globalFilterItem:focus-within{animation:none !important}.globalFilterItem-isDisabled{color:#98A2B3;background-color:rgba(52,55,65,0.5);text-decoration:line-through;font-weight:400;font-style:italic}.globalFilterItem-isError .globalFilterLabel__value,.globalFilterItem-isWarning .globalFilterLabel__value{font-weight:700}.globalFilterItem-isError .globalFilterLabel__value{color:#f87972}.globalFilterItem-isWarning .globalFilterLabel__value{color:#F3D371}.globalFilterItem-isPinned{position:relative}.globalFilterItem-isPinned::before{content:'';position:absolute;top:0;bottom:0;left:0;width:4px;background-color:#424752;border-top-left-radius:3px;border-bottom-left-radius:3px}.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled){box-shadow:0 0 transparent,inset 0 0 0 1px #7c3632}.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled)::before{background-color:#c6564f}.globalFilterItem__editorForm{padding:12px}.globalFilterItem__popover,.globalFilterItem__popoverAnchor{display:block}.kbnTypeahead.kbnTypeahead--small{max-height:20vh}.kbnTypeahead__popover--top{box-shadow:0 0 0.8px rgba(0,0,0,0.15),0 0 2px rgba(0,0,0,0.1),0 0 5px rgba(0,0,0,0.1),0 0 17px rgba(0,0,0,0.075);border-top-left-radius:6px;border-top-right-radius:6px}.kbnTypeahead__popover--bottom{box-shadow:0 1px 5px rgba(0,0,0,0.25),0 3.6px 13px rgba(0,0,0,0.175),0 8.4px 23px rgba(0,0,0,0.15),0 23px 35px rgba(0,0,0,0.125);border-bottom-left-radius:6px;border-bottom-right-radius:6px}.kbnTypeahead{max-height:60vh}.kbnTypeahead .kbnTypeahead__popover{max-height:inherit;scrollbar-width:thin;border:1px solid;border-color:#343741;color:#DFE5EF;background-color:#1D1E24;position:relative;z-index:2000;width:100%;overflow-y:auto}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar{width:16px;height:16px}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-corner,.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item{height:32px;white-space:nowrap;font-size:12px;vertical-align:middle;padding:0;border-bottom:none;line-height:normal}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:hover{cursor:pointer}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:last-child{border-bottom:none;border-radius:0 0 6px 6px}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:first-child{border-bottom:none;border-radius:6px 6px 0 0}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active{background-color:#25262E}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__callout{background:#1D1E24}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__text{color:#fff}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__type{color:#fff}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--field .kbnSuggestionItem__type{background-color:#61542d}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--value .kbnSuggestionItem__type{background-color:#325956}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--operator .kbnSuggestionItem__type{background-color:#164160}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--conjunction .kbnSuggestionItem__type{background-color:#3a2d4a}.kbnSuggestionItem{display:flex;flex-grow:1;align-items:center;font-size:12px;white-space:nowrap}.kbnSuggestionItem.kbnSuggestionItem--field .kbnSuggestionItem__type{background-color:#7a6a39;color:#f6edc6}.kbnSuggestionItem.kbnSuggestionItem--value .kbnSuggestionItem__type{background-color:#3f6f6c;color:#c0eeeb}.kbnSuggestionItem.kbnSuggestionItem--operator .kbnSuggestionItem__type{background-color:#1b5178;color:#87c7f6}.kbnSuggestionItem.kbnSuggestionItem--conjunction .kbnSuggestionItem__type{background-color:#49385c;color:#baa5d2}.kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__type{background-color:#343741;color:#535966}.kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__text{width:auto}.kbnSuggestionItem__text,.kbnSuggestionItem__type,.kbnSuggestionItem__description{flex-grow:1;flex-basis:0%;display:flex;flex-direction:column}.kbnSuggestionItem__type{flex-grow:0;flex-shrink:0;flex-basis:auto;width:32px;height:32px;text-align:center;overflow:hidden;padding:4px;justify-content:center;align-items:center}.kbnSuggestionItem__text{flex-grow:0;flex-basis:auto;font-family:\"Roboto Mono\",Consolas,Menlo,Courier,monospace;width:250px;overflow:hidden;text-overflow:ellipsis;padding:4px 8px;color:#DFE5EF}.kbnSuggestionItem__description{color:#98A2B3;overflow:hidden;text-overflow:ellipsis;margin-left:32px}.kbnSuggestionItem__description:empty{flex-grow:0;margin-left:0}.kbnSuggestionItem__callout{font-family:\"Roboto Mono\",Consolas,Menlo,Courier,monospace;background:#25262E;color:#fff;padding:0 4px;display:inline-block}.kbnSuggestionItem--value .kbnSuggestionItem__text{flex-basis:50%;flex-grow:1}.kbnSavedQueryManagement__popover{max-width:400px}.kbnSavedQueryManagement__listWrapper{max-height:416px;overflow-y:hidden}.kbnSavedQueryManagement__pagination{justify-content:center;padding:6px 12px 12px}.kbnSavedQueryManagement__text{padding:12px 12px 6px 12px}.kbnSavedQueryManagement__list{scrollbar-width:thin;height:100%;overflow-y:auto;overflow-x:hidden;-webkit-mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);max-height:inherit;padding:6px 4px !important}.kbnSavedQueryManagement__list::-webkit-scrollbar{width:16px;height:16px}.kbnSavedQueryManagement__list::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.kbnSavedQueryManagement__list::-webkit-scrollbar-corner,.kbnSavedQueryManagement__list::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnSavedQueryManagement__list:focus{outline:none}.kbnSavedQueryListItem{margin-top:0;color:#36A2EF}.kbnSavedQueryListItem-selected button{font-weight:700}.kbnSavedQueryListItem__label{display:flex;align-items:center}.kbnSavedQueryListItem__labelText{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important;margin-right:4px}.kbnQueryBar__wrap{max-width:100%;z-index:2000}.kqlQueryBar__languageSwitcherButton{border-right:none !important;border-left:none}.kbnQueryBar__textareaWrap{overflow:visible !important;display:flex;flex:1 1 100%;position:relative;background-color:#16171c;border-radius:6px}.kbnQueryBar__textareaWrap.kbnQueryBar__textareaWrap--hasPrepend{border-top-left-radius:0;border-bottom-left-radius:0}.kbnQueryBar__textareaWrap.kbnQueryBar__textareaWrap--hasAppend{border-top-right-radius:0;border-bottom-right-radius:0}.kbnQueryBar__textarea{z-index:2000;resize:none !important;height:38px;padding:8px;box-shadow:0 0 0 1px rgba(255,255,255,0.1);padding-bottom:9px;margin:0}.kbnQueryBar__textarea.kbnQueryBar__textarea--hasPrepend{border-top-left-radius:0;border-bottom-left-radius:0}.kbnQueryBar__textarea.kbnQueryBar__textarea--hasAppend{border-top-right-radius:0;border-bottom-right-radius:0}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid){scrollbar-width:thin;height:100%;overflow-y:auto;overflow-x:hidden;-webkit-mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%)}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar{width:16px;height:16px}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-corner,.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid):focus{outline:none}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight){white-space:nowrap;overflow-y:hidden;overflow-x:hidden}.kbnQueryBar__textarea.kbnQueryBar__textarea--autoHeight{overflow-x:auto;overflow-y:auto;white-space:normal;box-shadow:0 0 0 1px rgba(255,255,255,0.1)}.kbnQueryBar__textarea--withIcon{padding-left:40px}.kbnQueryBar__textarea ~ .euiFormControlLayoutIcons{z-index:2001;top:11px;bottom:unset}.kbnQueryBar__datePickerWrapper .euiDatePopoverButton-isInvalid{background-image:linear-gradient(to top, #F86B63, #F86B63 2px, transparent 2px, transparent 100%)}.kbnQueryBar__datePickerWrapper .euiDatePopoverButton-isInvalid:focus{color:#DFE5EF;background-color:#16171c;background-image:linear-gradient(to top, #36A2EF, #36A2EF 2px, transparent 2px, transparent 100%)}@media only screen and (max-width: 574px){.kbnQueryBar--withDatePicker>:first-child{order:1;margin-top:-8px}}@media only screen and (min-width: 575px) and (max-width: 767px){.kbnQueryBar--withDatePicker>:first-child{order:1;margin-top:-8px}}@media only screen and (min-width: 768px) and (max-width: 991px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}@media only screen and (min-width: 992px) and (max-width: 1199px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}@media only screen and (min-width: 1200px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}.shardFailureModal{min-height:75vh;width:768px}.shardFailureModal__desc{max-width:686px}.shardFailureModal__descTitle{width:20% !important;margin-top:8px}.shardFailureModal__descValue{width:80% !important;margin-top:8px}.shardFailureModal__keyValueTitle{padding-right:8px}@media only screen and (max-width: 574px){.shardFailureModal__keyValueTitle{display:block;width:100%}.shardFailureModal__descTitle{display:block;width:100% !important}.shardFailureModal__descValue{display:block;width:100% !important}}@media only screen and (min-width: 575px) and (max-width: 767px){.shardFailureModal__keyValueTitle{display:block;width:100%}.shardFailureModal__descTitle{display:block;width:100% !important}.shardFailureModal__descValue{display:block;width:100% !important}}.insDataTableFormat__filter{opacity:0}.insDataTableFormat__table tr:hover .insDataTableFormat__filter,.insDataTableFormat__filter:focus{opacity:1}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(76),content=__webpack_require__(155);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(77)(!1)).push([module.i,".globalQueryBar{padding:0 8px 8px 8px}.globalQueryBar:first-child{padding-top:8px}.globalQueryBar:not(:empty){padding-bottom:8px}.globalFilterGroup__filterBar{margin-top:4px}.globalFilterBar__addButton{min-height:28px}.globalFilterGroup__branch{padding:8px 12px 0 0;background-repeat:no-repeat;background-position:12px -8px;background-image:url(\"data:image/svg+xml,%0A%3Csvg width='28px' height='28px' viewBox='0 0 28 28' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='rgb%28211, 218, 230%29'%3E%3Crect x='14' y='27' width='14' height='1'%3E%3C/rect%3E%3C/g%3E%3C/svg%3E\")}.globalFilterGroup__wrapper{line-height:1;overflow:hidden;transition:height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.globalFilterGroup__filterFlexItem{overflow:hidden;padding-bottom:2px}.globalFilterBar__flexItem{max-width:calc(100% - 4px)}@media only screen and (max-width: 574px){.globalFilterGroup__wrapper-isVisible{margin-top:-16px}}@media only screen and (min-width: 575px) and (max-width: 767px){.globalFilterGroup__wrapper-isVisible{margin-top:-16px}}.globalFilterItem{line-height:16px;border:none;color:#343741;padding-top:6px;padding-bottom:6px;white-space:normal}.globalFilterItem .euiBadge__childButton{flex-shrink:1}.globalFilterItem .euiBadge__iconButton:focus{background-color:rgba(0,119,204,0.1)}.globalFilterItem:not(.globalFilterItem-isDisabled){background-color:#fbfcfd;background-repeat:no-repeat;background-size:0% 100%;box-shadow:0 0 transparent,inset 0 0 0 1px rgba(17,43,134,0.1);transition:box-shadow 150ms ease-in,background-image 150ms ease-in,background-size 150ms ease-in,background-color 150ms ease-in;box-shadow:0 0 transparent,inset 0 0 0 1px #bcc3ce}@supports (-moz-appearance: none){.globalFilterItem:not(.globalFilterItem-isDisabled){transition-property:box-shadow, background-image, background-size}}.globalFilterItem:focus-within{animation:none !important}.globalFilterItem-isDisabled{color:#69707D;background-color:rgba(211,218,230,0.5);text-decoration:line-through;font-weight:400;font-style:italic}.globalFilterItem-isError .globalFilterLabel__value,.globalFilterItem-isWarning .globalFilterLabel__value{font-weight:700}.globalFilterItem-isError .globalFilterLabel__value{color:#b4251d}.globalFilterItem-isWarning .globalFilterLabel__value{color:#765b0a}.globalFilterItem-isPinned{position:relative}.globalFilterItem-isPinned::before{content:'';position:absolute;top:0;bottom:0;left:0;width:4px;background-color:#bcc3ce;border-top-left-radius:3px;border-bottom-left-radius:3px}.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled){box-shadow:0 0 transparent,inset 0 0 0 1px #ebbebc}.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled)::before{background-color:#d16862}.globalFilterItem__editorForm{padding:12px}.globalFilterItem__popover,.globalFilterItem__popoverAnchor{display:block}.kbnTypeahead.kbnTypeahead--small{max-height:20vh}.kbnTypeahead__popover--top{box-shadow:0 0 0.8px rgba(0,0,0,0.06),0 0 2px rgba(0,0,0,0.04),0 0 5px rgba(0,0,0,0.04),0 0 17px rgba(0,0,0,0.03);border-top-left-radius:6px;border-top-right-radius:6px}.kbnTypeahead__popover--bottom{box-shadow:0 1px 5px rgba(0,0,0,0.1),0 3.6px 13px rgba(0,0,0,0.07),0 8.4px 23px rgba(0,0,0,0.06),0 23px 35px rgba(0,0,0,0.05);border-bottom-left-radius:6px;border-bottom-right-radius:6px}.kbnTypeahead{max-height:60vh}.kbnTypeahead .kbnTypeahead__popover{max-height:inherit;scrollbar-width:thin;border:1px solid;border-color:#D3DAE6;color:#343741;background-color:#fff;position:relative;z-index:2000;width:100%;overflow-y:auto}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar{width:16px;height:16px}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-corner,.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item{height:32px;white-space:nowrap;font-size:12px;vertical-align:middle;padding:0;border-bottom:none;line-height:normal}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:hover{cursor:pointer}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:last-child{border-bottom:none;border-radius:0 0 6px 6px}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:first-child{border-bottom:none;border-radius:6px 6px 0 0}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active{background-color:#F5F7FA}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__callout{background:#fff}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__text{color:#000}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__type{color:#000}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--field .kbnSuggestionItem__type{background-color:#fff3d0}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--value .kbnSuggestionItem__type{background-color:#ccf2f0}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--operator .kbnSuggestionItem__type{background-color:#cce4f5}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--conjunction .kbnSuggestionItem__type{background-color:#e9e2f1}.kbnSuggestionItem{display:flex;flex-grow:1;align-items:center;font-size:12px;white-space:nowrap}.kbnSuggestionItem.kbnSuggestionItem--field .kbnSuggestionItem__type{background-color:#fff9e8;color:#8a6a0a}.kbnSuggestionItem.kbnSuggestionItem--value .kbnSuggestionItem__type{background-color:#e6f9f7;color:#007e77}.kbnSuggestionItem.kbnSuggestionItem--operator .kbnSuggestionItem__type{background-color:#e6f1fa;color:#006bb8}.kbnSuggestionItem.kbnSuggestionItem--conjunction .kbnSuggestionItem__type{background-color:#f4f1f8;color:#7c609e}.kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__type{background-color:#D3DAE6;color:#98A2B3}.kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__text{width:auto}.kbnSuggestionItem__text,.kbnSuggestionItem__type,.kbnSuggestionItem__description{flex-grow:1;flex-basis:0%;display:flex;flex-direction:column}.kbnSuggestionItem__type{flex-grow:0;flex-shrink:0;flex-basis:auto;width:32px;height:32px;text-align:center;overflow:hidden;padding:4px;justify-content:center;align-items:center}.kbnSuggestionItem__text{flex-grow:0;flex-basis:auto;font-family:\"Roboto Mono\",Consolas,Menlo,Courier,monospace;width:250px;overflow:hidden;text-overflow:ellipsis;padding:4px 8px;color:#343741}.kbnSuggestionItem__description{color:#69707D;overflow:hidden;text-overflow:ellipsis;margin-left:32px}.kbnSuggestionItem__description:empty{flex-grow:0;margin-left:0}.kbnSuggestionItem__callout{font-family:\"Roboto Mono\",Consolas,Menlo,Courier,monospace;background:#F5F7FA;color:#000;padding:0 4px;display:inline-block}.kbnSuggestionItem--value .kbnSuggestionItem__text{flex-basis:50%;flex-grow:1}.kbnSavedQueryManagement__popover{max-width:400px}.kbnSavedQueryManagement__listWrapper{max-height:416px;overflow-y:hidden}.kbnSavedQueryManagement__pagination{justify-content:center;padding:6px 12px 12px}.kbnSavedQueryManagement__text{padding:12px 12px 6px 12px}.kbnSavedQueryManagement__list{scrollbar-width:thin;height:100%;overflow-y:auto;overflow-x:hidden;-webkit-mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);max-height:inherit;padding:6px 4px !important}.kbnSavedQueryManagement__list::-webkit-scrollbar{width:16px;height:16px}.kbnSavedQueryManagement__list::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.kbnSavedQueryManagement__list::-webkit-scrollbar-corner,.kbnSavedQueryManagement__list::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnSavedQueryManagement__list:focus{outline:none}.kbnSavedQueryListItem{margin-top:0;color:#0071c2}.kbnSavedQueryListItem-selected button{font-weight:700}.kbnSavedQueryListItem__label{display:flex;align-items:center}.kbnSavedQueryListItem__labelText{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important;margin-right:4px}.kbnQueryBar__wrap{max-width:100%;z-index:2000}.kqlQueryBar__languageSwitcherButton{border-right:none !important;border-left:none}.kbnQueryBar__textareaWrap{overflow:visible !important;display:flex;flex:1 1 100%;position:relative;background-color:#fbfcfd;border-radius:6px}.kbnQueryBar__textareaWrap.kbnQueryBar__textareaWrap--hasPrepend{border-top-left-radius:0;border-bottom-left-radius:0}.kbnQueryBar__textareaWrap.kbnQueryBar__textareaWrap--hasAppend{border-top-right-radius:0;border-bottom-right-radius:0}.kbnQueryBar__textarea{z-index:2000;resize:none !important;height:38px;padding:8px;box-shadow:0 0 0 1px rgba(17,43,134,0.1);padding-bottom:9px;margin:0}.kbnQueryBar__textarea.kbnQueryBar__textarea--hasPrepend{border-top-left-radius:0;border-bottom-left-radius:0}.kbnQueryBar__textarea.kbnQueryBar__textarea--hasAppend{border-top-right-radius:0;border-bottom-right-radius:0}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid){scrollbar-width:thin;height:100%;overflow-y:auto;overflow-x:hidden;-webkit-mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%)}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar{width:16px;height:16px}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);border:6px solid rgba(0,0,0,0);background-clip:content-box}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-corner,.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid):focus{outline:none}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight){white-space:nowrap;overflow-y:hidden;overflow-x:hidden}.kbnQueryBar__textarea.kbnQueryBar__textarea--autoHeight{overflow-x:auto;overflow-y:auto;white-space:normal;box-shadow:0 0 0 1px rgba(17,43,134,0.1)}.kbnQueryBar__textarea--withIcon{padding-left:40px}.kbnQueryBar__textarea ~ .euiFormControlLayoutIcons{z-index:2001;top:11px;bottom:unset}.kbnQueryBar__datePickerWrapper .euiDatePopoverButton-isInvalid{background-image:linear-gradient(to top, #BD271E, #BD271E 2px, transparent 2px, transparent 100%)}.kbnQueryBar__datePickerWrapper .euiDatePopoverButton-isInvalid:focus{color:#343741;background-color:#fbfcfd;background-image:linear-gradient(to top, #07C, #07C 2px, transparent 2px, transparent 100%)}@media only screen and (max-width: 574px){.kbnQueryBar--withDatePicker>:first-child{order:1;margin-top:-8px}}@media only screen and (min-width: 575px) and (max-width: 767px){.kbnQueryBar--withDatePicker>:first-child{order:1;margin-top:-8px}}@media only screen and (min-width: 768px) and (max-width: 991px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}@media only screen and (min-width: 992px) and (max-width: 1199px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}@media only screen and (min-width: 1200px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}.shardFailureModal{min-height:75vh;width:768px}.shardFailureModal__desc{max-width:686px}.shardFailureModal__descTitle{width:20% !important;margin-top:8px}.shardFailureModal__descValue{width:80% !important;margin-top:8px}.shardFailureModal__keyValueTitle{padding-right:8px}@media only screen and (max-width: 574px){.shardFailureModal__keyValueTitle{display:block;width:100%}.shardFailureModal__descTitle{display:block;width:100% !important}.shardFailureModal__descValue{display:block;width:100% !important}}@media only screen and (min-width: 575px) and (max-width: 767px){.shardFailureModal__keyValueTitle{display:block;width:100%}.shardFailureModal__descTitle{display:block;width:100% !important}.shardFailureModal__descValue{display:block;width:100% !important}}.insDataTableFormat__filter{opacity:0}.insDataTableFormat__table tr:hover .insDataTableFormat__filter,.insDataTableFormat__filter:focus{opacity:1}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){"use strict";module.exports=str=>encodeURIComponent(str).replace(/[!'()*]/g,x=>"%"+x.charCodeAt(0).toString(16).toUpperCase())},function(module,exports,__webpack_require__){"use strict";var singleMatcher=new RegExp("%[a-f0-9]{2}","gi"),multiMatcher=new RegExp("(%[a-f0-9]{2})+","gi");function decodeComponents(components,split){try{return decodeURIComponent(components.join(""))}catch(err){}if(1===components.length)return components;split=split||1;var left=components.slice(0,split),right=components.slice(split);return Array.prototype.concat.call([],decodeComponents(left),decodeComponents(right))}function decode(input){try{return decodeURIComponent(input)}catch(err){for(var tokens=input.match(singleMatcher),i=1;i<tokens.length;i++)tokens=(input=decodeComponents(tokens,i).join("")).match(singleMatcher);return input}}module.exports=function(encodedURI){if("string"!=typeof encodedURI)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof encodedURI+"`");try{return encodedURI=encodedURI.replace(/\+/g," "),decodeURIComponent(encodedURI)}catch(err){return function(input){for(var replaceMap={"%FE%FF":"��","%FF%FE":"��"},match=multiMatcher.exec(input);match;){try{replaceMap[match[0]]=decodeURIComponent(match[0])}catch(err){var result=decode(match[0]);result!==match[0]&&(replaceMap[match[0]]=result)}match=multiMatcher.exec(input)}replaceMap["%C2"]="�";for(var entries=Object.keys(replaceMap),i=0;i<entries.length;i++){var key=entries[i];input=input.replace(new RegExp(key,"g"),replaceMap[key])}return input}(encodedURI)}}},function(module,exports,__webpack_require__){"use strict";module.exports=(string,separator)=>{if("string"!=typeof string||"string"!=typeof separator)throw new TypeError("Expected the arguments to be of type `string`");if(""===separator)return[string];const separatorIndex=string.indexOf(separator);return-1===separatorIndex?[string]:[string.slice(0,separatorIndex),string.slice(separatorIndex+separator.length)]}},function(module,exports){module.exports=__kbnSharedDeps__.KbnAnalytics},,,function(module,exports){module.exports=__kbnSharedDeps__.StyledComponents},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEuiLibServices},function(module,exports){module.exports=__kbnSharedDeps__.KbnStd},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/share/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))}]);