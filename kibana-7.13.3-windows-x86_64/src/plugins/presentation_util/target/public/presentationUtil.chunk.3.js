(window.presentationUtil_bundle_jsonpfunction=window.presentationUtil_bundle_jsonpfunction||[]).push([[3],{52:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){for(var classes=[],i=0;i<arguments.length;i++){var arg=arguments[i];if(arg){var argType=typeof arg;if("string"===argType||"number"===argType)classes.push(arg);else if(Array.isArray(arg)&&arg.length){var inner=classNames.apply(null,arg);inner&&classes.push(inner)}else if("object"===argType)for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&classes.push(key)}}return classes.join(" ")}module.exports?(classNames.default=classNames,module.exports=classNames):void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,[]))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},53:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(54);case"v7light":return __webpack_require__(56);case"v8dark":return __webpack_require__(58);case"v8light":return __webpack_require__(60)}},54:function(module,exports,__webpack_require__){var api=__webpack_require__(1),content=__webpack_require__(55);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},55:function(module,exports,__webpack_require__){(exports=__webpack_require__(2)(!1)).push([module.i,".projectListItem{position:relative;background:#1D1E24;padding:24px;min-width:500px}.projectListItem--isOverridden:before{position:absolute;top:24px;left:4px;bottom:24px;width:4px;background:#1BA9F5;content:''}.projectListItem .euiSwitch__label{width:100%}.projectListItem+.projectListItem:after{position:absolute;top:0;right:0;left:0;height:1px;background:#343741;content:''}.euiFlyout .projectListItem{padding:24px 4px}.euiFlyout .projectListItem:first-child{padding-top:0}.euiFlyout .projectListItem--isOverridden:before{left:-12px}.euiFlyout .projectListItem--isOverridden:first-child:before{top:0}\n",""]),module.exports=exports},56:function(module,exports,__webpack_require__){var api=__webpack_require__(1),content=__webpack_require__(57);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},57:function(module,exports,__webpack_require__){(exports=__webpack_require__(2)(!1)).push([module.i,".projectListItem{position:relative;background:#fff;padding:24px;min-width:500px}.projectListItem--isOverridden:before{position:absolute;top:24px;left:4px;bottom:24px;width:4px;background:#006BB4;content:''}.projectListItem .euiSwitch__label{width:100%}.projectListItem+.projectListItem:after{position:absolute;top:0;right:0;left:0;height:1px;background:#D3DAE6;content:''}.euiFlyout .projectListItem{padding:24px 4px}.euiFlyout .projectListItem:first-child{padding-top:0}.euiFlyout .projectListItem--isOverridden:before{left:-12px}.euiFlyout .projectListItem--isOverridden:first-child:before{top:0}\n",""]),module.exports=exports},58:function(module,exports,__webpack_require__){var api=__webpack_require__(1),content=__webpack_require__(59);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},59:function(module,exports,__webpack_require__){(exports=__webpack_require__(2)(!1)).push([module.i,".projectListItem{position:relative;background:#1D1E24;padding:24px;min-width:500px}.projectListItem--isOverridden:before{position:absolute;top:24px;left:4px;bottom:24px;width:4px;background:#36A2EF;content:''}.projectListItem .euiSwitch__label{width:100%}.projectListItem+.projectListItem:after{position:absolute;top:0;right:0;left:0;height:1px;background:#343741;content:''}.euiFlyout .projectListItem{padding:24px 4px}.euiFlyout .projectListItem:first-child{padding-top:0}.euiFlyout .projectListItem--isOverridden:before{left:-12px}.euiFlyout .projectListItem--isOverridden:first-child:before{top:0}\n",""]),module.exports=exports},60:function(module,exports,__webpack_require__){var api=__webpack_require__(1),content=__webpack_require__(61);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},61:function(module,exports,__webpack_require__){(exports=__webpack_require__(2)(!1)).push([module.i,".projectListItem{position:relative;background:#fff;padding:24px;min-width:500px}.projectListItem--isOverridden:before{position:absolute;top:24px;left:4px;bottom:24px;width:4px;background:#07C;content:''}.projectListItem .euiSwitch__label{width:100%}.projectListItem+.projectListItem:after{position:absolute;top:0;right:0;left:0;height:1px;background:#D3DAE6;content:''}.euiFlyout .projectListItem{padding:24px 4px}.euiFlyout .projectListItem:first-child{padding-top:0}.euiFlyout .projectListItem--isOverridden:before{left:-12px}.euiFlyout .projectListItem--isOverridden:first-child:before{top:0}\n",""]),module.exports=exports},64:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"getOverridenCount",(function(){return getOverridenCount})),__webpack_require__.d(__webpack_exports__,"LabsFlyout",(function(){return LabsFlyout}));var external_kbnSharedDeps_React_=__webpack_require__(0),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_ElasticEui_=__webpack_require__(3),services=__webpack_require__(7),external_kbnSharedDeps_KbnI18n_=__webpack_require__(4),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(50);const LabsStrings={Components:{Switch:{getKibanaSwitchText:()=>({name:external_kbnSharedDeps_KbnI18n_.i18n.translate("presentationUtil.labs.components.kibanaSwitchName",{defaultMessage:"Kibana"}),help:external_kbnSharedDeps_KbnI18n_.i18n.translate("presentationUtil.labs.components.kibanaSwitchHelp",{defaultMessage:"Sets the corresponding Advanced Setting for this lab project in Kibana"})}),getBrowserSwitchText:()=>({name:external_kbnSharedDeps_KbnI18n_.i18n.translate("presentationUtil.labs.components.browserSwitchName",{defaultMessage:"Browser"}),help:external_kbnSharedDeps_KbnI18n_.i18n.translate("presentationUtil.labs.components.browserSwitchHelp",{defaultMessage:"Enables or disables the lab project for the browser; persists between browser instances"})}),getSessionSwitchText:()=>({name:external_kbnSharedDeps_KbnI18n_.i18n.translate("presentationUtil.labs.components.sessionSwitchName",{defaultMessage:"Session"}),help:external_kbnSharedDeps_KbnI18n_.i18n.translate("presentationUtil.labs.components.sessionSwitchHelp",{defaultMessage:"Enables or disables the lab project for this tab; resets when the browser tab is closed"})})},List:{getNoProjectsMessage:()=>external_kbnSharedDeps_KbnI18n_.i18n.translate("presentationUtil.labs.components.noProjectsMessage",{defaultMessage:"No available lab projects"})},ListItem:{getOverrideLegend:()=>external_kbnSharedDeps_KbnI18n_.i18n.translate("presentationUtil.labs.components.overrideFlagsLabel",{defaultMessage:"Override flags"}),getEnabledStatusMessage:()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"presentationUtil.labs.components.defaultStatusMessage",defaultMessage:"{status} by default",values:{status:external_kbnSharedDeps_React_default.a.createElement("strong",null,"Enabled")},description:"Displays the current status of a lab project"}),getDisabledStatusMessage:()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"presentationUtil.labs.components.defaultStatusMessage",defaultMessage:"{status} by default",values:{status:external_kbnSharedDeps_React_default.a.createElement("strong",null,"Disabled")},description:"Displays the current status of a lab project"})},Flyout:{getTitleLabel:()=>external_kbnSharedDeps_KbnI18n_.i18n.translate("presentationUtil.labs.components.titleLabel",{defaultMessage:"Lab projects"}),getResetToDefaultLabel:()=>external_kbnSharedDeps_KbnI18n_.i18n.translate("presentationUtil.labs.components.resetToDefaultLabel",{defaultMessage:"Reset to defaults"}),getLabFlagsLabel:()=>external_kbnSharedDeps_KbnI18n_.i18n.translate("presentationUtil.labs.components.labFlagsLabel",{defaultMessage:"Lab flags"}),getRefreshLabel:()=>external_kbnSharedDeps_KbnI18n_.i18n.translate("presentationUtil.labs.components.calloutHelp",{defaultMessage:"Refresh to apply changes"})}}};var classnames=__webpack_require__(52),classnames_default=__webpack_require__.n(classnames),labs=__webpack_require__(6);const{Switch:strings}=LabsStrings.Components,switchText={kibana:strings.getKibanaSwitchText(),browser:strings.getBrowserSwitchText(),session:strings.getSessionSwitchText()},EnvironmentSwitch=({env:env,isChecked:isChecked,onChange:onChange,name:name})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,style:{marginBottom:".25rem"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"xs",alignItems:"flexEnd",responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{checked:isChecked,style:{marginTop:1},label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiScreenReaderOnly,null,external_kbnSharedDeps_React_default.a.createElement("span",null,name," - ")),switchText[env].name),onChange:e=>onChange(e.target.checked),compressed:!0})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{style:{textAlign:"right"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIconTip,{content:switchText[env].help,position:"left"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"xs"}));__webpack_require__(53);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const{ListItem:project_list_item_strings}=LabsStrings.Components,ProjectListItem=({project:project,onStatusChange:onStatusChange})=>{const{id:id,status:status,isActive:isActive,name:name,description:description,solutions:solutions}=project,{isEnabled:isEnabled,isOverride:isOverride}=status;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{className:classnames_default()({projectListItem:!0,"projectListItem--isOverridden":isOverride,"projectListItem--isOverriddenEnabled":isOverride&&isEnabled})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"m",responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{direction:"column",gutterSize:"xs",responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{className:"projectListItem__title",size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,name))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement("div",{className:"projectListItem__solutions"},solutions.map(solution=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBadge,{key:solution},solution)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s"},description)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{size:"s",color:"subdued"},isActive?project_list_item_strings.getEnabledStatusMessage():project_list_item_strings.getDisabledStatusMessage())))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormFieldset,{legend:{children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiScreenReaderOnly,null,external_kbnSharedDeps_React_default.a.createElement("span",null,name)),project_list_item_strings.getOverrideLegend())}},labs.c.map(env=>{const envStatus=status[env];if(void 0!==envStatus)return external_kbnSharedDeps_React_default.a.createElement(EnvironmentSwitch,_extends({key:env,isChecked:envStatus,onChange:checked=>onStatusChange(id,env,checked)},{env:env,name:name}))})))))},{List:project_list_strings}=LabsStrings.Components,EmptyList=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:project_list_strings.getNoProjectsMessage()}),ProjectList=props=>{const{solutions:solutions,projects:projects,onStatusChange:onStatusChange}=props,items=Object.values(projects).map(project=>solutions&&!solutions.some(solution=>project.solutions.includes(solution))?null:external_kbnSharedDeps_React_default.a.createElement("li",{key:project.id},external_kbnSharedDeps_React_default.a.createElement(ProjectListItem,{project:project,onStatusChange:onStatusChange}))).filter(item=>null!==item);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{direction:"column",gutterSize:"none",responsive:!1},items.length>0?external_kbnSharedDeps_React_default.a.createElement("ul",null,items):external_kbnSharedDeps_React_default.a.createElement(EmptyList,null))},{Flyout:labs_flyout_strings}=LabsStrings.Components,getOverridenCount=projects=>Object.values(projects).filter(project=>project.status.isOverride).length,LabsFlyout=props=>{const{solutions:solutions,onEnabledCountChange:onEnabledCountChange=(()=>{}),onClose:onClose}=props,{labs:labsService}=services.a.getHooks(),{getProjects:getProjects,setProjectStatus:setProjectStatus,reset:reset}=labsService.useService(),[projects,setProjects]=Object(external_kbnSharedDeps_React_.useState)(getProjects()),[overrideCount,setOverrideCount]=Object(external_kbnSharedDeps_React_.useState)(getOverridenCount(projects)),isChanged=((original,current)=>{for(const id of Object.keys(original))for(const key of Object.keys(original[id].status))if(original[id].status[key]!==current[id].status[key])return!0;return!1})(Object(external_kbnSharedDeps_React_.useRef)(getProjects()).current,projects);Object(external_kbnSharedDeps_React_.useEffect)(()=>{setOverrideCount(getOverridenCount(projects))},[projects]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{onEnabledCountChange(overrideCount)},[onEnabledCountChange,overrideCount]);let footer=null;const resetButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{onClick:()=>{reset(),setProjects(getProjects())},isDisabled:!overrideCount},labs_flyout_strings.getResetToDefaultLabel()),refreshButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{color:"primary",fill:!0,onClick:()=>{window.location.reload()},isDisabled:!isChanged},labs_flyout_strings.getRefreshLabel());return footer=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutFooter,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s",responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},resetButton),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},refreshButton))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyout,{onClose:onClose},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"beaker",size:"l"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,labs_flyout_strings.getTitleLabel()))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutBody,null,external_kbnSharedDeps_React_default.a.createElement(ProjectList,{projects:projects,solutions:solutions,onStatusChange:(id,env,enabled)=>{setProjectStatus(id,env,enabled),setProjects(getProjects())}})),footer)};__webpack_exports__.default=LabsFlyout}}]);