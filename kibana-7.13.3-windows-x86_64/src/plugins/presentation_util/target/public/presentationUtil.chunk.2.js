(window.presentationUtil_bundle_jsonpfunction=window.presentationUtil_bundle_jsonpfunction||[]).push([[2,4],{62:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"DashboardPicker",(function(){return DashboardPicker}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_kbn_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4),_elastic_eui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),_services__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7);function DashboardPicker(props){const[dashboardOptions,setDashboardOptions]=Object(react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),[isLoadingDashboards,setIsLoadingDashboards]=Object(react__WEBPACK_IMPORTED_MODULE_0__.useState)(!0),[selectedDashboard,setSelectedDashboard]=Object(react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),[query,setQuery]=Object(react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),{isDisabled:isDisabled,onChange:onChange}=props,{dashboards:dashboards}=_services__WEBPACK_IMPORTED_MODULE_3__.a.getHooks(),{findDashboardsByTitle:findDashboardsByTitle}=dashboards.useService();return Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{let cleanedUp=!1;return(async()=>{setIsLoadingDashboards(!0),setDashboardOptions([]);const objects=await findDashboardsByTitle(query?query+"*":"");cleanedUp||(objects&&setDashboardOptions(objects.filter(d=>!props.idsToOmit||!props.idsToOmit.includes(d.id)).map(d=>({value:d.id,label:d.attributes.title,"data-test-subj":"dashboard-picker-option-"+d.attributes.title.replaceAll(" ","-")}))),setIsLoadingDashboards(!1))})(),()=>{cleanedUp=!0}},[findDashboardsByTitle,query,props.idsToOmit]),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_2__.EuiComboBox,{"data-test-subj":"dashboardPickerInput",placeholder:_kbn_i18n__WEBPACK_IMPORTED_MODULE_1__.i18n.translate("presentationUtil.dashboardPicker.searchDashboardPlaceholder",{defaultMessage:"Search dashboards..."}),singleSelection:{asPlainText:!0},options:dashboardOptions||[],selectedOptions:selectedDashboard?[selectedDashboard]:void 0,onChange:e=>{e.length?(setSelectedDashboard({value:e[0].value||"",label:e[0].label}),onChange({name:e[0].label,id:e[0].value||""})):(setSelectedDashboard(null),onChange(null))},onSearchChange:setQuery,isDisabled:isDisabled,isLoading:isLoadingDashboards,compressed:!0})}__webpack_exports__.default=DashboardPicker},63:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(65);case"v7light":return __webpack_require__(67);case"v8dark":return __webpack_require__(69);case"v8light":return __webpack_require__(71)}},65:function(module,exports,__webpack_require__){var api=__webpack_require__(1),content=__webpack_require__(66);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},66:function(module,exports,__webpack_require__){(exports=__webpack_require__(2)(!1)).push([module.i,".savAddDashboard__searchDashboards{margin-left:24px;margin-top:4px;width:300px}\n",""]),module.exports=exports},67:function(module,exports,__webpack_require__){var api=__webpack_require__(1),content=__webpack_require__(68);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},68:function(module,exports,__webpack_require__){(exports=__webpack_require__(2)(!1)).push([module.i,".savAddDashboard__searchDashboards{margin-left:24px;margin-top:4px;width:300px}\n",""]),module.exports=exports},69:function(module,exports,__webpack_require__){var api=__webpack_require__(1),content=__webpack_require__(70);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},70:function(module,exports,__webpack_require__){(exports=__webpack_require__(2)(!1)).push([module.i,".savAddDashboard__searchDashboards{margin-left:24px;margin-top:4px;width:300px}\n",""]),module.exports=exports},71:function(module,exports,__webpack_require__){var api=__webpack_require__(1),content=__webpack_require__(72);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},72:function(module,exports,__webpack_require__){(exports=__webpack_require__(2)(!1)).push([module.i,".savAddDashboard__searchDashboards{margin-left:24px;margin-top:4px;width:300px}\n",""]),module.exports=exports},74:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var external_kbnSharedDeps_React_=__webpack_require__(0),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_KbnI18n_=__webpack_require__(4),public_=__webpack_require__(51),services=__webpack_require__(7),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(50),external_kbnSharedDeps_ElasticEui_=__webpack_require__(3),dashboard_picker=__webpack_require__(62);__webpack_require__(63);function SaveModalDashboardSelector(props){const{documentId:documentId,onSelectDashboard:onSelectDashboard,canSaveByReference:canSaveByReference,setAddToLibrary:setAddToLibrary,isAddToLibrarySelected:isAddToLibrarySelected,dashboardOption:dashboardOption,onChange:onChange,copyOnSave:copyOnSave}=props,isDisabled=!copyOnSave&&!!documentId;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"presentationUtil.saveModalDashboard.addToDashboardLabel",defaultMessage:"Add to dashboard"}),hasChildLabel:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,{color:"subdued",hasShadow:!1,"data-test-subj":"add-to-dashboard-options"},external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiRadio,{checked:"existing"===dashboardOption,id:"existing-dashboard-option",name:"dashboard-option",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("presentationUtil.saveModalDashboard.existingDashboardOptionLabel",{defaultMessage:"Existing"}),onChange:()=>onChange("existing"),disabled:isDisabled}),external_kbnSharedDeps_React_default.a.createElement("div",{className:"savAddDashboard__searchDashboards"},external_kbnSharedDeps_React_default.a.createElement(dashboard_picker.default,{isDisabled:"existing"!==dashboardOption,onChange:onSelectDashboard})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiRadio,{checked:"new"===dashboardOption,id:"new-dashboard-option",name:"dashboard-option",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("presentationUtil.saveModalDashboard.newDashboardOptionLabel",{defaultMessage:"New"}),onChange:()=>onChange("new"),disabled:isDisabled}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiRadio,{checked:null===dashboardOption,id:"add-to-library-option",name:"dashboard-option",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("presentationUtil.saveModalDashboard.noDashboardOptionLabel",{defaultMessage:"None"}),onChange:()=>{setAddToLibrary(!0),onChange(null)},disabled:isDisabled||!canSaveByReference}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,"data-test-subj":"add-to-library-checkbox"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCheckbox,{id:"add-to-library-checkbox",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("presentationUtil.saveModalDashboard.libraryOptionLabel",{defaultMessage:"Add to library"}),checked:isAddToLibrarySelected,disabled:null===dashboardOption||isDisabled||!canSaveByReference,onChange:event=>setAddToLibrary(event.target.checked)})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIconTip,{type:"iInCircle",content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"presentationUtil.saveModalDashboard.dashboardInfoTooltip",defaultMessage:"items added to the Visualize Library are available to all dashboards. Edits to a library item appear everywhere it is used."})}))))))}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}__webpack_exports__.default=function(props){const{documentInfo:documentInfo,tagOptions:tagOptions,objectType:objectType,onClose:onClose,canSaveByReference:canSaveByReference}=props,{id:documentId}=documentInfo,initialCopyOnSave=!Boolean(documentId),{capabilities:capabilities}=services.a.getHooks(),{canAccessDashboards:canAccessDashboards,canCreateNewDashboards:canCreateNewDashboards}=capabilities.useService(),disableDashboardOptions=!canAccessDashboards()||!canCreateNewDashboards(),[dashboardOption,setDashboardOption]=Object(external_kbnSharedDeps_React_.useState)(documentId||disableDashboardOptions?null:"existing"),[isAddToLibrarySelected,setAddToLibrary]=Object(external_kbnSharedDeps_React_.useState)(canSaveByReference&&(!initialCopyOnSave||disableDashboardOptions)),[selectedDashboard,setSelectedDashboard]=Object(external_kbnSharedDeps_React_.useState)(null),[copyOnSave,setCopyOnSave]=Object(external_kbnSharedDeps_React_.useState)(initialCopyOnSave),rightOptions=disableDashboardOptions?null:()=>external_kbnSharedDeps_React_default.a.createElement(SaveModalDashboardSelector,_extends({onSelectDashboard:dash=>{setSelectedDashboard(dash)},onChange:option=>{setDashboardOption(option)},canSaveByReference:canSaveByReference},{copyOnSave:copyOnSave,documentId:documentId,dashboardOption:dashboardOption,setAddToLibrary:setAddToLibrary,isAddToLibrarySelected:isAddToLibrarySelected})),saveLibraryLabel=!copyOnSave&&documentId?external_kbnSharedDeps_KbnI18n_.i18n.translate("presentationUtil.saveModalDashboard.saveLabel",{defaultMessage:"Save"}):external_kbnSharedDeps_KbnI18n_.i18n.translate("presentationUtil.saveModalDashboard.saveToLibraryLabel",{defaultMessage:"Save and add to library"}),saveDashboardLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("presentationUtil.saveModalDashboard.saveAndGoToDashboardLabel",{defaultMessage:"Save and go to Dashboard"}),confirmButtonLabel=null===dashboardOption?saveLibraryLabel:saveDashboardLabel,isValid=!("existing"===dashboardOption&&null===selectedDashboard);return external_kbnSharedDeps_React_default.a.createElement(public_.SavedObjectSaveModal,_extends({onSave:onSaveProps=>{let dashboardId=null;!onSaveProps.newCopyOnSave&&documentId||(dashboardId="existing"===dashboardOption?(null==selectedDashboard?void 0:selectedDashboard.id)||null:dashboardOption),props.onSave({...onSaveProps,dashboardId:dashboardId,addToLibrary:isAddToLibrarySelected})},title:documentInfo.title,showCopyOnSave:!!documentId,options:isAddToLibrarySelected?tagOptions:void 0,description:documentInfo.description,showDescription:!0},{confirmButtonLabel:confirmButtonLabel,initialCopyOnSave:initialCopyOnSave,isValid:isValid,objectType:objectType,onClose:onClose,onCopyOnSaveChange:newCopyOnSave=>{canSaveByReference&&setAddToLibrary(!0),setDashboardOption(null),setCopyOnSave(newCopyOnSave)},rightOptions:rightOptions}))}}}]);