(window.advancedSettings_bundle_jsonpfunction=window.advancedSettings_bundle_jsonpfunction||[]).push([[2],[,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var memo,isOldIE=function(){return void 0===memo&&(memo=Boolean(window&&document&&document.all&&!window.atob)),memo},getTarget=function(){var memo={};return function(target){if(void 0===memo[target]){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}}(),stylesInDom=[];function getIndexByIdentifier(identifier){for(var result=-1,i=0;i<stylesInDom.length;i++)if(stylesInDom[i].identifier===identifier){result=i;break}return result}function modulesToDom(list,options){for(var idCountMap={},identifiers=[],i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],count=idCountMap[id]||0,identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier),obj={css:item[1],media:item[2],sourceMap:item[3]};-1!==index?(stylesInDom[index].references++,stylesInDom[index].updater(obj)):stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1}),identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style"),attributes=options.attributes||{};if(void 0===attributes.nonce){var nonce=__webpack_require__.nc;nonce&&(attributes.nonce=nonce)}if(Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])})),"function"==typeof options.insert)options.insert(style);else{var target=getTarget(options.insert||"head");if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");target.appendChild(style)}return style}var textStore,replaceText=(textStore=[],function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")});function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}function applyToTag(style,options,obj){var css=obj.css,media=obj.media,sourceMap=obj.sourceMap;if(media?style.setAttribute("media",media):style.removeAttribute("media"),sourceMap&&btoa&&(css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")),style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}var singleton=null,singletonCounter=0;function addStyle(obj,options){var style,update,remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else style=insertStyleElement(options),update=applyToTag.bind(null,style,options),remove=function(){!function(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style)}(style)};return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}module.exports=function(list,options){(options=options||{}).singleton||"boolean"==typeof options.singleton||(options.singleton=isOldIE());var lastIdentifiers=modulesToDom(list=list||[],options);return function(newList){if(newList=newList||[],"[object Array]"===Object.prototype.toString.call(newList)){for(var i=0;i<lastIdentifiers.length;i++){var index=getIndexByIdentifier(lastIdentifiers[i]);stylesInDom[index].references--}for(var newLastIdentifiers=modulesToDom(newList,options),_i=0;_i<lastIdentifiers.length;_i++){var _index=getIndexByIdentifier(lastIdentifiers[_i]);0===stylesInDom[_index].references&&(stylesInDom[_index].updater(),stylesInDom.splice(_index,1))}lastIdentifiers=newLastIdentifiers}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];return list.toString=function(){return this.map((function(item){var content=function(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=(sourceMap=cssMapping,base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64),"/*# ".concat(data," */")),sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}var sourceMap,base64,data;return[content].join("\n")}(item,useSourceMap);return item[2]?"@media ".concat(item[2]," {").concat(content,"}"):content})).join("")},list.i=function(modules,mediaQuery,dedupe){"string"==typeof modules&&(modules=[[null,modules,""]]);var alreadyImportedModules={};if(dedupe)for(var i=0;i<this.length;i++){var id=this[i][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);dedupe&&alreadyImportedModules[item[0]]||(mediaQuery&&(item[2]?item[2]="".concat(mediaQuery," and ").concat(item[2]):item[2]=mediaQuery),list.push(item))}},list}},,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";const strictUriEncode=__webpack_require__(27),decodeComponent=__webpack_require__(28),splitOnFirst=__webpack_require__(29);function validateArrayFormatSeparator(value){if("string"!=typeof value||1!==value.length)throw new TypeError("arrayFormatSeparator must be single character string")}function encode(value,options){return options.encode?options.strict?strictUriEncode(value):encodeURIComponent(value):value}function decode(value,options){return options.decode?decodeComponent(value):value}function removeHash(input){const hashStart=input.indexOf("#");return-1!==hashStart&&(input=input.slice(0,hashStart)),input}function extract(input){const queryStart=(input=removeHash(input)).indexOf("?");return-1===queryStart?"":input.slice(queryStart+1)}function parseValue(value,options){return options.parseNumbers&&!Number.isNaN(Number(value))&&"string"==typeof value&&""!==value.trim()?value=Number(value):!options.parseBooleans||null===value||"true"!==value.toLowerCase()&&"false"!==value.toLowerCase()||(value="true"===value.toLowerCase()),value}function parse(input,options){validateArrayFormatSeparator((options=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},options)).arrayFormatSeparator);const formatter=function(options){let result;switch(options.arrayFormat){case"index":return(key,value,accumulator)=>{result=/\[(\d*)\]$/.exec(key),key=key.replace(/\[\d*\]$/,""),result?(void 0===accumulator[key]&&(accumulator[key]={}),accumulator[key][result[1]]=value):accumulator[key]=value};case"bracket":return(key,value,accumulator)=>{result=/(\[\])$/.exec(key),key=key.replace(/\[\]$/,""),result?void 0!==accumulator[key]?accumulator[key]=[].concat(accumulator[key],value):accumulator[key]=[value]:accumulator[key]=value};case"comma":case"separator":return(key,value,accumulator)=>{const newValue="string"==typeof value&&value.split("").indexOf(options.arrayFormatSeparator)>-1?value.split(options.arrayFormatSeparator).map(item=>decode(item,options)):null===value?value:decode(value,options);accumulator[key]=newValue};default:return(key,value,accumulator)=>{void 0!==accumulator[key]?accumulator[key]=[].concat(accumulator[key],value):accumulator[key]=value}}}(options),ret=Object.create(null);if("string"!=typeof input)return ret;if(!(input=input.trim().replace(/^[?#&]/,"")))return ret;for(const param of input.split("&")){let[key,value]=splitOnFirst(options.decode?param.replace(/\+/g," "):param,"=");value=void 0===value?null:["comma","separator"].includes(options.arrayFormat)?value:decode(value,options),formatter(decode(key,options),value,ret)}for(const key of Object.keys(ret)){const value=ret[key];if("object"==typeof value&&null!==value)for(const k of Object.keys(value))value[k]=parseValue(value[k],options);else ret[key]=parseValue(value,options)}return!1===options.sort?ret:(!0===options.sort?Object.keys(ret).sort():Object.keys(ret).sort(options.sort)).reduce((result,key)=>{const value=ret[key];return Boolean(value)&&"object"==typeof value&&!Array.isArray(value)?result[key]=function keysSorter(input){return Array.isArray(input)?input.sort():"object"==typeof input?keysSorter(Object.keys(input)).sort((a,b)=>Number(a)-Number(b)).map(key=>input[key]):input}(value):result[key]=value,result},Object.create(null))}exports.extract=extract,exports.parse=parse,exports.stringify=(object,options)=>{if(!object)return"";validateArrayFormatSeparator((options=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},options)).arrayFormatSeparator);const shouldFilter=key=>options.skipNull&&null==object[key]||options.skipEmptyString&&""===object[key],formatter=function(options){switch(options.arrayFormat){case"index":return key=>(result,value)=>{const index=result.length;return void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,[encode(key,options),"[",index,"]"].join("")]:[...result,[encode(key,options),"[",encode(index,options),"]=",encode(value,options)].join("")]};case"bracket":return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,[encode(key,options),"[]"].join("")]:[...result,[encode(key,options),"[]=",encode(value,options)].join("")];case"comma":case"separator":return key=>(result,value)=>null==value||0===value.length?result:0===result.length?[[encode(key,options),"=",encode(value,options)].join("")]:[[result,encode(value,options)].join(options.arrayFormatSeparator)];default:return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,encode(key,options)]:[...result,[encode(key,options),"=",encode(value,options)].join("")]}}(options),objectCopy={};for(const key of Object.keys(object))shouldFilter(key)||(objectCopy[key]=object[key]);const keys=Object.keys(objectCopy);return!1!==options.sort&&keys.sort(options.sort),keys.map(key=>{const value=object[key];return void 0===value?"":null===value?encode(key,options):Array.isArray(value)?value.reduce(formatter(key),[]).join("&"):encode(key,options)+"="+encode(value,options)}).filter(x=>x.length>0).join("&")},exports.parseUrl=(input,options)=>{options=Object.assign({decode:!0},options);const[url,hash]=splitOnFirst(input,"#");return Object.assign({url:url.split("?")[0]||"",query:parse(extract(input),options)},options&&options.parseFragmentIdentifier&&hash?{fragmentIdentifier:decode(hash,options)}:{})},exports.stringifyUrl=(input,options)=>{options=Object.assign({encode:!0,strict:!0},options);const url=removeHash(input.url).split("?")[0]||"",queryFromUrl=exports.extract(input.url),parsedQueryFromUrl=exports.parse(queryFromUrl,{sort:!1}),query=Object.assign(parsedQueryFromUrl,input.query);let queryString=exports.stringify(query,options);queryString&&(queryString="?"+queryString);let hash=function(url){let hash="";const hashStart=url.indexOf("#");return-1!==hashStart&&(hash=url.slice(hashStart)),hash}(input.url);return input.fragmentIdentifier&&(hash="#"+encode(input.fragmentIdentifier,options)),`${url}${queryString}${hash}`}},function(module,exports,__webpack_require__){"use strict";module.exports=str=>encodeURIComponent(str).replace(/[!'()*]/g,x=>"%"+x.charCodeAt(0).toString(16).toUpperCase())},function(module,exports,__webpack_require__){"use strict";var singleMatcher=new RegExp("%[a-f0-9]{2}","gi"),multiMatcher=new RegExp("(%[a-f0-9]{2})+","gi");function decodeComponents(components,split){try{return decodeURIComponent(components.join(""))}catch(err){}if(1===components.length)return components;split=split||1;var left=components.slice(0,split),right=components.slice(split);return Array.prototype.concat.call([],decodeComponents(left),decodeComponents(right))}function decode(input){try{return decodeURIComponent(input)}catch(err){for(var tokens=input.match(singleMatcher),i=1;i<tokens.length;i++)tokens=(input=decodeComponents(tokens,i).join("")).match(singleMatcher);return input}}module.exports=function(encodedURI){if("string"!=typeof encodedURI)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof encodedURI+"`");try{return encodedURI=encodedURI.replace(/\+/g," "),decodeURIComponent(encodedURI)}catch(err){return function(input){for(var replaceMap={"%FE%FF":"��","%FF%FE":"��"},match=multiMatcher.exec(input);match;){try{replaceMap[match[0]]=decodeURIComponent(match[0])}catch(err){var result=decode(match[0]);result!==match[0]&&(replaceMap[match[0]]=result)}match=multiMatcher.exec(input)}replaceMap["%C2"]="�";for(var entries=Object.keys(replaceMap),i=0;i<entries.length;i++){var key=entries[i];input=input.replace(new RegExp(key,"g"),replaceMap[key])}return input}(encodedURI)}}},function(module,exports,__webpack_require__){"use strict";module.exports=(string,separator)=>{if("string"!=typeof string||"string"!=typeof separator)throw new TypeError("Expected the arguments to be of type `string`");if(""===separator)return[string];const separatorIndex=string.indexOf(separator);return-1===separatorIndex?[string]:[string.slice(0,separatorIndex),string.slice(separatorIndex+separator.length)]}},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(31);case"v7light":return __webpack_require__(33);case"v8dark":return __webpack_require__(35);case"v8light":return __webpack_require__(37)}},function(module,exports,__webpack_require__){var api=__webpack_require__(14),content=__webpack_require__(32);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(15)(!1)).push([module.i,".mgtAdvancedSettings__field+*{margin-top:16px}.mgtAdvancedSettings__field .mgtAdvancedSettings__fieldTitle{padding-left:8px;margin-left:-8px}.mgtAdvancedSettings__field--unsaved .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #FFCE7A}.mgtAdvancedSettings__field--invalid .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #F66}@media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none){.mgtAdvancedSettings__field{min-height:1px}.mgtAdvancedSettings__fieldRow{min-height:1px}}.mgtAdvancedSettings__fieldTitleUnsavedIcon{margin-left:8px}@media only screen and (max-width: 574px){.mgtAdvancedSettingsForm__unsavedCount{display:none}}.mgtAdvancedSettingsForm__unsavedCountMessage{box-shadow:-4px 0 #FFCE7A;padding-left:8px}.mgtAdvancedSettingsForm__button{width:100%}.kbnBody--mgtAdvancedSettingsHasBottomBar .mgtPage__body{padding-bottom:64px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(14),content=__webpack_require__(34);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(15)(!1)).push([module.i,".mgtAdvancedSettings__field+*{margin-top:16px}.mgtAdvancedSettings__field .mgtAdvancedSettings__fieldTitle{padding-left:8px;margin-left:-8px}.mgtAdvancedSettings__field--unsaved .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #F5A700}.mgtAdvancedSettings__field--invalid .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #BD271E}@media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none){.mgtAdvancedSettings__field{min-height:1px}.mgtAdvancedSettings__fieldRow{min-height:1px}}.mgtAdvancedSettings__fieldTitleUnsavedIcon{margin-left:8px}@media only screen and (max-width: 574px){.mgtAdvancedSettingsForm__unsavedCount{display:none}}.mgtAdvancedSettingsForm__unsavedCountMessage{box-shadow:-4px 0 #F5A700;padding-left:8px}.mgtAdvancedSettingsForm__button{width:100%}.kbnBody--mgtAdvancedSettingsHasBottomBar .mgtPage__body{padding-bottom:64px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(14),content=__webpack_require__(36);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(15)(!1)).push([module.i,".mgtAdvancedSettings__field+*{margin-top:16px}.mgtAdvancedSettings__field .mgtAdvancedSettings__fieldTitle{padding-left:8px;margin-left:-8px}.mgtAdvancedSettings__field--unsaved .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #F3D371}.mgtAdvancedSettings__field--invalid .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #F86B63}@media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none){.mgtAdvancedSettings__field{min-height:1px}.mgtAdvancedSettings__fieldRow{min-height:1px}}.mgtAdvancedSettings__fieldTitleUnsavedIcon{margin-left:8px}@media only screen and (max-width: 574px){.mgtAdvancedSettingsForm__unsavedCount{display:none}}.mgtAdvancedSettingsForm__unsavedCountMessage{box-shadow:-4px 0 #F3D371;padding-left:8px}.mgtAdvancedSettingsForm__button{width:100%}.kbnBody--mgtAdvancedSettingsHasBottomBar .mgtPage__body{padding-bottom:64px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(14),content=__webpack_require__(38);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(15)(!1)).push([module.i,".mgtAdvancedSettings__field+*{margin-top:16px}.mgtAdvancedSettings__field .mgtAdvancedSettings__fieldTitle{padding-left:8px;margin-left:-8px}.mgtAdvancedSettings__field--unsaved .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #FEC514}.mgtAdvancedSettings__field--invalid .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #BD271E}@media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none){.mgtAdvancedSettings__field{min-height:1px}.mgtAdvancedSettings__fieldRow{min-height:1px}}.mgtAdvancedSettings__fieldTitleUnsavedIcon{margin-left:8px}@media only screen and (max-width: 574px){.mgtAdvancedSettingsForm__unsavedCount{display:none}}.mgtAdvancedSettingsForm__unsavedCountMessage{box-shadow:-4px 0 #FEC514;padding-left:8px}.mgtAdvancedSettingsForm__button{width:100%}.kbnBody--mgtAdvancedSettingsHasBottomBar .mgtPage__body{padding-bottom:64px}\n",""]),module.exports=exports},,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"mountManagementSection",(function(){return mountManagementSection}));var external_kbnSharedDeps_React_=__webpack_require__(0),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_ReactDom_=__webpack_require__(10),external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_),external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(11),external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(3),public_=__webpack_require__(9),query_string=__webpack_require__(26),external_kbnSharedDeps_ElasticEui_=__webpack_require__(2);const CallOuts=()=>external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"advancedSettings.callOutCautionTitle",defaultMessage:"Caution: You can break stuff here"}),color:"warning",iconType:"bolt"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"advancedSettings.callOutCautionDescription",defaultMessage:"Be careful in here, these settings are for very advanced users only. Tweaks you make here can break large portions of Kibana. Some of these settings may be undocumented, unsupported or experimental. If a field has a default value, blanking the field will reset it to its default which may be unacceptable given other configuration directives. Deleting a custom setting will permanently remove it from Kibana's config."}))));var search_search=__webpack_require__(13),external_kbnSharedDeps_Lodash_=__webpack_require__(8),kibanaReact_public_=__webpack_require__(12),lib=__webpack_require__(16),field=__webpack_require__(39);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class form_Form extends external_kbnSharedDeps_React_.PureComponent{constructor(...args){super(...args),_defineProperty(this,"state",{unsavedChanges:{},loading:!1}),_defineProperty(this,"getSettingByKey",key=>Object.values(this.props.settings).flat().find(el=>el.name===key)),_defineProperty(this,"getCountOfUnsavedChanges",()=>Object.keys(this.state.unsavedChanges).length),_defineProperty(this,"getCountOfHiddenUnsavedChanges",()=>{const shownSettings=Object.values(this.props.visibleSettings).flat().map(setting=>setting.name);return Object.keys(this.state.unsavedChanges).filter(key=>!shownSettings.includes(key)).length}),_defineProperty(this,"areChangesInvalid",()=>{const{unsavedChanges:unsavedChanges}=this.state;return Object.values(unsavedChanges).some(({isInvalid:isInvalid})=>isInvalid)}),_defineProperty(this,"handleChange",(key,change)=>{const setting=this.getSettingByKey(key);if(!setting)return;const{type:type,defVal:defVal,value:value}=setting,savedValue=Object(field.getEditableValue)(type,value,defVal);if(change.value===savedValue)return this.clearChange(key);this.setState({unsavedChanges:{...this.state.unsavedChanges,[key]:change}})}),_defineProperty(this,"clearChange",key=>{if(!this.state.unsavedChanges[key])return;const unsavedChanges={...this.state.unsavedChanges};delete unsavedChanges[key],this.setState({unsavedChanges:unsavedChanges})}),_defineProperty(this,"clearAllUnsaved",()=>{this.setState({unsavedChanges:{}})}),_defineProperty(this,"saveAll",async()=>{this.setLoading(!0);const{unsavedChanges:unsavedChanges}=this.state;if(Object(external_kbnSharedDeps_Lodash_.isEmpty)(unsavedChanges))return;const configToSave={};let requiresReload=!1;Object.entries(unsavedChanges).forEach(([name,{value:value}])=>{const setting=this.getSettingByKey(name);if(!setting)return;const{defVal:defVal,type:type,requiresPageReload:requiresPageReload,metric:metric}=setting;let valueToSave=value,equalsToDefault=!1;switch(type){case"array":valueToSave=valueToSave.trim(),valueToSave=""===valueToSave?[]:valueToSave.split(",").map(val=>val.trim()),equalsToDefault=valueToSave.join(",")===defVal.join(",");break;case"json":const isArray=Array.isArray(JSON.parse(defVal||"{}"));valueToSave=valueToSave.trim(),valueToSave=valueToSave||(isArray?"[]":"{}");case"boolean":if(metric&&this.props.trackUiMetric){const metricName=valueToSave?metric.name+"_on":metric.name+"_off";this.props.trackUiMetric(metric.type,metricName)}default:equalsToDefault=valueToSave===defVal}requiresPageReload&&(requiresReload=!0),configToSave[name]=equalsToDefault?null:valueToSave});try{await this.props.save(configToSave),this.clearAllUnsaved(),requiresReload&&this.renderPageReloadToast()}catch(e){this.props.toasts.addDanger(external_kbnSharedDeps_KbnI18n_.i18n.translate("advancedSettings.form.saveErrorMessage",{defaultMessage:"Unable to save"}))}this.setLoading(!1)}),_defineProperty(this,"renderPageReloadToast",()=>{this.props.toasts.add({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("advancedSettings.form.requiresPageReloadToastDescription",{defaultMessage:"One or more settings require you to reload the page to take effect."}),text:Object(kibanaReact_public_.toMountPoint)(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{size:"s",onClick:()=>window.location.reload()},external_kbnSharedDeps_KbnI18n_.i18n.translate("advancedSettings.form.requiresPageReloadToastButtonLabel",{defaultMessage:"Reload page"})))))),color:"success"})}),_defineProperty(this,"renderCountOfUnsaved",()=>{const unsavedCount=this.getCountOfUnsavedChanges(),hiddenUnsavedCount=this.getCountOfHiddenUnsavedChanges();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTextColor,{className:"mgtAdvancedSettingsForm__unsavedCountMessage",color:"ghost"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"advancedSettings.form.countOfSettingsChanged",defaultMessage:"{unsavedCount} unsaved {unsavedCount, plural, one {setting} other {settings} }{hiddenCount, plural, =0 {} other {, # hidden} }",values:{unsavedCount:unsavedCount,hiddenCount:hiddenUnsavedCount}}))}),_defineProperty(this,"renderBottomBar",()=>{const areChangesInvalid=this.areChangesInvalid();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBottomBar,{"data-test-subj":"advancedSetting-bottomBar"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center",responsive:!1,gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1,className:"mgtAdvancedSettingsForm__unsavedCount"},external_kbnSharedDeps_React_default.a.createElement("p",{id:"aria-describedby.countOfUnsavedSettings"},this.renderCountOfUnsaved())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{color:"ghost",size:"s",iconType:"cross",onClick:this.clearAllUnsaved,"aria-describedby":"aria-describedby.countOfUnsavedSettings","data-test-subj":"advancedSetting-cancelButton"},external_kbnSharedDeps_KbnI18n_.i18n.translate("advancedSettings.form.cancelButtonLabel",{defaultMessage:"Cancel changes"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiToolTip,{content:areChangesInvalid&&external_kbnSharedDeps_KbnI18n_.i18n.translate("advancedSettings.form.saveButtonTooltipWithInvalidChanges",{defaultMessage:"Fix invalid settings before saving."})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{className:"mgtAdvancedSettingsForm__button",disabled:areChangesInvalid,color:"secondary",fill:!0,size:"s",iconType:"check",onClick:this.saveAll,"aria-describedby":"aria-describedby.countOfUnsavedSettings",isLoading:this.state.loading,"data-test-subj":"advancedSetting-saveButton"},external_kbnSharedDeps_KbnI18n_.i18n.translate("advancedSettings.form.saveButtonLabel",{defaultMessage:"Save changes"}))))))})}setLoading(loading){this.setState({loading:loading})}renderClearQueryLink(totalSettings,currentSettings){const{clearQuery:clearQuery}=this.props;return totalSettings!==currentSettings?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement("em",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"advancedSettings.form.searchResultText",defaultMessage:"Search terms are hiding {settingsCount} settings {clearSearch}",values:{settingsCount:totalSettings-currentSettings,clearSearch:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:clearQuery},external_kbnSharedDeps_React_default.a.createElement("em",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"advancedSettings.form.clearSearchResultText",defaultMessage:"(clear search)"})))}}))):null}renderCategory(category,settings,totalSettings){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,{key:category},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,{paddingSize:"l"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiForm,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{alignItems:"baseline"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement("h2",null,Object(lib.d)(category))),this.renderClearQueryLink(totalSettings,settings.length))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),settings.map(setting=>external_kbnSharedDeps_React_default.a.createElement(field.Field,{key:setting.name,setting:setting,handleChange:this.handleChange,unsavedChanges:this.state.unsavedChanges[setting.name],clearChange:this.clearChange,enableSaving:this.props.enableSaving,dockLinks:this.props.dockLinks,toasts:this.props.toasts})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}))}maybeRenderNoSettings(clearQuery){return this.props.showNoResultsMessage?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,{paddingSize:"l"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"advancedSettings.form.noSearchResultText",defaultMessage:"No settings found {clearSearch}",values:{clearSearch:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{onClick:clearQuery},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"advancedSettings.form.clearNoSearchResultText",defaultMessage:"(clear search)"}))}})):null}render(){const{unsavedChanges:unsavedChanges}=this.state,{visibleSettings:visibleSettings,categories:categories,categoryCounts:categoryCounts,clearQuery:clearQuery}=this.props,currentCategories=[],hasUnsavedChanges=!Object(external_kbnSharedDeps_Lodash_.isEmpty)(unsavedChanges);return hasUnsavedChanges?document.body.classList.add("kbnBody--mgtAdvancedSettingsHasBottomBar"):document.body.classList.remove("kbnBody--mgtAdvancedSettingsHasBottomBar"),categories.forEach(category=>{visibleSettings[category]&&visibleSettings[category].length&&currentCategories.push(category)}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("div",null,currentCategories.length?currentCategories.map(category=>this.renderCategory(category,visibleSettings[category],categoryCounts[category])):this.maybeRenderNoSettings(clearQuery)),hasUnsavedChanges&&this.renderBottomBar())}}class advanced_settings_voice_announcement_AdvancedSettingsVoiceAnnouncement extends external_kbnSharedDeps_React_.Component{constructor(...args){var obj,key,value;super(...args),value=nextProps=>nextProps.queryText!==this.props.queryText,(key="shouldComponentUpdate")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}render(){const filteredSections=Object.values(this.props.settings).map(setting=>setting.map(option=>option.ariaName)),filteredOptions=[...filteredSections];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiScreenReaderOnly,null,external_kbnSharedDeps_React_default.a.createElement("div",{role:"region","aria-live":"polite","aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("advancedSettings.voiceAnnouncement.ariaLabel",{defaultMessage:"Advanced Settings results info"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiDelayRender,null,this.props.queryText?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"advancedSettings.voiceAnnouncement.searchResultScreenReaderMessage",defaultMessage:"You searched for {query}. There {optionLenght, plural, one {is # option} other {are # options}} in {sectionLenght, plural, one {# section} other {# sections}}",values:{query:this.props.queryText,sectionLenght:filteredSections.length,optionLenght:filteredOptions.length}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"advancedSettings.voiceAnnouncement.noSearchResultScreenReaderMessage",defaultMessage:"There {optionLenght, plural, one {is # option} other {are # options}} in {sectionLenght, plural, one {# section} other {# sections}}",values:{sectionLenght:filteredSections.length,optionLenght:filteredOptions.length}}))))}}function advanced_settings_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class advanced_settings_AdvancedSettings extends external_kbnSharedDeps_React_.Component{constructor(props){super(props),advanced_settings_defineProperty(this,"settings",void 0),advanced_settings_defineProperty(this,"groupedSettings",void 0),advanced_settings_defineProperty(this,"categoryCounts",void 0),advanced_settings_defineProperty(this,"categories",[]),advanced_settings_defineProperty(this,"uiSettingsSubscription",void 0),advanced_settings_defineProperty(this,"unregister",void 0),advanced_settings_defineProperty(this,"initSettings",this.mapConfig),advanced_settings_defineProperty(this,"initGroupedSettings",this.mapSettings),advanced_settings_defineProperty(this,"onQueryChange",({query:query})=>{this.setUrlQuery(query.text)}),advanced_settings_defineProperty(this,"clearQuery",()=>{this.setUrlQuery("")}),advanced_settings_defineProperty(this,"onFooterQueryMatchChange",matched=>{this.setState({footerQueryMatched:matched})}),advanced_settings_defineProperty(this,"saveConfig",async changes=>{const arr=Object.entries(changes).map(([key,value])=>this.props.uiSettings.set(key,value));return Promise.all(arr)}),this.settings=this.initSettings(this.props.uiSettings),this.groupedSettings=this.initGroupedSettings(this.settings),this.categories=this.initCategories(this.groupedSettings),this.categoryCounts=this.initCategoryCounts(this.groupedSettings),this.state=this.getQueryState(void 0,!0),this.unregister=this.props.history.listen(({search:search})=>{this.setState(this.getQueryState(search))})}init(config){this.settings=this.initSettings(config),this.groupedSettings=this.initGroupedSettings(this.settings),this.categories=this.initCategories(this.groupedSettings),this.categoryCounts=this.initCategoryCounts(this.groupedSettings)}initCategories(groupedSettings){return Object.keys(groupedSettings).sort((a,b)=>a===lib.a?-1:b===lib.a||a>b?1:a===b?0:-1)}initCategoryCounts(groupedSettings){return Object.keys(groupedSettings).reduce((counts,category)=>(counts[category]=groupedSettings[category].length,counts),{})}componentDidMount(){this.uiSettingsSubscription=this.props.uiSettings.getUpdate$().subscribe(()=>{const{query:query}=this.state;this.init(this.props.uiSettings),this.setState({filteredSettings:this.mapSettings(external_kbnSharedDeps_ElasticEui_.Query.execute(query,this.settings))})});const{hash:hash}=window.location;""!==hash&&setTimeout(()=>{var _document$getElementB;const id=hash.replace("#",""),element=document.getElementById(id);let globalNavOffset=0;const globalNavBars=null===(_document$getElementB=document.getElementById("globalHeaderBars"))||void 0===_document$getElementB?void 0:_document$getElementB.getElementsByClassName("euiHeader");globalNavBars&&Array.from(globalNavBars).forEach(navBar=>{globalNavOffset+=navBar.offsetHeight}),element&&(element.scrollIntoView(),window.scrollBy(0,-globalNavOffset))},0)}componentWillUnmount(){var _this$uiSettingsSubsc,_this$uiSettingsSubsc2,_this$unregister;null===(_this$uiSettingsSubsc=this.uiSettingsSubscription)||void 0===_this$uiSettingsSubsc||null===(_this$uiSettingsSubsc2=_this$uiSettingsSubsc.unsubscribe)||void 0===_this$uiSettingsSubsc2||_this$uiSettingsSubsc2.call(_this$uiSettingsSubsc),null===(_this$unregister=this.unregister)||void 0===_this$unregister||_this$unregister.call(this)}getQuery(queryString,intialQuery=!1){try{const query=intialQuery?Object(lib.c)(queryString):null!=queryString?queryString:"";return external_kbnSharedDeps_ElasticEui_.Query.parse(query)}catch({message:message}){return this.props.toasts.addWarning({title:search_search.c,text:message}),external_kbnSharedDeps_ElasticEui_.Query.parse("")}}getQueryText(search){var _parse,_ref;return null!==(_ref=(null!==(_parse=Object(query_string.parse)(null!=search?search:window.location.search))&&void 0!==_parse?_parse:{}).query)&&void 0!==_ref?_ref:""}getQueryState(search,intialQuery=!1){const queryString=this.getQueryText(search),query=this.getQuery(queryString,intialQuery),filteredSettings=this.mapSettings(external_kbnSharedDeps_ElasticEui_.Query.execute(query,this.settings));return{query:query,filteredSettings:filteredSettings,footerQueryMatched:Object.keys(filteredSettings).length>0}}setUrlQuery(q=""){const search=public_.url.addQueryParam(window.location.search,"query",q);this.props.history.push({pathname:"",search:search})}mapConfig(config){const all=config.getAll();return Object.entries(all).map(([settingId,settingDef])=>Object(lib.f)({def:settingDef,name:settingId,value:settingDef.userValue,isCustom:config.isCustom(settingId),isOverridden:config.isOverridden(settingId)})).filter(c=>!c.readOnly).sort(lib.b)}mapSettings(settings){return settings.reduce((groupedSettings,setting)=>{const category=setting.category[0];return(groupedSettings[category]=groupedSettings[category]||[]).push(setting),groupedSettings},{})}render(){const{filteredSettings:filteredSettings,query:query,footerQueryMatched:footerQueryMatched}=this.state,componentRegistry=this.props.componentRegistry,PageTitle=componentRegistry.get(componentRegistry.componentType.PAGE_TITLE_COMPONENT),PageSubtitle=componentRegistry.get(componentRegistry.componentType.PAGE_SUBTITLE_COMPONENT),PageFooter=componentRegistry.get(componentRegistry.componentType.PAGE_FOOTER_COMPONENT);return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(PageTitle,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(search_search.b,{query:query,categories:this.categories,onQueryChange:this.onQueryChange}))),external_kbnSharedDeps_React_default.a.createElement(PageSubtitle,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(CallOuts,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(advanced_settings_voice_announcement_AdvancedSettingsVoiceAnnouncement,{queryText:query.text,settings:filteredSettings}),external_kbnSharedDeps_React_default.a.createElement(form_Form,{settings:this.groupedSettings,visibleSettings:filteredSettings,categories:this.categories,categoryCounts:this.categoryCounts,clearQuery:this.clearQuery,save:this.saveConfig,showNoResultsMessage:!footerQueryMatched,enableSaving:this.props.enableSaving,dockLinks:this.props.dockLinks,toasts:this.props.toasts,trackUiMetric:this.props.trackUiMetric}),external_kbnSharedDeps_React_default.a.createElement(PageFooter,{toasts:this.props.toasts,query:query,onQueryMatchChange:this.onFooterQueryMatchChange,enableSaving:this.props.enableSaving}))}}__webpack_require__(30);const crumb=[{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("advancedSettings.advancedSettingsLabel",{defaultMessage:"Advanced Settings"})}],readOnlyBadge={text:external_kbnSharedDeps_KbnI18n_.i18n.translate("advancedSettings.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:external_kbnSharedDeps_KbnI18n_.i18n.translate("advancedSettings.badge.readOnly.tooltip",{defaultMessage:"Unable to save advanced settings"}),iconType:"glasses"},redirectUrl=({match:match,location:location})=>({pathname:"/",search:public_.url.addQueryParam(location.search,"query",null==match?void 0:match.params.query)});async function mountManagementSection(getStartServices,params,componentRegistry,usageCollection){params.setBreadcrumbs(crumb);const[{uiSettings:uiSettings,notifications:notifications,docLinks:docLinks,application:application,chrome:chrome}]=await getStartServices(),canSave=application.capabilities.advancedSettings.save,trackUiMetric=null==usageCollection?void 0:usageCollection.reportUiCounter.bind(usageCollection,"advanced_settings");return canSave||chrome.setBadge(readOnlyBadge),external_kbnSharedDeps_ReactDom_default.a.render(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.I18nProvider,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Router,{history:params.history},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Switch,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:"/:query"},props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Redirect,{to:redirectUrl(props)})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:"/"},external_kbnSharedDeps_React_default.a.createElement(advanced_settings_AdvancedSettings,{history:params.history,enableSaving:canSave,toasts:notifications.toasts,dockLinks:docLinks.links,uiSettings:uiSettings,componentRegistry:componentRegistry,trackUiMetric:trackUiMetric}))))),params.element),()=>{external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(params.element)}}}]]);