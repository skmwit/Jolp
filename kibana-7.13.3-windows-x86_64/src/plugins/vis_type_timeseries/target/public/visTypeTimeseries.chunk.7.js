(window.visTypeTimeseries_bundle_jsonpfunction=window.visTypeTimeseries_bundle_jsonpfunction||[]).push([[7],{100:function(module,exports,__webpack_require__){var _nodeId,_clockseq,rng=__webpack_require__(70),bytesToUuid=__webpack_require__(71),_lastMSecs=0,_lastNSecs=0;module.exports=function(options,buf,offset){var i=buf&&offset||0,b=buf||[],node=(options=options||{}).node||_nodeId,clockseq=void 0!==options.clockseq?options.clockseq:_clockseq;if(null==node||null==clockseq){var seedBytes=rng();null==node&&(node=_nodeId=[1|seedBytes[0],seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]]),null==clockseq&&(clockseq=_clockseq=16383&(seedBytes[6]<<8|seedBytes[7]))}var msecs=void 0!==options.msecs?options.msecs:(new Date).getTime(),nsecs=void 0!==options.nsecs?options.nsecs:_lastNSecs+1,dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&void 0===options.clockseq&&(clockseq=clockseq+1&16383),(dt<0||msecs>_lastMSecs)&&void 0===options.nsecs&&(nsecs=0),nsecs>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=msecs,_lastNSecs=nsecs,_clockseq=clockseq;var tl=(1e4*(268435455&(msecs+=122192928e5))+nsecs)%4294967296;b[i++]=tl>>>24&255,b[i++]=tl>>>16&255,b[i++]=tl>>>8&255,b[i++]=255&tl;var tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255,b[i++]=255&tmh,b[i++]=tmh>>>24&15|16,b[i++]=tmh>>>16&255,b[i++]=clockseq>>>8|128,b[i++]=255&clockseq;for(var n=0;n<6;++n)b[i+n]=node[n];return buf||bytesToUuid(b)}},101:function(module,exports,__webpack_require__){var rng=__webpack_require__(70),bytesToUuid=__webpack_require__(71);module.exports=function(options,buf,offset){var i=buf&&offset||0;"string"==typeof options&&(buf="binary"===options?new Array(16):null,options=null);var rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf)for(var ii=0;ii<16;++ii)buf[i+ii]=rnds[ii];return buf||bytesToUuid(rnds)}},113:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return convertSeriesToVars}));var _elastic_safer_lodash_set__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(39),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7),lodash__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__),_common_get_last_value__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(49),_common_empty_label__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(43),_tick_formatter__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(54),_label_date_formatter__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(67),moment__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(21),moment__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);const convertSeriesToVars=(series,model,dateFormat="lll",getConfig=null)=>{const variables={};return model.series.forEach(seriesModel=>{series.filter(row=>lodash__WEBPACK_IMPORTED_MODULE_1___default.a.startsWith(row.id,seriesModel.id)).forEach(row=>{let label=Object(_common_empty_label__WEBPACK_IMPORTED_MODULE_3__.b)(row.label);label!==_common_empty_label__WEBPACK_IMPORTED_MODULE_3__.a&&(label=lodash__WEBPACK_IMPORTED_MODULE_1___default.a.snakeCase(label));const varName=[label,lodash__WEBPACK_IMPORTED_MODULE_1___default.a.snakeCase(seriesModel.var_name)].filter(v=>v).join("."),formatter=Object(_tick_formatter__WEBPACK_IMPORTED_MODULE_4__.a)(seriesModel.formatter,seriesModel.value_template,getConfig),lastValue=Object(_common_get_last_value__WEBPACK_IMPORTED_MODULE_2__.b)(row.data),data={last:{raw:lastValue,formatted:formatter(lastValue)},data:{raw:row.data,formatted:row.data.map(point=>[moment__WEBPACK_IMPORTED_MODULE_6___default()(point[0]).format(dateFormat),formatter(point[1])])}};if(Object(_elastic_safer_lodash_set__WEBPACK_IMPORTED_MODULE_0__.set)(variables,varName,data),Object(_elastic_safer_lodash_set__WEBPACK_IMPORTED_MODULE_0__.set)(variables,label+".label",row.label),row.labelFormatted){const val=Object(_label_date_formatter__WEBPACK_IMPORTED_MODULE_5__.a)(row.labelFormatted,dateFormat);Object(_elastic_safer_lodash_set__WEBPACK_IMPORTED_MODULE_0__.set)(variables,label+".formatted",val)}})}),variables}},378:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return MarkdownVisualization}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(79),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),uuid__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(42),uuid__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_2__),lodash__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7),_plugins_kibana_react_public__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(36),_error__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(152),_lib_replace_vars__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(61),_lib_convert_series_to_vars__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(113),_lib_set_is_reversed__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(84);const getMarkdownId=id=>"markdown-"+id;function MarkdownVisualization(props){const{backgroundColor:backgroundColor,model:model,visData:visData,getConfig:getConfig}=props,series=Object(lodash__WEBPACK_IMPORTED_MODULE_3__.get)(visData,model.id+".series",[]),variables=Object(_lib_convert_series_to_vars__WEBPACK_IMPORTED_MODULE_7__.a)(series,model,getConfig("dateFormat"),props.getConfig),markdownElementId=getMarkdownId(uuid__WEBPACK_IMPORTED_MODULE_2___default.a.v1()),panelBackgroundColor=model.background_color||backgroundColor,style={backgroundColor:panelBackgroundColor};let markdown,markdownCss="";if(model.markdown){const markdownSource=Object(_lib_replace_vars__WEBPACK_IMPORTED_MODULE_6__.a)(model.markdown,{},{_all:variables,...variables});model.markdown_css&&(markdownCss=model.markdown_css.replace(new RegExp(getMarkdownId(model.id),"g"),markdownElementId));const markdownClasses=classnames__WEBPACK_IMPORTED_MODULE_1___default()("kbnMarkdown__body",{"kbnMarkdown__body--reversed":Object(_lib_set_is_reversed__WEBPACK_IMPORTED_MODULE_8__.b)(panelBackgroundColor)}),contentClasses=classnames__WEBPACK_IMPORTED_MODULE_1___default()("tvbMarkdown__content","tvbMarkdown__content--"+model.markdown_vertical_align,{"tvbMarkdown__content-isScrolling":model.markdown_scrollbars},markdownClasses),markdownError=markdownSource instanceof Error?markdownSource:null;markdown=react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"tvbMarkdown","data-test-subj":"tsvbMarkdown"},markdownError&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_error__WEBPACK_IMPORTED_MODULE_5__.a,{error:markdownError}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("style",{type:"text/css"},markdownCss),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:contentClasses},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{id:markdownElementId},!markdownError&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_plugins_kibana_react_public__WEBPACK_IMPORTED_MODULE_4__.Markdown,{markdown:markdownSource,openLinksInNewTab:model.markdown_openLinksInNewTab}))))}return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"tvbVis",style:style},markdown)}},42:function(module,exports,__webpack_require__){var v1=__webpack_require__(100),v4=__webpack_require__(101),uuid=v4;uuid.v1=v1,uuid.v4=v4,module.exports=uuid},61:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return replaceVars}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__),handlebars_dist_handlebars__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(78),handlebars_dist_handlebars__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(handlebars_dist_handlebars__WEBPACK_IMPORTED_MODULE_1__),_common_empty_label__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(43),_kbn_i18n__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3);function replaceVars(str,args={},vars={}){try{const template=handlebars_dist_handlebars__WEBPACK_IMPORTED_MODULE_1___default.a.compile(str.replace(_common_empty_label__WEBPACK_IMPORTED_MODULE_2__.a,`[${_common_empty_label__WEBPACK_IMPORTED_MODULE_2__.a}]`),{strict:!0,knownHelpersOnly:!0});return template(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.assign({},vars,{args:args}))}catch(e){if(-1!==e.toString().indexOf("Parse error"))return str;if(-1!==e.message.indexOf("not defined in")){const badVar=e.message.split(/"/)[1];e.error={caused_by:{reason:_kbn_i18n__WEBPACK_IMPORTED_MODULE_3__.i18n.translate("visTypeTimeseries.replaceVars.errors.unknownVarDescription",{defaultMessage:"{badVar} is an unknown variable",values:{badVar:"{{"+badVar+"}}"}}),title:_kbn_i18n__WEBPACK_IMPORTED_MODULE_3__.i18n.translate("visTypeTimeseries.replaceVars.errors.unknownVarTitle",{defaultMessage:"Error processing your markdown"})}}}else e.error={caused_by:{reason:_kbn_i18n__WEBPACK_IMPORTED_MODULE_3__.i18n.translate("visTypeTimeseries.replaceVars.errors.markdownErrorDescription",{defaultMessage:"Please verify you are only using markdown, known variables, and built-in Handlebars expressions"}),title:_kbn_i18n__WEBPACK_IMPORTED_MODULE_3__.i18n.translate("visTypeTimeseries.replaceVars.errors.markdownErrorTitle",{defaultMessage:"Error processing your markdown"})}};return e}}},70:function(module,exports){var getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues){var rnds8=new Uint8Array(16);module.exports=function(){return getRandomValues(rnds8),rnds8}}else{var rnds=new Array(16);module.exports=function(){for(var r,i=0;i<16;i++)0==(3&i)&&(r=4294967296*Math.random()),rnds[i]=r>>>((3&i)<<3)&255;return rnds}}},71:function(module,exports){for(var byteToHex=[],i=0;i<256;++i)byteToHex[i]=(i+256).toString(16).substr(1);module.exports=function(buf,offset){var i=offset||0,bth=byteToHex;return[bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]]].join("")}},79:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){for(var classes=[],i=0;i<arguments.length;i++){var arg=arguments[i];if(arg){var argType=typeof arg;if("string"===argType||"number"===argType)classes.push(arg);else if(Array.isArray(arg)&&arg.length){var inner=classNames.apply(null,arg);inner&&classes.push(inner)}else if("object"===argType)for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&classes.push(key)}}return classes.join(" ")}module.exports?(classNames.default=classNames,module.exports=classNames):void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,[]))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},84:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return isBackgroundDark})),__webpack_require__.d(__webpack_exports__,"b",(function(){return isBackgroundInverted}));var color__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(57),color__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(color__WEBPACK_IMPORTED_MODULE_0__),_services__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0);const isColorDark=c=>color__WEBPACK_IMPORTED_MODULE_0___default()(c).luminosity()<.45,isThemeDark=currentTheme=>{let themeIsDark=currentTheme||Object(_services__WEBPACK_IMPORTED_MODULE_1__.f)().get("theme:darkMode");return"string"==typeof currentTheme&&(themeIsDark=isColorDark(currentTheme)),themeIsDark},isBackgroundDark=(backgroundColor,currentTheme)=>{const themeIsDark=isThemeDark(currentTheme);return backgroundColor&&"inherit"!==backgroundColor?isColorDark(backgroundColor):themeIsDark},isBackgroundInverted=(backgroundColor,currentTheme)=>isBackgroundDark(backgroundColor,currentTheme)!==isThemeDark(currentTheme)}}]);