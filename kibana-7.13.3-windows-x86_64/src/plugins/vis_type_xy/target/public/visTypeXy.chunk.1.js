(window.visTypeXy_bundle_jsonpfunction=window.visTypeXy_bundle_jsonpfunction||[]).push([[1],Array(32).concat([function(module,exports,__webpack_require__){"use strict";var memo,isOldIE=function(){return void 0===memo&&(memo=Boolean(window&&document&&document.all&&!window.atob)),memo},getTarget=function(){var memo={};return function(target){if(void 0===memo[target]){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}}(),stylesInDom=[];function getIndexByIdentifier(identifier){for(var result=-1,i=0;i<stylesInDom.length;i++)if(stylesInDom[i].identifier===identifier){result=i;break}return result}function modulesToDom(list,options){for(var idCountMap={},identifiers=[],i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],count=idCountMap[id]||0,identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier),obj={css:item[1],media:item[2],sourceMap:item[3]};-1!==index?(stylesInDom[index].references++,stylesInDom[index].updater(obj)):stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1}),identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style"),attributes=options.attributes||{};if(void 0===attributes.nonce){var nonce=__webpack_require__.nc;nonce&&(attributes.nonce=nonce)}if(Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])})),"function"==typeof options.insert)options.insert(style);else{var target=getTarget(options.insert||"head");if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");target.appendChild(style)}return style}var textStore,replaceText=(textStore=[],function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")});function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}function applyToTag(style,options,obj){var css=obj.css,media=obj.media,sourceMap=obj.sourceMap;if(media?style.setAttribute("media",media):style.removeAttribute("media"),sourceMap&&btoa&&(css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")),style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}var singleton=null,singletonCounter=0;function addStyle(obj,options){var style,update,remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else style=insertStyleElement(options),update=applyToTag.bind(null,style,options),remove=function(){!function(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style)}(style)};return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}module.exports=function(list,options){(options=options||{}).singleton||"boolean"==typeof options.singleton||(options.singleton=isOldIE());var lastIdentifiers=modulesToDom(list=list||[],options);return function(newList){if(newList=newList||[],"[object Array]"===Object.prototype.toString.call(newList)){for(var i=0;i<lastIdentifiers.length;i++){var index=getIndexByIdentifier(lastIdentifiers[i]);stylesInDom[index].references--}for(var newLastIdentifiers=modulesToDom(newList,options),_i=0;_i<lastIdentifiers.length;_i++){var _index=getIndexByIdentifier(lastIdentifiers[_i]);0===stylesInDom[_index].references&&(stylesInDom[_index].updater(),stylesInDom.splice(_index,1))}lastIdentifiers=newLastIdentifiers}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];return list.toString=function(){return this.map((function(item){var content=function(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=(sourceMap=cssMapping,base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64),"/*# ".concat(data," */")),sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}var sourceMap,base64,data;return[content].join("\n")}(item,useSourceMap);return item[2]?"@media ".concat(item[2]," {").concat(content,"}"):content})).join("")},list.i=function(modules,mediaQuery,dedupe){"string"==typeof modules&&(modules=[[null,modules,""]]);var alreadyImportedModules={};if(dedupe)for(var i=0;i<this.length;i++){var id=this[i][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);dedupe&&alreadyImportedModules[item[0]]||(mediaQuery&&(item[2]?item[2]="".concat(mediaQuery," and ").concat(item[2]):item[2]=mediaQuery),list.push(item))}},list}},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(35);case"v7light":return __webpack_require__(37);case"v8dark":return __webpack_require__(39);case"v8light":return __webpack_require__(41)}},function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(36);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".detailedTooltip{box-shadow:0 12px 24px 0 rgba(0,0,0,0.1),0 6px 12px 0 rgba(0,0,0,0.1),0 4px 4px 0 rgba(0,0,0,0.1),0 2px 2px 0 rgba(0,0,0,0.1);border-radius:4px;background-color:#000;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.75rem;line-height:1.5;padding:8px;pointer-events:none;max-width:320px;overflow:hidden;padding:8px}.detailedTooltip table td,.detailedTooltip table th{text-align:left;padding:4px;overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__header>:last-child{margin-bottom:8px}.detailedTooltip__labelContainer,.detailedTooltip__valueContainer{overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__label{font-weight:500;color:#ccc}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(38);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".detailedTooltip{box-shadow:0 12px 24px 0 rgba(0,0,0,0.1),0 6px 12px 0 rgba(0,0,0,0.1),0 4px 4px 0 rgba(0,0,0,0.1),0 2px 2px 0 rgba(0,0,0,0.1);border-radius:4px;background-color:#404040;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.75rem;line-height:1.5;padding:8px;pointer-events:none;max-width:320px;overflow:hidden;padding:8px}.detailedTooltip table td,.detailedTooltip table th{text-align:left;padding:4px;overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__header>:last-child{margin-bottom:8px}.detailedTooltip__labelContainer,.detailedTooltip__valueContainer{overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__label{font-weight:500;color:#ccc}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(40);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".detailedTooltip{box-shadow:0 1px 5px rgba(0,0,0,0.25),0 3.6px 13px rgba(0,0,0,0.175),0 8.4px 23px rgba(0,0,0,0.15),0 23px 35px rgba(0,0,0,0.125);border-radius:6px;background-color:#000;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.85714rem;line-height:1.14286rem;padding:8px;pointer-events:none;max-width:320px;overflow:hidden;padding:8px}.detailedTooltip table td,.detailedTooltip table th{text-align:left;padding:4px;overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__header>:last-child{margin-bottom:8px}.detailedTooltip__labelContainer,.detailedTooltip__valueContainer{overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__label{font-weight:500;color:#ccc}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(42);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".detailedTooltip{box-shadow:0 1px 5px rgba(0,0,0,0.1),0 3.6px 13px rgba(0,0,0,0.07),0 8.4px 23px rgba(0,0,0,0.06),0 23px 35px rgba(0,0,0,0.05);border-radius:6px;background-color:#404040;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.85714rem;line-height:1.14286rem;padding:8px;pointer-events:none;max-width:320px;overflow:hidden;padding:8px}.detailedTooltip table td,.detailedTooltip table th{text-align:left;padding:4px;overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__header>:last-child{margin-bottom:8px}.detailedTooltip__labelContainer,.detailedTooltip__valueContainer{overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__label{font-weight:500;color:#ccc}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(44);case"v7light":return __webpack_require__(46);case"v8dark":return __webpack_require__(48);case"v8light":return __webpack_require__(50)}},function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(45);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".xyChart__container{position:absolute;top:0;right:0;bottom:0;left:0}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(47);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".xyChart__container{position:absolute;top:0;right:0;bottom:0;left:0}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(49);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".xyChart__container{position:absolute;top:0;right:0;bottom:0;left:0}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(51);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".xyChart__container{position:absolute;top:0;right:0;bottom:0;left:0}\n",""]),module.exports=exports},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var external_kbnSharedDeps_React_=__webpack_require__(4),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_ElasticCharts_=__webpack_require__(3),external_kbnSharedDeps_Lodash_=__webpack_require__(29),public_=__webpack_require__(5),data_public_=__webpack_require__(2),common=__webpack_require__(6);const getCurveType=type=>{switch(type){case"cardinal":return external_kbnSharedDeps_ElasticCharts_.CurveType.CURVE_MONOTONE_X;case"step-after":return external_kbnSharedDeps_ElasticCharts_.CurveType.CURVE_STEP_AFTER;case"linear":default:return external_kbnSharedDeps_ElasticCharts_.CurveType.LINEAR}};var external_kbnSharedDeps_Moment_=__webpack_require__(24),external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_),services=__webpack_require__(8);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),external_kbnSharedDeps_ElasticEui_=__webpack_require__(13);const getLegendActions=(canFilter,getFilterEventData,onFilter,getSeriesName)=>({series:[xySeries]})=>{const[popoverOpen,setPopoverOpen]=Object(external_kbnSharedDeps_React_.useState)(!1),[isfilterable,setIsfilterable]=Object(external_kbnSharedDeps_React_.useState)(!1),series=xySeries,filterData=getFilterEventData(series);if((async()=>{setIsfilterable(await canFilter(filterData))})(),!isfilterable||!filterData)return null;const name=getSeriesName(series),panels=[{id:"main",title:""+name,items:[{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("visTypeXy.legend.filterForValueButtonAriaLabel",{defaultMessage:"Filter for value"}),"data-test-subj":`legend-${name}-filterIn`,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"plusInCircle",size:"m"}),onClick:()=>{setPopoverOpen(!1),onFilter(filterData)}},{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("visTypeXy.legend.filterOutValueButtonAriaLabel",{defaultMessage:"Filter out value"}),"data-test-subj":`legend-${name}-filterOut`,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"minusInCircle",size:"m"}),onClick:()=>{setPopoverOpen(!1),onFilter(filterData,!0)}}]}],Button=external_kbnSharedDeps_React_default.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",marginLeft:4,marginRight:4},"data-test-subj":"legend-"+name,onKeyPress:()=>{},onClick:()=>setPopoverOpen(!popoverOpen)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{size:"s",type:"boxesVertical"}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPopover,{id:"contextMenuNormal",button:Button,isOpen:popoverOpen,closePopover:()=>setPopoverOpen(!1),panelPaddingSize:"none",anchorPosition:"upLeft",title:external_kbnSharedDeps_KbnI18n_.i18n.translate("visTypeXy.legend.filterOptionsLegend",{defaultMessage:"{legendDataLabel}, filter options",values:{legendDataLabel:name}})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiContextMenu,{initialPanelId:"main",panels:panels}))},emptyTextLabel=external_kbnSharedDeps_KbnI18n_.i18n.translate("visTypeXy.emptyTextColumnValue",{defaultMessage:"(empty)"}),fillEmptyValue=value=>""===value?emptyTextLabel:value;const getSeriesNameFn=(aspects,multipleY=!1)=>Object(external_kbnSharedDeps_Lodash_.memoize)(({splitAccessors:splitAccessors,yAccessor:yAccessor})=>{var _aspects$y$find$title,_aspects$y$find;const splitValues=function(splitAccessors,seriesAspects){if(splitAccessors.size<1)return[];const splitValues=[];return splitAccessors.forEach((value,key)=>{const split=(null!=seriesAspects?seriesAspects:[]).find(({accessor:accessor})=>accessor===key);splitValues.push(null!=split&&split.formatter?null==split?void 0:split.formatter(value):value)}),splitValues.map(fillEmptyValue)}(splitAccessors,aspects.series),yAccessorTitle=null!==(_aspects$y$find$title=null===(_aspects$y$find=aspects.y.find(({accessor:accessor})=>accessor===yAccessor))||void 0===_aspects$y$find?void 0:_aspects$y$find.title)&&void 0!==_aspects$y$find$title?_aspects$y$find$title:null;return yAccessorTitle?multipleY?0===splitValues.length?yAccessorTitle:`${splitValues.join(" - ")}: ${yAccessorTitle}`:splitValues.length>0?splitValues.join(" - "):yAccessorTitle:null});function getAnchorPosition(legendPosition){switch(legendPosition){case external_kbnSharedDeps_ElasticCharts_.Position.Bottom:return"upCenter";case external_kbnSharedDeps_ElasticCharts_.Position.Top:return"downCenter";case external_kbnSharedDeps_ElasticCharts_.Position.Left:return"rightCenter";default:return"leftCenter"}}const getFieldName=(fieldName,index)=>`${fieldName}${void 0!==index?"::"+index:""}`,isRangeAggType=type=>type===data_public_.BUCKET_TYPES.DATE_RANGE||type===data_public_.BUCKET_TYPES.RANGE||type===data_public_.BUCKET_TYPES.IP_RANGE,getComplexAccessor=(fieldName,isComplex=!1)=>(aspect,index)=>{if(!aspect.accessor)return;if(!isComplex&&!isRangeAggType(aspect.aggType)||!aspect.formatter)return aspect.accessor;const formatter=aspect.formatter,accessor=aspect.accessor,fn=d=>{const v=d[accessor];if(void 0===v)return;return formatter(v)};return fn.fieldName=getFieldName(fieldName,index),fn},getSplitSeriesAccessorFnMap=splitSeriesAccessors=>{const m=new Map;return splitSeriesAccessors.forEach((accessor,index)=>{if("function"==typeof accessor){const fieldName=getFieldName("__complexSplitAccessor__",index);m.set(fieldName,accessor)}}),m},XYAxis=({id:id,title:title,show:show,position:position,groupId:groupId,grid:grid,ticks:ticks,domain:domain,style:style,integersOnly:integersOnly})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Axis,{id:id+"__axis",groupId:groupId,hide:!show,title:title,style:style,domain:domain,position:position,integersOnly:integersOnly,showGridLines:null==grid?void 0:grid.show,tickFormat:null==ticks?void 0:ticks.formatter,labelFormat:null==ticks?void 0:ticks.labelFormatter,showOverlappingLabels:null==ticks?void 0:ticks.showOverlappingLabels,showDuplicatedTicks:null==ticks?void 0:ticks.showDuplicates}),XYEndzones=({enabled:enabled,isDarkMode:isDarkMode,isFullBin:isFullBin,hideTooltips:hideTooltips,domain:domain,adjustedDomain:adjustedDomain})=>enabled&&domain&&adjustedDomain&&"min"in domain&&"max"in domain&&void 0!==domain.minInterval&&"min"in adjustedDomain&&"max"in adjustedDomain?external_kbnSharedDeps_React_default.a.createElement(public_.Endzones,{isFullBin:isFullBin,isDarkMode:isDarkMode,domainStart:domain.min,domainEnd:domain.max,interval:domain.minInterval,domainMin:adjustedDomain.min,domainMax:adjustedDomain.max,hideTooltips:hideTooltips}):null,XYCurrentTime=({enabled:enabled,isDarkMode:isDarkMode,domain:domain})=>{if(!enabled)return null;const domainEnd=domain&&"max"in domain?domain.max:void 0;return external_kbnSharedDeps_React_default.a.createElement(public_.CurrentTime,{isDarkMode:isDarkMode,domainEnd:domainEnd})};const XYSettings=({markSizeRatio:markSizeRatio,rotation:rotation,enableHistogramMode:enableHistogramMode,tooltip:tooltip,isTimeChart:isTimeChart,xAxis:xAxis,orderBucketsBySum:orderBucketsBySum,xDomain:xDomain,adjustedXDomain:adjustedXDomain,showLegend:showLegend,onElementClick:onElementClick,onBrushEnd:onBrushEnd,onRenderChange:onRenderChange,legendAction:legendAction,legendColorPicker:legendColorPicker,legendPosition:legendPosition})=>{var _theme$chartMargins$b,_theme$chartMargins,_theme$chartMargins$r,_theme$chartMargins2,_xAxis$ticks,_document$getElementB,_window$_echDebugStat;const themeService=Object(services.d)(),theme=themeService.useChartsTheme(),baseTheme=themeService.useChartsBaseTheme();var isHorizontal;const themeOverrides={markSizeRatio:markSizeRatio,sharedStyle:{unhighlighted:{opacity:Object(services.f)().get("visualization:dimmingOpacity")}},barSeriesStyle:{...{displayValue:{fontSize:{min:10,max:15},fill:{textInverted:!0,textBorder:2},alignment:(isHorizontal=90===rotation||-90===rotation)?{vertical:external_kbnSharedDeps_ElasticCharts_.VerticalAlignment.Middle}:{horizontal:external_kbnSharedDeps_ElasticCharts_.HorizontalAlignment.Center},offsetX:isHorizontal?10:0,offsetY:isHorizontal?0:-10}}},axes:{axisTitle:{padding:{outer:10}}},chartMargins:legendPosition===external_kbnSharedDeps_ElasticCharts_.Position.Top||legendPosition===external_kbnSharedDeps_ElasticCharts_.Position.Right?{bottom:(null!==(_theme$chartMargins$b=null===(_theme$chartMargins=theme.chartMargins)||void 0===_theme$chartMargins?void 0:_theme$chartMargins.bottom)&&void 0!==_theme$chartMargins$b?_theme$chartMargins$b:0)+10}:{right:(null!==(_theme$chartMargins$r=null===(_theme$chartMargins2=theme.chartMargins)||void 0===_theme$chartMargins2?void 0:_theme$chartMargins2.right)&&void 0!==_theme$chartMargins$r?_theme$chartMargins$r:0)+10}},headerValueFormatter=null!==(_xAxis$ticks=xAxis.ticks)&&void 0!==_xAxis$ticks&&_xAxis$ticks.formatter?value=>{var _fillEmptyValue,_xAxis$ticks2,_xAxis$ticks2$formatt;return null!==(_fillEmptyValue=fillEmptyValue(null===(_xAxis$ticks2=xAxis.ticks)||void 0===_xAxis$ticks2||null===(_xAxis$ticks2$formatt=_xAxis$ticks2.formatter)||void 0===_xAxis$ticks2$formatt?void 0:_xAxis$ticks2$formatt.call(_xAxis$ticks2,value)))&&void 0!==_fillEmptyValue?_fillEmptyValue:""}:void 0,headerFormatter=isTimeChart&&xDomain&&adjustedXDomain?Object(public_.renderEndzoneTooltip)(xDomain.minInterval,"min"in xDomain?xDomain.min:void 0,"max"in xDomain?xDomain.max:void 0,headerValueFormatter,!tooltip.detailedTooltip):headerValueFormatter&&(tooltip.detailedTooltip?void 0:({value:value})=>headerValueFormatter(value)),boundary=null!==(_document$getElementB=document.getElementById("app-fixed-viewport"))&&void 0!==_document$getElementB?_document$getElementB:void 0,tooltipProps=tooltip.detailedTooltip?{...tooltip,boundary:boundary,customTooltip:tooltip.detailedTooltip(headerFormatter),headerFormatter:void 0}:{...tooltip,boundary:boundary,headerFormatter:headerFormatter};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Settings,{debugState:null!==(_window$_echDebugStat=window._echDebugStateFlag)&&void 0!==_window$_echDebugStat&&_window$_echDebugStat,xDomain:adjustedXDomain,rotation:rotation,theme:[themeOverrides,theme],baseTheme:baseTheme,showLegend:showLegend,legendPosition:legendPosition,allowBrushingLastHistogramBucket:isTimeChart,roundHistogramBrushValues:enableHistogramMode&&!isTimeChart,legendColorPicker:legendColorPicker,onElementClick:onElementClick,onBrushEnd:onBrushEnd,onRenderChange:onRenderChange,legendAction:legendAction,tooltip:tooltipProps,orderOrdinalBinsBy:orderBucketsBySum?{direction:external_kbnSharedDeps_ElasticCharts_.Direction.Descending}:void 0})},XYThresholdLine=({show:show,value:dataValue,color:color,width:width,groupId:groupId,dash:dash})=>show?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.LineAnnotation,{id:"__threshold_line__",groupId:groupId,domainType:external_kbnSharedDeps_ElasticCharts_.AnnotationDomainType.YDomain,dataValues:[{dataValue:dataValue}],style:{line:{stroke:color,strokeWidth:null!=width?width:2,opacity:1,dash:dash}}}):null;var types=__webpack_require__(0);function getThresholdLine({style:style,...rest},yAxes,seriesParams){var _yAxes$find;const groupId=null===(_yAxes$find=yAxes.find(({id:id})=>seriesParams.some(({valueAxis:valueAxis})=>id===valueAxis)))||void 0===_yAxes$find?void 0:_yAxes$find.groupId;return{...rest,dash:getDash(style),groupId:groupId}}function getDash(style){switch(style){case types.ThresholdLineStyle.Dashed:return[10,5];case types.ThresholdLineStyle.DotDashed:return[20,5,5,5];case types.ThresholdLineStyle.Full:default:return}}function getRotation({position:position}){return"left"===position||"right"===position?90:0}__webpack_require__(34);const renderData=({label:label,value:rawValue},index)=>{const value=fillEmptyValue(rawValue);return label&&value?external_kbnSharedDeps_React_default.a.createElement("tr",{key:label+value+index},external_kbnSharedDeps_React_default.a.createElement("td",{className:"detailedTooltip__label"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"detailedTooltip__labelContainer"},label)),external_kbnSharedDeps_React_default.a.createElement("td",{className:"detailedTooltip__value"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"detailedTooltip__valueContainer"},value))):null},getDetailedTooltip=aspects=>headerFormatter=>function({header:header,values:values}){const highlightedValue=values.find(({isHighlighted:isHighlighted})=>isHighlighted);if(!highlightedValue)return null;const tooltipData=((aspects,header,value)=>{var _aspects$y$find;const data=[];if(header){const xFormatter=isRangeAggType(aspects.x.aggType)?null:aspects.x.formatter;data.push({label:aspects.x.title,value:xFormatter?xFormatter(header.value):""+header.value})}const valueSeries=value.seriesIdentifier,yAccessor=null!==(_aspects$y$find=aspects.y.find(({accessor:accessor})=>accessor===valueSeries.yAccessor))&&void 0!==_aspects$y$find?_aspects$y$find:null;return yAccessor&&data.push({label:yAccessor.title,value:yAccessor.formatter?yAccessor.formatter(value.value):""+value.value}),aspects.z&&!Object(external_kbnSharedDeps_Lodash_.isNil)(value.markValue)&&data.push({label:aspects.z.title,value:aspects.z.formatter?aspects.z.formatter(value.markValue):""+value.markValue}),valueSeries.splitAccessors.forEach((splitValue,key)=>{var _aspects$series;const split=(null!==(_aspects$series=aspects.series)&&void 0!==_aspects$series?_aspects$series:[]).find(({accessor:accessor},i)=>accessor===key||key==="__complexSplitAccessor__::"+i);split&&data.push({label:null==split?void 0:split.title,value:null!=split&&split.formatter&&!key.toString().startsWith("__complexSplitAccessor__")?null==split?void 0:split.formatter(splitValue):""+splitValue})}),aspects.splitColumn&&void 0!==valueSeries.smHorizontalAccessorValue&&void 0!==valueSeries.smHorizontalAccessorValue&&data.push({label:aspects.splitColumn.title,value:""+valueSeries.smHorizontalAccessorValue}),aspects.splitRow&&void 0!==valueSeries.smVerticalAccessorValue&&void 0!==valueSeries.smVerticalAccessorValue&&data.push({label:aspects.splitRow.title,value:""+valueSeries.smVerticalAccessorValue}),data})(aspects,header,highlightedValue);return 0===tooltipData.length?null:external_kbnSharedDeps_React_default.a.createElement("div",{className:"detailedTooltip"},headerFormatter&&header&&external_kbnSharedDeps_React_default.a.createElement("div",{className:"detailedTooltip__header"},headerFormatter(header)),external_kbnSharedDeps_React_default.a.createElement("table",null,external_kbnSharedDeps_React_default.a.createElement("tbody",null,tooltipData.map(renderData))))};function getLegend({addLegend:addLegend,legendPosition:legendPosition}){return{show:addLegend,position:legendPosition}}function getAxis({type:type,title:axisTitle,labels:labels,scale:axisScale,...axis},{categoryLines:categoryLines,valueAxis:valueAxis},{params:params,format:format,formatter:formatter,title:fallbackTitle="",aggType:aggType},seriesParams,isDateHistogram=!1){const isCategoryAxis=type===types.AxisType.Category,show=(isCategoryAxis||seriesParams.some(({valueAxis:id})=>id===axis.id))&&axis.show,groupId=axis.id,grid=isCategoryAxis?{show:categoryLines}:{show:valueAxis===axis.id},tickFormatter=aggType===data_public_.BUCKET_TYPES.DATE_RANGE||aggType===data_public_.BUCKET_TYPES.RANGE?external_kbnSharedDeps_Lodash_.identity:formatter,ticks={formatter:tickFormatter,labelFormatter:getLabelFormatter(labels.truncate,tickFormatter),show:labels.show,rotation:labels.rotate,showOverlappingLabels:!labels.filter,showDuplicates:!labels.filter},scale=function(scale,params,format,isCategoryAxis){var _format$params;const type=isCategoryAxis?getScaleType(scale,"number"===(null==format?void 0:format.id)||"number"===(null==format||null===(_format$params=format.params)||void 0===_format$params?void 0:_format$params.id)&&"range"!==(null==format?void 0:format.id),"date"in params,"interval"in params):getScaleType(scale,!0);return{...scale,type:type}}(axisScale,params,format,isCategoryAxis),title=axisTitle.text||fallbackTitle,fallbackRotation=isCategoryAxis&&isDateHistogram?public_.LabelRotation.Horizontal:public_.LabelRotation.Vertical;return{...axis,show:show,groupId:groupId,title:title,ticks:ticks,grid:grid,scale:scale,style:getAxisStyle(ticks,title,fallbackRotation),domain:getAxisDomain(scale,isCategoryAxis),integersOnly:"count"===aggType}}function getLabelFormatter(truncate,formatter){return null==truncate?formatter:value=>{const formattedStringValue=""+(formatter?formatter(value):value),finalValue=fillEmptyValue(formattedStringValue);return finalValue.length>truncate?finalValue.slice(0,truncate)+"...":finalValue}}function getScaleType(scale,isNumber,isTime=!1,isHistogram=!1){if(isTime)return external_kbnSharedDeps_ElasticCharts_.ScaleType.Time;if(isHistogram)return external_kbnSharedDeps_ElasticCharts_.ScaleType.Linear;if(!isNumber)return external_kbnSharedDeps_ElasticCharts_.ScaleType.Ordinal;const type=null==scale?void 0:scale.type;return type===types.ScaleType.SquareRoot?external_kbnSharedDeps_ElasticCharts_.ScaleType.Sqrt:type}function getAxisStyle(ticks,title,rotationFallback=public_.LabelRotation.Vertical){var _ticks$rotation;return{axisTitle:{visible:(null!=title?title:"").trim().length>0},tickLabel:{visible:null==ticks?void 0:ticks.show,rotation:-(null!==(_ticks$rotation=null==ticks?void 0:ticks.rotation)&&void 0!==_ticks$rotation?_ticks$rotation:rotationFallback)}}}function getAxisDomain(scale,isCategoryAxis){if(isCategoryAxis||!scale)return;const{min:min,max:max,defaultYExtents:defaultYExtents,boundsMargin:boundsMargin}=scale,fit=defaultYExtents,padding=boundsMargin;return Object(external_kbnSharedDeps_Lodash_.isNil)(min)||Object(external_kbnSharedDeps_Lodash_.isNil)(max)?Object(external_kbnSharedDeps_Lodash_.isNil)(min)?Object(external_kbnSharedDeps_Lodash_.isNil)(max)?{fit:fit,padding:padding}:{fit:fit,padding:padding,max:max}:{fit:fit,padding:padding,min:min}:{fit:fit,padding:padding,min:min,max:max}}var get_agg_id=__webpack_require__(19);function getAspectsFromDimension(columns,dimensions){if(!dimensions)return;if(Array.isArray(dimensions))return Object(external_kbnSharedDeps_Lodash_.compact)(dimensions.map(d=>{const column=d&&columns[d.accessor];return column&&getAspect(column,d)}));const column=columns[dimensions.accessor];return column&&getAspect(column,dimensions)}const getAspect=({id:accessor,name:title},{accessor:column,format:format,params:params,aggType:aggType})=>({accessor:accessor,column:column,title:title,format:format,aggType:aggType,aggId:Object(get_agg_id.a)(accessor),formatter:value=>Object(services.b)().deserialize(format).convert(value),params:params});var public_0=__webpack_require__(25);function getConfig(table,params){var _params$dimensions$x,_params$dimensions$x2,_params$dimensions$x3,_date,_labels$show;const{thresholdLine:thresholdLine,orderBucketsBySum:orderBucketsBySum,addTimeMarker:addTimeMarker,radiusRatio:radiusRatio,labels:labels,fittingFunction:fittingFunction,detailedTooltip:detailedTooltip,isVislibVis:isVislibVis}=params,aspects=function(columns,{x:x,y:y,z:z,series:series,splitColumn:splitColumn,splitRow:splitRow}){var _getAspectsFromDimens,_getAspectsFromDimens2;const seriesDimensions=Array.isArray(series)||void 0===series?series:[series];return{x:null!==(_getAspectsFromDimens=getAspectsFromDimension(columns,x))&&void 0!==_getAspectsFromDimens?_getAspectsFromDimens:{accessor:null,aggId:null,aggType:null,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("visTypeXy.aggResponse.allDocsTitle",{defaultMessage:"All docs"}),params:{defaultValue:"_all"}},y:null!==(_getAspectsFromDimens2=getAspectsFromDimension(columns,y))&&void 0!==_getAspectsFromDimens2?_getAspectsFromDimens2:[],z:z&&(null==z?void 0:z.length)>0?getAspectsFromDimension(columns,z[0]):void 0,series:getAspectsFromDimension(columns,seriesDimensions),splitColumn:null!=splitColumn&&splitColumn.length?getAspectsFromDimension(columns,splitColumn[0]):void 0,splitRow:null!=splitRow&&splitRow.length?getAspectsFromDimension(columns,splitRow[0]):void 0}}(table.columns,params.dimensions),xAxis=getAxis(params.categoryAxes[0],params.grid,aspects.x,params.seriesParams,(null===(_params$dimensions$x=params.dimensions.x)||void 0===_params$dimensions$x?void 0:_params$dimensions$x.aggType)===data_public_.BUCKET_TYPES.DATE_HISTOGRAM),tooltip=function(aspects,{addTooltip:addTooltip,detailedTooltip:detailedTooltip}){return{type:addTooltip?external_kbnSharedDeps_ElasticCharts_.TooltipType.VerticalCursor:external_kbnSharedDeps_ElasticCharts_.TooltipType.None,detailedTooltip:detailedTooltip?getDetailedTooltip(aspects):void 0}}(aspects,params),yAxes=params.valueAxes.map(a=>getAxis(a,params.grid,aspects.y[0],params.seriesParams)),enableHistogramMode=((null===(_params$dimensions$x2=params.dimensions.x)||void 0===_params$dimensions$x2?void 0:_params$dimensions$x2.aggType)===data_public_.BUCKET_TYPES.DATE_HISTOGRAM||(null===(_params$dimensions$x3=params.dimensions.x)||void 0===_params$dimensions$x3?void 0:_params$dimensions$x3.aggType)===data_public_.BUCKET_TYPES.HISTOGRAM)&&shouldEnableHistogramMode(params.seriesParams,aspects.y,yAxes),isTimeChart=null!==(_date=aspects.x.params.date)&&void 0!==_date&&_date;return{markSizeRatio:.6*radiusRatio,fittingFunction:fittingFunction,detailedTooltip:detailedTooltip,orderBucketsBySum:orderBucketsBySum,isTimeChart:isTimeChart,isVislibVis:isVislibVis,showCurrentTime:addTimeMarker&&isTimeChart,showValueLabel:null!==(_labels$show=labels.show)&&void 0!==_labels$show&&_labels$show,enableHistogramMode:enableHistogramMode,tooltip:tooltip,aspects:aspects,xAxis:xAxis,yAxes:yAxes,legend:getLegend(params),rotation:getRotation(params.categoryAxes[0]),thresholdLine:getThresholdLine(thresholdLine,yAxes,params.seriesParams)}}const shouldEnableHistogramMode=(seriesParams,yAspects,yAxes)=>{const bars=seriesParams.filter(({type:type,data:{id:paramId}})=>type===public_0.ChartType.Histogram&&void 0!==yAspects.find(({aggId:aggId})=>aggId===paramId));return!([...bars.reduce((acc,{valueAxis:groupId,mode:mode})=>(acc.add(groupId),acc),new Set)].length>1)&&bars.every(({valueAxis:groupId,mode:mode})=>{var _yAxes$find;const yAxisScale=null===(_yAxes$find=yAxes.find(({groupId:axisGroupId})=>axisGroupId===groupId))||void 0===_yAxes$find?void 0:_yAxes$find.scale;return"stacked"===mode||"percentage"===(null==yAxisScale?void 0:yAxisScale.mode)})};__webpack_require__(43);const ChartSplitter=({splitColumnAccessor:splitColumnAccessor,splitRowAccessor:splitRowAccessor,sort:sort})=>splitColumnAccessor||splitRowAccessor?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.GroupBy,{id:"__chart_splitter__",by:(spec,datum)=>{const splitTypeAccessor=splitColumnAccessor||splitRowAccessor;return splitTypeAccessor?"function"==typeof splitTypeAccessor?splitTypeAccessor(datum):datum[splitTypeAccessor]:spec.id},sort:sort||"dataIndex"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.SmallMultiples,{splitVertically:splitRowAccessor?"__chart_splitter__":void 0,splitHorizontally:splitColumnAccessor?"__chart_splitter__":void 0})):null;function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const VisComponent=props=>{var _config$aspects$serie,_config$aspects$serie2,_config$aspects$serie3;const[showLegend,setShowLegend]=Object(external_kbnSharedDeps_React_.useState)(()=>{var _props$uiState;const bwcLegendStateDefault=null==props.visParams.addLegend||props.visParams.addLegend;return null===(_props$uiState=props.uiState)||void 0===_props$uiState?void 0:_props$uiState.get("vis.legendOpen",bwcLegendStateDefault)}),[palettesRegistry,setPalettesRegistry]=Object(external_kbnSharedDeps_React_.useState)(null),onRenderChange=Object(external_kbnSharedDeps_React_.useCallback)(isRendered=>{isRendered&&props.renderComplete()},[props]);Object(external_kbnSharedDeps_React_.useEffect)(()=>{(async()=>{const palettes=await Object(services.c)().getPalettes();setPalettesRegistry(palettes)})()},[]);const handleFilterClick=Object(external_kbnSharedDeps_React_.useCallback)((visData,xAccessor,splitSeriesAccessors,splitChartAccessor)=>{const splitSeriesAccessorFnMap=getSplitSeriesAccessorFnMap(splitSeriesAccessors);return elements=>{if(null!==xAccessor){const event=Object(public_.getFilterFromChartClickEventFn)(visData,xAccessor,splitSeriesAccessorFnMap,splitChartAccessor)(elements);props.fireEvent(event)}}},[props]),handleBrush=Object(external_kbnSharedDeps_React_.useCallback)((visData,xAccessor,isInterval)=>{if(null!==xAccessor&&isInterval)return brushArea=>{const event=Object(public_.getBrushFromChartBrushEventFn)(visData,xAccessor)(brushArea);props.fireEvent(event)}},[props]),getFilterEventData=Object(external_kbnSharedDeps_React_.useCallback)((visData,xAccessor,splitSeriesAccessors)=>{const splitSeriesAccessorFnMap=getSplitSeriesAccessorFnMap(splitSeriesAccessors);return series=>null!==xAccessor?Object(public_.getFilterFromSeriesFn)(visData)(series,splitSeriesAccessorFnMap):null},[]),handleFilterAction=Object(external_kbnSharedDeps_React_.useCallback)((event,negate=!1)=>{props.fireEvent({...event,data:{...event.data,negate:negate}})},[props]),toggleLegend=Object(external_kbnSharedDeps_React_.useCallback)(()=>{setShowLegend(value=>{var _props$uiState2;const newValue=!value;return null!==(_props$uiState2=props.uiState)&&void 0!==_props$uiState2&&_props$uiState2.set&&props.uiState.set("vis.legendOpen",newValue),newValue})},[props.uiState]),setColor=Object(external_kbnSharedDeps_React_.useCallback)((newColor,seriesLabel)=>{var _props$uiState3,_props$uiState4;const colors=(null===(_props$uiState3=props.uiState)||void 0===_props$uiState3?void 0:_props$uiState3.get("vis.colors"))||{};colors[seriesLabel]!==newColor&&newColor?colors[seriesLabel]=newColor:delete colors[seriesLabel],null!==(_props$uiState4=props.uiState)&&void 0!==_props$uiState4&&_props$uiState4.set&&(props.uiState.setSilent("vis.colors",null),props.uiState.set("vis.colors",colors),props.uiState.emit("colorChanged"))},[props.uiState]),{visData:visData,visParams:visParams,syncColors:syncColors}=props,config=getConfig(visData,visParams),timeZone=function(){const uiSettings=Object(services.f)();if(uiSettings.isDefault("dateFormat:tz")){const detectedTimeZone=external_kbnSharedDeps_Moment_default.a.tz.guess();return detectedTimeZone||external_kbnSharedDeps_Moment_default()().format("Z")}return uiSettings.get("dateFormat:tz","Browser")}(),xDomain=config.xAxis.scale.type===external_kbnSharedDeps_ElasticCharts_.ScaleType.Ordinal?void 0:(params=>{var _interval;const minInterval=null!==(_interval=null==params?void 0:params.interval)&&void 0!==_interval?_interval:void 0,bounds=params.date?params.bounds:null;return bounds?{min:bounds.min,max:bounds.max,minInterval:minInterval}:{minInterval:minInterval}})(config.aspects.x.params),hasBars=visParams.seriesParams.some(({type:type,data:{id:paramId}})=>type===common.a.Histogram&&void 0!==config.aspects.y.find(({aggId:aggId})=>aggId===paramId)),adjustedXDomain=config.xAxis.scale.type===external_kbnSharedDeps_ElasticCharts_.ScaleType.Ordinal?void 0:((data,{accessor:accessor,params:params},timeZone,domain,hasBars)=>{if(accessor&&domain&&"min"in domain&&"max"in domain&&"intervalESValue"in params&&"intervalESUnit"in params){const{interval:interval,intervalESValue:intervalESValue,intervalESUnit:intervalESUnit}=params,xValues=Object(external_kbnSharedDeps_Lodash_.uniq)(data.map(d=>d[accessor]).sort()),[firstXValue]=xValues,lastXValue=xValues[xValues.length-1],domainMin=Math.min(firstXValue,domain.min),domainMaxValue=hasBars?domain.max-interval:lastXValue+interval;return{min:domainMin,max:Math.max(domainMaxValue,lastXValue),minInterval:Object(public_.getAdjustedInterval)(xValues,intervalESValue,intervalESUnit,timeZone)}}return"interval"in params?{minInterval:params.interval}:{}})(visData.rows,config.aspects.x,timeZone,xDomain,hasBars),legendPosition=Object(external_kbnSharedDeps_React_.useMemo)(()=>{var _config$legend$positi;return null!==(_config$legend$positi=config.legend.position)&&void 0!==_config$legend$positi?_config$legend$positi:external_kbnSharedDeps_ElasticCharts_.Position.Right},[config.legend.position]),isDarkMode=Object(services.d)().useDarkMode(),getSeriesName=getSeriesNameFn(config.aspects,config.aspects.y.length>1),splitAccessors=null===(_config$aspects$serie=config.aspects.series)||void 0===_config$aspects$serie?void 0:_config$aspects$serie.map(({accessor:accessor,formatter:formatter})=>({accessor:accessor,formatter:formatter})),allSeries=Object(external_kbnSharedDeps_React_.useMemo)(()=>((rows,splitAccessors,yAspects)=>{const allSeries=[];return splitAccessors?(rows.forEach(row=>{let seriesName="";null==splitAccessors||splitAccessors.forEach(({accessor:accessor,formatter:formatter})=>{if(!accessor)return;const name=formatter?formatter(row[accessor]):row[accessor];seriesName?seriesName+=" - "+name:seriesName=name}),yAspects.length>1?yAspects.forEach(aspect=>{allSeries.includes(`${seriesName}: ${aspect.title}`)||allSeries.push(`${seriesName}: ${aspect.title}`)}):allSeries.includes(seriesName)||allSeries.push(seriesName)}),allSeries):[]})(visData.rows,splitAccessors,config.aspects.y),[config.aspects.y,splitAccessors,visData.rows]),getSeriesColor=Object(external_kbnSharedDeps_React_.useCallback)(series=>{var _props$uiState5;const seriesName=getSeriesName(series);if(!seriesName)return null;const overwriteColors=null!==(_props$uiState5=props.uiState)&&void 0!==_props$uiState5&&_props$uiState5.get?props.uiState.get("vis.colors",{}):{};if(Object.keys(overwriteColors).includes(seriesName))return overwriteColors[seriesName];return(null==palettesRegistry?void 0:palettesRegistry.get(visParams.palette.name).getColor([{name:seriesName,rankAtDepth:splitAccessors?allSeries.findIndex(name=>name===seriesName):config.aspects.y.findIndex(aspect=>aspect.accessor===series.yAccessor),totalSeriesAtDepth:splitAccessors?allSeries.length:config.aspects.y.length}],{maxDepth:1,totalSeries:splitAccessors?allSeries.length:config.aspects.y.length,behindText:!1,syncColors:syncColors}))||null},[allSeries,config.aspects.y,getSeriesName,props.uiState,splitAccessors,syncColors,visParams.palette.name,palettesRegistry]),xAccessor=(aspect=config.aspects.x,null!==(_getComplexAccessor=getComplexAccessor("__customXAccessor__")(aspect))&&void 0!==_getComplexAccessor?_getComplexAccessor:()=>{var _aspect$params;return null===(_aspect$params=aspect.params)||void 0===_aspect$params?void 0:_aspect$params.defaultValue});var aspect,_getComplexAccessor;const splitSeriesAccessors=Object(external_kbnSharedDeps_React_.useMemo)(()=>config.aspects.series?Object(external_kbnSharedDeps_Lodash_.compact)(config.aspects.series.map(getComplexAccessor("__complexSplitAccessor__"))):[],[config.aspects.series]),splitChartColumnAccessor=config.aspects.splitColumn?getComplexAccessor("__complexSplitAccessor__",!0)(config.aspects.splitColumn):void 0,splitChartRowAccessor=config.aspects.splitRow?getComplexAccessor("__complexSplitAccessor__",!0)(config.aspects.splitRow):void 0,renderSeries=Object(external_kbnSharedDeps_React_.useMemo)(()=>(({aspects:aspects,yAxes:yAxes,xAxis:xAxis,showValueLabel:showValueLabel,enableHistogramMode:enableHistogramMode,fittingFunction:fittingFunction},seriesParams,data,getSeriesName,getSeriesColor,timeZone,xAccessor,splitSeriesAccessors)=>seriesParams.map(({show:show,valueAxis:groupId,data:{id:paramId},lineWidth:strokeWidth,showCircles:showCircles,drawLinesBetweenPoints:drawLinesBetweenPoints,mode:mode,interpolate:interpolate,type:type})=>{var _yAxes$find,_aspects$z$accessor,_aspects$z,_aspects$z2;const yAspects=aspects.y.filter(({aggId:aggId,aggType:aggType,accessor:accessor})=>aggType===data_public_.METRIC_TYPES.PERCENTILES||aggType===data_public_.METRIC_TYPES.PERCENTILE_RANKS||aggType===data_public_.METRIC_TYPES.STD_DEV?(null==aggId?void 0:aggId.includes(paramId))&&null!==accessor:aggId===paramId&&null!==accessor);if(!show||!yAspects.length)return null;const yAccessors=yAspects.map(aspect=>aspect.accessor),id=`${type}-${yAccessors[0]}`,yAxisScale=null===(_yAxes$find=yAxes.find(({groupId:axisGroupId})=>axisGroupId===groupId))||void 0===_yAxes$find?void 0:_yAxes$find.scale,isStacked="stacked"===mode||"percentage"===(null==yAxisScale?void 0:yAxisScale.mode),stackMode="normal"===(null==yAxisScale?void 0:yAxisScale.mode)||null==yAxisScale?void 0:yAxisScale.mode,pseudoGroupId=isStacked?`__pseudo_stacked_group-${groupId}__`:groupId,useDefaultGroupDomain=isStacked?groupId:void 0;switch(type){case common.a.Histogram:return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.BarSeries,{key:id,id:id,name:getSeriesName,color:getSeriesColor,tickFormat:yAspects[0].formatter,groupId:pseudoGroupId,useDefaultGroupDomain:useDefaultGroupDomain,xScaleType:xAxis.scale.type,yScaleType:null==yAxisScale?void 0:yAxisScale.type,xAccessor:xAccessor,yAccessors:yAccessors,splitSeriesAccessors:splitSeriesAccessors,data:data,timeZone:timeZone,stackAccessors:isStacked?["__any_value__"]:void 0,enableHistogramMode:enableHistogramMode,stackMode:stackMode,minBarHeight:2,displayValueSettings:{showValueLabel:showValueLabel,hideClippedValue:!0}});case common.a.Area:case common.a.Line:const markSizeAccessor=showCircles&&null!==(_aspects$z$accessor=null===(_aspects$z=aspects.z)||void 0===_aspects$z?void 0:_aspects$z.accessor)&&void 0!==_aspects$z$accessor?_aspects$z$accessor:void 0;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.AreaSeries,{key:id,id:id,fit:fittingFunction,color:getSeriesColor,tickFormat:yAspects[0].formatter,name:getSeriesName,curve:getCurveType(interpolate),groupId:pseudoGroupId,useDefaultGroupDomain:useDefaultGroupDomain,xScaleType:xAxis.scale.type,yScaleType:null==yAxisScale?void 0:yAxisScale.type,xAccessor:xAccessor,yAccessors:yAccessors,markSizeAccessor:markSizeAccessor,markFormat:null===(_aspects$z2=aspects.z)||void 0===_aspects$z2?void 0:_aspects$z2.formatter,splitSeriesAccessors:splitSeriesAccessors,data:data,stackAccessors:isStacked?["__any_value__"]:void 0,displayValueSettings:{showValueLabel:showValueLabel,hideClippedValue:!0},timeZone:timeZone,stackMode:stackMode,areaSeriesStyle:{area:{...type===common.a.Line&&{opacity:0}},line:{strokeWidth:strokeWidth,visible:drawLinesBetweenPoints},point:{visible:showCircles,fill:markSizeAccessor?external_kbnSharedDeps_ElasticCharts_.ColorVariant.Series:void 0}}});default:return null}}))(config,visParams.seriesParams,visData.rows,getSeriesName,getSeriesColor,timeZone,xAccessor,splitSeriesAccessors),[config,getSeriesColor,getSeriesName,splitSeriesAccessors,timeZone,visData.rows,visParams.seriesParams,xAccessor]),legendColorPicker=Object(external_kbnSharedDeps_React_.useMemo)(()=>((legendPosition,setColor,getSeriesName,paletteName,uiState)=>({anchor:anchor,color:color,onClose:onClose,onChange:onChange,seriesIdentifiers:[seriesIdentifier]})=>{const seriesName=getSeriesName(seriesIdentifier),overwriteColors=null==uiState?void 0:uiState.get("vis.colors",{}),colorIsOverwritten=Object.keys(overwriteColors).includes(seriesName);let keyDownEventOn=!1;const handleOutsideClick=Object(external_kbnSharedDeps_React_.useCallback)(()=>{null==onClose||onClose()},[onClose]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiOutsideClickDetector,{onOutsideClick:handleOutsideClick},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiWrappingPopover,{isOpen:!0,ownFocus:!0,display:"block",button:anchor,anchorPosition:getAnchorPosition(legendPosition),closePopover:onClose,panelPaddingSize:"s"},external_kbnSharedDeps_React_default.a.createElement(public_.ColorPicker,{color:"kibana_palette"===paletteName?color:color.toLowerCase(),onChange:newColor=>{seriesName&&(newColor&&onChange(newColor),setColor(newColor,seriesName),newColor&&keyDownEventOn||onClose())},label:seriesName,useLegacyColors:"kibana_palette"===paletteName,colorIsOverwritten:colorIsOverwritten,onKeyDown:e=>{13===e.keyCode&&(null==onClose||onClose()),keyDownEventOn=!0}})))})(legendPosition,setColor,getSeriesName,visParams.palette.name,props.uiState),[getSeriesName,legendPosition,props.uiState,setColor,visParams.palette.name]);return external_kbnSharedDeps_React_default.a.createElement("div",{className:"xyChart__container","data-test-subj":"visTypeXyChart"},external_kbnSharedDeps_React_default.a.createElement(public_.LegendToggle,{onClick:toggleLegend,showLegend:showLegend,legendPosition:legendPosition}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_.Chart,{size:"100%"},external_kbnSharedDeps_React_default.a.createElement(ChartSplitter,{splitColumnAccessor:splitChartColumnAccessor,splitRowAccessor:splitChartRowAccessor}),external_kbnSharedDeps_React_default.a.createElement(XYSettings,_extends({},config,{showLegend:showLegend,legendPosition:legendPosition,xDomain:xDomain,adjustedXDomain:adjustedXDomain,legendColorPicker:legendColorPicker,onElementClick:handleFilterClick(visData,xAccessor,splitSeriesAccessors,null!=splitChartColumnAccessor?splitChartColumnAccessor:splitChartRowAccessor),onBrushEnd:handleBrush(visData,xAccessor,"interval"in config.aspects.x.params),onRenderChange:onRenderChange,legendAction:config.aspects.series&&(null!==(_config$aspects$serie2=null===(_config$aspects$serie3=config.aspects.series)||void 0===_config$aspects$serie3?void 0:_config$aspects$serie3.length)&&void 0!==_config$aspects$serie2?_config$aspects$serie2:0)>0?getLegendActions(async event=>{if(!event)return!1;const filters=await Object(services.a)().createFiltersFromValueClickAction(event.data);return Boolean(filters.length)},getFilterEventData(visData,xAccessor,splitSeriesAccessors),handleFilterAction,getSeriesName):void 0})),external_kbnSharedDeps_React_default.a.createElement(XYThresholdLine,config.thresholdLine),external_kbnSharedDeps_React_default.a.createElement(XYCurrentTime,{enabled:config.showCurrentTime,isDarkMode:isDarkMode,domain:xDomain}),external_kbnSharedDeps_React_default.a.createElement(XYEndzones,{isFullBin:!config.enableHistogramMode,enabled:config.isTimeChart,isDarkMode:isDarkMode,domain:xDomain,hideTooltips:!config.detailedTooltip,adjustedDomain:adjustedXDomain}),external_kbnSharedDeps_React_default.a.createElement(XYAxis,config.xAxis),config.yAxes.map(axisProps=>external_kbnSharedDeps_React_default.a.createElement(XYAxis,_extends({key:axisProps.id},axisProps))),renderSeries))};__webpack_exports__.default=Object(external_kbnSharedDeps_React_.memo)(VisComponent)}])]);