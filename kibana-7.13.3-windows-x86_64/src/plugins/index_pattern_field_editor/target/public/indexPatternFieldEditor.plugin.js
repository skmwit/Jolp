!function(modules){function webpackJsonpCallback(data){for(var moduleId,chunkId,chunkIds=data[0],moreModules=data[1],i=0,resolves=[];i<chunkIds.length;i++)chunkId=chunkIds[i],Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]&&resolves.push(installedChunks[chunkId][0]),installedChunks[chunkId]=0;for(moduleId in moreModules)Object.prototype.hasOwnProperty.call(moreModules,moduleId)&&(modules[moduleId]=moreModules[moduleId]);for(parentJsonpFunction&&parentJsonpFunction(data);resolves.length;)resolves.shift()()}var installedModules={},installedChunks={0:0};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.e=function(chunkId){var promises=[],installedChunkData=installedChunks[chunkId];if(0!==installedChunkData)if(installedChunkData)promises.push(installedChunkData[2]);else{var promise=new Promise((function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var onScriptComplete,script=document.createElement("script");script.charset="utf-8",script.timeout=120,__webpack_require__.nc&&script.setAttribute("nonce",__webpack_require__.nc),script.src=function(chunkId){return __webpack_require__.p+"indexPatternFieldEditor.chunk."+chunkId+".js"}(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null,clearTimeout(timeout);var chunk=installedChunks[chunkId];if(0!==chunk){if(chunk){var errorType=event&&("load"===event.type?"missing":event.type),realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")",error.name="ChunkLoadError",error.type=errorType,error.request=realSrc,chunk[1](error)}installedChunks[chunkId]=void 0}};var timeout=setTimeout((function(){onScriptComplete({type:"timeout",target:script})}),12e4);script.onerror=script.onload=onScriptComplete,document.head.appendChild(script)}return Promise.all(promises)},__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__.oe=function(err){throw console.error(err),err};var jsonpArray=window.indexPatternFieldEditor_bundle_jsonpfunction=window.indexPatternFieldEditor_bundle_jsonpfunction||[],oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback,jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;__webpack_require__(__webpack_require__.s=18)}([function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/esUiShared/static/forms/hook_form_lib");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/data/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(5),__webpack_require__(15),__webpack_require__(8);var _kibana_react_public__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6);__webpack_require__.d(__webpack_exports__,"g",(function(){return _kibana_react_public__WEBPACK_IMPORTED_MODULE_3__.createKibanaReactContext})),__webpack_require__.d(__webpack_exports__,"i",(function(){return _kibana_react_public__WEBPACK_IMPORTED_MODULE_3__.toMountPoint})),__webpack_require__.d(__webpack_exports__,"a",(function(){return _kibana_react_public__WEBPACK_IMPORTED_MODULE_3__.CodeEditor}));var _es_ui_shared_static_forms_hook_form_lib__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4);__webpack_require__.d(__webpack_exports__,"j",(function(){return _es_ui_shared_static_forms_hook_form_lib__WEBPACK_IMPORTED_MODULE_4__.useForm})),__webpack_require__.d(__webpack_exports__,"l",(function(){return _es_ui_shared_static_forms_hook_form_lib__WEBPACK_IMPORTED_MODULE_4__.useFormData})),__webpack_require__.d(__webpack_exports__,"k",(function(){return _es_ui_shared_static_forms_hook_form_lib__WEBPACK_IMPORTED_MODULE_4__.useFormContext})),__webpack_require__.d(__webpack_exports__,"b",(function(){return _es_ui_shared_static_forms_hook_form_lib__WEBPACK_IMPORTED_MODULE_4__.Form})),__webpack_require__.d(__webpack_exports__,"f",(function(){return _es_ui_shared_static_forms_hook_form_lib__WEBPACK_IMPORTED_MODULE_4__.UseField}));var _es_ui_shared_static_forms_helpers__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(16);__webpack_require__.d(__webpack_exports__,"h",(function(){return _es_ui_shared_static_forms_helpers__WEBPACK_IMPORTED_MODULE_5__.fieldValidators}));var _es_ui_shared_static_forms_components__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(10);__webpack_require__.d(__webpack_exports__,"d",(function(){return _es_ui_shared_static_forms_components__WEBPACK_IMPORTED_MODULE_6__.TextField})),__webpack_require__.d(__webpack_exports__,"e",(function(){return _es_ui_shared_static_forms_components__WEBPACK_IMPORTED_MODULE_6__.ToggleField})),__webpack_require__.d(__webpack_exports__,"c",(function(){return _es_ui_shared_static_forms_components__WEBPACK_IMPORTED_MODULE_6__.NumericField}))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/data/common");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.KbnAnalytics},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/esUiShared/static/forms/components");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){"use strict";var memo,isOldIE=function(){return void 0===memo&&(memo=Boolean(window&&document&&document.all&&!window.atob)),memo},getTarget=function(){var memo={};return function(target){if(void 0===memo[target]){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}}(),stylesInDom=[];function getIndexByIdentifier(identifier){for(var result=-1,i=0;i<stylesInDom.length;i++)if(stylesInDom[i].identifier===identifier){result=i;break}return result}function modulesToDom(list,options){for(var idCountMap={},identifiers=[],i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],count=idCountMap[id]||0,identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier),obj={css:item[1],media:item[2],sourceMap:item[3]};-1!==index?(stylesInDom[index].references++,stylesInDom[index].updater(obj)):stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1}),identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style"),attributes=options.attributes||{};if(void 0===attributes.nonce){var nonce=__webpack_require__.nc;nonce&&(attributes.nonce=nonce)}if(Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])})),"function"==typeof options.insert)options.insert(style);else{var target=getTarget(options.insert||"head");if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");target.appendChild(style)}return style}var textStore,replaceText=(textStore=[],function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")});function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}function applyToTag(style,options,obj){var css=obj.css,media=obj.media,sourceMap=obj.sourceMap;if(media?style.setAttribute("media",media):style.removeAttribute("media"),sourceMap&&btoa&&(css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")),style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}var singleton=null,singletonCounter=0;function addStyle(obj,options){var style,update,remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else style=insertStyleElement(options),update=applyToTag.bind(null,style,options),remove=function(){!function(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style)}(style)};return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}module.exports=function(list,options){(options=options||{}).singleton||"boolean"==typeof options.singleton||(options.singleton=isOldIE());var lastIdentifiers=modulesToDom(list=list||[],options);return function(newList){if(newList=newList||[],"[object Array]"===Object.prototype.toString.call(newList)){for(var i=0;i<lastIdentifiers.length;i++){var index=getIndexByIdentifier(lastIdentifiers[i]);stylesInDom[index].references--}for(var newLastIdentifiers=modulesToDom(newList,options),_i=0;_i<lastIdentifiers.length;_i++){var _index=getIndexByIdentifier(lastIdentifiers[_i]);0===stylesInDom[_index].references&&(stylesInDom[_index].updater(),stylesInDom.splice(_index,1))}lastIdentifiers=newLastIdentifiers}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];return list.toString=function(){return this.map((function(item){var content=function(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=(sourceMap=cssMapping,base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64),"/*# ".concat(data," */")),sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}var sourceMap,base64,data;return[content].join("\n")}(item,useSourceMap);return item[2]?"@media ".concat(item[2]," {").concat(content,"}"):content})).join("")},list.i=function(modules,mediaQuery,dedupe){"string"==typeof modules&&(modules=[[null,modules,""]]);var alreadyImportedModules={};if(dedupe)for(var i=0;i<this.length;i++){var id=this[i][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);dedupe&&alreadyImportedModules[item[0]]||(mediaQuery&&(item[2]?item[2]="".concat(mediaQuery," and ").concat(item[2]):item[2]=mediaQuery),list.push(item))}},list}},function(module,exports){module.exports=__kbnSharedDeps__.Moment},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"g",(function(){return field_format_editor_FormatSelectEditor})),__webpack_require__.d(__webpack_exports__,"e",(function(){return default_DefaultFormatEditor})),__webpack_require__.d(__webpack_exports__,"a",(function(){return bytes_BytesFormatEditor})),__webpack_require__.d(__webpack_exports__,"b",(function(){return color_ColorFormatEditor})),__webpack_require__.d(__webpack_exports__,"c",(function(){return date_DateFormatEditor})),__webpack_require__.d(__webpack_exports__,"d",(function(){return date_nanos_DateNanosFormatEditor})),__webpack_require__.d(__webpack_exports__,"f",(function(){return duration_DurationFormatEditor})),__webpack_require__.d(__webpack_exports__,"i",(function(){return number_NumberFormatEditor})),__webpack_require__.d(__webpack_exports__,"j",(function(){return percent_PercentFormatEditor})),__webpack_require__.d(__webpack_exports__,"k",(function(){return static_lookup_StaticLookupFormatEditor})),__webpack_require__.d(__webpack_exports__,"l",(function(){return string_StringFormatEditor})),__webpack_require__.d(__webpack_exports__,"m",(function(){return truncate_TruncateFormatEditor})),__webpack_require__.d(__webpack_exports__,"n",(function(){return url_UrlFormatEditor})),__webpack_require__.d(__webpack_exports__,"h",(function(){return histogram_HistogramFormatEditor}));var external_kbnSharedDeps_React_=__webpack_require__(0),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_ElasticEui_=__webpack_require__(1),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(2),external_kbnSharedDeps_KbnI18n_=__webpack_require__(3),public_=__webpack_require__(5);class format_editor_FormatEditor extends external_kbnSharedDeps_React_.PureComponent{constructor(props){super(props),this.state={EditorComponent:props.fieldFormatEditors.getById(props.fieldFormatId)}}static getDerivedStateFromProps(nextProps){return{EditorComponent:nextProps.fieldFormatEditors.getById(nextProps.fieldFormatId)||null}}render(){const{EditorComponent:EditorComponent}=this.state,{fieldType:fieldType,fieldFormat:fieldFormat,fieldFormatParams:fieldFormatParams,onChange:onChange,onError:onError}=this.props;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,EditorComponent?external_kbnSharedDeps_React_default.a.createElement(EditorComponent,{fieldType:fieldType,format:fieldFormat,formatParams:fieldFormatParams,onChange:onChange,onError:onError}):null)}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const getFieldTypeFormatsList=(fieldType,defaultFieldFormat,fieldFormats)=>{const formatsByType=fieldFormats.getByFieldType(fieldType).map(({id:id,title:title})=>({id:id,title:title}));return[{id:"",defaultFieldFormat:defaultFieldFormat,title:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.defaultFormatDropDown",{defaultMessage:"- Default -"})},...formatsByType]};class field_format_editor_FormatSelectEditor extends external_kbnSharedDeps_React_.PureComponent{constructor(props){super(props),_defineProperty(this,"onFormatChange",(formatId,params)=>this.props.onChange(formatId?{id:formatId,params:params||{}}:void 0)),_defineProperty(this,"onFormatParamsChange",newParams=>{const{fieldFormatId:fieldFormatId}=this.state;this.onFormatChange(fieldFormatId,newParams)});const{fieldFormats:fieldFormats,esTypes:esTypes}=props,kbnType=Object(public_.castEsToKbnFieldTypeName)(esTypes[0]||"keyword");this.state={fieldTypeFormats:getFieldTypeFormatsList(kbnType,fieldFormats.getDefaultType(kbnType,esTypes),fieldFormats),kbnType:kbnType}}render(){const{fieldFormatEditors:fieldFormatEditors,onError:onError,value:value,fieldFormats:fieldFormats,esTypes:esTypes}=this.props,fieldFormatId=null==value?void 0:value.id,fieldFormatParams=null==value?void 0:value.params,{kbnType:kbnType}=this.state,{fieldTypeFormats:fieldTypeFormats}=this.state,defaultFormat=fieldTypeFormats[0].defaultFieldFormat.title,format=null!=value&&value.id?fieldFormats.getInstance(null==value?void 0:value.id,null==value?void 0:value.params):fieldFormats.getDefaultInstance(kbnType,esTypes),label=defaultFormat?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.defaultFormatHeader",defaultMessage:"Format (Default: {defaultFormat})",values:{defaultFormat:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,defaultFormat)}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.formatHeader",defaultMessage:"Format"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:label},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{value:fieldFormatId||"",options:fieldTypeFormats.map(fmt=>({value:fmt.id||"",text:fmt.title})),"data-test-subj":"editorSelectedFormatId",onChange:e=>{this.onFormatChange(e.target.value)}})),fieldFormatId?external_kbnSharedDeps_React_default.a.createElement(format_editor_FormatEditor,{fieldType:kbnType,fieldFormat:format,fieldFormatId:fieldFormatId,fieldFormatParams:fieldFormatParams||{},fieldFormatEditors:fieldFormatEditors,onChange:params=>{this.onFormatChange(fieldFormatId,params)},onError:onError}):null)}}function default_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const defaultState={sampleInputs:[],sampleConverterType:"text",error:void 0,samples:[],sampleInputsByType:{}};class default_DefaultFormatEditor extends external_kbnSharedDeps_React_.PureComponent{constructor(...args){super(...args),default_defineProperty(this,"state",defaultState),default_defineProperty(this,"onChange",(newParams={})=>{const{onChange:onChange,formatParams:formatParams}=this.props;onChange({...formatParams,...newParams})})}static getDerivedStateFromProps(nextProps,state){const{format:format,formatParams:formatParams,onError:onError}=nextProps,{sampleInputsByType:sampleInputsByType,sampleInputs:sampleInputs,sampleConverterType:sampleConverterType}=state,output=((converter,inputs)=>{let error,samples=[];try{samples=inputs.map(input=>({input:input,output:converter(input)}))}catch(e){error=external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.defaultErrorMessage",{defaultMessage:"An error occurred while trying to use this format configuration: {message}",values:{message:e.message}})}return{error:error,samples:samples}})(format.getConverterFor(sampleConverterType),"object"==typeof sampleInputsByType&&formatParams.type?sampleInputsByType[formatParams.type]||[]:sampleInputs);return onError(output.error),output}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null)}}default_defineProperty(default_DefaultFormatEditor,"formatId","default");var obj,key,value;__webpack_require__(20);class samples_FormatEditorSamples extends external_kbnSharedDeps_React_.PureComponent{render(){const{samples:samples,sampleType:sampleType}=this.props,columns=[{field:"input",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.samples.inputHeader",{defaultMessage:"Input"}),render:input=>"object"==typeof input?JSON.stringify(input):input},{field:"output",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.samples.outputHeader",{defaultMessage:"Output"}),render:output=>"html"===sampleType?external_kbnSharedDeps_React_default.a.createElement("div",{dangerouslySetInnerHTML:{__html:output}}):external_kbnSharedDeps_React_default.a.createElement("div",null,output)}];return samples.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.samplesHeader",defaultMessage:"Samples"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBasicTable,{className:"kbnFieldFormatEditor__samples",compressed:!0,items:samples,columns:columns})):null}}value={sampleType:"text"},(key="defaultProps")in(obj=samples_FormatEditorSamples)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;var kibanaReact_public_=__webpack_require__(6);function number_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class number_NumberFormatEditor extends default_DefaultFormatEditor{constructor(...args){super(...args),number_defineProperty(this,"context",void 0),number_defineProperty(this,"state",{...defaultState,sampleInputs:[1e4,12.345678,-1,-999,.52]})}render(){var _this$context$service;const{format:format,formatParams:formatParams}=this.props,{error:error,samples:samples}=this.state,defaultPattern=format.getParamDefaults().pattern;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.number.numeralLabel",defaultMessage:"Numeral.js format pattern (Default: {defaultPattern})",values:{defaultPattern:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,defaultPattern)}}),helpText:external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{target:"_blank",href:null===(_this$context$service=this.context.services.docLinks)||void 0===_this$context$service?void 0:_this$context$service.links.indexPatterns.fieldFormattersNumber},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.number.documentationLabel",defaultMessage:"Documentation"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"link"}))),isInvalid:!!error,error:error},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:formatParams.pattern,placeholder:defaultPattern,onChange:e=>{this.onChange({pattern:e.target.value})},isInvalid:!!error})),external_kbnSharedDeps_React_default.a.createElement(samples_FormatEditorSamples,{samples:samples}))}}function bytes_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}number_defineProperty(number_NumberFormatEditor,"contextType",kibanaReact_public_.context),number_defineProperty(number_NumberFormatEditor,"formatId","number");class bytes_BytesFormatEditor extends number_NumberFormatEditor{constructor(...args){super(...args),bytes_defineProperty(this,"state",{...defaultState,sampleInputs:[256,1024,515e4,199e7]})}}function color_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}bytes_defineProperty(bytes_BytesFormatEditor,"formatId","bytes");class color_ColorFormatEditor extends default_DefaultFormatEditor{constructor(props){super(props),color_defineProperty(this,"onColorChange",(newColorParams,index)=>{const colors=[...this.props.formatParams.colors];colors[index]={...colors[index],...newColorParams},this.onChange({colors:colors})}),color_defineProperty(this,"addColor",()=>{const colors=[...this.props.formatParams.colors||[]];this.onChange({colors:[...colors,{...public_.fieldFormats.DEFAULT_CONVERTER_COLOR}]})}),color_defineProperty(this,"removeColor",index=>{const colors=[...this.props.formatParams.colors];colors.splice(index,1),this.onChange({colors:colors})}),this.onChange({fieldType:props.fieldType})}render(){const{formatParams:formatParams,fieldType:fieldType}=this.props,items=formatParams.colors&&formatParams.colors.length&&formatParams.colors.map((color,index)=>({...color,index:index}))||[],columns=["string"===fieldType?{field:"regex",name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.color.patternLabel",defaultMessage:"Pattern (regular expression)"}),render:(value,item)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:value,onChange:e=>{this.onColorChange({regex:e.target.value},item.index)}})}:{field:"range",name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.color.rangeLabel",defaultMessage:"Range (min:max)"}),render:(value,item)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:value,onChange:e=>{this.onColorChange({range:e.target.value},item.index)}})},{field:"text",name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.color.textColorLabel",defaultMessage:"Text color"}),render:(color,item)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiColorPicker,{color:color,onChange:newColor=>{this.onColorChange({text:newColor},item.index)}})},{field:"background",name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.color.backgroundLabel",defaultMessage:"Background color"}),render:(color,item)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiColorPicker,{color:color,onChange:newColor=>{this.onColorChange({background:newColor},item.index)}})},{name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.color.exampleLabel",defaultMessage:"Example"}),render:item=>external_kbnSharedDeps_React_default.a.createElement("div",{style:{background:item.background,color:item.text}},"123456")},{field:"actions",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.color.actions",{defaultMessage:"Actions"}),actions:[{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.color.deleteAria",{defaultMessage:"Delete"}),description:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.color.deleteTitle",{defaultMessage:"Delete color format"}),onClick:item=>{this.removeColor(item.index)},type:"icon",icon:"trash",color:"danger",available:()=>items.length>1}]}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBasicTable,{items:items,columns:columns}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{iconType:"plusInCircle",size:"s",onClick:this.addColor},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.color.addColorButton",defaultMessage:"Add color"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}))}}color_defineProperty(color_ColorFormatEditor,"formatId","color");var external_kbnSharedDeps_Moment_=__webpack_require__(13),external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);function date_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class date_DateFormatEditor extends default_DefaultFormatEditor{constructor(...args){super(...args),date_defineProperty(this,"state",{...defaultState,sampleInputs:[Date.now(),external_kbnSharedDeps_Moment_default()().startOf("year").valueOf(),external_kbnSharedDeps_Moment_default()().endOf("year").valueOf()]})}render(){const{format:format,formatParams:formatParams}=this.props,{error:error,samples:samples}=this.state,defaultPattern=format.getParamDefaults().pattern;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.date.momentLabel",defaultMessage:"Moment.js format pattern (Default: {defaultPattern})",values:{defaultPattern:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,defaultPattern)}}),isInvalid:!!error,error:error,helpText:external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{target:"_blank",href:"https://momentjs.com/"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.date.documentationLabel",defaultMessage:"Documentation"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"link"})))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{"data-test-subj":"dateEditorPattern",value:formatParams.pattern,placeholder:defaultPattern,onChange:e=>{this.onChange({pattern:e.target.value})},isInvalid:!!error})),external_kbnSharedDeps_React_default.a.createElement(samples_FormatEditorSamples,{samples:samples}))}}function date_nanos_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}date_defineProperty(date_DateFormatEditor,"formatId","date");class date_nanos_DateNanosFormatEditor extends default_DefaultFormatEditor{constructor(...args){super(...args),date_nanos_defineProperty(this,"state",{...defaultState,sampleInputs:["2015-01-01T12:10:30.123456789Z","2019-05-08T06:55:21.567891234Z","2019-08-06T17:22:30.987654321Z"]})}render(){const{format:format,formatParams:formatParams}=this.props,{error:error,samples:samples}=this.state,defaultPattern=format.getParamDefaults().pattern;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.date.momentLabel",defaultMessage:"Moment.js format pattern (Default: {defaultPattern})",values:{defaultPattern:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCode,null,defaultPattern)}}),isInvalid:!!error,error:error,helpText:external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{target:"_blank",href:"https://momentjs.com/"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.date.documentationLabel",defaultMessage:"Documentation"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"link"})))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{"data-test-subj":"dateEditorPattern",value:formatParams.pattern,placeholder:defaultPattern,onChange:e=>{this.onChange({pattern:e.target.value})},isInvalid:!!error})),external_kbnSharedDeps_React_default.a.createElement(samples_FormatEditorSamples,{samples:samples}))}}function duration_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}date_nanos_defineProperty(date_nanos_DateNanosFormatEditor,"formatId","date_nanos");class duration_DurationFormatEditor extends default_DefaultFormatEditor{constructor(...args){super(...args),duration_defineProperty(this,"state",{...defaultState,sampleInputs:[-123,1,12,123,658,1988,3857,123292,923528271],hasDecimalError:!1})}static getDerivedStateFromProps(nextProps,state){const output=super.getDerivedStateFromProps(nextProps,state);let error=null;return!nextProps.format.isHuman()&&nextProps.formatParams.outputPrecision>20?(error=external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.durationErrorMessage",{defaultMessage:"Decimal places must be between 0 and 20"}),nextProps.onError(error),{...output,error:error,hasDecimalError:!0}):{...output,hasDecimalError:!1}}render(){const{format:format,formatParams:formatParams}=this.props,{error:error,samples:samples,hasDecimalError:hasDecimalError}=this.state;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.duration.inputFormatLabel",defaultMessage:"Input format"}),isInvalid:!!error,error:hasDecimalError?null:error},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{value:formatParams.inputFormat,options:format.type.inputFormats.map(fmt=>({value:fmt.kind,text:fmt.text})),onChange:e=>{this.onChange({inputFormat:e.target.value})},isInvalid:!!error})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.duration.outputFormatLabel",defaultMessage:"Output format"}),isInvalid:!!error},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{value:formatParams.outputFormat,options:format.type.outputFormats.map(fmt=>({value:fmt.method,text:fmt.text})),onChange:e=>{this.onChange({outputFormat:e.target.value})},isInvalid:!!error})),format.isHuman()?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.duration.decimalPlacesLabel",defaultMessage:"Decimal places"}),isInvalid:!!error,error:hasDecimalError?error:null},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldNumber,{value:formatParams.outputPrecision,min:0,max:20,onChange:e=>{this.onChange({outputPrecision:e.target.value?Number(e.target.value):null})},isInvalid:!!error})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.duration.showSuffixLabel",defaultMessage:"Show suffix"}),checked:Boolean(formatParams.showSuffix),onChange:e=>{this.onChange({showSuffix:!formatParams.showSuffix})}}))),external_kbnSharedDeps_React_default.a.createElement(samples_FormatEditorSamples,{samples:samples}))}}function percent_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}duration_defineProperty(duration_DurationFormatEditor,"formatId","duration");class percent_PercentFormatEditor extends number_NumberFormatEditor{constructor(...args){super(...args),percent_defineProperty(this,"state",{...defaultState,sampleInputs:[.1,.99999,1,100,1e3]})}}function static_lookup_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}percent_defineProperty(percent_PercentFormatEditor,"formatId","percent");class static_lookup_StaticLookupFormatEditor extends default_DefaultFormatEditor{constructor(...args){super(...args),static_lookup_defineProperty(this,"onLookupChange",(newLookupParams,index)=>{const lookupEntries=[...this.props.formatParams.lookupEntries];lookupEntries[index]={...lookupEntries[index],...newLookupParams},this.onChange({lookupEntries:lookupEntries})}),static_lookup_defineProperty(this,"addLookup",()=>{const lookupEntries=[...this.props.formatParams.lookupEntries||[]];this.onChange({lookupEntries:[...lookupEntries,{}]})}),static_lookup_defineProperty(this,"removeLookup",index=>{const lookupEntries=[...this.props.formatParams.lookupEntries];lookupEntries.splice(index,1),this.onChange({lookupEntries:lookupEntries})})}render(){const{formatParams:formatParams}=this.props,items=formatParams.lookupEntries&&formatParams.lookupEntries.length&&formatParams.lookupEntries.map((lookup,index)=>({...lookup,index:index}))||[],columns=[{field:"key",name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.staticLookup.keyLabel",defaultMessage:"Key"}),render:(value,item)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:value||"",onChange:e=>{this.onLookupChange({key:e.target.value},item.index)}})},{field:"value",name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.staticLookup.valueLabel",defaultMessage:"Value"}),render:(value,item)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:value||"",onChange:e=>{this.onLookupChange({value:e.target.value},item.index)}})},{field:"actions",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.staticLookup.actions",{defaultMessage:"actions"}),actions:[{name:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.staticLookup.deleteAria",{defaultMessage:"Delete"}),description:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.staticLookup.deleteTitle",{defaultMessage:"Delete entry"}),onClick:item=>{this.removeLookup(item.index)},type:"icon",icon:"trash",color:"danger",available:()=>items.length>1}],width:"30px"}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBasicTable,{items:items,columns:columns,style:{maxWidth:"400px"}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{iconType:"plusInCircle",size:"s",onClick:this.addLookup},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.staticLookup.addEntryButton",defaultMessage:"Add entry"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.staticLookup.unknownKeyLabel",defaultMessage:"Value for unknown key"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:formatParams.unknownKeyValue||"",placeholder:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.staticLookup.leaveBlankPlaceholder",{defaultMessage:"Leave blank to keep value as-is"}),onChange:e=>{this.onChange({unknownKeyValue:e.target.value})}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"}))}}function string_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}static_lookup_defineProperty(static_lookup_StaticLookupFormatEditor,"formatId","static_lookup");class string_StringFormatEditor extends default_DefaultFormatEditor{constructor(...args){super(...args),string_defineProperty(this,"state",{...defaultState,sampleInputs:["A Quick Brown Fox.","STAY CALM!","com.organizations.project.ClassName","hostname.net","SGVsbG8gd29ybGQ=","%EC%95%88%EB%85%95%20%ED%82%A4%EB%B0%94%EB%82%98"]})}render(){const{format:format,formatParams:formatParams}=this.props,{error:error,samples:samples}=this.state;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.string.transformLabel",defaultMessage:"Transform"}),isInvalid:!!error,error:error},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{"data-test-subj":"stringEditorTransform",defaultValue:formatParams.transform,options:(format.type.transformOptions||[]).map(option=>({value:option.kind,text:option.text})),onChange:e=>{this.onChange({transform:e.target.value})},isInvalid:!!error})),external_kbnSharedDeps_React_default.a.createElement(samples_FormatEditorSamples,{samples:samples}))}}string_defineProperty(string_StringFormatEditor,"formatId","string");function truncate_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class truncate_TruncateFormatEditor extends default_DefaultFormatEditor{constructor(...args){super(...args),truncate_defineProperty(this,"state",{...defaultState,sampleInputs:["Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris vitae sem consequat, sollicitudin enim a, feugiat mi. Curabitur congue laoreet elit, eu dictum nisi commodo ut. Nullam congue sem a blandit commodo. Suspendisse eleifend sodales leo ac hendrerit. Nam fringilla tempor fermentum. Ut tristique pharetra sapien sit amet pharetra. Ut turpis massa, viverra id erat quis, fringilla vehicula risus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Phasellus tincidunt gravida gravida. Praesent et ligula viverra, semper lacus in, tristique elit. Cras ac eleifend diam. Nulla facilisi. Morbi id sagittis magna. Sed fringilla, magna in suscipit aliquet."]})}render(){const{formatParams:formatParams,onError:onError}=this.props,{error:error,samples:samples}=this.state;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.truncate.lengthLabel",defaultMessage:"Field length"}),isInvalid:!!error,error:error},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldNumber,{defaultValue:formatParams.fieldLength,min:1,onChange:e=>{e.target.checkValidity()?this.onChange({fieldLength:e.target.value?Number(e.target.value):null}):onError(e.target.validationMessage)},isInvalid:!!error})),external_kbnSharedDeps_React_default.a.createElement(samples_FormatEditorSamples,{samples:samples}))}}function url_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}truncate_defineProperty(truncate_TruncateFormatEditor,"formatId","truncate");class url_UrlFormatEditor extends default_DefaultFormatEditor{get sampleIconPath(){var _this$context;const sampleIconPath="/plugins/indexPatternManagement/assets/icons/{{value}}.png";return null!==(_this$context=this.context)&&void 0!==_this$context&&_this$context.services.http?this.context.services.http.basePath.prepend(sampleIconPath):sampleIconPath}constructor(props){super(props),url_defineProperty(this,"sanitizeNumericValue",val=>{const sanitizedValue=parseInt(val,10);return isNaN(sanitizedValue)?"":sanitizedValue}),url_defineProperty(this,"onTypeChange",newType=>{const{urlTemplate:urlTemplate,width:width,height:height}=this.props.formatParams,params={type:newType};"img"===newType?(params.width=width,params.height=height,urlTemplate||(params.urlTemplate=this.sampleIconPath)):"img"!==newType&&urlTemplate===this.sampleIconPath&&(params.urlTemplate=void 0),this.onChange(params)}),url_defineProperty(this,"renderWidthHeightParameters",()=>{const width=this.sanitizeNumericValue(this.props.formatParams.width),height=this.sanitizeNumericValue(this.props.formatParams.height);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.url.widthLabel",defaultMessage:"Width"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldNumber,{"data-test-subj":"urlEditorWidth",value:width,onChange:e=>{this.onChange({width:e.target.value})}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.url.heightLabel",defaultMessage:"Height"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldNumber,{"data-test-subj":"urlEditorHeight",value:height,onChange:e=>{this.onChange({height:e.target.value})}})))}),this.state={...this.state,sampleInputsByType:{a:["john","/some/pathname/asset.png",1234],img:["go","stop",["de","ne","us","ni"],"cv"],audio:["hello.mp3"]},sampleConverterType:"html",showUrlTemplateHelp:!1,showLabelTemplateHelp:!1}}render(){const{format:format,formatParams:formatParams}=this.props,{error:error,samples:samples,sampleConverterType:sampleConverterType}=this.state;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.url.typeLabel",defaultMessage:"Type"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{"data-test-subj":"urlEditorType",value:formatParams.type,options:format.type.urlTypes.map(type=>({value:type.kind,text:type.text})),onChange:e=>{this.onTypeChange(e.target.value)}})),"a"===formatParams.type?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.url.openTabLabel",defaultMessage:"Open in a new tab"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:formatParams.openLinkInCurrentTab?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.url.offLabel",defaultMessage:"Off"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.url.onLabel",defaultMessage:"On"}),checked:!formatParams.openLinkInCurrentTab,onChange:e=>{this.onChange({openLinkInCurrentTab:!e.target.checked})}})):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.url.urlTemplateLabel",defaultMessage:"URL template"}),helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{target:"_blank",href:this.context.services.docLinks.links.indexPatterns.fieldFormattersString},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.url.template.helpLinkText",defaultMessage:"URL template help"})),isInvalid:!!error,error:error},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{"data-test-subj":"urlEditorUrlTemplate",value:formatParams.urlTemplate||"",onChange:e=>{this.onChange({urlTemplate:e.target.value})}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.url.labelTemplateLabel",defaultMessage:"Label template"}),helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{target:"_blank",href:this.context.services.docLinks.links.indexPatterns.fieldFormattersString},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.url.labelTemplateHelpText",defaultMessage:"Label template help"})),isInvalid:!!error,error:error},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{"data-test-subj":"urlEditorLabelTemplate",value:formatParams.labelTemplate||"",onChange:e=>{this.onChange({labelTemplate:e.target.value})}})),"img"===formatParams.type&&this.renderWidthHeightParameters(),external_kbnSharedDeps_React_default.a.createElement(samples_FormatEditorSamples,{samples:samples,sampleType:sampleConverterType}))}}function histogram_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}url_defineProperty(url_UrlFormatEditor,"contextType",kibanaReact_public_.context),url_defineProperty(url_UrlFormatEditor,"formatId","url");class histogram_HistogramFormatEditor extends default_DefaultFormatEditor{constructor(...args){super(...args),histogram_defineProperty(this,"state",{...defaultState,sampleInputs:[50.1234,100.0001,99.9999,{values:[1e-5,99.9999,200,300],counts:[573,102,482]}]})}render(){var _formatParams$params$,_formatParams$params;const{formatParams:formatParams}=this.props,{error:error,samples:samples}=this.state,numberOptions=[{value:"number",text:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.histogram.subFormat.number",{defaultMessage:"Number"})},{value:"bytes",text:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.histogram.subFormat.bytes",{defaultMessage:"Bytes"})},{value:"percent",text:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.histogram.subFormat.percent",{defaultMessage:"Percentage"})}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.histogram.histogramAsNumberLabel",{defaultMessage:"Aggregated number format"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{options:numberOptions,value:formatParams.id||"number",onChange:e=>{this.onChange({id:e.target.value})}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.histogram.numeralLabel",{defaultMessage:"Numeral format pattern (optional)"}),helpText:external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{target:"_blank",href:"https://adamwdraper.github.io/Numeral-js/"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.number.documentationLabel",defaultMessage:"Documentation"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{type:"link"}))),isInvalid:!!error,error:error},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:null!==(_formatParams$params$=null==formatParams||null===(_formatParams$params=formatParams.params)||void 0===_formatParams$params?void 0:_formatParams$params.pattern)&&void 0!==_formatParams$params$?_formatParams$params$:"",onChange:e=>{this.onChange({params:{pattern:e.target.value}})},isInvalid:!!error})),external_kbnSharedDeps_React_default.a.createElement(samples_FormatEditorSamples,{samples:samples}))}}histogram_defineProperty(histogram_HistogramFormatEditor,"formatId","histogram")},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/usageCollection/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/esUiShared/static/forms/helpers");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(19);__kbnBundles__.define("plugin/indexPatternFieldEditor/public",__webpack_require__,29)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__.indexPatternFieldEditor},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(21);case"v7light":return __webpack_require__(23);case"v8dark":return __webpack_require__(25);case"v8light":return __webpack_require__(27)}},function(module,exports,__webpack_require__){var api=__webpack_require__(11),content=__webpack_require__(22);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(12)(!1)).push([module.i,".kbnFieldFormatEditor__samples audio{max-width:100%}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(11),content=__webpack_require__(24);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(12)(!1)).push([module.i,".kbnFieldFormatEditor__samples audio{max-width:100%}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(11),content=__webpack_require__(26);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(12)(!1)).push([module.i,".kbnFieldFormatEditor__samples audio{max-width:100%}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(11),content=__webpack_require__(28);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(12)(!1)).push([module.i,".kbnFieldFormatEditor__samples audio{max-width:100%}\n",""]),module.exports=exports},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"IndexPatternFieldEditorStart",(function(){return types.PluginStart})),__webpack_require__.d(__webpack_exports__,"DefaultFormatEditor",(function(){return field_format_editor.e})),__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));var external_kbnSharedDeps_React_=__webpack_require__(0),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_KbnI18n_=__webpack_require__(3),shared_imports=__webpack_require__(7),external_kbnSharedDeps_KbnAnalytics_=__webpack_require__(9);const pluginName="index_pattern_field_editor",getLinks=docLinks=>{const{DOC_LINK_VERSION:DOC_LINK_VERSION,ELASTIC_WEBSITE_URL:ELASTIC_WEBSITE_URL}=docLinks,docsBase=ELASTIC_WEBSITE_URL+"guide/en";return{runtimePainless:`${docsBase}/kibana/${DOC_LINK_VERSION}`+"/managing-index-patterns.html#runtime-fields",painlessSyntax:`${docsBase}/elasticsearch/painless/${DOC_LINK_VERSION}`+"/painless-lang-spec.html"}},getScriptExceptionErrorOnShard=error=>"script_exception"===error.type?error:error.caused_by?getScriptExceptionErrorOnShard(error.caused_by):null,parseEsError=error=>{var _scriptError$position,_scriptError$script_s,_scriptError$caused_b,_scriptError$caused_b2;if(void 0===error)return null;const scriptError=(error=>{if(void 0===error||!Array.isArray(error.failed_shards))return null;let scriptExceptionError=null;for(const err of error.failed_shards)if(scriptExceptionError=getScriptExceptionErrorOnShard(err.reason),null!==scriptExceptionError)break;return scriptExceptionError})(error.caused_by);return null===scriptError?null:{message:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.editor.form.scriptEditor.compileErrorMessage",{defaultMessage:"Error compiling the painless script"}),position:null!==(_scriptError$position=scriptError.position)&&void 0!==_scriptError$position?_scriptError$position:null,scriptStack:null!==(_scriptError$script_s=scriptError.script_stack)&&void 0!==_scriptError$script_s?_scriptError$script_s:[],reason:null!==(_scriptError$caused_b=null===(_scriptError$caused_b2=scriptError.caused_by)||void 0===_scriptError$caused_b2?void 0:_scriptError$caused_b2.reason)&&void 0!==_scriptError$caused_b?_scriptError$caused_b:null}};var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(2),external_kbnSharedDeps_ElasticEui_=__webpack_require__(1);const FieldEditorFlyoutContentComponent=({field:field,onSave:onSave,onCancel:onCancel,FieldEditor:FieldEditor,docLinks:docLinks,indexPattern:indexPattern,fieldFormatEditors:fieldFormatEditors,fieldFormats:fieldFormats,uiSettings:uiSettings,fieldTypeToProcess:fieldTypeToProcess,runtimeFieldValidator:runtimeFieldValidator,isSavingField:isSavingField})=>{const isEditingExistingField=!!field,i18nTexts=(field=>({closeButtonLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.editor.flyoutCloseButtonLabel",{defaultMessage:"Close"}),saveButtonLabel:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.editor.flyoutSaveButtonLabel",{defaultMessage:"Save"}),formErrorsCalloutTitle:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.editor.validationErrorTitle",{defaultMessage:"Fix errors in form before continuing."}),cancelButtonText:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.saveRuntimeField.confirmationModal.cancelButtonLabel",{defaultMessage:"Cancel"}),confirmButtonText:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.deleteRuntimeField.confirmationModal.saveButtonLabel",{defaultMessage:"Save changes"}),warningChangingFields:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.deleteRuntimeField.confirmModal.warningChangingFields",{defaultMessage:"Changing name or type can break searches and visualizations that rely on this field."}),typeConfirm:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.saveRuntimeField.confirmModal.typeConfirm",{defaultMessage:"Enter CHANGE to continue"}),titleConfirmChanges:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.saveRuntimeField.confirmModal.title",{defaultMessage:"Save changes to '{name}'",values:{name:null==field?void 0:field.name}})}))(field),[formState,setFormState]=Object(external_kbnSharedDeps_React_.useState)({isSubmitted:!1,isValid:!!field||void 0,submit:field?async()=>({isValid:!0,data:field}):async()=>({isValid:!1,data:{}})}),[painlessSyntaxError,setPainlessSyntaxError]=Object(external_kbnSharedDeps_React_.useState)(null),[isValidating,setIsValidating]=Object(external_kbnSharedDeps_React_.useState)(!1),[isModalVisible,setIsModalVisible]=Object(external_kbnSharedDeps_React_.useState)(!1),[confirmContent,setConfirmContent]=Object(external_kbnSharedDeps_React_.useState)(""),{submit:submit,isValid:isFormValid,isSubmitted:isSubmitted}=formState,{fields:fields}=indexPattern,isSaveButtonDisabled=!1===isFormValid||null!==painlessSyntaxError,clearSyntaxError=Object(external_kbnSharedDeps_React_.useCallback)(()=>setPainlessSyntaxError(null),[]),syntaxError=Object(external_kbnSharedDeps_React_.useMemo)(()=>({error:painlessSyntaxError,clear:clearSyntaxError}),[painlessSyntaxError,clearSyntaxError]),onClickSave=Object(external_kbnSharedDeps_React_.useCallback)(async()=>{const{isValid:isValid,data:data}=await submit(),nameChange=(null==field?void 0:field.name)!==data.name,typeChange=(null==field?void 0:field.type)!==data.type;if(isValid){if(data.script){setIsValidating(!0);const error=await runtimeFieldValidator({type:data.type,script:data.script});if(setIsValidating(!1),setPainlessSyntaxError(error),error)return}isEditingExistingField&&(nameChange||typeChange)?setIsModalVisible(!0):onSave(data)}},[onSave,submit,runtimeFieldValidator,field,isEditingExistingField]),namesNotAllowed=Object(external_kbnSharedDeps_React_.useMemo)(()=>fields.map(fld=>fld.name),[fields]),existingConcreteFields=Object(external_kbnSharedDeps_React_.useMemo)(()=>{const existing=[];return fields.filter(fld=>!((null==field?void 0:field.name)===fld.name)&&fld.isMapped).forEach(fld=>{existing.push({name:fld.name,type:fld.esTypes&&fld.esTypes[0]||""})}),existing},[fields,field]),ctx=Object(external_kbnSharedDeps_React_.useMemo)(()=>({fieldTypeToProcess:fieldTypeToProcess,namesNotAllowed:namesNotAllowed,existingConcreteFields:existingConcreteFields}),[fieldTypeToProcess,namesNotAllowed,existingConcreteFields]),modal=isModalVisible?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiConfirmModal,{title:i18nTexts.titleConfirmChanges,"data-test-subj":"runtimeFieldSaveConfirmModal",cancelButtonText:i18nTexts.cancelButtonText,confirmButtonText:i18nTexts.confirmButtonText,confirmButtonDisabled:"CHANGE"!==(null==confirmContent?void 0:confirmContent.toUpperCase()),onCancel:()=>{setIsModalVisible(!1),setConfirmContent("")},onConfirm:async()=>{const{data:data}=await submit();onSave(data)}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{color:"warning",title:i18nTexts.warningChangingFields,iconType:"alert",size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:i18nTexts.typeConfirm},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:confirmContent,onChange:e=>setConfirmContent(e.target.value),"data-test-subj":"saveModalConfirmText"}))):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutHeader,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiTitle,{"data-test-subj":"flyoutTitle"},external_kbnSharedDeps_React_default.a.createElement("h2",null,field?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.editor.flyoutEditFieldTitle",defaultMessage:"Edit field '{fieldName}'",values:{fieldName:field.name}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.editor.flyoutDefaultTitle",defaultMessage:"Create field"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiText,{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"indexPatternFieldEditor.editor.flyoutEditFieldSubtitle",defaultMessage:"Index pattern: {patternName}",values:{patternName:external_kbnSharedDeps_React_default.a.createElement("i",null,indexPattern.title)}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutBody,null,FieldEditor&&external_kbnSharedDeps_React_default.a.createElement(FieldEditor,{indexPattern:indexPattern,fieldFormatEditors:fieldFormatEditors,fieldFormats:fieldFormats,uiSettings:uiSettings,links:getLinks(docLinks),field:field,onChange:setFormState,ctx:ctx,syntaxError:syntaxError})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlyoutFooter,null,FieldEditor&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,isSubmitted&&isSaveButtonDisabled&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{title:i18nTexts.formErrorsCalloutTitle,color:"danger",iconType:"cross","data-test-subj":"formError"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"m"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonEmpty,{iconType:"cross",flush:"left",onClick:onCancel,"data-test-subj":"closeFlyoutButton"},i18nTexts.closeButtonLabel)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{color:"primary",onClick:onClickSave,"data-test-subj":"fieldSaveButton",fill:!0,disabled:isSaveButtonDisabled,isLoading:isSavingField||isValidating},i18nTexts.saveButtonLabel))))),modal)},FieldEditorFlyoutContent=external_kbnSharedDeps_React_default.a.memo(FieldEditorFlyoutContentComponent),FieldEditorFlyoutContentContainer=({field:field,onSave:onSave,onCancel:onCancel,docLinks:docLinks,indexPatternService:indexPatternService,ctx:{indexPattern:indexPattern,fieldTypeToProcess:fieldTypeToProcess,search:search},notifications:notifications,fieldFormatEditors:fieldFormatEditors,fieldFormats:fieldFormats,uiSettings:uiSettings,usageCollection:usageCollection})=>{const fieldToEdit=((indexPattern,field)=>{var _indexPattern$getForm;if(void 0!==field)return{name:field.name,type:null!=field&&field.esTypes?field.esTypes[0]:"keyword",script:field.runtimeField?field.runtimeField.script:void 0,customLabel:field.customLabel,popularity:field.count,format:null===(_indexPattern$getForm=indexPattern.getFormatterForFieldNoDefault(field.name))||void 0===_indexPattern$getForm?void 0:_indexPattern$getForm.toJSON()}})(indexPattern,field),[Editor,setEditor]=Object(external_kbnSharedDeps_React_.useState)(null),[isSaving,setIsSaving]=Object(external_kbnSharedDeps_React_.useState)(!1),saveField=Object(external_kbnSharedDeps_React_.useCallback)(async updatedField=>{setIsSaving(!0);const{script:script}=updatedField;if("runtime"===fieldTypeToProcess){try{usageCollection.reportUiCounter(pluginName,external_kbnSharedDeps_KbnAnalytics_.METRIC_TYPE.COUNT,"save_runtime")}catch{}null!=field&&field.name&&field.name!==updatedField.name&&indexPattern.removeRuntimeField(field.name),indexPattern.addRuntimeField(updatedField.name,{type:updatedField.type,script:script})}else try{usageCollection.reportUiCounter(pluginName,external_kbnSharedDeps_KbnAnalytics_.METRIC_TYPE.COUNT,"save_concrete")}catch{}const editedField=indexPattern.getFieldByName(updatedField.name);try{if(!editedField)throw new Error(`Unable to find field named '${updatedField.name}' on index pattern '${indexPattern.title}'`);indexPattern.setFieldCustomLabel(updatedField.name,updatedField.customLabel),editedField.count=updatedField.popularity||0,updatedField.format?indexPattern.setFieldFormat(updatedField.name,updatedField.format):indexPattern.deleteFieldFormat(updatedField.name),await indexPatternService.updateSavedObject(indexPattern).then(()=>{const message=external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.deleteField.savedHeader",{defaultMessage:"Saved '{fieldName}'",values:{fieldName:updatedField.name}});notifications.toasts.addSuccess(message),setIsSaving(!1),onSave(editedField)})}catch(e){const title=external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.save.errorTitle",{defaultMessage:"Failed to save field changes"});notifications.toasts.addError(e,{title:title}),setIsSaving(!1)}},[onSave,indexPattern,indexPatternService,notifications,fieldTypeToProcess,null==field?void 0:field.name,usageCollection]),validateRuntimeField=Object(external_kbnSharedDeps_React_.useMemo)(()=>{return index=indexPattern.title,searchService=search,async runtimeField=>await searchService.search({params:{index:index,body:{runtime_mappings:{temp:runtimeField},size:0,query:{match_none:{}}}}}).toPromise().then(()=>null).catch(e=>parseEsError(e.attributes));var index,searchService},[search,indexPattern]),loadEditor=Object(external_kbnSharedDeps_React_.useCallback)(async()=>{const{FieldEditor:FieldEditor}=await __webpack_require__.e(1).then(__webpack_require__.bind(null,32));setEditor(()=>FieldEditor)},[]);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{loadEditor()},[loadEditor]),external_kbnSharedDeps_React_default.a.createElement(FieldEditorFlyoutContent,{onSave:saveField,onCancel:onCancel,docLinks:docLinks,field:fieldToEdit,FieldEditor:Editor,fieldFormatEditors:fieldFormatEditors,fieldFormats:fieldFormats,uiSettings:uiSettings,indexPattern:indexPattern,fieldTypeToProcess:fieldTypeToProcess,runtimeFieldValidator:validateRuntimeField,isSavingField:isSaving})},getFieldEditorOpener=({core:core,indexPatternService:indexPatternService,fieldFormats:fieldFormats,fieldFormatEditors:fieldFormatEditors,search:search,usageCollection:usageCollection})=>options=>{const{uiSettings:uiSettings,overlays:overlays,docLinks:docLinks,notifications:notifications}=core,{Provider:KibanaReactContextProvider}=Object(shared_imports.g)({uiSettings:uiSettings,docLinks:docLinks,http:core.http});let overlayRef=null;return(({onSave:onSave,fieldName:fieldName,ctx:ctx})=>{const closeEditor=()=>{overlayRef&&(overlayRef.close(),overlayRef=null)},field=fieldName?ctx.indexPattern.getFieldByName(fieldName):void 0;if(fieldName&&!field){const err=external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.noSuchFieldName",{defaultMessage:"Field named '{fieldName}' not found on index pattern",values:{fieldName:fieldName}});return notifications.toasts.addDanger(err),closeEditor}const isNewRuntimeField=!fieldName,isExistingRuntimeField=field&&field.runtimeField&&!field.isMapped,fieldTypeToProcess=isNewRuntimeField||isExistingRuntimeField?"runtime":"concrete";return overlayRef=overlays.openFlyout(Object(shared_imports.i)(external_kbnSharedDeps_React_default.a.createElement(KibanaReactContextProvider,null,external_kbnSharedDeps_React_default.a.createElement(FieldEditorFlyoutContentContainer,{onSave:updatedField=>{closeEditor(),onSave&&onSave(updatedField)},onCancel:closeEditor,docLinks:docLinks,field:field,ctx:{...ctx,fieldTypeToProcess:fieldTypeToProcess,search:search},indexPatternService:indexPatternService,notifications:notifications,fieldFormatEditors:fieldFormatEditors,fieldFormats:fieldFormats,uiSettings:uiSettings,usageCollection:usageCollection})))),closeEditor})(options)};class FieldFormatEditors{constructor(){var obj,key,value;value=[],(key="editors")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}setup(defaultFieldEditors=[]){return this.editors=defaultFieldEditors,{register:editor=>{this.editors.push(editor)}}}start(){return{getAll:()=>[...this.editors],getById:id=>this.editors.find(editor=>editor.formatId===id)}}}var field_format_editor=__webpack_require__(14);class format_editor_service_FormatEditorService{constructor(){var obj,key,value;value=void 0,(key="fieldFormatEditors")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this.fieldFormatEditors=new FieldFormatEditors}setup(){const defaultFieldFormatEditors=[field_format_editor.a,field_format_editor.b,field_format_editor.c,field_format_editor.d,field_format_editor.f,field_format_editor.i,field_format_editor.j,field_format_editor.k,field_format_editor.l,field_format_editor.m,field_format_editor.n,field_format_editor.h];return{fieldFormatEditors:this.fieldFormatEditors.setup(defaultFieldFormatEditors)}}start(){return{fieldFormatEditors:this.fieldFormatEditors.start()}}stop(){}}function DeleteFieldModal({fieldsToDelete:fieldsToDelete,closeModal:closeModal,confirmDelete:confirmDelete}){const i18nTexts=(fieldsToDelete=>{let modalTitle="",confirmButtonText="";if(fieldsToDelete){const isSingle=1===fieldsToDelete.length;modalTitle=isSingle?external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.deleteRuntimeField.confirmModal.deleteSingleTitle",{defaultMessage:"Remove field '{name}'",values:{name:fieldsToDelete[0]}}):external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.deleteRuntimeField.confirmModal.deleteMultipleTitle",{defaultMessage:"Remove {count} fields",values:{count:fieldsToDelete.length}}),confirmButtonText=isSingle?external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.deleteRuntimeField.confirmationModal.removeButtonLabel",{defaultMessage:"Remove field"}):external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.deleteRuntimeField.confirmationModal.removeMultipleButtonLabel",{defaultMessage:"Remove fields"})}return{modalTitle:modalTitle,confirmButtonText:confirmButtonText,cancelButtonText:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.deleteRuntimeField.confirmationModal.cancelButtonLabel",{defaultMessage:"Cancel"}),warningMultipleFields:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.deleteRuntimeField.confirmModal.multipleDeletionDescription",{defaultMessage:"You are about to remove these runtime fields:"}),typeConfirm:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.deleteRuntimeField.confirmModal.typeConfirm",{defaultMessage:"Enter REMOVE to confirm"}),warningRemovingFields:external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.deleteRuntimeField.confirmModal.warningRemovingFields",{defaultMessage:"Removing fields can break searches and visualizations that rely on this field."})}})(fieldsToDelete),{modalTitle:modalTitle,confirmButtonText:confirmButtonText,cancelButtonText:cancelButtonText,warningMultipleFields:warningMultipleFields}=i18nTexts,isMultiple=Boolean(fieldsToDelete.length>1),[confirmContent,setConfirmContent]=Object(external_kbnSharedDeps_React_.useState)("");return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiConfirmModal,{title:modalTitle,"data-test-subj":"runtimeFieldDeleteConfirmModal",onCancel:closeModal,onConfirm:confirmDelete,cancelButtonText:cancelButtonText,buttonColor:"danger",confirmButtonText:confirmButtonText,confirmButtonDisabled:"REMOVE"!==(null==confirmContent?void 0:confirmContent.toUpperCase())},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{color:"warning",title:i18nTexts.warningRemovingFields,iconType:"alert",size:"s"},isMultiple&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,warningMultipleFields),external_kbnSharedDeps_React_default.a.createElement("ul",null,fieldsToDelete.map(fieldName=>external_kbnSharedDeps_React_default.a.createElement("li",{key:fieldName},fieldName))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{label:i18nTexts.typeConfirm},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:confirmContent,onChange:e=>setConfirmContent(e.target.value),"data-test-subj":"deleteModalConfirmText"})))}const getFieldDeleteModalOpener=({core:core,indexPatternService:indexPatternService,usageCollection:usageCollection})=>options=>{const{overlays:overlays,notifications:notifications}=core;let overlayRef=null;return(({onDelete:onDelete,fieldName:fieldName,ctx:{indexPattern:indexPattern}})=>{const fieldsToDelete=Array.isArray(fieldName)?fieldName:[fieldName],closeModal=()=>{overlayRef&&(overlayRef.close(),overlayRef=null)};return overlayRef=overlays.openModal(Object(shared_imports.i)(external_kbnSharedDeps_React_default.a.createElement(DeleteFieldModal,{fieldsToDelete:fieldsToDelete,closeModal:closeModal,confirmDelete:async()=>{closeModal(),await async function(fieldNames,indexPattern,services){fieldNames.forEach(fieldName=>{indexPattern.removeRuntimeField(fieldName)});try{services.usageCollection.reportUiCounter(pluginName,external_kbnSharedDeps_KbnAnalytics_.METRIC_TYPE.COUNT,"delete_runtime")}catch{}try{await services.indexPatternService.updateSavedObject(indexPattern)}catch(e){const title=external_kbnSharedDeps_KbnI18n_.i18n.translate("indexPatternFieldEditor.save.deleteErrorTitle",{defaultMessage:"Failed to save field removal"});services.notifications.toasts.addError(e,{title:title})}}(fieldsToDelete,indexPattern,{indexPatternService:indexPatternService,usageCollection:usageCollection,notifications:notifications}),onDelete&&onDelete(fieldsToDelete)}}))),closeModal})(options)};class plugin_IndexPatternFieldEditorPlugin{constructor(){var obj,key,value;obj=this,key="formatEditorService",value=new format_editor_service_FormatEditorService,key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}setup(core,plugins){const{fieldFormatEditors:fieldFormatEditors}=this.formatEditorService.setup();return{fieldFormatEditors:fieldFormatEditors}}start(core,plugins){const{fieldFormatEditors:fieldFormatEditors}=this.formatEditorService.start(),{application:{capabilities:capabilities}}=core,{data:data,usageCollection:usageCollection}=plugins,openDeleteModal=getFieldDeleteModalOpener({core:core,indexPatternService:data.indexPatterns,usageCollection:usageCollection});return{fieldFormatEditors:fieldFormatEditors,openEditor:getFieldEditorOpener({core:core,indexPatternService:data.indexPatterns,fieldFormats:data.fieldFormats,fieldFormatEditors:fieldFormatEditors,search:data.search,usageCollection:usageCollection}),openDeleteModal:openDeleteModal,userPermissions:{editIndexPattern:()=>capabilities.management.kibana.indexPatterns},DeleteRuntimeFieldProvider:(modalOpener=openDeleteModal,external_kbnSharedDeps_React_default.a.memo(({indexPattern:indexPattern,children:children,onDelete:onDelete})=>{const closeModal=Object(external_kbnSharedDeps_React_.useRef)(null),deleteFields=Object(external_kbnSharedDeps_React_.useCallback)(async fieldName=>{closeModal.current&&closeModal.current(),closeModal.current=modalOpener({ctx:{indexPattern:indexPattern},fieldName:fieldName,onDelete:onDelete})},[onDelete,indexPattern]);return Object(external_kbnSharedDeps_React_.useEffect)(()=>()=>{closeModal.current&&closeModal.current()},[]),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,children(deleteFields))}))};var modalOpener}stop(){return{}}}var types=__webpack_require__(17);function public_plugin(){return new plugin_IndexPatternFieldEditorPlugin}},function(module,exports){module.exports=__kbnSharedDeps__.KbnMonaco},function(module,exports){module.exports=__kbnSharedDeps__.Lodash}]);