!function(modules){function webpackJsonpCallback(data){for(var moduleId,chunkId,chunkIds=data[0],moreModules=data[1],i=0,resolves=[];i<chunkIds.length;i++)chunkId=chunkIds[i],Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]&&resolves.push(installedChunks[chunkId][0]),installedChunks[chunkId]=0;for(moduleId in moreModules)Object.prototype.hasOwnProperty.call(moreModules,moduleId)&&(modules[moduleId]=moreModules[moduleId]);for(parentJsonpFunction&&parentJsonpFunction(data);resolves.length;)resolves.shift()()}var installedModules={},installedChunks={0:0};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.e=function(chunkId){var promises=[],installedChunkData=installedChunks[chunkId];if(0!==installedChunkData)if(installedChunkData)promises.push(installedChunkData[2]);else{var promise=new Promise((function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var onScriptComplete,script=document.createElement("script");script.charset="utf-8",script.timeout=120,__webpack_require__.nc&&script.setAttribute("nonce",__webpack_require__.nc),script.src=function(chunkId){return __webpack_require__.p+"savedObjectsManagement.chunk."+chunkId+".js"}(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null,clearTimeout(timeout);var chunk=installedChunks[chunkId];if(0!==chunk){if(chunk){var errorType=event&&("load"===event.type?"missing":event.type),realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")",error.name="ChunkLoadError",error.type=errorType,error.request=realSrc,chunk[1](error)}installedChunks[chunkId]=void 0}};var timeout=setTimeout((function(){onScriptComplete({type:"timeout",target:script})}),12e4);script.onerror=script.onload=onScriptComplete,document.head.appendChild(script)}return Promise.all(promises)},__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__.oe=function(err){throw console.error(err),err};var jsonpArray=window.savedObjectsManagement_bundle_jsonpfunction=window.savedObjectsManagement_bundle_jsonpfunction||[],oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback,jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;__webpack_require__(__webpack_require__.s=9)}([function(module,exports){module.exports=__kbnSharedDeps__.Lodash},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return resolveIndexPatternConflicts})),__webpack_require__.d(__webpack_exports__,"e",(function(){return saveObjects})),__webpack_require__.d(__webpack_exports__,"d",(function(){return saveObject})),__webpack_require__.d(__webpack_exports__,"c",(function(){return resolveSavedSearches})),__webpack_require__.d(__webpack_exports__,"b",(function(){return resolveSavedObjects}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_data_public__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4);async function getSavedObject(doc,services){const service=services.find(s=>s.type===doc._type);if(!service)return;const obj=await service.get();return obj.id=doc._id,obj.migrationVersion=doc._migrationVersion,obj}function addJsonFieldToIndexPattern(target,sourceString,fieldName,indexName){if(sourceString)try{target[fieldName]=JSON.parse(sourceString)}catch(error){throw new Error(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("savedObjectsManagement.parsingFieldErrorMessage",{defaultMessage:"Error encountered parsing {fieldName} for index pattern {indexName}: {errorMessage}",values:{fieldName:fieldName,indexName:indexName,errorMessage:error.message}}))}}async function importIndexPattern(doc,indexPatterns,overwriteAll=!1,openConfirm){const{title:title,timeFieldName:timeFieldName,fields:fields,fieldFormatMap:fieldFormatMap,sourceFilters:sourceFilters,type:type,typeMeta:typeMeta}=doc._source,indexPatternSpec={id:doc._id,title:title,timeFieldName:timeFieldName};let emptyPattern;type&&(indexPatternSpec.type=type),addJsonFieldToIndexPattern(indexPatternSpec,fields,"fields",title),addJsonFieldToIndexPattern(indexPatternSpec,fieldFormatMap,"fieldFormatMap",title),addJsonFieldToIndexPattern(indexPatternSpec,sourceFilters,"sourceFilters",title),addJsonFieldToIndexPattern(indexPatternSpec,typeMeta,"typeMeta",title);try{emptyPattern=await indexPatterns.createAndSave(indexPatternSpec,overwriteAll,!0)}catch(err){if(err instanceof _data_public__WEBPACK_IMPORTED_MODULE_2__.DuplicateIndexPatternError){if(!await openConfirm(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("savedObjectsManagement.indexPattern.confirmOverwriteLabel",{values:{title:title},defaultMessage:"Are you sure you want to overwrite '{title}'?"}),{title:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("savedObjectsManagement.indexPattern.confirmOverwriteTitle",{defaultMessage:"Overwrite {type}?",values:{type:type}}),confirmButtonText:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__.i18n.translate("savedObjectsManagement.indexPattern.confirmOverwriteButton",{defaultMessage:"Overwrite"})}))return;emptyPattern=await indexPatterns.createAndSave(indexPatternSpec,!0,!0)}}return indexPatterns.clearCache(emptyPattern.id),emptyPattern.id}async function importDocument(obj,doc,overwriteAll){return await obj.applyESResp({references:doc._references||[],...Object(lodash__WEBPACK_IMPORTED_MODULE_1__.cloneDeep)(doc)}),await obj.save({confirmOverwrite:!overwriteAll})}async function resolveIndexPatternConflicts(resolutions,conflictedIndexPatterns,overwriteAll,dependencies){let importCount=0;for(const{obj:obj,doc:doc}of conflictedIndexPatterns){var _doc$_source$kibanaSa;const serializedSearchSource=JSON.parse((null===(_doc$_source$kibanaSa=doc._source.kibanaSavedObjectMeta)||void 0===_doc$_source$kibanaSa?void 0:_doc$_source$kibanaSa.searchSourceJSON)||"{}"),oldIndexId=serializedSearchSource.index;let allResolved=!0;const inlineResolution=resolutions.find(({oldId:oldId})=>oldId===oldIndexId);inlineResolution?serializedSearchSource.index=inlineResolution.newId:allResolved=!1;const filter=(serializedSearchSource.filter||[]).map(f=>{if(!f.meta||!f.meta.index)return f;const resolution=resolutions.find(({oldId:oldId})=>oldId===f.meta.index);return resolution?{...f,meta:{...f.meta,index:resolution.newId}}:f});filter.length>0&&(serializedSearchSource.filter=filter);const replacedReferences=(doc._references||[]).map(reference=>{const resolution=resolutions.find(({oldId:oldId})=>oldId===reference.id);return resolution?{...reference,id:resolution.newId}:(allResolved=!1,reference)}),serializedSearchSourceWithInjectedReferences=Object(_data_public__WEBPACK_IMPORTED_MODULE_2__.injectSearchSourceReferences)(serializedSearchSource,replacedReferences);allResolved&&(obj.searchSource=await dependencies.search.searchSource.create(serializedSearchSourceWithInjectedReferences),await saveObject(obj,overwriteAll)&&importCount++)}return importCount}async function saveObjects(objs,overwriteAll){let importCount=0;for(const obj of objs)await saveObject(obj,overwriteAll)&&importCount++;return importCount}async function saveObject(obj,overwriteAll){return await obj.save({confirmOverwrite:!overwriteAll})}async function resolveSavedSearches(savedSearches,services,indexPatterns,overwriteAll){let importCount=0;for(const searchDoc of savedSearches){const obj=await getSavedObject(searchDoc,services);obj&&(await importDocument(obj,searchDoc,overwriteAll)&&importCount++)}return importCount}async function resolveSavedObjects(savedObjects,overwriteAll,services,indexPatterns,confirmModalPromise){const docTypes=savedObjects.reduce((types,doc)=>{switch(doc._type){case"search":types.searches.push(doc);break;case"index-pattern":types.indexPatterns.push(doc);break;default:types.other.push(doc)}return types},{searches:[],indexPatterns:[],other:[]});let importedObjectCount=0;const failedImports=[];for(const indexPatternDoc of docTypes.indexPatterns)try{await importIndexPattern(indexPatternDoc,indexPatterns,overwriteAll,confirmModalPromise)&&importedObjectCount++}catch(error){failedImports.push({obj:indexPatternDoc,error:error})}const conflictedSearchDocs=[],conflictedIndexPatterns=[],conflictedSavedObjectsLinkedToSavedSearches=[];for(const searchDoc of docTypes.searches){const obj=await getSavedObject(searchDoc,services);try{await importDocument(obj,searchDoc,overwriteAll)&&importedObjectCount++}catch(error){"SavedObjectNotFound"===error.constructor.name?"index-pattern"===error.savedObjectType?conflictedIndexPatterns.push({obj:obj,doc:searchDoc}):conflictedSearchDocs.push(searchDoc):failedImports.push({obj:obj,error:error})}}for(const otherDoc of docTypes.other){const obj=await getSavedObject(otherDoc,services);try{await importDocument(obj,otherDoc,overwriteAll)&&importedObjectCount++}catch(error){const isIndexPatternNotFound="SavedObjectNotFound"===error.constructor.name&&"index-pattern"===error.savedObjectType;isIndexPatternNotFound&&obj.savedSearchId?conflictedSavedObjectsLinkedToSavedSearches.push(obj):isIndexPatternNotFound?conflictedIndexPatterns.push({obj:obj,doc:otherDoc}):failedImports.push({obj:obj,error:error})}}return{conflictedIndexPatterns:conflictedIndexPatterns,conflictedSavedObjectsLinkedToSavedSearches:conflictedSavedObjectsLinkedToSavedSearches,conflictedSearchDocs:conflictedSearchDocs,importedObjectCount:importedObjectCount,failedImports:failedImports}}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/data/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";async function fetchExportByTypeAndSearch({http:http,search:search,types:types,references:references,includeReferencesDeep:includeReferencesDeep=!1}){return http.post("/api/saved_objects/_export",{body:JSON.stringify({type:types,search:search,hasReference:references,includeReferencesDeep:includeReferencesDeep})})}async function fetchExportObjects(http,objects,includeReferencesDeep=!1){return http.post("/api/saved_objects/_export",{body:JSON.stringify({objects:objects,includeReferencesDeep:includeReferencesDeep})})}function canViewInApp(uiCapabilities,type){switch(type){case"search":case"searches":return uiCapabilities.discover.show;case"visualization":case"visualizations":return uiCapabilities.visualize.show;case"index-pattern":case"index-patterns":case"indexPatterns":return uiCapabilities.management.kibana.indexPatterns;case"dashboard":case"dashboards":return uiCapabilities.dashboard.show;default:return uiCapabilities[type].show}}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"fetchExportByTypeAndSearch",(function(){return fetchExportByTypeAndSearch})),__webpack_require__.d(__webpack_exports__,"fetchExportObjects",(function(){return fetchExportObjects})),__webpack_require__.d(__webpack_exports__,"canViewInApp",(function(){return canViewInApp})),__webpack_require__.d(__webpack_exports__,"getRelationships",(function(){return getRelationships})),__webpack_require__.d(__webpack_exports__,"getSavedObjectCounts",(function(){return getSavedObjectCounts})),__webpack_require__.d(__webpack_exports__,"getSavedObjectLabel",(function(){return getSavedObjectLabel})),__webpack_require__.d(__webpack_exports__,"importFile",(function(){return importFile})),__webpack_require__.d(__webpack_exports__,"importLegacyFile",(function(){return importLegacyFile})),__webpack_require__.d(__webpack_exports__,"parseQuery",(function(){return parseQuery})),__webpack_require__.d(__webpack_exports__,"resolveImportErrors",(function(){return resolveImportErrors})),__webpack_require__.d(__webpack_exports__,"resolveIndexPatternConflicts",(function(){return resolve_saved_objects.a})),__webpack_require__.d(__webpack_exports__,"resolveSavedObjects",(function(){return resolve_saved_objects.b})),__webpack_require__.d(__webpack_exports__,"resolveSavedSearches",(function(){return resolve_saved_objects.c})),__webpack_require__.d(__webpack_exports__,"saveObject",(function(){return resolve_saved_objects.d})),__webpack_require__.d(__webpack_exports__,"saveObjects",(function(){return resolve_saved_objects.e})),__webpack_require__.d(__webpack_exports__,"logLegacyImport",(function(){return logLegacyImport})),__webpack_require__.d(__webpack_exports__,"processImportResponse",(function(){return processImportResponse})),__webpack_require__.d(__webpack_exports__,"ProcessedImportResponse",(function(){})),__webpack_require__.d(__webpack_exports__,"FailedImport",(function(){})),__webpack_require__.d(__webpack_exports__,"getDefaultTitle",(function(){return getDefaultTitle})),__webpack_require__.d(__webpack_exports__,"findObjects",(function(){return findObjects})),__webpack_require__.d(__webpack_exports__,"findObject",(function(){return findObject})),__webpack_require__.d(__webpack_exports__,"extractExportDetails",(function(){return extractExportDetails})),__webpack_require__.d(__webpack_exports__,"SavedObjectsExportResultDetails",(function(){})),__webpack_require__.d(__webpack_exports__,"createFieldList",(function(){return createFieldList})),__webpack_require__.d(__webpack_exports__,"getAllowedTypes",(function(){return getAllowedTypes})),__webpack_require__.d(__webpack_exports__,"getTagFindReferences",(function(){return getTagFindReferences}));var external_kbnSharedDeps_Lodash_=__webpack_require__(0);async function getRelationships(http,type,id,savedObjectTypes){const url=`/api/kibana/management/saved_objects/relationships/${encodeURIComponent(type)}/${encodeURIComponent(id)}`;try{return await http.get(url,{query:{savedObjectTypes:savedObjectTypes}})}catch(respError){const respBody=Object(external_kbnSharedDeps_Lodash_.get)(respError,"data",{}),err=new Error(respBody.message||respBody.error||respError.status+" Response");throw err.statusCode=respBody.statusCode||respError.status,err.body=respBody,err}}async function getSavedObjectCounts({http:http,searchString:searchString,typesToInclude:typesToInclude,references:references}){return await http.post("/api/kibana/management/saved_objects/scroll/counts",{body:JSON.stringify({typesToInclude:typesToInclude,searchString:searchString,references:references})})}function getSavedObjectLabel(type){switch(type){case"index-pattern":case"index-patterns":case"indexPatterns":return"index patterns";default:return type}}async function importFile(http,file,{createNewCopies:createNewCopies,overwrite:overwrite}){const formData=new FormData;formData.append("file",file);const query=createNewCopies?{createNewCopies:createNewCopies}:{overwrite:overwrite};return await http.post("/api/saved_objects/_import",{body:formData,headers:{"Content-Type":void 0},query:query})}async function importLegacyFile(file){return new Promise((resolve,reject)=>{const fr=new FileReader;fr.onload=event=>{const result=event.target.result;try{resolve(JSON.parse(result))}catch(e){reject(e)}},fr.readAsText(file)})}function parseQuery(query){let queryText,visibleTypes,selectedTags;return query&&(query.ast.getTermClauses().length&&(queryText=query.ast.getTermClauses().map(clause=>clause.value).join(" ")),query.ast.getFieldClauses("type")&&(visibleTypes=query.ast.getFieldClauses("type")[0].value),query.ast.getFieldClauses("tag")&&(selectedTags=query.ast.getFieldClauses("tag")[0].value)),{queryText:queryText,visibleTypes:visibleTypes,selectedTags:selectedTags}}const RESOLVABLE_ERRORS=["conflict","ambiguous_conflict","missing_references"],isConflict=failure=>"conflict"===failure.error.type,isAmbiguousConflict=failure=>"ambiguous_conflict"===failure.error.type,isAnyConflict=failure=>isConflict(failure)||isAmbiguousConflict(failure),filterFailedImports=failures=>{const missingReferences=failures.filter(({error:{type:type}})=>"missing_references"===type).reduce((acc,{obj:{type:type,id:id}})=>acc.add(`${type}:${id}`),new Set);return failures.filter(failure=>!isAnyConflict(failure)||isAnyConflict(failure)&&!missingReferences.has(`${failure.obj.type}:${failure.obj.id}`))};async function callResolveImportErrorsApi(http,file,retries,createNewCopies){const formData=new FormData;formData.append("file",file),formData.append("retries",JSON.stringify(retries));const query=createNewCopies?{createNewCopies:createNewCopies}:{};return http.post("/api/saved_objects/_resolve_import_errors",{headers:{"Content-Type":void 0},body:formData,query:query})}async function resolveImportErrors({http:http,getConflictResolutions:getConflictResolutions,state:state}){const retryDecisionCache=new Map,replaceReferencesCache=new Map;let{importCount:importCount,failedImports:failedImports=[],successfulImports:successfulImports=[]}=state;const{file:file,importMode:{createNewCopies:createNewCopies,overwrite:isOverwriteAllChecked}}=state,doesntHaveRetryDecision=({obj:obj})=>!retryDecisionCache.has(`${obj.type}:${obj.id}`),callMapImportFailure=failure=>function({failure:failure,retryDecisionCache:retryDecisionCache,replaceReferencesCache:replaceReferencesCache,state:state}){const{unmatchedReferences:unmatchedReferences=[]}=state,retryDecision=retryDecisionCache.get(`${failure.obj.type}:${failure.obj.id}`);if(null!=retryDecision&&retryDecision.retry||"conflict"!==failure.error.type&&"ambiguous_conflict"!==failure.error.type){if("missing_references"===failure.error.type){const objReplaceReferences=replaceReferencesCache.get(`${failure.obj.type}:${failure.obj.id}`)||[],indexPatternRefs=failure.error.references.filter(obj=>"index-pattern"===obj.type);for(const reference of indexPatternRefs)for(const{existingIndexPatternId:from,newIndexPatternId:to}of unmatchedReferences){const matchesIndexPatternId=from===reference.id;if(!to||!matchesIndexPatternId)continue;const type="index-pattern";objReplaceReferences.some(ref=>ref.type===type&&ref.from===from&&ref.to===to)||objReplaceReferences.push({type:type,from:from,to:to})}if(replaceReferencesCache.set(`${failure.obj.type}:${failure.obj.id}`,objReplaceReferences),0===objReplaceReferences.length)return}return{id:failure.obj.id,type:failure.obj.type,...(null==retryDecision?void 0:retryDecision.retry)&&retryDecision.options,replaceReferences:replaceReferencesCache.get(`${failure.obj.type}:${failure.obj.id}`)}}}({failure:failure,retryDecisionCache:retryDecisionCache,replaceReferencesCache:replaceReferencesCache,state:state}),isNotSkipped=failure=>{var _getRetryDecision;const{type:type}=failure.error;return!RESOLVABLE_ERRORS.includes(type)||(null===(_getRetryDecision=(({obj:obj})=>retryDecisionCache.get(`${obj.type}:${obj.id}`))(failure))||void 0===_getRetryDecision?void 0:_getRetryDecision.retry)};for(;failedImports.some(failure=>RESOLVABLE_ERRORS.includes(failure.error.type));){const filteredFailures=filterFailedImports(failedImports);isOverwriteAllChecked&&filteredFailures.filter(isConflict).forEach(({obj:{type:type,id:id},error:{destinationId:destinationId}})=>retryDecisionCache.set(`${type}:${id}`,{retry:!0,options:{overwrite:!0,...destinationId&&{destinationId:destinationId}}}));const result=await getConflictResolutions(isOverwriteAllChecked?filteredFailures.filter(isAmbiguousConflict).filter(doesntHaveRetryDecision):filteredFailures.filter(isAnyConflict).filter(doesntHaveRetryDecision));for(const key of Object.keys(result))retryDecisionCache.set(key,result[key]);const retries=[...filteredFailures.map(callMapImportFailure).filter(obj=>!!obj),...successfulImports.map(({type:type,id:id,overwrite:overwrite,destinationId:destinationId,createNewCopy:createNewCopy})=>{const replaceReferences=replaceReferencesCache.get(`${type}:${id}`);return{type:type,id:id,...overwrite&&{overwrite:overwrite},...replaceReferences&&{replaceReferences:replaceReferences},destinationId:destinationId,createNewCopy:createNewCopy}})];if(0===retries.length){failedImports=filteredFailures.filter(isNotSkipped);break}const response=await callResolveImportErrorsApi(http,file,retries,createNewCopies);importCount=response.successCount,failedImports=[];for(const{error:error,...obj}of response.errors||[])failedImports.push({error:error,obj:obj});successfulImports=response.successResults||[]}return{status:"success",importCount:importCount,failedImports:failedImports,successfulImports:successfulImports}}var resolve_saved_objects=__webpack_require__(3);async function logLegacyImport(http){return http.post("/api/saved_objects/_log_legacy_import")}function processImportResponse(response){var _response$successResu;const failedImports=[],unmatchedReferences=new Map;for(const{error:error,...obj}of response.errors||[]){if(failedImports.push({obj:obj,error:error}),"missing_references"!==error.type)continue;const indexPatternRefs=error.references.filter(ref=>"index-pattern"===ref.type);for(const missingReference of indexPatternRefs){const conflict=unmatchedReferences.get(`${missingReference.type}:${missingReference.id}`)||{existingIndexPatternId:missingReference.id,list:[],newIndexPatternId:void 0};conflict.list.some(({type:type,id:id})=>type===obj.type&&id===obj.id)||(conflict.list.push(obj),unmatchedReferences.set(`${missingReference.type}:${missingReference.id}`,conflict))}}return{failedImports:failedImports,successfulImports:null!==(_response$successResu=response.successResults)&&void 0!==_response$successResu?_response$successResu:[],unmatchedReferences:Array.from(unmatchedReferences.values()),status:0!==unmatchedReferences.size||failedImports.some(issue=>(({type:type})=>"conflict"===type||"ambiguous_conflict"===type)(issue.error))?"idle":"success",importCount:response.successCount,conflictedSavedObjectsLinkedToSavedSearches:void 0,conflictedSearchDocs:void 0,importWarnings:response.warnings}}function getDefaultTitle(object){return`${object.type} [id=${object.id}]`}async function findObjects(http,findOptions){const response=await http.get("/api/kibana/management/saved_objects/_find",{query:{...findOptions,hasReference:findOptions.hasReference?JSON.stringify(findOptions.hasReference):void 0}});return object=response,Object(external_kbnSharedDeps_Lodash_.mapKeys)(object,(value,key)=>Object(external_kbnSharedDeps_Lodash_.camelCase)(key));var object}async function findObject(http,type,id){return await http.get(`/api/kibana/management/saved_objects/${encodeURIComponent(type)}/${encodeURIComponent(id)}`)}async function extractExportDetails(blob){const reader=new FileReader,lines=(await new Promise((resolve,reject)=>{reader.addEventListener("loadend",e=>{resolve(e.target.result)}),reader.addEventListener("error",e=>{reject(e)}),reader.readAsText(blob,"utf-8")})).split("\n").filter(l=>l.length>0),maybeDetails=JSON.parse(lines[lines.length-1]);if("exportedCount"in(object=maybeDetails)&&"missingRefCount"in object&&"missingReferences"in object)return maybeDetails;var object}var public_=__webpack_require__(4);function createFieldList(object,service){let fields=Object.entries(object.attributes).reduce((objFields,[key,value])=>[...objFields,...createFields(key,value)],[]);return fields=[...fields,...createFields("references",object.references)],service&&service.Class&&addFieldsFromClass(service.Class,fields),fields}const createFields=(key,value,parents=[])=>{const path=[...parents,key];if(path.length>20)return[];const field={type:"text",name:path.join("."),value:value};if(Object(external_kbnSharedDeps_Lodash_.isString)(field.value))try{field.value=JSON.stringify(JSON.parse(field.value),void 0,2),field.type="json"}catch(err){field.type="text"}else if(Object(external_kbnSharedDeps_Lodash_.isNumber)(field.value))field.type="number";else if(Array.isArray(field.value))field.type="array",field.value=JSON.stringify(field.value,void 0,2);else if(Object(external_kbnSharedDeps_Lodash_.isBoolean)(field.value))field.type="boolean";else if(Object(external_kbnSharedDeps_Lodash_.isPlainObject)(field.value)){let fields=[];return Object(external_kbnSharedDeps_Lodash_.forOwn)(field.value,(childValue,childKey)=>{fields=[...fields,...createFields(childKey,childValue,path)]}),fields}return[field]},addFieldsFromClass=function(Class,fields){const fieldMap=Object(external_kbnSharedDeps_Lodash_.keyBy)(fields,"name");Object(external_kbnSharedDeps_Lodash_.forOwn)(Class.mapping,(esType,name)=>{if(!name||fieldMap[name])return;fields.push({name:name,type:(()=>{switch(Object(public_.castEsToKbnFieldTypeName)(esType)){case"string":return"text";case"number":return"number";case"boolean":return"boolean";default:return"json"}})(),value:void 0})}),Class.searchSource&&!fieldMap["kibanaSavedObjectMeta.searchSourceJSON"]&&fields.push({name:"kibanaSavedObjectMeta.searchSourceJSON",type:"json",value:"{}"}),fieldMap.references||fields.push({name:"references",type:"array",value:"[]"})};async function getAllowedTypes(http){return(await http.get("/api/kibana/management/saved_objects/_allowed_types")).types}const getTagFindReferences=({selectedTags:selectedTags,taggingApi:taggingApi})=>{if(taggingApi&&selectedTags){const references=[];return selectedTags.forEach(tagName=>{const ref=taggingApi.ui.convertNameToReference(tagName);ref&&references.push(ref)}),references}}},function(module,exports){},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/home/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(10);__kbnBundles__.define("plugin/savedObjectsManagement/public",__webpack_require__,11),__kbnBundles__.define("plugin/savedObjectsManagement/public/lib",__webpack_require__,5)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__.savedObjectsManagement},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"SavedObjectsManagementPluginSetup",(function(){})),__webpack_require__.d(__webpack_exports__,"SavedObjectsManagementPluginStart",(function(){})),__webpack_require__.d(__webpack_exports__,"SavedObjectsManagementActionServiceSetup",(function(){})),__webpack_require__.d(__webpack_exports__,"SavedObjectsManagementActionServiceStart",(function(){})),__webpack_require__.d(__webpack_exports__,"SavedObjectsManagementAction",(function(){return SavedObjectsManagementAction})),__webpack_require__.d(__webpack_exports__,"SavedObjectsManagementColumnServiceSetup",(function(){})),__webpack_require__.d(__webpack_exports__,"SavedObjectsManagementColumnServiceStart",(function(){})),__webpack_require__.d(__webpack_exports__,"SavedObjectsManagementColumn",(function(){return column.SavedObjectsManagementColumn})),__webpack_require__.d(__webpack_exports__,"SavedObjectsManagementRecord",(function(){return record.SavedObjectsManagementRecord})),__webpack_require__.d(__webpack_exports__,"ISavedObjectsManagementServiceRegistry",(function(){})),__webpack_require__.d(__webpack_exports__,"SavedObjectsManagementServiceRegistryEntry",(function(){})),__webpack_require__.d(__webpack_exports__,"ProcessedImportResponse",(function(){return lib.ProcessedImportResponse})),__webpack_require__.d(__webpack_exports__,"processImportResponse",(function(){return lib.processImportResponse})),__webpack_require__.d(__webpack_exports__,"FailedImport",(function(){return lib.FailedImport})),__webpack_require__.d(__webpack_exports__,"SavedObjectRelation",(function(){return types.SavedObjectRelation})),__webpack_require__.d(__webpack_exports__,"SavedObjectWithMetadata",(function(){return types.SavedObjectWithMetadata})),__webpack_require__.d(__webpack_exports__,"SavedObjectMetadata",(function(){return types.SavedObjectMetadata})),__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1),public_=__webpack_require__(8);class SavedObjectsManagementActionService{constructor(){var obj,key,value;obj=this,key="actions",value=new Map,key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}setup(){return{register:action=>{if(this.actions.has(action.id))throw new Error(`Saved Objects Management Action with id '${action.id}' already exists`);this.actions.set(action.id,action)}}}start(){return{has:actionId=>this.actions.has(actionId),getAll:()=>[...this.actions.values()]}}}class SavedObjectsManagementColumnService{constructor(){var obj,key,value;obj=this,key="columns",value=new Map,key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}setup(){return{register:column=>{if(this.columns.has(column.id))throw new Error(`Saved Objects Management Column with id '${column.id}' already exists`);this.columns.set(column.id,column)}}}start(){return{getAll:()=>[...this.columns.values()]}}}class SavedObjectsManagementServiceRegistry{constructor(){var obj,key,value;obj=this,key="registry",value=new Map,key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}register(entry){if(this.registry.has(entry.id))throw new Error("");this.registry.set(entry.id,entry)}all(){return[...this.registry.values()]}get(id){return this.registry.get(id)}}function action_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class SavedObjectsManagementAction{constructor(){action_defineProperty(this,"render",void 0),action_defineProperty(this,"id",void 0),action_defineProperty(this,"euiAction",void 0),action_defineProperty(this,"refreshOnFinish",void 0),action_defineProperty(this,"callbacks",[]),action_defineProperty(this,"actionContext",null),action_defineProperty(this,"record",null)}setActionContext(actionContext){this.actionContext=actionContext}registerOnFinishCallback(callback){this.callbacks.push(callback)}start(record){this.record=record}finish(){this.record=null,this.callbacks.forEach(callback=>callback())}}var column=__webpack_require__(6),record=__webpack_require__(7);function plugin_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class plugin_SavedObjectsManagementPlugin{constructor(){plugin_defineProperty(this,"actionService",new SavedObjectsManagementActionService),plugin_defineProperty(this,"columnService",new SavedObjectsManagementColumnService),plugin_defineProperty(this,"serviceRegistry",new SavedObjectsManagementServiceRegistry)}setup(core,{home:home,management:management}){const actionSetup=this.actionService.setup(),columnSetup=this.columnService.setup();home&&home.featureCatalogue.register({id:"saved_objects",title:external_kbnSharedDeps_KbnI18n_.i18n.translate("savedObjectsManagement.objects.savedObjectsTitle",{defaultMessage:"Saved Objects"}),description:external_kbnSharedDeps_KbnI18n_.i18n.translate("savedObjectsManagement.objects.savedObjectsDescription",{defaultMessage:"Import, export, and manage your saved searches, visualizations, and dashboards."}),icon:"savedObjectsApp",path:"/app/management/kibana/objects",showOnHomePage:!1,category:public_.FeatureCatalogueCategory.ADMIN});return management.sections.section.kibana.registerApp({id:"objects",title:external_kbnSharedDeps_KbnI18n_.i18n.translate("savedObjectsManagement.managementSectionLabel",{defaultMessage:"Saved Objects"}),order:1,mount:async mountParams=>{const{mountManagementSection:mountManagementSection}=await __webpack_require__.e(3).then(__webpack_require__.bind(null,40));return mountManagementSection({core:core,serviceRegistry:this.serviceRegistry,mountParams:mountParams})}}),(async(registry,getStartServices)=>{const[,{dashboard:dashboard,visualizations:visualizations,discover:discover}]=await getStartServices();dashboard&&registry.register({id:"savedDashboards",title:"dashboards",service:dashboard.getSavedDashboardLoader()}),visualizations&&registry.register({id:"savedVisualizations",title:"visualizations",service:visualizations.savedVisualizationsLoader}),discover&&registry.register({id:"savedSearches",title:"searches",service:discover.savedSearchLoader})})(this.serviceRegistry,core.getStartServices),{actions:actionSetup,columns:columnSetup,serviceRegistry:this.serviceRegistry}}start(core,{data:data}){return{actions:this.actionService.start(),columns:this.columnService.start()}}}var lib=__webpack_require__(5),types=__webpack_require__(2);function public_plugin(initializerContext){return new plugin_SavedObjectsManagementPlugin}},function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,exports){module.exports=__kbnSharedDeps__.ReactRouterDom},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},function(module,exports){module.exports=__kbnSharedDeps__.SaferLodashSet},function(module,exports){module.exports=__kbnSharedDeps__.Moment}]);