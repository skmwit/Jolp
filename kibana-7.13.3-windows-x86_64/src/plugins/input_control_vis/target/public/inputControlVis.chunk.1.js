(window.inputControlVis_bundle_jsonpfunction=window.inputControlVis_bundle_jsonpfunction||[]).push([[1],[,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var memo,isOldIE=function(){return void 0===memo&&(memo=Boolean(window&&document&&document.all&&!window.atob)),memo},getTarget=function(){var memo={};return function(target){if(void 0===memo[target]){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}}(),stylesInDom=[];function getIndexByIdentifier(identifier){for(var result=-1,i=0;i<stylesInDom.length;i++)if(stylesInDom[i].identifier===identifier){result=i;break}return result}function modulesToDom(list,options){for(var idCountMap={},identifiers=[],i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],count=idCountMap[id]||0,identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier),obj={css:item[1],media:item[2],sourceMap:item[3]};-1!==index?(stylesInDom[index].references++,stylesInDom[index].updater(obj)):stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1}),identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style"),attributes=options.attributes||{};if(void 0===attributes.nonce){var nonce=__webpack_require__.nc;nonce&&(attributes.nonce=nonce)}if(Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])})),"function"==typeof options.insert)options.insert(style);else{var target=getTarget(options.insert||"head");if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");target.appendChild(style)}return style}var textStore,replaceText=(textStore=[],function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")});function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}function applyToTag(style,options,obj){var css=obj.css,media=obj.media,sourceMap=obj.sourceMap;if(media?style.setAttribute("media",media):style.removeAttribute("media"),sourceMap&&btoa&&(css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")),style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}var singleton=null,singletonCounter=0;function addStyle(obj,options){var style,update,remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else style=insertStyleElement(options),update=applyToTag.bind(null,style,options),remove=function(){!function(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style)}(style)};return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}module.exports=function(list,options){(options=options||{}).singleton||"boolean"==typeof options.singleton||(options.singleton=isOldIE());var lastIdentifiers=modulesToDom(list=list||[],options);return function(newList){if(newList=newList||[],"[object Array]"===Object.prototype.toString.call(newList)){for(var i=0;i<lastIdentifiers.length;i++){var index=getIndexByIdentifier(lastIdentifiers[i]);stylesInDom[index].references--}for(var newLastIdentifiers=modulesToDom(newList,options),_i=0;_i<lastIdentifiers.length;_i++){var _index=getIndexByIdentifier(lastIdentifiers[_i]);0===stylesInDom[_index].references&&(stylesInDom[_index].updater(),stylesInDom.splice(_index,1))}lastIdentifiers=newLastIdentifiers}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];return list.toString=function(){return this.map((function(item){var content=function(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=(sourceMap=cssMapping,base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64),"/*# ".concat(data," */")),sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}var sourceMap,base64,data;return[content].join("\n")}(item,useSourceMap);return item[2]?"@media ".concat(item[2]," {").concat(content,"}"):content})).join("")},list.i=function(modules,mediaQuery,dedupe){"string"==typeof modules&&(modules=[[null,modules,""]]);var alreadyImportedModules={};if(dedupe)for(var i=0;i<this.length;i++){var id=this[i][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);dedupe&&alreadyImportedModules[item[0]]||(mediaQuery&&(item[2]?item[2]="".concat(mediaQuery," and ").concat(item[2]):item[2]=mediaQuery),list.push(item))}},list}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CONTROL_TYPES})),__webpack_require__.d(__webpack_exports__,"g",(function(){return setControl})),__webpack_require__.d(__webpack_exports__,"b",(function(){return addControl})),__webpack_require__.d(__webpack_exports__,"d",(function(){return moveControl})),__webpack_require__.d(__webpack_exports__,"f",(function(){return removeControl})),__webpack_require__.d(__webpack_exports__,"e",(function(){return newControl})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getTitle}));const CONTROL_TYPES={LIST:"list",RANGE:"range"},setControl=(controls,controlIndex,control)=>[...controls.slice(0,controlIndex),control,...controls.slice(controlIndex+1)],addControl=(controls,control)=>[...controls,control],moveControl=(controls,controlIndex,direction)=>{let newIndex;if(newIndex=direction>=0?controlIndex+1:controlIndex-1,newIndex<0)return[...controls.slice(1),controls[0]];if(newIndex>=controls.length){const lastItemIndex=controls.length-1;return[controls[lastItemIndex],...controls.slice(0,lastItemIndex)]}{const swapped=controls.slice(),temp=swapped[newIndex];return swapped[newIndex]=swapped[controlIndex],swapped[controlIndex]=temp,swapped}},removeControl=(controls,controlIndex)=>[...controls.slice(0,controlIndex),...controls.slice(controlIndex+1)],getDefaultOptions=type=>{const defaultOptions={};switch(type){case CONTROL_TYPES.RANGE:defaultOptions.decimalPlaces=0,defaultOptions.step=1;break;case CONTROL_TYPES.LIST:defaultOptions.type="terms",defaultOptions.multiselect=!0,defaultOptions.dynamicOptions=!0,defaultOptions.size=5,defaultOptions.order="desc"}return defaultOptions},newControl=type=>({id:(new Date).getTime().toString(),indexPattern:"",fieldName:"",parent:"",label:"",type:type,options:getDefaultOptions(type)}),getTitle=(controlParams,controlIndex)=>{let title=`${controlParams.type}: ${controlIndex}`;return controlParams.label?title=""+controlParams.label:controlParams.fieldName&&(title=""+controlParams.fieldName),title}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getLineageMap})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getParentCandidates}));var external_kbnSharedDeps_Lodash_=__webpack_require__(7),external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);function getLineageMap(controlParamsList){const lineageMap=new Map;return controlParamsList.forEach(rootControlParams=>{const lineage=[rootControlParams.id],getLineage=controlParams=>{if(external_kbnSharedDeps_Lodash_default.a.has(controlParams,"parent")&&""!==controlParams.parent&&!lineage.includes(controlParams.parent)){lineage.push(controlParams.parent);const parent=(controlId=controlParams.parent,controlParamsList.find(controlParams=>controlParams.id===controlId));parent&&getLineage(parent)}var controlId};getLineage(rootControlParams),lineageMap.set(rootControlParams.id,lineage)}),lineageMap}var editor_utils=__webpack_require__(15);function getParentCandidates(controlParamsList,controlId,lineageMap){return controlParamsList.filter(controlParams=>{if(!controlParams.indexPattern||!controlParams.fieldName)return!1;const lineage=lineageMap.get(controlParams.id);return null==lineage||!lineage.includes(controlId)}).map((controlParams,controlIndex)=>({value:controlParams.id,text:Object(editor_utils.c)(controlParams,controlIndex)}))}},,,,,,,,,,function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(27);case"v7light":return __webpack_require__(29);case"v8dark":return __webpack_require__(31);case"v8light":return __webpack_require__(33)}},function(module,exports,__webpack_require__){var api=__webpack_require__(13),content=__webpack_require__(28);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(14)(!1)).push([module.i,".icvControlEditor__panel{z-index:1;margin-bottom:16px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(13),content=__webpack_require__(30);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(14)(!1)).push([module.i,".icvControlEditor__panel{z-index:1;margin-bottom:16px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(13),content=__webpack_require__(32);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(14)(!1)).push([module.i,".icvControlEditor__panel{z-index:1;margin-bottom:16px}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(13),content=__webpack_require__(34);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(14)(!1)).push([module.i,".icvControlEditor__panel{z-index:1;margin-bottom:16px}\n",""]),module.exports=exports},,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return controls_tab_ControlsTab}));var external_kbnSharedDeps_React_=__webpack_require__(1),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(9),external_kbnSharedDeps_KbnI18n_=__webpack_require__(0),external_kbnSharedDeps_ElasticEui_=__webpack_require__(8);const IndexPatternSelectFormRow=Object(external_kbnSharedDeps_KbnI18nReact_.injectI18n)((function(props){const{controlIndex:controlIndex,indexPatternId:indexPatternId,intl:intl,onChange:onChange}=props,selectId="indexPatternSelect-"+controlIndex;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{id:selectId,label:intl.formatMessage({id:"inputControl.editor.indexPatternSelect.patternLabel",defaultMessage:"Index Pattern"})},external_kbnSharedDeps_React_default.a.createElement(props.IndexPatternSelect,{placeholder:intl.formatMessage({id:"inputControl.editor.indexPatternSelect.patternPlaceholder",defaultMessage:"Select index pattern..."}),indexPatternId:indexPatternId,onChange:onChange,"data-test-subj":selectId}))}));var external_kbnSharedDeps_Lodash_=__webpack_require__(7),external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class field_select_FieldSelectUi extends external_kbnSharedDeps_React_.Component{constructor(props){super(props),_defineProperty(this,"hasUnmounted",void 0),_defineProperty(this,"loadFields",indexPatternId=>{this.setState({isLoading:!0,fields:[],indexPatternId:indexPatternId},this.debouncedLoad.bind(null,indexPatternId))}),_defineProperty(this,"debouncedLoad",external_kbnSharedDeps_Lodash_default.a.debounce(async indexPatternId=>{var _this$props$filterFie;if(!indexPatternId||0===indexPatternId.length)return;let indexPattern;try{indexPattern=await this.props.getIndexPattern(indexPatternId)}catch(err){return}if(this.hasUnmounted)return;if(indexPattern.id!==this.state.indexPatternId)return;const fieldsByTypeMap=new Map,fields=[];indexPattern.fields.filter(null!==(_this$props$filterFie=this.props.filterField)&&void 0!==_this$props$filterFie?_this$props$filterFie:()=>!0).forEach(field=>{var _fieldsByTypeMap$get;const fieldsList=null!==(_fieldsByTypeMap$get=fieldsByTypeMap.get(field.type))&&void 0!==_fieldsByTypeMap$get?_fieldsByTypeMap$get:[];fieldsList.push(field.name),fieldsByTypeMap.set(field.type,fieldsList)}),fieldsByTypeMap.forEach((fieldsList,fieldType)=>{fields.push({label:fieldType,options:fieldsList.sort().map(fieldName=>({value:fieldName,label:fieldName}))})}),fields.sort((a,b)=>a.label<b.label?-1:a.label>b.label?1:0),this.setState({isLoading:!1,fields:fields})},300)),_defineProperty(this,"onChange",selectedOptions=>{this.props.onChange(external_kbnSharedDeps_Lodash_default.a.get(selectedOptions,"0.value"))}),this.hasUnmounted=!1,this.state={isLoading:!1,fields:[],indexPatternId:props.indexPatternId}}componentWillUnmount(){this.hasUnmounted=!0}componentDidMount(){this.loadFields(this.state.indexPatternId)}UNSAFE_componentWillReceiveProps(nextProps){var _nextProps$indexPatte;this.props.indexPatternId!==nextProps.indexPatternId&&this.loadFields(null!==(_nextProps$indexPatte=nextProps.indexPatternId)&&void 0!==_nextProps$indexPatte?_nextProps$indexPatte:"")}render(){if(!this.props.indexPatternId||0===this.props.indexPatternId.trim().length)return null;const selectId="fieldSelect-"+this.props.controlIndex,selectedOptions=[],{intl:intl}=this.props;return this.props.fieldName&&selectedOptions.push({value:this.props.fieldName,label:this.props.fieldName}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{id:selectId,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"inputControl.editor.fieldSelect.fieldLabel",defaultMessage:"Field"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiComboBox,{placeholder:intl.formatMessage({id:"inputControl.editor.fieldSelect.selectFieldPlaceholder",defaultMessage:"Select field..."}),singleSelection:!0,isLoading:this.state.isLoading,options:this.state.fields,selectedOptions:selectedOptions,onChange:this.onChange,"data-test-subj":selectId}))}}const FieldSelect=Object(external_kbnSharedDeps_KbnI18nReact_.injectI18n)(field_select_FieldSelectUi);function filterField(field){return"number"===field.type}class range_control_editor_RangeControlEditor extends external_kbnSharedDeps_React_.Component{constructor(...args){var obj,key,value;super(...args),value={IndexPatternSelect:null},(key="state")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}componentDidMount(){this.getIndexPatternSelect()}async getIndexPatternSelect(){const[,{data:data}]=await this.props.deps.core.getStartServices();this.setState({IndexPatternSelect:data.ui.IndexPatternSelect})}render(){const stepSizeId="stepSize-"+this.props.controlIndex,decimalPlacesId="decimalPlaces-"+this.props.controlIndex;return null===this.state.IndexPatternSelect?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(IndexPatternSelectFormRow,{indexPatternId:this.props.controlParams.indexPattern,onChange:this.props.handleIndexPatternChange,controlIndex:this.props.controlIndex,IndexPatternSelect:this.state.IndexPatternSelect}),external_kbnSharedDeps_React_default.a.createElement(FieldSelect,{fieldName:this.props.controlParams.fieldName,indexPatternId:this.props.controlParams.indexPattern,filterField:filterField,onChange:this.props.handleFieldNameChange,getIndexPattern:this.props.getIndexPattern,controlIndex:this.props.controlIndex}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{id:stepSizeId,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"inputControl.editor.rangeControl.stepSizeLabel",defaultMessage:"Step Size"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldNumber,{value:this.props.controlParams.options.step,onChange:event=>{this.props.handleOptionsChange(this.props.controlIndex,"step",event.target.valueAsNumber)},"data-test-subj":"rangeControlSizeInput"+this.props.controlIndex})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{id:decimalPlacesId,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"inputControl.editor.rangeControl.decimalPlacesLabel",defaultMessage:"Decimal Places"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldNumber,{min:0,value:this.props.controlParams.options.decimalPlaces,onChange:event=>{this.props.handleOptionsChange(this.props.controlIndex,"decimalPlaces",event.target.valueAsNumber)},"data-test-subj":"rangeControlDecimalPlacesInput"+this.props.controlIndex})))}}function list_control_editor_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function list_control_editor_filterField(field){return Boolean(field.aggregatable)&&["number","boolean","date","ip","string"].includes(field.type)}class list_control_editor_ListControlEditor extends external_kbnSharedDeps_React_.PureComponent{constructor(...args){super(...args),list_control_editor_defineProperty(this,"isMounted",!1),list_control_editor_defineProperty(this,"state",{isLoadingFieldType:!0,isStringField:!1,prevFieldName:this.props.controlParams.fieldName,IndexPatternSelect:null}),list_control_editor_defineProperty(this,"componentDidUpdate",()=>{this.state.isLoadingFieldType&&this.loadIsStringField()}),list_control_editor_defineProperty(this,"loadIsStringField",async()=>{if(!this.props.controlParams.indexPattern||!this.props.controlParams.fieldName)return void this.setState({isLoadingFieldType:!1});let indexPattern;try{indexPattern=await this.props.getIndexPattern(this.props.controlParams.indexPattern)}catch(err){return}if(!this.isMounted)return;const field=indexPattern.fields.find(({name:name})=>name===this.props.controlParams.fieldName);field&&this.setState({isLoadingFieldType:!1,isStringField:"string"===field.type})}),list_control_editor_defineProperty(this,"renderOptions",()=>{var _this$props$controlPa,_this$props$controlPa2;if(this.state.isLoadingFieldType||!this.props.controlParams.fieldName)return;const options=[];if(this.props.parentCandidates&&this.props.parentCandidates.length>0){const parentCandidatesOptions=[{value:"",text:""},...this.props.parentCandidates];options.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{id:"parentSelect-"+this.props.controlIndex,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"inputControl.editor.listControl.parentLabel",defaultMessage:"Parent control"}),helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"inputControl.editor.listControl.parentDescription",defaultMessage:"Options are based on the value of parent control. Disabled if parent is not set."}),key:"parentSelect"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{options:parentCandidatesOptions,value:this.props.controlParams.parent,onChange:event=>{this.props.handleParentChange(this.props.controlIndex,event.target.value)}})))}options.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{id:"multiselect-"+this.props.controlIndex,key:"multiselect",helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"inputControl.editor.listControl.multiselectDescription",defaultMessage:"Allow multiple selection"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"inputControl.editor.listControl.multiselectLabel",defaultMessage:"Multiselect"}),checked:null===(_this$props$controlPa=this.props.controlParams.options.multiselect)||void 0===_this$props$controlPa||_this$props$controlPa,onChange:event=>{this.props.handleOptionsChange(this.props.controlIndex,"multiselect",event.target.checked)},"data-test-subj":"listControlMultiselectInput"})));const dynamicOptionsHelpText=this.state.isStringField?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"inputControl.editor.listControl.dynamicOptions.updateDescription",defaultMessage:"Update options in response to user input"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"inputControl.editor.listControl.dynamicOptions.stringFieldDescription",defaultMessage:'Only available for "string" fields'});return options.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{id:"dynamicOptions-"+this.props.controlIndex,key:"dynamicOptions",helpText:dynamicOptionsHelpText},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSwitch,{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"inputControl.editor.listControl.dynamicOptionsLabel",defaultMessage:"Dynamic Options"}),checked:null!==(_this$props$controlPa2=this.props.controlParams.options.dynamicOptions)&&void 0!==_this$props$controlPa2&&_this$props$controlPa2,onChange:event=>{this.props.handleOptionsChange(this.props.controlIndex,"dynamicOptions",event.target.checked)},disabled:!this.state.isStringField,"data-test-subj":"listControlDynamicOptionsSwitch"}))),this.props.controlParams.options.dynamicOptions&&this.state.isStringField||options.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{id:"size-"+this.props.controlIndex,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"inputControl.editor.listControl.sizeLabel",defaultMessage:"Size"}),key:"size",helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"inputControl.editor.listControl.sizeDescription",defaultMessage:"Number of options"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldNumber,{min:1,value:this.props.controlParams.options.size,onChange:event=>{this.props.handleOptionsChange(this.props.controlIndex,"size",event.target.valueAsNumber)},"data-test-subj":"listControlSizeInput"}))),options})}componentDidMount(){this.isMounted=!0,this.loadIsStringField(),this.getIndexPatternSelect()}componentWillUnmount(){this.isMounted=!1}async getIndexPatternSelect(){const[,{data:data}]=await this.props.deps.core.getStartServices();this.setState({IndexPatternSelect:data.ui.IndexPatternSelect})}render(){return null===this.state.IndexPatternSelect?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(IndexPatternSelectFormRow,{indexPatternId:this.props.controlParams.indexPattern,onChange:this.props.handleIndexPatternChange,controlIndex:this.props.controlIndex,IndexPatternSelect:this.state.IndexPatternSelect}),external_kbnSharedDeps_React_default.a.createElement(FieldSelect,{fieldName:this.props.controlParams.fieldName,indexPatternId:this.props.controlParams.indexPattern,filterField:list_control_editor_filterField,onChange:this.props.handleFieldNameChange,getIndexPattern:this.props.getIndexPattern,controlIndex:this.props.controlIndex}),this.renderOptions())}}list_control_editor_defineProperty(list_control_editor_ListControlEditor,"getDerivedStateFromProps",(nextProps,prevState)=>{const isNewFieldName=prevState.prevFieldName!==nextProps.controlParams.fieldName;return!prevState.isLoadingFieldType&&isNewFieldName?{prevFieldName:nextProps.controlParams.fieldName,isLoadingFieldType:!0}:null});var editor_utils=__webpack_require__(15);__webpack_require__(26);function control_editor_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class control_editor_ControlEditorUi extends external_kbnSharedDeps_React_.PureComponent{constructor(...args){super(...args),control_editor_defineProperty(this,"changeLabel",event=>{this.props.handleLabelChange(this.props.controlIndex,event.target.value)}),control_editor_defineProperty(this,"removeControl",()=>{this.props.handleRemoveControl(this.props.controlIndex)}),control_editor_defineProperty(this,"moveUpControl",()=>{this.props.moveControl(this.props.controlIndex,-1)}),control_editor_defineProperty(this,"moveDownControl",()=>{this.props.moveControl(this.props.controlIndex,1)}),control_editor_defineProperty(this,"changeIndexPattern",indexPatternId=>{this.props.handleIndexPatternChange(this.props.controlIndex,indexPatternId)}),control_editor_defineProperty(this,"changeFieldName",fieldName=>{this.props.handleFieldNameChange(this.props.controlIndex,fieldName)})}renderEditor(){let controlEditor=null;switch(this.props.controlParams.type){case editor_utils.a.LIST:controlEditor=external_kbnSharedDeps_React_default.a.createElement(list_control_editor_ListControlEditor,{controlIndex:this.props.controlIndex,controlParams:this.props.controlParams,handleIndexPatternChange:this.changeIndexPattern,handleFieldNameChange:this.changeFieldName,getIndexPattern:this.props.getIndexPattern,handleOptionsChange:this.props.handleOptionsChange,parentCandidates:this.props.parentCandidates,handleParentChange:this.props.handleParentChange,deps:this.props.deps});break;case editor_utils.a.RANGE:controlEditor=external_kbnSharedDeps_React_default.a.createElement(range_control_editor_RangeControlEditor,{controlIndex:this.props.controlIndex,controlParams:this.props.controlParams,handleIndexPatternChange:this.changeIndexPattern,handleFieldNameChange:this.changeFieldName,getIndexPattern:this.props.getIndexPattern,handleOptionsChange:this.props.handleOptionsChange,deps:this.props.deps});break;default:throw new Error("Unhandled control editor type "+this.props.controlParams.type)}const labelId="controlLabel"+this.props.controlIndex;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiForm,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{id:labelId,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"inputControl.editor.controlEditor.controlLabel",defaultMessage:"Control Label"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFieldText,{value:this.props.controlParams.label,onChange:this.changeLabel})),controlEditor)}renderEditorButtons(){return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{"aria-label":this.props.intl.formatMessage({id:"inputControl.editor.controlEditor.moveControlUpAriaLabel",defaultMessage:"Move control up"}),color:"primary",onClick:this.moveUpControl,iconType:"sortUp","data-test-subj":"inputControlEditorMoveUpControl"+this.props.controlIndex}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{"aria-label":this.props.intl.formatMessage({id:"inputControl.editor.controlEditor.moveControlDownAriaLabel",defaultMessage:"Move control down"}),color:"primary",onClick:this.moveDownControl,iconType:"sortDown","data-test-subj":"inputControlEditorMoveDownControl"+this.props.controlIndex}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButtonIcon,{"aria-label":this.props.intl.formatMessage({id:"inputControl.editor.controlEditor.removeControlAriaLabel",defaultMessage:"Remove control"}),color:"danger",onClick:this.removeControl,iconType:"cross","data-test-subj":"inputControlEditorRemoveControl"+this.props.controlIndex}))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,{grow:!1,className:"icvControlEditor__panel"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiAccordion,{id:"controlEditorAccordion",buttonContent:Object(editor_utils.c)(this.props.controlParams,this.props.controlIndex),extraAction:this.renderEditorButtons(),initialIsOpen:!0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSpacer,{size:"s"}),this.renderEditor()))}}const ControlEditor=Object(external_kbnSharedDeps_KbnI18nReact_.injectI18n)(control_editor_ControlEditorUi);var lineage=__webpack_require__(16);function controls_tab_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class controls_tab_ControlsTab extends external_kbnSharedDeps_React_.PureComponent{constructor(...args){super(...args),controls_tab_defineProperty(this,"state",{type:editor_utils.a.LIST}),controls_tab_defineProperty(this,"getIndexPattern",async indexPatternId=>{const[,startDeps]=await this.props.deps.core.getStartServices();return await startDeps.data.indexPatterns.get(indexPatternId)}),controls_tab_defineProperty(this,"onChange",value=>this.props.setValue("controls",value)),controls_tab_defineProperty(this,"handleLabelChange",(controlIndex,label)=>{const updatedControl={...this.props.stateParams.controls[controlIndex],label:label};this.onChange(Object(editor_utils.g)(this.props.stateParams.controls,controlIndex,updatedControl))}),controls_tab_defineProperty(this,"handleIndexPatternChange",(controlIndex,indexPattern)=>{const updatedControl={...this.props.stateParams.controls[controlIndex],indexPattern:indexPattern,fieldName:""};this.onChange(Object(editor_utils.g)(this.props.stateParams.controls,controlIndex,updatedControl))}),controls_tab_defineProperty(this,"handleFieldNameChange",(controlIndex,fieldName)=>{const updatedControl={...this.props.stateParams.controls[controlIndex],fieldName:fieldName};this.onChange(Object(editor_utils.g)(this.props.stateParams.controls,controlIndex,updatedControl))}),controls_tab_defineProperty(this,"handleOptionsChange",(controlIndex,optionName,value)=>{const control=this.props.stateParams.controls[controlIndex],updatedControl={...control,options:{...control.options,[optionName]:value}};this.onChange(Object(editor_utils.g)(this.props.stateParams.controls,controlIndex,updatedControl))}),controls_tab_defineProperty(this,"handleRemoveControl",controlIndex=>{this.onChange(Object(editor_utils.f)(this.props.stateParams.controls,controlIndex))}),controls_tab_defineProperty(this,"moveControl",(controlIndex,direction)=>{this.onChange(Object(editor_utils.d)(this.props.stateParams.controls,controlIndex,direction))}),controls_tab_defineProperty(this,"handleAddControl",()=>{this.onChange(Object(editor_utils.b)(this.props.stateParams.controls,Object(editor_utils.e)(this.state.type)))}),controls_tab_defineProperty(this,"handleParentChange",(controlIndex,parent)=>{const updatedControl={...this.props.stateParams.controls[controlIndex],parent:parent};this.onChange(Object(editor_utils.g)(this.props.stateParams.controls,controlIndex,updatedControl))})}renderControls(){const lineageMap=Object(lineage.a)(this.props.stateParams.controls);return this.props.stateParams.controls.map((controlParams,controlIndex)=>{const parentCandidates=Object(lineage.b)(this.props.stateParams.controls,controlParams.id,lineageMap);return external_kbnSharedDeps_React_default.a.createElement(ControlEditor,{key:controlParams.id,controlIndex:controlIndex,controlParams:controlParams,handleLabelChange:this.handleLabelChange,moveControl:this.moveControl,handleRemoveControl:this.handleRemoveControl,handleIndexPatternChange:this.handleIndexPatternChange,handleFieldNameChange:this.handleFieldNameChange,getIndexPattern:this.getIndexPattern,handleOptionsChange:this.handleOptionsChange,parentCandidates:parentCandidates,handleParentChange:this.handleParentChange,deps:this.props.deps})})}render(){return external_kbnSharedDeps_React_default.a.createElement("div",null,this.renderControls(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiPanel,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexGroup,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{id:"selectControlType"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiSelect,{"data-test-subj":"selectControlType",options:[{value:editor_utils.a.RANGE,text:external_kbnSharedDeps_KbnI18n_.i18n.translate("inputControl.editor.controlsTab.select.rangeDropDownOptionLabel",{defaultMessage:"Range slider"})},{value:editor_utils.a.LIST,text:external_kbnSharedDeps_KbnI18n_.i18n.translate("inputControl.editor.controlsTab.select.listDropDownOptionLabel",{defaultMessage:"Options list"})}],value:this.state.type,onChange:event=>this.setState({type:event.target.value}),"aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("inputControl.editor.controlsTab.select.controlTypeAriaLabel",{defaultMessage:"Select control type"})}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFlexItem,{grow:!1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiFormRow,{id:"addControl"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{fill:!0,onClick:this.handleAddControl,iconType:"plusInCircle","data-test-subj":"inputControlEditorAddBtn","aria-label":external_kbnSharedDeps_KbnI18n_.i18n.translate("inputControl.editor.controlsTab.select.addControlAriaLabel",{defaultMessage:"Add control"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"inputControl.editor.controlsTab.addButtonLabel",defaultMessage:"Add"})))))))}}}]]);