(window.visualize_bundle_jsonpfunction=window.visualize_bundle_jsonpfunction||[]).push([[1],Array(32).concat([function(module,exports,__webpack_require__){"use strict";var memo,isOldIE=function(){return void 0===memo&&(memo=Boolean(window&&document&&document.all&&!window.atob)),memo},getTarget=function(){var memo={};return function(target){if(void 0===memo[target]){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}}(),stylesInDom=[];function getIndexByIdentifier(identifier){for(var result=-1,i=0;i<stylesInDom.length;i++)if(stylesInDom[i].identifier===identifier){result=i;break}return result}function modulesToDom(list,options){for(var idCountMap={},identifiers=[],i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],count=idCountMap[id]||0,identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier),obj={css:item[1],media:item[2],sourceMap:item[3]};-1!==index?(stylesInDom[index].references++,stylesInDom[index].updater(obj)):stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1}),identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style"),attributes=options.attributes||{};if(void 0===attributes.nonce){var nonce=__webpack_require__.nc;nonce&&(attributes.nonce=nonce)}if(Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])})),"function"==typeof options.insert)options.insert(style);else{var target=getTarget(options.insert||"head");if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");target.appendChild(style)}return style}var textStore,replaceText=(textStore=[],function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")});function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}function applyToTag(style,options,obj){var css=obj.css,media=obj.media,sourceMap=obj.sourceMap;if(media?style.setAttribute("media",media):style.removeAttribute("media"),sourceMap&&btoa&&(css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")),style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}var singleton=null,singletonCounter=0;function addStyle(obj,options){var style,update,remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else style=insertStyleElement(options),update=applyToTag.bind(null,style,options),remove=function(){!function(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style)}(style)};return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}module.exports=function(list,options){(options=options||{}).singleton||"boolean"==typeof options.singleton||(options.singleton=isOldIE());var lastIdentifiers=modulesToDom(list=list||[],options);return function(newList){if(newList=newList||[],"[object Array]"===Object.prototype.toString.call(newList)){for(var i=0;i<lastIdentifiers.length;i++){var index=getIndexByIdentifier(lastIdentifiers[i]);stylesInDom[index].references--}for(var newLastIdentifiers=modulesToDom(newList,options),_i=0;_i<lastIdentifiers.length;_i++){var _index=getIndexByIdentifier(lastIdentifiers[_i]);0===stylesInDom[_index].references&&(stylesInDom[_index].updater(),stylesInDom.splice(_index,1))}lastIdentifiers=newLastIdentifiers}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];return list.toString=function(){return this.map((function(item){var content=function(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=(sourceMap=cssMapping,base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64),"/*# ".concat(data," */")),sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}var sourceMap,base64,data;return[content].join("\n")}(item,useSourceMap);return item[2]?"@media ".concat(item[2]," {").concat(content,"}"):content})).join("")},list.i=function(modules,mediaQuery,dedupe){"string"==typeof modules&&(modules=[[null,modules,""]]);var alreadyImportedModules={};if(dedupe)for(var i=0;i<this.length;i++){var id=this[i][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);dedupe&&alreadyImportedModules[item[0]]||(mediaQuery&&(item[2]?item[2]="".concat(mediaQuery," and ").concat(item[2]):item[2]=mediaQuery),list.push(item))}},list}},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(61);case"v7light":return __webpack_require__(63);case"v8dark":return __webpack_require__(65);case"v8light":return __webpack_require__(67)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__webpack_require__(19);exports.default=function(effect){react_1.useEffect(effect,[])}},function(module,exports,__webpack_require__){"use strict";var ReflectOwnKeys,R="object"==typeof Reflect?Reflect:null,ReflectApply=R&&"function"==typeof R.apply?R.apply:function(target,receiver,args){return Function.prototype.apply.call(target,receiver,args)};ReflectOwnKeys=R&&"function"==typeof R.ownKeys?R.ownKeys:Object.getOwnPropertySymbols?function(target){return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))}:function(target){return Object.getOwnPropertyNames(target)};var NumberIsNaN=Number.isNaN||function(value){return value!=value};function EventEmitter(){EventEmitter.init.call(this)}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function $getMaxListeners(that){return void 0===that._maxListeners?EventEmitter.defaultMaxListeners:that._maxListeners}function _addListener(target,type,listener,prepend){var m,events,existing,warning;if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener);if(void 0===(events=target._events)?(events=target._events=Object.create(null),target._eventsCount=0):(void 0!==events.newListener&&(target.emit("newListener",type,listener.listener?listener.listener:listener),events=target._events),existing=events[type]),void 0===existing)existing=events[type]=listener,++target._eventsCount;else if("function"==typeof existing?existing=events[type]=prepend?[listener,existing]:[existing,listener]:prepend?existing.unshift(listener):existing.push(listener),(m=$getMaxListeners(target))>0&&existing.length>m&&!existing.warned){existing.warned=!0;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+" "+String(type)+" listeners added. Use emitter.setMaxListeners() to increase limit");w.name="MaxListenersExceededWarning",w.emitter=target,w.type=type,w.count=existing.length,warning=w,console&&console.warn&&console.warn(warning)}return target}function onceWrapper(){for(var args=[],i=0;i<arguments.length;i++)args.push(arguments[i]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,ReflectApply(this.listener,this.target,args))}function _onceWrap(target,type,listener){var state={fired:!1,wrapFn:void 0,target:target,type:type,listener:listener},wrapped=onceWrapper.bind(state);return wrapped.listener=listener,state.wrapFn=wrapped,wrapped}function _listeners(target,type,unwrap){var events=target._events;if(void 0===events)return[];var evlistener=events[type];return void 0===evlistener?[]:"function"==typeof evlistener?unwrap?[evlistener.listener||evlistener]:[evlistener]:unwrap?function(arr){for(var ret=new Array(arr.length),i=0;i<ret.length;++i)ret[i]=arr[i].listener||arr[i];return ret}(evlistener):arrayClone(evlistener,evlistener.length)}function listenerCount(type){var events=this._events;if(void 0!==events){var evlistener=events[type];if("function"==typeof evlistener)return 1;if(void 0!==evlistener)return evlistener.length}return 0}function arrayClone(arr,n){for(var copy=new Array(n),i=0;i<n;++i)copy[i]=arr[i];return copy}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(arg){if("number"!=typeof arg||arg<0||NumberIsNaN(arg))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+arg+".");defaultMaxListeners=arg}}),EventEmitter.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function(n){if("number"!=typeof n||n<0||NumberIsNaN(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this},EventEmitter.prototype.getMaxListeners=function(){return $getMaxListeners(this)},EventEmitter.prototype.emit=function(type){for(var args=[],i=1;i<arguments.length;i++)args.push(arguments[i]);var doError="error"===type,events=this._events;if(void 0!==events)doError=doError&&void 0===events.error;else if(!doError)return!1;if(doError){var er;if(args.length>0&&(er=args[0]),er instanceof Error)throw er;var err=new Error("Unhandled error."+(er?" ("+er.message+")":""));throw err.context=er,err}var handler=events[type];if(void 0===handler)return!1;if("function"==typeof handler)ReflectApply(handler,this,args);else{var len=handler.length,listeners=arrayClone(handler,len);for(i=0;i<len;++i)ReflectApply(listeners[i],this,args)}return!0},EventEmitter.prototype.addListener=function(type,listener){return _addListener(this,type,listener,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(type,listener){return _addListener(this,type,listener,!0)},EventEmitter.prototype.once=function(type,listener){if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener);return this.on(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.prependOnceListener=function(type,listener){if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener);return this.prependListener(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.removeListener=function(type,listener){var list,events,position,i,originalListener;if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener);if(void 0===(events=this._events))return this;if(void 0===(list=events[type]))return this;if(list===listener||list.listener===listener)0==--this._eventsCount?this._events=Object.create(null):(delete events[type],events.removeListener&&this.emit("removeListener",type,list.listener||listener));else if("function"!=typeof list){for(position=-1,i=list.length-1;i>=0;i--)if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener,position=i;break}if(position<0)return this;0===position?list.shift():function(list,index){for(;index+1<list.length;index++)list[index]=list[index+1];list.pop()}(list,position),1===list.length&&(events[type]=list[0]),void 0!==events.removeListener&&this.emit("removeListener",type,originalListener||listener)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function(type){var listeners,events,i;if(void 0===(events=this._events))return this;if(void 0===events.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==events[type]&&(0==--this._eventsCount?this._events=Object.create(null):delete events[type]),this;if(0===arguments.length){var key,keys=Object.keys(events);for(i=0;i<keys.length;++i)"removeListener"!==(key=keys[i])&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(listeners=events[type]))this.removeListener(type,listeners);else if(void 0!==listeners)for(i=listeners.length-1;i>=0;i--)this.removeListener(type,listeners[i]);return this},EventEmitter.prototype.listeners=function(type){return _listeners(this,type,!0)},EventEmitter.prototype.rawListeners=function(type){return _listeners(this,type,!1)},EventEmitter.listenerCount=function(emitter,type){return"function"==typeof emitter.listenerCount?emitter.listenerCount(type):listenerCount.call(emitter,type)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]}},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(38);case"v7light":return __webpack_require__(40);case"v8dark":return __webpack_require__(42);case"v8light":return __webpack_require__(44)}},function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(39);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".visAppWrapper{display:flex;flex-direction:column;flex-grow:1}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(41);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".visAppWrapper{display:flex;flex-direction:column;flex-grow:1}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(43);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".visAppWrapper{display:flex;flex-direction:column;flex-grow:1}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(45);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".visAppWrapper{display:flex;flex-direction:column;flex-grow:1}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(47);case"v7light":return __webpack_require__(49);case"v8dark":return __webpack_require__(51);case"v8light":return __webpack_require__(53)}},function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(48);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".visListingTable__typeImage,.visListingTable__typeIcon{margin-right:8px;position:relative;top:-1px}.visListingTable__typeImage{width:16px;height:16px}.visListingTable__experimentalIcon{width:24px;vertical-align:baseline;padding:0 8px;margin-left:8px}.visListingTable__titleLink{text-align:left}.visListingCallout{max-width:1000px;width:100%;margin-left:auto;margin-right:auto;padding:16px 16px 0 16px}.visListingCallout__link{text-decoration:underline}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(50);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".visListingTable__typeImage,.visListingTable__typeIcon{margin-right:8px;position:relative;top:-1px}.visListingTable__typeImage{width:16px;height:16px}.visListingTable__experimentalIcon{width:24px;vertical-align:baseline;padding:0 8px;margin-left:8px}.visListingTable__titleLink{text-align:left}.visListingCallout{max-width:1000px;width:100%;margin-left:auto;margin-right:auto;padding:16px 16px 0 16px}.visListingCallout__link{text-decoration:underline}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(52);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".visListingTable__typeImage,.visListingTable__typeIcon{margin-right:8px;position:relative;top:-1px}.visListingTable__typeImage{width:16px;height:16px}.visListingTable__experimentalIcon{width:24px;vertical-align:baseline;padding:0 8px;margin-left:8px}.visListingTable__titleLink{text-align:left}.visListingCallout{max-width:1000px;width:100%;margin-left:auto;margin-right:auto;padding:16px 16px 0 16px}.visListingCallout__link{text-decoration:underline}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(54);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".visListingTable__typeImage,.visListingTable__typeIcon{margin-right:8px;position:relative;top:-1px}.visListingTable__typeImage{width:16px;height:16px}.visListingTable__experimentalIcon{width:24px;vertical-align:baseline;padding:0 8px;margin-left:8px}.visListingTable__titleLink{text-align:left}.visListingCallout{max-width:1000px;width:100%;margin-left:auto;margin-right:auto;padding:16px 16px 0 16px}.visListingCallout__link{text-decoration:underline}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){"use strict";const strictUriEncode=__webpack_require__(56),decodeComponent=__webpack_require__(57),splitOnFirst=__webpack_require__(58);function validateArrayFormatSeparator(value){if("string"!=typeof value||1!==value.length)throw new TypeError("arrayFormatSeparator must be single character string")}function encode(value,options){return options.encode?options.strict?strictUriEncode(value):encodeURIComponent(value):value}function decode(value,options){return options.decode?decodeComponent(value):value}function removeHash(input){const hashStart=input.indexOf("#");return-1!==hashStart&&(input=input.slice(0,hashStart)),input}function extract(input){const queryStart=(input=removeHash(input)).indexOf("?");return-1===queryStart?"":input.slice(queryStart+1)}function parseValue(value,options){return options.parseNumbers&&!Number.isNaN(Number(value))&&"string"==typeof value&&""!==value.trim()?value=Number(value):!options.parseBooleans||null===value||"true"!==value.toLowerCase()&&"false"!==value.toLowerCase()||(value="true"===value.toLowerCase()),value}function parse(input,options){validateArrayFormatSeparator((options=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},options)).arrayFormatSeparator);const formatter=function(options){let result;switch(options.arrayFormat){case"index":return(key,value,accumulator)=>{result=/\[(\d*)\]$/.exec(key),key=key.replace(/\[\d*\]$/,""),result?(void 0===accumulator[key]&&(accumulator[key]={}),accumulator[key][result[1]]=value):accumulator[key]=value};case"bracket":return(key,value,accumulator)=>{result=/(\[\])$/.exec(key),key=key.replace(/\[\]$/,""),result?void 0!==accumulator[key]?accumulator[key]=[].concat(accumulator[key],value):accumulator[key]=[value]:accumulator[key]=value};case"comma":case"separator":return(key,value,accumulator)=>{const newValue="string"==typeof value&&value.split("").indexOf(options.arrayFormatSeparator)>-1?value.split(options.arrayFormatSeparator).map(item=>decode(item,options)):null===value?value:decode(value,options);accumulator[key]=newValue};default:return(key,value,accumulator)=>{void 0!==accumulator[key]?accumulator[key]=[].concat(accumulator[key],value):accumulator[key]=value}}}(options),ret=Object.create(null);if("string"!=typeof input)return ret;if(!(input=input.trim().replace(/^[?#&]/,"")))return ret;for(const param of input.split("&")){let[key,value]=splitOnFirst(options.decode?param.replace(/\+/g," "):param,"=");value=void 0===value?null:["comma","separator"].includes(options.arrayFormat)?value:decode(value,options),formatter(decode(key,options),value,ret)}for(const key of Object.keys(ret)){const value=ret[key];if("object"==typeof value&&null!==value)for(const k of Object.keys(value))value[k]=parseValue(value[k],options);else ret[key]=parseValue(value,options)}return!1===options.sort?ret:(!0===options.sort?Object.keys(ret).sort():Object.keys(ret).sort(options.sort)).reduce((result,key)=>{const value=ret[key];return Boolean(value)&&"object"==typeof value&&!Array.isArray(value)?result[key]=function keysSorter(input){return Array.isArray(input)?input.sort():"object"==typeof input?keysSorter(Object.keys(input)).sort((a,b)=>Number(a)-Number(b)).map(key=>input[key]):input}(value):result[key]=value,result},Object.create(null))}exports.extract=extract,exports.parse=parse,exports.stringify=(object,options)=>{if(!object)return"";validateArrayFormatSeparator((options=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},options)).arrayFormatSeparator);const shouldFilter=key=>options.skipNull&&null==object[key]||options.skipEmptyString&&""===object[key],formatter=function(options){switch(options.arrayFormat){case"index":return key=>(result,value)=>{const index=result.length;return void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,[encode(key,options),"[",index,"]"].join("")]:[...result,[encode(key,options),"[",encode(index,options),"]=",encode(value,options)].join("")]};case"bracket":return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,[encode(key,options),"[]"].join("")]:[...result,[encode(key,options),"[]=",encode(value,options)].join("")];case"comma":case"separator":return key=>(result,value)=>null==value||0===value.length?result:0===result.length?[[encode(key,options),"=",encode(value,options)].join("")]:[[result,encode(value,options)].join(options.arrayFormatSeparator)];default:return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,encode(key,options)]:[...result,[encode(key,options),"=",encode(value,options)].join("")]}}(options),objectCopy={};for(const key of Object.keys(object))shouldFilter(key)||(objectCopy[key]=object[key]);const keys=Object.keys(objectCopy);return!1!==options.sort&&keys.sort(options.sort),keys.map(key=>{const value=object[key];return void 0===value?"":null===value?encode(key,options):Array.isArray(value)?value.reduce(formatter(key),[]).join("&"):encode(key,options)+"="+encode(value,options)}).filter(x=>x.length>0).join("&")},exports.parseUrl=(input,options)=>{options=Object.assign({decode:!0},options);const[url,hash]=splitOnFirst(input,"#");return Object.assign({url:url.split("?")[0]||"",query:parse(extract(input),options)},options&&options.parseFragmentIdentifier&&hash?{fragmentIdentifier:decode(hash,options)}:{})},exports.stringifyUrl=(input,options)=>{options=Object.assign({encode:!0,strict:!0},options);const url=removeHash(input.url).split("?")[0]||"",queryFromUrl=exports.extract(input.url),parsedQueryFromUrl=exports.parse(queryFromUrl,{sort:!1}),query=Object.assign(parsedQueryFromUrl,input.query);let queryString=exports.stringify(query,options);queryString&&(queryString="?"+queryString);let hash=function(url){let hash="";const hashStart=url.indexOf("#");return-1!==hashStart&&(hash=url.slice(hashStart)),hash}(input.url);return input.fragmentIdentifier&&(hash="#"+encode(input.fragmentIdentifier,options)),`${url}${queryString}${hash}`}},function(module,exports,__webpack_require__){"use strict";module.exports=str=>encodeURIComponent(str).replace(/[!'()*]/g,x=>"%"+x.charCodeAt(0).toString(16).toUpperCase())},function(module,exports,__webpack_require__){"use strict";var singleMatcher=new RegExp("%[a-f0-9]{2}","gi"),multiMatcher=new RegExp("(%[a-f0-9]{2})+","gi");function decodeComponents(components,split){try{return decodeURIComponent(components.join(""))}catch(err){}if(1===components.length)return components;split=split||1;var left=components.slice(0,split),right=components.slice(split);return Array.prototype.concat.call([],decodeComponents(left),decodeComponents(right))}function decode(input){try{return decodeURIComponent(input)}catch(err){for(var tokens=input.match(singleMatcher),i=1;i<tokens.length;i++)tokens=(input=decodeComponents(tokens,i).join("")).match(singleMatcher);return input}}module.exports=function(encodedURI){if("string"!=typeof encodedURI)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof encodedURI+"`");try{return encodedURI=encodedURI.replace(/\+/g," "),decodeURIComponent(encodedURI)}catch(err){return function(input){for(var replaceMap={"%FE%FF":"��","%FF%FE":"��"},match=multiMatcher.exec(input);match;){try{replaceMap[match[0]]=decodeURIComponent(match[0])}catch(err){var result=decode(match[0]);result!==match[0]&&(replaceMap[match[0]]=result)}match=multiMatcher.exec(input)}replaceMap["%C2"]="�";for(var entries=Object.keys(replaceMap),i=0;i<entries.length;i++){var key=entries[i];input=input.replace(new RegExp(key,"g"),replaceMap[key])}return input}(encodedURI)}}},function(module,exports,__webpack_require__){"use strict";module.exports=(string,separator)=>{if("string"!=typeof string||"string"!=typeof separator)throw new TypeError("Expected the arguments to be of type `string`");if(""===separator)return[string];const separatorIndex=string.indexOf(separator);return-1===separatorIndex?[string]:[string.slice(0,separatorIndex),string.slice(separatorIndex+separator.length)]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var useEffectOnce_1=__webpack_require__(26).__importDefault(__webpack_require__(35));exports.default=function(fn){useEffectOnce_1.default((function(){fn()}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=__webpack_require__(26),react_1=__webpack_require__(19),useEffectOnce_1=tslib_1.__importDefault(__webpack_require__(35));exports.default=function(fn){var fnRef=react_1.useRef(fn);fnRef.current=fn,useEffectOnce_1.default((function(){return function(){return fnRef.current()}}))}},function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(62);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".visEditor{flex:1 1 auto;display:flex;flex-direction:column;height:100%}.visEditor>*{flex-shrink:0}@media only screen and (max-width: 574px){.visEditor .visualization{min-height:240px}}@media only screen and (min-width: 575px) and (max-width: 767px){.visEditor .visualization{min-height:240px}}@media only screen and (min-width: 768px) and (max-width: 991px){.visEditor .visualization{min-height:240px}}.visEditor>.visualize{height:100%;flex:1 1 auto;display:flex;z-index:0}.visEditor__content{flex:1 1 auto;display:flex;flex-direction:column;width:100%;z-index:0}.visEditor__content>*{flex-shrink:0}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(64);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".visEditor{flex:1 1 auto;display:flex;flex-direction:column;height:100%}.visEditor>*{flex-shrink:0}@media only screen and (max-width: 574px){.visEditor .visualization{min-height:240px}}@media only screen and (min-width: 575px) and (max-width: 767px){.visEditor .visualization{min-height:240px}}@media only screen and (min-width: 768px) and (max-width: 991px){.visEditor .visualization{min-height:240px}}.visEditor>.visualize{height:100%;flex:1 1 auto;display:flex;z-index:0}.visEditor__content{flex:1 1 auto;display:flex;flex-direction:column;width:100%;z-index:0}.visEditor__content>*{flex-shrink:0}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(66);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".visEditor{flex:1 1 auto;display:flex;flex-direction:column;height:100%}.visEditor>*{flex-shrink:0}@media only screen and (max-width: 574px){.visEditor .visualization{min-height:240px}}@media only screen and (min-width: 575px) and (max-width: 767px){.visEditor .visualization{min-height:240px}}@media only screen and (min-width: 768px) and (max-width: 991px){.visEditor .visualization{min-height:240px}}.visEditor>.visualize{height:100%;flex:1 1 auto;display:flex;z-index:0}.visEditor__content{flex:1 1 auto;display:flex;flex-direction:column;width:100%;z-index:0}.visEditor__content>*{flex-shrink:0}\n",""]),module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(32),content=__webpack_require__(68);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){(exports=__webpack_require__(33)(!1)).push([module.i,".visEditor{flex:1 1 auto;display:flex;flex-direction:column;height:100%}.visEditor>*{flex-shrink:0}@media only screen and (max-width: 574px){.visEditor .visualization{min-height:240px}}@media only screen and (min-width: 575px) and (max-width: 767px){.visEditor .visualization{min-height:240px}}@media only screen and (min-width: 768px) and (max-width: 991px){.visEditor .visualization{min-height:240px}}.visEditor>.visualize{height:100%;flex:1 1 auto;display:flex;z-index:0}.visEditor__content{flex:1 1 auto;display:flex;flex-direction:column;width:100%;z-index:0}.visEditor__content>*{flex-shrink:0}\n",""]),module.exports=exports},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"renderApp",(function(){return renderApp}));var external_kbnSharedDeps_React_=__webpack_require__(19),external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_),external_kbnSharedDeps_ReactDom_=__webpack_require__(27),external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_),external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(24),public_=__webpack_require__(20),data_public_=(__webpack_require__(37),__webpack_require__(6)),external_kbnSharedDeps_ElasticEui_=(__webpack_require__(46),__webpack_require__(22)),external_kbnSharedDeps_KbnI18n_=__webpack_require__(5),external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(23),useUnmount=__webpack_require__(60),useUnmount_default=__webpack_require__.n(useUnmount),useMount=__webpack_require__(59),useMount_default=__webpack_require__.n(useMount),visualizations_public_=__webpack_require__(25),visualize_constants=__webpack_require__(0),kibanaUtils_public_=__webpack_require__(1),public_services=__webpack_require__(2);const getVisualizeListItemLink=(application,kbnUrlStateStorage,editApp,editUrl)=>{let url=application.getUrlForApp(null!=editApp?editApp:visualize_constants.a,{path:editApp?editUrl:"#"+editUrl});const useHash=Object(public_services.a)().get("state:storeInSessionStorage"),globalStateInUrl=kbnUrlStateStorage.get("_g")||{};return url=Object(kibanaUtils_public_.setStateToKbnUrl)("_g",globalStateInUrl,{useHash:useHash},url),url},getTableColumns=(application,kbnUrlStateStorage,taggingApi)=>[{field:"title",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.listing.table.titleColumnName",{defaultMessage:"Title"}),sortable:!0,render:(field,{editApp:editApp,editUrl:editUrl,title:title,error:error})=>error?field:external_kbnSharedDeps_React_default.a.createElement(public_.RedirectAppLinks,{application:application,className:"visListingTable__titleLink"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:getVisualizeListItemLink(application,kbnUrlStateStorage,editApp,editUrl),"data-test-subj":"visListingTitleLink-"+title.split(" ").join("-")},field))},{field:"typeTitle",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.listing.table.typeColumnName",{defaultMessage:"Type"}),sortable:!0,render:(field,record)=>{return record.error?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBadge,{iconType:"alert",color:"warning"},record.error):external_kbnSharedDeps_React_default.a.createElement("span",null,(item=>{let icon;return icon=item.image?external_kbnSharedDeps_React_default.a.createElement("img",{className:"visListingTable__typeImage","aria-hidden":"true",alt:"",src:item.image}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiIcon,{className:"visListingTable__typeIcon","aria-hidden":"true",type:item.icon||"empty",size:"m"}),icon})(record),record.typeTitle,"beta"===(item=record).stage?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBetaBadge,{className:"visListingTable__betaIcon",label:"B",title:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.listing.betaTitle",{defaultMessage:"Beta"}),tooltipContent:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.listing.betaTooltip",{defaultMessage:"This visualization is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features"})}):"experimental"===item.stage?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiBetaBadge,{className:"visListingTable__experimentalIcon",label:"E",title:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.listing.experimentalTitle",{defaultMessage:"Experimental"}),tooltipContent:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.listing.experimentalTooltip",{defaultMessage:"This visualization might be changed or removed in a future release and is not subject to the support SLA."})}):void 0);var item}},{field:"description",name:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.listing.table.descriptionColumnName",{defaultMessage:"Description"}),sortable:!0,render:(field,record)=>external_kbnSharedDeps_React_default.a.createElement("span",null,record.description)},...taggingApi?[taggingApi.ui.getTableColumnDefinition()]:[]];var savedObjects_public_=__webpack_require__(28),presentationUtil_public_=__webpack_require__(29);const defaultEditText=external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.editor.defaultEditBreadcrumbText",{defaultMessage:"Edit visualization"});function getLandingBreadcrumbs(){return[{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.listing.breadcrumb",{defaultMessage:"Visualize Library"}),href:"#"+visualize_constants.b.LANDING_PAGE_PATH}]}function getEditBreadcrumbs({byValue:byValue,originatingAppName:originatingAppName,redirectToOrigin:redirectToOrigin},title=defaultEditText){return[...originatingAppName?[{text:originatingAppName,onClick:redirectToOrigin}]:[],...byValue?[]:getLandingBreadcrumbs(),{text:title}]}const SavedObjectSaveModalDashboard=Object(presentationUtil_public_.withSuspense)(presentationUtil_public_.LazySavedObjectSaveModalDashboard),showPublicUrlSwitch=anonymousUserCapabilities=>{if(!anonymousUserCapabilities.visualize)return!1;return!!anonymousUserCapabilities.visualize.show},getTopNavConfig=({hasUnsavedChanges:hasUnsavedChanges,setHasUnsavedChanges:setHasUnsavedChanges,openInspector:openInspector,originatingApp:originatingApp,setOriginatingApp:setOriginatingApp,hasUnappliedChanges:hasUnappliedChanges,visInstance:visInstance,stateContainer:stateContainer,visualizationIdFromUrl:visualizationIdFromUrl,stateTransfer:stateTransfer,embeddableId:embeddableId},{application:application,chrome:chrome,history:history,share:share,setActiveUrl:setActiveUrl,toastNotifications:toastNotifications,visualizeCapabilities:visualizeCapabilities,dashboardCapabilities:dashboardCapabilities,i18n:{Context:I18nContext},dashboard:dashboard,savedObjectsTagging:savedObjectsTagging,presentationUtil:presentationUtil})=>{const{vis:vis,embeddableHandler:embeddableHandler}=visInstance,savedVis=visInstance.savedVis;async function doSave(saveOptions){var _vis$data$searchSourc;const newlyCreated=!Boolean(savedVis.id)||savedVis.copyOnSave;stateContainer.transitions.setVis({title:savedVis.title}),savedVis.searchSourceFields=null===(_vis$data$searchSourc=vis.data.searchSource)||void 0===_vis$data$searchSourc?void 0:_vis$data$searchSourc.getSerializedFields(),savedVis.visState=stateContainer.getState().vis,savedVis.uiStateJSON=vis.uiState.toString(),setHasUnsavedChanges(!1);try{const id=await savedVis.save(saveOptions);if(id)if(toastNotifications.addSuccess({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.topNavMenu.saveVisualization.successNotificationText",{defaultMessage:"Saved '{visTitle}'",values:{visTitle:savedVis.title}}),"data-test-subj":"saveVisualizationSuccess"}),originatingApp&&saveOptions.returnToOrigin||saveOptions.dashboardId){if(!embeddableId){const appPath=`${visualize_constants.b.EDIT_PATH}/${encodeURIComponent(id)}`;history.replace(appPath),setActiveUrl(appPath)}const app=originatingApp||"dashboards";let path;saveOptions.dashboardId&&(path="new"===saveOptions.dashboardId?"#/create":"#/view/"+saveOptions.dashboardId),newlyCreated&&stateTransfer?stateTransfer.navigateToWithEmbeddablePackage(app,{state:{type:visualizations_public_.VISUALIZE_EMBEDDABLE_TYPE,input:{savedObjectId:id},embeddableId:embeddableId},path:path}):application.navigateToApp(app,{path:path})}else setOriginatingApp&&originatingApp&&newlyCreated&&(setOriginatingApp(void 0),stateTransfer.clearEditorState(visualize_constants.b.APP_ID)),chrome.docTitle.change(savedVis.lastSavedTitle),chrome.setBreadcrumbs(getEditBreadcrumbs({},savedVis.lastSavedTitle)),id!==visualizationIdFromUrl&&history.replace({...history.location,pathname:`${visualize_constants.b.EDIT_PATH}/${id}`});return{id:id}}catch(error){return console.error(error),toastNotifications.addDanger({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.topNavMenu.saveVisualization.failureNotificationText",{defaultMessage:"Error on saving '{visTitle}'",values:{visTitle:savedVis.title}}),text:error.message,"data-test-subj":"saveVisualizationError"}),{error:error}}}const allowByValue=dashboard.dashboardFeatureFlagConfig.allowByValueEmbeddables,saveButtonLabel=embeddableId||!savedVis.id&&allowByValue&&originatingApp?external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.topNavMenu.saveVisualizationToLibraryButtonLabel",{defaultMessage:"Save to library"}):originatingApp&&(embeddableId||savedVis.id)?external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.topNavMenu.saveVisualizationAsButtonLabel",{defaultMessage:"Save as"}):external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.topNavMenu.saveVisualizationButtonLabel",{defaultMessage:"Save"}),showSaveAndReturn=originatingApp&&((null==savedVis?void 0:savedVis.id)||allowByValue),showSaveButton=visualizeCapabilities.save||allowByValue&&!showSaveAndReturn&&dashboardCapabilities.showWriteControls;return[{id:"inspector",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.topNavMenu.openInspectorButtonLabel",{defaultMessage:"inspect"}),description:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.topNavMenu.openInspectorButtonAriaLabel",{defaultMessage:"Open Inspector for visualization"}),testId:"openInspectorButton",disableButton:()=>!embeddableHandler.hasInspector||!embeddableHandler.hasInspector(),run:openInspector,tooltip(){if(!embeddableHandler.hasInspector||!embeddableHandler.hasInspector())return external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.topNavMenu.openInspectorDisabledButtonTooltip",{defaultMessage:"This visualization doesn't support any inspectors."})}},{id:"share",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.topNavMenu.shareVisualizationButtonLabel",{defaultMessage:"share"}),description:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.topNavMenu.shareVisualizationButtonAriaLabel",{defaultMessage:"Share Visualization"}),testId:"shareTopNavButton",run:anchorElement=>{share&&!embeddableId&&share.toggleShareContextMenu({anchorElement:anchorElement,allowEmbed:!0,allowShortUrl:Boolean(visualizeCapabilities.createShortUrl),shareableUrl:Object(kibanaUtils_public_.unhashUrl)(window.location.href),objectId:null==savedVis?void 0:savedVis.id,objectType:"visualization",sharingData:{title:null==savedVis?void 0:savedVis.title},isDirty:hasUnappliedChanges||hasUnsavedChanges,showPublicUrlSwitch:showPublicUrlSwitch})},disableButton:!share||!!embeddableId},...originatingApp?[{id:"cancel",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.topNavMenu.cancelButtonLabel",{defaultMessage:"Cancel"}),emphasize:!1,description:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.topNavMenu.cancelButtonAriaLabel",{defaultMessage:"Return to the last app without saving changes"}),testId:"visualizeCancelAndReturnButton",tooltip(){if(hasUnappliedChanges||hasUnsavedChanges)return external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.topNavMenu.cancelAndReturnButtonTooltip",{defaultMessage:"Discard your changes before finishing"})},run:async()=>{originatingApp&&application.navigateToApp(originatingApp)}}]:[],...showSaveButton?[{id:"save",iconType:showSaveAndReturn?void 0:"save",label:saveButtonLabel,emphasize:!showSaveAndReturn,description:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.topNavMenu.saveVisualizationButtonAriaLabel",{defaultMessage:"Save Visualization"}),testId:"visualizeSaveButton",disableButton:hasUnappliedChanges,tooltip(){if(hasUnappliedChanges)return external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.topNavMenu.saveVisualizationDisabledButtonTooltip",{defaultMessage:"Apply or Discard your changes before saving"})},run:()=>{const onSave=async({newTitle:newTitle,newCopyOnSave:newCopyOnSave,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate,newDescription:newDescription,returnToOrigin:returnToOrigin,dashboardId:dashboardId,addToLibrary:addToLibrary})=>{const currentTitle=savedVis.title;savedVis.title=newTitle,embeddableHandler.updateInput({title:newTitle}),savedVis.copyOnSave=newCopyOnSave,savedVis.description=newDescription,savedObjectsTagging&&savedObjectsTagging.ui.hasTagDecoration(savedVis)&&savedVis.setTags(selectedTags);const saveOptions={confirmOverwrite:!1,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate,returnToOrigin:returnToOrigin,dashboardId:dashboardId||void 0};if(dashboardId&&!addToLibrary){const appPath=""+visualize_constants.b.LANDING_PAGE_PATH;history.replace(appPath),setActiveUrl(appPath);const state={input:{savedVis:{...vis.serialize(),title:newTitle,description:newDescription}},embeddableId:embeddableId,type:visualizations_public_.VISUALIZE_EMBEDDABLE_TYPE},path="new"===dashboardId?"#/create":"#/view/"+dashboardId;return stateTransfer.navigateToWithEmbeddablePackage("dashboards",{state:state,path:path}),{id:!0}}const response=await doSave(saveOptions);return response.id&&!response.error||(savedVis.title=currentTitle),response};let tagOptions,selectedTags=[];savedObjectsTagging&&(savedVis&&savedObjectsTagging.ui.hasTagDecoration(savedVis)&&(selectedTags=savedVis.getTags()),tagOptions=external_kbnSharedDeps_React_default.a.createElement(savedObjectsTagging.ui.components.SavedObjectSaveModalTagSelector,{initialSelection:selectedTags,onTagsSelected:newSelection=>{selectedTags=newSelection}}));const useByRefFlow=!!originatingApp||!dashboard.dashboardFeatureFlagConfig.allowByValueEmbeddables;let saveModal;saveModal=useByRefFlow?external_kbnSharedDeps_React_default.a.createElement(savedObjects_public_.SavedObjectSaveModalOrigin,{documentInfo:savedVis||{title:""},onSave:onSave,options:tagOptions,getAppNameFromId:stateTransfer.getAppNameFromId,objectType:"visualization",onClose:()=>{},originatingApp:originatingApp,returnToOriginSwitchLabel:originatingApp&&embeddableId?external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.topNavMenu.updatePanel",{defaultMessage:"Update panel on {originatingAppName}",values:{originatingAppName:stateTransfer.getAppNameFromId(originatingApp)}}):void 0}):external_kbnSharedDeps_React_default.a.createElement(SavedObjectSaveModalDashboard,{documentInfo:{id:visualizeCapabilities.save?null==savedVis?void 0:savedVis.id:void 0,title:(null==savedVis?void 0:savedVis.title)||"",description:(null==savedVis?void 0:savedVis.description)||""},canSaveByReference:Boolean(visualizeCapabilities.save),onSave:onSave,tagOptions:tagOptions,objectType:"visualization",onClose:()=>{}}),Object(savedObjects_public_.showSaveModal)(saveModal,I18nContext,useByRefFlow?external_kbnSharedDeps_React_default.a.Fragment:presentationUtil.ContextProvider)}}]:[],...showSaveAndReturn?[{id:"saveAndReturn",label:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.topNavMenu.saveAndReturnVisualizationButtonLabel",{defaultMessage:"Save and return"}),emphasize:!0,iconType:"checkInCircleFilled",description:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.topNavMenu.saveAndReturnVisualizationButtonAriaLabel",{defaultMessage:"Finish editing visualization and return to the last app"}),testId:"visualizesaveAndReturnButton",disableButton:hasUnappliedChanges||!dashboardCapabilities.showWriteControls,tooltip(){if(hasUnappliedChanges)return external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.topNavMenu.saveAndReturnVisualizationDisabledButtonTooltip",{defaultMessage:"Apply or Discard your changes before finishing"})},run:async()=>{if(null==savedVis||!savedVis.id)return(()=>{if(!originatingApp)return;const state={input:{savedVis:vis.serialize()},embeddableId:embeddableId,type:visualizations_public_.VISUALIZE_EMBEDDABLE_TYPE};stateTransfer.navigateToWithEmbeddablePackage(originatingApp,{state:state})})();return doSave({confirmOverwrite:!1,returnToOrigin:!0})}}]:[]]},getDefaultQuery=({data:data})=>data.query.queryString.getDefaultQuery(),visStateToEditorState=(visInstance,services)=>{var _vis$data$searchSourc,_vis$data$searchSourc2;const vis=visInstance.vis,savedVisState=services.visualizations.convertFromSerializedVis(vis.serialize()),savedVis="savedVis"in visInstance?visInstance.savedVis:void 0;return{uiState:savedVis&&savedVis.uiStateJSON?JSON.parse(savedVis.uiStateJSON):vis.uiState.toJSON(),query:(null===(_vis$data$searchSourc=vis.data.searchSource)||void 0===_vis$data$searchSourc?void 0:_vis$data$searchSourc.getOwnField("query"))||getDefaultQuery(services),filters:(null===(_vis$data$searchSourc2=vis.data.searchSource)||void 0===_vis$data$searchSourc2?void 0:_vis$data$searchSourc2.getOwnField("filter"))||[],vis:{...savedVisState.visState,title:vis.title},linked:savedVis&&savedVis.id?!!savedVis.savedSearchId:!!savedVisState.savedSearchId}},useChromeVisibility=chrome=>{const[isVisible,setIsVisible]=Object(external_kbnSharedDeps_React_.useState)();return Object(external_kbnSharedDeps_React_.useEffect)(()=>{const subscription=chrome.getIsVisible$().subscribe(value=>{setIsVisible(value)});return()=>subscription.unsubscribe()},[chrome]),isVisible};var external_kbnSharedDeps_Lodash_=__webpack_require__(21);const useEditorUpdates=(services,eventEmitter,setHasUnsavedChanges,appState,visInstance,visEditorController)=>{const[isEmbeddableRendered,setIsEmbeddableRendered]=Object(external_kbnSharedDeps_React_.useState)(!1),[currentAppState,setCurrentAppState]=Object(external_kbnSharedDeps_React_.useState)();return Object(external_kbnSharedDeps_React_.useEffect)(()=>{if(appState&&visInstance){const{timefilter:{timefilter:timefilter},filterManager:filterManager,queryString:queryString,state$:state$}=services.data.query,{embeddableHandler:embeddableHandler,savedSearch:savedSearch,vis:vis}=visInstance,savedVis="savedVis"in visInstance?visInstance.savedVis:void 0,initialState=appState.getState();setCurrentAppState(initialState);const reloadVisualization=()=>{visEditorController?visEditorController.render({core:services,data:services.data,uiState:vis.uiState,timeRange:timefilter.getTime(),filters:filterManager.getFilters(),query:queryString.getQuery(),linked:!!vis.data.savedSearchId,savedSearch:savedSearch}):embeddableHandler.updateInput({timeRange:timefilter.getTime(),filters:filterManager.getFilters(),query:queryString.getQuery()})},subscriptions=state$.subscribe({next:reloadVisualization,error:services.fatalErrors.add}),handleLinkedSearch=linked=>{linked&&savedVis&&!savedVis.savedSearchId&&savedSearch?(savedVis.savedSearchId=savedSearch.id,vis.data.savedSearchId=savedSearch.id,vis.data.searchSource&&vis.data.searchSource.setParent(savedSearch.searchSource)):!linked&&savedVis&&savedVis.savedSearchId?(delete savedVis.savedSearchId,delete vis.data.savedSearchId):linked||savedVis||delete vis.data.savedSearchId};initialState.uiState&&vis.uiState.setSilent(initialState.uiState);const updateOnChange=()=>{appState.transitions.set("uiState",vis.uiState.getChanges())};vis.uiState.on("change",updateOnChange);const unsubscribeStateUpdates=appState.subscribe(state=>{if(setCurrentAppState(state),!savedVis||!savedVis.id||services.history.location.pathname.includes(savedVis.id)){if(Object(external_kbnSharedDeps_Lodash_.isEqual)(state.uiState,vis.uiState.getChanges())||vis.uiState.set(state.uiState),savedVis&&!Object(external_kbnSharedDeps_Lodash_.isEqual)({...services.visualizations.convertFromSerializedVis(vis.serialize()).visState,title:vis.title},state.vis)){const{aggs:aggs,...visState}=state.vis;vis.setState({...visState,data:{aggs:aggs}}),embeddableHandler.reload(),eventEmitter.emit("updateEditor")}handleLinkedSearch(state.linked),vis.data.searchSource&&(vis.data.searchSource.setField("query",state.query),vis.data.searchSource.setField("filter",state.filters)),reloadVisualization(),setHasUnsavedChanges(!0)}}),updateOnEmbeddableRendered=()=>setIsEmbeddableRendered(!0);return eventEmitter.on("embeddableRendered",updateOnEmbeddableRendered),reloadVisualization(),()=>{setIsEmbeddableRendered(!1),eventEmitter.off("embeddableRendered",updateOnEmbeddableRendered),subscriptions.unsubscribe(),vis.uiState.off("change",updateOnChange),unsubscribeStateUpdates()}}},[appState,eventEmitter,visInstance,services,setHasUnsavedChanges,visEditorController]),{isEmbeddableRendered:isEmbeddableRendered,currentAppState:currentAppState}};var query_string=__webpack_require__(55),discover_public_=__webpack_require__(30),common_=__webpack_require__(31);const createVisualizeEmbeddableAndLinkSavedSearch=async(vis,visualizeServices)=>{const{data:data,createVisEmbeddableFromObject:createVisEmbeddableFromObject,savedObjects:savedObjects,savedObjectsPublic:savedObjectsPublic}=visualizeServices,embeddableHandler=await createVisEmbeddableFromObject(vis,{timeRange:data.query.timefilter.timefilter.getTime(),filters:data.query.filterManager.getFilters(),id:""});let savedSearch;return embeddableHandler.getOutput$().subscribe(output=>{output.error&&!function(error){const originalError=error.original||error;return originalError instanceof common_.SavedFieldNotFound||originalError instanceof common_.SavedFieldTypeInvalidForAgg}(output.error)&&data.search.showError(output.error.original||output.error)}),vis.data.savedSearchId&&(savedSearch=await Object(discover_public_.createSavedSearchesLoader)({savedObjectsClient:savedObjects.client,savedObjects:savedObjectsPublic}).get(vis.data.savedSearchId)),{savedSearch:savedSearch,embeddableHandler:embeddableHandler}},getVisualizationInstance=async(visualizeServices,opts)=>{const{visualizations:visualizations,savedVisualizations:savedVisualizations}=visualizeServices,savedVis=await savedVisualizations.get(opts);"string"!=typeof opts&&(savedVis.searchSourceFields={index:null==opts?void 0:opts.indexPattern});const serializedVis=visualizations.convertToSerializedVis(savedVis);let vis=await visualizations.createVis(serializedVis.type,serializedVis);if(vis.type.setup)try{vis=await vis.type.setup(vis)}catch{}const{embeddableHandler:embeddableHandler,savedSearch:savedSearch}=await createVisualizeEmbeddableAndLinkSavedSearch(vis,visualizeServices);return{vis:vis,embeddableHandler:embeddableHandler,savedSearch:savedSearch,savedVis:savedVis}},useSavedVisInstance=(services,eventEmitter,isChromeVisible,originatingApp,visualizationIdFromUrl)=>{const[state,setState]=Object(external_kbnSharedDeps_React_.useState)({}),visEditorRef=Object(external_kbnSharedDeps_React_.useRef)(null),visId=Object(external_kbnSharedDeps_React_.useRef)("");return Object(external_kbnSharedDeps_React_.useEffect)(()=>{var _state$savedVisInstan;const{chrome:chrome,history:history,dashboard:dashboard,toastNotifications:toastNotifications,stateTransferService:stateTransferService,application:{navigateToApp:navigateToApp}}=services,getSavedVisInstance=async()=>{try{let savedVisInstance;if("/create"===history.location.pathname){const searchParams=Object(query_string.parse)(history.location.search),visType=services.visualizations.all().find(({name:name})=>name===searchParams.type);if(!visType)throw new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.createVisualization.noVisTypeErrorMessage",{defaultMessage:"You must provide a valid visualization type"}));const shouldHaveIndex=visType.requiresSearch&&visType.options.showIndexSelection,hasIndex=searchParams.indexPattern||searchParams.savedSearchId;if(shouldHaveIndex&&!hasIndex)throw new Error(external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.createVisualization.noIndexPatternOrSavedSearchIdErrorMessage",{defaultMessage:"You must provide either an indexPattern or a savedSearchId"}));savedVisInstance=await getVisualizationInstance(services,searchParams)}else savedVisInstance=await getVisualizationInstance(services,visualizationIdFromUrl);const{embeddableHandler:embeddableHandler,savedVis:savedVis,vis:vis}=savedVisInstance,originatingAppName=originatingApp?stateTransferService.getAppNameFromId(originatingApp):void 0,redirectToOrigin=originatingApp?()=>navigateToApp(originatingApp):void 0,byValueCreateMode=Boolean(originatingApp)&&dashboard.dashboardFeatureFlagConfig.allowByValueEmbeddables;let visEditorController;if(savedVis.id?(chrome.setBreadcrumbs(getEditBreadcrumbs({originatingAppName:originatingAppName,redirectToOrigin:redirectToOrigin},savedVis.title)),chrome.docTitle.change(savedVis.title)):chrome.setBreadcrumbs(function({byValue:byValue,originatingAppName:originatingAppName,redirectToOrigin:redirectToOrigin}){return[...originatingAppName?[{text:originatingAppName,onClick:redirectToOrigin}]:[],...byValue?[]:getLandingBreadcrumbs(),{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.editor.createBreadcrumb",{defaultMessage:"Create"})}]}({byValue:byValueCreateMode,originatingAppName:originatingAppName,redirectToOrigin:redirectToOrigin})),visEditorRef.current)if(isChromeVisible){var _vis$type$editorConfi;const Editor=Object(public_services.b)().get(null===(_vis$type$editorConfi=vis.type.editorConfig)||void 0===_vis$type$editorConfi?void 0:_vis$type$editorConfi.editor);Editor&&(visEditorController=new Editor(visEditorRef.current,vis,eventEmitter,embeddableHandler))}else embeddableHandler.render(visEditorRef.current);setState({savedVisInstance:savedVisInstance,visEditorController:visEditorController})}catch(error){try{((services,error,savedVisualizationsId)=>{const{history:history,setActiveUrl:setActiveUrl,toastNotifications:toastNotifications,http:{basePath:basePath},application:{navigateToApp:navigateToApp}}=services,managementRedirectTarget={app:"management",path:"kibana/objects/savedVisualizations/"+savedVisualizationsId};Object(kibanaUtils_public_.redirectWhenMissing)({history:history,navigateToApp:navigateToApp,toastNotifications:toastNotifications,basePath:basePath,mapping:{visualization:visualize_constants.b.LANDING_PAGE_PATH,search:managementRedirectTarget,"index-pattern":managementRedirectTarget,"index-pattern-field":managementRedirectTarget},onBeforeRedirect(){setActiveUrl(visualize_constants.b.LANDING_PAGE_PATH)}})(error)})(services,error,visualizationIdFromUrl)}catch(e){toastNotifications.addWarning({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.createVisualization.failedToLoadErrorMessage",{defaultMessage:"Failed to load the visualization"}),text:e.message}),history.replace(visualize_constants.b.LANDING_PAGE_PATH)}}};void 0!==isChromeVisible&&(visId.current?visualizationIdFromUrl&&visId.current!==visualizationIdFromUrl&&(null===(_state$savedVisInstan=state.savedVisInstance)||void 0===_state$savedVisInstan?void 0:_state$savedVisInstan.savedVis.id)!==visualizationIdFromUrl&&(visId.current=visualizationIdFromUrl,setState({}),getSavedVisInstance()):(visId.current=visualizationIdFromUrl||"new",getSavedVisInstance()))},[services,eventEmitter,originatingApp,isChromeVisible,visualizationIdFromUrl,state.savedVisInstance,state.visEditorController]),Object(external_kbnSharedDeps_React_.useEffect)(()=>()=>{var _state$savedVisInstan2,_state$savedVisInstan3;state.visEditorController?state.visEditorController.destroy():null!==(_state$savedVisInstan2=state.savedVisInstance)&&void 0!==_state$savedVisInstan2&&_state$savedVisInstan2.embeddableHandler&&state.savedVisInstance.embeddableHandler.destroy(),null!==(_state$savedVisInstan3=state.savedVisInstance)&&void 0!==_state$savedVisInstan3&&_state$savedVisInstan3.savedVis&&state.savedVisInstance.savedVis.destroy()},[state]),{...state,visEditorRef:visEditorRef}};var external_kbnSharedDeps_RxjsOperators_=__webpack_require__(4);function migrateAppState(appState){if("table"!==appState.vis.type)return appState;const visAggs=Object(external_kbnSharedDeps_Lodash_.get)(appState,"vis.aggs");if(visAggs){let splitCount=0;const migratedAggs=visAggs.map(agg=>"split"!==agg.schema?agg:(splitCount++,1===splitCount||(agg.schema="bucket",agg.params=Object(external_kbnSharedDeps_Lodash_.omit)(agg.params,["row"])),agg));if(splitCount<=1)return appState;appState.vis.aggs=migratedAggs}return appState}function toObject(state){return Object(external_kbnSharedDeps_Lodash_.omitBy)(state,(value,key)=>"$"===key.charAt(0)||"_"===key.charAt(0)||Object(external_kbnSharedDeps_Lodash_.isFunction)(value))}const pureTransitions={set:state=>(prop,value)=>({...state,[prop]:value}),setVis:state=>vis=>({...state,vis:{...state.vis,...vis}}),unlinkSavedSearch:state=>({query:query,parentFilters:parentFilters=[]})=>({...state,query:query||state.query,filters:Object(external_kbnSharedDeps_Lodash_.union)(state.filters,parentFilters),linked:!1}),updateVisState:state=>newVisState=>({...state,vis:toObject(newVisState)}),updateSavedQuery:state=>savedQueryId=>{const updatedState={...state,savedQuery:savedQueryId};return savedQueryId||delete updatedState.savedQuery,updatedState}};function createVisualizeAppState({stateDefaults:stateDefaults,kbnUrlStateStorage:kbnUrlStateStorage,byValue:byValue}){return byValue?function(stateDefaults){const initialState=migrateAppState({...stateDefaults,...stateDefaults});return{stateContainer:Object(kibanaUtils_public_.createStateContainer)(initialState,pureTransitions),stopStateSync:()=>{}}}(stateDefaults):function({stateDefaults:stateDefaults,kbnUrlStateStorage:kbnUrlStateStorage}){const initialState=migrateAppState({...stateDefaults,...kbnUrlStateStorage.get("_a")});kbnUrlStateStorage.set("_a",initialState,{replace:!0});const stateContainer=Object(kibanaUtils_public_.createStateContainer)(initialState,pureTransitions),{start:startStateSync,stop:stopStateSync}=Object(kibanaUtils_public_.syncState)({storageKey:"_a",stateContainer:{...stateContainer,set:state=>{state&&stateContainer.set(state)}},stateStorage:kbnUrlStateStorage});return startStateSync(),{stateContainer:stateContainer,stopStateSync:stopStateSync}}({stateDefaults:stateDefaults,kbnUrlStateStorage:kbnUrlStateStorage})}const useVisualizeAppState=(services,eventEmitter,instance)=>{const[hasUnappliedChanges,setHasUnappliedChanges]=Object(external_kbnSharedDeps_React_.useState)(!1),[appState,setAppState]=Object(external_kbnSharedDeps_React_.useState)(null);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{if(instance){const stateDefaults=visStateToEditorState(instance,services),byValue=!("savedVis"in instance),{stateContainer:stateContainer,stopStateSync:stopStateSync}=createVisualizeAppState({stateDefaults:stateDefaults,kbnUrlStateStorage:services.kbnUrlStateStorage,byValue:byValue}),onDirtyStateChange=({isDirty:isDirty})=>{isDirty||stateContainer.transitions.updateVisState(visStateToEditorState(instance,services).vis),setHasUnappliedChanges(isDirty)};eventEmitter.on("dirtyStateChange",onDirtyStateChange);const{filterManager:filterManager,queryString:queryString}=services.data.query;filterManager.setAppFilters(Object(external_kbnSharedDeps_Lodash_.cloneDeep)(stateContainer.getState().filters)),queryString.setQuery((query=stateContainer.getState().query,Object(external_kbnSharedDeps_Lodash_.has)(query,"language")?query:{query:query,language:"lucene"}));const stopSyncingAppFilters=Object(data_public_.connectToQueryState)(services.data.query,{set:({filters:filters,query:query})=>{stateContainer.transitions.set("filters",filters),stateContainer.transitions.set("query",query)},get:()=>({filters:stateContainer.getState().filters,query:stateContainer.getState().query}),state$:stateContainer.state$.pipe(Object(external_kbnSharedDeps_RxjsOperators_.map)(state=>({filters:state.filters,query:state.query})))},{filters:data_public_.esFilters.FilterStateStore.APP_STATE,query:!0});if(Object(external_kbnSharedDeps_Lodash_.isEqual)(stateContainer.getState().vis,stateDefaults.vis))setAppState(stateContainer);else{const{aggs:aggs,...visState}=stateContainer.getState().vis;instance.vis.setState({...visState,data:{aggs:aggs}}).then(()=>{setAppState(stateContainer)}).catch(error=>{services.toastNotifications.addWarning({title:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.visualizationLoadingFailedErrorMessage",{defaultMessage:"Failed to load the visualization"}),text:Object(public_.toMountPoint)(external_kbnSharedDeps_React_default.a.createElement(public_.MarkdownSimple,null,error.message))}),services.history.replace(visualize_constants.b.LANDING_PAGE_PATH+"?notFound=visualization")})}return()=>{eventEmitter.off("dirtyStateChange",onDirtyStateChange),stopStateSync(),stopSyncingAppFilters()}}var query},[eventEmitter,instance,services]),{appState:appState,hasUnappliedChanges:hasUnappliedChanges}},useLinkedSearchUpdates=(services,eventEmitter,appState,visInstance)=>{Object(external_kbnSharedDeps_React_.useEffect)(()=>{if(appState&&visInstance&&visInstance.savedSearch&&visInstance.vis.data.searchSource){const{savedSearch:savedSearch}=visInstance,{searchSource:searchSource}=visInstance.vis.data,unlinkFromSavedSearch=()=>{const searchSourceParent=savedSearch.searchSource,searchSourceGrandparent=null==searchSourceParent?void 0:searchSourceParent.getParent(),currentIndex=null==searchSourceParent?void 0:searchSourceParent.getField("index");searchSource.setField("index",currentIndex),searchSource.setParent(searchSourceGrandparent),appState.transitions.unlinkSavedSearch({query:null==searchSourceParent?void 0:searchSourceParent.getField("query"),parentFilters:(null==searchSourceParent?void 0:searchSourceParent.getOwnField("filter"))||[]}),services.toastNotifications.addSuccess(external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.linkedToSearch.unlinkSuccessNotificationText",{defaultMessage:"Unlinked from saved search '{searchTitle}'",values:{searchTitle:savedSearch.title}}))};return eventEmitter.on("unlinkFromSavedSearch",unlinkFromSavedSearch),()=>{eventEmitter.off("unlinkFromSavedSearch",unlinkFromSavedSearch)}}},[appState,eventEmitter,visInstance,services.toastNotifications])},useVisByValue=(services,eventEmitter,isChromeVisible,valueInput,originatingApp)=>{const[state,setState]=Object(external_kbnSharedDeps_React_.useState)({}),visEditorRef=Object(external_kbnSharedDeps_React_.useRef)(null),loaded=Object(external_kbnSharedDeps_React_.useRef)(!1);return Object(external_kbnSharedDeps_React_.useEffect)(()=>{const{chrome:chrome,application:{navigateToApp:navigateToApp},stateTransferService:stateTransferService}=services;(async()=>{var _vis$type$editorConfi;if(!valueInput||loaded.current||!visEditorRef.current)return;const byValueVisInstance=await(async(visualizeServices,input)=>{const{visualizations:visualizations,savedVisualizations:savedVisualizations}=visualizeServices,visState=input.savedVis,savedVis=await savedVisualizations.get();visState.uiState&&0!==Object.keys(visState.uiState).length&&(savedVis.uiStateJSON=JSON.stringify(visState.uiState));let vis=await visualizations.createVis(visState.type,Object(external_kbnSharedDeps_Lodash_.cloneDeep)(visState));if(vis.type.setup)try{vis=await vis.type.setup(vis)}catch{}const{embeddableHandler:embeddableHandler,savedSearch:savedSearch}=await createVisualizeEmbeddableAndLinkSavedSearch(vis,visualizeServices);return{vis:vis,savedVis:savedVis,embeddableHandler:embeddableHandler,savedSearch:savedSearch}})(services,valueInput),{embeddableHandler:embeddableHandler,vis:vis}=byValueVisInstance;let visEditorController;const Editor=Object(public_services.b)().get(null===(_vis$type$editorConfi=vis.type.editorConfig)||void 0===_vis$type$editorConfi?void 0:_vis$type$editorConfi.editor);Editor&&(visEditorController=new Editor(visEditorRef.current,vis,eventEmitter,embeddableHandler));const originatingAppName=originatingApp?stateTransferService.getAppNameFromId(originatingApp):void 0,redirectToOrigin=originatingApp?()=>navigateToApp(originatingApp):void 0;null==chrome||chrome.setBreadcrumbs(getEditBreadcrumbs({byValue:!0,originatingAppName:originatingAppName,redirectToOrigin:redirectToOrigin})),loaded.current=!0,setState({byValueVisInstance:byValueVisInstance,visEditorController:visEditorController})})()},[eventEmitter,isChromeVisible,services,state.byValueVisInstance,state.visEditorController,valueInput,originatingApp]),Object(external_kbnSharedDeps_React_.useEffect)(()=>()=>{var _state$byValueVisInst;state.visEditorController?state.visEditorController.destroy():null!==(_state$byValueVisInst=state.byValueVisInstance)&&void 0!==_state$byValueVisInst&&_state$byValueVisInst.embeddableHandler&&state.byValueVisInstance.embeddableHandler.destroy()},[state]),{...state,visEditorRef:visEditorRef}},VisualizeListing=()=>{const{services:{application:application,chrome:chrome,dashboard:dashboard,history:history,savedVisualizations:savedVisualizations,toastNotifications:toastNotifications,visualizations:visualizations,stateTransferService:stateTransferService,savedObjects:savedObjects,savedObjectsPublic:savedObjectsPublic,savedObjectsTagging:savedObjectsTagging,uiSettings:uiSettings,visualizeCapabilities:visualizeCapabilities,dashboardCapabilities:dashboardCapabilities,kbnUrlStateStorage:kbnUrlStateStorage}}=Object(public_.useKibana)(),{pathname:pathname}=Object(external_kbnSharedDeps_ReactRouterDom_.useLocation)(),closeNewVisModal=Object(external_kbnSharedDeps_React_.useRef)(()=>{}),listingLimit=savedObjectsPublic.settings.getListingLimit();Object(external_kbnSharedDeps_React_.useEffect)(()=>{"/new"===pathname?closeNewVisModal.current=visualizations.showNewVisModal({onClose:()=>{history.push(visualize_constants.b.LANDING_PAGE_PATH)}}):closeNewVisModal.current()},[history,pathname,visualizations]),useMount_default()(()=>{stateTransferService.clearEditorState(),chrome.setBreadcrumbs([{text:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.visualizeListingBreadcrumbsTitle",{defaultMessage:"Visualize Library"})}]),chrome.docTitle.change(external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.listingPageTitle",{defaultMessage:"Visualize Library"}))}),useUnmount_default()(()=>closeNewVisModal.current());const createNewVis=Object(external_kbnSharedDeps_React_.useCallback)(()=>{closeNewVisModal.current=visualizations.showNewVisModal()},[visualizations]),editItem=Object(external_kbnSharedDeps_React_.useCallback)(({editUrl:editUrl,editApp:editApp})=>{editApp?application.navigateToApp(editApp,{path:editUrl}):history.push(editUrl)},[application,history]),noItemsFragment=Object(external_kbnSharedDeps_React_.useMemo)(()=>{return createItem=createNewVis,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiEmptyPrompt,{iconType:"visualizeApp",title:external_kbnSharedDeps_React_default.a.createElement("h1",{id:"visualizeListingHeading"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"visualize.listing.createNew.title",defaultMessage:"Create your first visualization"})),body:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"visualize.listing.createNew.description",defaultMessage:"You can create different visualizations based on your data."})),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiButton,{onClick:createItem,fill:!0,iconType:"plusInCircle","data-test-subj":"createVisualizationPromptButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"visualize.listing.createNew.createButtonLabel",defaultMessage:"Create new visualization"}))});var createItem},[createNewVis]),tableColumns=Object(external_kbnSharedDeps_React_.useMemo)(()=>getTableColumns(application,kbnUrlStateStorage,savedObjectsTagging),[application,kbnUrlStateStorage,savedObjectsTagging]),fetchItems=Object(external_kbnSharedDeps_React_.useCallback)(filter=>{let references,searchTerm=filter;if(savedObjectsTagging){const parsedQuery=savedObjectsTagging.ui.parseSearchQuery(filter,{useName:!0});searchTerm=parsedQuery.searchTerm,references=parsedQuery.tagReferences}const isLabsEnabled=uiSettings.get(visualizations_public_.VISUALIZE_ENABLE_LABS_SETTING);return savedVisualizations.findListItems(searchTerm,{size:listingLimit,references:references}).then(({total:total,hits:hits})=>({total:total,hits:hits.filter(result=>{var _result$type;return isLabsEnabled||"experimental"!==(null===(_result$type=result.type)||void 0===_result$type?void 0:_result$type.stage)})}))},[listingLimit,savedVisualizations,uiSettings,savedObjectsTagging]),deleteItems=Object(external_kbnSharedDeps_React_.useCallback)(async selectedItems=>{await Promise.all(selectedItems.map(item=>savedObjects.client.delete(item.savedObjectType,item.id))).catch(error=>{toastNotifications.addError(error,{title:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.visualizeListingDeleteErrorTitle",{defaultMessage:"Error deleting visualization"})})})},[savedObjects.client,toastNotifications]),searchFilters=Object(external_kbnSharedDeps_React_.useMemo)(()=>savedObjectsTagging?[savedObjectsTagging.ui.getSearchBarFilter({useName:!0})]:[],[savedObjectsTagging]),calloutMessage=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{"data-test-subj":"visualize-dashboard-flow-prompt",id:"visualize.visualizeListingDashboardFlowDescription",defaultMessage:"Building a dashboard? Create content directly from the {dashboardApp} using a new integrated workflow.",values:{dashboardApp:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{className:"visListingCallout__link",onClick:event=>{event.preventDefault(),application.navigateToUrl(application.getUrlForApp("dashboards"))}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"visualize.visualizeListingDashboardAppName",defaultMessage:"Dashboard application"}))}}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,dashboard.dashboardFeatureFlagConfig.allowByValueEmbeddables&&dashboardCapabilities.createNew&&external_kbnSharedDeps_React_default.a.createElement("div",{className:"visListingCallout"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{size:"s",title:calloutMessage,iconType:"iInCircle"})),external_kbnSharedDeps_React_default.a.createElement(public_.TableListView,{headingId:"visualizeListingHeading",createItem:createNewVis,tableCaption:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.listing.table.listTitle",{defaultMessage:"Visualize Library"}),findItems:fetchItems,deleteItems:visualizeCapabilities.delete?deleteItems:void 0,editItem:visualizeCapabilities.save?editItem:void 0,tableColumns:tableColumns,listingLimit:listingLimit,initialPageSize:savedObjectsPublic.settings.getPerPage(),initialFilter:"",rowHeader:"title",noItemsFragment:noItemsFragment,entityName:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.listing.table.entityName",{defaultMessage:"visualization"}),entityNamePlural:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.listing.table.entityNamePlural",{defaultMessage:"visualizations"}),tableListTitle:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.listing.table.listTitle",{defaultMessage:"Visualize Library"}),toastNotifications:toastNotifications,searchFilters:searchFilters}))};__webpack_require__(34);var events=__webpack_require__(36);const TopNav=({currentAppState:currentAppState,isChromeVisible:isChromeVisible,isEmbeddableRendered:isEmbeddableRendered,hasUnsavedChanges:hasUnsavedChanges,setHasUnsavedChanges:setHasUnsavedChanges,hasUnappliedChanges:hasUnappliedChanges,originatingApp:originatingApp,setOriginatingApp:setOriginatingApp,visInstance:visInstance,stateContainer:stateContainer,visualizationIdFromUrl:visualizationIdFromUrl,embeddableId:embeddableId,onAppLeave:onAppLeave})=>{const{services:services}=Object(public_.useKibana)(),{TopNavMenu:TopNavMenu}=services.navigation.ui,{setHeaderActionMenu:setHeaderActionMenu,visualizeCapabilities:visualizeCapabilities}=services,{embeddableHandler:embeddableHandler,vis:vis}=visInstance,[inspectorSession,setInspectorSession]=Object(external_kbnSharedDeps_React_.useState)(),openInspector=Object(external_kbnSharedDeps_React_.useCallback)(()=>{const session=embeddableHandler.openInspector();setInspectorSession(session)},[embeddableHandler]),handleRefresh=Object(external_kbnSharedDeps_React_.useCallback)((_payload,isUpdate)=>{!1===isUpdate&&visInstance.embeddableHandler.reload()},[visInstance.embeddableHandler]),config=Object(external_kbnSharedDeps_React_.useMemo)(()=>{if(isEmbeddableRendered)return getTopNavConfig({hasUnsavedChanges:hasUnsavedChanges,setHasUnsavedChanges:setHasUnsavedChanges,hasUnappliedChanges:hasUnappliedChanges,openInspector:openInspector,originatingApp:originatingApp,setOriginatingApp:setOriginatingApp,visInstance:visInstance,stateContainer:stateContainer,visualizationIdFromUrl:visualizationIdFromUrl,stateTransfer:services.stateTransferService,embeddableId:embeddableId},services)},[isEmbeddableRendered,hasUnsavedChanges,setHasUnsavedChanges,hasUnappliedChanges,openInspector,originatingApp,visInstance,setOriginatingApp,stateContainer,visualizationIdFromUrl,services,embeddableId]),[indexPatterns,setIndexPatterns]=Object(external_kbnSharedDeps_React_.useState)(vis.data.indexPattern?[vis.data.indexPattern]:[]),showDatePicker=()=>{const hasTimeField=!vis.data.indexPattern||!!vis.data.indexPattern.timeFieldName;return vis.type.options.showTimePicker&&hasTimeField},showFilterBar=vis.type.options.showFilterBar,showQueryInput=vis.type.requiresSearch&&vis.type.options.showQueryBar;return Object(external_kbnSharedDeps_React_.useEffect)(()=>()=>{inspectorSession&&inspectorSession.close()},[inspectorSession]),Object(external_kbnSharedDeps_React_.useEffect)(()=>(onAppLeave(actions=>originatingApp&&(hasUnappliedChanges||hasUnsavedChanges)&&!services.stateTransferService.isTransferInProgress?actions.confirm(external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.confirmModal.confirmTextDescription",{defaultMessage:"Leave Visualize editor with unsaved changes?"}),external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.confirmModal.title",{defaultMessage:"Unsaved changes"})):actions.default()),()=>{onAppLeave(actions=>actions.default())}),[onAppLeave,originatingApp,hasUnsavedChanges,hasUnappliedChanges,visualizeCapabilities.save,services.stateTransferService.isTransferInProgress]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{vis.data.indexPattern||(async()=>{let indexes;if(vis.type.getUsedIndexPattern&&(indexes=await vis.type.getUsedIndexPattern(vis.params)),!indexes||!indexes.length){const defaultIndex=await services.data.indexPatterns.getDefault();defaultIndex&&(indexes=[defaultIndex])}indexes&&setIndexPatterns(indexes)})()},[vis.params,vis.type,services.data.indexPatterns,vis.data.indexPattern]),Object(external_kbnSharedDeps_React_.useEffect)(()=>{const autoRefreshFetchSub=services.data.query.timefilter.timefilter.getAutoRefreshFetch$().subscribe(async done=>{try{await visInstance.embeddableHandler.reload()}finally{done()}});return()=>{autoRefreshFetchSub.unsubscribe()}},[services.data.query.timefilter.timefilter,visInstance.embeddableHandler]),isChromeVisible?external_kbnSharedDeps_React_default.a.createElement(TopNavMenu,{appName:visualize_constants.a,config:config,setMenuMountPoint:setHeaderActionMenu,onQuerySubmit:handleRefresh,savedQueryId:currentAppState.savedQuery,onSavedQueryIdChange:stateContainer.transitions.updateSavedQuery,indexPatterns:indexPatterns,screenTitle:vis.title,showAutoRefreshOnly:!showDatePicker(),showDatePicker:showDatePicker(),showFilterBar:showFilterBar,showQueryInput:showQueryInput,showSaveQuery:Boolean(services.visualizeCapabilities.saveQuery),showSearchBar:!0,useDefaultBehaviors:!0}):showFilterBar?external_kbnSharedDeps_React_default.a.createElement(TopNavMenu,{appName:visualize_constants.a,setMenuMountPoint:setHeaderActionMenu,indexPatterns:indexPatterns,showSearchBar:!0,showSaveQuery:!1,showDatePicker:!1,showQueryInput:!1}):null},VisualizeTopNav=Object(external_kbnSharedDeps_React_.memo)(TopNav),InfoComponent=()=>{const title=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"visualize.experimentalVisInfoText",defaultMessage:"This visualization is experimental and is not subject to the support SLA of official GA features. For feedback, please create an issue in {githubLink}.",values:{githubLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{external:!0,href:"https://github.com/elastic/kibana/issues/new/choose",target:"_blank"},"GitHub")}}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{className:"hide-for-sharing","data-test-subj":"experimentalVisInfo",size:"s",title:title,iconType:"beaker"})},ExperimentalVisInfo=Object(external_kbnSharedDeps_React_.memo)(InfoComponent),VisualizeEditorCommon=({visInstance:visInstance,appState:appState,currentAppState:currentAppState,isChromeVisible:isChromeVisible,hasUnsavedChanges:hasUnsavedChanges,setHasUnsavedChanges:setHasUnsavedChanges,hasUnappliedChanges:hasUnappliedChanges,isEmbeddableRendered:isEmbeddableRendered,onAppLeave:onAppLeave,originatingApp:originatingApp,setOriginatingApp:setOriginatingApp,visualizationIdFromUrl:visualizationIdFromUrl,embeddableId:embeddableId,visEditorRef:visEditorRef})=>{var _visInstance$vis,_visInstance$vis$type,_visInstance$vis2,_visInstance$vis2$typ,_visInstance$vis2$typ2;return external_kbnSharedDeps_React_default.a.createElement("div",{className:"app-container visEditor visEditor--"+(null==visInstance?void 0:visInstance.vis.type.name)},visInstance&&appState&&currentAppState&&external_kbnSharedDeps_React_default.a.createElement(VisualizeTopNav,{currentAppState:currentAppState,hasUnsavedChanges:hasUnsavedChanges,setHasUnsavedChanges:setHasUnsavedChanges,isChromeVisible:isChromeVisible,isEmbeddableRendered:isEmbeddableRendered,hasUnappliedChanges:hasUnappliedChanges,originatingApp:originatingApp,setOriginatingApp:setOriginatingApp,visInstance:visInstance,stateContainer:appState,visualizationIdFromUrl:visualizationIdFromUrl,embeddableId:embeddableId,onAppLeave:onAppLeave}),"experimental"===(null==visInstance||null===(_visInstance$vis=visInstance.vis)||void 0===_visInstance$vis||null===(_visInstance$vis$type=_visInstance$vis.type)||void 0===_visInstance$vis$type?void 0:_visInstance$vis$type.stage)&&external_kbnSharedDeps_React_default.a.createElement(ExperimentalVisInfo,null),null==visInstance||null===(_visInstance$vis2=visInstance.vis)||void 0===_visInstance$vis2||null===(_visInstance$vis2$typ=_visInstance$vis2.type)||void 0===_visInstance$vis2$typ||null===(_visInstance$vis2$typ2=_visInstance$vis2$typ.getInfoMessage)||void 0===_visInstance$vis2$typ2?void 0:_visInstance$vis2$typ2.call(_visInstance$vis2$typ,visInstance.vis),visInstance&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiScreenReaderOnly,null,external_kbnSharedDeps_React_default.a.createElement("h1",null,"savedVis"in visInstance&&visInstance.savedVis.id?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"visualize.pageHeading",defaultMessage:"{chartName} {chartType} visualization",values:{chartName:visInstance.savedVis.title,chartType:visInstance.vis.type.title}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"visualize.byValue_pageHeading",defaultMessage:"Visualization of type {chartType} embedded into {originatingApp} app",values:{chartType:visInstance.vis.type.title,originatingApp:originatingApp||"dashboards"}}))),external_kbnSharedDeps_React_default.a.createElement("div",{className:isChromeVisible?"visEditor__content":"visualize",ref:visEditorRef}))};var public_0=__webpack_require__(11);const VisualizeEditor=({onAppLeave:onAppLeave})=>{const{id:visualizationIdFromUrl}=Object(external_kbnSharedDeps_ReactRouterDom_.useParams)(),[originatingApp,setOriginatingApp]=Object(external_kbnSharedDeps_React_.useState)(),{services:services}=Object(public_.useKibana)(),[eventEmitter]=Object(external_kbnSharedDeps_React_.useState)(new events.EventEmitter),[hasUnsavedChanges,setHasUnsavedChanges]=Object(external_kbnSharedDeps_React_.useState)(!visualizationIdFromUrl),isChromeVisible=useChromeVisibility(services.chrome),{savedVisInstance:savedVisInstance,visEditorRef:visEditorRef,visEditorController:visEditorController}=useSavedVisInstance(services,eventEmitter,isChromeVisible,originatingApp,visualizationIdFromUrl),{appState:appState,hasUnappliedChanges:hasUnappliedChanges}=useVisualizeAppState(services,eventEmitter,savedVisInstance),{isEmbeddableRendered:isEmbeddableRendered,currentAppState:currentAppState}=useEditorUpdates(services,eventEmitter,setHasUnsavedChanges,appState,savedVisInstance,visEditorController);return useLinkedSearchUpdates(services,eventEmitter,appState,savedVisInstance),Object(external_kbnSharedDeps_React_.useEffect)(()=>{const{originatingApp:value}=services.stateTransferService.getIncomingEditorState(public_0.VisualizeConstants.APP_ID)||{};setOriginatingApp(value)},[services]),Object(external_kbnSharedDeps_React_.useEffect)(()=>()=>{eventEmitter.removeAllListeners()},[eventEmitter]),external_kbnSharedDeps_React_default.a.createElement(VisualizeEditorCommon,{visInstance:savedVisInstance,appState:appState,currentAppState:currentAppState,isChromeVisible:isChromeVisible,hasUnsavedChanges:hasUnsavedChanges,hasUnappliedChanges:hasUnappliedChanges,isEmbeddableRendered:isEmbeddableRendered,originatingApp:originatingApp,setOriginatingApp:setOriginatingApp,visualizationIdFromUrl:visualizationIdFromUrl,setHasUnsavedChanges:setHasUnsavedChanges,visEditorRef:visEditorRef,onAppLeave:onAppLeave})};let bannerId;const VisualizeNoMatch=()=>{const{services:services}=Object(public_.useKibana)();return Object(external_kbnSharedDeps_React_.useEffect)(()=>{services.restorePreviousUrl();const{navigated:navigated}=services.urlForwarding.navigateToLegacyKibanaUrl(services.history.location.pathname);if(!navigated){const bannerMessage=external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.noMatchRoute.bannerTitleText",{defaultMessage:"Page not found"});bannerId=services.overlays.banners.replace(bannerId,Object(public_.toMountPoint)(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiCallOut,{color:"warning",iconType:"iInCircle",title:bannerMessage},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_.FormattedMessage,{id:"visualize.noMatchRoute.bannerText",defaultMessage:"Visualize application doesn't recognize this route: {route}.",values:{route:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_.EuiLink,{href:window.location.href},services.history.location.pathname)}}))))),setTimeout(()=>{services.overlays.banners.remove(bannerId)},15e3),services.history.replace(visualize_constants.b.LANDING_PAGE_PATH)}},[services]),null},VisualizeByValueEditor=({onAppLeave:onAppLeave})=>{const[originatingApp,setOriginatingApp]=Object(external_kbnSharedDeps_React_.useState)(),{services:services}=Object(public_.useKibana)(),[eventEmitter]=Object(external_kbnSharedDeps_React_.useState)(new events.EventEmitter),[hasUnsavedChanges,setHasUnsavedChanges]=Object(external_kbnSharedDeps_React_.useState)(!1),[embeddableId,setEmbeddableId]=Object(external_kbnSharedDeps_React_.useState)(),[valueInput,setValueInput]=Object(external_kbnSharedDeps_React_.useState)();Object(external_kbnSharedDeps_React_.useEffect)(()=>{const{originatingApp:value,embeddableId:embeddableIdValue,valueInput:valueInputValue}=services.stateTransferService.getIncomingEditorState(public_0.VisualizeConstants.APP_ID)||{};setOriginatingApp(value),setValueInput(valueInputValue),setEmbeddableId(embeddableIdValue),valueInputValue||services.history.replace(public_0.VisualizeConstants.LANDING_PAGE_PATH)},[services]);const isChromeVisible=useChromeVisibility(services.chrome),{byValueVisInstance:byValueVisInstance,visEditorRef:visEditorRef,visEditorController:visEditorController}=useVisByValue(services,eventEmitter,isChromeVisible,valueInput,originatingApp),{appState:appState,hasUnappliedChanges:hasUnappliedChanges}=useVisualizeAppState(services,eventEmitter,byValueVisInstance),{isEmbeddableRendered:isEmbeddableRendered,currentAppState:currentAppState}=useEditorUpdates(services,eventEmitter,setHasUnsavedChanges,appState,byValueVisInstance,visEditorController);return useLinkedSearchUpdates(services,eventEmitter,appState,byValueVisInstance),Object(external_kbnSharedDeps_React_.useEffect)(()=>()=>{eventEmitter.removeAllListeners()},[eventEmitter]),external_kbnSharedDeps_React_default.a.createElement(VisualizeEditorCommon,{visInstance:byValueVisInstance,appState:appState,currentAppState:currentAppState,isChromeVisible:isChromeVisible,hasUnsavedChanges:hasUnsavedChanges,hasUnappliedChanges:hasUnappliedChanges,isEmbeddableRendered:isEmbeddableRendered,originatingApp:originatingApp,setOriginatingApp:setOriginatingApp,setHasUnsavedChanges:setHasUnsavedChanges,visEditorRef:visEditorRef,embeddableId:embeddableId,onAppLeave:onAppLeave})},VisualizeApp=({onAppLeave:onAppLeave})=>{const{services:{data:{query:query},kbnUrlStateStorage:kbnUrlStateStorage}}=Object(public_.useKibana)(),{pathname:pathname}=Object(external_kbnSharedDeps_ReactRouterDom_.useLocation)();return Object(external_kbnSharedDeps_React_.useEffect)(()=>{const{stop:stop}=Object(data_public_.syncQueryStateWithUrl)(query,kbnUrlStateStorage);return()=>stop()},[query,kbnUrlStateStorage,pathname]),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Switch,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{exact:!0,path:""+visualize_constants.b.EDIT_BY_VALUE_PATH},external_kbnSharedDeps_React_default.a.createElement(VisualizeByValueEditor,{onAppLeave:onAppLeave})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{path:[visualize_constants.b.CREATE_PATH,visualize_constants.b.EDIT_PATH+"/:id"]},external_kbnSharedDeps_React_default.a.createElement(VisualizeEditor,{onAppLeave:onAppLeave})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Route,{exact:!0,path:[visualize_constants.b.LANDING_PAGE_PATH,visualize_constants.b.WIZARD_STEP_1_PAGE_PATH]},external_kbnSharedDeps_React_default.a.createElement(VisualizeListing,null)),external_kbnSharedDeps_React_default.a.createElement(VisualizeNoMatch,null))},renderApp=({element:element,onAppLeave:onAppLeave},services)=>{var chrome,docLinks;chrome=services.chrome,docLinks=services.docLinks,chrome.setHelpExtension({appName:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.helpMenu.appName",{defaultMessage:"Visualize Library"}),links:[{linkType:"documentation",href:""+docLinks.links.visualize.guide}]}),services.visualizeCapabilities.save||(chrome=>{chrome.setBadge({text:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:external_kbnSharedDeps_KbnI18n_.i18n.translate("visualize.badge.readOnly.tooltip",{defaultMessage:"Unable to save visualizations to the library"}),iconType:"glasses"})})(services.chrome);const app=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_.Router,{history:services.history},external_kbnSharedDeps_React_default.a.createElement(public_.KibanaContextProvider,{services:services},external_kbnSharedDeps_React_default.a.createElement(services.presentationUtil.ContextProvider,null,external_kbnSharedDeps_React_default.a.createElement(services.i18n.Context,null,external_kbnSharedDeps_React_default.a.createElement(VisualizeApp,{onAppLeave:onAppLeave})))));return external_kbnSharedDeps_ReactDom_default.a.render(app,element),()=>external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(element)}}])]);